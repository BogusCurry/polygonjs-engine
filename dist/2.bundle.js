(window.webpackJsonpPOLY=window.webpackJsonpPOLY||[]).push([[2],{341:function(e,r,t){"use strict";t.d(r,"a",(function(){return o}));var n=t(349),a=t(335),i={};function o(e){a.a.call(this,e)}o.prototype=Object.assign(Object.create(a.a.prototype),{constructor:o,load:function(e,r,t,a){void 0===e&&(e=""),void 0!==this.path&&(e=this.path+e),e=this.manager.resolveURL(e);var o=this,s=n.a.get(e);if(void 0!==s)return o.manager.itemStart(e),setTimeout((function(){r&&r(s),o.manager.itemEnd(e)}),0),s;if(void 0===i[e]){var f=e.match(/^data:(.*?)(;base64)?,(.*)$/);if(f){var h=f[1],l=!!f[2],u=f[3];u=decodeURIComponent(u),l&&(u=atob(u));try{var c,v=(this.responseType||"").toLowerCase();switch(v){case"arraybuffer":case"blob":for(var p=new Uint8Array(u.length),d=0;d<u.length;d++)p[d]=u.charCodeAt(d);c="blob"===v?new Blob([p.buffer],{type:h}):p.buffer;break;case"document":var w=new DOMParser;c=w.parseFromString(u,h);break;case"json":c=JSON.parse(u);break;default:c=u}setTimeout((function(){r&&r(c),o.manager.itemEnd(e)}),0)}catch(r){setTimeout((function(){a&&a(r),o.manager.itemError(e),o.manager.itemEnd(e)}),0)}}else{i[e]=[],i[e].push({onLoad:r,onProgress:t,onError:a});var y=new XMLHttpRequest;for(var g in y.open("GET",e,!0),y.addEventListener("load",(function(r){var t=this.response,a=i[e];if(delete i[e],200===this.status||0===this.status){0===this.status&&console.warn("THREE.FileLoader: HTTP Status 0 received."),n.a.add(e,t);for(var s=0,f=a.length;s<f;s++){(h=a[s]).onLoad&&h.onLoad(t)}o.manager.itemEnd(e)}else{for(s=0,f=a.length;s<f;s++){var h;(h=a[s]).onError&&h.onError(r)}o.manager.itemError(e),o.manager.itemEnd(e)}}),!1),y.addEventListener("progress",(function(r){for(var t=i[e],n=0,a=t.length;n<a;n++){var o=t[n];o.onProgress&&o.onProgress(r)}}),!1),y.addEventListener("error",(function(r){var t=i[e];delete i[e];for(var n=0,a=t.length;n<a;n++){var s=t[n];s.onError&&s.onError(r)}o.manager.itemError(e),o.manager.itemEnd(e)}),!1),y.addEventListener("abort",(function(r){var t=i[e];delete i[e];for(var n=0,a=t.length;n<a;n++){var s=t[n];s.onError&&s.onError(r)}o.manager.itemError(e),o.manager.itemEnd(e)}),!1),void 0!==this.responseType&&(y.responseType=this.responseType),void 0!==this.withCredentials&&(y.withCredentials=this.withCredentials),y.overrideMimeType&&y.overrideMimeType(void 0!==this.mimeType?this.mimeType:"text/plain"),this.requestHeader)y.setRequestHeader(g,this.requestHeader[g]);y.send(null)}return o.manager.itemStart(e),y}i[e].push({onLoad:r,onProgress:t,onError:a})},setResponseType:function(e){return this.responseType=e,this},setWithCredentials:function(e){return this.withCredentials=e,this},setMimeType:function(e){return this.mimeType=e,this},setRequestHeader:function(e){return this.requestHeader=e,this}})},451:function(e,r,t){"use strict";t.d(r,"a",(function(){return s}));var n=t(4),a=t(341),i=t(122),o=t(335);function s(e){o.a.call(this,e)}s.prototype=Object.assign(Object.create(o.a.prototype),{constructor:s,load:function(e,r,t,o){var s=this,f=new i.a,h=new a.a(this.manager);return h.setResponseType("arraybuffer"),h.setPath(this.path),h.load(e,(function(e){var t=s.parse(e);t&&(void 0!==t.image?f.image=t.image:void 0!==t.data&&(f.image.width=t.width,f.image.height=t.height,f.image.data=t.data),f.wrapS=void 0!==t.wrapS?t.wrapS:n.l,f.wrapT=void 0!==t.wrapT?t.wrapT:n.l,f.magFilter=void 0!==t.magFilter?t.magFilter:n.R,f.minFilter=void 0!==t.minFilter?t.minFilter:n.R,f.anisotropy=void 0!==t.anisotropy?t.anisotropy:1,void 0!==t.format&&(f.format=t.format),void 0!==t.type&&(f.type=t.type),void 0!==t.mipmaps&&(f.mipmaps=t.mipmaps,f.minFilter=n.U),1===t.mipmapCount&&(f.minFilter=n.R),f.needsUpdate=!0,r&&r(f,t))}),t,o),f}})},621:function(e,r,t){"use strict";t.r(r),t.d(r,"EXRLoader",(function(){return H}));var n=t(451),a=t(4),i={},o=void 0,s=i;function f(e,r){var t,n=e.split("."),a=s;!(n[0]in a)&&a.execScript&&a.execScript("var "+n[0]);for(;n.length&&(t=n.shift());)n.length||r===o?a=a[t]?a[t]:a[t]={}:a[t]=r}var h="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&"undefined"!=typeof DataView;function l(e){var r,t,n,a,i,o,s,f,l,u,c=e.length,v=0,p=Number.POSITIVE_INFINITY;for(f=0;f<c;++f)e[f]>v&&(v=e[f]),e[f]<p&&(p=e[f]);for(r=1<<v,t=new(h?Uint32Array:Array)(r),n=1,a=0,i=2;n<=v;){for(f=0;f<c;++f)if(e[f]===n){for(o=0,s=a,l=0;l<n;++l)o=o<<1|1&s,s>>=1;for(u=n<<16|f,l=o;l<r;l+=i)t[l]=u;++a}++n,a<<=1,i<<=1}return[t,v,p]}function u(e,r){switch(this.g=[],this.h=32768,this.d=this.f=this.a=this.l=0,this.input=h?new Uint8Array(e):e,this.m=!1,this.i=v,this.r=!1,!r&&(r={})||(r.index&&(this.a=r.index),r.bufferSize&&(this.h=r.bufferSize),r.bufferType&&(this.i=r.bufferType),r.resize&&(this.r=r.resize)),this.i){case c:this.b=32768,this.c=new(h?Uint8Array:Array)(32768+this.h+258);break;case v:this.b=0,this.c=new(h?Uint8Array:Array)(this.h),this.e=this.z,this.n=this.v,this.j=this.w;break;default:throw Error("invalid inflate mode")}}var c=0,v=1,p={t:c,s:v};u.prototype.k=function(){for(;!this.m;){var e=z(this,3);switch(1&e&&(this.m=!0),e>>>=1){case 0:var r=this.input,t=this.a,n=this.c,a=this.b,i=r.length,s=o,f=n.length,u=o;if(this.d=this.f=0,t+1>=i)throw Error("invalid uncompressed block header: LEN");if(s=r[t++]|r[t++]<<8,t+1>=i)throw Error("invalid uncompressed block header: NLEN");if(s===~(r[t++]|r[t++]<<8))throw Error("invalid uncompressed block header: length verify");if(t+s>r.length)throw Error("input buffer is broken");switch(this.i){case c:for(;a+s>n.length;){if(s-=u=f-a,h)n.set(r.subarray(t,t+u),a),a+=u,t+=u;else for(;u--;)n[a++]=r[t++];this.b=a,n=this.e(),a=this.b}break;case v:for(;a+s>n.length;)n=this.e({p:2});break;default:throw Error("invalid inflate mode")}if(h)n.set(r.subarray(t,t+s),a),a+=s,t+=s;else for(;s--;)n[a++]=r[t++];this.a=t,this.b=a,this.c=n;break;case 1:this.j(R,x);break;case 2:var p,d,w,y,b=z(this,5)+257,m=z(this,5)+1,A=z(this,4)+4,E=new(h?Uint8Array:Array)(g.length),S=o,U=o,I=o,M=o,O=o;for(O=0;O<A;++O)E[g[O]]=z(this,3);if(!h)for(O=A,A=E.length;O<A;++O)E[g[O]]=0;for(p=l(E),S=new(h?Uint8Array:Array)(b+m),O=0,y=b+m;O<y;)switch(U=P(this,p),U){case 16:for(M=3+z(this,2);M--;)S[O++]=I;break;case 17:for(M=3+z(this,3);M--;)S[O++]=0;I=0;break;case 18:for(M=11+z(this,7);M--;)S[O++]=0;I=0;break;default:I=S[O++]=U}d=l(h?S.subarray(0,b):S.slice(0,b)),w=l(h?S.subarray(b):S.slice(b)),this.j(d,w);break;default:throw Error("unknown BTYPE: "+e)}}return this.n()};var d,w,y=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],g=h?new Uint16Array(y):y,b=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],m=h?new Uint16Array(b):b,A=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],E=h?new Uint8Array(A):A,S=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],U=h?new Uint16Array(S):S,I=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],M=h?new Uint8Array(I):I,O=new(h?Uint8Array:Array)(288);for(d=0,w=O.length;d<w;++d)O[d]=143>=d?8:255>=d?9:279>=d?7:8;var C,k,R=l(O),T=new(h?Uint8Array:Array)(30);for(C=0,k=T.length;C<k;++C)T[C]=5;var x=l(T);function z(e,r){for(var t,n=e.f,a=e.d,i=e.input,o=e.a,s=i.length;a<r;){if(o>=s)throw Error("input buffer is broken");n|=i[o++]<<a,a+=8}return t=n&(1<<r)-1,e.f=n>>>r,e.d=a-r,e.a=o,t}function P(e,r){for(var t,n,a=e.f,i=e.d,o=e.input,s=e.a,f=o.length,h=r[0],l=r[1];i<l&&!(s>=f);)a|=o[s++]<<i,i+=8;if((n=(t=h[a&(1<<l)-1])>>>16)>i)throw Error("invalid code length: "+n);return e.f=a>>n,e.d=i-n,e.a=s,65535&t}function N(e,r){var t,n;switch(this.input=e,this.a=0,!r&&(r={})||(r.index&&(this.a=r.index),r.verify&&(this.A=r.verify)),t=e[this.a++],n=e[this.a++],15&t){case L:this.method=L;break;default:throw Error("unsupported compression method")}if(0!=((t<<8)+n)%31)throw Error("invalid fcheck flag:"+((t<<8)+n)%31);if(32&n)throw Error("fdict flag is not supported");this.q=new u(e,{index:this.a,bufferSize:r.bufferSize,bufferType:r.bufferType,resize:r.resize})}u.prototype.j=function(e,r){var t=this.c,n=this.b;this.o=e;for(var a,i,o,s,f=t.length-258;256!==(a=P(this,e));)if(256>a)n>=f&&(this.b=n,t=this.e(),n=this.b),t[n++]=a;else for(s=m[i=a-257],0<E[i]&&(s+=z(this,E[i])),a=P(this,r),o=U[a],0<M[a]&&(o+=z(this,M[a])),n>=f&&(this.b=n,t=this.e(),n=this.b);s--;)t[n]=t[n++-o];for(;8<=this.d;)this.d-=8,this.a--;this.b=n},u.prototype.w=function(e,r){var t=this.c,n=this.b;this.o=e;for(var a,i,o,s,f=t.length;256!==(a=P(this,e));)if(256>a)n>=f&&(f=(t=this.e()).length),t[n++]=a;else for(s=m[i=a-257],0<E[i]&&(s+=z(this,E[i])),a=P(this,r),o=U[a],0<M[a]&&(o+=z(this,M[a])),n+s>f&&(f=(t=this.e()).length);s--;)t[n]=t[n++-o];for(;8<=this.d;)this.d-=8,this.a--;this.b=n},u.prototype.e=function(){var e,r,t=new(h?Uint8Array:Array)(this.b-32768),n=this.b-32768,a=this.c;if(h)t.set(a.subarray(32768,t.length));else for(e=0,r=t.length;e<r;++e)t[e]=a[e+32768];if(this.g.push(t),this.l+=t.length,h)a.set(a.subarray(n,n+32768));else for(e=0;32768>e;++e)a[e]=a[n+e];return this.b=32768,a},u.prototype.z=function(e){var r,t,n,a=this.input.length/this.a+1|0,i=this.input,o=this.c;return e&&("number"==typeof e.p&&(a=e.p),"number"==typeof e.u&&(a+=e.u)),2>a?t=(n=(i.length-this.a)/this.o[2]/2*258|0)<o.length?o.length+n:o.length<<1:t=o.length*a,h?(r=new Uint8Array(t)).set(o):r=o,this.c=r},u.prototype.n=function(){var e,r,t,n,a,i=0,o=this.c,s=this.g,f=new(h?Uint8Array:Array)(this.l+(this.b-32768));if(0===s.length)return h?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);for(r=0,t=s.length;r<t;++r)for(n=0,a=(e=s[r]).length;n<a;++n)f[i++]=e[n];for(r=32768,t=this.b;r<t;++r)f[i++]=o[r];return this.g=[],this.buffer=f},u.prototype.v=function(){var e,r=this.b;return h?this.r?(e=new Uint8Array(r)).set(this.c.subarray(0,r)):e=this.c.subarray(0,r):(this.c.length>r&&(this.c.length=r),e=this.c),this.buffer=e},N.prototype.k=function(){var e,r,t=this.input;if(e=this.q.k(),this.a=this.q.a,this.A){r=(t[this.a++]<<24|t[this.a++]<<16|t[this.a++]<<8|t[this.a++])>>>0;var n=e;if("string"==typeof n){var a,i,o=n.split("");for(a=0,i=o.length;a<i;a++)o[a]=(255&o[a].charCodeAt(0))>>>0;n=o}for(var s,f=1,h=0,l=n.length,u=0;0<l;){l-=s=1024<l?1024:l;do{h+=f+=n[u++]}while(--s);f%=65521,h%=65521}if(r!==(h<<16|f)>>>0)throw Error("invalid adler-32 checksum")}return e};var L=8;f("Zlib.Inflate",N),f("Zlib.Inflate.prototype.decompress",N.prototype.k);var D,_,F,j,X={ADAPTIVE:p.s,BLOCK:p.t};if(Object.keys)D=Object.keys(X);else for(_ in D=[],F=0,X)D[F++]=_;for(F=0,j=D.length;F<j;++F)f("Zlib.Inflate.BufferType."+(_=D[F]),X[_]);var Z=i.Zlib,H=function(e){n.a.call(this,e),this.type=a.D};H.prototype=Object.assign(Object.create(n.a.prototype),{constructor:H,parse:function(e){const r=Math.pow(2.7182818,2.2);const t={l:0,c:0,lc:0};function n(e,r,n,a,i){for(;n<e;)r=r<<8|x(a,i),n+=8;n-=e,t.l=r>>n&(1<<e)-1,t.c=r,t.lc=n}const i=new Array(59);function o(e,r,a,o,s,f,h){for(var l=a,u=0,c=0;s<=f;s++){if(l.value-a.value>o)return!1;n(6,u,c,e,l);var v=t.l;if(u=t.c,c=t.lc,h[s]=v,63==v){if(l.value-a.value>o)throw"Something wrong with hufUnpackEncTable";n(8,u,c,e,l);var p=t.l+6;if(u=t.c,c=t.lc,s+p>f+1)throw"Something wrong with hufUnpackEncTable";for(;p--;)h[s++]=0;s--}else if(v>=59){if(s+(p=v-59+2)>f+1)throw"Something wrong with hufUnpackEncTable";for(;p--;)h[s++]=0;s--}}!function(e){for(var r=0;r<=58;++r)i[r]=0;for(r=0;r<65537;++r)i[e[r]]+=1;var t=0;for(r=58;r>0;--r){var n=t+i[r]>>1;i[r]=t,t=n}for(r=0;r<65537;++r){var a=e[r];a>0&&(e[r]=a|i[a]++<<6)}}(h)}function s(e){return 63&e}function f(e){return e>>6}const h={c:0,lc:0};function l(e,r,t,n){e=e<<8|x(t,n),r+=8,h.c=e,h.lc=r}const u={c:0,lc:0};function c(e,r,t,n,a,i,o,s,f,c){if(e==r){n<8&&(l(t,n,a,o),t=h.c,n=h.lc);var v=t>>(n-=8);v=new Uint8Array([v])[0];if(f.value+v>c)return!1;for(var p=s[f.value-1];v-- >0;)s[f.value++]=p}else{if(!(f.value<c))return!1;s[f.value++]=e}u.c=t,u.lc=n}function v(e){var r=function(e){return 65535&e}(e);return r>32767?r-65536:r}const p={a:0,b:0};function d(e,r){var t=v(e),n=v(r),a=t+(1&n)+(n>>1),i=a,o=a-n;p.a=i,p.b=o}function w(e,r,t,n,a,i){for(var o,s=t>a?a:t,f=1;f<=s;)f<<=1;for(o=f>>=1,f>>=1;f>=1;){for(var h,l,u,c,v=0,w=v+i*(a-o),y=i*f,g=i*o,b=n*f,m=n*o;v<=w;v+=g){for(var A=v,E=v+n*(t-o);A<=E;A+=m){var S=A+b,U=(I=A+y)+b;d(e[A+r],e[I+r]),h=p.a,u=p.b,d(e[S+r],e[U+r]),l=p.a,c=p.b,d(h,l),e[A+r]=p.a,e[S+r]=p.b,d(u,c),e[I+r]=p.a,e[U+r]=p.b}if(t&f){var I=A+y;d(e[A+r],e[I+r]),h=p.a,e[I+r]=p.b,e[A+r]=h}}if(a&f)for(A=v,E=v+n*(t-o);A<=E;A+=m){S=A+b;d(e[A+r],e[S+r]),h=p.a,e[S+r]=p.b,e[A+r]=h}o=f,f>>=1}return v}function y(e,r,t,n,a,i){var v=t.value,p=T(r,t),d=T(r,t);t.value+=4;var w=T(r,t);if(t.value+=4,p<0||p>=65537||d<0||d>=65537)throw"Something wrong with HUF_ENCSIZE";var y=new Array(65537),g=new Array(16384);if(function(e){for(var r=0;r<16384;r++)e[r]={},e[r].len=0,e[r].lit=0,e[r].p=null}(g),o(e,0,t,n-(t.value-v),p,d,y),w>8*(n-(t.value-v)))throw"Something wrong with hufUncompress";!function(e,r,t,n){for(;r<=t;r++){var a=f(e[r]),i=s(e[r]);if(a>>i)throw"Invalid table entry";if(i>14){if((u=n[a>>i-14]).len)throw"Invalid table entry";if(u.lit++,u.p){var o=u.p;u.p=new Array(u.lit);for(var h=0;h<u.lit-1;++h)u.p[h]=o[h]}else u.p=new Array(1);u.p[u.lit-1]=r}else if(i){var l=0;for(h=1<<14-i;h>0;h--){var u;if((u=n[(a<<14-i)+l]).len||u.p)throw"Invalid table entry";u.len=i,u.lit=r,l++}}}}(y,p,d,g),function(e,r,t,n,a,i,o,v,p,d){for(var w=0,y=0,g=v,b=Math.trunc(a.value+(i+7)/8);a.value<b;)for(l(w,y,t,a),w=h.c,y=h.lc;y>=14;){if((S=r[w>>y-14&16383]).len)y-=S.len,c(S.lit,o,w,y,t,0,a,p,d,g),w=u.c,y=u.lc;else{if(!S.p)throw"hufDecode issues";var m;for(m=0;m<S.lit;m++){for(var A=s(e[S.p[m]]);y<A&&a.value<b;)l(w,y,t,a),w=h.c,y=h.lc;if(y>=A&&f(e[S.p[m]])==(w>>y-A&(1<<A)-1)){y-=A,c(S.p[m],o,w,y,t,0,a,p,d,g),w=u.c,y=u.lc;break}}if(m==S.lit)throw"hufDecode issues"}}var E=8-i&7;for(w>>=E,y-=E;y>0;){var S;if(!(S=r[w<<14-y&16383]).len)throw"hufDecode issues";y-=S.len,c(S.lit,o,w,y,t,0,a,p,d,g),w=u.c,y=u.lc}}(y,g,e,0,t,w,d,i,a,{value:0})}function g(e){for(var r=1;r<e.length;r++){var t=e[r-1]+e[r]-128;e[r]=t}}function b(e,r){for(var t=0,n=Math.floor((e.length+1)/2),a=0,i=e.length-1;!(a>i||(r[a++]=e[t++],a>i));)r[a++]=e[n++]}function m(e){for(var r=e.byteLength,t=new Array,n=0,a=new DataView(e);r>0;){var i=a.getInt8(n++);if(i<0){r-=(s=-i)+1;for(var o=0;o<s;o++)t.push(a.getUint8(n++))}else{var s=i;r-=2;var f=a.getUint8(n++);for(o=0;o<s+1;o++)t.push(f)}}return t}function A(e,r,t){for(var n,a=1;a<64;)65280==(n=r[e.value])?a=64:n>>8==255?a+=255&n:(t[a]=n,a++),e.value++}function E(e,r){r[0]=L(e[0]),r[1]=L(e[1]),r[2]=L(e[5]),r[3]=L(e[6]),r[4]=L(e[14]),r[5]=L(e[15]),r[6]=L(e[27]),r[7]=L(e[28]),r[8]=L(e[2]),r[9]=L(e[4]),r[10]=L(e[7]),r[11]=L(e[13]),r[12]=L(e[16]),r[13]=L(e[26]),r[14]=L(e[29]),r[15]=L(e[42]),r[16]=L(e[3]),r[17]=L(e[8]),r[18]=L(e[12]),r[19]=L(e[17]),r[20]=L(e[25]),r[21]=L(e[30]),r[22]=L(e[41]),r[23]=L(e[43]),r[24]=L(e[9]),r[25]=L(e[11]),r[26]=L(e[18]),r[27]=L(e[24]),r[28]=L(e[31]),r[29]=L(e[40]),r[30]=L(e[44]),r[31]=L(e[53]),r[32]=L(e[10]),r[33]=L(e[19]),r[34]=L(e[23]),r[35]=L(e[32]),r[36]=L(e[39]),r[37]=L(e[45]),r[38]=L(e[52]),r[39]=L(e[54]),r[40]=L(e[20]),r[41]=L(e[22]),r[42]=L(e[33]),r[43]=L(e[38]),r[44]=L(e[46]),r[45]=L(e[51]),r[46]=L(e[55]),r[47]=L(e[60]),r[48]=L(e[21]),r[49]=L(e[34]),r[50]=L(e[37]),r[51]=L(e[47]),r[52]=L(e[50]),r[53]=L(e[56]),r[54]=L(e[59]),r[55]=L(e[61]),r[56]=L(e[35]),r[57]=L(e[36]),r[58]=L(e[48]),r[59]=L(e[49]),r[60]=L(e[57]),r[61]=L(e[58]),r[62]=L(e[62]),r[63]=L(e[63])}function S(e){const r=.5*Math.cos(.7853975),t=.5*Math.cos(.196349375),n=.5*Math.cos(.39269875),a=.5*Math.cos(3*3.14159/16),i=.5*Math.cos(.981746875),o=.5*Math.cos(3*3.14159/8),s=.5*Math.cos(1.374445625);for(var f=new Array(4),h=new Array(4),l=new Array(4),u=new Array(4),c=0;c<8;++c){var v=8*c;f[0]=n*e[v+2],f[1]=o*e[v+2],f[2]=n*e[v+6],f[3]=o*e[v+6],h[0]=t*e[v+1]+a*e[v+3]+i*e[v+5]+s*e[v+7],h[1]=a*e[v+1]-s*e[v+3]-t*e[v+5]-i*e[v+7],h[2]=i*e[v+1]-t*e[v+3]+s*e[v+5]+a*e[v+7],h[3]=s*e[v+1]-i*e[v+3]+a*e[v+5]-t*e[v+7],l[0]=r*(e[v+0]+e[v+4]),l[3]=r*(e[v+0]-e[v+4]),l[1]=f[0]+f[3],l[2]=f[1]-f[2],u[0]=l[0]+l[1],u[1]=l[3]+l[2],u[2]=l[3]-l[2],u[3]=l[0]-l[1],e[v+0]=u[0]+h[0],e[v+1]=u[1]+h[1],e[v+2]=u[2]+h[2],e[v+3]=u[3]+h[3],e[v+4]=u[3]-h[3],e[v+5]=u[2]-h[2],e[v+6]=u[1]-h[1],e[v+7]=u[0]-h[0]}for(var p=0;p<8;++p)f[0]=n*e[16+p],f[1]=o*e[16+p],f[2]=n*e[48+p],f[3]=o*e[48+p],h[0]=t*e[8+p]+a*e[24+p]+i*e[40+p]+s*e[56+p],h[1]=a*e[8+p]-s*e[24+p]-t*e[40+p]-i*e[56+p],h[2]=i*e[8+p]-t*e[24+p]+s*e[40+p]+a*e[56+p],h[3]=s*e[8+p]-i*e[24+p]+a*e[40+p]-t*e[56+p],l[0]=r*(e[p]+e[32+p]),l[3]=r*(e[p]-e[32+p]),l[1]=f[0]+f[3],l[2]=f[1]-f[2],u[0]=l[0]+l[1],u[1]=l[3]+l[2],u[2]=l[3]-l[2],u[3]=l[0]-l[1],e[0+p]=u[0]+h[0],e[8+p]=u[1]+h[1],e[16+p]=u[2]+h[2],e[24+p]=u[3]+h[3],e[32+p]=u[3]-h[3],e[40+p]=u[2]-h[2],e[48+p]=u[1]-h[1],e[56+p]=u[0]-h[0]}function U(e){for(var r=0;r<64;++r){var t=e[0][r],n=e[1][r],a=e[2][r];e[0][r]=t+1.5747*a,e[1][r]=t-.1873*n-.4682*a,e[2][r]=t+1.8556*n}}function I(e,r,t){for(var n=0;n<64;++n)r[t+n]=F(M(e[n]))}function M(e){return e<=1?Math.sign(e)*Math.pow(Math.abs(e),2.2):Math.sign(e)*Math.pow(r,Math.abs(e)-1)}function O(e){var r=e.array.slice(e.offset.value,e.offset.value+e.size);void 0===Z&&console.error("THREE.EXRLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js");var t=new Z.Inflate(r,{resize:!0,verify:!0}),n=new Uint8Array(t.decompress().buffer),a=new Uint8Array(n.length);return g(n),b(n,a),new DataView(a.buffer)}function C(e){var r=e.viewer,t={value:e.offset.value},n=new Uint8Array(e.width*e.lines*(B.channels.length*e.type*2)),a={version:P(r,t),unknownUncompressedSize:P(r,t),unknownCompressedSize:P(r,t),acCompressedSize:P(r,t),dcCompressedSize:P(r,t),rleCompressedSize:P(r,t),rleUncompressedSize:P(r,t),rleRawSize:P(r,t),totalAcUncompressedCount:P(r,t),totalDcUncompressedCount:P(r,t),acCompression:P(r,t)};if(a.version<2)throw"EXRLoader.parse: "+B.compression+" version "+a.version+" is unsupported";for(var i=new Array,o=j(r,t)-2;o>0;){var s=k(r.buffer,t),f=z(r,t),h=f>>2&3,l=new Int8Array([(f>>4)-1])[0],u=z(r,t);i.push({name:s,index:l,type:u,compression:h}),o-=s.length+3}for(var c=B.channels,v=new Array(e.channels),p=0;p<e.channels;++p){var d=v[p]={},w=c[p];d.name=w.name,d.compression=0,d.decoded=!1,d.type=w.pixelType,d.pLinear=w.pLinear,d.width=e.width,d.height=e.lines}for(var g={idx:new Array(3)},b=0;b<e.channels;++b)for(d=v[b],p=0;p<i.length;++p){var M=i[p];d.name==M.name&&(d.compression=M.compression,M.index>=0&&(g.idx[M.index]=b),d.offset=b)}if(a.acCompressedSize>0)switch(a.acCompression){case 0:var C=new Uint16Array(a.totalAcUncompressedCount);y(e.array,r,t,a.acCompressedSize,C,a.totalAcUncompressedCount);break;case 1:var R=e.array.slice(t.value,t.value+a.totalAcUncompressedCount),T=new Z.Inflate(R,{resize:!0,verify:!0});C=new Uint16Array(T.decompress().buffer);t.value+=a.totalAcUncompressedCount}if(a.dcCompressedSize>0){var x={array:e.array,offset:t,size:a.dcCompressedSize},N=new Uint16Array(O(x).buffer);t.value+=a.dcCompressedSize}if(a.rleRawSize>0){R=e.array.slice(t.value,t.value+a.rleCompressedSize);var D=m((T=new Z.Inflate(R,{resize:!0,verify:!0})).decompress().buffer);t.value+=a.rleCompressedSize}var _=0,F=new Array(v.length);for(p=0;p<F.length;++p)F[p]=new Array;for(var X=0;X<e.lines;++X)for(var H=0;H<v.length;++H)F[H].push(_),_+=v[H].width*e.type*2;!function(e,r,t,n,a,i){var o=new DataView(i.buffer),s=t[e.idx[0]].width,f=t[e.idx[0]].height,h=Math.floor(s/8),l=Math.ceil(s/8),u=Math.ceil(f/8),c=s-8*(l-1),v=f-8*(u-1),p={value:0},d=new Array(3),w=new Array(3),y=new Array(3),g=new Array(3),b=new Array(3);for(let t=0;t<3;++t)b[t]=r[e.idx[t]],d[t]=t<1?0:d[t-1]+l*u,w[t]=new Float32Array(64),y[t]=new Uint16Array(64),g[t]=new Uint16Array(64*l);for(let r=0;r<u;++r){var m=8;r==u-1&&(m=v);var M=8;for(let e=0;e<l;++e){e==l-1&&(M=c);for(let e=0;e<3;++e)y[e].fill(0),y[e][0]=a[d[e]++],A(p,n,y[e]),E(y[e],w[e]),S(w[e]);U(w);for(let r=0;r<3;++r)I(w[r],g[r],64*e)}let i=0;for(let n=0;n<3;++n){let a=t[e.idx[n]].type;for(let e=8*r;e<8*r+m;++e){i=b[n][e];for(let r=0;r<h;++r){let t=64*r+8*(7&e);o.setUint16(i+0*a,g[n][t+0],!0),o.setUint16(i+2*a,g[n][t+1],!0),o.setUint16(i+4*a,g[n][t+2],!0),o.setUint16(i+6*a,g[n][t+3],!0),o.setUint16(i+8*a,g[n][t+4],!0),o.setUint16(i+10*a,g[n][t+5],!0),o.setUint16(i+12*a,g[n][t+6],!0),o.setUint16(i+14*a,g[n][t+7],!0),i+=16*a}}if(h!=l)for(let e=8*r;e<8*r+m;++e){let r=b[n][e]+8*h*2*a,t=64*h+8*(7&e);for(let e=0;e<M;++e)o.setUint16(r+2*e*a,g[n][t+e],!0)}}}for(var O=new Uint16Array(s),C=(o=new DataView(i.buffer),0);C<3;++C){t[e.idx[C]].decoded=!0;var k=t[e.idx[C]].type;if(2==t[C].type)for(var R=0;R<f;++R){let e=b[C][R];for(var T=0;T<s;++T)O[T]=o.getUint16(e+2*T*k,!0);for(T=0;T<s;++T)o.setFloat32(e+2*T*k,L(O[T]),!0)}}}(g,F,v,C,N,n);for(p=0;p<v.length;++p){if(!(d=v[p]).decoded)switch(d.compression){case 2:var V=0,q=0;for(X=0;X<e.lines;++X){for(var W=F[p][V],Y=0;Y<d.width;++Y){for(var G=0;G<2*d.type;++G)n[W++]=D[q+G*d.width*d.height];q++}V++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(n.buffer)}function k(e,r){for(var t=new Uint8Array(e),n=0;0!=t[r.value+n];)n+=1;var a=(new TextDecoder).decode(t.slice(r.value,r.value+n));return r.value=r.value+n+1,a}function R(e,r){var t=e.getUint32(0,!0);return r.value=r.value+8,t}function T(e,r){var t=e.getUint32(r.value,!0);return r.value=r.value+4,t}function x(e,r){var t=e[r.value];return r.value=r.value+1,t}function z(e,r){var t=e.getUint8(r.value);return r.value=r.value+1,t}function P(e,r){var t=Number(e.getBigInt64(r.value,!0));return r.value+=8,t}function N(e,r){var t=e.getFloat32(r.value,!0);return r.value+=4,t}function L(e){var r=(31744&e)>>10,t=1023&e;return(e>>15?-1:1)*(r?31===r?t?NaN:1/0:Math.pow(2,r-15)*(1+t/1024):t/1024*6103515625e-14)}var D,_,F=(D=new Float32Array(1),_=new Int32Array(D.buffer),function(e){D[0]=e;var r=_[0],t=r>>16&32768,n=r>>12&2047,a=r>>23&255;return a<103?t:a>142?(t|=31744,t|=(255==a?0:1)&&8388607&r):a<113?t|=((n|=2048)>>114-a)+(n>>113-a&1):(t|=a-112<<10|n>>1,t+=1&n)});function j(e,r){var t=e.getUint16(r.value,!0);return r.value+=2,t}function X(e,r,t,n,a){if("string"===n||"stringvector"===n||"iccProfile"===n)return function(e,r,t){var n=(new TextDecoder).decode(new Uint8Array(e).slice(r.value,r.value+t));return r.value=r.value+t,n}(r,t,a);if("chlist"===n)return function(e,r,t,n){for(var a=t.value,i=[];t.value<a+n-1;){var o=k(r,t),s=T(e,t),f=z(e,t);t.value+=3;var h=T(e,t),l=T(e,t);i.push({name:o,pixelType:s,pLinear:f,xSampling:h,ySampling:l})}return t.value+=1,i}(e,r,t,a);if("chromaticities"===n)return function(e,r){return{redX:N(e,r),redY:N(e,r),greenX:N(e,r),greenY:N(e,r),blueX:N(e,r),blueY:N(e,r),whiteX:N(e,r),whiteY:N(e,r)}}(e,t);if("compression"===n)return function(e,r){return["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"][z(e,r)]}(e,t);if("box2i"===n)return function(e,r){return{xMin:T(e,r),yMin:T(e,r),xMax:T(e,r),yMax:T(e,r)}}(e,t);if("lineOrder"===n)return function(e,r){return["INCREASING_Y"][z(e,r)]}(e,t);if("float"===n)return N(e,t);if("v2f"===n)return function(e,r){return[N(e,r),N(e,r)]}(e,t);if("int"===n)return T(e,t);throw"Cannot parse value for unsupported type: "+n}var H=new DataView(e),V=new Uint8Array(e),B={};H.getUint32(0,!0),H.getUint8(4,!0),H.getUint8(5,!0);for(var q={value:8},W=!0;W;){var Y=k(e,q);if(0==Y)W=!1;else{var G=X(H,e,q,k(e,q),T(H,q));B[Y]=G}}var J,K,Q,$,ee=B.dataWindow.yMax+1;switch(B.compression){case"NO_COMPRESSION":K=1,J=function(e){return new DataView(e.array.buffer,e.offset.value,e.size)};break;case"RLE_COMPRESSION":K=1,J=function(e){var r=e.viewer.buffer.slice(e.offset.value,e.offset.value+e.size),t=new Uint8Array(m(r)),n=new Uint8Array(t.length);return g(t),b(t,n),new DataView(n.buffer)};break;case"ZIPS_COMPRESSION":K=1,J=O;break;case"ZIP_COMPRESSION":K=16,J=O;break;case"PIZ_COMPRESSION":K=32,J=function(e){for(var r=e.viewer,t={value:e.offset.value},n=e.width*K*(B.channels.length*e.type),a=new Uint16Array(n),i=new Uint8Array(8192),o=0,s=new Array(e.channels),f=0;f<e.channels;f++)s[f]={},s[f].start=o,s[f].end=s[f].start,s[f].nx=e.width,s[f].ny=e.lines,s[f].size=e.type,o+=s[f].nx*s[f].ny*s[f].size;var h=j(r,t),l=j(r,t);if(l>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(h<=l)for(f=0;f<l-h+1;f++)i[f+h]=z(r,t);var u=new Uint16Array(65536);!function(e,r){for(var t=0,n=0;n<65536;++n)(0==n||e[n>>3]&1<<(7&n))&&(r[t++]=n);for(var a=t-1;t<65536;)r[t++]=0}(i,u);var c=T(r,t);for(y(e.array,r,t,c,a,o),f=0;f<e.channels;++f)for(var v=s[f],p=0;p<s[f].size;++p)w(a,v.start+p,v.nx,v.size,v.ny,v.nx*v.size);!function(e,r,t){for(var n=0;n<t;++n)r[n]=e[r[n]]}(u,a,o);for(var d=0,g=new Uint8Array(a.buffer.byteLength),b=0;b<e.lines;b++)for(var m=0;m<e.channels;m++){var A=(v=s[m]).nx*v.size,E=new Uint8Array(a.buffer,2*v.end,2*A);g.set(E,d),d+=2*A,v.end+=A}return new DataView(g.buffer)};break;case"DWAA_COMPRESSION":K=32,J=C;break;case"DWAB_COMPRESSION":K=256,J=C;break;default:throw"EXRLoader.parse: "+B.compression+" is unsupported"}var re=B.channels[0].pixelType;if(1===re)switch(this.type){case a.D:$=function(e,r){return L(j(e,r))},Q=2;break;case a.I:$=j,Q=2}else{if(2!==re)throw"EXRLoader.parse: unsupported pixelType "+re+" for "+B.compression+".";switch(this.type){case a.D:$=N,Q=4;break;case a.I:throw"EXRLoader.parse: unsupported HalfFloatType texture for FloatType image file."}}for(var te=ee/K,ne=0;ne<te;ne++)R(H,q);var ae=B.dataWindow.xMax-B.dataWindow.xMin+1,ie=B.dataWindow.yMax-B.dataWindow.yMin+1,oe=ae*ie*4;switch(this.type){case a.D:var se=new Float32Array(oe);B.channels.length<4&&se.fill(1,0,oe);break;case a.I:se=new Uint16Array(oe);B.channels.length<4&&se.fill(15360,0,oe);break;default:console.error("THREE.EXRLoader: unsupported type: ",this.type)}for(var fe,he,le={R:0,G:1,B:2,A:3},ue={size:0,width:ae,lines:K,offset:q,array:V,viewer:H,type:re,channels:B.channels.length},ce={value:0},ve=0;ve<ie/K;ve++){fe=T(H,q),oe=T(H,q),ue.lines=fe+K>ie?ie-fe:K,ue.offset=q,ue.size=oe,he=J(ue),q.value+=oe;for(var pe=0;pe<K;pe++){var de=pe+ve*K;if(de>=ie)break;for(var we=0;we<B.channels.length;we++)for(var ye=le[B.channels[we].name],ge=0;ge<ae;ge++){var be=pe*(B.channels.length*ae)+we*ae+ge;ce.value=be*Q;var me=$(he,ce);se[4*ae*(ie-1-de)+4*ge+ye]=me}}}return{header:B,width:ae,height:ie,data:se,format:a.Db,type:this.type}},setDataType:function(e){return this.type=e,this},load:function(e,r,t,i){return n.a.prototype.load.call(this,e,(function(e,t){switch(e.type){case a.D:case a.I:e.encoding=a.Q,e.minFilter=a.R,e.magFilter=a.R,e.generateMipmaps=!1,e.flipY=!1}r&&r(e,t)}),t,i)}})}}]);
//# sourceMappingURL=2.bundle.js.map