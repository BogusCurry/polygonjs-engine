{"version":3,"sources":["webpack:///./node_modules/three/src/constants.js","webpack:///./node_modules/three/src/core/BufferAttribute.js","webpack:///./node_modules/three/src/renderers/WebGLRenderTarget.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLAnimation.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLAttributes.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLBackground.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLBufferRenderer.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLCapabilities.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLClipping.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLExtensions.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLGeometries.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLIndexedBufferRenderer.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLInfo.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLMorphtargets.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLObjects.js","webpack:///./node_modules/three/src/textures/DataTexture2DArray.js","webpack:///./node_modules/three/src/textures/DataTexture3D.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLUniforms.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLShader.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLProgram.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLPrograms.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLProperties.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLRenderLists.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLLights.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLRenderStates.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLShadowMap.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/vsm_vert.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/vsm_frag.glsl.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLState.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLTextures.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLUtils.js","webpack:///./node_modules/three/src/renderers/WebGLMultiviewRenderTarget.js","webpack:///./node_modules/three/src/renderers/webgl/WebGLMultiview.js","webpack:///./node_modules/three/src/cameras/ArrayCamera.js","webpack:///./node_modules/three/src/renderers/webxr/WebXRManager.js","webpack:///./node_modules/three/src/renderers/WebGLRenderer.js","webpack:///./node_modules/three/src/animation/AnimationAction.js","webpack:///./node_modules/three/src/animation/PropertyMixer.js","webpack:///./node_modules/three/src/animation/AnimationMixer.js","webpack:///./node_modules/three/src/extras/core/Font.js","webpack:///./node_modules/three/src/loaders/FontLoader.js","webpack:///./node_modules/three/src/objects/Skeleton.js","webpack:///./node_modules/three/src/geometries/PolyhedronGeometry.js","webpack:///./node_modules/three/src/math/Interpolant.js","webpack:///./node_modules/three/src/textures/DataTexture.js","webpack:///./node_modules/three/src/objects/Points.js","webpack:///./node_modules/three/src/core/DirectGeometry.js","webpack:///./node_modules/three/src/core/BufferGeometry.js","webpack:///./node_modules/three/src/materials/MeshStandardMaterial.js","webpack:///./node_modules/three/src/core/InterleavedBufferAttribute.js","webpack:///./node_modules/three/src/objects/Line.js","webpack:///./node_modules/three/src/loaders/DataTextureLoader.js","webpack:///./node_modules/three/src/extras/core/CurvePath.js","webpack:///./node_modules/three/src/extras/core/Path.js","webpack:///./node_modules/three/src/textures/CompressedTexture.js","webpack:///./node_modules/three/src/math/Color.js","webpack:///./node_modules/three/src/geometries/CylinderGeometry.js","webpack:///./node_modules/three/src/math/Triangle.js","webpack:///./node_modules/three/src/math/Plane.js","webpack:///./node_modules/three/src/lights/LightShadow.js","webpack:///./node_modules/three/src/cameras/Camera.js","webpack:///./node_modules/three/src/extras/Earcut.js","webpack:///./node_modules/three/src/extras/ShapeUtils.js","webpack:///./node_modules/three/src/extras/core/ShapePath.js","webpack:///./node_modules/three/src/materials/Material.js","webpack:///./node_modules/three/src/renderers/shaders/UniformsLib.js","webpack:///./node_modules/three/src/materials/MeshLambertMaterial.js","webpack:///./node_modules/three/src/math/Ray.js","webpack:///./node_modules/three/src/core/InterleavedBuffer.js","webpack:///./node_modules/three/src/loaders/LoaderUtils.js","webpack:///./node_modules/three/src/geometries/SphereGeometry.js","webpack:///./node_modules/three/src/geometries/BoxGeometry.js","webpack:///./node_modules/three/src/extras/curves/EllipseCurve.js","webpack:///./node_modules/three/src/core/Layers.js","webpack:///./node_modules/three/src/core/Object3D.js","webpack:///./node_modules/three/src/animation/tracks/BooleanKeyframeTrack.js","webpack:///./node_modules/three/src/animation/tracks/ColorKeyframeTrack.js","webpack:///./node_modules/three/src/animation/tracks/StringKeyframeTrack.js","webpack:///./node_modules/three/src/animation/AnimationClip.js","webpack:///./node_modules/three/src/textures/VideoTexture.js","webpack:///./node_modules/three/src/core/Geometry.js","webpack:///./node_modules/three/src/math/Euler.js","webpack:///./node_modules/three/src/objects/SkinnedMesh.js","webpack:///./node_modules/three/src/materials/MeshPhongMaterial.js","webpack:///./node_modules/three/src/geometries/ExtrudeGeometry.js","webpack:///./node_modules/three/src/extras/core/Curve.js","webpack:///./node_modules/three/src/lights/DirectionalLightShadow.js","webpack:///./node_modules/three/src/lights/DirectionalLight.js","webpack:///./node_modules/three/src/lights/PointLightShadow.js","webpack:///./node_modules/three/src/lights/PointLight.js","webpack:///./node_modules/three/src/math/Math.js","webpack:///./node_modules/three/src/lights/SpotLightShadow.js","webpack:///./node_modules/three/src/lights/SpotLight.js","webpack:///./node_modules/three/src/materials/RawShaderMaterial.js","webpack:///./node_modules/three/src/math/Frustum.js","webpack:///./node_modules/three/src/loaders/Cache.js","webpack:///./node_modules/three/src/math/Spherical.js","webpack:///./node_modules/three/src/animation/tracks/NumberKeyframeTrack.js","webpack:///./node_modules/three/src/math/Matrix4.js","webpack:///./node_modules/three/src/animation/tracks/VectorKeyframeTrack.js","webpack:///./node_modules/three/src/extras/core/Shape.js","webpack:///./node_modules/three/src/extras/curves/ArcCurve.js","webpack:///./node_modules/three/src/extras/curves/CubicBezierCurve3.js","webpack:///./node_modules/three/src/extras/curves/LineCurve3.js","webpack:///./node_modules/three/src/extras/curves/QuadraticBezierCurve3.js","webpack:///./node_modules/three/src/extras/curves/Curves.js","webpack:///./node_modules/three/src/loaders/Loader.js","webpack:///./node_modules/three/src/geometries/OctahedronGeometry.js","webpack:///./node_modules/three/src/geometries/IcosahedronGeometry.js","webpack:///./node_modules/three/src/geometries/TorusKnotGeometry.js","webpack:///./node_modules/three/src/geometries/TorusGeometry.js","webpack:///./node_modules/three/src/geometries/TextGeometry.js","webpack:///./node_modules/three/src/geometries/ShapeGeometry.js","webpack:///./node_modules/three/src/geometries/CircleGeometry.js","webpack:///./node_modules/three/src/core/InstancedBufferAttribute.js","webpack:///./node_modules/three/src/core/Face3.js","webpack:///./node_modules/three/src/math/interpolants/QuaternionLinearInterpolant.js","webpack:///./node_modules/three/src/animation/tracks/QuaternionKeyframeTrack.js","webpack:///./node_modules/three/src/objects/Mesh.js","webpack:///./node_modules/three/src/core/Raycaster.js","webpack:///./node_modules/three/src/extras/curves/CatmullRomCurve3.js","webpack:///./node_modules/three/src/math/Box2.js","webpack:///./node_modules/three/src/objects/InstancedMesh.js","webpack:///./node_modules/three/src/objects/Sprite.js","webpack:///./node_modules/three/src/materials/SpriteMaterial.js","webpack:///./node_modules/three/src/objects/LOD.js","webpack:///./node_modules/three/src/materials/ShadowMaterial.js","webpack:///./node_modules/three/src/materials/MeshPhysicalMaterial.js","webpack:///./node_modules/three/src/materials/MeshToonMaterial.js","webpack:///./node_modules/three/src/materials/MeshNormalMaterial.js","webpack:///./node_modules/three/src/materials/MeshMatcapMaterial.js","webpack:///./node_modules/three/src/materials/LineDashedMaterial.js","webpack:///./node_modules/three/src/loaders/MaterialLoader.js","webpack:///./node_modules/three/src/loaders/BufferGeometryLoader.js","webpack:///./node_modules/three/src/geometries/WireframeGeometry.js","webpack:///./node_modules/three/src/geometries/ParametricGeometry.js","webpack:///./node_modules/three/src/geometries/TetrahedronGeometry.js","webpack:///./node_modules/three/src/geometries/DodecahedronGeometry.js","webpack:///./node_modules/three/src/geometries/TubeGeometry.js","webpack:///./node_modules/three/src/geometries/RingGeometry.js","webpack:///./node_modules/three/src/geometries/LatheGeometry.js","webpack:///./node_modules/three/src/geometries/EdgesGeometry.js","webpack:///./node_modules/three/src/geometries/ConeGeometry.js","webpack:///./node_modules/three/src/loaders/ObjectLoader.js","webpack:///./node_modules/three/src/math/interpolants/CubicInterpolant.js","webpack:///./node_modules/three/src/loaders/TextureLoader.js","webpack:///./node_modules/three/src/lights/AmbientLight.js","webpack:///./node_modules/three/src/lights/RectAreaLight.js","webpack:///./node_modules/three/src/lights/HemisphereLight.js","webpack:///./node_modules/three/src/scenes/FogExp2.js","webpack:///./node_modules/three/src/scenes/Fog.js","webpack:///./node_modules/three/src/materials/MeshDepthMaterial.js","webpack:///./node_modules/three/src/materials/MeshDistanceMaterial.js","webpack:///./node_modules/three/src/math/Vector4.js","webpack:///./node_modules/three/src/objects/Bone.js","webpack:///./node_modules/three/src/extras/curves/CubicBezierCurve.js","webpack:///./node_modules/three/src/extras/curves/LineCurve.js","webpack:///./node_modules/three/src/extras/curves/QuadraticBezierCurve.js","webpack:///./node_modules/three/src/extras/curves/SplineCurve.js","webpack:///./node_modules/three/src/core/InstancedBufferGeometry.js","webpack:///./node_modules/three/src/math/Vector3.js","webpack:///./node_modules/three/src/renderers/shaders/UniformsUtils.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/alphamap_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/alphamap_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/alphatest_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/aomap_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/aomap_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/begin_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/beginnormal_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/bsdfs.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/bumpmap_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/clipping_planes_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/clipping_planes_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/clipping_planes_pars_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/clipping_planes_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/color_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/color_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/color_pars_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/color_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/common.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/cube_uv_reflection_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/defaultnormal_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/displacementmap_pars_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/displacementmap_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/emissivemap_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/emissivemap_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/encodings_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/encodings_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/envmap_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/envmap_common_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/envmap_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/envmap_pars_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/envmap_physical_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/envmap_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/fog_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/fog_pars_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/fog_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/fog_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/gradientmap_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/lightmap_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/lightmap_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/lights_lambert_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/lights_pars_begin.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/lights_toon_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/lights_toon_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/lights_phong_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/lights_phong_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/lights_physical_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/lights_physical_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/lights_fragment_begin.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/lights_fragment_maps.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/lights_fragment_end.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/logdepthbuf_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/logdepthbuf_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/logdepthbuf_pars_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/logdepthbuf_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/map_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/map_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/map_particle_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/map_particle_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/metalnessmap_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/metalnessmap_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/morphnormal_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/morphtarget_pars_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/morphtarget_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/normal_fragment_begin.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/normal_fragment_maps.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/normalmap_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/clearcoat_normal_fragment_begin.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/clearcoat_normal_fragment_maps.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/clearcoat_normalmap_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/packing.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/premultiplied_alpha_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/project_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/dithering_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/dithering_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/roughnessmap_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/roughnessmap_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/shadowmap_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/shadowmap_pars_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/shadowmap_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/shadowmask_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/skinbase_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/skinning_pars_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/skinning_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/skinnormal_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/specularmap_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/specularmap_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/tonemapping_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/tonemapping_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/uv_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/uv_pars_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/uv_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/uv2_pars_fragment.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/uv2_pars_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/uv2_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/worldpos_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/background_frag.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/background_vert.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/cube_frag.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/cube_vert.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/depth_frag.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/depth_vert.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/distanceRGBA_frag.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/distanceRGBA_vert.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/equirect_frag.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/equirect_vert.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/linedashed_frag.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/linedashed_vert.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/meshbasic_frag.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/meshbasic_vert.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/meshlambert_frag.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/meshlambert_vert.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/meshmatcap_frag.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/meshmatcap_vert.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/meshtoon_frag.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/meshtoon_vert.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/meshphong_frag.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/meshphong_vert.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/meshphysical_frag.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/meshphysical_vert.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/normal_frag.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/normal_vert.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/points_frag.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/points_vert.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/shadow_frag.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/shadow_vert.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/sprite_frag.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib/sprite_vert.glsl.js","webpack:///./node_modules/three/src/loaders/FileLoader.js","webpack:///./node_modules/three/src/materials/ShaderMaterial.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/default_vertex.glsl.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderChunk/default_fragment.glsl.js","webpack:///./node_modules/three/src/math/Matrix3.js","webpack:///./node_modules/three/src/utils.js","webpack:///./node_modules/three/src/loaders/ImageLoader.js","webpack:///./node_modules/three/src/loaders/LoadingManager.js","webpack:///./node_modules/three/src/textures/CubeTexture.js","webpack:///./node_modules/three/src/core/Clock.js","webpack:///./node_modules/three/src/math/interpolants/LinearInterpolant.js","webpack:///./node_modules/three/src/animation/PropertyBinding.js","webpack:///./node_modules/three/src/objects/LineLoop.js","webpack:///./node_modules/three/src/objects/Group.js","webpack:///./node_modules/three/src/math/Vector2.js","webpack:///./node_modules/three/src/materials/LineBasicMaterial.js","webpack:///./node_modules/three/src/extras/ImageUtils.js","webpack:///./node_modules/three/src/textures/Texture.js","webpack:///./node_modules/three/src/math/Quaternion.js","webpack:///./node_modules/three/src/lights/Light.js","webpack:///./node_modules/three/src/core/EventDispatcher.js","webpack:///./node_modules/three/src/objects/LineSegments.js","webpack:///./node_modules/three/src/renderers/shaders/ShaderLib.js","webpack:///./node_modules/three/src/math/interpolants/DiscreteInterpolant.js","webpack:///./node_modules/three/src/animation/KeyframeTrack.js","webpack:///./node_modules/three/src/geometries/PlaneGeometry.js","webpack:///./node_modules/three/src/materials/MeshBasicMaterial.js","webpack:///./node_modules/three/src/math/Sphere.js","webpack:///./node_modules/three/src/cameras/OrthographicCamera.js","webpack:///./node_modules/three/src/materials/PointsMaterial.js","webpack:///./node_modules/three/src/cameras/PerspectiveCamera.js","webpack:///./node_modules/three/src/animation/AnimationUtils.js","webpack:///./node_modules/three/src/extras/PMREMGenerator.js","webpack:///./node_modules/three/src/helpers/AxesHelper.js","webpack:///./node_modules/three/src/math/Box3.js","webpack:///./node_modules/three/src/extras/core/Interpolations.js","webpack:///./node_modules/three/src/scenes/Scene.js"],"names":["REVISION","MOUSE","LEFT","MIDDLE","RIGHT","ROTATE","DOLLY","PAN","TOUCH","DOLLY_PAN","DOLLY_ROTATE","CullFaceNone","CullFaceBack","CullFaceFront","CullFaceFrontBack","FrontFaceDirectionCW","FrontFaceDirectionCCW","BasicShadowMap","PCFShadowMap","PCFSoftShadowMap","VSMShadowMap","FrontSide","BackSide","DoubleSide","FlatShading","SmoothShading","NoColors","FaceColors","VertexColors","NoBlending","NormalBlending","AdditiveBlending","SubtractiveBlending","MultiplyBlending","CustomBlending","AddEquation","SubtractEquation","ReverseSubtractEquation","MinEquation","MaxEquation","ZeroFactor","OneFactor","SrcColorFactor","OneMinusSrcColorFactor","SrcAlphaFactor","OneMinusSrcAlphaFactor","DstAlphaFactor","OneMinusDstAlphaFactor","DstColorFactor","OneMinusDstColorFactor","SrcAlphaSaturateFactor","NeverDepth","AlwaysDepth","LessDepth","LessEqualDepth","EqualDepth","GreaterEqualDepth","GreaterDepth","NotEqualDepth","MultiplyOperation","MixOperation","AddOperation","NoToneMapping","LinearToneMapping","ReinhardToneMapping","Uncharted2ToneMapping","CineonToneMapping","ACESFilmicToneMapping","UVMapping","CubeReflectionMapping","CubeRefractionMapping","EquirectangularReflectionMapping","EquirectangularRefractionMapping","SphericalReflectionMapping","CubeUVReflectionMapping","CubeUVRefractionMapping","RepeatWrapping","ClampToEdgeWrapping","MirroredRepeatWrapping","NearestFilter","NearestMipmapNearestFilter","NearestMipMapNearestFilter","NearestMipmapLinearFilter","NearestMipMapLinearFilter","LinearFilter","LinearMipmapNearestFilter","LinearMipMapNearestFilter","LinearMipmapLinearFilter","LinearMipMapLinearFilter","UnsignedByteType","ByteType","ShortType","UnsignedShortType","IntType","UnsignedIntType","FloatType","HalfFloatType","UnsignedShort4444Type","UnsignedShort5551Type","UnsignedShort565Type","UnsignedInt248Type","AlphaFormat","RGBFormat","RGBAFormat","LuminanceFormat","LuminanceAlphaFormat","RGBEFormat","DepthFormat","DepthStencilFormat","RedFormat","RedIntegerFormat","RGFormat","RGIntegerFormat","RGBIntegerFormat","RGBAIntegerFormat","RGB_S3TC_DXT1_Format","RGBA_S3TC_DXT1_Format","RGBA_S3TC_DXT3_Format","RGBA_S3TC_DXT5_Format","RGB_PVRTC_4BPPV1_Format","RGB_PVRTC_2BPPV1_Format","RGBA_PVRTC_4BPPV1_Format","RGBA_PVRTC_2BPPV1_Format","RGB_ETC1_Format","RGBA_ASTC_4x4_Format","RGBA_ASTC_5x4_Format","RGBA_ASTC_5x5_Format","RGBA_ASTC_6x5_Format","RGBA_ASTC_6x6_Format","RGBA_ASTC_8x5_Format","RGBA_ASTC_8x6_Format","RGBA_ASTC_8x8_Format","RGBA_ASTC_10x5_Format","RGBA_ASTC_10x6_Format","RGBA_ASTC_10x8_Format","RGBA_ASTC_10x10_Format","RGBA_ASTC_12x10_Format","RGBA_ASTC_12x12_Format","LoopOnce","LoopRepeat","LoopPingPong","InterpolateDiscrete","InterpolateLinear","InterpolateSmooth","ZeroCurvatureEnding","ZeroSlopeEnding","WrapAroundEnding","TrianglesDrawMode","TriangleStripDrawMode","TriangleFanDrawMode","LinearEncoding","sRGBEncoding","GammaEncoding","RGBEEncoding","LogLuvEncoding","RGBM7Encoding","RGBM16Encoding","RGBDEncoding","BasicDepthPacking","RGBADepthPacking","TangentSpaceNormalMap","ObjectSpaceNormalMap","ZeroStencilOp","KeepStencilOp","ReplaceStencilOp","IncrementStencilOp","DecrementStencilOp","IncrementWrapStencilOp","DecrementWrapStencilOp","InvertStencilOp","NeverStencilFunc","LessStencilFunc","EqualStencilFunc","LessEqualStencilFunc","GreaterStencilFunc","NotEqualStencilFunc","GreaterEqualStencilFunc","AlwaysStencilFunc","StaticDrawUsage","DynamicDrawUsage","StreamDrawUsage","StaticReadUsage","DynamicReadUsage","StreamReadUsage","StaticCopyUsage","DynamicCopyUsage","StreamCopyUsage","_vector","BufferAttribute","array","itemSize","normalized","Array","isArray","TypeError","this","name","count","undefined","length","usage","updateRange","offset","version","Int8BufferAttribute","call","Int8Array","Uint8BufferAttribute","Uint8Array","Uint8ClampedBufferAttribute","Uint8ClampedArray","Int16BufferAttribute","Int16Array","Uint16BufferAttribute","Uint16Array","Int32BufferAttribute","Int32Array","Uint32BufferAttribute","Uint32Array","Float32BufferAttribute","Float32Array","Float64BufferAttribute","Float64Array","Object","defineProperty","prototype","set","value","assign","isBufferAttribute","onUploadCallback","setUsage","copy","source","constructor","copyAt","index1","attribute","index2","i","l","copyArray","copyColorsArray","colors","color","console","warn","r","g","b","copyVector2sArray","vectors","vector","x","y","copyVector3sArray","z","copyVector4sArray","w","applyMatrix3","m","getX","getY","getZ","setXYZ","applyMatrix4","applyNormalMatrix","transformDirection","index","setX","setY","setZ","getW","setW","setXY","setXYZW","onUpload","callback","clone","toJSON","type","slice","create","WebGLRenderTarget","width","height","options","scissor","scissorTest","viewport","texture","wrapS","wrapT","magFilter","minFilter","format","anisotropy","encoding","image","generateMipmaps","depthBuffer","stencilBuffer","depthTexture","isWebGLRenderTarget","setSize","dispose","dispatchEvent","WebGLAnimation","context","isAnimating","animationLoop","onAnimationFrame","time","frame","requestAnimationFrame","start","stop","setAnimationLoop","setContext","WebGLAttributes","gl","buffers","WeakMap","get","isInterleavedBufferAttribute","data","remove","deleteBuffer","buffer","delete","update","bufferType","createBuffer","bindBuffer","bufferData","FLOAT","UNSIGNED_SHORT","SHORT","UNSIGNED_INT","INT","BYTE","UNSIGNED_BYTE","bytesPerElement","BYTES_PER_ELEMENT","bufferSubData","subarray","updateBuffer","WebGLBackground","renderer","state","objects","premultipliedAlpha","planeMesh","boxMesh","clearColor","Color","clearAlpha","currentBackground","currentBackgroundVersion","setClear","alpha","getClearColor","setClearColor","getClearAlpha","setClearAlpha","render","renderList","scene","camera","forceClear","background","xr","session","getSession","environmentBlendMode","isColor","autoClear","clear","autoClearColor","autoClearDepth","autoClearStencil","isCubeTexture","isWebGLRenderTargetCube","mapping","Mesh","ShaderMaterial","uniforms","ShaderLib","cube","vertexShader","fragmentShader","side","depthTest","depthWrite","fog","geometry","deleteAttribute","onBeforeRender","matrixWorld","copyPosition","material","envMap","flipEnvMap","needsUpdate","unshift","isTexture","t2D","matrixAutoUpdate","updateMatrix","uvTransform","matrix","WebGLBufferRenderer","extensions","info","capabilities","mode","isWebGL2","setMode","drawArrays","renderInstances","primcount","extension","methodName","error","WebGLCapabilities","parameters","maxAnisotropy","getMaxPrecision","precision","getShaderPrecisionFormat","VERTEX_SHADER","HIGH_FLOAT","FRAGMENT_SHADER","MEDIUM_FLOAT","WebGL2RenderingContext","WebGL2ComputeRenderingContext","maxPrecision","logarithmicDepthBuffer","maxTextures","getParameter","MAX_TEXTURE_IMAGE_UNITS","maxVertexTextures","MAX_VERTEX_TEXTURE_IMAGE_UNITS","maxTextureSize","MAX_TEXTURE_SIZE","maxCubemapSize","MAX_CUBE_MAP_TEXTURE_SIZE","maxAttributes","MAX_VERTEX_ATTRIBS","maxVertexUniforms","MAX_VERTEX_UNIFORM_VECTORS","maxVaryings","MAX_VARYING_VECTORS","maxFragmentUniforms","MAX_FRAGMENT_UNIFORM_VECTORS","vertexTextures","floatFragmentTextures","getMaxAnisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT","floatVertexTextures","maxSamples","MAX_SAMPLES","WebGLClipping","scope","globalState","numGlobalPlanes","localClippingEnabled","renderingShadows","plane","Plane","viewNormalMatrix","Matrix3","uniform","resetGlobalState","numPlanes","numIntersection","projectPlanes","planes","dstOffset","skipTransform","nPlanes","dstArray","flatSize","viewMatrix","matrixWorldInverse","getNormalMatrix","i4","normal","toArray","constant","init","enableLocalClipping","enabled","beginShadows","endShadows","setState","clipIntersection","clipShadows","cache","fromCache","nGlobal","lGlobal","clippingState","WebGLExtensions","getExtension","WebGLGeometries","attributes","geometries","wireframeAttributes","onGeometryDispose","event","target","buffergeometry","removeEventListener","memory","updateWireframeAttribute","indices","geometryIndex","geometryPosition","position","a","c","push","ELEMENT_ARRAY_BUFFER","previousAttribute","object","addEventListener","isBufferGeometry","isGeometry","_bufferGeometry","BufferGeometry","setFromObject","geometryAttributes","ARRAY_BUFFER","morphAttributes","getWireframeAttribute","currentAttribute","WebGLIndexedBufferRenderer","setIndex","drawElements","WebGLInfo","calls","triangles","points","lines","textures","programs","autoReset","reset","instanceCount","TRIANGLES","LINES","LINE_STRIP","LINE_LOOP","POINTS","absNumericalSort","Math","abs","WebGLMorphtargets","influencesList","morphInfluences","program","objectInfluences","morphTargetInfluences","influences","id","morphTargets","morphNormals","influence","sort","morphInfluencesSum","setAttribute","morphBaseInfluence","morphTargetsRelative","getUniforms","setValue","WebGLObjects","updateList","updateFromObject","isInstancedMesh","instanceMatrix","DataTexture2DArray","depth","Texture","wrapR","flipY","DataTexture3D","isDataTexture2DArray","isDataTexture3D","emptyTexture","emptyTexture2dArray","emptyTexture3d","emptyCubeTexture","CubeTexture","arrayCacheF32","arrayCacheI32","mat4array","mat3array","mat2array","flatten","nBlocks","blockSize","firstElem","n","arraysEqual","allocTexUnits","allocateTextureUnit","setValueV1f","v","uniform1f","addr","setValueV2f","uniform2f","uniform2fv","setValueV3f","uniform3f","uniform3fv","setValueV4f","uniform4f","uniform4fv","setValueM2","elements","uniformMatrix2fv","setValueM3","uniformMatrix3fv","setValueM4","uniformMatrix4fv","setValueT1","unit","uniform1i","safeSetTexture2D","setValueT2DArray1","setTexture2DArray","setValueT3D1","setTexture3D","setValueT6","safeSetTextureCube","setValueV1i","setValueV2i","uniform2iv","setValueV3i","uniform3iv","setValueV4i","uniform4iv","setValueV1fArray","uniform1fv","setValueV1iArray","uniform1iv","setValueV2iArray","setValueV3iArray","setValueV4iArray","setValueV2fArray","size","setValueV3fArray","setValueV4fArray","setValueM2Array","setValueM3Array","setValueM4Array","setValueT1Array","units","setValueT6Array","SingleUniform","activeInfo","getSingularSetter","PureArrayUniform","getPureArraySetter","StructuredUniform","seq","map","updateCache","u","RePathPart","addUniform","container","uniformObject","parseUniform","path","pathLength","lastIndex","match","exec","matchEnd","idIsIndex","subscript","next","WebGLUniforms","getProgramParameter","ACTIVE_UNIFORMS","getActiveUniform","getUniformLocation","WebGLShader","string","shader","createShader","shaderSource","compileShader","setOptional","upload","values","seqWithValue","programIdCount","getEncodingComponents","Error","getShaderErrors","status","getShaderParameter","COMPILE_STATUS","log","getShaderInfoLog","trim","split","join","addLineNumbers","getShaderSource","getTexelDecodingFunction","functionName","components","getToneMappingFunction","toneMapping","toneMappingName","filterEmptyLine","replaceLightNums","replace","numDirLights","numSpotLights","numRectAreaLights","numPointLights","numHemiLights","numDirLightShadows","numSpotLightShadows","numPointLightShadows","replaceClippingPlaneNums","numClippingPlanes","numClipIntersection","includePattern","resolveIncludes","includeReplacer","include","ShaderChunk","loopPattern","unrollLoops","loopReplacer","end","snippet","parseInt","generatePrecision","precisionstring","WebGLProgram","cacheKey","prefixVertex","prefixFragment","getContext","defines","shadowMapTypeDefine","shadowMapType","generateShadowMapTypeDefine","envMapTypeDefine","envMapMode","generateEnvMapTypeDefine","envMapModeDefine","generateEnvMapModeDefine","envMapBlendingDefine","combine","generateEnvMapBlendingDefine","gammaFactorDefine","gammaFactor","customExtensions","rendererExtensions","derivatives","envMapCubeUV","bumpMap","tangentSpaceNormalMap","clearcoatNormalMap","flatShading","shaderID","fragDepth","shaderTextureLOD","filter","generateExtensions","customDefines","chunks","generateDefines","createProgram","numMultiviewViews","isRawShaderMaterial","instancing","supportsVertexTextures","maxBones","useFog","fogExp2","lightMap","aoMap","emissiveMap","normalMap","objectSpaceNormalMap","displacementMap","specularMap","roughnessMap","metalnessMap","alphaMap","vertexTangents","vertexColors","vertexUvs","uvsVertexOnly","skinning","useVertexTexture","doubleSided","flipSided","shadowMapEnabled","sizeAttenuation","alphaTest","matcap","sheen","gradientMap","physicallyCorrectLights","dithering","outputEncoding","mapEncoding","matcapEncoding","envMapEncoding","emissiveMapEncoding","lightMapEncoding","depthPacking","isGLSL3ShaderMaterial","versionRegex","isShaderMaterial","cachedUniforms","cachedAttributes","vertexGlsl","fragmentGlsl","glVertexShader","glFragmentShader","attachShader","index0AttributeName","bindAttribLocation","linkProgram","debug","checkShaderErrors","programLog","getProgramInfoLog","vertexLog","fragmentLog","runnable","haveDiagnostics","LINK_STATUS","vertexErrors","fragmentErrors","getError","VALIDATE_STATUS","diagnostics","prefix","deleteShader","getAttributes","ACTIVE_ATTRIBUTES","getActiveAttrib","getAttribLocation","fetchAttributeLocations","destroy","deleteProgram","usedTimes","WebGLPrograms","shaderIDs","MeshDepthMaterial","MeshDistanceMaterial","MeshNormalMaterial","MeshBasicMaterial","MeshLambertMaterial","MeshPhongMaterial","MeshToonMaterial","MeshStandardMaterial","MeshPhysicalMaterial","MeshMatcapMaterial","LineBasicMaterial","LineDashedMaterial","PointsMaterial","ShadowMaterial","SpriteMaterial","parameterNames","getTextureEncodingFromMap","getParameters","lights","shadows","nClipPlanes","nClipIntersection","environment","isMeshStandardMaterial","isSkinnedMesh","bones","skeleton","nVertexUniforms","nVertexMatrices","floor","min","allocateBones","currentRenderTarget","getRenderTarget","isWebGLMultiviewRenderTarget","numViews","normalMapType","isFogExp2","maxMorphTargets","maxMorphNormals","directional","point","spot","rectArea","hemi","directionalShadowMap","pointShadowMap","spotShadowMap","shadowMap","toneMapped","getProgramCacheKey","onBeforeCompile","toString","acquireProgram","p","pl","preexistingProgram","releaseProgram","indexOf","pop","WebGLProperties","properties","key","painterSortStable","groupOrder","renderOrder","reversePainterSortStable","WebGLRenderList","renderItems","renderItemsIndex","opaque","transparent","defaultProgram","getNextRenderItem","group","renderItem","customOpaqueSort","customTransparentSort","WebGLRenderLists","lists","onSceneDispose","list","cameras","UniformsCache","light","direction","Vector3","shadow","shadowBias","shadowRadius","shadowMapSize","Vector2","distance","coneCos","penumbraCos","decay","shadowCameraNear","shadowCameraFar","skyColor","groundColor","halfWidth","halfHeight","nextVersion","shadowCastingLightsFirst","lightA","lightB","castShadow","WebGLLights","hash","directionalLength","pointLength","spotLength","rectAreaLength","hemiLength","numDirectionalShadows","numPointShadows","numSpotShadows","ambient","probe","directionalShadowMatrix","spotShadowMatrix","pointShadowMatrix","vector3","matrix4","Matrix4","matrix42","setup","intensity","isAmbientLight","isLightProbe","j","addScaledVector","sh","coefficients","isDirectionalLight","multiplyScalar","setFromMatrixPosition","sub","bias","radius","mapSize","isSpotLight","cos","angle","penumbra","isRectAreaLight","identity","premultiply","extractRotation","isPointLight","near","far","isHemisphereLight","normalize","WebGLRenderState","lightsArray","shadowsArray","setupLights","pushLight","pushShadow","shadowLight","WebGLRenderStates","renderStates","renderState","has","WebGLShadowMap","_renderer","_objects","_frustum","Frustum","_shadowMapSize","_viewportSize","_viewport","Vector4","_depthMaterials","_distanceMaterials","_materialCache","shadowSide","0","1","2","shadowMaterialVertical","SAMPLE_RATE","HALF_SAMPLE_RATE","shadow_pass","resolution","shadowMaterialHorizonal","HORIZONAL_PASS","fullScreenTri","fullScreenMesh","VSMPass","setRenderTarget","mapPass","renderBufferDirect","getDepthMaterialVariant","useMorphing","useSkinning","useInstancing","getDistanceMaterialVariant","getDepthMaterial","result","getMaterialVariant","customMaterial","customDepthMaterial","customDistanceMaterial","clippingPlanes","keyA","uuid","keyB","materialsForVariant","cachedMaterial","visible","wireframe","wireframeLinewidth","linewidth","isMeshDistanceMaterial","referencePosition","nearDistance","farDistance","renderObject","shadowCamera","layers","test","isMesh","isLine","isPoints","receiveShadow","frustumCulled","intersectsObject","modelViewMatrix","multiplyMatrices","groups","k","kl","groupMaterial","materialIndex","depthMaterial","children","autoUpdate","activeCubeFace","getActiveCubeFace","activeMipmapLevel","getActiveMipmapLevel","_state","setBlending","setTest","setScissorTest","il","shadowFrameExtents","getFrameExtents","multiply","isPointLightShadow","pars","updateProjectionMatrix","viewportCount","getViewportCount","vp","getViewport","updateMatrices","getFrustum","WebGLState","colorBuffer","locked","currentColorMask","currentColorClear","setMask","colorMask","setLocked","lock","equals","currentDepthMask","currentDepthFunc","currentDepthClear","enable","DEPTH_TEST","disable","depthMask","setFunc","depthFunc","NEVER","ALWAYS","LESS","LEQUAL","EQUAL","GEQUAL","GREATER","NOTEQUAL","clearDepth","currentStencilMask","currentStencilFunc","currentStencilRef","currentStencilFuncMask","currentStencilFail","currentStencilZFail","currentStencilZPass","currentStencilClear","stencilTest","STENCIL_TEST","stencilMask","stencilFunc","stencilRef","setOp","stencilFail","stencilZFail","stencilZPass","stencilOp","stencil","clearStencil","maxVertexAttributes","newAttributes","enabledAttributes","attributeDivisors","enabledCapabilities","currentProgram","currentBlendingEnabled","currentBlending","currentBlendEquation","currentBlendSrc","currentBlendDst","currentBlendEquationAlpha","currentBlendSrcAlpha","currentBlendDstAlpha","currentPremultipledAlpha","currentFlipSided","currentCullFace","currentLineWidth","currentPolygonOffsetFactor","currentPolygonOffsetUnits","MAX_COMBINED_TEXTURE_IMAGE_UNITS","lineWidthAvailable","glVersion","VERSION","parseFloat","currentTextureSlot","currentBoundTextures","currentScissor","currentViewport","createTexture","bindTexture","texParameteri","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","texImage2D","RGBA","emptyTextures","enableAttributeAndDivisor","meshPerAttribute","enableVertexAttribArray","TEXTURE_2D","TEXTURE_CUBE_MAP","TEXTURE_CUBE_MAP_POSITIVE_X","setFlipSided","setCullFace","CULL_FACE","equationToGL","FUNC_ADD","FUNC_SUBTRACT","FUNC_REVERSE_SUBTRACT","MIN","MAX","MIN_EXT","MAX_EXT","factorToGL","ZERO","ONE","SRC_COLOR","SRC_ALPHA","SRC_ALPHA_SATURATE","DST_COLOR","DST_ALPHA","ONE_MINUS_SRC_COLOR","ONE_MINUS_SRC_ALPHA","ONE_MINUS_DST_COLOR","ONE_MINUS_DST_ALPHA","blending","blendEquation","blendSrc","blendDst","blendEquationAlpha","blendSrcAlpha","blendDstAlpha","BLEND","blendEquationSeparate","blendFuncSeparate","blendFunc","frontFace","CW","CCW","cullFace","BACK","FRONT","FRONT_AND_BACK","setPolygonOffset","polygonOffset","factor","POLYGON_OFFSET_FILL","activeTexture","webglSlot","TEXTURE0","initAttributes","enableAttribute","disableUnusedAttributes","disableVertexAttribArray","useProgram","setMaterial","frontFaceCW","colorWrite","stencilWrite","stencilWriteMask","stencilFuncMask","polygonOffsetFactor","polygonOffsetUnits","setLineWidth","lineWidth","SCISSOR_TEST","webglType","webglTexture","boundTexture","unbindTexture","compressedTexImage2D","apply","arguments","texImage3D","WebGLTextures","_gl","utils","_canvas","_videoTextures","useOffscreenCanvas","OffscreenCanvas","err","createCanvas","document","createElementNS","resizeImage","needsPowerOfTwo","needsNewCanvas","maxSize","scale","max","HTMLImageElement","HTMLCanvasElement","ImageBitmap","floorPowerOfTwo","canvas","drawImage","isPowerOfTwo","textureNeedsGenerateMipmaps","supportsMips","generateMipmap","__maxMipLevel","LOG2E","getInternalFormat","internalFormatName","glFormat","glType","internalFormat","RED","R32F","HALF_FLOAT","R16F","R8","RGB","RGB32F","RGB16F","RGB8","RGBA32F","RGBA16F","RGBA8","filterFallback","f","LINEAR","onTextureDispose","textureProperties","__webglInit","deleteTexture","__webglTexture","deallocateTexture","isVideoTexture","onRenderTargetDispose","renderTarget","renderTargetProperties","deleteFramebuffer","__webglFramebuffer","__webglDepthbuffer","deleteRenderbuffer","__webglColorTexture","__webglDepthStencilTexture","__webglViewFramebuffers","deallocateRenderTarget","textureUnits","setTexture2D","slot","updateVideoTexture","__version","complete","uploadTexture","setTextureCube","initTexture","pixelStorei","UNPACK_FLIP_Y_WEBGL","isCompressed","isCompressedTexture","isDataTexture","cubeImage","mipmaps","convert","glInternalFormat","setTextureParameters","mipmap","mipmapImage","onUpdate","setTextureCubeDynamic","wrappingToGL","REPEAT","CLAMP_TO_EDGE","MIRRORED_REPEAT","filterToGL","NEAREST_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_NEAREST","LINEAR_MIPMAP_LINEAR","textureType","TEXTURE_WRAP_S","TEXTURE_WRAP_T","TEXTURE_3D","TEXTURE_2D_ARRAY","TEXTURE_WRAP_R","__currentAnisotropy","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","UNPACK_PREMULTIPLY_ALPHA_WEBGL","premultiplyAlpha","UNPACK_ALIGNMENT","unpackAlignment","textureNeedsPowerOfTwo","isDepthTexture","DEPTH_COMPONENT","DEPTH_COMPONENT32F","DEPTH_COMPONENT16","DEPTH_STENCIL","setupFrameBufferTexture","framebuffer","attachment","textureTarget","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","setupRenderBufferStorage","renderbuffer","isMultisample","bindRenderbuffer","RENDERBUFFER","samples","getRenderTargetSamples","renderbufferStorageMultisample","renderbufferStorage","framebufferRenderbuffer","DEPTH_ATTACHMENT","DEPTH24_STENCIL8","DEPTH_STENCIL_ATTACHMENT","setupDepthRenderbuffer","isCube","webglDepthTexture","setupDepthTexture","createRenderbuffer","isWebGLMultisampleRenderTarget","warnedTexture2D","warnedTextureCube","textureUnit","resetTextureUnits","setupRenderTarget","isMultiview","createFramebuffer","__webglMultisampledFramebuffer","__webglColorRenderbuffer","COLOR_ATTACHMENT0","__webglDepthRenderbuffer","ext","colorTexture","framebufferTextureMultiviewOVR","depthStencilTexture","UNSIGNED_INT_24_8","viewFramebuffers","framebufferTextureLayer","updateRenderTargetMipmap","updateMultisampleRenderTarget","READ_FRAMEBUFFER","DRAW_FRAMEBUFFER","mask","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT","blitFramebuffer","WebGLUtils","UNSIGNED_SHORT_4_4_4_4","UNSIGNED_SHORT_5_5_5_1","UNSIGNED_SHORT_5_6_5","HALF_FLOAT_OES","ALPHA","LUMINANCE","LUMINANCE_ALPHA","RED_INTEGER","RG","RG_INTEGER","RGB_INTEGER","RGBA_INTEGER","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","COMPRESSED_RGB_PVRTC_4BPPV1_IMG","COMPRESSED_RGB_PVRTC_2BPPV1_IMG","COMPRESSED_RGBA_PVRTC_4BPPV1_IMG","COMPRESSED_RGBA_PVRTC_2BPPV1_IMG","COMPRESSED_RGB_ETC1_WEBGL","UNSIGNED_INT_24_8_WEBGL","WebGLMultiviewRenderTarget","WebGLMultiview","mat3","mat4","cameraArray","renderSize","available","maxNumViews","getCameraArray","isArrayCamera","isAvailable","getContextAttributes","antialias","MAX_VIEWS_OVR","attachCamera","isMultiviewCompatible","getDrawingBufferSize","setNumViews","resizeRenderTarget","detachCamera","srcRenderTarget","srcFramebuffers","viewWidth","viewHeight","x1","y1","x2","y2","flush","updateCameraProjectionMatricesUniform","projectionMatrix","updateCameraViewMatricesUniform","updateObjectMatricesUniforms","ArrayCamera","PerspectiveCamera","WebXRManager","referenceSpace","referenceSpaceType","pose","controllers","inputSourcesMap","Map","cameraL","cameraR","cameraVR","onSessionEvent","controller","inputSource","onSessionEnd","forEach","setFramebuffer","animation","isPresenting","onRequestReferenceSpace","updateInputSources","inputSources","removed","added","getController","Group","setFramebufferScaleFactor","setReferenceSpaceType","getReferenceSpace","setSession","layerInit","baseLayer","XRWebGLLayer","updateRenderState","requestReferenceSpace","then","cameraLPos","cameraRPos","updateCamera","parent","getInverse","getCamera","updateMatrixWorld","ipd","distanceTo","projL","projR","topFov","bottomFov","leftFov","rightFov","left","right","zOffset","xOffset","decompose","quaternion","translateX","translateZ","compose","near2","far2","left2","right2","top2","bottom2","makePerspective","setProjectionFromUnion","onAnimationFrameCallback","getViewerPose","views","view","transform","inverse","fromArray","inputPose","getPose","targetRaySpace","rotation","WebGLRenderer","_context","_alpha","_depth","_stencil","_antialias","_premultipliedAlpha","_preserveDrawingBuffer","preserveDrawingBuffer","_powerPreference","powerPreference","_failIfMajorPerformanceCaveat","failIfMajorPerformanceCaveat","currentRenderList","currentRenderState","domElement","sortObjects","toneMappingExposure","toneMappingWhitePoint","programCache","renderLists","morphtargets","bufferRenderer","indexedBufferRenderer","_this","_isContextLost","_framebuffer","_currentActiveCubeFace","_currentActiveMipmapLevel","_currentRenderTarget","_currentFramebuffer","_currentMaterialId","_currentGeometryProgram","_currentCamera","_currentArrayCamera","_currentViewport","_currentScissor","_currentScissorTest","_width","_height","_pixelRatio","_opaqueSort","_transparentSort","_scissor","_scissorTest","_clipping","_clippingEnabled","_localClippingEnabled","_projScreenMatrix","_vector3","getTargetPixelRatio","contextAttributes","xrCompatible","onContextLost","onContextRestore","message","initGLContext","multiview","preventDefault","onMaterialDispose","releaseMaterialProgramReference","deallocateMaterial","programInfo","forceContextLoss","loseContext","forceContextRestore","restoreContext","getPixelRatio","setPixelRatio","getSize","updateStyle","style","setViewport","setDrawingBufferSize","pixelRatio","getCurrentViewport","isVector4","getScissor","setScissor","getScissorTest","boolean","setOpaqueSort","method","setTransparentSort","bits","renderBufferImmediate","hasPositions","hasNormals","hasUvs","uv","hasColors","programAttributes","positionArray","DYNAMIC_DRAW","vertexAttribPointer","normalArray","uvArray","colorArray","tempScene","Scene","determinant","setProgram","updateBuffers","rangeFactor","isInstancedBufferGeometry","materialDefaultAttributeValues","defaultAttributeValues","programAttribute","geometryAttribute","stride","isInstancedInterleavedBuffer","maxInstancedCount","isInstancedBufferAttribute","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","vertexAttrib1fv","setupVertexAttributes","dataCount","rangeStart","drawRange","rangeCount","groupStart","groupCount","Infinity","drawStart","drawEnd","drawCount","isLineSegments","isLineLoop","isSprite","compile","traverse","isLight","initMaterial","projectObject","isGroup","isLOD","intersectsSprite","isImmediateRenderObject","renderObjects","overrideMaterial","jl","camera2","normalMatrix","renderObjectImmediate","onAfterRender","materialProperties","lightsStateVersion","programCacheKey","programChange","numSupportedMorphTargets","numSupportedMorphNormals","clipping","needsLights","isMeshLambertMaterial","isMeshToonMaterial","isMeshPhongMaterial","isShadowMaterial","materialNeedsLights","ambientLightColor","lightProbe","directionalLights","spotLights","rectAreaLights","pointLights","hemisphereLights","progUniforms","uniformsList","useCache","refreshProgram","refreshMaterial","refreshLights","p_uniforms","m_uniforms","LN2","uCamPos","cameraPosition","isMeshBasicMaterial","isOrthographicCamera","boneTexture","sqrt","ceilPowerOfTwo","boneMatrices","DataTexture","boneTextureSize","fogColor","isFog","fogNear","fogFar","fogDensity","density","refreshUniformsFog","refreshUniformsCommon","refreshUniformsLambert","specular","shininess","bumpScale","normalScale","negate","displacementScale","displacementBias","refreshUniformsToon","refreshUniformsPhong","isMeshPhysicalMaterial","refreshUniformsStandard","reflectivity","clearcoat","clearcoatRoughness","clearcoatNormalScale","transparency","refreshUniformsPhysical","isMeshMatcapMaterial","refreshUniformsMatcap","isMeshDepthMaterial","refreshUniformsDepth","refreshUniformsDistance","isMeshNormalMaterial","refreshUniformsNormal","isLineBasicMaterial","diffuse","opacity","refreshUniformsLine","isLineDashedMaterial","dashSize","totalSize","gapSize","refreshUniformsDash","isPointsMaterial","uvScaleMap","refreshUniformsPoints","isSpriteMaterial","refreshUniformsSprites","ltc_1","UniformsLib","LTC_1","ltc_2","LTC_2","uniformsNeedUpdate","center","emissive","emissiveIntensity","uv2ScaleMap","refractionRatio","maxMipLevel","lightMapIntensity","aoMapIntensity","uv2Transform","roughness","metalness","envMapIntensity","window","isCamera","setFromMatrix","opaqueObjects","transparentObjects","readRenderTargetPixels","activeCubeFaceIndex","restore","textureFormat","IMPLEMENTATION_COLOR_READ_FORMAT","IMPLEMENTATION_COLOR_READ_TYPE","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","readPixels","copyFramebufferToTexture","level","levelScale","pow","copyTexImage2D","copyTextureToTexture","srcTexture","dstTexture","texSubImage2D","__THREE_DEVTOOLS__","CustomEvent","detail","EventDispatcher","AnimationAction","mixer","clip","localRoot","_mixer","_clip","_localRoot","tracks","nTracks","interpolants","interpolantSettings","endingStart","endingEnd","interpolant","createInterpolant","settings","_interpolantSettings","_interpolants","_propertyBindings","_cacheIndex","_byClipCacheIndex","_timeScaleInterpolant","_weightInterpolant","loop","_loopCount","_startTime","timeScale","_effectiveTimeScale","weight","_effectiveWeight","repetitions","paused","clampWhenFinished","zeroSlopeAtStart","zeroSlopeAtEnd","play","_activateAction","_deactivateAction","stopFading","stopWarping","isRunning","_isActiveAction","isScheduled","startAt","setLoop","setEffectiveWeight","getEffectiveWeight","fadeIn","duration","_scheduleFading","fadeOut","crossFadeFrom","fadeOutAction","warp","fadeInDuration","fadeOutDuration","startEndRatio","endStartRatio","crossFadeTo","fadeInAction","weightInterpolant","_takeBackControlInterpolant","setEffectiveTimeScale","getEffectiveTimeScale","setDuration","syncWith","action","halt","startTimeScale","endTimeScale","now","_lendControlInterpolant","times","parameterPositions","sampleValues","timeScaleInterpolant","getMixer","getClip","getRoot","_root","_update","deltaTime","timeDirection","accuIndex","startTime","timeRunning","_updateTimeScale","clipTime","_updateTime","_updateWeight","propertyMixers","evaluate","accumulate","interpolantValue","loopCount","pingPong","_setEndings","handle_stop","loopDelta","pending","atStart","atEnd","weightNow","weightThen","PropertyMixer","binding","typeName","valueSize","mixFunction","_slerp","_select","_lerp","_mixBufferRegion","cumulativeWeight","useCount","referenceCount","currentWeight","mix","originalValueOffset","e","saveOriginalState","getValue","restoreOriginalState","srcOffset","t","Quaternion","slerpFlat","s","AnimationMixer","root","_initMemoryManager","_accuIndex","_bindAction","prototypeAction","bindings","rootUuid","bindingsByRoot","_bindingsByRootAndName","bindingsByName","track","trackName","_addInactiveBinding","parsedPath","PropertyBinding","ValueTypeName","getValueSize","resultBuffer","clipUuid","actionsForClip","_actionsByClip","knownActions","_addInactiveAction","_lendBinding","_lendAction","_takeBackBinding","_takeBackAction","_actions","_nActiveActions","_bindings","_nActiveBindings","_controlInterpolants","_nActiveControlInterpolants","stats","actions","controlInterpolants","actionsByClip","actionByRoot","_removeInactiveAction","lastInactiveAction","cacheIndex","knownActionsForClip","lastKnownAction","byClipCacheIndex","_removeInactiveBindingsForAction","_removeInactiveBinding","prevIndex","lastActiveIndex","firstInactiveAction","firstInactiveIndex","lastActiveAction","bindingByName","propBinding","rootNode","lastInactiveBinding","keys","firstInactiveBinding","lastActiveBinding","LinearInterpolant","_controlInterpolantsResultBuffer","__cacheIndex","lastActiveInterpolant","clipAction","optionalRoot","clipObject","AnimationClip","findByName","existingAction","newAction","stopAllAction","nActions","nBindings","sign","setTime","timeInSeconds","uncacheClip","actionsToRemove","uncacheRoot","uncacheAction","Font","createPath","char","offsetX","offsetY","glyph","glyphs","cpx","cpy","cpx1","cpy1","cpx2","cpy2","ShapePath","o","outline","_cachedOutline","moveTo","lineTo","quadraticCurveTo","bezierCurveTo","ha","familyName","isFont","generateShapes","text","shapes","paths","chars","from","String","line_height","boundingBox","yMax","yMin","underlineThickness","ret","createPaths","toShapes","FontLoader","manager","Loader","load","url","onLoad","onProgress","onError","loader","FileLoader","setPath","json","JSON","parse","substring","font","_offsetMatrix","_identityMatrix","Skeleton","boneInverses","calculateInverses","bone","isBone","getBoneByName","PolyhedronGeometry","vertices","fromBufferGeometry","PolyhedronBufferGeometry","mergeVertices","vertexBuffer","uvBuffer","subdivideFace","cols","aj","lerp","bj","rows","pushVertex","vertex","getVertexByIndex","correctUV","azimuth","PI","atan2","subdivide","applyRadius","centroid","uvA","uvB","uvC","add","divideScalar","azi","correctUVs","x0","correctSeam","generateUVs","computeVertexNormals","normalizeNormals","Interpolant","sampleSize","_cachedIndex","pp","i1","t1","t0","validate_interval","seek","linear_scan","forward_scan","giveUpAt","afterEnd_","t1global","beforeStart_","mid","intervalChanged_","interpolate_","DefaultSettings_","getSettings_","copySampleValue_","_inverseMatrix","_ray","_sphere","_position","Points","random","updateMorphTargets","testPoint","localThresholdSq","raycaster","intersects","rayPointDistanceSq","distanceSqToPoint","intersectPoint","closestPointToPoint","ray","origin","distanceToRay","face","raycast","threshold","params","boundingSphere","computeBoundingSphere","intersectsSphere","localThreshold","positions","ml","morphAttribute","morphTargetDictionary","DirectGeometry","normals","uvs","uvs2","skinWeights","skinIndices","verticesNeedUpdate","normalsNeedUpdate","colorsNeedUpdate","uvsNeedUpdate","groupsNeedUpdate","computeGroups","faces","fromGeometry","morphTargetsPosition","faceVertexUvs","hasFaceVertexUv","hasFaceVertexUv2","morphTargetsLength","morphTargetsNormal","morphNormalsLength","hasSkinIndices","hasSkinWeights","vertexNormals","morphTarget","morphNormal","_bufferGeometryId","_m1","_obj","Object3D","_offset","_box","Box3","_boxMorphTargets","generateUUID","userData","getIndex","getAttribute","addGroup","clearGroups","setDrawRange","applyMatrix","tangent","computeBoundingBox","rotateX","makeRotationX","rotateY","makeRotationY","rotateZ","makeRotationZ","translate","makeTranslation","makeScale","lookAt","getCenter","lineDistances","setFromPoints","direct","__directGeometry","elementsNeedUpdate","lineDistancesNeedUpdate","lineDistance","fromDirectGeometry","morphAttributesPosition","setFromBufferAttribute","addVectors","expandByPoint","makeEmpty","isNaN","Sphere","maxRadiusSq","fromBufferAttribute","distanceToSquared","computeFaceNormals","vA","vB","vC","pA","pB","pC","cb","ab","subVectors","cross","merge","attributeArray1","attribute2","attributeArray2","attributeOffset","toNonIndexed","convertBufferAttribute","array2","geometry2","newAttribute","morphArray","metadata","generator","attributeData","hasMorphAttributes","attributeArray","stringify","wireframeLinecap","wireframeLinejoin","setValues","InterleavedBufferAttribute","interleavedBuffer","defineProperties","_start","_end","Line","computeLineDistances","positionAttribute","linePrecision","localPrecision","localPrecisionSq","vStart","vEnd","interSegment","interRay","step","distanceSqToSegment","faceIndex","nbVertices","DataTextureLoader","setResponseType","texData","mipmapCount","CurvePath","Curve","curves","autoClose","curve","closePath","startPoint","getPoint","endPoint","Curves","d","getLength","curveLengths","getCurveLengths","diff","segmentLength","getPointAt","lens","updateArcLengths","cacheLengths","lengths","sums","getSpacedPoints","divisions","getPoints","last","isEllipseCurve","isLineCurve","isLineCurve3","isSplineCurve","pts","fromJSON","Path","currentPoint","LineCurve","aCPx","aCPy","aX","aY","QuadraticBezierCurve","aCP1x","aCP1y","aCP2x","aCP2y","CubicBezierCurve","splineThru","npts","concat","SplineCurve","arc","aRadius","aStartAngle","aEndAngle","aClockwise","y0","absarc","absellipse","ellipse","xRadius","yRadius","aRotation","EllipseCurve","firstPoint","lastPoint","CompressedTexture","_colorKeywords","_hslA","h","_hslB","setRGB","hue2rgb","q","SRGBToLinear","LinearToSRGB","setHex","setStyle","setScalar","scalar","hex","setHSL","euclideanModulo","clamp","handleAlpha","charAt","setColorName","copyGammaToLinear","copyLinearToGamma","safeInverse","convertGammaToLinear","convertLinearToGamma","copySRGBToLinear","copyLinearToSRGB","convertSRGBToLinear","convertLinearToSRGB","getHex","getHexString","getHSL","hue","saturation","lightness","delta","getStyle","offsetHSL","addColors","color1","color2","addScalar","lerpHSL","NAMES","CylinderGeometry","radiusTop","radiusBottom","radialSegments","heightSegments","openEnded","thetaStart","thetaLength","CylinderBufferGeometry","indexArray","generateCap","top","centerIndexStart","centerIndexEnd","theta","cosTheta","sinTheta","sin","slope","indexRow","generateTorso","_v0","_v1","_v2","_v3","_vab","_vac","_vbc","_vap","_vbp","_vcp","Triangle","getNormal","targetLengthSq","lengthSq","getBarycoord","dot00","dot","dot01","dot02","dot11","dot12","denom","invDenom","containsPoint","getUV","p1","p2","p3","uv1","uv2","uv3","isFrontFacing","setFromPointsAndIndices","i0","i2","triangle","getArea","getMidpoint","getPlane","setFromCoplanarPoints","intersectsBox","box","intersectsTriangle","d1","d2","d3","d4","vc","d5","d6","vb","va","_vector1","_vector2","_normalMatrix","isPlane","setComponents","setFromNormalAndCoplanarPoint","inverseNormalLength","distanceToPoint","distanceToSphere","sphere","projectPoint","intersectLine","line","denominator","intersectsLine","startSign","endSign","intersectsPlane","coplanarPoint","optionalNormalMatrix","referencePoint","LightShadow","_frameExtents","_viewportCount","_viewports","_lightPositionWorld","_lookTarget","shadowMatrix","projScreenMatrix","lookTarget","lightPositionWorld","viewportIndex","Camera","projectionMatrixInverse","recursive","getWorldDirection","force","Earcut","holeIndices","dim","minX","minY","maxX","maxY","invSize","hasHoles","outerLen","outerNode","linkedList","prev","len","queue","steiner","getLeftmost","compareX","eliminateHole","filterPoints","eliminateHoles","earcutLinked","clockwise","sum","signedArea","insertNode","removeNode","again","ear","pass","zOrder","prevZ","nextZ","tail","numMerges","pSize","qSize","inSize","sortLinked","indexCurve","isEarHashed","isEar","cureLocalIntersections","splitEarcut","pointInTriangle","minTX","minTY","maxTX","maxTY","minZ","maxZ","locallyInside","isValidDiagonal","splitPolygon","hole","hx","hy","qx","tan","mx","my","tanMin","findHoleBridge","leftmost","ax","ay","bx","by","cx","cy","px","py","intersectsPolygon","inside","middleInside","q1","q2","a2","Node","b2","an","bp","ShapeUtils","area","contour","isClockWise","triangulateShape","holes","removeDupEndPts","addContour","holeIndex","subPaths","currentPath","isCCW","noHoles","toShapesNoHoles","inSubpaths","tmpPath","tmpShape","isPointInsidePolygon","inPt","inPolygon","polyLen","edgeLowPt","edgeHighPt","edgeDx","edgeDy","Number","EPSILON","perpEdge","solid","holesFirst","tmpPoints","tmpHoles","betterShapeHoles","newShapes","newShapeHoles","mainIdx","ambiguous","toChange","sIdx","sLen","sho","hIdx","ho","hole_unassigned","s2Idx","froms","tos","materialId","Material","isMaterial","newValue","currentValue","isVector3","meta","isRoot","images","extractFromCache","srcPlanes","dstPlanes","common","specularmap","envmap","aomap","lightmap","emissivemap","bumpmap","normalmap","displacementmap","roughnessmap","metalnessmap","gradientmap","sprite","_segCenter","_segDir","_diff","_edge1","_edge2","_normal","Ray","at","recast","directionDistance","v0","v1","optionalPointOnRay","optionalPointOnSegment","s0","s1","sqrDist","extDet","segExtent","a01","b0","b1","det","invDet","intersectSphere","tca","radius2","thc","distanceToPlane","intersectPlane","distToPoint","intersectBox","tmin","tmax","tymin","tymax","tzmin","tzmax","invdirx","invdiry","invdirz","intersectTriangle","backfaceCulling","crossVectors","DdN","DdQxE2","DdE1xQ","QdN","InterleavedBuffer","isInterleavedBuffer","LoaderUtils","decodeText","TextDecoder","decode","fromCharCode","decodeURIComponent","escape","extractUrlBase","lastIndexOf","substr","SphereGeometry","widthSegments","phiStart","phiLength","SphereBufferGeometry","ix","iy","thetaEnd","grid","verticesRow","uOffset","BoxGeometry","depthSegments","super","BoxBufferGeometry","numberOfVertices","buildPlane","udir","vdir","gridX","gridY","segmentWidth","segmentHeight","widthHalf","heightHalf","depthHalf","gridX1","gridY1","vertexCounter","optionalTarget","twoPi","deltaAngle","samePoints","tx","ty","Layers","channel","enableAll","toggle","disableAll","_object3DId","_q1","_target","_scale","_quaternion","_xAxis","_yAxis","_zAxis","_addedEvent","_removedEvent","up","DefaultUp","Euler","_onChange","setFromEuler","setFromQuaternion","configurable","enumerable","DefaultMatrixAutoUpdate","matrixWorldNeedsUpdate","isObject3D","applyQuaternion","setRotationFromAxisAngle","axis","setFromAxisAngle","setRotationFromEuler","euler","setRotationFromMatrix","setFromRotationMatrix","setRotationFromQuaternion","rotateOnAxis","rotateOnWorldAxis","translateOnAxis","translateY","localToWorld","worldToLocal","updateWorldMatrix","splice","attach","getObjectById","getObjectByProperty","getObjectByName","getWorldPosition","getWorldQuaternion","getWorldScale","traverseVisible","traverseAncestors","updateParents","updateChildren","isRootObject","output","materials","serialize","library","element","shape","uuids","child","BooleanKeyframeTrack","KeyframeTrack","ColorKeyframeTrack","interpolation","ValueBufferType","DefaultInterpolation","InterpolantFactoryMethodLinear","InterpolantFactoryMethodSmooth","StringKeyframeTrack","resetDuration","parseKeyframeTrack","trackType","toLowerCase","NumberKeyframeTrack","VectorKeyframeTrack","QuaternionKeyframeTrack","getTrackTypeForValueTypeName","AnimationUtils","flattenJSON","jsonTracks","frameTime","fps","clipTracks","CreateFromMorphTargetSequence","morphTargetSequence","noLoop","numMorphTargets","order","getKeyframeOrder","sortedArray","objectOrClipArray","clipArray","animations","CreateClipsFromMorphTargetSequences","animationToMorphTargets","pattern","parts","animationMorphTargets","clips","parseAnimation","addNonemptyTrack","animationKeys","propertyName","destTracks","clipName","hierarchyTracks","hierarchy","morphTargetNames","morphTargetName","animationKey","boneName","validate","valid","optimize","VideoTexture","video","readyState","HAVE_CURRENT_DATA","_geometryId","Geometry","addFace","fl","areaWeighted","vl","computeFlatVertexNormals","computeMorphNormals","__originalFaceNormal","__originalVertexNormals","tmpGeo","faceNormals","dstNormalsFace","dstNormalsVertex","faceNormal","materialIndexOffset","vertexOffset","vertices1","vertices2","faces1","faces2","colors1","colors2","vertexCopy","faceCopy","faceVertexNormals","faceVertexColors","faceVertexUvs2","uvsCopy","mergeMesh","mesh","verticesMap","unique","changes","round","faceIndicesToRemove","idx","sortFacesByMaterialIndex","_id","newUvs1","newUvs2","uvs1","normalsHash","colorsHash","uvsHash","hasFaceNormal","hasFaceVertexNormal","hasFaceColor","hasFaceVertexColor","faceType","setBit","getUvIndex","getNormalIndex","getColorIndex","srcVertexNormal","destVertexNormal","_matrix","_x","_y","_z","_order","DefaultOrder","RotationOrders","_onChangeCallback","isEuler","te","m11","m12","m13","m21","m22","m23","m31","m32","m33","asin","makeRotationFromQuaternion","setFromVector3","reorder","newOrder","toVector3","optionalResult","SkinnedMesh","bindMode","bindMatrix","bindMatrixInverse","bind","normalizeSkinWeights","skinWeight","manhattanLength","ExtrudeGeometry","ExtrudeBufferGeometry","verticesArray","addShape","placeholder","curveSegments","steps","bevelEnabled","bevelThickness","bevelSize","bevelOffset","bevelSegments","extrudePath","uvgen","UVGenerator","WorldUVGenerator","amount","extrudePts","splineTube","binormal","position2","ahole","hl","extrudeByPath","computeFrenetFrames","shapePoints","extractPoints","reverse","scalePt2","pt","vec","bs","vert","vlen","flen","getBevelVec","inPrev","inNext","v_trans_x","v_trans_y","shrink_by","v_prev_x","v_prev_y","v_next_x","v_next_y","v_prev_lensq","collinear0","v_prev_len","v_next_len","ptPrevShift_x","ptPrevShift_y","sf","v_trans_lensq","direction_eq","contourMovements","oneHoleMovements","holesMovements","verticesMovements","binormals","sidewalls","layeroffset","sl","slen1","slen2","f4","f3","addVertex","nextIndex","generateTopUV","addUV","generateSideWallUV","vector2","layer","buildLidFaces","buildSideFaces","indexA","indexB","indexC","a_x","a_y","b_x","b_y","c_x","c_y","indexD","a_z","b_z","c_z","d_x","d_y","d_z","arcLengthDivisions","getUtoTmapping","getLengths","cacheArcLengths","current","targetArcLength","arcLengths","comparison","low","high","lengthBefore","getTangent","t2","pt1","getTangentAt","segments","closed","tangents","mat","MAX_VALUE","tz","acos","makeRotationAxis","DirectionalLightShadow","OrthographicCamera","isDirectionalLightShadow","DirectionalLight","Light","PointLightShadow","_cubeDirections","_cubeUps","PointLight","power","_lut","_Math","DEG2RAD","RAD2DEG","d0","toUpperCase","mapLinear","a1","smoothstep","smootherstep","randInt","randFloat","randFloatSpread","range","degToRad","degrees","radToDeg","radians","ceil","SpotLightShadow","isSpotLightShadow","fov","aspect","SpotLight","RawShaderMaterial","p0","p4","p5","frustum","me","me0","me1","me2","me3","me4","me5","me6","me7","me8","me9","me10","me11","me12","me13","me14","me15","negRadius","Cache","files","file","Spherical","phi","other","makeSafe","setFromCartesianCoords","_zero","_one","isMatrix4","n11","n12","n13","n14","n21","n22","n23","n24","n31","n32","n33","n34","n41","n42","n43","n44","extractBasis","xAxis","yAxis","zAxis","setFromMatrixColumn","makeBasis","scaleX","scaleY","scaleZ","makeRotationFromEuler","ae","af","be","bf","ce","cf","de","df","ac","ad","bc","bd","eye","a11","a12","a13","a14","a21","a22","a23","a24","a31","a32","a33","a34","a41","a42","a43","a44","b11","b12","b13","b14","b21","b22","b23","b24","b31","b32","b33","b34","b41","b42","b43","b44","applyToBufferAttribute","transpose","tmp","setPosition","throwOnDegenerate","t11","t12","t13","t14","msg","detInv","getMaxScaleOnAxis","scaleXSq","scaleYSq","scaleZSq","makeShear","_w","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","sx","sy","sz","invSX","invSY","invSZ","bottom","makeOrthographic","Shape","getPointsHoles","holesPts","ArcCurve","isArcCurve","CubicBezierCurve3","v2","v3","isCubicBezierCurve3","LineCurve3","QuadraticBezierCurve3","isQuadraticBezierCurve3","crossOrigin","resourcePath","setCrossOrigin","setResourcePath","OctahedronGeometry","OctahedronBufferGeometry","IcosahedronGeometry","IcosahedronBufferGeometry","TorusKnotGeometry","tube","tubularSegments","heightScale","TorusKnotBufferGeometry","P1","P2","B","T","N","calculatePositionOnCurve","cu","su","quOverP","cs","TorusGeometry","TorusBufferGeometry","TextGeometry","TextBufferGeometry","ShapeGeometry","ShapeBufferGeometry","shapeHole","indexOffset","shapeVertices","shapeHoles","CircleGeometry","CircleBufferGeometry","segment","InstancedBufferAttribute","Face3","QuaternionLinearInterpolant","_vA","_vB","_vC","_tempA","_tempB","_tempC","_morphA","_morphB","_morphC","_uvA","_uvB","_uvC","_intersectionPoint","_intersectionPointWorld","checkIntersection","checkBufferGeometryIntersection","morphPosition","intersection","fvA","fvB","fvC","isMultiMaterial","faceMaterial","uvs_f","Raycaster","LOD","Sprite","PointCloud","ascSort","intersectObject","setFromCamera","coords","isPerspectiveCamera","unproject","intersectObjects","CubicPoly","c0","c1","c2","c3","initCatmullRom","x3","tension","initNonuniformCatmullRom","dt0","dt1","dt2","calc","pz","CatmullRomCurve3","curveType","isCatmullRomCurve3","intPoint","Box2","setFromCenterAndSize","halfSize","isEmpty","expandByVector","expandByScalar","containsBox","clampPoint","intersect","union","_instanceLocalMatrix","_instanceWorldMatrix","_instanceIntersects","_mesh","InstancedMesh","getMatrixAt","raycastTimes","instanceId","setMatrixAt","_geometry","_intersectPoint","_worldScale","_mvPosition","_alignedPosition","_rotatedPosition","_viewWorldMatrix","float32Array","transformVertex","vertexPosition","mvPosition","setFromMatrixScale","levels","addLevel","getObjectForDistance","MaterialLoader","getTexture","shading","setTextures","BufferGeometryLoader","InstancedBufferGeometry","typedArray","TYPED_ARRAYS","bufferAttribute","drawcalls","offsets","WireframeGeometry","ol","edge1","edge2","edge","edges","ParametricGeometry","func","slices","stacks","ParametricBufferGeometry","pu","pv","sliceCount","TetrahedronGeometry","TetrahedronBufferGeometry","DodecahedronGeometry","DodecahedronBufferGeometry","TubeGeometry","taper","bufferGeometry","TubeBufferGeometry","frames","P","generateSegment","generateIndices","generateBufferData","RingGeometry","innerRadius","outerRadius","thetaSegments","phiSegments","RingBufferGeometry","radiusStep","thetaSegmentLevel","LatheGeometry","LatheBufferGeometry","base","inverseSegments","n1","n2","EdgesGeometry","thresholdAngle","thresholdDot","sourceVertices","face1","face2","ConeGeometry","ConeBufferGeometry","ObjectLoader","parseShape","parseGeometries","parseImages","parseTextures","parseMaterials","parseObject","parseAnimations","bufferGeometryLoader","details","geometryShapes","THREE","LegacyJSONLoader","loadImage","itemStart","itemEnd","itemError","LoadingManager","ImageLoader","currentUrl","parseConstant","TEXTURE_MAPPING","repeat","wrap","TEXTURE_WRAPPING","TEXTURE_FILTER","getGeometry","getMaterial","isInteger","Fog","FogExp2","focus","zoom","filmGauge","filmOffset","AmbientLight","RectAreaLight","HemisphereLight","LineLoop","LineSegments","CubicInterpolant","_weightPrev","_offsetPrev","_weightNext","_offsetNext","iPrev","iNext","tPrev","tNext","halfDt","o1","o0","oP","oN","wP","wN","ppp","sP","sN","TextureLoader","isJPEG","search","setComponent","getComponent","subScalar","setAxisAngleFromQuaternion","setAxisAngleFromRotationMatrix","clampScalar","minVal","maxVal","clampLength","roundToZero","setLength","lerpVectors","Bone","isCubicBezierCurve","isQuadraticBezierCurve","multiplyVectors","applyEuler","applyAxisAngle","qy","qz","qw","iz","iw","project","divide","az","bz","projectOnVector","projectOnPlane","planeNormal","reflect","angleTo","dx","dy","dz","manhattanDistanceTo","setFromSpherical","setFromSphericalCoords","sinPhiRadius","setFromCylindrical","setFromCylindricalCoords","cloneUniforms","src","dst","property","isMatrix3","isVector2","mergeUniforms","merged","UniformsUtils","alphamap_fragment","alphamap_pars_fragment","alphatest_fragment","aomap_fragment","aomap_pars_fragment","begin_vertex","beginnormal_vertex","bsdfs","bumpmap_pars_fragment","clipping_planes_fragment","clipping_planes_pars_fragment","clipping_planes_pars_vertex","clipping_planes_vertex","color_fragment","color_pars_fragment","color_pars_vertex","color_vertex","cube_uv_reflection_fragment","defaultnormal_vertex","displacementmap_pars_vertex","displacementmap_vertex","emissivemap_fragment","emissivemap_pars_fragment","encodings_fragment","encodings_pars_fragment","envmap_fragment","envmap_common_pars_fragment","envmap_pars_fragment","envmap_pars_vertex","envmap_physical_pars_fragment","envmap_vertex","fog_vertex","fog_pars_vertex","fog_fragment","fog_pars_fragment","gradientmap_pars_fragment","lightmap_fragment","lightmap_pars_fragment","lights_lambert_vertex","lights_pars_begin","lights_toon_fragment","lights_toon_pars_fragment","lights_phong_fragment","lights_phong_pars_fragment","lights_physical_fragment","lights_physical_pars_fragment","lights_fragment_begin","lights_fragment_maps","lights_fragment_end","logdepthbuf_fragment","logdepthbuf_pars_fragment","logdepthbuf_pars_vertex","logdepthbuf_vertex","map_fragment","map_pars_fragment","map_particle_fragment","map_particle_pars_fragment","metalnessmap_fragment","metalnessmap_pars_fragment","morphnormal_vertex","morphtarget_pars_vertex","morphtarget_vertex","normal_fragment_begin","normal_fragment_maps","normalmap_pars_fragment","clearcoat_normal_fragment_begin","clearcoat_normal_fragment_maps","clearcoat_normalmap_pars_fragment","packing","premultiplied_alpha_fragment","project_vertex","dithering_fragment","dithering_pars_fragment","roughnessmap_fragment","roughnessmap_pars_fragment","shadowmap_pars_fragment","shadowmap_pars_vertex","shadowmap_vertex","shadowmask_pars_fragment","skinbase_vertex","skinning_pars_vertex","skinning_vertex","skinnormal_vertex","specularmap_fragment","specularmap_pars_fragment","tonemapping_fragment","tonemapping_pars_fragment","uv_pars_fragment","uv_pars_vertex","uv_vertex","uv2_pars_fragment","uv2_pars_vertex","uv2_vertex","worldpos_vertex","background_frag","background_vert","cube_frag","cube_vert","depth_frag","depth_vert","distanceRGBA_frag","distanceRGBA_vert","equirect_frag","equirect_vert","linedashed_frag","linedashed_vert","meshbasic_frag","meshbasic_vert","meshlambert_frag","meshlambert_vert","meshmatcap_frag","meshmatcap_vert","meshtoon_frag","meshtoon_vert","meshphong_frag","meshphong_vert","meshphysical_frag","meshphysical_vert","normal_frag","normal_vert","points_frag","points_vert","shadow_frag","shadow_vert","sprite_frag","sprite_vert","loading","resolveURL","cached","setTimeout","dataUriRegexResult","mimeType","isBase64","atob","response","responseType","charCodeAt","Blob","parser","DOMParser","parseFromString","request","XMLHttpRequest","header","open","callbacks","withCredentials","overrideMimeType","requestHeader","setRequestHeader","send","setWithCredentials","setMimeType","drawBuffers","setFromMatrix4","transposeIntoArray","setUvTransform","rotate","arrayMax","onImageLoad","onImageError","isLoading","itemsLoaded","itemsTotal","urlModifier","handlers","onStart","setURLModifier","addHandler","regex","removeHandler","getHandler","global","DefaultLoadingManager","Clock","autoStart","oldTime","elapsedTime","running","performance","Date","getElapsedTime","getDelta","newTime","offset1","offset0","weight1","weight0","_reservedRe","RegExp","_wordCharOrDot","_directoryRe","_nodeRe","_objectRe","_propertyRe","_trackRe","_supportedObjectNames","Composite","targetGroup","optionalParsedPath","parseTrackName","_targetGroup","subscribe_","node","findNode","nodeName","firstValidIndex","nCachedObjects_","unbind","isAnimationObjectGroup","sanitizeNodeName","matches","results","objectName","objectIndex","propertyIndex","lastDot","searchNodeSubtree","childNode","subTreeNode","_getValue_unavailable","_setValue_unavailable","BindingType","Direct","EntireArray","ArrayElement","HasFromToArray","Versioning","None","NeedsUpdate","MatrixWorldNeedsUpdate","GetterByBindingType","resolvedProperty","SetterByBindingTypeAndVersioning","targetObject","dest","targetArray","sourceArray","nodeProperty","versioning","bindingType","_getValue_unbound","_setValue_unbound","rotateAround","linecap","linejoin","ImageUtils","ImageData","putImageData","toDataURL","textureId","DEFAULT_IMAGE","DEFAULT_MAPPING","transformUv","slerp","qa","qb","qm","src0","srcOffset0","src1","srcOffset1","z0","w0","z1","w1","dir","sqrSin","tDir","isQuaternion","s2","s3","halfAngle","trace","setFromUnitVectors","vFrom","vTo","rotateTowards","conjugate","multiplyQuaternions","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","cosHalfTheta","sqrSinHalfTheta","sinHalfTheta","halfTheta","ratioA","ratioB","listener","_listeners","listeners","hasEventListener","listenerArray","basic","lambert","phong","standard","toon","dashed","equirect","tEquirect","distanceRGBA","physical","DiscreteInterpolant","convertArray","TimeBufferType","setInterpolation","getInterpolation","InterpolantFactoryMethodDiscrete","factoryMethod","shift","timeOffset","endTime","nKeys","to","arraySlice","prevTime","currTime","isTypedArray","smoothInterpolation","writeIndex","keep","offsetP","offsetN","readOffset","writeOffset","TypedKeyframeTrack","PlaneGeometry","PlaneBufferGeometry","width_half","height_half","segment_width","segment_height","optionalCenter","empty","radiusSum","deltaLengthSq","getBoundingBox","setViewOffset","fullWidth","fullHeight","clearViewOffset","zoomW","zoomH","scaleW","scaleH","setFocalLength","focalLength","vExtentSlope","getFilmHeight","atan","getFocalLength","getEffectiveFOV","getFilmWidth","skew","forceClone","ArrayBuffer","isView","DataView","nValues","jsonKeys","valuePropertyName","subclip","sourceClip","startFrame","endFrame","minStartTime","weights","poleAxis","shaderMaterial","SIZE_MAX","EXTRA_LOD_SIGMA","TOTAL_LODS","LOD_MAX","ENCODINGS","_flatCamera","_blurMaterial","_getCommonVertexShader","_getEncodings","_equirectShader","_cubemapShader","_lodPlanes","_sizeLods","_sigmas","lod","sizeLod","sigma","texelSize","positionSize","uvSize","faceIndexSize","coordinates","fill","_createPlanes","_pingPongRenderTarget","PHI","INV_PHI","_axisDirections","PMREMGenerator","_compileMaterial","_allocateTargets","equirectangular","cubeUVRenderTarget","_createRenderTarget","_cleanup","tmpScene","_setViewport","invDpr","_applyPMREM","_blur","lodIn","lodOut","_halfBlur","targetIn","targetOut","sigmaRadians","blurScene","blurUniforms","pixels","radiansPerPixel","isFinite","sigmaPixels","exp","outputSize","_getEquirectShader","_getCubemapShader","fromScene","cubeCamera","upSign","forwardSign","maxComponent","fExp","log2","col","_sceneToCubeUV","fromEquirectangular","fromCubemap","cubemap","_textureToCubeUV","compileCubemapShader","compileEquirectangularShader","AxesHelper","_points","_f0","_f1","_f2","_center","_extents","_triangleNormal","_testAxis","satForAxes","axes","extents","isBox3","setFromArray","expandByObject","getBoundingSphere","CatmullRom","QuadraticBezier","QuadraticBezierP0","QuadraticBezierP1","QuadraticBezierP2","CubicBezier","CubicBezierP0","CubicBezierP1","CubicBezierP2","CubicBezierP3","isScene"],"mappings":"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K34F,GAAKsP,GAAMspF,EAASjxG,QAIzBgxG,EAAK34F,GAAKsP,GAAMspF,EAQnB,OAAOD,EAID,SAASI,EAAe3qG,GAI9B,IAFA,IAAI4qG,EAAS,GAEHh5F,EAAI,EAAGA,EAAI5R,EAAS3L,OAAQud,IAAO,CAE5C,IAAI2jF,EAAM8U,EAAerqG,EAAU4R,IAEnC,IAAM,IAAIsP,KAAKq0E,EAEdqV,EAAQ1pF,GAAMq0E,EAAKr0E,GAMrB,OAAO0pF,EAzDR,iJA+DA,IAAIC,EAAgB,CAAEzxG,MAAOixG,EAAe/xC,MAAOqyC,I,gCC/DnD,kCAiIO,IAAI30F,EAAc,CACxB80F,kBClIwB,yFDmIxBC,uBEnIwB,qEFoIxBC,mBGpIwB,iFHqIxBC,eIrIwB,whBJsIxBC,oBKtIwB,gGLuIxBC,aMvIwB,2CNwIxBC,mBOxIwB,yHPyIxBC,MQzIwB,4tYR0IxBC,sBS1IwB,83CT2IxBC,yBU3IwB,qlBV4IxBC,8BW5IwB,4NX6IxBC,4BY7IwB,+IZ8IxBC,uBa9IwB,qJb+IxBC,ec/IwB,kEdgJxBC,oBehJwB,2DfiJxBC,kBgBjJwB,2DhBkJxBC,aiBlJwB,8DjBmJxBr6B,OkBnJwB,2nGlBoJxBs6B,4BmBpJwB,+yHnBqJxBC,qBoBrJwB,qepBsJxBC,4BqBtJwB,0JrBuJxBC,uBsBvJwB,2KtBwJxBC,qBuBxJwB,yNvByJxBC,0BwBzJwB,2ExB0JxBC,mByB1JwB,0DzB2JxBC,wB0B3JwB,wyG1B4JxBC,gB2B5JwB,ynE3B6JxBC,4B4B7JwB,iP5B8JxBC,qB6B9JwB,2U7B+JxBC,mB8B/JwB,mT9BgKxBC,8B+BhKwB,s0I/BiKxBC,cgCjKwB,mrBhCkKxBC,WiClKwB,8DjCmKxBC,gBkCnKwB,4DlCoKxBC,amCpKwB,0SnCqKxBC,kBoCrKwB,4NpCsKxBC,0BqCtKwB,kcrCuKxBC,kBsCvKwB,6QtCwKxBC,uBuCxKwB,yGvCyKxBC,sBwCzKwB,okFxC0KxBC,kByC1KwB,23KzC2KxBC,qB0C3KwB,oM1C4KxBC,0B2C5KwB,2xC3C6KxBC,sB4C7KwB,0M5C8KxBC,2B6C9KwB,u1C7C+KxBC,yB8C/KwB,+mC9CgLxBC,8B+ChLwB,2qM/CiLxBC,sBgDjLwB,w6HhDkLxBC,qBiDlLwB,4iCjDmLxBC,oBkDnLwB,yRlDoLxBC,qBmDpLwB,4SnDqLxBC,0BoDrLwB,iLpDsLxBC,wBqDtLwB,sMrDuLxBC,mBsDvLwB,qZtDwLxBC,auDxLwB,8JvDyLxBC,kBwDzLwB,2DxD0LxBC,sByD1LwB,sWzD2LxBC,2B0D3LwB,2N1D4LxBC,sB2D5LwB,8Q3D6LxBC,2B4D7LwB,6E5D8LxBC,mB6D9LwB,wrB7D+LxBC,wB8D/LwB,wO9DgMxBC,mB+DhMwB,q9B/DiMxBC,sBgEjMwB,8iChEkMxBC,qBiElMwB,2vBjEmMxBC,wBkEnMwB,qrClEoMxBC,gCmEpMwB,6EnEqMxBC,+BoErMwB,sXpEsMxBC,kCqEtMwB,gIrEuMxBC,QsEvMwB,yvDtEwMxBC,6BuExMwB,8MvEyMxBC,ewEzMwB,kOxE0MxBC,mByE1MwB,wFzE2MxBC,wB0E3MwB,2mB1E4MxBC,sB2E5MwB,8Q3E6MxBC,2B4E7MwB,6E5E8MxBC,wB6E9MwB,ktU7E+MxBC,sB8E/MwB,srB9EgNxBC,iB+EhNwB,syB/EiNxBC,yBgFjNwB,+hDhFkNxBC,gBiFlNwB,0OjFmNxBC,qBkFnNwB,wjClFoNxBC,gBmFpNwB,2YnFqNxBC,kBoFrNwB,sepFsNxBC,qBqFtNwB,wMrFuNxBC,0BsFvNwB,2EtFwNxBC,qBuFxNwB,qGvFyNxBC,0BwFzNwB,4jDxF0NxBC,iByF1NwB,iGzF2NxBC,e0F3NwB,0J1F4NxBC,U2F5NwB,6E3F6NxBC,kB4F7NwB,4F5F8NxBC,gB6F9NwB,mJ7F+NxBC,W8F/NwB,sH9FgOxBC,gB+FhOwB,kS/FkOxBC,gBgGlOwB,4OhGmOxBC,gBiGnOwB,0KjGoOxBC,UkGpOwB,8WlGqOxBC,UmGrOwB,wQnGsOxBC,WoGtOwB,2xBpGuOxBC,WqGvOwB,srBrGwOxBC,kBsGxOwB,wuBtGyOxBC,kBuGzOwB,4uBvG0OxBC,cwG1OwB,mgBxG2OxBC,cyG3OwB,6MzG4OxBC,gB0G5OwB,o1B1G6OxBC,gB2G7OwB,oiB3G8OxBC,e4G9OwB,0sD5G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","file":"three.js","sourcesContent":["export var REVISION = '112';\nexport var MOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2, ROTATE: 0, DOLLY: 1, PAN: 2 };\nexport var TOUCH = { ROTATE: 0, PAN: 1, DOLLY_PAN: 2, DOLLY_ROTATE: 3 };\nexport var CullFaceNone = 0;\nexport var CullFaceBack = 1;\nexport var CullFaceFront = 2;\nexport var CullFaceFrontBack = 3;\nexport var FrontFaceDirectionCW = 0;\nexport var FrontFaceDirectionCCW = 1;\nexport var BasicShadowMap = 0;\nexport var PCFShadowMap = 1;\nexport var PCFSoftShadowMap = 2;\nexport var VSMShadowMap = 3;\nexport var FrontSide = 0;\nexport var BackSide = 1;\nexport var DoubleSide = 2;\nexport var FlatShading = 1;\nexport var SmoothShading = 2;\nexport var NoColors = 0;\nexport var FaceColors = 1;\nexport var VertexColors = 2;\nexport var NoBlending = 0;\nexport var NormalBlending = 1;\nexport var AdditiveBlending = 2;\nexport var SubtractiveBlending = 3;\nexport var MultiplyBlending = 4;\nexport var CustomBlending = 5;\nexport var AddEquation = 100;\nexport var SubtractEquation = 101;\nexport var ReverseSubtractEquation = 102;\nexport var MinEquation = 103;\nexport var MaxEquation = 104;\nexport var ZeroFactor = 200;\nexport var OneFactor = 201;\nexport var SrcColorFactor = 202;\nexport var OneMinusSrcColorFactor = 203;\nexport var SrcAlphaFactor = 204;\nexport var OneMinusSrcAlphaFactor = 205;\nexport var DstAlphaFactor = 206;\nexport var OneMinusDstAlphaFactor = 207;\nexport var DstColorFactor = 208;\nexport var OneMinusDstColorFactor = 209;\nexport var SrcAlphaSaturateFactor = 210;\nexport var NeverDepth = 0;\nexport var AlwaysDepth = 1;\nexport var LessDepth = 2;\nexport var LessEqualDepth = 3;\nexport var EqualDepth = 4;\nexport var GreaterEqualDepth = 5;\nexport var GreaterDepth = 6;\nexport var NotEqualDepth = 7;\nexport var MultiplyOperation = 0;\nexport var MixOperation = 1;\nexport var AddOperation = 2;\nexport var NoToneMapping = 0;\nexport var LinearToneMapping = 1;\nexport var ReinhardToneMapping = 2;\nexport var Uncharted2ToneMapping = 3;\nexport var CineonToneMapping = 4;\nexport var ACESFilmicToneMapping = 5;\n\nexport var UVMapping = 300;\nexport var CubeReflectionMapping = 301;\nexport var CubeRefractionMapping = 302;\nexport var EquirectangularReflectionMapping = 303;\nexport var EquirectangularRefractionMapping = 304;\nexport var SphericalReflectionMapping = 305;\nexport var CubeUVReflectionMapping = 306;\nexport var CubeUVRefractionMapping = 307;\nexport var RepeatWrapping = 1000;\nexport var ClampToEdgeWrapping = 1001;\nexport var MirroredRepeatWrapping = 1002;\nexport var NearestFilter = 1003;\nexport var NearestMipmapNearestFilter = 1004;\nexport var NearestMipMapNearestFilter = 1004;\nexport var NearestMipmapLinearFilter = 1005;\nexport var NearestMipMapLinearFilter = 1005;\nexport var LinearFilter = 1006;\nexport var LinearMipmapNearestFilter = 1007;\nexport var LinearMipMapNearestFilter = 1007;\nexport var LinearMipmapLinearFilter = 1008;\nexport var LinearMipMapLinearFilter = 1008;\nexport var UnsignedByteType = 1009;\nexport var ByteType = 1010;\nexport var ShortType = 1011;\nexport var UnsignedShortType = 1012;\nexport var IntType = 1013;\nexport var UnsignedIntType = 1014;\nexport var FloatType = 1015;\nexport var HalfFloatType = 1016;\nexport var UnsignedShort4444Type = 1017;\nexport var UnsignedShort5551Type = 1018;\nexport var UnsignedShort565Type = 1019;\nexport var UnsignedInt248Type = 1020;\nexport var AlphaFormat = 1021;\nexport var RGBFormat = 1022;\nexport var RGBAFormat = 1023;\nexport var LuminanceFormat = 1024;\nexport var LuminanceAlphaFormat = 1025;\nexport var RGBEFormat = RGBAFormat;\nexport var DepthFormat = 1026;\nexport var DepthStencilFormat = 1027;\nexport var RedFormat = 1028;\nexport var RedIntegerFormat = 1029;\nexport var RGFormat = 1030;\nexport var RGIntegerFormat = 1031;\nexport var RGBIntegerFormat = 1032;\nexport var RGBAIntegerFormat = 1033;\n\nexport var RGB_S3TC_DXT1_Format = 33776;\nexport var RGBA_S3TC_DXT1_Format = 33777;\nexport var RGBA_S3TC_DXT3_Format = 33778;\nexport var RGBA_S3TC_DXT5_Format = 33779;\nexport var RGB_PVRTC_4BPPV1_Format = 35840;\nexport var RGB_PVRTC_2BPPV1_Format = 35841;\nexport var RGBA_PVRTC_4BPPV1_Format = 35842;\nexport var RGBA_PVRTC_2BPPV1_Format = 35843;\nexport var RGB_ETC1_Format = 36196;\nexport var RGBA_ASTC_4x4_Format = 37808;\nexport var RGBA_ASTC_5x4_Format = 37809;\nexport var RGBA_ASTC_5x5_Format = 37810;\nexport var RGBA_ASTC_6x5_Format = 37811;\nexport var RGBA_ASTC_6x6_Format = 37812;\nexport var RGBA_ASTC_8x5_Format = 37813;\nexport var RGBA_ASTC_8x6_Format = 37814;\nexport var RGBA_ASTC_8x8_Format = 37815;\nexport var RGBA_ASTC_10x5_Format = 37816;\nexport var RGBA_ASTC_10x6_Format = 37817;\nexport var RGBA_ASTC_10x8_Format = 37818;\nexport var RGBA_ASTC_10x10_Format = 37819;\nexport var RGBA_ASTC_12x10_Format = 37820;\nexport var RGBA_ASTC_12x12_Format = 37821;\nexport var LoopOnce = 2200;\nexport var LoopRepeat = 2201;\nexport var LoopPingPong = 2202;\nexport var InterpolateDiscrete = 2300;\nexport var InterpolateLinear = 2301;\nexport var InterpolateSmooth = 2302;\nexport var ZeroCurvatureEnding = 2400;\nexport var ZeroSlopeEnding = 2401;\nexport var WrapAroundEnding = 2402;\nexport var TrianglesDrawMode = 0;\nexport var TriangleStripDrawMode = 1;\nexport var TriangleFanDrawMode = 2;\nexport var LinearEncoding = 3000;\nexport var sRGBEncoding = 3001;\nexport var GammaEncoding = 3007;\nexport var RGBEEncoding = 3002;\nexport var LogLuvEncoding = 3003;\nexport var RGBM7Encoding = 3004;\nexport var RGBM16Encoding = 3005;\nexport var RGBDEncoding = 3006;\nexport var BasicDepthPacking = 3200;\nexport var RGBADepthPacking = 3201;\nexport var TangentSpaceNormalMap = 0;\nexport var ObjectSpaceNormalMap = 1;\n\nexport var ZeroStencilOp = 0;\nexport var KeepStencilOp = 7680;\nexport var ReplaceStencilOp = 7681;\nexport var IncrementStencilOp = 7682;\nexport var DecrementStencilOp = 7683;\nexport var IncrementWrapStencilOp = 34055;\nexport var DecrementWrapStencilOp = 34056;\nexport var InvertStencilOp = 5386;\n\nexport var NeverStencilFunc = 512;\nexport var LessStencilFunc = 513;\nexport var EqualStencilFunc = 514;\nexport var LessEqualStencilFunc = 515;\nexport var GreaterStencilFunc = 516;\nexport var NotEqualStencilFunc = 517;\nexport var GreaterEqualStencilFunc = 518;\nexport var AlwaysStencilFunc = 519;\n\nexport var StaticDrawUsage = 35044;\nexport var DynamicDrawUsage = 35048;\nexport var StreamDrawUsage = 35040;\nexport var StaticReadUsage = 35045;\nexport var DynamicReadUsage = 35049;\nexport var StreamReadUsage = 35041;\nexport var StaticCopyUsage = 35046;\nexport var DynamicCopyUsage = 35050;\nexport var StreamCopyUsage = 35042;\n","import { Vector4 } from '../math/Vector4.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Color } from '../math/Color.js';\nimport { StaticDrawUsage } from '../constants.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar _vector = new Vector3();\n\nfunction BufferAttribute( array, itemSize, normalized ) {\n\n\tif ( Array.isArray( array ) ) {\n\n\t\tthrow new TypeError( 'THREE.BufferAttribute: array should be a Typed Array.' );\n\n\t}\n\n\tthis.name = '';\n\n\tthis.array = array;\n\tthis.itemSize = itemSize;\n\tthis.count = array !== undefined ? array.length / itemSize : 0;\n\tthis.normalized = normalized === true;\n\n\tthis.usage = StaticDrawUsage;\n\tthis.updateRange = { offset: 0, count: - 1 };\n\n\tthis.version = 0;\n\n}\n\nObject.defineProperty( BufferAttribute.prototype, 'needsUpdate', {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\nObject.assign( BufferAttribute.prototype, {\n\n\tisBufferAttribute: true,\n\n\tonUploadCallback: function () {},\n\n\tsetUsage: function ( value ) {\n\n\t\tthis.usage = value;\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.name = source.name;\n\t\tthis.array = new source.array.constructor( source.array );\n\t\tthis.itemSize = source.itemSize;\n\t\tthis.count = source.count;\n\t\tthis.normalized = source.normalized;\n\n\t\tthis.usage = source.usage;\n\n\t\treturn this;\n\n\t},\n\n\tcopyAt: function ( index1, attribute, index2 ) {\n\n\t\tindex1 *= this.itemSize;\n\t\tindex2 *= attribute.itemSize;\n\n\t\tfor ( var i = 0, l = this.itemSize; i < l; i ++ ) {\n\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyArray: function ( array ) {\n\n\t\tthis.array.set( array );\n\n\t\treturn this;\n\n\t},\n\n\tcopyColorsArray: function ( colors ) {\n\n\t\tvar array = this.array, offset = 0;\n\n\t\tfor ( var i = 0, l = colors.length; i < l; i ++ ) {\n\n\t\t\tvar color = colors[ i ];\n\n\t\t\tif ( color === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyColorsArray(): color is undefined', i );\n\t\t\t\tcolor = new Color();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = color.r;\n\t\t\tarray[ offset ++ ] = color.g;\n\t\t\tarray[ offset ++ ] = color.b;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector2sArray: function ( vectors ) {\n\n\t\tvar array = this.array, offset = 0;\n\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tvar vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector2sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector2();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector3sArray: function ( vectors ) {\n\n\t\tvar array = this.array, offset = 0;\n\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tvar vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector3sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector3();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\t\t\tarray[ offset ++ ] = vector.z;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector4sArray: function ( vectors ) {\n\n\t\tvar array = this.array, offset = 0;\n\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tvar vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector4sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector4();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\t\t\tarray[ offset ++ ] = vector.z;\n\t\t\tarray[ offset ++ ] = vector.w;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix3: function ( m ) {\n\n\t\tfor ( var i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector.x = this.getX( i );\n\t\t\t_vector.y = this.getY( i );\n\t\t\t_vector.z = this.getZ( i );\n\n\t\t\t_vector.applyMatrix3( m );\n\n\t\t\tthis.setXYZ( i, _vector.x, _vector.y, _vector.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function ( m ) {\n\n\t\tfor ( var i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector.x = this.getX( i );\n\t\t\t_vector.y = this.getY( i );\n\t\t\t_vector.z = this.getZ( i );\n\n\t\t\t_vector.applyMatrix4( m );\n\n\t\t\tthis.setXYZ( i, _vector.x, _vector.y, _vector.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tapplyNormalMatrix: function ( m ) {\n\n\t\tfor ( var i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector.x = this.getX( i );\n\t\t\t_vector.y = this.getY( i );\n\t\t\t_vector.z = this.getZ( i );\n\n\t\t\t_vector.applyNormalMatrix( m );\n\n\t\t\tthis.setXYZ( i, _vector.x, _vector.y, _vector.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttransformDirection: function ( m ) {\n\n\t\tfor ( var i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector.x = this.getX( i );\n\t\t\t_vector.y = this.getY( i );\n\t\t\t_vector.z = this.getZ( i );\n\n\t\t\t_vector.transformDirection( m );\n\n\t\t\tthis.setXYZ( i, _vector.x, _vector.y, _vector.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tset: function ( value, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.array.set( value, offset );\n\n\t\treturn this;\n\n\t},\n\n\tgetX: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize ];\n\n\t},\n\n\tsetX: function ( index, x ) {\n\n\t\tthis.array[ index * this.itemSize ] = x;\n\n\t\treturn this;\n\n\t},\n\n\tgetY: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 1 ];\n\n\t},\n\n\tsetY: function ( index, y ) {\n\n\t\tthis.array[ index * this.itemSize + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tgetZ: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 2 ];\n\n\t},\n\n\tsetZ: function ( index, z ) {\n\n\t\tthis.array[ index * this.itemSize + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tgetW: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 3 ];\n\n\t},\n\n\tsetW: function ( index, w ) {\n\n\t\tthis.array[ index * this.itemSize + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetXY: function ( index, x, y ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZ: function ( index, x, y, z ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZW: function ( index, x, y, z, w ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\t\tthis.array[ index + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tonUpload: function ( callback ) {\n\n\t\tthis.onUploadCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.array, this.itemSize ).copy( this );\n\n\t},\n\n\ttoJSON: function () {\n\n\t\treturn {\n\t\t\titemSize: this.itemSize,\n\t\t\ttype: this.array.constructor.name,\n\t\t\tarray: Array.prototype.slice.call( this.array ),\n\t\t\tnormalized: this.normalized\n\t\t};\n\n\t}\n\n} );\n\n//\n\nfunction Int8BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Int8Array( array ), itemSize, normalized );\n\n}\n\nInt8BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nInt8BufferAttribute.prototype.constructor = Int8BufferAttribute;\n\n\nfunction Uint8BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint8Array( array ), itemSize, normalized );\n\n}\n\nUint8BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint8BufferAttribute.prototype.constructor = Uint8BufferAttribute;\n\n\nfunction Uint8ClampedBufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint8ClampedArray( array ), itemSize, normalized );\n\n}\n\nUint8ClampedBufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint8ClampedBufferAttribute.prototype.constructor = Uint8ClampedBufferAttribute;\n\n\nfunction Int16BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Int16Array( array ), itemSize, normalized );\n\n}\n\nInt16BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nInt16BufferAttribute.prototype.constructor = Int16BufferAttribute;\n\n\nfunction Uint16BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint16Array( array ), itemSize, normalized );\n\n}\n\nUint16BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint16BufferAttribute.prototype.constructor = Uint16BufferAttribute;\n\n\nfunction Int32BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Int32Array( array ), itemSize, normalized );\n\n}\n\nInt32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nInt32BufferAttribute.prototype.constructor = Int32BufferAttribute;\n\n\nfunction Uint32BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint32Array( array ), itemSize, normalized );\n\n}\n\nUint32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint32BufferAttribute.prototype.constructor = Uint32BufferAttribute;\n\n\nfunction Float32BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Float32Array( array ), itemSize, normalized );\n\n}\n\nFloat32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nFloat32BufferAttribute.prototype.constructor = Float32BufferAttribute;\n\n\nfunction Float64BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Float64Array( array ), itemSize, normalized );\n\n}\n\nFloat64BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nFloat64BufferAttribute.prototype.constructor = Float64BufferAttribute;\n\n//\n\nexport {\n\tFloat64BufferAttribute,\n\tFloat32BufferAttribute,\n\tUint32BufferAttribute,\n\tInt32BufferAttribute,\n\tUint16BufferAttribute,\n\tInt16BufferAttribute,\n\tUint8ClampedBufferAttribute,\n\tUint8BufferAttribute,\n\tInt8BufferAttribute,\n\tBufferAttribute\n};\n","import { EventDispatcher } from '../core/EventDispatcher.js';\nimport { Texture } from '../textures/Texture.js';\nimport { LinearFilter } from '../constants.js';\nimport { Vector4 } from '../math/Vector4.js';\n\n/**\n * @author szimek / https://github.com/szimek/\n * @author alteredq / http://alteredqualia.com/\n * @author Marius Kintel / https://github.com/kintel\n */\n\n/*\n In options, we can specify:\n * Texture parameters for an auto-generated target texture\n * depthBuffer/stencilBuffer: Booleans to indicate if we should generate these buffers\n*/\nfunction WebGLRenderTarget( width, height, options ) {\n\n\tthis.width = width;\n\tthis.height = height;\n\n\tthis.scissor = new Vector4( 0, 0, width, height );\n\tthis.scissorTest = false;\n\n\tthis.viewport = new Vector4( 0, 0, width, height );\n\n\toptions = options || {};\n\n\tthis.texture = new Texture( undefined, undefined, options.wrapS, options.wrapT, options.magFilter, options.minFilter, options.format, options.type, options.anisotropy, options.encoding );\n\n\tthis.texture.image = {};\n\tthis.texture.image.width = width;\n\tthis.texture.image.height = height;\n\n\tthis.texture.generateMipmaps = options.generateMipmaps !== undefined ? options.generateMipmaps : false;\n\tthis.texture.minFilter = options.minFilter !== undefined ? options.minFilter : LinearFilter;\n\n\tthis.depthBuffer = options.depthBuffer !== undefined ? options.depthBuffer : true;\n\tthis.stencilBuffer = options.stencilBuffer !== undefined ? options.stencilBuffer : true;\n\tthis.depthTexture = options.depthTexture !== undefined ? options.depthTexture : null;\n\n}\n\nWebGLRenderTarget.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: WebGLRenderTarget,\n\n\tisWebGLRenderTarget: true,\n\n\tsetSize: function ( width, height ) {\n\n\t\tif ( this.width !== width || this.height !== height ) {\n\n\t\t\tthis.width = width;\n\t\t\tthis.height = height;\n\n\t\t\tthis.texture.image.width = width;\n\t\t\tthis.texture.image.height = height;\n\n\t\t\tthis.dispose();\n\n\t\t}\n\n\t\tthis.viewport.set( 0, 0, width, height );\n\t\tthis.scissor.set( 0, 0, width, height );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.width = source.width;\n\t\tthis.height = source.height;\n\n\t\tthis.viewport.copy( source.viewport );\n\n\t\tthis.texture = source.texture.clone();\n\n\t\tthis.depthBuffer = source.depthBuffer;\n\t\tthis.stencilBuffer = source.stencilBuffer;\n\t\tthis.depthTexture = source.depthTexture;\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\n\nexport { WebGLRenderTarget };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLAnimation() {\n\n\tvar context = null;\n\tvar isAnimating = false;\n\tvar animationLoop = null;\n\n\tfunction onAnimationFrame( time, frame ) {\n\n\t\tif ( isAnimating === false ) return;\n\n\t\tanimationLoop( time, frame );\n\n\t\tcontext.requestAnimationFrame( onAnimationFrame );\n\n\t}\n\n\treturn {\n\n\t\tstart: function () {\n\n\t\t\tif ( isAnimating === true ) return;\n\t\t\tif ( animationLoop === null ) return;\n\n\t\t\tcontext.requestAnimationFrame( onAnimationFrame );\n\n\t\t\tisAnimating = true;\n\n\t\t},\n\n\t\tstop: function () {\n\n\t\t\tisAnimating = false;\n\n\t\t},\n\n\t\tsetAnimationLoop: function ( callback ) {\n\n\t\t\tanimationLoop = callback;\n\n\t\t},\n\n\t\tsetContext: function ( value ) {\n\n\t\t\tcontext = value;\n\n\t\t}\n\n\t};\n\n}\n\nexport { WebGLAnimation };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLAttributes( gl ) {\n\n\tvar buffers = new WeakMap();\n\n\tfunction createBuffer( attribute, bufferType ) {\n\n\t\tvar array = attribute.array;\n\t\tvar usage = attribute.usage;\n\n\t\tvar buffer = gl.createBuffer();\n\n\t\tgl.bindBuffer( bufferType, buffer );\n\t\tgl.bufferData( bufferType, array, usage );\n\n\t\tattribute.onUploadCallback();\n\n\t\tvar type = gl.FLOAT;\n\n\t\tif ( array instanceof Float32Array ) {\n\n\t\t\ttype = gl.FLOAT;\n\n\t\t} else if ( array instanceof Float64Array ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.' );\n\n\t\t} else if ( array instanceof Uint16Array ) {\n\n\t\t\ttype = gl.UNSIGNED_SHORT;\n\n\t\t} else if ( array instanceof Int16Array ) {\n\n\t\t\ttype = gl.SHORT;\n\n\t\t} else if ( array instanceof Uint32Array ) {\n\n\t\t\ttype = gl.UNSIGNED_INT;\n\n\t\t} else if ( array instanceof Int32Array ) {\n\n\t\t\ttype = gl.INT;\n\n\t\t} else if ( array instanceof Int8Array ) {\n\n\t\t\ttype = gl.BYTE;\n\n\t\t} else if ( array instanceof Uint8Array ) {\n\n\t\t\ttype = gl.UNSIGNED_BYTE;\n\n\t\t}\n\n\t\treturn {\n\t\t\tbuffer: buffer,\n\t\t\ttype: type,\n\t\t\tbytesPerElement: array.BYTES_PER_ELEMENT,\n\t\t\tversion: attribute.version\n\t\t};\n\n\t}\n\n\tfunction updateBuffer( buffer, attribute, bufferType ) {\n\n\t\tvar array = attribute.array;\n\t\tvar updateRange = attribute.updateRange;\n\n\t\tgl.bindBuffer( bufferType, buffer );\n\n\t\tif ( updateRange.count === - 1 ) {\n\n\t\t\t// Not using update ranges\n\n\t\t\tgl.bufferSubData( bufferType, 0, array );\n\n\t\t} else {\n\n\t\t\tgl.bufferSubData( bufferType, updateRange.offset * array.BYTES_PER_ELEMENT,\n\t\t\t\tarray.subarray( updateRange.offset, updateRange.offset + updateRange.count ) );\n\n\t\t\tupdateRange.count = - 1; // reset range\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction get( attribute ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\treturn buffers.get( attribute );\n\n\t}\n\n\tfunction remove( attribute ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\tvar data = buffers.get( attribute );\n\n\t\tif ( data ) {\n\n\t\t\tgl.deleteBuffer( data.buffer );\n\n\t\t\tbuffers.delete( attribute );\n\n\t\t}\n\n\t}\n\n\tfunction update( attribute, bufferType ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\tvar data = buffers.get( attribute );\n\n\t\tif ( data === undefined ) {\n\n\t\t\tbuffers.set( attribute, createBuffer( attribute, bufferType ) );\n\n\t\t} else if ( data.version < attribute.version ) {\n\n\t\t\tupdateBuffer( data.buffer, attribute, bufferType );\n\n\t\t\tdata.version = attribute.version;\n\n\t\t}\n\n\t}\n\n\treturn {\n\n\t\tget: get,\n\t\tremove: remove,\n\t\tupdate: update\n\n\t};\n\n}\n\n\nexport { WebGLAttributes };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { BackSide, FrontSide, CubeUVReflectionMapping } from '../../constants.js';\nimport { BoxBufferGeometry } from '../../geometries/BoxGeometry.js';\nimport { PlaneBufferGeometry } from '../../geometries/PlaneGeometry.js';\nimport { ShaderMaterial } from '../../materials/ShaderMaterial.js';\nimport { Color } from '../../math/Color.js';\nimport { Mesh } from '../../objects/Mesh.js';\nimport { ShaderLib } from '../shaders/ShaderLib.js';\nimport { cloneUniforms } from '../shaders/UniformsUtils.js';\n\nfunction WebGLBackground( renderer, state, objects, premultipliedAlpha ) {\n\n\tvar clearColor = new Color( 0x000000 );\n\tvar clearAlpha = 0;\n\n\tvar planeMesh;\n\tvar boxMesh;\n\t// Store the current background texture and its `version`\n\t// so we can recompile the material accordingly.\n\tvar currentBackground = null;\n\tvar currentBackgroundVersion = 0;\n\n\tfunction render( renderList, scene, camera, forceClear ) {\n\n\t\tvar background = scene.background;\n\n\t\t// Ignore background in AR\n\t\t// TODO: Reconsider this.\n\n\t\tvar xr = renderer.xr;\n\t\tvar session = xr.getSession && xr.getSession();\n\n\t\tif ( session && session.environmentBlendMode === 'additive' ) {\n\n\t\t\tbackground = null;\n\n\t\t}\n\n\t\tif ( background === null ) {\n\n\t\t\tsetClear( clearColor, clearAlpha );\n\t\t\tcurrentBackground = null;\n\t\t\tcurrentBackgroundVersion = 0;\n\n\t\t} else if ( background && background.isColor ) {\n\n\t\t\tsetClear( background, 1 );\n\t\t\tforceClear = true;\n\t\t\tcurrentBackground = null;\n\t\t\tcurrentBackgroundVersion = 0;\n\n\t\t}\n\n\t\tif ( renderer.autoClear || forceClear ) {\n\n\t\t\trenderer.clear( renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil );\n\n\t\t}\n\n\t\tif ( background && ( background.isCubeTexture || background.isWebGLRenderTargetCube || background.mapping === CubeUVReflectionMapping ) ) {\n\n\t\t\tif ( boxMesh === undefined ) {\n\n\t\t\t\tboxMesh = new Mesh(\n\t\t\t\t\tnew BoxBufferGeometry( 1, 1, 1 ),\n\t\t\t\t\tnew ShaderMaterial( {\n\t\t\t\t\t\ttype: 'BackgroundCubeMaterial',\n\t\t\t\t\t\tuniforms: cloneUniforms( ShaderLib.cube.uniforms ),\n\t\t\t\t\t\tvertexShader: ShaderLib.cube.vertexShader,\n\t\t\t\t\t\tfragmentShader: ShaderLib.cube.fragmentShader,\n\t\t\t\t\t\tside: BackSide,\n\t\t\t\t\t\tdepthTest: false,\n\t\t\t\t\t\tdepthWrite: false,\n\t\t\t\t\t\tfog: false\n\t\t\t\t\t} )\n\t\t\t\t);\n\n\t\t\t\tboxMesh.geometry.deleteAttribute( 'normal' );\n\t\t\t\tboxMesh.geometry.deleteAttribute( 'uv' );\n\n\t\t\t\tboxMesh.onBeforeRender = function ( renderer, scene, camera ) {\n\n\t\t\t\t\tthis.matrixWorld.copyPosition( camera.matrixWorld );\n\n\t\t\t\t};\n\n\t\t\t\t// enable code injection for non-built-in material\n\t\t\t\tObject.defineProperty( boxMesh.material, 'envMap', {\n\n\t\t\t\t\tget: function () {\n\n\t\t\t\t\t\treturn this.uniforms.envMap.value;\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\tobjects.update( boxMesh );\n\n\t\t\t}\n\n\t\t\tvar texture = background.isWebGLRenderTargetCube ? background.texture : background;\n\n\t\t\tboxMesh.material.uniforms.envMap.value = texture;\n\t\t\tboxMesh.material.uniforms.flipEnvMap.value = texture.isCubeTexture ? - 1 : 1;\n\n\t\t\tif ( currentBackground !== background ||\n\t\t\t     currentBackgroundVersion !== texture.version ) {\n\n\t\t\t\tboxMesh.material.needsUpdate = true;\n\n\t\t\t\tcurrentBackground = background;\n\t\t\t\tcurrentBackgroundVersion = texture.version;\n\n\t\t\t}\n\n\t\t\t// push to the pre-sorted opaque render list\n\t\t\trenderList.unshift( boxMesh, boxMesh.geometry, boxMesh.material, 0, 0, null );\n\n\t\t} else if ( background && background.isTexture ) {\n\n\t\t\tif ( planeMesh === undefined ) {\n\n\t\t\t\tplaneMesh = new Mesh(\n\t\t\t\t\tnew PlaneBufferGeometry( 2, 2 ),\n\t\t\t\t\tnew ShaderMaterial( {\n\t\t\t\t\t\ttype: 'BackgroundMaterial',\n\t\t\t\t\t\tuniforms: cloneUniforms( ShaderLib.background.uniforms ),\n\t\t\t\t\t\tvertexShader: ShaderLib.background.vertexShader,\n\t\t\t\t\t\tfragmentShader: ShaderLib.background.fragmentShader,\n\t\t\t\t\t\tside: FrontSide,\n\t\t\t\t\t\tdepthTest: false,\n\t\t\t\t\t\tdepthWrite: false,\n\t\t\t\t\t\tfog: false\n\t\t\t\t\t} )\n\t\t\t\t);\n\n\t\t\t\tplaneMesh.geometry.deleteAttribute( 'normal' );\n\n\t\t\t\t// enable code injection for non-built-in material\n\t\t\t\tObject.defineProperty( planeMesh.material, 'map', {\n\n\t\t\t\t\tget: function () {\n\n\t\t\t\t\t\treturn this.uniforms.t2D.value;\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\tobjects.update( planeMesh );\n\n\t\t\t}\n\n\t\t\tplaneMesh.material.uniforms.t2D.value = background;\n\n\t\t\tif ( background.matrixAutoUpdate === true ) {\n\n\t\t\t\tbackground.updateMatrix();\n\n\t\t\t}\n\n\t\t\tplaneMesh.material.uniforms.uvTransform.value.copy( background.matrix );\n\n\t\t\tif ( currentBackground !== background ||\n\t\t\t\t   currentBackgroundVersion !== background.version ) {\n\n\t\t\t\tplaneMesh.material.needsUpdate = true;\n\n\t\t\t\tcurrentBackground = background;\n\t\t\t\tcurrentBackgroundVersion = background.version;\n\n\t\t\t}\n\n\n\t\t\t// push to the pre-sorted opaque render list\n\t\t\trenderList.unshift( planeMesh, planeMesh.geometry, planeMesh.material, 0, 0, null );\n\n\t\t}\n\n\t}\n\n\tfunction setClear( color, alpha ) {\n\n\t\tstate.buffers.color.setClear( color.r, color.g, color.b, alpha, premultipliedAlpha );\n\n\t}\n\n\treturn {\n\n\t\tgetClearColor: function () {\n\n\t\t\treturn clearColor;\n\n\t\t},\n\t\tsetClearColor: function ( color, alpha ) {\n\n\t\t\tclearColor.set( color );\n\t\t\tclearAlpha = alpha !== undefined ? alpha : 1;\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t},\n\t\tgetClearAlpha: function () {\n\n\t\t\treturn clearAlpha;\n\n\t\t},\n\t\tsetClearAlpha: function ( alpha ) {\n\n\t\t\tclearAlpha = alpha;\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t},\n\t\trender: render\n\n\t};\n\n}\n\n\nexport { WebGLBackground };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLBufferRenderer( gl, extensions, info, capabilities ) {\n\n\tvar isWebGL2 = capabilities.isWebGL2;\n\n\tvar mode;\n\n\tfunction setMode( value ) {\n\n\t\tmode = value;\n\n\t}\n\n\tfunction render( start, count ) {\n\n\t\tgl.drawArrays( mode, start, count );\n\n\t\tinfo.update( count, mode );\n\n\t}\n\n\tfunction renderInstances( geometry, start, count, primcount ) {\n\n\t\tif ( primcount === 0 ) return;\n\n\t\tvar extension, methodName;\n\n\t\tif ( isWebGL2 ) {\n\n\t\t\textension = gl;\n\t\t\tmethodName = 'drawArraysInstanced';\n\n\t\t} else {\n\n\t\t\textension = extensions.get( 'ANGLE_instanced_arrays' );\n\t\t\tmethodName = 'drawArraysInstancedANGLE';\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\textension[ methodName ]( mode, start, count, primcount );\n\n\t\tinfo.update( count, mode, primcount );\n\n\t}\n\n\t//\n\n\tthis.setMode = setMode;\n\tthis.render = render;\n\tthis.renderInstances = renderInstances;\n\n}\n\n\nexport { WebGLBufferRenderer };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLCapabilities( gl, extensions, parameters ) {\n\n\tvar maxAnisotropy;\n\n\tfunction getMaxAnisotropy() {\n\n\t\tif ( maxAnisotropy !== undefined ) return maxAnisotropy;\n\n\t\tvar extension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\tif ( extension !== null ) {\n\n\t\t\tmaxAnisotropy = gl.getParameter( extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT );\n\n\t\t} else {\n\n\t\t\tmaxAnisotropy = 0;\n\n\t\t}\n\n\t\treturn maxAnisotropy;\n\n\t}\n\n\tfunction getMaxPrecision( precision ) {\n\n\t\tif ( precision === 'highp' ) {\n\n\t\t\tif ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.HIGH_FLOAT ).precision > 0 &&\n\t\t\t\tgl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.HIGH_FLOAT ).precision > 0 ) {\n\n\t\t\t\treturn 'highp';\n\n\t\t\t}\n\n\t\t\tprecision = 'mediump';\n\n\t\t}\n\n\t\tif ( precision === 'mediump' ) {\n\n\t\t\tif ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.MEDIUM_FLOAT ).precision > 0 &&\n\t\t\t\tgl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT ).precision > 0 ) {\n\n\t\t\t\treturn 'mediump';\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn 'lowp';\n\n\t}\n\n\t/* eslint-disable no-undef */\n\tvar isWebGL2 = ( typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext ) ||\n\t\t( typeof WebGL2ComputeRenderingContext !== 'undefined' && gl instanceof WebGL2ComputeRenderingContext );\n\t/* eslint-enable no-undef */\n\n\tvar precision = parameters.precision !== undefined ? parameters.precision : 'highp';\n\tvar maxPrecision = getMaxPrecision( precision );\n\n\tif ( maxPrecision !== precision ) {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer:', precision, 'not supported, using', maxPrecision, 'instead.' );\n\t\tprecision = maxPrecision;\n\n\t}\n\n\tvar logarithmicDepthBuffer = parameters.logarithmicDepthBuffer === true;\n\n\tvar maxTextures = gl.getParameter( gl.MAX_TEXTURE_IMAGE_UNITS );\n\tvar maxVertexTextures = gl.getParameter( gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS );\n\tvar maxTextureSize = gl.getParameter( gl.MAX_TEXTURE_SIZE );\n\tvar maxCubemapSize = gl.getParameter( gl.MAX_CUBE_MAP_TEXTURE_SIZE );\n\n\tvar maxAttributes = gl.getParameter( gl.MAX_VERTEX_ATTRIBS );\n\tvar maxVertexUniforms = gl.getParameter( gl.MAX_VERTEX_UNIFORM_VECTORS );\n\tvar maxVaryings = gl.getParameter( gl.MAX_VARYING_VECTORS );\n\tvar maxFragmentUniforms = gl.getParameter( gl.MAX_FRAGMENT_UNIFORM_VECTORS );\n\n\tvar vertexTextures = maxVertexTextures > 0;\n\tvar floatFragmentTextures = isWebGL2 || !! extensions.get( 'OES_texture_float' );\n\tvar floatVertexTextures = vertexTextures && floatFragmentTextures;\n\n\tvar maxSamples = isWebGL2 ? gl.getParameter( gl.MAX_SAMPLES ) : 0;\n\n\treturn {\n\n\t\tisWebGL2: isWebGL2,\n\n\t\tgetMaxAnisotropy: getMaxAnisotropy,\n\t\tgetMaxPrecision: getMaxPrecision,\n\n\t\tprecision: precision,\n\t\tlogarithmicDepthBuffer: logarithmicDepthBuffer,\n\n\t\tmaxTextures: maxTextures,\n\t\tmaxVertexTextures: maxVertexTextures,\n\t\tmaxTextureSize: maxTextureSize,\n\t\tmaxCubemapSize: maxCubemapSize,\n\n\t\tmaxAttributes: maxAttributes,\n\t\tmaxVertexUniforms: maxVertexUniforms,\n\t\tmaxVaryings: maxVaryings,\n\t\tmaxFragmentUniforms: maxFragmentUniforms,\n\n\t\tvertexTextures: vertexTextures,\n\t\tfloatFragmentTextures: floatFragmentTextures,\n\t\tfloatVertexTextures: floatVertexTextures,\n\n\t\tmaxSamples: maxSamples\n\n\t};\n\n}\n\n\nexport { WebGLCapabilities };\n","/**\n * @author tschw\n */\n\nimport { Matrix3 } from '../../math/Matrix3.js';\nimport { Plane } from '../../math/Plane.js';\n\nfunction WebGLClipping() {\n\n\tvar scope = this,\n\n\t\tglobalState = null,\n\t\tnumGlobalPlanes = 0,\n\t\tlocalClippingEnabled = false,\n\t\trenderingShadows = false,\n\n\t\tplane = new Plane(),\n\t\tviewNormalMatrix = new Matrix3(),\n\n\t\tuniform = { value: null, needsUpdate: false };\n\n\tthis.uniform = uniform;\n\tthis.numPlanes = 0;\n\tthis.numIntersection = 0;\n\n\tthis.init = function ( planes, enableLocalClipping, camera ) {\n\n\t\tvar enabled =\n\t\t\tplanes.length !== 0 ||\n\t\t\tenableLocalClipping ||\n\t\t\t// enable state of previous frame - the clipping code has to\n\t\t\t// run another frame in order to reset the state:\n\t\t\tnumGlobalPlanes !== 0 ||\n\t\t\tlocalClippingEnabled;\n\n\t\tlocalClippingEnabled = enableLocalClipping;\n\n\t\tglobalState = projectPlanes( planes, camera, 0 );\n\t\tnumGlobalPlanes = planes.length;\n\n\t\treturn enabled;\n\n\t};\n\n\tthis.beginShadows = function () {\n\n\t\trenderingShadows = true;\n\t\tprojectPlanes( null );\n\n\t};\n\n\tthis.endShadows = function () {\n\n\t\trenderingShadows = false;\n\t\tresetGlobalState();\n\n\t};\n\n\tthis.setState = function ( planes, clipIntersection, clipShadows, camera, cache, fromCache ) {\n\n\t\tif ( ! localClippingEnabled || planes === null || planes.length === 0 || renderingShadows && ! clipShadows ) {\n\n\t\t\t// there's no local clipping\n\n\t\t\tif ( renderingShadows ) {\n\n\t\t\t\t// there's no global clipping\n\n\t\t\t\tprojectPlanes( null );\n\n\t\t\t} else {\n\n\t\t\t\tresetGlobalState();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tvar nGlobal = renderingShadows ? 0 : numGlobalPlanes,\n\t\t\t\tlGlobal = nGlobal * 4,\n\n\t\t\t\tdstArray = cache.clippingState || null;\n\n\t\t\tuniform.value = dstArray; // ensure unique state\n\n\t\t\tdstArray = projectPlanes( planes, camera, lGlobal, fromCache );\n\n\t\t\tfor ( var i = 0; i !== lGlobal; ++ i ) {\n\n\t\t\t\tdstArray[ i ] = globalState[ i ];\n\n\t\t\t}\n\n\t\t\tcache.clippingState = dstArray;\n\t\t\tthis.numIntersection = clipIntersection ? this.numPlanes : 0;\n\t\t\tthis.numPlanes += nGlobal;\n\n\t\t}\n\n\n\t};\n\n\tfunction resetGlobalState() {\n\n\t\tif ( uniform.value !== globalState ) {\n\n\t\t\tuniform.value = globalState;\n\t\t\tuniform.needsUpdate = numGlobalPlanes > 0;\n\n\t\t}\n\n\t\tscope.numPlanes = numGlobalPlanes;\n\t\tscope.numIntersection = 0;\n\n\t}\n\n\tfunction projectPlanes( planes, camera, dstOffset, skipTransform ) {\n\n\t\tvar nPlanes = planes !== null ? planes.length : 0,\n\t\t\tdstArray = null;\n\n\t\tif ( nPlanes !== 0 ) {\n\n\t\t\tdstArray = uniform.value;\n\n\t\t\tif ( skipTransform !== true || dstArray === null ) {\n\n\t\t\t\tvar flatSize = dstOffset + nPlanes * 4,\n\t\t\t\t\tviewMatrix = camera.matrixWorldInverse;\n\n\t\t\t\tviewNormalMatrix.getNormalMatrix( viewMatrix );\n\n\t\t\t\tif ( dstArray === null || dstArray.length < flatSize ) {\n\n\t\t\t\t\tdstArray = new Float32Array( flatSize );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var i = 0, i4 = dstOffset; i !== nPlanes; ++ i, i4 += 4 ) {\n\n\t\t\t\t\tplane.copy( planes[ i ] ).applyMatrix4( viewMatrix, viewNormalMatrix );\n\n\t\t\t\t\tplane.normal.toArray( dstArray, i4 );\n\t\t\t\t\tdstArray[ i4 + 3 ] = plane.constant;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tuniform.value = dstArray;\n\t\t\tuniform.needsUpdate = true;\n\n\t\t}\n\n\t\tscope.numPlanes = nPlanes;\n\n\t\treturn dstArray;\n\n\t}\n\n}\n\n\nexport { WebGLClipping };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLExtensions( gl ) {\n\n\tvar extensions = {};\n\n\treturn {\n\n\t\tget: function ( name ) {\n\n\t\t\tif ( extensions[ name ] !== undefined ) {\n\n\t\t\t\treturn extensions[ name ];\n\n\t\t\t}\n\n\t\t\tvar extension;\n\n\t\t\tswitch ( name ) {\n\n\t\t\t\tcase 'WEBGL_depth_texture':\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_depth_texture' ) || gl.getExtension( 'MOZ_WEBGL_depth_texture' ) || gl.getExtension( 'WEBKIT_WEBGL_depth_texture' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'EXT_texture_filter_anisotropic':\n\t\t\t\t\textension = gl.getExtension( 'EXT_texture_filter_anisotropic' ) || gl.getExtension( 'MOZ_EXT_texture_filter_anisotropic' ) || gl.getExtension( 'WEBKIT_EXT_texture_filter_anisotropic' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'WEBGL_compressed_texture_s3tc':\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'MOZ_WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_s3tc' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'WEBGL_compressed_texture_pvrtc':\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_pvrtc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_pvrtc' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\textension = gl.getExtension( name );\n\n\t\t\t}\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: ' + name + ' extension not supported.' );\n\n\t\t\t}\n\n\t\t\textensions[ name ] = extension;\n\n\t\t\treturn extension;\n\n\t\t}\n\n\t};\n\n}\n\n\nexport { WebGLExtensions };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { Uint16BufferAttribute, Uint32BufferAttribute } from '../../core/BufferAttribute.js';\nimport { BufferGeometry } from '../../core/BufferGeometry.js';\nimport { arrayMax } from '../../utils.js';\n\nfunction WebGLGeometries( gl, attributes, info ) {\n\n\tvar geometries = new WeakMap();\n\tvar wireframeAttributes = new WeakMap();\n\n\tfunction onGeometryDispose( event ) {\n\n\t\tvar geometry = event.target;\n\t\tvar buffergeometry = geometries.get( geometry );\n\n\t\tif ( buffergeometry.index !== null ) {\n\n\t\t\tattributes.remove( buffergeometry.index );\n\n\t\t}\n\n\t\tfor ( var name in buffergeometry.attributes ) {\n\n\t\t\tattributes.remove( buffergeometry.attributes[ name ] );\n\n\t\t}\n\n\t\tgeometry.removeEventListener( 'dispose', onGeometryDispose );\n\n\t\tgeometries.delete( geometry );\n\n\t\tvar attribute = wireframeAttributes.get( buffergeometry );\n\n\t\tif ( attribute ) {\n\n\t\t\tattributes.remove( attribute );\n\t\t\twireframeAttributes.delete( buffergeometry );\n\n\t\t}\n\n\t\t//\n\n\t\tinfo.memory.geometries --;\n\n\t}\n\n\tfunction get( object, geometry ) {\n\n\t\tvar buffergeometry = geometries.get( geometry );\n\n\t\tif ( buffergeometry ) return buffergeometry;\n\n\t\tgeometry.addEventListener( 'dispose', onGeometryDispose );\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tbuffergeometry = geometry;\n\n\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\tif ( geometry._bufferGeometry === undefined ) {\n\n\t\t\t\tgeometry._bufferGeometry = new BufferGeometry().setFromObject( object );\n\n\t\t\t}\n\n\t\t\tbuffergeometry = geometry._bufferGeometry;\n\n\t\t}\n\n\t\tgeometries.set( geometry, buffergeometry );\n\n\t\tinfo.memory.geometries ++;\n\n\t\treturn buffergeometry;\n\n\t}\n\n\tfunction update( geometry ) {\n\n\t\tvar index = geometry.index;\n\t\tvar geometryAttributes = geometry.attributes;\n\n\t\tif ( index !== null ) {\n\n\t\t\tattributes.update( index, gl.ELEMENT_ARRAY_BUFFER );\n\n\t\t}\n\n\t\tfor ( var name in geometryAttributes ) {\n\n\t\t\tattributes.update( geometryAttributes[ name ], gl.ARRAY_BUFFER );\n\n\t\t}\n\n\t\t// morph targets\n\n\t\tvar morphAttributes = geometry.morphAttributes;\n\n\t\tfor ( var name in morphAttributes ) {\n\n\t\t\tvar array = morphAttributes[ name ];\n\n\t\t\tfor ( var i = 0, l = array.length; i < l; i ++ ) {\n\n\t\t\t\tattributes.update( array[ i ], gl.ARRAY_BUFFER );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction updateWireframeAttribute( geometry ) {\n\n\t\tvar indices = [];\n\n\t\tvar geometryIndex = geometry.index;\n\t\tvar geometryPosition = geometry.attributes.position;\n\t\tvar version = 0;\n\n\t\tif ( geometryIndex !== null ) {\n\n\t\t\tvar array = geometryIndex.array;\n\t\t\tversion = geometryIndex.version;\n\n\t\t\tfor ( var i = 0, l = array.length; i < l; i += 3 ) {\n\n\t\t\t\tvar a = array[ i + 0 ];\n\t\t\t\tvar b = array[ i + 1 ];\n\t\t\t\tvar c = array[ i + 2 ];\n\n\t\t\t\tindices.push( a, b, b, c, c, a );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tvar array = geometryPosition.array;\n\t\t\tversion = geometryPosition.version;\n\n\t\t\tfor ( var i = 0, l = ( array.length / 3 ) - 1; i < l; i += 3 ) {\n\n\t\t\t\tvar a = i + 0;\n\t\t\t\tvar b = i + 1;\n\t\t\t\tvar c = i + 2;\n\n\t\t\t\tindices.push( a, b, b, c, c, a );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar attribute = new ( arrayMax( indices ) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute )( indices, 1 );\n\t\tattribute.version = version;\n\n\t\tattributes.update( attribute, gl.ELEMENT_ARRAY_BUFFER );\n\n\t\t//\n\n\t\tvar previousAttribute = wireframeAttributes.get( geometry );\n\n\t\tif ( previousAttribute ) attributes.remove( previousAttribute );\n\n\t\t//\n\n\t\twireframeAttributes.set( geometry, attribute );\n\n\t}\n\n\tfunction getWireframeAttribute( geometry ) {\n\n\t\tvar currentAttribute = wireframeAttributes.get( geometry );\n\n\t\tif ( currentAttribute ) {\n\n\t\t\tvar geometryIndex = geometry.index;\n\n\t\t\tif ( geometryIndex !== null ) {\n\n\t\t\t\t// if the attribute is obsolete, create a new one\n\n\t\t\t\tif ( currentAttribute.version < geometryIndex.version ) {\n\n\t\t\t\t\tupdateWireframeAttribute( geometry );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tupdateWireframeAttribute( geometry );\n\n\t\t}\n\n\t\treturn wireframeAttributes.get( geometry );\n\n\t}\n\n\treturn {\n\n\t\tget: get,\n\t\tupdate: update,\n\n\t\tgetWireframeAttribute: getWireframeAttribute\n\n\t};\n\n}\n\n\nexport { WebGLGeometries };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLIndexedBufferRenderer( gl, extensions, info, capabilities ) {\n\n\tvar isWebGL2 = capabilities.isWebGL2;\n\n\tvar mode;\n\n\tfunction setMode( value ) {\n\n\t\tmode = value;\n\n\t}\n\n\tvar type, bytesPerElement;\n\n\tfunction setIndex( value ) {\n\n\t\ttype = value.type;\n\t\tbytesPerElement = value.bytesPerElement;\n\n\t}\n\n\tfunction render( start, count ) {\n\n\t\tgl.drawElements( mode, count, type, start * bytesPerElement );\n\n\t\tinfo.update( count, mode );\n\n\t}\n\n\tfunction renderInstances( geometry, start, count, primcount ) {\n\n\t\tif ( primcount === 0 ) return;\n\n\t\tvar extension, methodName;\n\n\t\tif ( isWebGL2 ) {\n\n\t\t\textension = gl;\n\t\t\tmethodName = 'drawElementsInstanced';\n\n\t\t} else {\n\n\t\t\textension = extensions.get( 'ANGLE_instanced_arrays' );\n\t\t\tmethodName = 'drawElementsInstancedANGLE';\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\textension[ methodName ]( mode, count, type, start * bytesPerElement, primcount );\n\n\t\tinfo.update( count, mode, primcount );\n\n\t}\n\n\t//\n\n\tthis.setMode = setMode;\n\tthis.setIndex = setIndex;\n\tthis.render = render;\n\tthis.renderInstances = renderInstances;\n\n}\n\n\nexport { WebGLIndexedBufferRenderer };\n","/**\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nfunction WebGLInfo( gl ) {\n\n\tvar memory = {\n\t\tgeometries: 0,\n\t\ttextures: 0\n\t};\n\n\tvar render = {\n\t\tframe: 0,\n\t\tcalls: 0,\n\t\ttriangles: 0,\n\t\tpoints: 0,\n\t\tlines: 0\n\t};\n\n\tfunction update( count, mode, instanceCount ) {\n\n\t\tinstanceCount = instanceCount || 1;\n\n\t\trender.calls ++;\n\n\t\tswitch ( mode ) {\n\n\t\t\tcase gl.TRIANGLES:\n\t\t\t\trender.triangles += instanceCount * ( count / 3 );\n\t\t\t\tbreak;\n\n\t\t\tcase gl.LINES:\n\t\t\t\trender.lines += instanceCount * ( count / 2 );\n\t\t\t\tbreak;\n\n\t\t\tcase gl.LINE_STRIP:\n\t\t\t\trender.lines += instanceCount * ( count - 1 );\n\t\t\t\tbreak;\n\n\t\t\tcase gl.LINE_LOOP:\n\t\t\t\trender.lines += instanceCount * count;\n\t\t\t\tbreak;\n\n\t\t\tcase gl.POINTS:\n\t\t\t\trender.points += instanceCount * count;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.error( 'THREE.WebGLInfo: Unknown draw mode:', mode );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction reset() {\n\n\t\trender.frame ++;\n\t\trender.calls = 0;\n\t\trender.triangles = 0;\n\t\trender.points = 0;\n\t\trender.lines = 0;\n\n\t}\n\n\treturn {\n\t\tmemory: memory,\n\t\trender: render,\n\t\tprograms: null,\n\t\tautoReset: true,\n\t\treset: reset,\n\t\tupdate: update\n\t};\n\n}\n\n\nexport { WebGLInfo };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction absNumericalSort( a, b ) {\n\n\treturn Math.abs( b[ 1 ] ) - Math.abs( a[ 1 ] );\n\n}\n\nfunction WebGLMorphtargets( gl ) {\n\n\tvar influencesList = {};\n\tvar morphInfluences = new Float32Array( 8 );\n\n\tfunction update( object, geometry, material, program ) {\n\n\t\tvar objectInfluences = object.morphTargetInfluences;\n\n\t\t// When object doesn't have morph target influences defined, we treat it as a 0-length array\n\t\t// This is important to make sure we set up morphTargetBaseInfluence / morphTargetInfluences\n\n\t\tvar length = objectInfluences === undefined ? 0 : objectInfluences.length;\n\n\t\tvar influences = influencesList[ geometry.id ];\n\n\t\tif ( influences === undefined ) {\n\n\t\t\t// initialise list\n\n\t\t\tinfluences = [];\n\n\t\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\t\tinfluences[ i ] = [ i, 0 ];\n\n\t\t\t}\n\n\t\t\tinfluencesList[ geometry.id ] = influences;\n\n\t\t}\n\n\t\tvar morphTargets = material.morphTargets && geometry.morphAttributes.position;\n\t\tvar morphNormals = material.morphNormals && geometry.morphAttributes.normal;\n\n\t\t// Remove current morphAttributes\n\n\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\tvar influence = influences[ i ];\n\n\t\t\tif ( influence[ 1 ] !== 0 ) {\n\n\t\t\t\tif ( morphTargets ) geometry.deleteAttribute( 'morphTarget' + i );\n\t\t\t\tif ( morphNormals ) geometry.deleteAttribute( 'morphNormal' + i );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Collect influences\n\n\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\tvar influence = influences[ i ];\n\n\t\t\tinfluence[ 0 ] = i;\n\t\t\tinfluence[ 1 ] = objectInfluences[ i ];\n\n\t\t}\n\n\t\tinfluences.sort( absNumericalSort );\n\n\t\t// Add morphAttributes\n\n\t\tvar morphInfluencesSum = 0;\n\n\t\tfor ( var i = 0; i < 8; i ++ ) {\n\n\t\t\tvar influence = influences[ i ];\n\n\t\t\tif ( influence ) {\n\n\t\t\t\tvar index = influence[ 0 ];\n\t\t\t\tvar value = influence[ 1 ];\n\n\t\t\t\tif ( value ) {\n\n\t\t\t\t\tif ( morphTargets ) geometry.setAttribute( 'morphTarget' + i, morphTargets[ index ] );\n\t\t\t\t\tif ( morphNormals ) geometry.setAttribute( 'morphNormal' + i, morphNormals[ index ] );\n\n\t\t\t\t\tmorphInfluences[ i ] = value;\n\t\t\t\t\tmorphInfluencesSum += value;\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tmorphInfluences[ i ] = 0;\n\n\t\t}\n\n\t\t// GLSL shader uses formula baseinfluence * base + sum(target * influence)\n\t\t// This allows us to switch between absolute morphs and relative morphs without changing shader code\n\t\t// When baseinfluence = 1 - sum(influence), the above is equivalent to sum((target - base) * influence)\n\t\tvar morphBaseInfluence = geometry.morphTargetsRelative ? 1 : 1 - morphInfluencesSum;\n\n\t\tprogram.getUniforms().setValue( gl, 'morphTargetBaseInfluence', morphBaseInfluence );\n\t\tprogram.getUniforms().setValue( gl, 'morphTargetInfluences', morphInfluences );\n\n\t}\n\n\treturn {\n\n\t\tupdate: update\n\n\t};\n\n}\n\n\nexport { WebGLMorphtargets };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLObjects( gl, geometries, attributes, info ) {\n\n\tvar updateList = {};\n\n\tfunction update( object ) {\n\n\t\tvar frame = info.render.frame;\n\n\t\tvar geometry = object.geometry;\n\t\tvar buffergeometry = geometries.get( object, geometry );\n\n\t\t// Update once per frame\n\n\t\tif ( updateList[ buffergeometry.id ] !== frame ) {\n\n\t\t\tif ( geometry.isGeometry ) {\n\n\t\t\t\tbuffergeometry.updateFromObject( object );\n\n\t\t\t}\n\n\t\t\tgeometries.update( buffergeometry );\n\n\t\t\tupdateList[ buffergeometry.id ] = frame;\n\n\t\t}\n\n\t\tif ( object.isInstancedMesh ) {\n\n\t\t\tattributes.update( object.instanceMatrix, gl.ARRAY_BUFFER );\n\n\t\t}\n\n\t\treturn buffergeometry;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tupdateList = {};\n\n\t}\n\n\treturn {\n\n\t\tupdate: update,\n\t\tdispose: dispose\n\n\t};\n\n}\n\n\nexport { WebGLObjects };\n","/**\n * @author Takahiro https://github.com/takahirox\n */\n\nimport { Texture } from './Texture.js';\nimport { ClampToEdgeWrapping, NearestFilter } from '../constants.js';\n\nfunction DataTexture2DArray( data, width, height, depth ) {\n\n\tTexture.call( this, null );\n\n\tthis.image = { data: data || null, width: width || 1, height: height || 1, depth: depth || 1 };\n\n\tthis.magFilter = NearestFilter;\n\tthis.minFilter = NearestFilter;\n\n\tthis.wrapR = ClampToEdgeWrapping;\n\n\tthis.generateMipmaps = false;\n\tthis.flipY = false;\n\n\tthis.needsUpdate = true;\n\n}\n\nDataTexture2DArray.prototype = Object.create( Texture.prototype );\nDataTexture2DArray.prototype.constructor = DataTexture2DArray;\nDataTexture2DArray.prototype.isDataTexture2DArray = true;\n\nexport { DataTexture2DArray };\n","/**\n * @author Artur Trzesiok\n */\n\nimport { Texture } from './Texture.js';\nimport { ClampToEdgeWrapping, NearestFilter } from '../constants.js';\n\nfunction DataTexture3D( data, width, height, depth ) {\n\n\t// We're going to add .setXXX() methods for setting properties later.\n\t// Users can still set in DataTexture3D directly.\n\t//\n\t//\tvar texture = new THREE.DataTexture3D( data, width, height, depth );\n\t// \ttexture.anisotropy = 16;\n\t//\n\t// See #14839\n\n\tTexture.call( this, null );\n\n\tthis.image = { data: data || null, width: width || 1, height: height || 1, depth: depth || 1 };\n\n\tthis.magFilter = NearestFilter;\n\tthis.minFilter = NearestFilter;\n\n\tthis.wrapR = ClampToEdgeWrapping;\n\n\tthis.generateMipmaps = false;\n\tthis.flipY = false;\n\n\tthis.needsUpdate = true;\n\n\n}\n\nDataTexture3D.prototype = Object.create( Texture.prototype );\nDataTexture3D.prototype.constructor = DataTexture3D;\nDataTexture3D.prototype.isDataTexture3D = true;\n\nexport { DataTexture3D };\n","/**\n * @author tschw\n * @author Mugen87 / https://github.com/Mugen87\n * @author mrdoob / http://mrdoob.com/\n *\n * Uniforms of a program.\n * Those form a tree structure with a special top-level container for the root,\n * which you get by calling 'new WebGLUniforms( gl, program )'.\n *\n *\n * Properties of inner nodes including the top-level container:\n *\n * .seq - array of nested uniforms\n * .map - nested uniforms by name\n *\n *\n * Methods of all nodes except the top-level container:\n *\n * .setValue( gl, value, [textures] )\n *\n * \t\tuploads a uniform value(s)\n *  \tthe 'textures' parameter is needed for sampler uniforms\n *\n *\n * Static methods of the top-level container (textures factorizations):\n *\n * .upload( gl, seq, values, textures )\n *\n * \t\tsets uniforms in 'seq' to 'values[id].value'\n *\n * .seqWithValue( seq, values ) : filteredSeq\n *\n * \t\tfilters 'seq' entries with corresponding entry in values\n *\n *\n * Methods of the top-level container (textures factorizations):\n *\n * .setValue( gl, name, value, textures )\n *\n * \t\tsets uniform with  name 'name' to 'value'\n *\n * .setOptional( gl, obj, prop )\n *\n * \t\tlike .set for an optional property of the object\n *\n */\n\nimport { CubeTexture } from '../../textures/CubeTexture.js';\nimport { Texture } from '../../textures/Texture.js';\nimport { DataTexture2DArray } from '../../textures/DataTexture2DArray.js';\nimport { DataTexture3D } from '../../textures/DataTexture3D.js';\n\nvar emptyTexture = new Texture();\nvar emptyTexture2dArray = new DataTexture2DArray();\nvar emptyTexture3d = new DataTexture3D();\nvar emptyCubeTexture = new CubeTexture();\n\n// --- Utilities ---\n\n// Array Caches (provide typed arrays for temporary by size)\n\nvar arrayCacheF32 = [];\nvar arrayCacheI32 = [];\n\n// Float32Array caches used for uploading Matrix uniforms\n\nvar mat4array = new Float32Array( 16 );\nvar mat3array = new Float32Array( 9 );\nvar mat2array = new Float32Array( 4 );\n\n// Flattening for arrays of vectors and matrices\n\nfunction flatten( array, nBlocks, blockSize ) {\n\n\tvar firstElem = array[ 0 ];\n\n\tif ( firstElem <= 0 || firstElem > 0 ) return array;\n\t// unoptimized: ! isNaN( firstElem )\n\t// see http://jacksondunstan.com/articles/983\n\n\tvar n = nBlocks * blockSize,\n\t\tr = arrayCacheF32[ n ];\n\n\tif ( r === undefined ) {\n\n\t\tr = new Float32Array( n );\n\t\tarrayCacheF32[ n ] = r;\n\n\t}\n\n\tif ( nBlocks !== 0 ) {\n\n\t\tfirstElem.toArray( r, 0 );\n\n\t\tfor ( var i = 1, offset = 0; i !== nBlocks; ++ i ) {\n\n\t\t\toffset += blockSize;\n\t\t\tarray[ i ].toArray( r, offset );\n\n\t\t}\n\n\t}\n\n\treturn r;\n\n}\n\nfunction arraysEqual( a, b ) {\n\n\tif ( a.length !== b.length ) return false;\n\n\tfor ( var i = 0, l = a.length; i < l; i ++ ) {\n\n\t\tif ( a[ i ] !== b[ i ] ) return false;\n\n\t}\n\n\treturn true;\n\n}\n\nfunction copyArray( a, b ) {\n\n\tfor ( var i = 0, l = b.length; i < l; i ++ ) {\n\n\t\ta[ i ] = b[ i ];\n\n\t}\n\n}\n\n// Texture unit allocation\n\nfunction allocTexUnits( textures, n ) {\n\n\tvar r = arrayCacheI32[ n ];\n\n\tif ( r === undefined ) {\n\n\t\tr = new Int32Array( n );\n\t\tarrayCacheI32[ n ] = r;\n\n\t}\n\n\tfor ( var i = 0; i !== n; ++ i )\n\t\tr[ i ] = textures.allocateTextureUnit();\n\n\treturn r;\n\n}\n\n// --- Setters ---\n\n// Note: Defining these methods externally, because they come in a bunch\n// and this way their names minify.\n\n// Single scalar\n\nfunction setValueV1f( gl, v ) {\n\n\tvar cache = this.cache;\n\n\tif ( cache[ 0 ] === v ) return;\n\n\tgl.uniform1f( this.addr, v );\n\n\tcache[ 0 ] = v;\n\n}\n\n// Single float vector (from flat array or THREE.VectorN)\n\nfunction setValueV2f( gl, v ) {\n\n\tvar cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y ) {\n\n\t\t\tgl.uniform2f( this.addr, v.x, v.y );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform2fv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\nfunction setValueV3f( gl, v ) {\n\n\tvar cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z ) {\n\n\t\t\tgl.uniform3f( this.addr, v.x, v.y, v.z );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\t\t\tcache[ 2 ] = v.z;\n\n\t\t}\n\n\t} else if ( v.r !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.r || cache[ 1 ] !== v.g || cache[ 2 ] !== v.b ) {\n\n\t\t\tgl.uniform3f( this.addr, v.r, v.g, v.b );\n\n\t\t\tcache[ 0 ] = v.r;\n\t\t\tcache[ 1 ] = v.g;\n\t\t\tcache[ 2 ] = v.b;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform3fv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\nfunction setValueV4f( gl, v ) {\n\n\tvar cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z || cache[ 3 ] !== v.w ) {\n\n\t\t\tgl.uniform4f( this.addr, v.x, v.y, v.z, v.w );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\t\t\tcache[ 2 ] = v.z;\n\t\t\tcache[ 3 ] = v.w;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform4fv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\n// Single matrix (from flat array or MatrixN)\n\nfunction setValueM2( gl, v ) {\n\n\tvar cache = this.cache;\n\tvar elements = v.elements;\n\n\tif ( elements === undefined ) {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniformMatrix2fv( this.addr, false, v );\n\n\t\tcopyArray( cache, v );\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, elements ) ) return;\n\n\t\tmat2array.set( elements );\n\n\t\tgl.uniformMatrix2fv( this.addr, false, mat2array );\n\n\t\tcopyArray( cache, elements );\n\n\t}\n\n}\n\nfunction setValueM3( gl, v ) {\n\n\tvar cache = this.cache;\n\tvar elements = v.elements;\n\n\tif ( elements === undefined ) {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniformMatrix3fv( this.addr, false, v );\n\n\t\tcopyArray( cache, v );\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, elements ) ) return;\n\n\t\tmat3array.set( elements );\n\n\t\tgl.uniformMatrix3fv( this.addr, false, mat3array );\n\n\t\tcopyArray( cache, elements );\n\n\t}\n\n}\n\nfunction setValueM4( gl, v ) {\n\n\tvar cache = this.cache;\n\tvar elements = v.elements;\n\n\tif ( elements === undefined ) {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniformMatrix4fv( this.addr, false, v );\n\n\t\tcopyArray( cache, v );\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, elements ) ) return;\n\n\t\tmat4array.set( elements );\n\n\t\tgl.uniformMatrix4fv( this.addr, false, mat4array );\n\n\t\tcopyArray( cache, elements );\n\n\t}\n\n}\n\n// Single texture (2D / Cube)\n\nfunction setValueT1( gl, v, textures ) {\n\n\tvar cache = this.cache;\n\tvar unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.safeSetTexture2D( v || emptyTexture, unit );\n\n}\n\nfunction setValueT2DArray1( gl, v, textures ) {\n\n\tvar cache = this.cache;\n\tvar unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.setTexture2DArray( v || emptyTexture2dArray, unit );\n\n}\n\nfunction setValueT3D1( gl, v, textures ) {\n\n\tvar cache = this.cache;\n\tvar unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.setTexture3D( v || emptyTexture3d, unit );\n\n}\n\nfunction setValueT6( gl, v, textures ) {\n\n\tvar cache = this.cache;\n\tvar unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.safeSetTextureCube( v || emptyCubeTexture, unit );\n\n}\n\n// Integer / Boolean vectors or arrays thereof (always flat arrays)\n\nfunction setValueV1i( gl, v ) {\n\n\tvar cache = this.cache;\n\n\tif ( cache[ 0 ] === v ) return;\n\n\tgl.uniform1i( this.addr, v );\n\n\tcache[ 0 ] = v;\n\n}\n\nfunction setValueV2i( gl, v ) {\n\n\tvar cache = this.cache;\n\n\tif ( arraysEqual( cache, v ) ) return;\n\n\tgl.uniform2iv( this.addr, v );\n\n\tcopyArray( cache, v );\n\n}\n\nfunction setValueV3i( gl, v ) {\n\n\tvar cache = this.cache;\n\n\tif ( arraysEqual( cache, v ) ) return;\n\n\tgl.uniform3iv( this.addr, v );\n\n\tcopyArray( cache, v );\n\n}\n\nfunction setValueV4i( gl, v ) {\n\n\tvar cache = this.cache;\n\n\tif ( arraysEqual( cache, v ) ) return;\n\n\tgl.uniform4iv( this.addr, v );\n\n\tcopyArray( cache, v );\n\n}\n\n// Helper to pick the right setter for the singular case\n\nfunction getSingularSetter( type ) {\n\n\tswitch ( type ) {\n\n\t\tcase 0x1406: return setValueV1f; // FLOAT\n\t\tcase 0x8b50: return setValueV2f; // _VEC2\n\t\tcase 0x8b51: return setValueV3f; // _VEC3\n\t\tcase 0x8b52: return setValueV4f; // _VEC4\n\n\t\tcase 0x8b5a: return setValueM2; // _MAT2\n\t\tcase 0x8b5b: return setValueM3; // _MAT3\n\t\tcase 0x8b5c: return setValueM4; // _MAT4\n\n\t\tcase 0x8b5e: case 0x8d66: return setValueT1; // SAMPLER_2D, SAMPLER_EXTERNAL_OES\n\t\tcase 0x8b5f: return setValueT3D1; // SAMPLER_3D\n\t\tcase 0x8b60: return setValueT6; // SAMPLER_CUBE\n\t\tcase 0x8DC1: return setValueT2DArray1; // SAMPLER_2D_ARRAY\n\n\t\tcase 0x1404: case 0x8b56: return setValueV1i; // INT, BOOL\n\t\tcase 0x8b53: case 0x8b57: return setValueV2i; // _VEC2\n\t\tcase 0x8b54: case 0x8b58: return setValueV3i; // _VEC3\n\t\tcase 0x8b55: case 0x8b59: return setValueV4i; // _VEC4\n\n\t}\n\n}\n\n// Array of scalars\nfunction setValueV1fArray( gl, v ) {\n\n\tgl.uniform1fv( this.addr, v );\n\n}\n\n// Integer / Boolean vectors or arrays thereof (always flat arrays)\nfunction setValueV1iArray( gl, v ) {\n\n\tgl.uniform1iv( this.addr, v );\n\n}\n\nfunction setValueV2iArray( gl, v ) {\n\n\tgl.uniform2iv( this.addr, v );\n\n}\n\nfunction setValueV3iArray( gl, v ) {\n\n\tgl.uniform3iv( this.addr, v );\n\n}\n\nfunction setValueV4iArray( gl, v ) {\n\n\tgl.uniform4iv( this.addr, v );\n\n}\n\n\n// Array of vectors (flat or from THREE classes)\n\nfunction setValueV2fArray( gl, v ) {\n\n\tvar data = flatten( v, this.size, 2 );\n\n\tgl.uniform2fv( this.addr, data );\n\n}\n\nfunction setValueV3fArray( gl, v ) {\n\n\tvar data = flatten( v, this.size, 3 );\n\n\tgl.uniform3fv( this.addr, data );\n\n}\n\nfunction setValueV4fArray( gl, v ) {\n\n\tvar data = flatten( v, this.size, 4 );\n\n\tgl.uniform4fv( this.addr, data );\n\n}\n\n// Array of matrices (flat or from THREE clases)\n\nfunction setValueM2Array( gl, v ) {\n\n\tvar data = flatten( v, this.size, 4 );\n\n\tgl.uniformMatrix2fv( this.addr, false, data );\n\n}\n\nfunction setValueM3Array( gl, v ) {\n\n\tvar data = flatten( v, this.size, 9 );\n\n\tgl.uniformMatrix3fv( this.addr, false, data );\n\n}\n\nfunction setValueM4Array( gl, v ) {\n\n\tvar data = flatten( v, this.size, 16 );\n\n\tgl.uniformMatrix4fv( this.addr, false, data );\n\n}\n\n// Array of textures (2D / Cube)\n\nfunction setValueT1Array( gl, v, textures ) {\n\n\tvar n = v.length;\n\n\tvar units = allocTexUnits( textures, n );\n\n\tgl.uniform1iv( this.addr, units );\n\n\tfor ( var i = 0; i !== n; ++ i ) {\n\n\t\ttextures.safeSetTexture2D( v[ i ] || emptyTexture, units[ i ] );\n\n\t}\n\n}\n\nfunction setValueT6Array( gl, v, textures ) {\n\n\tvar n = v.length;\n\n\tvar units = allocTexUnits( textures, n );\n\n\tgl.uniform1iv( this.addr, units );\n\n\tfor ( var i = 0; i !== n; ++ i ) {\n\n\t\ttextures.safeSetTextureCube( v[ i ] || emptyCubeTexture, units[ i ] );\n\n\t}\n\n}\n\n// Helper to pick the right setter for a pure (bottom-level) array\n\nfunction getPureArraySetter( type ) {\n\n\tswitch ( type ) {\n\n\t\tcase 0x1406: return setValueV1fArray; // FLOAT\n\t\tcase 0x8b50: return setValueV2fArray; // _VEC2\n\t\tcase 0x8b51: return setValueV3fArray; // _VEC3\n\t\tcase 0x8b52: return setValueV4fArray; // _VEC4\n\n\t\tcase 0x8b5a: return setValueM2Array; // _MAT2\n\t\tcase 0x8b5b: return setValueM3Array; // _MAT3\n\t\tcase 0x8b5c: return setValueM4Array; // _MAT4\n\n\t\tcase 0x8b5e: // SAMPLER_2D\n\t\tcase 0x8d66: // SAMPLER_EXTERNAL_OES\n\t\tcase 0x8dca: // INT_SAMPLER_2D\n\t\tcase 0x8dd2: // UNSIGNED_INT_SAMPLER_2D\n\t\t\treturn setValueT1Array;\n\n\t\tcase 0x8b60: // SAMPLER_CUBE\n\t\tcase 0x8dcc: // INT_SAMPLER_CUBE\n\t\tcase 0x8dd4: // UNSIGNED_SAMPLER_CUBE\n\t\t\treturn setValueT6Array;\n\n\t\tcase 0x1404: case 0x8b56: return setValueV1iArray; // INT, BOOL\n\t\tcase 0x8b53: case 0x8b57: return setValueV2iArray; // _VEC2\n\t\tcase 0x8b54: case 0x8b58: return setValueV3iArray; // _VEC3\n\t\tcase 0x8b55: case 0x8b59: return setValueV4iArray; // _VEC4\n\n\t}\n\n}\n\n// --- Uniform Classes ---\n\nfunction SingleUniform( id, activeInfo, addr ) {\n\n\tthis.id = id;\n\tthis.addr = addr;\n\tthis.cache = [];\n\tthis.setValue = getSingularSetter( activeInfo.type );\n\n\t// this.path = activeInfo.name; // DEBUG\n\n}\n\nfunction PureArrayUniform( id, activeInfo, addr ) {\n\n\tthis.id = id;\n\tthis.addr = addr;\n\tthis.cache = [];\n\tthis.size = activeInfo.size;\n\tthis.setValue = getPureArraySetter( activeInfo.type );\n\n\t// this.path = activeInfo.name; // DEBUG\n\n}\n\nPureArrayUniform.prototype.updateCache = function ( data ) {\n\n\tvar cache = this.cache;\n\n\tif ( data instanceof Float32Array && cache.length !== data.length ) {\n\n\t\tthis.cache = new Float32Array( data.length );\n\n\t}\n\n\tcopyArray( cache, data );\n\n};\n\nfunction StructuredUniform( id ) {\n\n\tthis.id = id;\n\n\tthis.seq = [];\n\tthis.map = {};\n\n}\n\nStructuredUniform.prototype.setValue = function ( gl, value, textures ) {\n\n\tvar seq = this.seq;\n\n\tfor ( var i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\tvar u = seq[ i ];\n\t\tu.setValue( gl, value[ u.id ], textures );\n\n\t}\n\n};\n\n// --- Top-level ---\n\n// Parser - builds up the property tree from the path strings\n\nvar RePathPart = /([\\w\\d_]+)(\\])?(\\[|\\.)?/g;\n\n// extracts\n// \t- the identifier (member name or array index)\n//  - followed by an optional right bracket (found when array index)\n//  - followed by an optional left bracket or dot (type of subscript)\n//\n// Note: These portions can be read in a non-overlapping fashion and\n// allow straightforward parsing of the hierarchy that WebGL encodes\n// in the uniform names.\n\nfunction addUniform( container, uniformObject ) {\n\n\tcontainer.seq.push( uniformObject );\n\tcontainer.map[ uniformObject.id ] = uniformObject;\n\n}\n\nfunction parseUniform( activeInfo, addr, container ) {\n\n\tvar path = activeInfo.name,\n\t\tpathLength = path.length;\n\n\t// reset RegExp object, because of the early exit of a previous run\n\tRePathPart.lastIndex = 0;\n\n\twhile ( true ) {\n\n\t\tvar match = RePathPart.exec( path ),\n\t\t\tmatchEnd = RePathPart.lastIndex,\n\n\t\t\tid = match[ 1 ],\n\t\t\tidIsIndex = match[ 2 ] === ']',\n\t\t\tsubscript = match[ 3 ];\n\n\t\tif ( idIsIndex ) id = id | 0; // convert to integer\n\n\t\tif ( subscript === undefined || subscript === '[' && matchEnd + 2 === pathLength ) {\n\n\t\t\t// bare name or \"pure\" bottom-level array \"[0]\" suffix\n\n\t\t\taddUniform( container, subscript === undefined ?\n\t\t\t\tnew SingleUniform( id, activeInfo, addr ) :\n\t\t\t\tnew PureArrayUniform( id, activeInfo, addr ) );\n\n\t\t\tbreak;\n\n\t\t} else {\n\n\t\t\t// step into inner node / create it in case it doesn't exist\n\n\t\t\tvar map = container.map, next = map[ id ];\n\n\t\t\tif ( next === undefined ) {\n\n\t\t\t\tnext = new StructuredUniform( id );\n\t\t\t\taddUniform( container, next );\n\n\t\t\t}\n\n\t\t\tcontainer = next;\n\n\t\t}\n\n\t}\n\n}\n\n// Root Container\n\nfunction WebGLUniforms( gl, program ) {\n\n\tthis.seq = [];\n\tthis.map = {};\n\n\tvar n = gl.getProgramParameter( program, gl.ACTIVE_UNIFORMS );\n\n\tfor ( var i = 0; i < n; ++ i ) {\n\n\t\tvar info = gl.getActiveUniform( program, i ),\n\t\t\taddr = gl.getUniformLocation( program, info.name );\n\n\t\tparseUniform( info, addr, this );\n\n\t}\n\n}\n\nWebGLUniforms.prototype.setValue = function ( gl, name, value, textures ) {\n\n\tvar u = this.map[ name ];\n\n\tif ( u !== undefined ) u.setValue( gl, value, textures );\n\n};\n\nWebGLUniforms.prototype.setOptional = function ( gl, object, name ) {\n\n\tvar v = object[ name ];\n\n\tif ( v !== undefined ) this.setValue( gl, name, v );\n\n};\n\n\n// Static interface\n\nWebGLUniforms.upload = function ( gl, seq, values, textures ) {\n\n\tfor ( var i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\tvar u = seq[ i ],\n\t\t\tv = values[ u.id ];\n\n\t\tif ( v.needsUpdate !== false ) {\n\n\t\t\t// note: always updating when .needsUpdate is undefined\n\t\t\tu.setValue( gl, v.value, textures );\n\n\t\t}\n\n\t}\n\n};\n\nWebGLUniforms.seqWithValue = function ( seq, values ) {\n\n\tvar r = [];\n\n\tfor ( var i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\tvar u = seq[ i ];\n\t\tif ( u.id in values ) r.push( u );\n\n\t}\n\n\treturn r;\n\n};\n\nexport { WebGLUniforms };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLShader( gl, type, string ) {\n\n\tvar shader = gl.createShader( type );\n\n\tgl.shaderSource( shader, string );\n\tgl.compileShader( shader );\n\n\treturn shader;\n\n}\n\nexport { WebGLShader };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { WebGLUniforms } from './WebGLUniforms.js';\nimport { WebGLShader } from './WebGLShader.js';\nimport { ShaderChunk } from '../shaders/ShaderChunk.js';\nimport { NoToneMapping, AddOperation, MixOperation, MultiplyOperation, EquirectangularRefractionMapping, CubeRefractionMapping, SphericalReflectionMapping, EquirectangularReflectionMapping, CubeUVRefractionMapping, CubeUVReflectionMapping, CubeReflectionMapping, PCFSoftShadowMap, PCFShadowMap, VSMShadowMap, ACESFilmicToneMapping, CineonToneMapping, Uncharted2ToneMapping, ReinhardToneMapping, LinearToneMapping, GammaEncoding, RGBDEncoding, RGBM16Encoding, RGBM7Encoding, RGBEEncoding, sRGBEncoding, LinearEncoding, LogLuvEncoding } from '../../constants.js';\n\nvar programIdCount = 0;\n\nfunction addLineNumbers( string ) {\n\n\tvar lines = string.split( '\\n' );\n\n\tfor ( var i = 0; i < lines.length; i ++ ) {\n\n\t\tlines[ i ] = ( i + 1 ) + ': ' + lines[ i ];\n\n\t}\n\n\treturn lines.join( '\\n' );\n\n}\n\nfunction getEncodingComponents( encoding ) {\n\n\tswitch ( encoding ) {\n\n\t\tcase LinearEncoding:\n\t\t\treturn [ 'Linear', '( value )' ];\n\t\tcase sRGBEncoding:\n\t\t\treturn [ 'sRGB', '( value )' ];\n\t\tcase RGBEEncoding:\n\t\t\treturn [ 'RGBE', '( value )' ];\n\t\tcase RGBM7Encoding:\n\t\t\treturn [ 'RGBM', '( value, 7.0 )' ];\n\t\tcase RGBM16Encoding:\n\t\t\treturn [ 'RGBM', '( value, 16.0 )' ];\n\t\tcase RGBDEncoding:\n\t\t\treturn [ 'RGBD', '( value, 256.0 )' ];\n\t\tcase GammaEncoding:\n\t\t\treturn [ 'Gamma', '( value, float( GAMMA_FACTOR ) )' ];\n\t\tcase LogLuvEncoding:\n\t\t\treturn [ 'LogLuv', '( value )' ];\n\t\tdefault:\n\t\t\tthrow new Error( 'unsupported encoding: ' + encoding );\n\n\t}\n\n}\n\nfunction getShaderErrors( gl, shader, type ) {\n\n\tvar status = gl.getShaderParameter( shader, gl.COMPILE_STATUS );\n\tvar log = gl.getShaderInfoLog( shader ).trim();\n\n\tif ( status && log === '' ) return '';\n\n\t// --enable-privileged-webgl-extension\n\t// console.log( '**' + type + '**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( shader ) );\n\n\tvar source = gl.getShaderSource( shader );\n\n\treturn 'THREE.WebGLShader: gl.getShaderInfoLog() ' + type + '\\n' + log + addLineNumbers( source );\n\n}\n\nfunction getTexelDecodingFunction( functionName, encoding ) {\n\n\tvar components = getEncodingComponents( encoding );\n\treturn 'vec4 ' + functionName + '( vec4 value ) { return ' + components[ 0 ] + 'ToLinear' + components[ 1 ] + '; }';\n\n}\n\nfunction getTexelEncodingFunction( functionName, encoding ) {\n\n\tvar components = getEncodingComponents( encoding );\n\treturn 'vec4 ' + functionName + '( vec4 value ) { return LinearTo' + components[ 0 ] + components[ 1 ] + '; }';\n\n}\n\nfunction getToneMappingFunction( functionName, toneMapping ) {\n\n\tvar toneMappingName;\n\n\tswitch ( toneMapping ) {\n\n\t\tcase LinearToneMapping:\n\t\t\ttoneMappingName = 'Linear';\n\t\t\tbreak;\n\n\t\tcase ReinhardToneMapping:\n\t\t\ttoneMappingName = 'Reinhard';\n\t\t\tbreak;\n\n\t\tcase Uncharted2ToneMapping:\n\t\t\ttoneMappingName = 'Uncharted2';\n\t\t\tbreak;\n\n\t\tcase CineonToneMapping:\n\t\t\ttoneMappingName = 'OptimizedCineon';\n\t\t\tbreak;\n\n\t\tcase ACESFilmicToneMapping:\n\t\t\ttoneMappingName = 'ACESFilmic';\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tthrow new Error( 'unsupported toneMapping: ' + toneMapping );\n\n\t}\n\n\treturn 'vec3 ' + functionName + '( vec3 color ) { return ' + toneMappingName + 'ToneMapping( color ); }';\n\n}\n\nfunction generateExtensions( extensions, parameters, rendererExtensions ) {\n\n\textensions = extensions || {};\n\n\tvar chunks = [\n\t\t( extensions.derivatives || parameters.envMapCubeUV || parameters.bumpMap || parameters.tangentSpaceNormalMap || parameters.clearcoatNormalMap || parameters.flatShading || parameters.shaderID === 'physical' ) ? '#extension GL_OES_standard_derivatives : enable' : '',\n\t\t( extensions.fragDepth || parameters.logarithmicDepthBuffer ) && rendererExtensions.get( 'EXT_frag_depth' ) ? '#extension GL_EXT_frag_depth : enable' : '',\n\t\t( extensions.drawBuffers ) && rendererExtensions.get( 'WEBGL_draw_buffers' ) ? '#extension GL_EXT_draw_buffers : require' : '',\n\t\t( extensions.shaderTextureLOD || parameters.envMap ) && rendererExtensions.get( 'EXT_shader_texture_lod' ) ? '#extension GL_EXT_shader_texture_lod : enable' : ''\n\t];\n\n\treturn chunks.filter( filterEmptyLine ).join( '\\n' );\n\n}\n\nfunction generateDefines( defines ) {\n\n\tvar chunks = [];\n\n\tfor ( var name in defines ) {\n\n\t\tvar value = defines[ name ];\n\n\t\tif ( value === false ) continue;\n\n\t\tchunks.push( '#define ' + name + ' ' + value );\n\n\t}\n\n\treturn chunks.join( '\\n' );\n\n}\n\nfunction fetchAttributeLocations( gl, program ) {\n\n\tvar attributes = {};\n\n\tvar n = gl.getProgramParameter( program, gl.ACTIVE_ATTRIBUTES );\n\n\tfor ( var i = 0; i < n; i ++ ) {\n\n\t\tvar info = gl.getActiveAttrib( program, i );\n\t\tvar name = info.name;\n\n\t\t// console.log( 'THREE.WebGLProgram: ACTIVE VERTEX ATTRIBUTE:', name, i );\n\n\t\tattributes[ name ] = gl.getAttribLocation( program, name );\n\n\t}\n\n\treturn attributes;\n\n}\n\nfunction filterEmptyLine( string ) {\n\n\treturn string !== '';\n\n}\n\nfunction replaceLightNums( string, parameters ) {\n\n\treturn string\n\t\t.replace( /NUM_DIR_LIGHTS/g, parameters.numDirLights )\n\t\t.replace( /NUM_SPOT_LIGHTS/g, parameters.numSpotLights )\n\t\t.replace( /NUM_RECT_AREA_LIGHTS/g, parameters.numRectAreaLights )\n\t\t.replace( /NUM_POINT_LIGHTS/g, parameters.numPointLights )\n\t\t.replace( /NUM_HEMI_LIGHTS/g, parameters.numHemiLights )\n\t\t.replace( /NUM_DIR_LIGHT_SHADOWS/g, parameters.numDirLightShadows )\n\t\t.replace( /NUM_SPOT_LIGHT_SHADOWS/g, parameters.numSpotLightShadows )\n\t\t.replace( /NUM_POINT_LIGHT_SHADOWS/g, parameters.numPointLightShadows );\n\n}\n\nfunction replaceClippingPlaneNums( string, parameters ) {\n\n\treturn string\n\t\t.replace( /NUM_CLIPPING_PLANES/g, parameters.numClippingPlanes )\n\t\t.replace( /UNION_CLIPPING_PLANES/g, ( parameters.numClippingPlanes - parameters.numClipIntersection ) );\n\n}\n\n// Resolve Includes\n\nvar includePattern = /^[ \\t]*#include +<([\\w\\d./]+)>/gm;\n\nfunction resolveIncludes( string ) {\n\n\treturn string.replace( includePattern, includeReplacer );\n\n}\n\nfunction includeReplacer( match, include ) {\n\n\tvar string = ShaderChunk[ include ];\n\n\tif ( string === undefined ) {\n\n\t\tthrow new Error( 'Can not resolve #include <' + include + '>' );\n\n\t}\n\n\treturn resolveIncludes( string );\n\n}\n\n// Unroll Loops\n\nvar loopPattern = /#pragma unroll_loop[\\s]+?for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g;\n\nfunction unrollLoops( string ) {\n\n\treturn string.replace( loopPattern, loopReplacer );\n\n}\n\nfunction loopReplacer( match, start, end, snippet ) {\n\n\tvar string = '';\n\n\tfor ( var i = parseInt( start ); i < parseInt( end ); i ++ ) {\n\n\t\tstring += snippet\n\t\t\t.replace( /\\[ i \\]/g, '[ ' + i + ' ]' )\n\t\t\t.replace( /UNROLLED_LOOP_INDEX/g, i );\n\n\t}\n\n\treturn string;\n\n}\n\n//\n\nfunction generatePrecision( parameters ) {\n\n\tvar precisionstring = \"precision \" + parameters.precision + \" float;\\nprecision \" + parameters.precision + \" int;\";\n\n\tif ( parameters.precision === \"highp\" ) {\n\n\t\tprecisionstring += \"\\n#define HIGH_PRECISION\";\n\n\t} else if ( parameters.precision === \"mediump\" ) {\n\n\t\tprecisionstring += \"\\n#define MEDIUM_PRECISION\";\n\n\t} else if ( parameters.precision === \"lowp\" ) {\n\n\t\tprecisionstring += \"\\n#define LOW_PRECISION\";\n\n\t}\n\n\treturn precisionstring;\n\n}\n\nfunction generateShadowMapTypeDefine( parameters ) {\n\n\tvar shadowMapTypeDefine = 'SHADOWMAP_TYPE_BASIC';\n\n\tif ( parameters.shadowMapType === PCFShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF';\n\n\t} else if ( parameters.shadowMapType === PCFSoftShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF_SOFT';\n\n\t} else if ( parameters.shadowMapType === VSMShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_VSM';\n\n\t}\n\n\treturn shadowMapTypeDefine;\n\n}\n\nfunction generateEnvMapTypeDefine( parameters ) {\n\n\tvar envMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( parameters.envMapMode ) {\n\n\t\t\tcase CubeReflectionMapping:\n\t\t\tcase CubeRefractionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\t\t\t\tbreak;\n\n\t\t\tcase CubeUVReflectionMapping:\n\t\t\tcase CubeUVRefractionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE_UV';\n\t\t\t\tbreak;\n\n\t\t\tcase EquirectangularReflectionMapping:\n\t\t\tcase EquirectangularRefractionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_EQUIREC';\n\t\t\t\tbreak;\n\n\t\t\tcase SphericalReflectionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_SPHERE';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn envMapTypeDefine;\n\n}\n\nfunction generateEnvMapModeDefine( parameters ) {\n\n\tvar envMapModeDefine = 'ENVMAP_MODE_REFLECTION';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( parameters.envMapMode ) {\n\n\t\t\tcase CubeRefractionMapping:\n\t\t\tcase EquirectangularRefractionMapping:\n\t\t\t\tenvMapModeDefine = 'ENVMAP_MODE_REFRACTION';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn envMapModeDefine;\n\n}\n\nfunction generateEnvMapBlendingDefine( parameters ) {\n\n\tvar envMapBlendingDefine = 'ENVMAP_BLENDING_NONE';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( parameters.combine ) {\n\n\t\t\tcase MultiplyOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\n\t\t\t\tbreak;\n\n\t\t\tcase MixOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MIX';\n\t\t\t\tbreak;\n\n\t\t\tcase AddOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_ADD';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn envMapBlendingDefine;\n\n}\n\nfunction WebGLProgram( renderer, extensions, cacheKey, material, shader, parameters ) {\n\n\tvar gl = renderer.getContext();\n\n\tvar defines = material.defines;\n\n\tvar vertexShader = shader.vertexShader;\n\tvar fragmentShader = shader.fragmentShader;\n\tvar shadowMapTypeDefine = generateShadowMapTypeDefine( parameters );\n\tvar envMapTypeDefine = generateEnvMapTypeDefine( parameters );\n\tvar envMapModeDefine = generateEnvMapModeDefine( parameters );\n\tvar envMapBlendingDefine = generateEnvMapBlendingDefine( parameters );\n\n\n\tvar gammaFactorDefine = ( renderer.gammaFactor > 0 ) ? renderer.gammaFactor : 1.0;\n\n\tvar customExtensions = parameters.isWebGL2 ? '' : generateExtensions( material.extensions, parameters, extensions );\n\n\tvar customDefines = generateDefines( defines );\n\n\tvar program = gl.createProgram();\n\n\tvar prefixVertex, prefixFragment;\n\n\tvar numMultiviewViews = parameters.numMultiviewViews;\n\n\tif ( material.isRawShaderMaterial ) {\n\n\t\tprefixVertex = [\n\n\t\t\tcustomDefines\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tif ( prefixVertex.length > 0 ) {\n\n\t\t\tprefixVertex += '\\n';\n\n\t\t}\n\n\t\tprefixFragment = [\n\n\t\t\tcustomExtensions,\n\t\t\tcustomDefines\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tif ( prefixFragment.length > 0 ) {\n\n\t\t\tprefixFragment += '\\n';\n\n\t\t}\n\n\t} else {\n\n\t\tprefixVertex = [\n\n\t\t\tgeneratePrecision( parameters ),\n\n\t\t\t'#define SHADER_NAME ' + shader.name,\n\n\t\t\tcustomDefines,\n\n\t\t\tparameters.instancing ? '#define USE_INSTANCING' : '',\n\t\t\tparameters.supportsVertexTextures ? '#define VERTEX_TEXTURES' : '',\n\n\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\n\n\t\t\t'#define MAX_BONES ' + parameters.maxBones,\n\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\n\t\t\t( parameters.useFog && parameters.fogExp2 ) ? '#define FOG_EXP2' : '',\n\n\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\n\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\n\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.objectSpaceNormalMap ) ? '#define OBJECTSPACE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.tangentSpaceNormalMap ) ? '#define TANGENTSPACE_NORMALMAP' : '',\n\n\t\t\tparameters.clearcoatNormalMap ? '#define USE_CLEARCOAT_NORMALMAP' : '',\n\t\t\tparameters.displacementMap && parameters.supportsVertexTextures ? '#define USE_DISPLACEMENTMAP' : '',\n\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\n\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\n\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\n\t\t\tparameters.vertexTangents ? '#define USE_TANGENT' : '',\n\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\n\t\t\tparameters.vertexUvs ? '#define USE_UV' : '',\n\t\t\tparameters.uvsVertexOnly ? '#define UVS_VERTEX_ONLY' : '',\n\n\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\n\n\t\t\tparameters.skinning ? '#define USE_SKINNING' : '',\n\t\t\tparameters.useVertexTexture ? '#define BONE_TEXTURE' : '',\n\n\t\t\tparameters.morphTargets ? '#define USE_MORPHTARGETS' : '',\n\t\t\tparameters.morphNormals && parameters.flatShading === false ? '#define USE_MORPHNORMALS' : '',\n\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\n\t\t\tparameters.sizeAttenuation ? '#define USE_SIZEATTENUATION' : '',\n\n\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\tparameters.logarithmicDepthBuffer && ( parameters.isWebGL2 || extensions.get( 'EXT_frag_depth' ) ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\t\t\t'uniform mat4 modelMatrix;',\n\t\t\t'uniform mat4 modelViewMatrix;',\n\t\t\t'uniform mat4 projectionMatrix;',\n\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t'uniform mat3 normalMatrix;',\n\t\t\t'uniform vec3 cameraPosition;',\n\t\t\t'uniform bool isOrthographic;',\n\n\t\t\t'#ifdef USE_INSTANCING',\n\n\t\t\t' attribute mat4 instanceMatrix;',\n\n\t\t\t'#endif',\n\n\t\t\t'attribute vec3 position;',\n\t\t\t'attribute vec3 normal;',\n\t\t\t'attribute vec2 uv;',\n\n\t\t\t'#ifdef USE_TANGENT',\n\n\t\t\t'\tattribute vec4 tangent;',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_COLOR',\n\n\t\t\t'\tattribute vec3 color;',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_MORPHTARGETS',\n\n\t\t\t'\tattribute vec3 morphTarget0;',\n\t\t\t'\tattribute vec3 morphTarget1;',\n\t\t\t'\tattribute vec3 morphTarget2;',\n\t\t\t'\tattribute vec3 morphTarget3;',\n\n\t\t\t'\t#ifdef USE_MORPHNORMALS',\n\n\t\t\t'\t\tattribute vec3 morphNormal0;',\n\t\t\t'\t\tattribute vec3 morphNormal1;',\n\t\t\t'\t\tattribute vec3 morphNormal2;',\n\t\t\t'\t\tattribute vec3 morphNormal3;',\n\n\t\t\t'\t#else',\n\n\t\t\t'\t\tattribute vec3 morphTarget4;',\n\t\t\t'\t\tattribute vec3 morphTarget5;',\n\t\t\t'\t\tattribute vec3 morphTarget6;',\n\t\t\t'\t\tattribute vec3 morphTarget7;',\n\n\t\t\t'\t#endif',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_SKINNING',\n\n\t\t\t'\tattribute vec4 skinIndex;',\n\t\t\t'\tattribute vec4 skinWeight;',\n\n\t\t\t'#endif',\n\n\t\t\t'\\n'\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tprefixFragment = [\n\n\t\t\tcustomExtensions,\n\n\t\t\tgeneratePrecision( parameters ),\n\n\t\t\t'#define SHADER_NAME ' + shader.name,\n\n\t\t\tcustomDefines,\n\n\t\t\tparameters.alphaTest ? '#define ALPHATEST ' + parameters.alphaTest + ( parameters.alphaTest % 1 ? '' : '.0' ) : '', // add '.0' if integer\n\n\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\n\n\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\n\t\t\t( parameters.useFog && parameters.fogExp2 ) ? '#define FOG_EXP2' : '',\n\n\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\tparameters.matcap ? '#define USE_MATCAP' : '',\n\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\tparameters.envMap ? '#define ' + envMapTypeDefine : '',\n\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\tparameters.envMap ? '#define ' + envMapBlendingDefine : '',\n\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\n\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\n\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.objectSpaceNormalMap ) ? '#define OBJECTSPACE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.tangentSpaceNormalMap ) ? '#define TANGENTSPACE_NORMALMAP' : '',\n\t\t\tparameters.clearcoatNormalMap ? '#define USE_CLEARCOAT_NORMALMAP' : '',\n\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\n\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\n\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\n\t\t\tparameters.sheen ? '#define USE_SHEEN' : '',\n\n\t\t\tparameters.vertexTangents ? '#define USE_TANGENT' : '',\n\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\n\t\t\tparameters.vertexUvs ? '#define USE_UV' : '',\n\t\t\tparameters.uvsVertexOnly ? '#define UVS_VERTEX_ONLY' : '',\n\n\t\t\tparameters.gradientMap ? '#define USE_GRADIENTMAP' : '',\n\n\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\n\n\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\n\t\t\tparameters.premultipliedAlpha ? '#define PREMULTIPLIED_ALPHA' : '',\n\n\t\t\tparameters.physicallyCorrectLights ? '#define PHYSICALLY_CORRECT_LIGHTS' : '',\n\n\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\tparameters.logarithmicDepthBuffer && ( parameters.isWebGL2 || extensions.get( 'EXT_frag_depth' ) ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\t\t\t( ( material.extensions ? material.extensions.shaderTextureLOD : false ) || parameters.envMap ) && ( parameters.isWebGL2 || extensions.get( 'EXT_shader_texture_lod' ) ) ? '#define TEXTURE_LOD_EXT' : '',\n\n\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t'uniform vec3 cameraPosition;',\n\t\t\t'uniform bool isOrthographic;',\n\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? '#define TONE_MAPPING' : '',\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? ShaderChunk[ 'tonemapping_pars_fragment' ] : '', // this code is required here because it is used by the toneMapping() function defined below\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? getToneMappingFunction( 'toneMapping', parameters.toneMapping ) : '',\n\n\t\t\tparameters.dithering ? '#define DITHERING' : '',\n\n\t\t\t( parameters.outputEncoding || parameters.mapEncoding || parameters.matcapEncoding || parameters.envMapEncoding || parameters.emissiveMapEncoding || parameters.lightMapEncoding ) ?\n\t\t\t\tShaderChunk[ 'encodings_pars_fragment' ] : '', // this code is required here because it is used by the various encoding/decoding function defined below\n\t\t\tparameters.mapEncoding ? getTexelDecodingFunction( 'mapTexelToLinear', parameters.mapEncoding ) : '',\n\t\t\tparameters.matcapEncoding ? getTexelDecodingFunction( 'matcapTexelToLinear', parameters.matcapEncoding ) : '',\n\t\t\tparameters.envMapEncoding ? getTexelDecodingFunction( 'envMapTexelToLinear', parameters.envMapEncoding ) : '',\n\t\t\tparameters.emissiveMapEncoding ? getTexelDecodingFunction( 'emissiveMapTexelToLinear', parameters.emissiveMapEncoding ) : '',\n\t\t\tparameters.lightMapEncoding ? getTexelDecodingFunction( 'lightMapTexelToLinear', parameters.lightMapEncoding ) : '',\n\t\t\tparameters.outputEncoding ? getTexelEncodingFunction( 'linearToOutputTexel', parameters.outputEncoding ) : '',\n\n\t\t\tparameters.depthPacking ? '#define DEPTH_PACKING ' + material.depthPacking : '',\n\n\t\t\t'\\n'\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t}\n\n\tvertexShader = resolveIncludes( vertexShader );\n\tvertexShader = replaceLightNums( vertexShader, parameters );\n\tvertexShader = replaceClippingPlaneNums( vertexShader, parameters );\n\n\tfragmentShader = resolveIncludes( fragmentShader );\n\tfragmentShader = replaceLightNums( fragmentShader, parameters );\n\tfragmentShader = replaceClippingPlaneNums( fragmentShader, parameters );\n\n\tvertexShader = unrollLoops( vertexShader );\n\tfragmentShader = unrollLoops( fragmentShader );\n\n\tif ( parameters.isWebGL2 && ! material.isRawShaderMaterial ) {\n\n\t\tvar isGLSL3ShaderMaterial = false;\n\n\t\tvar versionRegex = /^\\s*#version\\s+300\\s+es\\s*\\n/;\n\n\t\tif ( material.isShaderMaterial &&\n\t\t\tvertexShader.match( versionRegex ) !== null &&\n\t\t\tfragmentShader.match( versionRegex ) !== null ) {\n\n\t\t\tisGLSL3ShaderMaterial = true;\n\n\t\t\tvertexShader = vertexShader.replace( versionRegex, '' );\n\t\t\tfragmentShader = fragmentShader.replace( versionRegex, '' );\n\n\t\t}\n\n\t\t// GLSL 3.0 conversion\n\n\t\tprefixVertex = [\n\t\t\t'#version 300 es\\n',\n\t\t\t'#define attribute in',\n\t\t\t'#define varying out',\n\t\t\t'#define texture2D texture'\n\t\t].join( '\\n' ) + '\\n' + prefixVertex;\n\n\t\tprefixFragment = [\n\t\t\t'#version 300 es\\n',\n\t\t\t'#define varying in',\n\t\t\tisGLSL3ShaderMaterial ? '' : 'out highp vec4 pc_fragColor;',\n\t\t\tisGLSL3ShaderMaterial ? '' : '#define gl_FragColor pc_fragColor',\n\t\t\t'#define gl_FragDepthEXT gl_FragDepth',\n\t\t\t'#define texture2D texture',\n\t\t\t'#define textureCube texture',\n\t\t\t'#define texture2DProj textureProj',\n\t\t\t'#define texture2DLodEXT textureLod',\n\t\t\t'#define texture2DProjLodEXT textureProjLod',\n\t\t\t'#define textureCubeLodEXT textureLod',\n\t\t\t'#define texture2DGradEXT textureGrad',\n\t\t\t'#define texture2DProjGradEXT textureProjGrad',\n\t\t\t'#define textureCubeGradEXT textureGrad'\n\t\t].join( '\\n' ) + '\\n' + prefixFragment;\n\n\t\t// Multiview\n\n\t\tif ( numMultiviewViews > 0 ) {\n\n\t\t\tprefixVertex = prefixVertex.replace(\n\t\t\t\t'#version 300 es\\n',\n\t\t\t\t[\n\t\t\t\t\t'#version 300 es\\n',\n\t\t\t\t\t'#extension GL_OVR_multiview2 : require',\n\t\t\t\t\t'layout(num_views = ' + numMultiviewViews + ') in;',\n\t\t\t\t\t'#define VIEW_ID gl_ViewID_OVR'\n\t\t\t\t].join( '\\n' )\n\t\t\t);\n\n\t\t\tprefixVertex = prefixVertex.replace(\n\t\t\t\t[\n\t\t\t\t\t'uniform mat4 modelViewMatrix;',\n\t\t\t\t\t'uniform mat4 projectionMatrix;',\n\t\t\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t\t\t'uniform mat3 normalMatrix;'\n\t\t\t\t].join( '\\n' ),\n\t\t\t\t[\n\t\t\t\t\t'uniform mat4 modelViewMatrices[' + numMultiviewViews + '];',\n\t\t\t\t\t'uniform mat4 projectionMatrices[' + numMultiviewViews + '];',\n\t\t\t\t\t'uniform mat4 viewMatrices[' + numMultiviewViews + '];',\n\t\t\t\t\t'uniform mat3 normalMatrices[' + numMultiviewViews + '];',\n\n\t\t\t\t\t'#define modelViewMatrix modelViewMatrices[VIEW_ID]',\n\t\t\t\t\t'#define projectionMatrix projectionMatrices[VIEW_ID]',\n\t\t\t\t\t'#define viewMatrix viewMatrices[VIEW_ID]',\n\t\t\t\t\t'#define normalMatrix normalMatrices[VIEW_ID]'\n\t\t\t\t].join( '\\n' )\n\t\t\t);\n\n\t\t\tprefixFragment = prefixFragment.replace(\n\t\t\t\t'#version 300 es\\n',\n\t\t\t\t[\n\t\t\t\t\t'#version 300 es\\n',\n\t\t\t\t\t'#extension GL_OVR_multiview2 : require',\n\t\t\t\t\t'#define VIEW_ID gl_ViewID_OVR'\n\t\t\t\t].join( '\\n' )\n\t\t\t);\n\n\t\t\tprefixFragment = prefixFragment.replace(\n\t\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t\t[\n\t\t\t\t\t'uniform mat4 viewMatrices[' + numMultiviewViews + '];',\n\t\t\t\t\t'#define viewMatrix viewMatrices[VIEW_ID]'\n\t\t\t\t].join( '\\n' )\n\t\t\t);\n\n\t\t}\n\n\t}\n\n\tvar vertexGlsl = prefixVertex + vertexShader;\n\tvar fragmentGlsl = prefixFragment + fragmentShader;\n\n\t// console.log( '*VERTEX*', vertexGlsl );\n\t// console.log( '*FRAGMENT*', fragmentGlsl );\n\n\tvar glVertexShader = WebGLShader( gl, gl.VERTEX_SHADER, vertexGlsl );\n\tvar glFragmentShader = WebGLShader( gl, gl.FRAGMENT_SHADER, fragmentGlsl );\n\n\tgl.attachShader( program, glVertexShader );\n\tgl.attachShader( program, glFragmentShader );\n\n\t// Force a particular attribute to index 0.\n\n\tif ( material.index0AttributeName !== undefined ) {\n\n\t\tgl.bindAttribLocation( program, 0, material.index0AttributeName );\n\n\t} else if ( parameters.morphTargets === true ) {\n\n\t\t// programs with morphTargets displace position out of attribute 0\n\t\tgl.bindAttribLocation( program, 0, 'position' );\n\n\t}\n\n\tgl.linkProgram( program );\n\n\t// check for link errors\n\tif ( renderer.debug.checkShaderErrors ) {\n\n\t\tvar programLog = gl.getProgramInfoLog( program ).trim();\n\t\tvar vertexLog = gl.getShaderInfoLog( glVertexShader ).trim();\n\t\tvar fragmentLog = gl.getShaderInfoLog( glFragmentShader ).trim();\n\n\t\tvar runnable = true;\n\t\tvar haveDiagnostics = true;\n\n\t\tif ( gl.getProgramParameter( program, gl.LINK_STATUS ) === false ) {\n\n\t\t\trunnable = false;\n\n\t\t\tvar vertexErrors = getShaderErrors( gl, glVertexShader, 'vertex' );\n\t\t\tvar fragmentErrors = getShaderErrors( gl, glFragmentShader, 'fragment' );\n\n\t\t\tconsole.error( 'THREE.WebGLProgram: shader error: ', gl.getError(), 'gl.VALIDATE_STATUS', gl.getProgramParameter( program, gl.VALIDATE_STATUS ), 'gl.getProgramInfoLog', programLog, vertexErrors, fragmentErrors );\n\n\t\t} else if ( programLog !== '' ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLProgram: gl.getProgramInfoLog()', programLog );\n\n\t\t} else if ( vertexLog === '' || fragmentLog === '' ) {\n\n\t\t\thaveDiagnostics = false;\n\n\t\t}\n\n\t\tif ( haveDiagnostics ) {\n\n\t\t\tthis.diagnostics = {\n\n\t\t\t\trunnable: runnable,\n\t\t\t\tmaterial: material,\n\n\t\t\t\tprogramLog: programLog,\n\n\t\t\t\tvertexShader: {\n\n\t\t\t\t\tlog: vertexLog,\n\t\t\t\t\tprefix: prefixVertex\n\n\t\t\t\t},\n\n\t\t\t\tfragmentShader: {\n\n\t\t\t\t\tlog: fragmentLog,\n\t\t\t\t\tprefix: prefixFragment\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}\n\n\t}\n\n\t// clean up\n\n\tgl.deleteShader( glVertexShader );\n\tgl.deleteShader( glFragmentShader );\n\n\t// set up caching for uniform locations\n\n\tvar cachedUniforms;\n\n\tthis.getUniforms = function () {\n\n\t\tif ( cachedUniforms === undefined ) {\n\n\t\t\tcachedUniforms = new WebGLUniforms( gl, program );\n\n\t\t}\n\n\t\treturn cachedUniforms;\n\n\t};\n\n\t// set up caching for attribute locations\n\n\tvar cachedAttributes;\n\n\tthis.getAttributes = function () {\n\n\t\tif ( cachedAttributes === undefined ) {\n\n\t\t\tcachedAttributes = fetchAttributeLocations( gl, program );\n\n\t\t}\n\n\t\treturn cachedAttributes;\n\n\t};\n\n\t// free resource\n\n\tthis.destroy = function () {\n\n\t\tgl.deleteProgram( program );\n\t\tthis.program = undefined;\n\n\t};\n\n\t//\n\n\tthis.name = shader.name;\n\tthis.id = programIdCount ++;\n\tthis.cacheKey = cacheKey;\n\tthis.usedTimes = 1;\n\tthis.program = program;\n\tthis.vertexShader = glVertexShader;\n\tthis.fragmentShader = glFragmentShader;\n\tthis.numMultiviewViews = numMultiviewViews;\n\n\treturn this;\n\n}\n\nexport { WebGLProgram };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { BackSide, DoubleSide, CubeUVRefractionMapping, CubeUVReflectionMapping, LinearEncoding, ObjectSpaceNormalMap, TangentSpaceNormalMap, NoToneMapping } from '../../constants.js';\nimport { WebGLProgram } from './WebGLProgram.js';\n\nfunction WebGLPrograms( renderer, extensions, capabilities ) {\n\n\tvar programs = [];\n\n\tvar isWebGL2 = capabilities.isWebGL2;\n\tvar logarithmicDepthBuffer = capabilities.logarithmicDepthBuffer;\n\tvar floatVertexTextures = capabilities.floatVertexTextures;\n\tvar precision = capabilities.precision;\n\tvar maxVertexUniforms = capabilities.maxVertexUniforms;\n\tvar vertexTextures = capabilities.vertexTextures;\n\n\tvar shaderIDs = {\n\t\tMeshDepthMaterial: 'depth',\n\t\tMeshDistanceMaterial: 'distanceRGBA',\n\t\tMeshNormalMaterial: 'normal',\n\t\tMeshBasicMaterial: 'basic',\n\t\tMeshLambertMaterial: 'lambert',\n\t\tMeshPhongMaterial: 'phong',\n\t\tMeshToonMaterial: 'toon',\n\t\tMeshStandardMaterial: 'physical',\n\t\tMeshPhysicalMaterial: 'physical',\n\t\tMeshMatcapMaterial: 'matcap',\n\t\tLineBasicMaterial: 'basic',\n\t\tLineDashedMaterial: 'dashed',\n\t\tPointsMaterial: 'points',\n\t\tShadowMaterial: 'shadow',\n\t\tSpriteMaterial: 'sprite'\n\t};\n\n\tvar parameterNames = [\n\t\t\"precision\", \"isWebGL2\", \"supportsVertexTextures\", \"outputEncoding\", \"instancing\", \"numMultiviewViews\",\n\t\t\"map\", \"mapEncoding\", \"matcap\", \"matcapEncoding\", \"envMap\", \"envMapMode\", \"envMapEncoding\", \"envMapCubeUV\",\n\t\t\"lightMap\", \"lightMapEncoding\", \"aoMap\", \"emissiveMap\", \"emissiveMapEncoding\", \"bumpMap\", \"normalMap\", \"objectSpaceNormalMap\", \"tangentSpaceNormalMap\", \"clearcoatNormalMap\", \"displacementMap\", \"specularMap\",\n\t\t\"roughnessMap\", \"metalnessMap\", \"gradientMap\",\n\t\t\"alphaMap\", \"combine\", \"vertexColors\", \"vertexTangents\", \"vertexUvs\", \"uvsVertexOnly\", \"fog\", \"useFog\", \"fogExp2\",\n\t\t\"flatShading\", \"sizeAttenuation\", \"logarithmicDepthBuffer\", \"skinning\",\n\t\t\"maxBones\", \"useVertexTexture\", \"morphTargets\", \"morphNormals\",\n\t\t\"maxMorphTargets\", \"maxMorphNormals\", \"premultipliedAlpha\",\n\t\t\"numDirLights\", \"numPointLights\", \"numSpotLights\", \"numHemiLights\", \"numRectAreaLights\",\n\t\t\"numDirLightShadows\", \"numPointLightShadows\", \"numSpotLightShadows\",\n\t\t\"shadowMapEnabled\", \"shadowMapType\", \"toneMapping\", 'physicallyCorrectLights',\n\t\t\"alphaTest\", \"doubleSided\", \"flipSided\", \"numClippingPlanes\", \"numClipIntersection\", \"depthPacking\", \"dithering\",\n\t\t\"sheen\"\n\t];\n\n\n\tfunction allocateBones( object ) {\n\n\t\tvar skeleton = object.skeleton;\n\t\tvar bones = skeleton.bones;\n\n\t\tif ( floatVertexTextures ) {\n\n\t\t\treturn 1024;\n\n\t\t} else {\n\n\t\t\t// default for when object is not specified\n\t\t\t// ( for example when prebuilding shader to be used with multiple objects )\n\t\t\t//\n\t\t\t//  - leave some extra space for other uniforms\n\t\t\t//  - limit here is ANGLE's 254 max uniform vectors\n\t\t\t//    (up to 54 should be safe)\n\n\t\t\tvar nVertexUniforms = maxVertexUniforms;\n\t\t\tvar nVertexMatrices = Math.floor( ( nVertexUniforms - 20 ) / 4 );\n\n\t\t\tvar maxBones = Math.min( nVertexMatrices, bones.length );\n\n\t\t\tif ( maxBones < bones.length ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Skeleton has ' + bones.length + ' bones. This GPU supports ' + maxBones + '.' );\n\t\t\t\treturn 0;\n\n\t\t\t}\n\n\t\t\treturn maxBones;\n\n\t\t}\n\n\t}\n\n\tfunction getTextureEncodingFromMap( map ) {\n\n\t\tvar encoding;\n\n\t\tif ( ! map ) {\n\n\t\t\tencoding = LinearEncoding;\n\n\t\t} else if ( map.isTexture ) {\n\n\t\t\tencoding = map.encoding;\n\n\t\t} else if ( map.isWebGLRenderTarget ) {\n\n\t\t\tconsole.warn( \"THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.\" );\n\t\t\tencoding = map.texture.encoding;\n\n\t\t}\n\n\t\treturn encoding;\n\n\t}\n\n\tthis.getParameters = function ( material, lights, shadows, scene, nClipPlanes, nClipIntersection, object ) {\n\n\t\tvar fog = scene.fog;\n\t\tvar environment = material.isMeshStandardMaterial ? scene.environment : null;\n\n\t\tvar envMap = material.envMap || environment;\n\n\t\tvar shaderID = shaderIDs[ material.type ];\n\n\t\t// heuristics to create shader parameters according to lights in the scene\n\t\t// (not to blow over maxLights budget)\n\n\t\tvar maxBones = object.isSkinnedMesh ? allocateBones( object ) : 0;\n\n\t\tif ( material.precision !== null ) {\n\n\t\t\tprecision = capabilities.getMaxPrecision( material.precision );\n\n\t\t\tif ( precision !== material.precision ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLProgram.getParameters:', material.precision, 'not supported, using', precision, 'instead.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar currentRenderTarget = renderer.getRenderTarget();\n\t\tvar numMultiviewViews = currentRenderTarget && currentRenderTarget.isWebGLMultiviewRenderTarget ? currentRenderTarget.numViews : 0;\n\n\t\tvar parameters = {\n\n\t\t\tisWebGL2: isWebGL2,\n\n\t\t\tshaderID: shaderID,\n\n\t\t\tprecision: precision,\n\n\t\t\tinstancing: object.isInstancedMesh === true,\n\n\t\t\tsupportsVertexTextures: vertexTextures,\n\t\t\tnumMultiviewViews: numMultiviewViews,\n\t\t\toutputEncoding: ( currentRenderTarget !== null ) ? getTextureEncodingFromMap( currentRenderTarget.texture ) : renderer.outputEncoding,\n\t\t\tmap: !! material.map,\n\t\t\tmapEncoding: getTextureEncodingFromMap( material.map ),\n\t\t\tmatcap: !! material.matcap,\n\t\t\tmatcapEncoding: getTextureEncodingFromMap( material.matcap ),\n\t\t\tenvMap: !! envMap,\n\t\t\tenvMapMode: envMap && envMap.mapping,\n\t\t\tenvMapEncoding: getTextureEncodingFromMap( envMap ),\n\t\t\tenvMapCubeUV: ( !! envMap ) && ( ( envMap.mapping === CubeUVReflectionMapping ) || ( envMap.mapping === CubeUVRefractionMapping ) ),\n\t\t\tlightMap: !! material.lightMap,\n\t\t\tlightMapEncoding: getTextureEncodingFromMap( material.lightMap ),\n\t\t\taoMap: !! material.aoMap,\n\t\t\temissiveMap: !! material.emissiveMap,\n\t\t\temissiveMapEncoding: getTextureEncodingFromMap( material.emissiveMap ),\n\t\t\tbumpMap: !! material.bumpMap,\n\t\t\tnormalMap: !! material.normalMap,\n\t\t\tobjectSpaceNormalMap: material.normalMapType === ObjectSpaceNormalMap,\n\t\t\ttangentSpaceNormalMap: material.normalMapType === TangentSpaceNormalMap,\n\t\t\tclearcoatNormalMap: !! material.clearcoatNormalMap,\n\t\t\tdisplacementMap: !! material.displacementMap,\n\t\t\troughnessMap: !! material.roughnessMap,\n\t\t\tmetalnessMap: !! material.metalnessMap,\n\t\t\tspecularMap: !! material.specularMap,\n\t\t\talphaMap: !! material.alphaMap,\n\n\t\t\tgradientMap: !! material.gradientMap,\n\n\t\t\tsheen: !! material.sheen,\n\n\t\t\tcombine: material.combine,\n\n\t\t\tvertexTangents: ( material.normalMap && material.vertexTangents ),\n\t\t\tvertexColors: material.vertexColors,\n\t\t\tvertexUvs: !! material.map || !! material.bumpMap || !! material.normalMap || !! material.specularMap || !! material.alphaMap || !! material.emissiveMap || !! material.roughnessMap || !! material.metalnessMap || !! material.clearcoatNormalMap || !! material.displacementMap,\n\t\t\tuvsVertexOnly: ! ( !! material.map || !! material.bumpMap || !! material.normalMap || !! material.specularMap || !! material.alphaMap || !! material.emissiveMap || !! material.roughnessMap || !! material.metalnessMap || !! material.clearcoatNormalMap ) && !! material.displacementMap,\n\n\t\t\tfog: !! fog,\n\t\t\tuseFog: material.fog,\n\t\t\tfogExp2: ( fog && fog.isFogExp2 ),\n\n\t\t\tflatShading: material.flatShading,\n\n\t\t\tsizeAttenuation: material.sizeAttenuation,\n\t\t\tlogarithmicDepthBuffer: logarithmicDepthBuffer,\n\n\t\t\tskinning: material.skinning && maxBones > 0,\n\t\t\tmaxBones: maxBones,\n\t\t\tuseVertexTexture: floatVertexTextures,\n\n\t\t\tmorphTargets: material.morphTargets,\n\t\t\tmorphNormals: material.morphNormals,\n\t\t\tmaxMorphTargets: renderer.maxMorphTargets,\n\t\t\tmaxMorphNormals: renderer.maxMorphNormals,\n\n\t\t\tnumDirLights: lights.directional.length,\n\t\t\tnumPointLights: lights.point.length,\n\t\t\tnumSpotLights: lights.spot.length,\n\t\t\tnumRectAreaLights: lights.rectArea.length,\n\t\t\tnumHemiLights: lights.hemi.length,\n\n\t\t\tnumDirLightShadows: lights.directionalShadowMap.length,\n\t\t\tnumPointLightShadows: lights.pointShadowMap.length,\n\t\t\tnumSpotLightShadows: lights.spotShadowMap.length,\n\n\t\t\tnumClippingPlanes: nClipPlanes,\n\t\t\tnumClipIntersection: nClipIntersection,\n\n\t\t\tdithering: material.dithering,\n\n\t\t\tshadowMapEnabled: renderer.shadowMap.enabled && shadows.length > 0,\n\t\t\tshadowMapType: renderer.shadowMap.type,\n\n\t\t\ttoneMapping: material.toneMapped ? renderer.toneMapping : NoToneMapping,\n\t\t\tphysicallyCorrectLights: renderer.physicallyCorrectLights,\n\n\t\t\tpremultipliedAlpha: material.premultipliedAlpha,\n\n\t\t\talphaTest: material.alphaTest,\n\t\t\tdoubleSided: material.side === DoubleSide,\n\t\t\tflipSided: material.side === BackSide,\n\n\t\t\tdepthPacking: ( material.depthPacking !== undefined ) ? material.depthPacking : false\n\n\t\t};\n\n\t\treturn parameters;\n\n\t};\n\n\tthis.getProgramCacheKey = function ( material, parameters ) {\n\n\t\tvar array = [];\n\n\t\tif ( parameters.shaderID ) {\n\n\t\t\tarray.push( parameters.shaderID );\n\n\t\t} else {\n\n\t\t\tarray.push( material.fragmentShader );\n\t\t\tarray.push( material.vertexShader );\n\n\t\t}\n\n\t\tif ( material.defines !== undefined ) {\n\n\t\t\tfor ( var name in material.defines ) {\n\n\t\t\t\tarray.push( name );\n\t\t\t\tarray.push( material.defines[ name ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.isRawShaderMaterial === undefined ) {\n\n\t\t\tfor ( var i = 0; i < parameterNames.length; i ++ ) {\n\n\t\t\t\tarray.push( parameters[ parameterNames[ i ] ] );\n\n\t\t\t}\n\n\t\t\tarray.push( renderer.outputEncoding );\n\t\t\tarray.push( renderer.gammaFactor );\n\n\t\t}\n\n\t\tarray.push( material.onBeforeCompile.toString() );\n\n\t\treturn array.join();\n\n\t};\n\n\tthis.acquireProgram = function ( material, shader, parameters, cacheKey ) {\n\n\t\tvar program;\n\n\t\t// Check if code has been already compiled\n\t\tfor ( var p = 0, pl = programs.length; p < pl; p ++ ) {\n\n\t\t\tvar preexistingProgram = programs[ p ];\n\n\t\t\tif ( preexistingProgram.cacheKey === cacheKey ) {\n\n\t\t\t\tprogram = preexistingProgram;\n\t\t\t\t++ program.usedTimes;\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( program === undefined ) {\n\n\t\t\tprogram = new WebGLProgram( renderer, extensions, cacheKey, material, shader, parameters );\n\t\t\tprograms.push( program );\n\n\t\t}\n\n\t\treturn program;\n\n\t};\n\n\tthis.releaseProgram = function ( program ) {\n\n\t\tif ( -- program.usedTimes === 0 ) {\n\n\t\t\t// Remove from unordered set\n\t\t\tvar i = programs.indexOf( program );\n\t\t\tprograms[ i ] = programs[ programs.length - 1 ];\n\t\t\tprograms.pop();\n\n\t\t\t// Free WebGL resources\n\t\t\tprogram.destroy();\n\n\t\t}\n\n\t};\n\n\t// Exposed for resource monitoring & error feedback via renderer.info:\n\tthis.programs = programs;\n\n}\n\n\nexport { WebGLPrograms };\n","/**\n * @author fordacious / fordacious.github.io\n */\n\nfunction WebGLProperties() {\n\n\tvar properties = new WeakMap();\n\n\tfunction get( object ) {\n\n\t\tvar map = properties.get( object );\n\n\t\tif ( map === undefined ) {\n\n\t\t\tmap = {};\n\t\t\tproperties.set( object, map );\n\n\t\t}\n\n\t\treturn map;\n\n\t}\n\n\tfunction remove( object ) {\n\n\t\tproperties.delete( object );\n\n\t}\n\n\tfunction update( object, key, value ) {\n\n\t\tproperties.get( object )[ key ] = value;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tproperties = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tremove: remove,\n\t\tupdate: update,\n\t\tdispose: dispose\n\t};\n\n}\n\n\nexport { WebGLProperties };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction painterSortStable( a, b ) {\n\n\tif ( a.groupOrder !== b.groupOrder ) {\n\n\t\treturn a.groupOrder - b.groupOrder;\n\n\t} else if ( a.renderOrder !== b.renderOrder ) {\n\n\t\treturn a.renderOrder - b.renderOrder;\n\n\t} else if ( a.program !== b.program ) {\n\n\t\treturn a.program.id - b.program.id;\n\n\t} else if ( a.material.id !== b.material.id ) {\n\n\t\treturn a.material.id - b.material.id;\n\n\t} else if ( a.z !== b.z ) {\n\n\t\treturn a.z - b.z;\n\n\t} else {\n\n\t\treturn a.id - b.id;\n\n\t}\n\n}\n\nfunction reversePainterSortStable( a, b ) {\n\n\tif ( a.groupOrder !== b.groupOrder ) {\n\n\t\treturn a.groupOrder - b.groupOrder;\n\n\t} else if ( a.renderOrder !== b.renderOrder ) {\n\n\t\treturn a.renderOrder - b.renderOrder;\n\n\t} else if ( a.z !== b.z ) {\n\n\t\treturn b.z - a.z;\n\n\t} else {\n\n\t\treturn a.id - b.id;\n\n\t}\n\n}\n\n\nfunction WebGLRenderList() {\n\n\tvar renderItems = [];\n\tvar renderItemsIndex = 0;\n\n\tvar opaque = [];\n\tvar transparent = [];\n\n\tvar defaultProgram = { id: - 1 };\n\n\tfunction init() {\n\n\t\trenderItemsIndex = 0;\n\n\t\topaque.length = 0;\n\t\ttransparent.length = 0;\n\n\t}\n\n\tfunction getNextRenderItem( object, geometry, material, groupOrder, z, group ) {\n\n\t\tvar renderItem = renderItems[ renderItemsIndex ];\n\n\t\tif ( renderItem === undefined ) {\n\n\t\t\trenderItem = {\n\t\t\t\tid: object.id,\n\t\t\t\tobject: object,\n\t\t\t\tgeometry: geometry,\n\t\t\t\tmaterial: material,\n\t\t\t\tprogram: material.program || defaultProgram,\n\t\t\t\tgroupOrder: groupOrder,\n\t\t\t\trenderOrder: object.renderOrder,\n\t\t\t\tz: z,\n\t\t\t\tgroup: group\n\t\t\t};\n\n\t\t\trenderItems[ renderItemsIndex ] = renderItem;\n\n\t\t} else {\n\n\t\t\trenderItem.id = object.id;\n\t\t\trenderItem.object = object;\n\t\t\trenderItem.geometry = geometry;\n\t\t\trenderItem.material = material;\n\t\t\trenderItem.program = material.program || defaultProgram;\n\t\t\trenderItem.groupOrder = groupOrder;\n\t\t\trenderItem.renderOrder = object.renderOrder;\n\t\t\trenderItem.z = z;\n\t\t\trenderItem.group = group;\n\n\t\t}\n\n\t\trenderItemsIndex ++;\n\n\t\treturn renderItem;\n\n\t}\n\n\tfunction push( object, geometry, material, groupOrder, z, group ) {\n\n\t\tvar renderItem = getNextRenderItem( object, geometry, material, groupOrder, z, group );\n\n\t\t( material.transparent === true ? transparent : opaque ).push( renderItem );\n\n\t}\n\n\tfunction unshift( object, geometry, material, groupOrder, z, group ) {\n\n\t\tvar renderItem = getNextRenderItem( object, geometry, material, groupOrder, z, group );\n\n\t\t( material.transparent === true ? transparent : opaque ).unshift( renderItem );\n\n\t}\n\n\tfunction sort( customOpaqueSort, customTransparentSort ) {\n\n\t\tif ( opaque.length > 1 ) opaque.sort( customOpaqueSort || painterSortStable );\n\t\tif ( transparent.length > 1 ) transparent.sort( customTransparentSort || reversePainterSortStable );\n\n\t}\n\n\treturn {\n\t\topaque: opaque,\n\t\ttransparent: transparent,\n\n\t\tinit: init,\n\t\tpush: push,\n\t\tunshift: unshift,\n\n\t\tsort: sort\n\t};\n\n}\n\nfunction WebGLRenderLists() {\n\n\tvar lists = new WeakMap();\n\n\tfunction onSceneDispose( event ) {\n\n\t\tvar scene = event.target;\n\n\t\tscene.removeEventListener( 'dispose', onSceneDispose );\n\n\t\tlists.delete( scene );\n\n\t}\n\n\tfunction get( scene, camera ) {\n\n\t\tvar cameras = lists.get( scene );\n\t\tvar list;\n\t\tif ( cameras === undefined ) {\n\n\t\t\tlist = new WebGLRenderList();\n\t\t\tlists.set( scene, new WeakMap() );\n\t\t\tlists.get( scene ).set( camera, list );\n\n\t\t\tscene.addEventListener( 'dispose', onSceneDispose );\n\n\t\t} else {\n\n\t\t\tlist = cameras.get( camera );\n\t\t\tif ( list === undefined ) {\n\n\t\t\t\tlist = new WebGLRenderList();\n\t\t\t\tcameras.set( camera, list );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn list;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tlists = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\n\nexport { WebGLRenderLists };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { Color } from '../../math/Color.js';\nimport { Matrix4 } from '../../math/Matrix4.js';\nimport { Vector2 } from '../../math/Vector2.js';\nimport { Vector3 } from '../../math/Vector3.js';\n\nfunction UniformsCache() {\n\n\tvar lights = {};\n\n\treturn {\n\n\t\tget: function ( light ) {\n\n\t\t\tif ( lights[ light.id ] !== undefined ) {\n\n\t\t\t\treturn lights[ light.id ];\n\n\t\t\t}\n\n\t\t\tvar uniforms;\n\n\t\t\tswitch ( light.type ) {\n\n\t\t\t\tcase 'DirectionalLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tcolor: new Color(),\n\n\t\t\t\t\t\tshadow: false,\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'SpotLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tdistance: 0,\n\t\t\t\t\t\tconeCos: 0,\n\t\t\t\t\t\tpenumbraCos: 0,\n\t\t\t\t\t\tdecay: 0,\n\n\t\t\t\t\t\tshadow: false,\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PointLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tdistance: 0,\n\t\t\t\t\t\tdecay: 0,\n\n\t\t\t\t\t\tshadow: false,\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2(),\n\t\t\t\t\t\tshadowCameraNear: 1,\n\t\t\t\t\t\tshadowCameraFar: 1000\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'HemisphereLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tskyColor: new Color(),\n\t\t\t\t\t\tgroundColor: new Color()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'RectAreaLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\thalfWidth: new Vector3(),\n\t\t\t\t\t\thalfHeight: new Vector3()\n\t\t\t\t\t\t// TODO (abelnation): set RectAreaLight shadow uniforms\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tlights[ light.id ] = uniforms;\n\n\t\t\treturn uniforms;\n\n\t\t}\n\n\t};\n\n}\n\nvar nextVersion = 0;\n\nfunction shadowCastingLightsFirst( lightA, lightB ) {\n\n\treturn ( lightB.castShadow ? 1 : 0 ) - ( lightA.castShadow ? 1 : 0 );\n\n}\n\nfunction WebGLLights() {\n\n\tvar cache = new UniformsCache();\n\n\tvar state = {\n\n\t\tversion: 0,\n\n\t\thash: {\n\t\t\tdirectionalLength: - 1,\n\t\t\tpointLength: - 1,\n\t\t\tspotLength: - 1,\n\t\t\trectAreaLength: - 1,\n\t\t\themiLength: - 1,\n\n\t\t\tnumDirectionalShadows: - 1,\n\t\t\tnumPointShadows: - 1,\n\t\t\tnumSpotShadows: - 1,\n\t\t},\n\n\t\tambient: [ 0, 0, 0 ],\n\t\tprobe: [],\n\t\tdirectional: [],\n\t\tdirectionalShadowMap: [],\n\t\tdirectionalShadowMatrix: [],\n\t\tspot: [],\n\t\tspotShadowMap: [],\n\t\tspotShadowMatrix: [],\n\t\trectArea: [],\n\t\tpoint: [],\n\t\tpointShadowMap: [],\n\t\tpointShadowMatrix: [],\n\t\themi: [],\n\n\t\tnumDirectionalShadows: - 1,\n\t\tnumPointShadows: - 1,\n\t\tnumSpotShadows: - 1\n\n\t};\n\n\tfor ( var i = 0; i < 9; i ++ ) state.probe.push( new Vector3() );\n\n\tvar vector3 = new Vector3();\n\tvar matrix4 = new Matrix4();\n\tvar matrix42 = new Matrix4();\n\n\tfunction setup( lights, shadows, camera ) {\n\n\t\tvar r = 0, g = 0, b = 0;\n\n\t\tfor ( var i = 0; i < 9; i ++ ) state.probe[ i ].set( 0, 0, 0 );\n\n\t\tvar directionalLength = 0;\n\t\tvar pointLength = 0;\n\t\tvar spotLength = 0;\n\t\tvar rectAreaLength = 0;\n\t\tvar hemiLength = 0;\n\n\t\tvar numDirectionalShadows = 0;\n\t\tvar numPointShadows = 0;\n\t\tvar numSpotShadows = 0;\n\n\t\tvar viewMatrix = camera.matrixWorldInverse;\n\n\t\tlights.sort( shadowCastingLightsFirst );\n\n\t\tfor ( var i = 0, l = lights.length; i < l; i ++ ) {\n\n\t\t\tvar light = lights[ i ];\n\n\t\t\tvar color = light.color;\n\t\t\tvar intensity = light.intensity;\n\t\t\tvar distance = light.distance;\n\n\t\t\tvar shadowMap = ( light.shadow && light.shadow.map ) ? light.shadow.map.texture : null;\n\n\t\t\tif ( light.isAmbientLight ) {\n\n\t\t\t\tr += color.r * intensity;\n\t\t\t\tg += color.g * intensity;\n\t\t\t\tb += color.b * intensity;\n\n\t\t\t} else if ( light.isLightProbe ) {\n\n\t\t\t\tfor ( var j = 0; j < 9; j ++ ) {\n\n\t\t\t\t\tstate.probe[ j ].addScaledVector( light.sh.coefficients[ j ], intensity );\n\n\t\t\t\t}\n\n\t\t\t} else if ( light.isDirectionalLight ) {\n\n\t\t\t\tvar uniforms = cache.get( light );\n\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity );\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tvector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\tuniforms.direction.sub( vector3 );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\tuniforms.shadow = light.castShadow;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tvar shadow = light.shadow;\n\n\t\t\t\t\tuniforms.shadowBias = shadow.bias;\n\t\t\t\t\tuniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tuniforms.shadowMapSize = shadow.mapSize;\n\n\t\t\t\t\tstate.directionalShadowMap[ directionalLength ] = shadowMap;\n\t\t\t\t\tstate.directionalShadowMatrix[ directionalLength ] = light.shadow.matrix;\n\n\t\t\t\t\tnumDirectionalShadows ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.directional[ directionalLength ] = uniforms;\n\n\t\t\t\tdirectionalLength ++;\n\n\t\t\t} else if ( light.isSpotLight ) {\n\n\t\t\t\tvar uniforms = cache.get( light );\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity );\n\t\t\t\tuniforms.distance = distance;\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tvector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\tuniforms.direction.sub( vector3 );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\tuniforms.coneCos = Math.cos( light.angle );\n\t\t\t\tuniforms.penumbraCos = Math.cos( light.angle * ( 1 - light.penumbra ) );\n\t\t\t\tuniforms.decay = light.decay;\n\n\t\t\t\tuniforms.shadow = light.castShadow;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tvar shadow = light.shadow;\n\n\t\t\t\t\tuniforms.shadowBias = shadow.bias;\n\t\t\t\t\tuniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tuniforms.shadowMapSize = shadow.mapSize;\n\n\t\t\t\t\tstate.spotShadowMap[ spotLength ] = shadowMap;\n\t\t\t\t\tstate.spotShadowMatrix[ spotLength ] = light.shadow.matrix;\n\n\t\t\t\t\tnumSpotShadows ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.spot[ spotLength ] = uniforms;\n\n\t\t\t\tspotLength ++;\n\n\t\t\t} else if ( light.isRectAreaLight ) {\n\n\t\t\t\tvar uniforms = cache.get( light );\n\n\t\t\t\t// (a) intensity is the total visible light emitted\n\t\t\t\t//uniforms.color.copy( color ).multiplyScalar( intensity / ( light.width * light.height * Math.PI ) );\n\n\t\t\t\t// (b) intensity is the brightness of the light\n\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity );\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\t// extract local rotation of light to derive width/height half vectors\n\t\t\t\tmatrix42.identity();\n\t\t\t\tmatrix4.copy( light.matrixWorld );\n\t\t\t\tmatrix4.premultiply( viewMatrix );\n\t\t\t\tmatrix42.extractRotation( matrix4 );\n\n\t\t\t\tuniforms.halfWidth.set( light.width * 0.5, 0.0, 0.0 );\n\t\t\t\tuniforms.halfHeight.set( 0.0, light.height * 0.5, 0.0 );\n\n\t\t\t\tuniforms.halfWidth.applyMatrix4( matrix42 );\n\t\t\t\tuniforms.halfHeight.applyMatrix4( matrix42 );\n\n\t\t\t\t// TODO (abelnation): RectAreaLight distance?\n\t\t\t\t// uniforms.distance = distance;\n\n\t\t\t\tstate.rectArea[ rectAreaLength ] = uniforms;\n\n\t\t\t\trectAreaLength ++;\n\n\t\t\t} else if ( light.isPointLight ) {\n\n\t\t\t\tvar uniforms = cache.get( light );\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity );\n\t\t\t\tuniforms.distance = light.distance;\n\t\t\t\tuniforms.decay = light.decay;\n\n\t\t\t\tuniforms.shadow = light.castShadow;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tvar shadow = light.shadow;\n\n\t\t\t\t\tuniforms.shadowBias = shadow.bias;\n\t\t\t\t\tuniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tuniforms.shadowMapSize = shadow.mapSize;\n\t\t\t\t\tuniforms.shadowCameraNear = shadow.camera.near;\n\t\t\t\t\tuniforms.shadowCameraFar = shadow.camera.far;\n\n\t\t\t\t\tstate.pointShadowMap[ pointLength ] = shadowMap;\n\t\t\t\t\tstate.pointShadowMatrix[ pointLength ] = light.shadow.matrix;\n\n\t\t\t\t\tnumPointShadows ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.point[ pointLength ] = uniforms;\n\n\t\t\t\tpointLength ++;\n\n\t\t\t} else if ( light.isHemisphereLight ) {\n\n\t\t\t\tvar uniforms = cache.get( light );\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\t\t\t\tuniforms.direction.normalize();\n\n\t\t\t\tuniforms.skyColor.copy( light.color ).multiplyScalar( intensity );\n\t\t\t\tuniforms.groundColor.copy( light.groundColor ).multiplyScalar( intensity );\n\n\t\t\t\tstate.hemi[ hemiLength ] = uniforms;\n\n\t\t\t\themiLength ++;\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.ambient[ 0 ] = r;\n\t\tstate.ambient[ 1 ] = g;\n\t\tstate.ambient[ 2 ] = b;\n\n\t\tvar hash = state.hash;\n\n\t\tif ( hash.directionalLength !== directionalLength ||\n\t\t\thash.pointLength !== pointLength ||\n\t\t\thash.spotLength !== spotLength ||\n\t\t\thash.rectAreaLength !== rectAreaLength ||\n\t\t\thash.hemiLength !== hemiLength ||\n\t\t\thash.numDirectionalShadows !== numDirectionalShadows ||\n\t\t\thash.numPointShadows !== numPointShadows ||\n\t\t\thash.numSpotShadows !== numSpotShadows ) {\n\n\t\t\tstate.directional.length = directionalLength;\n\t\t\tstate.spot.length = spotLength;\n\t\t\tstate.rectArea.length = rectAreaLength;\n\t\t\tstate.point.length = pointLength;\n\t\t\tstate.hemi.length = hemiLength;\n\n\t\t\tstate.directionalShadowMap.length = numDirectionalShadows;\n\t\t\tstate.pointShadowMap.length = numPointShadows;\n\t\t\tstate.spotShadowMap.length = numSpotShadows;\n\t\t\tstate.directionalShadowMatrix.length = numDirectionalShadows;\n\t\t\tstate.pointShadowMatrix.length = numPointShadows;\n\t\t\tstate.spotShadowMatrix.length = numSpotShadows;\n\n\t\t\thash.directionalLength = directionalLength;\n\t\t\thash.pointLength = pointLength;\n\t\t\thash.spotLength = spotLength;\n\t\t\thash.rectAreaLength = rectAreaLength;\n\t\t\thash.hemiLength = hemiLength;\n\n\t\t\thash.numDirectionalShadows = numDirectionalShadows;\n\t\t\thash.numPointShadows = numPointShadows;\n\t\t\thash.numSpotShadows = numSpotShadows;\n\n\t\t\tstate.version = nextVersion ++;\n\n\t\t}\n\n\t}\n\n\treturn {\n\t\tsetup: setup,\n\t\tstate: state\n\t};\n\n}\n\n\nexport { WebGLLights };\n","/**\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { WebGLLights } from './WebGLLights.js';\n\nfunction WebGLRenderState() {\n\n\tvar lights = new WebGLLights();\n\n\tvar lightsArray = [];\n\tvar shadowsArray = [];\n\n\tfunction init() {\n\n\t\tlightsArray.length = 0;\n\t\tshadowsArray.length = 0;\n\n\t}\n\n\tfunction pushLight( light ) {\n\n\t\tlightsArray.push( light );\n\n\t}\n\n\tfunction pushShadow( shadowLight ) {\n\n\t\tshadowsArray.push( shadowLight );\n\n\t}\n\n\tfunction setupLights( camera ) {\n\n\t\tlights.setup( lightsArray, shadowsArray, camera );\n\n\t}\n\n\tvar state = {\n\t\tlightsArray: lightsArray,\n\t\tshadowsArray: shadowsArray,\n\n\t\tlights: lights\n\t};\n\n\treturn {\n\t\tinit: init,\n\t\tstate: state,\n\t\tsetupLights: setupLights,\n\n\t\tpushLight: pushLight,\n\t\tpushShadow: pushShadow\n\t};\n\n}\n\nfunction WebGLRenderStates() {\n\n\tvar renderStates = new WeakMap();\n\n\tfunction onSceneDispose( event ) {\n\n\t\tvar scene = event.target;\n\n\t\tscene.removeEventListener( 'dispose', onSceneDispose );\n\n\t\trenderStates.delete( scene );\n\n\t}\n\n\tfunction get( scene, camera ) {\n\n\t\tvar renderState;\n\n\t\tif ( renderStates.has( scene ) === false ) {\n\n\t\t\trenderState = new WebGLRenderState();\n\t\t\trenderStates.set( scene, new WeakMap() );\n\t\t\trenderStates.get( scene ).set( camera, renderState );\n\n\t\t\tscene.addEventListener( 'dispose', onSceneDispose );\n\n\t\t} else {\n\n\t\t\tif ( renderStates.get( scene ).has( camera ) === false ) {\n\n\t\t\t\trenderState = new WebGLRenderState();\n\t\t\t\trenderStates.get( scene ).set( camera, renderState );\n\n\t\t\t} else {\n\n\t\t\t\trenderState = renderStates.get( scene ).get( camera );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn renderState;\n\n\t}\n\n\tfunction dispose() {\n\n\t\trenderStates = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\n\nexport { WebGLRenderStates };\n","/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { FrontSide, BackSide, DoubleSide, RGBAFormat, NearestFilter, LinearFilter, PCFShadowMap, VSMShadowMap, RGBADepthPacking, NoBlending } from '../../constants.js';\nimport { WebGLRenderTarget } from '../WebGLRenderTarget.js';\nimport { MeshDepthMaterial } from '../../materials/MeshDepthMaterial.js';\nimport { MeshDistanceMaterial } from '../../materials/MeshDistanceMaterial.js';\nimport { ShaderMaterial } from '../../materials/ShaderMaterial.js';\nimport { BufferAttribute } from '../../core/BufferAttribute.js';\nimport { BufferGeometry } from '../../core/BufferGeometry.js';\nimport { Mesh } from '../../objects/Mesh.js';\nimport { Vector4 } from '../../math/Vector4.js';\nimport { Vector2 } from '../../math/Vector2.js';\nimport { Frustum } from '../../math/Frustum.js';\n\nimport vsm_frag from '../shaders/ShaderLib/vsm_frag.glsl.js';\nimport vsm_vert from '../shaders/ShaderLib/vsm_vert.glsl.js';\n\nfunction WebGLShadowMap( _renderer, _objects, maxTextureSize ) {\n\n\tvar _frustum = new Frustum(),\n\n\t\t_shadowMapSize = new Vector2(),\n\t\t_viewportSize = new Vector2(),\n\n\t\t_viewport = new Vector4(),\n\n\t\t_depthMaterials = [],\n\t\t_distanceMaterials = [],\n\n\t\t_materialCache = {};\n\n\tvar shadowSide = { 0: BackSide, 1: FrontSide, 2: DoubleSide };\n\n\tvar shadowMaterialVertical = new ShaderMaterial( {\n\n\t\tdefines: {\n\t\t\tSAMPLE_RATE: 2.0 / 8.0,\n\t\t\tHALF_SAMPLE_RATE: 1.0 / 8.0\n\t\t},\n\n\t\tuniforms: {\n\t\t\tshadow_pass: { value: null },\n\t\t\tresolution: { value: new Vector2() },\n\t\t\tradius: { value: 4.0 }\n\t\t},\n\n\t\tvertexShader: vsm_vert,\n\n\t\tfragmentShader: vsm_frag\n\n\t} );\n\n\tvar shadowMaterialHorizonal = shadowMaterialVertical.clone();\n\tshadowMaterialHorizonal.defines.HORIZONAL_PASS = 1;\n\n\tvar fullScreenTri = new BufferGeometry();\n\tfullScreenTri.setAttribute(\n\t\t\"position\",\n\t\tnew BufferAttribute(\n\t\t\tnew Float32Array( [ - 1, - 1, 0.5, 3, - 1, 0.5, - 1, 3, 0.5 ] ),\n\t\t\t3\n\t\t)\n\t);\n\n\tvar fullScreenMesh = new Mesh( fullScreenTri, shadowMaterialVertical );\n\n\tvar scope = this;\n\n\tthis.enabled = false;\n\n\tthis.autoUpdate = true;\n\tthis.needsUpdate = false;\n\n\tthis.type = PCFShadowMap;\n\n\tthis.render = function ( lights, scene, camera ) {\n\n\t\tif ( scope.enabled === false ) return;\n\t\tif ( scope.autoUpdate === false && scope.needsUpdate === false ) return;\n\n\t\tif ( lights.length === 0 ) return;\n\n\t\tvar currentRenderTarget = _renderer.getRenderTarget();\n\t\tvar activeCubeFace = _renderer.getActiveCubeFace();\n\t\tvar activeMipmapLevel = _renderer.getActiveMipmapLevel();\n\n\t\tvar _state = _renderer.state;\n\n\t\t// Set GL state for depth map.\n\t\t_state.setBlending( NoBlending );\n\t\t_state.buffers.color.setClear( 1, 1, 1, 1 );\n\t\t_state.buffers.depth.setTest( true );\n\t\t_state.setScissorTest( false );\n\n\t\t// render depth map\n\n\t\tfor ( var i = 0, il = lights.length; i < il; i ++ ) {\n\n\t\t\tvar light = lights[ i ];\n\t\t\tvar shadow = light.shadow;\n\n\t\t\tif ( shadow === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLShadowMap:', light, 'has no shadow.' );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\t_shadowMapSize.copy( shadow.mapSize );\n\n\t\t\tvar shadowFrameExtents = shadow.getFrameExtents();\n\n\t\t\t_shadowMapSize.multiply( shadowFrameExtents );\n\n\t\t\t_viewportSize.copy( shadow.mapSize );\n\n\t\t\tif ( _shadowMapSize.x > maxTextureSize || _shadowMapSize.y > maxTextureSize ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLShadowMap:', light, 'has shadow exceeding max texture size, reducing' );\n\n\t\t\t\tif ( _shadowMapSize.x > maxTextureSize ) {\n\n\t\t\t\t\t_viewportSize.x = Math.floor( maxTextureSize / shadowFrameExtents.x );\n\t\t\t\t\t_shadowMapSize.x = _viewportSize.x * shadowFrameExtents.x;\n\t\t\t\t\tshadow.mapSize.x = _viewportSize.x;\n\n\t\t\t\t}\n\n\t\t\t\tif ( _shadowMapSize.y > maxTextureSize ) {\n\n\t\t\t\t\t_viewportSize.y = Math.floor( maxTextureSize / shadowFrameExtents.y );\n\t\t\t\t\t_shadowMapSize.y = _viewportSize.y * shadowFrameExtents.y;\n\t\t\t\t\tshadow.mapSize.y = _viewportSize.y;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( shadow.map === null && ! shadow.isPointLightShadow && this.type === VSMShadowMap ) {\n\n\t\t\t\tvar pars = { minFilter: LinearFilter, magFilter: LinearFilter, format: RGBAFormat };\n\n\t\t\t\tshadow.map = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\n\t\t\t\tshadow.map.texture.name = light.name + \".shadowMap\";\n\n\t\t\t\tshadow.mapPass = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\n\n\t\t\t\tshadow.camera.updateProjectionMatrix();\n\n\t\t\t}\n\n\t\t\tif ( shadow.map === null ) {\n\n\t\t\t\tvar pars = { minFilter: NearestFilter, magFilter: NearestFilter, format: RGBAFormat };\n\n\t\t\t\tshadow.map = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\n\t\t\t\tshadow.map.texture.name = light.name + \".shadowMap\";\n\n\t\t\t\tshadow.camera.updateProjectionMatrix();\n\n\t\t\t}\n\n\t\t\t_renderer.setRenderTarget( shadow.map );\n\t\t\t_renderer.clear();\n\n\t\t\tvar viewportCount = shadow.getViewportCount();\n\n\t\t\tfor ( var vp = 0; vp < viewportCount; vp ++ ) {\n\n\t\t\t\tvar viewport = shadow.getViewport( vp );\n\n\t\t\t\t_viewport.set(\n\t\t\t\t\t_viewportSize.x * viewport.x,\n\t\t\t\t\t_viewportSize.y * viewport.y,\n\t\t\t\t\t_viewportSize.x * viewport.z,\n\t\t\t\t\t_viewportSize.y * viewport.w\n\t\t\t\t);\n\n\t\t\t\t_state.viewport( _viewport );\n\n\t\t\t\tshadow.updateMatrices( light, vp );\n\n\t\t\t\t_frustum = shadow.getFrustum();\n\n\t\t\t\trenderObject( scene, camera, shadow.camera, light, this.type );\n\n\t\t\t}\n\n\t\t\t// do blur pass for VSM\n\n\t\t\tif ( ! shadow.isPointLightShadow && this.type === VSMShadowMap ) {\n\n\t\t\t\tVSMPass( shadow, camera );\n\n\t\t\t}\n\n\t\t}\n\n\t\tscope.needsUpdate = false;\n\n\t\t_renderer.setRenderTarget( currentRenderTarget, activeCubeFace, activeMipmapLevel );\n\n\t};\n\n\tfunction VSMPass( shadow, camera ) {\n\n\t\tvar geometry = _objects.update( fullScreenMesh );\n\n\t\t// vertical pass\n\n\t\tshadowMaterialVertical.uniforms.shadow_pass.value = shadow.map.texture;\n\t\tshadowMaterialVertical.uniforms.resolution.value = shadow.mapSize;\n\t\tshadowMaterialVertical.uniforms.radius.value = shadow.radius;\n\t\t_renderer.setRenderTarget( shadow.mapPass );\n\t\t_renderer.clear();\n\t\t_renderer.renderBufferDirect( camera, null, geometry, shadowMaterialVertical, fullScreenMesh, null );\n\n\t\t// horizonal pass\n\n\t\tshadowMaterialHorizonal.uniforms.shadow_pass.value = shadow.mapPass.texture;\n\t\tshadowMaterialHorizonal.uniforms.resolution.value = shadow.mapSize;\n\t\tshadowMaterialHorizonal.uniforms.radius.value = shadow.radius;\n\t\t_renderer.setRenderTarget( shadow.map );\n\t\t_renderer.clear();\n\t\t_renderer.renderBufferDirect( camera, null, geometry, shadowMaterialHorizonal, fullScreenMesh, null );\n\n\t}\n\n\tfunction getDepthMaterialVariant( useMorphing, useSkinning, useInstancing ) {\n\n\t\tvar index = useMorphing << 0 | useSkinning << 1 | useInstancing << 2;\n\n\t\tvar material = _depthMaterials[ index ];\n\n\t\tif ( material === undefined ) {\n\n\t\t\tmaterial = new MeshDepthMaterial( {\n\n\t\t\t\tdepthPacking: RGBADepthPacking,\n\n\t\t\t\tmorphTargets: useMorphing,\n\t\t\t\tskinning: useSkinning\n\n\t\t\t} );\n\n\t\t\t_depthMaterials[ index ] = material;\n\n\t\t}\n\n\t\treturn material;\n\n\t}\n\n\tfunction getDistanceMaterialVariant( useMorphing, useSkinning, useInstancing ) {\n\n\t\tvar index = useMorphing << 0 | useSkinning << 1 | useInstancing << 2;\n\n\t\tvar material = _distanceMaterials[ index ];\n\n\t\tif ( material === undefined ) {\n\n\t\t\tmaterial = new MeshDistanceMaterial( {\n\n\t\t\t\tmorphTargets: useMorphing,\n\t\t\t\tskinning: useSkinning\n\n\t\t\t} );\n\n\t\t\t_distanceMaterials[ index ] = material;\n\n\t\t}\n\n\t\treturn material;\n\n\t}\n\n\tfunction getDepthMaterial( object, material, light, shadowCameraNear, shadowCameraFar, type ) {\n\n\t\tvar geometry = object.geometry;\n\n\t\tvar result = null;\n\n\t\tvar getMaterialVariant = getDepthMaterialVariant;\n\t\tvar customMaterial = object.customDepthMaterial;\n\n\t\tif ( light.isPointLight === true ) {\n\n\t\t\tgetMaterialVariant = getDistanceMaterialVariant;\n\t\t\tcustomMaterial = object.customDistanceMaterial;\n\n\t\t}\n\n\t\tif ( customMaterial === undefined ) {\n\n\t\t\tvar useMorphing = false;\n\n\t\t\tif ( material.morphTargets === true ) {\n\n\t\t\t\tif ( geometry.isBufferGeometry === true ) {\n\n\t\t\t\t\tuseMorphing = geometry.morphAttributes && geometry.morphAttributes.position && geometry.morphAttributes.position.length > 0;\n\n\t\t\t\t} else if ( geometry.isGeometry === true ) {\n\n\t\t\t\t\tuseMorphing = geometry.morphTargets && geometry.morphTargets.length > 0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar useSkinning = false;\n\n\t\t\tif ( object.isSkinnedMesh === true ) {\n\n\t\t\t\tif ( material.skinning === true ) {\n\n\t\t\t\t\tuseSkinning = true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:', object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar useInstancing = object.isInstancedMesh === true;\n\n\t\t\tresult = getMaterialVariant( useMorphing, useSkinning, useInstancing );\n\n\t\t} else {\n\n\t\t\tresult = customMaterial;\n\n\t\t}\n\n\t\tif ( _renderer.localClippingEnabled &&\n\t\t\t\tmaterial.clipShadows === true &&\n\t\t\t\tmaterial.clippingPlanes.length !== 0 ) {\n\n\t\t\t// in this case we need a unique material instance reflecting the\n\t\t\t// appropriate state\n\n\t\t\tvar keyA = result.uuid, keyB = material.uuid;\n\n\t\t\tvar materialsForVariant = _materialCache[ keyA ];\n\n\t\t\tif ( materialsForVariant === undefined ) {\n\n\t\t\t\tmaterialsForVariant = {};\n\t\t\t\t_materialCache[ keyA ] = materialsForVariant;\n\n\t\t\t}\n\n\t\t\tvar cachedMaterial = materialsForVariant[ keyB ];\n\n\t\t\tif ( cachedMaterial === undefined ) {\n\n\t\t\t\tcachedMaterial = result.clone();\n\t\t\t\tmaterialsForVariant[ keyB ] = cachedMaterial;\n\n\t\t\t}\n\n\t\t\tresult = cachedMaterial;\n\n\t\t}\n\n\t\tresult.visible = material.visible;\n\t\tresult.wireframe = material.wireframe;\n\n\t\tif ( type === VSMShadowMap ) {\n\n\t\t\tresult.side = ( material.shadowSide !== null ) ? material.shadowSide : material.side;\n\n\t\t} else {\n\n\t\t\tresult.side = ( material.shadowSide !== null ) ? material.shadowSide : shadowSide[ material.side ];\n\n\t\t}\n\n\t\tresult.clipShadows = material.clipShadows;\n\t\tresult.clippingPlanes = material.clippingPlanes;\n\t\tresult.clipIntersection = material.clipIntersection;\n\n\t\tresult.wireframeLinewidth = material.wireframeLinewidth;\n\t\tresult.linewidth = material.linewidth;\n\n\t\tif ( light.isPointLight === true && result.isMeshDistanceMaterial === true ) {\n\n\t\t\tresult.referencePosition.setFromMatrixPosition( light.matrixWorld );\n\t\t\tresult.nearDistance = shadowCameraNear;\n\t\t\tresult.farDistance = shadowCameraFar;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\tfunction renderObject( object, camera, shadowCamera, light, type ) {\n\n\t\tif ( object.visible === false ) return;\n\n\t\tvar visible = object.layers.test( camera.layers );\n\n\t\tif ( visible && ( object.isMesh || object.isLine || object.isPoints ) ) {\n\n\t\t\tif ( ( object.castShadow || ( object.receiveShadow && type === VSMShadowMap ) ) && ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) ) {\n\n\t\t\t\tobject.modelViewMatrix.multiplyMatrices( shadowCamera.matrixWorldInverse, object.matrixWorld );\n\n\t\t\t\tvar geometry = _objects.update( object );\n\t\t\t\tvar material = object.material;\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tvar groups = geometry.groups;\n\n\t\t\t\t\tfor ( var k = 0, kl = groups.length; k < kl; k ++ ) {\n\n\t\t\t\t\t\tvar group = groups[ k ];\n\t\t\t\t\t\tvar groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\tif ( groupMaterial && groupMaterial.visible ) {\n\n\t\t\t\t\t\t\tvar depthMaterial = getDepthMaterial( object, groupMaterial, light, shadowCamera.near, shadowCamera.far, type );\n\n\t\t\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, group );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( material.visible ) {\n\n\t\t\t\t\tvar depthMaterial = getDepthMaterial( object, material, light, shadowCamera.near, shadowCamera.far, type );\n\n\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, null );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar children = object.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\trenderObject( children[ i ], camera, shadowCamera, light, type );\n\n\t\t}\n\n\t}\n\n}\n\n\nexport { WebGLShadowMap };\n","export default /* glsl */`\n\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}\n\n`;\n","export default /* glsl */`\nuniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n\n#include <packing>\n\nvoid main() {\n\n  float mean = 0.0;\n  float squared_mean = 0.0;\n\n\t// This seems totally useless but it's a crazy work around for a Adreno compiler bug\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\n\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\n    #ifdef HORIZONAL_PASS\n\n      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n      mean += distribution.x;\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\n    #else\n\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\n      mean += depth;\n      squared_mean += depth * depth;\n\n    #endif\n\n  }\n\n  mean = mean * HALF_SAMPLE_RATE;\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\n\n  float std_dev = sqrt( squared_mean - mean * mean );\n\n  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n\n}\n`;\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { NotEqualDepth, GreaterDepth, GreaterEqualDepth, EqualDepth, LessEqualDepth, LessDepth, AlwaysDepth, NeverDepth, CullFaceFront, CullFaceBack, CullFaceNone, DoubleSide, BackSide, CustomBlending, MultiplyBlending, SubtractiveBlending, AdditiveBlending, NoBlending, NormalBlending, AddEquation, SubtractEquation, ReverseSubtractEquation, MinEquation, MaxEquation, ZeroFactor, OneFactor, SrcColorFactor, SrcAlphaFactor, SrcAlphaSaturateFactor, DstColorFactor, DstAlphaFactor, OneMinusSrcColorFactor, OneMinusSrcAlphaFactor, OneMinusDstColorFactor, OneMinusDstAlphaFactor } from '../../constants.js';\nimport { Vector4 } from '../../math/Vector4.js';\n\nfunction WebGLState( gl, extensions, capabilities ) {\n\n\tvar isWebGL2 = capabilities.isWebGL2;\n\n\tfunction ColorBuffer() {\n\n\t\tvar locked = false;\n\n\t\tvar color = new Vector4();\n\t\tvar currentColorMask = null;\n\t\tvar currentColorClear = new Vector4( 0, 0, 0, 0 );\n\n\t\treturn {\n\n\t\t\tsetMask: function ( colorMask ) {\n\n\t\t\t\tif ( currentColorMask !== colorMask && ! locked ) {\n\n\t\t\t\t\tgl.colorMask( colorMask, colorMask, colorMask, colorMask );\n\t\t\t\t\tcurrentColorMask = colorMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( r, g, b, a, premultipliedAlpha ) {\n\n\t\t\t\tif ( premultipliedAlpha === true ) {\n\n\t\t\t\t\tr *= a; g *= a; b *= a;\n\n\t\t\t\t}\n\n\t\t\t\tcolor.set( r, g, b, a );\n\n\t\t\t\tif ( currentColorClear.equals( color ) === false ) {\n\n\t\t\t\t\tgl.clearColor( r, g, b, a );\n\t\t\t\t\tcurrentColorClear.copy( color );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentColorMask = null;\n\t\t\t\tcurrentColorClear.set( - 1, 0, 0, 0 ); // set to invalid state\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tfunction DepthBuffer() {\n\n\t\tvar locked = false;\n\n\t\tvar currentDepthMask = null;\n\t\tvar currentDepthFunc = null;\n\t\tvar currentDepthClear = null;\n\n\t\treturn {\n\n\t\t\tsetTest: function ( depthTest ) {\n\n\t\t\t\tif ( depthTest ) {\n\n\t\t\t\t\tenable( gl.DEPTH_TEST );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tdisable( gl.DEPTH_TEST );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetMask: function ( depthMask ) {\n\n\t\t\t\tif ( currentDepthMask !== depthMask && ! locked ) {\n\n\t\t\t\t\tgl.depthMask( depthMask );\n\t\t\t\t\tcurrentDepthMask = depthMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetFunc: function ( depthFunc ) {\n\n\t\t\t\tif ( currentDepthFunc !== depthFunc ) {\n\n\t\t\t\t\tif ( depthFunc ) {\n\n\t\t\t\t\t\tswitch ( depthFunc ) {\n\n\t\t\t\t\t\t\tcase NeverDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.NEVER );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase AlwaysDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.ALWAYS );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase LessDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.LESS );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase LessEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase EqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.EQUAL );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase GreaterEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.GEQUAL );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase GreaterDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.GREATER );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase NotEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.NOTEQUAL );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcurrentDepthFunc = depthFunc;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( depth ) {\n\n\t\t\t\tif ( currentDepthClear !== depth ) {\n\n\t\t\t\t\tgl.clearDepth( depth );\n\t\t\t\t\tcurrentDepthClear = depth;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentDepthMask = null;\n\t\t\t\tcurrentDepthFunc = null;\n\t\t\t\tcurrentDepthClear = null;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tfunction StencilBuffer() {\n\n\t\tvar locked = false;\n\n\t\tvar currentStencilMask = null;\n\t\tvar currentStencilFunc = null;\n\t\tvar currentStencilRef = null;\n\t\tvar currentStencilFuncMask = null;\n\t\tvar currentStencilFail = null;\n\t\tvar currentStencilZFail = null;\n\t\tvar currentStencilZPass = null;\n\t\tvar currentStencilClear = null;\n\n\t\treturn {\n\n\t\t\tsetTest: function ( stencilTest ) {\n\n\t\t\t\tif ( ! locked ) {\n\n\t\t\t\t\tif ( stencilTest ) {\n\n\t\t\t\t\t\tenable( gl.STENCIL_TEST );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdisable( gl.STENCIL_TEST );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetMask: function ( stencilMask ) {\n\n\t\t\t\tif ( currentStencilMask !== stencilMask && ! locked ) {\n\n\t\t\t\t\tgl.stencilMask( stencilMask );\n\t\t\t\t\tcurrentStencilMask = stencilMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetFunc: function ( stencilFunc, stencilRef, stencilMask ) {\n\n\t\t\t\tif ( currentStencilFunc !== stencilFunc ||\n\t\t\t\t     currentStencilRef \t!== stencilRef \t||\n\t\t\t\t     currentStencilFuncMask !== stencilMask ) {\n\n\t\t\t\t\tgl.stencilFunc( stencilFunc, stencilRef, stencilMask );\n\n\t\t\t\t\tcurrentStencilFunc = stencilFunc;\n\t\t\t\t\tcurrentStencilRef = stencilRef;\n\t\t\t\t\tcurrentStencilFuncMask = stencilMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetOp: function ( stencilFail, stencilZFail, stencilZPass ) {\n\n\t\t\t\tif ( currentStencilFail\t !== stencilFail \t||\n\t\t\t\t     currentStencilZFail !== stencilZFail ||\n\t\t\t\t     currentStencilZPass !== stencilZPass ) {\n\n\t\t\t\t\tgl.stencilOp( stencilFail, stencilZFail, stencilZPass );\n\n\t\t\t\t\tcurrentStencilFail = stencilFail;\n\t\t\t\t\tcurrentStencilZFail = stencilZFail;\n\t\t\t\t\tcurrentStencilZPass = stencilZPass;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( stencil ) {\n\n\t\t\t\tif ( currentStencilClear !== stencil ) {\n\n\t\t\t\t\tgl.clearStencil( stencil );\n\t\t\t\t\tcurrentStencilClear = stencil;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentStencilMask = null;\n\t\t\t\tcurrentStencilFunc = null;\n\t\t\t\tcurrentStencilRef = null;\n\t\t\t\tcurrentStencilFuncMask = null;\n\t\t\t\tcurrentStencilFail = null;\n\t\t\t\tcurrentStencilZFail = null;\n\t\t\t\tcurrentStencilZPass = null;\n\t\t\t\tcurrentStencilClear = null;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t//\n\n\tvar colorBuffer = new ColorBuffer();\n\tvar depthBuffer = new DepthBuffer();\n\tvar stencilBuffer = new StencilBuffer();\n\n\tvar maxVertexAttributes = gl.getParameter( gl.MAX_VERTEX_ATTRIBS );\n\tvar newAttributes = new Uint8Array( maxVertexAttributes );\n\tvar enabledAttributes = new Uint8Array( maxVertexAttributes );\n\tvar attributeDivisors = new Uint8Array( maxVertexAttributes );\n\n\tvar enabledCapabilities = {};\n\n\tvar currentProgram = null;\n\n\tvar currentBlendingEnabled = null;\n\tvar currentBlending = null;\n\tvar currentBlendEquation = null;\n\tvar currentBlendSrc = null;\n\tvar currentBlendDst = null;\n\tvar currentBlendEquationAlpha = null;\n\tvar currentBlendSrcAlpha = null;\n\tvar currentBlendDstAlpha = null;\n\tvar currentPremultipledAlpha = false;\n\n\tvar currentFlipSided = null;\n\tvar currentCullFace = null;\n\n\tvar currentLineWidth = null;\n\n\tvar currentPolygonOffsetFactor = null;\n\tvar currentPolygonOffsetUnits = null;\n\n\tvar maxTextures = gl.getParameter( gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS );\n\n\tvar lineWidthAvailable = false;\n\tvar version = 0;\n\tvar glVersion = gl.getParameter( gl.VERSION );\n\n\tif ( glVersion.indexOf( 'WebGL' ) !== - 1 ) {\n\n\t\tversion = parseFloat( /^WebGL\\ ([0-9])/.exec( glVersion )[ 1 ] );\n\t\tlineWidthAvailable = ( version >= 1.0 );\n\n\t} else if ( glVersion.indexOf( 'OpenGL ES' ) !== - 1 ) {\n\n\t\tversion = parseFloat( /^OpenGL\\ ES\\ ([0-9])/.exec( glVersion )[ 1 ] );\n\t\tlineWidthAvailable = ( version >= 2.0 );\n\n\t}\n\n\tvar currentTextureSlot = null;\n\tvar currentBoundTextures = {};\n\n\tvar currentScissor = new Vector4();\n\tvar currentViewport = new Vector4();\n\n\tfunction createTexture( type, target, count ) {\n\n\t\tvar data = new Uint8Array( 4 ); // 4 is required to match default unpack alignment of 4.\n\t\tvar texture = gl.createTexture();\n\n\t\tgl.bindTexture( type, texture );\n\t\tgl.texParameteri( type, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\n\t\tgl.texParameteri( type, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\n\n\t\tfor ( var i = 0; i < count; i ++ ) {\n\n\t\t\tgl.texImage2D( target + i, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, data );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tvar emptyTextures = {};\n\temptyTextures[ gl.TEXTURE_2D ] = createTexture( gl.TEXTURE_2D, gl.TEXTURE_2D, 1 );\n\temptyTextures[ gl.TEXTURE_CUBE_MAP ] = createTexture( gl.TEXTURE_CUBE_MAP, gl.TEXTURE_CUBE_MAP_POSITIVE_X, 6 );\n\n\t// init\n\n\tcolorBuffer.setClear( 0, 0, 0, 1 );\n\tdepthBuffer.setClear( 1 );\n\tstencilBuffer.setClear( 0 );\n\n\tenable( gl.DEPTH_TEST );\n\tdepthBuffer.setFunc( LessEqualDepth );\n\n\tsetFlipSided( false );\n\tsetCullFace( CullFaceBack );\n\tenable( gl.CULL_FACE );\n\n\tsetBlending( NoBlending );\n\n\t//\n\n\tfunction initAttributes() {\n\n\t\tfor ( var i = 0, l = newAttributes.length; i < l; i ++ ) {\n\n\t\t\tnewAttributes[ i ] = 0;\n\n\t\t}\n\n\t}\n\n\tfunction enableAttribute( attribute ) {\n\n\t\tenableAttributeAndDivisor( attribute, 0 );\n\n\t}\n\n\tfunction enableAttributeAndDivisor( attribute, meshPerAttribute ) {\n\n\t\tnewAttributes[ attribute ] = 1;\n\n\t\tif ( enabledAttributes[ attribute ] === 0 ) {\n\n\t\t\tgl.enableVertexAttribArray( attribute );\n\t\t\tenabledAttributes[ attribute ] = 1;\n\n\t\t}\n\n\t\tif ( attributeDivisors[ attribute ] !== meshPerAttribute ) {\n\n\t\t\tvar extension = isWebGL2 ? gl : extensions.get( 'ANGLE_instanced_arrays' );\n\n\t\t\textension[ isWebGL2 ? 'vertexAttribDivisor' : 'vertexAttribDivisorANGLE' ]( attribute, meshPerAttribute );\n\t\t\tattributeDivisors[ attribute ] = meshPerAttribute;\n\n\t\t}\n\n\t}\n\n\tfunction disableUnusedAttributes() {\n\n\t\tfor ( var i = 0, l = enabledAttributes.length; i !== l; ++ i ) {\n\n\t\t\tif ( enabledAttributes[ i ] !== newAttributes[ i ] ) {\n\n\t\t\t\tgl.disableVertexAttribArray( i );\n\t\t\t\tenabledAttributes[ i ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction enable( id ) {\n\n\t\tif ( enabledCapabilities[ id ] !== true ) {\n\n\t\t\tgl.enable( id );\n\t\t\tenabledCapabilities[ id ] = true;\n\n\t\t}\n\n\t}\n\n\tfunction disable( id ) {\n\n\t\tif ( enabledCapabilities[ id ] !== false ) {\n\n\t\t\tgl.disable( id );\n\t\t\tenabledCapabilities[ id ] = false;\n\n\t\t}\n\n\t}\n\n\tfunction useProgram( program ) {\n\n\t\tif ( currentProgram !== program ) {\n\n\t\t\tgl.useProgram( program );\n\n\t\t\tcurrentProgram = program;\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tvar equationToGL = {\n\t\t[ AddEquation ]: gl.FUNC_ADD,\n\t\t[ SubtractEquation ]: gl.FUNC_SUBTRACT,\n\t\t[ ReverseSubtractEquation ]: gl.FUNC_REVERSE_SUBTRACT\n\t};\n\n\tif ( isWebGL2 ) {\n\n\t\tequationToGL[ MinEquation ] = gl.MIN;\n\t\tequationToGL[ MaxEquation ] = gl.MAX;\n\n\t} else {\n\n\t\tvar extension = extensions.get( 'EXT_blend_minmax' );\n\n\t\tif ( extension !== null ) {\n\n\t\t\tequationToGL[ MinEquation ] = extension.MIN_EXT;\n\t\t\tequationToGL[ MaxEquation ] = extension.MAX_EXT;\n\n\t\t}\n\n\t}\n\n\tvar factorToGL = {\n\t\t[ ZeroFactor ]: gl.ZERO,\n\t\t[ OneFactor ]: gl.ONE,\n\t\t[ SrcColorFactor ]: gl.SRC_COLOR,\n\t\t[ SrcAlphaFactor ]: gl.SRC_ALPHA,\n\t\t[ SrcAlphaSaturateFactor ]: gl.SRC_ALPHA_SATURATE,\n\t\t[ DstColorFactor ]: gl.DST_COLOR,\n\t\t[ DstAlphaFactor ]: gl.DST_ALPHA,\n\t\t[ OneMinusSrcColorFactor ]: gl.ONE_MINUS_SRC_COLOR,\n\t\t[ OneMinusSrcAlphaFactor ]: gl.ONE_MINUS_SRC_ALPHA,\n\t\t[ OneMinusDstColorFactor ]: gl.ONE_MINUS_DST_COLOR,\n\t\t[ OneMinusDstAlphaFactor ]: gl.ONE_MINUS_DST_ALPHA\n\t};\n\n\tfunction setBlending( blending, blendEquation, blendSrc, blendDst, blendEquationAlpha, blendSrcAlpha, blendDstAlpha, premultipliedAlpha ) {\n\n\t\tif ( blending === NoBlending ) {\n\n\t\t\tif ( currentBlendingEnabled ) {\n\n\t\t\t\tdisable( gl.BLEND );\n\t\t\t\tcurrentBlendingEnabled = false;\n\n\t\t\t}\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( ! currentBlendingEnabled ) {\n\n\t\t\tenable( gl.BLEND );\n\t\t\tcurrentBlendingEnabled = true;\n\n\t\t}\n\n\t\tif ( blending !== CustomBlending ) {\n\n\t\t\tif ( blending !== currentBlending || premultipliedAlpha !== currentPremultipledAlpha ) {\n\n\t\t\t\tif ( currentBlendEquation !== AddEquation || currentBlendEquationAlpha !== AddEquation ) {\n\n\t\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\n\n\t\t\t\t\tcurrentBlendEquation = AddEquation;\n\t\t\t\t\tcurrentBlendEquationAlpha = AddEquation;\n\n\t\t\t\t}\n\n\t\t\t\tif ( premultipliedAlpha ) {\n\n\t\t\t\t\tswitch ( blending ) {\n\n\t\t\t\t\t\tcase NormalBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( gl.ONE, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase AdditiveBlending:\n\t\t\t\t\t\t\tgl.blendFunc( gl.ONE, gl.ONE );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase SubtractiveBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( gl.ZERO, gl.ZERO, gl.ONE_MINUS_SRC_COLOR, gl.ONE_MINUS_SRC_ALPHA );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase MultiplyBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( gl.ZERO, gl.SRC_COLOR, gl.ZERO, gl.SRC_ALPHA );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.WebGLState: Invalid blending: ', blending );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tswitch ( blending ) {\n\n\t\t\t\t\t\tcase NormalBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase AdditiveBlending:\n\t\t\t\t\t\t\tgl.blendFunc( gl.SRC_ALPHA, gl.ONE );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase SubtractiveBlending:\n\t\t\t\t\t\t\tgl.blendFunc( gl.ZERO, gl.ONE_MINUS_SRC_COLOR );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase MultiplyBlending:\n\t\t\t\t\t\t\tgl.blendFunc( gl.ZERO, gl.SRC_COLOR );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.WebGLState: Invalid blending: ', blending );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tcurrentBlendSrc = null;\n\t\t\t\tcurrentBlendDst = null;\n\t\t\t\tcurrentBlendSrcAlpha = null;\n\t\t\t\tcurrentBlendDstAlpha = null;\n\n\t\t\t\tcurrentBlending = blending;\n\t\t\t\tcurrentPremultipledAlpha = premultipliedAlpha;\n\n\t\t\t}\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t// custom blending\n\n\t\tblendEquationAlpha = blendEquationAlpha || blendEquation;\n\t\tblendSrcAlpha = blendSrcAlpha || blendSrc;\n\t\tblendDstAlpha = blendDstAlpha || blendDst;\n\n\t\tif ( blendEquation !== currentBlendEquation || blendEquationAlpha !== currentBlendEquationAlpha ) {\n\n\t\t\tgl.blendEquationSeparate( equationToGL[ blendEquation ], equationToGL[ blendEquationAlpha ] );\n\n\t\t\tcurrentBlendEquation = blendEquation;\n\t\t\tcurrentBlendEquationAlpha = blendEquationAlpha;\n\n\t\t}\n\n\t\tif ( blendSrc !== currentBlendSrc || blendDst !== currentBlendDst || blendSrcAlpha !== currentBlendSrcAlpha || blendDstAlpha !== currentBlendDstAlpha ) {\n\n\t\t\tgl.blendFuncSeparate( factorToGL[ blendSrc ], factorToGL[ blendDst ], factorToGL[ blendSrcAlpha ], factorToGL[ blendDstAlpha ] );\n\n\t\t\tcurrentBlendSrc = blendSrc;\n\t\t\tcurrentBlendDst = blendDst;\n\t\t\tcurrentBlendSrcAlpha = blendSrcAlpha;\n\t\t\tcurrentBlendDstAlpha = blendDstAlpha;\n\n\t\t}\n\n\t\tcurrentBlending = blending;\n\t\tcurrentPremultipledAlpha = null;\n\n\t}\n\n\tfunction setMaterial( material, frontFaceCW ) {\n\n\t\tmaterial.side === DoubleSide\n\t\t\t? disable( gl.CULL_FACE )\n\t\t\t: enable( gl.CULL_FACE );\n\n\t\tvar flipSided = ( material.side === BackSide );\n\t\tif ( frontFaceCW ) flipSided = ! flipSided;\n\n\t\tsetFlipSided( flipSided );\n\n\t\t( material.blending === NormalBlending && material.transparent === false )\n\t\t\t? setBlending( NoBlending )\n\t\t\t: setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha, material.premultipliedAlpha );\n\n\t\tdepthBuffer.setFunc( material.depthFunc );\n\t\tdepthBuffer.setTest( material.depthTest );\n\t\tdepthBuffer.setMask( material.depthWrite );\n\t\tcolorBuffer.setMask( material.colorWrite );\n\n\t\tvar stencilWrite = material.stencilWrite;\n\t\tstencilBuffer.setTest( stencilWrite );\n\t\tif ( stencilWrite ) {\n\n\t\t\tstencilBuffer.setMask( material.stencilWriteMask );\n\t\t\tstencilBuffer.setFunc( material.stencilFunc, material.stencilRef, material.stencilFuncMask );\n\t\t\tstencilBuffer.setOp( material.stencilFail, material.stencilZFail, material.stencilZPass );\n\n\t\t}\n\n\t\tsetPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\n\n\t}\n\n\t//\n\n\tfunction setFlipSided( flipSided ) {\n\n\t\tif ( currentFlipSided !== flipSided ) {\n\n\t\t\tif ( flipSided ) {\n\n\t\t\t\tgl.frontFace( gl.CW );\n\n\t\t\t} else {\n\n\t\t\t\tgl.frontFace( gl.CCW );\n\n\t\t\t}\n\n\t\t\tcurrentFlipSided = flipSided;\n\n\t\t}\n\n\t}\n\n\tfunction setCullFace( cullFace ) {\n\n\t\tif ( cullFace !== CullFaceNone ) {\n\n\t\t\tenable( gl.CULL_FACE );\n\n\t\t\tif ( cullFace !== currentCullFace ) {\n\n\t\t\t\tif ( cullFace === CullFaceBack ) {\n\n\t\t\t\t\tgl.cullFace( gl.BACK );\n\n\t\t\t\t} else if ( cullFace === CullFaceFront ) {\n\n\t\t\t\t\tgl.cullFace( gl.FRONT );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tgl.cullFace( gl.FRONT_AND_BACK );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tdisable( gl.CULL_FACE );\n\n\t\t}\n\n\t\tcurrentCullFace = cullFace;\n\n\t}\n\n\tfunction setLineWidth( width ) {\n\n\t\tif ( width !== currentLineWidth ) {\n\n\t\t\tif ( lineWidthAvailable ) gl.lineWidth( width );\n\n\t\t\tcurrentLineWidth = width;\n\n\t\t}\n\n\t}\n\n\tfunction setPolygonOffset( polygonOffset, factor, units ) {\n\n\t\tif ( polygonOffset ) {\n\n\t\t\tenable( gl.POLYGON_OFFSET_FILL );\n\n\t\t\tif ( currentPolygonOffsetFactor !== factor || currentPolygonOffsetUnits !== units ) {\n\n\t\t\t\tgl.polygonOffset( factor, units );\n\n\t\t\t\tcurrentPolygonOffsetFactor = factor;\n\t\t\t\tcurrentPolygonOffsetUnits = units;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tdisable( gl.POLYGON_OFFSET_FILL );\n\n\t\t}\n\n\t}\n\n\tfunction setScissorTest( scissorTest ) {\n\n\t\tif ( scissorTest ) {\n\n\t\t\tenable( gl.SCISSOR_TEST );\n\n\t\t} else {\n\n\t\t\tdisable( gl.SCISSOR_TEST );\n\n\t\t}\n\n\t}\n\n\t// texture\n\n\tfunction activeTexture( webglSlot ) {\n\n\t\tif ( webglSlot === undefined ) webglSlot = gl.TEXTURE0 + maxTextures - 1;\n\n\t\tif ( currentTextureSlot !== webglSlot ) {\n\n\t\t\tgl.activeTexture( webglSlot );\n\t\t\tcurrentTextureSlot = webglSlot;\n\n\t\t}\n\n\t}\n\n\tfunction bindTexture( webglType, webglTexture ) {\n\n\t\tif ( currentTextureSlot === null ) {\n\n\t\t\tactiveTexture();\n\n\t\t}\n\n\t\tvar boundTexture = currentBoundTextures[ currentTextureSlot ];\n\n\t\tif ( boundTexture === undefined ) {\n\n\t\t\tboundTexture = { type: undefined, texture: undefined };\n\t\t\tcurrentBoundTextures[ currentTextureSlot ] = boundTexture;\n\n\t\t}\n\n\t\tif ( boundTexture.type !== webglType || boundTexture.texture !== webglTexture ) {\n\n\t\t\tgl.bindTexture( webglType, webglTexture || emptyTextures[ webglType ] );\n\n\t\t\tboundTexture.type = webglType;\n\t\t\tboundTexture.texture = webglTexture;\n\n\t\t}\n\n\t}\n\n\tfunction unbindTexture() {\n\n\t\tvar boundTexture = currentBoundTextures[ currentTextureSlot ];\n\n\t\tif ( boundTexture !== undefined && boundTexture.type !== undefined ) {\n\n\t\t\tgl.bindTexture( boundTexture.type, null );\n\n\t\t\tboundTexture.type = undefined;\n\t\t\tboundTexture.texture = undefined;\n\n\t\t}\n\n\t}\n\n\tfunction compressedTexImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.compressedTexImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.texImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texImage3D() {\n\n\t\ttry {\n\n\t\t\tgl.texImage3D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction scissor( scissor ) {\n\n\t\tif ( currentScissor.equals( scissor ) === false ) {\n\n\t\t\tgl.scissor( scissor.x, scissor.y, scissor.z, scissor.w );\n\t\t\tcurrentScissor.copy( scissor );\n\n\t\t}\n\n\t}\n\n\tfunction viewport( viewport ) {\n\n\t\tif ( currentViewport.equals( viewport ) === false ) {\n\n\t\t\tgl.viewport( viewport.x, viewport.y, viewport.z, viewport.w );\n\t\t\tcurrentViewport.copy( viewport );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction reset() {\n\n\t\tfor ( var i = 0; i < enabledAttributes.length; i ++ ) {\n\n\t\t\tif ( enabledAttributes[ i ] === 1 ) {\n\n\t\t\t\tgl.disableVertexAttribArray( i );\n\t\t\t\tenabledAttributes[ i ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tenabledCapabilities = {};\n\n\t\tcurrentTextureSlot = null;\n\t\tcurrentBoundTextures = {};\n\n\t\tcurrentProgram = null;\n\n\t\tcurrentBlending = null;\n\n\t\tcurrentFlipSided = null;\n\t\tcurrentCullFace = null;\n\n\t\tcolorBuffer.reset();\n\t\tdepthBuffer.reset();\n\t\tstencilBuffer.reset();\n\n\t}\n\n\treturn {\n\n\t\tbuffers: {\n\t\t\tcolor: colorBuffer,\n\t\t\tdepth: depthBuffer,\n\t\t\tstencil: stencilBuffer\n\t\t},\n\n\t\tinitAttributes: initAttributes,\n\t\tenableAttribute: enableAttribute,\n\t\tenableAttributeAndDivisor: enableAttributeAndDivisor,\n\t\tdisableUnusedAttributes: disableUnusedAttributes,\n\t\tenable: enable,\n\t\tdisable: disable,\n\n\t\tuseProgram: useProgram,\n\n\t\tsetBlending: setBlending,\n\t\tsetMaterial: setMaterial,\n\n\t\tsetFlipSided: setFlipSided,\n\t\tsetCullFace: setCullFace,\n\n\t\tsetLineWidth: setLineWidth,\n\t\tsetPolygonOffset: setPolygonOffset,\n\n\t\tsetScissorTest: setScissorTest,\n\n\t\tactiveTexture: activeTexture,\n\t\tbindTexture: bindTexture,\n\t\tunbindTexture: unbindTexture,\n\t\tcompressedTexImage2D: compressedTexImage2D,\n\t\ttexImage2D: texImage2D,\n\t\ttexImage3D: texImage3D,\n\n\t\tscissor: scissor,\n\t\tviewport: viewport,\n\n\t\treset: reset\n\n\t};\n\n}\n\nexport { WebGLState };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { LinearFilter, LinearMipmapLinearFilter, LinearMipmapNearestFilter, NearestFilter, NearestMipmapLinearFilter, NearestMipmapNearestFilter, RGBFormat, RGBAFormat, DepthFormat, DepthStencilFormat, UnsignedShortType, UnsignedIntType, UnsignedInt248Type, FloatType, HalfFloatType, MirroredRepeatWrapping, ClampToEdgeWrapping, RepeatWrapping } from '../../constants.js';\nimport { _Math } from '../../math/Math.js';\n\nfunction WebGLTextures( _gl, extensions, state, properties, capabilities, utils, info ) {\n\n\tvar isWebGL2 = capabilities.isWebGL2;\n\tvar maxTextures = capabilities.maxTextures;\n\tvar maxCubemapSize = capabilities.maxCubemapSize;\n\tvar maxTextureSize = capabilities.maxTextureSize;\n\tvar maxSamples = capabilities.maxSamples;\n\n\tvar _videoTextures = new WeakMap();\n\tvar _canvas;\n\n\t// cordova iOS (as of 5.0) still uses UIWebView, which provides OffscreenCanvas,\n\t// also OffscreenCanvas.getContext(\"webgl\"), but not OffscreenCanvas.getContext(\"2d\")!\n\t// Some implementations may only implement OffscreenCanvas partially (e.g. lacking 2d).\n\n\tvar useOffscreenCanvas = false;\n\n\ttry {\n\n\t\tuseOffscreenCanvas = typeof OffscreenCanvas !== 'undefined'\n\t\t\t&& ( new OffscreenCanvas( 1, 1 ).getContext( \"2d\" ) ) !== null;\n\n\t} catch ( err ) {\n\n\t\t// Ignore any errors\n\n\t}\n\n\tfunction createCanvas( width, height ) {\n\n\t\t// Use OffscreenCanvas when available. Specially needed in web workers\n\n\t\treturn useOffscreenCanvas ?\n\t\t\tnew OffscreenCanvas( width, height ) :\n\t\t\tdocument.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\n\t}\n\n\tfunction resizeImage( image, needsPowerOfTwo, needsNewCanvas, maxSize ) {\n\n\t\tvar scale = 1;\n\n\t\t// handle case if texture exceeds max size\n\n\t\tif ( image.width > maxSize || image.height > maxSize ) {\n\n\t\t\tscale = maxSize / Math.max( image.width, image.height );\n\n\t\t}\n\n\t\t// only perform resize if necessary\n\n\t\tif ( scale < 1 || needsPowerOfTwo === true ) {\n\n\t\t\t// only perform resize for certain image types\n\n\t\t\tif ( ( typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement ) ||\n\t\t\t\t( typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement ) ||\n\t\t\t\t( typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap ) ) {\n\n\t\t\t\tvar floor = needsPowerOfTwo ? _Math.floorPowerOfTwo : Math.floor;\n\n\t\t\t\tvar width = floor( scale * image.width );\n\t\t\t\tvar height = floor( scale * image.height );\n\n\t\t\t\tif ( _canvas === undefined ) _canvas = createCanvas( width, height );\n\n\t\t\t\t// cube textures can't reuse the same canvas\n\n\t\t\t\tvar canvas = needsNewCanvas ? createCanvas( width, height ) : _canvas;\n\n\t\t\t\tcanvas.width = width;\n\t\t\t\tcanvas.height = height;\n\n\t\t\t\tvar context = canvas.getContext( '2d' );\n\t\t\t\tcontext.drawImage( image, 0, 0, width, height );\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture has been resized from (' + image.width + 'x' + image.height + ') to (' + width + 'x' + height + ').' );\n\n\t\t\t\treturn canvas;\n\n\t\t\t} else {\n\n\t\t\t\tif ( 'data' in image ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Image in DataTexture is too big (' + image.width + 'x' + image.height + ').' );\n\n\t\t\t\t}\n\n\t\t\t\treturn image;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn image;\n\n\t}\n\n\tfunction isPowerOfTwo( image ) {\n\n\t\treturn _Math.isPowerOfTwo( image.width ) && _Math.isPowerOfTwo( image.height );\n\n\t}\n\n\tfunction textureNeedsPowerOfTwo( texture ) {\n\n\t\tif ( isWebGL2 ) return false;\n\n\t\treturn ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) ||\n\t\t\t( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter );\n\n\t}\n\n\tfunction textureNeedsGenerateMipmaps( texture, supportsMips ) {\n\n\t\treturn texture.generateMipmaps && supportsMips &&\n\t\t\ttexture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter;\n\n\t}\n\n\tfunction generateMipmap( target, texture, width, height ) {\n\n\t\t_gl.generateMipmap( target );\n\n\t\tvar textureProperties = properties.get( texture );\n\n\t\t// Note: Math.log( x ) * Math.LOG2E used instead of Math.log2( x ) which is not supported by IE11\n\t\ttextureProperties.__maxMipLevel = Math.log( Math.max( width, height ) ) * Math.LOG2E;\n\n\t}\n\n\tfunction getInternalFormat( internalFormatName, glFormat, glType ) {\n\n\t\tif ( isWebGL2 === false ) return glFormat;\n\n\t\tif ( internalFormatName !== null ) {\n\n\t\t\tif ( _gl[ internalFormatName ] !== undefined ) return _gl[ internalFormatName ];\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format \\'' + internalFormatName + '\\'' );\n\n\t\t}\n\n\t\tvar internalFormat = glFormat;\n\n\t\tif ( glFormat === _gl.RED ) {\n\n\t\t\tif ( glType === _gl.FLOAT ) internalFormat = _gl.R32F;\n\t\t\tif ( glType === _gl.HALF_FLOAT ) internalFormat = _gl.R16F;\n\t\t\tif ( glType === _gl.UNSIGNED_BYTE ) internalFormat = _gl.R8;\n\n\t\t}\n\n\t\tif ( glFormat === _gl.RGB ) {\n\n\t\t\tif ( glType === _gl.FLOAT ) internalFormat = _gl.RGB32F;\n\t\t\tif ( glType === _gl.HALF_FLOAT ) internalFormat = _gl.RGB16F;\n\t\t\tif ( glType === _gl.UNSIGNED_BYTE ) internalFormat = _gl.RGB8;\n\n\t\t}\n\n\t\tif ( glFormat === _gl.RGBA ) {\n\n\t\t\tif ( glType === _gl.FLOAT ) internalFormat = _gl.RGBA32F;\n\t\t\tif ( glType === _gl.HALF_FLOAT ) internalFormat = _gl.RGBA16F;\n\t\t\tif ( glType === _gl.UNSIGNED_BYTE ) internalFormat = _gl.RGBA8;\n\n\t\t}\n\n\t\tif ( internalFormat === _gl.R16F || internalFormat === _gl.R32F ||\n\t\t\tinternalFormat === _gl.RGBA16F || internalFormat === _gl.RGBA32F ) {\n\n\t\t\textensions.get( 'EXT_color_buffer_float' );\n\n\t\t} else if ( internalFormat === _gl.RGB16F || internalFormat === _gl.RGB32F ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Floating point textures with RGB format not supported. Please use RGBA instead.' );\n\n\t\t}\n\n\t\treturn internalFormat;\n\n\t}\n\n\t// Fallback filters for non-power-of-2 textures\n\n\tfunction filterFallback( f ) {\n\n\t\tif ( f === NearestFilter || f === NearestMipmapNearestFilter || f === NearestMipmapLinearFilter ) {\n\n\t\t\treturn _gl.NEAREST;\n\n\t\t}\n\n\t\treturn _gl.LINEAR;\n\n\t}\n\n\t//\n\n\tfunction onTextureDispose( event ) {\n\n\t\tvar texture = event.target;\n\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\n\n\t\tdeallocateTexture( texture );\n\n\t\tif ( texture.isVideoTexture ) {\n\n\t\t\t_videoTextures.delete( texture );\n\n\t\t}\n\n\t\tinfo.memory.textures --;\n\n\t}\n\n\tfunction onRenderTargetDispose( event ) {\n\n\t\tvar renderTarget = event.target;\n\n\t\trenderTarget.removeEventListener( 'dispose', onRenderTargetDispose );\n\n\t\tdeallocateRenderTarget( renderTarget );\n\n\t\tinfo.memory.textures --;\n\n\t}\n\n\t//\n\n\tfunction deallocateTexture( texture ) {\n\n\t\tvar textureProperties = properties.get( texture );\n\n\t\tif ( textureProperties.__webglInit === undefined ) return;\n\n\t\t_gl.deleteTexture( textureProperties.__webglTexture );\n\n\t\tproperties.remove( texture );\n\n\t}\n\n\tfunction deallocateRenderTarget( renderTarget ) {\n\n\t\tvar renderTargetProperties = properties.get( renderTarget );\n\t\tvar textureProperties = properties.get( renderTarget.texture );\n\n\t\tif ( ! renderTarget ) return;\n\n\t\tif ( textureProperties.__webglTexture !== undefined ) {\n\n\t\t\t_gl.deleteTexture( textureProperties.__webglTexture );\n\n\t\t}\n\n\t\tif ( renderTarget.depthTexture ) {\n\n\t\t\trenderTarget.depthTexture.dispose();\n\n\t\t}\n\n\t\tif ( renderTarget.isWebGLRenderTargetCube ) {\n\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer[ i ] );\n\t\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer[ i ] );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer );\n\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer );\n\n\t\t}\n\n\t\tif ( renderTarget.isWebGLMultiviewRenderTarget ) {\n\n\t\t\t_gl.deleteTexture( renderTargetProperties.__webglColorTexture );\n\t\t\t_gl.deleteTexture( renderTargetProperties.__webglDepthStencilTexture );\n\n\t\t\tinfo.memory.textures -= 2;\n\n\t\t\tfor ( var i = 0, il = renderTargetProperties.__webglViewFramebuffers.length; i < il; i ++ ) {\n\n\t\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglViewFramebuffers[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tproperties.remove( renderTarget.texture );\n\t\tproperties.remove( renderTarget );\n\n\t}\n\n\t//\n\n\tvar textureUnits = 0;\n\n\tfunction resetTextureUnits() {\n\n\t\ttextureUnits = 0;\n\n\t}\n\n\tfunction allocateTextureUnit() {\n\n\t\tvar textureUnit = textureUnits;\n\n\t\tif ( textureUnit >= maxTextures ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLTextures: Trying to use ' + textureUnit + ' texture units while this GPU supports only ' + maxTextures );\n\n\t\t}\n\n\t\ttextureUnits += 1;\n\n\t\treturn textureUnit;\n\n\t}\n\n\t//\n\n\tfunction setTexture2D( texture, slot ) {\n\n\t\tvar textureProperties = properties.get( texture );\n\n\t\tif ( texture.isVideoTexture ) updateVideoTexture( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tvar image = texture.image;\n\n\t\t\tif ( image === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is undefined' );\n\n\t\t\t} else if ( image.complete === false ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is incomplete' );\n\n\t\t\t} else {\n\n\t\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\n\n\t}\n\n\tfunction setTexture2DArray( texture, slot ) {\n\n\t\tvar textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\treturn;\n\n\t\t}\n\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\tstate.bindTexture( _gl.TEXTURE_2D_ARRAY, textureProperties.__webglTexture );\n\n\t}\n\n\tfunction setTexture3D( texture, slot ) {\n\n\t\tvar textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\treturn;\n\n\t\t}\n\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\tstate.bindTexture( _gl.TEXTURE_3D, textureProperties.__webglTexture );\n\n\t}\n\n\tfunction setTextureCube( texture, slot ) {\n\n\t\tif ( texture.image.length !== 6 ) return;\n\n\t\tvar textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tinitTexture( textureProperties, texture );\n\n\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__webglTexture );\n\n\t\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\n\n\t\t\tvar isCompressed = ( texture && texture.isCompressedTexture );\n\t\t\tvar isDataTexture = ( texture.image[ 0 ] && texture.image[ 0 ].isDataTexture );\n\n\t\t\tvar cubeImage = [];\n\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\tif ( ! isCompressed && ! isDataTexture ) {\n\n\t\t\t\t\tcubeImage[ i ] = resizeImage( texture.image[ i ], false, true, maxCubemapSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcubeImage[ i ] = isDataTexture ? texture.image[ i ].image : texture.image[ i ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar image = cubeImage[ 0 ],\n\t\t\t\tsupportsMips = isPowerOfTwo( image ) || isWebGL2,\n\t\t\t\tglFormat = utils.convert( texture.format ),\n\t\t\t\tglType = utils.convert( texture.type ),\n\t\t\t\tglInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType );\n\n\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, texture, supportsMips );\n\n\t\t\tvar mipmaps;\n\n\t\t\tif ( isCompressed ) {\n\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\tmipmaps = cubeImage[ i ].mipmaps;\n\n\t\t\t\t\tfor ( var j = 0; j < mipmaps.length; j ++ ) {\n\n\t\t\t\t\t\tvar mipmap = mipmaps[ j ];\n\n\t\t\t\t\t\tif ( texture.format !== RGBAFormat && texture.format !== RGBFormat ) {\n\n\t\t\t\t\t\t\tif ( glFormat !== null ) {\n\n\t\t\t\t\t\t\t\tstate.compressedTexImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glInternalFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()' );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\tmipmaps = texture.mipmaps;\n\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\tif ( isDataTexture ) {\n\n\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glInternalFormat, cubeImage[ i ].width, cubeImage[ i ].height, 0, glFormat, glType, cubeImage[ i ].data );\n\n\t\t\t\t\t\tfor ( var j = 0; j < mipmaps.length; j ++ ) {\n\n\t\t\t\t\t\t\tvar mipmap = mipmaps[ j ];\n\t\t\t\t\t\t\tvar mipmapImage = mipmap.image[ i ].image;\n\n\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j + 1, glInternalFormat, mipmapImage.width, mipmapImage.height, 0, glFormat, glType, mipmapImage.data );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glInternalFormat, glFormat, glType, cubeImage[ i ] );\n\n\t\t\t\t\t\tfor ( var j = 0; j < mipmaps.length; j ++ ) {\n\n\t\t\t\t\t\t\tvar mipmap = mipmaps[ j ];\n\n\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j + 1, glInternalFormat, glFormat, glType, mipmap.image[ i ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length;\n\n\t\t\t}\n\n\t\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\t\t// We assume images for cube map have the same size.\n\t\t\t\tgenerateMipmap( _gl.TEXTURE_CUBE_MAP, texture, image.width, image.height );\n\n\t\t\t}\n\n\t\t\ttextureProperties.__version = texture.version;\n\n\t\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t\t} else {\n\n\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__webglTexture );\n\n\t\t}\n\n\t}\n\n\tfunction setTextureCubeDynamic( texture, slot ) {\n\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, properties.get( texture ).__webglTexture );\n\n\t}\n\n\tvar wrappingToGL = {\n\t\t[ RepeatWrapping ]: _gl.REPEAT,\n\t\t[ ClampToEdgeWrapping ]: _gl.CLAMP_TO_EDGE,\n\t\t[ MirroredRepeatWrapping ]: _gl.MIRRORED_REPEAT\n\t};\n\n\tvar filterToGL = {\n\t\t[ NearestFilter ]: _gl.NEAREST,\n\t\t[ NearestMipmapNearestFilter ]: _gl.NEAREST_MIPMAP_NEAREST,\n\t\t[ NearestMipmapLinearFilter ]: _gl.NEAREST_MIPMAP_LINEAR,\n\n\t\t[ LinearFilter ]: _gl.LINEAR,\n\t\t[ LinearMipmapNearestFilter ]: _gl.LINEAR_MIPMAP_NEAREST,\n\t\t[ LinearMipmapLinearFilter ]: _gl.LINEAR_MIPMAP_LINEAR\n\t};\n\n\tfunction setTextureParameters( textureType, texture, supportsMips ) {\n\n\t\tif ( supportsMips ) {\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, wrappingToGL[ texture.wrapS ] );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, wrappingToGL[ texture.wrapT ] );\n\n\t\t\tif ( textureType === _gl.TEXTURE_3D || textureType === _gl.TEXTURE_2D_ARRAY ) {\n\n\t\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_R, wrappingToGL[ texture.wrapR ] );\n\n\t\t\t}\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, filterToGL[ texture.magFilter ] );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, filterToGL[ texture.minFilter ] );\n\n\t\t} else {\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, _gl.CLAMP_TO_EDGE );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, _gl.CLAMP_TO_EDGE );\n\n\t\t\tif ( textureType === _gl.TEXTURE_3D || textureType === _gl.TEXTURE_2D_ARRAY ) {\n\n\t\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_R, _gl.CLAMP_TO_EDGE );\n\n\t\t\t}\n\n\t\t\tif ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.' );\n\n\t\t\t}\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, filterFallback( texture.magFilter ) );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, filterFallback( texture.minFilter ) );\n\n\t\t\tif ( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar extension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\tif ( extension ) {\n\n\t\t\tif ( texture.type === FloatType && extensions.get( 'OES_texture_float_linear' ) === null ) return;\n\t\t\tif ( texture.type === HalfFloatType && ( isWebGL2 || extensions.get( 'OES_texture_half_float_linear' ) ) === null ) return;\n\n\t\t\tif ( texture.anisotropy > 1 || properties.get( texture ).__currentAnisotropy ) {\n\n\t\t\t\t_gl.texParameterf( textureType, extension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min( texture.anisotropy, capabilities.getMaxAnisotropy() ) );\n\t\t\t\tproperties.get( texture ).__currentAnisotropy = texture.anisotropy;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction initTexture( textureProperties, texture ) {\n\n\t\tif ( textureProperties.__webglInit === undefined ) {\n\n\t\t\ttextureProperties.__webglInit = true;\n\n\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t\ttextureProperties.__webglTexture = _gl.createTexture();\n\n\t\t\tinfo.memory.textures ++;\n\n\t\t}\n\n\t}\n\n\tfunction uploadTexture( textureProperties, texture, slot ) {\n\n\t\tvar textureType = _gl.TEXTURE_2D;\n\n\t\tif ( texture.isDataTexture2DArray ) textureType = _gl.TEXTURE_2D_ARRAY;\n\t\tif ( texture.isDataTexture3D ) textureType = _gl.TEXTURE_3D;\n\n\t\tinitTexture( textureProperties, texture );\n\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\tstate.bindTexture( textureType, textureProperties.__webglTexture );\n\n\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\n\t\t_gl.pixelStorei( _gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, texture.premultiplyAlpha );\n\t\t_gl.pixelStorei( _gl.UNPACK_ALIGNMENT, texture.unpackAlignment );\n\n\t\tvar needsPowerOfTwo = textureNeedsPowerOfTwo( texture ) && isPowerOfTwo( texture.image ) === false;\n\t\tvar image = resizeImage( texture.image, needsPowerOfTwo, false, maxTextureSize );\n\n\t\tvar supportsMips = isPowerOfTwo( image ) || isWebGL2,\n\t\t\tglFormat = utils.convert( texture.format ),\n\t\t\tglType = utils.convert( texture.type ),\n\t\t\tglInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType );\n\n\t\tsetTextureParameters( textureType, texture, supportsMips );\n\n\t\tvar mipmap, mipmaps = texture.mipmaps;\n\n\t\tif ( texture.isDepthTexture ) {\n\n\t\t\t// populate depth texture with dummy data\n\n\t\t\tglInternalFormat = _gl.DEPTH_COMPONENT;\n\n\t\t\tif ( texture.type === FloatType ) {\n\n\t\t\t\tif ( isWebGL2 === false ) throw new Error( 'Float Depth Texture only supported in WebGL2.0' );\n\t\t\t\tglInternalFormat = _gl.DEPTH_COMPONENT32F;\n\n\t\t\t} else if ( isWebGL2 ) {\n\n\t\t\t\t// WebGL 2.0 requires signed internalformat for glTexImage2D\n\t\t\t\tglInternalFormat = _gl.DEPTH_COMPONENT16;\n\n\t\t\t}\n\n\t\t\tif ( texture.format === DepthFormat && glInternalFormat === _gl.DEPTH_COMPONENT ) {\n\n\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n\t\t\t\t// DEPTH_COMPONENT and type is not UNSIGNED_SHORT or UNSIGNED_INT\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\tif ( texture.type !== UnsignedShortType && texture.type !== UnsignedIntType ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.' );\n\n\t\t\t\t\ttexture.type = UnsignedShortType;\n\t\t\t\t\tglType = utils.convert( texture.type );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// Depth stencil textures need the DEPTH_STENCIL internal format\n\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\tif ( texture.format === DepthStencilFormat ) {\n\n\t\t\t\tglInternalFormat = _gl.DEPTH_STENCIL;\n\n\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n\t\t\t\t// DEPTH_STENCIL and type is not UNSIGNED_INT_24_8_WEBGL.\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\tif ( texture.type !== UnsignedInt248Type ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.' );\n\n\t\t\t\t\ttexture.type = UnsignedInt248Type;\n\t\t\t\t\tglType = utils.convert( texture.type );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glInternalFormat, image.width, image.height, 0, glFormat, glType, null );\n\n\t\t} else if ( texture.isDataTexture ) {\n\n\t\t\t// use manually created mipmaps if available\n\t\t\t// if there are no manual mipmaps\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\tif ( mipmaps.length > 0 && supportsMips ) {\n\n\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\tmipmap = mipmaps[ i ];\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t}\n\n\t\t\t\ttexture.generateMipmaps = false;\n\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glInternalFormat, image.width, image.height, 0, glFormat, glType, image.data );\n\t\t\t\ttextureProperties.__maxMipLevel = 0;\n\n\t\t\t}\n\n\t\t} else if ( texture.isCompressedTexture ) {\n\n\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\tmipmap = mipmaps[ i ];\n\n\t\t\t\tif ( texture.format !== RGBAFormat && texture.format !== RGBFormat ) {\n\n\t\t\t\t\tif ( glFormat !== null ) {\n\n\t\t\t\t\t\tstate.compressedTexImage2D( _gl.TEXTURE_2D, i, glInternalFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()' );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t} else if ( texture.isDataTexture2DArray ) {\n\n\t\t\tstate.texImage3D( _gl.TEXTURE_2D_ARRAY, 0, glInternalFormat, image.width, image.height, image.depth, 0, glFormat, glType, image.data );\n\t\t\ttextureProperties.__maxMipLevel = 0;\n\n\t\t} else if ( texture.isDataTexture3D ) {\n\n\t\t\tstate.texImage3D( _gl.TEXTURE_3D, 0, glInternalFormat, image.width, image.height, image.depth, 0, glFormat, glType, image.data );\n\t\t\ttextureProperties.__maxMipLevel = 0;\n\n\t\t} else {\n\n\t\t\t// regular Texture (image, video, canvas)\n\n\t\t\t// use manually created mipmaps if available\n\t\t\t// if there are no manual mipmaps\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\tif ( mipmaps.length > 0 && supportsMips ) {\n\n\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\tmipmap = mipmaps[ i ];\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glInternalFormat, glFormat, glType, mipmap );\n\n\t\t\t\t}\n\n\t\t\t\ttexture.generateMipmaps = false;\n\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glInternalFormat, glFormat, glType, image );\n\t\t\t\ttextureProperties.__maxMipLevel = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\tgenerateMipmap( textureType, texture, image.width, image.height );\n\n\t\t}\n\n\t\ttextureProperties.__version = texture.version;\n\n\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t}\n\n\t// Render targets\n\n\t// Setup storage for target texture and bind it to correct framebuffer\n\tfunction setupFrameBufferTexture( framebuffer, renderTarget, attachment, textureTarget ) {\n\n\t\tvar glFormat = utils.convert( renderTarget.texture.format );\n\t\tvar glType = utils.convert( renderTarget.texture.type );\n\t\tvar glInternalFormat = getInternalFormat( renderTarget.texture.internalFormat, glFormat, glType );\n\t\tstate.texImage2D( textureTarget, 0, glInternalFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, attachment, textureTarget, properties.get( renderTarget.texture ).__webglTexture, 0 );\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\n\n\t}\n\n\t// Setup storage for internal depth/stencil buffers and bind to correct framebuffer\n\tfunction setupRenderBufferStorage( renderbuffer, renderTarget, isMultisample ) {\n\n\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, renderbuffer );\n\n\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\n\n\t\t\tif ( isMultisample ) {\n\n\t\t\t\tvar samples = getRenderTargetSamples( renderTarget );\n\n\t\t\t\t_gl.renderbufferStorageMultisample( _gl.RENDERBUFFER, samples, _gl.DEPTH_COMPONENT16, renderTarget.width, renderTarget.height );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_COMPONENT16, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\n\n\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\n\n\t\t\tif ( isMultisample ) {\n\n\t\t\t\tvar samples = getRenderTargetSamples( renderTarget );\n\n\t\t\t\t_gl.renderbufferStorageMultisample( _gl.RENDERBUFFER, samples, _gl.DEPTH24_STENCIL8, renderTarget.width, renderTarget.height );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_STENCIL, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\n\n\t\t} else {\n\n\t\t\tvar glFormat = utils.convert( renderTarget.texture.format );\n\t\t\tvar glType = utils.convert( renderTarget.texture.type );\n\t\t\tvar glInternalFormat = getInternalFormat( renderTarget.texture.internalFormat, glFormat, glType );\n\n\t\t\tif ( isMultisample ) {\n\n\t\t\t\tvar samples = getRenderTargetSamples( renderTarget );\n\n\t\t\t\t_gl.renderbufferStorageMultisample( _gl.RENDERBUFFER, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t}\n\n\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, null );\n\n\t}\n\n\t// Setup resources for a Depth Texture for a FBO (needs an extension)\n\tfunction setupDepthTexture( framebuffer, renderTarget ) {\n\n\t\tvar isCube = ( renderTarget && renderTarget.isWebGLRenderTargetCube );\n\t\tif ( isCube ) throw new Error( 'Depth Texture with cube render targets is not supported' );\n\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\n\t\tif ( ! ( renderTarget.depthTexture && renderTarget.depthTexture.isDepthTexture ) ) {\n\n\t\t\tthrow new Error( 'renderTarget.depthTexture must be an instance of THREE.DepthTexture' );\n\n\t\t}\n\n\t\t// upload an empty depth texture with framebuffer size\n\t\tif ( ! properties.get( renderTarget.depthTexture ).__webglTexture ||\n\t\t\t\trenderTarget.depthTexture.image.width !== renderTarget.width ||\n\t\t\t\trenderTarget.depthTexture.image.height !== renderTarget.height ) {\n\n\t\t\trenderTarget.depthTexture.image.width = renderTarget.width;\n\t\t\trenderTarget.depthTexture.image.height = renderTarget.height;\n\t\t\trenderTarget.depthTexture.needsUpdate = true;\n\n\t\t}\n\n\t\tsetTexture2D( renderTarget.depthTexture, 0 );\n\n\t\tvar webglDepthTexture = properties.get( renderTarget.depthTexture ).__webglTexture;\n\n\t\tif ( renderTarget.depthTexture.format === DepthFormat ) {\n\n\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.TEXTURE_2D, webglDepthTexture, 0 );\n\n\t\t} else if ( renderTarget.depthTexture.format === DepthStencilFormat ) {\n\n\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.TEXTURE_2D, webglDepthTexture, 0 );\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'Unknown depthTexture format' );\n\n\t\t}\n\n\t}\n\n\t// Setup GL resources for a non-texture depth buffer\n\tfunction setupDepthRenderbuffer( renderTarget ) {\n\n\t\tvar renderTargetProperties = properties.get( renderTarget );\n\n\t\tvar isCube = ( renderTarget.isWebGLRenderTargetCube === true );\n\n\t\tif ( renderTarget.depthTexture ) {\n\n\t\t\tif ( isCube ) throw new Error( 'target.depthTexture not supported in Cube render targets' );\n\n\t\t\tsetupDepthTexture( renderTargetProperties.__webglFramebuffer, renderTarget );\n\n\t\t} else {\n\n\t\t\tif ( isCube ) {\n\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = [];\n\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer[ i ] );\n\t\t\t\t\trenderTargetProperties.__webglDepthbuffer[ i ] = _gl.createRenderbuffer();\n\t\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer[ i ], renderTarget );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer );\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = _gl.createRenderbuffer();\n\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer, renderTarget );\n\n\t\t\t}\n\n\t\t}\n\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\n\n\t}\n\n\t// Set up GL resources for the render target\n\tfunction setupRenderTarget( renderTarget ) {\n\n\t\tvar renderTargetProperties = properties.get( renderTarget );\n\t\tvar textureProperties = properties.get( renderTarget.texture );\n\n\t\trenderTarget.addEventListener( 'dispose', onRenderTargetDispose );\n\n\t\ttextureProperties.__webglTexture = _gl.createTexture();\n\n\t\tinfo.memory.textures ++;\n\n\t\tvar isCube = ( renderTarget.isWebGLRenderTargetCube === true );\n\t\tvar isMultisample = ( renderTarget.isWebGLMultisampleRenderTarget === true );\n\t\tvar isMultiview = ( renderTarget.isWebGLMultiviewRenderTarget === true );\n\t\tvar supportsMips = isPowerOfTwo( renderTarget ) || isWebGL2;\n\n\t\t// Setup framebuffer\n\n\t\tif ( isCube ) {\n\n\t\t\trenderTargetProperties.__webglFramebuffer = [];\n\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\trenderTargetProperties.__webglFramebuffer[ i ] = _gl.createFramebuffer();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\trenderTargetProperties.__webglFramebuffer = _gl.createFramebuffer();\n\n\t\t\tif ( isMultisample ) {\n\n\t\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\t\trenderTargetProperties.__webglMultisampledFramebuffer = _gl.createFramebuffer();\n\t\t\t\t\trenderTargetProperties.__webglColorRenderbuffer = _gl.createRenderbuffer();\n\n\t\t\t\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, renderTargetProperties.__webglColorRenderbuffer );\n\n\t\t\t\t\tvar glFormat = utils.convert( renderTarget.texture.format );\n\t\t\t\t\tvar glType = utils.convert( renderTarget.texture.type );\n\t\t\t\t\tvar glInternalFormat = getInternalFormat( renderTarget.texture.internalFormat, glFormat, glType );\n\t\t\t\t\tvar samples = getRenderTargetSamples( renderTarget );\n\t\t\t\t\t_gl.renderbufferStorageMultisample( _gl.RENDERBUFFER, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglMultisampledFramebuffer );\n\t\t\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0, _gl.RENDERBUFFER, renderTargetProperties.__webglColorRenderbuffer );\n\t\t\t\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, null );\n\n\t\t\t\t\tif ( renderTarget.depthBuffer ) {\n\n\t\t\t\t\t\trenderTargetProperties.__webglDepthRenderbuffer = _gl.createRenderbuffer();\n\t\t\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthRenderbuffer, renderTarget, true );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\n\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.' );\n\n\t\t\t\t}\n\n\t\t\t} else if ( isMultiview ) {\n\n\t\t\t\tvar width = renderTarget.width;\n\t\t\t\tvar height = renderTarget.height;\n\t\t\t\tvar numViews = renderTarget.numViews;\n\n\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer );\n\n\t\t\t\tvar ext = extensions.get( 'OVR_multiview2' );\n\n\t\t\t\tinfo.memory.textures += 2;\n\n\t\t\t\tvar colorTexture = _gl.createTexture();\n\t\t\t\t_gl.bindTexture( _gl.TEXTURE_2D_ARRAY, colorTexture );\n\t\t\t\t_gl.texParameteri( _gl.TEXTURE_2D_ARRAY, _gl.TEXTURE_MAG_FILTER, _gl.NEAREST );\n\t\t\t\t_gl.texParameteri( _gl.TEXTURE_2D_ARRAY, _gl.TEXTURE_MIN_FILTER, _gl.NEAREST );\n\t\t\t\t_gl.texImage3D( _gl.TEXTURE_2D_ARRAY, 0, _gl.RGBA8, width, height, numViews, 0, _gl.RGBA, _gl.UNSIGNED_BYTE, null );\n\t\t\t\text.framebufferTextureMultiviewOVR( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0, colorTexture, 0, 0, numViews );\n\n\t\t\t\tvar depthStencilTexture = _gl.createTexture();\n\t\t\t\t_gl.bindTexture( _gl.TEXTURE_2D_ARRAY, depthStencilTexture );\n\t\t\t\t_gl.texParameteri( _gl.TEXTURE_2D_ARRAY, _gl.TEXTURE_MAG_FILTER, _gl.NEAREST );\n\t\t\t\t_gl.texParameteri( _gl.TEXTURE_2D_ARRAY, _gl.TEXTURE_MIN_FILTER, _gl.NEAREST );\n\t\t\t\t_gl.texImage3D( _gl.TEXTURE_2D_ARRAY, 0, _gl.DEPTH24_STENCIL8, width, height, numViews, 0, _gl.DEPTH_STENCIL, _gl.UNSIGNED_INT_24_8, null );\n\t\t\t\text.framebufferTextureMultiviewOVR( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, depthStencilTexture, 0, 0, numViews );\n\n\t\t\t\tvar viewFramebuffers = new Array( numViews );\n\t\t\t\tfor ( var i = 0; i < numViews; ++ i ) {\n\n\t\t\t\t\tviewFramebuffers[ i ] = _gl.createFramebuffer();\n\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, viewFramebuffers[ i ] );\n\t\t\t\t\t_gl.framebufferTextureLayer( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0, colorTexture, 0, i );\n\n\t\t\t\t}\n\n\t\t\t\trenderTargetProperties.__webglColorTexture = colorTexture;\n\t\t\t\trenderTargetProperties.__webglDepthStencilTexture = depthStencilTexture;\n\t\t\t\trenderTargetProperties.__webglViewFramebuffers = viewFramebuffers;\n\n\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\n\t\t\t\t_gl.bindTexture( _gl.TEXTURE_2D_ARRAY, null );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Setup color buffer\n\n\t\tif ( isCube ) {\n\n\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__webglTexture );\n\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, renderTarget.texture, supportsMips );\n\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer[ i ], renderTarget, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i );\n\n\t\t\t}\n\n\t\t\tif ( textureNeedsGenerateMipmaps( renderTarget.texture, supportsMips ) ) {\n\n\t\t\t\tgenerateMipmap( _gl.TEXTURE_CUBE_MAP, renderTarget.texture, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, null );\n\n\t\t} else if ( ! isMultiview ) {\n\n\t\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\n\t\t\tsetTextureParameters( _gl.TEXTURE_2D, renderTarget.texture, supportsMips );\n\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer, renderTarget, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_2D );\n\n\t\t\tif ( textureNeedsGenerateMipmaps( renderTarget.texture, supportsMips ) ) {\n\n\t\t\t\tgenerateMipmap( _gl.TEXTURE_2D, renderTarget.texture, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t\tstate.bindTexture( _gl.TEXTURE_2D, null );\n\n\t\t}\n\n\t\t// Setup depth and stencil buffers\n\n\t\tif ( renderTarget.depthBuffer ) {\n\n\t\t\tsetupDepthRenderbuffer( renderTarget );\n\n\t\t}\n\n\t}\n\n\tfunction updateRenderTargetMipmap( renderTarget ) {\n\n\t\tvar texture = renderTarget.texture;\n\t\tvar supportsMips = isPowerOfTwo( renderTarget ) || isWebGL2;\n\n\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\tvar target = renderTarget.isWebGLRenderTargetCube ? _gl.TEXTURE_CUBE_MAP : _gl.TEXTURE_2D;\n\t\t\tvar webglTexture = properties.get( texture ).__webglTexture;\n\n\t\t\tstate.bindTexture( target, webglTexture );\n\t\t\tgenerateMipmap( target, texture, renderTarget.width, renderTarget.height );\n\t\t\tstate.bindTexture( target, null );\n\n\t\t}\n\n\t}\n\n\tfunction updateMultisampleRenderTarget( renderTarget ) {\n\n\t\tif ( renderTarget.isWebGLMultisampleRenderTarget ) {\n\n\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\tvar renderTargetProperties = properties.get( renderTarget );\n\n\t\t\t\t_gl.bindFramebuffer( _gl.READ_FRAMEBUFFER, renderTargetProperties.__webglMultisampledFramebuffer );\n\t\t\t\t_gl.bindFramebuffer( _gl.DRAW_FRAMEBUFFER, renderTargetProperties.__webglFramebuffer );\n\n\t\t\t\tvar width = renderTarget.width;\n\t\t\t\tvar height = renderTarget.height;\n\t\t\t\tvar mask = _gl.COLOR_BUFFER_BIT;\n\n\t\t\t\tif ( renderTarget.depthBuffer ) mask |= _gl.DEPTH_BUFFER_BIT;\n\t\t\t\tif ( renderTarget.stencilBuffer ) mask |= _gl.STENCIL_BUFFER_BIT;\n\n\t\t\t\t_gl.blitFramebuffer( 0, 0, width, height, 0, 0, width, height, mask, _gl.NEAREST );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.' );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction getRenderTargetSamples( renderTarget ) {\n\n\t\treturn ( isWebGL2 && renderTarget.isWebGLMultisampleRenderTarget ) ?\n\t\t\tMath.min( maxSamples, renderTarget.samples ) : 0;\n\n\t}\n\n\tfunction updateVideoTexture( texture ) {\n\n\t\tvar frame = info.render.frame;\n\n\t\t// Check the last frame we updated the VideoTexture\n\n\t\tif ( _videoTextures.get( texture ) !== frame ) {\n\n\t\t\t_videoTextures.set( texture, frame );\n\t\t\ttexture.update();\n\n\t\t}\n\n\t}\n\n\t// backwards compatibility\n\n\tvar warnedTexture2D = false;\n\tvar warnedTextureCube = false;\n\n\tfunction safeSetTexture2D( texture, slot ) {\n\n\t\tif ( texture && texture.isWebGLRenderTarget ) {\n\n\t\t\tif ( warnedTexture2D === false ) {\n\n\t\t\t\tconsole.warn( \"THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead.\" );\n\t\t\t\twarnedTexture2D = true;\n\n\t\t\t}\n\n\t\t\ttexture = texture.texture;\n\n\t\t}\n\n\t\tsetTexture2D( texture, slot );\n\n\t}\n\n\tfunction safeSetTextureCube( texture, slot ) {\n\n\t\tif ( texture && texture.isWebGLRenderTargetCube ) {\n\n\t\t\tif ( warnedTextureCube === false ) {\n\n\t\t\t\tconsole.warn( \"THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead.\" );\n\t\t\t\twarnedTextureCube = true;\n\n\t\t\t}\n\n\t\t\ttexture = texture.texture;\n\n\t\t}\n\n\t\t// currently relying on the fact that WebGLRenderTargetCube.texture is a Texture and NOT a CubeTexture\n\t\t// TODO: unify these code paths\n\t\tif ( ( texture && texture.isCubeTexture ) ||\n\t\t\t( Array.isArray( texture.image ) && texture.image.length === 6 ) ) {\n\n\t\t\t// CompressedTexture can have Array in image :/\n\n\t\t\t// this function alone should take care of cube textures\n\t\t\tsetTextureCube( texture, slot );\n\n\t\t} else {\n\n\t\t\t// assumed: texture property of THREE.WebGLRenderTargetCube\n\t\t\tsetTextureCubeDynamic( texture, slot );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tthis.allocateTextureUnit = allocateTextureUnit;\n\tthis.resetTextureUnits = resetTextureUnits;\n\n\tthis.setTexture2D = setTexture2D;\n\tthis.setTexture2DArray = setTexture2DArray;\n\tthis.setTexture3D = setTexture3D;\n\tthis.setTextureCube = setTextureCube;\n\tthis.setTextureCubeDynamic = setTextureCubeDynamic;\n\tthis.setupRenderTarget = setupRenderTarget;\n\tthis.updateRenderTargetMipmap = updateRenderTargetMipmap;\n\tthis.updateMultisampleRenderTarget = updateMultisampleRenderTarget;\n\n\tthis.safeSetTexture2D = safeSetTexture2D;\n\tthis.safeSetTextureCube = safeSetTextureCube;\n\n}\n\nexport { WebGLTextures };\n","/**\n * @author thespite / http://www.twitter.com/thespite\n */\n\nimport { RGBA_ASTC_4x4_Format, RGBA_ASTC_5x4_Format, RGBA_ASTC_5x5_Format, RGBA_ASTC_6x5_Format, RGBA_ASTC_6x6_Format, RGBA_ASTC_8x5_Format, RGBA_ASTC_8x6_Format, RGBA_ASTC_8x8_Format, RGBA_ASTC_10x5_Format, RGBA_ASTC_10x6_Format, RGBA_ASTC_10x8_Format, RGBA_ASTC_10x10_Format, RGBA_ASTC_12x10_Format, RGBA_ASTC_12x12_Format, RGB_ETC1_Format, RGBA_PVRTC_2BPPV1_Format, RGBA_PVRTC_4BPPV1_Format, RGB_PVRTC_2BPPV1_Format, RGB_PVRTC_4BPPV1_Format, RGBA_S3TC_DXT5_Format, RGBA_S3TC_DXT3_Format, RGBA_S3TC_DXT1_Format, RGB_S3TC_DXT1_Format, DepthFormat, DepthStencilFormat, LuminanceAlphaFormat, LuminanceFormat, RedFormat, RGBAFormat, RGBFormat, AlphaFormat, RedIntegerFormat, RGFormat, RGIntegerFormat, RGBIntegerFormat, RGBAIntegerFormat, HalfFloatType, FloatType, UnsignedIntType, IntType, UnsignedShortType, ShortType, ByteType, UnsignedInt248Type, UnsignedShort565Type, UnsignedShort5551Type, UnsignedShort4444Type, UnsignedByteType } from '../../constants.js';\n\nfunction WebGLUtils( gl, extensions, capabilities ) {\n\n\tvar isWebGL2 = capabilities.isWebGL2;\n\n\tfunction convert( p ) {\n\n\t\tvar extension;\n\n\t\tif ( p === UnsignedByteType ) return gl.UNSIGNED_BYTE;\n\t\tif ( p === UnsignedShort4444Type ) return gl.UNSIGNED_SHORT_4_4_4_4;\n\t\tif ( p === UnsignedShort5551Type ) return gl.UNSIGNED_SHORT_5_5_5_1;\n\t\tif ( p === UnsignedShort565Type ) return gl.UNSIGNED_SHORT_5_6_5;\n\n\t\tif ( p === ByteType ) return gl.BYTE;\n\t\tif ( p === ShortType ) return gl.SHORT;\n\t\tif ( p === UnsignedShortType ) return gl.UNSIGNED_SHORT;\n\t\tif ( p === IntType ) return gl.INT;\n\t\tif ( p === UnsignedIntType ) return gl.UNSIGNED_INT;\n\t\tif ( p === FloatType ) return gl.FLOAT;\n\n\t\tif ( p === HalfFloatType ) {\n\n\t\t\tif ( isWebGL2 ) return gl.HALF_FLOAT;\n\n\t\t\textension = extensions.get( 'OES_texture_half_float' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.HALF_FLOAT_OES;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === AlphaFormat ) return gl.ALPHA;\n\t\tif ( p === RGBFormat ) return gl.RGB;\n\t\tif ( p === RGBAFormat ) return gl.RGBA;\n\t\tif ( p === LuminanceFormat ) return gl.LUMINANCE;\n\t\tif ( p === LuminanceAlphaFormat ) return gl.LUMINANCE_ALPHA;\n\t\tif ( p === DepthFormat ) return gl.DEPTH_COMPONENT;\n\t\tif ( p === DepthStencilFormat ) return gl.DEPTH_STENCIL;\n\t\tif ( p === RedFormat ) return gl.RED;\n\n\t\t// WebGL2 formats.\n\n\t\tif ( p === RedIntegerFormat ) return gl.RED_INTEGER;\n\t\tif ( p === RGFormat ) return gl.RG;\n\t\tif ( p === RGIntegerFormat ) return gl.RG_INTEGER;\n\t\tif ( p === RGBIntegerFormat ) return gl.RGB_INTEGER;\n\t\tif ( p === RGBAIntegerFormat ) return gl.RGBA_INTEGER;\n\n\t\tif ( p === RGB_S3TC_DXT1_Format || p === RGBA_S3TC_DXT1_Format ||\n\t\t\tp === RGBA_S3TC_DXT3_Format || p === RGBA_S3TC_DXT5_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_s3tc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_S3TC_DXT1_Format ) return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;\n\t\t\t\tif ( p === RGBA_S3TC_DXT1_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;\n\t\t\t\tif ( p === RGBA_S3TC_DXT3_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;\n\t\t\t\tif ( p === RGBA_S3TC_DXT5_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGB_PVRTC_4BPPV1_Format || p === RGB_PVRTC_2BPPV1_Format ||\n\t\t\tp === RGBA_PVRTC_4BPPV1_Format || p === RGBA_PVRTC_2BPPV1_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_pvrtc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;\n\t\t\t\tif ( p === RGB_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;\n\t\t\t\tif ( p === RGBA_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;\n\t\t\t\tif ( p === RGBA_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGB_ETC1_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_etc1' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.COMPRESSED_RGB_ETC1_WEBGL;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGBA_ASTC_4x4_Format || p === RGBA_ASTC_5x4_Format || p === RGBA_ASTC_5x5_Format ||\n\t\t\tp === RGBA_ASTC_6x5_Format || p === RGBA_ASTC_6x6_Format || p === RGBA_ASTC_8x5_Format ||\n\t\t\tp === RGBA_ASTC_8x6_Format || p === RGBA_ASTC_8x8_Format || p === RGBA_ASTC_10x5_Format ||\n\t\t\tp === RGBA_ASTC_10x6_Format || p === RGBA_ASTC_10x8_Format || p === RGBA_ASTC_10x10_Format ||\n\t\t\tp === RGBA_ASTC_12x10_Format || p === RGBA_ASTC_12x12_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_astc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\t// TODO Complete?\n\n\t\t\t\treturn p;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === UnsignedInt248Type ) {\n\n\t\t\tif ( isWebGL2 ) return gl.UNSIGNED_INT_24_8;\n\n\t\t\textension = extensions.get( 'WEBGL_depth_texture' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.UNSIGNED_INT_24_8_WEBGL;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn { convert: convert };\n\n}\n\n\nexport { WebGLUtils };\n","/**\n * @author fernandojsg / http://fernandojsg.com\n * @author Takahiro https://github.com/takahirox\n */\n\nimport { WebGLRenderTarget } from './WebGLRenderTarget.js';\n\nfunction WebGLMultiviewRenderTarget( width, height, numViews, options ) {\n\n\tWebGLRenderTarget.call( this, width, height, options );\n\n\tthis.depthBuffer = false;\n\tthis.stencilBuffer = false;\n\n\tthis.numViews = numViews;\n\n}\n\nWebGLMultiviewRenderTarget.prototype = Object.assign( Object.create( WebGLRenderTarget.prototype ), {\n\n\tconstructor: WebGLMultiviewRenderTarget,\n\n\tisWebGLMultiviewRenderTarget: true,\n\n\tcopy: function ( source ) {\n\n\t\tWebGLRenderTarget.prototype.copy.call( this, source );\n\n\t\tthis.numViews = source.numViews;\n\n\t\treturn this;\n\n\t},\n\n\tsetNumViews: function ( numViews ) {\n\n\t\tif ( this.numViews !== numViews ) {\n\n\t\t\tthis.numViews = numViews;\n\t\t\tthis.dispose();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\nexport { WebGLMultiviewRenderTarget };\n","/**\n * @author fernandojsg / http://fernandojsg.com\n * @author Takahiro https://github.com/takahirox\n */\n\nimport { WebGLMultiviewRenderTarget } from '../WebGLMultiviewRenderTarget.js';\nimport { Matrix3 } from '../../math/Matrix3.js';\nimport { Matrix4 } from '../../math/Matrix4.js';\nimport { Vector2 } from '../../math/Vector2.js';\n\nfunction WebGLMultiview( renderer, gl ) {\n\n\tvar DEFAULT_NUMVIEWS = 2;\n\n\tvar extensions = renderer.extensions;\n\tvar properties = renderer.properties;\n\n\tvar renderTarget, currentRenderTarget;\n\tvar mat3, mat4, cameraArray, renderSize;\n\n\tvar available;\n\tvar maxNumViews = 0;\n\n\t//\n\n\tfunction isAvailable() {\n\n\t\tif ( available === undefined ) {\n\n\t\t\tvar extension = extensions.get( 'OVR_multiview2' );\n\n\t\t\tavailable = extension !== null && gl.getContextAttributes().antialias === false;\n\n\t\t\tif ( available ) {\n\n\t\t\t\tmaxNumViews = gl.getParameter( extension.MAX_VIEWS_OVR );\n\t\t\t\trenderTarget = new WebGLMultiviewRenderTarget( 0, 0, DEFAULT_NUMVIEWS );\n\n\t\t\t\trenderSize = new Vector2();\n\t\t\t\tmat4 = [];\n\t\t\t\tmat3 = [];\n\t\t\t\tcameraArray = [];\n\n\t\t\t\tfor ( var i = 0; i < maxNumViews; i ++ ) {\n\n\t\t\t\t\tmat4[ i ] = new Matrix4();\n\t\t\t\t\tmat3[ i ] = new Matrix3();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn available;\n\n\t}\n\n\tfunction getCameraArray( camera ) {\n\n\t\tif ( camera.isArrayCamera ) return camera.cameras;\n\n\t\tcameraArray[ 0 ] = camera;\n\n\t\treturn cameraArray;\n\n\t}\n\n\tfunction updateCameraProjectionMatricesUniform( camera, uniforms ) {\n\n\t\tvar cameras = getCameraArray( camera );\n\n\t\tfor ( var i = 0; i < cameras.length; i ++ ) {\n\n\t\t\tmat4[ i ].copy( cameras[ i ].projectionMatrix );\n\n\t\t}\n\n\t\tuniforms.setValue( gl, 'projectionMatrices', mat4 );\n\n\t}\n\n\tfunction updateCameraViewMatricesUniform( camera, uniforms ) {\n\n\t\tvar cameras = getCameraArray( camera );\n\n\t\tfor ( var i = 0; i < cameras.length; i ++ ) {\n\n\t\t\tmat4[ i ].copy( cameras[ i ].matrixWorldInverse );\n\n\t\t}\n\n\t\tuniforms.setValue( gl, 'viewMatrices', mat4 );\n\n\t}\n\n\tfunction updateObjectMatricesUniforms( object, camera, uniforms ) {\n\n\t\tvar cameras = getCameraArray( camera );\n\n\t\tfor ( var i = 0; i < cameras.length; i ++ ) {\n\n\t\t\tmat4[ i ].multiplyMatrices( cameras[ i ].matrixWorldInverse, object.matrixWorld );\n\t\t\tmat3[ i ].getNormalMatrix( mat4[ i ] );\n\n\t\t}\n\n\t\tuniforms.setValue( gl, 'modelViewMatrices', mat4 );\n\t\tuniforms.setValue( gl, 'normalMatrices', mat3 );\n\n\t}\n\n\tfunction isMultiviewCompatible( camera ) {\n\n\t\tif ( camera.isArrayCamera === undefined ) return true;\n\n\t\tvar cameras = camera.cameras;\n\n\t\tif ( cameras.length > maxNumViews ) return false;\n\n\t\tfor ( var i = 1, il = cameras.length; i < il; i ++ ) {\n\n\t\t\tif ( cameras[ 0 ].viewport.z !== cameras[ i ].viewport.z ||\n\t\t\t\tcameras[ 0 ].viewport.w !== cameras[ i ].viewport.w ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n\tfunction resizeRenderTarget( camera ) {\n\n\t\tif ( currentRenderTarget ) {\n\n\t\t\trenderSize.set( currentRenderTarget.width, currentRenderTarget.height );\n\n\t\t} else {\n\n\t\t\trenderer.getDrawingBufferSize( renderSize );\n\n\t\t}\n\n\t\tif ( camera.isArrayCamera ) {\n\n\t\t\tvar viewport = camera.cameras[ 0 ].viewport;\n\n\t\t\trenderTarget.setSize( viewport.z, viewport.w );\n\t\t\trenderTarget.setNumViews( camera.cameras.length );\n\n\t\t} else {\n\n\t\t\trenderTarget.setSize( renderSize.x, renderSize.y );\n\t\t\trenderTarget.setNumViews( DEFAULT_NUMVIEWS );\n\n\t\t}\n\n\t}\n\n\tfunction attachCamera( camera ) {\n\n\t\tif ( isMultiviewCompatible( camera ) === false ) return;\n\n\t\tcurrentRenderTarget = renderer.getRenderTarget();\n\t\tresizeRenderTarget( camera );\n\t\trenderer.setRenderTarget( renderTarget );\n\n\t}\n\n\tfunction detachCamera( camera ) {\n\n\t\tif ( renderTarget !== renderer.getRenderTarget() ) return;\n\n\t\trenderer.setRenderTarget( currentRenderTarget );\n\n\t\tflush( camera );\n\n\t}\n\n\tfunction flush( camera ) {\n\n\t\tvar srcRenderTarget = renderTarget;\n\t\tvar numViews = srcRenderTarget.numViews;\n\n\t\tvar srcFramebuffers = properties.get( srcRenderTarget ).__webglViewFramebuffers;\n\n\t\tvar viewWidth = srcRenderTarget.width;\n\t\tvar viewHeight = srcRenderTarget.height;\n\n\t\tif ( camera.isArrayCamera ) {\n\n\t\t\tfor ( var i = 0; i < numViews; i ++ ) {\n\n\t\t\t\tvar viewport = camera.cameras[ i ].viewport;\n\n\t\t\t\tvar x1 = viewport.x;\n\t\t\t\tvar y1 = viewport.y;\n\t\t\t\tvar x2 = x1 + viewport.z;\n\t\t\t\tvar y2 = y1 + viewport.w;\n\n\t\t\t\tgl.bindFramebuffer( gl.READ_FRAMEBUFFER, srcFramebuffers[ i ] );\n\t\t\t\tgl.blitFramebuffer( 0, 0, viewWidth, viewHeight, x1, y1, x2, y2, gl.COLOR_BUFFER_BIT, gl.NEAREST );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tgl.bindFramebuffer( gl.READ_FRAMEBUFFER, srcFramebuffers[ 0 ] );\n\t\t\tgl.blitFramebuffer( 0, 0, viewWidth, viewHeight, 0, 0, renderSize.x, renderSize.y, gl.COLOR_BUFFER_BIT, gl.NEAREST );\n\n\t\t}\n\n\t}\n\n\tthis.isAvailable = isAvailable;\n\tthis.attachCamera = attachCamera;\n\tthis.detachCamera = detachCamera;\n\tthis.updateCameraProjectionMatricesUniform = updateCameraProjectionMatricesUniform;\n\tthis.updateCameraViewMatricesUniform = updateCameraViewMatricesUniform;\n\tthis.updateObjectMatricesUniforms = updateObjectMatricesUniforms;\n\n}\n\nexport { WebGLMultiview };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { PerspectiveCamera } from './PerspectiveCamera.js';\n\nfunction ArrayCamera( array ) {\n\n\tPerspectiveCamera.call( this );\n\n\tthis.cameras = array || [];\n\n}\n\nArrayCamera.prototype = Object.assign( Object.create( PerspectiveCamera.prototype ), {\n\n\tconstructor: ArrayCamera,\n\n\tisArrayCamera: true\n\n} );\n\n\nexport { ArrayCamera };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { ArrayCamera } from '../../cameras/ArrayCamera.js';\nimport { EventDispatcher } from '../../core/EventDispatcher.js';\nimport { Group } from '../../objects/Group.js';\nimport { PerspectiveCamera } from '../../cameras/PerspectiveCamera.js';\nimport { Vector3 } from '../../math/Vector3.js';\nimport { Vector4 } from '../../math/Vector4.js';\nimport { WebGLAnimation } from '../webgl/WebGLAnimation.js';\n\nfunction WebXRManager( renderer, gl ) {\n\n\tvar scope = this;\n\n\tvar session = null;\n\n\t// var framebufferScaleFactor = 1.0;\n\n\tvar referenceSpace = null;\n\tvar referenceSpaceType = 'local-floor';\n\n\tvar pose = null;\n\n\tvar controllers = [];\n\tvar inputSourcesMap = new Map();\n\n\t//\n\n\tvar cameraL = new PerspectiveCamera();\n\tcameraL.layers.enable( 1 );\n\tcameraL.viewport = new Vector4();\n\n\tvar cameraR = new PerspectiveCamera();\n\tcameraR.layers.enable( 2 );\n\tcameraR.viewport = new Vector4();\n\n\tvar cameraVR = new ArrayCamera( [ cameraL, cameraR ] );\n\tcameraVR.layers.enable( 1 );\n\tcameraVR.layers.enable( 2 );\n\n\t//\n\n\tthis.enabled = false;\n\n\tthis.isPresenting = false;\n\n\tthis.getController = function ( id ) {\n\n\t\tvar controller = controllers[ id ];\n\n\t\tif ( controller === undefined ) {\n\n\t\t\tcontroller = new Group();\n\t\t\tcontroller.matrixAutoUpdate = false;\n\t\t\tcontroller.visible = false;\n\n\t\t\tcontrollers[ id ] = controller;\n\n\t\t}\n\n\t\treturn controller;\n\n\t};\n\n\t//\n\n\tfunction onSessionEvent( event ) {\n\n\t\tvar controller = inputSourcesMap.get( event.inputSource );\n\n\t\tif ( controller ) {\n\n\t\t\tcontroller.dispatchEvent( { type: event.type } );\n\n\t\t}\n\n\t}\n\n\tfunction onSessionEnd() {\n\n\t\tinputSourcesMap.forEach( function ( controller, inputSource ) {\n\n\t\t\tcontroller.dispatchEvent( { type: 'disconnected', data: inputSource } );\n\t\t\tcontroller.visible = false;\n\n\t\t} );\n\n\t\tinputSourcesMap.clear();\n\n\t\t//\n\n\t\trenderer.setFramebuffer( null );\n\t\trenderer.setRenderTarget( renderer.getRenderTarget() ); // Hack #15830\n\t\tanimation.stop();\n\n\t\tscope.dispatchEvent( { type: 'sessionend' } );\n\n\t\tscope.isPresenting = false;\n\n\t}\n\n\tfunction onRequestReferenceSpace( value ) {\n\n\t\treferenceSpace = value;\n\n\t\tanimation.setContext( session );\n\t\tanimation.start();\n\n\t\tscope.dispatchEvent( { type: 'sessionstart' } );\n\n\t\tscope.isPresenting = true;\n\n\t}\n\n\tthis.setFramebufferScaleFactor = function ( /* value */ ) {\n\n\t\t// framebufferScaleFactor = value;\n\n\t};\n\n\tthis.setReferenceSpaceType = function ( value ) {\n\n\t\treferenceSpaceType = value;\n\n\t};\n\n\tthis.getReferenceSpace = function () {\n\n\t\treturn referenceSpace;\n\n\t};\n\n\tthis.getSession = function () {\n\n\t\treturn session;\n\n\t};\n\n\tthis.setSession = function ( value ) {\n\n\t\tsession = value;\n\n\t\tif ( session !== null ) {\n\n\t\t\tsession.addEventListener( 'select', onSessionEvent );\n\t\t\tsession.addEventListener( 'selectstart', onSessionEvent );\n\t\t\tsession.addEventListener( 'selectend', onSessionEvent );\n\t\t\tsession.addEventListener( 'squeeze', onSessionEvent );\n\t\t\tsession.addEventListener( 'squeezestart', onSessionEvent );\n\t\t\tsession.addEventListener( 'squeezeend', onSessionEvent );\n\t\t\tsession.addEventListener( 'end', onSessionEnd );\n\n\t\t\tvar attributes = gl.getContextAttributes();\n\n\t\t\tvar layerInit = {\n\t\t\t\tantialias: attributes.antialias,\n\t\t\t\talpha: attributes.alpha,\n\t\t\t\tdepth: attributes.depth,\n\t\t\t\tstencil: attributes.stencil\n\t\t\t};\n\n\t\t\t// eslint-disable-next-line no-undef\n\t\t\tvar baseLayer = new XRWebGLLayer( session, gl, layerInit );\n\n\t\t\tsession.updateRenderState( { baseLayer: baseLayer } );\n\n\t\t\tsession.requestReferenceSpace( referenceSpaceType ).then( onRequestReferenceSpace );\n\n\t\t\t//\n\n\t\t\tsession.addEventListener( 'inputsourceschange', updateInputSources );\n\n\t\t}\n\n\t};\n\n\tfunction updateInputSources( event ) {\n\n\t\tvar inputSources = session.inputSources;\n\n\t\t// Assign inputSources to available controllers\n\n\t\tfor ( var i = 0; i < controllers.length; i ++ ) {\n\n\t\t\tinputSourcesMap.set( inputSources[ i ], controllers[ i ] );\n\n\t\t}\n\n\t\t// Notify disconnected\n\n\t\tfor ( var i = 0; i < event.removed.length; i ++ ) {\n\n\t\t\tvar inputSource = event.removed[ i ];\n\t\t\tvar controller = inputSourcesMap.get( inputSource );\n\n\t\t\tif ( controller ) {\n\n\t\t\t\tcontroller.dispatchEvent( { type: 'disconnected', data: inputSource } );\n\t\t\t\tinputSourcesMap.delete( inputSource );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Notify connected\n\n\t\tfor ( var i = 0; i < event.added.length; i ++ ) {\n\n\t\t\tvar inputSource = event.added[ i ];\n\t\t\tvar controller = inputSourcesMap.get( inputSource );\n\n\t\t\tif ( controller ) {\n\n\t\t\t\tcontroller.dispatchEvent( { type: 'connected', data: inputSource } );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t//\n\n\tvar cameraLPos = new Vector3();\n\tvar cameraRPos = new Vector3();\n\n\t/**\n\t * @author jsantell / https://www.jsantell.com/\n\t *\n\t * Assumes 2 cameras that are parallel and share an X-axis, and that\n\t * the cameras' projection and world matrices have already been set.\n\t * And that near and far planes are identical for both cameras.\n\t * Visualization of this technique: https://computergraphics.stackexchange.com/a/4765\n\t */\n\tfunction setProjectionFromUnion( camera, cameraL, cameraR ) {\n\n\t\tcameraLPos.setFromMatrixPosition( cameraL.matrixWorld );\n\t\tcameraRPos.setFromMatrixPosition( cameraR.matrixWorld );\n\n\t\tvar ipd = cameraLPos.distanceTo( cameraRPos );\n\n\t\tvar projL = cameraL.projectionMatrix.elements;\n\t\tvar projR = cameraR.projectionMatrix.elements;\n\n\t\t// VR systems will have identical far and near planes, and\n\t\t// most likely identical top and bottom frustum extents.\n\t\t// Use the left camera for these values.\n\t\tvar near = projL[ 14 ] / ( projL[ 10 ] - 1 );\n\t\tvar far = projL[ 14 ] / ( projL[ 10 ] + 1 );\n\t\tvar topFov = ( projL[ 9 ] + 1 ) / projL[ 5 ];\n\t\tvar bottomFov = ( projL[ 9 ] - 1 ) / projL[ 5 ];\n\n\t\tvar leftFov = ( projL[ 8 ] - 1 ) / projL[ 0 ];\n\t\tvar rightFov = ( projR[ 8 ] + 1 ) / projR[ 0 ];\n\t\tvar left = near * leftFov;\n\t\tvar right = near * rightFov;\n\n\t\t// Calculate the new camera's position offset from the\n\t\t// left camera. xOffset should be roughly half `ipd`.\n\t\tvar zOffset = ipd / ( - leftFov + rightFov );\n\t\tvar xOffset = zOffset * - leftFov;\n\n\t\t// TODO: Better way to apply this offset?\n\t\tcameraL.matrixWorld.decompose( camera.position, camera.quaternion, camera.scale );\n\t\tcamera.translateX( xOffset );\n\t\tcamera.translateZ( zOffset );\n\t\tcamera.matrixWorld.compose( camera.position, camera.quaternion, camera.scale );\n\t\tcamera.matrixWorldInverse.getInverse( camera.matrixWorld );\n\n\t\t// Find the union of the frustum values of the cameras and scale\n\t\t// the values so that the near plane's position does not change in world space,\n\t\t// although must now be relative to the new union camera.\n\t\tvar near2 = near + zOffset;\n\t\tvar far2 = far + zOffset;\n\t\tvar left2 = left - xOffset;\n\t\tvar right2 = right + ( ipd - xOffset );\n\t\tvar top2 = topFov * far / far2 * near2;\n\t\tvar bottom2 = bottomFov * far / far2 * near2;\n\n\t\tcamera.projectionMatrix.makePerspective( left2, right2, top2, bottom2, near2, far2 );\n\n\t}\n\n\tfunction updateCamera( camera, parent ) {\n\n\t\tif ( parent === null ) {\n\n\t\t\tcamera.matrixWorld.copy( camera.matrix );\n\n\t\t} else {\n\n\t\t\tcamera.matrixWorld.multiplyMatrices( parent.matrixWorld, camera.matrix );\n\n\t\t}\n\n\t\tcamera.matrixWorldInverse.getInverse( camera.matrixWorld );\n\n\t}\n\n\tthis.getCamera = function ( camera ) {\n\n\t\tvar parent = camera.parent;\n\t\tvar cameras = cameraVR.cameras;\n\n\t\tupdateCamera( cameraVR, parent );\n\n\t\tfor ( var i = 0; i < cameras.length; i ++ ) {\n\n\t\t\tupdateCamera( cameras[ i ], parent );\n\n\t\t}\n\n\t\t// update camera and its children\n\n\t\tcamera.matrixWorld.copy( cameraVR.matrixWorld );\n\n\t\tvar children = camera.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].updateMatrixWorld( true );\n\n\t\t}\n\n\t\tsetProjectionFromUnion( cameraVR, cameraL, cameraR );\n\n\t\treturn cameraVR;\n\n\t};\n\n\t// Animation Loop\n\n\tvar onAnimationFrameCallback = null;\n\n\tfunction onAnimationFrame( time, frame ) {\n\n\t\tpose = frame.getViewerPose( referenceSpace );\n\n\t\tif ( pose !== null ) {\n\n\t\t\tvar views = pose.views;\n\t\t\tvar baseLayer = session.renderState.baseLayer;\n\n\t\t\trenderer.setFramebuffer( baseLayer.framebuffer );\n\n\t\t\tfor ( var i = 0; i < views.length; i ++ ) {\n\n\t\t\t\tvar view = views[ i ];\n\t\t\t\tvar viewport = baseLayer.getViewport( view );\n\t\t\t\tvar viewMatrix = view.transform.inverse.matrix;\n\n\t\t\t\tvar camera = cameraVR.cameras[ i ];\n\t\t\t\tcamera.matrix.fromArray( viewMatrix ).getInverse( camera.matrix );\n\t\t\t\tcamera.projectionMatrix.fromArray( view.projectionMatrix );\n\t\t\t\tcamera.viewport.set( viewport.x, viewport.y, viewport.width, viewport.height );\n\n\t\t\t\tif ( i === 0 ) {\n\n\t\t\t\t\tcameraVR.matrix.copy( camera.matrix );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tvar inputSources = session.inputSources;\n\n\t\tfor ( var i = 0; i < controllers.length; i ++ ) {\n\n\t\t\tvar controller = controllers[ i ];\n\n\t\t\tvar inputSource = inputSources[ i ];\n\n\t\t\tif ( inputSource ) {\n\n\t\t\t\tvar inputPose = frame.getPose( inputSource.targetRaySpace, referenceSpace );\n\n\t\t\t\tif ( inputPose !== null ) {\n\n\t\t\t\t\tcontroller.matrix.fromArray( inputPose.transform.matrix );\n\t\t\t\t\tcontroller.matrix.decompose( controller.position, controller.rotation, controller.scale );\n\t\t\t\t\tcontroller.visible = true;\n\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tcontroller.visible = false;\n\n\t\t}\n\n\t\tif ( onAnimationFrameCallback ) onAnimationFrameCallback( time, frame );\n\n\t}\n\n\tvar animation = new WebGLAnimation();\n\tanimation.setAnimationLoop( onAnimationFrame );\n\n\tthis.setAnimationLoop = function ( callback ) {\n\n\t\tonAnimationFrameCallback = callback;\n\n\t};\n\n\tthis.dispose = function () {};\n\n}\n\nObject.assign( WebXRManager.prototype, EventDispatcher.prototype );\n\nexport { WebXRManager };\n","/**\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author szimek / https://github.com/szimek/\n * @author tschw\n */\n\nimport {\n\tRGBAFormat,\n\tHalfFloatType,\n\tFloatType,\n\tUnsignedByteType,\n\tLinearEncoding,\n\tLinearToneMapping,\n\tBackSide\n} from '../constants.js';\nimport { _Math } from '../math/Math.js';\nimport { DataTexture } from '../textures/DataTexture.js';\nimport { Frustum } from '../math/Frustum.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { ShaderLib } from './shaders/ShaderLib.js';\nimport { UniformsLib } from './shaders/UniformsLib.js';\nimport { cloneUniforms } from './shaders/UniformsUtils.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Vector4 } from '../math/Vector4.js';\nimport { Scene } from '../scenes/Scene.js';\nimport { WebGLAnimation } from './webgl/WebGLAnimation.js';\nimport { WebGLAttributes } from './webgl/WebGLAttributes.js';\nimport { WebGLBackground } from './webgl/WebGLBackground.js';\nimport { WebGLBufferRenderer } from './webgl/WebGLBufferRenderer.js';\nimport { WebGLCapabilities } from './webgl/WebGLCapabilities.js';\nimport { WebGLClipping } from './webgl/WebGLClipping.js';\nimport { WebGLExtensions } from './webgl/WebGLExtensions.js';\nimport { WebGLGeometries } from './webgl/WebGLGeometries.js';\nimport { WebGLIndexedBufferRenderer } from './webgl/WebGLIndexedBufferRenderer.js';\nimport { WebGLInfo } from './webgl/WebGLInfo.js';\nimport { WebGLMorphtargets } from './webgl/WebGLMorphtargets.js';\nimport { WebGLObjects } from './webgl/WebGLObjects.js';\nimport { WebGLPrograms } from './webgl/WebGLPrograms.js';\nimport { WebGLProperties } from './webgl/WebGLProperties.js';\nimport { WebGLRenderLists } from './webgl/WebGLRenderLists.js';\nimport { WebGLRenderStates } from './webgl/WebGLRenderStates.js';\nimport { WebGLShadowMap } from './webgl/WebGLShadowMap.js';\nimport { WebGLState } from './webgl/WebGLState.js';\nimport { WebGLTextures } from './webgl/WebGLTextures.js';\nimport { WebGLUniforms } from './webgl/WebGLUniforms.js';\nimport { WebGLUtils } from './webgl/WebGLUtils.js';\nimport { WebGLMultiview } from './webgl/WebGLMultiview.js';\nimport { WebXRManager } from './webxr/WebXRManager.js';\n\nfunction WebGLRenderer( parameters ) {\n\n\tparameters = parameters || {};\n\n\tvar _canvas = parameters.canvas !== undefined ? parameters.canvas : document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' ),\n\t\t_context = parameters.context !== undefined ? parameters.context : null,\n\n\t\t_alpha = parameters.alpha !== undefined ? parameters.alpha : false,\n\t\t_depth = parameters.depth !== undefined ? parameters.depth : true,\n\t\t_stencil = parameters.stencil !== undefined ? parameters.stencil : true,\n\t\t_antialias = parameters.antialias !== undefined ? parameters.antialias : false,\n\t\t_premultipliedAlpha = parameters.premultipliedAlpha !== undefined ? parameters.premultipliedAlpha : true,\n\t\t_preserveDrawingBuffer = parameters.preserveDrawingBuffer !== undefined ? parameters.preserveDrawingBuffer : false,\n\t\t_powerPreference = parameters.powerPreference !== undefined ? parameters.powerPreference : 'default',\n\t\t_failIfMajorPerformanceCaveat = parameters.failIfMajorPerformanceCaveat !== undefined ? parameters.failIfMajorPerformanceCaveat : false;\n\n\tvar currentRenderList = null;\n\tvar currentRenderState = null;\n\n\t// public properties\n\n\tthis.domElement = _canvas;\n\n\t// Debug configuration container\n\tthis.debug = {\n\n\t\t/**\n\t\t * Enables error checking and reporting when shader programs are being compiled\n\t\t * @type {boolean}\n\t\t */\n\t\tcheckShaderErrors: true\n\t};\n\n\t// clearing\n\n\tthis.autoClear = true;\n\tthis.autoClearColor = true;\n\tthis.autoClearDepth = true;\n\tthis.autoClearStencil = true;\n\n\t// scene graph\n\n\tthis.sortObjects = true;\n\n\t// user-defined clipping\n\n\tthis.clippingPlanes = [];\n\tthis.localClippingEnabled = false;\n\n\t// physically based shading\n\n\tthis.gammaFactor = 2.0;\t// for backwards compatibility\n\tthis.outputEncoding = LinearEncoding;\n\n\t// physical lights\n\n\tthis.physicallyCorrectLights = false;\n\n\t// tone mapping\n\n\tthis.toneMapping = LinearToneMapping;\n\tthis.toneMappingExposure = 1.0;\n\tthis.toneMappingWhitePoint = 1.0;\n\n\t// morphs\n\n\tthis.maxMorphTargets = 8;\n\tthis.maxMorphNormals = 4;\n\n\t// internal properties\n\n\tvar _this = this,\n\n\t\t_isContextLost = false,\n\n\t\t// internal state cache\n\n\t\t_framebuffer = null,\n\n\t\t_currentActiveCubeFace = 0,\n\t\t_currentActiveMipmapLevel = 0,\n\t\t_currentRenderTarget = null,\n\t\t_currentFramebuffer = null,\n\t\t_currentMaterialId = - 1,\n\n\t\t// geometry and program caching\n\n\t\t_currentGeometryProgram = {\n\t\t\tgeometry: null,\n\t\t\tprogram: null,\n\t\t\twireframe: false\n\t\t},\n\n\t\t_currentCamera = null,\n\t\t_currentArrayCamera = null,\n\n\t\t_currentViewport = new Vector4(),\n\t\t_currentScissor = new Vector4(),\n\t\t_currentScissorTest = null,\n\n\t\t//\n\n\t\t_width = _canvas.width,\n\t\t_height = _canvas.height,\n\n\t\t_pixelRatio = 1,\n\t\t_opaqueSort = null,\n\t\t_transparentSort = null,\n\n\t\t_viewport = new Vector4( 0, 0, _width, _height ),\n\t\t_scissor = new Vector4( 0, 0, _width, _height ),\n\t\t_scissorTest = false,\n\n\t\t// frustum\n\n\t\t_frustum = new Frustum(),\n\n\t\t// clipping\n\n\t\t_clipping = new WebGLClipping(),\n\t\t_clippingEnabled = false,\n\t\t_localClippingEnabled = false,\n\n\t\t// camera matrices cache\n\n\t\t_projScreenMatrix = new Matrix4(),\n\n\t\t_vector3 = new Vector3();\n\n\tfunction getTargetPixelRatio() {\n\n\t\treturn _currentRenderTarget === null ? _pixelRatio : 1;\n\n\t}\n\n\t// initialize\n\n\tvar _gl;\n\n\ttry {\n\n\t\tvar contextAttributes = {\n\t\t\talpha: _alpha,\n\t\t\tdepth: _depth,\n\t\t\tstencil: _stencil,\n\t\t\tantialias: _antialias,\n\t\t\tpremultipliedAlpha: _premultipliedAlpha,\n\t\t\tpreserveDrawingBuffer: _preserveDrawingBuffer,\n\t\t\tpowerPreference: _powerPreference,\n\t\t\tfailIfMajorPerformanceCaveat: _failIfMajorPerformanceCaveat,\n\t\t\txrCompatible: true\n\t\t};\n\n\t\t// event listeners must be registered before WebGL context is created, see #12753\n\n\t\t_canvas.addEventListener( 'webglcontextlost', onContextLost, false );\n\t\t_canvas.addEventListener( 'webglcontextrestored', onContextRestore, false );\n\n\t\t_gl = _context || _canvas.getContext( 'webgl', contextAttributes ) || _canvas.getContext( 'experimental-webgl', contextAttributes );\n\n\t\tif ( _gl === null ) {\n\n\t\t\tif ( _canvas.getContext( 'webgl' ) !== null ) {\n\n\t\t\t\tthrow new Error( 'Error creating WebGL context with your selected attributes.' );\n\n\t\t\t} else {\n\n\t\t\t\tthrow new Error( 'Error creating WebGL context.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Some experimental-webgl implementations do not have getShaderPrecisionFormat\n\n\t\tif ( _gl.getShaderPrecisionFormat === undefined ) {\n\n\t\t\t_gl.getShaderPrecisionFormat = function () {\n\n\t\t\t\treturn { 'rangeMin': 1, 'rangeMax': 1, 'precision': 1 };\n\n\t\t\t};\n\n\t\t}\n\n\t} catch ( error ) {\n\n\t\tconsole.error( 'THREE.WebGLRenderer: ' + error.message );\n\t\tthrow error;\n\n\t}\n\n\tvar extensions, capabilities, state, info;\n\tvar properties, textures, attributes, geometries, objects;\n\tvar programCache, renderLists, renderStates;\n\n\tvar background, morphtargets, bufferRenderer, indexedBufferRenderer;\n\n\tvar utils;\n\n\tfunction initGLContext() {\n\n\t\textensions = new WebGLExtensions( _gl );\n\n\t\tcapabilities = new WebGLCapabilities( _gl, extensions, parameters );\n\n\t\tif ( capabilities.isWebGL2 === false ) {\n\n\t\t\textensions.get( 'WEBGL_depth_texture' );\n\t\t\textensions.get( 'OES_texture_float' );\n\t\t\textensions.get( 'OES_texture_half_float' );\n\t\t\textensions.get( 'OES_texture_half_float_linear' );\n\t\t\textensions.get( 'OES_standard_derivatives' );\n\t\t\textensions.get( 'OES_element_index_uint' );\n\t\t\textensions.get( 'ANGLE_instanced_arrays' );\n\n\t\t}\n\n\t\textensions.get( 'OES_texture_float_linear' );\n\n\t\tutils = new WebGLUtils( _gl, extensions, capabilities );\n\n\t\tstate = new WebGLState( _gl, extensions, capabilities );\n\t\tstate.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor() );\n\t\tstate.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor() );\n\n\t\tinfo = new WebGLInfo( _gl );\n\t\tproperties = new WebGLProperties();\n\t\ttextures = new WebGLTextures( _gl, extensions, state, properties, capabilities, utils, info );\n\t\tattributes = new WebGLAttributes( _gl );\n\t\tgeometries = new WebGLGeometries( _gl, attributes, info );\n\t\tobjects = new WebGLObjects( _gl, geometries, attributes, info );\n\t\tmorphtargets = new WebGLMorphtargets( _gl );\n\t\tprogramCache = new WebGLPrograms( _this, extensions, capabilities );\n\t\trenderLists = new WebGLRenderLists();\n\t\trenderStates = new WebGLRenderStates();\n\n\t\tbackground = new WebGLBackground( _this, state, objects, _premultipliedAlpha );\n\n\t\tbufferRenderer = new WebGLBufferRenderer( _gl, extensions, info, capabilities );\n\t\tindexedBufferRenderer = new WebGLIndexedBufferRenderer( _gl, extensions, info, capabilities );\n\n\t\tinfo.programs = programCache.programs;\n\n\t\t_this.capabilities = capabilities;\n\t\t_this.extensions = extensions;\n\t\t_this.properties = properties;\n\t\t_this.renderLists = renderLists;\n\t\t_this.state = state;\n\t\t_this.info = info;\n\n\t}\n\n\tinitGLContext();\n\n\t// xr\n\n\tvar xr = new WebXRManager( _this, _gl );\n\n\tthis.xr = xr;\n\n\t// Multiview\n\n\tvar multiview = new WebGLMultiview( _this, _gl );\n\n\t// shadow map\n\n\tvar shadowMap = new WebGLShadowMap( _this, objects, capabilities.maxTextureSize );\n\n\tthis.shadowMap = shadowMap;\n\n\t// API\n\n\tthis.getContext = function () {\n\n\t\treturn _gl;\n\n\t};\n\n\tthis.getContextAttributes = function () {\n\n\t\treturn _gl.getContextAttributes();\n\n\t};\n\n\tthis.forceContextLoss = function () {\n\n\t\tvar extension = extensions.get( 'WEBGL_lose_context' );\n\t\tif ( extension ) extension.loseContext();\n\n\t};\n\n\tthis.forceContextRestore = function () {\n\n\t\tvar extension = extensions.get( 'WEBGL_lose_context' );\n\t\tif ( extension ) extension.restoreContext();\n\n\t};\n\n\tthis.getPixelRatio = function () {\n\n\t\treturn _pixelRatio;\n\n\t};\n\n\tthis.setPixelRatio = function ( value ) {\n\n\t\tif ( value === undefined ) return;\n\n\t\t_pixelRatio = value;\n\n\t\tthis.setSize( _width, _height, false );\n\n\t};\n\n\tthis.getSize = function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'WebGLRenderer: .getsize() now requires a Vector2 as an argument' );\n\n\t\t\ttarget = new Vector2();\n\n\t\t}\n\n\t\treturn target.set( _width, _height );\n\n\t};\n\n\tthis.setSize = function ( width, height, updateStyle ) {\n\n\t\tif ( xr.isPresenting ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Can\\'t change size while VR device is presenting.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\t_width = width;\n\t\t_height = height;\n\n\t\t_canvas.width = Math.floor( width * _pixelRatio );\n\t\t_canvas.height = Math.floor( height * _pixelRatio );\n\n\t\tif ( updateStyle !== false ) {\n\n\t\t\t_canvas.style.width = width + 'px';\n\t\t\t_canvas.style.height = height + 'px';\n\n\t\t}\n\n\t\tthis.setViewport( 0, 0, width, height );\n\n\t};\n\n\tthis.getDrawingBufferSize = function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument' );\n\n\t\t\ttarget = new Vector2();\n\n\t\t}\n\n\t\treturn target.set( _width * _pixelRatio, _height * _pixelRatio ).floor();\n\n\t};\n\n\tthis.setDrawingBufferSize = function ( width, height, pixelRatio ) {\n\n\t\t_width = width;\n\t\t_height = height;\n\n\t\t_pixelRatio = pixelRatio;\n\n\t\t_canvas.width = Math.floor( width * pixelRatio );\n\t\t_canvas.height = Math.floor( height * pixelRatio );\n\n\t\tthis.setViewport( 0, 0, width, height );\n\n\t};\n\n\tthis.getCurrentViewport = function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument' );\n\n\t\t\ttarget = new Vector4();\n\n\t\t}\n\n\t\treturn target.copy( _currentViewport );\n\n\t};\n\n\tthis.getViewport = function ( target ) {\n\n\t\treturn target.copy( _viewport );\n\n\t};\n\n\tthis.setViewport = function ( x, y, width, height ) {\n\n\t\tif ( x.isVector4 ) {\n\n\t\t\t_viewport.set( x.x, x.y, x.z, x.w );\n\n\t\t} else {\n\n\t\t\t_viewport.set( x, y, width, height );\n\n\t\t}\n\n\t\tstate.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor() );\n\n\t};\n\n\tthis.getScissor = function ( target ) {\n\n\t\treturn target.copy( _scissor );\n\n\t};\n\n\tthis.setScissor = function ( x, y, width, height ) {\n\n\t\tif ( x.isVector4 ) {\n\n\t\t\t_scissor.set( x.x, x.y, x.z, x.w );\n\n\t\t} else {\n\n\t\t\t_scissor.set( x, y, width, height );\n\n\t\t}\n\n\t\tstate.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor() );\n\n\t};\n\n\tthis.getScissorTest = function () {\n\n\t\treturn _scissorTest;\n\n\t};\n\n\tthis.setScissorTest = function ( boolean ) {\n\n\t\tstate.setScissorTest( _scissorTest = boolean );\n\n\t};\n\n\tthis.setOpaqueSort = function ( method ) {\n\n\t\t_opaqueSort = method;\n\n\t};\n\n\tthis.setTransparentSort = function ( method ) {\n\n\t\t_transparentSort = method;\n\n\t};\n\n\t// Clearing\n\n\tthis.getClearColor = function () {\n\n\t\treturn background.getClearColor();\n\n\t};\n\n\tthis.setClearColor = function () {\n\n\t\tbackground.setClearColor.apply( background, arguments );\n\n\t};\n\n\tthis.getClearAlpha = function () {\n\n\t\treturn background.getClearAlpha();\n\n\t};\n\n\tthis.setClearAlpha = function () {\n\n\t\tbackground.setClearAlpha.apply( background, arguments );\n\n\t};\n\n\tthis.clear = function ( color, depth, stencil ) {\n\n\t\tvar bits = 0;\n\n\t\tif ( color === undefined || color ) bits |= _gl.COLOR_BUFFER_BIT;\n\t\tif ( depth === undefined || depth ) bits |= _gl.DEPTH_BUFFER_BIT;\n\t\tif ( stencil === undefined || stencil ) bits |= _gl.STENCIL_BUFFER_BIT;\n\n\t\t_gl.clear( bits );\n\n\t};\n\n\tthis.clearColor = function () {\n\n\t\tthis.clear( true, false, false );\n\n\t};\n\n\tthis.clearDepth = function () {\n\n\t\tthis.clear( false, true, false );\n\n\t};\n\n\tthis.clearStencil = function () {\n\n\t\tthis.clear( false, false, true );\n\n\t};\n\n\t//\n\n\tthis.dispose = function () {\n\n\t\t_canvas.removeEventListener( 'webglcontextlost', onContextLost, false );\n\t\t_canvas.removeEventListener( 'webglcontextrestored', onContextRestore, false );\n\n\t\trenderLists.dispose();\n\t\trenderStates.dispose();\n\t\tproperties.dispose();\n\t\tobjects.dispose();\n\n\t\txr.dispose();\n\n\t\tanimation.stop();\n\n\t};\n\n\t// Events\n\n\tfunction onContextLost( event ) {\n\n\t\tevent.preventDefault();\n\n\t\tconsole.log( 'THREE.WebGLRenderer: Context Lost.' );\n\n\t\t_isContextLost = true;\n\n\t}\n\n\tfunction onContextRestore( /* event */ ) {\n\n\t\tconsole.log( 'THREE.WebGLRenderer: Context Restored.' );\n\n\t\t_isContextLost = false;\n\n\t\tinitGLContext();\n\n\t}\n\n\tfunction onMaterialDispose( event ) {\n\n\t\tvar material = event.target;\n\n\t\tmaterial.removeEventListener( 'dispose', onMaterialDispose );\n\n\t\tdeallocateMaterial( material );\n\n\t}\n\n\t// Buffer deallocation\n\n\tfunction deallocateMaterial( material ) {\n\n\t\treleaseMaterialProgramReference( material );\n\n\t\tproperties.remove( material );\n\n\t}\n\n\n\tfunction releaseMaterialProgramReference( material ) {\n\n\t\tvar programInfo = properties.get( material ).program;\n\n\t\tmaterial.program = undefined;\n\n\t\tif ( programInfo !== undefined ) {\n\n\t\t\tprogramCache.releaseProgram( programInfo );\n\n\t\t}\n\n\t}\n\n\t// Buffer rendering\n\n\tfunction renderObjectImmediate( object, program ) {\n\n\t\tobject.render( function ( object ) {\n\n\t\t\t_this.renderBufferImmediate( object, program );\n\n\t\t} );\n\n\t}\n\n\tthis.renderBufferImmediate = function ( object, program ) {\n\n\t\tstate.initAttributes();\n\n\t\tvar buffers = properties.get( object );\n\n\t\tif ( object.hasPositions && ! buffers.position ) buffers.position = _gl.createBuffer();\n\t\tif ( object.hasNormals && ! buffers.normal ) buffers.normal = _gl.createBuffer();\n\t\tif ( object.hasUvs && ! buffers.uv ) buffers.uv = _gl.createBuffer();\n\t\tif ( object.hasColors && ! buffers.color ) buffers.color = _gl.createBuffer();\n\n\t\tvar programAttributes = program.getAttributes();\n\n\t\tif ( object.hasPositions ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.position );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.positionArray, _gl.DYNAMIC_DRAW );\n\n\t\t\tstate.enableAttribute( programAttributes.position );\n\t\t\t_gl.vertexAttribPointer( programAttributes.position, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasNormals ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.normal );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.normalArray, _gl.DYNAMIC_DRAW );\n\n\t\t\tstate.enableAttribute( programAttributes.normal );\n\t\t\t_gl.vertexAttribPointer( programAttributes.normal, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasUvs ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.uv );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.uvArray, _gl.DYNAMIC_DRAW );\n\n\t\t\tstate.enableAttribute( programAttributes.uv );\n\t\t\t_gl.vertexAttribPointer( programAttributes.uv, 2, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasColors ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.color );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.colorArray, _gl.DYNAMIC_DRAW );\n\n\t\t\tstate.enableAttribute( programAttributes.color );\n\t\t\t_gl.vertexAttribPointer( programAttributes.color, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tstate.disableUnusedAttributes();\n\n\t\t_gl.drawArrays( _gl.TRIANGLES, 0, object.count );\n\n\t\tobject.count = 0;\n\n\t};\n\n\tvar tempScene = new Scene();\n\n\tthis.renderBufferDirect = function ( camera, scene, geometry, material, object, group ) {\n\n\t\tif ( scene === null ) scene = tempScene; // renderBufferDirect second parameter used to be fog (could be null)\n\n\t\tvar frontFaceCW = ( object.isMesh && object.matrixWorld.determinant() < 0 );\n\n\t\tvar program = setProgram( camera, scene, material, object );\n\n\t\tstate.setMaterial( material, frontFaceCW );\n\n\t\tvar updateBuffers = false;\n\n\t\tif ( _currentGeometryProgram.geometry !== geometry.id ||\n\t\t\t_currentGeometryProgram.program !== program.id ||\n\t\t\t_currentGeometryProgram.wireframe !== ( material.wireframe === true ) ) {\n\n\t\t\t_currentGeometryProgram.geometry = geometry.id;\n\t\t\t_currentGeometryProgram.program = program.id;\n\t\t\t_currentGeometryProgram.wireframe = material.wireframe === true;\n\t\t\tupdateBuffers = true;\n\n\t\t}\n\n\t\tif ( material.morphTargets || material.morphNormals ) {\n\n\t\t\tmorphtargets.update( object, geometry, material, program );\n\n\t\t\tupdateBuffers = true;\n\n\t\t}\n\n\t\t//\n\n\t\tvar index = geometry.index;\n\t\tvar position = geometry.attributes.position;\n\n\t\t//\n\n\t\tif ( index === null ) {\n\n\t\t\tif ( position === undefined || position.count === 0 ) return;\n\n\t\t} else if ( index.count === 0 ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t//\n\n\t\tvar rangeFactor = 1;\n\n\t\tif ( material.wireframe === true ) {\n\n\t\t\tindex = geometries.getWireframeAttribute( geometry );\n\t\t\trangeFactor = 2;\n\n\t\t}\n\n\t\tvar attribute;\n\t\tvar renderer = bufferRenderer;\n\n\t\tif ( index !== null ) {\n\n\t\t\tattribute = attributes.get( index );\n\n\t\t\trenderer = indexedBufferRenderer;\n\t\t\trenderer.setIndex( attribute );\n\n\t\t}\n\n\t\tif ( updateBuffers ) {\n\n\t\t\tsetupVertexAttributes( object, geometry, material, program );\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, attribute.buffer );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tvar dataCount = ( index !== null ) ? index.count : position.count;\n\n\t\tvar rangeStart = geometry.drawRange.start * rangeFactor;\n\t\tvar rangeCount = geometry.drawRange.count * rangeFactor;\n\n\t\tvar groupStart = group !== null ? group.start * rangeFactor : 0;\n\t\tvar groupCount = group !== null ? group.count * rangeFactor : Infinity;\n\n\t\tvar drawStart = Math.max( rangeStart, groupStart );\n\t\tvar drawEnd = Math.min( dataCount, rangeStart + rangeCount, groupStart + groupCount ) - 1;\n\n\t\tvar drawCount = Math.max( 0, drawEnd - drawStart + 1 );\n\n\t\tif ( drawCount === 0 ) return;\n\n\t\t//\n\n\t\tif ( object.isMesh ) {\n\n\t\t\tif ( material.wireframe === true ) {\n\n\t\t\t\tstate.setLineWidth( material.wireframeLinewidth * getTargetPixelRatio() );\n\t\t\t\trenderer.setMode( _gl.LINES );\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setMode( _gl.TRIANGLES );\n\n\t\t\t}\n\n\t\t} else if ( object.isLine ) {\n\n\t\t\tvar lineWidth = material.linewidth;\n\n\t\t\tif ( lineWidth === undefined ) lineWidth = 1; // Not using Line*Material\n\n\t\t\tstate.setLineWidth( lineWidth * getTargetPixelRatio() );\n\n\t\t\tif ( object.isLineSegments ) {\n\n\t\t\t\trenderer.setMode( _gl.LINES );\n\n\t\t\t} else if ( object.isLineLoop ) {\n\n\t\t\t\trenderer.setMode( _gl.LINE_LOOP );\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setMode( _gl.LINE_STRIP );\n\n\t\t\t}\n\n\t\t} else if ( object.isPoints ) {\n\n\t\t\trenderer.setMode( _gl.POINTS );\n\n\t\t} else if ( object.isSprite ) {\n\n\t\t\trenderer.setMode( _gl.TRIANGLES );\n\n\t\t}\n\n\t\tif ( object.isInstancedMesh ) {\n\n\t\t\trenderer.renderInstances( geometry, drawStart, drawCount, object.count );\n\n\t\t} else if ( geometry.isInstancedBufferGeometry ) {\n\n\t\t\trenderer.renderInstances( geometry, drawStart, drawCount, geometry.maxInstancedCount );\n\n\t\t} else {\n\n\t\t\trenderer.render( drawStart, drawCount );\n\n\t\t}\n\n\t};\n\n\tfunction setupVertexAttributes( object, geometry, material, program ) {\n\n\t\tif ( capabilities.isWebGL2 === false && ( object.isInstancedMesh || geometry.isInstancedBufferGeometry ) ) {\n\n\t\t\tif ( extensions.get( 'ANGLE_instanced_arrays' ) === null ) return;\n\n\t\t}\n\n\t\tstate.initAttributes();\n\n\t\tvar geometryAttributes = geometry.attributes;\n\n\t\tvar programAttributes = program.getAttributes();\n\n\t\tvar materialDefaultAttributeValues = material.defaultAttributeValues;\n\n\t\tfor ( var name in programAttributes ) {\n\n\t\t\tvar programAttribute = programAttributes[ name ];\n\n\t\t\tif ( programAttribute >= 0 ) {\n\n\t\t\t\tvar geometryAttribute = geometryAttributes[ name ];\n\n\t\t\t\tif ( geometryAttribute !== undefined ) {\n\n\t\t\t\t\tvar normalized = geometryAttribute.normalized;\n\t\t\t\t\tvar size = geometryAttribute.itemSize;\n\n\t\t\t\t\tvar attribute = attributes.get( geometryAttribute );\n\n\t\t\t\t\t// TODO Attribute may not be available on context restore\n\n\t\t\t\t\tif ( attribute === undefined ) continue;\n\n\t\t\t\t\tvar buffer = attribute.buffer;\n\t\t\t\t\tvar type = attribute.type;\n\t\t\t\t\tvar bytesPerElement = attribute.bytesPerElement;\n\n\t\t\t\t\tif ( geometryAttribute.isInterleavedBufferAttribute ) {\n\n\t\t\t\t\t\tvar data = geometryAttribute.data;\n\t\t\t\t\t\tvar stride = data.stride;\n\t\t\t\t\t\tvar offset = geometryAttribute.offset;\n\n\t\t\t\t\t\tif ( data && data.isInstancedInterleavedBuffer ) {\n\n\t\t\t\t\t\t\tstate.enableAttributeAndDivisor( programAttribute, data.meshPerAttribute );\n\n\t\t\t\t\t\t\tif ( geometry.maxInstancedCount === undefined ) {\n\n\t\t\t\t\t\t\t\tgeometry.maxInstancedCount = data.meshPerAttribute * data.count;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.enableAttribute( programAttribute );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffer );\n\t\t\t\t\t\t_gl.vertexAttribPointer( programAttribute, size, type, normalized, stride * bytesPerElement, offset * bytesPerElement );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( geometryAttribute.isInstancedBufferAttribute ) {\n\n\t\t\t\t\t\t\tstate.enableAttributeAndDivisor( programAttribute, geometryAttribute.meshPerAttribute );\n\n\t\t\t\t\t\t\tif ( geometry.maxInstancedCount === undefined ) {\n\n\t\t\t\t\t\t\t\tgeometry.maxInstancedCount = geometryAttribute.meshPerAttribute * geometryAttribute.count;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.enableAttribute( programAttribute );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffer );\n\t\t\t\t\t\t_gl.vertexAttribPointer( programAttribute, size, type, normalized, 0, 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( name === 'instanceMatrix' ) {\n\n\t\t\t\t\tvar attribute = attributes.get( object.instanceMatrix );\n\n\t\t\t\t\t// TODO Attribute may not be available on context restore\n\n\t\t\t\t\tif ( attribute === undefined ) continue;\n\n\t\t\t\t\tvar buffer = attribute.buffer;\n\t\t\t\t\tvar type = attribute.type;\n\n\t\t\t\t\tstate.enableAttributeAndDivisor( programAttribute + 0, 1 );\n\t\t\t\t\tstate.enableAttributeAndDivisor( programAttribute + 1, 1 );\n\t\t\t\t\tstate.enableAttributeAndDivisor( programAttribute + 2, 1 );\n\t\t\t\t\tstate.enableAttributeAndDivisor( programAttribute + 3, 1 );\n\n\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffer );\n\n\t\t\t\t\t_gl.vertexAttribPointer( programAttribute + 0, 4, type, false, 64, 0 );\n\t\t\t\t\t_gl.vertexAttribPointer( programAttribute + 1, 4, type, false, 64, 16 );\n\t\t\t\t\t_gl.vertexAttribPointer( programAttribute + 2, 4, type, false, 64, 32 );\n\t\t\t\t\t_gl.vertexAttribPointer( programAttribute + 3, 4, type, false, 64, 48 );\n\n\t\t\t\t} else if ( materialDefaultAttributeValues !== undefined ) {\n\n\t\t\t\t\tvar value = materialDefaultAttributeValues[ name ];\n\n\t\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\t\tswitch ( value.length ) {\n\n\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\t_gl.vertexAttrib2fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\t\t_gl.vertexAttrib3fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 4:\n\t\t\t\t\t\t\t\t_gl.vertexAttrib4fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t_gl.vertexAttrib1fv( programAttribute, value );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.disableUnusedAttributes();\n\n\t}\n\n\t// Compile\n\n\tthis.compile = function ( scene, camera ) {\n\n\t\tcurrentRenderState = renderStates.get( scene, camera );\n\t\tcurrentRenderState.init();\n\n\t\tscene.traverse( function ( object ) {\n\n\t\t\tif ( object.isLight ) {\n\n\t\t\t\tcurrentRenderState.pushLight( object );\n\n\t\t\t\tif ( object.castShadow ) {\n\n\t\t\t\t\tcurrentRenderState.pushShadow( object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t\tcurrentRenderState.setupLights( camera );\n\n\t\tscene.traverse( function ( object ) {\n\n\t\t\tif ( object.material ) {\n\n\t\t\t\tif ( Array.isArray( object.material ) ) {\n\n\t\t\t\t\tfor ( var i = 0; i < object.material.length; i ++ ) {\n\n\t\t\t\t\t\tinitMaterial( object.material[ i ], scene, object );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tinitMaterial( object.material, scene, object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t};\n\n\t// Animation Loop\n\n\tvar onAnimationFrameCallback = null;\n\n\tfunction onAnimationFrame( time ) {\n\n\t\tif ( xr.isPresenting ) return;\n\t\tif ( onAnimationFrameCallback ) onAnimationFrameCallback( time );\n\n\t}\n\n\tvar animation = new WebGLAnimation();\n\tanimation.setAnimationLoop( onAnimationFrame );\n\n\tif ( typeof window !== 'undefined' ) animation.setContext( window );\n\n\tthis.setAnimationLoop = function ( callback ) {\n\n\t\tonAnimationFrameCallback = callback;\n\t\txr.setAnimationLoop( callback );\n\n\t\tanimation.start();\n\n\t};\n\n\t// Rendering\n\n\tthis.render = function ( scene, camera ) {\n\n\t\tvar renderTarget, forceClear;\n\n\t\tif ( arguments[ 2 ] !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead.' );\n\t\t\trenderTarget = arguments[ 2 ];\n\n\t\t}\n\n\t\tif ( arguments[ 3 ] !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead.' );\n\t\t\tforceClear = arguments[ 3 ];\n\n\t\t}\n\n\t\tif ( ! ( camera && camera.isCamera ) ) {\n\n\t\t\tconsole.error( 'THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( _isContextLost ) return;\n\n\t\t// reset caching for this frame\n\n\t\t_currentGeometryProgram.geometry = null;\n\t\t_currentGeometryProgram.program = null;\n\t\t_currentGeometryProgram.wireframe = false;\n\t\t_currentMaterialId = - 1;\n\t\t_currentCamera = null;\n\n\t\t// update scene graph\n\n\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\n\n\t\t// update camera matrices and frustum\n\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t\tif ( xr.enabled && xr.isPresenting ) {\n\n\t\t\tcamera = xr.getCamera( camera );\n\n\t\t}\n\n\t\t//\n\n\t\tcurrentRenderState = renderStates.get( scene, camera );\n\t\tcurrentRenderState.init();\n\n\t\tscene.onBeforeRender( _this, scene, camera, renderTarget || _currentRenderTarget );\n\n\t\t_projScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\n\t\t_frustum.setFromMatrix( _projScreenMatrix );\n\n\t\t_localClippingEnabled = this.localClippingEnabled;\n\t\t_clippingEnabled = _clipping.init( this.clippingPlanes, _localClippingEnabled, camera );\n\n\t\tcurrentRenderList = renderLists.get( scene, camera );\n\t\tcurrentRenderList.init();\n\n\t\tprojectObject( scene, camera, 0, _this.sortObjects );\n\n\t\tif ( _this.sortObjects === true ) {\n\n\t\t\tcurrentRenderList.sort( _opaqueSort, _transparentSort );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( _clippingEnabled ) _clipping.beginShadows();\n\n\t\tvar shadowsArray = currentRenderState.state.shadowsArray;\n\n\t\tshadowMap.render( shadowsArray, scene, camera );\n\n\t\tcurrentRenderState.setupLights( camera );\n\n\t\tif ( _clippingEnabled ) _clipping.endShadows();\n\n\t\t//\n\n\t\tif ( this.info.autoReset ) this.info.reset();\n\n\t\tif ( renderTarget !== undefined ) {\n\n\t\t\tthis.setRenderTarget( renderTarget );\n\n\t\t}\n\n\t\tif ( xr.enabled && multiview.isAvailable() ) {\n\n\t\t\tmultiview.attachCamera( camera );\n\n\t\t}\n\n\t\t//\n\n\t\tbackground.render( currentRenderList, scene, camera, forceClear );\n\n\t\t// render scene\n\n\t\tvar opaqueObjects = currentRenderList.opaque;\n\t\tvar transparentObjects = currentRenderList.transparent;\n\n\t\tif ( scene.overrideMaterial ) {\n\n\t\t\tvar overrideMaterial = scene.overrideMaterial;\n\n\t\t\tif ( opaqueObjects.length ) renderObjects( opaqueObjects, scene, camera, overrideMaterial );\n\t\t\tif ( transparentObjects.length ) renderObjects( transparentObjects, scene, camera, overrideMaterial );\n\n\t\t} else {\n\n\t\t\t// opaque pass (front-to-back order)\n\n\t\t\tif ( opaqueObjects.length ) renderObjects( opaqueObjects, scene, camera );\n\n\t\t\t// transparent pass (back-to-front order)\n\n\t\t\tif ( transparentObjects.length ) renderObjects( transparentObjects, scene, camera );\n\n\t\t}\n\n\t\t//\n\n\t\tscene.onAfterRender( _this, scene, camera );\n\n\t\t//\n\n\t\tif ( _currentRenderTarget !== null ) {\n\n\t\t\t// Generate mipmap if we're using any kind of mipmap filtering\n\n\t\t\ttextures.updateRenderTargetMipmap( _currentRenderTarget );\n\n\t\t\t// resolve multisample renderbuffers to a single-sample texture if necessary\n\n\t\t\ttextures.updateMultisampleRenderTarget( _currentRenderTarget );\n\n\t\t}\n\n\t\t// Ensure depth buffer writing is enabled so it can be cleared on next render\n\n\t\tstate.buffers.depth.setTest( true );\n\t\tstate.buffers.depth.setMask( true );\n\t\tstate.buffers.color.setMask( true );\n\n\t\tstate.setPolygonOffset( false );\n\n\t\tif ( xr.enabled ) {\n\n\t\t\tif ( multiview.isAvailable() ) {\n\n\t\t\t\tmultiview.detachCamera( camera );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// _gl.finish();\n\n\t\tcurrentRenderList = null;\n\t\tcurrentRenderState = null;\n\n\t};\n\n\tfunction projectObject( object, camera, groupOrder, sortObjects ) {\n\n\t\tif ( object.visible === false ) return;\n\n\t\tvar visible = object.layers.test( camera.layers );\n\n\t\tif ( visible ) {\n\n\t\t\tif ( object.isGroup ) {\n\n\t\t\t\tgroupOrder = object.renderOrder;\n\n\t\t\t} else if ( object.isLOD ) {\n\n\t\t\t\tif ( object.autoUpdate === true ) object.update( camera );\n\n\t\t\t} else if ( object.isLight ) {\n\n\t\t\t\tcurrentRenderState.pushLight( object );\n\n\t\t\t\tif ( object.castShadow ) {\n\n\t\t\t\t\tcurrentRenderState.pushShadow( object );\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.isSprite ) {\n\n\t\t\t\tif ( ! object.frustumCulled || _frustum.intersectsSprite( object ) ) {\n\n\t\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar geometry = objects.update( object );\n\t\t\t\t\tvar material = object.material;\n\n\t\t\t\t\tif ( material.visible ) {\n\n\t\t\t\t\t\tcurrentRenderList.push( object, geometry, material, groupOrder, _vector3.z, null );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.isImmediateRenderObject ) {\n\n\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t}\n\n\t\t\t\tcurrentRenderList.push( object, null, object.material, groupOrder, _vector3.z, null );\n\n\t\t\t} else if ( object.isMesh || object.isLine || object.isPoints ) {\n\n\t\t\t\tif ( object.isSkinnedMesh ) {\n\n\t\t\t\t\t// update skeleton only once in a frame\n\n\t\t\t\t\tif ( object.skeleton.frame !== info.render.frame ) {\n\n\t\t\t\t\t\tobject.skeleton.update();\n\t\t\t\t\t\tobject.skeleton.frame = info.render.frame;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) {\n\n\t\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar geometry = objects.update( object );\n\t\t\t\t\tvar material = object.material;\n\n\t\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\t\tvar groups = geometry.groups;\n\n\t\t\t\t\t\tfor ( var i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\t\t\t\t\tvar group = groups[ i ];\n\t\t\t\t\t\t\tvar groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\t\tif ( groupMaterial && groupMaterial.visible ) {\n\n\t\t\t\t\t\t\t\tcurrentRenderList.push( object, geometry, groupMaterial, groupOrder, _vector3.z, group );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( material.visible ) {\n\n\t\t\t\t\t\tcurrentRenderList.push( object, geometry, material, groupOrder, _vector3.z, null );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar children = object.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tprojectObject( children[ i ], camera, groupOrder, sortObjects );\n\n\t\t}\n\n\t}\n\n\tfunction renderObjects( renderList, scene, camera, overrideMaterial ) {\n\n\t\tfor ( var i = 0, l = renderList.length; i < l; i ++ ) {\n\n\t\t\tvar renderItem = renderList[ i ];\n\n\t\t\tvar object = renderItem.object;\n\t\t\tvar geometry = renderItem.geometry;\n\t\t\tvar material = overrideMaterial === undefined ? renderItem.material : overrideMaterial;\n\t\t\tvar group = renderItem.group;\n\n\t\t\tif ( camera.isArrayCamera ) {\n\n\t\t\t\t_currentArrayCamera = camera;\n\n\t\t\t\tif ( xr.enabled && multiview.isAvailable() ) {\n\n\t\t\t\t\trenderObject( object, scene, camera, geometry, material, group );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tvar cameras = camera.cameras;\n\n\t\t\t\t\tfor ( var j = 0, jl = cameras.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\tvar camera2 = cameras[ j ];\n\n\t\t\t\t\t\tif ( object.layers.test( camera2.layers ) ) {\n\n\t\t\t\t\t\t\tstate.viewport( _currentViewport.copy( camera2.viewport ) );\n\n\t\t\t\t\t\t\tcurrentRenderState.setupLights( camera2 );\n\n\t\t\t\t\t\t\trenderObject( object, scene, camera2, geometry, material, group );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t_currentArrayCamera = null;\n\n\t\t\t\trenderObject( object, scene, camera, geometry, material, group );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction renderObject( object, scene, camera, geometry, material, group ) {\n\n\t\tobject.onBeforeRender( _this, scene, camera, geometry, material, group );\n\t\tcurrentRenderState = renderStates.get( scene, _currentArrayCamera || camera );\n\n\t\tobject.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\n\t\tobject.normalMatrix.getNormalMatrix( object.modelViewMatrix );\n\n\t\tif ( object.isImmediateRenderObject ) {\n\n\t\t\tvar program = setProgram( camera, scene, material, object );\n\n\t\t\tstate.setMaterial( material );\n\n\t\t\t_currentGeometryProgram.geometry = null;\n\t\t\t_currentGeometryProgram.program = null;\n\t\t\t_currentGeometryProgram.wireframe = false;\n\n\t\t\trenderObjectImmediate( object, program );\n\n\t\t} else {\n\n\t\t\t_this.renderBufferDirect( camera, scene, geometry, material, object, group );\n\n\t\t}\n\n\t\tobject.onAfterRender( _this, scene, camera, geometry, material, group );\n\t\tcurrentRenderState = renderStates.get( scene, _currentArrayCamera || camera );\n\n\t}\n\n\tfunction initMaterial( material, scene, object ) {\n\n\t\tvar materialProperties = properties.get( material );\n\n\t\tvar lights = currentRenderState.state.lights;\n\t\tvar shadowsArray = currentRenderState.state.shadowsArray;\n\n\t\tvar lightsStateVersion = lights.state.version;\n\n\t\tvar parameters = programCache.getParameters(\n\t\t\tmaterial, lights.state, shadowsArray, scene, _clipping.numPlanes, _clipping.numIntersection, object );\n\n\t\tvar programCacheKey = programCache.getProgramCacheKey( material, parameters );\n\n\t\tvar program = materialProperties.program;\n\t\tvar programChange = true;\n\n\t\tif ( program === undefined ) {\n\n\t\t\t// new material\n\t\t\tmaterial.addEventListener( 'dispose', onMaterialDispose );\n\n\t\t} else if ( program.cacheKey !== programCacheKey ) {\n\n\t\t\t// changed glsl or parameters\n\t\t\treleaseMaterialProgramReference( material );\n\n\t\t} else if ( materialProperties.lightsStateVersion !== lightsStateVersion ) {\n\n\t\t\tmaterialProperties.lightsStateVersion = lightsStateVersion;\n\n\t\t\tprogramChange = false;\n\n\t\t} else if ( parameters.shaderID !== undefined ) {\n\n\t\t\t// same glsl and uniform list\n\t\t\treturn;\n\n\t\t} else {\n\n\t\t\t// only rebuild uniform list\n\t\t\tprogramChange = false;\n\n\t\t}\n\n\t\tif ( programChange ) {\n\n\t\t\tif ( parameters.shaderID ) {\n\n\t\t\t\tvar shader = ShaderLib[ parameters.shaderID ];\n\n\t\t\t\tmaterialProperties.shader = {\n\t\t\t\t\tname: material.type,\n\t\t\t\t\tuniforms: cloneUniforms( shader.uniforms ),\n\t\t\t\t\tvertexShader: shader.vertexShader,\n\t\t\t\t\tfragmentShader: shader.fragmentShader\n\t\t\t\t};\n\n\t\t\t} else {\n\n\t\t\t\tmaterialProperties.shader = {\n\t\t\t\t\tname: material.type,\n\t\t\t\t\tuniforms: material.uniforms,\n\t\t\t\t\tvertexShader: material.vertexShader,\n\t\t\t\t\tfragmentShader: material.fragmentShader\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\tmaterial.onBeforeCompile( materialProperties.shader, _this );\n\n\t\t\t// Computing cache key again as onBeforeCompile may have changed the shaders\n\t\t\tprogramCacheKey = programCache.getProgramCacheKey( material, parameters );\n\n\t\t\tprogram = programCache.acquireProgram( material, materialProperties.shader, parameters, programCacheKey );\n\n\t\t\tmaterialProperties.program = program;\n\t\t\tmaterialProperties.environment = material.isMeshStandardMaterial ? scene.environment : null;\n\t\t\tmaterialProperties.outputEncoding = _this.outputEncoding;\n\t\t\tmaterial.program = program;\n\n\t\t}\n\n\t\tvar programAttributes = program.getAttributes();\n\n\t\tif ( material.morphTargets ) {\n\n\t\t\tmaterial.numSupportedMorphTargets = 0;\n\n\t\t\tfor ( var i = 0; i < _this.maxMorphTargets; i ++ ) {\n\n\t\t\t\tif ( programAttributes[ 'morphTarget' + i ] >= 0 ) {\n\n\t\t\t\t\tmaterial.numSupportedMorphTargets ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.morphNormals ) {\n\n\t\t\tmaterial.numSupportedMorphNormals = 0;\n\n\t\t\tfor ( var i = 0; i < _this.maxMorphNormals; i ++ ) {\n\n\t\t\t\tif ( programAttributes[ 'morphNormal' + i ] >= 0 ) {\n\n\t\t\t\t\tmaterial.numSupportedMorphNormals ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar uniforms = materialProperties.shader.uniforms;\n\n\t\tif ( ! material.isShaderMaterial &&\n\t\t\t! material.isRawShaderMaterial ||\n\t\t\tmaterial.clipping === true ) {\n\n\t\t\tmaterialProperties.numClippingPlanes = _clipping.numPlanes;\n\t\t\tmaterialProperties.numIntersection = _clipping.numIntersection;\n\t\t\tuniforms.clippingPlanes = _clipping.uniform;\n\n\t\t}\n\n\t\tmaterialProperties.fog = scene.fog;\n\n\t\t// store the light setup it was created for\n\n\t\tmaterialProperties.needsLights = materialNeedsLights( material );\n\t\tmaterialProperties.lightsStateVersion = lightsStateVersion;\n\n\t\tif ( materialProperties.needsLights ) {\n\n\t\t\t// wire up the material to this renderer's lighting state\n\n\t\t\tuniforms.ambientLightColor.value = lights.state.ambient;\n\t\t\tuniforms.lightProbe.value = lights.state.probe;\n\t\t\tuniforms.directionalLights.value = lights.state.directional;\n\t\t\tuniforms.spotLights.value = lights.state.spot;\n\t\t\tuniforms.rectAreaLights.value = lights.state.rectArea;\n\t\t\tuniforms.pointLights.value = lights.state.point;\n\t\t\tuniforms.hemisphereLights.value = lights.state.hemi;\n\n\t\t\tuniforms.directionalShadowMap.value = lights.state.directionalShadowMap;\n\t\t\tuniforms.directionalShadowMatrix.value = lights.state.directionalShadowMatrix;\n\t\t\tuniforms.spotShadowMap.value = lights.state.spotShadowMap;\n\t\t\tuniforms.spotShadowMatrix.value = lights.state.spotShadowMatrix;\n\t\t\tuniforms.pointShadowMap.value = lights.state.pointShadowMap;\n\t\t\tuniforms.pointShadowMatrix.value = lights.state.pointShadowMatrix;\n\t\t\t// TODO (abelnation): add area lights shadow info to uniforms\n\n\t\t}\n\n\t\tvar progUniforms = materialProperties.program.getUniforms(),\n\t\t\tuniformsList =\n\t\t\t\tWebGLUniforms.seqWithValue( progUniforms.seq, uniforms );\n\n\t\tmaterialProperties.uniformsList = uniformsList;\n\n\t}\n\n\tfunction setProgram( camera, scene, material, object ) {\n\n\t\ttextures.resetTextureUnits();\n\n\t\tvar fog = scene.fog;\n\t\tvar environment = material.isMeshStandardMaterial ? scene.environment : null;\n\n\t\tvar materialProperties = properties.get( material );\n\t\tvar lights = currentRenderState.state.lights;\n\n\t\tif ( _clippingEnabled ) {\n\n\t\t\tif ( _localClippingEnabled || camera !== _currentCamera ) {\n\n\t\t\t\tvar useCache =\n\t\t\t\t\tcamera === _currentCamera &&\n\t\t\t\t\tmaterial.id === _currentMaterialId;\n\n\t\t\t\t// we might want to call this function with some ClippingGroup\n\t\t\t\t// object instead of the material, once it becomes feasible\n\t\t\t\t// (#8465, #8379)\n\t\t\t\t_clipping.setState(\n\t\t\t\t\tmaterial.clippingPlanes, material.clipIntersection, material.clipShadows,\n\t\t\t\t\tcamera, materialProperties, useCache );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.version === materialProperties.__version ) {\n\n\t\t\tif ( materialProperties.program === undefined ) {\n\n\t\t\t\tmaterial.needsUpdate = true;\n\n\t\t\t} else if ( material.fog && materialProperties.fog !== fog ) {\n\n\t\t\t\tmaterial.needsUpdate = true;\n\n\t\t\t} else if ( materialProperties.environment !== environment ) {\n\n\t\t\t\tmaterial.needsUpdate = true;\n\n\t\t\t} else if ( materialProperties.needsLights && ( materialProperties.lightsStateVersion !== lights.state.version ) ) {\n\n\t\t\t\tmaterial.needsUpdate = true;\n\n\t\t\t} else if ( materialProperties.numClippingPlanes !== undefined &&\n\t\t\t\t( materialProperties.numClippingPlanes !== _clipping.numPlanes ||\n\t\t\t\tmaterialProperties.numIntersection !== _clipping.numIntersection ) ) {\n\n\t\t\t\tmaterial.needsUpdate = true;\n\n\t\t\t} else if ( materialProperties.outputEncoding !== _this.outputEncoding ) {\n\n\t\t\t\tmaterial.needsUpdate = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.version !== materialProperties.__version ) {\n\n\t\t\tinitMaterial( material, scene, object );\n\t\t\tmaterialProperties.__version = material.version;\n\n\t\t}\n\n\t\tvar refreshProgram = false;\n\t\tvar refreshMaterial = false;\n\t\tvar refreshLights = false;\n\n\t\tvar program = materialProperties.program,\n\t\t\tp_uniforms = program.getUniforms(),\n\t\t\tm_uniforms = materialProperties.shader.uniforms;\n\n\t\tif ( state.useProgram( program.program ) ) {\n\n\t\t\trefreshProgram = true;\n\t\t\trefreshMaterial = true;\n\t\t\trefreshLights = true;\n\n\t\t}\n\n\t\tif ( material.id !== _currentMaterialId ) {\n\n\t\t\t_currentMaterialId = material.id;\n\n\t\t\trefreshMaterial = true;\n\n\t\t}\n\n\t\tif ( refreshProgram || _currentCamera !== camera ) {\n\n\t\t\tif ( program.numMultiviewViews > 0 ) {\n\n\t\t\t\tmultiview.updateCameraProjectionMatricesUniform( camera, p_uniforms );\n\n\t\t\t} else {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'projectionMatrix', camera.projectionMatrix );\n\n\t\t\t}\n\n\t\t\tif ( capabilities.logarithmicDepthBuffer ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'logDepthBufFC',\n\t\t\t\t\t2.0 / ( Math.log( camera.far + 1.0 ) / Math.LN2 ) );\n\n\t\t\t}\n\n\t\t\tif ( _currentCamera !== camera ) {\n\n\t\t\t\t_currentCamera = camera;\n\n\t\t\t\t// lighting uniforms depend on the camera so enforce an update\n\t\t\t\t// now, in case this material supports lights - or later, when\n\t\t\t\t// the next material that does gets activated:\n\n\t\t\t\trefreshMaterial = true;\t\t// set to true on material change\n\t\t\t\trefreshLights = true;\t\t// remains set until update done\n\n\t\t\t}\n\n\t\t\t// load material specific uniforms\n\t\t\t// (shader material also gets them for the sake of genericity)\n\n\t\t\tif ( material.isShaderMaterial ||\n\t\t\t\tmaterial.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshToonMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.envMap ) {\n\n\t\t\t\tvar uCamPos = p_uniforms.map.cameraPosition;\n\n\t\t\t\tif ( uCamPos !== undefined ) {\n\n\t\t\t\t\tuCamPos.setValue( _gl,\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( camera.matrixWorld ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( material.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshToonMaterial ||\n\t\t\t\tmaterial.isMeshLambertMaterial ||\n\t\t\t\tmaterial.isMeshBasicMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.isShaderMaterial ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'isOrthographic', camera.isOrthographicCamera === true );\n\n\t\t\t}\n\n\t\t\tif ( material.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshToonMaterial ||\n\t\t\t\tmaterial.isMeshLambertMaterial ||\n\t\t\t\tmaterial.isMeshBasicMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.isShaderMaterial ||\n\t\t\t\tmaterial.skinning ) {\n\n\t\t\t\tif ( program.numMultiviewViews > 0 ) {\n\n\t\t\t\t\tmultiview.updateCameraViewMatricesUniform( camera, p_uniforms );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tp_uniforms.setValue( _gl, 'viewMatrix', camera.matrixWorldInverse );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// skinning uniforms must be set even if material didn't change\n\t\t// auto-setting of texture unit for bone texture must go before other textures\n\t\t// not sure why, but otherwise weird things happen\n\n\t\tif ( material.skinning ) {\n\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrix' );\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrixInverse' );\n\n\t\t\tvar skeleton = object.skeleton;\n\n\t\t\tif ( skeleton ) {\n\n\t\t\t\tvar bones = skeleton.bones;\n\n\t\t\t\tif ( capabilities.floatVertexTextures ) {\n\n\t\t\t\t\tif ( skeleton.boneTexture === undefined ) {\n\n\t\t\t\t\t\t// layout (1 matrix = 4 pixels)\n\t\t\t\t\t\t//      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\n\t\t\t\t\t\t//  with  8x8  pixel texture max   16 bones * 4 pixels =  (8 * 8)\n\t\t\t\t\t\t//       16x16 pixel texture max   64 bones * 4 pixels = (16 * 16)\n\t\t\t\t\t\t//       32x32 pixel texture max  256 bones * 4 pixels = (32 * 32)\n\t\t\t\t\t\t//       64x64 pixel texture max 1024 bones * 4 pixels = (64 * 64)\n\n\n\t\t\t\t\t\tvar size = Math.sqrt( bones.length * 4 ); // 4 pixels needed for 1 matrix\n\t\t\t\t\t\tsize = _Math.ceilPowerOfTwo( size );\n\t\t\t\t\t\tsize = Math.max( size, 4 );\n\n\t\t\t\t\t\tvar boneMatrices = new Float32Array( size * size * 4 ); // 4 floats per RGBA pixel\n\t\t\t\t\t\tboneMatrices.set( skeleton.boneMatrices ); // copy current values\n\n\t\t\t\t\t\tvar boneTexture = new DataTexture( boneMatrices, size, size, RGBAFormat, FloatType );\n\n\t\t\t\t\t\tskeleton.boneMatrices = boneMatrices;\n\t\t\t\t\t\tskeleton.boneTexture = boneTexture;\n\t\t\t\t\t\tskeleton.boneTextureSize = size;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tp_uniforms.setValue( _gl, 'boneTexture', skeleton.boneTexture, textures );\n\t\t\t\t\tp_uniforms.setValue( _gl, 'boneTextureSize', skeleton.boneTextureSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tp_uniforms.setOptional( _gl, skeleton, 'boneMatrices' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( refreshMaterial || materialProperties.receiveShadow !== object.receiveShadow ) {\n\n\t\t\tmaterialProperties.receiveShadow = object.receiveShadow;\n\t\t\tp_uniforms.setValue( _gl, 'receiveShadow', object.receiveShadow );\n\n\t\t}\n\n\t\tif ( refreshMaterial ) {\n\n\t\t\tp_uniforms.setValue( _gl, 'toneMappingExposure', _this.toneMappingExposure );\n\t\t\tp_uniforms.setValue( _gl, 'toneMappingWhitePoint', _this.toneMappingWhitePoint );\n\n\t\t\tif ( materialProperties.needsLights ) {\n\n\t\t\t\t// the current material requires lighting info\n\n\t\t\t\t// note: all lighting uniforms are always set correctly\n\t\t\t\t// they simply reference the renderer's state for their\n\t\t\t\t// values\n\t\t\t\t//\n\t\t\t\t// use the current material's .needsUpdate flags to set\n\t\t\t\t// the GL state when required\n\n\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, refreshLights );\n\n\t\t\t}\n\n\t\t\t// refresh uniforms common to several materials\n\n\t\t\tif ( fog && material.fog ) {\n\n\t\t\t\trefreshUniformsFog( m_uniforms, fog );\n\n\t\t\t}\n\n\t\t\tif ( material.isMeshBasicMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\n\t\t\t} else if ( material.isMeshLambertMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\t\t\t\trefreshUniformsLambert( m_uniforms, material );\n\n\t\t\t} else if ( material.isMeshToonMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\t\t\t\trefreshUniformsToon( m_uniforms, material );\n\n\t\t\t} else if ( material.isMeshPhongMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\t\t\t\trefreshUniformsPhong( m_uniforms, material );\n\n\t\t\t} else if ( material.isMeshStandardMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material, environment );\n\n\t\t\t\tif ( material.isMeshPhysicalMaterial ) {\n\n\t\t\t\t\trefreshUniformsPhysical( m_uniforms, material, environment );\n\n\t\t\t\t} else {\n\n\t\t\t\t\trefreshUniformsStandard( m_uniforms, material, environment );\n\n\t\t\t\t}\n\n\t\t\t} else if ( material.isMeshMatcapMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\t\t\t\trefreshUniformsMatcap( m_uniforms, material );\n\n\t\t\t} else if ( material.isMeshDepthMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\t\t\t\trefreshUniformsDepth( m_uniforms, material );\n\n\t\t\t} else if ( material.isMeshDistanceMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\t\t\t\trefreshUniformsDistance( m_uniforms, material );\n\n\t\t\t} else if ( material.isMeshNormalMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\t\t\t\trefreshUniformsNormal( m_uniforms, material );\n\n\t\t\t} else if ( material.isLineBasicMaterial ) {\n\n\t\t\t\trefreshUniformsLine( m_uniforms, material );\n\n\t\t\t\tif ( material.isLineDashedMaterial ) {\n\n\t\t\t\t\trefreshUniformsDash( m_uniforms, material );\n\n\t\t\t\t}\n\n\t\t\t} else if ( material.isPointsMaterial ) {\n\n\t\t\t\trefreshUniformsPoints( m_uniforms, material );\n\n\t\t\t} else if ( material.isSpriteMaterial ) {\n\n\t\t\t\trefreshUniformsSprites( m_uniforms, material );\n\n\t\t\t} else if ( material.isShadowMaterial ) {\n\n\t\t\t\tm_uniforms.color.value.copy( material.color );\n\t\t\t\tm_uniforms.opacity.value = material.opacity;\n\n\t\t\t}\n\n\t\t\t// RectAreaLight Texture\n\t\t\t// TODO (mrdoob): Find a nicer implementation\n\n\t\t\tif ( m_uniforms.ltc_1 !== undefined ) m_uniforms.ltc_1.value = UniformsLib.LTC_1;\n\t\t\tif ( m_uniforms.ltc_2 !== undefined ) m_uniforms.ltc_2.value = UniformsLib.LTC_2;\n\n\t\t\tWebGLUniforms.upload( _gl, materialProperties.uniformsList, m_uniforms, textures );\n\n\t\t\tif ( material.isShaderMaterial ) {\n\n\t\t\t\tmaterial.uniformsNeedUpdate = false; // #15581\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.isShaderMaterial && material.uniformsNeedUpdate === true ) {\n\n\t\t\tWebGLUniforms.upload( _gl, materialProperties.uniformsList, m_uniforms, textures );\n\t\t\tmaterial.uniformsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( material.isSpriteMaterial ) {\n\n\t\t\tp_uniforms.setValue( _gl, 'center', object.center );\n\n\t\t}\n\n\t\t// common matrices\n\n\t\tif ( program.numMultiviewViews > 0 ) {\n\n\t\t\tmultiview.updateObjectMatricesUniforms( object, camera, p_uniforms );\n\n\t\t} else {\n\n\t\t\tp_uniforms.setValue( _gl, 'modelViewMatrix', object.modelViewMatrix );\n\t\t\tp_uniforms.setValue( _gl, 'normalMatrix', object.normalMatrix );\n\n\t\t}\n\n\t\tp_uniforms.setValue( _gl, 'modelMatrix', object.matrixWorld );\n\n\t\treturn program;\n\n\t}\n\n\t// Uniforms (refresh uniforms objects)\n\n\tfunction refreshUniformsCommon( uniforms, material, environment ) {\n\n\t\tuniforms.opacity.value = material.opacity;\n\n\t\tif ( material.color ) {\n\n\t\t\tuniforms.diffuse.value.copy( material.color );\n\n\t\t}\n\n\t\tif ( material.emissive ) {\n\n\t\t\tuniforms.emissive.value.copy( material.emissive ).multiplyScalar( material.emissiveIntensity );\n\n\t\t}\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t}\n\n\t\tif ( material.specularMap ) {\n\n\t\t\tuniforms.specularMap.value = material.specularMap;\n\n\t\t}\n\n\t\tvar envMap = material.envMap || environment;\n\n\t\tif ( envMap ) {\n\n\t\t\tuniforms.envMap.value = envMap;\n\n\t\t\t// don't flip CubeTexture envMaps, flip everything else:\n\t\t\t//  WebGLRenderTargetCube will be flipped for backwards compatibility\n\t\t\t//  WebGLRenderTargetCube.texture will be flipped because it's a Texture and NOT a CubeTexture\n\t\t\t// this check must be handled differently, or removed entirely, if WebGLRenderTargetCube uses a CubeTexture in the future\n\t\t\tuniforms.flipEnvMap.value = envMap.isCubeTexture ? - 1 : 1;\n\n\t\t\tuniforms.reflectivity.value = material.reflectivity;\n\t\t\tuniforms.refractionRatio.value = material.refractionRatio;\n\n\t\t\tuniforms.maxMipLevel.value = properties.get( envMap ).__maxMipLevel;\n\n\t\t}\n\n\t\tif ( material.lightMap ) {\n\n\t\t\tuniforms.lightMap.value = material.lightMap;\n\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity;\n\n\t\t}\n\n\t\tif ( material.aoMap ) {\n\n\t\t\tuniforms.aoMap.value = material.aoMap;\n\t\t\tuniforms.aoMapIntensity.value = material.aoMapIntensity;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. specular map\n\t\t// 3. normal map\n\t\t// 4. bump map\n\t\t// 5. alpha map\n\t\t// 6. emissive map\n\n\t\tvar uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.specularMap ) {\n\n\t\t\tuvScaleMap = material.specularMap;\n\n\t\t} else if ( material.displacementMap ) {\n\n\t\t\tuvScaleMap = material.displacementMap;\n\n\t\t} else if ( material.normalMap ) {\n\n\t\t\tuvScaleMap = material.normalMap;\n\n\t\t} else if ( material.bumpMap ) {\n\n\t\t\tuvScaleMap = material.bumpMap;\n\n\t\t} else if ( material.roughnessMap ) {\n\n\t\t\tuvScaleMap = material.roughnessMap;\n\n\t\t} else if ( material.metalnessMap ) {\n\n\t\t\tuvScaleMap = material.metalnessMap;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t} else if ( material.emissiveMap ) {\n\n\t\t\tuvScaleMap = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\t// backwards compatibility\n\t\t\tif ( uvScaleMap.isWebGLRenderTarget ) {\n\n\t\t\t\tuvScaleMap = uvScaleMap.texture;\n\n\t\t\t}\n\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuvScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities for uv2\n\t\t// 1. ao map\n\t\t// 2. light map\n\n\t\tvar uv2ScaleMap;\n\n\t\tif ( material.aoMap ) {\n\n\t\t\tuv2ScaleMap = material.aoMap;\n\n\t\t} else if ( material.lightMap ) {\n\n\t\t\tuv2ScaleMap = material.lightMap;\n\n\t\t}\n\n\t\tif ( uv2ScaleMap !== undefined ) {\n\n\t\t\t// backwards compatibility\n\t\t\tif ( uv2ScaleMap.isWebGLRenderTarget ) {\n\n\t\t\t\tuv2ScaleMap = uv2ScaleMap.texture;\n\n\t\t\t}\n\n\t\t\tif ( uv2ScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuv2ScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uv2Transform.value.copy( uv2ScaleMap.matrix );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsLine( uniforms, material ) {\n\n\t\tuniforms.diffuse.value.copy( material.color );\n\t\tuniforms.opacity.value = material.opacity;\n\n\t}\n\n\tfunction refreshUniformsDash( uniforms, material ) {\n\n\t\tuniforms.dashSize.value = material.dashSize;\n\t\tuniforms.totalSize.value = material.dashSize + material.gapSize;\n\t\tuniforms.scale.value = material.scale;\n\n\t}\n\n\tfunction refreshUniformsPoints( uniforms, material ) {\n\n\t\tuniforms.diffuse.value.copy( material.color );\n\t\tuniforms.opacity.value = material.opacity;\n\t\tuniforms.size.value = material.size * _pixelRatio;\n\t\tuniforms.scale.value = _height * 0.5;\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. alpha map\n\n\t\tvar uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuvScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsSprites( uniforms, material ) {\n\n\t\tuniforms.diffuse.value.copy( material.color );\n\t\tuniforms.opacity.value = material.opacity;\n\t\tuniforms.rotation.value = material.rotation;\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. alpha map\n\n\t\tvar uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuvScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsFog( uniforms, fog ) {\n\n\t\tuniforms.fogColor.value.copy( fog.color );\n\n\t\tif ( fog.isFog ) {\n\n\t\t\tuniforms.fogNear.value = fog.near;\n\t\t\tuniforms.fogFar.value = fog.far;\n\n\t\t} else if ( fog.isFogExp2 ) {\n\n\t\t\tuniforms.fogDensity.value = fog.density;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsLambert( uniforms, material ) {\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsPhong( uniforms, material ) {\n\n\t\tuniforms.specular.value.copy( material.specular );\n\t\tuniforms.shininess.value = Math.max( material.shininess, 1e-4 ); // to prevent pow( 0.0, 0.0 )\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsToon( uniforms, material ) {\n\n\t\tuniforms.specular.value.copy( material.specular );\n\t\tuniforms.shininess.value = Math.max( material.shininess, 1e-4 ); // to prevent pow( 0.0, 0.0 )\n\n\t\tif ( material.gradientMap ) {\n\n\t\t\tuniforms.gradientMap.value = material.gradientMap;\n\n\t\t}\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsStandard( uniforms, material, environment ) {\n\n\t\tuniforms.roughness.value = material.roughness;\n\t\tuniforms.metalness.value = material.metalness;\n\n\t\tif ( material.roughnessMap ) {\n\n\t\t\tuniforms.roughnessMap.value = material.roughnessMap;\n\n\t\t}\n\n\t\tif ( material.metalnessMap ) {\n\n\t\t\tuniforms.metalnessMap.value = material.metalnessMap;\n\n\t\t}\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t\tif ( material.envMap || environment ) {\n\n\t\t\t//uniforms.envMap.value = material.envMap; // part of uniforms common\n\t\t\tuniforms.envMapIntensity.value = material.envMapIntensity;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsPhysical( uniforms, material, environment ) {\n\n\t\trefreshUniformsStandard( uniforms, material, environment );\n\n\t\tuniforms.reflectivity.value = material.reflectivity; // also part of uniforms common\n\n\t\tuniforms.clearcoat.value = material.clearcoat;\n\t\tuniforms.clearcoatRoughness.value = material.clearcoatRoughness;\n\t\tif ( material.sheen ) uniforms.sheen.value.copy( material.sheen );\n\n\t\tif ( material.clearcoatNormalMap ) {\n\n\t\t\tuniforms.clearcoatNormalScale.value.copy( material.clearcoatNormalScale );\n\t\t\tuniforms.clearcoatNormalMap.value = material.clearcoatNormalMap;\n\n\t\t\tif ( material.side === BackSide ) {\n\n\t\t\t\tuniforms.clearcoatNormalScale.value.negate();\n\n\t\t\t}\n\n\t\t}\n\n\t\tuniforms.transparency.value = material.transparency;\n\n\t}\n\n\tfunction refreshUniformsMatcap( uniforms, material ) {\n\n\t\tif ( material.matcap ) {\n\n\t\t\tuniforms.matcap.value = material.matcap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsDepth( uniforms, material ) {\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsDistance( uniforms, material ) {\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t\tuniforms.referencePosition.value.copy( material.referencePosition );\n\t\tuniforms.nearDistance.value = material.nearDistance;\n\t\tuniforms.farDistance.value = material.farDistance;\n\n\t}\n\n\tfunction refreshUniformsNormal( uniforms, material ) {\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\t// If uniforms are marked as clean, they don't need to be loaded to the GPU.\n\n\tfunction markUniformsLightsNeedsUpdate( uniforms, value ) {\n\n\t\tuniforms.ambientLightColor.needsUpdate = value;\n\t\tuniforms.lightProbe.needsUpdate = value;\n\n\t\tuniforms.directionalLights.needsUpdate = value;\n\t\tuniforms.pointLights.needsUpdate = value;\n\t\tuniforms.spotLights.needsUpdate = value;\n\t\tuniforms.rectAreaLights.needsUpdate = value;\n\t\tuniforms.hemisphereLights.needsUpdate = value;\n\n\t}\n\n\tfunction materialNeedsLights( material ) {\n\n\t\treturn material.isMeshLambertMaterial || material.isMeshToonMaterial || material.isMeshPhongMaterial ||\n\t\t\tmaterial.isMeshStandardMaterial || material.isShadowMaterial ||\n\t\t\t( material.isShaderMaterial && material.lights === true );\n\n\t}\n\n\t//\n\tthis.setFramebuffer = function ( value ) {\n\n\t\tif ( _framebuffer !== value && _currentRenderTarget === null ) _gl.bindFramebuffer( _gl.FRAMEBUFFER, value );\n\n\t\t_framebuffer = value;\n\n\t};\n\n\tthis.getActiveCubeFace = function () {\n\n\t\treturn _currentActiveCubeFace;\n\n\t};\n\n\tthis.getActiveMipmapLevel = function () {\n\n\t\treturn _currentActiveMipmapLevel;\n\n\t};\n\n\tthis.getRenderTarget = function () {\n\n\t\treturn _currentRenderTarget;\n\n\t};\n\n\tthis.setRenderTarget = function ( renderTarget, activeCubeFace, activeMipmapLevel ) {\n\n\t\t_currentRenderTarget = renderTarget;\n\t\t_currentActiveCubeFace = activeCubeFace;\n\t\t_currentActiveMipmapLevel = activeMipmapLevel;\n\n\t\tif ( renderTarget && properties.get( renderTarget ).__webglFramebuffer === undefined ) {\n\n\t\t\ttextures.setupRenderTarget( renderTarget );\n\n\t\t}\n\n\t\tvar framebuffer = _framebuffer;\n\t\tvar isCube = false;\n\n\t\tif ( renderTarget ) {\n\n\t\t\tvar __webglFramebuffer = properties.get( renderTarget ).__webglFramebuffer;\n\n\t\t\tif ( renderTarget.isWebGLRenderTargetCube ) {\n\n\t\t\t\tframebuffer = __webglFramebuffer[ activeCubeFace || 0 ];\n\t\t\t\tisCube = true;\n\n\t\t\t} else if ( renderTarget.isWebGLMultisampleRenderTarget ) {\n\n\t\t\t\tframebuffer = properties.get( renderTarget ).__webglMultisampledFramebuffer;\n\n\t\t\t} else {\n\n\t\t\t\tframebuffer = __webglFramebuffer;\n\n\t\t\t}\n\n\t\t\t_currentViewport.copy( renderTarget.viewport );\n\t\t\t_currentScissor.copy( renderTarget.scissor );\n\t\t\t_currentScissorTest = renderTarget.scissorTest;\n\n\t\t} else {\n\n\t\t\t_currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor();\n\t\t\t_currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor();\n\t\t\t_currentScissorTest = _scissorTest;\n\n\t\t}\n\n\t\tif ( _currentFramebuffer !== framebuffer ) {\n\n\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\t\t\t_currentFramebuffer = framebuffer;\n\n\t\t}\n\n\t\tstate.viewport( _currentViewport );\n\t\tstate.scissor( _currentScissor );\n\t\tstate.setScissorTest( _currentScissorTest );\n\n\t\tif ( isCube ) {\n\n\t\t\tvar textureProperties = properties.get( renderTarget.texture );\n\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + ( activeCubeFace || 0 ), textureProperties.__webglTexture, activeMipmapLevel || 0 );\n\n\t\t}\n\n\t};\n\n\tthis.readRenderTargetPixels = function ( renderTarget, x, y, width, height, buffer, activeCubeFaceIndex ) {\n\n\t\tif ( ! ( renderTarget && renderTarget.isWebGLRenderTarget ) ) {\n\n\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar framebuffer = properties.get( renderTarget ).__webglFramebuffer;\n\n\t\tif ( renderTarget.isWebGLRenderTargetCube && activeCubeFaceIndex !== undefined ) {\n\n\t\t\tframebuffer = framebuffer[ activeCubeFaceIndex ];\n\n\t\t}\n\n\t\tif ( framebuffer ) {\n\n\t\t\tvar restore = false;\n\n\t\t\tif ( framebuffer !== _currentFramebuffer ) {\n\n\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\n\t\t\t\trestore = true;\n\n\t\t\t}\n\n\t\t\ttry {\n\n\t\t\t\tvar texture = renderTarget.texture;\n\t\t\t\tvar textureFormat = texture.format;\n\t\t\t\tvar textureType = texture.type;\n\n\t\t\t\tif ( textureFormat !== RGBAFormat && utils.convert( textureFormat ) !== _gl.getParameter( _gl.IMPLEMENTATION_COLOR_READ_FORMAT ) ) {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.' );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( textureType !== UnsignedByteType && utils.convert( textureType ) !== _gl.getParameter( _gl.IMPLEMENTATION_COLOR_READ_TYPE ) && // IE11, Edge and Chrome Mac < 52 (#9513)\n\t\t\t\t\t! ( textureType === FloatType && ( capabilities.isWebGL2 || extensions.get( 'OES_texture_float' ) || extensions.get( 'WEBGL_color_buffer_float' ) ) ) && // Chrome Mac >= 52 and Firefox\n\t\t\t\t\t! ( textureType === HalfFloatType && ( capabilities.isWebGL2 ? extensions.get( 'EXT_color_buffer_float' ) : extensions.get( 'EXT_color_buffer_half_float' ) ) ) ) {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.' );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( _gl.checkFramebufferStatus( _gl.FRAMEBUFFER ) === _gl.FRAMEBUFFER_COMPLETE ) {\n\n\t\t\t\t\t// the following if statement ensures valid read requests (no out-of-bounds pixels, see #8604)\n\n\t\t\t\t\tif ( ( x >= 0 && x <= ( renderTarget.width - width ) ) && ( y >= 0 && y <= ( renderTarget.height - height ) ) ) {\n\n\t\t\t\t\t\t_gl.readPixels( x, y, width, height, utils.convert( textureFormat ), utils.convert( textureType ), buffer );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.' );\n\n\t\t\t\t}\n\n\t\t\t} finally {\n\n\t\t\t\tif ( restore ) {\n\n\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, _currentFramebuffer );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.copyFramebufferToTexture = function ( position, texture, level ) {\n\n\t\tif ( level === undefined ) level = 0;\n\n\t\tvar levelScale = Math.pow( 2, - level );\n\t\tvar width = Math.floor( texture.image.width * levelScale );\n\t\tvar height = Math.floor( texture.image.height * levelScale );\n\t\tvar glFormat = utils.convert( texture.format );\n\n\t\ttextures.setTexture2D( texture, 0 );\n\n\t\t_gl.copyTexImage2D( _gl.TEXTURE_2D, level, glFormat, position.x, position.y, width, height, 0 );\n\n\t\tstate.unbindTexture();\n\n\t};\n\n\tthis.copyTextureToTexture = function ( position, srcTexture, dstTexture, level ) {\n\n\t\tvar width = srcTexture.image.width;\n\t\tvar height = srcTexture.image.height;\n\t\tvar glFormat = utils.convert( dstTexture.format );\n\t\tvar glType = utils.convert( dstTexture.type );\n\n\t\ttextures.setTexture2D( dstTexture, 0 );\n\n\t\tif ( srcTexture.isDataTexture ) {\n\n\t\t\t_gl.texSubImage2D( _gl.TEXTURE_2D, level || 0, position.x, position.y, width, height, glFormat, glType, srcTexture.image.data );\n\n\t\t} else {\n\n\t\t\t_gl.texSubImage2D( _gl.TEXTURE_2D, level || 0, position.x, position.y, glFormat, glType, srcTexture.image );\n\n\t\t}\n\n\t\tstate.unbindTexture();\n\n\t};\n\n\tthis.initTexture = function ( texture ) {\n\n\t\ttextures.setTexture2D( texture, 0 );\n\n\t\tstate.unbindTexture();\n\n\t};\n\n\tif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\n\n\t\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'observe', { detail: this } ) ); // eslint-disable-line no-undef\n\n\t}\n\n}\n\nexport { WebGLRenderer };\n","import { WrapAroundEnding, ZeroCurvatureEnding, ZeroSlopeEnding, LoopPingPong, LoopOnce, LoopRepeat } from '../constants.js';\n\n/**\n *\n * Action provided by AnimationMixer for scheduling clip playback on specific\n * objects.\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n *\n */\n\nfunction AnimationAction( mixer, clip, localRoot ) {\n\n\tthis._mixer = mixer;\n\tthis._clip = clip;\n\tthis._localRoot = localRoot || null;\n\n\tvar tracks = clip.tracks,\n\t\tnTracks = tracks.length,\n\t\tinterpolants = new Array( nTracks );\n\n\tvar interpolantSettings = {\n\t\tendingStart: ZeroCurvatureEnding,\n\t\tendingEnd: ZeroCurvatureEnding\n\t};\n\n\tfor ( var i = 0; i !== nTracks; ++ i ) {\n\n\t\tvar interpolant = tracks[ i ].createInterpolant( null );\n\t\tinterpolants[ i ] = interpolant;\n\t\tinterpolant.settings = interpolantSettings;\n\n\t}\n\n\tthis._interpolantSettings = interpolantSettings;\n\n\tthis._interpolants = interpolants; // bound by the mixer\n\n\t// inside: PropertyMixer (managed by the mixer)\n\tthis._propertyBindings = new Array( nTracks );\n\n\tthis._cacheIndex = null; // for the memory manager\n\tthis._byClipCacheIndex = null; // for the memory manager\n\n\tthis._timeScaleInterpolant = null;\n\tthis._weightInterpolant = null;\n\n\tthis.loop = LoopRepeat;\n\tthis._loopCount = - 1;\n\n\t// global mixer time when the action is to be started\n\t// it's set back to 'null' upon start of the action\n\tthis._startTime = null;\n\n\t// scaled local time of the action\n\t// gets clamped or wrapped to 0..clip.duration according to loop\n\tthis.time = 0;\n\n\tthis.timeScale = 1;\n\tthis._effectiveTimeScale = 1;\n\n\tthis.weight = 1;\n\tthis._effectiveWeight = 1;\n\n\tthis.repetitions = Infinity; // no. of repetitions when looping\n\n\tthis.paused = false; // true -> zero effective time scale\n\tthis.enabled = true; // false -> zero effective weight\n\n\tthis.clampWhenFinished = false;// keep feeding the last frame?\n\n\tthis.zeroSlopeAtStart = true;// for smooth interpolation w/o separate\n\tthis.zeroSlopeAtEnd = true;// clips for start, loop and end\n\n}\n\nObject.assign( AnimationAction.prototype, {\n\n\t// State & Scheduling\n\n\tplay: function () {\n\n\t\tthis._mixer._activateAction( this );\n\n\t\treturn this;\n\n\t},\n\n\tstop: function () {\n\n\t\tthis._mixer._deactivateAction( this );\n\n\t\treturn this.reset();\n\n\t},\n\n\treset: function () {\n\n\t\tthis.paused = false;\n\t\tthis.enabled = true;\n\n\t\tthis.time = 0; // restart clip\n\t\tthis._loopCount = - 1;// forget previous loops\n\t\tthis._startTime = null;// forget scheduling\n\n\t\treturn this.stopFading().stopWarping();\n\n\t},\n\n\tisRunning: function () {\n\n\t\treturn this.enabled && ! this.paused && this.timeScale !== 0 &&\n\t\t\tthis._startTime === null && this._mixer._isActiveAction( this );\n\n\t},\n\n\t// return true when play has been called\n\tisScheduled: function () {\n\n\t\treturn this._mixer._isActiveAction( this );\n\n\t},\n\n\tstartAt: function ( time ) {\n\n\t\tthis._startTime = time;\n\n\t\treturn this;\n\n\t},\n\n\tsetLoop: function ( mode, repetitions ) {\n\n\t\tthis.loop = mode;\n\t\tthis.repetitions = repetitions;\n\n\t\treturn this;\n\n\t},\n\n\t// Weight\n\n\t// set the weight stopping any scheduled fading\n\t// although .enabled = false yields an effective weight of zero, this\n\t// method does *not* change .enabled, because it would be confusing\n\tsetEffectiveWeight: function ( weight ) {\n\n\t\tthis.weight = weight;\n\n\t\t// note: same logic as when updated at runtime\n\t\tthis._effectiveWeight = this.enabled ? weight : 0;\n\n\t\treturn this.stopFading();\n\n\t},\n\n\t// return the weight considering fading and .enabled\n\tgetEffectiveWeight: function () {\n\n\t\treturn this._effectiveWeight;\n\n\t},\n\n\tfadeIn: function ( duration ) {\n\n\t\treturn this._scheduleFading( duration, 0, 1 );\n\n\t},\n\n\tfadeOut: function ( duration ) {\n\n\t\treturn this._scheduleFading( duration, 1, 0 );\n\n\t},\n\n\tcrossFadeFrom: function ( fadeOutAction, duration, warp ) {\n\n\t\tfadeOutAction.fadeOut( duration );\n\t\tthis.fadeIn( duration );\n\n\t\tif ( warp ) {\n\n\t\t\tvar fadeInDuration = this._clip.duration,\n\t\t\t\tfadeOutDuration = fadeOutAction._clip.duration,\n\n\t\t\t\tstartEndRatio = fadeOutDuration / fadeInDuration,\n\t\t\t\tendStartRatio = fadeInDuration / fadeOutDuration;\n\n\t\t\tfadeOutAction.warp( 1.0, startEndRatio, duration );\n\t\t\tthis.warp( endStartRatio, 1.0, duration );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcrossFadeTo: function ( fadeInAction, duration, warp ) {\n\n\t\treturn fadeInAction.crossFadeFrom( this, duration, warp );\n\n\t},\n\n\tstopFading: function () {\n\n\t\tvar weightInterpolant = this._weightInterpolant;\n\n\t\tif ( weightInterpolant !== null ) {\n\n\t\t\tthis._weightInterpolant = null;\n\t\t\tthis._mixer._takeBackControlInterpolant( weightInterpolant );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// Time Scale Control\n\n\t// set the time scale stopping any scheduled warping\n\t// although .paused = true yields an effective time scale of zero, this\n\t// method does *not* change .paused, because it would be confusing\n\tsetEffectiveTimeScale: function ( timeScale ) {\n\n\t\tthis.timeScale = timeScale;\n\t\tthis._effectiveTimeScale = this.paused ? 0 : timeScale;\n\n\t\treturn this.stopWarping();\n\n\t},\n\n\t// return the time scale considering warping and .paused\n\tgetEffectiveTimeScale: function () {\n\n\t\treturn this._effectiveTimeScale;\n\n\t},\n\n\tsetDuration: function ( duration ) {\n\n\t\tthis.timeScale = this._clip.duration / duration;\n\n\t\treturn this.stopWarping();\n\n\t},\n\n\tsyncWith: function ( action ) {\n\n\t\tthis.time = action.time;\n\t\tthis.timeScale = action.timeScale;\n\n\t\treturn this.stopWarping();\n\n\t},\n\n\thalt: function ( duration ) {\n\n\t\treturn this.warp( this._effectiveTimeScale, 0, duration );\n\n\t},\n\n\twarp: function ( startTimeScale, endTimeScale, duration ) {\n\n\t\tvar mixer = this._mixer, now = mixer.time,\n\t\t\tinterpolant = this._timeScaleInterpolant,\n\n\t\t\ttimeScale = this.timeScale;\n\n\t\tif ( interpolant === null ) {\n\n\t\t\tinterpolant = mixer._lendControlInterpolant();\n\t\t\tthis._timeScaleInterpolant = interpolant;\n\n\t\t}\n\n\t\tvar times = interpolant.parameterPositions,\n\t\t\tvalues = interpolant.sampleValues;\n\n\t\ttimes[ 0 ] = now;\n\t\ttimes[ 1 ] = now + duration;\n\n\t\tvalues[ 0 ] = startTimeScale / timeScale;\n\t\tvalues[ 1 ] = endTimeScale / timeScale;\n\n\t\treturn this;\n\n\t},\n\n\tstopWarping: function () {\n\n\t\tvar timeScaleInterpolant = this._timeScaleInterpolant;\n\n\t\tif ( timeScaleInterpolant !== null ) {\n\n\t\t\tthis._timeScaleInterpolant = null;\n\t\t\tthis._mixer._takeBackControlInterpolant( timeScaleInterpolant );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// Object Accessors\n\n\tgetMixer: function () {\n\n\t\treturn this._mixer;\n\n\t},\n\n\tgetClip: function () {\n\n\t\treturn this._clip;\n\n\t},\n\n\tgetRoot: function () {\n\n\t\treturn this._localRoot || this._mixer._root;\n\n\t},\n\n\t// Interna\n\n\t_update: function ( time, deltaTime, timeDirection, accuIndex ) {\n\n\t\t// called by the mixer\n\n\t\tif ( ! this.enabled ) {\n\n\t\t\t// call ._updateWeight() to update ._effectiveWeight\n\n\t\t\tthis._updateWeight( time );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar startTime = this._startTime;\n\n\t\tif ( startTime !== null ) {\n\n\t\t\t// check for scheduled start of action\n\n\t\t\tvar timeRunning = ( time - startTime ) * timeDirection;\n\t\t\tif ( timeRunning < 0 || timeDirection === 0 ) {\n\n\t\t\t\treturn; // yet to come / don't decide when delta = 0\n\n\t\t\t}\n\n\t\t\t// start\n\n\t\t\tthis._startTime = null; // unschedule\n\t\t\tdeltaTime = timeDirection * timeRunning;\n\n\t\t}\n\n\t\t// apply time scale and advance time\n\n\t\tdeltaTime *= this._updateTimeScale( time );\n\t\tvar clipTime = this._updateTime( deltaTime );\n\n\t\t// note: _updateTime may disable the action resulting in\n\t\t// an effective weight of 0\n\n\t\tvar weight = this._updateWeight( time );\n\n\t\tif ( weight > 0 ) {\n\n\t\t\tvar interpolants = this._interpolants;\n\t\t\tvar propertyMixers = this._propertyBindings;\n\n\t\t\tfor ( var j = 0, m = interpolants.length; j !== m; ++ j ) {\n\n\t\t\t\tinterpolants[ j ].evaluate( clipTime );\n\t\t\t\tpropertyMixers[ j ].accumulate( accuIndex, weight );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t_updateWeight: function ( time ) {\n\n\t\tvar weight = 0;\n\n\t\tif ( this.enabled ) {\n\n\t\t\tweight = this.weight;\n\t\t\tvar interpolant = this._weightInterpolant;\n\n\t\t\tif ( interpolant !== null ) {\n\n\t\t\t\tvar interpolantValue = interpolant.evaluate( time )[ 0 ];\n\n\t\t\t\tweight *= interpolantValue;\n\n\t\t\t\tif ( time > interpolant.parameterPositions[ 1 ] ) {\n\n\t\t\t\t\tthis.stopFading();\n\n\t\t\t\t\tif ( interpolantValue === 0 ) {\n\n\t\t\t\t\t\t// faded out, disable\n\t\t\t\t\t\tthis.enabled = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis._effectiveWeight = weight;\n\t\treturn weight;\n\n\t},\n\n\t_updateTimeScale: function ( time ) {\n\n\t\tvar timeScale = 0;\n\n\t\tif ( ! this.paused ) {\n\n\t\t\ttimeScale = this.timeScale;\n\n\t\t\tvar interpolant = this._timeScaleInterpolant;\n\n\t\t\tif ( interpolant !== null ) {\n\n\t\t\t\tvar interpolantValue = interpolant.evaluate( time )[ 0 ];\n\n\t\t\t\ttimeScale *= interpolantValue;\n\n\t\t\t\tif ( time > interpolant.parameterPositions[ 1 ] ) {\n\n\t\t\t\t\tthis.stopWarping();\n\n\t\t\t\t\tif ( timeScale === 0 ) {\n\n\t\t\t\t\t\t// motion has halted, pause\n\t\t\t\t\t\tthis.paused = true;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// warp done - apply final time scale\n\t\t\t\t\t\tthis.timeScale = timeScale;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis._effectiveTimeScale = timeScale;\n\t\treturn timeScale;\n\n\t},\n\n\t_updateTime: function ( deltaTime ) {\n\n\t\tvar time = this.time + deltaTime;\n\t\tvar duration = this._clip.duration;\n\t\tvar loop = this.loop;\n\t\tvar loopCount = this._loopCount;\n\n\t\tvar pingPong = ( loop === LoopPingPong );\n\n\t\tif ( deltaTime === 0 ) {\n\n\t\t\tif ( loopCount === - 1 ) return time;\n\n\t\t\treturn ( pingPong && ( loopCount & 1 ) === 1 ) ? duration - time : time;\n\n\t\t}\n\n\t\tif ( loop === LoopOnce ) {\n\n\t\t\tif ( loopCount === - 1 ) {\n\n\t\t\t\t// just started\n\n\t\t\t\tthis._loopCount = 0;\n\t\t\t\tthis._setEndings( true, true, false );\n\n\t\t\t}\n\n\t\t\thandle_stop: {\n\n\t\t\t\tif ( time >= duration ) {\n\n\t\t\t\t\ttime = duration;\n\n\t\t\t\t} else if ( time < 0 ) {\n\n\t\t\t\t\ttime = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis.time = time;\n\n\t\t\t\t\tbreak handle_stop;\n\n\t\t\t\t}\n\n\t\t\t\tif ( this.clampWhenFinished ) this.paused = true;\n\t\t\t\telse this.enabled = false;\n\n\t\t\t\tthis.time = time;\n\n\t\t\t\tthis._mixer.dispatchEvent( {\n\t\t\t\t\ttype: 'finished', action: this,\n\t\t\t\t\tdirection: deltaTime < 0 ? - 1 : 1\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t} else { // repetitive Repeat or PingPong\n\n\t\t\tif ( loopCount === - 1 ) {\n\n\t\t\t\t// just started\n\n\t\t\t\tif ( deltaTime >= 0 ) {\n\n\t\t\t\t\tloopCount = 0;\n\n\t\t\t\t\tthis._setEndings( true, this.repetitions === 0, pingPong );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// when looping in reverse direction, the initial\n\t\t\t\t\t// transition through zero counts as a repetition,\n\t\t\t\t\t// so leave loopCount at -1\n\n\t\t\t\t\tthis._setEndings( this.repetitions === 0, true, pingPong );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( time >= duration || time < 0 ) {\n\n\t\t\t\t// wrap around\n\n\t\t\t\tvar loopDelta = Math.floor( time / duration ); // signed\n\t\t\t\ttime -= duration * loopDelta;\n\n\t\t\t\tloopCount += Math.abs( loopDelta );\n\n\t\t\t\tvar pending = this.repetitions - loopCount;\n\n\t\t\t\tif ( pending <= 0 ) {\n\n\t\t\t\t\t// have to stop (switch state, clamp time, fire event)\n\n\t\t\t\t\tif ( this.clampWhenFinished ) this.paused = true;\n\t\t\t\t\telse this.enabled = false;\n\n\t\t\t\t\ttime = deltaTime > 0 ? duration : 0;\n\n\t\t\t\t\tthis.time = time;\n\n\t\t\t\t\tthis._mixer.dispatchEvent( {\n\t\t\t\t\t\ttype: 'finished', action: this,\n\t\t\t\t\t\tdirection: deltaTime > 0 ? 1 : - 1\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// keep running\n\n\t\t\t\t\tif ( pending === 1 ) {\n\n\t\t\t\t\t\t// entering the last round\n\n\t\t\t\t\t\tvar atStart = deltaTime < 0;\n\t\t\t\t\t\tthis._setEndings( atStart, ! atStart, pingPong );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis._setEndings( false, false, pingPong );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._loopCount = loopCount;\n\n\t\t\t\t\tthis.time = time;\n\n\t\t\t\t\tthis._mixer.dispatchEvent( {\n\t\t\t\t\t\ttype: 'loop', action: this, loopDelta: loopDelta\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tthis.time = time;\n\n\t\t\t}\n\n\t\t\tif ( pingPong && ( loopCount & 1 ) === 1 ) {\n\n\t\t\t\t// invert time for the \"pong round\"\n\n\t\t\t\treturn duration - time;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn time;\n\n\t},\n\n\t_setEndings: function ( atStart, atEnd, pingPong ) {\n\n\t\tvar settings = this._interpolantSettings;\n\n\t\tif ( pingPong ) {\n\n\t\t\tsettings.endingStart = ZeroSlopeEnding;\n\t\t\tsettings.endingEnd = ZeroSlopeEnding;\n\n\t\t} else {\n\n\t\t\t// assuming for LoopOnce atStart == atEnd == true\n\n\t\t\tif ( atStart ) {\n\n\t\t\t\tsettings.endingStart = this.zeroSlopeAtStart ? ZeroSlopeEnding : ZeroCurvatureEnding;\n\n\t\t\t} else {\n\n\t\t\t\tsettings.endingStart = WrapAroundEnding;\n\n\t\t\t}\n\n\t\t\tif ( atEnd ) {\n\n\t\t\t\tsettings.endingEnd = this.zeroSlopeAtEnd ? ZeroSlopeEnding : ZeroCurvatureEnding;\n\n\t\t\t} else {\n\n\t\t\t\tsettings.endingEnd \t = WrapAroundEnding;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t_scheduleFading: function ( duration, weightNow, weightThen ) {\n\n\t\tvar mixer = this._mixer, now = mixer.time,\n\t\t\tinterpolant = this._weightInterpolant;\n\n\t\tif ( interpolant === null ) {\n\n\t\t\tinterpolant = mixer._lendControlInterpolant();\n\t\t\tthis._weightInterpolant = interpolant;\n\n\t\t}\n\n\t\tvar times = interpolant.parameterPositions,\n\t\t\tvalues = interpolant.sampleValues;\n\n\t\ttimes[ 0 ] = now;\n\t\tvalues[ 0 ] = weightNow;\n\t\ttimes[ 1 ] = now + duration;\n\t\tvalues[ 1 ] = weightThen;\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { AnimationAction };\n","import { Quaternion } from '../math/Quaternion.js';\n\n/**\n *\n * Buffered scene graph property that allows weighted accumulation.\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction PropertyMixer( binding, typeName, valueSize ) {\n\n\tthis.binding = binding;\n\tthis.valueSize = valueSize;\n\n\tvar bufferType = Float64Array,\n\t\tmixFunction;\n\n\tswitch ( typeName ) {\n\n\t\tcase 'quaternion':\n\t\t\tmixFunction = this._slerp;\n\t\t\tbreak;\n\n\t\tcase 'string':\n\t\tcase 'bool':\n\t\t\tbufferType = Array;\n\t\t\tmixFunction = this._select;\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tmixFunction = this._lerp;\n\n\t}\n\n\tthis.buffer = new bufferType( valueSize * 4 );\n\t// layout: [ incoming | accu0 | accu1 | orig ]\n\t//\n\t// interpolators can use .buffer as their .result\n\t// the data then goes to 'incoming'\n\t//\n\t// 'accu0' and 'accu1' are used frame-interleaved for\n\t// the cumulative result and are compared to detect\n\t// changes\n\t//\n\t// 'orig' stores the original state of the property\n\n\tthis._mixBufferRegion = mixFunction;\n\n\tthis.cumulativeWeight = 0;\n\n\tthis.useCount = 0;\n\tthis.referenceCount = 0;\n\n}\n\nObject.assign( PropertyMixer.prototype, {\n\n\t// accumulate data in the 'incoming' region into 'accu<i>'\n\taccumulate: function ( accuIndex, weight ) {\n\n\t\t// note: happily accumulating nothing when weight = 0, the caller knows\n\t\t// the weight and shouldn't have made the call in the first place\n\n\t\tvar buffer = this.buffer,\n\t\t\tstride = this.valueSize,\n\t\t\toffset = accuIndex * stride + stride,\n\n\t\t\tcurrentWeight = this.cumulativeWeight;\n\n\t\tif ( currentWeight === 0 ) {\n\n\t\t\t// accuN := incoming * weight\n\n\t\t\tfor ( var i = 0; i !== stride; ++ i ) {\n\n\t\t\t\tbuffer[ offset + i ] = buffer[ i ];\n\n\t\t\t}\n\n\t\t\tcurrentWeight = weight;\n\n\t\t} else {\n\n\t\t\t// accuN := accuN + incoming * weight\n\n\t\t\tcurrentWeight += weight;\n\t\t\tvar mix = weight / currentWeight;\n\t\t\tthis._mixBufferRegion( buffer, offset, 0, mix, stride );\n\n\t\t}\n\n\t\tthis.cumulativeWeight = currentWeight;\n\n\t},\n\n\t// apply the state of 'accu<i>' to the binding when accus differ\n\tapply: function ( accuIndex ) {\n\n\t\tvar stride = this.valueSize,\n\t\t\tbuffer = this.buffer,\n\t\t\toffset = accuIndex * stride + stride,\n\n\t\t\tweight = this.cumulativeWeight,\n\n\t\t\tbinding = this.binding;\n\n\t\tthis.cumulativeWeight = 0;\n\n\t\tif ( weight < 1 ) {\n\n\t\t\t// accuN := accuN + original * ( 1 - cumulativeWeight )\n\n\t\t\tvar originalValueOffset = stride * 3;\n\n\t\t\tthis._mixBufferRegion(\n\t\t\t\tbuffer, offset, originalValueOffset, 1 - weight, stride );\n\n\t\t}\n\n\t\tfor ( var i = stride, e = stride + stride; i !== e; ++ i ) {\n\n\t\t\tif ( buffer[ i ] !== buffer[ i + stride ] ) {\n\n\t\t\t\t// value has changed -> update scene graph\n\n\t\t\t\tbinding.setValue( buffer, offset );\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t// remember the state of the bound property and copy it to both accus\n\tsaveOriginalState: function () {\n\n\t\tvar binding = this.binding;\n\n\t\tvar buffer = this.buffer,\n\t\t\tstride = this.valueSize,\n\n\t\t\toriginalValueOffset = stride * 3;\n\n\t\tbinding.getValue( buffer, originalValueOffset );\n\n\t\t// accu[0..1] := orig -- initially detect changes against the original\n\t\tfor ( var i = stride, e = originalValueOffset; i !== e; ++ i ) {\n\n\t\t\tbuffer[ i ] = buffer[ originalValueOffset + ( i % stride ) ];\n\n\t\t}\n\n\t\tthis.cumulativeWeight = 0;\n\n\t},\n\n\t// apply the state previously taken via 'saveOriginalState' to the binding\n\trestoreOriginalState: function () {\n\n\t\tvar originalValueOffset = this.valueSize * 3;\n\t\tthis.binding.setValue( this.buffer, originalValueOffset );\n\n\t},\n\n\n\t// mix functions\n\n\t_select: function ( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tif ( t >= 0.5 ) {\n\n\t\t\tfor ( var i = 0; i !== stride; ++ i ) {\n\n\t\t\t\tbuffer[ dstOffset + i ] = buffer[ srcOffset + i ];\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t_slerp: function ( buffer, dstOffset, srcOffset, t ) {\n\n\t\tQuaternion.slerpFlat( buffer, dstOffset, buffer, dstOffset, buffer, srcOffset, t );\n\n\t},\n\n\t_lerp: function ( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tvar s = 1 - t;\n\n\t\tfor ( var i = 0; i !== stride; ++ i ) {\n\n\t\t\tvar j = dstOffset + i;\n\n\t\t\tbuffer[ j ] = buffer[ j ] * s + buffer[ srcOffset + i ] * t;\n\n\t\t}\n\n\t}\n\n} );\n\n\nexport { PropertyMixer };\n","import { AnimationAction } from './AnimationAction.js';\nimport { EventDispatcher } from '../core/EventDispatcher.js';\nimport { LinearInterpolant } from '../math/interpolants/LinearInterpolant.js';\nimport { PropertyBinding } from './PropertyBinding.js';\nimport { PropertyMixer } from './PropertyMixer.js';\nimport { AnimationClip } from './AnimationClip.js';\n\n/**\n *\n * Player for AnimationClips.\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction AnimationMixer( root ) {\n\n\tthis._root = root;\n\tthis._initMemoryManager();\n\tthis._accuIndex = 0;\n\n\tthis.time = 0;\n\n\tthis.timeScale = 1.0;\n\n}\n\nAnimationMixer.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: AnimationMixer,\n\n\t_bindAction: function ( action, prototypeAction ) {\n\n\t\tvar root = action._localRoot || this._root,\n\t\t\ttracks = action._clip.tracks,\n\t\t\tnTracks = tracks.length,\n\t\t\tbindings = action._propertyBindings,\n\t\t\tinterpolants = action._interpolants,\n\t\t\trootUuid = root.uuid,\n\t\t\tbindingsByRoot = this._bindingsByRootAndName,\n\t\t\tbindingsByName = bindingsByRoot[ rootUuid ];\n\n\t\tif ( bindingsByName === undefined ) {\n\n\t\t\tbindingsByName = {};\n\t\t\tbindingsByRoot[ rootUuid ] = bindingsByName;\n\n\t\t}\n\n\t\tfor ( var i = 0; i !== nTracks; ++ i ) {\n\n\t\t\tvar track = tracks[ i ],\n\t\t\t\ttrackName = track.name,\n\t\t\t\tbinding = bindingsByName[ trackName ];\n\n\t\t\tif ( binding !== undefined ) {\n\n\t\t\t\tbindings[ i ] = binding;\n\n\t\t\t} else {\n\n\t\t\t\tbinding = bindings[ i ];\n\n\t\t\t\tif ( binding !== undefined ) {\n\n\t\t\t\t\t// existing binding, make sure the cache knows\n\n\t\t\t\t\tif ( binding._cacheIndex === null ) {\n\n\t\t\t\t\t\t++ binding.referenceCount;\n\t\t\t\t\t\tthis._addInactiveBinding( binding, rootUuid, trackName );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t\tvar path = prototypeAction && prototypeAction.\n\t\t\t\t\t_propertyBindings[ i ].binding.parsedPath;\n\n\t\t\t\tbinding = new PropertyMixer(\n\t\t\t\t\tPropertyBinding.create( root, trackName, path ),\n\t\t\t\t\ttrack.ValueTypeName, track.getValueSize() );\n\n\t\t\t\t++ binding.referenceCount;\n\t\t\t\tthis._addInactiveBinding( binding, rootUuid, trackName );\n\n\t\t\t\tbindings[ i ] = binding;\n\n\t\t\t}\n\n\t\t\tinterpolants[ i ].resultBuffer = binding.buffer;\n\n\t\t}\n\n\t},\n\n\t_activateAction: function ( action ) {\n\n\t\tif ( ! this._isActiveAction( action ) ) {\n\n\t\t\tif ( action._cacheIndex === null ) {\n\n\t\t\t\t// this action has been forgotten by the cache, but the user\n\t\t\t\t// appears to be still using it -> rebind\n\n\t\t\t\tvar rootUuid = ( action._localRoot || this._root ).uuid,\n\t\t\t\t\tclipUuid = action._clip.uuid,\n\t\t\t\t\tactionsForClip = this._actionsByClip[ clipUuid ];\n\n\t\t\t\tthis._bindAction( action,\n\t\t\t\t\tactionsForClip && actionsForClip.knownActions[ 0 ] );\n\n\t\t\t\tthis._addInactiveAction( action, clipUuid, rootUuid );\n\n\t\t\t}\n\n\t\t\tvar bindings = action._propertyBindings;\n\n\t\t\t// increment reference counts / sort out state\n\t\t\tfor ( var i = 0, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\t\tvar binding = bindings[ i ];\n\n\t\t\t\tif ( binding.useCount ++ === 0 ) {\n\n\t\t\t\t\tthis._lendBinding( binding );\n\t\t\t\t\tbinding.saveOriginalState();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis._lendAction( action );\n\n\t\t}\n\n\t},\n\n\t_deactivateAction: function ( action ) {\n\n\t\tif ( this._isActiveAction( action ) ) {\n\n\t\t\tvar bindings = action._propertyBindings;\n\n\t\t\t// decrement reference counts / sort out state\n\t\t\tfor ( var i = 0, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\t\tvar binding = bindings[ i ];\n\n\t\t\t\tif ( -- binding.useCount === 0 ) {\n\n\t\t\t\t\tbinding.restoreOriginalState();\n\t\t\t\t\tthis._takeBackBinding( binding );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis._takeBackAction( action );\n\n\t\t}\n\n\t},\n\n\t// Memory manager\n\n\t_initMemoryManager: function () {\n\n\t\tthis._actions = []; // 'nActiveActions' followed by inactive ones\n\t\tthis._nActiveActions = 0;\n\n\t\tthis._actionsByClip = {};\n\t\t// inside:\n\t\t// {\n\t\t// \tknownActions: Array< AnimationAction > - used as prototypes\n\t\t// \tactionByRoot: AnimationAction - lookup\n\t\t// }\n\n\n\t\tthis._bindings = []; // 'nActiveBindings' followed by inactive ones\n\t\tthis._nActiveBindings = 0;\n\n\t\tthis._bindingsByRootAndName = {}; // inside: Map< name, PropertyMixer >\n\n\n\t\tthis._controlInterpolants = []; // same game as above\n\t\tthis._nActiveControlInterpolants = 0;\n\n\t\tvar scope = this;\n\n\t\tthis.stats = {\n\n\t\t\tactions: {\n\t\t\t\tget total() {\n\n\t\t\t\t\treturn scope._actions.length;\n\n\t\t\t\t},\n\t\t\t\tget inUse() {\n\n\t\t\t\t\treturn scope._nActiveActions;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tbindings: {\n\t\t\t\tget total() {\n\n\t\t\t\t\treturn scope._bindings.length;\n\n\t\t\t\t},\n\t\t\t\tget inUse() {\n\n\t\t\t\t\treturn scope._nActiveBindings;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tcontrolInterpolants: {\n\t\t\t\tget total() {\n\n\t\t\t\t\treturn scope._controlInterpolants.length;\n\n\t\t\t\t},\n\t\t\t\tget inUse() {\n\n\t\t\t\t\treturn scope._nActiveControlInterpolants;\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t};\n\n\t},\n\n\t// Memory management for AnimationAction objects\n\n\t_isActiveAction: function ( action ) {\n\n\t\tvar index = action._cacheIndex;\n\t\treturn index !== null && index < this._nActiveActions;\n\n\t},\n\n\t_addInactiveAction: function ( action, clipUuid, rootUuid ) {\n\n\t\tvar actions = this._actions,\n\t\t\tactionsByClip = this._actionsByClip,\n\t\t\tactionsForClip = actionsByClip[ clipUuid ];\n\n\t\tif ( actionsForClip === undefined ) {\n\n\t\t\tactionsForClip = {\n\n\t\t\t\tknownActions: [ action ],\n\t\t\t\tactionByRoot: {}\n\n\t\t\t};\n\n\t\t\taction._byClipCacheIndex = 0;\n\n\t\t\tactionsByClip[ clipUuid ] = actionsForClip;\n\n\t\t} else {\n\n\t\t\tvar knownActions = actionsForClip.knownActions;\n\n\t\t\taction._byClipCacheIndex = knownActions.length;\n\t\t\tknownActions.push( action );\n\n\t\t}\n\n\t\taction._cacheIndex = actions.length;\n\t\tactions.push( action );\n\n\t\tactionsForClip.actionByRoot[ rootUuid ] = action;\n\n\t},\n\n\t_removeInactiveAction: function ( action ) {\n\n\t\tvar actions = this._actions,\n\t\t\tlastInactiveAction = actions[ actions.length - 1 ],\n\t\t\tcacheIndex = action._cacheIndex;\n\n\t\tlastInactiveAction._cacheIndex = cacheIndex;\n\t\tactions[ cacheIndex ] = lastInactiveAction;\n\t\tactions.pop();\n\n\t\taction._cacheIndex = null;\n\n\n\t\tvar clipUuid = action._clip.uuid,\n\t\t\tactionsByClip = this._actionsByClip,\n\t\t\tactionsForClip = actionsByClip[ clipUuid ],\n\t\t\tknownActionsForClip = actionsForClip.knownActions,\n\n\t\t\tlastKnownAction =\n\t\t\t\tknownActionsForClip[ knownActionsForClip.length - 1 ],\n\n\t\t\tbyClipCacheIndex = action._byClipCacheIndex;\n\n\t\tlastKnownAction._byClipCacheIndex = byClipCacheIndex;\n\t\tknownActionsForClip[ byClipCacheIndex ] = lastKnownAction;\n\t\tknownActionsForClip.pop();\n\n\t\taction._byClipCacheIndex = null;\n\n\n\t\tvar actionByRoot = actionsForClip.actionByRoot,\n\t\t\trootUuid = ( action._localRoot || this._root ).uuid;\n\n\t\tdelete actionByRoot[ rootUuid ];\n\n\t\tif ( knownActionsForClip.length === 0 ) {\n\n\t\t\tdelete actionsByClip[ clipUuid ];\n\n\t\t}\n\n\t\tthis._removeInactiveBindingsForAction( action );\n\n\t},\n\n\t_removeInactiveBindingsForAction: function ( action ) {\n\n\t\tvar bindings = action._propertyBindings;\n\t\tfor ( var i = 0, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tvar binding = bindings[ i ];\n\n\t\t\tif ( -- binding.referenceCount === 0 ) {\n\n\t\t\t\tthis._removeInactiveBinding( binding );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t_lendAction: function ( action ) {\n\n\t\t// [ active actions |  inactive actions  ]\n\t\t// [  active actions >| inactive actions ]\n\t\t//                 s        a\n\t\t//                  <-swap->\n\t\t//                 a        s\n\n\t\tvar actions = this._actions,\n\t\t\tprevIndex = action._cacheIndex,\n\n\t\t\tlastActiveIndex = this._nActiveActions ++,\n\n\t\t\tfirstInactiveAction = actions[ lastActiveIndex ];\n\n\t\taction._cacheIndex = lastActiveIndex;\n\t\tactions[ lastActiveIndex ] = action;\n\n\t\tfirstInactiveAction._cacheIndex = prevIndex;\n\t\tactions[ prevIndex ] = firstInactiveAction;\n\n\t},\n\n\t_takeBackAction: function ( action ) {\n\n\t\t// [  active actions  | inactive actions ]\n\t\t// [ active actions |< inactive actions  ]\n\t\t//        a        s\n\t\t//         <-swap->\n\t\t//        s        a\n\n\t\tvar actions = this._actions,\n\t\t\tprevIndex = action._cacheIndex,\n\n\t\t\tfirstInactiveIndex = -- this._nActiveActions,\n\n\t\t\tlastActiveAction = actions[ firstInactiveIndex ];\n\n\t\taction._cacheIndex = firstInactiveIndex;\n\t\tactions[ firstInactiveIndex ] = action;\n\n\t\tlastActiveAction._cacheIndex = prevIndex;\n\t\tactions[ prevIndex ] = lastActiveAction;\n\n\t},\n\n\t// Memory management for PropertyMixer objects\n\n\t_addInactiveBinding: function ( binding, rootUuid, trackName ) {\n\n\t\tvar bindingsByRoot = this._bindingsByRootAndName,\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ],\n\n\t\t\tbindings = this._bindings;\n\n\t\tif ( bindingByName === undefined ) {\n\n\t\t\tbindingByName = {};\n\t\t\tbindingsByRoot[ rootUuid ] = bindingByName;\n\n\t\t}\n\n\t\tbindingByName[ trackName ] = binding;\n\n\t\tbinding._cacheIndex = bindings.length;\n\t\tbindings.push( binding );\n\n\t},\n\n\t_removeInactiveBinding: function ( binding ) {\n\n\t\tvar bindings = this._bindings,\n\t\t\tpropBinding = binding.binding,\n\t\t\trootUuid = propBinding.rootNode.uuid,\n\t\t\ttrackName = propBinding.path,\n\t\t\tbindingsByRoot = this._bindingsByRootAndName,\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ],\n\n\t\t\tlastInactiveBinding = bindings[ bindings.length - 1 ],\n\t\t\tcacheIndex = binding._cacheIndex;\n\n\t\tlastInactiveBinding._cacheIndex = cacheIndex;\n\t\tbindings[ cacheIndex ] = lastInactiveBinding;\n\t\tbindings.pop();\n\n\t\tdelete bindingByName[ trackName ];\n\n\t\tif ( Object.keys( bindingByName ).length === 0 ) {\n\n\t\t\tdelete bindingsByRoot[ rootUuid ];\n\n\t\t}\n\n\t},\n\n\t_lendBinding: function ( binding ) {\n\n\t\tvar bindings = this._bindings,\n\t\t\tprevIndex = binding._cacheIndex,\n\n\t\t\tlastActiveIndex = this._nActiveBindings ++,\n\n\t\t\tfirstInactiveBinding = bindings[ lastActiveIndex ];\n\n\t\tbinding._cacheIndex = lastActiveIndex;\n\t\tbindings[ lastActiveIndex ] = binding;\n\n\t\tfirstInactiveBinding._cacheIndex = prevIndex;\n\t\tbindings[ prevIndex ] = firstInactiveBinding;\n\n\t},\n\n\t_takeBackBinding: function ( binding ) {\n\n\t\tvar bindings = this._bindings,\n\t\t\tprevIndex = binding._cacheIndex,\n\n\t\t\tfirstInactiveIndex = -- this._nActiveBindings,\n\n\t\t\tlastActiveBinding = bindings[ firstInactiveIndex ];\n\n\t\tbinding._cacheIndex = firstInactiveIndex;\n\t\tbindings[ firstInactiveIndex ] = binding;\n\n\t\tlastActiveBinding._cacheIndex = prevIndex;\n\t\tbindings[ prevIndex ] = lastActiveBinding;\n\n\t},\n\n\n\t// Memory management of Interpolants for weight and time scale\n\n\t_lendControlInterpolant: function () {\n\n\t\tvar interpolants = this._controlInterpolants,\n\t\t\tlastActiveIndex = this._nActiveControlInterpolants ++,\n\t\t\tinterpolant = interpolants[ lastActiveIndex ];\n\n\t\tif ( interpolant === undefined ) {\n\n\t\t\tinterpolant = new LinearInterpolant(\n\t\t\t\tnew Float32Array( 2 ), new Float32Array( 2 ),\n\t\t\t\t1, this._controlInterpolantsResultBuffer );\n\n\t\t\tinterpolant.__cacheIndex = lastActiveIndex;\n\t\t\tinterpolants[ lastActiveIndex ] = interpolant;\n\n\t\t}\n\n\t\treturn interpolant;\n\n\t},\n\n\t_takeBackControlInterpolant: function ( interpolant ) {\n\n\t\tvar interpolants = this._controlInterpolants,\n\t\t\tprevIndex = interpolant.__cacheIndex,\n\n\t\t\tfirstInactiveIndex = -- this._nActiveControlInterpolants,\n\n\t\t\tlastActiveInterpolant = interpolants[ firstInactiveIndex ];\n\n\t\tinterpolant.__cacheIndex = firstInactiveIndex;\n\t\tinterpolants[ firstInactiveIndex ] = interpolant;\n\n\t\tlastActiveInterpolant.__cacheIndex = prevIndex;\n\t\tinterpolants[ prevIndex ] = lastActiveInterpolant;\n\n\t},\n\n\t_controlInterpolantsResultBuffer: new Float32Array( 1 ),\n\n\t// return an action for a clip optionally using a custom root target\n\t// object (this method allocates a lot of dynamic memory in case a\n\t// previously unknown clip/root combination is specified)\n\tclipAction: function ( clip, optionalRoot ) {\n\n\t\tvar root = optionalRoot || this._root,\n\t\t\trootUuid = root.uuid,\n\n\t\t\tclipObject = typeof clip === 'string' ?\n\t\t\t\tAnimationClip.findByName( root, clip ) : clip,\n\n\t\t\tclipUuid = clipObject !== null ? clipObject.uuid : clip,\n\n\t\t\tactionsForClip = this._actionsByClip[ clipUuid ],\n\t\t\tprototypeAction = null;\n\n\t\tif ( actionsForClip !== undefined ) {\n\n\t\t\tvar existingAction =\n\t\t\t\t\tactionsForClip.actionByRoot[ rootUuid ];\n\n\t\t\tif ( existingAction !== undefined ) {\n\n\t\t\t\treturn existingAction;\n\n\t\t\t}\n\n\t\t\t// we know the clip, so we don't have to parse all\n\t\t\t// the bindings again but can just copy\n\t\t\tprototypeAction = actionsForClip.knownActions[ 0 ];\n\n\t\t\t// also, take the clip from the prototype action\n\t\t\tif ( clipObject === null )\n\t\t\t\tclipObject = prototypeAction._clip;\n\n\t\t}\n\n\t\t// clip must be known when specified via string\n\t\tif ( clipObject === null ) return null;\n\n\t\t// allocate all resources required to run it\n\t\tvar newAction = new AnimationAction( this, clipObject, optionalRoot );\n\n\t\tthis._bindAction( newAction, prototypeAction );\n\n\t\t// and make the action known to the memory manager\n\t\tthis._addInactiveAction( newAction, clipUuid, rootUuid );\n\n\t\treturn newAction;\n\n\t},\n\n\t// get an existing action\n\texistingAction: function ( clip, optionalRoot ) {\n\n\t\tvar root = optionalRoot || this._root,\n\t\t\trootUuid = root.uuid,\n\n\t\t\tclipObject = typeof clip === 'string' ?\n\t\t\t\tAnimationClip.findByName( root, clip ) : clip,\n\n\t\t\tclipUuid = clipObject ? clipObject.uuid : clip,\n\n\t\t\tactionsForClip = this._actionsByClip[ clipUuid ];\n\n\t\tif ( actionsForClip !== undefined ) {\n\n\t\t\treturn actionsForClip.actionByRoot[ rootUuid ] || null;\n\n\t\t}\n\n\t\treturn null;\n\n\t},\n\n\t// deactivates all previously scheduled actions\n\tstopAllAction: function () {\n\n\t\tvar actions = this._actions,\n\t\t\tnActions = this._nActiveActions,\n\t\t\tbindings = this._bindings,\n\t\t\tnBindings = this._nActiveBindings;\n\n\t\tthis._nActiveActions = 0;\n\t\tthis._nActiveBindings = 0;\n\n\t\tfor ( var i = 0; i !== nActions; ++ i ) {\n\n\t\t\tactions[ i ].reset();\n\n\t\t}\n\n\t\tfor ( var i = 0; i !== nBindings; ++ i ) {\n\n\t\t\tbindings[ i ].useCount = 0;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// advance the time and update apply the animation\n\tupdate: function ( deltaTime ) {\n\n\t\tdeltaTime *= this.timeScale;\n\n\t\tvar actions = this._actions,\n\t\t\tnActions = this._nActiveActions,\n\n\t\t\ttime = this.time += deltaTime,\n\t\t\ttimeDirection = Math.sign( deltaTime ),\n\n\t\t\taccuIndex = this._accuIndex ^= 1;\n\n\t\t// run active actions\n\n\t\tfor ( var i = 0; i !== nActions; ++ i ) {\n\n\t\t\tvar action = actions[ i ];\n\n\t\t\taction._update( time, deltaTime, timeDirection, accuIndex );\n\n\t\t}\n\n\t\t// update scene graph\n\n\t\tvar bindings = this._bindings,\n\t\t\tnBindings = this._nActiveBindings;\n\n\t\tfor ( var i = 0; i !== nBindings; ++ i ) {\n\n\t\t\tbindings[ i ].apply( accuIndex );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// Allows you to seek to a specific time in an animation.\n\tsetTime: function ( timeInSeconds ) {\n\n\t\tthis.time = 0; // Zero out time attribute for AnimationMixer object;\n\t\tfor ( var i = 0; i < this._actions.length; i ++ ) {\n\n\t\t\tthis._actions[ i ].time = 0; // Zero out time attribute for all associated AnimationAction objects.\n\n\t\t}\n\n\t\treturn this.update( timeInSeconds ); // Update used to set exact time. Returns \"this\" AnimationMixer object.\n\n\t},\n\n\t// return this mixer's root target object\n\tgetRoot: function () {\n\n\t\treturn this._root;\n\n\t},\n\n\t// free all resources specific to a particular clip\n\tuncacheClip: function ( clip ) {\n\n\t\tvar actions = this._actions,\n\t\t\tclipUuid = clip.uuid,\n\t\t\tactionsByClip = this._actionsByClip,\n\t\t\tactionsForClip = actionsByClip[ clipUuid ];\n\n\t\tif ( actionsForClip !== undefined ) {\n\n\t\t\t// note: just calling _removeInactiveAction would mess up the\n\t\t\t// iteration state and also require updating the state we can\n\t\t\t// just throw away\n\n\t\t\tvar actionsToRemove = actionsForClip.knownActions;\n\n\t\t\tfor ( var i = 0, n = actionsToRemove.length; i !== n; ++ i ) {\n\n\t\t\t\tvar action = actionsToRemove[ i ];\n\n\t\t\t\tthis._deactivateAction( action );\n\n\t\t\t\tvar cacheIndex = action._cacheIndex,\n\t\t\t\t\tlastInactiveAction = actions[ actions.length - 1 ];\n\n\t\t\t\taction._cacheIndex = null;\n\t\t\t\taction._byClipCacheIndex = null;\n\n\t\t\t\tlastInactiveAction._cacheIndex = cacheIndex;\n\t\t\t\tactions[ cacheIndex ] = lastInactiveAction;\n\t\t\t\tactions.pop();\n\n\t\t\t\tthis._removeInactiveBindingsForAction( action );\n\n\t\t\t}\n\n\t\t\tdelete actionsByClip[ clipUuid ];\n\n\t\t}\n\n\t},\n\n\t// free all resources specific to a particular root target object\n\tuncacheRoot: function ( root ) {\n\n\t\tvar rootUuid = root.uuid,\n\t\t\tactionsByClip = this._actionsByClip;\n\n\t\tfor ( var clipUuid in actionsByClip ) {\n\n\t\t\tvar actionByRoot = actionsByClip[ clipUuid ].actionByRoot,\n\t\t\t\taction = actionByRoot[ rootUuid ];\n\n\t\t\tif ( action !== undefined ) {\n\n\t\t\t\tthis._deactivateAction( action );\n\t\t\t\tthis._removeInactiveAction( action );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar bindingsByRoot = this._bindingsByRootAndName,\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ];\n\n\t\tif ( bindingByName !== undefined ) {\n\n\t\t\tfor ( var trackName in bindingByName ) {\n\n\t\t\t\tvar binding = bindingByName[ trackName ];\n\t\t\t\tbinding.restoreOriginalState();\n\t\t\t\tthis._removeInactiveBinding( binding );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t// remove a targeted clip from the cache\n\tuncacheAction: function ( clip, optionalRoot ) {\n\n\t\tvar action = this.existingAction( clip, optionalRoot );\n\n\t\tif ( action !== null ) {\n\n\t\t\tthis._deactivateAction( action );\n\t\t\tthis._removeInactiveAction( action );\n\n\t\t}\n\n\t}\n\n} );\n\n\nexport { AnimationMixer };\n","/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { ShapePath } from './ShapePath.js';\n\n\nfunction Font( data ) {\n\n\tthis.type = 'Font';\n\n\tthis.data = data;\n\n}\n\nObject.assign( Font.prototype, {\n\n\tisFont: true,\n\n\tgenerateShapes: function ( text, size ) {\n\n\t\tif ( size === undefined ) size = 100;\n\n\t\tvar shapes = [];\n\t\tvar paths = createPaths( text, size, this.data );\n\n\t\tfor ( var p = 0, pl = paths.length; p < pl; p ++ ) {\n\n\t\t\tArray.prototype.push.apply( shapes, paths[ p ].toShapes() );\n\n\t\t}\n\n\t\treturn shapes;\n\n\t}\n\n} );\n\nfunction createPaths( text, size, data ) {\n\n\tvar chars = Array.from ? Array.from( text ) : String( text ).split( '' ); // see #13988\n\tvar scale = size / data.resolution;\n\tvar line_height = ( data.boundingBox.yMax - data.boundingBox.yMin + data.underlineThickness ) * scale;\n\n\tvar paths = [];\n\n\tvar offsetX = 0, offsetY = 0;\n\n\tfor ( var i = 0; i < chars.length; i ++ ) {\n\n\t\tvar char = chars[ i ];\n\n\t\tif ( char === '\\n' ) {\n\n\t\t\toffsetX = 0;\n\t\t\toffsetY -= line_height;\n\n\t\t} else {\n\n\t\t\tvar ret = createPath( char, scale, offsetX, offsetY, data );\n\t\t\toffsetX += ret.offsetX;\n\t\t\tpaths.push( ret.path );\n\n\t\t}\n\n\t}\n\n\treturn paths;\n\n}\n\nfunction createPath( char, scale, offsetX, offsetY, data ) {\n\n\tvar glyph = data.glyphs[ char ] || data.glyphs[ '?' ];\n\n\tif ( ! glyph ) {\n\n\t\tconsole.error( 'THREE.Font: character \"' + char + '\" does not exists in font family ' + data.familyName + '.' );\n\n\t\treturn;\n\n\t}\n\n\tvar path = new ShapePath();\n\n\tvar x, y, cpx, cpy, cpx1, cpy1, cpx2, cpy2;\n\n\tif ( glyph.o ) {\n\n\t\tvar outline = glyph._cachedOutline || ( glyph._cachedOutline = glyph.o.split( ' ' ) );\n\n\t\tfor ( var i = 0, l = outline.length; i < l; ) {\n\n\t\t\tvar action = outline[ i ++ ];\n\n\t\t\tswitch ( action ) {\n\n\t\t\t\tcase 'm': // moveTo\n\n\t\t\t\t\tx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\ty = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\tpath.moveTo( x, y );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'l': // lineTo\n\n\t\t\t\t\tx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\ty = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\tpath.lineTo( x, y );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'q': // quadraticCurveTo\n\n\t\t\t\t\tcpx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy = outline[ i ++ ] * scale + offsetY;\n\t\t\t\t\tcpx1 = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy1 = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\tpath.quadraticCurveTo( cpx1, cpy1, cpx, cpy );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'b': // bezierCurveTo\n\n\t\t\t\t\tcpx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy = outline[ i ++ ] * scale + offsetY;\n\t\t\t\t\tcpx1 = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy1 = outline[ i ++ ] * scale + offsetY;\n\t\t\t\t\tcpx2 = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy2 = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\tpath.bezierCurveTo( cpx1, cpy1, cpx2, cpy2, cpx, cpy );\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn { offsetX: glyph.ha * scale, path: path };\n\n}\n\nexport { Font };\n","import { Font } from '../extras/core/Font.js';\nimport { FileLoader } from './FileLoader.js';\nimport { Loader } from './Loader.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction FontLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nFontLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: FontLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tvar json;\n\n\t\t\ttry {\n\n\t\t\t\tjson = JSON.parse( text );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tconsole.warn( 'THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead.' );\n\t\t\t\tjson = JSON.parse( text.substring( 65, text.length - 2 ) );\n\n\t\t\t}\n\n\t\t\tvar font = scope.parse( json );\n\n\t\t\tif ( onLoad ) onLoad( font );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tparse: function ( json ) {\n\n\t\treturn new Font( json );\n\n\t}\n\n} );\n\n\nexport { FontLoader };\n","import { Matrix4 } from '../math/Matrix4.js';\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author michael guerrero / http://realitymeltdown.com\n * @author ikerr / http://verold.com\n */\n\nvar _offsetMatrix = new Matrix4();\nvar _identityMatrix = new Matrix4();\n\nfunction Skeleton( bones, boneInverses ) {\n\n\t// copy the bone array\n\n\tbones = bones || [];\n\n\tthis.bones = bones.slice( 0 );\n\tthis.boneMatrices = new Float32Array( this.bones.length * 16 );\n\n\tthis.frame = - 1;\n\n\t// use the supplied bone inverses or calculate the inverses\n\n\tif ( boneInverses === undefined ) {\n\n\t\tthis.calculateInverses();\n\n\t} else {\n\n\t\tif ( this.bones.length === boneInverses.length ) {\n\n\t\t\tthis.boneInverses = boneInverses.slice( 0 );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.Skeleton boneInverses is the wrong length.' );\n\n\t\t\tthis.boneInverses = [];\n\n\t\t\tfor ( var i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\t\tthis.boneInverses.push( new Matrix4() );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nObject.assign( Skeleton.prototype, {\n\n\tcalculateInverses: function () {\n\n\t\tthis.boneInverses = [];\n\n\t\tfor ( var i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tvar inverse = new Matrix4();\n\n\t\t\tif ( this.bones[ i ] ) {\n\n\t\t\t\tinverse.getInverse( this.bones[ i ].matrixWorld );\n\n\t\t\t}\n\n\t\t\tthis.boneInverses.push( inverse );\n\n\t\t}\n\n\t},\n\n\tpose: function () {\n\n\t\tvar bone, i, il;\n\n\t\t// recover the bind-time world matrices\n\n\t\tfor ( i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tbone = this.bones[ i ];\n\n\t\t\tif ( bone ) {\n\n\t\t\t\tbone.matrixWorld.getInverse( this.boneInverses[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// compute the local matrices, positions, rotations and scales\n\n\t\tfor ( i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tbone = this.bones[ i ];\n\n\t\t\tif ( bone ) {\n\n\t\t\t\tif ( bone.parent && bone.parent.isBone ) {\n\n\t\t\t\t\tbone.matrix.getInverse( bone.parent.matrixWorld );\n\t\t\t\t\tbone.matrix.multiply( bone.matrixWorld );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tbone.matrix.copy( bone.matrixWorld );\n\n\t\t\t\t}\n\n\t\t\t\tbone.matrix.decompose( bone.position, bone.quaternion, bone.scale );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tupdate: function () {\n\n\t\tvar bones = this.bones;\n\t\tvar boneInverses = this.boneInverses;\n\t\tvar boneMatrices = this.boneMatrices;\n\t\tvar boneTexture = this.boneTexture;\n\n\t\t// flatten bone matrices to array\n\n\t\tfor ( var i = 0, il = bones.length; i < il; i ++ ) {\n\n\t\t\t// compute the offset between the current and the original transform\n\n\t\t\tvar matrix = bones[ i ] ? bones[ i ].matrixWorld : _identityMatrix;\n\n\t\t\t_offsetMatrix.multiplyMatrices( matrix, boneInverses[ i ] );\n\t\t\t_offsetMatrix.toArray( boneMatrices, i * 16 );\n\n\t\t}\n\n\t\tif ( boneTexture !== undefined ) {\n\n\t\t\tboneTexture.needsUpdate = true;\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new Skeleton( this.bones, this.boneInverses );\n\n\t},\n\n\tgetBoneByName: function ( name ) {\n\n\t\tfor ( var i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tvar bone = this.bones[ i ];\n\n\t\t\tif ( bone.name === name ) {\n\n\t\t\t\treturn bone;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn undefined;\n\n\t}\n\n} );\n\n\nexport { Skeleton };\n","/**\n * @author clockworkgeek / https://github.com/clockworkgeek\n * @author timothypratley / https://github.com/timothypratley\n * @author WestLangley / http://github.com/WestLangley\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Vector2 } from '../math/Vector2.js';\n\n// PolyhedronGeometry\n\nfunction PolyhedronGeometry( vertices, indices, radius, detail ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'PolyhedronGeometry';\n\n\tthis.parameters = {\n\t\tvertices: vertices,\n\t\tindices: indices,\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n\tthis.fromBufferGeometry( new PolyhedronBufferGeometry( vertices, indices, radius, detail ) );\n\tthis.mergeVertices();\n\n}\n\nPolyhedronGeometry.prototype = Object.create( Geometry.prototype );\nPolyhedronGeometry.prototype.constructor = PolyhedronGeometry;\n\n// PolyhedronBufferGeometry\n\nfunction PolyhedronBufferGeometry( vertices, indices, radius, detail ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'PolyhedronBufferGeometry';\n\n\tthis.parameters = {\n\t\tvertices: vertices,\n\t\tindices: indices,\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n\tradius = radius || 1;\n\tdetail = detail || 0;\n\n\t// default buffer data\n\n\tvar vertexBuffer = [];\n\tvar uvBuffer = [];\n\n\t// the subdivision creates the vertex buffer data\n\n\tsubdivide( detail );\n\n\t// all vertices should lie on a conceptual sphere with a given radius\n\n\tapplyRadius( radius );\n\n\t// finally, create the uv data\n\n\tgenerateUVs();\n\n\t// build non-indexed geometry\n\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertexBuffer, 3 ) );\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( vertexBuffer.slice(), 3 ) );\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvBuffer, 2 ) );\n\n\tif ( detail === 0 ) {\n\n\t\tthis.computeVertexNormals(); // flat normals\n\n\t} else {\n\n\t\tthis.normalizeNormals(); // smooth normals\n\n\t}\n\n\t// helper functions\n\n\tfunction subdivide( detail ) {\n\n\t\tvar a = new Vector3();\n\t\tvar b = new Vector3();\n\t\tvar c = new Vector3();\n\n\t\t// iterate over all faces and apply a subdivison with the given detail value\n\n\t\tfor ( var i = 0; i < indices.length; i += 3 ) {\n\n\t\t\t// get the vertices of the face\n\n\t\t\tgetVertexByIndex( indices[ i + 0 ], a );\n\t\t\tgetVertexByIndex( indices[ i + 1 ], b );\n\t\t\tgetVertexByIndex( indices[ i + 2 ], c );\n\n\t\t\t// perform subdivision\n\n\t\t\tsubdivideFace( a, b, c, detail );\n\n\t\t}\n\n\t}\n\n\tfunction subdivideFace( a, b, c, detail ) {\n\n\t\tvar cols = Math.pow( 2, detail );\n\n\t\t// we use this multidimensional array as a data structure for creating the subdivision\n\n\t\tvar v = [];\n\n\t\tvar i, j;\n\n\t\t// construct all of the vertices for this subdivision\n\n\t\tfor ( i = 0; i <= cols; i ++ ) {\n\n\t\t\tv[ i ] = [];\n\n\t\t\tvar aj = a.clone().lerp( c, i / cols );\n\t\t\tvar bj = b.clone().lerp( c, i / cols );\n\n\t\t\tvar rows = cols - i;\n\n\t\t\tfor ( j = 0; j <= rows; j ++ ) {\n\n\t\t\t\tif ( j === 0 && i === cols ) {\n\n\t\t\t\t\tv[ i ][ j ] = aj;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tv[ i ][ j ] = aj.clone().lerp( bj, j / rows );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// construct all of the faces\n\n\t\tfor ( i = 0; i < cols; i ++ ) {\n\n\t\t\tfor ( j = 0; j < 2 * ( cols - i ) - 1; j ++ ) {\n\n\t\t\t\tvar k = Math.floor( j / 2 );\n\n\t\t\t\tif ( j % 2 === 0 ) {\n\n\t\t\t\t\tpushVertex( v[ i ][ k + 1 ] );\n\t\t\t\t\tpushVertex( v[ i + 1 ][ k ] );\n\t\t\t\t\tpushVertex( v[ i ][ k ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tpushVertex( v[ i ][ k + 1 ] );\n\t\t\t\t\tpushVertex( v[ i + 1 ][ k + 1 ] );\n\t\t\t\t\tpushVertex( v[ i + 1 ][ k ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction applyRadius( radius ) {\n\n\t\tvar vertex = new Vector3();\n\n\t\t// iterate over the entire buffer and apply the radius to each vertex\n\n\t\tfor ( var i = 0; i < vertexBuffer.length; i += 3 ) {\n\n\t\t\tvertex.x = vertexBuffer[ i + 0 ];\n\t\t\tvertex.y = vertexBuffer[ i + 1 ];\n\t\t\tvertex.z = vertexBuffer[ i + 2 ];\n\n\t\t\tvertex.normalize().multiplyScalar( radius );\n\n\t\t\tvertexBuffer[ i + 0 ] = vertex.x;\n\t\t\tvertexBuffer[ i + 1 ] = vertex.y;\n\t\t\tvertexBuffer[ i + 2 ] = vertex.z;\n\n\t\t}\n\n\t}\n\n\tfunction generateUVs() {\n\n\t\tvar vertex = new Vector3();\n\n\t\tfor ( var i = 0; i < vertexBuffer.length; i += 3 ) {\n\n\t\t\tvertex.x = vertexBuffer[ i + 0 ];\n\t\t\tvertex.y = vertexBuffer[ i + 1 ];\n\t\t\tvertex.z = vertexBuffer[ i + 2 ];\n\n\t\t\tvar u = azimuth( vertex ) / 2 / Math.PI + 0.5;\n\t\t\tvar v = inclination( vertex ) / Math.PI + 0.5;\n\t\t\tuvBuffer.push( u, 1 - v );\n\n\t\t}\n\n\t\tcorrectUVs();\n\n\t\tcorrectSeam();\n\n\t}\n\n\tfunction correctSeam() {\n\n\t\t// handle case when face straddles the seam, see #3269\n\n\t\tfor ( var i = 0; i < uvBuffer.length; i += 6 ) {\n\n\t\t\t// uv data of a single face\n\n\t\t\tvar x0 = uvBuffer[ i + 0 ];\n\t\t\tvar x1 = uvBuffer[ i + 2 ];\n\t\t\tvar x2 = uvBuffer[ i + 4 ];\n\n\t\t\tvar max = Math.max( x0, x1, x2 );\n\t\t\tvar min = Math.min( x0, x1, x2 );\n\n\t\t\t// 0.9 is somewhat arbitrary\n\n\t\t\tif ( max > 0.9 && min < 0.1 ) {\n\n\t\t\t\tif ( x0 < 0.2 ) uvBuffer[ i + 0 ] += 1;\n\t\t\t\tif ( x1 < 0.2 ) uvBuffer[ i + 2 ] += 1;\n\t\t\t\tif ( x2 < 0.2 ) uvBuffer[ i + 4 ] += 1;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction pushVertex( vertex ) {\n\n\t\tvertexBuffer.push( vertex.x, vertex.y, vertex.z );\n\n\t}\n\n\tfunction getVertexByIndex( index, vertex ) {\n\n\t\tvar stride = index * 3;\n\n\t\tvertex.x = vertices[ stride + 0 ];\n\t\tvertex.y = vertices[ stride + 1 ];\n\t\tvertex.z = vertices[ stride + 2 ];\n\n\t}\n\n\tfunction correctUVs() {\n\n\t\tvar a = new Vector3();\n\t\tvar b = new Vector3();\n\t\tvar c = new Vector3();\n\n\t\tvar centroid = new Vector3();\n\n\t\tvar uvA = new Vector2();\n\t\tvar uvB = new Vector2();\n\t\tvar uvC = new Vector2();\n\n\t\tfor ( var i = 0, j = 0; i < vertexBuffer.length; i += 9, j += 6 ) {\n\n\t\t\ta.set( vertexBuffer[ i + 0 ], vertexBuffer[ i + 1 ], vertexBuffer[ i + 2 ] );\n\t\t\tb.set( vertexBuffer[ i + 3 ], vertexBuffer[ i + 4 ], vertexBuffer[ i + 5 ] );\n\t\t\tc.set( vertexBuffer[ i + 6 ], vertexBuffer[ i + 7 ], vertexBuffer[ i + 8 ] );\n\n\t\t\tuvA.set( uvBuffer[ j + 0 ], uvBuffer[ j + 1 ] );\n\t\t\tuvB.set( uvBuffer[ j + 2 ], uvBuffer[ j + 3 ] );\n\t\t\tuvC.set( uvBuffer[ j + 4 ], uvBuffer[ j + 5 ] );\n\n\t\t\tcentroid.copy( a ).add( b ).add( c ).divideScalar( 3 );\n\n\t\t\tvar azi = azimuth( centroid );\n\n\t\t\tcorrectUV( uvA, j + 0, a, azi );\n\t\t\tcorrectUV( uvB, j + 2, b, azi );\n\t\t\tcorrectUV( uvC, j + 4, c, azi );\n\n\t\t}\n\n\t}\n\n\tfunction correctUV( uv, stride, vector, azimuth ) {\n\n\t\tif ( ( azimuth < 0 ) && ( uv.x === 1 ) ) {\n\n\t\t\tuvBuffer[ stride ] = uv.x - 1;\n\n\t\t}\n\n\t\tif ( ( vector.x === 0 ) && ( vector.z === 0 ) ) {\n\n\t\t\tuvBuffer[ stride ] = azimuth / 2 / Math.PI + 0.5;\n\n\t\t}\n\n\t}\n\n\t// Angle around the Y axis, counter-clockwise when looking from above.\n\n\tfunction azimuth( vector ) {\n\n\t\treturn Math.atan2( vector.z, - vector.x );\n\n\t}\n\n\n\t// Angle above the XZ plane.\n\n\tfunction inclination( vector ) {\n\n\t\treturn Math.atan2( - vector.y, Math.sqrt( ( vector.x * vector.x ) + ( vector.z * vector.z ) ) );\n\n\t}\n\n}\n\nPolyhedronBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nPolyhedronBufferGeometry.prototype.constructor = PolyhedronBufferGeometry;\n\n\nexport { PolyhedronGeometry, PolyhedronBufferGeometry };\n","/**\n * Abstract base class of interpolants over parametric samples.\n *\n * The parameter domain is one dimensional, typically the time or a path\n * along a curve defined by the data.\n *\n * The sample values can have any dimensionality and derived classes may\n * apply special interpretations to the data.\n *\n * This class provides the interval seek in a Template Method, deferring\n * the actual interpolation to derived classes.\n *\n * Time complexity is O(1) for linear access crossing at most two points\n * and O(log N) for random access, where N is the number of positions.\n *\n * References:\n *\n * \t\thttp://www.oodesign.com/template-method-pattern.html\n *\n * @author tschw\n */\n\nfunction Interpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tthis.parameterPositions = parameterPositions;\n\tthis._cachedIndex = 0;\n\n\tthis.resultBuffer = resultBuffer !== undefined ?\n\t\tresultBuffer : new sampleValues.constructor( sampleSize );\n\tthis.sampleValues = sampleValues;\n\tthis.valueSize = sampleSize;\n\n}\n\nObject.assign( Interpolant.prototype, {\n\n\tevaluate: function ( t ) {\n\n\t\tvar pp = this.parameterPositions,\n\t\t\ti1 = this._cachedIndex,\n\n\t\t\tt1 = pp[ i1 ],\n\t\t\tt0 = pp[ i1 - 1 ];\n\n\t\tvalidate_interval: {\n\n\t\t\tseek: {\n\n\t\t\t\tvar right;\n\n\t\t\t\tlinear_scan: {\n\n\t\t\t\t\t//- See http://jsperf.com/comparison-to-undefined/3\n\t\t\t\t\t//- slower code:\n\t\t\t\t\t//-\n\t\t\t\t\t//- \t\t\t\tif ( t >= t1 || t1 === undefined ) {\n\t\t\t\t\tforward_scan: if ( ! ( t < t1 ) ) {\n\n\t\t\t\t\t\tfor ( var giveUpAt = i1 + 2; ; ) {\n\n\t\t\t\t\t\t\tif ( t1 === undefined ) {\n\n\t\t\t\t\t\t\t\tif ( t < t0 ) break forward_scan;\n\n\t\t\t\t\t\t\t\t// after end\n\n\t\t\t\t\t\t\t\ti1 = pp.length;\n\t\t\t\t\t\t\t\tthis._cachedIndex = i1;\n\t\t\t\t\t\t\t\treturn this.afterEnd_( i1 - 1, t, t0 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\n\n\t\t\t\t\t\t\tt0 = t1;\n\t\t\t\t\t\t\tt1 = pp[ ++ i1 ];\n\n\t\t\t\t\t\t\tif ( t < t1 ) {\n\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\n\t\t\t\t\t\t\t\tbreak seek;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// prepare binary search on the right side of the index\n\t\t\t\t\t\tright = pp.length;\n\t\t\t\t\t\tbreak linear_scan;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t//- slower code:\n\t\t\t\t\t//-\t\t\t\t\tif ( t < t0 || t0 === undefined ) {\n\t\t\t\t\tif ( ! ( t >= t0 ) ) {\n\n\t\t\t\t\t\t// looping?\n\n\t\t\t\t\t\tvar t1global = pp[ 1 ];\n\n\t\t\t\t\t\tif ( t < t1global ) {\n\n\t\t\t\t\t\t\ti1 = 2; // + 1, using the scan for the details\n\t\t\t\t\t\t\tt0 = t1global;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// linear reverse scan\n\n\t\t\t\t\t\tfor ( var giveUpAt = i1 - 2; ; ) {\n\n\t\t\t\t\t\t\tif ( t0 === undefined ) {\n\n\t\t\t\t\t\t\t\t// before start\n\n\t\t\t\t\t\t\t\tthis._cachedIndex = 0;\n\t\t\t\t\t\t\t\treturn this.beforeStart_( 0, t, t1 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\n\n\t\t\t\t\t\t\tt1 = t0;\n\t\t\t\t\t\t\tt0 = pp[ -- i1 - 1 ];\n\n\t\t\t\t\t\t\tif ( t >= t0 ) {\n\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\n\t\t\t\t\t\t\t\tbreak seek;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// prepare binary search on the left side of the index\n\t\t\t\t\t\tright = i1;\n\t\t\t\t\t\ti1 = 0;\n\t\t\t\t\t\tbreak linear_scan;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// the interval is valid\n\n\t\t\t\t\tbreak validate_interval;\n\n\t\t\t\t} // linear scan\n\n\t\t\t\t// binary search\n\n\t\t\t\twhile ( i1 < right ) {\n\n\t\t\t\t\tvar mid = ( i1 + right ) >>> 1;\n\n\t\t\t\t\tif ( t < pp[ mid ] ) {\n\n\t\t\t\t\t\tright = mid;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ti1 = mid + 1;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tt1 = pp[ i1 ];\n\t\t\t\tt0 = pp[ i1 - 1 ];\n\n\t\t\t\t// check boundary cases, again\n\n\t\t\t\tif ( t0 === undefined ) {\n\n\t\t\t\t\tthis._cachedIndex = 0;\n\t\t\t\t\treturn this.beforeStart_( 0, t, t1 );\n\n\t\t\t\t}\n\n\t\t\t\tif ( t1 === undefined ) {\n\n\t\t\t\t\ti1 = pp.length;\n\t\t\t\t\tthis._cachedIndex = i1;\n\t\t\t\t\treturn this.afterEnd_( i1 - 1, t0, t );\n\n\t\t\t\t}\n\n\t\t\t} // seek\n\n\t\t\tthis._cachedIndex = i1;\n\n\t\t\tthis.intervalChanged_( i1, t0, t1 );\n\n\t\t} // validate_interval\n\n\t\treturn this.interpolate_( i1, t0, t, t1 );\n\n\t},\n\n\tsettings: null, // optional, subclass-specific settings structure\n\t// Note: The indirection allows central control of many interpolants.\n\n\t// --- Protected interface\n\n\tDefaultSettings_: {},\n\n\tgetSettings_: function () {\n\n\t\treturn this.settings || this.DefaultSettings_;\n\n\t},\n\n\tcopySampleValue_: function ( index ) {\n\n\t\t// copies a sample value to the result buffer\n\n\t\tvar result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\t\t\toffset = index * stride;\n\n\t\tfor ( var i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] = values[ offset + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t},\n\n\t// Template methods for derived classes:\n\n\tinterpolate_: function ( /* i1, t0, t, t1 */ ) {\n\n\t\tthrow new Error( 'call to abstract method' );\n\t\t// implementations shall return this.resultBuffer\n\n\t},\n\n\tintervalChanged_: function ( /* i1, t0, t1 */ ) {\n\n\t\t// empty\n\n\t}\n\n} );\n\n//!\\ DECLARE ALIAS AFTER assign prototype !\nObject.assign( Interpolant.prototype, {\n\n\t//( 0, t, t0 ), returns this.resultBuffer\n\tbeforeStart_: Interpolant.prototype.copySampleValue_,\n\n\t//( N-1, tN-1, t ), returns this.resultBuffer\n\tafterEnd_: Interpolant.prototype.copySampleValue_,\n\n} );\n\n\nexport { Interpolant };\n","/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nimport { Texture } from './Texture.js';\nimport { NearestFilter } from '../constants.js';\n\nfunction DataTexture( data, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding ) {\n\n\tTexture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\tthis.image = { data: data || null, width: width || 1, height: height || 1 };\n\n\tthis.magFilter = magFilter !== undefined ? magFilter : NearestFilter;\n\tthis.minFilter = minFilter !== undefined ? minFilter : NearestFilter;\n\n\tthis.generateMipmaps = false;\n\tthis.flipY = false;\n\tthis.unpackAlignment = 1;\n\n\tthis.needsUpdate = true;\n\n}\n\nDataTexture.prototype = Object.create( Texture.prototype );\nDataTexture.prototype.constructor = DataTexture;\n\nDataTexture.prototype.isDataTexture = true;\n\n\nexport { DataTexture };\n","import { Sphere } from '../math/Sphere.js';\nimport { Ray } from '../math/Ray.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { Object3D } from '../core/Object3D.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { PointsMaterial } from '../materials/PointsMaterial.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nvar _inverseMatrix = new Matrix4();\nvar _ray = new Ray();\nvar _sphere = new Sphere();\nvar _position = new Vector3();\n\nfunction Points( geometry, material ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Points';\n\n\tthis.geometry = geometry !== undefined ? geometry : new BufferGeometry();\n\tthis.material = material !== undefined ? material : new PointsMaterial( { color: Math.random() * 0xffffff } );\n\n\tthis.updateMorphTargets();\n\n}\n\nPoints.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Points,\n\n\tisPoints: true,\n\n\traycast: function ( raycaster, intersects ) {\n\n\t\tvar geometry = this.geometry;\n\t\tvar matrixWorld = this.matrixWorld;\n\t\tvar threshold = raycaster.params.Points.threshold;\n\n\t\t// Checking boundingSphere distance to ray\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere.copy( geometry.boundingSphere );\n\t\t_sphere.applyMatrix4( matrixWorld );\n\t\t_sphere.radius += threshold;\n\n\t\tif ( raycaster.ray.intersectsSphere( _sphere ) === false ) return;\n\n\t\t//\n\n\t\t_inverseMatrix.getInverse( matrixWorld );\n\t\t_ray.copy( raycaster.ray ).applyMatrix4( _inverseMatrix );\n\n\t\tvar localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\n\t\tvar localThresholdSq = localThreshold * localThreshold;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tvar index = geometry.index;\n\t\t\tvar attributes = geometry.attributes;\n\t\t\tvar positions = attributes.position.array;\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\tvar indices = index.array;\n\n\t\t\t\tfor ( var i = 0, il = indices.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar a = indices[ i ];\n\n\t\t\t\t\t_position.fromArray( positions, a * 3 );\n\n\t\t\t\t\ttestPoint( _position, a, localThresholdSq, matrixWorld, raycaster, intersects, this );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tfor ( var i = 0, l = positions.length / 3; i < l; i ++ ) {\n\n\t\t\t\t\t_position.fromArray( positions, i * 3 );\n\n\t\t\t\t\ttestPoint( _position, i, localThresholdSq, matrixWorld, raycaster, intersects, this );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tvar vertices = geometry.vertices;\n\n\t\t\tfor ( var i = 0, l = vertices.length; i < l; i ++ ) {\n\n\t\t\t\ttestPoint( vertices[ i ], i, localThresholdSq, matrixWorld, raycaster, intersects, this );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tupdateMorphTargets: function () {\n\n\t\tvar geometry = this.geometry;\n\t\tvar m, ml, name;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tvar morphAttributes = geometry.morphAttributes;\n\t\t\tvar keys = Object.keys( morphAttributes );\n\n\t\t\tif ( keys.length > 0 ) {\n\n\t\t\t\tvar morphAttribute = morphAttributes[ keys[ 0 ] ];\n\n\t\t\t\tif ( morphAttribute !== undefined ) {\n\n\t\t\t\t\tthis.morphTargetInfluences = [];\n\t\t\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\t\t\tfor ( m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\n\n\t\t\t\t\t\tname = morphAttribute[ m ].name || String( m );\n\n\t\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tvar morphTargets = geometry.morphTargets;\n\n\t\t\tif ( morphTargets !== undefined && morphTargets.length > 0 ) {\n\n\t\t\t\tconsole.error( 'THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.' );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.geometry, this.material ).copy( this );\n\n\t}\n\n} );\n\nfunction testPoint( point, index, localThresholdSq, matrixWorld, raycaster, intersects, object ) {\n\n\tvar rayPointDistanceSq = _ray.distanceSqToPoint( point );\n\n\tif ( rayPointDistanceSq < localThresholdSq ) {\n\n\t\tvar intersectPoint = new Vector3();\n\n\t\t_ray.closestPointToPoint( point, intersectPoint );\n\t\tintersectPoint.applyMatrix4( matrixWorld );\n\n\t\tvar distance = raycaster.ray.origin.distanceTo( intersectPoint );\n\n\t\tif ( distance < raycaster.near || distance > raycaster.far ) return;\n\n\t\tintersects.push( {\n\n\t\t\tdistance: distance,\n\t\t\tdistanceToRay: Math.sqrt( rayPointDistanceSq ),\n\t\t\tpoint: intersectPoint,\n\t\t\tindex: index,\n\t\t\tface: null,\n\t\t\tobject: object\n\n\t\t} );\n\n\t}\n\n}\n\nexport { Points };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { Vector2 } from '../math/Vector2.js';\n\nfunction DirectGeometry() {\n\n\tthis.vertices = [];\n\tthis.normals = [];\n\tthis.colors = [];\n\tthis.uvs = [];\n\tthis.uvs2 = [];\n\n\tthis.groups = [];\n\n\tthis.morphTargets = {};\n\n\tthis.skinWeights = [];\n\tthis.skinIndices = [];\n\n\t// this.lineDistances = [];\n\n\tthis.boundingBox = null;\n\tthis.boundingSphere = null;\n\n\t// update flags\n\n\tthis.verticesNeedUpdate = false;\n\tthis.normalsNeedUpdate = false;\n\tthis.colorsNeedUpdate = false;\n\tthis.uvsNeedUpdate = false;\n\tthis.groupsNeedUpdate = false;\n\n}\n\nObject.assign( DirectGeometry.prototype, {\n\n\tcomputeGroups: function ( geometry ) {\n\n\t\tvar group;\n\t\tvar groups = [];\n\t\tvar materialIndex = undefined;\n\n\t\tvar faces = geometry.faces;\n\n\t\tfor ( var i = 0; i < faces.length; i ++ ) {\n\n\t\t\tvar face = faces[ i ];\n\n\t\t\t// materials\n\n\t\t\tif ( face.materialIndex !== materialIndex ) {\n\n\t\t\t\tmaterialIndex = face.materialIndex;\n\n\t\t\t\tif ( group !== undefined ) {\n\n\t\t\t\t\tgroup.count = ( i * 3 ) - group.start;\n\t\t\t\t\tgroups.push( group );\n\n\t\t\t\t}\n\n\t\t\t\tgroup = {\n\t\t\t\t\tstart: i * 3,\n\t\t\t\t\tmaterialIndex: materialIndex\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( group !== undefined ) {\n\n\t\t\tgroup.count = ( i * 3 ) - group.start;\n\t\t\tgroups.push( group );\n\n\t\t}\n\n\t\tthis.groups = groups;\n\n\t},\n\n\tfromGeometry: function ( geometry ) {\n\n\t\tvar faces = geometry.faces;\n\t\tvar vertices = geometry.vertices;\n\t\tvar faceVertexUvs = geometry.faceVertexUvs;\n\n\t\tvar hasFaceVertexUv = faceVertexUvs[ 0 ] && faceVertexUvs[ 0 ].length > 0;\n\t\tvar hasFaceVertexUv2 = faceVertexUvs[ 1 ] && faceVertexUvs[ 1 ].length > 0;\n\n\t\t// morphs\n\n\t\tvar morphTargets = geometry.morphTargets;\n\t\tvar morphTargetsLength = morphTargets.length;\n\n\t\tvar morphTargetsPosition;\n\n\t\tif ( morphTargetsLength > 0 ) {\n\n\t\t\tmorphTargetsPosition = [];\n\n\t\t\tfor ( var i = 0; i < morphTargetsLength; i ++ ) {\n\n\t\t\t\tmorphTargetsPosition[ i ] = {\n\t\t\t\t\tname: morphTargets[ i ].name,\n\t\t\t\t \tdata: []\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\tthis.morphTargets.position = morphTargetsPosition;\n\n\t\t}\n\n\t\tvar morphNormals = geometry.morphNormals;\n\t\tvar morphNormalsLength = morphNormals.length;\n\n\t\tvar morphTargetsNormal;\n\n\t\tif ( morphNormalsLength > 0 ) {\n\n\t\t\tmorphTargetsNormal = [];\n\n\t\t\tfor ( var i = 0; i < morphNormalsLength; i ++ ) {\n\n\t\t\t\tmorphTargetsNormal[ i ] = {\n\t\t\t\t\tname: morphNormals[ i ].name,\n\t\t\t\t \tdata: []\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\tthis.morphTargets.normal = morphTargetsNormal;\n\n\t\t}\n\n\t\t// skins\n\n\t\tvar skinIndices = geometry.skinIndices;\n\t\tvar skinWeights = geometry.skinWeights;\n\n\t\tvar hasSkinIndices = skinIndices.length === vertices.length;\n\t\tvar hasSkinWeights = skinWeights.length === vertices.length;\n\n\t\t//\n\n\t\tif ( vertices.length > 0 && faces.length === 0 ) {\n\n\t\t\tconsole.error( 'THREE.DirectGeometry: Faceless geometries are not supported.' );\n\n\t\t}\n\n\t\tfor ( var i = 0; i < faces.length; i ++ ) {\n\n\t\t\tvar face = faces[ i ];\n\n\t\t\tthis.vertices.push( vertices[ face.a ], vertices[ face.b ], vertices[ face.c ] );\n\n\t\t\tvar vertexNormals = face.vertexNormals;\n\n\t\t\tif ( vertexNormals.length === 3 ) {\n\n\t\t\t\tthis.normals.push( vertexNormals[ 0 ], vertexNormals[ 1 ], vertexNormals[ 2 ] );\n\n\t\t\t} else {\n\n\t\t\t\tvar normal = face.normal;\n\n\t\t\t\tthis.normals.push( normal, normal, normal );\n\n\t\t\t}\n\n\t\t\tvar vertexColors = face.vertexColors;\n\n\t\t\tif ( vertexColors.length === 3 ) {\n\n\t\t\t\tthis.colors.push( vertexColors[ 0 ], vertexColors[ 1 ], vertexColors[ 2 ] );\n\n\t\t\t} else {\n\n\t\t\t\tvar color = face.color;\n\n\t\t\t\tthis.colors.push( color, color, color );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexUv === true ) {\n\n\t\t\t\tvar vertexUvs = faceVertexUvs[ 0 ][ i ];\n\n\t\t\t\tif ( vertexUvs !== undefined ) {\n\n\t\t\t\t\tthis.uvs.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ', i );\n\n\t\t\t\t\tthis.uvs.push( new Vector2(), new Vector2(), new Vector2() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexUv2 === true ) {\n\n\t\t\t\tvar vertexUvs = faceVertexUvs[ 1 ][ i ];\n\n\t\t\t\tif ( vertexUvs !== undefined ) {\n\n\t\t\t\t\tthis.uvs2.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ', i );\n\n\t\t\t\t\tthis.uvs2.push( new Vector2(), new Vector2(), new Vector2() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// morphs\n\n\t\t\tfor ( var j = 0; j < morphTargetsLength; j ++ ) {\n\n\t\t\t\tvar morphTarget = morphTargets[ j ].vertices;\n\n\t\t\t\tmorphTargetsPosition[ j ].data.push( morphTarget[ face.a ], morphTarget[ face.b ], morphTarget[ face.c ] );\n\n\t\t\t}\n\n\t\t\tfor ( var j = 0; j < morphNormalsLength; j ++ ) {\n\n\t\t\t\tvar morphNormal = morphNormals[ j ].vertexNormals[ i ];\n\n\t\t\t\tmorphTargetsNormal[ j ].data.push( morphNormal.a, morphNormal.b, morphNormal.c );\n\n\t\t\t}\n\n\t\t\t// skins\n\n\t\t\tif ( hasSkinIndices ) {\n\n\t\t\t\tthis.skinIndices.push( skinIndices[ face.a ], skinIndices[ face.b ], skinIndices[ face.c ] );\n\n\t\t\t}\n\n\t\t\tif ( hasSkinWeights ) {\n\n\t\t\t\tthis.skinWeights.push( skinWeights[ face.a ], skinWeights[ face.b ], skinWeights[ face.c ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.computeGroups( geometry );\n\n\t\tthis.verticesNeedUpdate = geometry.verticesNeedUpdate;\n\t\tthis.normalsNeedUpdate = geometry.normalsNeedUpdate;\n\t\tthis.colorsNeedUpdate = geometry.colorsNeedUpdate;\n\t\tthis.uvsNeedUpdate = geometry.uvsNeedUpdate;\n\t\tthis.groupsNeedUpdate = geometry.groupsNeedUpdate;\n\n\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t}\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { DirectGeometry };\n","import { Vector3 } from '../math/Vector3.js';\nimport { Box3 } from '../math/Box3.js';\nimport { EventDispatcher } from './EventDispatcher.js';\nimport { BufferAttribute, Float32BufferAttribute, Uint16BufferAttribute, Uint32BufferAttribute } from './BufferAttribute.js';\nimport { Sphere } from '../math/Sphere.js';\nimport { DirectGeometry } from './DirectGeometry.js';\nimport { Object3D } from './Object3D.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { Matrix3 } from '../math/Matrix3.js';\nimport { _Math } from '../math/Math.js';\nimport { arrayMax } from '../utils.js';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar _bufferGeometryId = 1; // BufferGeometry uses odd numbers as Id\n\nvar _m1 = new Matrix4();\nvar _obj = new Object3D();\nvar _offset = new Vector3();\nvar _box = new Box3();\nvar _boxMorphTargets = new Box3();\nvar _vector = new Vector3();\n\nfunction BufferGeometry() {\n\n\tObject.defineProperty( this, 'id', { value: _bufferGeometryId += 2 } );\n\n\tthis.uuid = _Math.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'BufferGeometry';\n\n\tthis.index = null;\n\tthis.attributes = {};\n\n\tthis.morphAttributes = {};\n\tthis.morphTargetsRelative = false;\n\n\tthis.groups = [];\n\n\tthis.boundingBox = null;\n\tthis.boundingSphere = null;\n\n\tthis.drawRange = { start: 0, count: Infinity };\n\n\tthis.userData = {};\n\n}\n\nBufferGeometry.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: BufferGeometry,\n\n\tisBufferGeometry: true,\n\n\tgetIndex: function () {\n\n\t\treturn this.index;\n\n\t},\n\n\tsetIndex: function ( index ) {\n\n\t\tif ( Array.isArray( index ) ) {\n\n\t\t\tthis.index = new ( arrayMax( index ) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute )( index, 1 );\n\n\t\t} else {\n\n\t\t\tthis.index = index;\n\n\t\t}\n\n\t},\n\n\tgetAttribute: function ( name ) {\n\n\t\treturn this.attributes[ name ];\n\n\t},\n\n\tsetAttribute: function ( name, attribute ) {\n\n\t\tthis.attributes[ name ] = attribute;\n\n\t\treturn this;\n\n\t},\n\n\tdeleteAttribute: function ( name ) {\n\n\t\tdelete this.attributes[ name ];\n\n\t\treturn this;\n\n\t},\n\n\taddGroup: function ( start, count, materialIndex ) {\n\n\t\tthis.groups.push( {\n\n\t\t\tstart: start,\n\t\t\tcount: count,\n\t\t\tmaterialIndex: materialIndex !== undefined ? materialIndex : 0\n\n\t\t} );\n\n\t},\n\n\tclearGroups: function () {\n\n\t\tthis.groups = [];\n\n\t},\n\n\tsetDrawRange: function ( start, count ) {\n\n\t\tthis.drawRange.start = start;\n\t\tthis.drawRange.count = count;\n\n\t},\n\n\tapplyMatrix: function ( matrix ) {\n\n\t\tvar position = this.attributes.position;\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tposition.applyMatrix4( matrix );\n\n\t\t\tposition.needsUpdate = true;\n\n\t\t}\n\n\t\tvar normal = this.attributes.normal;\n\n\t\tif ( normal !== undefined ) {\n\n\t\t\tvar normalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\t\tnormal.applyNormalMatrix( normalMatrix );\n\n\t\t\tnormal.needsUpdate = true;\n\n\t\t}\n\n\t\tvar tangent = this.attributes.tangent;\n\n\t\tif ( tangent !== undefined ) {\n\n\t\t\ttangent.transformDirection( matrix );\n\n\t\t\ttangent.needsUpdate = true;\n\n\t\t}\n\n\t\tif ( this.boundingBox !== null ) {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t}\n\n\t\tif ( this.boundingSphere !== null ) {\n\n\t\t\tthis.computeBoundingSphere();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\trotateX: function ( angle ) {\n\n\t\t// rotate geometry around world x-axis\n\n\t\t_m1.makeRotationX( angle );\n\n\t\tthis.applyMatrix( _m1 );\n\n\t\treturn this;\n\n\t},\n\n\trotateY: function ( angle ) {\n\n\t\t// rotate geometry around world y-axis\n\n\t\t_m1.makeRotationY( angle );\n\n\t\tthis.applyMatrix( _m1 );\n\n\t\treturn this;\n\n\t},\n\n\trotateZ: function ( angle ) {\n\n\t\t// rotate geometry around world z-axis\n\n\t\t_m1.makeRotationZ( angle );\n\n\t\tthis.applyMatrix( _m1 );\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( x, y, z ) {\n\n\t\t// translate geometry\n\n\t\t_m1.makeTranslation( x, y, z );\n\n\t\tthis.applyMatrix( _m1 );\n\n\t\treturn this;\n\n\t},\n\n\tscale: function ( x, y, z ) {\n\n\t\t// scale geometry\n\n\t\t_m1.makeScale( x, y, z );\n\n\t\tthis.applyMatrix( _m1 );\n\n\t\treturn this;\n\n\t},\n\n\tlookAt: function ( vector ) {\n\n\t\t_obj.lookAt( vector );\n\n\t\t_obj.updateMatrix();\n\n\t\tthis.applyMatrix( _obj.matrix );\n\n\t\treturn this;\n\n\t},\n\n\tcenter: function () {\n\n\t\tthis.computeBoundingBox();\n\n\t\tthis.boundingBox.getCenter( _offset ).negate();\n\n\t\tthis.translate( _offset.x, _offset.y, _offset.z );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromObject: function ( object ) {\n\n\t\t// console.log( 'THREE.BufferGeometry.setFromObject(). Converting', object, this );\n\n\t\tvar geometry = object.geometry;\n\n\t\tif ( object.isPoints || object.isLine ) {\n\n\t\t\tvar positions = new Float32BufferAttribute( geometry.vertices.length * 3, 3 );\n\t\t\tvar colors = new Float32BufferAttribute( geometry.colors.length * 3, 3 );\n\n\t\t\tthis.setAttribute( 'position', positions.copyVector3sArray( geometry.vertices ) );\n\t\t\tthis.setAttribute( 'color', colors.copyColorsArray( geometry.colors ) );\n\n\t\t\tif ( geometry.lineDistances && geometry.lineDistances.length === geometry.vertices.length ) {\n\n\t\t\t\tvar lineDistances = new Float32BufferAttribute( geometry.lineDistances.length, 1 );\n\n\t\t\t\tthis.setAttribute( 'lineDistance', lineDistances.copyArray( geometry.lineDistances ) );\n\n\t\t\t}\n\n\t\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t\t}\n\n\t\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t\t}\n\n\t\t} else if ( object.isMesh ) {\n\n\t\t\tif ( geometry && geometry.isGeometry ) {\n\n\t\t\t\tthis.fromGeometry( geometry );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPoints: function ( points ) {\n\n\t\tvar position = [];\n\n\t\tfor ( var i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\tvar point = points[ i ];\n\t\t\tposition.push( point.x, point.y, point.z || 0 );\n\n\t\t}\n\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( position, 3 ) );\n\n\t\treturn this;\n\n\t},\n\n\tupdateFromObject: function ( object ) {\n\n\t\tvar geometry = object.geometry;\n\n\t\tif ( object.isMesh ) {\n\n\t\t\tvar direct = geometry.__directGeometry;\n\n\t\t\tif ( geometry.elementsNeedUpdate === true ) {\n\n\t\t\t\tdirect = undefined;\n\t\t\t\tgeometry.elementsNeedUpdate = false;\n\n\t\t\t}\n\n\t\t\tif ( direct === undefined ) {\n\n\t\t\t\treturn this.fromGeometry( geometry );\n\n\t\t\t}\n\n\t\t\tdirect.verticesNeedUpdate = geometry.verticesNeedUpdate;\n\t\t\tdirect.normalsNeedUpdate = geometry.normalsNeedUpdate;\n\t\t\tdirect.colorsNeedUpdate = geometry.colorsNeedUpdate;\n\t\t\tdirect.uvsNeedUpdate = geometry.uvsNeedUpdate;\n\t\t\tdirect.groupsNeedUpdate = geometry.groupsNeedUpdate;\n\n\t\t\tgeometry.verticesNeedUpdate = false;\n\t\t\tgeometry.normalsNeedUpdate = false;\n\t\t\tgeometry.colorsNeedUpdate = false;\n\t\t\tgeometry.uvsNeedUpdate = false;\n\t\t\tgeometry.groupsNeedUpdate = false;\n\n\t\t\tgeometry = direct;\n\n\t\t}\n\n\t\tvar attribute;\n\n\t\tif ( geometry.verticesNeedUpdate === true ) {\n\n\t\t\tattribute = this.attributes.position;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyVector3sArray( geometry.vertices );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.verticesNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.normalsNeedUpdate === true ) {\n\n\t\t\tattribute = this.attributes.normal;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyVector3sArray( geometry.normals );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.normalsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.colorsNeedUpdate === true ) {\n\n\t\t\tattribute = this.attributes.color;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyColorsArray( geometry.colors );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.colorsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.uvsNeedUpdate ) {\n\n\t\t\tattribute = this.attributes.uv;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyVector2sArray( geometry.uvs );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.uvsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.lineDistancesNeedUpdate ) {\n\n\t\t\tattribute = this.attributes.lineDistance;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyArray( geometry.lineDistances );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.lineDistancesNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.groupsNeedUpdate ) {\n\n\t\t\tgeometry.computeGroups( object.geometry );\n\t\t\tthis.groups = geometry.groups;\n\n\t\t\tgeometry.groupsNeedUpdate = false;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tfromGeometry: function ( geometry ) {\n\n\t\tgeometry.__directGeometry = new DirectGeometry().fromGeometry( geometry );\n\n\t\treturn this.fromDirectGeometry( geometry.__directGeometry );\n\n\t},\n\n\tfromDirectGeometry: function ( geometry ) {\n\n\t\tvar positions = new Float32Array( geometry.vertices.length * 3 );\n\t\tthis.setAttribute( 'position', new BufferAttribute( positions, 3 ).copyVector3sArray( geometry.vertices ) );\n\n\t\tif ( geometry.normals.length > 0 ) {\n\n\t\t\tvar normals = new Float32Array( geometry.normals.length * 3 );\n\t\t\tthis.setAttribute( 'normal', new BufferAttribute( normals, 3 ).copyVector3sArray( geometry.normals ) );\n\n\t\t}\n\n\t\tif ( geometry.colors.length > 0 ) {\n\n\t\t\tvar colors = new Float32Array( geometry.colors.length * 3 );\n\t\t\tthis.setAttribute( 'color', new BufferAttribute( colors, 3 ).copyColorsArray( geometry.colors ) );\n\n\t\t}\n\n\t\tif ( geometry.uvs.length > 0 ) {\n\n\t\t\tvar uvs = new Float32Array( geometry.uvs.length * 2 );\n\t\t\tthis.setAttribute( 'uv', new BufferAttribute( uvs, 2 ).copyVector2sArray( geometry.uvs ) );\n\n\t\t}\n\n\t\tif ( geometry.uvs2.length > 0 ) {\n\n\t\t\tvar uvs2 = new Float32Array( geometry.uvs2.length * 2 );\n\t\t\tthis.setAttribute( 'uv2', new BufferAttribute( uvs2, 2 ).copyVector2sArray( geometry.uvs2 ) );\n\n\t\t}\n\n\t\t// groups\n\n\t\tthis.groups = geometry.groups;\n\n\t\t// morphs\n\n\t\tfor ( var name in geometry.morphTargets ) {\n\n\t\t\tvar array = [];\n\t\t\tvar morphTargets = geometry.morphTargets[ name ];\n\n\t\t\tfor ( var i = 0, l = morphTargets.length; i < l; i ++ ) {\n\n\t\t\t\tvar morphTarget = morphTargets[ i ];\n\n\t\t\t\tvar attribute = new Float32BufferAttribute( morphTarget.data.length * 3, 3 );\n\t\t\t\tattribute.name = morphTarget.name;\n\n\t\t\t\tarray.push( attribute.copyVector3sArray( morphTarget.data ) );\n\n\t\t\t}\n\n\t\t\tthis.morphAttributes[ name ] = array;\n\n\t\t}\n\n\t\t// skinning\n\n\t\tif ( geometry.skinIndices.length > 0 ) {\n\n\t\t\tvar skinIndices = new Float32BufferAttribute( geometry.skinIndices.length * 4, 4 );\n\t\t\tthis.setAttribute( 'skinIndex', skinIndices.copyVector4sArray( geometry.skinIndices ) );\n\n\t\t}\n\n\t\tif ( geometry.skinWeights.length > 0 ) {\n\n\t\t\tvar skinWeights = new Float32BufferAttribute( geometry.skinWeights.length * 4, 4 );\n\t\t\tthis.setAttribute( 'skinWeight', skinWeights.copyVector4sArray( geometry.skinWeights ) );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t}\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcomputeBoundingBox: function () {\n\n\t\tif ( this.boundingBox === null ) {\n\n\t\t\tthis.boundingBox = new Box3();\n\n\t\t}\n\n\t\tvar position = this.attributes.position;\n\t\tvar morphAttributesPosition = this.morphAttributes.position;\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tthis.boundingBox.setFromBufferAttribute( position );\n\n\t\t\t// process morph attributes if present\n\n\t\t\tif ( morphAttributesPosition ) {\n\n\t\t\t\tfor ( var i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar morphAttribute = morphAttributesPosition[ i ];\n\t\t\t\t\t_box.setFromBufferAttribute( morphAttribute );\n\n\t\t\t\t\tif ( this.morphTargetsRelative ) {\n\n\t\t\t\t\t\t_vector.addVectors( this.boundingBox.min, _box.min );\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _vector );\n\n\t\t\t\t\t\t_vector.addVectors( this.boundingBox.max, _box.max );\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _vector );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _box.min );\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _box.max );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis.boundingBox.makeEmpty();\n\n\t\t}\n\n\t\tif ( isNaN( this.boundingBox.min.x ) || isNaN( this.boundingBox.min.y ) || isNaN( this.boundingBox.min.z ) ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.', this );\n\n\t\t}\n\n\t},\n\n\tcomputeBoundingSphere: function () {\n\n\t\tif ( this.boundingSphere === null ) {\n\n\t\t\tthis.boundingSphere = new Sphere();\n\n\t\t}\n\n\t\tvar position = this.attributes.position;\n\t\tvar morphAttributesPosition = this.morphAttributes.position;\n\n\t\tif ( position ) {\n\n\t\t\t// first, find the center of the bounding sphere\n\n\t\t\tvar center = this.boundingSphere.center;\n\n\t\t\t_box.setFromBufferAttribute( position );\n\n\t\t\t// process morph attributes if present\n\n\t\t\tif ( morphAttributesPosition ) {\n\n\t\t\t\tfor ( var i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar morphAttribute = morphAttributesPosition[ i ];\n\t\t\t\t\t_boxMorphTargets.setFromBufferAttribute( morphAttribute );\n\n\t\t\t\t\tif ( this.morphTargetsRelative ) {\n\n\t\t\t\t\t\t_vector.addVectors( _box.min, _boxMorphTargets.min );\n\t\t\t\t\t\t_box.expandByPoint( _vector );\n\n\t\t\t\t\t\t_vector.addVectors( _box.max, _boxMorphTargets.max );\n\t\t\t\t\t\t_box.expandByPoint( _vector );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t_box.expandByPoint( _boxMorphTargets.min );\n\t\t\t\t\t\t_box.expandByPoint( _boxMorphTargets.max );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_box.getCenter( center );\n\n\t\t\t// second, try to find a boundingSphere with a radius smaller than the\n\t\t\t// boundingSphere of the boundingBox: sqrt(3) smaller in the best case\n\n\t\t\tvar maxRadiusSq = 0;\n\n\t\t\tfor ( var i = 0, il = position.count; i < il; i ++ ) {\n\n\t\t\t\t_vector.fromBufferAttribute( position, i );\n\n\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( _vector ) );\n\n\t\t\t}\n\n\t\t\t// process morph attributes if present\n\n\t\t\tif ( morphAttributesPosition ) {\n\n\t\t\t\tfor ( var i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar morphAttribute = morphAttributesPosition[ i ];\n\t\t\t\t\tvar morphTargetsRelative = this.morphTargetsRelative;\n\n\t\t\t\t\tfor ( var j = 0, jl = morphAttribute.count; j < jl; j ++ ) {\n\n\t\t\t\t\t\t_vector.fromBufferAttribute( morphAttribute, j );\n\n\t\t\t\t\t\tif ( morphTargetsRelative ) {\n\n\t\t\t\t\t\t\t_offset.fromBufferAttribute( position, j );\n\t\t\t\t\t\t\t_vector.add( _offset );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( _vector ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.boundingSphere.radius = Math.sqrt( maxRadiusSq );\n\n\t\t\tif ( isNaN( this.boundingSphere.radius ) ) {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.', this );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tcomputeFaceNormals: function () {\n\n\t\t// backwards compatibility\n\n\t},\n\n\tcomputeVertexNormals: function () {\n\n\t\tvar index = this.index;\n\t\tvar attributes = this.attributes;\n\n\t\tif ( attributes.position ) {\n\n\t\t\tvar positions = attributes.position.array;\n\n\t\t\tif ( attributes.normal === undefined ) {\n\n\t\t\t\tthis.setAttribute( 'normal', new BufferAttribute( new Float32Array( positions.length ), 3 ) );\n\n\t\t\t} else {\n\n\t\t\t\t// reset existing normals to zero\n\n\t\t\t\tvar array = attributes.normal.array;\n\n\t\t\t\tfor ( var i = 0, il = array.length; i < il; i ++ ) {\n\n\t\t\t\t\tarray[ i ] = 0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar normals = attributes.normal.array;\n\n\t\t\tvar vA, vB, vC;\n\t\t\tvar pA = new Vector3(), pB = new Vector3(), pC = new Vector3();\n\t\t\tvar cb = new Vector3(), ab = new Vector3();\n\n\t\t\t// indexed elements\n\n\t\t\tif ( index ) {\n\n\t\t\t\tvar indices = index.array;\n\n\t\t\t\tfor ( var i = 0, il = index.count; i < il; i += 3 ) {\n\n\t\t\t\t\tvA = indices[ i + 0 ] * 3;\n\t\t\t\t\tvB = indices[ i + 1 ] * 3;\n\t\t\t\t\tvC = indices[ i + 2 ] * 3;\n\n\t\t\t\t\tpA.fromArray( positions, vA );\n\t\t\t\t\tpB.fromArray( positions, vB );\n\t\t\t\t\tpC.fromArray( positions, vC );\n\n\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\tnormals[ vA ] += cb.x;\n\t\t\t\t\tnormals[ vA + 1 ] += cb.y;\n\t\t\t\t\tnormals[ vA + 2 ] += cb.z;\n\n\t\t\t\t\tnormals[ vB ] += cb.x;\n\t\t\t\t\tnormals[ vB + 1 ] += cb.y;\n\t\t\t\t\tnormals[ vB + 2 ] += cb.z;\n\n\t\t\t\t\tnormals[ vC ] += cb.x;\n\t\t\t\t\tnormals[ vC + 1 ] += cb.y;\n\t\t\t\t\tnormals[ vC + 2 ] += cb.z;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// non-indexed elements (unconnected triangle soup)\n\n\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 9 ) {\n\n\t\t\t\t\tpA.fromArray( positions, i );\n\t\t\t\t\tpB.fromArray( positions, i + 3 );\n\t\t\t\t\tpC.fromArray( positions, i + 6 );\n\n\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\tnormals[ i ] = cb.x;\n\t\t\t\t\tnormals[ i + 1 ] = cb.y;\n\t\t\t\t\tnormals[ i + 2 ] = cb.z;\n\n\t\t\t\t\tnormals[ i + 3 ] = cb.x;\n\t\t\t\t\tnormals[ i + 4 ] = cb.y;\n\t\t\t\t\tnormals[ i + 5 ] = cb.z;\n\n\t\t\t\t\tnormals[ i + 6 ] = cb.x;\n\t\t\t\t\tnormals[ i + 7 ] = cb.y;\n\t\t\t\t\tnormals[ i + 8 ] = cb.z;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.normalizeNormals();\n\n\t\t\tattributes.normal.needsUpdate = true;\n\n\t\t}\n\n\t},\n\n\tmerge: function ( geometry, offset ) {\n\n\t\tif ( ! ( geometry && geometry.isBufferGeometry ) ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.', geometry );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( offset === undefined ) {\n\n\t\t\toffset = 0;\n\n\t\t\tconsole.warn(\n\t\t\t\t'THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. '\n\t\t\t\t+ 'Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge.'\n\t\t\t);\n\n\t\t}\n\n\t\tvar attributes = this.attributes;\n\n\t\tfor ( var key in attributes ) {\n\n\t\t\tif ( geometry.attributes[ key ] === undefined ) continue;\n\n\t\t\tvar attribute1 = attributes[ key ];\n\t\t\tvar attributeArray1 = attribute1.array;\n\n\t\t\tvar attribute2 = geometry.attributes[ key ];\n\t\t\tvar attributeArray2 = attribute2.array;\n\n\t\t\tvar attributeOffset = attribute2.itemSize * offset;\n\t\t\tvar length = Math.min( attributeArray2.length, attributeArray1.length - attributeOffset );\n\n\t\t\tfor ( var i = 0, j = attributeOffset; i < length; i ++, j ++ ) {\n\n\t\t\t\tattributeArray1[ j ] = attributeArray2[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tnormalizeNormals: function () {\n\n\t\tvar normals = this.attributes.normal;\n\n\t\tfor ( var i = 0, il = normals.count; i < il; i ++ ) {\n\n\t\t\t_vector.x = normals.getX( i );\n\t\t\t_vector.y = normals.getY( i );\n\t\t\t_vector.z = normals.getZ( i );\n\n\t\t\t_vector.normalize();\n\n\t\t\tnormals.setXYZ( i, _vector.x, _vector.y, _vector.z );\n\n\t\t}\n\n\t},\n\n\ttoNonIndexed: function () {\n\n\t\tfunction convertBufferAttribute( attribute, indices ) {\n\n\t\t\tvar array = attribute.array;\n\t\t\tvar itemSize = attribute.itemSize;\n\n\t\t\tvar array2 = new array.constructor( indices.length * itemSize );\n\n\t\t\tvar index = 0, index2 = 0;\n\n\t\t\tfor ( var i = 0, l = indices.length; i < l; i ++ ) {\n\n\t\t\t\tindex = indices[ i ] * itemSize;\n\n\t\t\t\tfor ( var j = 0; j < itemSize; j ++ ) {\n\n\t\t\t\t\tarray2[ index2 ++ ] = array[ index ++ ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new BufferAttribute( array2, itemSize );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( this.index === null ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed.' );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar geometry2 = new BufferGeometry();\n\n\t\tvar indices = this.index.array;\n\t\tvar attributes = this.attributes;\n\n\t\t// attributes\n\n\t\tfor ( var name in attributes ) {\n\n\t\t\tvar attribute = attributes[ name ];\n\n\t\t\tvar newAttribute = convertBufferAttribute( attribute, indices );\n\n\t\t\tgeometry2.setAttribute( name, newAttribute );\n\n\t\t}\n\n\t\t// morph attributes\n\n\t\tvar morphAttributes = this.morphAttributes;\n\n\t\tfor ( name in morphAttributes ) {\n\n\t\t\tvar morphArray = [];\n\t\t\tvar morphAttribute = morphAttributes[ name ]; // morphAttribute: array of Float32BufferAttributes\n\n\t\t\tfor ( var i = 0, il = morphAttribute.length; i < il; i ++ ) {\n\n\t\t\t\tvar attribute = morphAttribute[ i ];\n\n\t\t\t\tvar newAttribute = convertBufferAttribute( attribute, indices );\n\n\t\t\t\tmorphArray.push( newAttribute );\n\n\t\t\t}\n\n\t\t\tgeometry2.morphAttributes[ name ] = morphArray;\n\n\t\t}\n\n\t\tgeometry2.morphTargetsRelative = this.morphTargetsRelative;\n\n\t\t// groups\n\n\t\tvar groups = this.groups;\n\n\t\tfor ( var i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\tvar group = groups[ i ];\n\t\t\tgeometry2.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t}\n\n\t\treturn geometry2;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'BufferGeometry',\n\t\t\t\tgenerator: 'BufferGeometry.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard BufferGeometry serialization\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\t\tif ( this.name !== '' ) data.name = this.name;\n\t\tif ( Object.keys( this.userData ).length > 0 ) data.userData = this.userData;\n\n\t\tif ( this.parameters !== undefined ) {\n\n\t\t\tvar parameters = this.parameters;\n\n\t\t\tfor ( var key in parameters ) {\n\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tdata.data = { attributes: {} };\n\n\t\tvar index = this.index;\n\n\t\tif ( index !== null ) {\n\n\t\t\tdata.data.index = {\n\t\t\t\ttype: index.array.constructor.name,\n\t\t\t\tarray: Array.prototype.slice.call( index.array )\n\t\t\t};\n\n\t\t}\n\n\t\tvar attributes = this.attributes;\n\n\t\tfor ( var key in attributes ) {\n\n\t\t\tvar attribute = attributes[ key ];\n\n\t\t\tvar attributeData = attribute.toJSON();\n\n\t\t\tif ( attribute.name !== '' ) attributeData.name = attribute.name;\n\n\t\t\tdata.data.attributes[ key ] = attributeData;\n\n\t\t}\n\n\t\tvar morphAttributes = {};\n\t\tvar hasMorphAttributes = false;\n\n\t\tfor ( var key in this.morphAttributes ) {\n\n\t\t\tvar attributeArray = this.morphAttributes[ key ];\n\n\t\t\tvar array = [];\n\n\t\t\tfor ( var i = 0, il = attributeArray.length; i < il; i ++ ) {\n\n\t\t\t\tvar attribute = attributeArray[ i ];\n\n\t\t\t\tvar attributeData = attribute.toJSON();\n\n\t\t\t\tif ( attribute.name !== '' ) attributeData.name = attribute.name;\n\n\t\t\t\tarray.push( attributeData );\n\n\t\t\t}\n\n\t\t\tif ( array.length > 0 ) {\n\n\t\t\t\tmorphAttributes[ key ] = array;\n\n\t\t\t\thasMorphAttributes = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( hasMorphAttributes ) {\n\n\t\t\tdata.data.morphAttributes = morphAttributes;\n\t\t\tdata.data.morphTargetsRelative = this.morphTargetsRelative;\n\n\t\t}\n\n\t\tvar groups = this.groups;\n\n\t\tif ( groups.length > 0 ) {\n\n\t\t\tdata.data.groups = JSON.parse( JSON.stringify( groups ) );\n\n\t\t}\n\n\t\tvar boundingSphere = this.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tdata.data.boundingSphere = {\n\t\t\t\tcenter: boundingSphere.center.toArray(),\n\t\t\t\tradius: boundingSphere.radius\n\t\t\t};\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tclone: function () {\n\n\t\t/*\n\t\t // Handle primitives\n\n\t\t var parameters = this.parameters;\n\n\t\t if ( parameters !== undefined ) {\n\n\t\t var values = [];\n\n\t\t for ( var key in parameters ) {\n\n\t\t values.push( parameters[ key ] );\n\n\t\t }\n\n\t\t var geometry = Object.create( this.constructor.prototype );\n\t\t this.constructor.apply( geometry, values );\n\t\t return geometry;\n\n\t\t }\n\n\t\t return new this.constructor().copy( this );\n\t\t */\n\n\t\treturn new BufferGeometry().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tvar name, i, l;\n\n\t\t// reset\n\n\t\tthis.index = null;\n\t\tthis.attributes = {};\n\t\tthis.morphAttributes = {};\n\t\tthis.groups = [];\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\t// name\n\n\t\tthis.name = source.name;\n\n\t\t// index\n\n\t\tvar index = source.index;\n\n\t\tif ( index !== null ) {\n\n\t\t\tthis.setIndex( index.clone() );\n\n\t\t}\n\n\t\t// attributes\n\n\t\tvar attributes = source.attributes;\n\n\t\tfor ( name in attributes ) {\n\n\t\t\tvar attribute = attributes[ name ];\n\t\t\tthis.setAttribute( name, attribute.clone() );\n\n\t\t}\n\n\t\t// morph attributes\n\n\t\tvar morphAttributes = source.morphAttributes;\n\n\t\tfor ( name in morphAttributes ) {\n\n\t\t\tvar array = [];\n\t\t\tvar morphAttribute = morphAttributes[ name ]; // morphAttribute: array of Float32BufferAttributes\n\n\t\t\tfor ( i = 0, l = morphAttribute.length; i < l; i ++ ) {\n\n\t\t\t\tarray.push( morphAttribute[ i ].clone() );\n\n\t\t\t}\n\n\t\t\tthis.morphAttributes[ name ] = array;\n\n\t\t}\n\n\t\tthis.morphTargetsRelative = source.morphTargetsRelative;\n\n\t\t// groups\n\n\t\tvar groups = source.groups;\n\n\t\tfor ( i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\tvar group = groups[ i ];\n\t\t\tthis.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t}\n\n\t\t// bounding box\n\n\t\tvar boundingBox = source.boundingBox;\n\n\t\tif ( boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = boundingBox.clone();\n\n\t\t}\n\n\t\t// bounding sphere\n\n\t\tvar boundingSphere = source.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = boundingSphere.clone();\n\n\t\t}\n\n\t\t// draw range\n\n\t\tthis.drawRange.start = source.drawRange.start;\n\t\tthis.drawRange.count = source.drawRange.count;\n\n\t\t// user data\n\n\t\tthis.userData = source.userData;\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\n\nexport { BufferGeometry };\n","import { TangentSpaceNormalMap } from '../constants.js';\nimport { Material } from './Material.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n *\n * parameters = {\n *  color: <hex>,\n *  roughness: <float>,\n *  metalness: <float>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalMapType: THREE.TangentSpaceNormalMap,\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  roughnessMap: new THREE.Texture( <Image> ),\n *\n *  metalnessMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\n *  envMapIntensity: <float>\n *\n *  refractionRatio: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshStandardMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.defines = { 'STANDARD': '' };\n\n\tthis.type = 'MeshStandardMaterial';\n\n\tthis.color = new Color( 0xffffff ); // diffuse\n\tthis.roughness = 1.0;\n\tthis.metalness = 0.0;\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.emissive = new Color( 0x000000 );\n\tthis.emissiveIntensity = 1.0;\n\tthis.emissiveMap = null;\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalMapType = TangentSpaceNormalMap;\n\tthis.normalScale = new Vector2( 1, 1 );\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.roughnessMap = null;\n\n\tthis.metalnessMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.envMapIntensity = 1.0;\n\n\tthis.refractionRatio = 0.98;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshStandardMaterial.prototype = Object.create( Material.prototype );\nMeshStandardMaterial.prototype.constructor = MeshStandardMaterial;\n\nMeshStandardMaterial.prototype.isMeshStandardMaterial = true;\n\nMeshStandardMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.defines = { 'STANDARD': '' };\n\n\tthis.color.copy( source.color );\n\tthis.roughness = source.roughness;\n\tthis.metalness = source.metalness;\n\n\tthis.map = source.map;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.emissive.copy( source.emissive );\n\tthis.emissiveMap = source.emissiveMap;\n\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\tthis.bumpMap = source.bumpMap;\n\tthis.bumpScale = source.bumpScale;\n\n\tthis.normalMap = source.normalMap;\n\tthis.normalMapType = source.normalMapType;\n\tthis.normalScale.copy( source.normalScale );\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.roughnessMap = source.roughnessMap;\n\n\tthis.metalnessMap = source.metalnessMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.envMap = source.envMap;\n\tthis.envMapIntensity = source.envMapIntensity;\n\n\tthis.refractionRatio = source.refractionRatio;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n\nexport { MeshStandardMaterial };\n","import { Vector3 } from '../math/Vector3.js';\n\n/**\n * @author benaadams / https://twitter.com/ben_a_adams\n */\n\nvar _vector = new Vector3();\n\nfunction InterleavedBufferAttribute( interleavedBuffer, itemSize, offset, normalized ) {\n\n\tthis.data = interleavedBuffer;\n\tthis.itemSize = itemSize;\n\tthis.offset = offset;\n\n\tthis.normalized = normalized === true;\n\n}\n\nObject.defineProperties( InterleavedBufferAttribute.prototype, {\n\n\tcount: {\n\n\t\tget: function () {\n\n\t\t\treturn this.data.count;\n\n\t\t}\n\n\t},\n\n\tarray: {\n\n\t\tget: function () {\n\n\t\t\treturn this.data.array;\n\n\t\t}\n\n\t}\n\n} );\n\nObject.assign( InterleavedBufferAttribute.prototype, {\n\n\tisInterleavedBufferAttribute: true,\n\n\tapplyMatrix4: function ( m ) {\n\n\t\tfor ( var i = 0, l = this.data.count; i < l; i ++ ) {\n\n\t\t\t_vector.x = this.getX( i );\n\t\t\t_vector.y = this.getY( i );\n\t\t\t_vector.z = this.getZ( i );\n\n\t\t\t_vector.applyMatrix4( m );\n\n\t\t\tthis.setXYZ( i, _vector.x, _vector.y, _vector.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( index, x ) {\n\n\t\tthis.data.array[ index * this.data.stride + this.offset ] = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( index, y ) {\n\n\t\tthis.data.array[ index * this.data.stride + this.offset + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetZ: function ( index, z ) {\n\n\t\tthis.data.array[ index * this.data.stride + this.offset + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetW: function ( index, w ) {\n\n\t\tthis.data.array[ index * this.data.stride + this.offset + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tgetX: function ( index ) {\n\n\t\treturn this.data.array[ index * this.data.stride + this.offset ];\n\n\t},\n\n\tgetY: function ( index ) {\n\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 1 ];\n\n\t},\n\n\tgetZ: function ( index ) {\n\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 2 ];\n\n\t},\n\n\tgetW: function ( index ) {\n\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 3 ];\n\n\t},\n\n\tsetXY: function ( index, x, y ) {\n\n\t\tindex = index * this.data.stride + this.offset;\n\n\t\tthis.data.array[ index + 0 ] = x;\n\t\tthis.data.array[ index + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZ: function ( index, x, y, z ) {\n\n\t\tindex = index * this.data.stride + this.offset;\n\n\t\tthis.data.array[ index + 0 ] = x;\n\t\tthis.data.array[ index + 1 ] = y;\n\t\tthis.data.array[ index + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZW: function ( index, x, y, z, w ) {\n\n\t\tindex = index * this.data.stride + this.offset;\n\n\t\tthis.data.array[ index + 0 ] = x;\n\t\tthis.data.array[ index + 1 ] = y;\n\t\tthis.data.array[ index + 2 ] = z;\n\t\tthis.data.array[ index + 3 ] = w;\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { InterleavedBufferAttribute };\n","import { Sphere } from '../math/Sphere.js';\nimport { Ray } from '../math/Ray.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { Object3D } from '../core/Object3D.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { LineBasicMaterial } from '../materials/LineBasicMaterial.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar _start = new Vector3();\nvar _end = new Vector3();\nvar _inverseMatrix = new Matrix4();\nvar _ray = new Ray();\nvar _sphere = new Sphere();\n\nfunction Line( geometry, material, mode ) {\n\n\tif ( mode === 1 ) {\n\n\t\tconsole.error( 'THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead.' );\n\n\t}\n\n\tObject3D.call( this );\n\n\tthis.type = 'Line';\n\n\tthis.geometry = geometry !== undefined ? geometry : new BufferGeometry();\n\tthis.material = material !== undefined ? material : new LineBasicMaterial( { color: Math.random() * 0xffffff } );\n\n}\n\nLine.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Line,\n\n\tisLine: true,\n\n\tcomputeLineDistances: function () {\n\n\t\tvar geometry = this.geometry;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\t// we assume non-indexed geometry\n\n\t\t\tif ( geometry.index === null ) {\n\n\t\t\t\tvar positionAttribute = geometry.attributes.position;\n\t\t\t\tvar lineDistances = [ 0 ];\n\n\t\t\t\tfor ( var i = 1, l = positionAttribute.count; i < l; i ++ ) {\n\n\t\t\t\t\t_start.fromBufferAttribute( positionAttribute, i - 1 );\n\t\t\t\t\t_end.fromBufferAttribute( positionAttribute, i );\n\n\t\t\t\t\tlineDistances[ i ] = lineDistances[ i - 1 ];\n\t\t\t\t\tlineDistances[ i ] += _start.distanceTo( _end );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.setAttribute( 'lineDistance', new Float32BufferAttribute( lineDistances, 1 ) );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.' );\n\n\t\t\t}\n\n\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\tvar vertices = geometry.vertices;\n\t\t\tvar lineDistances = geometry.lineDistances;\n\n\t\t\tlineDistances[ 0 ] = 0;\n\n\t\t\tfor ( var i = 1, l = vertices.length; i < l; i ++ ) {\n\n\t\t\t\tlineDistances[ i ] = lineDistances[ i - 1 ];\n\t\t\t\tlineDistances[ i ] += vertices[ i - 1 ].distanceTo( vertices[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\traycast: function ( raycaster, intersects ) {\n\n\t\tvar precision = raycaster.linePrecision;\n\n\t\tvar geometry = this.geometry;\n\t\tvar matrixWorld = this.matrixWorld;\n\n\t\t// Checking boundingSphere distance to ray\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere.copy( geometry.boundingSphere );\n\t\t_sphere.applyMatrix4( matrixWorld );\n\t\t_sphere.radius += precision;\n\n\t\tif ( raycaster.ray.intersectsSphere( _sphere ) === false ) return;\n\n\t\t//\n\n\t\t_inverseMatrix.getInverse( matrixWorld );\n\t\t_ray.copy( raycaster.ray ).applyMatrix4( _inverseMatrix );\n\n\t\tvar localPrecision = precision / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\n\t\tvar localPrecisionSq = localPrecision * localPrecision;\n\n\t\tvar vStart = new Vector3();\n\t\tvar vEnd = new Vector3();\n\t\tvar interSegment = new Vector3();\n\t\tvar interRay = new Vector3();\n\t\tvar step = ( this && this.isLineSegments ) ? 2 : 1;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tvar index = geometry.index;\n\t\t\tvar attributes = geometry.attributes;\n\t\t\tvar positions = attributes.position.array;\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\tvar indices = index.array;\n\n\t\t\t\tfor ( var i = 0, l = indices.length - 1; i < l; i += step ) {\n\n\t\t\t\t\tvar a = indices[ i ];\n\t\t\t\t\tvar b = indices[ i + 1 ];\n\n\t\t\t\t\tvStart.fromArray( positions, a * 3 );\n\t\t\t\t\tvEnd.fromArray( positions, b * 3 );\n\n\t\t\t\t\tvar distSq = _ray.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\n\n\t\t\t\t\tif ( distSq > localPrecisionSq ) continue;\n\n\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\t\tintersects.push( {\n\n\t\t\t\t\t\tdistance: distance,\n\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\t\tindex: i,\n\t\t\t\t\t\tface: null,\n\t\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\t\tobject: this\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tfor ( var i = 0, l = positions.length / 3 - 1; i < l; i += step ) {\n\n\t\t\t\t\tvStart.fromArray( positions, 3 * i );\n\t\t\t\t\tvEnd.fromArray( positions, 3 * i + 3 );\n\n\t\t\t\t\tvar distSq = _ray.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\n\n\t\t\t\t\tif ( distSq > localPrecisionSq ) continue;\n\n\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\t\tintersects.push( {\n\n\t\t\t\t\t\tdistance: distance,\n\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\t\tindex: i,\n\t\t\t\t\t\tface: null,\n\t\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\t\tobject: this\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\tvar vertices = geometry.vertices;\n\t\t\tvar nbVertices = vertices.length;\n\n\t\t\tfor ( var i = 0; i < nbVertices - 1; i += step ) {\n\n\t\t\t\tvar distSq = _ray.distanceSqToSegment( vertices[ i ], vertices[ i + 1 ], interRay, interSegment );\n\n\t\t\t\tif ( distSq > localPrecisionSq ) continue;\n\n\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\tintersects.push( {\n\n\t\t\t\t\tdistance: distance,\n\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\tindex: i,\n\t\t\t\t\tface: null,\n\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\tobject: this\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.geometry, this.material ).copy( this );\n\n\t}\n\n} );\n\n\nexport { Line };\n","import { LinearFilter, LinearMipmapLinearFilter, ClampToEdgeWrapping } from '../constants.js';\nimport { FileLoader } from './FileLoader.js';\nimport { DataTexture } from '../textures/DataTexture.js';\nimport { Loader } from './Loader.js';\n\n/**\n * @author Nikos M. / https://github.com/foo123/\n *\n * Abstract Base class to load generic binary textures formats (rgbe, hdr, ...)\n *\n * Sub classes have to implement the parse() method which will be used in load().\n */\n\nfunction DataTextureLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nDataTextureLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: DataTextureLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar texture = new DataTexture();\n\n\t\tvar loader = new FileLoader( this.manager );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setPath( this.path );\n\t\tloader.load( url, function ( buffer ) {\n\n\t\t\tvar texData = scope.parse( buffer );\n\n\t\t\tif ( ! texData ) return;\n\n\t\t\tif ( texData.image !== undefined ) {\n\n\t\t\t\ttexture.image = texData.image;\n\n\t\t\t} else if ( texData.data !== undefined ) {\n\n\t\t\t\ttexture.image.width = texData.width;\n\t\t\t\ttexture.image.height = texData.height;\n\t\t\t\ttexture.image.data = texData.data;\n\n\t\t\t}\n\n\t\t\ttexture.wrapS = texData.wrapS !== undefined ? texData.wrapS : ClampToEdgeWrapping;\n\t\t\ttexture.wrapT = texData.wrapT !== undefined ? texData.wrapT : ClampToEdgeWrapping;\n\n\t\t\ttexture.magFilter = texData.magFilter !== undefined ? texData.magFilter : LinearFilter;\n\t\t\ttexture.minFilter = texData.minFilter !== undefined ? texData.minFilter : LinearFilter;\n\n\t\t\ttexture.anisotropy = texData.anisotropy !== undefined ? texData.anisotropy : 1;\n\n\t\t\tif ( texData.format !== undefined ) {\n\n\t\t\t\ttexture.format = texData.format;\n\n\t\t\t}\n\t\t\tif ( texData.type !== undefined ) {\n\n\t\t\t\ttexture.type = texData.type;\n\n\t\t\t}\n\n\t\t\tif ( texData.mipmaps !== undefined ) {\n\n\t\t\t\ttexture.mipmaps = texData.mipmaps;\n\t\t\t\ttexture.minFilter = LinearMipmapLinearFilter; // presumably...\n\n\t\t\t}\n\n\t\t\tif ( texData.mipmapCount === 1 ) {\n\n\t\t\t\ttexture.minFilter = LinearFilter;\n\n\t\t\t}\n\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tif ( onLoad ) onLoad( texture, texData );\n\n\t\t}, onProgress, onError );\n\n\n\t\treturn texture;\n\n\t}\n\n} );\n\n\nexport { DataTextureLoader };\n","import { Curve } from './Curve.js';\nimport * as Curves from '../curves/Curves.js';\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n *\n **/\n\n/**************************************************************\n *\tCurved Path - a curve path is simply a array of connected\n *  curves, but retains the api of a curve\n **************************************************************/\n\nfunction CurvePath() {\n\n\tCurve.call( this );\n\n\tthis.type = 'CurvePath';\n\n\tthis.curves = [];\n\tthis.autoClose = false; // Automatically closes the path\n\n}\n\nCurvePath.prototype = Object.assign( Object.create( Curve.prototype ), {\n\n\tconstructor: CurvePath,\n\n\tadd: function ( curve ) {\n\n\t\tthis.curves.push( curve );\n\n\t},\n\n\tclosePath: function () {\n\n\t\t// Add a line curve if start and end of lines are not connected\n\t\tvar startPoint = this.curves[ 0 ].getPoint( 0 );\n\t\tvar endPoint = this.curves[ this.curves.length - 1 ].getPoint( 1 );\n\n\t\tif ( ! startPoint.equals( endPoint ) ) {\n\n\t\t\tthis.curves.push( new Curves[ 'LineCurve' ]( endPoint, startPoint ) );\n\n\t\t}\n\n\t},\n\n\t// To get accurate point with reference to\n\t// entire path distance at time t,\n\t// following has to be done:\n\n\t// 1. Length of each sub path have to be known\n\t// 2. Locate and identify type of curve\n\t// 3. Get t for the curve\n\t// 4. Return curve.getPointAt(t')\n\n\tgetPoint: function ( t ) {\n\n\t\tvar d = t * this.getLength();\n\t\tvar curveLengths = this.getCurveLengths();\n\t\tvar i = 0;\n\n\t\t// To think about boundaries points.\n\n\t\twhile ( i < curveLengths.length ) {\n\n\t\t\tif ( curveLengths[ i ] >= d ) {\n\n\t\t\t\tvar diff = curveLengths[ i ] - d;\n\t\t\t\tvar curve = this.curves[ i ];\n\n\t\t\t\tvar segmentLength = curve.getLength();\n\t\t\t\tvar u = segmentLength === 0 ? 0 : 1 - diff / segmentLength;\n\n\t\t\t\treturn curve.getPointAt( u );\n\n\t\t\t}\n\n\t\t\ti ++;\n\n\t\t}\n\n\t\treturn null;\n\n\t\t// loop where sum != 0, sum > d , sum+1 <d\n\n\t},\n\n\t// We cannot use the default THREE.Curve getPoint() with getLength() because in\n\t// THREE.Curve, getLength() depends on getPoint() but in THREE.CurvePath\n\t// getPoint() depends on getLength\n\n\tgetLength: function () {\n\n\t\tvar lens = this.getCurveLengths();\n\t\treturn lens[ lens.length - 1 ];\n\n\t},\n\n\t// cacheLengths must be recalculated.\n\tupdateArcLengths: function () {\n\n\t\tthis.needsUpdate = true;\n\t\tthis.cacheLengths = null;\n\t\tthis.getCurveLengths();\n\n\t},\n\n\t// Compute lengths and cache them\n\t// We cannot overwrite getLengths() because UtoT mapping uses it.\n\n\tgetCurveLengths: function () {\n\n\t\t// We use cache values if curves and cache array are same length\n\n\t\tif ( this.cacheLengths && this.cacheLengths.length === this.curves.length ) {\n\n\t\t\treturn this.cacheLengths;\n\n\t\t}\n\n\t\t// Get length of sub-curve\n\t\t// Push sums into cached array\n\n\t\tvar lengths = [], sums = 0;\n\n\t\tfor ( var i = 0, l = this.curves.length; i < l; i ++ ) {\n\n\t\t\tsums += this.curves[ i ].getLength();\n\t\t\tlengths.push( sums );\n\n\t\t}\n\n\t\tthis.cacheLengths = lengths;\n\n\t\treturn lengths;\n\n\t},\n\n\tgetSpacedPoints: function ( divisions ) {\n\n\t\tif ( divisions === undefined ) divisions = 40;\n\n\t\tvar points = [];\n\n\t\tfor ( var i = 0; i <= divisions; i ++ ) {\n\n\t\t\tpoints.push( this.getPoint( i / divisions ) );\n\n\t\t}\n\n\t\tif ( this.autoClose ) {\n\n\t\t\tpoints.push( points[ 0 ] );\n\n\t\t}\n\n\t\treturn points;\n\n\t},\n\n\tgetPoints: function ( divisions ) {\n\n\t\tdivisions = divisions || 12;\n\n\t\tvar points = [], last;\n\n\t\tfor ( var i = 0, curves = this.curves; i < curves.length; i ++ ) {\n\n\t\t\tvar curve = curves[ i ];\n\t\t\tvar resolution = ( curve && curve.isEllipseCurve ) ? divisions * 2\n\t\t\t\t: ( curve && ( curve.isLineCurve || curve.isLineCurve3 ) ) ? 1\n\t\t\t\t\t: ( curve && curve.isSplineCurve ) ? divisions * curve.points.length\n\t\t\t\t\t\t: divisions;\n\n\t\t\tvar pts = curve.getPoints( resolution );\n\n\t\t\tfor ( var j = 0; j < pts.length; j ++ ) {\n\n\t\t\t\tvar point = pts[ j ];\n\n\t\t\t\tif ( last && last.equals( point ) ) continue; // ensures no consecutive points are duplicates\n\n\t\t\t\tpoints.push( point );\n\t\t\t\tlast = point;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.autoClose && points.length > 1 && ! points[ points.length - 1 ].equals( points[ 0 ] ) ) {\n\n\t\t\tpoints.push( points[ 0 ] );\n\n\t\t}\n\n\t\treturn points;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tCurve.prototype.copy.call( this, source );\n\n\t\tthis.curves = [];\n\n\t\tfor ( var i = 0, l = source.curves.length; i < l; i ++ ) {\n\n\t\t\tvar curve = source.curves[ i ];\n\n\t\t\tthis.curves.push( curve.clone() );\n\n\t\t}\n\n\t\tthis.autoClose = source.autoClose;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar data = Curve.prototype.toJSON.call( this );\n\n\t\tdata.autoClose = this.autoClose;\n\t\tdata.curves = [];\n\n\t\tfor ( var i = 0, l = this.curves.length; i < l; i ++ ) {\n\n\t\t\tvar curve = this.curves[ i ];\n\t\t\tdata.curves.push( curve.toJSON() );\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tfromJSON: function ( json ) {\n\n\t\tCurve.prototype.fromJSON.call( this, json );\n\n\t\tthis.autoClose = json.autoClose;\n\t\tthis.curves = [];\n\n\t\tfor ( var i = 0, l = json.curves.length; i < l; i ++ ) {\n\n\t\t\tvar curve = json.curves[ i ];\n\t\t\tthis.curves.push( new Curves[ curve.type ]().fromJSON( curve ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { CurvePath };\n","import { Vector2 } from '../../math/Vector2.js';\nimport { CurvePath } from './CurvePath.js';\nimport { EllipseCurve } from '../curves/EllipseCurve.js';\nimport { SplineCurve } from '../curves/SplineCurve.js';\nimport { CubicBezierCurve } from '../curves/CubicBezierCurve.js';\nimport { QuadraticBezierCurve } from '../curves/QuadraticBezierCurve.js';\nimport { LineCurve } from '../curves/LineCurve.js';\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * Creates free form 2d path using series of points, lines or curves.\n **/\n\nfunction Path( points ) {\n\n\tCurvePath.call( this );\n\n\tthis.type = 'Path';\n\n\tthis.currentPoint = new Vector2();\n\n\tif ( points ) {\n\n\t\tthis.setFromPoints( points );\n\n\t}\n\n}\n\nPath.prototype = Object.assign( Object.create( CurvePath.prototype ), {\n\n\tconstructor: Path,\n\n\tsetFromPoints: function ( points ) {\n\n\t\tthis.moveTo( points[ 0 ].x, points[ 0 ].y );\n\n\t\tfor ( var i = 1, l = points.length; i < l; i ++ ) {\n\n\t\t\tthis.lineTo( points[ i ].x, points[ i ].y );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tmoveTo: function ( x, y ) {\n\n\t\tthis.currentPoint.set( x, y ); // TODO consider referencing vectors instead of copying?\n\n\t\treturn this;\n\n\t},\n\n\tlineTo: function ( x, y ) {\n\n\t\tvar curve = new LineCurve( this.currentPoint.clone(), new Vector2( x, y ) );\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( x, y );\n\n\t\treturn this;\n\n\t},\n\n\tquadraticCurveTo: function ( aCPx, aCPy, aX, aY ) {\n\n\t\tvar curve = new QuadraticBezierCurve(\n\t\t\tthis.currentPoint.clone(),\n\t\t\tnew Vector2( aCPx, aCPy ),\n\t\t\tnew Vector2( aX, aY )\n\t\t);\n\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( aX, aY );\n\n\t\treturn this;\n\n\t},\n\n\tbezierCurveTo: function ( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\n\n\t\tvar curve = new CubicBezierCurve(\n\t\t\tthis.currentPoint.clone(),\n\t\t\tnew Vector2( aCP1x, aCP1y ),\n\t\t\tnew Vector2( aCP2x, aCP2y ),\n\t\t\tnew Vector2( aX, aY )\n\t\t);\n\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( aX, aY );\n\n\t\treturn this;\n\n\t},\n\n\tsplineThru: function ( pts /*Array of Vector*/ ) {\n\n\t\tvar npts = [ this.currentPoint.clone() ].concat( pts );\n\n\t\tvar curve = new SplineCurve( npts );\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.copy( pts[ pts.length - 1 ] );\n\n\t\treturn this;\n\n\t},\n\n\tarc: function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\t\tvar x0 = this.currentPoint.x;\n\t\tvar y0 = this.currentPoint.y;\n\n\t\tthis.absarc( aX + x0, aY + y0, aRadius,\n\t\t\taStartAngle, aEndAngle, aClockwise );\n\n\t\treturn this;\n\n\t},\n\n\tabsarc: function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\t\tthis.absellipse( aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\n\n\t\treturn this;\n\n\t},\n\n\tellipse: function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\n\n\t\tvar x0 = this.currentPoint.x;\n\t\tvar y0 = this.currentPoint.y;\n\n\t\tthis.absellipse( aX + x0, aY + y0, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\n\n\t\treturn this;\n\n\t},\n\n\tabsellipse: function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\n\n\t\tvar curve = new EllipseCurve( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\n\n\t\tif ( this.curves.length > 0 ) {\n\n\t\t\t// if a previous curve is present, attempt to join\n\t\t\tvar firstPoint = curve.getPoint( 0 );\n\n\t\t\tif ( ! firstPoint.equals( this.currentPoint ) ) {\n\n\t\t\t\tthis.lineTo( firstPoint.x, firstPoint.y );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.curves.push( curve );\n\n\t\tvar lastPoint = curve.getPoint( 1 );\n\t\tthis.currentPoint.copy( lastPoint );\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tCurvePath.prototype.copy.call( this, source );\n\n\t\tthis.currentPoint.copy( source.currentPoint );\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar data = CurvePath.prototype.toJSON.call( this );\n\n\t\tdata.currentPoint = this.currentPoint.toArray();\n\n\t\treturn data;\n\n\t},\n\n\tfromJSON: function ( json ) {\n\n\t\tCurvePath.prototype.fromJSON.call( this, json );\n\n\t\tthis.currentPoint.fromArray( json.currentPoint );\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Path };\n","/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nimport { Texture } from './Texture.js';\n\nfunction CompressedTexture( mipmaps, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding ) {\n\n\tTexture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\tthis.image = { width: width, height: height };\n\tthis.mipmaps = mipmaps;\n\n\t// no flipping for cube textures\n\t// (also flipping doesn't work for compressed textures )\n\n\tthis.flipY = false;\n\n\t// can't generate mipmaps for compressed textures\n\t// mips must be embedded in DDS files\n\n\tthis.generateMipmaps = false;\n\n}\n\nCompressedTexture.prototype = Object.create( Texture.prototype );\nCompressedTexture.prototype.constructor = CompressedTexture;\n\nCompressedTexture.prototype.isCompressedTexture = true;\n\n\nexport { CompressedTexture };\n","import { _Math } from './Math.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar _colorKeywords = { 'aliceblue': 0xF0F8FF, 'antiquewhite': 0xFAEBD7, 'aqua': 0x00FFFF, 'aquamarine': 0x7FFFD4, 'azure': 0xF0FFFF,\n\t'beige': 0xF5F5DC, 'bisque': 0xFFE4C4, 'black': 0x000000, 'blanchedalmond': 0xFFEBCD, 'blue': 0x0000FF, 'blueviolet': 0x8A2BE2,\n\t'brown': 0xA52A2A, 'burlywood': 0xDEB887, 'cadetblue': 0x5F9EA0, 'chartreuse': 0x7FFF00, 'chocolate': 0xD2691E, 'coral': 0xFF7F50,\n\t'cornflowerblue': 0x6495ED, 'cornsilk': 0xFFF8DC, 'crimson': 0xDC143C, 'cyan': 0x00FFFF, 'darkblue': 0x00008B, 'darkcyan': 0x008B8B,\n\t'darkgoldenrod': 0xB8860B, 'darkgray': 0xA9A9A9, 'darkgreen': 0x006400, 'darkgrey': 0xA9A9A9, 'darkkhaki': 0xBDB76B, 'darkmagenta': 0x8B008B,\n\t'darkolivegreen': 0x556B2F, 'darkorange': 0xFF8C00, 'darkorchid': 0x9932CC, 'darkred': 0x8B0000, 'darksalmon': 0xE9967A, 'darkseagreen': 0x8FBC8F,\n\t'darkslateblue': 0x483D8B, 'darkslategray': 0x2F4F4F, 'darkslategrey': 0x2F4F4F, 'darkturquoise': 0x00CED1, 'darkviolet': 0x9400D3,\n\t'deeppink': 0xFF1493, 'deepskyblue': 0x00BFFF, 'dimgray': 0x696969, 'dimgrey': 0x696969, 'dodgerblue': 0x1E90FF, 'firebrick': 0xB22222,\n\t'floralwhite': 0xFFFAF0, 'forestgreen': 0x228B22, 'fuchsia': 0xFF00FF, 'gainsboro': 0xDCDCDC, 'ghostwhite': 0xF8F8FF, 'gold': 0xFFD700,\n\t'goldenrod': 0xDAA520, 'gray': 0x808080, 'green': 0x008000, 'greenyellow': 0xADFF2F, 'grey': 0x808080, 'honeydew': 0xF0FFF0, 'hotpink': 0xFF69B4,\n\t'indianred': 0xCD5C5C, 'indigo': 0x4B0082, 'ivory': 0xFFFFF0, 'khaki': 0xF0E68C, 'lavender': 0xE6E6FA, 'lavenderblush': 0xFFF0F5, 'lawngreen': 0x7CFC00,\n\t'lemonchiffon': 0xFFFACD, 'lightblue': 0xADD8E6, 'lightcoral': 0xF08080, 'lightcyan': 0xE0FFFF, 'lightgoldenrodyellow': 0xFAFAD2, 'lightgray': 0xD3D3D3,\n\t'lightgreen': 0x90EE90, 'lightgrey': 0xD3D3D3, 'lightpink': 0xFFB6C1, 'lightsalmon': 0xFFA07A, 'lightseagreen': 0x20B2AA, 'lightskyblue': 0x87CEFA,\n\t'lightslategray': 0x778899, 'lightslategrey': 0x778899, 'lightsteelblue': 0xB0C4DE, 'lightyellow': 0xFFFFE0, 'lime': 0x00FF00, 'limegreen': 0x32CD32,\n\t'linen': 0xFAF0E6, 'magenta': 0xFF00FF, 'maroon': 0x800000, 'mediumaquamarine': 0x66CDAA, 'mediumblue': 0x0000CD, 'mediumorchid': 0xBA55D3,\n\t'mediumpurple': 0x9370DB, 'mediumseagreen': 0x3CB371, 'mediumslateblue': 0x7B68EE, 'mediumspringgreen': 0x00FA9A, 'mediumturquoise': 0x48D1CC,\n\t'mediumvioletred': 0xC71585, 'midnightblue': 0x191970, 'mintcream': 0xF5FFFA, 'mistyrose': 0xFFE4E1, 'moccasin': 0xFFE4B5, 'navajowhite': 0xFFDEAD,\n\t'navy': 0x000080, 'oldlace': 0xFDF5E6, 'olive': 0x808000, 'olivedrab': 0x6B8E23, 'orange': 0xFFA500, 'orangered': 0xFF4500, 'orchid': 0xDA70D6,\n\t'palegoldenrod': 0xEEE8AA, 'palegreen': 0x98FB98, 'paleturquoise': 0xAFEEEE, 'palevioletred': 0xDB7093, 'papayawhip': 0xFFEFD5, 'peachpuff': 0xFFDAB9,\n\t'peru': 0xCD853F, 'pink': 0xFFC0CB, 'plum': 0xDDA0DD, 'powderblue': 0xB0E0E6, 'purple': 0x800080, 'rebeccapurple': 0x663399, 'red': 0xFF0000, 'rosybrown': 0xBC8F8F,\n\t'royalblue': 0x4169E1, 'saddlebrown': 0x8B4513, 'salmon': 0xFA8072, 'sandybrown': 0xF4A460, 'seagreen': 0x2E8B57, 'seashell': 0xFFF5EE,\n\t'sienna': 0xA0522D, 'silver': 0xC0C0C0, 'skyblue': 0x87CEEB, 'slateblue': 0x6A5ACD, 'slategray': 0x708090, 'slategrey': 0x708090, 'snow': 0xFFFAFA,\n\t'springgreen': 0x00FF7F, 'steelblue': 0x4682B4, 'tan': 0xD2B48C, 'teal': 0x008080, 'thistle': 0xD8BFD8, 'tomato': 0xFF6347, 'turquoise': 0x40E0D0,\n\t'violet': 0xEE82EE, 'wheat': 0xF5DEB3, 'white': 0xFFFFFF, 'whitesmoke': 0xF5F5F5, 'yellow': 0xFFFF00, 'yellowgreen': 0x9ACD32 };\n\nvar _hslA = { h: 0, s: 0, l: 0 };\nvar _hslB = { h: 0, s: 0, l: 0 };\n\nfunction Color( r, g, b ) {\n\n\tif ( g === undefined && b === undefined ) {\n\n\t\t// r is THREE.Color, hex or string\n\t\treturn this.set( r );\n\n\t}\n\n\treturn this.setRGB( r, g, b );\n\n}\n\nfunction hue2rgb( p, q, t ) {\n\n\tif ( t < 0 ) t += 1;\n\tif ( t > 1 ) t -= 1;\n\tif ( t < 1 / 6 ) return p + ( q - p ) * 6 * t;\n\tif ( t < 1 / 2 ) return q;\n\tif ( t < 2 / 3 ) return p + ( q - p ) * 6 * ( 2 / 3 - t );\n\treturn p;\n\n}\n\nfunction SRGBToLinear( c ) {\n\n\treturn ( c < 0.04045 ) ? c * 0.0773993808 : Math.pow( c * 0.9478672986 + 0.0521327014, 2.4 );\n\n}\n\nfunction LinearToSRGB( c ) {\n\n\treturn ( c < 0.0031308 ) ? c * 12.92 : 1.055 * ( Math.pow( c, 0.41666 ) ) - 0.055;\n\n}\n\nObject.assign( Color.prototype, {\n\n\tisColor: true,\n\n\tr: 1, g: 1, b: 1,\n\n\tset: function ( value ) {\n\n\t\tif ( value && value.isColor ) {\n\n\t\t\tthis.copy( value );\n\n\t\t} else if ( typeof value === 'number' ) {\n\n\t\t\tthis.setHex( value );\n\n\t\t} else if ( typeof value === 'string' ) {\n\n\t\t\tthis.setStyle( value );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.r = scalar;\n\t\tthis.g = scalar;\n\t\tthis.b = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetHex: function ( hex ) {\n\n\t\thex = Math.floor( hex );\n\n\t\tthis.r = ( hex >> 16 & 255 ) / 255;\n\t\tthis.g = ( hex >> 8 & 255 ) / 255;\n\t\tthis.b = ( hex & 255 ) / 255;\n\n\t\treturn this;\n\n\t},\n\n\tsetRGB: function ( r, g, b ) {\n\n\t\tthis.r = r;\n\t\tthis.g = g;\n\t\tthis.b = b;\n\n\t\treturn this;\n\n\t},\n\n\tsetHSL: function ( h, s, l ) {\n\n\t\t// h,s,l ranges are in 0.0 - 1.0\n\t\th = _Math.euclideanModulo( h, 1 );\n\t\ts = _Math.clamp( s, 0, 1 );\n\t\tl = _Math.clamp( l, 0, 1 );\n\n\t\tif ( s === 0 ) {\n\n\t\t\tthis.r = this.g = this.b = l;\n\n\t\t} else {\n\n\t\t\tvar p = l <= 0.5 ? l * ( 1 + s ) : l + s - ( l * s );\n\t\t\tvar q = ( 2 * l ) - p;\n\n\t\t\tthis.r = hue2rgb( q, p, h + 1 / 3 );\n\t\t\tthis.g = hue2rgb( q, p, h );\n\t\t\tthis.b = hue2rgb( q, p, h - 1 / 3 );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetStyle: function ( style ) {\n\n\t\tfunction handleAlpha( string ) {\n\n\t\t\tif ( string === undefined ) return;\n\n\t\t\tif ( parseFloat( string ) < 1 ) {\n\n\t\t\t\tconsole.warn( 'THREE.Color: Alpha component of ' + style + ' will be ignored.' );\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tvar m;\n\n\t\tif ( m = /^((?:rgb|hsl)a?)\\(\\s*([^\\)]*)\\)/.exec( style ) ) {\n\n\t\t\t// rgb / hsl\n\n\t\t\tvar color;\n\t\t\tvar name = m[ 1 ];\n\t\t\tvar components = m[ 2 ];\n\n\t\t\tswitch ( name ) {\n\n\t\t\t\tcase 'rgb':\n\t\t\t\tcase 'rgba':\n\n\t\t\t\t\tif ( color = /^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// rgb(255,0,0) rgba(255,0,0,0.5)\n\t\t\t\t\t\tthis.r = Math.min( 255, parseInt( color[ 1 ], 10 ) ) / 255;\n\t\t\t\t\t\tthis.g = Math.min( 255, parseInt( color[ 2 ], 10 ) ) / 255;\n\t\t\t\t\t\tthis.b = Math.min( 255, parseInt( color[ 3 ], 10 ) ) / 255;\n\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\n\n\t\t\t\t\t\treturn this;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( color = /^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// rgb(100%,0%,0%) rgba(100%,0%,0%,0.5)\n\t\t\t\t\t\tthis.r = Math.min( 100, parseInt( color[ 1 ], 10 ) ) / 100;\n\t\t\t\t\t\tthis.g = Math.min( 100, parseInt( color[ 2 ], 10 ) ) / 100;\n\t\t\t\t\t\tthis.b = Math.min( 100, parseInt( color[ 3 ], 10 ) ) / 100;\n\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\n\n\t\t\t\t\t\treturn this;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'hsl':\n\t\t\t\tcase 'hsla':\n\n\t\t\t\t\tif ( color = /^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// hsl(120,50%,50%) hsla(120,50%,50%,0.5)\n\t\t\t\t\t\tvar h = parseFloat( color[ 1 ] ) / 360;\n\t\t\t\t\t\tvar s = parseInt( color[ 2 ], 10 ) / 100;\n\t\t\t\t\t\tvar l = parseInt( color[ 3 ], 10 ) / 100;\n\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\n\n\t\t\t\t\t\treturn this.setHSL( h, s, l );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t} else if ( m = /^\\#([A-Fa-f0-9]+)$/.exec( style ) ) {\n\n\t\t\t// hex color\n\n\t\t\tvar hex = m[ 1 ];\n\t\t\tvar size = hex.length;\n\n\t\t\tif ( size === 3 ) {\n\n\t\t\t\t// #ff0\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 0 ), 16 ) / 255;\n\t\t\t\tthis.g = parseInt( hex.charAt( 1 ) + hex.charAt( 1 ), 16 ) / 255;\n\t\t\t\tthis.b = parseInt( hex.charAt( 2 ) + hex.charAt( 2 ), 16 ) / 255;\n\n\t\t\t\treturn this;\n\n\t\t\t} else if ( size === 6 ) {\n\n\t\t\t\t// #ff0000\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 1 ), 16 ) / 255;\n\t\t\t\tthis.g = parseInt( hex.charAt( 2 ) + hex.charAt( 3 ), 16 ) / 255;\n\t\t\t\tthis.b = parseInt( hex.charAt( 4 ) + hex.charAt( 5 ), 16 ) / 255;\n\n\t\t\t\treturn this;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( style && style.length > 0 ) {\n\n\t\t\treturn this.setColorName( style );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetColorName: function ( style ) {\n\n\t\t// color keywords\n\t\tvar hex = _colorKeywords[ style ];\n\n\t\tif ( hex !== undefined ) {\n\n\t\t\t// red\n\t\t\tthis.setHex( hex );\n\n\t\t} else {\n\n\t\t\t// unknown color\n\t\t\tconsole.warn( 'THREE.Color: Unknown color ' + style );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.r, this.g, this.b );\n\n\t},\n\n\tcopy: function ( color ) {\n\n\t\tthis.r = color.r;\n\t\tthis.g = color.g;\n\t\tthis.b = color.b;\n\n\t\treturn this;\n\n\t},\n\n\tcopyGammaToLinear: function ( color, gammaFactor ) {\n\n\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\n\n\t\tthis.r = Math.pow( color.r, gammaFactor );\n\t\tthis.g = Math.pow( color.g, gammaFactor );\n\t\tthis.b = Math.pow( color.b, gammaFactor );\n\n\t\treturn this;\n\n\t},\n\n\tcopyLinearToGamma: function ( color, gammaFactor ) {\n\n\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\n\n\t\tvar safeInverse = ( gammaFactor > 0 ) ? ( 1.0 / gammaFactor ) : 1.0;\n\n\t\tthis.r = Math.pow( color.r, safeInverse );\n\t\tthis.g = Math.pow( color.g, safeInverse );\n\t\tthis.b = Math.pow( color.b, safeInverse );\n\n\t\treturn this;\n\n\t},\n\n\tconvertGammaToLinear: function ( gammaFactor ) {\n\n\t\tthis.copyGammaToLinear( this, gammaFactor );\n\n\t\treturn this;\n\n\t},\n\n\tconvertLinearToGamma: function ( gammaFactor ) {\n\n\t\tthis.copyLinearToGamma( this, gammaFactor );\n\n\t\treturn this;\n\n\t},\n\n\tcopySRGBToLinear: function ( color ) {\n\n\t\tthis.r = SRGBToLinear( color.r );\n\t\tthis.g = SRGBToLinear( color.g );\n\t\tthis.b = SRGBToLinear( color.b );\n\n\t\treturn this;\n\n\t},\n\n\tcopyLinearToSRGB: function ( color ) {\n\n\t\tthis.r = LinearToSRGB( color.r );\n\t\tthis.g = LinearToSRGB( color.g );\n\t\tthis.b = LinearToSRGB( color.b );\n\n\t\treturn this;\n\n\t},\n\n\tconvertSRGBToLinear: function () {\n\n\t\tthis.copySRGBToLinear( this );\n\n\t\treturn this;\n\n\t},\n\n\tconvertLinearToSRGB: function () {\n\n\t\tthis.copyLinearToSRGB( this );\n\n\t\treturn this;\n\n\t},\n\n\tgetHex: function () {\n\n\t\treturn ( this.r * 255 ) << 16 ^ ( this.g * 255 ) << 8 ^ ( this.b * 255 ) << 0;\n\n\t},\n\n\tgetHexString: function () {\n\n\t\treturn ( '000000' + this.getHex().toString( 16 ) ).slice( - 6 );\n\n\t},\n\n\tgetHSL: function ( target ) {\n\n\t\t// h,s,l ranges are in 0.0 - 1.0\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Color: .getHSL() target is now required' );\n\t\t\ttarget = { h: 0, s: 0, l: 0 };\n\n\t\t}\n\n\t\tvar r = this.r, g = this.g, b = this.b;\n\n\t\tvar max = Math.max( r, g, b );\n\t\tvar min = Math.min( r, g, b );\n\n\t\tvar hue, saturation;\n\t\tvar lightness = ( min + max ) / 2.0;\n\n\t\tif ( min === max ) {\n\n\t\t\thue = 0;\n\t\t\tsaturation = 0;\n\n\t\t} else {\n\n\t\t\tvar delta = max - min;\n\n\t\t\tsaturation = lightness <= 0.5 ? delta / ( max + min ) : delta / ( 2 - max - min );\n\n\t\t\tswitch ( max ) {\n\n\t\t\t\tcase r: hue = ( g - b ) / delta + ( g < b ? 6 : 0 ); break;\n\t\t\t\tcase g: hue = ( b - r ) / delta + 2; break;\n\t\t\t\tcase b: hue = ( r - g ) / delta + 4; break;\n\n\t\t\t}\n\n\t\t\thue /= 6;\n\n\t\t}\n\n\t\ttarget.h = hue;\n\t\ttarget.s = saturation;\n\t\ttarget.l = lightness;\n\n\t\treturn target;\n\n\t},\n\n\tgetStyle: function () {\n\n\t\treturn 'rgb(' + ( ( this.r * 255 ) | 0 ) + ',' + ( ( this.g * 255 ) | 0 ) + ',' + ( ( this.b * 255 ) | 0 ) + ')';\n\n\t},\n\n\toffsetHSL: function ( h, s, l ) {\n\n\t\tthis.getHSL( _hslA );\n\n\t\t_hslA.h += h; _hslA.s += s; _hslA.l += l;\n\n\t\tthis.setHSL( _hslA.h, _hslA.s, _hslA.l );\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( color ) {\n\n\t\tthis.r += color.r;\n\t\tthis.g += color.g;\n\t\tthis.b += color.b;\n\n\t\treturn this;\n\n\t},\n\n\taddColors: function ( color1, color2 ) {\n\n\t\tthis.r = color1.r + color2.r;\n\t\tthis.g = color1.g + color2.g;\n\t\tthis.b = color1.b + color2.b;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.r += s;\n\t\tthis.g += s;\n\t\tthis.b += s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( color ) {\n\n\t\tthis.r = Math.max( 0, this.r - color.r );\n\t\tthis.g = Math.max( 0, this.g - color.g );\n\t\tthis.b = Math.max( 0, this.b - color.b );\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( color ) {\n\n\t\tthis.r *= color.r;\n\t\tthis.g *= color.g;\n\t\tthis.b *= color.b;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tthis.r *= s;\n\t\tthis.g *= s;\n\t\tthis.b *= s;\n\n\t\treturn this;\n\n\t},\n\n\tlerp: function ( color, alpha ) {\n\n\t\tthis.r += ( color.r - this.r ) * alpha;\n\t\tthis.g += ( color.g - this.g ) * alpha;\n\t\tthis.b += ( color.b - this.b ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tlerpHSL: function ( color, alpha ) {\n\n\t\tthis.getHSL( _hslA );\n\t\tcolor.getHSL( _hslB );\n\n\t\tvar h = _Math.lerp( _hslA.h, _hslB.h, alpha );\n\t\tvar s = _Math.lerp( _hslA.s, _hslB.s, alpha );\n\t\tvar l = _Math.lerp( _hslA.l, _hslB.l, alpha );\n\n\t\tthis.setHSL( h, s, l );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( c ) {\n\n\t\treturn ( c.r === this.r ) && ( c.g === this.g ) && ( c.b === this.b );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.r = array[ offset ];\n\t\tthis.g = array[ offset + 1 ];\n\t\tthis.b = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.r;\n\t\tarray[ offset + 1 ] = this.g;\n\t\tarray[ offset + 2 ] = this.b;\n\n\t\treturn array;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\treturn this.getHex();\n\n\t}\n\n} );\n\nColor.NAMES = _colorKeywords;\n\nexport { Color };\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Vector2 } from '../math/Vector2.js';\n\n// CylinderGeometry\n\nfunction CylinderGeometry( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'CylinderGeometry';\n\n\tthis.parameters = {\n\t\tradiusTop: radiusTop,\n\t\tradiusBottom: radiusBottom,\n\t\theight: height,\n\t\tradialSegments: radialSegments,\n\t\theightSegments: heightSegments,\n\t\topenEnded: openEnded,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tthis.fromBufferGeometry( new CylinderBufferGeometry( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) );\n\tthis.mergeVertices();\n\n}\n\nCylinderGeometry.prototype = Object.create( Geometry.prototype );\nCylinderGeometry.prototype.constructor = CylinderGeometry;\n\n// CylinderBufferGeometry\n\nfunction CylinderBufferGeometry( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'CylinderBufferGeometry';\n\n\tthis.parameters = {\n\t\tradiusTop: radiusTop,\n\t\tradiusBottom: radiusBottom,\n\t\theight: height,\n\t\tradialSegments: radialSegments,\n\t\theightSegments: heightSegments,\n\t\topenEnded: openEnded,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tvar scope = this;\n\n\tradiusTop = radiusTop !== undefined ? radiusTop : 1;\n\tradiusBottom = radiusBottom !== undefined ? radiusBottom : 1;\n\theight = height || 1;\n\n\tradialSegments = Math.floor( radialSegments ) || 8;\n\theightSegments = Math.floor( heightSegments ) || 1;\n\n\topenEnded = openEnded !== undefined ? openEnded : false;\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0.0;\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\n\n\t// buffers\n\n\tvar indices = [];\n\tvar vertices = [];\n\tvar normals = [];\n\tvar uvs = [];\n\n\t// helper variables\n\n\tvar index = 0;\n\tvar indexArray = [];\n\tvar halfHeight = height / 2;\n\tvar groupStart = 0;\n\n\t// generate geometry\n\n\tgenerateTorso();\n\n\tif ( openEnded === false ) {\n\n\t\tif ( radiusTop > 0 ) generateCap( true );\n\t\tif ( radiusBottom > 0 ) generateCap( false );\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\tfunction generateTorso() {\n\n\t\tvar x, y;\n\t\tvar normal = new Vector3();\n\t\tvar vertex = new Vector3();\n\n\t\tvar groupCount = 0;\n\n\t\t// this will be used to calculate the normal\n\t\tvar slope = ( radiusBottom - radiusTop ) / height;\n\n\t\t// generate vertices, normals and uvs\n\n\t\tfor ( y = 0; y <= heightSegments; y ++ ) {\n\n\t\t\tvar indexRow = [];\n\n\t\t\tvar v = y / heightSegments;\n\n\t\t\t// calculate the radius of the current row\n\n\t\t\tvar radius = v * ( radiusBottom - radiusTop ) + radiusTop;\n\n\t\t\tfor ( x = 0; x <= radialSegments; x ++ ) {\n\n\t\t\t\tvar u = x / radialSegments;\n\n\t\t\t\tvar theta = u * thetaLength + thetaStart;\n\n\t\t\t\tvar sinTheta = Math.sin( theta );\n\t\t\t\tvar cosTheta = Math.cos( theta );\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = radius * sinTheta;\n\t\t\t\tvertex.y = - v * height + halfHeight;\n\t\t\t\tvertex.z = radius * cosTheta;\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// normal\n\n\t\t\t\tnormal.set( sinTheta, slope, cosTheta ).normalize();\n\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t// uv\n\n\t\t\t\tuvs.push( u, 1 - v );\n\n\t\t\t\t// save index of vertex in respective row\n\n\t\t\t\tindexRow.push( index ++ );\n\n\t\t\t}\n\n\t\t\t// now save vertices of the row in our index array\n\n\t\t\tindexArray.push( indexRow );\n\n\t\t}\n\n\t\t// generate indices\n\n\t\tfor ( x = 0; x < radialSegments; x ++ ) {\n\n\t\t\tfor ( y = 0; y < heightSegments; y ++ ) {\n\n\t\t\t\t// we use the index array to access the correct indices\n\n\t\t\t\tvar a = indexArray[ y ][ x ];\n\t\t\t\tvar b = indexArray[ y + 1 ][ x ];\n\t\t\t\tvar c = indexArray[ y + 1 ][ x + 1 ];\n\t\t\t\tvar d = indexArray[ y ][ x + 1 ];\n\n\t\t\t\t// faces\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t\t// update group counter\n\n\t\t\t\tgroupCount += 6;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\tscope.addGroup( groupStart, groupCount, 0 );\n\n\t\t// calculate new start value for groups\n\n\t\tgroupStart += groupCount;\n\n\t}\n\n\tfunction generateCap( top ) {\n\n\t\tvar x, centerIndexStart, centerIndexEnd;\n\n\t\tvar uv = new Vector2();\n\t\tvar vertex = new Vector3();\n\n\t\tvar groupCount = 0;\n\n\t\tvar radius = ( top === true ) ? radiusTop : radiusBottom;\n\t\tvar sign = ( top === true ) ? 1 : - 1;\n\n\t\t// save the index of the first center vertex\n\t\tcenterIndexStart = index;\n\n\t\t// first we generate the center vertex data of the cap.\n\t\t// because the geometry needs one set of uvs per face,\n\t\t// we must generate a center vertex per face/segment\n\n\t\tfor ( x = 1; x <= radialSegments; x ++ ) {\n\n\t\t\t// vertex\n\n\t\t\tvertices.push( 0, halfHeight * sign, 0 );\n\n\t\t\t// normal\n\n\t\t\tnormals.push( 0, sign, 0 );\n\n\t\t\t// uv\n\n\t\t\tuvs.push( 0.5, 0.5 );\n\n\t\t\t// increase index\n\n\t\t\tindex ++;\n\n\t\t}\n\n\t\t// save the index of the last center vertex\n\n\t\tcenterIndexEnd = index;\n\n\t\t// now we generate the surrounding vertices, normals and uvs\n\n\t\tfor ( x = 0; x <= radialSegments; x ++ ) {\n\n\t\t\tvar u = x / radialSegments;\n\t\t\tvar theta = u * thetaLength + thetaStart;\n\n\t\t\tvar cosTheta = Math.cos( theta );\n\t\t\tvar sinTheta = Math.sin( theta );\n\n\t\t\t// vertex\n\n\t\t\tvertex.x = radius * sinTheta;\n\t\t\tvertex.y = halfHeight * sign;\n\t\t\tvertex.z = radius * cosTheta;\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t// normal\n\n\t\t\tnormals.push( 0, sign, 0 );\n\n\t\t\t// uv\n\n\t\t\tuv.x = ( cosTheta * 0.5 ) + 0.5;\n\t\t\tuv.y = ( sinTheta * 0.5 * sign ) + 0.5;\n\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\t// increase index\n\n\t\t\tindex ++;\n\n\t\t}\n\n\t\t// generate indices\n\n\t\tfor ( x = 0; x < radialSegments; x ++ ) {\n\n\t\t\tvar c = centerIndexStart + x;\n\t\t\tvar i = centerIndexEnd + x;\n\n\t\t\tif ( top === true ) {\n\n\t\t\t\t// face top\n\n\t\t\t\tindices.push( i, i + 1, c );\n\n\t\t\t} else {\n\n\t\t\t\t// face bottom\n\n\t\t\t\tindices.push( i + 1, i, c );\n\n\t\t\t}\n\n\t\t\tgroupCount += 3;\n\n\t\t}\n\n\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\tscope.addGroup( groupStart, groupCount, top === true ? 1 : 2 );\n\n\t\t// calculate new start value for groups\n\n\t\tgroupStart += groupCount;\n\n\t}\n\n}\n\nCylinderBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nCylinderBufferGeometry.prototype.constructor = CylinderBufferGeometry;\n\n\nexport { CylinderGeometry, CylinderBufferGeometry };\n","import { Vector3 } from './Vector3.js';\nimport { Plane } from './Plane.js';\n\n/**\n * @author bhouston / http://clara.io\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar _v0 = new Vector3();\nvar _v1 = new Vector3();\nvar _v2 = new Vector3();\nvar _v3 = new Vector3();\n\nvar _vab = new Vector3();\nvar _vac = new Vector3();\nvar _vbc = new Vector3();\nvar _vap = new Vector3();\nvar _vbp = new Vector3();\nvar _vcp = new Vector3();\n\nfunction Triangle( a, b, c ) {\n\n\tthis.a = ( a !== undefined ) ? a : new Vector3();\n\tthis.b = ( b !== undefined ) ? b : new Vector3();\n\tthis.c = ( c !== undefined ) ? c : new Vector3();\n\n}\n\nObject.assign( Triangle, {\n\n\tgetNormal: function ( a, b, c, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getNormal() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\ttarget.subVectors( c, b );\n\t\t_v0.subVectors( a, b );\n\t\ttarget.cross( _v0 );\n\n\t\tvar targetLengthSq = target.lengthSq();\n\t\tif ( targetLengthSq > 0 ) {\n\n\t\t\treturn target.multiplyScalar( 1 / Math.sqrt( targetLengthSq ) );\n\n\t\t}\n\n\t\treturn target.set( 0, 0, 0 );\n\n\t},\n\n\t// static/instance method to calculate barycentric coordinates\n\t// based on: http://www.blackpawn.com/texts/pointinpoly/default.html\n\tgetBarycoord: function ( point, a, b, c, target ) {\n\n\t\t_v0.subVectors( c, a );\n\t\t_v1.subVectors( b, a );\n\t\t_v2.subVectors( point, a );\n\n\t\tvar dot00 = _v0.dot( _v0 );\n\t\tvar dot01 = _v0.dot( _v1 );\n\t\tvar dot02 = _v0.dot( _v2 );\n\t\tvar dot11 = _v1.dot( _v1 );\n\t\tvar dot12 = _v1.dot( _v2 );\n\n\t\tvar denom = ( dot00 * dot11 - dot01 * dot01 );\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getBarycoord() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\t// collinear or singular triangle\n\t\tif ( denom === 0 ) {\n\n\t\t\t// arbitrary location outside of triangle?\n\t\t\t// not sure if this is the best idea, maybe should be returning undefined\n\t\t\treturn target.set( - 2, - 1, - 1 );\n\n\t\t}\n\n\t\tvar invDenom = 1 / denom;\n\t\tvar u = ( dot11 * dot02 - dot01 * dot12 ) * invDenom;\n\t\tvar v = ( dot00 * dot12 - dot01 * dot02 ) * invDenom;\n\n\t\t// barycentric coordinates must always sum to 1\n\t\treturn target.set( 1 - u - v, v, u );\n\n\t},\n\n\tcontainsPoint: function ( point, a, b, c ) {\n\n\t\tTriangle.getBarycoord( point, a, b, c, _v3 );\n\n\t\treturn ( _v3.x >= 0 ) && ( _v3.y >= 0 ) && ( ( _v3.x + _v3.y ) <= 1 );\n\n\t},\n\n\tgetUV: function ( point, p1, p2, p3, uv1, uv2, uv3, target ) {\n\n\t\tthis.getBarycoord( point, p1, p2, p3, _v3 );\n\n\t\ttarget.set( 0, 0 );\n\t\ttarget.addScaledVector( uv1, _v3.x );\n\t\ttarget.addScaledVector( uv2, _v3.y );\n\t\ttarget.addScaledVector( uv3, _v3.z );\n\n\t\treturn target;\n\n\t},\n\n\tisFrontFacing: function ( a, b, c, direction ) {\n\n\t\t_v0.subVectors( c, b );\n\t\t_v1.subVectors( a, b );\n\n\t\t// strictly front facing\n\t\treturn ( _v0.cross( _v1 ).dot( direction ) < 0 ) ? true : false;\n\n\t}\n\n} );\n\nObject.assign( Triangle.prototype, {\n\n\tset: function ( a, b, c ) {\n\n\t\tthis.a.copy( a );\n\t\tthis.b.copy( b );\n\t\tthis.c.copy( c );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPointsAndIndices: function ( points, i0, i1, i2 ) {\n\n\t\tthis.a.copy( points[ i0 ] );\n\t\tthis.b.copy( points[ i1 ] );\n\t\tthis.c.copy( points[ i2 ] );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( triangle ) {\n\n\t\tthis.a.copy( triangle.a );\n\t\tthis.b.copy( triangle.b );\n\t\tthis.c.copy( triangle.c );\n\n\t\treturn this;\n\n\t},\n\n\tgetArea: function () {\n\n\t\t_v0.subVectors( this.c, this.b );\n\t\t_v1.subVectors( this.a, this.b );\n\n\t\treturn _v0.cross( _v1 ).length() * 0.5;\n\n\t},\n\n\tgetMidpoint: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getMidpoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.addVectors( this.a, this.b ).add( this.c ).multiplyScalar( 1 / 3 );\n\n\t},\n\n\tgetNormal: function ( target ) {\n\n\t\treturn Triangle.getNormal( this.a, this.b, this.c, target );\n\n\t},\n\n\tgetPlane: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getPlane() target is now required' );\n\t\t\ttarget = new Plane();\n\n\t\t}\n\n\t\treturn target.setFromCoplanarPoints( this.a, this.b, this.c );\n\n\t},\n\n\tgetBarycoord: function ( point, target ) {\n\n\t\treturn Triangle.getBarycoord( point, this.a, this.b, this.c, target );\n\n\t},\n\n\tgetUV: function ( point, uv1, uv2, uv3, target ) {\n\n\t\treturn Triangle.getUV( point, this.a, this.b, this.c, uv1, uv2, uv3, target );\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\treturn Triangle.containsPoint( point, this.a, this.b, this.c );\n\n\t},\n\n\tisFrontFacing: function ( direction ) {\n\n\t\treturn Triangle.isFrontFacing( this.a, this.b, this.c, direction );\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\treturn box.intersectsTriangle( this );\n\n\t},\n\n\tclosestPointToPoint: function ( p, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .closestPointToPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tvar a = this.a, b = this.b, c = this.c;\n\t\tvar v, w;\n\n\t\t// algorithm thanks to Real-Time Collision Detection by Christer Ericson,\n\t\t// published by Morgan Kaufmann Publishers, (c) 2005 Elsevier Inc.,\n\t\t// under the accompanying license; see chapter 5.1.5 for detailed explanation.\n\t\t// basically, we're distinguishing which of the voronoi regions of the triangle\n\t\t// the point lies in with the minimum amount of redundant computation.\n\n\t\t_vab.subVectors( b, a );\n\t\t_vac.subVectors( c, a );\n\t\t_vap.subVectors( p, a );\n\t\tvar d1 = _vab.dot( _vap );\n\t\tvar d2 = _vac.dot( _vap );\n\t\tif ( d1 <= 0 && d2 <= 0 ) {\n\n\t\t\t// vertex region of A; barycentric coords (1, 0, 0)\n\t\t\treturn target.copy( a );\n\n\t\t}\n\n\t\t_vbp.subVectors( p, b );\n\t\tvar d3 = _vab.dot( _vbp );\n\t\tvar d4 = _vac.dot( _vbp );\n\t\tif ( d3 >= 0 && d4 <= d3 ) {\n\n\t\t\t// vertex region of B; barycentric coords (0, 1, 0)\n\t\t\treturn target.copy( b );\n\n\t\t}\n\n\t\tvar vc = d1 * d4 - d3 * d2;\n\t\tif ( vc <= 0 && d1 >= 0 && d3 <= 0 ) {\n\n\t\t\tv = d1 / ( d1 - d3 );\n\t\t\t// edge region of AB; barycentric coords (1-v, v, 0)\n\t\t\treturn target.copy( a ).addScaledVector( _vab, v );\n\n\t\t}\n\n\t\t_vcp.subVectors( p, c );\n\t\tvar d5 = _vab.dot( _vcp );\n\t\tvar d6 = _vac.dot( _vcp );\n\t\tif ( d6 >= 0 && d5 <= d6 ) {\n\n\t\t\t// vertex region of C; barycentric coords (0, 0, 1)\n\t\t\treturn target.copy( c );\n\n\t\t}\n\n\t\tvar vb = d5 * d2 - d1 * d6;\n\t\tif ( vb <= 0 && d2 >= 0 && d6 <= 0 ) {\n\n\t\t\tw = d2 / ( d2 - d6 );\n\t\t\t// edge region of AC; barycentric coords (1-w, 0, w)\n\t\t\treturn target.copy( a ).addScaledVector( _vac, w );\n\n\t\t}\n\n\t\tvar va = d3 * d6 - d5 * d4;\n\t\tif ( va <= 0 && ( d4 - d3 ) >= 0 && ( d5 - d6 ) >= 0 ) {\n\n\t\t\t_vbc.subVectors( c, b );\n\t\t\tw = ( d4 - d3 ) / ( ( d4 - d3 ) + ( d5 - d6 ) );\n\t\t\t// edge region of BC; barycentric coords (0, 1-w, w)\n\t\t\treturn target.copy( b ).addScaledVector( _vbc, w ); // edge region of BC\n\n\t\t}\n\n\t\t// face region\n\t\tvar denom = 1 / ( va + vb + vc );\n\t\t// u = va * denom\n\t\tv = vb * denom;\n\t\tw = vc * denom;\n\n\t\treturn target.copy( a ).addScaledVector( _vab, v ).addScaledVector( _vac, w );\n\n\t},\n\n\tequals: function ( triangle ) {\n\n\t\treturn triangle.a.equals( this.a ) && triangle.b.equals( this.b ) && triangle.c.equals( this.c );\n\n\t}\n\n} );\n\n\nexport { Triangle };\n","import { Matrix3 } from './Matrix3.js';\nimport { Vector3 } from './Vector3.js';\n\n/**\n * @author bhouston / http://clara.io\n */\n\nvar _vector1 = new Vector3();\nvar _vector2 = new Vector3();\nvar _normalMatrix = new Matrix3();\n\nfunction Plane( normal, constant ) {\n\n\t// normal is assumed to be normalized\n\n\tthis.normal = ( normal !== undefined ) ? normal : new Vector3( 1, 0, 0 );\n\tthis.constant = ( constant !== undefined ) ? constant : 0;\n\n}\n\nObject.assign( Plane.prototype, {\n\n\tisPlane: true,\n\n\tset: function ( normal, constant ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = constant;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponents: function ( x, y, z, w ) {\n\n\t\tthis.normal.set( x, y, z );\n\t\tthis.constant = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetFromNormalAndCoplanarPoint: function ( normal, point ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = - point.dot( this.normal );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCoplanarPoints: function ( a, b, c ) {\n\n\t\tvar normal = _vector1.subVectors( c, b ).cross( _vector2.subVectors( a, b ) ).normalize();\n\n\t\t// Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\n\n\t\tthis.setFromNormalAndCoplanarPoint( normal, a );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( plane ) {\n\n\t\tthis.normal.copy( plane.normal );\n\t\tthis.constant = plane.constant;\n\n\t\treturn this;\n\n\t},\n\n\tnormalize: function () {\n\n\t\t// Note: will lead to a divide by zero if the plane is invalid.\n\n\t\tvar inverseNormalLength = 1.0 / this.normal.length();\n\t\tthis.normal.multiplyScalar( inverseNormalLength );\n\t\tthis.constant *= inverseNormalLength;\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.constant *= - 1;\n\t\tthis.normal.negate();\n\n\t\treturn this;\n\n\t},\n\n\tdistanceToPoint: function ( point ) {\n\n\t\treturn this.normal.dot( point ) + this.constant;\n\n\t},\n\n\tdistanceToSphere: function ( sphere ) {\n\n\t\treturn this.distanceToPoint( sphere.center ) - sphere.radius;\n\n\t},\n\n\tprojectPoint: function ( point, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Plane: .projectPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( this.normal ).multiplyScalar( - this.distanceToPoint( point ) ).add( point );\n\n\t},\n\n\tintersectLine: function ( line, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Plane: .intersectLine() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tvar direction = line.delta( _vector1 );\n\n\t\tvar denominator = this.normal.dot( direction );\n\n\t\tif ( denominator === 0 ) {\n\n\t\t\t// line is coplanar, return origin\n\t\t\tif ( this.distanceToPoint( line.start ) === 0 ) {\n\n\t\t\t\treturn target.copy( line.start );\n\n\t\t\t}\n\n\t\t\t// Unsure if this is the correct method to handle this case.\n\t\t\treturn undefined;\n\n\t\t}\n\n\t\tvar t = - ( line.start.dot( this.normal ) + this.constant ) / denominator;\n\n\t\tif ( t < 0 || t > 1 ) {\n\n\t\t\treturn undefined;\n\n\t\t}\n\n\t\treturn target.copy( direction ).multiplyScalar( t ).add( line.start );\n\n\t},\n\n\tintersectsLine: function ( line ) {\n\n\t\t// Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\n\n\t\tvar startSign = this.distanceToPoint( line.start );\n\t\tvar endSign = this.distanceToPoint( line.end );\n\n\t\treturn ( startSign < 0 && endSign > 0 ) || ( endSign < 0 && startSign > 0 );\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\treturn box.intersectsPlane( this );\n\n\t},\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\treturn sphere.intersectsPlane( this );\n\n\t},\n\n\tcoplanarPoint: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Plane: .coplanarPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( this.normal ).multiplyScalar( - this.constant );\n\n\t},\n\n\tapplyMatrix4: function ( matrix, optionalNormalMatrix ) {\n\n\t\tvar normalMatrix = optionalNormalMatrix || _normalMatrix.getNormalMatrix( matrix );\n\n\t\tvar referencePoint = this.coplanarPoint( _vector1 ).applyMatrix4( matrix );\n\n\t\tvar normal = this.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\tthis.constant = - referencePoint.dot( normal );\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.constant -= offset.dot( this.normal );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( plane ) {\n\n\t\treturn plane.normal.equals( this.normal ) && ( plane.constant === this.constant );\n\n\t}\n\n} );\n\n\nexport { Plane };\n","import { Matrix4 } from '../math/Matrix4.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Vector4 } from '../math/Vector4.js';\nimport { Frustum } from '../math/Frustum.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction LightShadow( camera ) {\n\n\tthis.camera = camera;\n\n\tthis.bias = 0;\n\tthis.radius = 1;\n\n\tthis.mapSize = new Vector2( 512, 512 );\n\n\tthis.map = null;\n\tthis.mapPass = null;\n\tthis.matrix = new Matrix4();\n\n\tthis._frustum = new Frustum();\n\tthis._frameExtents = new Vector2( 1, 1 );\n\n\tthis._viewportCount = 1;\n\n\tthis._viewports = [\n\n\t\tnew Vector4( 0, 0, 1, 1 )\n\n\t];\n\n}\n\nObject.assign( LightShadow.prototype, {\n\n\t_projScreenMatrix: new Matrix4(),\n\n\t_lightPositionWorld: new Vector3(),\n\n\t_lookTarget: new Vector3(),\n\n\tgetViewportCount: function () {\n\n\t\treturn this._viewportCount;\n\n\t},\n\n\tgetFrustum: function () {\n\n\t\treturn this._frustum;\n\n\t},\n\n\tupdateMatrices: function ( light ) {\n\n\t\tvar shadowCamera = this.camera,\n\t\t\tshadowMatrix = this.matrix,\n\t\t\tprojScreenMatrix = this._projScreenMatrix,\n\t\t\tlookTarget = this._lookTarget,\n\t\t\tlightPositionWorld = this._lightPositionWorld;\n\n\t\tlightPositionWorld.setFromMatrixPosition( light.matrixWorld );\n\t\tshadowCamera.position.copy( lightPositionWorld );\n\n\t\tlookTarget.setFromMatrixPosition( light.target.matrixWorld );\n\t\tshadowCamera.lookAt( lookTarget );\n\t\tshadowCamera.updateMatrixWorld();\n\n\t\tprojScreenMatrix.multiplyMatrices( shadowCamera.projectionMatrix, shadowCamera.matrixWorldInverse );\n\t\tthis._frustum.setFromMatrix( projScreenMatrix );\n\n\t\tshadowMatrix.set(\n\t\t\t0.5, 0.0, 0.0, 0.5,\n\t\t\t0.0, 0.5, 0.0, 0.5,\n\t\t\t0.0, 0.0, 0.5, 0.5,\n\t\t\t0.0, 0.0, 0.0, 1.0\n\t\t);\n\n\t\tshadowMatrix.multiply( shadowCamera.projectionMatrix );\n\t\tshadowMatrix.multiply( shadowCamera.matrixWorldInverse );\n\n\t},\n\n\tgetViewport: function ( viewportIndex ) {\n\n\t\treturn this._viewports[ viewportIndex ];\n\n\t},\n\n\tgetFrameExtents: function () {\n\n\t\treturn this._frameExtents;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.camera = source.camera.clone();\n\n\t\tthis.bias = source.bias;\n\t\tthis.radius = source.radius;\n\n\t\tthis.mapSize.copy( source.mapSize );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar object = {};\n\n\t\tif ( this.bias !== 0 ) object.bias = this.bias;\n\t\tif ( this.radius !== 1 ) object.radius = this.radius;\n\t\tif ( this.mapSize.x !== 512 || this.mapSize.y !== 512 ) object.mapSize = this.mapSize.toArray();\n\n\t\tobject.camera = this.camera.toJSON( false ).object;\n\t\tdelete object.camera.matrix;\n\n\t\treturn object;\n\n\t}\n\n} );\n\n\nexport { LightShadow };\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author mikael emtinger / http://gomo.se/\n * @author WestLangley / http://github.com/WestLangley\n*/\n\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { Object3D } from '../core/Object3D.js';\nimport { Vector3 } from '../math/Vector3.js';\n\nfunction Camera() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Camera';\n\n\tthis.matrixWorldInverse = new Matrix4();\n\n\tthis.projectionMatrix = new Matrix4();\n\tthis.projectionMatrixInverse = new Matrix4();\n\n}\n\nCamera.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Camera,\n\n\tisCamera: true,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tObject3D.prototype.copy.call( this, source, recursive );\n\n\t\tthis.matrixWorldInverse.copy( source.matrixWorldInverse );\n\n\t\tthis.projectionMatrix.copy( source.projectionMatrix );\n\t\tthis.projectionMatrixInverse.copy( source.projectionMatrixInverse );\n\n\t\treturn this;\n\n\t},\n\n\tgetWorldDirection: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Camera: .getWorldDirection() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\tvar e = this.matrixWorld.elements;\n\n\t\treturn target.set( - e[ 8 ], - e[ 9 ], - e[ 10 ] ).normalize();\n\n\t},\n\n\tupdateMatrixWorld: function ( force ) {\n\n\t\tObject3D.prototype.updateMatrixWorld.call( this, force );\n\n\t\tthis.matrixWorldInverse.getInverse( this.matrixWorld );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n} );\n\nexport { Camera };\n","/**\n * @author Mugen87 / https://github.com/Mugen87\n * Port from https://github.com/mapbox/earcut (v2.1.5)\n */\n\nvar Earcut = {\n\n\ttriangulate: function ( data, holeIndices, dim ) {\n\n\t\tdim = dim || 2;\n\n\t\tvar hasHoles = holeIndices && holeIndices.length,\n\t\t\touterLen = hasHoles ? holeIndices[ 0 ] * dim : data.length,\n\t\t\touterNode = linkedList( data, 0, outerLen, dim, true ),\n\t\t\ttriangles = [];\n\n\t\tif ( ! outerNode || outerNode.next === outerNode.prev ) return triangles;\n\n\t\tvar minX, minY, maxX, maxY, x, y, invSize;\n\n\t\tif ( hasHoles ) outerNode = eliminateHoles( data, holeIndices, outerNode, dim );\n\n\t\t// if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n\t\tif ( data.length > 80 * dim ) {\n\n\t\t\tminX = maxX = data[ 0 ];\n\t\t\tminY = maxY = data[ 1 ];\n\n\t\t\tfor ( var i = dim; i < outerLen; i += dim ) {\n\n\t\t\t\tx = data[ i ];\n\t\t\t\ty = data[ i + 1 ];\n\t\t\t\tif ( x < minX ) minX = x;\n\t\t\t\tif ( y < minY ) minY = y;\n\t\t\t\tif ( x > maxX ) maxX = x;\n\t\t\t\tif ( y > maxY ) maxY = y;\n\n\t\t\t}\n\n\t\t\t// minX, minY and invSize are later used to transform coords into integers for z-order calculation\n\t\t\tinvSize = Math.max( maxX - minX, maxY - minY );\n\t\t\tinvSize = invSize !== 0 ? 1 / invSize : 0;\n\n\t\t}\n\n\t\tearcutLinked( outerNode, triangles, dim, minX, minY, invSize );\n\n\t\treturn triangles;\n\n\t}\n\n};\n\n// create a circular doubly linked list from polygon points in the specified winding order\nfunction linkedList( data, start, end, dim, clockwise ) {\n\n\tvar i, last;\n\n\tif ( clockwise === ( signedArea( data, start, end, dim ) > 0 ) ) {\n\n\t\tfor ( i = start; i < end; i += dim ) last = insertNode( i, data[ i ], data[ i + 1 ], last );\n\n\t} else {\n\n\t\tfor ( i = end - dim; i >= start; i -= dim ) last = insertNode( i, data[ i ], data[ i + 1 ], last );\n\n\t}\n\n\tif ( last && equals( last, last.next ) ) {\n\n\t\tremoveNode( last );\n\t\tlast = last.next;\n\n\t}\n\n\treturn last;\n\n}\n\n// eliminate colinear or duplicate points\nfunction filterPoints( start, end ) {\n\n\tif ( ! start ) return start;\n\tif ( ! end ) end = start;\n\n\tvar p = start,\n\t\tagain;\n\tdo {\n\n\t\tagain = false;\n\n\t\tif ( ! p.steiner && ( equals( p, p.next ) || area( p.prev, p, p.next ) === 0 ) ) {\n\n\t\t\tremoveNode( p );\n\t\t\tp = end = p.prev;\n\t\t\tif ( p === p.next ) break;\n\t\t\tagain = true;\n\n\t\t} else {\n\n\t\t\tp = p.next;\n\n\t\t}\n\n\t} while ( again || p !== end );\n\n\treturn end;\n\n}\n\n// main ear slicing loop which triangulates a polygon (given as a linked list)\nfunction earcutLinked( ear, triangles, dim, minX, minY, invSize, pass ) {\n\n\tif ( ! ear ) return;\n\n\t// interlink polygon nodes in z-order\n\tif ( ! pass && invSize ) indexCurve( ear, minX, minY, invSize );\n\n\tvar stop = ear,\n\t\tprev, next;\n\n\t// iterate through ears, slicing them one by one\n\twhile ( ear.prev !== ear.next ) {\n\n\t\tprev = ear.prev;\n\t\tnext = ear.next;\n\n\t\tif ( invSize ? isEarHashed( ear, minX, minY, invSize ) : isEar( ear ) ) {\n\n\t\t\t// cut off the triangle\n\t\t\ttriangles.push( prev.i / dim );\n\t\t\ttriangles.push( ear.i / dim );\n\t\t\ttriangles.push( next.i / dim );\n\n\t\t\tremoveNode( ear );\n\n\t\t\t// skipping the next vertex leads to less sliver triangles\n\t\t\tear = next.next;\n\t\t\tstop = next.next;\n\n\t\t\tcontinue;\n\n\t\t}\n\n\t\tear = next;\n\n\t\t// if we looped through the whole remaining polygon and can't find any more ears\n\t\tif ( ear === stop ) {\n\n\t\t\t// try filtering points and slicing again\n\t\t\tif ( ! pass ) {\n\n\t\t\t\tearcutLinked( filterPoints( ear ), triangles, dim, minX, minY, invSize, 1 );\n\n\t\t\t\t// if this didn't work, try curing all small self-intersections locally\n\n\t\t\t} else if ( pass === 1 ) {\n\n\t\t\t\tear = cureLocalIntersections( ear, triangles, dim );\n\t\t\t\tearcutLinked( ear, triangles, dim, minX, minY, invSize, 2 );\n\n\t\t\t\t// as a last resort, try splitting the remaining polygon into two\n\n\t\t\t} else if ( pass === 2 ) {\n\n\t\t\t\tsplitEarcut( ear, triangles, dim, minX, minY, invSize );\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n}\n\n// check whether a polygon node forms a valid ear with adjacent nodes\nfunction isEar( ear ) {\n\n\tvar a = ear.prev,\n\t\tb = ear,\n\t\tc = ear.next;\n\n\tif ( area( a, b, c ) >= 0 ) return false; // reflex, can't be an ear\n\n\t// now make sure we don't have other points inside the potential ear\n\tvar p = ear.next.next;\n\n\twhile ( p !== ear.prev ) {\n\n\t\tif ( pointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\n\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\n\t\tp = p.next;\n\n\t}\n\n\treturn true;\n\n}\n\nfunction isEarHashed( ear, minX, minY, invSize ) {\n\n\tvar a = ear.prev,\n\t\tb = ear,\n\t\tc = ear.next;\n\n\tif ( area( a, b, c ) >= 0 ) return false; // reflex, can't be an ear\n\n\t// triangle bbox; min & max are calculated like this for speed\n\tvar minTX = a.x < b.x ? ( a.x < c.x ? a.x : c.x ) : ( b.x < c.x ? b.x : c.x ),\n\t\tminTY = a.y < b.y ? ( a.y < c.y ? a.y : c.y ) : ( b.y < c.y ? b.y : c.y ),\n\t\tmaxTX = a.x > b.x ? ( a.x > c.x ? a.x : c.x ) : ( b.x > c.x ? b.x : c.x ),\n\t\tmaxTY = a.y > b.y ? ( a.y > c.y ? a.y : c.y ) : ( b.y > c.y ? b.y : c.y );\n\n\t// z-order range for the current triangle bbox;\n\tvar minZ = zOrder( minTX, minTY, minX, minY, invSize ),\n\t\tmaxZ = zOrder( maxTX, maxTY, minX, minY, invSize );\n\n\tvar p = ear.prevZ,\n\t\tn = ear.nextZ;\n\n\t// look for points inside the triangle in both directions\n\twhile ( p && p.z >= minZ && n && n.z <= maxZ ) {\n\n\t\tif ( p !== ear.prev && p !== ear.next &&\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\n\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\n\t\tp = p.prevZ;\n\n\t\tif ( n !== ear.prev && n !== ear.next &&\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y ) &&\n\t\t\tarea( n.prev, n, n.next ) >= 0 ) return false;\n\t\tn = n.nextZ;\n\n\t}\n\n\t// look for remaining points in decreasing z-order\n\twhile ( p && p.z >= minZ ) {\n\n\t\tif ( p !== ear.prev && p !== ear.next &&\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\n\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\n\t\tp = p.prevZ;\n\n\t}\n\n\t// look for remaining points in increasing z-order\n\twhile ( n && n.z <= maxZ ) {\n\n\t\tif ( n !== ear.prev && n !== ear.next &&\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y ) &&\n\t\t\tarea( n.prev, n, n.next ) >= 0 ) return false;\n\t\tn = n.nextZ;\n\n\t}\n\n\treturn true;\n\n}\n\n// go through all polygon nodes and cure small local self-intersections\nfunction cureLocalIntersections( start, triangles, dim ) {\n\n\tvar p = start;\n\tdo {\n\n\t\tvar a = p.prev,\n\t\t\tb = p.next.next;\n\n\t\tif ( ! equals( a, b ) && intersects( a, p, p.next, b ) && locallyInside( a, b ) && locallyInside( b, a ) ) {\n\n\t\t\ttriangles.push( a.i / dim );\n\t\t\ttriangles.push( p.i / dim );\n\t\t\ttriangles.push( b.i / dim );\n\n\t\t\t// remove two nodes involved\n\t\t\tremoveNode( p );\n\t\t\tremoveNode( p.next );\n\n\t\t\tp = start = b;\n\n\t\t}\n\n\t\tp = p.next;\n\n\t} while ( p !== start );\n\n\treturn p;\n\n}\n\n// try splitting polygon into two and triangulate them independently\nfunction splitEarcut( start, triangles, dim, minX, minY, invSize ) {\n\n\t// look for a valid diagonal that divides the polygon into two\n\tvar a = start;\n\tdo {\n\n\t\tvar b = a.next.next;\n\t\twhile ( b !== a.prev ) {\n\n\t\t\tif ( a.i !== b.i && isValidDiagonal( a, b ) ) {\n\n\t\t\t\t// split the polygon in two by the diagonal\n\t\t\t\tvar c = splitPolygon( a, b );\n\n\t\t\t\t// filter colinear points around the cuts\n\t\t\t\ta = filterPoints( a, a.next );\n\t\t\t\tc = filterPoints( c, c.next );\n\n\t\t\t\t// run earcut on each half\n\t\t\t\tearcutLinked( a, triangles, dim, minX, minY, invSize );\n\t\t\t\tearcutLinked( c, triangles, dim, minX, minY, invSize );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tb = b.next;\n\n\t\t}\n\n\t\ta = a.next;\n\n\t} while ( a !== start );\n\n}\n\n// link every hole into the outer loop, producing a single-ring polygon without holes\nfunction eliminateHoles( data, holeIndices, outerNode, dim ) {\n\n\tvar queue = [],\n\t\ti, len, start, end, list;\n\n\tfor ( i = 0, len = holeIndices.length; i < len; i ++ ) {\n\n\t\tstart = holeIndices[ i ] * dim;\n\t\tend = i < len - 1 ? holeIndices[ i + 1 ] * dim : data.length;\n\t\tlist = linkedList( data, start, end, dim, false );\n\t\tif ( list === list.next ) list.steiner = true;\n\t\tqueue.push( getLeftmost( list ) );\n\n\t}\n\n\tqueue.sort( compareX );\n\n\t// process holes from left to right\n\tfor ( i = 0; i < queue.length; i ++ ) {\n\n\t\teliminateHole( queue[ i ], outerNode );\n\t\touterNode = filterPoints( outerNode, outerNode.next );\n\n\t}\n\n\treturn outerNode;\n\n}\n\nfunction compareX( a, b ) {\n\n\treturn a.x - b.x;\n\n}\n\n// find a bridge between vertices that connects hole with an outer ring and and link it\nfunction eliminateHole( hole, outerNode ) {\n\n\touterNode = findHoleBridge( hole, outerNode );\n\tif ( outerNode ) {\n\n\t\tvar b = splitPolygon( outerNode, hole );\n\t\tfilterPoints( b, b.next );\n\n\t}\n\n}\n\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\nfunction findHoleBridge( hole, outerNode ) {\n\n\tvar p = outerNode,\n\t\thx = hole.x,\n\t\thy = hole.y,\n\t\tqx = - Infinity,\n\t\tm;\n\n\t// find a segment intersected by a ray from the hole's leftmost point to the left;\n\t// segment's endpoint with lesser x will be potential connection point\n\tdo {\n\n\t\tif ( hy <= p.y && hy >= p.next.y && p.next.y !== p.y ) {\n\n\t\t\tvar x = p.x + ( hy - p.y ) * ( p.next.x - p.x ) / ( p.next.y - p.y );\n\t\t\tif ( x <= hx && x > qx ) {\n\n\t\t\t\tqx = x;\n\t\t\t\tif ( x === hx ) {\n\n\t\t\t\t\tif ( hy === p.y ) return p;\n\t\t\t\t\tif ( hy === p.next.y ) return p.next;\n\n\t\t\t\t}\n\n\t\t\t\tm = p.x < p.next.x ? p : p.next;\n\n\t\t\t}\n\n\t\t}\n\n\t\tp = p.next;\n\n\t} while ( p !== outerNode );\n\n\tif ( ! m ) return null;\n\n\tif ( hx === qx ) return m.prev; // hole touches outer segment; pick lower endpoint\n\n\t// look for points inside the triangle of hole point, segment intersection and endpoint;\n\t// if there are no points found, we have a valid connection;\n\t// otherwise choose the point of the minimum angle with the ray as connection point\n\n\tvar stop = m,\n\t\tmx = m.x,\n\t\tmy = m.y,\n\t\ttanMin = Infinity,\n\t\ttan;\n\n\tp = m.next;\n\n\twhile ( p !== stop ) {\n\n\t\tif ( hx >= p.x && p.x >= mx && hx !== p.x &&\n\t\t\t\tpointInTriangle( hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y ) ) {\n\n\t\t\ttan = Math.abs( hy - p.y ) / ( hx - p.x ); // tangential\n\n\t\t\tif ( ( tan < tanMin || ( tan === tanMin && p.x > m.x ) ) && locallyInside( p, hole ) ) {\n\n\t\t\t\tm = p;\n\t\t\t\ttanMin = tan;\n\n\t\t\t}\n\n\t\t}\n\n\t\tp = p.next;\n\n\t}\n\n\treturn m;\n\n}\n\n// interlink polygon nodes in z-order\nfunction indexCurve( start, minX, minY, invSize ) {\n\n\tvar p = start;\n\tdo {\n\n\t\tif ( p.z === null ) p.z = zOrder( p.x, p.y, minX, minY, invSize );\n\t\tp.prevZ = p.prev;\n\t\tp.nextZ = p.next;\n\t\tp = p.next;\n\n\t} while ( p !== start );\n\n\tp.prevZ.nextZ = null;\n\tp.prevZ = null;\n\n\tsortLinked( p );\n\n}\n\n// Simon Tatham's linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\nfunction sortLinked( list ) {\n\n\tvar i, p, q, e, tail, numMerges, pSize, qSize,\n\t\tinSize = 1;\n\n\tdo {\n\n\t\tp = list;\n\t\tlist = null;\n\t\ttail = null;\n\t\tnumMerges = 0;\n\n\t\twhile ( p ) {\n\n\t\t\tnumMerges ++;\n\t\t\tq = p;\n\t\t\tpSize = 0;\n\t\t\tfor ( i = 0; i < inSize; i ++ ) {\n\n\t\t\t\tpSize ++;\n\t\t\t\tq = q.nextZ;\n\t\t\t\tif ( ! q ) break;\n\n\t\t\t}\n\n\t\t\tqSize = inSize;\n\n\t\t\twhile ( pSize > 0 || ( qSize > 0 && q ) ) {\n\n\t\t\t\tif ( pSize !== 0 && ( qSize === 0 || ! q || p.z <= q.z ) ) {\n\n\t\t\t\t\te = p;\n\t\t\t\t\tp = p.nextZ;\n\t\t\t\t\tpSize --;\n\n\t\t\t\t} else {\n\n\t\t\t\t\te = q;\n\t\t\t\t\tq = q.nextZ;\n\t\t\t\t\tqSize --;\n\n\t\t\t\t}\n\n\t\t\t\tif ( tail ) tail.nextZ = e;\n\t\t\t\telse list = e;\n\n\t\t\t\te.prevZ = tail;\n\t\t\t\ttail = e;\n\n\t\t\t}\n\n\t\t\tp = q;\n\n\t\t}\n\n\t\ttail.nextZ = null;\n\t\tinSize *= 2;\n\n\t} while ( numMerges > 1 );\n\n\treturn list;\n\n}\n\n// z-order of a point given coords and inverse of the longer side of data bbox\nfunction zOrder( x, y, minX, minY, invSize ) {\n\n\t// coords are transformed into non-negative 15-bit integer range\n\tx = 32767 * ( x - minX ) * invSize;\n\ty = 32767 * ( y - minY ) * invSize;\n\n\tx = ( x | ( x << 8 ) ) & 0x00FF00FF;\n\tx = ( x | ( x << 4 ) ) & 0x0F0F0F0F;\n\tx = ( x | ( x << 2 ) ) & 0x33333333;\n\tx = ( x | ( x << 1 ) ) & 0x55555555;\n\n\ty = ( y | ( y << 8 ) ) & 0x00FF00FF;\n\ty = ( y | ( y << 4 ) ) & 0x0F0F0F0F;\n\ty = ( y | ( y << 2 ) ) & 0x33333333;\n\ty = ( y | ( y << 1 ) ) & 0x55555555;\n\n\treturn x | ( y << 1 );\n\n}\n\n// find the leftmost node of a polygon ring\nfunction getLeftmost( start ) {\n\n\tvar p = start,\n\t\tleftmost = start;\n\tdo {\n\n\t\tif ( p.x < leftmost.x || ( p.x === leftmost.x && p.y < leftmost.y ) ) leftmost = p;\n\t\tp = p.next;\n\n\t} while ( p !== start );\n\n\treturn leftmost;\n\n}\n\n// check if a point lies within a convex triangle\nfunction pointInTriangle( ax, ay, bx, by, cx, cy, px, py ) {\n\n\treturn ( cx - px ) * ( ay - py ) - ( ax - px ) * ( cy - py ) >= 0 &&\n\t\t   ( ax - px ) * ( by - py ) - ( bx - px ) * ( ay - py ) >= 0 &&\n\t\t   ( bx - px ) * ( cy - py ) - ( cx - px ) * ( by - py ) >= 0;\n\n}\n\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\nfunction isValidDiagonal( a, b ) {\n\n\treturn a.next.i !== b.i && a.prev.i !== b.i && ! intersectsPolygon( a, b ) &&\n\t\t   locallyInside( a, b ) && locallyInside( b, a ) && middleInside( a, b );\n\n}\n\n// signed area of a triangle\nfunction area( p, q, r ) {\n\n\treturn ( q.y - p.y ) * ( r.x - q.x ) - ( q.x - p.x ) * ( r.y - q.y );\n\n}\n\n// check if two points are equal\nfunction equals( p1, p2 ) {\n\n\treturn p1.x === p2.x && p1.y === p2.y;\n\n}\n\n// check if two segments intersect\nfunction intersects( p1, q1, p2, q2 ) {\n\n\tif ( ( equals( p1, p2 ) && equals( q1, q2 ) ) ||\n\t\t( equals( p1, q2 ) && equals( p2, q1 ) ) ) return true;\n\treturn area( p1, q1, p2 ) > 0 !== area( p1, q1, q2 ) > 0 &&\n\t\t   area( p2, q2, p1 ) > 0 !== area( p2, q2, q1 ) > 0;\n\n}\n\n// check if a polygon diagonal intersects any polygon segments\nfunction intersectsPolygon( a, b ) {\n\n\tvar p = a;\n\tdo {\n\n\t\tif ( p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\n\t\t\t\tintersects( p, p.next, a, b ) ) return true;\n\t\tp = p.next;\n\n\t} while ( p !== a );\n\n\treturn false;\n\n}\n\n// check if a polygon diagonal is locally inside the polygon\nfunction locallyInside( a, b ) {\n\n\treturn area( a.prev, a, a.next ) < 0 ?\n\t\tarea( a, b, a.next ) >= 0 && area( a, a.prev, b ) >= 0 :\n\t\tarea( a, b, a.prev ) < 0 || area( a, a.next, b ) < 0;\n\n}\n\n// check if the middle point of a polygon diagonal is inside the polygon\nfunction middleInside( a, b ) {\n\n\tvar p = a,\n\t\tinside = false,\n\t\tpx = ( a.x + b.x ) / 2,\n\t\tpy = ( a.y + b.y ) / 2;\n\tdo {\n\n\t\tif ( ( ( p.y > py ) !== ( p.next.y > py ) ) && p.next.y !== p.y &&\n\t\t\t\t( px < ( p.next.x - p.x ) * ( py - p.y ) / ( p.next.y - p.y ) + p.x ) )\n\t\t\tinside = ! inside;\n\t\tp = p.next;\n\n\t} while ( p !== a );\n\n\treturn inside;\n\n}\n\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\nfunction splitPolygon( a, b ) {\n\n\tvar a2 = new Node( a.i, a.x, a.y ),\n\t\tb2 = new Node( b.i, b.x, b.y ),\n\t\tan = a.next,\n\t\tbp = b.prev;\n\n\ta.next = b;\n\tb.prev = a;\n\n\ta2.next = an;\n\tan.prev = a2;\n\n\tb2.next = a2;\n\ta2.prev = b2;\n\n\tbp.next = b2;\n\tb2.prev = bp;\n\n\treturn b2;\n\n}\n\n// create a node and optionally link it with previous one (in a circular doubly linked list)\nfunction insertNode( i, x, y, last ) {\n\n\tvar p = new Node( i, x, y );\n\n\tif ( ! last ) {\n\n\t\tp.prev = p;\n\t\tp.next = p;\n\n\t} else {\n\n\t\tp.next = last.next;\n\t\tp.prev = last;\n\t\tlast.next.prev = p;\n\t\tlast.next = p;\n\n\t}\n\n\treturn p;\n\n}\n\nfunction removeNode( p ) {\n\n\tp.next.prev = p.prev;\n\tp.prev.next = p.next;\n\n\tif ( p.prevZ ) p.prevZ.nextZ = p.nextZ;\n\tif ( p.nextZ ) p.nextZ.prevZ = p.prevZ;\n\n}\n\nfunction Node( i, x, y ) {\n\n\t// vertex index in coordinates array\n\tthis.i = i;\n\n\t// vertex coordinates\n\tthis.x = x;\n\tthis.y = y;\n\n\t// previous and next vertex nodes in a polygon ring\n\tthis.prev = null;\n\tthis.next = null;\n\n\t// z-order curve value\n\tthis.z = null;\n\n\t// previous and next nodes in z-order\n\tthis.prevZ = null;\n\tthis.nextZ = null;\n\n\t// indicates whether this is a steiner point\n\tthis.steiner = false;\n\n}\n\nfunction signedArea( data, start, end, dim ) {\n\n\tvar sum = 0;\n\tfor ( var i = start, j = end - dim; i < end; i += dim ) {\n\n\t\tsum += ( data[ j ] - data[ i ] ) * ( data[ i + 1 ] + data[ j + 1 ] );\n\t\tj = i;\n\n\t}\n\n\treturn sum;\n\n}\n\nexport { Earcut };\n","/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n */\n\nimport { Earcut } from './Earcut.js';\n\nvar ShapeUtils = {\n\n\t// calculate area of the contour polygon\n\n\tarea: function ( contour ) {\n\n\t\tvar n = contour.length;\n\t\tvar a = 0.0;\n\n\t\tfor ( var p = n - 1, q = 0; q < n; p = q ++ ) {\n\n\t\t\ta += contour[ p ].x * contour[ q ].y - contour[ q ].x * contour[ p ].y;\n\n\t\t}\n\n\t\treturn a * 0.5;\n\n\t},\n\n\tisClockWise: function ( pts ) {\n\n\t\treturn ShapeUtils.area( pts ) < 0;\n\n\t},\n\n\ttriangulateShape: function ( contour, holes ) {\n\n\t\tvar vertices = []; // flat array of vertices like [ x0,y0, x1,y1, x2,y2, ... ]\n\t\tvar holeIndices = []; // array of hole indices\n\t\tvar faces = []; // final array of vertex indices like [ [ a,b,d ], [ b,c,d ] ]\n\n\t\tremoveDupEndPts( contour );\n\t\taddContour( vertices, contour );\n\n\t\t//\n\n\t\tvar holeIndex = contour.length;\n\n\t\tholes.forEach( removeDupEndPts );\n\n\t\tfor ( var i = 0; i < holes.length; i ++ ) {\n\n\t\t\tholeIndices.push( holeIndex );\n\t\t\tholeIndex += holes[ i ].length;\n\t\t\taddContour( vertices, holes[ i ] );\n\n\t\t}\n\n\t\t//\n\n\t\tvar triangles = Earcut.triangulate( vertices, holeIndices );\n\n\t\t//\n\n\t\tfor ( var i = 0; i < triangles.length; i += 3 ) {\n\n\t\t\tfaces.push( triangles.slice( i, i + 3 ) );\n\n\t\t}\n\n\t\treturn faces;\n\n\t}\n\n};\n\nfunction removeDupEndPts( points ) {\n\n\tvar l = points.length;\n\n\tif ( l > 2 && points[ l - 1 ].equals( points[ 0 ] ) ) {\n\n\t\tpoints.pop();\n\n\t}\n\n}\n\nfunction addContour( vertices, contour ) {\n\n\tfor ( var i = 0; i < contour.length; i ++ ) {\n\n\t\tvertices.push( contour[ i ].x );\n\t\tvertices.push( contour[ i ].y );\n\n\t}\n\n}\n\nexport { ShapeUtils };\n","/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * minimal class for proxing functions to Path. Replaces old \"extractSubpaths()\"\n **/\n\nimport { Color } from '../../math/Color.js';\nimport { Path } from './Path.js';\nimport { Shape } from './Shape.js';\nimport { ShapeUtils } from '../ShapeUtils.js';\n\nfunction ShapePath() {\n\n\tthis.type = 'ShapePath';\n\n\tthis.color = new Color();\n\n\tthis.subPaths = [];\n\tthis.currentPath = null;\n\n}\n\nObject.assign( ShapePath.prototype, {\n\n\tmoveTo: function ( x, y ) {\n\n\t\tthis.currentPath = new Path();\n\t\tthis.subPaths.push( this.currentPath );\n\t\tthis.currentPath.moveTo( x, y );\n\n\t\treturn this;\n\n\t},\n\n\tlineTo: function ( x, y ) {\n\n\t\tthis.currentPath.lineTo( x, y );\n\n\t\treturn this;\n\n\t},\n\n\tquadraticCurveTo: function ( aCPx, aCPy, aX, aY ) {\n\n\t\tthis.currentPath.quadraticCurveTo( aCPx, aCPy, aX, aY );\n\n\t\treturn this;\n\n\t},\n\n\tbezierCurveTo: function ( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\n\n\t\tthis.currentPath.bezierCurveTo( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY );\n\n\t\treturn this;\n\n\t},\n\n\tsplineThru: function ( pts ) {\n\n\t\tthis.currentPath.splineThru( pts );\n\n\t\treturn this;\n\n\t},\n\n\ttoShapes: function ( isCCW, noHoles ) {\n\n\t\tfunction toShapesNoHoles( inSubpaths ) {\n\n\t\t\tvar shapes = [];\n\n\t\t\tfor ( var i = 0, l = inSubpaths.length; i < l; i ++ ) {\n\n\t\t\t\tvar tmpPath = inSubpaths[ i ];\n\n\t\t\t\tvar tmpShape = new Shape();\n\t\t\t\ttmpShape.curves = tmpPath.curves;\n\n\t\t\t\tshapes.push( tmpShape );\n\n\t\t\t}\n\n\t\t\treturn shapes;\n\n\t\t}\n\n\t\tfunction isPointInsidePolygon( inPt, inPolygon ) {\n\n\t\t\tvar polyLen = inPolygon.length;\n\n\t\t\t// inPt on polygon contour => immediate success    or\n\t\t\t// toggling of inside/outside at every single! intersection point of an edge\n\t\t\t//  with the horizontal line through inPt, left of inPt\n\t\t\t//  not counting lowerY endpoints of edges and whole edges on that line\n\t\t\tvar inside = false;\n\t\t\tfor ( var p = polyLen - 1, q = 0; q < polyLen; p = q ++ ) {\n\n\t\t\t\tvar edgeLowPt = inPolygon[ p ];\n\t\t\t\tvar edgeHighPt = inPolygon[ q ];\n\n\t\t\t\tvar edgeDx = edgeHighPt.x - edgeLowPt.x;\n\t\t\t\tvar edgeDy = edgeHighPt.y - edgeLowPt.y;\n\n\t\t\t\tif ( Math.abs( edgeDy ) > Number.EPSILON ) {\n\n\t\t\t\t\t// not parallel\n\t\t\t\t\tif ( edgeDy < 0 ) {\n\n\t\t\t\t\t\tedgeLowPt = inPolygon[ q ]; edgeDx = - edgeDx;\n\t\t\t\t\t\tedgeHighPt = inPolygon[ p ]; edgeDy = - edgeDy;\n\n\t\t\t\t\t}\n\t\t\t\t\tif ( ( inPt.y < edgeLowPt.y ) || ( inPt.y > edgeHighPt.y ) ) \t\tcontinue;\n\n\t\t\t\t\tif ( inPt.y === edgeLowPt.y ) {\n\n\t\t\t\t\t\tif ( inPt.x === edgeLowPt.x )\t\treturn\ttrue;\t\t// inPt is on contour ?\n\t\t\t\t\t\t// continue;\t\t\t\t// no intersection or edgeLowPt => doesn't count !!!\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tvar perpEdge = edgeDy * ( inPt.x - edgeLowPt.x ) - edgeDx * ( inPt.y - edgeLowPt.y );\n\t\t\t\t\t\tif ( perpEdge === 0 )\t\t\t\treturn\ttrue;\t\t// inPt is on contour ?\n\t\t\t\t\t\tif ( perpEdge < 0 ) \t\t\t\tcontinue;\n\t\t\t\t\t\tinside = ! inside;\t\t// true intersection left of inPt\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// parallel or collinear\n\t\t\t\t\tif ( inPt.y !== edgeLowPt.y ) \t\tcontinue;\t\t\t// parallel\n\t\t\t\t\t// edge lies on the same horizontal line as inPt\n\t\t\t\t\tif ( ( ( edgeHighPt.x <= inPt.x ) && ( inPt.x <= edgeLowPt.x ) ) ||\n\t\t\t\t\t\t ( ( edgeLowPt.x <= inPt.x ) && ( inPt.x <= edgeHighPt.x ) ) )\t\treturn\ttrue;\t// inPt: Point on contour !\n\t\t\t\t\t// continue;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn\tinside;\n\n\t\t}\n\n\t\tvar isClockWise = ShapeUtils.isClockWise;\n\n\t\tvar subPaths = this.subPaths;\n\t\tif ( subPaths.length === 0 ) return [];\n\n\t\tif ( noHoles === true )\treturn\ttoShapesNoHoles( subPaths );\n\n\n\t\tvar solid, tmpPath, tmpShape, shapes = [];\n\n\t\tif ( subPaths.length === 1 ) {\n\n\t\t\ttmpPath = subPaths[ 0 ];\n\t\t\ttmpShape = new Shape();\n\t\t\ttmpShape.curves = tmpPath.curves;\n\t\t\tshapes.push( tmpShape );\n\t\t\treturn shapes;\n\n\t\t}\n\n\t\tvar holesFirst = ! isClockWise( subPaths[ 0 ].getPoints() );\n\t\tholesFirst = isCCW ? ! holesFirst : holesFirst;\n\n\t\t// console.log(\"Holes first\", holesFirst);\n\n\t\tvar betterShapeHoles = [];\n\t\tvar newShapes = [];\n\t\tvar newShapeHoles = [];\n\t\tvar mainIdx = 0;\n\t\tvar tmpPoints;\n\n\t\tnewShapes[ mainIdx ] = undefined;\n\t\tnewShapeHoles[ mainIdx ] = [];\n\n\t\tfor ( var i = 0, l = subPaths.length; i < l; i ++ ) {\n\n\t\t\ttmpPath = subPaths[ i ];\n\t\t\ttmpPoints = tmpPath.getPoints();\n\t\t\tsolid = isClockWise( tmpPoints );\n\t\t\tsolid = isCCW ? ! solid : solid;\n\n\t\t\tif ( solid ) {\n\n\t\t\t\tif ( ( ! holesFirst ) && ( newShapes[ mainIdx ] ) )\tmainIdx ++;\n\n\t\t\t\tnewShapes[ mainIdx ] = { s: new Shape(), p: tmpPoints };\n\t\t\t\tnewShapes[ mainIdx ].s.curves = tmpPath.curves;\n\n\t\t\t\tif ( holesFirst )\tmainIdx ++;\n\t\t\t\tnewShapeHoles[ mainIdx ] = [];\n\n\t\t\t\t//console.log('cw', i);\n\n\t\t\t} else {\n\n\t\t\t\tnewShapeHoles[ mainIdx ].push( { h: tmpPath, p: tmpPoints[ 0 ] } );\n\n\t\t\t\t//console.log('ccw', i);\n\n\t\t\t}\n\n\t\t}\n\n\t\t// only Holes? -> probably all Shapes with wrong orientation\n\t\tif ( ! newShapes[ 0 ] )\treturn\ttoShapesNoHoles( subPaths );\n\n\n\t\tif ( newShapes.length > 1 ) {\n\n\t\t\tvar ambiguous = false;\n\t\t\tvar toChange = [];\n\n\t\t\tfor ( var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\n\n\t\t\t\tbetterShapeHoles[ sIdx ] = [];\n\n\t\t\t}\n\n\t\t\tfor ( var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\n\n\t\t\t\tvar sho = newShapeHoles[ sIdx ];\n\n\t\t\t\tfor ( var hIdx = 0; hIdx < sho.length; hIdx ++ ) {\n\n\t\t\t\t\tvar ho = sho[ hIdx ];\n\t\t\t\t\tvar hole_unassigned = true;\n\n\t\t\t\t\tfor ( var s2Idx = 0; s2Idx < newShapes.length; s2Idx ++ ) {\n\n\t\t\t\t\t\tif ( isPointInsidePolygon( ho.p, newShapes[ s2Idx ].p ) ) {\n\n\t\t\t\t\t\t\tif ( sIdx !== s2Idx )\ttoChange.push( { froms: sIdx, tos: s2Idx, hole: hIdx } );\n\t\t\t\t\t\t\tif ( hole_unassigned ) {\n\n\t\t\t\t\t\t\t\thole_unassigned = false;\n\t\t\t\t\t\t\t\tbetterShapeHoles[ s2Idx ].push( ho );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tambiguous = true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t\tif ( hole_unassigned ) {\n\n\t\t\t\t\t\tbetterShapeHoles[ sIdx ].push( ho );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t\t// console.log(\"ambiguous: \", ambiguous);\n\t\t\tif ( toChange.length > 0 ) {\n\n\t\t\t\t// console.log(\"to change: \", toChange);\n\t\t\t\tif ( ! ambiguous )\tnewShapeHoles = betterShapeHoles;\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar tmpHoles;\n\n\t\tfor ( var i = 0, il = newShapes.length; i < il; i ++ ) {\n\n\t\t\ttmpShape = newShapes[ i ].s;\n\t\t\tshapes.push( tmpShape );\n\t\t\ttmpHoles = newShapeHoles[ i ];\n\n\t\t\tfor ( var j = 0, jl = tmpHoles.length; j < jl; j ++ ) {\n\n\t\t\t\ttmpShape.holes.push( tmpHoles[ j ].h );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//console.log(\"shape\", shapes);\n\n\t\treturn shapes;\n\n\t}\n\n} );\n\n\nexport { ShapePath };\n","import { EventDispatcher } from '../core/EventDispatcher.js';\nimport { NoColors, FrontSide, FlatShading, NormalBlending, LessEqualDepth, AddEquation, OneMinusSrcAlphaFactor, SrcAlphaFactor, AlwaysStencilFunc, KeepStencilOp } from '../constants.js';\nimport { _Math } from '../math/Math.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nvar materialId = 0;\n\nfunction Material() {\n\n\tObject.defineProperty( this, 'id', { value: materialId ++ } );\n\n\tthis.uuid = _Math.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Material';\n\n\tthis.fog = true;\n\n\tthis.blending = NormalBlending;\n\tthis.side = FrontSide;\n\tthis.flatShading = false;\n\tthis.vertexTangents = false;\n\tthis.vertexColors = NoColors; // THREE.NoColors, THREE.VertexColors, THREE.FaceColors\n\n\tthis.opacity = 1;\n\tthis.transparent = false;\n\n\tthis.blendSrc = SrcAlphaFactor;\n\tthis.blendDst = OneMinusSrcAlphaFactor;\n\tthis.blendEquation = AddEquation;\n\tthis.blendSrcAlpha = null;\n\tthis.blendDstAlpha = null;\n\tthis.blendEquationAlpha = null;\n\n\tthis.depthFunc = LessEqualDepth;\n\tthis.depthTest = true;\n\tthis.depthWrite = true;\n\n\tthis.stencilWriteMask = 0xff;\n\tthis.stencilFunc = AlwaysStencilFunc;\n\tthis.stencilRef = 0;\n\tthis.stencilFuncMask = 0xff;\n\tthis.stencilFail = KeepStencilOp;\n\tthis.stencilZFail = KeepStencilOp;\n\tthis.stencilZPass = KeepStencilOp;\n\tthis.stencilWrite = false;\n\n\tthis.clippingPlanes = null;\n\tthis.clipIntersection = false;\n\tthis.clipShadows = false;\n\n\tthis.shadowSide = null;\n\n\tthis.colorWrite = true;\n\n\tthis.precision = null; // override the renderer's default precision for this material\n\n\tthis.polygonOffset = false;\n\tthis.polygonOffsetFactor = 0;\n\tthis.polygonOffsetUnits = 0;\n\n\tthis.dithering = false;\n\n\tthis.alphaTest = 0;\n\tthis.premultipliedAlpha = false;\n\n\tthis.visible = true;\n\n\tthis.toneMapped = true;\n\n\tthis.userData = {};\n\n\tthis.version = 0;\n\n}\n\nMaterial.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Material,\n\n\tisMaterial: true,\n\n\tonBeforeCompile: function () {},\n\n\tsetValues: function ( values ) {\n\n\t\tif ( values === undefined ) return;\n\n\t\tfor ( var key in values ) {\n\n\t\t\tvar newValue = values[ key ];\n\n\t\t\tif ( newValue === undefined ) {\n\n\t\t\t\tconsole.warn( \"THREE.Material: '\" + key + \"' parameter is undefined.\" );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\t// for backward compatability if shading is set in the constructor\n\t\t\tif ( key === 'shading' ) {\n\n\t\t\t\tconsole.warn( 'THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.' );\n\t\t\t\tthis.flatShading = ( newValue === FlatShading ) ? true : false;\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tvar currentValue = this[ key ];\n\n\t\t\tif ( currentValue === undefined ) {\n\n\t\t\t\tconsole.warn( \"THREE.\" + this.type + \": '\" + key + \"' is not a property of this material.\" );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tif ( currentValue && currentValue.isColor ) {\n\n\t\t\t\tcurrentValue.set( newValue );\n\n\t\t\t} else if ( ( currentValue && currentValue.isVector3 ) && ( newValue && newValue.isVector3 ) ) {\n\n\t\t\t\tcurrentValue.copy( newValue );\n\n\t\t\t} else {\n\n\t\t\t\tthis[ key ] = newValue;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar isRoot = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( isRoot ) {\n\n\t\t\tmeta = {\n\t\t\t\ttextures: {},\n\t\t\t\timages: {}\n\t\t\t};\n\n\t\t}\n\n\t\tvar data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Material',\n\t\t\t\tgenerator: 'Material.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard Material serialization\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\n\t\tif ( this.name !== '' ) data.name = this.name;\n\n\t\tif ( this.color && this.color.isColor ) data.color = this.color.getHex();\n\n\t\tif ( this.roughness !== undefined ) data.roughness = this.roughness;\n\t\tif ( this.metalness !== undefined ) data.metalness = this.metalness;\n\n\t\tif ( this.sheen && this.sheen.isColor ) data.sheen = this.sheen.getHex();\n\t\tif ( this.emissive && this.emissive.isColor ) data.emissive = this.emissive.getHex();\n\t\tif ( this.emissiveIntensity && this.emissiveIntensity !== 1 ) data.emissiveIntensity = this.emissiveIntensity;\n\n\t\tif ( this.specular && this.specular.isColor ) data.specular = this.specular.getHex();\n\t\tif ( this.shininess !== undefined ) data.shininess = this.shininess;\n\t\tif ( this.clearcoat !== undefined ) data.clearcoat = this.clearcoat;\n\t\tif ( this.clearcoatRoughness !== undefined ) data.clearcoatRoughness = this.clearcoatRoughness;\n\n\t\tif ( this.clearcoatNormalMap && this.clearcoatNormalMap.isTexture ) {\n\n\t\t\tdata.clearcoatNormalMap = this.clearcoatNormalMap.toJSON( meta ).uuid;\n\t\t\tdata.clearcoatNormalScale = this.clearcoatNormalScale.toArray();\n\n\t\t}\n\n\t\tif ( this.map && this.map.isTexture ) data.map = this.map.toJSON( meta ).uuid;\n\t\tif ( this.matcap && this.matcap.isTexture ) data.matcap = this.matcap.toJSON( meta ).uuid;\n\t\tif ( this.alphaMap && this.alphaMap.isTexture ) data.alphaMap = this.alphaMap.toJSON( meta ).uuid;\n\t\tif ( this.lightMap && this.lightMap.isTexture ) data.lightMap = this.lightMap.toJSON( meta ).uuid;\n\n\t\tif ( this.aoMap && this.aoMap.isTexture ) {\n\n\t\t\tdata.aoMap = this.aoMap.toJSON( meta ).uuid;\n\t\t\tdata.aoMapIntensity = this.aoMapIntensity;\n\n\t\t}\n\n\t\tif ( this.bumpMap && this.bumpMap.isTexture ) {\n\n\t\t\tdata.bumpMap = this.bumpMap.toJSON( meta ).uuid;\n\t\t\tdata.bumpScale = this.bumpScale;\n\n\t\t}\n\n\t\tif ( this.normalMap && this.normalMap.isTexture ) {\n\n\t\t\tdata.normalMap = this.normalMap.toJSON( meta ).uuid;\n\t\t\tdata.normalMapType = this.normalMapType;\n\t\t\tdata.normalScale = this.normalScale.toArray();\n\n\t\t}\n\n\t\tif ( this.displacementMap && this.displacementMap.isTexture ) {\n\n\t\t\tdata.displacementMap = this.displacementMap.toJSON( meta ).uuid;\n\t\t\tdata.displacementScale = this.displacementScale;\n\t\t\tdata.displacementBias = this.displacementBias;\n\n\t\t}\n\n\t\tif ( this.roughnessMap && this.roughnessMap.isTexture ) data.roughnessMap = this.roughnessMap.toJSON( meta ).uuid;\n\t\tif ( this.metalnessMap && this.metalnessMap.isTexture ) data.metalnessMap = this.metalnessMap.toJSON( meta ).uuid;\n\n\t\tif ( this.emissiveMap && this.emissiveMap.isTexture ) data.emissiveMap = this.emissiveMap.toJSON( meta ).uuid;\n\t\tif ( this.specularMap && this.specularMap.isTexture ) data.specularMap = this.specularMap.toJSON( meta ).uuid;\n\n\t\tif ( this.envMap && this.envMap.isTexture ) {\n\n\t\t\tdata.envMap = this.envMap.toJSON( meta ).uuid;\n\t\t\tdata.reflectivity = this.reflectivity; // Scale behind envMap\n\t\t\tdata.refractionRatio = this.refractionRatio;\n\n\t\t\tif ( this.combine !== undefined ) data.combine = this.combine;\n\t\t\tif ( this.envMapIntensity !== undefined ) data.envMapIntensity = this.envMapIntensity;\n\n\t\t}\n\n\t\tif ( this.gradientMap && this.gradientMap.isTexture ) {\n\n\t\t\tdata.gradientMap = this.gradientMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.size !== undefined ) data.size = this.size;\n\t\tif ( this.sizeAttenuation !== undefined ) data.sizeAttenuation = this.sizeAttenuation;\n\n\t\tif ( this.blending !== NormalBlending ) data.blending = this.blending;\n\t\tif ( this.flatShading === true ) data.flatShading = this.flatShading;\n\t\tif ( this.side !== FrontSide ) data.side = this.side;\n\t\tif ( this.vertexColors !== NoColors ) data.vertexColors = this.vertexColors;\n\n\t\tif ( this.opacity < 1 ) data.opacity = this.opacity;\n\t\tif ( this.transparent === true ) data.transparent = this.transparent;\n\n\t\tdata.depthFunc = this.depthFunc;\n\t\tdata.depthTest = this.depthTest;\n\t\tdata.depthWrite = this.depthWrite;\n\n\t\tdata.stencilWrite = this.stencilWrite;\n\t\tdata.stencilWriteMask = this.stencilWriteMask;\n\t\tdata.stencilFunc = this.stencilFunc;\n\t\tdata.stencilRef = this.stencilRef;\n\t\tdata.stencilFuncMask = this.stencilFuncMask;\n\t\tdata.stencilFail = this.stencilFail;\n\t\tdata.stencilZFail = this.stencilZFail;\n\t\tdata.stencilZPass = this.stencilZPass;\n\n\t\t// rotation (SpriteMaterial)\n\t\tif ( this.rotation && this.rotation !== 0 ) data.rotation = this.rotation;\n\n\t\tif ( this.polygonOffset === true ) data.polygonOffset = true;\n\t\tif ( this.polygonOffsetFactor !== 0 ) data.polygonOffsetFactor = this.polygonOffsetFactor;\n\t\tif ( this.polygonOffsetUnits !== 0 ) data.polygonOffsetUnits = this.polygonOffsetUnits;\n\n\t\tif ( this.linewidth && this.linewidth !== 1 ) data.linewidth = this.linewidth;\n\t\tif ( this.dashSize !== undefined ) data.dashSize = this.dashSize;\n\t\tif ( this.gapSize !== undefined ) data.gapSize = this.gapSize;\n\t\tif ( this.scale !== undefined ) data.scale = this.scale;\n\n\t\tif ( this.dithering === true ) data.dithering = true;\n\n\t\tif ( this.alphaTest > 0 ) data.alphaTest = this.alphaTest;\n\t\tif ( this.premultipliedAlpha === true ) data.premultipliedAlpha = this.premultipliedAlpha;\n\n\t\tif ( this.wireframe === true ) data.wireframe = this.wireframe;\n\t\tif ( this.wireframeLinewidth > 1 ) data.wireframeLinewidth = this.wireframeLinewidth;\n\t\tif ( this.wireframeLinecap !== 'round' ) data.wireframeLinecap = this.wireframeLinecap;\n\t\tif ( this.wireframeLinejoin !== 'round' ) data.wireframeLinejoin = this.wireframeLinejoin;\n\n\t\tif ( this.morphTargets === true ) data.morphTargets = true;\n\t\tif ( this.morphNormals === true ) data.morphNormals = true;\n\t\tif ( this.skinning === true ) data.skinning = true;\n\n\t\tif ( this.visible === false ) data.visible = false;\n\n\t\tif ( this.toneMapped === false ) data.toneMapped = false;\n\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) data.userData = this.userData;\n\n\t\t// TODO: Copied from Object3D.toJSON\n\n\t\tfunction extractFromCache( cache ) {\n\n\t\t\tvar values = [];\n\n\t\t\tfor ( var key in cache ) {\n\n\t\t\t\tvar data = cache[ key ];\n\t\t\t\tdelete data.metadata;\n\t\t\t\tvalues.push( data );\n\n\t\t\t}\n\n\t\t\treturn values;\n\n\t\t}\n\n\t\tif ( isRoot ) {\n\n\t\t\tvar textures = extractFromCache( meta.textures );\n\t\t\tvar images = extractFromCache( meta.images );\n\n\t\t\tif ( textures.length > 0 ) data.textures = textures;\n\t\t\tif ( images.length > 0 ) data.images = images;\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.fog = source.fog;\n\n\t\tthis.blending = source.blending;\n\t\tthis.side = source.side;\n\t\tthis.flatShading = source.flatShading;\n\t\tthis.vertexTangents = source.vertexTangents;\n\t\tthis.vertexColors = source.vertexColors;\n\n\t\tthis.opacity = source.opacity;\n\t\tthis.transparent = source.transparent;\n\n\t\tthis.blendSrc = source.blendSrc;\n\t\tthis.blendDst = source.blendDst;\n\t\tthis.blendEquation = source.blendEquation;\n\t\tthis.blendSrcAlpha = source.blendSrcAlpha;\n\t\tthis.blendDstAlpha = source.blendDstAlpha;\n\t\tthis.blendEquationAlpha = source.blendEquationAlpha;\n\n\t\tthis.depthFunc = source.depthFunc;\n\t\tthis.depthTest = source.depthTest;\n\t\tthis.depthWrite = source.depthWrite;\n\n\t\tthis.stencilWriteMask = source.stencilWriteMask;\n\t\tthis.stencilFunc = source.stencilFunc;\n\t\tthis.stencilRef = source.stencilRef;\n\t\tthis.stencilFuncMask = source.stencilFuncMask;\n\t\tthis.stencilFail = source.stencilFail;\n\t\tthis.stencilZFail = source.stencilZFail;\n\t\tthis.stencilZPass = source.stencilZPass;\n\t\tthis.stencilWrite = source.stencilWrite;\n\n\t\tvar srcPlanes = source.clippingPlanes,\n\t\t\tdstPlanes = null;\n\n\t\tif ( srcPlanes !== null ) {\n\n\t\t\tvar n = srcPlanes.length;\n\t\t\tdstPlanes = new Array( n );\n\n\t\t\tfor ( var i = 0; i !== n; ++ i )\n\t\t\t\tdstPlanes[ i ] = srcPlanes[ i ].clone();\n\n\t\t}\n\n\t\tthis.clippingPlanes = dstPlanes;\n\t\tthis.clipIntersection = source.clipIntersection;\n\t\tthis.clipShadows = source.clipShadows;\n\n\t\tthis.shadowSide = source.shadowSide;\n\n\t\tthis.colorWrite = source.colorWrite;\n\n\t\tthis.precision = source.precision;\n\n\t\tthis.polygonOffset = source.polygonOffset;\n\t\tthis.polygonOffsetFactor = source.polygonOffsetFactor;\n\t\tthis.polygonOffsetUnits = source.polygonOffsetUnits;\n\n\t\tthis.dithering = source.dithering;\n\n\t\tthis.alphaTest = source.alphaTest;\n\t\tthis.premultipliedAlpha = source.premultipliedAlpha;\n\n\t\tthis.visible = source.visible;\n\n\t\tthis.toneMapped = source.toneMapped;\n\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\nObject.defineProperty( Material.prototype, 'needsUpdate', {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\nexport { Material };\n","import { Color } from '../../math/Color.js';\nimport { Vector2 } from '../../math/Vector2.js';\nimport { Matrix3 } from '../../math/Matrix3.js';\n\n/**\n * Uniforms library for shared webgl shaders\n */\n\nvar UniformsLib = {\n\n\tcommon: {\n\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\n\t\topacity: { value: 1.0 },\n\n\t\tmap: { value: null },\n\t\tuvTransform: { value: new Matrix3() },\n\t\tuv2Transform: { value: new Matrix3() },\n\n\t\talphaMap: { value: null },\n\n\t},\n\n\tspecularmap: {\n\n\t\tspecularMap: { value: null },\n\n\t},\n\n\tenvmap: {\n\n\t\tenvMap: { value: null },\n\t\tflipEnvMap: { value: - 1 },\n\t\treflectivity: { value: 1.0 },\n\t\trefractionRatio: { value: 0.98 },\n\t\tmaxMipLevel: { value: 0 }\n\n\t},\n\n\taomap: {\n\n\t\taoMap: { value: null },\n\t\taoMapIntensity: { value: 1 }\n\n\t},\n\n\tlightmap: {\n\n\t\tlightMap: { value: null },\n\t\tlightMapIntensity: { value: 1 }\n\n\t},\n\n\temissivemap: {\n\n\t\temissiveMap: { value: null }\n\n\t},\n\n\tbumpmap: {\n\n\t\tbumpMap: { value: null },\n\t\tbumpScale: { value: 1 }\n\n\t},\n\n\tnormalmap: {\n\n\t\tnormalMap: { value: null },\n\t\tnormalScale: { value: new Vector2( 1, 1 ) }\n\n\t},\n\n\tdisplacementmap: {\n\n\t\tdisplacementMap: { value: null },\n\t\tdisplacementScale: { value: 1 },\n\t\tdisplacementBias: { value: 0 }\n\n\t},\n\n\troughnessmap: {\n\n\t\troughnessMap: { value: null }\n\n\t},\n\n\tmetalnessmap: {\n\n\t\tmetalnessMap: { value: null }\n\n\t},\n\n\tgradientmap: {\n\n\t\tgradientMap: { value: null }\n\n\t},\n\n\tfog: {\n\n\t\tfogDensity: { value: 0.00025 },\n\t\tfogNear: { value: 1 },\n\t\tfogFar: { value: 2000 },\n\t\tfogColor: { value: new Color( 0xffffff ) }\n\n\t},\n\n\tlights: {\n\n\t\tambientLightColor: { value: [] },\n\n\t\tlightProbe: { value: [] },\n\n\t\tdirectionalLights: { value: [], properties: {\n\t\t\tdirection: {},\n\t\t\tcolor: {},\n\n\t\t\tshadow: {},\n\t\t\tshadowBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {}\n\t\t} },\n\n\t\tdirectionalShadowMap: { value: [] },\n\t\tdirectionalShadowMatrix: { value: [] },\n\n\t\tspotLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\tdirection: {},\n\t\t\tdistance: {},\n\t\t\tconeCos: {},\n\t\t\tpenumbraCos: {},\n\t\t\tdecay: {},\n\n\t\t\tshadow: {},\n\t\t\tshadowBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {}\n\t\t} },\n\n\t\tspotShadowMap: { value: [] },\n\t\tspotShadowMatrix: { value: [] },\n\n\t\tpointLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\tdecay: {},\n\t\t\tdistance: {},\n\n\t\t\tshadow: {},\n\t\t\tshadowBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {},\n\t\t\tshadowCameraNear: {},\n\t\t\tshadowCameraFar: {}\n\t\t} },\n\n\t\tpointShadowMap: { value: [] },\n\t\tpointShadowMatrix: { value: [] },\n\n\t\themisphereLights: { value: [], properties: {\n\t\t\tdirection: {},\n\t\t\tskyColor: {},\n\t\t\tgroundColor: {}\n\t\t} },\n\n\t\t// TODO (abelnation): RectAreaLight BRDF data needs to be moved from example to main src\n\t\trectAreaLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\twidth: {},\n\t\t\theight: {}\n\t\t} }\n\n\t},\n\n\tpoints: {\n\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\n\t\topacity: { value: 1.0 },\n\t\tsize: { value: 1.0 },\n\t\tscale: { value: 1.0 },\n\t\tmap: { value: null },\n\t\talphaMap: { value: null },\n\t\tuvTransform: { value: new Matrix3() }\n\n\t},\n\n\tsprite: {\n\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\n\t\topacity: { value: 1.0 },\n\t\tcenter: { value: new Vector2( 0.5, 0.5 ) },\n\t\trotation: { value: 0.0 },\n\t\tmap: { value: null },\n\t\talphaMap: { value: null },\n\t\tuvTransform: { value: new Matrix3() }\n\n\t}\n\n};\n\nexport { UniformsLib };\n","import { Material } from './Material.js';\nimport { MultiplyOperation } from '../constants.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.Multiply,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshLambertMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshLambertMaterial';\n\n\tthis.color = new Color( 0xffffff ); // diffuse\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.emissive = new Color( 0x000000 );\n\tthis.emissiveIntensity = 1.0;\n\tthis.emissiveMap = null;\n\n\tthis.specularMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.combine = MultiplyOperation;\n\tthis.reflectivity = 1;\n\tthis.refractionRatio = 0.98;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshLambertMaterial.prototype = Object.create( Material.prototype );\nMeshLambertMaterial.prototype.constructor = MeshLambertMaterial;\n\nMeshLambertMaterial.prototype.isMeshLambertMaterial = true;\n\nMeshLambertMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.map = source.map;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.emissive.copy( source.emissive );\n\tthis.emissiveMap = source.emissiveMap;\n\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\tthis.specularMap = source.specularMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.envMap = source.envMap;\n\tthis.combine = source.combine;\n\tthis.reflectivity = source.reflectivity;\n\tthis.refractionRatio = source.refractionRatio;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n\nexport { MeshLambertMaterial };\n","import { Vector3 } from './Vector3.js';\n\nvar _vector = new Vector3();\nvar _segCenter = new Vector3();\nvar _segDir = new Vector3();\nvar _diff = new Vector3();\n\nvar _edge1 = new Vector3();\nvar _edge2 = new Vector3();\nvar _normal = new Vector3();\n\n/**\n * @author bhouston / http://clara.io\n */\n\nfunction Ray( origin, direction ) {\n\n\tthis.origin = ( origin !== undefined ) ? origin : new Vector3();\n\tthis.direction = ( direction !== undefined ) ? direction : new Vector3( 0, 0, - 1 );\n\n}\n\nObject.assign( Ray.prototype, {\n\n\tset: function ( origin, direction ) {\n\n\t\tthis.origin.copy( origin );\n\t\tthis.direction.copy( direction );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( ray ) {\n\n\t\tthis.origin.copy( ray.origin );\n\t\tthis.direction.copy( ray.direction );\n\n\t\treturn this;\n\n\t},\n\n\tat: function ( t, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Ray: .at() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( this.direction ).multiplyScalar( t ).add( this.origin );\n\n\t},\n\n\tlookAt: function ( v ) {\n\n\t\tthis.direction.copy( v ).sub( this.origin ).normalize();\n\n\t\treturn this;\n\n\t},\n\n\trecast: function ( t ) {\n\n\t\tthis.origin.copy( this.at( t, _vector ) );\n\n\t\treturn this;\n\n\t},\n\n\tclosestPointToPoint: function ( point, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Ray: .closestPointToPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\ttarget.subVectors( point, this.origin );\n\n\t\tvar directionDistance = target.dot( this.direction );\n\n\t\tif ( directionDistance < 0 ) {\n\n\t\t\treturn target.copy( this.origin );\n\n\t\t}\n\n\t\treturn target.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\n\n\t},\n\n\tdistanceToPoint: function ( point ) {\n\n\t\treturn Math.sqrt( this.distanceSqToPoint( point ) );\n\n\t},\n\n\tdistanceSqToPoint: function ( point ) {\n\n\t\tvar directionDistance = _vector.subVectors( point, this.origin ).dot( this.direction );\n\n\t\t// point behind the ray\n\n\t\tif ( directionDistance < 0 ) {\n\n\t\t\treturn this.origin.distanceToSquared( point );\n\n\t\t}\n\n\t\t_vector.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\n\n\t\treturn _vector.distanceToSquared( point );\n\n\t},\n\n\tdistanceSqToSegment: function ( v0, v1, optionalPointOnRay, optionalPointOnSegment ) {\n\n\t\t// from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteDistRaySegment.h\n\t\t// It returns the min distance between the ray and the segment\n\t\t// defined by v0 and v1\n\t\t// It can also set two optional targets :\n\t\t// - The closest point on the ray\n\t\t// - The closest point on the segment\n\n\t\t_segCenter.copy( v0 ).add( v1 ).multiplyScalar( 0.5 );\n\t\t_segDir.copy( v1 ).sub( v0 ).normalize();\n\t\t_diff.copy( this.origin ).sub( _segCenter );\n\n\t\tvar segExtent = v0.distanceTo( v1 ) * 0.5;\n\t\tvar a01 = - this.direction.dot( _segDir );\n\t\tvar b0 = _diff.dot( this.direction );\n\t\tvar b1 = - _diff.dot( _segDir );\n\t\tvar c = _diff.lengthSq();\n\t\tvar det = Math.abs( 1 - a01 * a01 );\n\t\tvar s0, s1, sqrDist, extDet;\n\n\t\tif ( det > 0 ) {\n\n\t\t\t// The ray and segment are not parallel.\n\n\t\t\ts0 = a01 * b1 - b0;\n\t\t\ts1 = a01 * b0 - b1;\n\t\t\textDet = segExtent * det;\n\n\t\t\tif ( s0 >= 0 ) {\n\n\t\t\t\tif ( s1 >= - extDet ) {\n\n\t\t\t\t\tif ( s1 <= extDet ) {\n\n\t\t\t\t\t\t// region 0\n\t\t\t\t\t\t// Minimum at interior points of ray and segment.\n\n\t\t\t\t\t\tvar invDet = 1 / det;\n\t\t\t\t\t\ts0 *= invDet;\n\t\t\t\t\t\ts1 *= invDet;\n\t\t\t\t\t\tsqrDist = s0 * ( s0 + a01 * s1 + 2 * b0 ) + s1 * ( a01 * s0 + s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// region 1\n\n\t\t\t\t\t\ts1 = segExtent;\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// region 5\n\n\t\t\t\t\ts1 = - segExtent;\n\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( s1 <= - extDet ) {\n\n\t\t\t\t\t// region 4\n\n\t\t\t\t\ts0 = Math.max( 0, - ( - a01 * segExtent + b0 ) );\n\t\t\t\t\ts1 = ( s0 > 0 ) ? - segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t} else if ( s1 <= extDet ) {\n\n\t\t\t\t\t// region 3\n\n\t\t\t\t\ts0 = 0;\n\t\t\t\t\ts1 = Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\tsqrDist = s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// region 2\n\n\t\t\t\t\ts0 = Math.max( 0, - ( a01 * segExtent + b0 ) );\n\t\t\t\t\ts1 = ( s0 > 0 ) ? segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// Ray and segment are parallel.\n\n\t\t\ts1 = ( a01 > 0 ) ? - segExtent : segExtent;\n\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t}\n\n\t\tif ( optionalPointOnRay ) {\n\n\t\t\toptionalPointOnRay.copy( this.direction ).multiplyScalar( s0 ).add( this.origin );\n\n\t\t}\n\n\t\tif ( optionalPointOnSegment ) {\n\n\t\t\toptionalPointOnSegment.copy( _segDir ).multiplyScalar( s1 ).add( _segCenter );\n\n\t\t}\n\n\t\treturn sqrDist;\n\n\t},\n\n\tintersectSphere: function ( sphere, target ) {\n\n\t\t_vector.subVectors( sphere.center, this.origin );\n\t\tvar tca = _vector.dot( this.direction );\n\t\tvar d2 = _vector.dot( _vector ) - tca * tca;\n\t\tvar radius2 = sphere.radius * sphere.radius;\n\n\t\tif ( d2 > radius2 ) return null;\n\n\t\tvar thc = Math.sqrt( radius2 - d2 );\n\n\t\t// t0 = first intersect point - entrance on front of sphere\n\t\tvar t0 = tca - thc;\n\n\t\t// t1 = second intersect point - exit point on back of sphere\n\t\tvar t1 = tca + thc;\n\n\t\t// test to see if both t0 and t1 are behind the ray - if so, return null\n\t\tif ( t0 < 0 && t1 < 0 ) return null;\n\n\t\t// test to see if t0 is behind the ray:\n\t\t// if it is, the ray is inside the sphere, so return the second exit point scaled by t1,\n\t\t// in order to always return an intersect point that is in front of the ray.\n\t\tif ( t0 < 0 ) return this.at( t1, target );\n\n\t\t// else t0 is in front of the ray, so return the first collision point scaled by t0\n\t\treturn this.at( t0, target );\n\n\t},\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\treturn this.distanceSqToPoint( sphere.center ) <= ( sphere.radius * sphere.radius );\n\n\t},\n\n\tdistanceToPlane: function ( plane ) {\n\n\t\tvar denominator = plane.normal.dot( this.direction );\n\n\t\tif ( denominator === 0 ) {\n\n\t\t\t// line is coplanar, return origin\n\t\t\tif ( plane.distanceToPoint( this.origin ) === 0 ) {\n\n\t\t\t\treturn 0;\n\n\t\t\t}\n\n\t\t\t// Null is preferable to undefined since undefined means.... it is undefined\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tvar t = - ( this.origin.dot( plane.normal ) + plane.constant ) / denominator;\n\n\t\t// Return if the ray never intersects the plane\n\n\t\treturn t >= 0 ? t : null;\n\n\t},\n\n\tintersectPlane: function ( plane, target ) {\n\n\t\tvar t = this.distanceToPlane( plane );\n\n\t\tif ( t === null ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\treturn this.at( t, target );\n\n\t},\n\n\tintersectsPlane: function ( plane ) {\n\n\t\t// check if the ray lies on the plane first\n\n\t\tvar distToPoint = plane.distanceToPoint( this.origin );\n\n\t\tif ( distToPoint === 0 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\tvar denominator = plane.normal.dot( this.direction );\n\n\t\tif ( denominator * distToPoint < 0 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\t// ray origin is behind the plane (and is pointing behind it)\n\n\t\treturn false;\n\n\t},\n\n\tintersectBox: function ( box, target ) {\n\n\t\tvar tmin, tmax, tymin, tymax, tzmin, tzmax;\n\n\t\tvar invdirx = 1 / this.direction.x,\n\t\t\tinvdiry = 1 / this.direction.y,\n\t\t\tinvdirz = 1 / this.direction.z;\n\n\t\tvar origin = this.origin;\n\n\t\tif ( invdirx >= 0 ) {\n\n\t\t\ttmin = ( box.min.x - origin.x ) * invdirx;\n\t\t\ttmax = ( box.max.x - origin.x ) * invdirx;\n\n\t\t} else {\n\n\t\t\ttmin = ( box.max.x - origin.x ) * invdirx;\n\t\t\ttmax = ( box.min.x - origin.x ) * invdirx;\n\n\t\t}\n\n\t\tif ( invdiry >= 0 ) {\n\n\t\t\ttymin = ( box.min.y - origin.y ) * invdiry;\n\t\t\ttymax = ( box.max.y - origin.y ) * invdiry;\n\n\t\t} else {\n\n\t\t\ttymin = ( box.max.y - origin.y ) * invdiry;\n\t\t\ttymax = ( box.min.y - origin.y ) * invdiry;\n\n\t\t}\n\n\t\tif ( ( tmin > tymax ) || ( tymin > tmax ) ) return null;\n\n\t\t// These lines also handle the case where tmin or tmax is NaN\n\t\t// (result of 0 * Infinity). x !== x returns true if x is NaN\n\n\t\tif ( tymin > tmin || tmin !== tmin ) tmin = tymin;\n\n\t\tif ( tymax < tmax || tmax !== tmax ) tmax = tymax;\n\n\t\tif ( invdirz >= 0 ) {\n\n\t\t\ttzmin = ( box.min.z - origin.z ) * invdirz;\n\t\t\ttzmax = ( box.max.z - origin.z ) * invdirz;\n\n\t\t} else {\n\n\t\t\ttzmin = ( box.max.z - origin.z ) * invdirz;\n\t\t\ttzmax = ( box.min.z - origin.z ) * invdirz;\n\n\t\t}\n\n\t\tif ( ( tmin > tzmax ) || ( tzmin > tmax ) ) return null;\n\n\t\tif ( tzmin > tmin || tmin !== tmin ) tmin = tzmin;\n\n\t\tif ( tzmax < tmax || tmax !== tmax ) tmax = tzmax;\n\n\t\t//return point closest to the ray (positive side)\n\n\t\tif ( tmax < 0 ) return null;\n\n\t\treturn this.at( tmin >= 0 ? tmin : tmax, target );\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\treturn this.intersectBox( box, _vector ) !== null;\n\n\t},\n\n\tintersectTriangle: function ( a, b, c, backfaceCulling, target ) {\n\n\t\t// Compute the offset origin, edges, and normal.\n\n\t\t// from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteIntrRay3Triangle3.h\n\n\t\t_edge1.subVectors( b, a );\n\t\t_edge2.subVectors( c, a );\n\t\t_normal.crossVectors( _edge1, _edge2 );\n\n\t\t// Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,\n\t\t// E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by\n\t\t//   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))\n\t\t//   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))\n\t\t//   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)\n\t\tvar DdN = this.direction.dot( _normal );\n\t\tvar sign;\n\n\t\tif ( DdN > 0 ) {\n\n\t\t\tif ( backfaceCulling ) return null;\n\t\t\tsign = 1;\n\n\t\t} else if ( DdN < 0 ) {\n\n\t\t\tsign = - 1;\n\t\t\tDdN = - DdN;\n\n\t\t} else {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t_diff.subVectors( this.origin, a );\n\t\tvar DdQxE2 = sign * this.direction.dot( _edge2.crossVectors( _diff, _edge2 ) );\n\n\t\t// b1 < 0, no intersection\n\t\tif ( DdQxE2 < 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tvar DdE1xQ = sign * this.direction.dot( _edge1.cross( _diff ) );\n\n\t\t// b2 < 0, no intersection\n\t\tif ( DdE1xQ < 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// b1+b2 > 1, no intersection\n\t\tif ( DdQxE2 + DdE1xQ > DdN ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// Line intersects triangle, check if ray does.\n\t\tvar QdN = - sign * _diff.dot( _normal );\n\n\t\t// t < 0, no intersection\n\t\tif ( QdN < 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// Ray intersects triangle.\n\t\treturn this.at( QdN / DdN, target );\n\n\t},\n\n\tapplyMatrix4: function ( matrix4 ) {\n\n\t\tthis.origin.applyMatrix4( matrix4 );\n\t\tthis.direction.transformDirection( matrix4 );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( ray ) {\n\n\t\treturn ray.origin.equals( this.origin ) && ray.direction.equals( this.direction );\n\n\t}\n\n} );\n\n\nexport { Ray };\n","import { StaticDrawUsage } from '../constants.js';\n\n/**\n * @author benaadams / https://twitter.com/ben_a_adams\n */\n\nfunction InterleavedBuffer( array, stride ) {\n\n\tthis.array = array;\n\tthis.stride = stride;\n\tthis.count = array !== undefined ? array.length / stride : 0;\n\n\tthis.usage = StaticDrawUsage;\n\tthis.updateRange = { offset: 0, count: - 1 };\n\n\tthis.version = 0;\n\n}\n\nObject.defineProperty( InterleavedBuffer.prototype, 'needsUpdate', {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\nObject.assign( InterleavedBuffer.prototype, {\n\n\tisInterleavedBuffer: true,\n\n\tonUploadCallback: function () {},\n\n\tsetUsage: function ( value ) {\n\n\t\tthis.usage = value;\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.array = new source.array.constructor( source.array );\n\t\tthis.count = source.count;\n\t\tthis.stride = source.stride;\n\t\tthis.usage = source.usage;\n\n\t\treturn this;\n\n\t},\n\n\tcopyAt: function ( index1, attribute, index2 ) {\n\n\t\tindex1 *= this.stride;\n\t\tindex2 *= attribute.stride;\n\n\t\tfor ( var i = 0, l = this.stride; i < l; i ++ ) {\n\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tset: function ( value, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.array.set( value, offset );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tonUpload: function ( callback ) {\n\n\t\tthis.onUploadCallback = callback;\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { InterleavedBuffer };\n","/**\n * @author Don McCurdy / https://www.donmccurdy.com\n */\n\nvar LoaderUtils = {\n\n\tdecodeText: function ( array ) {\n\n\t\tif ( typeof TextDecoder !== 'undefined' ) {\n\n\t\t\treturn new TextDecoder().decode( array );\n\n\t\t}\n\n\t\t// Avoid the String.fromCharCode.apply(null, array) shortcut, which\n\t\t// throws a \"maximum call stack size exceeded\" error for large arrays.\n\n\t\tvar s = '';\n\n\t\tfor ( var i = 0, il = array.length; i < il; i ++ ) {\n\n\t\t\t// Implicitly assumes little-endian.\n\t\t\ts += String.fromCharCode( array[ i ] );\n\n\t\t}\n\n\t\ttry {\n\n\t\t\t// merges multi-byte utf-8 characters.\n\n\t\t\treturn decodeURIComponent( escape( s ) );\n\n\t\t} catch ( e ) { // see #16358\n\n\t\t\treturn s;\n\n\t\t}\n\n\t},\n\n\textractUrlBase: function ( url ) {\n\n\t\tvar index = url.lastIndexOf( '/' );\n\n\t\tif ( index === - 1 ) return './';\n\n\t\treturn url.substr( 0, index + 1 );\n\n\t}\n\n};\n\nexport { LoaderUtils };\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author benaadams / https://twitter.com/ben_a_adams\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { Vector3 } from '../math/Vector3.js';\n\n// SphereGeometry\n\nfunction SphereGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'SphereGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments,\n\t\tphiStart: phiStart,\n\t\tphiLength: phiLength,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tthis.fromBufferGeometry( new SphereBufferGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) );\n\tthis.mergeVertices();\n\n}\n\nSphereGeometry.prototype = Object.create( Geometry.prototype );\nSphereGeometry.prototype.constructor = SphereGeometry;\n\n// SphereBufferGeometry\n\nfunction SphereBufferGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'SphereBufferGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments,\n\t\tphiStart: phiStart,\n\t\tphiLength: phiLength,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tradius = radius || 1;\n\n\twidthSegments = Math.max( 3, Math.floor( widthSegments ) || 8 );\n\theightSegments = Math.max( 2, Math.floor( heightSegments ) || 6 );\n\n\tphiStart = phiStart !== undefined ? phiStart : 0;\n\tphiLength = phiLength !== undefined ? phiLength : Math.PI * 2;\n\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI;\n\n\tvar thetaEnd = Math.min( thetaStart + thetaLength, Math.PI );\n\n\tvar ix, iy;\n\n\tvar index = 0;\n\tvar grid = [];\n\n\tvar vertex = new Vector3();\n\tvar normal = new Vector3();\n\n\t// buffers\n\n\tvar indices = [];\n\tvar vertices = [];\n\tvar normals = [];\n\tvar uvs = [];\n\n\t// generate vertices, normals and uvs\n\n\tfor ( iy = 0; iy <= heightSegments; iy ++ ) {\n\n\t\tvar verticesRow = [];\n\n\t\tvar v = iy / heightSegments;\n\n\t\t// special case for the poles\n\n\t\tvar uOffset = 0;\n\n\t\tif ( iy == 0 && thetaStart == 0 ) {\n\n\t\t\tuOffset = 0.5 / widthSegments;\n\n\t\t} else if ( iy == heightSegments && thetaEnd == Math.PI ) {\n\n\t\t\tuOffset = - 0.5 / widthSegments;\n\n\t\t}\n\n\t\tfor ( ix = 0; ix <= widthSegments; ix ++ ) {\n\n\t\t\tvar u = ix / widthSegments;\n\n\t\t\t// vertex\n\n\t\t\tvertex.x = - radius * Math.cos( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\n\t\t\tvertex.y = radius * Math.cos( thetaStart + v * thetaLength );\n\t\t\tvertex.z = radius * Math.sin( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\n\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t// normal\n\n\t\t\tnormal.copy( vertex ).normalize();\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t// uv\n\n\t\t\tuvs.push( u + uOffset, 1 - v );\n\n\t\t\tverticesRow.push( index ++ );\n\n\t\t}\n\n\t\tgrid.push( verticesRow );\n\n\t}\n\n\t// indices\n\n\tfor ( iy = 0; iy < heightSegments; iy ++ ) {\n\n\t\tfor ( ix = 0; ix < widthSegments; ix ++ ) {\n\n\t\t\tvar a = grid[ iy ][ ix + 1 ];\n\t\t\tvar b = grid[ iy ][ ix ];\n\t\t\tvar c = grid[ iy + 1 ][ ix ];\n\t\t\tvar d = grid[ iy + 1 ][ ix + 1 ];\n\n\t\t\tif ( iy !== 0 || thetaStart > 0 ) indices.push( a, b, d );\n\t\t\tif ( iy !== heightSegments - 1 || thetaEnd < Math.PI ) indices.push( b, c, d );\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n}\n\nSphereBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nSphereBufferGeometry.prototype.constructor = SphereBufferGeometry;\n\n\nexport { SphereGeometry, SphereBufferGeometry };\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { Vector3 } from '../math/Vector3.js';\n\n// BoxGeometry\n\nclass BoxGeometry extends Geometry {\n\n\tconstructor( width, height, depth, widthSegments, heightSegments, depthSegments ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'BoxGeometry';\n\n\t\tthis.parameters = {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\tdepth: depth,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\tdepthSegments: depthSegments\n\t\t};\n\n\t\tthis.fromBufferGeometry( new BoxBufferGeometry( width, height, depth, widthSegments, heightSegments, depthSegments ) );\n\t\tthis.mergeVertices();\n\n\t}\n\n}\n\n// BoxBufferGeometry\n\nclass BoxBufferGeometry extends BufferGeometry {\n\n\tconstructor( width, height, depth, widthSegments, heightSegments, depthSegments ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'BoxBufferGeometry';\n\n\t\tthis.parameters = {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\tdepth: depth,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\tdepthSegments: depthSegments\n\t\t};\n\n\t\tvar scope = this;\n\n\t\twidth = width || 1;\n\t\theight = height || 1;\n\t\tdepth = depth || 1;\n\n\t\t// segments\n\n\t\twidthSegments = Math.floor( widthSegments ) || 1;\n\t\theightSegments = Math.floor( heightSegments ) || 1;\n\t\tdepthSegments = Math.floor( depthSegments ) || 1;\n\n\t\t// buffers\n\n\t\tvar indices = [];\n\t\tvar vertices = [];\n\t\tvar normals = [];\n\t\tvar uvs = [];\n\n\t\t// helper variables\n\n\t\tvar numberOfVertices = 0;\n\t\tvar groupStart = 0;\n\n\t\t// build each side of the box geometry\n\n\t\tbuildPlane( 'z', 'y', 'x', - 1, - 1, depth, height, width, depthSegments, heightSegments, 0 ); // px\n\t\tbuildPlane( 'z', 'y', 'x', 1, - 1, depth, height, - width, depthSegments, heightSegments, 1 ); // nx\n\t\tbuildPlane( 'x', 'z', 'y', 1, 1, width, depth, height, widthSegments, depthSegments, 2 ); // py\n\t\tbuildPlane( 'x', 'z', 'y', 1, - 1, width, depth, - height, widthSegments, depthSegments, 3 ); // ny\n\t\tbuildPlane( 'x', 'y', 'z', 1, - 1, width, height, depth, widthSegments, heightSegments, 4 ); // pz\n\t\tbuildPlane( 'x', 'y', 'z', - 1, - 1, width, height, - depth, widthSegments, heightSegments, 5 ); // nz\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t\tfunction buildPlane( u, v, w, udir, vdir, width, height, depth, gridX, gridY, materialIndex ) {\n\n\t\t\tvar segmentWidth = width / gridX;\n\t\t\tvar segmentHeight = height / gridY;\n\n\t\t\tvar widthHalf = width / 2;\n\t\t\tvar heightHalf = height / 2;\n\t\t\tvar depthHalf = depth / 2;\n\n\t\t\tvar gridX1 = gridX + 1;\n\t\t\tvar gridY1 = gridY + 1;\n\n\t\t\tvar vertexCounter = 0;\n\t\t\tvar groupCount = 0;\n\n\t\t\tvar ix, iy;\n\n\t\t\tvar vector = new Vector3();\n\n\t\t\t// generate vertices, normals and uvs\n\n\t\t\tfor ( iy = 0; iy < gridY1; iy ++ ) {\n\n\t\t\t\tvar y = iy * segmentHeight - heightHalf;\n\n\t\t\t\tfor ( ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\t\t\tvar x = ix * segmentWidth - widthHalf;\n\n\t\t\t\t\t// set values to correct vector component\n\n\t\t\t\t\tvector[ u ] = x * udir;\n\t\t\t\t\tvector[ v ] = y * vdir;\n\t\t\t\t\tvector[ w ] = depthHalf;\n\n\t\t\t\t\t// now apply vector to vertex buffer\n\n\t\t\t\t\tvertices.push( vector.x, vector.y, vector.z );\n\n\t\t\t\t\t// set values to correct vector component\n\n\t\t\t\t\tvector[ u ] = 0;\n\t\t\t\t\tvector[ v ] = 0;\n\t\t\t\t\tvector[ w ] = depth > 0 ? 1 : - 1;\n\n\t\t\t\t\t// now apply vector to normal buffer\n\n\t\t\t\t\tnormals.push( vector.x, vector.y, vector.z );\n\n\t\t\t\t\t// uvs\n\n\t\t\t\t\tuvs.push( ix / gridX );\n\t\t\t\t\tuvs.push( 1 - ( iy / gridY ) );\n\n\t\t\t\t\t// counters\n\n\t\t\t\t\tvertexCounter += 1;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// indices\n\n\t\t\t// 1. you need three indices to draw a single face\n\t\t\t// 2. a single segment consists of two faces\n\t\t\t// 3. so we need to generate six (2*3) indices per segment\n\n\t\t\tfor ( iy = 0; iy < gridY; iy ++ ) {\n\n\t\t\t\tfor ( ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\t\t\tvar a = numberOfVertices + ix + gridX1 * iy;\n\t\t\t\t\tvar b = numberOfVertices + ix + gridX1 * ( iy + 1 );\n\t\t\t\t\tvar c = numberOfVertices + ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\t\t\tvar d = numberOfVertices + ( ix + 1 ) + gridX1 * iy;\n\n\t\t\t\t\t// faces\n\n\t\t\t\t\tindices.push( a, b, d );\n\t\t\t\t\tindices.push( b, c, d );\n\n\t\t\t\t\t// increase counter\n\n\t\t\t\t\tgroupCount += 6;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\t\tscope.addGroup( groupStart, groupCount, materialIndex );\n\n\t\t\t// calculate new start value for groups\n\n\t\t\tgroupStart += groupCount;\n\n\t\t\t// update total number of vertices\n\n\t\t\tnumberOfVertices += vertexCounter;\n\n\t\t}\n\n\t}\n\n}\n\nexport { BoxGeometry, BoxBufferGeometry };\n","import { Curve } from '../core/Curve.js';\nimport { Vector2 } from '../../math/Vector2.js';\n\n\nfunction EllipseCurve( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'EllipseCurve';\n\n\tthis.aX = aX || 0;\n\tthis.aY = aY || 0;\n\n\tthis.xRadius = xRadius || 1;\n\tthis.yRadius = yRadius || 1;\n\n\tthis.aStartAngle = aStartAngle || 0;\n\tthis.aEndAngle = aEndAngle || 2 * Math.PI;\n\n\tthis.aClockwise = aClockwise || false;\n\n\tthis.aRotation = aRotation || 0;\n\n}\n\nEllipseCurve.prototype = Object.create( Curve.prototype );\nEllipseCurve.prototype.constructor = EllipseCurve;\n\nEllipseCurve.prototype.isEllipseCurve = true;\n\nEllipseCurve.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new Vector2();\n\n\tvar twoPi = Math.PI * 2;\n\tvar deltaAngle = this.aEndAngle - this.aStartAngle;\n\tvar samePoints = Math.abs( deltaAngle ) < Number.EPSILON;\n\n\t// ensures that deltaAngle is 0 .. 2 PI\n\twhile ( deltaAngle < 0 ) deltaAngle += twoPi;\n\twhile ( deltaAngle > twoPi ) deltaAngle -= twoPi;\n\n\tif ( deltaAngle < Number.EPSILON ) {\n\n\t\tif ( samePoints ) {\n\n\t\t\tdeltaAngle = 0;\n\n\t\t} else {\n\n\t\t\tdeltaAngle = twoPi;\n\n\t\t}\n\n\t}\n\n\tif ( this.aClockwise === true && ! samePoints ) {\n\n\t\tif ( deltaAngle === twoPi ) {\n\n\t\t\tdeltaAngle = - twoPi;\n\n\t\t} else {\n\n\t\t\tdeltaAngle = deltaAngle - twoPi;\n\n\t\t}\n\n\t}\n\n\tvar angle = this.aStartAngle + t * deltaAngle;\n\tvar x = this.aX + this.xRadius * Math.cos( angle );\n\tvar y = this.aY + this.yRadius * Math.sin( angle );\n\n\tif ( this.aRotation !== 0 ) {\n\n\t\tvar cos = Math.cos( this.aRotation );\n\t\tvar sin = Math.sin( this.aRotation );\n\n\t\tvar tx = x - this.aX;\n\t\tvar ty = y - this.aY;\n\n\t\t// Rotate the point about the center of the ellipse.\n\t\tx = tx * cos - ty * sin + this.aX;\n\t\ty = tx * sin + ty * cos + this.aY;\n\n\t}\n\n\treturn point.set( x, y );\n\n};\n\nEllipseCurve.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.aX = source.aX;\n\tthis.aY = source.aY;\n\n\tthis.xRadius = source.xRadius;\n\tthis.yRadius = source.yRadius;\n\n\tthis.aStartAngle = source.aStartAngle;\n\tthis.aEndAngle = source.aEndAngle;\n\n\tthis.aClockwise = source.aClockwise;\n\n\tthis.aRotation = source.aRotation;\n\n\treturn this;\n\n};\n\n\nEllipseCurve.prototype.toJSON = function () {\n\n\tvar data = Curve.prototype.toJSON.call( this );\n\n\tdata.aX = this.aX;\n\tdata.aY = this.aY;\n\n\tdata.xRadius = this.xRadius;\n\tdata.yRadius = this.yRadius;\n\n\tdata.aStartAngle = this.aStartAngle;\n\tdata.aEndAngle = this.aEndAngle;\n\n\tdata.aClockwise = this.aClockwise;\n\n\tdata.aRotation = this.aRotation;\n\n\treturn data;\n\n};\n\nEllipseCurve.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.aX = json.aX;\n\tthis.aY = json.aY;\n\n\tthis.xRadius = json.xRadius;\n\tthis.yRadius = json.yRadius;\n\n\tthis.aStartAngle = json.aStartAngle;\n\tthis.aEndAngle = json.aEndAngle;\n\n\tthis.aClockwise = json.aClockwise;\n\n\tthis.aRotation = json.aRotation;\n\n\treturn this;\n\n};\n\n\nexport { EllipseCurve };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Layers() {\n\n\tthis.mask = 1 | 0;\n\n}\n\nObject.assign( Layers.prototype, {\n\n\tset: function ( channel ) {\n\n\t\tthis.mask = 1 << channel | 0;\n\n\t},\n\n\tenable: function ( channel ) {\n\n\t\tthis.mask |= 1 << channel | 0;\n\n\t},\n\n\tenableAll: function () {\n\n\t\tthis.mask = 0xffffffff | 0;\n\n\t},\n\n\ttoggle: function ( channel ) {\n\n\t\tthis.mask ^= 1 << channel | 0;\n\n\t},\n\n\tdisable: function ( channel ) {\n\n\t\tthis.mask &= ~ ( 1 << channel | 0 );\n\n\t},\n\n\tdisableAll: function () {\n\n\t\tthis.mask = 0;\n\n\t},\n\n\ttest: function ( layers ) {\n\n\t\treturn ( this.mask & layers.mask ) !== 0;\n\n\t}\n\n} );\n\n\nexport { Layers };\n","import { Quaternion } from '../math/Quaternion.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { EventDispatcher } from './EventDispatcher.js';\nimport { Euler } from '../math/Euler.js';\nimport { Layers } from './Layers.js';\nimport { Matrix3 } from '../math/Matrix3.js';\nimport { _Math } from '../math/Math.js';\n\nvar _object3DId = 0;\n\nvar _v1 = new Vector3();\nvar _q1 = new Quaternion();\nvar _m1 = new Matrix4();\nvar _target = new Vector3();\n\nvar _position = new Vector3();\nvar _scale = new Vector3();\nvar _quaternion = new Quaternion();\n\nvar _xAxis = new Vector3( 1, 0, 0 );\nvar _yAxis = new Vector3( 0, 1, 0 );\nvar _zAxis = new Vector3( 0, 0, 1 );\n\nvar _addedEvent = { type: 'added' };\nvar _removedEvent = { type: 'removed' };\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author elephantatwork / www.elephantatwork.ch\n */\n\nfunction Object3D() {\n\n\tObject.defineProperty( this, 'id', { value: _object3DId ++ } );\n\n\tthis.uuid = _Math.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Object3D';\n\n\tthis.parent = null;\n\tthis.children = [];\n\n\tthis.up = Object3D.DefaultUp.clone();\n\n\tvar position = new Vector3();\n\tvar rotation = new Euler();\n\tvar quaternion = new Quaternion();\n\tvar scale = new Vector3( 1, 1, 1 );\n\n\tfunction onRotationChange() {\n\n\t\tquaternion.setFromEuler( rotation, false );\n\n\t}\n\n\tfunction onQuaternionChange() {\n\n\t\trotation.setFromQuaternion( quaternion, undefined, false );\n\n\t}\n\n\trotation._onChange( onRotationChange );\n\tquaternion._onChange( onQuaternionChange );\n\n\tObject.defineProperties( this, {\n\t\tposition: {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: position\n\t\t},\n\t\trotation: {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: rotation\n\t\t},\n\t\tquaternion: {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: quaternion\n\t\t},\n\t\tscale: {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: scale\n\t\t},\n\t\tmodelViewMatrix: {\n\t\t\tvalue: new Matrix4()\n\t\t},\n\t\tnormalMatrix: {\n\t\t\tvalue: new Matrix3()\n\t\t}\n\t} );\n\n\tthis.matrix = new Matrix4();\n\tthis.matrixWorld = new Matrix4();\n\n\tthis.matrixAutoUpdate = Object3D.DefaultMatrixAutoUpdate;\n\tthis.matrixWorldNeedsUpdate = false;\n\n\tthis.layers = new Layers();\n\tthis.visible = true;\n\n\tthis.castShadow = false;\n\tthis.receiveShadow = false;\n\n\tthis.frustumCulled = true;\n\tthis.renderOrder = 0;\n\n\tthis.userData = {};\n\n}\n\nObject3D.DefaultUp = new Vector3( 0, 1, 0 );\nObject3D.DefaultMatrixAutoUpdate = true;\n\nObject3D.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Object3D,\n\n\tisObject3D: true,\n\n\tonBeforeRender: function () {},\n\tonAfterRender: function () {},\n\n\tapplyMatrix: function ( matrix ) {\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tthis.matrix.premultiply( matrix );\n\n\t\tthis.matrix.decompose( this.position, this.quaternion, this.scale );\n\n\t},\n\n\tapplyQuaternion: function ( q ) {\n\n\t\tthis.quaternion.premultiply( q );\n\n\t\treturn this;\n\n\t},\n\n\tsetRotationFromAxisAngle: function ( axis, angle ) {\n\n\t\t// assumes axis is normalized\n\n\t\tthis.quaternion.setFromAxisAngle( axis, angle );\n\n\t},\n\n\tsetRotationFromEuler: function ( euler ) {\n\n\t\tthis.quaternion.setFromEuler( euler, true );\n\n\t},\n\n\tsetRotationFromMatrix: function ( m ) {\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tthis.quaternion.setFromRotationMatrix( m );\n\n\t},\n\n\tsetRotationFromQuaternion: function ( q ) {\n\n\t\t// assumes q is normalized\n\n\t\tthis.quaternion.copy( q );\n\n\t},\n\n\trotateOnAxis: function ( axis, angle ) {\n\n\t\t// rotate object on axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\t_q1.setFromAxisAngle( axis, angle );\n\n\t\tthis.quaternion.multiply( _q1 );\n\n\t\treturn this;\n\n\t},\n\n\trotateOnWorldAxis: function ( axis, angle ) {\n\n\t\t// rotate object on axis in world space\n\t\t// axis is assumed to be normalized\n\t\t// method assumes no rotated parent\n\n\t\t_q1.setFromAxisAngle( axis, angle );\n\n\t\tthis.quaternion.premultiply( _q1 );\n\n\t\treturn this;\n\n\t},\n\n\trotateX: function ( angle ) {\n\n\t\treturn this.rotateOnAxis( _xAxis, angle );\n\n\t},\n\n\trotateY: function ( angle ) {\n\n\t\treturn this.rotateOnAxis( _yAxis, angle );\n\n\t},\n\n\trotateZ: function ( angle ) {\n\n\t\treturn this.rotateOnAxis( _zAxis, angle );\n\n\t},\n\n\ttranslateOnAxis: function ( axis, distance ) {\n\n\t\t// translate object by distance along axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\t_v1.copy( axis ).applyQuaternion( this.quaternion );\n\n\t\tthis.position.add( _v1.multiplyScalar( distance ) );\n\n\t\treturn this;\n\n\t},\n\n\ttranslateX: function ( distance ) {\n\n\t\treturn this.translateOnAxis( _xAxis, distance );\n\n\t},\n\n\ttranslateY: function ( distance ) {\n\n\t\treturn this.translateOnAxis( _yAxis, distance );\n\n\t},\n\n\ttranslateZ: function ( distance ) {\n\n\t\treturn this.translateOnAxis( _zAxis, distance );\n\n\t},\n\n\tlocalToWorld: function ( vector ) {\n\n\t\treturn vector.applyMatrix4( this.matrixWorld );\n\n\t},\n\n\tworldToLocal: function ( vector ) {\n\n\t\treturn vector.applyMatrix4( _m1.getInverse( this.matrixWorld ) );\n\n\t},\n\n\tlookAt: function ( x, y, z ) {\n\n\t\t// This method does not support objects having non-uniformly-scaled parent(s)\n\n\t\tif ( x.isVector3 ) {\n\n\t\t\t_target.copy( x );\n\n\t\t} else {\n\n\t\t\t_target.set( x, y, z );\n\n\t\t}\n\n\t\tvar parent = this.parent;\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\t_position.setFromMatrixPosition( this.matrixWorld );\n\n\t\tif ( this.isCamera || this.isLight ) {\n\n\t\t\t_m1.lookAt( _position, _target, this.up );\n\n\t\t} else {\n\n\t\t\t_m1.lookAt( _target, _position, this.up );\n\n\t\t}\n\n\t\tthis.quaternion.setFromRotationMatrix( _m1 );\n\n\t\tif ( parent ) {\n\n\t\t\t_m1.extractRotation( parent.matrixWorld );\n\t\t\t_q1.setFromRotationMatrix( _m1 );\n\t\t\tthis.quaternion.premultiply( _q1.inverse() );\n\n\t\t}\n\n\t},\n\n\tadd: function ( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( var i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.add( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( object === this ) {\n\n\t\t\tconsole.error( \"THREE.Object3D.add: object can't be added as a child of itself.\", object );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( ( object && object.isObject3D ) ) {\n\n\t\t\tif ( object.parent !== null ) {\n\n\t\t\t\tobject.parent.remove( object );\n\n\t\t\t}\n\n\t\t\tobject.parent = this;\n\t\t\tthis.children.push( object );\n\n\t\t\tobject.dispatchEvent( _addedEvent );\n\n\t\t} else {\n\n\t\t\tconsole.error( \"THREE.Object3D.add: object not an instance of THREE.Object3D.\", object );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tremove: function ( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( var i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.remove( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar index = this.children.indexOf( object );\n\n\t\tif ( index !== - 1 ) {\n\n\t\t\tobject.parent = null;\n\t\t\tthis.children.splice( index, 1 );\n\n\t\t\tobject.dispatchEvent( _removedEvent );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tattach: function ( object ) {\n\n\t\t// adds object as a child of this, while maintaining the object's world transform\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\t_m1.getInverse( this.matrixWorld );\n\n\t\tif ( object.parent !== null ) {\n\n\t\t\tobject.parent.updateWorldMatrix( true, false );\n\n\t\t\t_m1.multiply( object.parent.matrixWorld );\n\n\t\t}\n\n\t\tobject.applyMatrix( _m1 );\n\n\t\tobject.updateWorldMatrix( false, false );\n\n\t\tthis.add( object );\n\n\t\treturn this;\n\n\t},\n\n\tgetObjectById: function ( id ) {\n\n\t\treturn this.getObjectByProperty( 'id', id );\n\n\t},\n\n\tgetObjectByName: function ( name ) {\n\n\t\treturn this.getObjectByProperty( 'name', name );\n\n\t},\n\n\tgetObjectByProperty: function ( name, value ) {\n\n\t\tif ( this[ name ] === value ) return this;\n\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\n\n\t\t\tvar child = this.children[ i ];\n\t\t\tvar object = child.getObjectByProperty( name, value );\n\n\t\t\tif ( object !== undefined ) {\n\n\t\t\t\treturn object;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn undefined;\n\n\t},\n\n\tgetWorldPosition: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldPosition() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\treturn target.setFromMatrixPosition( this.matrixWorld );\n\n\t},\n\n\tgetWorldQuaternion: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldQuaternion() target is now required' );\n\t\t\ttarget = new Quaternion();\n\n\t\t}\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\tthis.matrixWorld.decompose( _position, target, _scale );\n\n\t\treturn target;\n\n\t},\n\n\tgetWorldScale: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldScale() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\tthis.matrixWorld.decompose( _position, _quaternion, target );\n\n\t\treturn target;\n\n\t},\n\n\tgetWorldDirection: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldDirection() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\tvar e = this.matrixWorld.elements;\n\n\t\treturn target.set( e[ 8 ], e[ 9 ], e[ 10 ] ).normalize();\n\n\t},\n\n\traycast: function () {},\n\n\ttraverse: function ( callback ) {\n\n\t\tcallback( this );\n\n\t\tvar children = this.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].traverse( callback );\n\n\t\t}\n\n\t},\n\n\ttraverseVisible: function ( callback ) {\n\n\t\tif ( this.visible === false ) return;\n\n\t\tcallback( this );\n\n\t\tvar children = this.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].traverseVisible( callback );\n\n\t\t}\n\n\t},\n\n\ttraverseAncestors: function ( callback ) {\n\n\t\tvar parent = this.parent;\n\n\t\tif ( parent !== null ) {\n\n\t\t\tcallback( parent );\n\n\t\t\tparent.traverseAncestors( callback );\n\n\t\t}\n\n\t},\n\n\tupdateMatrix: function () {\n\n\t\tthis.matrix.compose( this.position, this.quaternion, this.scale );\n\n\t\tthis.matrixWorldNeedsUpdate = true;\n\n\t},\n\n\tupdateMatrixWorld: function ( force ) {\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tif ( this.matrixWorldNeedsUpdate || force ) {\n\n\t\t\tif ( this.parent === null ) {\n\n\t\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t\t} else {\n\n\t\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t\t}\n\n\t\t\tthis.matrixWorldNeedsUpdate = false;\n\n\t\t\tforce = true;\n\n\t\t}\n\n\t\t// update children\n\n\t\tvar children = this.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].updateMatrixWorld( force );\n\n\t\t}\n\n\t},\n\n\tupdateWorldMatrix: function ( updateParents, updateChildren ) {\n\n\t\tvar parent = this.parent;\n\n\t\tif ( updateParents === true && parent !== null ) {\n\n\t\t\tparent.updateWorldMatrix( true, false );\n\n\t\t}\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tif ( this.parent === null ) {\n\n\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t} else {\n\n\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t}\n\n\t\t// update children\n\n\t\tif ( updateChildren === true ) {\n\n\t\t\tvar children = this.children;\n\n\t\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\t\tchildren[ i ].updateWorldMatrix( false, true );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\t// meta is a string when called from JSON.stringify\n\t\tvar isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tvar output = {};\n\n\t\t// meta is a hash used to collect geometries, materials.\n\t\t// not providing it implies that this is the root object\n\t\t// being serialized.\n\t\tif ( isRootObject ) {\n\n\t\t\t// initialize meta obj\n\t\t\tmeta = {\n\t\t\t\tgeometries: {},\n\t\t\t\tmaterials: {},\n\t\t\t\ttextures: {},\n\t\t\t\timages: {},\n\t\t\t\tshapes: {}\n\t\t\t};\n\n\t\t\toutput.metadata = {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Object',\n\t\t\t\tgenerator: 'Object3D.toJSON'\n\t\t\t};\n\n\t\t}\n\n\t\t// standard Object3D serialization\n\n\t\tvar object = {};\n\n\t\tobject.uuid = this.uuid;\n\t\tobject.type = this.type;\n\n\t\tif ( this.name !== '' ) object.name = this.name;\n\t\tif ( this.castShadow === true ) object.castShadow = true;\n\t\tif ( this.receiveShadow === true ) object.receiveShadow = true;\n\t\tif ( this.visible === false ) object.visible = false;\n\t\tif ( this.frustumCulled === false ) object.frustumCulled = false;\n\t\tif ( this.renderOrder !== 0 ) object.renderOrder = this.renderOrder;\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) object.userData = this.userData;\n\n\t\tobject.layers = this.layers.mask;\n\t\tobject.matrix = this.matrix.toArray();\n\n\t\tif ( this.matrixAutoUpdate === false ) object.matrixAutoUpdate = false;\n\n\t\t// object specific properties\n\n\t\tif ( this.isInstancedMesh ) {\n\n\t\t\tobject.type = 'InstancedMesh';\n\t\t\tobject.count = this.count;\n\t\t\tobject.instanceMatrix = this.instanceMatrix.toJSON();\n\n\t\t}\n\n\t\t//\n\n\t\tfunction serialize( library, element ) {\n\n\t\t\tif ( library[ element.uuid ] === undefined ) {\n\n\t\t\t\tlibrary[ element.uuid ] = element.toJSON( meta );\n\n\t\t\t}\n\n\t\t\treturn element.uuid;\n\n\t\t}\n\n\t\tif ( this.isMesh || this.isLine || this.isPoints ) {\n\n\t\t\tobject.geometry = serialize( meta.geometries, this.geometry );\n\n\t\t\tvar parameters = this.geometry.parameters;\n\n\t\t\tif ( parameters !== undefined && parameters.shapes !== undefined ) {\n\n\t\t\t\tvar shapes = parameters.shapes;\n\n\t\t\t\tif ( Array.isArray( shapes ) ) {\n\n\t\t\t\t\tfor ( var i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\t\t\t\tvar shape = shapes[ i ];\n\n\t\t\t\t\t\tserialize( meta.shapes, shape );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tserialize( meta.shapes, shapes );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.material !== undefined ) {\n\n\t\t\tif ( Array.isArray( this.material ) ) {\n\n\t\t\t\tvar uuids = [];\n\n\t\t\t\tfor ( var i = 0, l = this.material.length; i < l; i ++ ) {\n\n\t\t\t\t\tuuids.push( serialize( meta.materials, this.material[ i ] ) );\n\n\t\t\t\t}\n\n\t\t\t\tobject.material = uuids;\n\n\t\t\t} else {\n\n\t\t\t\tobject.material = serialize( meta.materials, this.material );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tif ( this.children.length > 0 ) {\n\n\t\t\tobject.children = [];\n\n\t\t\tfor ( var i = 0; i < this.children.length; i ++ ) {\n\n\t\t\t\tobject.children.push( this.children[ i ].toJSON( meta ).object );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( isRootObject ) {\n\n\t\t\tvar geometries = extractFromCache( meta.geometries );\n\t\t\tvar materials = extractFromCache( meta.materials );\n\t\t\tvar textures = extractFromCache( meta.textures );\n\t\t\tvar images = extractFromCache( meta.images );\n\t\t\tvar shapes = extractFromCache( meta.shapes );\n\n\t\t\tif ( geometries.length > 0 ) output.geometries = geometries;\n\t\t\tif ( materials.length > 0 ) output.materials = materials;\n\t\t\tif ( textures.length > 0 ) output.textures = textures;\n\t\t\tif ( images.length > 0 ) output.images = images;\n\t\t\tif ( shapes.length > 0 ) output.shapes = shapes;\n\n\t\t}\n\n\t\toutput.object = object;\n\n\t\treturn output;\n\n\t\t// extract data from the cache hash\n\t\t// remove metadata on each item\n\t\t// and return as array\n\t\tfunction extractFromCache( cache ) {\n\n\t\t\tvar values = [];\n\t\t\tfor ( var key in cache ) {\n\n\t\t\t\tvar data = cache[ key ];\n\t\t\t\tdelete data.metadata;\n\t\t\t\tvalues.push( data );\n\n\t\t\t}\n\t\t\treturn values;\n\n\t\t}\n\n\t},\n\n\tclone: function ( recursive ) {\n\n\t\treturn new this.constructor().copy( this, recursive );\n\n\t},\n\n\tcopy: function ( source, recursive ) {\n\n\t\tif ( recursive === undefined ) recursive = true;\n\n\t\tthis.name = source.name;\n\n\t\tthis.up.copy( source.up );\n\n\t\tthis.position.copy( source.position );\n\t\tthis.quaternion.copy( source.quaternion );\n\t\tthis.scale.copy( source.scale );\n\n\t\tthis.matrix.copy( source.matrix );\n\t\tthis.matrixWorld.copy( source.matrixWorld );\n\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\t\tthis.matrixWorldNeedsUpdate = source.matrixWorldNeedsUpdate;\n\n\t\tthis.layers.mask = source.layers.mask;\n\t\tthis.visible = source.visible;\n\n\t\tthis.castShadow = source.castShadow;\n\t\tthis.receiveShadow = source.receiveShadow;\n\n\t\tthis.frustumCulled = source.frustumCulled;\n\t\tthis.renderOrder = source.renderOrder;\n\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\tif ( recursive === true ) {\n\n\t\t\tfor ( var i = 0; i < source.children.length; i ++ ) {\n\n\t\t\t\tvar child = source.children[ i ];\n\t\t\t\tthis.add( child.clone() );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Object3D };\n","import { InterpolateDiscrete } from '../../constants.js';\nimport { KeyframeTrack } from '../KeyframeTrack.js';\n\n/**\n *\n * A Track of Boolean keyframe values.\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction BooleanKeyframeTrack( name, times, values ) {\n\n\tKeyframeTrack.call( this, name, times, values );\n\n}\n\nBooleanKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: BooleanKeyframeTrack,\n\n\tValueTypeName: 'bool',\n\tValueBufferType: Array,\n\n\tDefaultInterpolation: InterpolateDiscrete,\n\n\tInterpolantFactoryMethodLinear: undefined,\n\tInterpolantFactoryMethodSmooth: undefined\n\n\t// Note: Actually this track could have a optimized / compressed\n\t// representation of a single value and a custom interpolant that\n\t// computes \"firstValue ^ isOdd( index )\".\n\n} );\n\nexport { BooleanKeyframeTrack };\n","import { KeyframeTrack } from '../KeyframeTrack.js';\n\n/**\n *\n * A Track of keyframe values that represent color.\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction ColorKeyframeTrack( name, times, values, interpolation ) {\n\n\tKeyframeTrack.call( this, name, times, values, interpolation );\n\n}\n\nColorKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: ColorKeyframeTrack,\n\n\tValueTypeName: 'color'\n\n\t// ValueBufferType is inherited\n\n\t// DefaultInterpolation is inherited\n\n\t// Note: Very basic implementation and nothing special yet.\n\t// However, this is the place for color space parameterization.\n\n} );\n\nexport { ColorKeyframeTrack };\n","import { InterpolateDiscrete } from '../../constants.js';\nimport { KeyframeTrack } from '../KeyframeTrack.js';\n\n/**\n *\n * A Track that interpolates Strings\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction StringKeyframeTrack( name, times, values, interpolation ) {\n\n\tKeyframeTrack.call( this, name, times, values, interpolation );\n\n}\n\nStringKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: StringKeyframeTrack,\n\n\tValueTypeName: 'string',\n\tValueBufferType: Array,\n\n\tDefaultInterpolation: InterpolateDiscrete,\n\n\tInterpolantFactoryMethodLinear: undefined,\n\n\tInterpolantFactoryMethodSmooth: undefined\n\n} );\n\nexport { StringKeyframeTrack };\n","import { AnimationUtils } from './AnimationUtils.js';\nimport { KeyframeTrack } from './KeyframeTrack.js';\nimport { BooleanKeyframeTrack } from './tracks/BooleanKeyframeTrack.js';\nimport { ColorKeyframeTrack } from './tracks/ColorKeyframeTrack.js';\nimport { NumberKeyframeTrack } from './tracks/NumberKeyframeTrack.js';\nimport { QuaternionKeyframeTrack } from './tracks/QuaternionKeyframeTrack.js';\nimport { StringKeyframeTrack } from './tracks/StringKeyframeTrack.js';\nimport { VectorKeyframeTrack } from './tracks/VectorKeyframeTrack.js';\nimport { _Math } from '../math/Math.js';\n\n/**\n *\n * Reusable set of Tracks that represent an animation.\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n */\n\nfunction AnimationClip( name, duration, tracks ) {\n\n\tthis.name = name;\n\tthis.tracks = tracks;\n\tthis.duration = ( duration !== undefined ) ? duration : - 1;\n\n\tthis.uuid = _Math.generateUUID();\n\n\t// this means it should figure out its duration by scanning the tracks\n\tif ( this.duration < 0 ) {\n\n\t\tthis.resetDuration();\n\n\t}\n\n}\n\nfunction getTrackTypeForValueTypeName( typeName ) {\n\n\tswitch ( typeName.toLowerCase() ) {\n\n\t\tcase 'scalar':\n\t\tcase 'double':\n\t\tcase 'float':\n\t\tcase 'number':\n\t\tcase 'integer':\n\n\t\t\treturn NumberKeyframeTrack;\n\n\t\tcase 'vector':\n\t\tcase 'vector2':\n\t\tcase 'vector3':\n\t\tcase 'vector4':\n\n\t\t\treturn VectorKeyframeTrack;\n\n\t\tcase 'color':\n\n\t\t\treturn ColorKeyframeTrack;\n\n\t\tcase 'quaternion':\n\n\t\t\treturn QuaternionKeyframeTrack;\n\n\t\tcase 'bool':\n\t\tcase 'boolean':\n\n\t\t\treturn BooleanKeyframeTrack;\n\n\t\tcase 'string':\n\n\t\t\treturn StringKeyframeTrack;\n\n\t}\n\n\tthrow new Error( 'THREE.KeyframeTrack: Unsupported typeName: ' + typeName );\n\n}\n\nfunction parseKeyframeTrack( json ) {\n\n\tif ( json.type === undefined ) {\n\n\t\tthrow new Error( 'THREE.KeyframeTrack: track type undefined, can not parse' );\n\n\t}\n\n\tvar trackType = getTrackTypeForValueTypeName( json.type );\n\n\tif ( json.times === undefined ) {\n\n\t\tvar times = [], values = [];\n\n\t\tAnimationUtils.flattenJSON( json.keys, times, values, 'value' );\n\n\t\tjson.times = times;\n\t\tjson.values = values;\n\n\t}\n\n\t// derived classes can define a static parse method\n\tif ( trackType.parse !== undefined ) {\n\n\t\treturn trackType.parse( json );\n\n\t} else {\n\n\t\t// by default, we assume a constructor compatible with the base\n\t\treturn new trackType( json.name, json.times, json.values, json.interpolation );\n\n\t}\n\n}\n\nObject.assign( AnimationClip, {\n\n\tparse: function ( json ) {\n\n\t\tvar tracks = [],\n\t\t\tjsonTracks = json.tracks,\n\t\t\tframeTime = 1.0 / ( json.fps || 1.0 );\n\n\t\tfor ( var i = 0, n = jsonTracks.length; i !== n; ++ i ) {\n\n\t\t\ttracks.push( parseKeyframeTrack( jsonTracks[ i ] ).scale( frameTime ) );\n\n\t\t}\n\n\t\treturn new AnimationClip( json.name, json.duration, tracks );\n\n\t},\n\n\ttoJSON: function ( clip ) {\n\n\t\tvar tracks = [],\n\t\t\tclipTracks = clip.tracks;\n\n\t\tvar json = {\n\n\t\t\t'name': clip.name,\n\t\t\t'duration': clip.duration,\n\t\t\t'tracks': tracks,\n\t\t\t'uuid': clip.uuid\n\n\t\t};\n\n\t\tfor ( var i = 0, n = clipTracks.length; i !== n; ++ i ) {\n\n\t\t\ttracks.push( KeyframeTrack.toJSON( clipTracks[ i ] ) );\n\n\t\t}\n\n\t\treturn json;\n\n\t},\n\n\tCreateFromMorphTargetSequence: function ( name, morphTargetSequence, fps, noLoop ) {\n\n\t\tvar numMorphTargets = morphTargetSequence.length;\n\t\tvar tracks = [];\n\n\t\tfor ( var i = 0; i < numMorphTargets; i ++ ) {\n\n\t\t\tvar times = [];\n\t\t\tvar values = [];\n\n\t\t\ttimes.push(\n\t\t\t\t( i + numMorphTargets - 1 ) % numMorphTargets,\n\t\t\t\ti,\n\t\t\t\t( i + 1 ) % numMorphTargets );\n\n\t\t\tvalues.push( 0, 1, 0 );\n\n\t\t\tvar order = AnimationUtils.getKeyframeOrder( times );\n\t\t\ttimes = AnimationUtils.sortedArray( times, 1, order );\n\t\t\tvalues = AnimationUtils.sortedArray( values, 1, order );\n\n\t\t\t// if there is a key at the first frame, duplicate it as the\n\t\t\t// last frame as well for perfect loop.\n\t\t\tif ( ! noLoop && times[ 0 ] === 0 ) {\n\n\t\t\t\ttimes.push( numMorphTargets );\n\t\t\t\tvalues.push( values[ 0 ] );\n\n\t\t\t}\n\n\t\t\ttracks.push(\n\t\t\t\tnew NumberKeyframeTrack(\n\t\t\t\t\t'.morphTargetInfluences[' + morphTargetSequence[ i ].name + ']',\n\t\t\t\t\ttimes, values\n\t\t\t\t).scale( 1.0 / fps ) );\n\n\t\t}\n\n\t\treturn new AnimationClip( name, - 1, tracks );\n\n\t},\n\n\tfindByName: function ( objectOrClipArray, name ) {\n\n\t\tvar clipArray = objectOrClipArray;\n\n\t\tif ( ! Array.isArray( objectOrClipArray ) ) {\n\n\t\t\tvar o = objectOrClipArray;\n\t\t\tclipArray = o.geometry && o.geometry.animations || o.animations;\n\n\t\t}\n\n\t\tfor ( var i = 0; i < clipArray.length; i ++ ) {\n\n\t\t\tif ( clipArray[ i ].name === name ) {\n\n\t\t\t\treturn clipArray[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t},\n\n\tCreateClipsFromMorphTargetSequences: function ( morphTargets, fps, noLoop ) {\n\n\t\tvar animationToMorphTargets = {};\n\n\t\t// tested with https://regex101.com/ on trick sequences\n\t\t// such flamingo_flyA_003, flamingo_run1_003, crdeath0059\n\t\tvar pattern = /^([\\w-]*?)([\\d]+)$/;\n\n\t\t// sort morph target names into animation groups based\n\t\t// patterns like Walk_001, Walk_002, Run_001, Run_002\n\t\tfor ( var i = 0, il = morphTargets.length; i < il; i ++ ) {\n\n\t\t\tvar morphTarget = morphTargets[ i ];\n\t\t\tvar parts = morphTarget.name.match( pattern );\n\n\t\t\tif ( parts && parts.length > 1 ) {\n\n\t\t\t\tvar name = parts[ 1 ];\n\n\t\t\t\tvar animationMorphTargets = animationToMorphTargets[ name ];\n\t\t\t\tif ( ! animationMorphTargets ) {\n\n\t\t\t\t\tanimationToMorphTargets[ name ] = animationMorphTargets = [];\n\n\t\t\t\t}\n\n\t\t\t\tanimationMorphTargets.push( morphTarget );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar clips = [];\n\n\t\tfor ( var name in animationToMorphTargets ) {\n\n\t\t\tclips.push( AnimationClip.CreateFromMorphTargetSequence( name, animationToMorphTargets[ name ], fps, noLoop ) );\n\n\t\t}\n\n\t\treturn clips;\n\n\t},\n\n\t// parse the animation.hierarchy format\n\tparseAnimation: function ( animation, bones ) {\n\n\t\tif ( ! animation ) {\n\n\t\t\tconsole.error( 'THREE.AnimationClip: No animation in JSONLoader data.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tvar addNonemptyTrack = function ( trackType, trackName, animationKeys, propertyName, destTracks ) {\n\n\t\t\t// only return track if there are actually keys.\n\t\t\tif ( animationKeys.length !== 0 ) {\n\n\t\t\t\tvar times = [];\n\t\t\t\tvar values = [];\n\n\t\t\t\tAnimationUtils.flattenJSON( animationKeys, times, values, propertyName );\n\n\t\t\t\t// empty keys are filtered out, so check again\n\t\t\t\tif ( times.length !== 0 ) {\n\n\t\t\t\t\tdestTracks.push( new trackType( trackName, times, values ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tvar tracks = [];\n\n\t\tvar clipName = animation.name || 'default';\n\t\t// automatic length determination in AnimationClip.\n\t\tvar duration = animation.length || - 1;\n\t\tvar fps = animation.fps || 30;\n\n\t\tvar hierarchyTracks = animation.hierarchy || [];\n\n\t\tfor ( var h = 0; h < hierarchyTracks.length; h ++ ) {\n\n\t\t\tvar animationKeys = hierarchyTracks[ h ].keys;\n\n\t\t\t// skip empty tracks\n\t\t\tif ( ! animationKeys || animationKeys.length === 0 ) continue;\n\n\t\t\t// process morph targets\n\t\t\tif ( animationKeys[ 0 ].morphTargets ) {\n\n\t\t\t\t// figure out all morph targets used in this track\n\t\t\t\tvar morphTargetNames = {};\n\n\t\t\t\tfor ( var k = 0; k < animationKeys.length; k ++ ) {\n\n\t\t\t\t\tif ( animationKeys[ k ].morphTargets ) {\n\n\t\t\t\t\t\tfor ( var m = 0; m < animationKeys[ k ].morphTargets.length; m ++ ) {\n\n\t\t\t\t\t\t\tmorphTargetNames[ animationKeys[ k ].morphTargets[ m ] ] = - 1;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// create a track for each morph target with all zero\n\t\t\t\t// morphTargetInfluences except for the keys in which\n\t\t\t\t// the morphTarget is named.\n\t\t\t\tfor ( var morphTargetName in morphTargetNames ) {\n\n\t\t\t\t\tvar times = [];\n\t\t\t\t\tvar values = [];\n\n\t\t\t\t\tfor ( var m = 0; m !== animationKeys[ k ].morphTargets.length; ++ m ) {\n\n\t\t\t\t\t\tvar animationKey = animationKeys[ k ];\n\n\t\t\t\t\t\ttimes.push( animationKey.time );\n\t\t\t\t\t\tvalues.push( ( animationKey.morphTarget === morphTargetName ) ? 1 : 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttracks.push( new NumberKeyframeTrack( '.morphTargetInfluence[' + morphTargetName + ']', times, values ) );\n\n\t\t\t\t}\n\n\t\t\t\tduration = morphTargetNames.length * ( fps || 1.0 );\n\n\t\t\t} else {\n\n\t\t\t\t// ...assume skeletal animation\n\n\t\t\t\tvar boneName = '.bones[' + bones[ h ].name + ']';\n\n\t\t\t\taddNonemptyTrack(\n\t\t\t\t\tVectorKeyframeTrack, boneName + '.position',\n\t\t\t\t\tanimationKeys, 'pos', tracks );\n\n\t\t\t\taddNonemptyTrack(\n\t\t\t\t\tQuaternionKeyframeTrack, boneName + '.quaternion',\n\t\t\t\t\tanimationKeys, 'rot', tracks );\n\n\t\t\t\taddNonemptyTrack(\n\t\t\t\t\tVectorKeyframeTrack, boneName + '.scale',\n\t\t\t\t\tanimationKeys, 'scl', tracks );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( tracks.length === 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tvar clip = new AnimationClip( clipName, duration, tracks );\n\n\t\treturn clip;\n\n\t}\n\n} );\n\nObject.assign( AnimationClip.prototype, {\n\n\tresetDuration: function () {\n\n\t\tvar tracks = this.tracks, duration = 0;\n\n\t\tfor ( var i = 0, n = tracks.length; i !== n; ++ i ) {\n\n\t\t\tvar track = this.tracks[ i ];\n\n\t\t\tduration = Math.max( duration, track.times[ track.times.length - 1 ] );\n\n\t\t}\n\n\t\tthis.duration = duration;\n\n\t\treturn this;\n\n\t},\n\n\ttrim: function () {\n\n\t\tfor ( var i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\tthis.tracks[ i ].trim( 0, this.duration );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tvalidate: function () {\n\n\t\tvar valid = true;\n\n\t\tfor ( var i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\tvalid = valid && this.tracks[ i ].validate();\n\n\t\t}\n\n\t\treturn valid;\n\n\t},\n\n\toptimize: function () {\n\n\t\tfor ( var i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\tthis.tracks[ i ].optimize();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\tvar tracks = [];\n\n\t\tfor ( var i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\ttracks.push( this.tracks[ i ].clone() );\n\n\t\t}\n\n\t\treturn new AnimationClip( this.name, this.duration, tracks );\n\n\t}\n\n} );\n\n\nexport { AnimationClip };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { RGBFormat, LinearFilter } from '../constants.js';\nimport { Texture } from './Texture.js';\n\nfunction VideoTexture( video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\n\n\tTexture.call( this, video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\tthis.format = format !== undefined ? format : RGBFormat;\n\n\tthis.minFilter = minFilter !== undefined ? minFilter : LinearFilter;\n\tthis.magFilter = magFilter !== undefined ? magFilter : LinearFilter;\n\n\tthis.generateMipmaps = false;\n\n}\n\nVideoTexture.prototype = Object.assign( Object.create( Texture.prototype ), {\n\n\tconstructor: VideoTexture,\n\n\tisVideoTexture: true,\n\n\tupdate: function () {\n\n\t\tvar video = this.image;\n\n\t\tif ( video.readyState >= video.HAVE_CURRENT_DATA ) {\n\n\t\t\tthis.needsUpdate = true;\n\n\t\t}\n\n\t}\n\n} );\n\n\nexport { VideoTexture };\n","import { EventDispatcher } from './EventDispatcher.js';\nimport { Face3 } from './Face3.js';\nimport { Matrix3 } from '../math/Matrix3.js';\nimport { Sphere } from '../math/Sphere.js';\nimport { Box3 } from '../math/Box3.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Color } from '../math/Color.js';\nimport { Object3D } from './Object3D.js';\nimport { _Math } from '../math/Math.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author kile / http://kile.stravaganza.org/\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author bhouston / http://clara.io\n */\n\nvar _geometryId = 0; // Geometry uses even numbers as Id\nvar _m1 = new Matrix4();\nvar _obj = new Object3D();\nvar _offset = new Vector3();\n\nfunction Geometry() {\n\n\tObject.defineProperty( this, 'id', { value: _geometryId += 2 } );\n\n\tthis.uuid = _Math.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Geometry';\n\n\tthis.vertices = [];\n\tthis.colors = [];\n\tthis.faces = [];\n\tthis.faceVertexUvs = [[]];\n\n\tthis.morphTargets = [];\n\tthis.morphNormals = [];\n\n\tthis.skinWeights = [];\n\tthis.skinIndices = [];\n\n\tthis.lineDistances = [];\n\n\tthis.boundingBox = null;\n\tthis.boundingSphere = null;\n\n\t// update flags\n\n\tthis.elementsNeedUpdate = false;\n\tthis.verticesNeedUpdate = false;\n\tthis.uvsNeedUpdate = false;\n\tthis.normalsNeedUpdate = false;\n\tthis.colorsNeedUpdate = false;\n\tthis.lineDistancesNeedUpdate = false;\n\tthis.groupsNeedUpdate = false;\n\n}\n\nGeometry.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Geometry,\n\n\tisGeometry: true,\n\n\tapplyMatrix: function ( matrix ) {\n\n\t\tvar normalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\tfor ( var i = 0, il = this.vertices.length; i < il; i ++ ) {\n\n\t\t\tvar vertex = this.vertices[ i ];\n\t\t\tvertex.applyMatrix4( matrix );\n\n\t\t}\n\n\t\tfor ( var i = 0, il = this.faces.length; i < il; i ++ ) {\n\n\t\t\tvar face = this.faces[ i ];\n\t\t\tface.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\tfor ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\tface.vertexNormals[ j ].applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.boundingBox !== null ) {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t}\n\n\t\tif ( this.boundingSphere !== null ) {\n\n\t\t\tthis.computeBoundingSphere();\n\n\t\t}\n\n\t\tthis.verticesNeedUpdate = true;\n\t\tthis.normalsNeedUpdate = true;\n\n\t\treturn this;\n\n\t},\n\n\trotateX: function ( angle ) {\n\n\t\t// rotate geometry around world x-axis\n\n\t\t_m1.makeRotationX( angle );\n\n\t\tthis.applyMatrix( _m1 );\n\n\t\treturn this;\n\n\t},\n\n\trotateY: function ( angle ) {\n\n\t\t// rotate geometry around world y-axis\n\n\t\t_m1.makeRotationY( angle );\n\n\t\tthis.applyMatrix( _m1 );\n\n\t\treturn this;\n\n\t},\n\n\trotateZ: function ( angle ) {\n\n\t\t// rotate geometry around world z-axis\n\n\t\t_m1.makeRotationZ( angle );\n\n\t\tthis.applyMatrix( _m1 );\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( x, y, z ) {\n\n\t\t// translate geometry\n\n\t\t_m1.makeTranslation( x, y, z );\n\n\t\tthis.applyMatrix( _m1 );\n\n\t\treturn this;\n\n\t},\n\n\tscale: function ( x, y, z ) {\n\n\t\t// scale geometry\n\n\t\t_m1.makeScale( x, y, z );\n\n\t\tthis.applyMatrix( _m1 );\n\n\t\treturn this;\n\n\t},\n\n\tlookAt: function ( vector ) {\n\n\t\t_obj.lookAt( vector );\n\n\t\t_obj.updateMatrix();\n\n\t\tthis.applyMatrix( _obj.matrix );\n\n\t\treturn this;\n\n\t},\n\n\tfromBufferGeometry: function ( geometry ) {\n\n\t\tvar scope = this;\n\n\t\tvar indices = geometry.index !== null ? geometry.index.array : undefined;\n\t\tvar attributes = geometry.attributes;\n\n\t\tif ( attributes.position === undefined ) {\n\n\t\t\tconsole.error( 'THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion.' );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar positions = attributes.position.array;\n\t\tvar normals = attributes.normal !== undefined ? attributes.normal.array : undefined;\n\t\tvar colors = attributes.color !== undefined ? attributes.color.array : undefined;\n\t\tvar uvs = attributes.uv !== undefined ? attributes.uv.array : undefined;\n\t\tvar uvs2 = attributes.uv2 !== undefined ? attributes.uv2.array : undefined;\n\n\t\tif ( uvs2 !== undefined ) this.faceVertexUvs[ 1 ] = [];\n\n\t\tfor ( var i = 0; i < positions.length; i += 3 ) {\n\n\t\t\tscope.vertices.push( new Vector3().fromArray( positions, i ) );\n\n\t\t\tif ( colors !== undefined ) {\n\n\t\t\t\tscope.colors.push( new Color().fromArray( colors, i ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction addFace( a, b, c, materialIndex ) {\n\n\t\t\tvar vertexColors = ( colors === undefined ) ? [] : [\n\t\t\t\tscope.colors[ a ].clone(),\n\t\t\t\tscope.colors[ b ].clone(),\n\t\t\t\tscope.colors[ c ].clone() ];\n\n\t\t\tvar vertexNormals = ( normals === undefined ) ? [] : [\n\t\t\t\tnew Vector3().fromArray( normals, a * 3 ),\n\t\t\t\tnew Vector3().fromArray( normals, b * 3 ),\n\t\t\t\tnew Vector3().fromArray( normals, c * 3 )\n\t\t\t];\n\n\t\t\tvar face = new Face3( a, b, c, vertexNormals, vertexColors, materialIndex );\n\n\t\t\tscope.faces.push( face );\n\n\t\t\tif ( uvs !== undefined ) {\n\n\t\t\t\tscope.faceVertexUvs[ 0 ].push( [\n\t\t\t\t\tnew Vector2().fromArray( uvs, a * 2 ),\n\t\t\t\t\tnew Vector2().fromArray( uvs, b * 2 ),\n\t\t\t\t\tnew Vector2().fromArray( uvs, c * 2 )\n\t\t\t\t] );\n\n\t\t\t}\n\n\t\t\tif ( uvs2 !== undefined ) {\n\n\t\t\t\tscope.faceVertexUvs[ 1 ].push( [\n\t\t\t\t\tnew Vector2().fromArray( uvs2, a * 2 ),\n\t\t\t\t\tnew Vector2().fromArray( uvs2, b * 2 ),\n\t\t\t\t\tnew Vector2().fromArray( uvs2, c * 2 )\n\t\t\t\t] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar groups = geometry.groups;\n\n\t\tif ( groups.length > 0 ) {\n\n\t\t\tfor ( var i = 0; i < groups.length; i ++ ) {\n\n\t\t\t\tvar group = groups[ i ];\n\n\t\t\t\tvar start = group.start;\n\t\t\t\tvar count = group.count;\n\n\t\t\t\tfor ( var j = start, jl = start + count; j < jl; j += 3 ) {\n\n\t\t\t\t\tif ( indices !== undefined ) {\n\n\t\t\t\t\t\taddFace( indices[ j ], indices[ j + 1 ], indices[ j + 2 ], group.materialIndex );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\taddFace( j, j + 1, j + 2, group.materialIndex );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( indices !== undefined ) {\n\n\t\t\t\tfor ( var i = 0; i < indices.length; i += 3 ) {\n\n\t\t\t\t\taddFace( indices[ i ], indices[ i + 1 ], indices[ i + 2 ] );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tfor ( var i = 0; i < positions.length / 3; i += 3 ) {\n\n\t\t\t\t\taddFace( i, i + 1, i + 2 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.computeFaceNormals();\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t}\n\n\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcenter: function () {\n\n\t\tthis.computeBoundingBox();\n\n\t\tthis.boundingBox.getCenter( _offset ).negate();\n\n\t\tthis.translate( _offset.x, _offset.y, _offset.z );\n\n\t\treturn this;\n\n\t},\n\n\tnormalize: function () {\n\n\t\tthis.computeBoundingSphere();\n\n\t\tvar center = this.boundingSphere.center;\n\t\tvar radius = this.boundingSphere.radius;\n\n\t\tvar s = radius === 0 ? 1 : 1.0 / radius;\n\n\t\tvar matrix = new Matrix4();\n\t\tmatrix.set(\n\t\t\ts, 0, 0, - s * center.x,\n\t\t\t0, s, 0, - s * center.y,\n\t\t\t0, 0, s, - s * center.z,\n\t\t\t0, 0, 0, 1\n\t\t);\n\n\t\tthis.applyMatrix( matrix );\n\n\t\treturn this;\n\n\t},\n\n\tcomputeFaceNormals: function () {\n\n\t\tvar cb = new Vector3(), ab = new Vector3();\n\n\t\tfor ( var f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tvar face = this.faces[ f ];\n\n\t\t\tvar vA = this.vertices[ face.a ];\n\t\t\tvar vB = this.vertices[ face.b ];\n\t\t\tvar vC = this.vertices[ face.c ];\n\n\t\t\tcb.subVectors( vC, vB );\n\t\t\tab.subVectors( vA, vB );\n\t\t\tcb.cross( ab );\n\n\t\t\tcb.normalize();\n\n\t\t\tface.normal.copy( cb );\n\n\t\t}\n\n\t},\n\n\tcomputeVertexNormals: function ( areaWeighted ) {\n\n\t\tif ( areaWeighted === undefined ) areaWeighted = true;\n\n\t\tvar v, vl, f, fl, face, vertices;\n\n\t\tvertices = new Array( this.vertices.length );\n\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\n\n\t\t\tvertices[ v ] = new Vector3();\n\n\t\t}\n\n\t\tif ( areaWeighted ) {\n\n\t\t\t// vertex normals weighted by triangle areas\n\t\t\t// http://www.iquilezles.org/www/articles/normals/normals.htm\n\n\t\t\tvar vA, vB, vC;\n\t\t\tvar cb = new Vector3(), ab = new Vector3();\n\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tface = this.faces[ f ];\n\n\t\t\t\tvA = this.vertices[ face.a ];\n\t\t\t\tvB = this.vertices[ face.b ];\n\t\t\t\tvC = this.vertices[ face.c ];\n\n\t\t\t\tcb.subVectors( vC, vB );\n\t\t\t\tab.subVectors( vA, vB );\n\t\t\t\tcb.cross( ab );\n\n\t\t\t\tvertices[ face.a ].add( cb );\n\t\t\t\tvertices[ face.b ].add( cb );\n\t\t\t\tvertices[ face.c ].add( cb );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis.computeFaceNormals();\n\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tface = this.faces[ f ];\n\n\t\t\t\tvertices[ face.a ].add( face.normal );\n\t\t\t\tvertices[ face.b ].add( face.normal );\n\t\t\t\tvertices[ face.c ].add( face.normal );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\n\n\t\t\tvertices[ v ].normalize();\n\n\t\t}\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tvar vertexNormals = face.vertexNormals;\n\n\t\t\tif ( vertexNormals.length === 3 ) {\n\n\t\t\t\tvertexNormals[ 0 ].copy( vertices[ face.a ] );\n\t\t\t\tvertexNormals[ 1 ].copy( vertices[ face.b ] );\n\t\t\t\tvertexNormals[ 2 ].copy( vertices[ face.c ] );\n\n\t\t\t} else {\n\n\t\t\t\tvertexNormals[ 0 ] = vertices[ face.a ].clone();\n\t\t\t\tvertexNormals[ 1 ] = vertices[ face.b ].clone();\n\t\t\t\tvertexNormals[ 2 ] = vertices[ face.c ].clone();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.faces.length > 0 ) {\n\n\t\t\tthis.normalsNeedUpdate = true;\n\n\t\t}\n\n\t},\n\n\tcomputeFlatVertexNormals: function () {\n\n\t\tvar f, fl, face;\n\n\t\tthis.computeFaceNormals();\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tvar vertexNormals = face.vertexNormals;\n\n\t\t\tif ( vertexNormals.length === 3 ) {\n\n\t\t\t\tvertexNormals[ 0 ].copy( face.normal );\n\t\t\t\tvertexNormals[ 1 ].copy( face.normal );\n\t\t\t\tvertexNormals[ 2 ].copy( face.normal );\n\n\t\t\t} else {\n\n\t\t\t\tvertexNormals[ 0 ] = face.normal.clone();\n\t\t\t\tvertexNormals[ 1 ] = face.normal.clone();\n\t\t\t\tvertexNormals[ 2 ] = face.normal.clone();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.faces.length > 0 ) {\n\n\t\t\tthis.normalsNeedUpdate = true;\n\n\t\t}\n\n\t},\n\n\tcomputeMorphNormals: function () {\n\n\t\tvar i, il, f, fl, face;\n\n\t\t// save original normals\n\t\t// - create temp variables on first access\n\t\t//   otherwise just copy (for faster repeated calls)\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tif ( ! face.__originalFaceNormal ) {\n\n\t\t\t\tface.__originalFaceNormal = face.normal.clone();\n\n\t\t\t} else {\n\n\t\t\t\tface.__originalFaceNormal.copy( face.normal );\n\n\t\t\t}\n\n\t\t\tif ( ! face.__originalVertexNormals ) face.__originalVertexNormals = [];\n\n\t\t\tfor ( i = 0, il = face.vertexNormals.length; i < il; i ++ ) {\n\n\t\t\t\tif ( ! face.__originalVertexNormals[ i ] ) {\n\n\t\t\t\t\tface.__originalVertexNormals[ i ] = face.vertexNormals[ i ].clone();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tface.__originalVertexNormals[ i ].copy( face.vertexNormals[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// use temp geometry to compute face and vertex normals for each morph\n\n\t\tvar tmpGeo = new Geometry();\n\t\ttmpGeo.faces = this.faces;\n\n\t\tfor ( i = 0, il = this.morphTargets.length; i < il; i ++ ) {\n\n\t\t\t// create on first access\n\n\t\t\tif ( ! this.morphNormals[ i ] ) {\n\n\t\t\t\tthis.morphNormals[ i ] = {};\n\t\t\t\tthis.morphNormals[ i ].faceNormals = [];\n\t\t\t\tthis.morphNormals[ i ].vertexNormals = [];\n\n\t\t\t\tvar dstNormalsFace = this.morphNormals[ i ].faceNormals;\n\t\t\t\tvar dstNormalsVertex = this.morphNormals[ i ].vertexNormals;\n\n\t\t\t\tvar faceNormal, vertexNormals;\n\n\t\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\t\tfaceNormal = new Vector3();\n\t\t\t\t\tvertexNormals = { a: new Vector3(), b: new Vector3(), c: new Vector3() };\n\n\t\t\t\t\tdstNormalsFace.push( faceNormal );\n\t\t\t\t\tdstNormalsVertex.push( vertexNormals );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar morphNormals = this.morphNormals[ i ];\n\n\t\t\t// set vertices to morph target\n\n\t\t\ttmpGeo.vertices = this.morphTargets[ i ].vertices;\n\n\t\t\t// compute morph normals\n\n\t\t\ttmpGeo.computeFaceNormals();\n\t\t\ttmpGeo.computeVertexNormals();\n\n\t\t\t// store morph normals\n\n\t\t\tvar faceNormal, vertexNormals;\n\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tface = this.faces[ f ];\n\n\t\t\t\tfaceNormal = morphNormals.faceNormals[ f ];\n\t\t\t\tvertexNormals = morphNormals.vertexNormals[ f ];\n\n\t\t\t\tfaceNormal.copy( face.normal );\n\n\t\t\t\tvertexNormals.a.copy( face.vertexNormals[ 0 ] );\n\t\t\t\tvertexNormals.b.copy( face.vertexNormals[ 1 ] );\n\t\t\t\tvertexNormals.c.copy( face.vertexNormals[ 2 ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// restore original normals\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tface.normal = face.__originalFaceNormal;\n\t\t\tface.vertexNormals = face.__originalVertexNormals;\n\n\t\t}\n\n\t},\n\n\tcomputeBoundingBox: function () {\n\n\t\tif ( this.boundingBox === null ) {\n\n\t\t\tthis.boundingBox = new Box3();\n\n\t\t}\n\n\t\tthis.boundingBox.setFromPoints( this.vertices );\n\n\t},\n\n\tcomputeBoundingSphere: function () {\n\n\t\tif ( this.boundingSphere === null ) {\n\n\t\t\tthis.boundingSphere = new Sphere();\n\n\t\t}\n\n\t\tthis.boundingSphere.setFromPoints( this.vertices );\n\n\t},\n\n\tmerge: function ( geometry, matrix, materialIndexOffset ) {\n\n\t\tif ( ! ( geometry && geometry.isGeometry ) ) {\n\n\t\t\tconsole.error( 'THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.', geometry );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar normalMatrix,\n\t\t\tvertexOffset = this.vertices.length,\n\t\t\tvertices1 = this.vertices,\n\t\t\tvertices2 = geometry.vertices,\n\t\t\tfaces1 = this.faces,\n\t\t\tfaces2 = geometry.faces,\n\t\t\tcolors1 = this.colors,\n\t\t\tcolors2 = geometry.colors;\n\n\t\tif ( materialIndexOffset === undefined ) materialIndexOffset = 0;\n\n\t\tif ( matrix !== undefined ) {\n\n\t\t\tnormalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\t}\n\n\t\t// vertices\n\n\t\tfor ( var i = 0, il = vertices2.length; i < il; i ++ ) {\n\n\t\t\tvar vertex = vertices2[ i ];\n\n\t\t\tvar vertexCopy = vertex.clone();\n\n\t\t\tif ( matrix !== undefined ) vertexCopy.applyMatrix4( matrix );\n\n\t\t\tvertices1.push( vertexCopy );\n\n\t\t}\n\n\t\t// colors\n\n\t\tfor ( var i = 0, il = colors2.length; i < il; i ++ ) {\n\n\t\t\tcolors1.push( colors2[ i ].clone() );\n\n\t\t}\n\n\t\t// faces\n\n\t\tfor ( i = 0, il = faces2.length; i < il; i ++ ) {\n\n\t\t\tvar face = faces2[ i ], faceCopy, normal, color,\n\t\t\t\tfaceVertexNormals = face.vertexNormals,\n\t\t\t\tfaceVertexColors = face.vertexColors;\n\n\t\t\tfaceCopy = new Face3( face.a + vertexOffset, face.b + vertexOffset, face.c + vertexOffset );\n\t\t\tfaceCopy.normal.copy( face.normal );\n\n\t\t\tif ( normalMatrix !== undefined ) {\n\n\t\t\t\tfaceCopy.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t}\n\n\t\t\tfor ( var j = 0, jl = faceVertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\tnormal = faceVertexNormals[ j ].clone();\n\n\t\t\t\tif ( normalMatrix !== undefined ) {\n\n\t\t\t\t\tnormal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t\t}\n\n\t\t\t\tfaceCopy.vertexNormals.push( normal );\n\n\t\t\t}\n\n\t\t\tfaceCopy.color.copy( face.color );\n\n\t\t\tfor ( var j = 0, jl = faceVertexColors.length; j < jl; j ++ ) {\n\n\t\t\t\tcolor = faceVertexColors[ j ];\n\t\t\t\tfaceCopy.vertexColors.push( color.clone() );\n\n\t\t\t}\n\n\t\t\tfaceCopy.materialIndex = face.materialIndex + materialIndexOffset;\n\n\t\t\tfaces1.push( faceCopy );\n\n\t\t}\n\n\t\t// uvs\n\n\t\tfor ( var i = 0, il = geometry.faceVertexUvs.length; i < il; i ++ ) {\n\n\t\t\tvar faceVertexUvs2 = geometry.faceVertexUvs[ i ];\n\n\t\t\tif ( this.faceVertexUvs[ i ] === undefined ) this.faceVertexUvs[ i ] = [];\n\n\t\t\tfor ( var j = 0, jl = faceVertexUvs2.length; j < jl; j ++ ) {\n\n\t\t\t\tvar uvs2 = faceVertexUvs2[ j ], uvsCopy = [];\n\n\t\t\t\tfor ( var k = 0, kl = uvs2.length; k < kl; k ++ ) {\n\n\t\t\t\t\tuvsCopy.push( uvs2[ k ].clone() );\n\n\t\t\t\t}\n\n\t\t\t\tthis.faceVertexUvs[ i ].push( uvsCopy );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tmergeMesh: function ( mesh ) {\n\n\t\tif ( ! ( mesh && mesh.isMesh ) ) {\n\n\t\t\tconsole.error( 'THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.', mesh );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( mesh.matrixAutoUpdate ) mesh.updateMatrix();\n\n\t\tthis.merge( mesh.geometry, mesh.matrix );\n\n\t},\n\n\t/*\n\t * Checks for duplicate vertices with hashmap.\n\t * Duplicated vertices are removed\n\t * and faces' vertices are updated.\n\t */\n\n\tmergeVertices: function () {\n\n\t\tvar verticesMap = {}; // Hashmap for looking up vertices by position coordinates (and making sure they are unique)\n\t\tvar unique = [], changes = [];\n\n\t\tvar v, key;\n\t\tvar precisionPoints = 4; // number of decimal points, e.g. 4 for epsilon of 0.0001\n\t\tvar precision = Math.pow( 10, precisionPoints );\n\t\tvar i, il, face;\n\t\tvar indices, j, jl;\n\n\t\tfor ( i = 0, il = this.vertices.length; i < il; i ++ ) {\n\n\t\t\tv = this.vertices[ i ];\n\t\t\tkey = Math.round( v.x * precision ) + '_' + Math.round( v.y * precision ) + '_' + Math.round( v.z * precision );\n\n\t\t\tif ( verticesMap[ key ] === undefined ) {\n\n\t\t\t\tverticesMap[ key ] = i;\n\t\t\t\tunique.push( this.vertices[ i ] );\n\t\t\t\tchanges[ i ] = unique.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\t//console.log('Duplicate vertex found. ', i, ' could be using ', verticesMap[key]);\n\t\t\t\tchanges[ i ] = changes[ verticesMap[ key ] ];\n\n\t\t\t}\n\n\t\t}\n\n\n\t\t// if faces are completely degenerate after merging vertices, we\n\t\t// have to remove them from the geometry.\n\t\tvar faceIndicesToRemove = [];\n\n\t\tfor ( i = 0, il = this.faces.length; i < il; i ++ ) {\n\n\t\t\tface = this.faces[ i ];\n\n\t\t\tface.a = changes[ face.a ];\n\t\t\tface.b = changes[ face.b ];\n\t\t\tface.c = changes[ face.c ];\n\n\t\t\tindices = [ face.a, face.b, face.c ];\n\n\t\t\t// if any duplicate vertices are found in a Face3\n\t\t\t// we have to remove the face as nothing can be saved\n\t\t\tfor ( var n = 0; n < 3; n ++ ) {\n\n\t\t\t\tif ( indices[ n ] === indices[ ( n + 1 ) % 3 ] ) {\n\n\t\t\t\t\tfaceIndicesToRemove.push( i );\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( i = faceIndicesToRemove.length - 1; i >= 0; i -- ) {\n\n\t\t\tvar idx = faceIndicesToRemove[ i ];\n\n\t\t\tthis.faces.splice( idx, 1 );\n\n\t\t\tfor ( j = 0, jl = this.faceVertexUvs.length; j < jl; j ++ ) {\n\n\t\t\t\tthis.faceVertexUvs[ j ].splice( idx, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Use unique set of vertices\n\n\t\tvar diff = this.vertices.length - unique.length;\n\t\tthis.vertices = unique;\n\t\treturn diff;\n\n\t},\n\n\tsetFromPoints: function ( points ) {\n\n\t\tthis.vertices = [];\n\n\t\tfor ( var i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\tvar point = points[ i ];\n\t\t\tthis.vertices.push( new Vector3( point.x, point.y, point.z || 0 ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsortFacesByMaterialIndex: function () {\n\n\t\tvar faces = this.faces;\n\t\tvar length = faces.length;\n\n\t\t// tag faces\n\n\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\tfaces[ i ]._id = i;\n\n\t\t}\n\n\t\t// sort faces\n\n\t\tfunction materialIndexSort( a, b ) {\n\n\t\t\treturn a.materialIndex - b.materialIndex;\n\n\t\t}\n\n\t\tfaces.sort( materialIndexSort );\n\n\t\t// sort uvs\n\n\t\tvar uvs1 = this.faceVertexUvs[ 0 ];\n\t\tvar uvs2 = this.faceVertexUvs[ 1 ];\n\n\t\tvar newUvs1, newUvs2;\n\n\t\tif ( uvs1 && uvs1.length === length ) newUvs1 = [];\n\t\tif ( uvs2 && uvs2.length === length ) newUvs2 = [];\n\n\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\tvar id = faces[ i ]._id;\n\n\t\t\tif ( newUvs1 ) newUvs1.push( uvs1[ id ] );\n\t\t\tif ( newUvs2 ) newUvs2.push( uvs2[ id ] );\n\n\t\t}\n\n\t\tif ( newUvs1 ) this.faceVertexUvs[ 0 ] = newUvs1;\n\t\tif ( newUvs2 ) this.faceVertexUvs[ 1 ] = newUvs2;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Geometry',\n\t\t\t\tgenerator: 'Geometry.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard Geometry serialization\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\t\tif ( this.name !== '' ) data.name = this.name;\n\n\t\tif ( this.parameters !== undefined ) {\n\n\t\t\tvar parameters = this.parameters;\n\n\t\t\tfor ( var key in parameters ) {\n\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tvar vertices = [];\n\n\t\tfor ( var i = 0; i < this.vertices.length; i ++ ) {\n\n\t\t\tvar vertex = this.vertices[ i ];\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t}\n\n\t\tvar faces = [];\n\t\tvar normals = [];\n\t\tvar normalsHash = {};\n\t\tvar colors = [];\n\t\tvar colorsHash = {};\n\t\tvar uvs = [];\n\t\tvar uvsHash = {};\n\n\t\tfor ( var i = 0; i < this.faces.length; i ++ ) {\n\n\t\t\tvar face = this.faces[ i ];\n\n\t\t\tvar hasMaterial = true;\n\t\t\tvar hasFaceUv = false; // deprecated\n\t\t\tvar hasFaceVertexUv = this.faceVertexUvs[ 0 ][ i ] !== undefined;\n\t\t\tvar hasFaceNormal = face.normal.length() > 0;\n\t\t\tvar hasFaceVertexNormal = face.vertexNormals.length > 0;\n\t\t\tvar hasFaceColor = face.color.r !== 1 || face.color.g !== 1 || face.color.b !== 1;\n\t\t\tvar hasFaceVertexColor = face.vertexColors.length > 0;\n\n\t\t\tvar faceType = 0;\n\n\t\t\tfaceType = setBit( faceType, 0, 0 ); // isQuad\n\t\t\tfaceType = setBit( faceType, 1, hasMaterial );\n\t\t\tfaceType = setBit( faceType, 2, hasFaceUv );\n\t\t\tfaceType = setBit( faceType, 3, hasFaceVertexUv );\n\t\t\tfaceType = setBit( faceType, 4, hasFaceNormal );\n\t\t\tfaceType = setBit( faceType, 5, hasFaceVertexNormal );\n\t\t\tfaceType = setBit( faceType, 6, hasFaceColor );\n\t\t\tfaceType = setBit( faceType, 7, hasFaceVertexColor );\n\n\t\t\tfaces.push( faceType );\n\t\t\tfaces.push( face.a, face.b, face.c );\n\t\t\tfaces.push( face.materialIndex );\n\n\t\t\tif ( hasFaceVertexUv ) {\n\n\t\t\t\tvar faceVertexUvs = this.faceVertexUvs[ 0 ][ i ];\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 0 ] ),\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 1 ] ),\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif ( hasFaceNormal ) {\n\n\t\t\t\tfaces.push( getNormalIndex( face.normal ) );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexNormal ) {\n\n\t\t\t\tvar vertexNormals = face.vertexNormals;\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 0 ] ),\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 1 ] ),\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif ( hasFaceColor ) {\n\n\t\t\t\tfaces.push( getColorIndex( face.color ) );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexColor ) {\n\n\t\t\t\tvar vertexColors = face.vertexColors;\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetColorIndex( vertexColors[ 0 ] ),\n\t\t\t\t\tgetColorIndex( vertexColors[ 1 ] ),\n\t\t\t\t\tgetColorIndex( vertexColors[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction setBit( value, position, enabled ) {\n\n\t\t\treturn enabled ? value | ( 1 << position ) : value & ( ~ ( 1 << position ) );\n\n\t\t}\n\n\t\tfunction getNormalIndex( normal ) {\n\n\t\t\tvar hash = normal.x.toString() + normal.y.toString() + normal.z.toString();\n\n\t\t\tif ( normalsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn normalsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tnormalsHash[ hash ] = normals.length / 3;\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\treturn normalsHash[ hash ];\n\n\t\t}\n\n\t\tfunction getColorIndex( color ) {\n\n\t\t\tvar hash = color.r.toString() + color.g.toString() + color.b.toString();\n\n\t\t\tif ( colorsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn colorsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tcolorsHash[ hash ] = colors.length;\n\t\t\tcolors.push( color.getHex() );\n\n\t\t\treturn colorsHash[ hash ];\n\n\t\t}\n\n\t\tfunction getUvIndex( uv ) {\n\n\t\t\tvar hash = uv.x.toString() + uv.y.toString();\n\n\t\t\tif ( uvsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn uvsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tuvsHash[ hash ] = uvs.length / 2;\n\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\treturn uvsHash[ hash ];\n\n\t\t}\n\n\t\tdata.data = {};\n\n\t\tdata.data.vertices = vertices;\n\t\tdata.data.normals = normals;\n\t\tif ( colors.length > 0 ) data.data.colors = colors;\n\t\tif ( uvs.length > 0 ) data.data.uvs = [ uvs ]; // temporal backward compatibility\n\t\tdata.data.faces = faces;\n\n\t\treturn data;\n\n\t},\n\n\tclone: function () {\n\n\t\t/*\n\t\t // Handle primitives\n\n\t\t var parameters = this.parameters;\n\n\t\t if ( parameters !== undefined ) {\n\n\t\t var values = [];\n\n\t\t for ( var key in parameters ) {\n\n\t\t values.push( parameters[ key ] );\n\n\t\t }\n\n\t\t var geometry = Object.create( this.constructor.prototype );\n\t\t this.constructor.apply( geometry, values );\n\t\t return geometry;\n\n\t\t }\n\n\t\t return new this.constructor().copy( this );\n\t\t */\n\n\t\treturn new Geometry().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tvar i, il, j, jl, k, kl;\n\n\t\t// reset\n\n\t\tthis.vertices = [];\n\t\tthis.colors = [];\n\t\tthis.faces = [];\n\t\tthis.faceVertexUvs = [[]];\n\t\tthis.morphTargets = [];\n\t\tthis.morphNormals = [];\n\t\tthis.skinWeights = [];\n\t\tthis.skinIndices = [];\n\t\tthis.lineDistances = [];\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\t// name\n\n\t\tthis.name = source.name;\n\n\t\t// vertices\n\n\t\tvar vertices = source.vertices;\n\n\t\tfor ( i = 0, il = vertices.length; i < il; i ++ ) {\n\n\t\t\tthis.vertices.push( vertices[ i ].clone() );\n\n\t\t}\n\n\t\t// colors\n\n\t\tvar colors = source.colors;\n\n\t\tfor ( i = 0, il = colors.length; i < il; i ++ ) {\n\n\t\t\tthis.colors.push( colors[ i ].clone() );\n\n\t\t}\n\n\t\t// faces\n\n\t\tvar faces = source.faces;\n\n\t\tfor ( i = 0, il = faces.length; i < il; i ++ ) {\n\n\t\t\tthis.faces.push( faces[ i ].clone() );\n\n\t\t}\n\n\t\t// face vertex uvs\n\n\t\tfor ( i = 0, il = source.faceVertexUvs.length; i < il; i ++ ) {\n\n\t\t\tvar faceVertexUvs = source.faceVertexUvs[ i ];\n\n\t\t\tif ( this.faceVertexUvs[ i ] === undefined ) {\n\n\t\t\t\tthis.faceVertexUvs[ i ] = [];\n\n\t\t\t}\n\n\t\t\tfor ( j = 0, jl = faceVertexUvs.length; j < jl; j ++ ) {\n\n\t\t\t\tvar uvs = faceVertexUvs[ j ], uvsCopy = [];\n\n\t\t\t\tfor ( k = 0, kl = uvs.length; k < kl; k ++ ) {\n\n\t\t\t\t\tvar uv = uvs[ k ];\n\n\t\t\t\t\tuvsCopy.push( uv.clone() );\n\n\t\t\t\t}\n\n\t\t\t\tthis.faceVertexUvs[ i ].push( uvsCopy );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// morph targets\n\n\t\tvar morphTargets = source.morphTargets;\n\n\t\tfor ( i = 0, il = morphTargets.length; i < il; i ++ ) {\n\n\t\t\tvar morphTarget = {};\n\t\t\tmorphTarget.name = morphTargets[ i ].name;\n\n\t\t\t// vertices\n\n\t\t\tif ( morphTargets[ i ].vertices !== undefined ) {\n\n\t\t\t\tmorphTarget.vertices = [];\n\n\t\t\t\tfor ( j = 0, jl = morphTargets[ i ].vertices.length; j < jl; j ++ ) {\n\n\t\t\t\t\tmorphTarget.vertices.push( morphTargets[ i ].vertices[ j ].clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// normals\n\n\t\t\tif ( morphTargets[ i ].normals !== undefined ) {\n\n\t\t\t\tmorphTarget.normals = [];\n\n\t\t\t\tfor ( j = 0, jl = morphTargets[ i ].normals.length; j < jl; j ++ ) {\n\n\t\t\t\t\tmorphTarget.normals.push( morphTargets[ i ].normals[ j ].clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.morphTargets.push( morphTarget );\n\n\t\t}\n\n\t\t// morph normals\n\n\t\tvar morphNormals = source.morphNormals;\n\n\t\tfor ( i = 0, il = morphNormals.length; i < il; i ++ ) {\n\n\t\t\tvar morphNormal = {};\n\n\t\t\t// vertex normals\n\n\t\t\tif ( morphNormals[ i ].vertexNormals !== undefined ) {\n\n\t\t\t\tmorphNormal.vertexNormals = [];\n\n\t\t\t\tfor ( j = 0, jl = morphNormals[ i ].vertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\t\tvar srcVertexNormal = morphNormals[ i ].vertexNormals[ j ];\n\t\t\t\t\tvar destVertexNormal = {};\n\n\t\t\t\t\tdestVertexNormal.a = srcVertexNormal.a.clone();\n\t\t\t\t\tdestVertexNormal.b = srcVertexNormal.b.clone();\n\t\t\t\t\tdestVertexNormal.c = srcVertexNormal.c.clone();\n\n\t\t\t\t\tmorphNormal.vertexNormals.push( destVertexNormal );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// face normals\n\n\t\t\tif ( morphNormals[ i ].faceNormals !== undefined ) {\n\n\t\t\t\tmorphNormal.faceNormals = [];\n\n\t\t\t\tfor ( j = 0, jl = morphNormals[ i ].faceNormals.length; j < jl; j ++ ) {\n\n\t\t\t\t\tmorphNormal.faceNormals.push( morphNormals[ i ].faceNormals[ j ].clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.morphNormals.push( morphNormal );\n\n\t\t}\n\n\t\t// skin weights\n\n\t\tvar skinWeights = source.skinWeights;\n\n\t\tfor ( i = 0, il = skinWeights.length; i < il; i ++ ) {\n\n\t\t\tthis.skinWeights.push( skinWeights[ i ].clone() );\n\n\t\t}\n\n\t\t// skin indices\n\n\t\tvar skinIndices = source.skinIndices;\n\n\t\tfor ( i = 0, il = skinIndices.length; i < il; i ++ ) {\n\n\t\t\tthis.skinIndices.push( skinIndices[ i ].clone() );\n\n\t\t}\n\n\t\t// line distances\n\n\t\tvar lineDistances = source.lineDistances;\n\n\t\tfor ( i = 0, il = lineDistances.length; i < il; i ++ ) {\n\n\t\t\tthis.lineDistances.push( lineDistances[ i ] );\n\n\t\t}\n\n\t\t// bounding box\n\n\t\tvar boundingBox = source.boundingBox;\n\n\t\tif ( boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = boundingBox.clone();\n\n\t\t}\n\n\t\t// bounding sphere\n\n\t\tvar boundingSphere = source.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = boundingSphere.clone();\n\n\t\t}\n\n\t\t// update flags\n\n\t\tthis.elementsNeedUpdate = source.elementsNeedUpdate;\n\t\tthis.verticesNeedUpdate = source.verticesNeedUpdate;\n\t\tthis.uvsNeedUpdate = source.uvsNeedUpdate;\n\t\tthis.normalsNeedUpdate = source.normalsNeedUpdate;\n\t\tthis.colorsNeedUpdate = source.colorsNeedUpdate;\n\t\tthis.lineDistancesNeedUpdate = source.lineDistancesNeedUpdate;\n\t\tthis.groupsNeedUpdate = source.groupsNeedUpdate;\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\n\nexport { Geometry };\n","import { Quaternion } from './Quaternion.js';\nimport { Vector3 } from './Vector3.js';\nimport { Matrix4 } from './Matrix4.js';\nimport { _Math } from './Math.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://clara.io\n */\n\nvar _matrix = new Matrix4();\nvar _quaternion = new Quaternion();\n\nfunction Euler( x, y, z, order ) {\n\n\tthis._x = x || 0;\n\tthis._y = y || 0;\n\tthis._z = z || 0;\n\tthis._order = order || Euler.DefaultOrder;\n\n}\n\nEuler.RotationOrders = [ 'XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX' ];\n\nEuler.DefaultOrder = 'XYZ';\n\nObject.defineProperties( Euler.prototype, {\n\n\tx: {\n\n\t\tget: function () {\n\n\t\t\treturn this._x;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._x = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t},\n\n\ty: {\n\n\t\tget: function () {\n\n\t\t\treturn this._y;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._y = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t},\n\n\tz: {\n\n\t\tget: function () {\n\n\t\t\treturn this._z;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._z = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t},\n\n\torder: {\n\n\t\tget: function () {\n\n\t\t\treturn this._order;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._order = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t}\n\n} );\n\nObject.assign( Euler.prototype, {\n\n\tisEuler: true,\n\n\tset: function ( x, y, z, order ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._order = order || this._order;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._order );\n\n\t},\n\n\tcopy: function ( euler ) {\n\n\t\tthis._x = euler._x;\n\t\tthis._y = euler._y;\n\t\tthis._z = euler._z;\n\t\tthis._order = euler._order;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromRotationMatrix: function ( m, order, update ) {\n\n\t\tvar clamp = _Math.clamp;\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tvar te = m.elements;\n\t\tvar m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\n\t\tvar m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ];\n\t\tvar m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\torder = order || this._order;\n\n\t\tif ( order === 'XYZ' ) {\n\n\t\t\tthis._y = Math.asin( clamp( m13, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m13 ) < 0.9999999 ) {\n\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\tthis._z = Math.atan2( - m12, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\tthis._z = 0;\n\n\t\t\t}\n\n\t\t} else if ( order === 'YXZ' ) {\n\n\t\t\tthis._x = Math.asin( - clamp( m23, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m23 ) < 0.9999999 ) {\n\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\t\t\t\tthis._z = Math.atan2( m21, m22 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\t\t\t\tthis._z = 0;\n\n\t\t\t}\n\n\t\t} else if ( order === 'ZXY' ) {\n\n\t\t\tthis._x = Math.asin( clamp( m32, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m32 ) < 0.9999999 ) {\n\n\t\t\t\tthis._y = Math.atan2( - m31, m33 );\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._y = 0;\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t}\n\n\t\t} else if ( order === 'ZYX' ) {\n\n\t\t\tthis._y = Math.asin( - clamp( m31, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m31 ) < 0.9999999 ) {\n\n\t\t\t\tthis._x = Math.atan2( m32, m33 );\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t}\n\n\t\t} else if ( order === 'YZX' ) {\n\n\t\t\tthis._z = Math.asin( clamp( m21, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m21 ) < 0.9999999 ) {\n\n\t\t\t\tthis._x = Math.atan2( - m23, m22 );\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\n\t\t\t}\n\n\t\t} else if ( order === 'XZY' ) {\n\n\t\t\tthis._z = Math.asin( - clamp( m12, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m12 ) < 0.9999999 ) {\n\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\tthis._y = Math.atan2( m13, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\tthis._y = 0;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.Euler: .setFromRotationMatrix() given unsupported order: ' + order );\n\n\t\t}\n\n\t\tthis._order = order;\n\n\t\tif ( update !== false ) this._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromQuaternion: function ( q, order, update ) {\n\n\t\t_matrix.makeRotationFromQuaternion( q );\n\n\t\treturn this.setFromRotationMatrix( _matrix, order, update );\n\n\t},\n\n\tsetFromVector3: function ( v, order ) {\n\n\t\treturn this.set( v.x, v.y, v.z, order || this._order );\n\n\t},\n\n\treorder: function ( newOrder ) {\n\n\t\t// WARNING: this discards revolution information -bhouston\n\n\t\t_quaternion.setFromEuler( this );\n\n\t\treturn this.setFromQuaternion( _quaternion, newOrder );\n\n\t},\n\n\tequals: function ( euler ) {\n\n\t\treturn ( euler._x === this._x ) && ( euler._y === this._y ) && ( euler._z === this._z ) && ( euler._order === this._order );\n\n\t},\n\n\tfromArray: function ( array ) {\n\n\t\tthis._x = array[ 0 ];\n\t\tthis._y = array[ 1 ];\n\t\tthis._z = array[ 2 ];\n\t\tif ( array[ 3 ] !== undefined ) this._order = array[ 3 ];\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._order;\n\n\t\treturn array;\n\n\t},\n\n\ttoVector3: function ( optionalResult ) {\n\n\t\tif ( optionalResult ) {\n\n\t\t\treturn optionalResult.set( this._x, this._y, this._z );\n\n\t\t} else {\n\n\t\t\treturn new Vector3( this._x, this._y, this._z );\n\n\t\t}\n\n\t},\n\n\t_onChange: function ( callback ) {\n\n\t\tthis._onChangeCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\t_onChangeCallback: function () {}\n\n} );\n\n\nexport { Euler };\n","/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author ikerr / http://verold.com\n */\n\nimport { Mesh } from './Mesh.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { Vector4 } from '../math/Vector4.js';\n\nfunction SkinnedMesh( geometry, material ) {\n\n\tif ( geometry && geometry.isGeometry ) {\n\n\t\tconsole.error( 'THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.' );\n\n\t}\n\n\tMesh.call( this, geometry, material );\n\n\tthis.type = 'SkinnedMesh';\n\n\tthis.bindMode = 'attached';\n\tthis.bindMatrix = new Matrix4();\n\tthis.bindMatrixInverse = new Matrix4();\n\n}\n\nSkinnedMesh.prototype = Object.assign( Object.create( Mesh.prototype ), {\n\n\tconstructor: SkinnedMesh,\n\n\tisSkinnedMesh: true,\n\n\tbind: function ( skeleton, bindMatrix ) {\n\n\t\tthis.skeleton = skeleton;\n\n\t\tif ( bindMatrix === undefined ) {\n\n\t\t\tthis.updateMatrixWorld( true );\n\n\t\t\tthis.skeleton.calculateInverses();\n\n\t\t\tbindMatrix = this.matrixWorld;\n\n\t\t}\n\n\t\tthis.bindMatrix.copy( bindMatrix );\n\t\tthis.bindMatrixInverse.getInverse( bindMatrix );\n\n\t},\n\n\tpose: function () {\n\n\t\tthis.skeleton.pose();\n\n\t},\n\n\tnormalizeSkinWeights: function () {\n\n\t\tvar vector = new Vector4();\n\n\t\tvar skinWeight = this.geometry.attributes.skinWeight;\n\n\t\tfor ( var i = 0, l = skinWeight.count; i < l; i ++ ) {\n\n\t\t\tvector.x = skinWeight.getX( i );\n\t\t\tvector.y = skinWeight.getY( i );\n\t\t\tvector.z = skinWeight.getZ( i );\n\t\t\tvector.w = skinWeight.getW( i );\n\n\t\t\tvar scale = 1.0 / vector.manhattanLength();\n\n\t\t\tif ( scale !== Infinity ) {\n\n\t\t\t\tvector.multiplyScalar( scale );\n\n\t\t\t} else {\n\n\t\t\t\tvector.set( 1, 0, 0, 0 ); // do something reasonable\n\n\t\t\t}\n\n\t\t\tskinWeight.setXYZW( i, vector.x, vector.y, vector.z, vector.w );\n\n\t\t}\n\n\t},\n\n\tupdateMatrixWorld: function ( force ) {\n\n\t\tMesh.prototype.updateMatrixWorld.call( this, force );\n\n\t\tif ( this.bindMode === 'attached' ) {\n\n\t\t\tthis.bindMatrixInverse.getInverse( this.matrixWorld );\n\n\t\t} else if ( this.bindMode === 'detached' ) {\n\n\t\t\tthis.bindMatrixInverse.getInverse( this.bindMatrix );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.SkinnedMesh: Unrecognized bindMode: ' + this.bindMode );\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.geometry, this.material ).copy( this );\n\n\t}\n\n} );\n\n\nexport { SkinnedMesh };\n","import { MultiplyOperation, TangentSpaceNormalMap } from '../constants.js';\nimport { Material } from './Material.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  specular: <hex>,\n *  shininess: <float>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalMapType: THREE.TangentSpaceNormalMap,\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.MultiplyOperation,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshPhongMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshPhongMaterial';\n\n\tthis.color = new Color( 0xffffff ); // diffuse\n\tthis.specular = new Color( 0x111111 );\n\tthis.shininess = 30;\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.emissive = new Color( 0x000000 );\n\tthis.emissiveIntensity = 1.0;\n\tthis.emissiveMap = null;\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalMapType = TangentSpaceNormalMap;\n\tthis.normalScale = new Vector2( 1, 1 );\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.specularMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.combine = MultiplyOperation;\n\tthis.reflectivity = 1;\n\tthis.refractionRatio = 0.98;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshPhongMaterial.prototype = Object.create( Material.prototype );\nMeshPhongMaterial.prototype.constructor = MeshPhongMaterial;\n\nMeshPhongMaterial.prototype.isMeshPhongMaterial = true;\n\nMeshPhongMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\tthis.specular.copy( source.specular );\n\tthis.shininess = source.shininess;\n\n\tthis.map = source.map;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.emissive.copy( source.emissive );\n\tthis.emissiveMap = source.emissiveMap;\n\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\tthis.bumpMap = source.bumpMap;\n\tthis.bumpScale = source.bumpScale;\n\n\tthis.normalMap = source.normalMap;\n\tthis.normalMapType = source.normalMapType;\n\tthis.normalScale.copy( source.normalScale );\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.specularMap = source.specularMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.envMap = source.envMap;\n\tthis.combine = source.combine;\n\tthis.reflectivity = source.reflectivity;\n\tthis.refractionRatio = source.refractionRatio;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n\nexport { MeshPhongMaterial };\n","/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n *\n * Creates extruded geometry from a path shape.\n *\n * parameters = {\n *\n *  curveSegments: <int>, // number of points on the curves\n *  steps: <int>, // number of points for z-side extrusions / used for subdividing segments of extrude spline too\n *  depth: <float>, // Depth to extrude the shape\n *\n *  bevelEnabled: <bool>, // turn on bevel\n *  bevelThickness: <float>, // how deep into the original shape bevel goes\n *  bevelSize: <float>, // how far from shape outline (including bevelOffset) is bevel\n *  bevelOffset: <float>, // how far from shape outline does bevel start\n *  bevelSegments: <int>, // number of bevel layers\n *\n *  extrudePath: <THREE.Curve> // curve to extrude shape along\n *\n *  UVGenerator: <Object> // object that provides UV generator functions\n *\n * }\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { ShapeUtils } from '../extras/ShapeUtils.js';\n\n// ExtrudeGeometry\n\nfunction ExtrudeGeometry( shapes, options ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'ExtrudeGeometry';\n\n\tthis.parameters = {\n\t\tshapes: shapes,\n\t\toptions: options\n\t};\n\n\tthis.fromBufferGeometry( new ExtrudeBufferGeometry( shapes, options ) );\n\tthis.mergeVertices();\n\n}\n\nExtrudeGeometry.prototype = Object.create( Geometry.prototype );\nExtrudeGeometry.prototype.constructor = ExtrudeGeometry;\n\nExtrudeGeometry.prototype.toJSON = function () {\n\n\tvar data = Geometry.prototype.toJSON.call( this );\n\n\tvar shapes = this.parameters.shapes;\n\tvar options = this.parameters.options;\n\n\treturn toJSON( shapes, options, data );\n\n};\n\n// ExtrudeBufferGeometry\n\nfunction ExtrudeBufferGeometry( shapes, options ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'ExtrudeBufferGeometry';\n\n\tthis.parameters = {\n\t\tshapes: shapes,\n\t\toptions: options\n\t};\n\n\tshapes = Array.isArray( shapes ) ? shapes : [ shapes ];\n\n\tvar scope = this;\n\n\tvar verticesArray = [];\n\tvar uvArray = [];\n\n\tfor ( var i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\tvar shape = shapes[ i ];\n\t\taddShape( shape );\n\n\t}\n\n\t// build geometry\n\n\tthis.setAttribute( 'position', new Float32BufferAttribute( verticesArray, 3 ) );\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvArray, 2 ) );\n\n\tthis.computeVertexNormals();\n\n\t// functions\n\n\tfunction addShape( shape ) {\n\n\t\tvar placeholder = [];\n\n\t\t// options\n\n\t\tvar curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\n\t\tvar steps = options.steps !== undefined ? options.steps : 1;\n\t\tvar depth = options.depth !== undefined ? options.depth : 100;\n\n\t\tvar bevelEnabled = options.bevelEnabled !== undefined ? options.bevelEnabled : true;\n\t\tvar bevelThickness = options.bevelThickness !== undefined ? options.bevelThickness : 6;\n\t\tvar bevelSize = options.bevelSize !== undefined ? options.bevelSize : bevelThickness - 2;\n\t\tvar bevelOffset = options.bevelOffset !== undefined ? options.bevelOffset : 0;\n\t\tvar bevelSegments = options.bevelSegments !== undefined ? options.bevelSegments : 3;\n\n\t\tvar extrudePath = options.extrudePath;\n\n\t\tvar uvgen = options.UVGenerator !== undefined ? options.UVGenerator : WorldUVGenerator;\n\n\t\t// deprecated options\n\n\t\tif ( options.amount !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.ExtrudeBufferGeometry: amount has been renamed to depth.' );\n\t\t\tdepth = options.amount;\n\n\t\t}\n\n\t\t//\n\n\t\tvar extrudePts, extrudeByPath = false;\n\t\tvar splineTube, binormal, normal, position2;\n\n\t\tif ( extrudePath ) {\n\n\t\t\textrudePts = extrudePath.getSpacedPoints( steps );\n\n\t\t\textrudeByPath = true;\n\t\t\tbevelEnabled = false; // bevels not supported for path extrusion\n\n\t\t\t// SETUP TNB variables\n\n\t\t\t// TODO1 - have a .isClosed in spline?\n\n\t\t\tsplineTube = extrudePath.computeFrenetFrames( steps, false );\n\n\t\t\t// console.log(splineTube, 'splineTube', splineTube.normals.length, 'steps', steps, 'extrudePts', extrudePts.length);\n\n\t\t\tbinormal = new Vector3();\n\t\t\tnormal = new Vector3();\n\t\t\tposition2 = new Vector3();\n\n\t\t}\n\n\t\t// Safeguards if bevels are not enabled\n\n\t\tif ( ! bevelEnabled ) {\n\n\t\t\tbevelSegments = 0;\n\t\t\tbevelThickness = 0;\n\t\t\tbevelSize = 0;\n\t\t\tbevelOffset = 0;\n\n\t\t}\n\n\t\t// Variables initialization\n\n\t\tvar ahole, h, hl; // looping of holes\n\n\t\tvar shapePoints = shape.extractPoints( curveSegments );\n\n\t\tvar vertices = shapePoints.shape;\n\t\tvar holes = shapePoints.holes;\n\n\t\tvar reverse = ! ShapeUtils.isClockWise( vertices );\n\n\t\tif ( reverse ) {\n\n\t\t\tvertices = vertices.reverse();\n\n\t\t\t// Maybe we should also check if holes are in the opposite direction, just to be safe ...\n\n\t\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\tahole = holes[ h ];\n\n\t\t\t\tif ( ShapeUtils.isClockWise( ahole ) ) {\n\n\t\t\t\t\tholes[ h ] = ahole.reverse();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tvar faces = ShapeUtils.triangulateShape( vertices, holes );\n\n\t\t/* Vertices */\n\n\t\tvar contour = vertices; // vertices has all points but contour has only points of circumference\n\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\tahole = holes[ h ];\n\n\t\t\tvertices = vertices.concat( ahole );\n\n\t\t}\n\n\n\t\tfunction scalePt2( pt, vec, size ) {\n\n\t\t\tif ( ! vec ) console.error( \"THREE.ExtrudeGeometry: vec does not exist\" );\n\n\t\t\treturn vec.clone().multiplyScalar( size ).add( pt );\n\n\t\t}\n\n\t\tvar b, bs, t, z,\n\t\t\tvert, vlen = vertices.length,\n\t\t\tface, flen = faces.length;\n\n\n\t\t// Find directions for point movement\n\n\n\t\tfunction getBevelVec( inPt, inPrev, inNext ) {\n\n\t\t\t// computes for inPt the corresponding point inPt' on a new contour\n\t\t\t//   shifted by 1 unit (length of normalized vector) to the left\n\t\t\t// if we walk along contour clockwise, this new contour is outside the old one\n\t\t\t//\n\t\t\t// inPt' is the intersection of the two lines parallel to the two\n\t\t\t//  adjacent edges of inPt at a distance of 1 unit on the left side.\n\n\t\t\tvar v_trans_x, v_trans_y, shrink_by; // resulting translation vector for inPt\n\n\t\t\t// good reading for geometry algorithms (here: line-line intersection)\n\t\t\t// http://geomalgorithms.com/a05-_intersect-1.html\n\n\t\t\tvar v_prev_x = inPt.x - inPrev.x,\n\t\t\t\tv_prev_y = inPt.y - inPrev.y;\n\t\t\tvar v_next_x = inNext.x - inPt.x,\n\t\t\t\tv_next_y = inNext.y - inPt.y;\n\n\t\t\tvar v_prev_lensq = ( v_prev_x * v_prev_x + v_prev_y * v_prev_y );\n\n\t\t\t// check for collinear edges\n\t\t\tvar collinear0 = ( v_prev_x * v_next_y - v_prev_y * v_next_x );\n\n\t\t\tif ( Math.abs( collinear0 ) > Number.EPSILON ) {\n\n\t\t\t\t// not collinear\n\n\t\t\t\t// length of vectors for normalizing\n\n\t\t\t\tvar v_prev_len = Math.sqrt( v_prev_lensq );\n\t\t\t\tvar v_next_len = Math.sqrt( v_next_x * v_next_x + v_next_y * v_next_y );\n\n\t\t\t\t// shift adjacent points by unit vectors to the left\n\n\t\t\t\tvar ptPrevShift_x = ( inPrev.x - v_prev_y / v_prev_len );\n\t\t\t\tvar ptPrevShift_y = ( inPrev.y + v_prev_x / v_prev_len );\n\n\t\t\t\tvar ptNextShift_x = ( inNext.x - v_next_y / v_next_len );\n\t\t\t\tvar ptNextShift_y = ( inNext.y + v_next_x / v_next_len );\n\n\t\t\t\t// scaling factor for v_prev to intersection point\n\n\t\t\t\tvar sf = ( ( ptNextShift_x - ptPrevShift_x ) * v_next_y -\n\t\t\t\t\t\t( ptNextShift_y - ptPrevShift_y ) * v_next_x ) /\n\t\t\t\t\t( v_prev_x * v_next_y - v_prev_y * v_next_x );\n\n\t\t\t\t// vector from inPt to intersection point\n\n\t\t\t\tv_trans_x = ( ptPrevShift_x + v_prev_x * sf - inPt.x );\n\t\t\t\tv_trans_y = ( ptPrevShift_y + v_prev_y * sf - inPt.y );\n\n\t\t\t\t// Don't normalize!, otherwise sharp corners become ugly\n\t\t\t\t//  but prevent crazy spikes\n\t\t\t\tvar v_trans_lensq = ( v_trans_x * v_trans_x + v_trans_y * v_trans_y );\n\t\t\t\tif ( v_trans_lensq <= 2 ) {\n\n\t\t\t\t\treturn new Vector2( v_trans_x, v_trans_y );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tshrink_by = Math.sqrt( v_trans_lensq / 2 );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// handle special case of collinear edges\n\n\t\t\t\tvar direction_eq = false; // assumes: opposite\n\t\t\t\tif ( v_prev_x > Number.EPSILON ) {\n\n\t\t\t\t\tif ( v_next_x > Number.EPSILON ) {\n\n\t\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( v_prev_x < - Number.EPSILON ) {\n\n\t\t\t\t\t\tif ( v_next_x < - Number.EPSILON ) {\n\n\t\t\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( Math.sign( v_prev_y ) === Math.sign( v_next_y ) ) {\n\n\t\t\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( direction_eq ) {\n\n\t\t\t\t\t// console.log(\"Warning: lines are a straight sequence\");\n\t\t\t\t\tv_trans_x = - v_prev_y;\n\t\t\t\t\tv_trans_y = v_prev_x;\n\t\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// console.log(\"Warning: lines are a straight spike\");\n\t\t\t\t\tv_trans_x = v_prev_x;\n\t\t\t\t\tv_trans_y = v_prev_y;\n\t\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq / 2 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new Vector2( v_trans_x / shrink_by, v_trans_y / shrink_by );\n\n\t\t}\n\n\n\t\tvar contourMovements = [];\n\n\t\tfor ( var i = 0, il = contour.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\n\n\t\t\tif ( j === il ) j = 0;\n\t\t\tif ( k === il ) k = 0;\n\n\t\t\t//  (j)---(i)---(k)\n\t\t\t// console.log('i,j,k', i, j , k)\n\n\t\t\tcontourMovements[ i ] = getBevelVec( contour[ i ], contour[ j ], contour[ k ] );\n\n\t\t}\n\n\t\tvar holesMovements = [],\n\t\t\toneHoleMovements, verticesMovements = contourMovements.concat();\n\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\tahole = holes[ h ];\n\n\t\t\toneHoleMovements = [];\n\n\t\t\tfor ( i = 0, il = ahole.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\n\n\t\t\t\tif ( j === il ) j = 0;\n\t\t\t\tif ( k === il ) k = 0;\n\n\t\t\t\t//  (j)---(i)---(k)\n\t\t\t\toneHoleMovements[ i ] = getBevelVec( ahole[ i ], ahole[ j ], ahole[ k ] );\n\n\t\t\t}\n\n\t\t\tholesMovements.push( oneHoleMovements );\n\t\t\tverticesMovements = verticesMovements.concat( oneHoleMovements );\n\n\t\t}\n\n\n\t\t// Loop bevelSegments, 1 for the front, 1 for the back\n\n\t\tfor ( b = 0; b < bevelSegments; b ++ ) {\n\n\t\t\t//for ( b = bevelSegments; b > 0; b -- ) {\n\n\t\t\tt = b / bevelSegments;\n\t\t\tz = bevelThickness * Math.cos( t * Math.PI / 2 );\n\t\t\tbs = bevelSize * Math.sin( t * Math.PI / 2 ) + bevelOffset;\n\n\t\t\t// contract shape\n\n\t\t\tfor ( i = 0, il = contour.length; i < il; i ++ ) {\n\n\t\t\t\tvert = scalePt2( contour[ i ], contourMovements[ i ], bs );\n\n\t\t\t\tv( vert.x, vert.y, - z );\n\n\t\t\t}\n\n\t\t\t// expand holes\n\n\t\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\tahole = holes[ h ];\n\t\t\t\toneHoleMovements = holesMovements[ h ];\n\n\t\t\t\tfor ( i = 0, il = ahole.length; i < il; i ++ ) {\n\n\t\t\t\t\tvert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\n\n\t\t\t\t\tv( vert.x, vert.y, - z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tbs = bevelSize + bevelOffset;\n\n\t\t// Back facing vertices\n\n\t\tfor ( i = 0; i < vlen; i ++ ) {\n\n\t\t\tvert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\n\n\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\tv( vert.x, vert.y, 0 );\n\n\t\t\t} else {\n\n\t\t\t\t// v( vert.x, vert.y + extrudePts[ 0 ].y, extrudePts[ 0 ].x );\n\n\t\t\t\tnormal.copy( splineTube.normals[ 0 ] ).multiplyScalar( vert.x );\n\t\t\t\tbinormal.copy( splineTube.binormals[ 0 ] ).multiplyScalar( vert.y );\n\n\t\t\t\tposition2.copy( extrudePts[ 0 ] ).add( normal ).add( binormal );\n\n\t\t\t\tv( position2.x, position2.y, position2.z );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Add stepped vertices...\n\t\t// Including front facing vertices\n\n\t\tvar s;\n\n\t\tfor ( s = 1; s <= steps; s ++ ) {\n\n\t\t\tfor ( i = 0; i < vlen; i ++ ) {\n\n\t\t\t\tvert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\n\n\t\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\t\tv( vert.x, vert.y, depth / steps * s );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// v( vert.x, vert.y + extrudePts[ s - 1 ].y, extrudePts[ s - 1 ].x );\n\n\t\t\t\t\tnormal.copy( splineTube.normals[ s ] ).multiplyScalar( vert.x );\n\t\t\t\t\tbinormal.copy( splineTube.binormals[ s ] ).multiplyScalar( vert.y );\n\n\t\t\t\t\tposition2.copy( extrudePts[ s ] ).add( normal ).add( binormal );\n\n\t\t\t\t\tv( position2.x, position2.y, position2.z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\n\t\t// Add bevel segments planes\n\n\t\t//for ( b = 1; b <= bevelSegments; b ++ ) {\n\t\tfor ( b = bevelSegments - 1; b >= 0; b -- ) {\n\n\t\t\tt = b / bevelSegments;\n\t\t\tz = bevelThickness * Math.cos( t * Math.PI / 2 );\n\t\t\tbs = bevelSize * Math.sin( t * Math.PI / 2 ) + bevelOffset;\n\n\t\t\t// contract shape\n\n\t\t\tfor ( i = 0, il = contour.length; i < il; i ++ ) {\n\n\t\t\t\tvert = scalePt2( contour[ i ], contourMovements[ i ], bs );\n\t\t\t\tv( vert.x, vert.y, depth + z );\n\n\t\t\t}\n\n\t\t\t// expand holes\n\n\t\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\tahole = holes[ h ];\n\t\t\t\toneHoleMovements = holesMovements[ h ];\n\n\t\t\t\tfor ( i = 0, il = ahole.length; i < il; i ++ ) {\n\n\t\t\t\t\tvert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\n\n\t\t\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\t\t\tv( vert.x, vert.y, depth + z );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tv( vert.x, vert.y + extrudePts[ steps - 1 ].y, extrudePts[ steps - 1 ].x + z );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t/* Faces */\n\n\t\t// Top and bottom faces\n\n\t\tbuildLidFaces();\n\n\t\t// Sides faces\n\n\t\tbuildSideFaces();\n\n\n\t\t/////  Internal functions\n\n\t\tfunction buildLidFaces() {\n\n\t\t\tvar start = verticesArray.length / 3;\n\n\t\t\tif ( bevelEnabled ) {\n\n\t\t\t\tvar layer = 0; // steps + 1\n\t\t\t\tvar offset = vlen * layer;\n\n\t\t\t\t// Bottom faces\n\n\t\t\t\tfor ( i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\tface = faces[ i ];\n\t\t\t\t\tf3( face[ 2 ] + offset, face[ 1 ] + offset, face[ 0 ] + offset );\n\n\t\t\t\t}\n\n\t\t\t\tlayer = steps + bevelSegments * 2;\n\t\t\t\toffset = vlen * layer;\n\n\t\t\t\t// Top faces\n\n\t\t\t\tfor ( i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\tface = faces[ i ];\n\t\t\t\t\tf3( face[ 0 ] + offset, face[ 1 ] + offset, face[ 2 ] + offset );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// Bottom faces\n\n\t\t\t\tfor ( i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\tface = faces[ i ];\n\t\t\t\t\tf3( face[ 2 ], face[ 1 ], face[ 0 ] );\n\n\t\t\t\t}\n\n\t\t\t\t// Top faces\n\n\t\t\t\tfor ( i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\tface = faces[ i ];\n\t\t\t\t\tf3( face[ 0 ] + vlen * steps, face[ 1 ] + vlen * steps, face[ 2 ] + vlen * steps );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tscope.addGroup( start, verticesArray.length / 3 - start, 0 );\n\n\t\t}\n\n\t\t// Create faces for the z-sides of the shape\n\n\t\tfunction buildSideFaces() {\n\n\t\t\tvar start = verticesArray.length / 3;\n\t\t\tvar layeroffset = 0;\n\t\t\tsidewalls( contour, layeroffset );\n\t\t\tlayeroffset += contour.length;\n\n\t\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\tahole = holes[ h ];\n\t\t\t\tsidewalls( ahole, layeroffset );\n\n\t\t\t\t//, true\n\t\t\t\tlayeroffset += ahole.length;\n\n\t\t\t}\n\n\n\t\t\tscope.addGroup( start, verticesArray.length / 3 - start, 1 );\n\n\n\t\t}\n\n\t\tfunction sidewalls( contour, layeroffset ) {\n\n\t\t\tvar j, k;\n\t\t\ti = contour.length;\n\n\t\t\twhile ( -- i >= 0 ) {\n\n\t\t\t\tj = i;\n\t\t\t\tk = i - 1;\n\t\t\t\tif ( k < 0 ) k = contour.length - 1;\n\n\t\t\t\t//console.log('b', i,j, i-1, k,vertices.length);\n\n\t\t\t\tvar s = 0,\n\t\t\t\t\tsl = steps + bevelSegments * 2;\n\n\t\t\t\tfor ( s = 0; s < sl; s ++ ) {\n\n\t\t\t\t\tvar slen1 = vlen * s;\n\t\t\t\t\tvar slen2 = vlen * ( s + 1 );\n\n\t\t\t\t\tvar a = layeroffset + j + slen1,\n\t\t\t\t\t\tb = layeroffset + k + slen1,\n\t\t\t\t\t\tc = layeroffset + k + slen2,\n\t\t\t\t\t\td = layeroffset + j + slen2;\n\n\t\t\t\t\tf4( a, b, c, d );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction v( x, y, z ) {\n\n\t\t\tplaceholder.push( x );\n\t\t\tplaceholder.push( y );\n\t\t\tplaceholder.push( z );\n\n\t\t}\n\n\n\t\tfunction f3( a, b, c ) {\n\n\t\t\taddVertex( a );\n\t\t\taddVertex( b );\n\t\t\taddVertex( c );\n\n\t\t\tvar nextIndex = verticesArray.length / 3;\n\t\t\tvar uvs = uvgen.generateTopUV( scope, verticesArray, nextIndex - 3, nextIndex - 2, nextIndex - 1 );\n\n\t\t\taddUV( uvs[ 0 ] );\n\t\t\taddUV( uvs[ 1 ] );\n\t\t\taddUV( uvs[ 2 ] );\n\n\t\t}\n\n\t\tfunction f4( a, b, c, d ) {\n\n\t\t\taddVertex( a );\n\t\t\taddVertex( b );\n\t\t\taddVertex( d );\n\n\t\t\taddVertex( b );\n\t\t\taddVertex( c );\n\t\t\taddVertex( d );\n\n\n\t\t\tvar nextIndex = verticesArray.length / 3;\n\t\t\tvar uvs = uvgen.generateSideWallUV( scope, verticesArray, nextIndex - 6, nextIndex - 3, nextIndex - 2, nextIndex - 1 );\n\n\t\t\taddUV( uvs[ 0 ] );\n\t\t\taddUV( uvs[ 1 ] );\n\t\t\taddUV( uvs[ 3 ] );\n\n\t\t\taddUV( uvs[ 1 ] );\n\t\t\taddUV( uvs[ 2 ] );\n\t\t\taddUV( uvs[ 3 ] );\n\n\t\t}\n\n\t\tfunction addVertex( index ) {\n\n\t\t\tverticesArray.push( placeholder[ index * 3 + 0 ] );\n\t\t\tverticesArray.push( placeholder[ index * 3 + 1 ] );\n\t\t\tverticesArray.push( placeholder[ index * 3 + 2 ] );\n\n\t\t}\n\n\n\t\tfunction addUV( vector2 ) {\n\n\t\t\tuvArray.push( vector2.x );\n\t\t\tuvArray.push( vector2.y );\n\n\t\t}\n\n\t}\n\n}\n\nExtrudeBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nExtrudeBufferGeometry.prototype.constructor = ExtrudeBufferGeometry;\n\nExtrudeBufferGeometry.prototype.toJSON = function () {\n\n\tvar data = BufferGeometry.prototype.toJSON.call( this );\n\n\tvar shapes = this.parameters.shapes;\n\tvar options = this.parameters.options;\n\n\treturn toJSON( shapes, options, data );\n\n};\n\n//\n\nvar WorldUVGenerator = {\n\n\tgenerateTopUV: function ( geometry, vertices, indexA, indexB, indexC ) {\n\n\t\tvar a_x = vertices[ indexA * 3 ];\n\t\tvar a_y = vertices[ indexA * 3 + 1 ];\n\t\tvar b_x = vertices[ indexB * 3 ];\n\t\tvar b_y = vertices[ indexB * 3 + 1 ];\n\t\tvar c_x = vertices[ indexC * 3 ];\n\t\tvar c_y = vertices[ indexC * 3 + 1 ];\n\n\t\treturn [\n\t\t\tnew Vector2( a_x, a_y ),\n\t\t\tnew Vector2( b_x, b_y ),\n\t\t\tnew Vector2( c_x, c_y )\n\t\t];\n\n\t},\n\n\tgenerateSideWallUV: function ( geometry, vertices, indexA, indexB, indexC, indexD ) {\n\n\t\tvar a_x = vertices[ indexA * 3 ];\n\t\tvar a_y = vertices[ indexA * 3 + 1 ];\n\t\tvar a_z = vertices[ indexA * 3 + 2 ];\n\t\tvar b_x = vertices[ indexB * 3 ];\n\t\tvar b_y = vertices[ indexB * 3 + 1 ];\n\t\tvar b_z = vertices[ indexB * 3 + 2 ];\n\t\tvar c_x = vertices[ indexC * 3 ];\n\t\tvar c_y = vertices[ indexC * 3 + 1 ];\n\t\tvar c_z = vertices[ indexC * 3 + 2 ];\n\t\tvar d_x = vertices[ indexD * 3 ];\n\t\tvar d_y = vertices[ indexD * 3 + 1 ];\n\t\tvar d_z = vertices[ indexD * 3 + 2 ];\n\n\t\tif ( Math.abs( a_y - b_y ) < 0.01 ) {\n\n\t\t\treturn [\n\t\t\t\tnew Vector2( a_x, 1 - a_z ),\n\t\t\t\tnew Vector2( b_x, 1 - b_z ),\n\t\t\t\tnew Vector2( c_x, 1 - c_z ),\n\t\t\t\tnew Vector2( d_x, 1 - d_z )\n\t\t\t];\n\n\t\t} else {\n\n\t\t\treturn [\n\t\t\t\tnew Vector2( a_y, 1 - a_z ),\n\t\t\t\tnew Vector2( b_y, 1 - b_z ),\n\t\t\t\tnew Vector2( c_y, 1 - c_z ),\n\t\t\t\tnew Vector2( d_y, 1 - d_z )\n\t\t\t];\n\n\t\t}\n\n\t}\n};\n\nfunction toJSON( shapes, options, data ) {\n\n\t//\n\n\tdata.shapes = [];\n\n\tif ( Array.isArray( shapes ) ) {\n\n\t\tfor ( var i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\tvar shape = shapes[ i ];\n\n\t\t\tdata.shapes.push( shape.uuid );\n\n\t\t}\n\n\t} else {\n\n\t\tdata.shapes.push( shapes.uuid );\n\n\t}\n\n\t//\n\n\tif ( options.extrudePath !== undefined ) data.options.extrudePath = options.extrudePath.toJSON();\n\n\treturn data;\n\n}\n\n\nexport { ExtrudeGeometry, ExtrudeBufferGeometry };\n","import { _Math } from '../../math/Math.js';\nimport { Vector3 } from '../../math/Vector3.js';\nimport { Matrix4 } from '../../math/Matrix4.js';\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * Extensible curve object\n *\n * Some common of curve methods:\n * .getPoint( t, optionalTarget ), .getTangent( t )\n * .getPointAt( u, optionalTarget ), .getTangentAt( u )\n * .getPoints(), .getSpacedPoints()\n * .getLength()\n * .updateArcLengths()\n *\n * This following curves inherit from THREE.Curve:\n *\n * -- 2D curves --\n * THREE.ArcCurve\n * THREE.CubicBezierCurve\n * THREE.EllipseCurve\n * THREE.LineCurve\n * THREE.QuadraticBezierCurve\n * THREE.SplineCurve\n *\n * -- 3D curves --\n * THREE.CatmullRomCurve3\n * THREE.CubicBezierCurve3\n * THREE.LineCurve3\n * THREE.QuadraticBezierCurve3\n *\n * A series of curves can be represented as a THREE.CurvePath.\n *\n **/\n\n/**************************************************************\n *\tAbstract Curve base class\n **************************************************************/\n\nfunction Curve() {\n\n\tthis.type = 'Curve';\n\n\tthis.arcLengthDivisions = 200;\n\n}\n\nObject.assign( Curve.prototype, {\n\n\t// Virtual base class method to overwrite and implement in subclasses\n\t//\t- t [0 .. 1]\n\n\tgetPoint: function ( /* t, optionalTarget */ ) {\n\n\t\tconsole.warn( 'THREE.Curve: .getPoint() not implemented.' );\n\t\treturn null;\n\n\t},\n\n\t// Get point at relative position in curve according to arc length\n\t// - u [0 .. 1]\n\n\tgetPointAt: function ( u, optionalTarget ) {\n\n\t\tvar t = this.getUtoTmapping( u );\n\t\treturn this.getPoint( t, optionalTarget );\n\n\t},\n\n\t// Get sequence of points using getPoint( t )\n\n\tgetPoints: function ( divisions ) {\n\n\t\tif ( divisions === undefined ) divisions = 5;\n\n\t\tvar points = [];\n\n\t\tfor ( var d = 0; d <= divisions; d ++ ) {\n\n\t\t\tpoints.push( this.getPoint( d / divisions ) );\n\n\t\t}\n\n\t\treturn points;\n\n\t},\n\n\t// Get sequence of points using getPointAt( u )\n\n\tgetSpacedPoints: function ( divisions ) {\n\n\t\tif ( divisions === undefined ) divisions = 5;\n\n\t\tvar points = [];\n\n\t\tfor ( var d = 0; d <= divisions; d ++ ) {\n\n\t\t\tpoints.push( this.getPointAt( d / divisions ) );\n\n\t\t}\n\n\t\treturn points;\n\n\t},\n\n\t// Get total curve arc length\n\n\tgetLength: function () {\n\n\t\tvar lengths = this.getLengths();\n\t\treturn lengths[ lengths.length - 1 ];\n\n\t},\n\n\t// Get list of cumulative segment lengths\n\n\tgetLengths: function ( divisions ) {\n\n\t\tif ( divisions === undefined ) divisions = this.arcLengthDivisions;\n\n\t\tif ( this.cacheArcLengths &&\n\t\t\t( this.cacheArcLengths.length === divisions + 1 ) &&\n\t\t\t! this.needsUpdate ) {\n\n\t\t\treturn this.cacheArcLengths;\n\n\t\t}\n\n\t\tthis.needsUpdate = false;\n\n\t\tvar cache = [];\n\t\tvar current, last = this.getPoint( 0 );\n\t\tvar p, sum = 0;\n\n\t\tcache.push( 0 );\n\n\t\tfor ( p = 1; p <= divisions; p ++ ) {\n\n\t\t\tcurrent = this.getPoint( p / divisions );\n\t\t\tsum += current.distanceTo( last );\n\t\t\tcache.push( sum );\n\t\t\tlast = current;\n\n\t\t}\n\n\t\tthis.cacheArcLengths = cache;\n\n\t\treturn cache; // { sums: cache, sum: sum }; Sum is in the last element.\n\n\t},\n\n\tupdateArcLengths: function () {\n\n\t\tthis.needsUpdate = true;\n\t\tthis.getLengths();\n\n\t},\n\n\t// Given u ( 0 .. 1 ), get a t to find p. This gives you points which are equidistant\n\n\tgetUtoTmapping: function ( u, distance ) {\n\n\t\tvar arcLengths = this.getLengths();\n\n\t\tvar i = 0, il = arcLengths.length;\n\n\t\tvar targetArcLength; // The targeted u distance value to get\n\n\t\tif ( distance ) {\n\n\t\t\ttargetArcLength = distance;\n\n\t\t} else {\n\n\t\t\ttargetArcLength = u * arcLengths[ il - 1 ];\n\n\t\t}\n\n\t\t// binary search for the index with largest value smaller than target u distance\n\n\t\tvar low = 0, high = il - 1, comparison;\n\n\t\twhile ( low <= high ) {\n\n\t\t\ti = Math.floor( low + ( high - low ) / 2 ); // less likely to overflow, though probably not issue here, JS doesn't really have integers, all numbers are floats\n\n\t\t\tcomparison = arcLengths[ i ] - targetArcLength;\n\n\t\t\tif ( comparison < 0 ) {\n\n\t\t\t\tlow = i + 1;\n\n\t\t\t} else if ( comparison > 0 ) {\n\n\t\t\t\thigh = i - 1;\n\n\t\t\t} else {\n\n\t\t\t\thigh = i;\n\t\t\t\tbreak;\n\n\t\t\t\t// DONE\n\n\t\t\t}\n\n\t\t}\n\n\t\ti = high;\n\n\t\tif ( arcLengths[ i ] === targetArcLength ) {\n\n\t\t\treturn i / ( il - 1 );\n\n\t\t}\n\n\t\t// we could get finer grain at lengths, or use simple interpolation between two points\n\n\t\tvar lengthBefore = arcLengths[ i ];\n\t\tvar lengthAfter = arcLengths[ i + 1 ];\n\n\t\tvar segmentLength = lengthAfter - lengthBefore;\n\n\t\t// determine where we are between the 'before' and 'after' points\n\n\t\tvar segmentFraction = ( targetArcLength - lengthBefore ) / segmentLength;\n\n\t\t// add that fractional amount to t\n\n\t\tvar t = ( i + segmentFraction ) / ( il - 1 );\n\n\t\treturn t;\n\n\t},\n\n\t// Returns a unit vector tangent at t\n\t// In case any sub curve does not implement its tangent derivation,\n\t// 2 points a small delta apart will be used to find its gradient\n\t// which seems to give a reasonable approximation\n\n\tgetTangent: function ( t ) {\n\n\t\tvar delta = 0.0001;\n\t\tvar t1 = t - delta;\n\t\tvar t2 = t + delta;\n\n\t\t// Capping in case of danger\n\n\t\tif ( t1 < 0 ) t1 = 0;\n\t\tif ( t2 > 1 ) t2 = 1;\n\n\t\tvar pt1 = this.getPoint( t1 );\n\t\tvar pt2 = this.getPoint( t2 );\n\n\t\tvar vec = pt2.clone().sub( pt1 );\n\t\treturn vec.normalize();\n\n\t},\n\n\tgetTangentAt: function ( u ) {\n\n\t\tvar t = this.getUtoTmapping( u );\n\t\treturn this.getTangent( t );\n\n\t},\n\n\tcomputeFrenetFrames: function ( segments, closed ) {\n\n\t\t// see http://www.cs.indiana.edu/pub/techreports/TR425.pdf\n\n\t\tvar normal = new Vector3();\n\n\t\tvar tangents = [];\n\t\tvar normals = [];\n\t\tvar binormals = [];\n\n\t\tvar vec = new Vector3();\n\t\tvar mat = new Matrix4();\n\n\t\tvar i, u, theta;\n\n\t\t// compute the tangent vectors for each segment on the curve\n\n\t\tfor ( i = 0; i <= segments; i ++ ) {\n\n\t\t\tu = i / segments;\n\n\t\t\ttangents[ i ] = this.getTangentAt( u );\n\t\t\ttangents[ i ].normalize();\n\n\t\t}\n\n\t\t// select an initial normal vector perpendicular to the first tangent vector,\n\t\t// and in the direction of the minimum tangent xyz component\n\n\t\tnormals[ 0 ] = new Vector3();\n\t\tbinormals[ 0 ] = new Vector3();\n\t\tvar min = Number.MAX_VALUE;\n\t\tvar tx = Math.abs( tangents[ 0 ].x );\n\t\tvar ty = Math.abs( tangents[ 0 ].y );\n\t\tvar tz = Math.abs( tangents[ 0 ].z );\n\n\t\tif ( tx <= min ) {\n\n\t\t\tmin = tx;\n\t\t\tnormal.set( 1, 0, 0 );\n\n\t\t}\n\n\t\tif ( ty <= min ) {\n\n\t\t\tmin = ty;\n\t\t\tnormal.set( 0, 1, 0 );\n\n\t\t}\n\n\t\tif ( tz <= min ) {\n\n\t\t\tnormal.set( 0, 0, 1 );\n\n\t\t}\n\n\t\tvec.crossVectors( tangents[ 0 ], normal ).normalize();\n\n\t\tnormals[ 0 ].crossVectors( tangents[ 0 ], vec );\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] );\n\n\n\t\t// compute the slowly-varying normal and binormal vectors for each segment on the curve\n\n\t\tfor ( i = 1; i <= segments; i ++ ) {\n\n\t\t\tnormals[ i ] = normals[ i - 1 ].clone();\n\n\t\t\tbinormals[ i ] = binormals[ i - 1 ].clone();\n\n\t\t\tvec.crossVectors( tangents[ i - 1 ], tangents[ i ] );\n\n\t\t\tif ( vec.length() > Number.EPSILON ) {\n\n\t\t\t\tvec.normalize();\n\n\t\t\t\ttheta = Math.acos( _Math.clamp( tangents[ i - 1 ].dot( tangents[ i ] ), - 1, 1 ) ); // clamp for floating pt errors\n\n\t\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( vec, theta ) );\n\n\t\t\t}\n\n\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\n\n\t\t}\n\n\t\t// if the curve is closed, postprocess the vectors so the first and last normal vectors are the same\n\n\t\tif ( closed === true ) {\n\n\t\t\ttheta = Math.acos( _Math.clamp( normals[ 0 ].dot( normals[ segments ] ), - 1, 1 ) );\n\t\t\ttheta /= segments;\n\n\t\t\tif ( tangents[ 0 ].dot( vec.crossVectors( normals[ 0 ], normals[ segments ] ) ) > 0 ) {\n\n\t\t\t\ttheta = - theta;\n\n\t\t\t}\n\n\t\t\tfor ( i = 1; i <= segments; i ++ ) {\n\n\t\t\t\t// twist a little...\n\t\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( tangents[ i ], theta * i ) );\n\t\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn {\n\t\t\ttangents: tangents,\n\t\t\tnormals: normals,\n\t\t\tbinormals: binormals\n\t\t};\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.arcLengthDivisions = source.arcLengthDivisions;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Curve',\n\t\t\t\tgenerator: 'Curve.toJSON'\n\t\t\t}\n\t\t};\n\n\t\tdata.arcLengthDivisions = this.arcLengthDivisions;\n\t\tdata.type = this.type;\n\n\t\treturn data;\n\n\t},\n\n\tfromJSON: function ( json ) {\n\n\t\tthis.arcLengthDivisions = json.arcLengthDivisions;\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Curve };\n","import { LightShadow } from './LightShadow.js';\nimport { OrthographicCamera } from '../cameras/OrthographicCamera.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction DirectionalLightShadow() {\n\n\tLightShadow.call( this, new OrthographicCamera( - 5, 5, 5, - 5, 0.5, 500 ) );\n\n}\n\nDirectionalLightShadow.prototype = Object.assign( Object.create( LightShadow.prototype ), {\n\n\tconstructor: DirectionalLightShadow,\n\n\tisDirectionalLightShadow: true,\n\n\tupdateMatrices: function ( light ) {\n\n\t\tLightShadow.prototype.updateMatrices.call( this, light );\n\n\t}\n\n} );\n\n\nexport { DirectionalLightShadow };\n","import { Light } from './Light.js';\nimport { DirectionalLightShadow } from './DirectionalLightShadow.js';\nimport { Object3D } from '../core/Object3D.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction DirectionalLight( color, intensity ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'DirectionalLight';\n\n\tthis.position.copy( Object3D.DefaultUp );\n\tthis.updateMatrix();\n\n\tthis.target = new Object3D();\n\n\tthis.shadow = new DirectionalLightShadow();\n\n}\n\nDirectionalLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: DirectionalLight,\n\n\tisDirectionalLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.target = source.target.clone();\n\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { DirectionalLight };\n","import { LightShadow } from './LightShadow.js';\nimport { PerspectiveCamera } from '../cameras/PerspectiveCamera.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Vector4 } from '../math/Vector4.js';\n\nfunction PointLightShadow() {\n\n\tLightShadow.call( this, new PerspectiveCamera( 90, 1, 0.5, 500 ) );\n\n\tthis._frameExtents = new Vector2( 4, 2 );\n\n\tthis._viewportCount = 6;\n\n\tthis._viewports = [\n\t\t// These viewports map a cube-map onto a 2D texture with the\n\t\t// following orientation:\n\t\t//\n\t\t//  xzXZ\n\t\t//   y Y\n\t\t//\n\t\t// X - Positive x direction\n\t\t// x - Negative x direction\n\t\t// Y - Positive y direction\n\t\t// y - Negative y direction\n\t\t// Z - Positive z direction\n\t\t// z - Negative z direction\n\n\t\t// positive X\n\t\tnew Vector4( 2, 1, 1, 1 ),\n\t\t// negative X\n\t\tnew Vector4( 0, 1, 1, 1 ),\n\t\t// positive Z\n\t\tnew Vector4( 3, 1, 1, 1 ),\n\t\t// negative Z\n\t\tnew Vector4( 1, 1, 1, 1 ),\n\t\t// positive Y\n\t\tnew Vector4( 3, 0, 1, 1 ),\n\t\t// negative Y\n\t\tnew Vector4( 1, 0, 1, 1 )\n\t];\n\n\tthis._cubeDirections = [\n\t\tnew Vector3( 1, 0, 0 ), new Vector3( - 1, 0, 0 ), new Vector3( 0, 0, 1 ),\n\t\tnew Vector3( 0, 0, - 1 ), new Vector3( 0, 1, 0 ), new Vector3( 0, - 1, 0 )\n\t];\n\n\tthis._cubeUps = [\n\t\tnew Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ),\n\t\tnew Vector3( 0, 1, 0 ), new Vector3( 0, 0, 1 ),\tnew Vector3( 0, 0, - 1 )\n\t];\n\n}\n\nPointLightShadow.prototype = Object.assign( Object.create( LightShadow.prototype ), {\n\n\tconstructor: PointLightShadow,\n\n\tisPointLightShadow: true,\n\n\tupdateMatrices: function ( light, viewportIndex ) {\n\n\t\tif ( viewportIndex === undefined ) viewportIndex = 0;\n\n\t\tvar camera = this.camera,\n\t\t\tshadowMatrix = this.matrix,\n\t\t\tlightPositionWorld = this._lightPositionWorld,\n\t\t\tlookTarget = this._lookTarget,\n\t\t\tprojScreenMatrix = this._projScreenMatrix;\n\n\t\tlightPositionWorld.setFromMatrixPosition( light.matrixWorld );\n\t\tcamera.position.copy( lightPositionWorld );\n\n\t\tlookTarget.copy( camera.position );\n\t\tlookTarget.add( this._cubeDirections[ viewportIndex ] );\n\t\tcamera.up.copy( this._cubeUps[ viewportIndex ] );\n\t\tcamera.lookAt( lookTarget );\n\t\tcamera.updateMatrixWorld();\n\n\t\tshadowMatrix.makeTranslation( - lightPositionWorld.x, - lightPositionWorld.y, - lightPositionWorld.z );\n\n\t\tprojScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\n\t\tthis._frustum.setFromMatrix( projScreenMatrix );\n\n\t}\n\n} );\n\n\nexport { PointLightShadow };\n","import { Light } from './Light.js';\nimport { PointLightShadow } from './PointLightShadow.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\n\nfunction PointLight( color, intensity, distance, decay ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'PointLight';\n\n\tObject.defineProperty( this, 'power', {\n\t\tget: function () {\n\n\t\t\t// intensity = power per solid angle.\n\t\t\t// ref: equation (15) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t\t\treturn this.intensity * 4 * Math.PI;\n\n\t\t},\n\t\tset: function ( power ) {\n\n\t\t\t// intensity = power per solid angle.\n\t\t\t// ref: equation (15) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t\t\tthis.intensity = power / ( 4 * Math.PI );\n\n\t\t}\n\t} );\n\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\n\tthis.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\n\n\tthis.shadow = new PointLightShadow();\n\n}\n\nPointLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: PointLight,\n\n\tisPointLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.distance = source.distance;\n\t\tthis.decay = source.decay;\n\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { PointLight };\n","/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar _lut = [];\n\nfor ( var i = 0; i < 256; i ++ ) {\n\n\t_lut[ i ] = ( i < 16 ? '0' : '' ) + ( i ).toString( 16 );\n\n}\n\nvar _Math = {\n\n\tDEG2RAD: Math.PI / 180,\n\tRAD2DEG: 180 / Math.PI,\n\n\tgenerateUUID: function () {\n\n\t\t// http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136\n\n\t\tvar d0 = Math.random() * 0xffffffff | 0;\n\t\tvar d1 = Math.random() * 0xffffffff | 0;\n\t\tvar d2 = Math.random() * 0xffffffff | 0;\n\t\tvar d3 = Math.random() * 0xffffffff | 0;\n\t\tvar uuid = _lut[ d0 & 0xff ] + _lut[ d0 >> 8 & 0xff ] + _lut[ d0 >> 16 & 0xff ] + _lut[ d0 >> 24 & 0xff ] + '-' +\n\t\t\t_lut[ d1 & 0xff ] + _lut[ d1 >> 8 & 0xff ] + '-' + _lut[ d1 >> 16 & 0x0f | 0x40 ] + _lut[ d1 >> 24 & 0xff ] + '-' +\n\t\t\t_lut[ d2 & 0x3f | 0x80 ] + _lut[ d2 >> 8 & 0xff ] + '-' + _lut[ d2 >> 16 & 0xff ] + _lut[ d2 >> 24 & 0xff ] +\n\t\t\t_lut[ d3 & 0xff ] + _lut[ d3 >> 8 & 0xff ] + _lut[ d3 >> 16 & 0xff ] + _lut[ d3 >> 24 & 0xff ];\n\n\t\t// .toUpperCase() here flattens concatenated strings to save heap memory space.\n\t\treturn uuid.toUpperCase();\n\n\t},\n\n\tclamp: function ( value, min, max ) {\n\n\t\treturn Math.max( min, Math.min( max, value ) );\n\n\t},\n\n\t// compute euclidian modulo of m % n\n\t// https://en.wikipedia.org/wiki/Modulo_operation\n\n\teuclideanModulo: function ( n, m ) {\n\n\t\treturn ( ( n % m ) + m ) % m;\n\n\t},\n\n\t// Linear mapping from range <a1, a2> to range <b1, b2>\n\n\tmapLinear: function ( x, a1, a2, b1, b2 ) {\n\n\t\treturn b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\n\n\t},\n\n\t// https://en.wikipedia.org/wiki/Linear_interpolation\n\n\tlerp: function ( x, y, t ) {\n\n\t\treturn ( 1 - t ) * x + t * y;\n\n\t},\n\n\t// http://en.wikipedia.org/wiki/Smoothstep\n\n\tsmoothstep: function ( x, min, max ) {\n\n\t\tif ( x <= min ) return 0;\n\t\tif ( x >= max ) return 1;\n\n\t\tx = ( x - min ) / ( max - min );\n\n\t\treturn x * x * ( 3 - 2 * x );\n\n\t},\n\n\tsmootherstep: function ( x, min, max ) {\n\n\t\tif ( x <= min ) return 0;\n\t\tif ( x >= max ) return 1;\n\n\t\tx = ( x - min ) / ( max - min );\n\n\t\treturn x * x * x * ( x * ( x * 6 - 15 ) + 10 );\n\n\t},\n\n\t// Random integer from <low, high> interval\n\n\trandInt: function ( low, high ) {\n\n\t\treturn low + Math.floor( Math.random() * ( high - low + 1 ) );\n\n\t},\n\n\t// Random float from <low, high> interval\n\n\trandFloat: function ( low, high ) {\n\n\t\treturn low + Math.random() * ( high - low );\n\n\t},\n\n\t// Random float from <-range/2, range/2> interval\n\n\trandFloatSpread: function ( range ) {\n\n\t\treturn range * ( 0.5 - Math.random() );\n\n\t},\n\n\tdegToRad: function ( degrees ) {\n\n\t\treturn degrees * _Math.DEG2RAD;\n\n\t},\n\n\tradToDeg: function ( radians ) {\n\n\t\treturn radians * _Math.RAD2DEG;\n\n\t},\n\n\tisPowerOfTwo: function ( value ) {\n\n\t\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\n\n\t},\n\n\tceilPowerOfTwo: function ( value ) {\n\n\t\treturn Math.pow( 2, Math.ceil( Math.log( value ) / Math.LN2 ) );\n\n\t},\n\n\tfloorPowerOfTwo: function ( value ) {\n\n\t\treturn Math.pow( 2, Math.floor( Math.log( value ) / Math.LN2 ) );\n\n\t}\n\n};\n\n\nexport { _Math };\n","import { LightShadow } from './LightShadow.js';\nimport { _Math } from '../math/Math.js';\nimport { PerspectiveCamera } from '../cameras/PerspectiveCamera.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction SpotLightShadow() {\n\n\tLightShadow.call( this, new PerspectiveCamera( 50, 1, 0.5, 500 ) );\n\n}\n\nSpotLightShadow.prototype = Object.assign( Object.create( LightShadow.prototype ), {\n\n\tconstructor: SpotLightShadow,\n\n\tisSpotLightShadow: true,\n\n\tupdateMatrices: function ( light ) {\n\n\t\tvar camera = this.camera;\n\n\t\tvar fov = _Math.RAD2DEG * 2 * light.angle;\n\t\tvar aspect = this.mapSize.width / this.mapSize.height;\n\t\tvar far = light.distance || camera.far;\n\n\t\tif ( fov !== camera.fov || aspect !== camera.aspect || far !== camera.far ) {\n\n\t\t\tcamera.fov = fov;\n\t\t\tcamera.aspect = aspect;\n\t\t\tcamera.far = far;\n\t\t\tcamera.updateProjectionMatrix();\n\n\t\t}\n\n\t\tLightShadow.prototype.updateMatrices.call( this, light );\n\n\t}\n\n} );\n\n\nexport { SpotLightShadow };\n","import { Light } from './Light.js';\nimport { SpotLightShadow } from './SpotLightShadow.js';\nimport { Object3D } from '../core/Object3D.js';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction SpotLight( color, intensity, distance, angle, penumbra, decay ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'SpotLight';\n\n\tthis.position.copy( Object3D.DefaultUp );\n\tthis.updateMatrix();\n\n\tthis.target = new Object3D();\n\n\tObject.defineProperty( this, 'power', {\n\t\tget: function () {\n\n\t\t\t// intensity = power per solid angle.\n\t\t\t// ref: equation (17) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t\t\treturn this.intensity * Math.PI;\n\n\t\t},\n\t\tset: function ( power ) {\n\n\t\t\t// intensity = power per solid angle.\n\t\t\t// ref: equation (17) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t\t\tthis.intensity = power / Math.PI;\n\n\t\t}\n\t} );\n\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\n\tthis.angle = ( angle !== undefined ) ? angle : Math.PI / 3;\n\tthis.penumbra = ( penumbra !== undefined ) ? penumbra : 0;\n\tthis.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\n\n\tthis.shadow = new SpotLightShadow();\n\n}\n\nSpotLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: SpotLight,\n\n\tisSpotLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.distance = source.distance;\n\t\tthis.angle = source.angle;\n\t\tthis.penumbra = source.penumbra;\n\t\tthis.decay = source.decay;\n\n\t\tthis.target = source.target.clone();\n\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { SpotLight };\n","import { ShaderMaterial } from './ShaderMaterial.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction RawShaderMaterial( parameters ) {\n\n\tShaderMaterial.call( this, parameters );\n\n\tthis.type = 'RawShaderMaterial';\n\n}\n\nRawShaderMaterial.prototype = Object.create( ShaderMaterial.prototype );\nRawShaderMaterial.prototype.constructor = RawShaderMaterial;\n\nRawShaderMaterial.prototype.isRawShaderMaterial = true;\n\n\nexport { RawShaderMaterial };\n","import { Vector3 } from './Vector3.js';\nimport { Sphere } from './Sphere.js';\nimport { Plane } from './Plane.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author bhouston / http://clara.io\n */\n\nvar _sphere = new Sphere();\nvar _vector = new Vector3();\n\nfunction Frustum( p0, p1, p2, p3, p4, p5 ) {\n\n\tthis.planes = [\n\n\t\t( p0 !== undefined ) ? p0 : new Plane(),\n\t\t( p1 !== undefined ) ? p1 : new Plane(),\n\t\t( p2 !== undefined ) ? p2 : new Plane(),\n\t\t( p3 !== undefined ) ? p3 : new Plane(),\n\t\t( p4 !== undefined ) ? p4 : new Plane(),\n\t\t( p5 !== undefined ) ? p5 : new Plane()\n\n\t];\n\n}\n\nObject.assign( Frustum.prototype, {\n\n\tset: function ( p0, p1, p2, p3, p4, p5 ) {\n\n\t\tvar planes = this.planes;\n\n\t\tplanes[ 0 ].copy( p0 );\n\t\tplanes[ 1 ].copy( p1 );\n\t\tplanes[ 2 ].copy( p2 );\n\t\tplanes[ 3 ].copy( p3 );\n\t\tplanes[ 4 ].copy( p4 );\n\t\tplanes[ 5 ].copy( p5 );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( frustum ) {\n\n\t\tvar planes = this.planes;\n\n\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\tplanes[ i ].copy( frustum.planes[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrix: function ( m ) {\n\n\t\tvar planes = this.planes;\n\t\tvar me = m.elements;\n\t\tvar me0 = me[ 0 ], me1 = me[ 1 ], me2 = me[ 2 ], me3 = me[ 3 ];\n\t\tvar me4 = me[ 4 ], me5 = me[ 5 ], me6 = me[ 6 ], me7 = me[ 7 ];\n\t\tvar me8 = me[ 8 ], me9 = me[ 9 ], me10 = me[ 10 ], me11 = me[ 11 ];\n\t\tvar me12 = me[ 12 ], me13 = me[ 13 ], me14 = me[ 14 ], me15 = me[ 15 ];\n\n\t\tplanes[ 0 ].setComponents( me3 - me0, me7 - me4, me11 - me8, me15 - me12 ).normalize();\n\t\tplanes[ 1 ].setComponents( me3 + me0, me7 + me4, me11 + me8, me15 + me12 ).normalize();\n\t\tplanes[ 2 ].setComponents( me3 + me1, me7 + me5, me11 + me9, me15 + me13 ).normalize();\n\t\tplanes[ 3 ].setComponents( me3 - me1, me7 - me5, me11 - me9, me15 - me13 ).normalize();\n\t\tplanes[ 4 ].setComponents( me3 - me2, me7 - me6, me11 - me10, me15 - me14 ).normalize();\n\t\tplanes[ 5 ].setComponents( me3 + me2, me7 + me6, me11 + me10, me15 + me14 ).normalize();\n\n\t\treturn this;\n\n\t},\n\n\tintersectsObject: function ( object ) {\n\n\t\tvar geometry = object.geometry;\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere.copy( geometry.boundingSphere ).applyMatrix4( object.matrixWorld );\n\n\t\treturn this.intersectsSphere( _sphere );\n\n\t},\n\n\tintersectsSprite: function ( sprite ) {\n\n\t\t_sphere.center.set( 0, 0, 0 );\n\t\t_sphere.radius = 0.7071067811865476;\n\t\t_sphere.applyMatrix4( sprite.matrixWorld );\n\n\t\treturn this.intersectsSphere( _sphere );\n\n\t},\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\tvar planes = this.planes;\n\t\tvar center = sphere.center;\n\t\tvar negRadius = - sphere.radius;\n\n\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\tvar distance = planes[ i ].distanceToPoint( center );\n\n\t\t\tif ( distance < negRadius ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\tvar planes = this.planes;\n\n\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\tvar plane = planes[ i ];\n\n\t\t\t// corner at max distance\n\n\t\t\t_vector.x = plane.normal.x > 0 ? box.max.x : box.min.x;\n\t\t\t_vector.y = plane.normal.y > 0 ? box.max.y : box.min.y;\n\t\t\t_vector.z = plane.normal.z > 0 ? box.max.z : box.min.z;\n\n\t\t\tif ( plane.distanceToPoint( _vector ) < 0 ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\tvar planes = this.planes;\n\n\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\tif ( planes[ i ].distanceToPoint( point ) < 0 ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n} );\n\n\nexport { Frustum };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar Cache = {\n\n\tenabled: false,\n\n\tfiles: {},\n\n\tadd: function ( key, file ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\t// console.log( 'THREE.Cache', 'Adding key:', key );\n\n\t\tthis.files[ key ] = file;\n\n\t},\n\n\tget: function ( key ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\t// console.log( 'THREE.Cache', 'Checking key:', key );\n\n\t\treturn this.files[ key ];\n\n\t},\n\n\tremove: function ( key ) {\n\n\t\tdelete this.files[ key ];\n\n\t},\n\n\tclear: function () {\n\n\t\tthis.files = {};\n\n\t}\n\n};\n\n\nexport { Cache };\n","import { _Math } from './Math.js';\n\n/**\n * @author bhouston / http://clara.io\n * @author WestLangley / http://github.com/WestLangley\n *\n * Ref: https://en.wikipedia.org/wiki/Spherical_coordinate_system\n *\n * The polar angle (phi) is measured from the positive y-axis. The positive y-axis is up.\n * The azimuthal angle (theta) is measured from the positive z-axis.\n */\n\nfunction Spherical( radius, phi, theta ) {\n\n\tthis.radius = ( radius !== undefined ) ? radius : 1.0;\n\tthis.phi = ( phi !== undefined ) ? phi : 0; // polar angle\n\tthis.theta = ( theta !== undefined ) ? theta : 0; // azimuthal angle\n\n\treturn this;\n\n}\n\nObject.assign( Spherical.prototype, {\n\n\tset: function ( radius, phi, theta ) {\n\n\t\tthis.radius = radius;\n\t\tthis.phi = phi;\n\t\tthis.theta = theta;\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( other ) {\n\n\t\tthis.radius = other.radius;\n\t\tthis.phi = other.phi;\n\t\tthis.theta = other.theta;\n\n\t\treturn this;\n\n\t},\n\n\t// restrict phi to be betwee EPS and PI-EPS\n\tmakeSafe: function () {\n\n\t\tvar EPS = 0.000001;\n\t\tthis.phi = Math.max( EPS, Math.min( Math.PI - EPS, this.phi ) );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromVector3: function ( v ) {\n\n\t\treturn this.setFromCartesianCoords( v.x, v.y, v.z );\n\n\t},\n\n\tsetFromCartesianCoords: function ( x, y, z ) {\n\n\t\tthis.radius = Math.sqrt( x * x + y * y + z * z );\n\n\t\tif ( this.radius === 0 ) {\n\n\t\t\tthis.theta = 0;\n\t\t\tthis.phi = 0;\n\n\t\t} else {\n\n\t\t\tthis.theta = Math.atan2( x, z );\n\t\t\tthis.phi = Math.acos( _Math.clamp( y / this.radius, - 1, 1 ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Spherical };\n","import { KeyframeTrack } from '../KeyframeTrack.js';\n\n/**\n *\n * A Track of numeric keyframe values.\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction NumberKeyframeTrack( name, times, values, interpolation ) {\n\n\tKeyframeTrack.call( this, name, times, values, interpolation );\n\n}\n\nNumberKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: NumberKeyframeTrack,\n\n\tValueTypeName: 'number'\n\n\t// ValueBufferType is inherited\n\n\t// DefaultInterpolation is inherited\n\n} );\n\nexport { NumberKeyframeTrack };\n","import { Vector3 } from './Vector3.js';\n\nvar _v1 = new Vector3();\nvar _m1 = new Matrix4();\nvar _zero = new Vector3( 0, 0, 0 );\nvar _one = new Vector3( 1, 1, 1 );\nvar _x = new Vector3();\nvar _y = new Vector3();\nvar _z = new Vector3();\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author philogb / http://blog.thejit.org/\n * @author jordi_ros / http://plattsoft.com\n * @author D1plo1d / http://github.com/D1plo1d\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author timknip / http://www.floorplanner.com/\n * @author bhouston / http://clara.io\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction Matrix4() {\n\n\tthis.elements = [\n\n\t\t1, 0, 0, 0,\n\t\t0, 1, 0, 0,\n\t\t0, 0, 1, 0,\n\t\t0, 0, 0, 1\n\n\t];\n\n\tif ( arguments.length > 0 ) {\n\n\t\tconsole.error( 'THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.' );\n\n\t}\n\n}\n\nObject.assign( Matrix4.prototype, {\n\n\tisMatrix4: true,\n\n\tset: function ( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\n\t\tte[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\n\t\tte[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\n\t\tte[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\n\n\t\treturn this;\n\n\t},\n\n\tidentity: function () {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new Matrix4().fromArray( this.elements );\n\n\t},\n\n\tcopy: function ( m ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ]; te[ 3 ] = me[ 3 ];\n\t\tte[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ]; te[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ];\n\t\tte[ 8 ] = me[ 8 ]; te[ 9 ] = me[ 9 ]; te[ 10 ] = me[ 10 ]; te[ 11 ] = me[ 11 ];\n\t\tte[ 12 ] = me[ 12 ]; te[ 13 ] = me[ 13 ]; te[ 14 ] = me[ 14 ]; te[ 15 ] = me[ 15 ];\n\n\t\treturn this;\n\n\t},\n\n\tcopyPosition: function ( m ) {\n\n\t\tvar te = this.elements, me = m.elements;\n\n\t\tte[ 12 ] = me[ 12 ];\n\t\tte[ 13 ] = me[ 13 ];\n\t\tte[ 14 ] = me[ 14 ];\n\n\t\treturn this;\n\n\t},\n\n\textractBasis: function ( xAxis, yAxis, zAxis ) {\n\n\t\txAxis.setFromMatrixColumn( this, 0 );\n\t\tyAxis.setFromMatrixColumn( this, 1 );\n\t\tzAxis.setFromMatrixColumn( this, 2 );\n\n\t\treturn this;\n\n\t},\n\n\tmakeBasis: function ( xAxis, yAxis, zAxis ) {\n\n\t\tthis.set(\n\t\t\txAxis.x, yAxis.x, zAxis.x, 0,\n\t\t\txAxis.y, yAxis.y, zAxis.y, 0,\n\t\t\txAxis.z, yAxis.z, zAxis.z, 0,\n\t\t\t0, 0, 0, 1\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\textractRotation: function ( m ) {\n\n\t\t// this method does not support reflection matrices\n\n\t\tvar te = this.elements;\n\t\tvar me = m.elements;\n\n\t\tvar scaleX = 1 / _v1.setFromMatrixColumn( m, 0 ).length();\n\t\tvar scaleY = 1 / _v1.setFromMatrixColumn( m, 1 ).length();\n\t\tvar scaleZ = 1 / _v1.setFromMatrixColumn( m, 2 ).length();\n\n\t\tte[ 0 ] = me[ 0 ] * scaleX;\n\t\tte[ 1 ] = me[ 1 ] * scaleX;\n\t\tte[ 2 ] = me[ 2 ] * scaleX;\n\t\tte[ 3 ] = 0;\n\n\t\tte[ 4 ] = me[ 4 ] * scaleY;\n\t\tte[ 5 ] = me[ 5 ] * scaleY;\n\t\tte[ 6 ] = me[ 6 ] * scaleY;\n\t\tte[ 7 ] = 0;\n\n\t\tte[ 8 ] = me[ 8 ] * scaleZ;\n\t\tte[ 9 ] = me[ 9 ] * scaleZ;\n\t\tte[ 10 ] = me[ 10 ] * scaleZ;\n\t\tte[ 11 ] = 0;\n\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationFromEuler: function ( euler ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tconsole.error( 'THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\tvar te = this.elements;\n\n\t\tvar x = euler.x, y = euler.y, z = euler.z;\n\t\tvar a = Math.cos( x ), b = Math.sin( x );\n\t\tvar c = Math.cos( y ), d = Math.sin( y );\n\t\tvar e = Math.cos( z ), f = Math.sin( z );\n\n\t\tif ( euler.order === 'XYZ' ) {\n\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - c * f;\n\t\t\tte[ 8 ] = d;\n\n\t\t\tte[ 1 ] = af + be * d;\n\t\t\tte[ 5 ] = ae - bf * d;\n\t\t\tte[ 9 ] = - b * c;\n\n\t\t\tte[ 2 ] = bf - ae * d;\n\t\t\tte[ 6 ] = be + af * d;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YXZ' ) {\n\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce + df * b;\n\t\t\tte[ 4 ] = de * b - cf;\n\t\t\tte[ 8 ] = a * d;\n\n\t\t\tte[ 1 ] = a * f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b;\n\n\t\t\tte[ 2 ] = cf * b - de;\n\t\t\tte[ 6 ] = df + ce * b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZXY' ) {\n\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce - df * b;\n\t\t\tte[ 4 ] = - a * f;\n\t\t\tte[ 8 ] = de + cf * b;\n\n\t\t\tte[ 1 ] = cf + de * b;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = df - ce * b;\n\n\t\t\tte[ 2 ] = - a * d;\n\t\t\tte[ 6 ] = b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZYX' ) {\n\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = be * d - af;\n\t\t\tte[ 8 ] = ae * d + bf;\n\n\t\t\tte[ 1 ] = c * f;\n\t\t\tte[ 5 ] = bf * d + ae;\n\t\t\tte[ 9 ] = af * d - be;\n\n\t\t\tte[ 2 ] = - d;\n\t\t\tte[ 6 ] = b * c;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YZX' ) {\n\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = bd - ac * f;\n\t\t\tte[ 8 ] = bc * f + ad;\n\n\t\t\tte[ 1 ] = f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b * e;\n\n\t\t\tte[ 2 ] = - d * e;\n\t\t\tte[ 6 ] = ad * f + bc;\n\t\t\tte[ 10 ] = ac - bd * f;\n\n\t\t} else if ( euler.order === 'XZY' ) {\n\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - f;\n\t\t\tte[ 8 ] = d * e;\n\n\t\t\tte[ 1 ] = ac * f + bd;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = ad * f - bc;\n\n\t\t\tte[ 2 ] = bc * f - ad;\n\t\t\tte[ 6 ] = b * e;\n\t\t\tte[ 10 ] = bd * f + ac;\n\n\t\t}\n\n\t\t// bottom row\n\t\tte[ 3 ] = 0;\n\t\tte[ 7 ] = 0;\n\t\tte[ 11 ] = 0;\n\n\t\t// last column\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationFromQuaternion: function ( q ) {\n\n\t\treturn this.compose( _zero, q, _one );\n\n\t},\n\n\tlookAt: function ( eye, target, up ) {\n\n\t\tvar te = this.elements;\n\n\t\t_z.subVectors( eye, target );\n\n\t\tif ( _z.lengthSq() === 0 ) {\n\n\t\t\t// eye and target are in the same position\n\n\t\t\t_z.z = 1;\n\n\t\t}\n\n\t\t_z.normalize();\n\t\t_x.crossVectors( up, _z );\n\n\t\tif ( _x.lengthSq() === 0 ) {\n\n\t\t\t// up and z are parallel\n\n\t\t\tif ( Math.abs( up.z ) === 1 ) {\n\n\t\t\t\t_z.x += 0.0001;\n\n\t\t\t} else {\n\n\t\t\t\t_z.z += 0.0001;\n\n\t\t\t}\n\n\t\t\t_z.normalize();\n\t\t\t_x.crossVectors( up, _z );\n\n\t\t}\n\n\t\t_x.normalize();\n\t\t_y.crossVectors( _z, _x );\n\n\t\tte[ 0 ] = _x.x; te[ 4 ] = _y.x; te[ 8 ] = _z.x;\n\t\tte[ 1 ] = _x.y; te[ 5 ] = _y.y; te[ 9 ] = _z.y;\n\t\tte[ 2 ] = _x.z; te[ 6 ] = _y.z; te[ 10 ] = _z.z;\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( m, n ) {\n\n\t\tif ( n !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.' );\n\t\t\treturn this.multiplyMatrices( m, n );\n\n\t\t}\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t},\n\n\tpremultiply: function ( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t},\n\n\tmultiplyMatrices: function ( a, b ) {\n\n\t\tvar ae = a.elements;\n\t\tvar be = b.elements;\n\t\tvar te = this.elements;\n\n\t\tvar a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\n\t\tvar a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\n\t\tvar a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\n\t\tvar a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\n\n\t\tvar b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\n\t\tvar b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\n\t\tvar b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\n\t\tvar b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\n\t\tte[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\n\t\tte[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\n\t\tte[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\n\t\tte[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\n\t\tte[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\n\t\tte[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\n\t\tte[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\n\t\tte[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\n\t\tte[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\n\n\t\tte[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\n\t\tte[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\n\t\tte[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\n\t\tte[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\n\t\tte[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\n\t\tte[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\n\t\tte[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\n\n\t\treturn this;\n\n\t},\n\n\tapplyToBufferAttribute: function ( attribute ) {\n\n\t\tfor ( var i = 0, l = attribute.count; i < l; i ++ ) {\n\n\t\t\t_v1.x = attribute.getX( i );\n\t\t\t_v1.y = attribute.getY( i );\n\t\t\t_v1.z = attribute.getZ( i );\n\n\t\t\t_v1.applyMatrix4( this );\n\n\t\t\tattribute.setXYZ( i, _v1.x, _v1.y, _v1.z );\n\n\t\t}\n\n\t\treturn attribute;\n\n\t},\n\n\tdeterminant: function () {\n\n\t\tvar te = this.elements;\n\n\t\tvar n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\n\t\tvar n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\n\t\tvar n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\n\t\tvar n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\n\n\t\t//TODO: make this more efficient\n\t\t//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\n\n\t\treturn (\n\t\t\tn41 * (\n\t\t\t\t+ n14 * n23 * n32\n\t\t\t\t - n13 * n24 * n32\n\t\t\t\t - n14 * n22 * n33\n\t\t\t\t + n12 * n24 * n33\n\t\t\t\t + n13 * n22 * n34\n\t\t\t\t - n12 * n23 * n34\n\t\t\t) +\n\t\t\tn42 * (\n\t\t\t\t+ n11 * n23 * n34\n\t\t\t\t - n11 * n24 * n33\n\t\t\t\t + n14 * n21 * n33\n\t\t\t\t - n13 * n21 * n34\n\t\t\t\t + n13 * n24 * n31\n\t\t\t\t - n14 * n23 * n31\n\t\t\t) +\n\t\t\tn43 * (\n\t\t\t\t+ n11 * n24 * n32\n\t\t\t\t - n11 * n22 * n34\n\t\t\t\t - n14 * n21 * n32\n\t\t\t\t + n12 * n21 * n34\n\t\t\t\t + n14 * n22 * n31\n\t\t\t\t - n12 * n24 * n31\n\t\t\t) +\n\t\t\tn44 * (\n\t\t\t\t- n13 * n22 * n31\n\t\t\t\t - n11 * n23 * n32\n\t\t\t\t + n11 * n22 * n33\n\t\t\t\t + n13 * n21 * n32\n\t\t\t\t - n12 * n21 * n33\n\t\t\t\t + n12 * n23 * n31\n\t\t\t)\n\n\t\t);\n\n\t},\n\n\ttranspose: function () {\n\n\t\tvar te = this.elements;\n\t\tvar tmp;\n\n\t\ttmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\n\t\ttmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\n\t\ttmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\n\n\t\ttmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\n\t\ttmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\n\t\ttmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\n\n\t\treturn this;\n\n\t},\n\n\tsetPosition: function ( x, y, z ) {\n\n\t\tvar te = this.elements;\n\n\t\tif ( x.isVector3 ) {\n\n\t\t\tte[ 12 ] = x.x;\n\t\t\tte[ 13 ] = x.y;\n\t\t\tte[ 14 ] = x.z;\n\n\t\t} else {\n\n\t\t\tte[ 12 ] = x;\n\t\t\tte[ 13 ] = y;\n\t\t\tte[ 14 ] = z;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetInverse: function ( m, throwOnDegenerate ) {\n\n\t\t// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\n\t\tvar te = this.elements,\n\t\t\tme = m.elements,\n\n\t\t\tn11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ], n41 = me[ 3 ],\n\t\t\tn12 = me[ 4 ], n22 = me[ 5 ], n32 = me[ 6 ], n42 = me[ 7 ],\n\t\t\tn13 = me[ 8 ], n23 = me[ 9 ], n33 = me[ 10 ], n43 = me[ 11 ],\n\t\t\tn14 = me[ 12 ], n24 = me[ 13 ], n34 = me[ 14 ], n44 = me[ 15 ],\n\n\t\t\tt11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44,\n\t\t\tt12 = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44,\n\t\t\tt13 = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44,\n\t\t\tt14 = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\n\n\t\tvar det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\n\n\t\tif ( det === 0 ) {\n\n\t\t\tvar msg = \"THREE.Matrix4: .getInverse() can't invert matrix, determinant is 0\";\n\n\t\t\tif ( throwOnDegenerate === true ) {\n\n\t\t\t\tthrow new Error( msg );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( msg );\n\n\t\t\t}\n\n\t\t\treturn this.identity();\n\n\t\t}\n\n\t\tvar detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44 ) * detInv;\n\t\tte[ 2 ] = ( n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44 ) * detInv;\n\t\tte[ 3 ] = ( n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43 ) * detInv;\n\n\t\tte[ 4 ] = t12 * detInv;\n\t\tte[ 5 ] = ( n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44 ) * detInv;\n\t\tte[ 6 ] = ( n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44 ) * detInv;\n\t\tte[ 7 ] = ( n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43 ) * detInv;\n\n\t\tte[ 8 ] = t13 * detInv;\n\t\tte[ 9 ] = ( n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44 ) * detInv;\n\t\tte[ 10 ] = ( n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44 ) * detInv;\n\t\tte[ 11 ] = ( n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43 ) * detInv;\n\n\t\tte[ 12 ] = t14 * detInv;\n\t\tte[ 13 ] = ( n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34 ) * detInv;\n\t\tte[ 14 ] = ( n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34 ) * detInv;\n\t\tte[ 15 ] = ( n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33 ) * detInv;\n\n\t\treturn this;\n\n\t},\n\n\tscale: function ( v ) {\n\n\t\tvar te = this.elements;\n\t\tvar x = v.x, y = v.y, z = v.z;\n\n\t\tte[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\n\t\tte[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\n\t\tte[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\n\t\tte[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\n\n\t\treturn this;\n\n\t},\n\n\tgetMaxScaleOnAxis: function () {\n\n\t\tvar te = this.elements;\n\n\t\tvar scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\n\t\tvar scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\n\t\tvar scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\n\n\t\treturn Math.sqrt( Math.max( scaleXSq, scaleYSq, scaleZSq ) );\n\n\t},\n\n\tmakeTranslation: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, x,\n\t\t\t0, 1, 0, y,\n\t\t\t0, 0, 1, z,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationX: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, c, - s, 0,\n\t\t\t0, s, c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationY: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t c, 0, s, 0,\n\t\t\t 0, 1, 0, 0,\n\t\t\t- s, 0, c, 0,\n\t\t\t 0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationZ: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\tc, - s, 0, 0,\n\t\t\ts, c, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationAxis: function ( axis, angle ) {\n\n\t\t// Based on http://www.gamedev.net/reference/articles/article1199.asp\n\n\t\tvar c = Math.cos( angle );\n\t\tvar s = Math.sin( angle );\n\t\tvar t = 1 - c;\n\t\tvar x = axis.x, y = axis.y, z = axis.z;\n\t\tvar tx = t * x, ty = t * y;\n\n\t\tthis.set(\n\n\t\t\ttx * x + c, tx * y - s * z, tx * z + s * y, 0,\n\t\t\ttx * y + s * z, ty * y + c, ty * z - s * x, 0,\n\t\t\ttx * z - s * y, ty * z + s * x, t * z * z + c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\t return this;\n\n\t},\n\n\tmakeScale: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\tx, 0, 0, 0,\n\t\t\t0, y, 0, 0,\n\t\t\t0, 0, z, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeShear: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\t1, y, z, 0,\n\t\t\tx, 1, z, 0,\n\t\t\tx, y, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tcompose: function ( position, quaternion, scale ) {\n\n\t\tvar te = this.elements;\n\n\t\tvar x = quaternion._x, y = quaternion._y, z = quaternion._z, w = quaternion._w;\n\t\tvar x2 = x + x,\ty2 = y + y, z2 = z + z;\n\t\tvar xx = x * x2, xy = x * y2, xz = x * z2;\n\t\tvar yy = y * y2, yz = y * z2, zz = z * z2;\n\t\tvar wx = w * x2, wy = w * y2, wz = w * z2;\n\n\t\tvar sx = scale.x, sy = scale.y, sz = scale.z;\n\n\t\tte[ 0 ] = ( 1 - ( yy + zz ) ) * sx;\n\t\tte[ 1 ] = ( xy + wz ) * sx;\n\t\tte[ 2 ] = ( xz - wy ) * sx;\n\t\tte[ 3 ] = 0;\n\n\t\tte[ 4 ] = ( xy - wz ) * sy;\n\t\tte[ 5 ] = ( 1 - ( xx + zz ) ) * sy;\n\t\tte[ 6 ] = ( yz + wx ) * sy;\n\t\tte[ 7 ] = 0;\n\n\t\tte[ 8 ] = ( xz + wy ) * sz;\n\t\tte[ 9 ] = ( yz - wx ) * sz;\n\t\tte[ 10 ] = ( 1 - ( xx + yy ) ) * sz;\n\t\tte[ 11 ] = 0;\n\n\t\tte[ 12 ] = position.x;\n\t\tte[ 13 ] = position.y;\n\t\tte[ 14 ] = position.z;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tdecompose: function ( position, quaternion, scale ) {\n\n\t\tvar te = this.elements;\n\n\t\tvar sx = _v1.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\n\t\tvar sy = _v1.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\n\t\tvar sz = _v1.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\n\n\t\t// if determine is negative, we need to invert one scale\n\t\tvar det = this.determinant();\n\t\tif ( det < 0 ) sx = - sx;\n\n\t\tposition.x = te[ 12 ];\n\t\tposition.y = te[ 13 ];\n\t\tposition.z = te[ 14 ];\n\n\t\t// scale the rotation part\n\t\t_m1.copy( this );\n\n\t\tvar invSX = 1 / sx;\n\t\tvar invSY = 1 / sy;\n\t\tvar invSZ = 1 / sz;\n\n\t\t_m1.elements[ 0 ] *= invSX;\n\t\t_m1.elements[ 1 ] *= invSX;\n\t\t_m1.elements[ 2 ] *= invSX;\n\n\t\t_m1.elements[ 4 ] *= invSY;\n\t\t_m1.elements[ 5 ] *= invSY;\n\t\t_m1.elements[ 6 ] *= invSY;\n\n\t\t_m1.elements[ 8 ] *= invSZ;\n\t\t_m1.elements[ 9 ] *= invSZ;\n\t\t_m1.elements[ 10 ] *= invSZ;\n\n\t\tquaternion.setFromRotationMatrix( _m1 );\n\n\t\tscale.x = sx;\n\t\tscale.y = sy;\n\t\tscale.z = sz;\n\n\t\treturn this;\n\n\t},\n\n\tmakePerspective: function ( left, right, top, bottom, near, far ) {\n\n\t\tif ( far === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.' );\n\n\t\t}\n\n\t\tvar te = this.elements;\n\t\tvar x = 2 * near / ( right - left );\n\t\tvar y = 2 * near / ( top - bottom );\n\n\t\tvar a = ( right + left ) / ( right - left );\n\t\tvar b = ( top + bottom ) / ( top - bottom );\n\t\tvar c = - ( far + near ) / ( far - near );\n\t\tvar d = - 2 * far * near / ( far - near );\n\n\t\tte[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a;\tte[ 12 ] = 0;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b;\tte[ 13 ] = 0;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c;\tte[ 14 ] = d;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\n\n\t\treturn this;\n\n\t},\n\n\tmakeOrthographic: function ( left, right, top, bottom, near, far ) {\n\n\t\tvar te = this.elements;\n\t\tvar w = 1.0 / ( right - left );\n\t\tvar h = 1.0 / ( top - bottom );\n\t\tvar p = 1.0 / ( far - near );\n\n\t\tvar x = ( right + left ) * w;\n\t\tvar y = ( top + bottom ) * h;\n\t\tvar z = ( far + near ) * p;\n\n\t\tte[ 0 ] = 2 * w;\tte[ 4 ] = 0;\tte[ 8 ] = 0;\tte[ 12 ] = - x;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = 2 * h;\tte[ 9 ] = 0;\tte[ 13 ] = - y;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = - 2 * p;\tte[ 14 ] = - z;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = 0;\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( matrix ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = matrix.elements;\n\n\t\tfor ( var i = 0; i < 16; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tfor ( var i = 0; i < 16; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tvar te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\t\tarray[ offset + 9 ] = te[ 9 ];\n\t\tarray[ offset + 10 ] = te[ 10 ];\n\t\tarray[ offset + 11 ] = te[ 11 ];\n\n\t\tarray[ offset + 12 ] = te[ 12 ];\n\t\tarray[ offset + 13 ] = te[ 13 ];\n\t\tarray[ offset + 14 ] = te[ 14 ];\n\t\tarray[ offset + 15 ] = te[ 15 ];\n\n\t\treturn array;\n\n\t}\n\n} );\n\n\nexport { Matrix4 };\n","import { KeyframeTrack } from '../KeyframeTrack.js';\n\n/**\n *\n * A Track of vectored keyframe values.\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction VectorKeyframeTrack( name, times, values, interpolation ) {\n\n\tKeyframeTrack.call( this, name, times, values, interpolation );\n\n}\n\nVectorKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: VectorKeyframeTrack,\n\n\tValueTypeName: 'vector'\n\n\t// ValueBufferType is inherited\n\n\t// DefaultInterpolation is inherited\n\n} );\n\nexport { VectorKeyframeTrack };\n","import { Path } from './Path.js';\nimport { _Math } from '../../math/Math.js';\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * Defines a 2d shape plane using paths.\n **/\n\n// STEP 1 Create a path.\n// STEP 2 Turn path into shape.\n// STEP 3 ExtrudeGeometry takes in Shape/Shapes\n// STEP 3a - Extract points from each shape, turn to vertices\n// STEP 3b - Triangulate each shape, add faces.\n\nfunction Shape( points ) {\n\n\tPath.call( this, points );\n\n\tthis.uuid = _Math.generateUUID();\n\n\tthis.type = 'Shape';\n\n\tthis.holes = [];\n\n}\n\nShape.prototype = Object.assign( Object.create( Path.prototype ), {\n\n\tconstructor: Shape,\n\n\tgetPointsHoles: function ( divisions ) {\n\n\t\tvar holesPts = [];\n\n\t\tfor ( var i = 0, l = this.holes.length; i < l; i ++ ) {\n\n\t\t\tholesPts[ i ] = this.holes[ i ].getPoints( divisions );\n\n\t\t}\n\n\t\treturn holesPts;\n\n\t},\n\n\t// get points of shape and holes (keypoints based on segments parameter)\n\n\textractPoints: function ( divisions ) {\n\n\t\treturn {\n\n\t\t\tshape: this.getPoints( divisions ),\n\t\t\tholes: this.getPointsHoles( divisions )\n\n\t\t};\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tPath.prototype.copy.call( this, source );\n\n\t\tthis.holes = [];\n\n\t\tfor ( var i = 0, l = source.holes.length; i < l; i ++ ) {\n\n\t\t\tvar hole = source.holes[ i ];\n\n\t\t\tthis.holes.push( hole.clone() );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar data = Path.prototype.toJSON.call( this );\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.holes = [];\n\n\t\tfor ( var i = 0, l = this.holes.length; i < l; i ++ ) {\n\n\t\t\tvar hole = this.holes[ i ];\n\t\t\tdata.holes.push( hole.toJSON() );\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tfromJSON: function ( json ) {\n\n\t\tPath.prototype.fromJSON.call( this, json );\n\n\t\tthis.uuid = json.uuid;\n\t\tthis.holes = [];\n\n\t\tfor ( var i = 0, l = json.holes.length; i < l; i ++ ) {\n\n\t\t\tvar hole = json.holes[ i ];\n\t\t\tthis.holes.push( new Path().fromJSON( hole ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Shape };\n","import { EllipseCurve } from './EllipseCurve.js';\n\n\nfunction ArcCurve( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\tEllipseCurve.call( this, aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\n\n\tthis.type = 'ArcCurve';\n\n}\n\nArcCurve.prototype = Object.create( EllipseCurve.prototype );\nArcCurve.prototype.constructor = ArcCurve;\n\nArcCurve.prototype.isArcCurve = true;\n\n\nexport { ArcCurve };\n","import { Curve } from '../core/Curve.js';\nimport { CubicBezier } from '../core/Interpolations.js';\nimport { Vector3 } from '../../math/Vector3.js';\n\n\nfunction CubicBezierCurve3( v0, v1, v2, v3 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'CubicBezierCurve3';\n\n\tthis.v0 = v0 || new Vector3();\n\tthis.v1 = v1 || new Vector3();\n\tthis.v2 = v2 || new Vector3();\n\tthis.v3 = v3 || new Vector3();\n\n}\n\nCubicBezierCurve3.prototype = Object.create( Curve.prototype );\nCubicBezierCurve3.prototype.constructor = CubicBezierCurve3;\n\nCubicBezierCurve3.prototype.isCubicBezierCurve3 = true;\n\nCubicBezierCurve3.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new Vector3();\n\n\tvar v0 = this.v0, v1 = this.v1, v2 = this.v2, v3 = this.v3;\n\n\tpoint.set(\n\t\tCubicBezier( t, v0.x, v1.x, v2.x, v3.x ),\n\t\tCubicBezier( t, v0.y, v1.y, v2.y, v3.y ),\n\t\tCubicBezier( t, v0.z, v1.z, v2.z, v3.z )\n\t);\n\n\treturn point;\n\n};\n\nCubicBezierCurve3.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v0.copy( source.v0 );\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\tthis.v3.copy( source.v3 );\n\n\treturn this;\n\n};\n\nCubicBezierCurve3.prototype.toJSON = function () {\n\n\tvar data = Curve.prototype.toJSON.call( this );\n\n\tdata.v0 = this.v0.toArray();\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\tdata.v3 = this.v3.toArray();\n\n\treturn data;\n\n};\n\nCubicBezierCurve3.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v0.fromArray( json.v0 );\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\tthis.v3.fromArray( json.v3 );\n\n\treturn this;\n\n};\n\n\nexport { CubicBezierCurve3 };\n","import { Vector3 } from '../../math/Vector3.js';\nimport { Curve } from '../core/Curve.js';\n\n\nfunction LineCurve3( v1, v2 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'LineCurve3';\n\n\tthis.v1 = v1 || new Vector3();\n\tthis.v2 = v2 || new Vector3();\n\n}\n\nLineCurve3.prototype = Object.create( Curve.prototype );\nLineCurve3.prototype.constructor = LineCurve3;\n\nLineCurve3.prototype.isLineCurve3 = true;\n\nLineCurve3.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new Vector3();\n\n\tif ( t === 1 ) {\n\n\t\tpoint.copy( this.v2 );\n\n\t} else {\n\n\t\tpoint.copy( this.v2 ).sub( this.v1 );\n\t\tpoint.multiplyScalar( t ).add( this.v1 );\n\n\t}\n\n\treturn point;\n\n};\n\n// Line curve is linear, so we can overwrite default getPointAt\n\nLineCurve3.prototype.getPointAt = function ( u, optionalTarget ) {\n\n\treturn this.getPoint( u, optionalTarget );\n\n};\n\nLineCurve3.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\n\treturn this;\n\n};\n\nLineCurve3.prototype.toJSON = function () {\n\n\tvar data = Curve.prototype.toJSON.call( this );\n\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\n\treturn data;\n\n};\n\nLineCurve3.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\n\treturn this;\n\n};\n\n\nexport { LineCurve3 };\n","import { Curve } from '../core/Curve.js';\nimport { QuadraticBezier } from '../core/Interpolations.js';\nimport { Vector3 } from '../../math/Vector3.js';\n\n\nfunction QuadraticBezierCurve3( v0, v1, v2 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'QuadraticBezierCurve3';\n\n\tthis.v0 = v0 || new Vector3();\n\tthis.v1 = v1 || new Vector3();\n\tthis.v2 = v2 || new Vector3();\n\n}\n\nQuadraticBezierCurve3.prototype = Object.create( Curve.prototype );\nQuadraticBezierCurve3.prototype.constructor = QuadraticBezierCurve3;\n\nQuadraticBezierCurve3.prototype.isQuadraticBezierCurve3 = true;\n\nQuadraticBezierCurve3.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new Vector3();\n\n\tvar v0 = this.v0, v1 = this.v1, v2 = this.v2;\n\n\tpoint.set(\n\t\tQuadraticBezier( t, v0.x, v1.x, v2.x ),\n\t\tQuadraticBezier( t, v0.y, v1.y, v2.y ),\n\t\tQuadraticBezier( t, v0.z, v1.z, v2.z )\n\t);\n\n\treturn point;\n\n};\n\nQuadraticBezierCurve3.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v0.copy( source.v0 );\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\n\treturn this;\n\n};\n\nQuadraticBezierCurve3.prototype.toJSON = function () {\n\n\tvar data = Curve.prototype.toJSON.call( this );\n\n\tdata.v0 = this.v0.toArray();\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\n\treturn data;\n\n};\n\nQuadraticBezierCurve3.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v0.fromArray( json.v0 );\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\n\treturn this;\n\n};\n\n\nexport { QuadraticBezierCurve3 };\n","export { ArcCurve } from './ArcCurve.js';\nexport { CatmullRomCurve3 } from './CatmullRomCurve3.js';\nexport { CubicBezierCurve } from './CubicBezierCurve.js';\nexport { CubicBezierCurve3 } from './CubicBezierCurve3.js';\nexport { EllipseCurve } from './EllipseCurve.js';\nexport { LineCurve } from './LineCurve.js';\nexport { LineCurve3 } from './LineCurve3.js';\nexport { QuadraticBezierCurve } from './QuadraticBezierCurve.js';\nexport { QuadraticBezierCurve3 } from './QuadraticBezierCurve3.js';\nexport { SplineCurve } from './SplineCurve.js';\n","import { DefaultLoadingManager } from './LoadingManager.js';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction Loader( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n\tthis.crossOrigin = 'anonymous';\n\tthis.path = '';\n\tthis.resourcePath = '';\n\n}\n\nObject.assign( Loader.prototype, {\n\n\tload: function ( /* url, onLoad, onProgress, onError */ ) {},\n\n\tparse: function ( /* data */ ) {},\n\n\tsetCrossOrigin: function ( crossOrigin ) {\n\n\t\tthis.crossOrigin = crossOrigin;\n\t\treturn this;\n\n\t},\n\n\tsetPath: function ( path ) {\n\n\t\tthis.path = path;\n\t\treturn this;\n\n\t},\n\n\tsetResourcePath: function ( resourcePath ) {\n\n\t\tthis.resourcePath = resourcePath;\n\t\treturn this;\n\n\t}\n\n} );\n\nexport { Loader };\n","/**\n * @author timothypratley / https://github.com/timothypratley\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { PolyhedronBufferGeometry } from './PolyhedronGeometry.js';\n\n// OctahedronGeometry\n\nfunction OctahedronGeometry( radius, detail ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'OctahedronGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n\tthis.fromBufferGeometry( new OctahedronBufferGeometry( radius, detail ) );\n\tthis.mergeVertices();\n\n}\n\nOctahedronGeometry.prototype = Object.create( Geometry.prototype );\nOctahedronGeometry.prototype.constructor = OctahedronGeometry;\n\n// OctahedronBufferGeometry\n\nfunction OctahedronBufferGeometry( radius, detail ) {\n\n\tvar vertices = [\n\t\t1, 0, 0, \t- 1, 0, 0,\t0, 1, 0,\n\t\t0, - 1, 0, \t0, 0, 1,\t0, 0, - 1\n\t];\n\n\tvar indices = [\n\t\t0, 2, 4,\t0, 4, 3,\t0, 3, 5,\n\t\t0, 5, 2,\t1, 2, 5,\t1, 5, 3,\n\t\t1, 3, 4,\t1, 4, 2\n\t];\n\n\tPolyhedronBufferGeometry.call( this, vertices, indices, radius, detail );\n\n\tthis.type = 'OctahedronBufferGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n}\n\nOctahedronBufferGeometry.prototype = Object.create( PolyhedronBufferGeometry.prototype );\nOctahedronBufferGeometry.prototype.constructor = OctahedronBufferGeometry;\n\n\nexport { OctahedronGeometry, OctahedronBufferGeometry };\n","/**\n * @author timothypratley / https://github.com/timothypratley\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { PolyhedronBufferGeometry } from './PolyhedronGeometry.js';\n\n// IcosahedronGeometry\n\nfunction IcosahedronGeometry( radius, detail ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'IcosahedronGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n\tthis.fromBufferGeometry( new IcosahedronBufferGeometry( radius, detail ) );\n\tthis.mergeVertices();\n\n}\n\nIcosahedronGeometry.prototype = Object.create( Geometry.prototype );\nIcosahedronGeometry.prototype.constructor = IcosahedronGeometry;\n\n// IcosahedronBufferGeometry\n\nfunction IcosahedronBufferGeometry( radius, detail ) {\n\n\tvar t = ( 1 + Math.sqrt( 5 ) ) / 2;\n\n\tvar vertices = [\n\t\t- 1, t, 0, \t1, t, 0, \t- 1, - t, 0, \t1, - t, 0,\n\t\t 0, - 1, t, \t0, 1, t,\t0, - 1, - t, \t0, 1, - t,\n\t\t t, 0, - 1, \tt, 0, 1, \t- t, 0, - 1, \t- t, 0, 1\n\t];\n\n\tvar indices = [\n\t\t 0, 11, 5, \t0, 5, 1, \t0, 1, 7, \t0, 7, 10, \t0, 10, 11,\n\t\t 1, 5, 9, \t5, 11, 4,\t11, 10, 2,\t10, 7, 6,\t7, 1, 8,\n\t\t 3, 9, 4, \t3, 4, 2,\t3, 2, 6,\t3, 6, 8,\t3, 8, 9,\n\t\t 4, 9, 5, \t2, 4, 11,\t6, 2, 10,\t8, 6, 7,\t9, 8, 1\n\t];\n\n\tPolyhedronBufferGeometry.call( this, vertices, indices, radius, detail );\n\n\tthis.type = 'IcosahedronBufferGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n}\n\nIcosahedronBufferGeometry.prototype = Object.create( PolyhedronBufferGeometry.prototype );\nIcosahedronBufferGeometry.prototype.constructor = IcosahedronBufferGeometry;\n\n\nexport { IcosahedronGeometry, IcosahedronBufferGeometry };\n","/**\n * @author oosmoxiecode\n * @author Mugen87 / https://github.com/Mugen87\n *\n * based on http://www.blackpawn.com/texts/pqtorus/\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { Vector3 } from '../math/Vector3.js';\n\n// TorusKnotGeometry\n\nfunction TorusKnotGeometry( radius, tube, tubularSegments, radialSegments, p, q, heightScale ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'TorusKnotGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\ttube: tube,\n\t\ttubularSegments: tubularSegments,\n\t\tradialSegments: radialSegments,\n\t\tp: p,\n\t\tq: q\n\t};\n\n\tif ( heightScale !== undefined ) console.warn( 'THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.' );\n\n\tthis.fromBufferGeometry( new TorusKnotBufferGeometry( radius, tube, tubularSegments, radialSegments, p, q ) );\n\tthis.mergeVertices();\n\n}\n\nTorusKnotGeometry.prototype = Object.create( Geometry.prototype );\nTorusKnotGeometry.prototype.constructor = TorusKnotGeometry;\n\n// TorusKnotBufferGeometry\n\nfunction TorusKnotBufferGeometry( radius, tube, tubularSegments, radialSegments, p, q ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'TorusKnotBufferGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\ttube: tube,\n\t\ttubularSegments: tubularSegments,\n\t\tradialSegments: radialSegments,\n\t\tp: p,\n\t\tq: q\n\t};\n\n\tradius = radius || 1;\n\ttube = tube || 0.4;\n\ttubularSegments = Math.floor( tubularSegments ) || 64;\n\tradialSegments = Math.floor( radialSegments ) || 8;\n\tp = p || 2;\n\tq = q || 3;\n\n\t// buffers\n\n\tvar indices = [];\n\tvar vertices = [];\n\tvar normals = [];\n\tvar uvs = [];\n\n\t// helper variables\n\n\tvar i, j;\n\n\tvar vertex = new Vector3();\n\tvar normal = new Vector3();\n\n\tvar P1 = new Vector3();\n\tvar P2 = new Vector3();\n\n\tvar B = new Vector3();\n\tvar T = new Vector3();\n\tvar N = new Vector3();\n\n\t// generate vertices, normals and uvs\n\n\tfor ( i = 0; i <= tubularSegments; ++ i ) {\n\n\t\t// the radian \"u\" is used to calculate the position on the torus curve of the current tubular segement\n\n\t\tvar u = i / tubularSegments * p * Math.PI * 2;\n\n\t\t// now we calculate two points. P1 is our current position on the curve, P2 is a little farther ahead.\n\t\t// these points are used to create a special \"coordinate space\", which is necessary to calculate the correct vertex positions\n\n\t\tcalculatePositionOnCurve( u, p, q, radius, P1 );\n\t\tcalculatePositionOnCurve( u + 0.01, p, q, radius, P2 );\n\n\t\t// calculate orthonormal basis\n\n\t\tT.subVectors( P2, P1 );\n\t\tN.addVectors( P2, P1 );\n\t\tB.crossVectors( T, N );\n\t\tN.crossVectors( B, T );\n\n\t\t// normalize B, N. T can be ignored, we don't use it\n\n\t\tB.normalize();\n\t\tN.normalize();\n\n\t\tfor ( j = 0; j <= radialSegments; ++ j ) {\n\n\t\t\t// now calculate the vertices. they are nothing more than an extrusion of the torus curve.\n\t\t\t// because we extrude a shape in the xy-plane, there is no need to calculate a z-value.\n\n\t\t\tvar v = j / radialSegments * Math.PI * 2;\n\t\t\tvar cx = - tube * Math.cos( v );\n\t\t\tvar cy = tube * Math.sin( v );\n\n\t\t\t// now calculate the final vertex position.\n\t\t\t// first we orient the extrusion with our basis vectos, then we add it to the current position on the curve\n\n\t\t\tvertex.x = P1.x + ( cx * N.x + cy * B.x );\n\t\t\tvertex.y = P1.y + ( cx * N.y + cy * B.y );\n\t\t\tvertex.z = P1.z + ( cx * N.z + cy * B.z );\n\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t// normal (P1 is always the center/origin of the extrusion, thus we can use it to calculate the normal)\n\n\t\t\tnormal.subVectors( vertex, P1 ).normalize();\n\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t// uv\n\n\t\t\tuvs.push( i / tubularSegments );\n\t\t\tuvs.push( j / radialSegments );\n\n\t\t}\n\n\t}\n\n\t// generate indices\n\n\tfor ( j = 1; j <= tubularSegments; j ++ ) {\n\n\t\tfor ( i = 1; i <= radialSegments; i ++ ) {\n\n\t\t\t// indices\n\n\t\t\tvar a = ( radialSegments + 1 ) * ( j - 1 ) + ( i - 1 );\n\t\t\tvar b = ( radialSegments + 1 ) * j + ( i - 1 );\n\t\t\tvar c = ( radialSegments + 1 ) * j + i;\n\t\t\tvar d = ( radialSegments + 1 ) * ( j - 1 ) + i;\n\n\t\t\t// faces\n\n\t\t\tindices.push( a, b, d );\n\t\t\tindices.push( b, c, d );\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t// this function calculates the current position on the torus curve\n\n\tfunction calculatePositionOnCurve( u, p, q, radius, position ) {\n\n\t\tvar cu = Math.cos( u );\n\t\tvar su = Math.sin( u );\n\t\tvar quOverP = q / p * u;\n\t\tvar cs = Math.cos( quOverP );\n\n\t\tposition.x = radius * ( 2 + cs ) * 0.5 * cu;\n\t\tposition.y = radius * ( 2 + cs ) * su * 0.5;\n\t\tposition.z = radius * Math.sin( quOverP ) * 0.5;\n\n\t}\n\n}\n\nTorusKnotBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nTorusKnotBufferGeometry.prototype.constructor = TorusKnotBufferGeometry;\n\n\nexport { TorusKnotGeometry, TorusKnotBufferGeometry };\n","/**\n * @author oosmoxiecode\n * @author mrdoob / http://mrdoob.com/\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { Vector3 } from '../math/Vector3.js';\n\n// TorusGeometry\n\nfunction TorusGeometry( radius, tube, radialSegments, tubularSegments, arc ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'TorusGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\ttube: tube,\n\t\tradialSegments: radialSegments,\n\t\ttubularSegments: tubularSegments,\n\t\tarc: arc\n\t};\n\n\tthis.fromBufferGeometry( new TorusBufferGeometry( radius, tube, radialSegments, tubularSegments, arc ) );\n\tthis.mergeVertices();\n\n}\n\nTorusGeometry.prototype = Object.create( Geometry.prototype );\nTorusGeometry.prototype.constructor = TorusGeometry;\n\n// TorusBufferGeometry\n\nfunction TorusBufferGeometry( radius, tube, radialSegments, tubularSegments, arc ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'TorusBufferGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\ttube: tube,\n\t\tradialSegments: radialSegments,\n\t\ttubularSegments: tubularSegments,\n\t\tarc: arc\n\t};\n\n\tradius = radius || 1;\n\ttube = tube || 0.4;\n\tradialSegments = Math.floor( radialSegments ) || 8;\n\ttubularSegments = Math.floor( tubularSegments ) || 6;\n\tarc = arc || Math.PI * 2;\n\n\t// buffers\n\n\tvar indices = [];\n\tvar vertices = [];\n\tvar normals = [];\n\tvar uvs = [];\n\n\t// helper variables\n\n\tvar center = new Vector3();\n\tvar vertex = new Vector3();\n\tvar normal = new Vector3();\n\n\tvar j, i;\n\n\t// generate vertices, normals and uvs\n\n\tfor ( j = 0; j <= radialSegments; j ++ ) {\n\n\t\tfor ( i = 0; i <= tubularSegments; i ++ ) {\n\n\t\t\tvar u = i / tubularSegments * arc;\n\t\t\tvar v = j / radialSegments * Math.PI * 2;\n\n\t\t\t// vertex\n\n\t\t\tvertex.x = ( radius + tube * Math.cos( v ) ) * Math.cos( u );\n\t\t\tvertex.y = ( radius + tube * Math.cos( v ) ) * Math.sin( u );\n\t\t\tvertex.z = tube * Math.sin( v );\n\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t// normal\n\n\t\t\tcenter.x = radius * Math.cos( u );\n\t\t\tcenter.y = radius * Math.sin( u );\n\t\t\tnormal.subVectors( vertex, center ).normalize();\n\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t// uv\n\n\t\t\tuvs.push( i / tubularSegments );\n\t\t\tuvs.push( j / radialSegments );\n\n\t\t}\n\n\t}\n\n\t// generate indices\n\n\tfor ( j = 1; j <= radialSegments; j ++ ) {\n\n\t\tfor ( i = 1; i <= tubularSegments; i ++ ) {\n\n\t\t\t// indices\n\n\t\t\tvar a = ( tubularSegments + 1 ) * j + i - 1;\n\t\t\tvar b = ( tubularSegments + 1 ) * ( j - 1 ) + i - 1;\n\t\t\tvar c = ( tubularSegments + 1 ) * ( j - 1 ) + i;\n\t\t\tvar d = ( tubularSegments + 1 ) * j + i;\n\n\t\t\t// faces\n\n\t\t\tindices.push( a, b, d );\n\t\t\tindices.push( b, c, d );\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n}\n\nTorusBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nTorusBufferGeometry.prototype.constructor = TorusBufferGeometry;\n\n\nexport { TorusGeometry, TorusBufferGeometry };\n","/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author alteredq / http://alteredqualia.com/\n *\n * Text = 3D Text\n *\n * parameters = {\n *  font: <THREE.Font>, // font\n *\n *  size: <float>, // size of the text\n *  height: <float>, // thickness to extrude text\n *  curveSegments: <int>, // number of points on the curves\n *\n *  bevelEnabled: <bool>, // turn on bevel\n *  bevelThickness: <float>, // how deep into text bevel goes\n *  bevelSize: <float>, // how far from text outline (including bevelOffset) is bevel\n *  bevelOffset: <float> // how far from text outline does bevel start\n * }\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { ExtrudeBufferGeometry } from './ExtrudeGeometry.js';\n\n// TextGeometry\n\nfunction TextGeometry( text, parameters ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'TextGeometry';\n\n\tthis.parameters = {\n\t\ttext: text,\n\t\tparameters: parameters\n\t};\n\n\tthis.fromBufferGeometry( new TextBufferGeometry( text, parameters ) );\n\tthis.mergeVertices();\n\n}\n\nTextGeometry.prototype = Object.create( Geometry.prototype );\nTextGeometry.prototype.constructor = TextGeometry;\n\n// TextBufferGeometry\n\nfunction TextBufferGeometry( text, parameters ) {\n\n\tparameters = parameters || {};\n\n\tvar font = parameters.font;\n\n\tif ( ! ( font && font.isFont ) ) {\n\n\t\tconsole.error( 'THREE.TextGeometry: font parameter is not an instance of THREE.Font.' );\n\t\treturn new Geometry();\n\n\t}\n\n\tvar shapes = font.generateShapes( text, parameters.size );\n\n\t// translate parameters to ExtrudeGeometry API\n\n\tparameters.depth = parameters.height !== undefined ? parameters.height : 50;\n\n\t// defaults\n\n\tif ( parameters.bevelThickness === undefined ) parameters.bevelThickness = 10;\n\tif ( parameters.bevelSize === undefined ) parameters.bevelSize = 8;\n\tif ( parameters.bevelEnabled === undefined ) parameters.bevelEnabled = false;\n\n\tExtrudeBufferGeometry.call( this, shapes, parameters );\n\n\tthis.type = 'TextBufferGeometry';\n\n}\n\nTextBufferGeometry.prototype = Object.create( ExtrudeBufferGeometry.prototype );\nTextBufferGeometry.prototype.constructor = TextBufferGeometry;\n\n\nexport { TextGeometry, TextBufferGeometry };\n","/**\n * @author jonobr1 / http://jonobr1.com\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { ShapeUtils } from '../extras/ShapeUtils.js';\n\n// ShapeGeometry\n\nfunction ShapeGeometry( shapes, curveSegments ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'ShapeGeometry';\n\n\tif ( typeof curveSegments === 'object' ) {\n\n\t\tconsole.warn( 'THREE.ShapeGeometry: Options parameter has been removed.' );\n\n\t\tcurveSegments = curveSegments.curveSegments;\n\n\t}\n\n\tthis.parameters = {\n\t\tshapes: shapes,\n\t\tcurveSegments: curveSegments\n\t};\n\n\tthis.fromBufferGeometry( new ShapeBufferGeometry( shapes, curveSegments ) );\n\tthis.mergeVertices();\n\n}\n\nShapeGeometry.prototype = Object.create( Geometry.prototype );\nShapeGeometry.prototype.constructor = ShapeGeometry;\n\nShapeGeometry.prototype.toJSON = function () {\n\n\tvar data = Geometry.prototype.toJSON.call( this );\n\n\tvar shapes = this.parameters.shapes;\n\n\treturn toJSON( shapes, data );\n\n};\n\n// ShapeBufferGeometry\n\nfunction ShapeBufferGeometry( shapes, curveSegments ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'ShapeBufferGeometry';\n\n\tthis.parameters = {\n\t\tshapes: shapes,\n\t\tcurveSegments: curveSegments\n\t};\n\n\tcurveSegments = curveSegments || 12;\n\n\t// buffers\n\n\tvar indices = [];\n\tvar vertices = [];\n\tvar normals = [];\n\tvar uvs = [];\n\n\t// helper variables\n\n\tvar groupStart = 0;\n\tvar groupCount = 0;\n\n\t// allow single and array values for \"shapes\" parameter\n\n\tif ( Array.isArray( shapes ) === false ) {\n\n\t\taddShape( shapes );\n\n\t} else {\n\n\t\tfor ( var i = 0; i < shapes.length; i ++ ) {\n\n\t\t\taddShape( shapes[ i ] );\n\n\t\t\tthis.addGroup( groupStart, groupCount, i ); // enables MultiMaterial support\n\n\t\t\tgroupStart += groupCount;\n\t\t\tgroupCount = 0;\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\n\t// helper functions\n\n\tfunction addShape( shape ) {\n\n\t\tvar i, l, shapeHole;\n\n\t\tvar indexOffset = vertices.length / 3;\n\t\tvar points = shape.extractPoints( curveSegments );\n\n\t\tvar shapeVertices = points.shape;\n\t\tvar shapeHoles = points.holes;\n\n\t\t// check direction of vertices\n\n\t\tif ( ShapeUtils.isClockWise( shapeVertices ) === false ) {\n\n\t\t\tshapeVertices = shapeVertices.reverse();\n\n\t\t}\n\n\t\tfor ( i = 0, l = shapeHoles.length; i < l; i ++ ) {\n\n\t\t\tshapeHole = shapeHoles[ i ];\n\n\t\t\tif ( ShapeUtils.isClockWise( shapeHole ) === true ) {\n\n\t\t\t\tshapeHoles[ i ] = shapeHole.reverse();\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar faces = ShapeUtils.triangulateShape( shapeVertices, shapeHoles );\n\n\t\t// join vertices of inner and outer paths to a single array\n\n\t\tfor ( i = 0, l = shapeHoles.length; i < l; i ++ ) {\n\n\t\t\tshapeHole = shapeHoles[ i ];\n\t\t\tshapeVertices = shapeVertices.concat( shapeHole );\n\n\t\t}\n\n\t\t// vertices, normals, uvs\n\n\t\tfor ( i = 0, l = shapeVertices.length; i < l; i ++ ) {\n\n\t\t\tvar vertex = shapeVertices[ i ];\n\n\t\t\tvertices.push( vertex.x, vertex.y, 0 );\n\t\t\tnormals.push( 0, 0, 1 );\n\t\t\tuvs.push( vertex.x, vertex.y ); // world uvs\n\n\t\t}\n\n\t\t// incides\n\n\t\tfor ( i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\tvar face = faces[ i ];\n\n\t\t\tvar a = face[ 0 ] + indexOffset;\n\t\t\tvar b = face[ 1 ] + indexOffset;\n\t\t\tvar c = face[ 2 ] + indexOffset;\n\n\t\t\tindices.push( a, b, c );\n\t\t\tgroupCount += 3;\n\n\t\t}\n\n\t}\n\n}\n\nShapeBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nShapeBufferGeometry.prototype.constructor = ShapeBufferGeometry;\n\nShapeBufferGeometry.prototype.toJSON = function () {\n\n\tvar data = BufferGeometry.prototype.toJSON.call( this );\n\n\tvar shapes = this.parameters.shapes;\n\n\treturn toJSON( shapes, data );\n\n};\n\n//\n\nfunction toJSON( shapes, data ) {\n\n\tdata.shapes = [];\n\n\tif ( Array.isArray( shapes ) ) {\n\n\t\tfor ( var i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\tvar shape = shapes[ i ];\n\n\t\t\tdata.shapes.push( shape.uuid );\n\n\t\t}\n\n\t} else {\n\n\t\tdata.shapes.push( shapes.uuid );\n\n\t}\n\n\treturn data;\n\n}\n\n\nexport { ShapeGeometry, ShapeBufferGeometry };\n","/**\n * @author benaadams / https://twitter.com/ben_a_adams\n * @author Mugen87 / https://github.com/Mugen87\n * @author hughes\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Vector2 } from '../math/Vector2.js';\n\n// CircleGeometry\n\nfunction CircleGeometry( radius, segments, thetaStart, thetaLength ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'CircleGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tsegments: segments,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tthis.fromBufferGeometry( new CircleBufferGeometry( radius, segments, thetaStart, thetaLength ) );\n\tthis.mergeVertices();\n\n}\n\nCircleGeometry.prototype = Object.create( Geometry.prototype );\nCircleGeometry.prototype.constructor = CircleGeometry;\n\n// CircleBufferGeometry\n\nfunction CircleBufferGeometry( radius, segments, thetaStart, thetaLength ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'CircleBufferGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tsegments: segments,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tradius = radius || 1;\n\tsegments = segments !== undefined ? Math.max( 3, segments ) : 8;\n\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\n\n\t// buffers\n\n\tvar indices = [];\n\tvar vertices = [];\n\tvar normals = [];\n\tvar uvs = [];\n\n\t// helper variables\n\n\tvar i, s;\n\tvar vertex = new Vector3();\n\tvar uv = new Vector2();\n\n\t// center point\n\n\tvertices.push( 0, 0, 0 );\n\tnormals.push( 0, 0, 1 );\n\tuvs.push( 0.5, 0.5 );\n\n\tfor ( s = 0, i = 3; s <= segments; s ++, i += 3 ) {\n\n\t\tvar segment = thetaStart + s / segments * thetaLength;\n\n\t\t// vertex\n\n\t\tvertex.x = radius * Math.cos( segment );\n\t\tvertex.y = radius * Math.sin( segment );\n\n\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t// normal\n\n\t\tnormals.push( 0, 0, 1 );\n\n\t\t// uvs\n\n\t\tuv.x = ( vertices[ i ] / radius + 1 ) / 2;\n\t\tuv.y = ( vertices[ i + 1 ] / radius + 1 ) / 2;\n\n\t\tuvs.push( uv.x, uv.y );\n\n\t}\n\n\t// indices\n\n\tfor ( i = 1; i <= segments; i ++ ) {\n\n\t\tindices.push( i, i + 1, 0 );\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n}\n\nCircleBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nCircleBufferGeometry.prototype.constructor = CircleBufferGeometry;\n\n\nexport { CircleGeometry, CircleBufferGeometry };\n","import { BufferAttribute } from './BufferAttribute.js';\n\n/**\n * @author benaadams / https://twitter.com/ben_a_adams\n */\n\nfunction InstancedBufferAttribute( array, itemSize, normalized, meshPerAttribute ) {\n\n\tif ( typeof ( normalized ) === 'number' ) {\n\n\t\tmeshPerAttribute = normalized;\n\n\t\tnormalized = false;\n\n\t\tconsole.error( 'THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.' );\n\n\t}\n\n\tBufferAttribute.call( this, array, itemSize, normalized );\n\n\tthis.meshPerAttribute = meshPerAttribute || 1;\n\n}\n\nInstancedBufferAttribute.prototype = Object.assign( Object.create( BufferAttribute.prototype ), {\n\n\tconstructor: InstancedBufferAttribute,\n\n\tisInstancedBufferAttribute: true,\n\n\tcopy: function ( source ) {\n\n\t\tBufferAttribute.prototype.copy.call( this, source );\n\n\t\tthis.meshPerAttribute = source.meshPerAttribute;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ()\t{\n\n\t\tvar data = BufferAttribute.prototype.toJSON.call( this );\n\n\t\tdata.meshPerAttribute = this.meshPerAttribute;\n\n\t\tdata.isInstancedBufferAttribute = true;\n\n\t\treturn data;\n\n\t}\n\n} );\n\n\n\nexport { InstancedBufferAttribute };\n","import { Color } from '../math/Color.js';\nimport { Vector3 } from '../math/Vector3.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction Face3( a, b, c, normal, color, materialIndex ) {\n\n\tthis.a = a;\n\tthis.b = b;\n\tthis.c = c;\n\n\tthis.normal = ( normal && normal.isVector3 ) ? normal : new Vector3();\n\tthis.vertexNormals = Array.isArray( normal ) ? normal : [];\n\n\tthis.color = ( color && color.isColor ) ? color : new Color();\n\tthis.vertexColors = Array.isArray( color ) ? color : [];\n\n\tthis.materialIndex = materialIndex !== undefined ? materialIndex : 0;\n\n}\n\nObject.assign( Face3.prototype, {\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.a = source.a;\n\t\tthis.b = source.b;\n\t\tthis.c = source.c;\n\n\t\tthis.normal.copy( source.normal );\n\t\tthis.color.copy( source.color );\n\n\t\tthis.materialIndex = source.materialIndex;\n\n\t\tfor ( var i = 0, il = source.vertexNormals.length; i < il; i ++ ) {\n\n\t\t\tthis.vertexNormals[ i ] = source.vertexNormals[ i ].clone();\n\n\t\t}\n\n\t\tfor ( var i = 0, il = source.vertexColors.length; i < il; i ++ ) {\n\n\t\t\tthis.vertexColors[ i ] = source.vertexColors[ i ].clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Face3 };\n","import { Interpolant } from '../Interpolant.js';\nimport { Quaternion } from '../Quaternion.js';\n\n/**\n * Spherical linear unit quaternion interpolant.\n *\n * @author tschw\n */\n\nfunction QuaternionLinearInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n}\n\nQuaternionLinearInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\n\n\tconstructor: QuaternionLinearInterpolant,\n\n\tinterpolate_: function ( i1, t0, t, t1 ) {\n\n\t\tvar result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\toffset = i1 * stride,\n\n\t\t\talpha = ( t - t0 ) / ( t1 - t0 );\n\n\t\tfor ( var end = offset + stride; offset !== end; offset += 4 ) {\n\n\t\t\tQuaternion.slerpFlat( result, 0, values, offset - stride, values, offset, alpha );\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n} );\n\n\nexport { QuaternionLinearInterpolant };\n","import { InterpolateLinear } from '../../constants.js';\nimport { KeyframeTrack } from '../KeyframeTrack.js';\nimport { QuaternionLinearInterpolant } from '../../math/interpolants/QuaternionLinearInterpolant.js';\n\n/**\n *\n * A Track of quaternion keyframe values.\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction QuaternionKeyframeTrack( name, times, values, interpolation ) {\n\n\tKeyframeTrack.call( this, name, times, values, interpolation );\n\n}\n\nQuaternionKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: QuaternionKeyframeTrack,\n\n\tValueTypeName: 'quaternion',\n\n\t// ValueBufferType is inherited\n\n\tDefaultInterpolation: InterpolateLinear,\n\n\tInterpolantFactoryMethodLinear: function ( result ) {\n\n\t\treturn new QuaternionLinearInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t},\n\n\tInterpolantFactoryMethodSmooth: undefined // not yet implemented\n\n} );\n\nexport { QuaternionKeyframeTrack };\n","import { Vector3 } from '../math/Vector3.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Sphere } from '../math/Sphere.js';\nimport { Ray } from '../math/Ray.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { Object3D } from '../core/Object3D.js';\nimport { Triangle } from '../math/Triangle.js';\nimport { Face3 } from '../core/Face3.js';\nimport { DoubleSide, BackSide } from '../constants.js';\nimport { MeshBasicMaterial } from '../materials/MeshBasicMaterial.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author jonobr1 / http://jonobr1.com/\n */\n\nvar _inverseMatrix = new Matrix4();\nvar _ray = new Ray();\nvar _sphere = new Sphere();\n\nvar _vA = new Vector3();\nvar _vB = new Vector3();\nvar _vC = new Vector3();\n\nvar _tempA = new Vector3();\nvar _tempB = new Vector3();\nvar _tempC = new Vector3();\n\nvar _morphA = new Vector3();\nvar _morphB = new Vector3();\nvar _morphC = new Vector3();\n\nvar _uvA = new Vector2();\nvar _uvB = new Vector2();\nvar _uvC = new Vector2();\n\nvar _intersectionPoint = new Vector3();\nvar _intersectionPointWorld = new Vector3();\n\nfunction Mesh( geometry, material ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Mesh';\n\n\tthis.geometry = geometry !== undefined ? geometry : new BufferGeometry();\n\tthis.material = material !== undefined ? material : new MeshBasicMaterial( { color: Math.random() * 0xffffff } );\n\n\tthis.updateMorphTargets();\n\n}\n\nMesh.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Mesh,\n\n\tisMesh: true,\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source );\n\n\t\tif ( source.morphTargetInfluences !== undefined ) {\n\n\t\t\tthis.morphTargetInfluences = source.morphTargetInfluences.slice();\n\n\t\t}\n\n\t\tif ( source.morphTargetDictionary !== undefined ) {\n\n\t\t\tthis.morphTargetDictionary = Object.assign( {}, source.morphTargetDictionary );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tupdateMorphTargets: function () {\n\n\t\tvar geometry = this.geometry;\n\t\tvar m, ml, name;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tvar morphAttributes = geometry.morphAttributes;\n\t\t\tvar keys = Object.keys( morphAttributes );\n\n\t\t\tif ( keys.length > 0 ) {\n\n\t\t\t\tvar morphAttribute = morphAttributes[ keys[ 0 ] ];\n\n\t\t\t\tif ( morphAttribute !== undefined ) {\n\n\t\t\t\t\tthis.morphTargetInfluences = [];\n\t\t\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\t\t\tfor ( m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\n\n\t\t\t\t\t\tname = morphAttribute[ m ].name || String( m );\n\n\t\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tvar morphTargets = geometry.morphTargets;\n\n\t\t\tif ( morphTargets !== undefined && morphTargets.length > 0 ) {\n\n\t\t\t\tconsole.error( 'THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.' );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\traycast: function ( raycaster, intersects ) {\n\n\t\tvar geometry = this.geometry;\n\t\tvar material = this.material;\n\t\tvar matrixWorld = this.matrixWorld;\n\n\t\tif ( material === undefined ) return;\n\n\t\t// Checking boundingSphere distance to ray\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere.copy( geometry.boundingSphere );\n\t\t_sphere.applyMatrix4( matrixWorld );\n\n\t\tif ( raycaster.ray.intersectsSphere( _sphere ) === false ) return;\n\n\t\t//\n\n\t\t_inverseMatrix.getInverse( matrixWorld );\n\t\t_ray.copy( raycaster.ray ).applyMatrix4( _inverseMatrix );\n\n\t\t// Check boundingBox before continuing\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tif ( _ray.intersectsBox( geometry.boundingBox ) === false ) return;\n\n\t\t}\n\n\t\tvar intersection;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tvar a, b, c;\n\t\t\tvar index = geometry.index;\n\t\t\tvar position = geometry.attributes.position;\n\t\t\tvar morphPosition = geometry.morphAttributes.position;\n\t\t\tvar morphTargetsRelative = geometry.morphTargetsRelative;\n\t\t\tvar uv = geometry.attributes.uv;\n\t\t\tvar uv2 = geometry.attributes.uv2;\n\t\t\tvar groups = geometry.groups;\n\t\t\tvar drawRange = geometry.drawRange;\n\t\t\tvar i, j, il, jl;\n\t\t\tvar group, groupMaterial;\n\t\t\tvar start, end;\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\t// indexed buffer geometry\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tfor ( i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tgroup = groups[ i ];\n\t\t\t\t\t\tgroupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\tstart = Math.max( group.start, drawRange.start );\n\t\t\t\t\t\tend = Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) );\n\n\t\t\t\t\t\tfor ( j = start, jl = end; j < jl; j += 3 ) {\n\n\t\t\t\t\t\t\ta = index.getX( j );\n\t\t\t\t\t\t\tb = index.getX( j + 1 );\n\t\t\t\t\t\t\tc = index.getX( j + 2 );\n\n\t\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, groupMaterial, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( j / 3 ); // triangle number in indexed buffer semantics\n\t\t\t\t\t\t\t\tintersection.face.materialIndex = group.materialIndex;\n\t\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstart = Math.max( 0, drawRange.start );\n\t\t\t\t\tend = Math.min( index.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\t\t\tfor ( i = start, il = end; i < il; i += 3 ) {\n\n\t\t\t\t\t\ta = index.getX( i );\n\t\t\t\t\t\tb = index.getX( i + 1 );\n\t\t\t\t\t\tc = index.getX( i + 2 );\n\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, material, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in indexed buffer semantics\n\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( position !== undefined ) {\n\n\t\t\t\t// non-indexed buffer geometry\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tfor ( i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tgroup = groups[ i ];\n\t\t\t\t\t\tgroupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\tstart = Math.max( group.start, drawRange.start );\n\t\t\t\t\t\tend = Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) );\n\n\t\t\t\t\t\tfor ( j = start, jl = end; j < jl; j += 3 ) {\n\n\t\t\t\t\t\t\ta = j;\n\t\t\t\t\t\t\tb = j + 1;\n\t\t\t\t\t\t\tc = j + 2;\n\n\t\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, groupMaterial, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( j / 3 ); // triangle number in non-indexed buffer semantics\n\t\t\t\t\t\t\t\tintersection.face.materialIndex = group.materialIndex;\n\t\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstart = Math.max( 0, drawRange.start );\n\t\t\t\t\tend = Math.min( position.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\t\t\tfor ( i = start, il = end; i < il; i += 3 ) {\n\n\t\t\t\t\t\ta = i;\n\t\t\t\t\t\tb = i + 1;\n\t\t\t\t\t\tc = i + 2;\n\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, material, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in non-indexed buffer semantics\n\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\tvar fvA, fvB, fvC;\n\t\t\tvar isMultiMaterial = Array.isArray( material );\n\n\t\t\tvar vertices = geometry.vertices;\n\t\t\tvar faces = geometry.faces;\n\t\t\tvar uvs;\n\n\t\t\tvar faceVertexUvs = geometry.faceVertexUvs[ 0 ];\n\t\t\tif ( faceVertexUvs.length > 0 ) uvs = faceVertexUvs;\n\n\t\t\tfor ( var f = 0, fl = faces.length; f < fl; f ++ ) {\n\n\t\t\t\tvar face = faces[ f ];\n\t\t\t\tvar faceMaterial = isMultiMaterial ? material[ face.materialIndex ] : material;\n\n\t\t\t\tif ( faceMaterial === undefined ) continue;\n\n\t\t\t\tfvA = vertices[ face.a ];\n\t\t\t\tfvB = vertices[ face.b ];\n\t\t\t\tfvC = vertices[ face.c ];\n\n\t\t\t\tintersection = checkIntersection( this, faceMaterial, raycaster, _ray, fvA, fvB, fvC, _intersectionPoint );\n\n\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\tif ( uvs && uvs[ f ] ) {\n\n\t\t\t\t\t\tvar uvs_f = uvs[ f ];\n\t\t\t\t\t\t_uvA.copy( uvs_f[ 0 ] );\n\t\t\t\t\t\t_uvB.copy( uvs_f[ 1 ] );\n\t\t\t\t\t\t_uvC.copy( uvs_f[ 2 ] );\n\n\t\t\t\t\t\tintersection.uv = Triangle.getUV( _intersectionPoint, fvA, fvB, fvC, _uvA, _uvB, _uvC, new Vector2() );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tintersection.face = face;\n\t\t\t\t\tintersection.faceIndex = f;\n\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.geometry, this.material ).copy( this );\n\n\t}\n\n} );\n\nfunction checkIntersection( object, material, raycaster, ray, pA, pB, pC, point ) {\n\n\tvar intersect;\n\n\tif ( material.side === BackSide ) {\n\n\t\tintersect = ray.intersectTriangle( pC, pB, pA, true, point );\n\n\t} else {\n\n\t\tintersect = ray.intersectTriangle( pA, pB, pC, material.side !== DoubleSide, point );\n\n\t}\n\n\tif ( intersect === null ) return null;\n\n\t_intersectionPointWorld.copy( point );\n\t_intersectionPointWorld.applyMatrix4( object.matrixWorld );\n\n\tvar distance = raycaster.ray.origin.distanceTo( _intersectionPointWorld );\n\n\tif ( distance < raycaster.near || distance > raycaster.far ) return null;\n\n\treturn {\n\t\tdistance: distance,\n\t\tpoint: _intersectionPointWorld.clone(),\n\t\tobject: object\n\t};\n\n}\n\nfunction checkBufferGeometryIntersection( object, material, raycaster, ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c ) {\n\n\t_vA.fromBufferAttribute( position, a );\n\t_vB.fromBufferAttribute( position, b );\n\t_vC.fromBufferAttribute( position, c );\n\n\tvar morphInfluences = object.morphTargetInfluences;\n\n\tif ( material.morphTargets && morphPosition && morphInfluences ) {\n\n\t\t_morphA.set( 0, 0, 0 );\n\t\t_morphB.set( 0, 0, 0 );\n\t\t_morphC.set( 0, 0, 0 );\n\n\t\tfor ( var i = 0, il = morphPosition.length; i < il; i ++ ) {\n\n\t\t\tvar influence = morphInfluences[ i ];\n\t\t\tvar morphAttribute = morphPosition[ i ];\n\n\t\t\tif ( influence === 0 ) continue;\n\n\t\t\t_tempA.fromBufferAttribute( morphAttribute, a );\n\t\t\t_tempB.fromBufferAttribute( morphAttribute, b );\n\t\t\t_tempC.fromBufferAttribute( morphAttribute, c );\n\n\t\t\tif ( morphTargetsRelative ) {\n\n\t\t\t\t_morphA.addScaledVector( _tempA, influence );\n\t\t\t\t_morphB.addScaledVector( _tempB, influence );\n\t\t\t\t_morphC.addScaledVector( _tempC, influence );\n\n\t\t\t} else {\n\n\t\t\t\t_morphA.addScaledVector( _tempA.sub( _vA ), influence );\n\t\t\t\t_morphB.addScaledVector( _tempB.sub( _vB ), influence );\n\t\t\t\t_morphC.addScaledVector( _tempC.sub( _vC ), influence );\n\n\t\t\t}\n\n\t\t}\n\n\t\t_vA.add( _morphA );\n\t\t_vB.add( _morphB );\n\t\t_vC.add( _morphC );\n\n\t}\n\n\tvar intersection = checkIntersection( object, material, raycaster, ray, _vA, _vB, _vC, _intersectionPoint );\n\n\tif ( intersection ) {\n\n\t\tif ( uv ) {\n\n\t\t\t_uvA.fromBufferAttribute( uv, a );\n\t\t\t_uvB.fromBufferAttribute( uv, b );\n\t\t\t_uvC.fromBufferAttribute( uv, c );\n\n\t\t\tintersection.uv = Triangle.getUV( _intersectionPoint, _vA, _vB, _vC, _uvA, _uvB, _uvC, new Vector2() );\n\n\t\t}\n\n\t\tif ( uv2 ) {\n\n\t\t\t_uvA.fromBufferAttribute( uv2, a );\n\t\t\t_uvB.fromBufferAttribute( uv2, b );\n\t\t\t_uvC.fromBufferAttribute( uv2, c );\n\n\t\t\tintersection.uv2 = Triangle.getUV( _intersectionPoint, _vA, _vB, _vC, _uvA, _uvB, _uvC, new Vector2() );\n\n\t\t}\n\n\t\tvar face = new Face3( a, b, c );\n\t\tTriangle.getNormal( _vA, _vB, _vC, face.normal );\n\n\t\tintersection.face = face;\n\n\t}\n\n\treturn intersection;\n\n}\n\nexport { Mesh };\n","import { Ray } from '../math/Ray.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author bhouston / http://clara.io/\n * @author stephomi / http://stephaneginier.com/\n */\n\nfunction Raycaster( origin, direction, near, far ) {\n\n\tthis.ray = new Ray( origin, direction );\n\t// direction is assumed to be normalized (for accurate distance calculations)\n\n\tthis.near = near || 0;\n\tthis.far = far || Infinity;\n\tthis.camera = null;\n\n\tthis.params = {\n\t\tMesh: {},\n\t\tLine: {},\n\t\tLOD: {},\n\t\tPoints: { threshold: 1 },\n\t\tSprite: {}\n\t};\n\n\tObject.defineProperties( this.params, {\n\t\tPointCloud: {\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.Raycaster: params.PointCloud has been renamed to params.Points.' );\n\t\t\t\treturn this.Points;\n\n\t\t\t}\n\t\t}\n\t} );\n\n}\n\nfunction ascSort( a, b ) {\n\n\treturn a.distance - b.distance;\n\n}\n\nfunction intersectObject( object, raycaster, intersects, recursive ) {\n\n\tif ( object.visible === false ) return;\n\n\tobject.raycast( raycaster, intersects );\n\n\tif ( recursive === true ) {\n\n\t\tvar children = object.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tintersectObject( children[ i ], raycaster, intersects, true );\n\n\t\t}\n\n\t}\n\n}\n\nObject.assign( Raycaster.prototype, {\n\n\tlinePrecision: 1,\n\n\tset: function ( origin, direction ) {\n\n\t\t// direction is assumed to be normalized (for accurate distance calculations)\n\n\t\tthis.ray.set( origin, direction );\n\n\t},\n\n\tsetFromCamera: function ( coords, camera ) {\n\n\t\tif ( ( camera && camera.isPerspectiveCamera ) ) {\n\n\t\t\tthis.ray.origin.setFromMatrixPosition( camera.matrixWorld );\n\t\t\tthis.ray.direction.set( coords.x, coords.y, 0.5 ).unproject( camera ).sub( this.ray.origin ).normalize();\n\t\t\tthis.camera = camera;\n\n\t\t} else if ( ( camera && camera.isOrthographicCamera ) ) {\n\n\t\t\tthis.ray.origin.set( coords.x, coords.y, ( camera.near + camera.far ) / ( camera.near - camera.far ) ).unproject( camera ); // set origin in plane of camera\n\t\t\tthis.ray.direction.set( 0, 0, - 1 ).transformDirection( camera.matrixWorld );\n\t\t\tthis.camera = camera;\n\n\t\t} else {\n\n\t\t\tconsole.error( 'THREE.Raycaster: Unsupported camera type.' );\n\n\t\t}\n\n\t},\n\n\tintersectObject: function ( object, recursive, optionalTarget ) {\n\n\t\tvar intersects = optionalTarget || [];\n\n\t\tintersectObject( object, this, intersects, recursive );\n\n\t\tintersects.sort( ascSort );\n\n\t\treturn intersects;\n\n\t},\n\n\tintersectObjects: function ( objects, recursive, optionalTarget ) {\n\n\t\tvar intersects = optionalTarget || [];\n\n\t\tif ( Array.isArray( objects ) === false ) {\n\n\t\t\tconsole.warn( 'THREE.Raycaster.intersectObjects: objects is not an Array.' );\n\t\t\treturn intersects;\n\n\t\t}\n\n\t\tfor ( var i = 0, l = objects.length; i < l; i ++ ) {\n\n\t\t\tintersectObject( objects[ i ], this, intersects, recursive );\n\n\t\t}\n\n\t\tintersects.sort( ascSort );\n\n\t\treturn intersects;\n\n\t}\n\n} );\n\n\nexport { Raycaster };\n","import { Vector3 } from '../../math/Vector3.js';\nimport { Curve } from '../core/Curve.js';\n\n/**\n * @author zz85 https://github.com/zz85\n *\n * Centripetal CatmullRom Curve - which is useful for avoiding\n * cusps and self-intersections in non-uniform catmull rom curves.\n * http://www.cemyuksel.com/research/catmullrom_param/catmullrom.pdf\n *\n * curve.type accepts centripetal(default), chordal and catmullrom\n * curve.tension is used for catmullrom which defaults to 0.5\n */\n\n\n/*\nBased on an optimized c++ solution in\n - http://stackoverflow.com/questions/9489736/catmull-rom-curve-with-no-cusps-and-no-self-intersections/\n - http://ideone.com/NoEbVM\n\nThis CubicPoly class could be used for reusing some variables and calculations,\nbut for three.js curve use, it could be possible inlined and flatten into a single function call\nwhich can be placed in CurveUtils.\n*/\n\nfunction CubicPoly() {\n\n\tvar c0 = 0, c1 = 0, c2 = 0, c3 = 0;\n\n\t/*\n\t * Compute coefficients for a cubic polynomial\n\t *   p(s) = c0 + c1*s + c2*s^2 + c3*s^3\n\t * such that\n\t *   p(0) = x0, p(1) = x1\n\t *  and\n\t *   p'(0) = t0, p'(1) = t1.\n\t */\n\tfunction init( x0, x1, t0, t1 ) {\n\n\t\tc0 = x0;\n\t\tc1 = t0;\n\t\tc2 = - 3 * x0 + 3 * x1 - 2 * t0 - t1;\n\t\tc3 = 2 * x0 - 2 * x1 + t0 + t1;\n\n\t}\n\n\treturn {\n\n\t\tinitCatmullRom: function ( x0, x1, x2, x3, tension ) {\n\n\t\t\tinit( x1, x2, tension * ( x2 - x0 ), tension * ( x3 - x1 ) );\n\n\t\t},\n\n\t\tinitNonuniformCatmullRom: function ( x0, x1, x2, x3, dt0, dt1, dt2 ) {\n\n\t\t\t// compute tangents when parameterized in [t1,t2]\n\t\t\tvar t1 = ( x1 - x0 ) / dt0 - ( x2 - x0 ) / ( dt0 + dt1 ) + ( x2 - x1 ) / dt1;\n\t\t\tvar t2 = ( x2 - x1 ) / dt1 - ( x3 - x1 ) / ( dt1 + dt2 ) + ( x3 - x2 ) / dt2;\n\n\t\t\t// rescale tangents for parametrization in [0,1]\n\t\t\tt1 *= dt1;\n\t\t\tt2 *= dt1;\n\n\t\t\tinit( x1, x2, t1, t2 );\n\n\t\t},\n\n\t\tcalc: function ( t ) {\n\n\t\t\tvar t2 = t * t;\n\t\t\tvar t3 = t2 * t;\n\t\t\treturn c0 + c1 * t + c2 * t2 + c3 * t3;\n\n\t\t}\n\n\t};\n\n}\n\n//\n\nvar tmp = new Vector3();\nvar px = new CubicPoly(), py = new CubicPoly(), pz = new CubicPoly();\n\nfunction CatmullRomCurve3( points, closed, curveType, tension ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'CatmullRomCurve3';\n\n\tthis.points = points || [];\n\tthis.closed = closed || false;\n\tthis.curveType = curveType || 'centripetal';\n\tthis.tension = tension || 0.5;\n\n}\n\nCatmullRomCurve3.prototype = Object.create( Curve.prototype );\nCatmullRomCurve3.prototype.constructor = CatmullRomCurve3;\n\nCatmullRomCurve3.prototype.isCatmullRomCurve3 = true;\n\nCatmullRomCurve3.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new Vector3();\n\n\tvar points = this.points;\n\tvar l = points.length;\n\n\tvar p = ( l - ( this.closed ? 0 : 1 ) ) * t;\n\tvar intPoint = Math.floor( p );\n\tvar weight = p - intPoint;\n\n\tif ( this.closed ) {\n\n\t\tintPoint += intPoint > 0 ? 0 : ( Math.floor( Math.abs( intPoint ) / l ) + 1 ) * l;\n\n\t} else if ( weight === 0 && intPoint === l - 1 ) {\n\n\t\tintPoint = l - 2;\n\t\tweight = 1;\n\n\t}\n\n\tvar p0, p1, p2, p3; // 4 points\n\n\tif ( this.closed || intPoint > 0 ) {\n\n\t\tp0 = points[ ( intPoint - 1 ) % l ];\n\n\t} else {\n\n\t\t// extrapolate first point\n\t\ttmp.subVectors( points[ 0 ], points[ 1 ] ).add( points[ 0 ] );\n\t\tp0 = tmp;\n\n\t}\n\n\tp1 = points[ intPoint % l ];\n\tp2 = points[ ( intPoint + 1 ) % l ];\n\n\tif ( this.closed || intPoint + 2 < l ) {\n\n\t\tp3 = points[ ( intPoint + 2 ) % l ];\n\n\t} else {\n\n\t\t// extrapolate last point\n\t\ttmp.subVectors( points[ l - 1 ], points[ l - 2 ] ).add( points[ l - 1 ] );\n\t\tp3 = tmp;\n\n\t}\n\n\tif ( this.curveType === 'centripetal' || this.curveType === 'chordal' ) {\n\n\t\t// init Centripetal / Chordal Catmull-Rom\n\t\tvar pow = this.curveType === 'chordal' ? 0.5 : 0.25;\n\t\tvar dt0 = Math.pow( p0.distanceToSquared( p1 ), pow );\n\t\tvar dt1 = Math.pow( p1.distanceToSquared( p2 ), pow );\n\t\tvar dt2 = Math.pow( p2.distanceToSquared( p3 ), pow );\n\n\t\t// safety check for repeated points\n\t\tif ( dt1 < 1e-4 ) dt1 = 1.0;\n\t\tif ( dt0 < 1e-4 ) dt0 = dt1;\n\t\tif ( dt2 < 1e-4 ) dt2 = dt1;\n\n\t\tpx.initNonuniformCatmullRom( p0.x, p1.x, p2.x, p3.x, dt0, dt1, dt2 );\n\t\tpy.initNonuniformCatmullRom( p0.y, p1.y, p2.y, p3.y, dt0, dt1, dt2 );\n\t\tpz.initNonuniformCatmullRom( p0.z, p1.z, p2.z, p3.z, dt0, dt1, dt2 );\n\n\t} else if ( this.curveType === 'catmullrom' ) {\n\n\t\tpx.initCatmullRom( p0.x, p1.x, p2.x, p3.x, this.tension );\n\t\tpy.initCatmullRom( p0.y, p1.y, p2.y, p3.y, this.tension );\n\t\tpz.initCatmullRom( p0.z, p1.z, p2.z, p3.z, this.tension );\n\n\t}\n\n\tpoint.set(\n\t\tpx.calc( weight ),\n\t\tpy.calc( weight ),\n\t\tpz.calc( weight )\n\t);\n\n\treturn point;\n\n};\n\nCatmullRomCurve3.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.points = [];\n\n\tfor ( var i = 0, l = source.points.length; i < l; i ++ ) {\n\n\t\tvar point = source.points[ i ];\n\n\t\tthis.points.push( point.clone() );\n\n\t}\n\n\tthis.closed = source.closed;\n\tthis.curveType = source.curveType;\n\tthis.tension = source.tension;\n\n\treturn this;\n\n};\n\nCatmullRomCurve3.prototype.toJSON = function () {\n\n\tvar data = Curve.prototype.toJSON.call( this );\n\n\tdata.points = [];\n\n\tfor ( var i = 0, l = this.points.length; i < l; i ++ ) {\n\n\t\tvar point = this.points[ i ];\n\t\tdata.points.push( point.toArray() );\n\n\t}\n\n\tdata.closed = this.closed;\n\tdata.curveType = this.curveType;\n\tdata.tension = this.tension;\n\n\treturn data;\n\n};\n\nCatmullRomCurve3.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.points = [];\n\n\tfor ( var i = 0, l = json.points.length; i < l; i ++ ) {\n\n\t\tvar point = json.points[ i ];\n\t\tthis.points.push( new Vector3().fromArray( point ) );\n\n\t}\n\n\tthis.closed = json.closed;\n\tthis.curveType = json.curveType;\n\tthis.tension = json.tension;\n\n\treturn this;\n\n};\n\n\nexport { CatmullRomCurve3 };\n","import { Vector2 } from './Vector2.js';\n\n/**\n * @author bhouston / http://clara.io\n */\n\nvar _vector = new Vector2();\n\nfunction Box2( min, max ) {\n\n\tthis.min = ( min !== undefined ) ? min : new Vector2( + Infinity, + Infinity );\n\tthis.max = ( max !== undefined ) ? max : new Vector2( - Infinity, - Infinity );\n\n}\n\nObject.assign( Box2.prototype, {\n\n\tset: function ( min, max ) {\n\n\t\tthis.min.copy( min );\n\t\tthis.max.copy( max );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPoints: function ( points ) {\n\n\t\tthis.makeEmpty();\n\n\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tthis.expandByPoint( points[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCenterAndSize: function ( center, size ) {\n\n\t\tvar halfSize = _vector.copy( size ).multiplyScalar( 0.5 );\n\t\tthis.min.copy( center ).sub( halfSize );\n\t\tthis.max.copy( center ).add( halfSize );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( box ) {\n\n\t\tthis.min.copy( box.min );\n\t\tthis.max.copy( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tmakeEmpty: function () {\n\n\t\tthis.min.x = this.min.y = + Infinity;\n\t\tthis.max.x = this.max.y = - Infinity;\n\n\t\treturn this;\n\n\t},\n\n\tisEmpty: function () {\n\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y );\n\n\t},\n\n\tgetCenter: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box2: .getCenter() target is now required' );\n\t\t\ttarget = new Vector2();\n\n\t\t}\n\n\t\treturn this.isEmpty() ? target.set( 0, 0 ) : target.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\n\n\t},\n\n\tgetSize: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box2: .getSize() target is now required' );\n\t\t\ttarget = new Vector2();\n\n\t\t}\n\n\t\treturn this.isEmpty() ? target.set( 0, 0 ) : target.subVectors( this.max, this.min );\n\n\t},\n\n\texpandByPoint: function ( point ) {\n\n\t\tthis.min.min( point );\n\t\tthis.max.max( point );\n\n\t\treturn this;\n\n\t},\n\n\texpandByVector: function ( vector ) {\n\n\t\tthis.min.sub( vector );\n\t\tthis.max.add( vector );\n\n\t\treturn this;\n\n\t},\n\n\texpandByScalar: function ( scalar ) {\n\n\t\tthis.min.addScalar( - scalar );\n\t\tthis.max.addScalar( scalar );\n\n\t\treturn this;\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\treturn point.x < this.min.x || point.x > this.max.x ||\n\t\t\tpoint.y < this.min.y || point.y > this.max.y ? false : true;\n\n\t},\n\n\tcontainsBox: function ( box ) {\n\n\t\treturn this.min.x <= box.min.x && box.max.x <= this.max.x &&\n\t\t\tthis.min.y <= box.min.y && box.max.y <= this.max.y;\n\n\t},\n\n\tgetParameter: function ( point, target ) {\n\n\t\t// This can potentially have a divide by zero if the box\n\t\t// has a size dimension of 0.\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box2: .getParameter() target is now required' );\n\t\t\ttarget = new Vector2();\n\n\t\t}\n\n\t\treturn target.set(\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y )\n\t\t);\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\t// using 4 splitting planes to rule out intersections\n\n\t\treturn box.max.x < this.min.x || box.min.x > this.max.x ||\n\t\t\tbox.max.y < this.min.y || box.min.y > this.max.y ? false : true;\n\n\t},\n\n\tclampPoint: function ( point, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box2: .clampPoint() target is now required' );\n\t\t\ttarget = new Vector2();\n\n\t\t}\n\n\t\treturn target.copy( point ).clamp( this.min, this.max );\n\n\t},\n\n\tdistanceToPoint: function ( point ) {\n\n\t\tvar clampedPoint = _vector.copy( point ).clamp( this.min, this.max );\n\t\treturn clampedPoint.sub( point ).length();\n\n\t},\n\n\tintersect: function ( box ) {\n\n\t\tthis.min.max( box.min );\n\t\tthis.max.min( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tunion: function ( box ) {\n\n\t\tthis.min.min( box.min );\n\t\tthis.max.max( box.max );\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.min.add( offset );\n\t\tthis.max.add( offset );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( box ) {\n\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\n\n\t}\n\n} );\n\n\nexport { Box2 };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\nimport { BufferAttribute } from '../core/BufferAttribute.js';\nimport { Mesh } from './Mesh.js';\nimport { Matrix4 } from '../math/Matrix4.js';\n\nvar _instanceLocalMatrix = new Matrix4();\nvar _instanceWorldMatrix = new Matrix4();\n\nvar _instanceIntersects = [];\n\nvar _mesh = new Mesh();\n\nfunction InstancedMesh( geometry, material, count ) {\n\n\tMesh.call( this, geometry, material );\n\n\tthis.instanceMatrix = new BufferAttribute( new Float32Array( count * 16 ), 16 );\n\n\tthis.count = count;\n\n}\n\nInstancedMesh.prototype = Object.assign( Object.create( Mesh.prototype ), {\n\n\tconstructor: InstancedMesh,\n\n\tisInstancedMesh: true,\n\n\tgetMatrixAt: function ( index, matrix ) {\n\n\t\tmatrix.fromArray( this.instanceMatrix.array, index * 16 );\n\n\t},\n\n\traycast: function ( raycaster, intersects ) {\n\n\t\tvar matrixWorld = this.matrixWorld;\n\t\tvar raycastTimes = this.count;\n\n\t\t_mesh.geometry = this.geometry;\n\t\t_mesh.material = this.material;\n\n\t\tif ( _mesh.material === undefined ) return;\n\n\t\tfor ( var instanceId = 0; instanceId < raycastTimes; instanceId ++ ) {\n\n\t\t\t// calculate the world matrix for each instance\n\n\t\t\tthis.getMatrixAt( instanceId, _instanceLocalMatrix );\n\n\t\t\t_instanceWorldMatrix.multiplyMatrices( matrixWorld, _instanceLocalMatrix );\n\n\t\t\t// the mesh represents this single instance\n\n\t\t\t_mesh.matrixWorld = _instanceWorldMatrix;\n\n\t\t\t_mesh.raycast( raycaster, _instanceIntersects );\n\n\t\t\t// process the result of raycast\n\n\t\t\tif ( _instanceIntersects.length > 0 ) {\n\n\t\t\t\t_instanceIntersects[ 0 ].instanceId = instanceId;\n\t\t\t\t_instanceIntersects[ 0 ].object = this;\n\n\t\t\t\tintersects.push( _instanceIntersects[ 0 ] );\n\n\t\t\t\t_instanceIntersects.length = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tsetMatrixAt: function ( index, matrix ) {\n\n\t\tmatrix.toArray( this.instanceMatrix.array, index * 16 );\n\n\t},\n\n\tupdateMorphTargets: function () {\n\n\t}\n\n} );\n\nexport { InstancedMesh };\n","/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n */\n\nimport { Vector2 } from '../math/Vector2.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { Triangle } from '../math/Triangle.js';\nimport { Object3D } from '../core/Object3D.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { InterleavedBuffer } from '../core/InterleavedBuffer.js';\nimport { InterleavedBufferAttribute } from '../core/InterleavedBufferAttribute.js';\nimport { SpriteMaterial } from '../materials/SpriteMaterial.js';\n\nvar _geometry;\n\nvar _intersectPoint = new Vector3();\nvar _worldScale = new Vector3();\nvar _mvPosition = new Vector3();\n\nvar _alignedPosition = new Vector2();\nvar _rotatedPosition = new Vector2();\nvar _viewWorldMatrix = new Matrix4();\n\nvar _vA = new Vector3();\nvar _vB = new Vector3();\nvar _vC = new Vector3();\n\nvar _uvA = new Vector2();\nvar _uvB = new Vector2();\nvar _uvC = new Vector2();\n\nfunction Sprite( material ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Sprite';\n\n\tif ( _geometry === undefined ) {\n\n\t\t_geometry = new BufferGeometry();\n\n\t\tvar float32Array = new Float32Array( [\n\t\t\t- 0.5, - 0.5, 0, 0, 0,\n\t\t\t0.5, - 0.5, 0, 1, 0,\n\t\t\t0.5, 0.5, 0, 1, 1,\n\t\t\t- 0.5, 0.5, 0, 0, 1\n\t\t] );\n\n\t\tvar interleavedBuffer = new InterleavedBuffer( float32Array, 5 );\n\n\t\t_geometry.setIndex( [ 0, 1, 2,\t0, 2, 3 ] );\n\t\t_geometry.setAttribute( 'position', new InterleavedBufferAttribute( interleavedBuffer, 3, 0, false ) );\n\t\t_geometry.setAttribute( 'uv', new InterleavedBufferAttribute( interleavedBuffer, 2, 3, false ) );\n\n\t}\n\n\tthis.geometry = _geometry;\n\tthis.material = ( material !== undefined ) ? material : new SpriteMaterial();\n\n\tthis.center = new Vector2( 0.5, 0.5 );\n\n}\n\nSprite.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Sprite,\n\n\tisSprite: true,\n\n\traycast: function ( raycaster, intersects ) {\n\n\t\tif ( raycaster.camera === null ) {\n\n\t\t\tconsole.error( 'THREE.Sprite: \"Raycaster.camera\" needs to be set in order to raycast against sprites.' );\n\n\t\t}\n\n\t\t_worldScale.setFromMatrixScale( this.matrixWorld );\n\n\t\t_viewWorldMatrix.copy( raycaster.camera.matrixWorld );\n\t\tthis.modelViewMatrix.multiplyMatrices( raycaster.camera.matrixWorldInverse, this.matrixWorld );\n\n\t\t_mvPosition.setFromMatrixPosition( this.modelViewMatrix );\n\n\t\tif ( raycaster.camera.isPerspectiveCamera && this.material.sizeAttenuation === false ) {\n\n\t\t\t_worldScale.multiplyScalar( - _mvPosition.z );\n\n\t\t}\n\n\t\tvar rotation = this.material.rotation;\n\t\tvar sin, cos;\n\t\tif ( rotation !== 0 ) {\n\n\t\t\tcos = Math.cos( rotation );\n\t\t\tsin = Math.sin( rotation );\n\n\t\t}\n\n\t\tvar center = this.center;\n\n\t\ttransformVertex( _vA.set( - 0.5, - 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\n\t\ttransformVertex( _vB.set( 0.5, - 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\n\t\ttransformVertex( _vC.set( 0.5, 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\n\n\t\t_uvA.set( 0, 0 );\n\t\t_uvB.set( 1, 0 );\n\t\t_uvC.set( 1, 1 );\n\n\t\t// check first triangle\n\t\tvar intersect = raycaster.ray.intersectTriangle( _vA, _vB, _vC, false, _intersectPoint );\n\n\t\tif ( intersect === null ) {\n\n\t\t\t// check second triangle\n\t\t\ttransformVertex( _vB.set( - 0.5, 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\n\t\t\t_uvB.set( 0, 1 );\n\n\t\t\tintersect = raycaster.ray.intersectTriangle( _vA, _vC, _vB, false, _intersectPoint );\n\t\t\tif ( intersect === null ) {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar distance = raycaster.ray.origin.distanceTo( _intersectPoint );\n\n\t\tif ( distance < raycaster.near || distance > raycaster.far ) return;\n\n\t\tintersects.push( {\n\n\t\t\tdistance: distance,\n\t\t\tpoint: _intersectPoint.clone(),\n\t\t\tuv: Triangle.getUV( _intersectPoint, _vA, _vB, _vC, _uvA, _uvB, _uvC, new Vector2() ),\n\t\t\tface: null,\n\t\t\tobject: this\n\n\t\t} );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.material ).copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source );\n\n\t\tif ( source.center !== undefined ) this.center.copy( source.center );\n\n\t\treturn this;\n\n\t}\n\n\n} );\n\nfunction transformVertex( vertexPosition, mvPosition, center, scale, sin, cos ) {\n\n\t// compute position in camera space\n\t_alignedPosition.subVectors( vertexPosition, center ).addScalar( 0.5 ).multiply( scale );\n\n\t// to check if rotation is not zero\n\tif ( sin !== undefined ) {\n\n\t\t_rotatedPosition.x = ( cos * _alignedPosition.x ) - ( sin * _alignedPosition.y );\n\t\t_rotatedPosition.y = ( sin * _alignedPosition.x ) + ( cos * _alignedPosition.y );\n\n\t} else {\n\n\t\t_rotatedPosition.copy( _alignedPosition );\n\n\t}\n\n\n\tvertexPosition.copy( mvPosition );\n\tvertexPosition.x += _rotatedPosition.x;\n\tvertexPosition.y += _rotatedPosition.y;\n\n\t// transform to world space\n\tvertexPosition.applyMatrix4( _viewWorldMatrix );\n\n}\n\nexport { Sprite };\n","import { Material } from './Material.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  map: new THREE.Texture( <Image> ),\n *  alphaMap: new THREE.Texture( <Image> ),\n *  rotation: <float>,\n *  sizeAttenuation: <bool>\n * }\n */\n\nfunction SpriteMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'SpriteMaterial';\n\n\tthis.color = new Color( 0xffffff );\n\n\tthis.map = null;\n\n\tthis.alphaMap = null;\n\n\tthis.rotation = 0;\n\n\tthis.sizeAttenuation = true;\n\n\tthis.transparent = true;\n\n\tthis.setValues( parameters );\n\n}\n\nSpriteMaterial.prototype = Object.create( Material.prototype );\nSpriteMaterial.prototype.constructor = SpriteMaterial;\nSpriteMaterial.prototype.isSpriteMaterial = true;\n\nSpriteMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.map = source.map;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.rotation = source.rotation;\n\n\tthis.sizeAttenuation = source.sizeAttenuation;\n\n\treturn this;\n\n};\n\n\nexport { SpriteMaterial };\n","import { Vector3 } from '../math/Vector3.js';\nimport { Object3D } from '../core/Object3D.js';\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar _v1 = new Vector3();\nvar _v2 = new Vector3();\n\nfunction LOD() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'LOD';\n\n\tObject.defineProperties( this, {\n\t\tlevels: {\n\t\t\tenumerable: true,\n\t\t\tvalue: []\n\t\t}\n\t} );\n\n\tthis.autoUpdate = true;\n\n}\n\nLOD.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: LOD,\n\n\tisLOD: true,\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source, false );\n\n\t\tvar levels = source.levels;\n\n\t\tfor ( var i = 0, l = levels.length; i < l; i ++ ) {\n\n\t\t\tvar level = levels[ i ];\n\n\t\t\tthis.addLevel( level.object.clone(), level.distance );\n\n\t\t}\n\n\t\tthis.autoUpdate = source.autoUpdate;\n\n\t\treturn this;\n\n\t},\n\n\taddLevel: function ( object, distance ) {\n\n\t\tif ( distance === undefined ) distance = 0;\n\n\t\tdistance = Math.abs( distance );\n\n\t\tvar levels = this.levels;\n\n\t\tfor ( var l = 0; l < levels.length; l ++ ) {\n\n\t\t\tif ( distance < levels[ l ].distance ) {\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tlevels.splice( l, 0, { distance: distance, object: object } );\n\n\t\tthis.add( object );\n\n\t\treturn this;\n\n\t},\n\n\tgetObjectForDistance: function ( distance ) {\n\n\t\tvar levels = this.levels;\n\n\t\tif ( levels.length > 0 ) {\n\n\t\t\tfor ( var i = 1, l = levels.length; i < l; i ++ ) {\n\n\t\t\t\tif ( distance < levels[ i ].distance ) {\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn levels[ i - 1 ].object;\n\n\t\t}\n\n\t\treturn null;\n\n\t},\n\n\traycast: function ( raycaster, intersects ) {\n\n\t\tvar levels = this.levels;\n\n\t\tif ( levels.length > 0 ) {\n\n\t\t\t_v1.setFromMatrixPosition( this.matrixWorld );\n\n\t\t\tvar distance = raycaster.ray.origin.distanceTo( _v1 );\n\n\t\t\tthis.getObjectForDistance( distance ).raycast( raycaster, intersects );\n\n\t\t}\n\n\t},\n\n\tupdate: function ( camera ) {\n\n\t\tvar levels = this.levels;\n\n\t\tif ( levels.length > 1 ) {\n\n\t\t\t_v1.setFromMatrixPosition( camera.matrixWorld );\n\t\t\t_v2.setFromMatrixPosition( this.matrixWorld );\n\n\t\t\tvar distance = _v1.distanceTo( _v2 );\n\n\t\t\tlevels[ 0 ].object.visible = true;\n\n\t\t\tfor ( var i = 1, l = levels.length; i < l; i ++ ) {\n\n\t\t\t\tif ( distance >= levels[ i ].distance ) {\n\n\t\t\t\t\tlevels[ i - 1 ].object.visible = false;\n\t\t\t\t\tlevels[ i ].object.visible = true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfor ( ; i < l; i ++ ) {\n\n\t\t\t\tlevels[ i ].object.visible = false;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tif ( this.autoUpdate === false ) data.object.autoUpdate = false;\n\n\t\tdata.object.levels = [];\n\n\t\tvar levels = this.levels;\n\n\t\tfor ( var i = 0, l = levels.length; i < l; i ++ ) {\n\n\t\t\tvar level = levels[ i ];\n\n\t\t\tdata.object.levels.push( {\n\t\t\t\tobject: level.object.uuid,\n\t\t\t\tdistance: level.distance\n\t\t\t} );\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n} );\n\n\nexport { LOD };\n","/**\n * @author mrdoob / http://mrdoob.com/\n *\n * parameters = {\n *  color: <THREE.Color>\n * }\n */\n\nimport { Material } from './Material.js';\nimport { Color } from '../math/Color.js';\n\nfunction ShadowMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'ShadowMaterial';\n\n\tthis.color = new Color( 0x000000 );\n\tthis.transparent = true;\n\n\tthis.setValues( parameters );\n\n}\n\nShadowMaterial.prototype = Object.create( Material.prototype );\nShadowMaterial.prototype.constructor = ShadowMaterial;\n\nShadowMaterial.prototype.isShadowMaterial = true;\n\nShadowMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\treturn this;\n\n};\n\n\nexport { ShadowMaterial };\n","import { Vector2 } from '../math/Vector2.js';\nimport { MeshStandardMaterial } from './MeshStandardMaterial.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n *\n * parameters = {\n *  reflectivity: <float>\n *  clearcoat: <float>\n *  clearcoatRoughness: <float>\n *\n *  sheen: <Color>\n *\n *  clearcoatNormalScale: <Vector2>,\n *  clearcoatNormalMap: new THREE.Texture( <Image> ),\n * }\n */\n\nfunction MeshPhysicalMaterial( parameters ) {\n\n\tMeshStandardMaterial.call( this );\n\n\tthis.defines = {\n\n\t\t'STANDARD': '',\n\t\t'PHYSICAL': ''\n\n\t};\n\n\tthis.type = 'MeshPhysicalMaterial';\n\n\tthis.reflectivity = 0.5; // maps to F0 = 0.04\n\n\tthis.clearcoat = 0.0;\n\tthis.clearcoatRoughness = 0.0;\n\n\tthis.sheen = null; // null will disable sheen bsdf\n\n\tthis.clearcoatNormalScale = new Vector2( 1, 1 );\n\tthis.clearcoatNormalMap = null;\n\n\tthis.transparency = 0.0;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshPhysicalMaterial.prototype = Object.create( MeshStandardMaterial.prototype );\nMeshPhysicalMaterial.prototype.constructor = MeshPhysicalMaterial;\n\nMeshPhysicalMaterial.prototype.isMeshPhysicalMaterial = true;\n\nMeshPhysicalMaterial.prototype.copy = function ( source ) {\n\n\tMeshStandardMaterial.prototype.copy.call( this, source );\n\n\tthis.defines = {\n\n\t\t'STANDARD': '',\n\t\t'PHYSICAL': ''\n\n\t};\n\n\tthis.reflectivity = source.reflectivity;\n\n\tthis.clearcoat = source.clearcoat;\n\tthis.clearcoatRoughness = source.clearcoatRoughness;\n\n\tif ( source.sheen ) this.sheen = ( this.sheen || new Color() ).copy( source.sheen );\n\telse this.sheen = null;\n\n\tthis.clearcoatNormalMap = source.clearcoatNormalMap;\n\tthis.clearcoatNormalScale.copy( source.clearcoatNormalScale );\n\n\tthis.transparency = source.transparency;\n\n\treturn this;\n\n};\n\nexport { MeshPhysicalMaterial };\n","import { TangentSpaceNormalMap } from '../constants.js';\nimport { Material } from './Material.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * @author takahirox / http://github.com/takahirox\n *\n * parameters = {\n *  color: <hex>,\n *  specular: <hex>,\n *  shininess: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *  gradientMap: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalMapType: THREE.TangentSpaceNormalMap,\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshToonMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.defines = { 'TOON': '' };\n\n\tthis.type = 'MeshToonMaterial';\n\n\tthis.color = new Color( 0xffffff );\n\tthis.specular = new Color( 0x111111 );\n\tthis.shininess = 30;\n\n\tthis.map = null;\n\tthis.gradientMap = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.emissive = new Color( 0x000000 );\n\tthis.emissiveIntensity = 1.0;\n\tthis.emissiveMap = null;\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalMapType = TangentSpaceNormalMap;\n\tthis.normalScale = new Vector2( 1, 1 );\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.specularMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshToonMaterial.prototype = Object.create( Material.prototype );\nMeshToonMaterial.prototype.constructor = MeshToonMaterial;\n\nMeshToonMaterial.prototype.isMeshToonMaterial = true;\n\nMeshToonMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\tthis.specular.copy( source.specular );\n\tthis.shininess = source.shininess;\n\n\tthis.map = source.map;\n\tthis.gradientMap = source.gradientMap;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.emissive.copy( source.emissive );\n\tthis.emissiveMap = source.emissiveMap;\n\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\tthis.bumpMap = source.bumpMap;\n\tthis.bumpScale = source.bumpScale;\n\n\tthis.normalMap = source.normalMap;\n\tthis.normalMapType = source.normalMapType;\n\tthis.normalScale.copy( source.normalScale );\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.specularMap = source.specularMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n\nexport { MeshToonMaterial };\n","import { TangentSpaceNormalMap } from '../constants.js';\nimport { Material } from './Material.js';\nimport { Vector2 } from '../math/Vector2.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n *\n * parameters = {\n *  opacity: <float>,\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalMapType: THREE.TangentSpaceNormalMap,\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshNormalMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshNormalMaterial';\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalMapType = TangentSpaceNormalMap;\n\tthis.normalScale = new Vector2( 1, 1 );\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.fog = false;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshNormalMaterial.prototype = Object.create( Material.prototype );\nMeshNormalMaterial.prototype.constructor = MeshNormalMaterial;\n\nMeshNormalMaterial.prototype.isMeshNormalMaterial = true;\n\nMeshNormalMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.bumpMap = source.bumpMap;\n\tthis.bumpScale = source.bumpScale;\n\n\tthis.normalMap = source.normalMap;\n\tthis.normalMapType = source.normalMapType;\n\tthis.normalScale.copy( source.normalScale );\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n\nexport { MeshNormalMaterial };\n","import { TangentSpaceNormalMap } from '../constants.js';\nimport { Material } from './Material.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  matcap: new THREE.Texture( <Image> ),\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalMapType: THREE.TangentSpaceNormalMap,\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshMatcapMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.defines = { 'MATCAP': '' };\n\n\tthis.type = 'MeshMatcapMaterial';\n\n\tthis.color = new Color( 0xffffff ); // diffuse\n\n\tthis.matcap = null;\n\n\tthis.map = null;\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalMapType = TangentSpaceNormalMap;\n\tthis.normalScale = new Vector2( 1, 1 );\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.alphaMap = null;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshMatcapMaterial.prototype = Object.create( Material.prototype );\nMeshMatcapMaterial.prototype.constructor = MeshMatcapMaterial;\n\nMeshMatcapMaterial.prototype.isMeshMatcapMaterial = true;\n\nMeshMatcapMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.defines = { 'MATCAP': '' };\n\n\tthis.color.copy( source.color );\n\n\tthis.matcap = source.matcap;\n\n\tthis.map = source.map;\n\n\tthis.bumpMap = source.bumpMap;\n\tthis.bumpScale = source.bumpScale;\n\n\tthis.normalMap = source.normalMap;\n\tthis.normalMapType = source.normalMapType;\n\tthis.normalScale.copy( source.normalScale );\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n\nexport { MeshMatcapMaterial };\n","/**\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  linewidth: <float>,\n *\n *  scale: <float>,\n *  dashSize: <float>,\n *  gapSize: <float>\n * }\n */\n\nimport { LineBasicMaterial } from './LineBasicMaterial.js';\n\nfunction LineDashedMaterial( parameters ) {\n\n\tLineBasicMaterial.call( this );\n\n\tthis.type = 'LineDashedMaterial';\n\n\tthis.scale = 1;\n\tthis.dashSize = 3;\n\tthis.gapSize = 1;\n\n\tthis.setValues( parameters );\n\n}\n\nLineDashedMaterial.prototype = Object.create( LineBasicMaterial.prototype );\nLineDashedMaterial.prototype.constructor = LineDashedMaterial;\n\nLineDashedMaterial.prototype.isLineDashedMaterial = true;\n\nLineDashedMaterial.prototype.copy = function ( source ) {\n\n\tLineBasicMaterial.prototype.copy.call( this, source );\n\n\tthis.scale = source.scale;\n\tthis.dashSize = source.dashSize;\n\tthis.gapSize = source.gapSize;\n\n\treturn this;\n\n};\n\n\nexport { LineDashedMaterial };\n","import { Color } from '../math/Color.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Vector4 } from '../math/Vector4.js';\nimport { Matrix3 } from '../math/Matrix3.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { FileLoader } from './FileLoader.js';\nimport { Loader } from './Loader.js';\nimport * as Materials from '../materials/Materials.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction MaterialLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n\tthis.textures = {};\n\n}\n\nMaterialLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: MaterialLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar loader = new FileLoader( scope.manager );\n\t\tloader.setPath( scope.path );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tparse: function ( json ) {\n\n\t\tvar textures = this.textures;\n\n\t\tfunction getTexture( name ) {\n\n\t\t\tif ( textures[ name ] === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.MaterialLoader: Undefined texture', name );\n\n\t\t\t}\n\n\t\t\treturn textures[ name ];\n\n\t\t}\n\n\t\tvar material = new Materials[ json.type ]();\n\n\t\tif ( json.uuid !== undefined ) material.uuid = json.uuid;\n\t\tif ( json.name !== undefined ) material.name = json.name;\n\t\tif ( json.color !== undefined ) material.color.setHex( json.color );\n\t\tif ( json.roughness !== undefined ) material.roughness = json.roughness;\n\t\tif ( json.metalness !== undefined ) material.metalness = json.metalness;\n\t\tif ( json.sheen !== undefined ) material.sheen = new Color().setHex( json.sheen );\n\t\tif ( json.emissive !== undefined ) material.emissive.setHex( json.emissive );\n\t\tif ( json.specular !== undefined ) material.specular.setHex( json.specular );\n\t\tif ( json.shininess !== undefined ) material.shininess = json.shininess;\n\t\tif ( json.clearcoat !== undefined ) material.clearcoat = json.clearcoat;\n\t\tif ( json.clearcoatRoughness !== undefined ) material.clearcoatRoughness = json.clearcoatRoughness;\n\t\tif ( json.vertexColors !== undefined ) material.vertexColors = json.vertexColors;\n\t\tif ( json.fog !== undefined ) material.fog = json.fog;\n\t\tif ( json.flatShading !== undefined ) material.flatShading = json.flatShading;\n\t\tif ( json.blending !== undefined ) material.blending = json.blending;\n\t\tif ( json.combine !== undefined ) material.combine = json.combine;\n\t\tif ( json.side !== undefined ) material.side = json.side;\n\t\tif ( json.opacity !== undefined ) material.opacity = json.opacity;\n\t\tif ( json.transparent !== undefined ) material.transparent = json.transparent;\n\t\tif ( json.alphaTest !== undefined ) material.alphaTest = json.alphaTest;\n\t\tif ( json.depthTest !== undefined ) material.depthTest = json.depthTest;\n\t\tif ( json.depthWrite !== undefined ) material.depthWrite = json.depthWrite;\n\t\tif ( json.colorWrite !== undefined ) material.colorWrite = json.colorWrite;\n\n\t\tif ( json.stencilWrite !== undefined ) material.stencilWrite = json.stencilWrite;\n\t\tif ( json.stencilWriteMask !== undefined ) material.stencilWriteMask = json.stencilWriteMask;\n\t\tif ( json.stencilFunc !== undefined ) material.stencilFunc = json.stencilFunc;\n\t\tif ( json.stencilRef !== undefined ) material.stencilRef = json.stencilRef;\n\t\tif ( json.stencilFuncMask !== undefined ) material.stencilFuncMask = json.stencilFuncMask;\n\t\tif ( json.stencilFail !== undefined ) material.stencilFail = json.stencilFail;\n\t\tif ( json.stencilZFail !== undefined ) material.stencilZFail = json.stencilZFail;\n\t\tif ( json.stencilZPass !== undefined ) material.stencilZPass = json.stencilZPass;\n\n\t\tif ( json.wireframe !== undefined ) material.wireframe = json.wireframe;\n\t\tif ( json.wireframeLinewidth !== undefined ) material.wireframeLinewidth = json.wireframeLinewidth;\n\t\tif ( json.wireframeLinecap !== undefined ) material.wireframeLinecap = json.wireframeLinecap;\n\t\tif ( json.wireframeLinejoin !== undefined ) material.wireframeLinejoin = json.wireframeLinejoin;\n\n\t\tif ( json.rotation !== undefined ) material.rotation = json.rotation;\n\n\t\tif ( json.linewidth !== 1 ) material.linewidth = json.linewidth;\n\t\tif ( json.dashSize !== undefined ) material.dashSize = json.dashSize;\n\t\tif ( json.gapSize !== undefined ) material.gapSize = json.gapSize;\n\t\tif ( json.scale !== undefined ) material.scale = json.scale;\n\n\t\tif ( json.polygonOffset !== undefined ) material.polygonOffset = json.polygonOffset;\n\t\tif ( json.polygonOffsetFactor !== undefined ) material.polygonOffsetFactor = json.polygonOffsetFactor;\n\t\tif ( json.polygonOffsetUnits !== undefined ) material.polygonOffsetUnits = json.polygonOffsetUnits;\n\n\t\tif ( json.skinning !== undefined ) material.skinning = json.skinning;\n\t\tif ( json.morphTargets !== undefined ) material.morphTargets = json.morphTargets;\n\t\tif ( json.morphNormals !== undefined ) material.morphNormals = json.morphNormals;\n\t\tif ( json.dithering !== undefined ) material.dithering = json.dithering;\n\n\t\tif ( json.visible !== undefined ) material.visible = json.visible;\n\n\t\tif ( json.toneMapped !== undefined ) material.toneMapped = json.toneMapped;\n\n\t\tif ( json.userData !== undefined ) material.userData = json.userData;\n\n\t\t// Shader Material\n\n\t\tif ( json.uniforms !== undefined ) {\n\n\t\t\tfor ( var name in json.uniforms ) {\n\n\t\t\t\tvar uniform = json.uniforms[ name ];\n\n\t\t\t\tmaterial.uniforms[ name ] = {};\n\n\t\t\t\tswitch ( uniform.type ) {\n\n\t\t\t\t\tcase 't':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = getTexture( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'c':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Color().setHex( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'v2':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Vector2().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'v3':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Vector3().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'v4':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Vector4().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'm3':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Matrix3().fromArray( uniform.value );\n\n\t\t\t\t\tcase 'm4':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Matrix4().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = uniform.value;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( json.defines !== undefined ) material.defines = json.defines;\n\t\tif ( json.vertexShader !== undefined ) material.vertexShader = json.vertexShader;\n\t\tif ( json.fragmentShader !== undefined ) material.fragmentShader = json.fragmentShader;\n\n\t\tif ( json.extensions !== undefined ) {\n\n\t\t\tfor ( var key in json.extensions ) {\n\n\t\t\t\tmaterial.extensions[ key ] = json.extensions[ key ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Deprecated\n\n\t\tif ( json.shading !== undefined ) material.flatShading = json.shading === 1; // THREE.FlatShading\n\n\t\t// for PointsMaterial\n\n\t\tif ( json.size !== undefined ) material.size = json.size;\n\t\tif ( json.sizeAttenuation !== undefined ) material.sizeAttenuation = json.sizeAttenuation;\n\n\t\t// maps\n\n\t\tif ( json.map !== undefined ) material.map = getTexture( json.map );\n\t\tif ( json.matcap !== undefined ) material.matcap = getTexture( json.matcap );\n\n\t\tif ( json.alphaMap !== undefined ) {\n\n\t\t\tmaterial.alphaMap = getTexture( json.alphaMap );\n\t\t\tmaterial.transparent = true;\n\n\t\t}\n\n\t\tif ( json.bumpMap !== undefined ) material.bumpMap = getTexture( json.bumpMap );\n\t\tif ( json.bumpScale !== undefined ) material.bumpScale = json.bumpScale;\n\n\t\tif ( json.normalMap !== undefined ) material.normalMap = getTexture( json.normalMap );\n\t\tif ( json.normalMapType !== undefined ) material.normalMapType = json.normalMapType;\n\t\tif ( json.normalScale !== undefined ) {\n\n\t\t\tvar normalScale = json.normalScale;\n\n\t\t\tif ( Array.isArray( normalScale ) === false ) {\n\n\t\t\t\t// Blender exporter used to export a scalar. See #7459\n\n\t\t\t\tnormalScale = [ normalScale, normalScale ];\n\n\t\t\t}\n\n\t\t\tmaterial.normalScale = new Vector2().fromArray( normalScale );\n\n\t\t}\n\n\t\tif ( json.displacementMap !== undefined ) material.displacementMap = getTexture( json.displacementMap );\n\t\tif ( json.displacementScale !== undefined ) material.displacementScale = json.displacementScale;\n\t\tif ( json.displacementBias !== undefined ) material.displacementBias = json.displacementBias;\n\n\t\tif ( json.roughnessMap !== undefined ) material.roughnessMap = getTexture( json.roughnessMap );\n\t\tif ( json.metalnessMap !== undefined ) material.metalnessMap = getTexture( json.metalnessMap );\n\n\t\tif ( json.emissiveMap !== undefined ) material.emissiveMap = getTexture( json.emissiveMap );\n\t\tif ( json.emissiveIntensity !== undefined ) material.emissiveIntensity = json.emissiveIntensity;\n\n\t\tif ( json.specularMap !== undefined ) material.specularMap = getTexture( json.specularMap );\n\n\t\tif ( json.envMap !== undefined ) material.envMap = getTexture( json.envMap );\n\t\tif ( json.envMapIntensity !== undefined ) material.envMapIntensity = json.envMapIntensity;\n\n\t\tif ( json.reflectivity !== undefined ) material.reflectivity = json.reflectivity;\n\t\tif ( json.refractionRatio !== undefined ) material.refractionRatio = json.refractionRatio;\n\n\t\tif ( json.lightMap !== undefined ) material.lightMap = getTexture( json.lightMap );\n\t\tif ( json.lightMapIntensity !== undefined ) material.lightMapIntensity = json.lightMapIntensity;\n\n\t\tif ( json.aoMap !== undefined ) material.aoMap = getTexture( json.aoMap );\n\t\tif ( json.aoMapIntensity !== undefined ) material.aoMapIntensity = json.aoMapIntensity;\n\n\t\tif ( json.gradientMap !== undefined ) material.gradientMap = getTexture( json.gradientMap );\n\n\t\tif ( json.clearcoatNormalMap !== undefined ) material.clearcoatNormalMap = getTexture( json.clearcoatNormalMap );\n\t\tif ( json.clearcoatNormalScale !== undefined ) material.clearcoatNormalScale = new Vector2().fromArray( json.clearcoatNormalScale );\n\n\t\treturn material;\n\n\t},\n\n\tsetTextures: function ( value ) {\n\n\t\tthis.textures = value;\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { MaterialLoader };\n","import { Sphere } from '../math/Sphere.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { BufferAttribute } from '../core/BufferAttribute.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { FileLoader } from './FileLoader.js';\nimport { Loader } from './Loader.js';\nimport { InstancedBufferGeometry } from '../core/InstancedBufferGeometry.js';\nimport { InstancedBufferAttribute } from '../core/InstancedBufferAttribute.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction BufferGeometryLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nBufferGeometryLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: BufferGeometryLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar loader = new FileLoader( scope.manager );\n\t\tloader.setPath( scope.path );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tparse: function ( json ) {\n\n\t\tvar geometry = json.isInstancedBufferGeometry ? new InstancedBufferGeometry() : new BufferGeometry();\n\n\t\tvar index = json.data.index;\n\n\t\tif ( index !== undefined ) {\n\n\t\t\tvar typedArray = new TYPED_ARRAYS[ index.type ]( index.array );\n\t\t\tgeometry.setIndex( new BufferAttribute( typedArray, 1 ) );\n\n\t\t}\n\n\t\tvar attributes = json.data.attributes;\n\n\t\tfor ( var key in attributes ) {\n\n\t\t\tvar attribute = attributes[ key ];\n\t\t\tvar typedArray = new TYPED_ARRAYS[ attribute.type ]( attribute.array );\n\t\t\tvar bufferAttributeConstr = attribute.isInstancedBufferAttribute ? InstancedBufferAttribute : BufferAttribute;\n\t\t\tvar bufferAttribute = new bufferAttributeConstr( typedArray, attribute.itemSize, attribute.normalized );\n\t\t\tif ( attribute.name !== undefined ) bufferAttribute.name = attribute.name;\n\t\t\tgeometry.setAttribute( key, bufferAttribute );\n\n\t\t}\n\n\t\tvar morphAttributes = json.data.morphAttributes;\n\n\t\tif ( morphAttributes ) {\n\n\t\t\tfor ( var key in morphAttributes ) {\n\n\t\t\t\tvar attributeArray = morphAttributes[ key ];\n\n\t\t\t\tvar array = [];\n\n\t\t\t\tfor ( var i = 0, il = attributeArray.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar attribute = attributeArray[ i ];\n\t\t\t\t\tvar typedArray = new TYPED_ARRAYS[ attribute.type ]( attribute.array );\n\n\t\t\t\t\tvar bufferAttribute = new BufferAttribute( typedArray, attribute.itemSize, attribute.normalized );\n\t\t\t\t\tif ( attribute.name !== undefined ) bufferAttribute.name = attribute.name;\n\t\t\t\t\tarray.push( bufferAttribute );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.morphAttributes[ key ] = array;\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar morphTargetsRelative = json.data.morphTargetsRelative;\n\n\t\tif ( morphTargetsRelative ) {\n\n\t\t\tgeometry.morphTargetsRelative = true;\n\n\t\t}\n\n\t\tvar groups = json.data.groups || json.data.drawcalls || json.data.offsets;\n\n\t\tif ( groups !== undefined ) {\n\n\t\t\tfor ( var i = 0, n = groups.length; i !== n; ++ i ) {\n\n\t\t\t\tvar group = groups[ i ];\n\n\t\t\t\tgeometry.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar boundingSphere = json.data.boundingSphere;\n\n\t\tif ( boundingSphere !== undefined ) {\n\n\t\t\tvar center = new Vector3();\n\n\t\t\tif ( boundingSphere.center !== undefined ) {\n\n\t\t\t\tcenter.fromArray( boundingSphere.center );\n\n\t\t\t}\n\n\t\t\tgeometry.boundingSphere = new Sphere( center, boundingSphere.radius );\n\n\t\t}\n\n\t\tif ( json.name ) geometry.name = json.name;\n\t\tif ( json.userData ) geometry.userData = json.userData;\n\n\t\treturn geometry;\n\n\t}\n\n} );\n\nvar TYPED_ARRAYS = {\n\tInt8Array: Int8Array,\n\tUint8Array: Uint8Array,\n\t// Workaround for IE11 pre KB2929437. See #11440\n\tUint8ClampedArray: typeof Uint8ClampedArray !== 'undefined' ? Uint8ClampedArray : Uint8Array,\n\tInt16Array: Int16Array,\n\tUint16Array: Uint16Array,\n\tInt32Array: Int32Array,\n\tUint32Array: Uint32Array,\n\tFloat32Array: Float32Array,\n\tFloat64Array: Float64Array\n};\n\nexport { BufferGeometryLoader };\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { Vector3 } from '../math/Vector3.js';\n\nfunction WireframeGeometry( geometry ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'WireframeGeometry';\n\n\t// buffer\n\n\tvar vertices = [];\n\n\t// helper variables\n\n\tvar i, j, l, o, ol;\n\tvar edge = [ 0, 0 ], edges = {}, e, edge1, edge2;\n\tvar key, keys = [ 'a', 'b', 'c' ];\n\tvar vertex;\n\n\t// different logic for Geometry and BufferGeometry\n\n\tif ( geometry && geometry.isGeometry ) {\n\n\t\t// create a data structure that contains all edges without duplicates\n\n\t\tvar faces = geometry.faces;\n\n\t\tfor ( i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\tvar face = faces[ i ];\n\n\t\t\tfor ( j = 0; j < 3; j ++ ) {\n\n\t\t\t\tedge1 = face[ keys[ j ] ];\n\t\t\t\tedge2 = face[ keys[ ( j + 1 ) % 3 ] ];\n\t\t\t\tedge[ 0 ] = Math.min( edge1, edge2 ); // sorting prevents duplicates\n\t\t\t\tedge[ 1 ] = Math.max( edge1, edge2 );\n\n\t\t\t\tkey = edge[ 0 ] + ',' + edge[ 1 ];\n\n\t\t\t\tif ( edges[ key ] === undefined ) {\n\n\t\t\t\t\tedges[ key ] = { index1: edge[ 0 ], index2: edge[ 1 ] };\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// generate vertices\n\n\t\tfor ( key in edges ) {\n\n\t\t\te = edges[ key ];\n\n\t\t\tvertex = geometry.vertices[ e.index1 ];\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\tvertex = geometry.vertices[ e.index2 ];\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t}\n\n\t} else if ( geometry && geometry.isBufferGeometry ) {\n\n\t\tvar position, indices, groups;\n\t\tvar group, start, count;\n\t\tvar index1, index2;\n\n\t\tvertex = new Vector3();\n\n\t\tif ( geometry.index !== null ) {\n\n\t\t\t// indexed BufferGeometry\n\n\t\t\tposition = geometry.attributes.position;\n\t\t\tindices = geometry.index;\n\t\t\tgroups = geometry.groups;\n\n\t\t\tif ( groups.length === 0 ) {\n\n\t\t\t\tgroups = [ { start: 0, count: indices.count, materialIndex: 0 } ];\n\n\t\t\t}\n\n\t\t\t// create a data structure that contains all eges without duplicates\n\n\t\t\tfor ( o = 0, ol = groups.length; o < ol; ++ o ) {\n\n\t\t\t\tgroup = groups[ o ];\n\n\t\t\t\tstart = group.start;\n\t\t\t\tcount = group.count;\n\n\t\t\t\tfor ( i = start, l = ( start + count ); i < l; i += 3 ) {\n\n\t\t\t\t\tfor ( j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\t\tedge1 = indices.getX( i + j );\n\t\t\t\t\t\tedge2 = indices.getX( i + ( j + 1 ) % 3 );\n\t\t\t\t\t\tedge[ 0 ] = Math.min( edge1, edge2 ); // sorting prevents duplicates\n\t\t\t\t\t\tedge[ 1 ] = Math.max( edge1, edge2 );\n\n\t\t\t\t\t\tkey = edge[ 0 ] + ',' + edge[ 1 ];\n\n\t\t\t\t\t\tif ( edges[ key ] === undefined ) {\n\n\t\t\t\t\t\t\tedges[ key ] = { index1: edge[ 0 ], index2: edge[ 1 ] };\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// generate vertices\n\n\t\t\tfor ( key in edges ) {\n\n\t\t\t\te = edges[ key ];\n\n\t\t\t\tvertex.fromBufferAttribute( position, e.index1 );\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\tvertex.fromBufferAttribute( position, e.index2 );\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// non-indexed BufferGeometry\n\n\t\t\tposition = geometry.attributes.position;\n\n\t\t\tfor ( i = 0, l = ( position.count / 3 ); i < l; i ++ ) {\n\n\t\t\t\tfor ( j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\t// three edges per triangle, an edge is represented as (index1, index2)\n\t\t\t\t\t// e.g. the first triangle has the following edges: (0,1),(1,2),(2,0)\n\n\t\t\t\t\tindex1 = 3 * i + j;\n\t\t\t\t\tvertex.fromBufferAttribute( position, index1 );\n\t\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t\tindex2 = 3 * i + ( ( j + 1 ) % 3 );\n\t\t\t\t\tvertex.fromBufferAttribute( position, index2 );\n\t\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\n}\n\nWireframeGeometry.prototype = Object.create( BufferGeometry.prototype );\nWireframeGeometry.prototype.constructor = WireframeGeometry;\n\n\nexport { WireframeGeometry };\n","/**\n * @author zz85 / https://github.com/zz85\n * @author Mugen87 / https://github.com/Mugen87\n *\n * Parametric Surfaces Geometry\n * based on the brilliant article by @prideout http://prideout.net/blog/?p=44\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { Vector3 } from '../math/Vector3.js';\n\n// ParametricGeometry\n\nfunction ParametricGeometry( func, slices, stacks ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'ParametricGeometry';\n\n\tthis.parameters = {\n\t\tfunc: func,\n\t\tslices: slices,\n\t\tstacks: stacks\n\t};\n\n\tthis.fromBufferGeometry( new ParametricBufferGeometry( func, slices, stacks ) );\n\tthis.mergeVertices();\n\n}\n\nParametricGeometry.prototype = Object.create( Geometry.prototype );\nParametricGeometry.prototype.constructor = ParametricGeometry;\n\n// ParametricBufferGeometry\n\nfunction ParametricBufferGeometry( func, slices, stacks ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'ParametricBufferGeometry';\n\n\tthis.parameters = {\n\t\tfunc: func,\n\t\tslices: slices,\n\t\tstacks: stacks\n\t};\n\n\t// buffers\n\n\tvar indices = [];\n\tvar vertices = [];\n\tvar normals = [];\n\tvar uvs = [];\n\n\tvar EPS = 0.00001;\n\n\tvar normal = new Vector3();\n\n\tvar p0 = new Vector3(), p1 = new Vector3();\n\tvar pu = new Vector3(), pv = new Vector3();\n\n\tvar i, j;\n\n\tif ( func.length < 3 ) {\n\n\t\tconsole.error( 'THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.' );\n\n\t}\n\n\t// generate vertices, normals and uvs\n\n\tvar sliceCount = slices + 1;\n\n\tfor ( i = 0; i <= stacks; i ++ ) {\n\n\t\tvar v = i / stacks;\n\n\t\tfor ( j = 0; j <= slices; j ++ ) {\n\n\t\t\tvar u = j / slices;\n\n\t\t\t// vertex\n\n\t\t\tfunc( u, v, p0 );\n\t\t\tvertices.push( p0.x, p0.y, p0.z );\n\n\t\t\t// normal\n\n\t\t\t// approximate tangent vectors via finite differences\n\n\t\t\tif ( u - EPS >= 0 ) {\n\n\t\t\t\tfunc( u - EPS, v, p1 );\n\t\t\t\tpu.subVectors( p0, p1 );\n\n\t\t\t} else {\n\n\t\t\t\tfunc( u + EPS, v, p1 );\n\t\t\t\tpu.subVectors( p1, p0 );\n\n\t\t\t}\n\n\t\t\tif ( v - EPS >= 0 ) {\n\n\t\t\t\tfunc( u, v - EPS, p1 );\n\t\t\t\tpv.subVectors( p0, p1 );\n\n\t\t\t} else {\n\n\t\t\t\tfunc( u, v + EPS, p1 );\n\t\t\t\tpv.subVectors( p1, p0 );\n\n\t\t\t}\n\n\t\t\t// cross product of tangent vectors returns surface normal\n\n\t\t\tnormal.crossVectors( pu, pv ).normalize();\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t// uv\n\n\t\t\tuvs.push( u, v );\n\n\t\t}\n\n\t}\n\n\t// generate indices\n\n\tfor ( i = 0; i < stacks; i ++ ) {\n\n\t\tfor ( j = 0; j < slices; j ++ ) {\n\n\t\t\tvar a = i * sliceCount + j;\n\t\t\tvar b = i * sliceCount + j + 1;\n\t\t\tvar c = ( i + 1 ) * sliceCount + j + 1;\n\t\t\tvar d = ( i + 1 ) * sliceCount + j;\n\n\t\t\t// faces one and two\n\n\t\t\tindices.push( a, b, d );\n\t\t\tindices.push( b, c, d );\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n}\n\nParametricBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nParametricBufferGeometry.prototype.constructor = ParametricBufferGeometry;\n\n\nexport { ParametricGeometry, ParametricBufferGeometry };\n","/**\n * @author timothypratley / https://github.com/timothypratley\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { PolyhedronBufferGeometry } from './PolyhedronGeometry.js';\n\n// TetrahedronGeometry\n\nfunction TetrahedronGeometry( radius, detail ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'TetrahedronGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n\tthis.fromBufferGeometry( new TetrahedronBufferGeometry( radius, detail ) );\n\tthis.mergeVertices();\n\n}\n\nTetrahedronGeometry.prototype = Object.create( Geometry.prototype );\nTetrahedronGeometry.prototype.constructor = TetrahedronGeometry;\n\n// TetrahedronBufferGeometry\n\nfunction TetrahedronBufferGeometry( radius, detail ) {\n\n\tvar vertices = [\n\t\t1, 1, 1, \t- 1, - 1, 1, \t- 1, 1, - 1, \t1, - 1, - 1\n\t];\n\n\tvar indices = [\n\t\t2, 1, 0, \t0, 3, 2,\t1, 3, 0,\t2, 3, 1\n\t];\n\n\tPolyhedronBufferGeometry.call( this, vertices, indices, radius, detail );\n\n\tthis.type = 'TetrahedronBufferGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n}\n\nTetrahedronBufferGeometry.prototype = Object.create( PolyhedronBufferGeometry.prototype );\nTetrahedronBufferGeometry.prototype.constructor = TetrahedronBufferGeometry;\n\n\nexport { TetrahedronGeometry, TetrahedronBufferGeometry };\n","/**\n * @author Abe Pazos / https://hamoid.com\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { PolyhedronBufferGeometry } from './PolyhedronGeometry.js';\n\n// DodecahedronGeometry\n\nfunction DodecahedronGeometry( radius, detail ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'DodecahedronGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n\tthis.fromBufferGeometry( new DodecahedronBufferGeometry( radius, detail ) );\n\tthis.mergeVertices();\n\n}\n\nDodecahedronGeometry.prototype = Object.create( Geometry.prototype );\nDodecahedronGeometry.prototype.constructor = DodecahedronGeometry;\n\n// DodecahedronBufferGeometry\n\nfunction DodecahedronBufferGeometry( radius, detail ) {\n\n\tvar t = ( 1 + Math.sqrt( 5 ) ) / 2;\n\tvar r = 1 / t;\n\n\tvar vertices = [\n\n\t\t// (±1, ±1, ±1)\n\t\t- 1, - 1, - 1,\t- 1, - 1, 1,\n\t\t- 1, 1, - 1, - 1, 1, 1,\n\t\t1, - 1, - 1, 1, - 1, 1,\n\t\t1, 1, - 1, 1, 1, 1,\n\n\t\t// (0, ±1/φ, ±φ)\n\t\t 0, - r, - t, 0, - r, t,\n\t\t 0, r, - t, 0, r, t,\n\n\t\t// (±1/φ, ±φ, 0)\n\t\t- r, - t, 0, - r, t, 0,\n\t\t r, - t, 0, r, t, 0,\n\n\t\t// (±φ, 0, ±1/φ)\n\t\t- t, 0, - r, t, 0, - r,\n\t\t- t, 0, r, t, 0, r\n\t];\n\n\tvar indices = [\n\t\t3, 11, 7, \t3, 7, 15, \t3, 15, 13,\n\t\t7, 19, 17, \t7, 17, 6, \t7, 6, 15,\n\t\t17, 4, 8, \t17, 8, 10, \t17, 10, 6,\n\t\t8, 0, 16, \t8, 16, 2, \t8, 2, 10,\n\t\t0, 12, 1, \t0, 1, 18, \t0, 18, 16,\n\t\t6, 10, 2, \t6, 2, 13, \t6, 13, 15,\n\t\t2, 16, 18, \t2, 18, 3, \t2, 3, 13,\n\t\t18, 1, 9, \t18, 9, 11, \t18, 11, 3,\n\t\t4, 14, 12, \t4, 12, 0, \t4, 0, 8,\n\t\t11, 9, 5, \t11, 5, 19, \t11, 19, 7,\n\t\t19, 5, 14, \t19, 14, 4, \t19, 4, 17,\n\t\t1, 12, 14, \t1, 14, 5, \t1, 5, 9\n\t];\n\n\tPolyhedronBufferGeometry.call( this, vertices, indices, radius, detail );\n\n\tthis.type = 'DodecahedronBufferGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n}\n\nDodecahedronBufferGeometry.prototype = Object.create( PolyhedronBufferGeometry.prototype );\nDodecahedronBufferGeometry.prototype.constructor = DodecahedronBufferGeometry;\n\n\nexport { DodecahedronGeometry, DodecahedronBufferGeometry };\n","/**\n * @author oosmoxiecode / https://github.com/oosmoxiecode\n * @author WestLangley / https://github.com/WestLangley\n * @author zz85 / https://github.com/zz85\n * @author miningold / https://github.com/miningold\n * @author jonobr1 / https://github.com/jonobr1\n * @author Mugen87 / https://github.com/Mugen87\n *\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Vector3 } from '../math/Vector3.js';\n\n// TubeGeometry\n\nfunction TubeGeometry( path, tubularSegments, radius, radialSegments, closed, taper ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'TubeGeometry';\n\n\tthis.parameters = {\n\t\tpath: path,\n\t\ttubularSegments: tubularSegments,\n\t\tradius: radius,\n\t\tradialSegments: radialSegments,\n\t\tclosed: closed\n\t};\n\n\tif ( taper !== undefined ) console.warn( 'THREE.TubeGeometry: taper has been removed.' );\n\n\tvar bufferGeometry = new TubeBufferGeometry( path, tubularSegments, radius, radialSegments, closed );\n\n\t// expose internals\n\n\tthis.tangents = bufferGeometry.tangents;\n\tthis.normals = bufferGeometry.normals;\n\tthis.binormals = bufferGeometry.binormals;\n\n\t// create geometry\n\n\tthis.fromBufferGeometry( bufferGeometry );\n\tthis.mergeVertices();\n\n}\n\nTubeGeometry.prototype = Object.create( Geometry.prototype );\nTubeGeometry.prototype.constructor = TubeGeometry;\n\n// TubeBufferGeometry\n\nfunction TubeBufferGeometry( path, tubularSegments, radius, radialSegments, closed ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'TubeBufferGeometry';\n\n\tthis.parameters = {\n\t\tpath: path,\n\t\ttubularSegments: tubularSegments,\n\t\tradius: radius,\n\t\tradialSegments: radialSegments,\n\t\tclosed: closed\n\t};\n\n\ttubularSegments = tubularSegments || 64;\n\tradius = radius || 1;\n\tradialSegments = radialSegments || 8;\n\tclosed = closed || false;\n\n\tvar frames = path.computeFrenetFrames( tubularSegments, closed );\n\n\t// expose internals\n\n\tthis.tangents = frames.tangents;\n\tthis.normals = frames.normals;\n\tthis.binormals = frames.binormals;\n\n\t// helper variables\n\n\tvar vertex = new Vector3();\n\tvar normal = new Vector3();\n\tvar uv = new Vector2();\n\tvar P = new Vector3();\n\n\tvar i, j;\n\n\t// buffer\n\n\tvar vertices = [];\n\tvar normals = [];\n\tvar uvs = [];\n\tvar indices = [];\n\n\t// create buffer data\n\n\tgenerateBufferData();\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t// functions\n\n\tfunction generateBufferData() {\n\n\t\tfor ( i = 0; i < tubularSegments; i ++ ) {\n\n\t\t\tgenerateSegment( i );\n\n\t\t}\n\n\t\t// if the geometry is not closed, generate the last row of vertices and normals\n\t\t// at the regular position on the given path\n\t\t//\n\t\t// if the geometry is closed, duplicate the first row of vertices and normals (uvs will differ)\n\n\t\tgenerateSegment( ( closed === false ) ? tubularSegments : 0 );\n\n\t\t// uvs are generated in a separate function.\n\t\t// this makes it easy compute correct values for closed geometries\n\n\t\tgenerateUVs();\n\n\t\t// finally create faces\n\n\t\tgenerateIndices();\n\n\t}\n\n\tfunction generateSegment( i ) {\n\n\t\t// we use getPointAt to sample evenly distributed points from the given path\n\n\t\tP = path.getPointAt( i / tubularSegments, P );\n\n\t\t// retrieve corresponding normal and binormal\n\n\t\tvar N = frames.normals[ i ];\n\t\tvar B = frames.binormals[ i ];\n\n\t\t// generate normals and vertices for the current segment\n\n\t\tfor ( j = 0; j <= radialSegments; j ++ ) {\n\n\t\t\tvar v = j / radialSegments * Math.PI * 2;\n\n\t\t\tvar sin = Math.sin( v );\n\t\t\tvar cos = - Math.cos( v );\n\n\t\t\t// normal\n\n\t\t\tnormal.x = ( cos * N.x + sin * B.x );\n\t\t\tnormal.y = ( cos * N.y + sin * B.y );\n\t\t\tnormal.z = ( cos * N.z + sin * B.z );\n\t\t\tnormal.normalize();\n\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t// vertex\n\n\t\t\tvertex.x = P.x + radius * normal.x;\n\t\t\tvertex.y = P.y + radius * normal.y;\n\t\t\tvertex.z = P.z + radius * normal.z;\n\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t}\n\n\t}\n\n\tfunction generateIndices() {\n\n\t\tfor ( j = 1; j <= tubularSegments; j ++ ) {\n\n\t\t\tfor ( i = 1; i <= radialSegments; i ++ ) {\n\n\t\t\t\tvar a = ( radialSegments + 1 ) * ( j - 1 ) + ( i - 1 );\n\t\t\t\tvar b = ( radialSegments + 1 ) * j + ( i - 1 );\n\t\t\t\tvar c = ( radialSegments + 1 ) * j + i;\n\t\t\t\tvar d = ( radialSegments + 1 ) * ( j - 1 ) + i;\n\n\t\t\t\t// faces\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction generateUVs() {\n\n\t\tfor ( i = 0; i <= tubularSegments; i ++ ) {\n\n\t\t\tfor ( j = 0; j <= radialSegments; j ++ ) {\n\n\t\t\t\tuv.x = i / tubularSegments;\n\t\t\t\tuv.y = j / radialSegments;\n\n\t\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nTubeBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nTubeBufferGeometry.prototype.constructor = TubeBufferGeometry;\n\nTubeBufferGeometry.prototype.toJSON = function () {\n\n\tvar data = BufferGeometry.prototype.toJSON.call( this );\n\n\tdata.path = this.parameters.path.toJSON();\n\n\treturn data;\n\n};\n\nexport { TubeGeometry, TubeBufferGeometry };\n","/**\n * @author Kaleb Murphy\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Vector3 } from '../math/Vector3.js';\n\n// RingGeometry\n\nfunction RingGeometry( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'RingGeometry';\n\n\tthis.parameters = {\n\t\tinnerRadius: innerRadius,\n\t\touterRadius: outerRadius,\n\t\tthetaSegments: thetaSegments,\n\t\tphiSegments: phiSegments,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tthis.fromBufferGeometry( new RingBufferGeometry( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) );\n\tthis.mergeVertices();\n\n}\n\nRingGeometry.prototype = Object.create( Geometry.prototype );\nRingGeometry.prototype.constructor = RingGeometry;\n\n// RingBufferGeometry\n\nfunction RingBufferGeometry( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'RingBufferGeometry';\n\n\tthis.parameters = {\n\t\tinnerRadius: innerRadius,\n\t\touterRadius: outerRadius,\n\t\tthetaSegments: thetaSegments,\n\t\tphiSegments: phiSegments,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tinnerRadius = innerRadius || 0.5;\n\touterRadius = outerRadius || 1;\n\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\n\n\tthetaSegments = thetaSegments !== undefined ? Math.max( 3, thetaSegments ) : 8;\n\tphiSegments = phiSegments !== undefined ? Math.max( 1, phiSegments ) : 1;\n\n\t// buffers\n\n\tvar indices = [];\n\tvar vertices = [];\n\tvar normals = [];\n\tvar uvs = [];\n\n\t// some helper variables\n\n\tvar segment;\n\tvar radius = innerRadius;\n\tvar radiusStep = ( ( outerRadius - innerRadius ) / phiSegments );\n\tvar vertex = new Vector3();\n\tvar uv = new Vector2();\n\tvar j, i;\n\n\t// generate vertices, normals and uvs\n\n\tfor ( j = 0; j <= phiSegments; j ++ ) {\n\n\t\tfor ( i = 0; i <= thetaSegments; i ++ ) {\n\n\t\t\t// values are generate from the inside of the ring to the outside\n\n\t\t\tsegment = thetaStart + i / thetaSegments * thetaLength;\n\n\t\t\t// vertex\n\n\t\t\tvertex.x = radius * Math.cos( segment );\n\t\t\tvertex.y = radius * Math.sin( segment );\n\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t// normal\n\n\t\t\tnormals.push( 0, 0, 1 );\n\n\t\t\t// uv\n\n\t\t\tuv.x = ( vertex.x / outerRadius + 1 ) / 2;\n\t\t\tuv.y = ( vertex.y / outerRadius + 1 ) / 2;\n\n\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t}\n\n\t\t// increase the radius for next row of vertices\n\n\t\tradius += radiusStep;\n\n\t}\n\n\t// indices\n\n\tfor ( j = 0; j < phiSegments; j ++ ) {\n\n\t\tvar thetaSegmentLevel = j * ( thetaSegments + 1 );\n\n\t\tfor ( i = 0; i < thetaSegments; i ++ ) {\n\n\t\t\tsegment = i + thetaSegmentLevel;\n\n\t\t\tvar a = segment;\n\t\t\tvar b = segment + thetaSegments + 1;\n\t\t\tvar c = segment + thetaSegments + 2;\n\t\t\tvar d = segment + 1;\n\n\t\t\t// faces\n\n\t\t\tindices.push( a, b, d );\n\t\t\tindices.push( b, c, d );\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n}\n\nRingBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nRingBufferGeometry.prototype.constructor = RingBufferGeometry;\n\n\nexport { RingGeometry, RingBufferGeometry };\n","/**\n * @author zz85 / https://github.com/zz85\n * @author bhouston / http://clara.io\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { _Math } from '../math/Math.js';\n\n// LatheGeometry\n\nfunction LatheGeometry( points, segments, phiStart, phiLength ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'LatheGeometry';\n\n\tthis.parameters = {\n\t\tpoints: points,\n\t\tsegments: segments,\n\t\tphiStart: phiStart,\n\t\tphiLength: phiLength\n\t};\n\n\tthis.fromBufferGeometry( new LatheBufferGeometry( points, segments, phiStart, phiLength ) );\n\tthis.mergeVertices();\n\n}\n\nLatheGeometry.prototype = Object.create( Geometry.prototype );\nLatheGeometry.prototype.constructor = LatheGeometry;\n\n// LatheBufferGeometry\n\nfunction LatheBufferGeometry( points, segments, phiStart, phiLength ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'LatheBufferGeometry';\n\n\tthis.parameters = {\n\t\tpoints: points,\n\t\tsegments: segments,\n\t\tphiStart: phiStart,\n\t\tphiLength: phiLength\n\t};\n\n\tsegments = Math.floor( segments ) || 12;\n\tphiStart = phiStart || 0;\n\tphiLength = phiLength || Math.PI * 2;\n\n\t// clamp phiLength so it's in range of [ 0, 2PI ]\n\n\tphiLength = _Math.clamp( phiLength, 0, Math.PI * 2 );\n\n\n\t// buffers\n\n\tvar indices = [];\n\tvar vertices = [];\n\tvar uvs = [];\n\n\t// helper variables\n\n\tvar base;\n\tvar inverseSegments = 1.0 / segments;\n\tvar vertex = new Vector3();\n\tvar uv = new Vector2();\n\tvar i, j;\n\n\t// generate vertices and uvs\n\n\tfor ( i = 0; i <= segments; i ++ ) {\n\n\t\tvar phi = phiStart + i * inverseSegments * phiLength;\n\n\t\tvar sin = Math.sin( phi );\n\t\tvar cos = Math.cos( phi );\n\n\t\tfor ( j = 0; j <= ( points.length - 1 ); j ++ ) {\n\n\t\t\t// vertex\n\n\t\t\tvertex.x = points[ j ].x * sin;\n\t\t\tvertex.y = points[ j ].y;\n\t\t\tvertex.z = points[ j ].x * cos;\n\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t// uv\n\n\t\t\tuv.x = i / segments;\n\t\t\tuv.y = j / ( points.length - 1 );\n\n\t\t\tuvs.push( uv.x, uv.y );\n\n\n\t\t}\n\n\t}\n\n\t// indices\n\n\tfor ( i = 0; i < segments; i ++ ) {\n\n\t\tfor ( j = 0; j < ( points.length - 1 ); j ++ ) {\n\n\t\t\tbase = j + i * points.length;\n\n\t\t\tvar a = base;\n\t\t\tvar b = base + points.length;\n\t\t\tvar c = base + points.length + 1;\n\t\t\tvar d = base + 1;\n\n\t\t\t// faces\n\n\t\t\tindices.push( a, b, d );\n\t\t\tindices.push( b, c, d );\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t// generate normals\n\n\tthis.computeVertexNormals();\n\n\t// if the geometry is closed, we need to average the normals along the seam.\n\t// because the corresponding vertices are identical (but still have different UVs).\n\n\tif ( phiLength === Math.PI * 2 ) {\n\n\t\tvar normals = this.attributes.normal.array;\n\t\tvar n1 = new Vector3();\n\t\tvar n2 = new Vector3();\n\t\tvar n = new Vector3();\n\n\t\t// this is the buffer offset for the last line of vertices\n\n\t\tbase = segments * points.length * 3;\n\n\t\tfor ( i = 0, j = 0; i < points.length; i ++, j += 3 ) {\n\n\t\t\t// select the normal of the vertex in the first line\n\n\t\t\tn1.x = normals[ j + 0 ];\n\t\t\tn1.y = normals[ j + 1 ];\n\t\t\tn1.z = normals[ j + 2 ];\n\n\t\t\t// select the normal of the vertex in the last line\n\n\t\t\tn2.x = normals[ base + j + 0 ];\n\t\t\tn2.y = normals[ base + j + 1 ];\n\t\t\tn2.z = normals[ base + j + 2 ];\n\n\t\t\t// average normals\n\n\t\t\tn.addVectors( n1, n2 ).normalize();\n\n\t\t\t// assign the new values to both normals\n\n\t\t\tnormals[ j + 0 ] = normals[ base + j + 0 ] = n.x;\n\t\t\tnormals[ j + 1 ] = normals[ base + j + 1 ] = n.y;\n\t\t\tnormals[ j + 2 ] = normals[ base + j + 2 ] = n.z;\n\n\t\t}\n\n\t}\n\n}\n\nLatheBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nLatheBufferGeometry.prototype.constructor = LatheBufferGeometry;\n\n\nexport { LatheGeometry, LatheBufferGeometry };\n","/**\n * @author WestLangley / http://github.com/WestLangley\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { Geometry } from '../core/Geometry.js';\nimport { _Math } from '../math/Math.js';\n\nfunction EdgesGeometry( geometry, thresholdAngle ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'EdgesGeometry';\n\n\tthis.parameters = {\n\t\tthresholdAngle: thresholdAngle\n\t};\n\n\tthresholdAngle = ( thresholdAngle !== undefined ) ? thresholdAngle : 1;\n\n\t// buffer\n\n\tvar vertices = [];\n\n\t// helper variables\n\n\tvar thresholdDot = Math.cos( _Math.DEG2RAD * thresholdAngle );\n\tvar edge = [ 0, 0 ], edges = {}, edge1, edge2;\n\tvar key, keys = [ 'a', 'b', 'c' ];\n\n\t// prepare source geometry\n\n\tvar geometry2;\n\n\tif ( geometry.isBufferGeometry ) {\n\n\t\tgeometry2 = new Geometry();\n\t\tgeometry2.fromBufferGeometry( geometry );\n\n\t} else {\n\n\t\tgeometry2 = geometry.clone();\n\n\t}\n\n\tgeometry2.mergeVertices();\n\tgeometry2.computeFaceNormals();\n\n\tvar sourceVertices = geometry2.vertices;\n\tvar faces = geometry2.faces;\n\n\t// now create a data structure where each entry represents an edge with its adjoining faces\n\n\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\tvar face = faces[ i ];\n\n\t\tfor ( var j = 0; j < 3; j ++ ) {\n\n\t\t\tedge1 = face[ keys[ j ] ];\n\t\t\tedge2 = face[ keys[ ( j + 1 ) % 3 ] ];\n\t\t\tedge[ 0 ] = Math.min( edge1, edge2 );\n\t\t\tedge[ 1 ] = Math.max( edge1, edge2 );\n\n\t\t\tkey = edge[ 0 ] + ',' + edge[ 1 ];\n\n\t\t\tif ( edges[ key ] === undefined ) {\n\n\t\t\t\tedges[ key ] = { index1: edge[ 0 ], index2: edge[ 1 ], face1: i, face2: undefined };\n\n\t\t\t} else {\n\n\t\t\t\tedges[ key ].face2 = i;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t// generate vertices\n\n\tfor ( key in edges ) {\n\n\t\tvar e = edges[ key ];\n\n\t\t// an edge is only rendered if the angle (in degrees) between the face normals of the adjoining faces exceeds this value. default = 1 degree.\n\n\t\tif ( e.face2 === undefined || faces[ e.face1 ].normal.dot( faces[ e.face2 ].normal ) <= thresholdDot ) {\n\n\t\t\tvar vertex = sourceVertices[ e.index1 ];\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\tvertex = sourceVertices[ e.index2 ];\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\n}\n\nEdgesGeometry.prototype = Object.create( BufferGeometry.prototype );\nEdgesGeometry.prototype.constructor = EdgesGeometry;\n\n\nexport { EdgesGeometry };\n","/**\n * @author abelnation / http://github.com/abelnation\n */\n\nimport { CylinderGeometry } from './CylinderGeometry.js';\nimport { CylinderBufferGeometry } from './CylinderGeometry.js';\n\n// ConeGeometry\n\nfunction ConeGeometry( radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\n\n\tCylinderGeometry.call( this, 0, radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength );\n\n\tthis.type = 'ConeGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\theight: height,\n\t\tradialSegments: radialSegments,\n\t\theightSegments: heightSegments,\n\t\topenEnded: openEnded,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n}\n\nConeGeometry.prototype = Object.create( CylinderGeometry.prototype );\nConeGeometry.prototype.constructor = ConeGeometry;\n\n// ConeBufferGeometry\n\nfunction ConeBufferGeometry( radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\n\n\tCylinderBufferGeometry.call( this, 0, radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength );\n\n\tthis.type = 'ConeBufferGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\theight: height,\n\t\tradialSegments: radialSegments,\n\t\theightSegments: heightSegments,\n\t\topenEnded: openEnded,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n}\n\nConeBufferGeometry.prototype = Object.create( CylinderBufferGeometry.prototype );\nConeBufferGeometry.prototype.constructor = ConeBufferGeometry;\n\n\nexport { ConeGeometry, ConeBufferGeometry };\n","import {\n\tUVMapping,\n\tCubeReflectionMapping,\n\tCubeRefractionMapping,\n\tEquirectangularReflectionMapping,\n\tEquirectangularRefractionMapping,\n\tSphericalReflectionMapping,\n\tCubeUVReflectionMapping,\n\tCubeUVRefractionMapping,\n\n\tRepeatWrapping,\n\tClampToEdgeWrapping,\n\tMirroredRepeatWrapping,\n\n\tNearestFilter,\n\tNearestMipmapNearestFilter,\n\tNearestMipmapLinearFilter,\n\tLinearFilter,\n\tLinearMipmapNearestFilter,\n\tLinearMipmapLinearFilter\n} from '../constants.js';\nimport { BufferAttribute } from '../core/BufferAttribute.js';\nimport { Color } from '../math/Color.js';\nimport { Object3D } from '../core/Object3D.js';\nimport { Group } from '../objects/Group.js';\nimport { InstancedMesh } from '../objects/InstancedMesh.js';\nimport { Sprite } from '../objects/Sprite.js';\nimport { Points } from '../objects/Points.js';\nimport { Line } from '../objects/Line.js';\nimport { LineLoop } from '../objects/LineLoop.js';\nimport { LineSegments } from '../objects/LineSegments.js';\nimport { LOD } from '../objects/LOD.js';\nimport { Mesh } from '../objects/Mesh.js';\nimport { SkinnedMesh } from '../objects/SkinnedMesh.js';\nimport { Shape } from '../extras/core/Shape.js';\nimport { Fog } from '../scenes/Fog.js';\nimport { FogExp2 } from '../scenes/FogExp2.js';\nimport { HemisphereLight } from '../lights/HemisphereLight.js';\nimport { SpotLight } from '../lights/SpotLight.js';\nimport { PointLight } from '../lights/PointLight.js';\nimport { DirectionalLight } from '../lights/DirectionalLight.js';\nimport { AmbientLight } from '../lights/AmbientLight.js';\nimport { RectAreaLight } from '../lights/RectAreaLight.js';\nimport { OrthographicCamera } from '../cameras/OrthographicCamera.js';\nimport { PerspectiveCamera } from '../cameras/PerspectiveCamera.js';\nimport { Scene } from '../scenes/Scene.js';\nimport { CubeTexture } from '../textures/CubeTexture.js';\nimport { Texture } from '../textures/Texture.js';\nimport { ImageLoader } from './ImageLoader.js';\nimport { LoadingManager } from './LoadingManager.js';\nimport { AnimationClip } from '../animation/AnimationClip.js';\nimport { MaterialLoader } from './MaterialLoader.js';\nimport { LoaderUtils } from './LoaderUtils.js';\nimport { BufferGeometryLoader } from './BufferGeometryLoader.js';\nimport { Loader } from './Loader.js';\nimport { FileLoader } from './FileLoader.js';\nimport * as Geometries from '../geometries/Geometries.js';\nimport * as Curves from '../extras/curves/Curves.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction ObjectLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nObjectLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: ObjectLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar path = ( this.path === '' ) ? LoaderUtils.extractUrlBase( url ) : this.path;\n\t\tthis.resourcePath = this.resourcePath || path;\n\n\t\tvar loader = new FileLoader( scope.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tvar json = null;\n\n\t\t\ttry {\n\n\t\t\t\tjson = JSON.parse( text );\n\n\t\t\t} catch ( error ) {\n\n\t\t\t\tif ( onError !== undefined ) onError( error );\n\n\t\t\t\tconsole.error( 'THREE:ObjectLoader: Can\\'t parse ' + url + '.', error.message );\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tvar metadata = json.metadata;\n\n\t\t\tif ( metadata === undefined || metadata.type === undefined || metadata.type.toLowerCase() === 'geometry' ) {\n\n\t\t\t\tconsole.error( 'THREE.ObjectLoader: Can\\'t load ' + url );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tscope.parse( json, onLoad );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tparse: function ( json, onLoad ) {\n\n\t\tvar shapes = this.parseShape( json.shapes );\n\t\tvar geometries = this.parseGeometries( json.geometries, shapes );\n\n\t\tvar images = this.parseImages( json.images, function () {\n\n\t\t\tif ( onLoad !== undefined ) onLoad( object );\n\n\t\t} );\n\n\t\tvar textures = this.parseTextures( json.textures, images );\n\t\tvar materials = this.parseMaterials( json.materials, textures );\n\n\t\tvar object = this.parseObject( json.object, geometries, materials );\n\n\t\tif ( json.animations ) {\n\n\t\t\tobject.animations = this.parseAnimations( json.animations );\n\n\t\t}\n\n\t\tif ( json.images === undefined || json.images.length === 0 ) {\n\n\t\t\tif ( onLoad !== undefined ) onLoad( object );\n\n\t\t}\n\n\t\treturn object;\n\n\t},\n\n\tparseShape: function ( json ) {\n\n\t\tvar shapes = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tvar shape = new Shape().fromJSON( json[ i ] );\n\n\t\t\t\tshapes[ shape.uuid ] = shape;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn shapes;\n\n\t},\n\n\tparseGeometries: function ( json, shapes ) {\n\n\t\tvar geometries = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tvar bufferGeometryLoader = new BufferGeometryLoader();\n\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tvar geometry;\n\t\t\t\tvar data = json[ i ];\n\n\t\t\t\tswitch ( data.type ) {\n\n\t\t\t\t\tcase 'PlaneGeometry':\n\t\t\t\t\tcase 'PlaneBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.width,\n\t\t\t\t\t\t\tdata.height,\n\t\t\t\t\t\t\tdata.widthSegments,\n\t\t\t\t\t\t\tdata.heightSegments\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'BoxGeometry':\n\t\t\t\t\tcase 'BoxBufferGeometry':\n\t\t\t\t\tcase 'CubeGeometry': // backwards compatible\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.width,\n\t\t\t\t\t\t\tdata.height,\n\t\t\t\t\t\t\tdata.depth,\n\t\t\t\t\t\t\tdata.widthSegments,\n\t\t\t\t\t\t\tdata.heightSegments,\n\t\t\t\t\t\t\tdata.depthSegments\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'CircleGeometry':\n\t\t\t\t\tcase 'CircleBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.segments,\n\t\t\t\t\t\t\tdata.thetaStart,\n\t\t\t\t\t\t\tdata.thetaLength\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'CylinderGeometry':\n\t\t\t\t\tcase 'CylinderBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.radiusTop,\n\t\t\t\t\t\t\tdata.radiusBottom,\n\t\t\t\t\t\t\tdata.height,\n\t\t\t\t\t\t\tdata.radialSegments,\n\t\t\t\t\t\t\tdata.heightSegments,\n\t\t\t\t\t\t\tdata.openEnded,\n\t\t\t\t\t\t\tdata.thetaStart,\n\t\t\t\t\t\t\tdata.thetaLength\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'ConeGeometry':\n\t\t\t\t\tcase 'ConeBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.height,\n\t\t\t\t\t\t\tdata.radialSegments,\n\t\t\t\t\t\t\tdata.heightSegments,\n\t\t\t\t\t\t\tdata.openEnded,\n\t\t\t\t\t\t\tdata.thetaStart,\n\t\t\t\t\t\t\tdata.thetaLength\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'SphereGeometry':\n\t\t\t\t\tcase 'SphereBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.widthSegments,\n\t\t\t\t\t\t\tdata.heightSegments,\n\t\t\t\t\t\t\tdata.phiStart,\n\t\t\t\t\t\t\tdata.phiLength,\n\t\t\t\t\t\t\tdata.thetaStart,\n\t\t\t\t\t\t\tdata.thetaLength\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'DodecahedronGeometry':\n\t\t\t\t\tcase 'DodecahedronBufferGeometry':\n\t\t\t\t\tcase 'IcosahedronGeometry':\n\t\t\t\t\tcase 'IcosahedronBufferGeometry':\n\t\t\t\t\tcase 'OctahedronGeometry':\n\t\t\t\t\tcase 'OctahedronBufferGeometry':\n\t\t\t\t\tcase 'TetrahedronGeometry':\n\t\t\t\t\tcase 'TetrahedronBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.detail\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'RingGeometry':\n\t\t\t\t\tcase 'RingBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.innerRadius,\n\t\t\t\t\t\t\tdata.outerRadius,\n\t\t\t\t\t\t\tdata.thetaSegments,\n\t\t\t\t\t\t\tdata.phiSegments,\n\t\t\t\t\t\t\tdata.thetaStart,\n\t\t\t\t\t\t\tdata.thetaLength\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'TorusGeometry':\n\t\t\t\t\tcase 'TorusBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.tube,\n\t\t\t\t\t\t\tdata.radialSegments,\n\t\t\t\t\t\t\tdata.tubularSegments,\n\t\t\t\t\t\t\tdata.arc\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'TorusKnotGeometry':\n\t\t\t\t\tcase 'TorusKnotBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.tube,\n\t\t\t\t\t\t\tdata.tubularSegments,\n\t\t\t\t\t\t\tdata.radialSegments,\n\t\t\t\t\t\t\tdata.p,\n\t\t\t\t\t\t\tdata.q\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'TubeGeometry':\n\t\t\t\t\tcase 'TubeBufferGeometry':\n\n\t\t\t\t\t\t// This only works for built-in curves (e.g. CatmullRomCurve3).\n\t\t\t\t\t\t// User defined curves or instances of CurvePath will not be deserialized.\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tnew Curves[ data.path.type ]().fromJSON( data.path ),\n\t\t\t\t\t\t\tdata.tubularSegments,\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.radialSegments,\n\t\t\t\t\t\t\tdata.closed\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'LatheGeometry':\n\t\t\t\t\tcase 'LatheBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.points,\n\t\t\t\t\t\t\tdata.segments,\n\t\t\t\t\t\t\tdata.phiStart,\n\t\t\t\t\t\t\tdata.phiLength\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'PolyhedronGeometry':\n\t\t\t\t\tcase 'PolyhedronBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.vertices,\n\t\t\t\t\t\t\tdata.indices,\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.details\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'ShapeGeometry':\n\t\t\t\t\tcase 'ShapeBufferGeometry':\n\n\t\t\t\t\t\tvar geometryShapes = [];\n\n\t\t\t\t\t\tfor ( var j = 0, jl = data.shapes.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tvar shape = shapes[ data.shapes[ j ] ];\n\n\t\t\t\t\t\t\tgeometryShapes.push( shape );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tgeometryShapes,\n\t\t\t\t\t\t\tdata.curveSegments\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\n\t\t\t\t\tcase 'ExtrudeGeometry':\n\t\t\t\t\tcase 'ExtrudeBufferGeometry':\n\n\t\t\t\t\t\tvar geometryShapes = [];\n\n\t\t\t\t\t\tfor ( var j = 0, jl = data.shapes.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tvar shape = shapes[ data.shapes[ j ] ];\n\n\t\t\t\t\t\t\tgeometryShapes.push( shape );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar extrudePath = data.options.extrudePath;\n\n\t\t\t\t\t\tif ( extrudePath !== undefined ) {\n\n\t\t\t\t\t\t\tdata.options.extrudePath = new Curves[ extrudePath.type ]().fromJSON( extrudePath );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tgeometryShapes,\n\t\t\t\t\t\t\tdata.options\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'BufferGeometry':\n\t\t\t\t\tcase 'InstancedBufferGeometry':\n\n\t\t\t\t\t\tgeometry = bufferGeometryLoader.parse( data );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Geometry':\n\n\t\t\t\t\t\tif ( 'THREE' in window && 'LegacyJSONLoader' in THREE ) {\n\n\t\t\t\t\t\t\tvar geometryLoader = new THREE.LegacyJSONLoader();\n\t\t\t\t\t\t\tgeometry = geometryLoader.parse( data, this.resourcePath ).geometry;\n\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tconsole.error( 'THREE.ObjectLoader: You have to import LegacyJSONLoader in order load geometry data of type \"Geometry\".' );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Unsupported geometry type \"' + data.type + '\"' );\n\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.uuid = data.uuid;\n\n\t\t\t\tif ( data.name !== undefined ) geometry.name = data.name;\n\t\t\t\tif ( geometry.isBufferGeometry === true && data.userData !== undefined ) geometry.userData = data.userData;\n\n\t\t\t\tgeometries[ data.uuid ] = geometry;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn geometries;\n\n\t},\n\n\tparseMaterials: function ( json, textures ) {\n\n\t\tvar cache = {}; // MultiMaterial\n\t\tvar materials = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tvar loader = new MaterialLoader();\n\t\t\tloader.setTextures( textures );\n\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tvar data = json[ i ];\n\n\t\t\t\tif ( data.type === 'MultiMaterial' ) {\n\n\t\t\t\t\t// Deprecated\n\n\t\t\t\t\tvar array = [];\n\n\t\t\t\t\tfor ( var j = 0; j < data.materials.length; j ++ ) {\n\n\t\t\t\t\t\tvar material = data.materials[ j ];\n\n\t\t\t\t\t\tif ( cache[ material.uuid ] === undefined ) {\n\n\t\t\t\t\t\t\tcache[ material.uuid ] = loader.parse( material );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tarray.push( cache[ material.uuid ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tmaterials[ data.uuid ] = array;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( cache[ data.uuid ] === undefined ) {\n\n\t\t\t\t\t\tcache[ data.uuid ] = loader.parse( data );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tmaterials[ data.uuid ] = cache[ data.uuid ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn materials;\n\n\t},\n\n\tparseAnimations: function ( json ) {\n\n\t\tvar animations = [];\n\n\t\tfor ( var i = 0; i < json.length; i ++ ) {\n\n\t\t\tvar data = json[ i ];\n\n\t\t\tvar clip = AnimationClip.parse( data );\n\n\t\t\tif ( data.uuid !== undefined ) clip.uuid = data.uuid;\n\n\t\t\tanimations.push( clip );\n\n\t\t}\n\n\t\treturn animations;\n\n\t},\n\n\tparseImages: function ( json, onLoad ) {\n\n\t\tvar scope = this;\n\t\tvar images = {};\n\n\t\tfunction loadImage( url ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\treturn loader.load( url, function () {\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, undefined, function () {\n\n\t\t\t\tscope.manager.itemError( url );\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t} );\n\n\t\t}\n\n\t\tif ( json !== undefined && json.length > 0 ) {\n\n\t\t\tvar manager = new LoadingManager( onLoad );\n\n\t\t\tvar loader = new ImageLoader( manager );\n\t\t\tloader.setCrossOrigin( this.crossOrigin );\n\n\t\t\tfor ( var i = 0, il = json.length; i < il; i ++ ) {\n\n\t\t\t\tvar image = json[ i ];\n\t\t\t\tvar url = image.url;\n\n\t\t\t\tif ( Array.isArray( url ) ) {\n\n\t\t\t\t\t// load array of images e.g CubeTexture\n\n\t\t\t\t\timages[ image.uuid ] = [];\n\n\t\t\t\t\tfor ( var j = 0, jl = url.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\tvar currentUrl = url[ j ];\n\n\t\t\t\t\t\tvar path = /^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test( currentUrl ) ? currentUrl : scope.resourcePath + currentUrl;\n\n\t\t\t\t\t\timages[ image.uuid ].push( loadImage( path ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// load single image\n\n\t\t\t\t\tvar path = /^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test( image.url ) ? image.url : scope.resourcePath + image.url;\n\n\t\t\t\t\timages[ image.uuid ] = loadImage( path );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn images;\n\n\t},\n\n\tparseTextures: function ( json, images ) {\n\n\t\tfunction parseConstant( value, type ) {\n\n\t\t\tif ( typeof value === 'number' ) return value;\n\n\t\t\tconsole.warn( 'THREE.ObjectLoader.parseTexture: Constant should be in numeric form.', value );\n\n\t\t\treturn type[ value ];\n\n\t\t}\n\n\t\tvar textures = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tvar data = json[ i ];\n\n\t\t\t\tif ( data.image === undefined ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: No \"image\" specified for', data.uuid );\n\n\t\t\t\t}\n\n\t\t\t\tif ( images[ data.image ] === undefined ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined image', data.image );\n\n\t\t\t\t}\n\n\t\t\t\tvar texture;\n\n\t\t\t\tif ( Array.isArray( images[ data.image ] ) ) {\n\n\t\t\t\t\ttexture = new CubeTexture( images[ data.image ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttexture = new Texture( images[ data.image ] );\n\n\t\t\t\t}\n\n\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\ttexture.uuid = data.uuid;\n\n\t\t\t\tif ( data.name !== undefined ) texture.name = data.name;\n\n\t\t\t\tif ( data.mapping !== undefined ) texture.mapping = parseConstant( data.mapping, TEXTURE_MAPPING );\n\n\t\t\t\tif ( data.offset !== undefined ) texture.offset.fromArray( data.offset );\n\t\t\t\tif ( data.repeat !== undefined ) texture.repeat.fromArray( data.repeat );\n\t\t\t\tif ( data.center !== undefined ) texture.center.fromArray( data.center );\n\t\t\t\tif ( data.rotation !== undefined ) texture.rotation = data.rotation;\n\n\t\t\t\tif ( data.wrap !== undefined ) {\n\n\t\t\t\t\ttexture.wrapS = parseConstant( data.wrap[ 0 ], TEXTURE_WRAPPING );\n\t\t\t\t\ttexture.wrapT = parseConstant( data.wrap[ 1 ], TEXTURE_WRAPPING );\n\n\t\t\t\t}\n\n\t\t\t\tif ( data.format !== undefined ) texture.format = data.format;\n\t\t\t\tif ( data.type !== undefined ) texture.type = data.type;\n\t\t\t\tif ( data.encoding !== undefined ) texture.encoding = data.encoding;\n\n\t\t\t\tif ( data.minFilter !== undefined ) texture.minFilter = parseConstant( data.minFilter, TEXTURE_FILTER );\n\t\t\t\tif ( data.magFilter !== undefined ) texture.magFilter = parseConstant( data.magFilter, TEXTURE_FILTER );\n\t\t\t\tif ( data.anisotropy !== undefined ) texture.anisotropy = data.anisotropy;\n\n\t\t\t\tif ( data.flipY !== undefined ) texture.flipY = data.flipY;\n\n\t\t\t\tif ( data.premultiplyAlpha !== undefined ) texture.premultiplyAlpha = data.premultiplyAlpha;\n\t\t\t\tif ( data.unpackAlignment !== undefined ) texture.unpackAlignment = data.unpackAlignment;\n\n\t\t\t\ttextures[ data.uuid ] = texture;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn textures;\n\n\t},\n\n\tparseObject: function ( data, geometries, materials ) {\n\n\t\tvar object;\n\n\t\tfunction getGeometry( name ) {\n\n\t\t\tif ( geometries[ name ] === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined geometry', name );\n\n\t\t\t}\n\n\t\t\treturn geometries[ name ];\n\n\t\t}\n\n\t\tfunction getMaterial( name ) {\n\n\t\t\tif ( name === undefined ) return undefined;\n\n\t\t\tif ( Array.isArray( name ) ) {\n\n\t\t\t\tvar array = [];\n\n\t\t\t\tfor ( var i = 0, l = name.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar uuid = name[ i ];\n\n\t\t\t\t\tif ( materials[ uuid ] === undefined ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', uuid );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tarray.push( materials[ uuid ] );\n\n\t\t\t\t}\n\n\t\t\t\treturn array;\n\n\t\t\t}\n\n\t\t\tif ( materials[ name ] === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', name );\n\n\t\t\t}\n\n\t\t\treturn materials[ name ];\n\n\t\t}\n\n\t\tswitch ( data.type ) {\n\n\t\t\tcase 'Scene':\n\n\t\t\t\tobject = new Scene();\n\n\t\t\t\tif ( data.background !== undefined ) {\n\n\t\t\t\t\tif ( Number.isInteger( data.background ) ) {\n\n\t\t\t\t\t\tobject.background = new Color( data.background );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( data.fog !== undefined ) {\n\n\t\t\t\t\tif ( data.fog.type === 'Fog' ) {\n\n\t\t\t\t\t\tobject.fog = new Fog( data.fog.color, data.fog.near, data.fog.far );\n\n\t\t\t\t\t} else if ( data.fog.type === 'FogExp2' ) {\n\n\t\t\t\t\t\tobject.fog = new FogExp2( data.fog.color, data.fog.density );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'PerspectiveCamera':\n\n\t\t\t\tobject = new PerspectiveCamera( data.fov, data.aspect, data.near, data.far );\n\n\t\t\t\tif ( data.focus !== undefined ) object.focus = data.focus;\n\t\t\t\tif ( data.zoom !== undefined ) object.zoom = data.zoom;\n\t\t\t\tif ( data.filmGauge !== undefined ) object.filmGauge = data.filmGauge;\n\t\t\t\tif ( data.filmOffset !== undefined ) object.filmOffset = data.filmOffset;\n\t\t\t\tif ( data.view !== undefined ) object.view = Object.assign( {}, data.view );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'OrthographicCamera':\n\n\t\t\t\tobject = new OrthographicCamera( data.left, data.right, data.top, data.bottom, data.near, data.far );\n\n\t\t\t\tif ( data.zoom !== undefined ) object.zoom = data.zoom;\n\t\t\t\tif ( data.view !== undefined ) object.view = Object.assign( {}, data.view );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'AmbientLight':\n\n\t\t\t\tobject = new AmbientLight( data.color, data.intensity );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'DirectionalLight':\n\n\t\t\t\tobject = new DirectionalLight( data.color, data.intensity );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'PointLight':\n\n\t\t\t\tobject = new PointLight( data.color, data.intensity, data.distance, data.decay );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'RectAreaLight':\n\n\t\t\t\tobject = new RectAreaLight( data.color, data.intensity, data.width, data.height );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'SpotLight':\n\n\t\t\t\tobject = new SpotLight( data.color, data.intensity, data.distance, data.angle, data.penumbra, data.decay );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'HemisphereLight':\n\n\t\t\t\tobject = new HemisphereLight( data.color, data.groundColor, data.intensity );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'SkinnedMesh':\n\n\t\t\t\tconsole.warn( 'THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.' );\n\n\t\t\tcase 'Mesh':\n\n\t\t\t\tvar geometry = getGeometry( data.geometry );\n\t\t\t\tvar material = getMaterial( data.material );\n\n\t\t\t\tif ( geometry.bones && geometry.bones.length > 0 ) {\n\n\t\t\t\t\tobject = new SkinnedMesh( geometry, material );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tobject = new Mesh( geometry, material );\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'InstancedMesh':\n\n\t\t\t\tvar geometry = getGeometry( data.geometry );\n\t\t\t\tvar material = getMaterial( data.material );\n\t\t\t\tvar count = data.count;\n\t\t\t\tvar instanceMatrix = data.instanceMatrix;\n\n\t\t\t\tobject = new InstancedMesh( geometry, material, count );\n\t\t\t\tobject.instanceMatrix = new BufferAttribute( new Float32Array( instanceMatrix.array ), 16 );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'LOD':\n\n\t\t\t\tobject = new LOD();\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'Line':\n\n\t\t\t\tobject = new Line( getGeometry( data.geometry ), getMaterial( data.material ), data.mode );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'LineLoop':\n\n\t\t\t\tobject = new LineLoop( getGeometry( data.geometry ), getMaterial( data.material ) );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'LineSegments':\n\n\t\t\t\tobject = new LineSegments( getGeometry( data.geometry ), getMaterial( data.material ) );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'PointCloud':\n\t\t\tcase 'Points':\n\n\t\t\t\tobject = new Points( getGeometry( data.geometry ), getMaterial( data.material ) );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'Sprite':\n\n\t\t\t\tobject = new Sprite( getMaterial( data.material ) );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'Group':\n\n\t\t\t\tobject = new Group();\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tobject = new Object3D();\n\n\t\t}\n\n\t\tobject.uuid = data.uuid;\n\n\t\tif ( data.name !== undefined ) object.name = data.name;\n\n\t\tif ( data.matrix !== undefined ) {\n\n\t\t\tobject.matrix.fromArray( data.matrix );\n\n\t\t\tif ( data.matrixAutoUpdate !== undefined ) object.matrixAutoUpdate = data.matrixAutoUpdate;\n\t\t\tif ( object.matrixAutoUpdate ) object.matrix.decompose( object.position, object.quaternion, object.scale );\n\n\t\t} else {\n\n\t\t\tif ( data.position !== undefined ) object.position.fromArray( data.position );\n\t\t\tif ( data.rotation !== undefined ) object.rotation.fromArray( data.rotation );\n\t\t\tif ( data.quaternion !== undefined ) object.quaternion.fromArray( data.quaternion );\n\t\t\tif ( data.scale !== undefined ) object.scale.fromArray( data.scale );\n\n\t\t}\n\n\t\tif ( data.castShadow !== undefined ) object.castShadow = data.castShadow;\n\t\tif ( data.receiveShadow !== undefined ) object.receiveShadow = data.receiveShadow;\n\n\t\tif ( data.shadow ) {\n\n\t\t\tif ( data.shadow.bias !== undefined ) object.shadow.bias = data.shadow.bias;\n\t\t\tif ( data.shadow.radius !== undefined ) object.shadow.radius = data.shadow.radius;\n\t\t\tif ( data.shadow.mapSize !== undefined ) object.shadow.mapSize.fromArray( data.shadow.mapSize );\n\t\t\tif ( data.shadow.camera !== undefined ) object.shadow.camera = this.parseObject( data.shadow.camera );\n\n\t\t}\n\n\t\tif ( data.visible !== undefined ) object.visible = data.visible;\n\t\tif ( data.frustumCulled !== undefined ) object.frustumCulled = data.frustumCulled;\n\t\tif ( data.renderOrder !== undefined ) object.renderOrder = data.renderOrder;\n\t\tif ( data.userData !== undefined ) object.userData = data.userData;\n\t\tif ( data.layers !== undefined ) object.layers.mask = data.layers;\n\n\t\tif ( data.children !== undefined ) {\n\n\t\t\tvar children = data.children;\n\n\t\t\tfor ( var i = 0; i < children.length; i ++ ) {\n\n\t\t\t\tobject.add( this.parseObject( children[ i ], geometries, materials ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( data.type === 'LOD' ) {\n\n\t\t\tif ( data.autoUpdate !== undefined ) object.autoUpdate = data.autoUpdate;\n\n\t\t\tvar levels = data.levels;\n\n\t\t\tfor ( var l = 0; l < levels.length; l ++ ) {\n\n\t\t\t\tvar level = levels[ l ];\n\t\t\t\tvar child = object.getObjectByProperty( 'uuid', level.object );\n\n\t\t\t\tif ( child !== undefined ) {\n\n\t\t\t\t\tobject.addLevel( child, level.distance );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn object;\n\n\t}\n\n} );\n\nvar TEXTURE_MAPPING = {\n\tUVMapping: UVMapping,\n\tCubeReflectionMapping: CubeReflectionMapping,\n\tCubeRefractionMapping: CubeRefractionMapping,\n\tEquirectangularReflectionMapping: EquirectangularReflectionMapping,\n\tEquirectangularRefractionMapping: EquirectangularRefractionMapping,\n\tSphericalReflectionMapping: SphericalReflectionMapping,\n\tCubeUVReflectionMapping: CubeUVReflectionMapping,\n\tCubeUVRefractionMapping: CubeUVRefractionMapping\n};\n\nvar TEXTURE_WRAPPING = {\n\tRepeatWrapping: RepeatWrapping,\n\tClampToEdgeWrapping: ClampToEdgeWrapping,\n\tMirroredRepeatWrapping: MirroredRepeatWrapping\n};\n\nvar TEXTURE_FILTER = {\n\tNearestFilter: NearestFilter,\n\tNearestMipmapNearestFilter: NearestMipmapNearestFilter,\n\tNearestMipmapLinearFilter: NearestMipmapLinearFilter,\n\tLinearFilter: LinearFilter,\n\tLinearMipmapNearestFilter: LinearMipmapNearestFilter,\n\tLinearMipmapLinearFilter: LinearMipmapLinearFilter\n};\n\n\nexport { ObjectLoader };\n","import { ZeroCurvatureEnding } from '../../constants.js';\nimport { Interpolant } from '../Interpolant.js';\nimport { WrapAroundEnding, ZeroSlopeEnding } from '../../constants.js';\n\n/**\n * Fast and simple cubic spline interpolant.\n *\n * It was derived from a Hermitian construction setting the first derivative\n * at each sample position to the linear slope between neighboring positions\n * over their parameter interval.\n *\n * @author tschw\n */\n\nfunction CubicInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\tthis._weightPrev = - 0;\n\tthis._offsetPrev = - 0;\n\tthis._weightNext = - 0;\n\tthis._offsetNext = - 0;\n\n}\n\nCubicInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\n\n\tconstructor: CubicInterpolant,\n\n\tDefaultSettings_: {\n\n\t\tendingStart: ZeroCurvatureEnding,\n\t\tendingEnd: ZeroCurvatureEnding\n\n\t},\n\n\tintervalChanged_: function ( i1, t0, t1 ) {\n\n\t\tvar pp = this.parameterPositions,\n\t\t\tiPrev = i1 - 2,\n\t\t\tiNext = i1 + 1,\n\n\t\t\ttPrev = pp[ iPrev ],\n\t\t\ttNext = pp[ iNext ];\n\n\t\tif ( tPrev === undefined ) {\n\n\t\t\tswitch ( this.getSettings_().endingStart ) {\n\n\t\t\t\tcase ZeroSlopeEnding:\n\n\t\t\t\t\t// f'(t0) = 0\n\t\t\t\t\tiPrev = i1;\n\t\t\t\t\ttPrev = 2 * t0 - t1;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase WrapAroundEnding:\n\n\t\t\t\t\t// use the other end of the curve\n\t\t\t\t\tiPrev = pp.length - 2;\n\t\t\t\t\ttPrev = t0 + pp[ iPrev ] - pp[ iPrev + 1 ];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault: // ZeroCurvatureEnding\n\n\t\t\t\t\t// f''(t0) = 0 a.k.a. Natural Spline\n\t\t\t\t\tiPrev = i1;\n\t\t\t\t\ttPrev = t1;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( tNext === undefined ) {\n\n\t\t\tswitch ( this.getSettings_().endingEnd ) {\n\n\t\t\t\tcase ZeroSlopeEnding:\n\n\t\t\t\t\t// f'(tN) = 0\n\t\t\t\t\tiNext = i1;\n\t\t\t\t\ttNext = 2 * t1 - t0;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase WrapAroundEnding:\n\n\t\t\t\t\t// use the other end of the curve\n\t\t\t\t\tiNext = 1;\n\t\t\t\t\ttNext = t1 + pp[ 1 ] - pp[ 0 ];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault: // ZeroCurvatureEnding\n\n\t\t\t\t\t// f''(tN) = 0, a.k.a. Natural Spline\n\t\t\t\t\tiNext = i1 - 1;\n\t\t\t\t\ttNext = t0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar halfDt = ( t1 - t0 ) * 0.5,\n\t\t\tstride = this.valueSize;\n\n\t\tthis._weightPrev = halfDt / ( t0 - tPrev );\n\t\tthis._weightNext = halfDt / ( tNext - t1 );\n\t\tthis._offsetPrev = iPrev * stride;\n\t\tthis._offsetNext = iNext * stride;\n\n\t},\n\n\tinterpolate_: function ( i1, t0, t, t1 ) {\n\n\t\tvar result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\to1 = i1 * stride,\t\to0 = o1 - stride,\n\t\t\toP = this._offsetPrev, \toN = this._offsetNext,\n\t\t\twP = this._weightPrev,\twN = this._weightNext,\n\n\t\t\tp = ( t - t0 ) / ( t1 - t0 ),\n\t\t\tpp = p * p,\n\t\t\tppp = pp * p;\n\n\t\t// evaluate polynomials\n\n\t\tvar sP = - wP * ppp + 2 * wP * pp - wP * p;\n\t\tvar s0 = ( 1 + wP ) * ppp + ( - 1.5 - 2 * wP ) * pp + ( - 0.5 + wP ) * p + 1;\n\t\tvar s1 = ( - 1 - wN ) * ppp + ( 1.5 + wN ) * pp + 0.5 * p;\n\t\tvar sN = wN * ppp - wN * pp;\n\n\t\t// combine data linearly\n\n\t\tfor ( var i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] =\n\t\t\t\t\tsP * values[ oP + i ] +\n\t\t\t\t\ts0 * values[ o0 + i ] +\n\t\t\t\t\ts1 * values[ o1 + i ] +\n\t\t\t\t\tsN * values[ oN + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n} );\n\n\nexport { CubicInterpolant };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { RGBAFormat, RGBFormat } from '../constants.js';\nimport { ImageLoader } from './ImageLoader.js';\nimport { Texture } from '../textures/Texture.js';\nimport { Loader } from './Loader.js';\n\nfunction TextureLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nTextureLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: TextureLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar texture = new Texture();\n\n\t\tvar loader = new ImageLoader( this.manager );\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.setPath( this.path );\n\n\t\tloader.load( url, function ( image ) {\n\n\t\t\ttexture.image = image;\n\n\t\t\t// JPEGs can't have an alpha channel, so memory can be saved by storing them as RGB.\n\t\t\tvar isJPEG = url.search( /\\.jpe?g($|\\?)/i ) > 0 || url.search( /^data\\:image\\/jpeg/ ) === 0;\n\n\t\t\ttexture.format = isJPEG ? RGBFormat : RGBAFormat;\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tif ( onLoad !== undefined ) {\n\n\t\t\t\tonLoad( texture );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t\treturn texture;\n\n\t}\n\n} );\n\n\nexport { TextureLoader };\n","import { Light } from './Light.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction AmbientLight( color, intensity ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'AmbientLight';\n\n\tthis.castShadow = undefined;\n\n}\n\nAmbientLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: AmbientLight,\n\n\tisAmbientLight: true\n\n} );\n\n\nexport { AmbientLight };\n","import { Light } from './Light.js';\n\n/**\n * @author abelnation / http://github.com/abelnation\n */\n\nfunction RectAreaLight( color, intensity, width, height ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'RectAreaLight';\n\n\tthis.width = ( width !== undefined ) ? width : 10;\n\tthis.height = ( height !== undefined ) ? height : 10;\n\n}\n\nRectAreaLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: RectAreaLight,\n\n\tisRectAreaLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.width = source.width;\n\t\tthis.height = source.height;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = Light.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.width = this.width;\n\t\tdata.object.height = this.height;\n\n\t\treturn data;\n\n\t}\n\n} );\n\nexport { RectAreaLight };\n","import { Light } from './Light.js';\nimport { Color } from '../math/Color.js';\nimport { Object3D } from '../core/Object3D.js';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction HemisphereLight( skyColor, groundColor, intensity ) {\n\n\tLight.call( this, skyColor, intensity );\n\n\tthis.type = 'HemisphereLight';\n\n\tthis.castShadow = undefined;\n\n\tthis.position.copy( Object3D.DefaultUp );\n\tthis.updateMatrix();\n\n\tthis.groundColor = new Color( groundColor );\n\n}\n\nHemisphereLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: HemisphereLight,\n\n\tisHemisphereLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.groundColor.copy( source.groundColor );\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { HemisphereLight };\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nimport { Color } from '../math/Color.js';\n\nfunction FogExp2( color, density ) {\n\n\tthis.name = '';\n\n\tthis.color = new Color( color );\n\tthis.density = ( density !== undefined ) ? density : 0.00025;\n\n}\n\nObject.assign( FogExp2.prototype, {\n\n\tisFogExp2: true,\n\n\tclone: function () {\n\n\t\treturn new FogExp2( this.color, this.density );\n\n\t},\n\n\ttoJSON: function ( /* meta */ ) {\n\n\t\treturn {\n\t\t\ttype: 'FogExp2',\n\t\t\tcolor: this.color.getHex(),\n\t\t\tdensity: this.density\n\t\t};\n\n\t}\n\n} );\n\nexport { FogExp2 };\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nimport { Color } from '../math/Color.js';\n\nfunction Fog( color, near, far ) {\n\n\tthis.name = '';\n\n\tthis.color = new Color( color );\n\n\tthis.near = ( near !== undefined ) ? near : 1;\n\tthis.far = ( far !== undefined ) ? far : 1000;\n\n}\n\nObject.assign( Fog.prototype, {\n\n\tisFog: true,\n\n\tclone: function () {\n\n\t\treturn new Fog( this.color, this.near, this.far );\n\n\t},\n\n\ttoJSON: function ( /* meta */ ) {\n\n\t\treturn {\n\t\t\ttype: 'Fog',\n\t\t\tcolor: this.color.getHex(),\n\t\t\tnear: this.near,\n\t\t\tfar: this.far\n\t\t};\n\n\t}\n\n} );\n\nexport { Fog };\n","import { Material } from './Material.js';\nimport { BasicDepthPacking } from '../constants.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author bhouston / https://clara.io\n * @author WestLangley / http://github.com/WestLangley\n *\n * parameters = {\n *\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>\n * }\n */\n\nfunction MeshDepthMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshDepthMaterial';\n\n\tthis.depthPacking = BasicDepthPacking;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\n\tthis.map = null;\n\n\tthis.alphaMap = null;\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.fog = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshDepthMaterial.prototype = Object.create( Material.prototype );\nMeshDepthMaterial.prototype.constructor = MeshDepthMaterial;\n\nMeshDepthMaterial.prototype.isMeshDepthMaterial = true;\n\nMeshDepthMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.depthPacking = source.depthPacking;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\n\tthis.map = source.map;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\treturn this;\n\n};\n\n\nexport { MeshDepthMaterial };\n","import { Material } from './Material.js';\nimport { Vector3 } from '../math/Vector3.js';\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n *\n * parameters = {\n *\n *  referencePosition: <float>,\n *  nearDistance: <float>,\n *  farDistance: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>\n *\n * }\n */\n\nfunction MeshDistanceMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshDistanceMaterial';\n\n\tthis.referencePosition = new Vector3();\n\tthis.nearDistance = 1;\n\tthis.farDistance = 1000;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\n\tthis.map = null;\n\n\tthis.alphaMap = null;\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.fog = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshDistanceMaterial.prototype = Object.create( Material.prototype );\nMeshDistanceMaterial.prototype.constructor = MeshDistanceMaterial;\n\nMeshDistanceMaterial.prototype.isMeshDistanceMaterial = true;\n\nMeshDistanceMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.referencePosition.copy( source.referencePosition );\n\tthis.nearDistance = source.nearDistance;\n\tthis.farDistance = source.farDistance;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\n\tthis.map = source.map;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\treturn this;\n\n};\n\n\nexport { MeshDistanceMaterial };\n","/**\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author philogb / http://blog.thejit.org/\n * @author mikael emtinger / http://gomo.se/\n * @author egraether / http://egraether.com/\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction Vector4( x, y, z, w ) {\n\n\tthis.x = x || 0;\n\tthis.y = y || 0;\n\tthis.z = z || 0;\n\tthis.w = ( w !== undefined ) ? w : 1;\n\n}\n\nObject.defineProperties( Vector4.prototype, {\n\n\t\"width\": {\n\n\t\tget: function () {\n\n\t\t\treturn this.z;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis.z = value;\n\n\t\t}\n\n\t},\n\n\t\"height\": {\n\n\t\tget: function () {\n\n\t\t\treturn this.w;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis.w = value;\n\n\t\t}\n\n\t}\n\n} );\n\nObject.assign( Vector4.prototype, {\n\n\tisVector4: true,\n\n\tset: function ( x, y, z, w ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\t\tthis.w = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetZ: function ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetW: function ( w ) {\n\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponent: function ( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tcase 3: this.w = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetComponent: function ( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tcase 3: return this.w;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.x, this.y, this.z, this.w );\n\n\t},\n\n\tcopy: function ( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\t\tthis.w = ( v.w !== undefined ) ? v.w : 1;\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\t\tthis.w += v.w;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\t\tthis.w += s;\n\n\t\treturn this;\n\n\t},\n\n\taddVectors: function ( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\t\tthis.w = a.w + b.w;\n\n\t\treturn this;\n\n\t},\n\n\taddScaledVector: function ( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\t\tthis.w += v.w * s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\t\tthis.w -= v.w;\n\n\t\treturn this;\n\n\t},\n\n\tsubScalar: function ( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\t\tthis.w -= s;\n\n\t\treturn this;\n\n\t},\n\n\tsubVectors: function ( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\t\tthis.w = a.w - b.w;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\t\tthis.w *= scalar;\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function ( m ) {\n\n\t\tvar x = this.x, y = this.y, z = this.z, w = this.w;\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] * w;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] * w;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] * w;\n\t\tthis.w = e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] * w;\n\n\t\treturn this;\n\n\t},\n\n\tdivideScalar: function ( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t},\n\n\tsetAxisAngleFromQuaternion: function ( q ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\n\n\t\t// q is assumed to be normalized\n\n\t\tthis.w = 2 * Math.acos( q.w );\n\n\t\tvar s = Math.sqrt( 1 - q.w * q.w );\n\n\t\tif ( s < 0.0001 ) {\n\n\t\t\tthis.x = 1;\n\t\t\tthis.y = 0;\n\t\t\tthis.z = 0;\n\n\t\t} else {\n\n\t\t\tthis.x = q.x / s;\n\t\t\tthis.y = q.y / s;\n\t\t\tthis.z = q.z / s;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetAxisAngleFromRotationMatrix: function ( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tvar angle, x, y, z,\t\t// variables for result\n\t\t\tepsilon = 0.01,\t\t// margin to allow for rounding errors\n\t\t\tepsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\n\n\t\t\tte = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\tif ( ( Math.abs( m12 - m21 ) < epsilon ) &&\n\t\t     ( Math.abs( m13 - m31 ) < epsilon ) &&\n\t\t     ( Math.abs( m23 - m32 ) < epsilon ) ) {\n\n\t\t\t// singularity found\n\t\t\t// first check for identity matrix which must have +1 for all terms\n\t\t\t// in leading diagonal and zero in other terms\n\n\t\t\tif ( ( Math.abs( m12 + m21 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m13 + m31 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m23 + m32 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m11 + m22 + m33 - 3 ) < epsilon2 ) ) {\n\n\t\t\t\t// this singularity is identity matrix so angle = 0\n\n\t\t\t\tthis.set( 1, 0, 0, 0 );\n\n\t\t\t\treturn this; // zero angle, arbitrary axis\n\n\t\t\t}\n\n\t\t\t// otherwise this singularity is angle = 180\n\n\t\t\tangle = Math.PI;\n\n\t\t\tvar xx = ( m11 + 1 ) / 2;\n\t\t\tvar yy = ( m22 + 1 ) / 2;\n\t\t\tvar zz = ( m33 + 1 ) / 2;\n\t\t\tvar xy = ( m12 + m21 ) / 4;\n\t\t\tvar xz = ( m13 + m31 ) / 4;\n\t\t\tvar yz = ( m23 + m32 ) / 4;\n\n\t\t\tif ( ( xx > yy ) && ( xx > zz ) ) {\n\n\t\t\t\t// m11 is the largest diagonal term\n\n\t\t\t\tif ( xx < epsilon ) {\n\n\t\t\t\t\tx = 0;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tx = Math.sqrt( xx );\n\t\t\t\t\ty = xy / x;\n\t\t\t\t\tz = xz / x;\n\n\t\t\t\t}\n\n\t\t\t} else if ( yy > zz ) {\n\n\t\t\t\t// m22 is the largest diagonal term\n\n\t\t\t\tif ( yy < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ty = Math.sqrt( yy );\n\t\t\t\t\tx = xy / y;\n\t\t\t\t\tz = yz / y;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// m33 is the largest diagonal term so base result on this\n\n\t\t\t\tif ( zz < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tz = Math.sqrt( zz );\n\t\t\t\t\tx = xz / z;\n\t\t\t\t\ty = yz / z;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.set( x, y, z, angle );\n\n\t\t\treturn this; // return 180 deg rotation\n\n\t\t}\n\n\t\t// as we have reached here there are no singularities so we can handle normally\n\n\t\tvar s = Math.sqrt( ( m32 - m23 ) * ( m32 - m23 ) +\n\t\t                   ( m13 - m31 ) * ( m13 - m31 ) +\n\t\t                   ( m21 - m12 ) * ( m21 - m12 ) ); // used to normalize\n\n\t\tif ( Math.abs( s ) < 0.001 ) s = 1;\n\n\t\t// prevent divide by zero, should not happen if matrix is orthogonal and should be\n\t\t// caught by singularity test above, but I've left it in just in case\n\n\t\tthis.x = ( m32 - m23 ) / s;\n\t\tthis.y = ( m13 - m31 ) / s;\n\t\tthis.z = ( m21 - m12 ) / s;\n\t\tthis.w = Math.acos( ( m11 + m22 + m33 - 1 ) / 2 );\n\n\t\treturn this;\n\n\t},\n\n\tmin: function ( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\t\tthis.w = Math.min( this.w, v.w );\n\n\t\treturn this;\n\n\t},\n\n\tmax: function ( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\t\tthis.w = Math.max( this.w, v.w );\n\n\t\treturn this;\n\n\t},\n\n\tclamp: function ( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\t\tthis.w = Math.max( min.w, Math.min( max.w, this.w ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampScalar: function ( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\t\tthis.z = Math.max( minVal, Math.min( maxVal, this.z ) );\n\t\tthis.w = Math.max( minVal, Math.min( maxVal, this.w ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampLength: function ( min, max ) {\n\n\t\tvar length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t},\n\n\tfloor: function () {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\t\tthis.w = Math.floor( this.w );\n\n\t\treturn this;\n\n\t},\n\n\tceil: function () {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\t\tthis.w = Math.ceil( this.w );\n\n\t\treturn this;\n\n\t},\n\n\tround: function () {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\t\tthis.w = Math.round( this.w );\n\n\t\treturn this;\n\n\t},\n\n\troundToZero: function () {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\t\tthis.w = ( this.w < 0 ) ? Math.ceil( this.w ) : Math.floor( this.w );\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\t\tthis.w = - this.w;\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\n\n\t},\n\n\tmanhattanLength: function () {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z ) + Math.abs( this.w );\n\n\t},\n\n\tnormalize: function () {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t},\n\n\tsetLength: function ( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t},\n\n\tlerp: function ( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\t\tthis.w += ( v.w - this.w ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tlerpVectors: function ( v1, v2, alpha ) {\n\n\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\n\n\t},\n\n\tequals: function ( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) && ( v.w === this.w ) );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\t\tthis.w = array[ offset + 3 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\t\tarray[ offset + 3 ] = this.w;\n\n\t\treturn array;\n\n\t},\n\n\tfromBufferAttribute: function ( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\t\tthis.w = attribute.getW( index );\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Vector4 };\n","import { Object3D } from '../core/Object3D.js';\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author ikerr / http://verold.com\n */\n\nfunction Bone() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Bone';\n\n}\n\nBone.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Bone,\n\n\tisBone: true\n\n} );\n\n\nexport { Bone };\n","import { Curve } from '../core/Curve.js';\nimport { CubicBezier } from '../core/Interpolations.js';\nimport { Vector2 } from '../../math/Vector2.js';\n\n\nfunction CubicBezierCurve( v0, v1, v2, v3 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'CubicBezierCurve';\n\n\tthis.v0 = v0 || new Vector2();\n\tthis.v1 = v1 || new Vector2();\n\tthis.v2 = v2 || new Vector2();\n\tthis.v3 = v3 || new Vector2();\n\n}\n\nCubicBezierCurve.prototype = Object.create( Curve.prototype );\nCubicBezierCurve.prototype.constructor = CubicBezierCurve;\n\nCubicBezierCurve.prototype.isCubicBezierCurve = true;\n\nCubicBezierCurve.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new Vector2();\n\n\tvar v0 = this.v0, v1 = this.v1, v2 = this.v2, v3 = this.v3;\n\n\tpoint.set(\n\t\tCubicBezier( t, v0.x, v1.x, v2.x, v3.x ),\n\t\tCubicBezier( t, v0.y, v1.y, v2.y, v3.y )\n\t);\n\n\treturn point;\n\n};\n\nCubicBezierCurve.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v0.copy( source.v0 );\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\tthis.v3.copy( source.v3 );\n\n\treturn this;\n\n};\n\nCubicBezierCurve.prototype.toJSON = function () {\n\n\tvar data = Curve.prototype.toJSON.call( this );\n\n\tdata.v0 = this.v0.toArray();\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\tdata.v3 = this.v3.toArray();\n\n\treturn data;\n\n};\n\nCubicBezierCurve.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v0.fromArray( json.v0 );\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\tthis.v3.fromArray( json.v3 );\n\n\treturn this;\n\n};\n\n\nexport { CubicBezierCurve };\n","import { Vector2 } from '../../math/Vector2.js';\nimport { Curve } from '../core/Curve.js';\n\n\nfunction LineCurve( v1, v2 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'LineCurve';\n\n\tthis.v1 = v1 || new Vector2();\n\tthis.v2 = v2 || new Vector2();\n\n}\n\nLineCurve.prototype = Object.create( Curve.prototype );\nLineCurve.prototype.constructor = LineCurve;\n\nLineCurve.prototype.isLineCurve = true;\n\nLineCurve.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new Vector2();\n\n\tif ( t === 1 ) {\n\n\t\tpoint.copy( this.v2 );\n\n\t} else {\n\n\t\tpoint.copy( this.v2 ).sub( this.v1 );\n\t\tpoint.multiplyScalar( t ).add( this.v1 );\n\n\t}\n\n\treturn point;\n\n};\n\n// Line curve is linear, so we can overwrite default getPointAt\n\nLineCurve.prototype.getPointAt = function ( u, optionalTarget ) {\n\n\treturn this.getPoint( u, optionalTarget );\n\n};\n\nLineCurve.prototype.getTangent = function ( /* t */ ) {\n\n\tvar tangent = this.v2.clone().sub( this.v1 );\n\n\treturn tangent.normalize();\n\n};\n\nLineCurve.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\n\treturn this;\n\n};\n\nLineCurve.prototype.toJSON = function () {\n\n\tvar data = Curve.prototype.toJSON.call( this );\n\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\n\treturn data;\n\n};\n\nLineCurve.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\n\treturn this;\n\n};\n\n\nexport { LineCurve };\n","import { Curve } from '../core/Curve.js';\nimport { QuadraticBezier } from '../core/Interpolations.js';\nimport { Vector2 } from '../../math/Vector2.js';\n\n\nfunction QuadraticBezierCurve( v0, v1, v2 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'QuadraticBezierCurve';\n\n\tthis.v0 = v0 || new Vector2();\n\tthis.v1 = v1 || new Vector2();\n\tthis.v2 = v2 || new Vector2();\n\n}\n\nQuadraticBezierCurve.prototype = Object.create( Curve.prototype );\nQuadraticBezierCurve.prototype.constructor = QuadraticBezierCurve;\n\nQuadraticBezierCurve.prototype.isQuadraticBezierCurve = true;\n\nQuadraticBezierCurve.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new Vector2();\n\n\tvar v0 = this.v0, v1 = this.v1, v2 = this.v2;\n\n\tpoint.set(\n\t\tQuadraticBezier( t, v0.x, v1.x, v2.x ),\n\t\tQuadraticBezier( t, v0.y, v1.y, v2.y )\n\t);\n\n\treturn point;\n\n};\n\nQuadraticBezierCurve.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v0.copy( source.v0 );\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\n\treturn this;\n\n};\n\nQuadraticBezierCurve.prototype.toJSON = function () {\n\n\tvar data = Curve.prototype.toJSON.call( this );\n\n\tdata.v0 = this.v0.toArray();\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\n\treturn data;\n\n};\n\nQuadraticBezierCurve.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v0.fromArray( json.v0 );\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\n\treturn this;\n\n};\n\n\nexport { QuadraticBezierCurve };\n","import { Curve } from '../core/Curve.js';\nimport { CatmullRom } from '../core/Interpolations.js';\nimport { Vector2 } from '../../math/Vector2.js';\n\n\nfunction SplineCurve( points /* array of Vector2 */ ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'SplineCurve';\n\n\tthis.points = points || [];\n\n}\n\nSplineCurve.prototype = Object.create( Curve.prototype );\nSplineCurve.prototype.constructor = SplineCurve;\n\nSplineCurve.prototype.isSplineCurve = true;\n\nSplineCurve.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new Vector2();\n\n\tvar points = this.points;\n\tvar p = ( points.length - 1 ) * t;\n\n\tvar intPoint = Math.floor( p );\n\tvar weight = p - intPoint;\n\n\tvar p0 = points[ intPoint === 0 ? intPoint : intPoint - 1 ];\n\tvar p1 = points[ intPoint ];\n\tvar p2 = points[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\n\tvar p3 = points[ intPoint > points.length - 3 ? points.length - 1 : intPoint + 2 ];\n\n\tpoint.set(\n\t\tCatmullRom( weight, p0.x, p1.x, p2.x, p3.x ),\n\t\tCatmullRom( weight, p0.y, p1.y, p2.y, p3.y )\n\t);\n\n\treturn point;\n\n};\n\nSplineCurve.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.points = [];\n\n\tfor ( var i = 0, l = source.points.length; i < l; i ++ ) {\n\n\t\tvar point = source.points[ i ];\n\n\t\tthis.points.push( point.clone() );\n\n\t}\n\n\treturn this;\n\n};\n\nSplineCurve.prototype.toJSON = function () {\n\n\tvar data = Curve.prototype.toJSON.call( this );\n\n\tdata.points = [];\n\n\tfor ( var i = 0, l = this.points.length; i < l; i ++ ) {\n\n\t\tvar point = this.points[ i ];\n\t\tdata.points.push( point.toArray() );\n\n\t}\n\n\treturn data;\n\n};\n\nSplineCurve.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.points = [];\n\n\tfor ( var i = 0, l = json.points.length; i < l; i ++ ) {\n\n\t\tvar point = json.points[ i ];\n\t\tthis.points.push( new Vector2().fromArray( point ) );\n\n\t}\n\n\treturn this;\n\n};\n\n\nexport { SplineCurve };\n","import { BufferGeometry } from './BufferGeometry.js';\n\n/**\n * @author benaadams / https://twitter.com/ben_a_adams\n */\n\nfunction InstancedBufferGeometry() {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'InstancedBufferGeometry';\n\tthis.maxInstancedCount = undefined;\n\n}\n\nInstancedBufferGeometry.prototype = Object.assign( Object.create( BufferGeometry.prototype ), {\n\n\tconstructor: InstancedBufferGeometry,\n\n\tisInstancedBufferGeometry: true,\n\n\tcopy: function ( source ) {\n\n\t\tBufferGeometry.prototype.copy.call( this, source );\n\n\t\tthis.maxInstancedCount = source.maxInstancedCount;\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar data = BufferGeometry.prototype.toJSON.call( this );\n\n\t\tdata.maxInstancedCount = this.maxInstancedCount;\n\n\t\tdata.isInstancedBufferGeometry = true;\n\n\t\treturn data;\n\n\t}\n\n} );\n\nexport { InstancedBufferGeometry };\n","import { _Math } from './Math.js';\nimport { Quaternion } from './Quaternion.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author kile / http://kile.stravaganza.org/\n * @author philogb / http://blog.thejit.org/\n * @author mikael emtinger / http://gomo.se/\n * @author egraether / http://egraether.com/\n * @author WestLangley / http://github.com/WestLangley\n */\n\nvar _vector = new Vector3();\nvar _quaternion = new Quaternion();\n\nfunction Vector3( x, y, z ) {\n\n\tthis.x = x || 0;\n\tthis.y = y || 0;\n\tthis.z = z || 0;\n\n}\n\nObject.assign( Vector3.prototype, {\n\n\tisVector3: true,\n\n\tset: function ( x, y, z ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetZ: function ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponent: function ( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetComponent: function ( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.x, this.y, this.z );\n\n\t},\n\n\tcopy: function ( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\n\t\treturn this;\n\n\t},\n\n\taddVectors: function ( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\n\t\treturn this;\n\n\t},\n\n\taddScaledVector: function ( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tsubScalar: function ( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\n\t\treturn this;\n\n\t},\n\n\tsubVectors: function ( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.' );\n\t\t\treturn this.multiplyVectors( v, w );\n\n\t\t}\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\t\tthis.z *= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyVectors: function ( a, b ) {\n\n\t\tthis.x = a.x * b.x;\n\t\tthis.y = a.y * b.y;\n\t\tthis.z = a.z * b.z;\n\n\t\treturn this;\n\n\t},\n\n\tapplyEuler: function ( euler ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tconsole.error( 'THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\treturn this.applyQuaternion( _quaternion.setFromEuler( euler ) );\n\n\t},\n\n\tapplyAxisAngle: function ( axis, angle ) {\n\n\t\treturn this.applyQuaternion( _quaternion.setFromAxisAngle( axis, angle ) );\n\n\t},\n\n\tapplyMatrix3: function ( m ) {\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\n\n\t\treturn this;\n\n\t},\n\n\tapplyNormalMatrix: function ( m ) {\n\n\t\treturn this.applyMatrix3( m ).normalize();\n\n\t},\n\n\tapplyMatrix4: function ( m ) {\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar e = m.elements;\n\n\t\tvar w = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] );\n\n\t\tthis.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] ) * w;\n\t\tthis.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] ) * w;\n\t\tthis.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * w;\n\n\t\treturn this;\n\n\t},\n\n\tapplyQuaternion: function ( q ) {\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar qx = q.x, qy = q.y, qz = q.z, qw = q.w;\n\n\t\t// calculate quat * vector\n\n\t\tvar ix = qw * x + qy * z - qz * y;\n\t\tvar iy = qw * y + qz * x - qx * z;\n\t\tvar iz = qw * z + qx * y - qy * x;\n\t\tvar iw = - qx * x - qy * y - qz * z;\n\n\t\t// calculate result * inverse quat\n\n\t\tthis.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\n\t\tthis.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\n\t\tthis.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\n\n\t\treturn this;\n\n\t},\n\n\tproject: function ( camera ) {\n\n\t\treturn this.applyMatrix4( camera.matrixWorldInverse ).applyMatrix4( camera.projectionMatrix );\n\n\t},\n\n\tunproject: function ( camera ) {\n\n\t\treturn this.applyMatrix4( camera.projectionMatrixInverse ).applyMatrix4( camera.matrixWorld );\n\n\t},\n\n\ttransformDirection: function ( m ) {\n\n\t\t// input: THREE.Matrix4 affine matrix\n\t\t// vector interpreted as a direction\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\n\n\t\treturn this.normalize();\n\n\t},\n\n\tdivide: function ( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\t\tthis.z /= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tdivideScalar: function ( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t},\n\n\tmin: function ( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\n\t\treturn this;\n\n\t},\n\n\tmax: function ( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\n\t\treturn this;\n\n\t},\n\n\tclamp: function ( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampScalar: function ( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\t\tthis.z = Math.max( minVal, Math.min( maxVal, this.z ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampLength: function ( min, max ) {\n\n\t\tvar length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t},\n\n\tfloor: function () {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tceil: function () {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tround: function () {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\n\t\treturn this;\n\n\t},\n\n\troundToZero: function () {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\n\n\t},\n\n\t// TODO lengthSquared?\n\n\tlengthSq: function () {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\n\n\t},\n\n\tmanhattanLength: function () {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\n\n\t},\n\n\tnormalize: function () {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t},\n\n\tsetLength: function ( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t},\n\n\tlerp: function ( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tlerpVectors: function ( v1, v2, alpha ) {\n\n\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\n\n\t},\n\n\tcross: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.' );\n\t\t\treturn this.crossVectors( v, w );\n\n\t\t}\n\n\t\treturn this.crossVectors( this, v );\n\n\t},\n\n\tcrossVectors: function ( a, b ) {\n\n\t\tvar ax = a.x, ay = a.y, az = a.z;\n\t\tvar bx = b.x, by = b.y, bz = b.z;\n\n\t\tthis.x = ay * bz - az * by;\n\t\tthis.y = az * bx - ax * bz;\n\t\tthis.z = ax * by - ay * bx;\n\n\t\treturn this;\n\n\t},\n\n\tprojectOnVector: function ( v ) {\n\n\t\t// v cannot be the zero v\n\n\t\tvar scalar = v.dot( this ) / v.lengthSq();\n\n\t\treturn this.copy( v ).multiplyScalar( scalar );\n\n\t},\n\n\tprojectOnPlane: function ( planeNormal ) {\n\n\t\t_vector.copy( this ).projectOnVector( planeNormal );\n\n\t\treturn this.sub( _vector );\n\n\t},\n\n\treflect: function ( normal ) {\n\n\t\t// reflect incident vector off plane orthogonal to normal\n\t\t// normal is assumed to have unit length\n\n\t\treturn this.sub( _vector.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\n\n\t},\n\n\tangleTo: function ( v ) {\n\n\t\tvar denominator = Math.sqrt( this.lengthSq() * v.lengthSq() );\n\n\t\tif ( denominator === 0 ) console.error( 'THREE.Vector3: angleTo() can\\'t handle zero length vectors.' );\n\n\t\tvar theta = this.dot( v ) / denominator;\n\n\t\t// clamp, to handle numerical problems\n\n\t\treturn Math.acos( _Math.clamp( theta, - 1, 1 ) );\n\n\t},\n\n\tdistanceTo: function ( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t},\n\n\tdistanceToSquared: function ( v ) {\n\n\t\tvar dx = this.x - v.x, dy = this.y - v.y, dz = this.z - v.z;\n\n\t\treturn dx * dx + dy * dy + dz * dz;\n\n\t},\n\n\tmanhattanDistanceTo: function ( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y ) + Math.abs( this.z - v.z );\n\n\t},\n\n\tsetFromSpherical: function ( s ) {\n\n\t\treturn this.setFromSphericalCoords( s.radius, s.phi, s.theta );\n\n\t},\n\n\tsetFromSphericalCoords: function ( radius, phi, theta ) {\n\n\t\tvar sinPhiRadius = Math.sin( phi ) * radius;\n\n\t\tthis.x = sinPhiRadius * Math.sin( theta );\n\t\tthis.y = Math.cos( phi ) * radius;\n\t\tthis.z = sinPhiRadius * Math.cos( theta );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCylindrical: function ( c ) {\n\n\t\treturn this.setFromCylindricalCoords( c.radius, c.theta, c.y );\n\n\t},\n\n\tsetFromCylindricalCoords: function ( radius, theta, y ) {\n\n\t\tthis.x = radius * Math.sin( theta );\n\t\tthis.y = y;\n\t\tthis.z = radius * Math.cos( theta );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrixPosition: function ( m ) {\n\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 12 ];\n\t\tthis.y = e[ 13 ];\n\t\tthis.z = e[ 14 ];\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrixScale: function ( m ) {\n\n\t\tvar sx = this.setFromMatrixColumn( m, 0 ).length();\n\t\tvar sy = this.setFromMatrixColumn( m, 1 ).length();\n\t\tvar sz = this.setFromMatrixColumn( m, 2 ).length();\n\n\t\tthis.x = sx;\n\t\tthis.y = sy;\n\t\tthis.z = sz;\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrixColumn: function ( m, index ) {\n\n\t\treturn this.fromArray( m.elements, index * 4 );\n\n\t},\n\n\tequals: function ( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\n\t\treturn array;\n\n\t},\n\n\tfromBufferAttribute: function ( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Vector3 };\n","/**\n * Uniform Utilities\n */\n\nexport function cloneUniforms( src ) {\n\n\tvar dst = {};\n\n\tfor ( var u in src ) {\n\n\t\tdst[ u ] = {};\n\n\t\tfor ( var p in src[ u ] ) {\n\n\t\t\tvar property = src[ u ][ p ];\n\n\t\t\tif ( property && ( property.isColor ||\n\t\t\t\tproperty.isMatrix3 || property.isMatrix4 ||\n\t\t\t\tproperty.isVector2 || property.isVector3 || property.isVector4 ||\n\t\t\t\tproperty.isTexture ) ) {\n\n\t\t\t\tdst[ u ][ p ] = property.clone();\n\n\t\t\t} else if ( Array.isArray( property ) ) {\n\n\t\t\t\tdst[ u ][ p ] = property.slice();\n\n\t\t\t} else {\n\n\t\t\t\tdst[ u ][ p ] = property;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn dst;\n\n}\n\nexport function mergeUniforms( uniforms ) {\n\n\tvar merged = {};\n\n\tfor ( var u = 0; u < uniforms.length; u ++ ) {\n\n\t\tvar tmp = cloneUniforms( uniforms[ u ] );\n\n\t\tfor ( var p in tmp ) {\n\n\t\t\tmerged[ p ] = tmp[ p ];\n\n\t\t}\n\n\t}\n\n\treturn merged;\n\n}\n\n// Legacy\n\nvar UniformsUtils = { clone: cloneUniforms, merge: mergeUniforms };\n\nexport { UniformsUtils };\n","import alphamap_fragment from './ShaderChunk/alphamap_fragment.glsl.js';\nimport alphamap_pars_fragment from './ShaderChunk/alphamap_pars_fragment.glsl.js';\nimport alphatest_fragment from './ShaderChunk/alphatest_fragment.glsl.js';\nimport aomap_fragment from './ShaderChunk/aomap_fragment.glsl.js';\nimport aomap_pars_fragment from './ShaderChunk/aomap_pars_fragment.glsl.js';\nimport begin_vertex from './ShaderChunk/begin_vertex.glsl.js';\nimport beginnormal_vertex from './ShaderChunk/beginnormal_vertex.glsl.js';\nimport bsdfs from './ShaderChunk/bsdfs.glsl.js';\nimport bumpmap_pars_fragment from './ShaderChunk/bumpmap_pars_fragment.glsl.js';\nimport clipping_planes_fragment from './ShaderChunk/clipping_planes_fragment.glsl.js';\nimport clipping_planes_pars_fragment from './ShaderChunk/clipping_planes_pars_fragment.glsl.js';\nimport clipping_planes_pars_vertex from './ShaderChunk/clipping_planes_pars_vertex.glsl.js';\nimport clipping_planes_vertex from './ShaderChunk/clipping_planes_vertex.glsl.js';\nimport color_fragment from './ShaderChunk/color_fragment.glsl.js';\nimport color_pars_fragment from './ShaderChunk/color_pars_fragment.glsl.js';\nimport color_pars_vertex from './ShaderChunk/color_pars_vertex.glsl.js';\nimport color_vertex from './ShaderChunk/color_vertex.glsl.js';\nimport common from './ShaderChunk/common.glsl.js';\nimport cube_uv_reflection_fragment from './ShaderChunk/cube_uv_reflection_fragment.glsl.js';\nimport defaultnormal_vertex from './ShaderChunk/defaultnormal_vertex.glsl.js';\nimport displacementmap_pars_vertex from './ShaderChunk/displacementmap_pars_vertex.glsl.js';\nimport displacementmap_vertex from './ShaderChunk/displacementmap_vertex.glsl.js';\nimport emissivemap_fragment from './ShaderChunk/emissivemap_fragment.glsl.js';\nimport emissivemap_pars_fragment from './ShaderChunk/emissivemap_pars_fragment.glsl.js';\nimport encodings_fragment from './ShaderChunk/encodings_fragment.glsl.js';\nimport encodings_pars_fragment from './ShaderChunk/encodings_pars_fragment.glsl.js';\nimport envmap_fragment from './ShaderChunk/envmap_fragment.glsl.js';\nimport envmap_common_pars_fragment from './ShaderChunk/envmap_common_pars_fragment.glsl.js';\nimport envmap_pars_fragment from './ShaderChunk/envmap_pars_fragment.glsl.js';\nimport envmap_pars_vertex from './ShaderChunk/envmap_pars_vertex.glsl.js';\nimport envmap_vertex from './ShaderChunk/envmap_vertex.glsl.js';\nimport fog_vertex from './ShaderChunk/fog_vertex.glsl.js';\nimport fog_pars_vertex from './ShaderChunk/fog_pars_vertex.glsl.js';\nimport fog_fragment from './ShaderChunk/fog_fragment.glsl.js';\nimport fog_pars_fragment from './ShaderChunk/fog_pars_fragment.glsl.js';\nimport gradientmap_pars_fragment from './ShaderChunk/gradientmap_pars_fragment.glsl.js';\nimport lightmap_fragment from './ShaderChunk/lightmap_fragment.glsl.js';\nimport lightmap_pars_fragment from './ShaderChunk/lightmap_pars_fragment.glsl.js';\nimport lights_lambert_vertex from './ShaderChunk/lights_lambert_vertex.glsl.js';\nimport lights_pars_begin from './ShaderChunk/lights_pars_begin.glsl.js';\nimport envmap_physical_pars_fragment from './ShaderChunk/envmap_physical_pars_fragment.glsl.js';\nimport lights_toon_fragment from './ShaderChunk/lights_toon_fragment.glsl.js';\nimport lights_toon_pars_fragment from './ShaderChunk/lights_toon_pars_fragment.glsl.js';\nimport lights_phong_fragment from './ShaderChunk/lights_phong_fragment.glsl.js';\nimport lights_phong_pars_fragment from './ShaderChunk/lights_phong_pars_fragment.glsl.js';\nimport lights_physical_fragment from './ShaderChunk/lights_physical_fragment.glsl.js';\nimport lights_physical_pars_fragment from './ShaderChunk/lights_physical_pars_fragment.glsl.js';\nimport lights_fragment_begin from './ShaderChunk/lights_fragment_begin.glsl.js';\nimport lights_fragment_maps from './ShaderChunk/lights_fragment_maps.glsl.js';\nimport lights_fragment_end from './ShaderChunk/lights_fragment_end.glsl.js';\nimport logdepthbuf_fragment from './ShaderChunk/logdepthbuf_fragment.glsl.js';\nimport logdepthbuf_pars_fragment from './ShaderChunk/logdepthbuf_pars_fragment.glsl.js';\nimport logdepthbuf_pars_vertex from './ShaderChunk/logdepthbuf_pars_vertex.glsl.js';\nimport logdepthbuf_vertex from './ShaderChunk/logdepthbuf_vertex.glsl.js';\nimport map_fragment from './ShaderChunk/map_fragment.glsl.js';\nimport map_pars_fragment from './ShaderChunk/map_pars_fragment.glsl.js';\nimport map_particle_fragment from './ShaderChunk/map_particle_fragment.glsl.js';\nimport map_particle_pars_fragment from './ShaderChunk/map_particle_pars_fragment.glsl.js';\nimport metalnessmap_fragment from './ShaderChunk/metalnessmap_fragment.glsl.js';\nimport metalnessmap_pars_fragment from './ShaderChunk/metalnessmap_pars_fragment.glsl.js';\nimport morphnormal_vertex from './ShaderChunk/morphnormal_vertex.glsl.js';\nimport morphtarget_pars_vertex from './ShaderChunk/morphtarget_pars_vertex.glsl.js';\nimport morphtarget_vertex from './ShaderChunk/morphtarget_vertex.glsl.js';\nimport normal_fragment_begin from './ShaderChunk/normal_fragment_begin.glsl.js';\nimport normal_fragment_maps from './ShaderChunk/normal_fragment_maps.glsl.js';\nimport normalmap_pars_fragment from './ShaderChunk/normalmap_pars_fragment.glsl.js';\nimport clearcoat_normal_fragment_begin from './ShaderChunk/clearcoat_normal_fragment_begin.glsl.js';\nimport clearcoat_normal_fragment_maps from './ShaderChunk/clearcoat_normal_fragment_maps.glsl.js';\nimport clearcoat_normalmap_pars_fragment from './ShaderChunk/clearcoat_normalmap_pars_fragment.glsl.js';\nimport packing from './ShaderChunk/packing.glsl.js';\nimport premultiplied_alpha_fragment from './ShaderChunk/premultiplied_alpha_fragment.glsl.js';\nimport project_vertex from './ShaderChunk/project_vertex.glsl.js';\nimport dithering_fragment from './ShaderChunk/dithering_fragment.glsl.js';\nimport dithering_pars_fragment from './ShaderChunk/dithering_pars_fragment.glsl.js';\nimport roughnessmap_fragment from './ShaderChunk/roughnessmap_fragment.glsl.js';\nimport roughnessmap_pars_fragment from './ShaderChunk/roughnessmap_pars_fragment.glsl.js';\nimport shadowmap_pars_fragment from './ShaderChunk/shadowmap_pars_fragment.glsl.js';\nimport shadowmap_pars_vertex from './ShaderChunk/shadowmap_pars_vertex.glsl.js';\nimport shadowmap_vertex from './ShaderChunk/shadowmap_vertex.glsl.js';\nimport shadowmask_pars_fragment from './ShaderChunk/shadowmask_pars_fragment.glsl.js';\nimport skinbase_vertex from './ShaderChunk/skinbase_vertex.glsl.js';\nimport skinning_pars_vertex from './ShaderChunk/skinning_pars_vertex.glsl.js';\nimport skinning_vertex from './ShaderChunk/skinning_vertex.glsl.js';\nimport skinnormal_vertex from './ShaderChunk/skinnormal_vertex.glsl.js';\nimport specularmap_fragment from './ShaderChunk/specularmap_fragment.glsl.js';\nimport specularmap_pars_fragment from './ShaderChunk/specularmap_pars_fragment.glsl.js';\nimport tonemapping_fragment from './ShaderChunk/tonemapping_fragment.glsl.js';\nimport tonemapping_pars_fragment from './ShaderChunk/tonemapping_pars_fragment.glsl.js';\nimport uv_pars_fragment from './ShaderChunk/uv_pars_fragment.glsl.js';\nimport uv_pars_vertex from './ShaderChunk/uv_pars_vertex.glsl.js';\nimport uv_vertex from './ShaderChunk/uv_vertex.glsl.js';\nimport uv2_pars_fragment from './ShaderChunk/uv2_pars_fragment.glsl.js';\nimport uv2_pars_vertex from './ShaderChunk/uv2_pars_vertex.glsl.js';\nimport uv2_vertex from './ShaderChunk/uv2_vertex.glsl.js';\nimport worldpos_vertex from './ShaderChunk/worldpos_vertex.glsl.js';\n\nimport background_frag from './ShaderLib/background_frag.glsl.js';\nimport background_vert from './ShaderLib/background_vert.glsl.js';\nimport cube_frag from './ShaderLib/cube_frag.glsl.js';\nimport cube_vert from './ShaderLib/cube_vert.glsl.js';\nimport depth_frag from './ShaderLib/depth_frag.glsl.js';\nimport depth_vert from './ShaderLib/depth_vert.glsl.js';\nimport distanceRGBA_frag from './ShaderLib/distanceRGBA_frag.glsl.js';\nimport distanceRGBA_vert from './ShaderLib/distanceRGBA_vert.glsl.js';\nimport equirect_frag from './ShaderLib/equirect_frag.glsl.js';\nimport equirect_vert from './ShaderLib/equirect_vert.glsl.js';\nimport linedashed_frag from './ShaderLib/linedashed_frag.glsl.js';\nimport linedashed_vert from './ShaderLib/linedashed_vert.glsl.js';\nimport meshbasic_frag from './ShaderLib/meshbasic_frag.glsl.js';\nimport meshbasic_vert from './ShaderLib/meshbasic_vert.glsl.js';\nimport meshlambert_frag from './ShaderLib/meshlambert_frag.glsl.js';\nimport meshlambert_vert from './ShaderLib/meshlambert_vert.glsl.js';\nimport meshmatcap_frag from './ShaderLib/meshmatcap_frag.glsl.js';\nimport meshmatcap_vert from './ShaderLib/meshmatcap_vert.glsl.js';\nimport meshtoon_frag from './ShaderLib/meshtoon_frag.glsl.js';\nimport meshtoon_vert from './ShaderLib/meshtoon_vert.glsl.js';\nimport meshphong_frag from './ShaderLib/meshphong_frag.glsl.js';\nimport meshphong_vert from './ShaderLib/meshphong_vert.glsl.js';\nimport meshphysical_frag from './ShaderLib/meshphysical_frag.glsl.js';\nimport meshphysical_vert from './ShaderLib/meshphysical_vert.glsl.js';\nimport normal_frag from './ShaderLib/normal_frag.glsl.js';\nimport normal_vert from './ShaderLib/normal_vert.glsl.js';\nimport points_frag from './ShaderLib/points_frag.glsl.js';\nimport points_vert from './ShaderLib/points_vert.glsl.js';\nimport shadow_frag from './ShaderLib/shadow_frag.glsl.js';\nimport shadow_vert from './ShaderLib/shadow_vert.glsl.js';\nimport sprite_frag from './ShaderLib/sprite_frag.glsl.js';\nimport sprite_vert from './ShaderLib/sprite_vert.glsl.js';\n\nexport var ShaderChunk = {\n\talphamap_fragment: alphamap_fragment,\n\talphamap_pars_fragment: alphamap_pars_fragment,\n\talphatest_fragment: alphatest_fragment,\n\taomap_fragment: aomap_fragment,\n\taomap_pars_fragment: aomap_pars_fragment,\n\tbegin_vertex: begin_vertex,\n\tbeginnormal_vertex: beginnormal_vertex,\n\tbsdfs: bsdfs,\n\tbumpmap_pars_fragment: bumpmap_pars_fragment,\n\tclipping_planes_fragment: clipping_planes_fragment,\n\tclipping_planes_pars_fragment: clipping_planes_pars_fragment,\n\tclipping_planes_pars_vertex: clipping_planes_pars_vertex,\n\tclipping_planes_vertex: clipping_planes_vertex,\n\tcolor_fragment: color_fragment,\n\tcolor_pars_fragment: color_pars_fragment,\n\tcolor_pars_vertex: color_pars_vertex,\n\tcolor_vertex: color_vertex,\n\tcommon: common,\n\tcube_uv_reflection_fragment: cube_uv_reflection_fragment,\n\tdefaultnormal_vertex: defaultnormal_vertex,\n\tdisplacementmap_pars_vertex: displacementmap_pars_vertex,\n\tdisplacementmap_vertex: displacementmap_vertex,\n\temissivemap_fragment: emissivemap_fragment,\n\temissivemap_pars_fragment: emissivemap_pars_fragment,\n\tencodings_fragment: encodings_fragment,\n\tencodings_pars_fragment: encodings_pars_fragment,\n\tenvmap_fragment: envmap_fragment,\n\tenvmap_common_pars_fragment: envmap_common_pars_fragment,\n\tenvmap_pars_fragment: envmap_pars_fragment,\n\tenvmap_pars_vertex: envmap_pars_vertex,\n\tenvmap_physical_pars_fragment: envmap_physical_pars_fragment,\n\tenvmap_vertex: envmap_vertex,\n\tfog_vertex: fog_vertex,\n\tfog_pars_vertex: fog_pars_vertex,\n\tfog_fragment: fog_fragment,\n\tfog_pars_fragment: fog_pars_fragment,\n\tgradientmap_pars_fragment: gradientmap_pars_fragment,\n\tlightmap_fragment: lightmap_fragment,\n\tlightmap_pars_fragment: lightmap_pars_fragment,\n\tlights_lambert_vertex: lights_lambert_vertex,\n\tlights_pars_begin: lights_pars_begin,\n\tlights_toon_fragment: lights_toon_fragment,\n\tlights_toon_pars_fragment: lights_toon_pars_fragment,\n\tlights_phong_fragment: lights_phong_fragment,\n\tlights_phong_pars_fragment: lights_phong_pars_fragment,\n\tlights_physical_fragment: lights_physical_fragment,\n\tlights_physical_pars_fragment: lights_physical_pars_fragment,\n\tlights_fragment_begin: lights_fragment_begin,\n\tlights_fragment_maps: lights_fragment_maps,\n\tlights_fragment_end: lights_fragment_end,\n\tlogdepthbuf_fragment: logdepthbuf_fragment,\n\tlogdepthbuf_pars_fragment: logdepthbuf_pars_fragment,\n\tlogdepthbuf_pars_vertex: logdepthbuf_pars_vertex,\n\tlogdepthbuf_vertex: logdepthbuf_vertex,\n\tmap_fragment: map_fragment,\n\tmap_pars_fragment: map_pars_fragment,\n\tmap_particle_fragment: map_particle_fragment,\n\tmap_particle_pars_fragment: map_particle_pars_fragment,\n\tmetalnessmap_fragment: metalnessmap_fragment,\n\tmetalnessmap_pars_fragment: metalnessmap_pars_fragment,\n\tmorphnormal_vertex: morphnormal_vertex,\n\tmorphtarget_pars_vertex: morphtarget_pars_vertex,\n\tmorphtarget_vertex: morphtarget_vertex,\n\tnormal_fragment_begin: normal_fragment_begin,\n\tnormal_fragment_maps: normal_fragment_maps,\n\tnormalmap_pars_fragment: normalmap_pars_fragment,\n\tclearcoat_normal_fragment_begin: clearcoat_normal_fragment_begin,\n\tclearcoat_normal_fragment_maps: clearcoat_normal_fragment_maps,\n\tclearcoat_normalmap_pars_fragment: clearcoat_normalmap_pars_fragment,\n\tpacking: packing,\n\tpremultiplied_alpha_fragment: premultiplied_alpha_fragment,\n\tproject_vertex: project_vertex,\n\tdithering_fragment: dithering_fragment,\n\tdithering_pars_fragment: dithering_pars_fragment,\n\troughnessmap_fragment: roughnessmap_fragment,\n\troughnessmap_pars_fragment: roughnessmap_pars_fragment,\n\tshadowmap_pars_fragment: shadowmap_pars_fragment,\n\tshadowmap_pars_vertex: shadowmap_pars_vertex,\n\tshadowmap_vertex: shadowmap_vertex,\n\tshadowmask_pars_fragment: shadowmask_pars_fragment,\n\tskinbase_vertex: skinbase_vertex,\n\tskinning_pars_vertex: skinning_pars_vertex,\n\tskinning_vertex: skinning_vertex,\n\tskinnormal_vertex: skinnormal_vertex,\n\tspecularmap_fragment: specularmap_fragment,\n\tspecularmap_pars_fragment: specularmap_pars_fragment,\n\ttonemapping_fragment: tonemapping_fragment,\n\ttonemapping_pars_fragment: tonemapping_pars_fragment,\n\tuv_pars_fragment: uv_pars_fragment,\n\tuv_pars_vertex: uv_pars_vertex,\n\tuv_vertex: uv_vertex,\n\tuv2_pars_fragment: uv2_pars_fragment,\n\tuv2_pars_vertex: uv2_pars_vertex,\n\tuv2_vertex: uv2_vertex,\n\tworldpos_vertex: worldpos_vertex,\n\n\tbackground_frag: background_frag,\n\tbackground_vert: background_vert,\n\tcube_frag: cube_frag,\n\tcube_vert: cube_vert,\n\tdepth_frag: depth_frag,\n\tdepth_vert: depth_vert,\n\tdistanceRGBA_frag: distanceRGBA_frag,\n\tdistanceRGBA_vert: distanceRGBA_vert,\n\tequirect_frag: equirect_frag,\n\tequirect_vert: equirect_vert,\n\tlinedashed_frag: linedashed_frag,\n\tlinedashed_vert: linedashed_vert,\n\tmeshbasic_frag: meshbasic_frag,\n\tmeshbasic_vert: meshbasic_vert,\n\tmeshlambert_frag: meshlambert_frag,\n\tmeshlambert_vert: meshlambert_vert,\n\tmeshmatcap_frag: meshmatcap_frag,\n\tmeshmatcap_vert: meshmatcap_vert,\n\tmeshtoon_frag: meshtoon_frag,\n\tmeshtoon_vert: meshtoon_vert,\n\tmeshphong_frag: meshphong_frag,\n\tmeshphong_vert: meshphong_vert,\n\tmeshphysical_frag: meshphysical_frag,\n\tmeshphysical_vert: meshphysical_vert,\n\tnormal_frag: normal_frag,\n\tnormal_vert: normal_vert,\n\tpoints_frag: points_frag,\n\tpoints_vert: points_vert,\n\tshadow_frag: shadow_frag,\n\tshadow_vert: shadow_vert,\n\tsprite_frag: sprite_frag,\n\tsprite_vert: sprite_vert\n};\n","export default /* glsl */`\n#ifdef USE_ALPHAMAP\n\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef ALPHATEST\n\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_AOMAP\n\n\t// reads channel R, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_AOMAP\n\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n\n#endif\n`;\n","export default /* glsl */`\nvec3 transformed = vec3( position );\n`;\n","export default /* glsl */`\nvec3 objectNormal = vec3( normal );\n\n#ifdef USE_TANGENT\n\n\tvec3 objectTangent = vec3( tangent.xyz );\n\n#endif\n`;\n","export default /* glsl */`\n\n// Analytical approximation of the DFG LUT, one half of the\n// split-sum approximation used in indirect specular lighting.\n// via 'environmentBRDF' from \"Physically Based Shading on Mobile\"\n// https://www.unrealengine.com/blog/physically-based-shading-on-mobile - environmentBRDF for GGX on mobile\nvec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\n\tvec4 r = roughness * c0 + c1;\n\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n\n}\n\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\n\t// based upon Frostbite 3 Moving to Physically-based Rendering\n\t// page 32, equation 26: E[window1]\n\t// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t// this is intended to be used on spot and point lights who are represented as luminous intensity\n\t// but who must be converted to luminous irradiance for surface lighting calculation\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\n\tif( cutoffDistance > 0.0 ) {\n\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\n\t}\n\n\treturn distanceFalloff;\n\n#else\n\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\n\t}\n\n\treturn 1.0;\n\n#endif\n\n}\n\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\n\treturn RECIPROCAL_PI * diffuseColor;\n\n} // validated\n\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\n\t// Original approximation by Christophe Schlick '94\n\t// float fresnel = pow( 1.0 - dotLH, 5.0 );\n\n\t// Optimized variant (presented by Epic at SIGGRAPH '13)\n\t// https://cdn2.unrealengine.com/Resources/files/2013SiggraphPresentationsNotes-26915738.pdf\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n\n} // validated\n\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\n\t// See F_Schlick\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\n\treturn Fr * fresnel + F0;\n\n}\n\n\n// Microfacet Models for Refraction through Rough Surfaces - equation (34)\n// http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html\n// alpha is \"roughness squared\" in Disney’s reparameterization\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\n\t// geometry term (normalized) = G(l)⋅G(v) / 4(n⋅l)(n⋅v)\n\t// also see #12151\n\n\tfloat a2 = pow2( alpha );\n\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\n\treturn 1.0 / ( gl * gv );\n\n} // validated\n\n// Moving Frostbite to Physically Based Rendering 3.0 - page 12, listing 2\n// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\n\tfloat a2 = pow2( alpha );\n\n\t// dotNL and dotNV are explicitly swapped. This is not a mistake.\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\n\treturn 0.5 / max( gv + gl, EPSILON );\n\n}\n\n// Microfacet Models for Refraction through Rough Surfaces - equation (33)\n// http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html\n// alpha is \"roughness squared\" in Disney’s reparameterization\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\n\tfloat a2 = pow2( alpha );\n\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0; // avoid alpha = 0 with dotNH = 1\n\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n\n}\n\n// GGX Distribution, Schlick Fresnel, GGX-Smith Visibility\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\n\tfloat alpha = pow2( roughness ); // UE4's roughness\n\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\n\tfloat D = D_GGX( alpha, dotNH );\n\n\treturn F * ( G * D );\n\n} // validated\n\n// Rect Area Light\n\n// Real-Time Polygonal-Light Shading with Linearly Transformed Cosines\n// by Eric Heitz, Jonathan Dupuy, Stephen Hill and David Neubelt\n// code: https://github.com/selfshadow/ltc_code/\n\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\n\tfloat dotNV = saturate( dot( N, V ) );\n\n\t// texture parameterized by sqrt( GGX alpha ) and sqrt( 1 - cos( theta ) )\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\n\treturn uv;\n\n}\n\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\n\t// Real-Time Area Lighting: a Journey from Research to Production (p.102)\n\t// An approximation of the form factor of a horizon-clipped rectangle.\n\n\tfloat l = length( f );\n\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n\n}\n\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\n\tfloat x = dot( v1, v2 );\n\n\tfloat y = abs( x );\n\n\t// rational polynomial approximation to theta / sin( theta ) / 2PI\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\n\treturn cross( v1, v2 ) * theta_sintheta;\n\n}\n\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\n\t// bail if point is on back side of plane of light\n\t// assumes ccw winding order of light vertices\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\n\t// construct orthonormal basis around N\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 ); // negated from paper; possibly due to a different handedness of world coordinate system\n\n\t// compute transform\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\n\t// transform rect\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\n\t// project rect onto sphere\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\n\t// calculate vector form factor\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\n\t// adjust for horizon clipping\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\n/*\n\t// alternate method of adjusting for horizon clipping (see referece)\n\t// refactoring required\n\tfloat len = length( vectorFormFactor );\n\tfloat z = vectorFormFactor.z / len;\n\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\n\t// tabulated horizon-clipped sphere, apparently...\n\tvec2 uv = vec2( z * 0.5 + 0.5, len );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\n\tfloat scale = texture2D( ltc_2, uv ).w;\n\n\tfloat result = len * scale;\n*/\n\n\treturn vec3( result );\n\n}\n\n// End Rect Area Light\n\n// ref: https://www.unrealengine.com/blog/physically-based-shading-on-mobile - environmentBRDF for GGX on mobile\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\n\treturn specularColor * brdf.x + brdf.y;\n\n} // validated\n\n// Fdez-Agüera's \"Multiple-Scattering Microfacet Model for Real-Time Image Based Lighting\"\n// Approximates multiscattering in order to preserve energy.\n// http://www.jcgt.org/published/0008/01/03/\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619; // 1/21\n\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n\n}\n\nfloat G_BlinnPhong_Implicit( /* const in float dotNL, const in float dotNV */ ) {\n\n\t// geometry term is (n dot l)(n dot v) / 4(n dot l)(n dot v)\n\treturn 0.25;\n\n}\n\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n\n}\n\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\n\t//float dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\t//float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\n\tfloat G = G_BlinnPhong_Implicit( /* dotNL, dotNV */ );\n\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\n\treturn F * ( G * D );\n\n} // validated\n\n// source: http://simonstechblog.blogspot.ca/2011/12/microfacet-brdf.html\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\n\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n\n#if defined( USE_SHEEN )\n\n// https://github.com/google/filament/blob/master/shaders/src/brdf.fs#L94\nfloat D_Charlie(float roughness, float NoH) {\n\t// Estevez and Kulla 2017, \"Production Friendly Microfacet Sheen BRDF\"\n\tfloat invAlpha  = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125); // 2^(-14/2), so sin2h^2 > 0 in fp16\n\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\n\n// https://github.com/google/filament/blob/master/shaders/src/brdf.fs#L136\nfloat V_Neubelt(float NoV, float NoL) {\n\t// Neubelt and Pettineo 2013, \"Crafting a Next-gen Material Pipeline for The Order: 1886\"\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\n\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n\n}\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_BUMPMAP\n\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\n\t// Bump Mapping Unparametrized Surfaces on the GPU by Morten S. Mikkelsen\n\t// http://api.unrealengine.com/attachments/Engine/Rendering/LightingAndShadows/BumpMappingWithoutTangentSpace/mm_sfgrad_bump.pdf\n\n\t// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n\tvec2 dHdxy_fwd() {\n\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n\t\treturn vec2( dBx, dBy );\n\n\t}\n\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n\t\t// Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\n\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\t\t// normalized\n\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\n\t}\n\n#endif\n`;\n","export default /* glsl */`\n#if NUM_CLIPPING_PLANES > 0\n\n\tvec4 plane;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vViewPosition, plane.xyz ) > plane.w ) discard;\n\n\t}\n\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\n\t\tbool clipped = true;\n\n\t\t#pragma unroll_loop\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vViewPosition, plane.xyz ) > plane.w ) && clipped;\n\n\t\t}\n\n\t\tif ( clipped ) discard;\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#if NUM_CLIPPING_PLANES > 0\n\n\t#if ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\t\tvarying vec3 vViewPosition;\n\t#endif\n\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n\n#endif\n`;\n","export default /* glsl */`\n#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvarying vec3 vViewPosition;\n#endif\n`;\n","export default /* glsl */`\n#if NUM_CLIPPING_PLANES > 0 && ! defined( STANDARD ) && ! defined( PHONG ) && ! defined( MATCAP )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_COLOR\n\n\tdiffuseColor.rgb *= vColor;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_COLOR\n\n\tvColor.xyz = color.xyz;\n\n#endif\n`;\n","export default /* glsl */`\n#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n\n#ifndef saturate\n// <tonemapping_pars_fragment> may have defined saturate() already\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\n\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\n// expects values in the range of [0,1]x[0,1], returns values in the [0,1] range.\n// do not collapse into a single function per: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\n\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\n\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\n\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n}\n\n// http://en.wikibooks.org/wiki/GLSL_Programming/Applying_Matrix_Transformations\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n\n}\n\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\n\treturn - distance * planeNormal + point;\n\n}\n\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n\n}\n\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n\n}\n\nmat3 transposeMat3( const in mat3 m ) {\n\n\tmat3 tmp;\n\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\n\treturn tmp;\n\n}\n\n// https://en.wikipedia.org/wiki/Relative_luminance\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\n\treturn dot( weights, color.rgb );\n\n}\n\nbool isPerspectiveMatrix( mat4 m ) {\n\n  return m[ 2 ][ 3 ] == - 1.0;\n\n}\n`;\n","export default /* glsl */`\n#ifdef ENVMAP_TYPE_CUBE_UV\n\n#define cubeUV_maxMipLevel 8.0\n#define cubeUV_minMipLevel 4.0\n#define cubeUV_maxTileSize 256.0\n#define cubeUV_minTileSize 16.0\n\n// These shader functions convert between the UV coordinates of a single face of\n// a cubemap, the 0-5 integer index of a cube face, and the direction vector for\n// sampling a textureCube (not generally normalized).\n\nfloat getFace(vec3 direction) {\n    vec3 absDirection = abs(direction);\n    float face = -1.0;\n    if (absDirection.x > absDirection.z) {\n      if (absDirection.x > absDirection.y)\n        face = direction.x > 0.0 ? 0.0 : 3.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    } else {\n      if (absDirection.z > absDirection.y)\n        face = direction.z > 0.0 ? 2.0 : 5.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    }\n    return face;\n}\n\nvec2 getUV(vec3 direction, float face) {\n    vec2 uv;\n    if (face == 0.0) {\n      uv = vec2(-direction.z, direction.y) / abs(direction.x);\n    } else if (face == 1.0) {\n      uv = vec2(direction.x, -direction.z) / abs(direction.y);\n    } else if (face == 2.0) {\n      uv = direction.xy / abs(direction.z);\n    } else if (face == 3.0) {\n      uv = vec2(direction.z, direction.y) / abs(direction.x);\n    } else if (face == 4.0) {\n      uv = direction.xz / abs(direction.y);\n    } else {\n      uv = vec2(-direction.x, direction.y) / abs(direction.z);\n    }\n    return 0.5 * (uv + 1.0);\n}\n\nvec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {\n  float face = getFace(direction);\n  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);\n  mipInt = max(mipInt, cubeUV_minMipLevel);\n  float faceSize = exp2(mipInt);\n\n  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);\n\n  vec2 uv = getUV(direction, face) * (faceSize - 1.0);\n  vec2 f = fract(uv);\n  uv += 0.5 - f;\n  if (face > 2.0) {\n    uv.y += faceSize;\n    face -= 3.0;\n  }\n  uv.x += face * faceSize;\n  if(mipInt < cubeUV_maxMipLevel){\n    uv.y += 2.0 * cubeUV_maxTileSize;\n  }\n  uv.y += filterInt * 2.0 * cubeUV_minTileSize;\n  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);\n  uv *= texelSize;\n\n  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x += texelSize;\n  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.y += texelSize;\n  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x -= texelSize;\n  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  vec3 tm = mix(tl, tr, f.x);\n  vec3 bm = mix(bl, br, f.x);\n  return mix(tm, bm, f.y);\n}\n\n// These defines must match with PMREMGenerator\n\n#define r0 1.0\n#define v0 0.339\n#define m0 -2.0\n#define r1 0.8\n#define v1 0.276\n#define m1 -1.0\n#define r4 0.4\n#define v4 0.046\n#define m4 2.0\n#define r5 0.305\n#define v5 0.016\n#define m5 3.0\n#define r6 0.21\n#define v6 0.0038\n#define m6 4.0\n\nfloat roughnessToMip(float roughness) {\n  float mip = 0.0;\n  if (roughness >= r1) {\n    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;\n  } else if (roughness >= r4) {\n    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;\n  } else if (roughness >= r5) {\n    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;\n  } else if (roughness >= r6) {\n    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;\n  } else {\n    mip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25\n  }\n  return mip;\n}\n\nvec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {\n  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);\n  float mipF = fract(mip);\n  float mipInt = floor(mip);\n\n  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);\n  if (mipF == 0.0) {\n    return vec4(color0, 1.0);\n  } else {\n    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);\n    return vec4(mix(color0, color1, mipF), 1.0);\n  }\n}\n#endif\n`;\n","export default /* glsl */`\nvec3 transformedNormal = objectNormal;\n\n#ifdef USE_INSTANCING\n\n\ttransformedNormal = mat3( instanceMatrix ) * transformedNormal;\n\n#endif\n\ntransformedNormal = normalMatrix * transformedNormal;\n\n#ifdef FLIP_SIDED\n\n\ttransformedNormal = - transformedNormal;\n\n#endif\n\n#ifdef USE_TANGENT\n\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\n\t#ifdef FLIP_SIDED\n\n\t\ttransformedTangent = - transformedTangent;\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_DISPLACEMENTMAP\n\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_DISPLACEMENTMAP\n\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_EMISSIVEMAP\n\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_EMISSIVEMAP\n\n\tuniform sampler2D emissiveMap;\n\n#endif\n`;\n","export default /* glsl */`\ngl_FragColor = linearToOutputTexel( gl_FragColor );\n`;\n","export default /* glsl */`\n// For a discussion of what this is, please read this: http://lousodrome.net/blog/light/2013/05/26/gamma-correct-and-hdr-rendering-in-a-32-bits-buffer/\n\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\n\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\n\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\n\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\n\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\n\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\n\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n//  return vec4( value.brg, ( 3.0 + 128.0 ) / 256.0 );\n}\n\n// reference: http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\n\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\n\n// reference: http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\n\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\tD = min( floor( D ) / 255.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\n\n// LogLuv reference: http://graphicrants.blogspot.ca/2009/04/rgbm-color-encoding.html\n\n// M matrix, for encoding\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\n\n// Inverse M matrix, for decoding\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}\n`;\n","export default /* glsl */`\n#ifdef USE_ENVMAP\n\n\t#ifdef ENV_WORLDPOS\n\n\t\tvec3 cameraToFrag;\n\t\t\n\t\tif ( isOrthographic ) {\n\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\n\t\t}  else {\n\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\n\t\t}\n\n\t\t// Transforming Normal Vectors with the Inverse Transformation\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\n\t\t#else\n\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#else\n\n\t\tvec3 reflectVec = vReflect;\n\n\t#endif\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\tvec4 envColor = textureCubeUV( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ), 0.0 );\n\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\n\t\tvec2 sampleUV;\n\n\t\treflectVec = normalize( reflectVec );\n\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\n\t\treflectVec = normalize( reflectVec );\n\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\n\t#else\n\n\t\tvec4 envColor = vec4( 0.0 );\n\n\t#endif\n\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\n\t\tenvColor = envMapTexelToLinear( envColor );\n\n\t#endif\n\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_ENVMAP\n\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_ENVMAP\n\n\tuniform float reflectivity;\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n\t\t#define ENV_WORLDPOS\n\n\t#endif\n\n\t#ifdef ENV_WORLDPOS\n\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_ENVMAP\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\n\t\t#define ENV_WORLDPOS\n\n\t#endif\n\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\n\t#else\n\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_ENVMAP )\n\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\n\tvec3 getLightProbeIndirectIrradiance( /*const in SpecularLightProbe specularLightProbe,*/ const in GeometricContext geometry, const in int maxMIPLevel ) {\n\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\n\t\t\t// TODO: replace with properly filtered cubemaps and access the irradiance LOD level, be it the last LOD level\n\t\t\t// of a specular cubemap, or just the default level of a specially created irradiance cubemap.\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\n\t\t\t#else\n\n\t\t\t\t// force the bias high to get the last LOD level as it is the most blurred.\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryVec, 1.0 );\n\n\t\t#else\n\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\n\t\t#endif\n\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\n\t}\n\n\t// Trowbridge-Reitz distribution to Mip level, following the logic of http://casual-effects.blogspot.ca/2011/08/plausible-environment-lighting-in-two.html\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\n\t\t// clamp to allowable LOD ranges.\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\n\t}\n\n\tvec3 getLightProbeIndirectRadiance( /*const in SpecularLightProbe specularLightProbe,*/ const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t  vec3 reflectVec = reflect( -viewDir, normal );\n\n\t\t  // Mixing the reflection with the normal is more accurate and keeps rough objects from gathering light from behind their tangent plane.\n\t\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\n\t\t#else\n\n\t\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\n\t\t#endif\n\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\n\t\t\t#else\n\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, queryReflectVec, roughness );\n\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\n\t\t\t#else\n\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\n\t\t\t#else\n\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#endif\n\n\t\treturn envMapColor.rgb * envMapIntensity;\n\n\t}\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_ENVMAP\n\n\t#ifdef ENV_WORLDPOS\n\n\t\tvWorldPosition = worldPosition.xyz;\n\n\t#else\n\n\t\tvec3 cameraToVertex;\n\n\t\tif ( isOrthographic ) { \n\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\n\t\t} else {\n\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n\t\t}\n\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\n\t\t#else\n\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_FOG\n\n\tfogDepth = -mvPosition.z;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_FOG\n\n\tvarying float fogDepth;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_FOG\n\n\t#ifdef FOG_EXP2\n\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\n\t#else\n\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\n\t#endif\n\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_FOG\n\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\n\t#ifdef FOG_EXP2\n\n\t\tuniform float fogDensity;\n\n\t#else\n\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n\n#ifdef USE_GRADIENTMAP\n\n\tuniform sampler2D gradientMap;\n\n#endif\n\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\n\t// dotNL will be from -1.0 to 1.0\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\n\t#ifdef USE_GRADIENTMAP\n\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\n\t#else\n\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\n\t#endif\n\n}\n\n`;\n","export default /* glsl */`\n#ifdef USE_LIGHTMAP\n\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity; // factor of PI should not be present; included here to prevent breakage\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_LIGHTMAP\n\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n\n#endif\n`;\n","export default /* glsl */`\nvec3 diffuse = vec3( 1.0 );\n\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\n\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\n\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\n\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n\n#if NUM_POINT_LIGHTS > 0\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\n\t\t#endif\n\n\t}\n\n#endif\n\n#if NUM_SPOT_LIGHTS > 0\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\n\t\t#endif\n\t}\n\n#endif\n\n/*\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\n\t\t// TODO (abelnation): implement\n\n\t}\n\n#endif\n*/\n\n#if NUM_DIR_LIGHTS > 0\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\n\t\t#endif\n\n\t}\n\n#endif\n\n#if NUM_HEMI_LIGHTS > 0\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\n\t\t#endif\n\n\t}\n\n#endif\n`;\n","export default /* glsl */`\nuniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\n\n// get the irradiance (radiance convolved with cosine lobe) at the point 'normal' on the unit sphere\n// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\n\t// normal is assumed to have unit length\n\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\n\t// band 0\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\n\t// band 1\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\n\t// band 2\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\n\treturn result;\n\n}\n\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\n\treturn irradiance;\n\n}\n\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\n\tvec3 irradiance = ambientLightColor;\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI;\n\n\t#endif\n\n\treturn irradiance;\n\n}\n\n#if NUM_DIR_LIGHTS > 0\n\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\n\t}\n\n#endif\n\n\n#if NUM_POINT_LIGHTS > 0\n\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t\tfloat shadowCameraNear;\n\t\tfloat shadowCameraFar;\n\t};\n\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\n\t// directLight is an out parameter as having it as a return value caused compiler errors on some devices\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\n\t\tfloat lightDistance = length( lVector );\n\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\n\t}\n\n#endif\n\n\n#if NUM_SPOT_LIGHTS > 0\n\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\n\t\tint shadow;\n\t\tfloat shadowBias;\n\t\tfloat shadowRadius;\n\t\tvec2 shadowMapSize;\n\t};\n\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\n\t// directLight is an out parameter as having it as a return value caused compiler errors on some devices\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\n\t\tif ( angleCos > spotLight.coneCos ) {\n\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\n\t\t} else {\n\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\n\t\t}\n\t}\n\n#endif\n\n\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\n\t// Pre-computed values of LinearTransformedCosine approximation of BRDF\n\t// BRDF approximation Texture is 64x64\n\tuniform sampler2D ltc_1; // RGBA Float\n\tuniform sampler2D ltc_2; // RGBA Float\n\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n\n#endif\n\n\n#if NUM_HEMI_LIGHTS > 0\n\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\t\tirradiance *= PI;\n\n\t\t#endif\n\n\t\treturn irradiance;\n\n\t}\n\n#endif\n`;\n","export default /* glsl */`\nToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n`;\n","export default /* glsl */`\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n\nstruct ToonMaterial {\n\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n\n};\n\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI; // punctual light\n\n\t#endif\n\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n\n}\n\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n\n#define Material_LightProbeLOD( material )\t(0)\n`;\n","export default /* glsl */`\nBlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n`;\n","export default /* glsl */`\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n\nstruct BlinnPhongMaterial {\n\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n\n};\n\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI; // punctual light\n\n\t#endif\n\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n\n}\n\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n\n#define Material_LightProbeLOD( material )\t(0)\n`;\n","export default /* glsl */`\nPhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\n\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\n\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.\nmaterial.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n\n#ifdef REFLECTIVITY\n\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\n#else\n\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n\n#endif\n\n#ifdef CLEARCOAT\n\n\tmaterial.clearcoat = saturate( clearcoat ); // Burley clearcoat model\n\tmaterial.clearcoatRoughness = max( clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n\n#endif\n#ifdef USE_SHEEN\n\n\tmaterial.sheenColor = sheen;\n\n#endif\n`;\n","export default /* glsl */`\nstruct PhysicalMaterial {\n\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n\n};\n\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\n\n// Clear coat directional hemishperical reflectance (this approximation should be improved)\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n\n}\n\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight; // counterclockwise; light shines in local neg z direction\n\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\n\t\t// LTC Fresnel Approximation by Stephen Hill\n\t\t// http://blog.selfshadow.com/publications/s2016-advances/s2016_ltc_fresnel.pdf\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\n\t}\n\n#endif\n\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\n\tvec3 irradiance = dotNL * directLight.color;\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI; // punctual light\n\n\t#endif\n\n\t#ifdef CLEARCOAT\n\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\t\tccIrradiance *= PI; // punctual light\n\n\t\t#endif\n\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\n\t#else\n\n\t\tfloat clearcoatDHR = 0.0;\n\n\t#endif\n\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n}\n\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\n\t#ifdef CLEARCOAT\n\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\n\t#else\n\n\t\tfloat clearcoatDHR = 0.0;\n\n\t#endif\n\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\n\t// Both indirect specular and indirect diffuse light accumulate here\n\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n\n// ref: https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n\n}\n`;\n","export default /* glsl */`\n/**\n * This is a template that can be used to light a material, it uses pluggable\n * RenderEquations (RE)for specific lighting scenarios.\n *\n * Instructions for use:\n * - Ensure that both RE_Direct, RE_IndirectDiffuse and RE_IndirectSpecular are defined\n * - If you have defined an RE_IndirectSpecular, you need to also provide a Material_LightProbeLOD. <---- ???\n * - Create a material parameter that is to be passed as the third parameter to your lighting functions.\n *\n * TODO:\n * - Add area light support.\n * - Add sphere light support.\n * - Add diffuse light probe (irradiance cubemap) support.\n */\n\nGeometricContext geometry;\n\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n\n#ifdef CLEARCOAT\n\n\tgeometry.clearcoatNormal = clearcoatNormal;\n\n#endif\n\nIncidentLight directLight;\n\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tPointLight pointLight;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\n\t\tpointLight = pointLights[ i ];\n\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec3( pointLight.shadow, directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\n#endif\n\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tSpotLight spotLight;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\n\t\tspotLight = spotLights[ i ];\n\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec3( spotLight.shadow, directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\n#endif\n\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tDirectionalLight directionalLight;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\tdirectionalLight = directionalLights[ i ];\n\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectLight.color *= all( bvec3( directionalLight.shadow, directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\n#endif\n\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\n\tRectAreaLight rectAreaLight;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\n\t}\n\n#endif\n\n#if defined( RE_IndirectDiffuse )\n\n\tvec3 iblIrradiance = vec3( 0.0 );\n\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\n\t\t#pragma unroll_loop\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\n\t\t}\n\n\t#endif\n\n#endif\n\n#if defined( RE_IndirectSpecular )\n\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( RE_IndirectDiffuse )\n\n\t#ifdef USE_LIGHTMAP\n\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\t\tlightMapIrradiance *= PI; // factor of PI should not be present; included here to prevent breakage\n\n\t\t#endif\n\n\t\tirradiance += lightMapIrradiance;\n\n\t#endif\n\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( /*lightProbe,*/ geometry, maxMipLevel );\n\n\t#endif\n\n#endif\n\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\n\tradiance += getLightProbeIndirectRadiance( /*specularLightProbe,*/ geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\n\t#ifdef CLEARCOAT\n\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( /*specularLightProbe,*/ geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( RE_IndirectDiffuse )\n\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n\n#endif\n\n#if defined( RE_IndirectSpecular )\n\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\n\t// Doing a strict comparison with == 1.0 can cause noise artifacts\n\t// on some platforms. See issue #17623.\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\n\t#else\n\n\t\tuniform float logDepthBufFC;\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\n\t#else\n\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\n\t\t\tgl_Position.z *= gl_Position.w;\n\n\t\t}\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_MAP\n\n\tvec4 texelColor = texture2D( map, vUv );\n\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\n#endif\n\n#ifdef USE_MAP\n\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n\n#endif\n\n#ifdef USE_ALPHAMAP\n\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\n\tuniform mat3 uvTransform;\n\n#endif\n\n#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif\n\n#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n`;\n","export default /* glsl */`\nfloat metalnessFactor = metalness;\n\n#ifdef USE_METALNESSMAP\n\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\n\t// reads channel B, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\tmetalnessFactor *= texelMetalness.b;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_METALNESSMAP\n\n\tuniform sampler2D metalnessMap;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_MORPHNORMALS\n\n\t// morphTargetBaseInfluence is set based on BufferGeometry.morphTargetsRelative value:\n\t// When morphTargetsRelative is false, this is set to 1 - sum(influences); this results in normal = sum((target - base) * influence)\n\t// When morphTargetsRelative is true, this is set to 1; as a result, all morph targets are simply added to the base after weighting\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_MORPHTARGETS\n\n\tuniform float morphTargetBaseInfluence;\n\n\t#ifndef USE_MORPHNORMALS\n\n\tuniform float morphTargetInfluences[ 8 ];\n\n\t#else\n\n\tuniform float morphTargetInfluences[ 4 ];\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_MORPHTARGETS\n\n\t// morphTargetBaseInfluence is set based on BufferGeometry.morphTargetsRelative value:\n\t// When morphTargetsRelative is false, this is set to 1 - sum(influences); this results in position = sum((target - base) * influence)\n\t// When morphTargetsRelative is true, this is set to 1; as a result, all morph targets are simply added to the base after weighting\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\n\t#ifndef USE_MORPHNORMALS\n\n\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef FLAT_SHADED\n\n\t// Workaround for Adreno/Nexus5 not able able to do dFdx( vViewPosition ) ...\n\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n\n#else\n\n\tvec3 normal = normalize( vNormal );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t#endif\n\n\t#ifdef USE_TANGENT\n\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t\t#endif\n\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\n\t\t#endif\n\n\t#endif\n\n#endif\n\n// non perturbed normal for clearcoat among others\n\nvec3 geometryNormal = normal;\n\n`;\n","export default /* glsl */`\n\n#ifdef OBJECTSPACE_NORMALMAP\n\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0; // overrides both flatShading and attribute normals\n\n\t#ifdef FLIP_SIDED\n\n\t\tnormal = - normal;\n\n\t#endif\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t#endif\n\n\tnormal = normalize( normalMatrix * normal );\n\n#elif defined( TANGENTSPACE_NORMALMAP )\n\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\n\t#ifdef USE_TANGENT\n\n\t\tnormal = normalize( vTBN * mapN );\n\n\t#else\n\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\n\t#endif\n\n#elif defined( USE_BUMPMAP )\n\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_NORMALMAP\n\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\n#endif\n\n#ifdef OBJECTSPACE_NORMALMAP\n\n\tuniform mat3 normalMatrix;\n\n#endif\n\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\n\t// Per-Pixel Tangent Space Normal Mapping\n\t// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\n\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\n\t\t// Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\n\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s ); // we do not care about the magnitude\n\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\n\t\tmat3 tsn = mat3( S, T, N );\n\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t\treturn normalize( tsn * mapN );\n\n\t}\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef CLEARCOAT\n\n\tvec3 clearcoatNormal = geometryNormal;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_CLEARCOAT_NORMALMAP\n\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\n\t#ifdef USE_TANGENT\n\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\n\t#else\n\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_CLEARCOAT_NORMALMAP\n\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n\n#endif\n`;\n","export default /* glsl */`\nvec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\n\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\n\nconst float PackUpscale = 256. / 255.; // fraction -> 0..1 (including 1)\nconst float UnpackDownscale = 255. / 256.; // 0..1 -> fraction (excluding 1)\n\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\n\nconst float ShiftRight8 = 1. / 256.;\n\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8; // tidy overflow\n\treturn r * PackUpscale;\n}\n\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\n\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\n\n// NOTE: viewZ/eyeZ is < 0 when in front of the camera per OpenGL conventions\n\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\n\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n`;\n","export default /* glsl */`\n#ifdef PREMULTIPLIED_ALPHA\n\n\t// Get get normal blending with premultipled, use with CustomBlending, OneFactor, OneMinusSrcAlphaFactor, AddEquation.\n\tgl_FragColor.rgb *= gl_FragColor.a;\n\n#endif\n`;\n","export default /* glsl */`\nvec4 mvPosition = vec4( transformed, 1.0 );\n\n#ifdef USE_INSTANCING\n\n\tmvPosition = instanceMatrix * mvPosition;\n\n#endif\n\nmvPosition = modelViewMatrix * mvPosition;\n\ngl_Position = projectionMatrix * mvPosition;\n`;\n","export default /* glsl */`\n#ifdef DITHERING\n\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef DITHERING\n\n\t// based on https://www.shadertoy.com/view/MslGR8\n\tvec3 dithering( vec3 color ) {\n\t\t//Calculate grid position\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\n\t\t//Shift the individual colors differently, thus making it even harder to see the dithering pattern\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\n\t\t//modify shift acording to grid position.\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\n\t\t//shift the color by dither_shift\n\t\treturn color + dither_shift_RGB;\n\t}\n\n#endif\n`;\n","export default /* glsl */`\nfloat roughnessFactor = roughness;\n\n#ifdef USE_ROUGHNESSMAP\n\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\n\t// reads channel G, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\troughnessFactor *= texelRoughness.g;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_ROUGHNESSMAP\n\n\tuniform sampler2D roughnessMap;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): create uniforms for area light shadows\n\n\t#endif\n\t*/\n\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\n\t}\n\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\n\t}\n\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\n\t\tfloat occlusion = 1.0;\n\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\n\t\tfloat hard_shadow = step( compare , distribution.x ); // Hard Shadow\n\n\t\tif (hard_shadow != 1.0 ) {\n\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance ); // Chebeyshevs inequality\n\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 ); // 0.3 reduces light bleed\n\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\n\t\t}\n\t\treturn occlusion;\n\n\t}\n\n\tfloat texture2DShadowLerp( sampler2D depths, vec2 size, vec2 uv, float compare ) {\n\n\t\tconst vec2 offset = vec2( 0.0, 1.0 );\n\n\t\tvec2 texelSize = vec2( 1.0 ) / size;\n\t\tvec2 centroidUV = ( floor( uv * size - 0.5 ) + 0.5 ) * texelSize;\n\n\t\tfloat lb = texture2DCompare( depths, centroidUV + texelSize * offset.xx, compare );\n\t\tfloat lt = texture2DCompare( depths, centroidUV + texelSize * offset.xy, compare );\n\t\tfloat rb = texture2DCompare( depths, centroidUV + texelSize * offset.yx, compare );\n\t\tfloat rt = texture2DCompare( depths, centroidUV + texelSize * offset.yy, compare );\n\n\t\tvec2 f = fract( uv * size + 0.5 );\n\n\t\tfloat a = mix( lb, lt, f.y );\n\t\tfloat b = mix( rb, rt, f.y );\n\t\tfloat c = mix( a, b, f.x );\n\n\t\treturn c;\n\n\t}\n\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\n\t\tfloat shadow = 1.0;\n\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\n\t\t// if ( something && something ) breaks ATI OpenGL shader compiler\n\t\t// if ( all( something, something ) ) using this instead\n\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n\t\tbool frustumTest = all( frustumTestVec );\n\n\t\tif ( frustumTest ) {\n\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\n\t\t\tshadow = (\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DShadowLerp( shadowMap, shadowMapSize, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 9.0 );\n\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\n\t\t#else // no percentage-closer filtering:\n\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\n\t\t#endif\n\n\t\t}\n\n\t\treturn shadow;\n\n\t}\n\n\t// cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D\n\t// vector suitable for 2D texture mapping. This code uses the following layout for the\n\t// 2D texture:\n\t//\n\t// xzXZ\n\t//  y Y\n\t//\n\t// Y - Positive y direction\n\t// y - Negative y direction\n\t// X - Positive x direction\n\t// x - Negative x direction\n\t// Z - Positive z direction\n\t// z - Negative z direction\n\t//\n\t// Source and test bed:\n\t// https://gist.github.com/tschw/da10c43c467ce8afd0c4\n\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\n\t\t// Number of texels to avoid at the edge of each square\n\n\t\tvec3 absV = abs( v );\n\n\t\t// Intersect unit cube\n\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\n\t\t// Apply scale to avoid seams\n\n\t\t// two texels less per square (one texel will do for NEAREST)\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\n\t\t// Unwrap\n\n\t\t// space: -1 ... 1 range for each square\n\t\t//\n\t\t// #X##\t\tdim    := ( 4 , 2 )\n\t\t//  # #\t\tcenter := ( 1 , 1 )\n\n\t\tvec2 planar = v.xy;\n\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\n\t\tif ( absV.z >= almostOne ) {\n\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\n\t\t} else if ( absV.x >= almostOne ) {\n\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\n\t\t} else if ( absV.y >= almostOne ) {\n\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\n\t\t}\n\n\t\t// Transform to UV space\n\n\t\t// scale := 0.5 / dim\n\t\t// translate := ( center + 0.5 ) / dim\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\n\t}\n\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\n\t\t// for point lights, the uniform @vShadowCoord is re-purposed to hold\n\t\t// the vector from the light to the world-space position of the fragment.\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\n\t\t// dp = normalized distance from light to fragment position\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?\n\t\tdp += shadowBias;\n\n\t\t// bd3D = base direction 3D\n\t\tvec3 bd3D = normalize( lightToPosition );\n\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\n\t\t#else // no percentage-closer filtering\n\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\n\t\t#endif\n\n\t}\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): uniforms for area light shadows\n\n\t#endif\n\t*/\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\n\t}\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\n\t}\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\n\t}\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): update vAreaShadowCoord with area light info\n\n\t#endif\n\t*/\n\n#endif\n`;\n","export default /* glsl */`\nfloat getShadowMask() {\n\n\tfloat shadow = 1.0;\n\n\t#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\tDirectionalLight directionalLight;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tshadow *= all( bvec2( directionalLight.shadow, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\n\t}\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\tSpotLight spotLight;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tspotLight = spotLights[ i ];\n\t\tshadow *= all( bvec2( spotLight.shadow, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\n\t}\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\tPointLight pointLight;\n\n\t#pragma unroll_loop\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tpointLight = pointLights[ i ];\n\t\tshadow *= all( bvec2( pointLight.shadow, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\n\t}\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): update shadow for Area light\n\n\t#endif\n\t*/\n\n\t#endif\n\n\treturn shadow;\n\n}\n`;\n","export default /* glsl */`\n#ifdef USE_SKINNING\n\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_SKINNING\n\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\n\t#ifdef BONE_TEXTURE\n\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\n\t\t\ty = dy * ( y + 0.5 );\n\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\n\t\t\treturn bone;\n\n\t\t}\n\n\t#else\n\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\n\t\t}\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_SKINNING\n\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_SKINNING\n\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\n\t#ifdef USE_TANGENT\n\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\nfloat specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n\n#else\n\n\tspecularStrength = 1.0;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_SPECULARMAP\n\n\tuniform sampler2D specularMap;\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( TONE_MAPPING )\n\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n\n#endif\n`;\n","export default /* glsl */`\n#ifndef saturate\n// <common> may have defined saturate() already\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\n\n// exposure only\nvec3 LinearToneMapping( vec3 color ) {\n\n\treturn toneMappingExposure * color;\n\n}\n\n// source: https://www.cs.utah.edu/~reinhard/cdrom/\nvec3 ReinhardToneMapping( vec3 color ) {\n\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n\n}\n\n// source: http://filmicgames.com/archives/75\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\n\t// John Hable's filmic operator from Uncharted 2 video game\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n\n}\n\n// source: http://filmicgames.com/archives/75\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\n\t// optimized filmic operator by Jim Hejl and Richard Burgess-Dawson\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n\n}\n\n// source: https://knarkowicz.wordpress.com/2016/01/06/aces-filmic-tone-mapping-curve/\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n\n}\n`;\n","export default /* glsl */`\n#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\n\tvarying vec2 vUv;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_UV\n\n\t#ifdef UVS_VERTEX_ONLY\n\n\t\tvec2 vUv;\n\n\t#else\n\n\t\tvarying vec2 vUv;\n\n\t#endif\n\n\tuniform mat3 uvTransform;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_UV\n\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvarying vec2 vUv2;\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\n\tuniform mat3 uv2Transform;\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\n\t#ifdef USE_INSTANCING\n\n\t\tworldPosition = instanceMatrix * worldPosition;\n\n\t#endif\n\n\tworldPosition = modelMatrix * worldPosition;\n\n#endif\n`;\n","export default /* glsl */`\nuniform sampler2D t2D;\n\nvarying vec2 vUv;\n\nvoid main() {\n\n\tvec4 texColor = texture2D( t2D, vUv );\n\n\tgl_FragColor = mapTexelToLinear( texColor );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n`;\n","export default /* glsl */`\nvarying vec2 vUv;\nuniform mat3 uvTransform;\n\nvoid main() {\n\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n\n}\n`;\n","export default /* glsl */`\n\n#include <envmap_common_pars_fragment>\nuniform float opacity;\n\nvarying vec3 vWorldDirection;\n\n#include <cube_uv_reflection_fragment>\n\nvoid main() {\n\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n`;\n","export default /* glsl */`\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\n\tgl_Position.z = gl_Position.w; // set z to camera.far\n\n}\n`;\n","export default /* glsl */`\n#if DEPTH_PACKING == 3200\n\n\tuniform float opacity;\n\n#endif\n\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( 1.0 );\n\n\t#if DEPTH_PACKING == 3200\n\n\t\tdiffuseColor.a = opacity;\n\n\t#endif\n\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\t#include <logdepthbuf_fragment>\n\n\t#if DEPTH_PACKING == 3200\n\n\t\tgl_FragColor = vec4( vec3( 1.0 - gl_FragCoord.z ), opacity );\n\n\t#elif DEPTH_PACKING == 3201\n\n\t\tgl_FragColor = packDepthToRGBA( gl_FragCoord.z );\n\n\t#endif\n\n}\n`;\n","export default /* glsl */`\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_DISPLACEMENTMAP\n\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n}\n`;\n","export default /* glsl */`\n#define DISTANCE\n\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main () {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( 1.0 );\n\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist ); // clamp to [ 0, 1 ]\n\n\tgl_FragColor = packDepthToRGBA( dist );\n\n}\n`;\n","export default /* glsl */`\n#define DISTANCE\n\nvarying vec3 vWorldPosition;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_DISPLACEMENTMAP\n\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvWorldPosition = worldPosition.xyz;\n\n}\n`;\n","export default /* glsl */`\nuniform sampler2D tEquirect;\n\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvec3 direction = normalize( vWorldDirection );\n\n\tvec2 sampleUV;\n\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\n\tgl_FragColor = mapTexelToLinear( texColor );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n`;\n","export default /* glsl */`\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\n}\n`;\n","export default /* glsl */`\nuniform vec3 diffuse;\nuniform float opacity;\n\nuniform float dashSize;\nuniform float totalSize;\n\nvarying float vLineDistance;\n\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\n\t\tdiscard;\n\n\t}\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\n\toutgoingLight = diffuseColor.rgb; // simple shader\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n`;\n","export default /* glsl */`\nuniform float scale;\nattribute float lineDistance;\n\nvarying float vLineDistance;\n\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <color_vertex>\n\n\tvLineDistance = scale * lineDistance;\n\n\tvec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n\tgl_Position = projectionMatrix * mvPosition;\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n}\n`;\n","export default /* glsl */`\nuniform vec3 diffuse;\nuniform float opacity;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\n\t// accumulation (baked indirect lighting only)\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\n\t#else\n\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\n\t#endif\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n`;\n","export default /* glsl */`\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_ENVMAP\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n\n}\n`;\n","export default /* glsl */`\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\n\t#else\n\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\n\t#endif\n\n\t#include <lightmap_fragment>\n\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\n\t#else\n\n\t\treflectedLight.directDiffuse = vLightFront;\n\n\t#endif\n\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n`;\n","export default /* glsl */`\n#define LAMBERT\n\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n`;\n","export default /* glsl */`\n#define MATCAP\n\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks\n\n\t#ifdef USE_MATCAP\n\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\n\t#else\n\n\t\tvec4 matcapColor = vec4( 1.0 );\n\n\t#endif\n\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n`;\n","export default /* glsl */`\n#define MATCAP\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\t\tvNormal = normalize( transformedNormal );\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n}\n`;\n","export default /* glsl */`\n#define TOON\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n`;\n","export default /* glsl */`\n#define TOON\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n`;\n","export default /* glsl */`\n#define PHONG\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n`;\n","export default /* glsl */`\n#define PHONG\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n`;\n","export default /* glsl */`\n#define STANDARD\n\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSPARENCY\n#endif\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n\n#ifdef TRANSPARENCY\n\tuniform float transparency;\n#endif\n\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_normalmap_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n\t// this is a stub for the transparency model\n\t#ifdef TRANSPARENCY\n\t\tdiffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t#endif\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n`;\n","export default /* glsl */`\n#define STANDARD\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n\t#ifdef USE_TANGENT\n\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\n\t#endif\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n`;\n","export default /* glsl */`\n#define NORMAL\n\nuniform float opacity;\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\n\tvarying vec3 vViewPosition;\n\n#endif\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\n}\n`;\n","export default /* glsl */`\n#define NORMAL\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\n\tvarying vec3 vViewPosition;\n\n#endif\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n\t#ifdef USE_TANGENT\n\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\n\t#endif\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\n\tvViewPosition = - mvPosition.xyz;\n\n#endif\n\n}\n`;\n","export default /* glsl */`\nuniform vec3 diffuse;\nuniform float opacity;\n\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\n\toutgoingLight = diffuseColor.rgb;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <premultiplied_alpha_fragment>\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n`;\n","export default /* glsl */`\nuniform float size;\nuniform float scale;\n\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\n\tgl_PointSize = size;\n\n\t#ifdef USE_SIZEATTENUATION\n\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\n\t#endif\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n\n}\n`;\n","export default /* glsl */`\nuniform vec3 color;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n\nvoid main() {\n\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\n\t#include <fog_fragment>\n\n}\n`;\n","export default /* glsl */`\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n\nvoid main() {\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n`;\n","export default /* glsl */`\nuniform vec3 diffuse;\nuniform float opacity;\n\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\toutgoingLight = diffuseColor.rgb;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n`;\n","export default /* glsl */`\nuniform float rotation;\nuniform vec2 center;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\n\t#ifndef USE_SIZEATTENUATION\n\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\n\t#endif\n\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\n\tmvPosition.xy += rotatedPosition;\n\n\tgl_Position = projectionMatrix * mvPosition;\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n}\n`;\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { Cache } from './Cache.js';\nimport { Loader } from './Loader.js';\n\nvar loading = {};\n\nfunction FileLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nFileLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: FileLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tif ( url === undefined ) url = '';\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\turl = this.manager.resolveURL( url );\n\n\t\tvar scope = this;\n\n\t\tvar cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tsetTimeout( function () {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\t// Check if request is duplicate\n\n\t\tif ( loading[ url ] !== undefined ) {\n\n\t\t\tloading[ url ].push( {\n\n\t\t\t\tonLoad: onLoad,\n\t\t\t\tonProgress: onProgress,\n\t\t\t\tonError: onError\n\n\t\t\t} );\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t// Check for data: URI\n\t\tvar dataUriRegex = /^data:(.*?)(;base64)?,(.*)$/;\n\t\tvar dataUriRegexResult = url.match( dataUriRegex );\n\n\t\t// Safari can not handle Data URIs through XMLHttpRequest so process manually\n\t\tif ( dataUriRegexResult ) {\n\n\t\t\tvar mimeType = dataUriRegexResult[ 1 ];\n\t\t\tvar isBase64 = !! dataUriRegexResult[ 2 ];\n\t\t\tvar data = dataUriRegexResult[ 3 ];\n\n\t\t\tdata = decodeURIComponent( data );\n\n\t\t\tif ( isBase64 ) data = atob( data );\n\n\t\t\ttry {\n\n\t\t\t\tvar response;\n\t\t\t\tvar responseType = ( this.responseType || '' ).toLowerCase();\n\n\t\t\t\tswitch ( responseType ) {\n\n\t\t\t\t\tcase 'arraybuffer':\n\t\t\t\t\tcase 'blob':\n\n\t\t\t\t\t\tvar view = new Uint8Array( data.length );\n\n\t\t\t\t\t\tfor ( var i = 0; i < data.length; i ++ ) {\n\n\t\t\t\t\t\t\tview[ i ] = data.charCodeAt( i );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( responseType === 'blob' ) {\n\n\t\t\t\t\t\t\tresponse = new Blob( [ view.buffer ], { type: mimeType } );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tresponse = view.buffer;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'document':\n\n\t\t\t\t\t\tvar parser = new DOMParser();\n\t\t\t\t\t\tresponse = parser.parseFromString( data, mimeType );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'json':\n\n\t\t\t\t\t\tresponse = JSON.parse( data );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault: // 'text' or other\n\n\t\t\t\t\t\tresponse = data;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\t// Wait for next browser tick like standard XMLHttpRequest event dispatching does\n\t\t\t\tsetTimeout( function () {\n\n\t\t\t\t\tif ( onLoad ) onLoad( response );\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t}, 0 );\n\n\t\t\t} catch ( error ) {\n\n\t\t\t\t// Wait for next browser tick like standard XMLHttpRequest event dispatching does\n\t\t\t\tsetTimeout( function () {\n\n\t\t\t\t\tif ( onError ) onError( error );\n\n\t\t\t\t\tscope.manager.itemError( url );\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t}, 0 );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// Initialise array for duplicate requests\n\n\t\t\tloading[ url ] = [];\n\n\t\t\tloading[ url ].push( {\n\n\t\t\t\tonLoad: onLoad,\n\t\t\t\tonProgress: onProgress,\n\t\t\t\tonError: onError\n\n\t\t\t} );\n\n\t\t\tvar request = new XMLHttpRequest();\n\n\t\t\trequest.open( 'GET', url, true );\n\n\t\t\trequest.addEventListener( 'load', function ( event ) {\n\n\t\t\t\tvar response = this.response;\n\n\t\t\t\tvar callbacks = loading[ url ];\n\n\t\t\t\tdelete loading[ url ];\n\n\t\t\t\tif ( this.status === 200 || this.status === 0 ) {\n\n\t\t\t\t\t// Some browsers return HTTP Status 0 when using non-http protocol\n\t\t\t\t\t// e.g. 'file://' or 'data://'. Handle as success.\n\n\t\t\t\t\tif ( this.status === 0 ) console.warn( 'THREE.FileLoader: HTTP Status 0 received.' );\n\n\t\t\t\t\t// Add to cache only on HTTP success, so that we do not cache\n\t\t\t\t\t// error response bodies as proper responses to requests.\n\t\t\t\t\tCache.add( url, response );\n\n\t\t\t\t\tfor ( var i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tvar callback = callbacks[ i ];\n\t\t\t\t\t\tif ( callback.onLoad ) callback.onLoad( response );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfor ( var i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tvar callback = callbacks[ i ];\n\t\t\t\t\t\tif ( callback.onError ) callback.onError( event );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tscope.manager.itemError( url );\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t}\n\n\t\t\t}, false );\n\n\t\t\trequest.addEventListener( 'progress', function ( event ) {\n\n\t\t\t\tvar callbacks = loading[ url ];\n\n\t\t\t\tfor ( var i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar callback = callbacks[ i ];\n\t\t\t\t\tif ( callback.onProgress ) callback.onProgress( event );\n\n\t\t\t\t}\n\n\t\t\t}, false );\n\n\t\t\trequest.addEventListener( 'error', function ( event ) {\n\n\t\t\t\tvar callbacks = loading[ url ];\n\n\t\t\t\tdelete loading[ url ];\n\n\t\t\t\tfor ( var i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar callback = callbacks[ i ];\n\t\t\t\t\tif ( callback.onError ) callback.onError( event );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, false );\n\n\t\t\trequest.addEventListener( 'abort', function ( event ) {\n\n\t\t\t\tvar callbacks = loading[ url ];\n\n\t\t\t\tdelete loading[ url ];\n\n\t\t\t\tfor ( var i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar callback = callbacks[ i ];\n\t\t\t\t\tif ( callback.onError ) callback.onError( event );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, false );\n\n\t\t\tif ( this.responseType !== undefined ) request.responseType = this.responseType;\n\t\t\tif ( this.withCredentials !== undefined ) request.withCredentials = this.withCredentials;\n\n\t\t\tif ( request.overrideMimeType ) request.overrideMimeType( this.mimeType !== undefined ? this.mimeType : 'text/plain' );\n\n\t\t\tfor ( var header in this.requestHeader ) {\n\n\t\t\t\trequest.setRequestHeader( header, this.requestHeader[ header ] );\n\n\t\t\t}\n\n\t\t\trequest.send( null );\n\n\t\t}\n\n\t\tscope.manager.itemStart( url );\n\n\t\treturn request;\n\n\t},\n\n\tsetResponseType: function ( value ) {\n\n\t\tthis.responseType = value;\n\t\treturn this;\n\n\t},\n\n\tsetWithCredentials: function ( value ) {\n\n\t\tthis.withCredentials = value;\n\t\treturn this;\n\n\t},\n\n\tsetMimeType: function ( value ) {\n\n\t\tthis.mimeType = value;\n\t\treturn this;\n\n\t},\n\n\tsetRequestHeader: function ( value ) {\n\n\t\tthis.requestHeader = value;\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { FileLoader };\n","/**\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  defines: { \"label\" : \"value\" },\n *  uniforms: { \"parameter1\": { value: 1.0 }, \"parameter2\": { value2: 2 } },\n *\n *  fragmentShader: <string>,\n *  vertexShader: <string>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  lights: <bool>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nimport { Material } from './Material.js';\nimport { cloneUniforms } from '../renderers/shaders/UniformsUtils.js';\n\nimport default_vertex from '../renderers/shaders/ShaderChunk/default_vertex.glsl.js';\nimport default_fragment from '../renderers/shaders/ShaderChunk/default_fragment.glsl.js';\n\nfunction ShaderMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'ShaderMaterial';\n\n\tthis.defines = {};\n\tthis.uniforms = {};\n\n\tthis.vertexShader = default_vertex;\n\tthis.fragmentShader = default_fragment;\n\n\tthis.linewidth = 1;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.fog = false; // set to use scene fog\n\tthis.lights = false; // set to use scene lights\n\tthis.clipping = false; // set to use user-defined clipping planes\n\n\tthis.skinning = false; // set to use skinning attribute streams\n\tthis.morphTargets = false; // set to use morph targets\n\tthis.morphNormals = false; // set to use morph normals\n\n\tthis.extensions = {\n\t\tderivatives: false, // set to use derivatives\n\t\tfragDepth: false, // set to use fragment depth values\n\t\tdrawBuffers: false, // set to use draw buffers\n\t\tshaderTextureLOD: false // set to use shader texture LOD\n\t};\n\n\t// When rendered geometry doesn't include these attributes but the material does,\n\t// use these default values in WebGL. This avoids errors when buffer data is missing.\n\tthis.defaultAttributeValues = {\n\t\t'color': [ 1, 1, 1 ],\n\t\t'uv': [ 0, 0 ],\n\t\t'uv2': [ 0, 0 ]\n\t};\n\n\tthis.index0AttributeName = undefined;\n\tthis.uniformsNeedUpdate = false;\n\n\tif ( parameters !== undefined ) {\n\n\t\tif ( parameters.attributes !== undefined ) {\n\n\t\t\tconsole.error( 'THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.' );\n\n\t\t}\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n}\n\nShaderMaterial.prototype = Object.create( Material.prototype );\nShaderMaterial.prototype.constructor = ShaderMaterial;\n\nShaderMaterial.prototype.isShaderMaterial = true;\n\nShaderMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.fragmentShader = source.fragmentShader;\n\tthis.vertexShader = source.vertexShader;\n\n\tthis.uniforms = cloneUniforms( source.uniforms );\n\n\tthis.defines = Object.assign( {}, source.defines );\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\tthis.lights = source.lights;\n\tthis.clipping = source.clipping;\n\n\tthis.skinning = source.skinning;\n\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\tthis.extensions = source.extensions;\n\n\treturn this;\n\n};\n\nShaderMaterial.prototype.toJSON = function ( meta ) {\n\n\tvar data = Material.prototype.toJSON.call( this, meta );\n\n\tdata.uniforms = {};\n\n\tfor ( var name in this.uniforms ) {\n\n\t\tvar uniform = this.uniforms[ name ];\n\t\tvar value = uniform.value;\n\n\t\tif ( value && value.isTexture ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 't',\n\t\t\t\tvalue: value.toJSON( meta ).uuid\n\t\t\t};\n\n\t\t} else if ( value && value.isColor ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'c',\n\t\t\t\tvalue: value.getHex()\n\t\t\t};\n\n\t\t} else if ( value && value.isVector2 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'v2',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else if ( value && value.isVector3 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'v3',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else if ( value && value.isVector4 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'v4',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else if ( value && value.isMatrix3 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'm3',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else if ( value && value.isMatrix4 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'm4',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\tvalue: value\n\t\t\t};\n\n\t\t\t// note: the array variants v2v, v3v, v4v, m4v and tv are not supported so far\n\n\t\t}\n\n\t}\n\n\tif ( Object.keys( this.defines ).length > 0 ) data.defines = this.defines;\n\n\tdata.vertexShader = this.vertexShader;\n\tdata.fragmentShader = this.fragmentShader;\n\n\tvar extensions = {};\n\n\tfor ( var key in this.extensions ) {\n\n\t\tif ( this.extensions[ key ] === true ) extensions[ key ] = true;\n\n\t}\n\n\tif ( Object.keys( extensions ).length > 0 ) data.extensions = extensions;\n\n\treturn data;\n\n};\n\n\nexport { ShaderMaterial };\n","export default /* glsl */`\nvoid main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n`;\n","export default /* glsl */`\nvoid main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}\n`;\n","import { Vector3 } from './Vector3.js';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://clara.io\n * @author tschw\n */\n\nvar _vector = new Vector3();\n\nfunction Matrix3() {\n\n\tthis.elements = [\n\n\t\t1, 0, 0,\n\t\t0, 1, 0,\n\t\t0, 0, 1\n\n\t];\n\n\tif ( arguments.length > 0 ) {\n\n\t\tconsole.error( 'THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.' );\n\n\t}\n\n}\n\nObject.assign( Matrix3.prototype, {\n\n\tisMatrix3: true,\n\n\tset: function ( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 1 ] = n21; te[ 2 ] = n31;\n\t\tte[ 3 ] = n12; te[ 4 ] = n22; te[ 5 ] = n32;\n\t\tte[ 6 ] = n13; te[ 7 ] = n23; te[ 8 ] = n33;\n\n\t\treturn this;\n\n\t},\n\n\tidentity: function () {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0,\n\t\t\t0, 1, 0,\n\t\t\t0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().fromArray( this.elements );\n\n\t},\n\n\tcopy: function ( m ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ];\n\t\tte[ 3 ] = me[ 3 ]; te[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ];\n\t\tte[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ]; te[ 8 ] = me[ 8 ];\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrix4: function ( m ) {\n\n\t\tvar me = m.elements;\n\n\t\tthis.set(\n\n\t\t\tme[ 0 ], me[ 4 ], me[ 8 ],\n\t\t\tme[ 1 ], me[ 5 ], me[ 9 ],\n\t\t\tme[ 2 ], me[ 6 ], me[ 10 ]\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tapplyToBufferAttribute: function ( attribute ) {\n\n\t\tfor ( var i = 0, l = attribute.count; i < l; i ++ ) {\n\n\t\t\t_vector.x = attribute.getX( i );\n\t\t\t_vector.y = attribute.getY( i );\n\t\t\t_vector.z = attribute.getZ( i );\n\n\t\t\t_vector.applyMatrix3( this );\n\n\t\t\tattribute.setXYZ( i, _vector.x, _vector.y, _vector.z );\n\n\t\t}\n\n\t\treturn attribute;\n\n\t},\n\n\tmultiply: function ( m ) {\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t},\n\n\tpremultiply: function ( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t},\n\n\tmultiplyMatrices: function ( a, b ) {\n\n\t\tvar ae = a.elements;\n\t\tvar be = b.elements;\n\t\tvar te = this.elements;\n\n\t\tvar a11 = ae[ 0 ], a12 = ae[ 3 ], a13 = ae[ 6 ];\n\t\tvar a21 = ae[ 1 ], a22 = ae[ 4 ], a23 = ae[ 7 ];\n\t\tvar a31 = ae[ 2 ], a32 = ae[ 5 ], a33 = ae[ 8 ];\n\n\t\tvar b11 = be[ 0 ], b12 = be[ 3 ], b13 = be[ 6 ];\n\t\tvar b21 = be[ 1 ], b22 = be[ 4 ], b23 = be[ 7 ];\n\t\tvar b31 = be[ 2 ], b32 = be[ 5 ], b33 = be[ 8 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31;\n\t\tte[ 3 ] = a11 * b12 + a12 * b22 + a13 * b32;\n\t\tte[ 6 ] = a11 * b13 + a12 * b23 + a13 * b33;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31;\n\t\tte[ 4 ] = a21 * b12 + a22 * b22 + a23 * b32;\n\t\tte[ 7 ] = a21 * b13 + a22 * b23 + a23 * b33;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31;\n\t\tte[ 5 ] = a31 * b12 + a32 * b22 + a33 * b32;\n\t\tte[ 8 ] = a31 * b13 + a32 * b23 + a33 * b33;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 3 ] *= s; te[ 6 ] *= s;\n\t\tte[ 1 ] *= s; te[ 4 ] *= s; te[ 7 ] *= s;\n\t\tte[ 2 ] *= s; te[ 5 ] *= s; te[ 8 ] *= s;\n\n\t\treturn this;\n\n\t},\n\n\tdeterminant: function () {\n\n\t\tvar te = this.elements;\n\n\t\tvar a = te[ 0 ], b = te[ 1 ], c = te[ 2 ],\n\t\t\td = te[ 3 ], e = te[ 4 ], f = te[ 5 ],\n\t\t\tg = te[ 6 ], h = te[ 7 ], i = te[ 8 ];\n\n\t\treturn a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\n\n\t},\n\n\tgetInverse: function ( matrix, throwOnDegenerate ) {\n\n\t\tif ( matrix && matrix.isMatrix4 ) {\n\n\t\t\tconsole.error( \"THREE.Matrix3: .getInverse() no longer takes a Matrix4 argument.\" );\n\n\t\t}\n\n\t\tvar me = matrix.elements,\n\t\t\tte = this.elements,\n\n\t\t\tn11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ],\n\t\t\tn12 = me[ 3 ], n22 = me[ 4 ], n32 = me[ 5 ],\n\t\t\tn13 = me[ 6 ], n23 = me[ 7 ], n33 = me[ 8 ],\n\n\t\t\tt11 = n33 * n22 - n32 * n23,\n\t\t\tt12 = n32 * n13 - n33 * n12,\n\t\t\tt13 = n23 * n12 - n22 * n13,\n\n\t\t\tdet = n11 * t11 + n21 * t12 + n31 * t13;\n\n\t\tif ( det === 0 ) {\n\n\t\t\tvar msg = \"THREE.Matrix3: .getInverse() can't invert matrix, determinant is 0\";\n\n\t\t\tif ( throwOnDegenerate === true ) {\n\n\t\t\t\tthrow new Error( msg );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( msg );\n\n\t\t\t}\n\n\t\t\treturn this.identity();\n\n\t\t}\n\n\t\tvar detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n31 * n23 - n33 * n21 ) * detInv;\n\t\tte[ 2 ] = ( n32 * n21 - n31 * n22 ) * detInv;\n\n\t\tte[ 3 ] = t12 * detInv;\n\t\tte[ 4 ] = ( n33 * n11 - n31 * n13 ) * detInv;\n\t\tte[ 5 ] = ( n31 * n12 - n32 * n11 ) * detInv;\n\n\t\tte[ 6 ] = t13 * detInv;\n\t\tte[ 7 ] = ( n21 * n13 - n23 * n11 ) * detInv;\n\t\tte[ 8 ] = ( n22 * n11 - n21 * n12 ) * detInv;\n\n\t\treturn this;\n\n\t},\n\n\ttranspose: function () {\n\n\t\tvar tmp, m = this.elements;\n\n\t\ttmp = m[ 1 ]; m[ 1 ] = m[ 3 ]; m[ 3 ] = tmp;\n\t\ttmp = m[ 2 ]; m[ 2 ] = m[ 6 ]; m[ 6 ] = tmp;\n\t\ttmp = m[ 5 ]; m[ 5 ] = m[ 7 ]; m[ 7 ] = tmp;\n\n\t\treturn this;\n\n\t},\n\n\tgetNormalMatrix: function ( matrix4 ) {\n\n\t\treturn this.setFromMatrix4( matrix4 ).getInverse( this ).transpose();\n\n\t},\n\n\ttransposeIntoArray: function ( r ) {\n\n\t\tvar m = this.elements;\n\n\t\tr[ 0 ] = m[ 0 ];\n\t\tr[ 1 ] = m[ 3 ];\n\t\tr[ 2 ] = m[ 6 ];\n\t\tr[ 3 ] = m[ 1 ];\n\t\tr[ 4 ] = m[ 4 ];\n\t\tr[ 5 ] = m[ 7 ];\n\t\tr[ 6 ] = m[ 2 ];\n\t\tr[ 7 ] = m[ 5 ];\n\t\tr[ 8 ] = m[ 8 ];\n\n\t\treturn this;\n\n\t},\n\n\tsetUvTransform: function ( tx, ty, sx, sy, rotation, cx, cy ) {\n\n\t\tvar c = Math.cos( rotation );\n\t\tvar s = Math.sin( rotation );\n\n\t\tthis.set(\n\t\t\tsx * c, sx * s, - sx * ( c * cx + s * cy ) + cx + tx,\n\t\t\t- sy * s, sy * c, - sy * ( - s * cx + c * cy ) + cy + ty,\n\t\t\t0, 0, 1\n\t\t);\n\n\t},\n\n\tscale: function ( sx, sy ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] *= sx; te[ 3 ] *= sx; te[ 6 ] *= sx;\n\t\tte[ 1 ] *= sy; te[ 4 ] *= sy; te[ 7 ] *= sy;\n\n\t\treturn this;\n\n\t},\n\n\trotate: function ( theta ) {\n\n\t\tvar c = Math.cos( theta );\n\t\tvar s = Math.sin( theta );\n\n\t\tvar te = this.elements;\n\n\t\tvar a11 = te[ 0 ], a12 = te[ 3 ], a13 = te[ 6 ];\n\t\tvar a21 = te[ 1 ], a22 = te[ 4 ], a23 = te[ 7 ];\n\n\t\tte[ 0 ] = c * a11 + s * a21;\n\t\tte[ 3 ] = c * a12 + s * a22;\n\t\tte[ 6 ] = c * a13 + s * a23;\n\n\t\tte[ 1 ] = - s * a11 + c * a21;\n\t\tte[ 4 ] = - s * a12 + c * a22;\n\t\tte[ 7 ] = - s * a13 + c * a23;\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( tx, ty ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] += tx * te[ 2 ]; te[ 3 ] += tx * te[ 5 ]; te[ 6 ] += tx * te[ 8 ];\n\t\tte[ 1 ] += ty * te[ 2 ]; te[ 4 ] += ty * te[ 5 ]; te[ 7 ] += ty * te[ 8 ];\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( matrix ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = matrix.elements;\n\n\t\tfor ( var i = 0; i < 9; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tfor ( var i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tvar te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\n\t\treturn array;\n\n\t}\n\n} );\n\n\nexport { Matrix3 };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction arrayMin( array ) {\n\n\tif ( array.length === 0 ) return Infinity;\n\n\tvar min = array[ 0 ];\n\n\tfor ( var i = 1, l = array.length; i < l; ++ i ) {\n\n\t\tif ( array[ i ] < min ) min = array[ i ];\n\n\t}\n\n\treturn min;\n\n}\n\nfunction arrayMax( array ) {\n\n\tif ( array.length === 0 ) return - Infinity;\n\n\tvar max = array[ 0 ];\n\n\tfor ( var i = 1, l = array.length; i < l; ++ i ) {\n\n\t\tif ( array[ i ] > max ) max = array[ i ];\n\n\t}\n\n\treturn max;\n\n}\n\nexport { arrayMin, arrayMax };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { Cache } from './Cache.js';\nimport { Loader } from './Loader.js';\n\nfunction ImageLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nImageLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: ImageLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\turl = this.manager.resolveURL( url );\n\n\t\tvar scope = this;\n\n\t\tvar cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tsetTimeout( function () {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\tvar image = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'img' );\n\n\t\tfunction onImageLoad() {\n\n\t\t\timage.removeEventListener( 'load', onImageLoad, false );\n\t\t\timage.removeEventListener( 'error', onImageError, false );\n\n\t\t\tCache.add( url, this );\n\n\t\t\tif ( onLoad ) onLoad( this );\n\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t}\n\n\t\tfunction onImageError( event ) {\n\n\t\t\timage.removeEventListener( 'load', onImageLoad, false );\n\t\t\timage.removeEventListener( 'error', onImageError, false );\n\n\t\t\tif ( onError ) onError( event );\n\n\t\t\tscope.manager.itemError( url );\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t}\n\n\t\timage.addEventListener( 'load', onImageLoad, false );\n\t\timage.addEventListener( 'error', onImageError, false );\n\n\t\tif ( url.substr( 0, 5 ) !== 'data:' ) {\n\n\t\t\tif ( this.crossOrigin !== undefined ) image.crossOrigin = this.crossOrigin;\n\n\t\t}\n\n\t\tscope.manager.itemStart( url );\n\n\t\timage.src = url;\n\n\t\treturn image;\n\n\t}\n\n} );\n\n\nexport { ImageLoader };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction LoadingManager( onLoad, onProgress, onError ) {\n\n\tvar scope = this;\n\n\tvar isLoading = false;\n\tvar itemsLoaded = 0;\n\tvar itemsTotal = 0;\n\tvar urlModifier = undefined;\n\tvar handlers = [];\n\n\t// Refer to #5689 for the reason why we don't set .onStart\n\t// in the constructor\n\n\tthis.onStart = undefined;\n\tthis.onLoad = onLoad;\n\tthis.onProgress = onProgress;\n\tthis.onError = onError;\n\n\tthis.itemStart = function ( url ) {\n\n\t\titemsTotal ++;\n\n\t\tif ( isLoading === false ) {\n\n\t\t\tif ( scope.onStart !== undefined ) {\n\n\t\t\t\tscope.onStart( url, itemsLoaded, itemsTotal );\n\n\t\t\t}\n\n\t\t}\n\n\t\tisLoading = true;\n\n\t};\n\n\tthis.itemEnd = function ( url ) {\n\n\t\titemsLoaded ++;\n\n\t\tif ( scope.onProgress !== undefined ) {\n\n\t\t\tscope.onProgress( url, itemsLoaded, itemsTotal );\n\n\t\t}\n\n\t\tif ( itemsLoaded === itemsTotal ) {\n\n\t\t\tisLoading = false;\n\n\t\t\tif ( scope.onLoad !== undefined ) {\n\n\t\t\t\tscope.onLoad();\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.itemError = function ( url ) {\n\n\t\tif ( scope.onError !== undefined ) {\n\n\t\t\tscope.onError( url );\n\n\t\t}\n\n\t};\n\n\tthis.resolveURL = function ( url ) {\n\n\t\tif ( urlModifier ) {\n\n\t\t\treturn urlModifier( url );\n\n\t\t}\n\n\t\treturn url;\n\n\t};\n\n\tthis.setURLModifier = function ( transform ) {\n\n\t\turlModifier = transform;\n\n\t\treturn this;\n\n\t};\n\n\tthis.addHandler = function ( regex, loader ) {\n\n\t\thandlers.push( regex, loader );\n\n\t\treturn this;\n\n\t};\n\n\tthis.removeHandler = function ( regex ) {\n\n\t\tvar index = handlers.indexOf( regex );\n\n\t\tif ( index !== - 1 ) {\n\n\t\t\thandlers.splice( index, 2 );\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tthis.getHandler = function ( file ) {\n\n\t\tfor ( var i = 0, l = handlers.length; i < l; i += 2 ) {\n\n\t\t\tvar regex = handlers[ i ];\n\t\t\tvar loader = handlers[ i + 1 ];\n\n\t\t\tif ( regex.global ) regex.lastIndex = 0; // see #17920\n\n\t\t\tif ( regex.test( file ) ) {\n\n\t\t\t\treturn loader;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t};\n\n}\n\nvar DefaultLoadingManager = new LoadingManager();\n\n\nexport { DefaultLoadingManager, LoadingManager };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { Texture } from './Texture.js';\nimport { CubeReflectionMapping, RGBFormat } from '../constants.js';\n\nfunction CubeTexture( images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\n\n\timages = images !== undefined ? images : [];\n\tmapping = mapping !== undefined ? mapping : CubeReflectionMapping;\n\tformat = format !== undefined ? format : RGBFormat;\n\n\tTexture.call( this, images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\tthis.flipY = false;\n\n}\n\nCubeTexture.prototype = Object.create( Texture.prototype );\nCubeTexture.prototype.constructor = CubeTexture;\n\nCubeTexture.prototype.isCubeTexture = true;\n\nObject.defineProperty( CubeTexture.prototype, 'images', {\n\n\tget: function () {\n\n\t\treturn this.image;\n\n\t},\n\n\tset: function ( value ) {\n\n\t\tthis.image = value;\n\n\t}\n\n} );\n\n\nexport { CubeTexture };\n","/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction Clock( autoStart ) {\n\n\tthis.autoStart = ( autoStart !== undefined ) ? autoStart : true;\n\n\tthis.startTime = 0;\n\tthis.oldTime = 0;\n\tthis.elapsedTime = 0;\n\n\tthis.running = false;\n\n}\n\nObject.assign( Clock.prototype, {\n\n\tstart: function () {\n\n\t\tthis.startTime = ( typeof performance === 'undefined' ? Date : performance ).now(); // see #10732\n\n\t\tthis.oldTime = this.startTime;\n\t\tthis.elapsedTime = 0;\n\t\tthis.running = true;\n\n\t},\n\n\tstop: function () {\n\n\t\tthis.getElapsedTime();\n\t\tthis.running = false;\n\t\tthis.autoStart = false;\n\n\t},\n\n\tgetElapsedTime: function () {\n\n\t\tthis.getDelta();\n\t\treturn this.elapsedTime;\n\n\t},\n\n\tgetDelta: function () {\n\n\t\tvar diff = 0;\n\n\t\tif ( this.autoStart && ! this.running ) {\n\n\t\t\tthis.start();\n\t\t\treturn 0;\n\n\t\t}\n\n\t\tif ( this.running ) {\n\n\t\t\tvar newTime = ( typeof performance === 'undefined' ? Date : performance ).now();\n\n\t\t\tdiff = ( newTime - this.oldTime ) / 1000;\n\t\t\tthis.oldTime = newTime;\n\n\t\t\tthis.elapsedTime += diff;\n\n\t\t}\n\n\t\treturn diff;\n\n\t}\n\n} );\n\n\nexport { Clock };\n","import { Interpolant } from '../Interpolant.js';\n\n/**\n * @author tschw\n */\n\nfunction LinearInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n}\n\nLinearInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\n\n\tconstructor: LinearInterpolant,\n\n\tinterpolate_: function ( i1, t0, t, t1 ) {\n\n\t\tvar result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\toffset1 = i1 * stride,\n\t\t\toffset0 = offset1 - stride,\n\n\t\t\tweight1 = ( t - t0 ) / ( t1 - t0 ),\n\t\t\tweight0 = 1 - weight1;\n\n\t\tfor ( var i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] =\n\t\t\t\t\tvalues[ offset0 + i ] * weight0 +\n\t\t\t\t\tvalues[ offset1 + i ] * weight1;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n} );\n\n\nexport { LinearInterpolant };\n","/**\n *\n * A reference to a real property in the scene graph.\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\n// Characters [].:/ are reserved for track binding syntax.\nvar _RESERVED_CHARS_RE = '\\\\[\\\\]\\\\.:\\\\/';\nvar _reservedRe = new RegExp( '[' + _RESERVED_CHARS_RE + ']', 'g' );\n\n// Attempts to allow node names from any language. ES5's `\\w` regexp matches\n// only latin characters, and the unicode \\p{L} is not yet supported. So\n// instead, we exclude reserved characters and match everything else.\nvar _wordChar = '[^' + _RESERVED_CHARS_RE + ']';\nvar _wordCharOrDot = '[^' + _RESERVED_CHARS_RE.replace( '\\\\.', '' ) + ']';\n\n// Parent directories, delimited by '/' or ':'. Currently unused, but must\n// be matched to parse the rest of the track name.\nvar _directoryRe = /((?:WC+[\\/:])*)/.source.replace( 'WC', _wordChar );\n\n// Target node. May contain word characters (a-zA-Z0-9_) and '.' or '-'.\nvar _nodeRe = /(WCOD+)?/.source.replace( 'WCOD', _wordCharOrDot );\n\n// Object on target node, and accessor. May not contain reserved\n// characters. Accessor may contain any character except closing bracket.\nvar _objectRe = /(?:\\.(WC+)(?:\\[(.+)\\])?)?/.source.replace( 'WC', _wordChar );\n\n// Property and accessor. May not contain reserved characters. Accessor may\n// contain any non-bracket characters.\nvar _propertyRe = /\\.(WC+)(?:\\[(.+)\\])?/.source.replace( 'WC', _wordChar );\n\nvar _trackRe = new RegExp( ''\n\t+ '^'\n\t+ _directoryRe\n\t+ _nodeRe\n\t+ _objectRe\n\t+ _propertyRe\n\t+ '$'\n);\n\nvar _supportedObjectNames = [ 'material', 'materials', 'bones' ];\n\nfunction Composite( targetGroup, path, optionalParsedPath ) {\n\n\tvar parsedPath = optionalParsedPath || PropertyBinding.parseTrackName( path );\n\n\tthis._targetGroup = targetGroup;\n\tthis._bindings = targetGroup.subscribe_( path, parsedPath );\n\n}\n\nObject.assign( Composite.prototype, {\n\n\tgetValue: function ( array, offset ) {\n\n\t\tthis.bind(); // bind all binding\n\n\t\tvar firstValidIndex = this._targetGroup.nCachedObjects_,\n\t\t\tbinding = this._bindings[ firstValidIndex ];\n\n\t\t// and only call .getValue on the first\n\t\tif ( binding !== undefined ) binding.getValue( array, offset );\n\n\t},\n\n\tsetValue: function ( array, offset ) {\n\n\t\tvar bindings = this._bindings;\n\n\t\tfor ( var i = this._targetGroup.nCachedObjects_, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tbindings[ i ].setValue( array, offset );\n\n\t\t}\n\n\t},\n\n\tbind: function () {\n\n\t\tvar bindings = this._bindings;\n\n\t\tfor ( var i = this._targetGroup.nCachedObjects_, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tbindings[ i ].bind();\n\n\t\t}\n\n\t},\n\n\tunbind: function () {\n\n\t\tvar bindings = this._bindings;\n\n\t\tfor ( var i = this._targetGroup.nCachedObjects_, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tbindings[ i ].unbind();\n\n\t\t}\n\n\t}\n\n} );\n\n\nfunction PropertyBinding( rootNode, path, parsedPath ) {\n\n\tthis.path = path;\n\tthis.parsedPath = parsedPath || PropertyBinding.parseTrackName( path );\n\n\tthis.node = PropertyBinding.findNode( rootNode, this.parsedPath.nodeName ) || rootNode;\n\n\tthis.rootNode = rootNode;\n\n}\n\nObject.assign( PropertyBinding, {\n\n\tComposite: Composite,\n\n\tcreate: function ( root, path, parsedPath ) {\n\n\t\tif ( ! ( root && root.isAnimationObjectGroup ) ) {\n\n\t\t\treturn new PropertyBinding( root, path, parsedPath );\n\n\t\t} else {\n\n\t\t\treturn new PropertyBinding.Composite( root, path, parsedPath );\n\n\t\t}\n\n\t},\n\n\t/**\n\t * Replaces spaces with underscores and removes unsupported characters from\n\t * node names, to ensure compatibility with parseTrackName().\n\t *\n\t * @param {string} name Node name to be sanitized.\n\t * @return {string}\n\t */\n\tsanitizeNodeName: function ( name ) {\n\n\t\treturn name.replace( /\\s/g, '_' ).replace( _reservedRe, '' );\n\n\t},\n\n\tparseTrackName: function ( trackName ) {\n\n\t\tvar matches = _trackRe.exec( trackName );\n\n\t\tif ( ! matches ) {\n\n\t\t\tthrow new Error( 'PropertyBinding: Cannot parse trackName: ' + trackName );\n\n\t\t}\n\n\t\tvar results = {\n\t\t\t// directoryName: matches[ 1 ], // (tschw) currently unused\n\t\t\tnodeName: matches[ 2 ],\n\t\t\tobjectName: matches[ 3 ],\n\t\t\tobjectIndex: matches[ 4 ],\n\t\t\tpropertyName: matches[ 5 ], // required\n\t\t\tpropertyIndex: matches[ 6 ]\n\t\t};\n\n\t\tvar lastDot = results.nodeName && results.nodeName.lastIndexOf( '.' );\n\n\t\tif ( lastDot !== undefined && lastDot !== - 1 ) {\n\n\t\t\tvar objectName = results.nodeName.substring( lastDot + 1 );\n\n\t\t\t// Object names must be checked against a whitelist. Otherwise, there\n\t\t\t// is no way to parse 'foo.bar.baz': 'baz' must be a property, but\n\t\t\t// 'bar' could be the objectName, or part of a nodeName (which can\n\t\t\t// include '.' characters).\n\t\t\tif ( _supportedObjectNames.indexOf( objectName ) !== - 1 ) {\n\n\t\t\t\tresults.nodeName = results.nodeName.substring( 0, lastDot );\n\t\t\t\tresults.objectName = objectName;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( results.propertyName === null || results.propertyName.length === 0 ) {\n\n\t\t\tthrow new Error( 'PropertyBinding: can not parse propertyName from trackName: ' + trackName );\n\n\t\t}\n\n\t\treturn results;\n\n\t},\n\n\tfindNode: function ( root, nodeName ) {\n\n\t\tif ( ! nodeName || nodeName === \"\" || nodeName === \"root\" || nodeName === \".\" || nodeName === - 1 || nodeName === root.name || nodeName === root.uuid ) {\n\n\t\t\treturn root;\n\n\t\t}\n\n\t\t// search into skeleton bones.\n\t\tif ( root.skeleton ) {\n\n\t\t\tvar bone = root.skeleton.getBoneByName( nodeName );\n\n\t\t\tif ( bone !== undefined ) {\n\n\t\t\t\treturn bone;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// search into node subtree.\n\t\tif ( root.children ) {\n\n\t\t\tvar searchNodeSubtree = function ( children ) {\n\n\t\t\t\tfor ( var i = 0; i < children.length; i ++ ) {\n\n\t\t\t\t\tvar childNode = children[ i ];\n\n\t\t\t\t\tif ( childNode.name === nodeName || childNode.uuid === nodeName ) {\n\n\t\t\t\t\t\treturn childNode;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar result = searchNodeSubtree( childNode.children );\n\n\t\t\t\t\tif ( result ) return result;\n\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\n\t\t\t};\n\n\t\t\tvar subTreeNode = searchNodeSubtree( root.children );\n\n\t\t\tif ( subTreeNode ) {\n\n\t\t\t\treturn subTreeNode;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n} );\n\nObject.assign( PropertyBinding.prototype, { // prototype, continued\n\n\t// these are used to \"bind\" a nonexistent property\n\t_getValue_unavailable: function () {},\n\t_setValue_unavailable: function () {},\n\n\tBindingType: {\n\t\tDirect: 0,\n\t\tEntireArray: 1,\n\t\tArrayElement: 2,\n\t\tHasFromToArray: 3\n\t},\n\n\tVersioning: {\n\t\tNone: 0,\n\t\tNeedsUpdate: 1,\n\t\tMatrixWorldNeedsUpdate: 2\n\t},\n\n\tGetterByBindingType: [\n\n\t\tfunction getValue_direct( buffer, offset ) {\n\n\t\t\tbuffer[ offset ] = this.node[ this.propertyName ];\n\n\t\t},\n\n\t\tfunction getValue_array( buffer, offset ) {\n\n\t\t\tvar source = this.resolvedProperty;\n\n\t\t\tfor ( var i = 0, n = source.length; i !== n; ++ i ) {\n\n\t\t\t\tbuffer[ offset ++ ] = source[ i ];\n\n\t\t\t}\n\n\t\t},\n\n\t\tfunction getValue_arrayElement( buffer, offset ) {\n\n\t\t\tbuffer[ offset ] = this.resolvedProperty[ this.propertyIndex ];\n\n\t\t},\n\n\t\tfunction getValue_toArray( buffer, offset ) {\n\n\t\t\tthis.resolvedProperty.toArray( buffer, offset );\n\n\t\t}\n\n\t],\n\n\tSetterByBindingTypeAndVersioning: [\n\n\t\t[\n\t\t\t// Direct\n\n\t\t\tfunction setValue_direct( buffer, offset ) {\n\n\t\t\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\n\n\t\t\t},\n\n\t\t\tfunction setValue_direct_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\n\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t},\n\n\t\t\tfunction setValue_direct_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t], [\n\n\t\t\t// EntireArray\n\n\t\t\tfunction setValue_array( buffer, offset ) {\n\n\t\t\t\tvar dest = this.resolvedProperty;\n\n\t\t\t\tfor ( var i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tfunction setValue_array_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tvar dest = this.resolvedProperty;\n\n\t\t\t\tfor ( var i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t\t\t}\n\n\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t},\n\n\t\t\tfunction setValue_array_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tvar dest = this.resolvedProperty;\n\n\t\t\t\tfor ( var i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t\t\t}\n\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t], [\n\n\t\t\t// ArrayElement\n\n\t\t\tfunction setValue_arrayElement( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\n\t\t\t},\n\n\t\t\tfunction setValue_arrayElement_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t},\n\n\t\t\tfunction setValue_arrayElement_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t], [\n\n\t\t\t// HasToFromArray\n\n\t\t\tfunction setValue_fromArray( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\n\t\t\t},\n\n\t\t\tfunction setValue_fromArray_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t},\n\n\t\t\tfunction setValue_fromArray_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t]\n\n\t],\n\n\tgetValue: function getValue_unbound( targetArray, offset ) {\n\n\t\tthis.bind();\n\t\tthis.getValue( targetArray, offset );\n\n\t\t// Note: This class uses a State pattern on a per-method basis:\n\t\t// 'bind' sets 'this.getValue' / 'setValue' and shadows the\n\t\t// prototype version of these methods with one that represents\n\t\t// the bound state. When the property is not found, the methods\n\t\t// become no-ops.\n\n\t},\n\n\tsetValue: function getValue_unbound( sourceArray, offset ) {\n\n\t\tthis.bind();\n\t\tthis.setValue( sourceArray, offset );\n\n\t},\n\n\t// create getter / setter pair for a property in the scene graph\n\tbind: function () {\n\n\t\tvar targetObject = this.node,\n\t\t\tparsedPath = this.parsedPath,\n\n\t\t\tobjectName = parsedPath.objectName,\n\t\t\tpropertyName = parsedPath.propertyName,\n\t\t\tpropertyIndex = parsedPath.propertyIndex;\n\n\t\tif ( ! targetObject ) {\n\n\t\t\ttargetObject = PropertyBinding.findNode( this.rootNode, parsedPath.nodeName ) || this.rootNode;\n\n\t\t\tthis.node = targetObject;\n\n\t\t}\n\n\t\t// set fail state so we can just 'return' on error\n\t\tthis.getValue = this._getValue_unavailable;\n\t\tthis.setValue = this._setValue_unavailable;\n\n\t\t// ensure there is a value node\n\t\tif ( ! targetObject ) {\n\n\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to update node for track: ' + this.path + ' but it wasn\\'t found.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( objectName ) {\n\n\t\t\tvar objectIndex = parsedPath.objectIndex;\n\n\t\t\t// special cases were we need to reach deeper into the hierarchy to get the face materials....\n\t\t\tswitch ( objectName ) {\n\n\t\t\t\tcase 'materials':\n\n\t\t\t\t\tif ( ! targetObject.material ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to material as node does not have a material.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! targetObject.material.materials ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttargetObject = targetObject.material.materials;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bones':\n\n\t\t\t\t\tif ( ! targetObject.skeleton ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// potential future optimization: skip this if propertyIndex is already an integer\n\t\t\t\t\t// and convert the integer string to a true integer.\n\n\t\t\t\t\ttargetObject = targetObject.skeleton.bones;\n\n\t\t\t\t\t// support resolving morphTarget names into indices.\n\t\t\t\t\tfor ( var i = 0; i < targetObject.length; i ++ ) {\n\n\t\t\t\t\t\tif ( targetObject[ i ].name === objectIndex ) {\n\n\t\t\t\t\t\t\tobjectIndex = i;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tif ( targetObject[ objectName ] === undefined ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to objectName of node undefined.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttargetObject = targetObject[ objectName ];\n\n\t\t\t}\n\n\n\t\t\tif ( objectIndex !== undefined ) {\n\n\t\t\t\tif ( targetObject[ objectIndex ] === undefined ) {\n\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.', this, targetObject );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\ttargetObject = targetObject[ objectIndex ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// resolve property\n\t\tvar nodeProperty = targetObject[ propertyName ];\n\n\t\tif ( nodeProperty === undefined ) {\n\n\t\t\tvar nodeName = parsedPath.nodeName;\n\n\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to update property for track: ' + nodeName +\n\t\t\t\t'.' + propertyName + ' but it wasn\\'t found.', targetObject );\n\t\t\treturn;\n\n\t\t}\n\n\t\t// determine versioning scheme\n\t\tvar versioning = this.Versioning.None;\n\n\t\tthis.targetObject = targetObject;\n\n\t\tif ( targetObject.needsUpdate !== undefined ) { // material\n\n\t\t\tversioning = this.Versioning.NeedsUpdate;\n\n\t\t} else if ( targetObject.matrixWorldNeedsUpdate !== undefined ) { // node transform\n\n\t\t\tversioning = this.Versioning.MatrixWorldNeedsUpdate;\n\n\t\t}\n\n\t\t// determine how the property gets bound\n\t\tvar bindingType = this.BindingType.Direct;\n\n\t\tif ( propertyIndex !== undefined ) {\n\n\t\t\t// access a sub element of the property array (only primitives are supported right now)\n\n\t\t\tif ( propertyName === \"morphTargetInfluences\" ) {\n\n\t\t\t\t// potential optimization, skip this if propertyIndex is already an integer, and convert the integer string to a true integer.\n\n\t\t\t\t// support resolving morphTarget names into indices.\n\t\t\t\tif ( ! targetObject.geometry ) {\n\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.', this );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( targetObject.geometry.isBufferGeometry ) {\n\n\t\t\t\t\tif ( ! targetObject.geometry.morphAttributes ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( var i = 0; i < this.node.geometry.morphAttributes.position.length; i ++ ) {\n\n\t\t\t\t\t\tif ( targetObject.geometry.morphAttributes.position[ i ].name === propertyIndex ) {\n\n\t\t\t\t\t\t\tpropertyIndex = i;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( ! targetObject.geometry.morphTargets ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( var i = 0; i < this.node.geometry.morphTargets.length; i ++ ) {\n\n\t\t\t\t\t\tif ( targetObject.geometry.morphTargets[ i ].name === propertyIndex ) {\n\n\t\t\t\t\t\t\tpropertyIndex = i;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tbindingType = this.BindingType.ArrayElement;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\t\t\tthis.propertyIndex = propertyIndex;\n\n\t\t} else if ( nodeProperty.fromArray !== undefined && nodeProperty.toArray !== undefined ) {\n\n\t\t\t// must use copy for Object3D.Euler/Quaternion\n\n\t\t\tbindingType = this.BindingType.HasFromToArray;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\n\t\t} else if ( Array.isArray( nodeProperty ) ) {\n\n\t\t\tbindingType = this.BindingType.EntireArray;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\n\t\t} else {\n\n\t\t\tthis.propertyName = propertyName;\n\n\t\t}\n\n\t\t// select getter / setter\n\t\tthis.getValue = this.GetterByBindingType[ bindingType ];\n\t\tthis.setValue = this.SetterByBindingTypeAndVersioning[ bindingType ][ versioning ];\n\n\t},\n\n\tunbind: function () {\n\n\t\tthis.node = null;\n\n\t\t// back to the prototype version of getValue / setValue\n\t\t// note: avoiding to mutate the shape of 'this' via 'delete'\n\t\tthis.getValue = this._getValue_unbound;\n\t\tthis.setValue = this._setValue_unbound;\n\n\t}\n\n} );\n\n//!\\ DECLARE ALIAS AFTER assign prototype !\nObject.assign( PropertyBinding.prototype, {\n\n\t// initial state of these methods that calls 'bind'\n\t_getValue_unbound: PropertyBinding.prototype.getValue,\n\t_setValue_unbound: PropertyBinding.prototype.setValue,\n\n} );\n\nexport { PropertyBinding };\n","import { Line } from './Line.js';\n\n/**\n * @author mgreter / http://github.com/mgreter\n */\n\nfunction LineLoop( geometry, material ) {\n\n\tLine.call( this, geometry, material );\n\n\tthis.type = 'LineLoop';\n\n}\n\nLineLoop.prototype = Object.assign( Object.create( Line.prototype ), {\n\n\tconstructor: LineLoop,\n\n\tisLineLoop: true,\n\n} );\n\n\nexport { LineLoop };\n","import { Object3D } from '../core/Object3D.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Group() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Group';\n\n}\n\nGroup.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Group,\n\n\tisGroup: true\n\n} );\n\n\nexport { Group };\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author philogb / http://blog.thejit.org/\n * @author egraether / http://egraether.com/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n */\n\nfunction Vector2( x, y ) {\n\n\tthis.x = x || 0;\n\tthis.y = y || 0;\n\n}\n\nObject.defineProperties( Vector2.prototype, {\n\n\t\"width\": {\n\n\t\tget: function () {\n\n\t\t\treturn this.x;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis.x = value;\n\n\t\t}\n\n\t},\n\n\t\"height\": {\n\n\t\tget: function () {\n\n\t\t\treturn this.y;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis.y = value;\n\n\t\t}\n\n\t}\n\n} );\n\nObject.assign( Vector2.prototype, {\n\n\tisVector2: true,\n\n\tset: function ( x, y ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponent: function ( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetComponent: function ( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.x, this.y );\n\n\t},\n\n\tcopy: function ( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\n\t\treturn this;\n\n\t},\n\n\taddVectors: function ( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\n\t\treturn this;\n\n\t},\n\n\taddScaledVector: function ( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\n\t\treturn this;\n\n\t},\n\n\tsubScalar: function ( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\n\t\treturn this;\n\n\t},\n\n\tsubVectors: function ( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( v ) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\n\t\treturn this;\n\n\t},\n\n\tdivide: function ( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\n\t\treturn this;\n\n\t},\n\n\tdivideScalar: function ( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t},\n\n\tapplyMatrix3: function ( m ) {\n\n\t\tvar x = this.x, y = this.y;\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ];\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ];\n\n\t\treturn this;\n\n\t},\n\n\tmin: function ( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\n\t\treturn this;\n\n\t},\n\n\tmax: function ( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\n\t\treturn this;\n\n\t},\n\n\tclamp: function ( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampScalar: function ( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampLength: function ( min, max ) {\n\n\t\tvar length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t},\n\n\tfloor: function () {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\n\t\treturn this;\n\n\t},\n\n\tceil: function () {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\n\t\treturn this;\n\n\t},\n\n\tround: function () {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\n\t\treturn this;\n\n\t},\n\n\troundToZero: function () {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y;\n\n\t},\n\n\tcross: function ( v ) {\n\n\t\treturn this.x * v.y - this.y * v.x;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this.x * this.x + this.y * this.y;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y );\n\n\t},\n\n\tmanhattanLength: function () {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y );\n\n\t},\n\n\tnormalize: function () {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t},\n\n\tangle: function () {\n\n\t\t// computes the angle in radians with respect to the positive x-axis\n\n\t\tvar angle = Math.atan2( this.y, this.x );\n\n\t\tif ( angle < 0 ) angle += 2 * Math.PI;\n\n\t\treturn angle;\n\n\t},\n\n\tdistanceTo: function ( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t},\n\n\tdistanceToSquared: function ( v ) {\n\n\t\tvar dx = this.x - v.x, dy = this.y - v.y;\n\t\treturn dx * dx + dy * dy;\n\n\t},\n\n\tmanhattanDistanceTo: function ( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y );\n\n\t},\n\n\tsetLength: function ( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t},\n\n\tlerp: function ( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tlerpVectors: function ( v1, v2, alpha ) {\n\n\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\n\n\t},\n\n\tequals: function ( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\n\t\treturn array;\n\n\t},\n\n\tfromBufferAttribute: function ( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\n\t\treturn this;\n\n\t},\n\n\trotateAround: function ( center, angle ) {\n\n\t\tvar c = Math.cos( angle ), s = Math.sin( angle );\n\n\t\tvar x = this.x - center.x;\n\t\tvar y = this.y - center.y;\n\n\t\tthis.x = x * c - y * s + center.x;\n\t\tthis.y = x * s + y * c + center.y;\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Vector2 };\n","import { Material } from './Material.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  linewidth: <float>,\n *  linecap: \"round\",\n *  linejoin: \"round\"\n * }\n */\n\nfunction LineBasicMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'LineBasicMaterial';\n\n\tthis.color = new Color( 0xffffff );\n\n\tthis.linewidth = 1;\n\tthis.linecap = 'round';\n\tthis.linejoin = 'round';\n\n\tthis.setValues( parameters );\n\n}\n\nLineBasicMaterial.prototype = Object.create( Material.prototype );\nLineBasicMaterial.prototype.constructor = LineBasicMaterial;\n\nLineBasicMaterial.prototype.isLineBasicMaterial = true;\n\nLineBasicMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.linewidth = source.linewidth;\n\tthis.linecap = source.linecap;\n\tthis.linejoin = source.linejoin;\n\n\treturn this;\n\n};\n\n\nexport { LineBasicMaterial };\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author szimek / https://github.com/szimek/\n */\n\nvar _canvas;\n\nvar ImageUtils = {\n\n\tgetDataURL: function ( image ) {\n\n\t\tvar canvas;\n\n\t\tif ( typeof HTMLCanvasElement == 'undefined' ) {\n\n\t\t\treturn image.src;\n\n\t\t} else if ( image instanceof HTMLCanvasElement ) {\n\n\t\t\tcanvas = image;\n\n\t\t} else {\n\n\t\t\tif ( _canvas === undefined ) _canvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\n\t\t\t_canvas.width = image.width;\n\t\t\t_canvas.height = image.height;\n\n\t\t\tvar context = _canvas.getContext( '2d' );\n\n\t\t\tif ( image instanceof ImageData ) {\n\n\t\t\t\tcontext.putImageData( image, 0, 0 );\n\n\t\t\t} else {\n\n\t\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height );\n\n\t\t\t}\n\n\t\t\tcanvas = _canvas;\n\n\t\t}\n\n\t\tif ( canvas.width > 2048 || canvas.height > 2048 ) {\n\n\t\t\treturn canvas.toDataURL( 'image/jpeg', 0.6 );\n\n\t\t} else {\n\n\t\t\treturn canvas.toDataURL( 'image/png' );\n\n\t\t}\n\n\t}\n\n};\n\nexport { ImageUtils };\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author szimek / https://github.com/szimek/\n */\n\nimport { EventDispatcher } from '../core/EventDispatcher.js';\nimport {\n\tMirroredRepeatWrapping,\n\tClampToEdgeWrapping,\n\tRepeatWrapping,\n\tLinearEncoding,\n\tUnsignedByteType,\n\tRGBAFormat,\n\tLinearMipmapLinearFilter,\n\tLinearFilter,\n\tUVMapping\n} from '../constants.js';\nimport { _Math } from '../math/Math.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Matrix3 } from '../math/Matrix3.js';\nimport { ImageUtils } from '../extras/ImageUtils.js';\n\nvar textureId = 0;\n\nfunction Texture( image, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\n\n\tObject.defineProperty( this, 'id', { value: textureId ++ } );\n\n\tthis.uuid = _Math.generateUUID();\n\n\tthis.name = '';\n\n\tthis.image = image !== undefined ? image : Texture.DEFAULT_IMAGE;\n\tthis.mipmaps = [];\n\n\tthis.mapping = mapping !== undefined ? mapping : Texture.DEFAULT_MAPPING;\n\n\tthis.wrapS = wrapS !== undefined ? wrapS : ClampToEdgeWrapping;\n\tthis.wrapT = wrapT !== undefined ? wrapT : ClampToEdgeWrapping;\n\n\tthis.magFilter = magFilter !== undefined ? magFilter : LinearFilter;\n\tthis.minFilter = minFilter !== undefined ? minFilter : LinearMipmapLinearFilter;\n\n\tthis.anisotropy = anisotropy !== undefined ? anisotropy : 1;\n\n\tthis.format = format !== undefined ? format : RGBAFormat;\n\tthis.internalFormat = null;\n\tthis.type = type !== undefined ? type : UnsignedByteType;\n\n\tthis.offset = new Vector2( 0, 0 );\n\tthis.repeat = new Vector2( 1, 1 );\n\tthis.center = new Vector2( 0, 0 );\n\tthis.rotation = 0;\n\n\tthis.matrixAutoUpdate = true;\n\tthis.matrix = new Matrix3();\n\n\tthis.generateMipmaps = true;\n\tthis.premultiplyAlpha = false;\n\tthis.flipY = true;\n\tthis.unpackAlignment = 4;\t// valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\n\n\t// Values of encoding !== THREE.LinearEncoding only supported on map, envMap and emissiveMap.\n\t//\n\t// Also changing the encoding after already used by a Material will not automatically make the Material\n\t// update. You need to explicitly call Material.needsUpdate to trigger it to recompile.\n\tthis.encoding = encoding !== undefined ? encoding : LinearEncoding;\n\n\tthis.version = 0;\n\tthis.onUpdate = null;\n\n}\n\nTexture.DEFAULT_IMAGE = undefined;\nTexture.DEFAULT_MAPPING = UVMapping;\n\nTexture.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Texture,\n\n\tisTexture: true,\n\n\tupdateMatrix: function () {\n\n\t\tthis.matrix.setUvTransform( this.offset.x, this.offset.y, this.repeat.x, this.repeat.y, this.rotation, this.center.x, this.center.y );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.image = source.image;\n\t\tthis.mipmaps = source.mipmaps.slice( 0 );\n\n\t\tthis.mapping = source.mapping;\n\n\t\tthis.wrapS = source.wrapS;\n\t\tthis.wrapT = source.wrapT;\n\n\t\tthis.magFilter = source.magFilter;\n\t\tthis.minFilter = source.minFilter;\n\n\t\tthis.anisotropy = source.anisotropy;\n\n\t\tthis.format = source.format;\n\t\tthis.internalFormat = source.internalFormat;\n\t\tthis.type = source.type;\n\n\t\tthis.offset.copy( source.offset );\n\t\tthis.repeat.copy( source.repeat );\n\t\tthis.center.copy( source.center );\n\t\tthis.rotation = source.rotation;\n\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\t\tthis.matrix.copy( source.matrix );\n\n\t\tthis.generateMipmaps = source.generateMipmaps;\n\t\tthis.premultiplyAlpha = source.premultiplyAlpha;\n\t\tthis.flipY = source.flipY;\n\t\tthis.unpackAlignment = source.unpackAlignment;\n\t\tthis.encoding = source.encoding;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( ! isRootObject && meta.textures[ this.uuid ] !== undefined ) {\n\n\t\t\treturn meta.textures[ this.uuid ];\n\n\t\t}\n\n\t\tvar output = {\n\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Texture',\n\t\t\t\tgenerator: 'Texture.toJSON'\n\t\t\t},\n\n\t\t\tuuid: this.uuid,\n\t\t\tname: this.name,\n\n\t\t\tmapping: this.mapping,\n\n\t\t\trepeat: [ this.repeat.x, this.repeat.y ],\n\t\t\toffset: [ this.offset.x, this.offset.y ],\n\t\t\tcenter: [ this.center.x, this.center.y ],\n\t\t\trotation: this.rotation,\n\n\t\t\twrap: [ this.wrapS, this.wrapT ],\n\n\t\t\tformat: this.format,\n\t\t\ttype: this.type,\n\t\t\tencoding: this.encoding,\n\n\t\t\tminFilter: this.minFilter,\n\t\t\tmagFilter: this.magFilter,\n\t\t\tanisotropy: this.anisotropy,\n\n\t\t\tflipY: this.flipY,\n\n\t\t\tpremultiplyAlpha: this.premultiplyAlpha,\n\t\t\tunpackAlignment: this.unpackAlignment\n\n\t\t};\n\n\t\tif ( this.image !== undefined ) {\n\n\t\t\t// TODO: Move to THREE.Image\n\n\t\t\tvar image = this.image;\n\n\t\t\tif ( image.uuid === undefined ) {\n\n\t\t\t\timage.uuid = _Math.generateUUID(); // UGH\n\n\t\t\t}\n\n\t\t\tif ( ! isRootObject && meta.images[ image.uuid ] === undefined ) {\n\n\t\t\t\tvar url;\n\n\t\t\t\tif ( Array.isArray( image ) ) {\n\n\t\t\t\t\t// process array of images e.g. CubeTexture\n\n\t\t\t\t\turl = [];\n\n\t\t\t\t\tfor ( var i = 0, l = image.length; i < l; i ++ ) {\n\n\t\t\t\t\t\turl.push( ImageUtils.getDataURL( image[ i ] ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// process single image\n\n\t\t\t\t\turl = ImageUtils.getDataURL( image );\n\n\t\t\t\t}\n\n\t\t\t\tmeta.images[ image.uuid ] = {\n\t\t\t\t\tuuid: image.uuid,\n\t\t\t\t\turl: url\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\toutput.image = image.uuid;\n\n\t\t}\n\n\t\tif ( ! isRootObject ) {\n\n\t\t\tmeta.textures[ this.uuid ] = output;\n\n\t\t}\n\n\t\treturn output;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t},\n\n\ttransformUv: function ( uv ) {\n\n\t\tif ( this.mapping !== UVMapping ) return uv;\n\n\t\tuv.applyMatrix3( this.matrix );\n\n\t\tif ( uv.x < 0 || uv.x > 1 ) {\n\n\t\t\tswitch ( this.wrapS ) {\n\n\t\t\t\tcase RepeatWrapping:\n\n\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ClampToEdgeWrapping:\n\n\t\t\t\t\tuv.x = uv.x < 0 ? 0 : 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MirroredRepeatWrapping:\n\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.x ) % 2 ) === 1 ) {\n\n\t\t\t\t\t\tuv.x = Math.ceil( uv.x ) - uv.x;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\n\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( uv.y < 0 || uv.y > 1 ) {\n\n\t\t\tswitch ( this.wrapT ) {\n\n\t\t\t\tcase RepeatWrapping:\n\n\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ClampToEdgeWrapping:\n\n\t\t\t\t\tuv.y = uv.y < 0 ? 0 : 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MirroredRepeatWrapping:\n\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.y ) % 2 ) === 1 ) {\n\n\t\t\t\t\t\tuv.y = Math.ceil( uv.y ) - uv.y;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\n\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.flipY ) {\n\n\t\t\tuv.y = 1 - uv.y;\n\n\t\t}\n\n\t\treturn uv;\n\n\t}\n\n} );\n\nObject.defineProperty( Texture.prototype, \"needsUpdate\", {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\n\nexport { Texture };\n","/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://clara.io\n */\n\nimport { _Math } from './Math.js';\n\nfunction Quaternion( x, y, z, w ) {\n\n\tthis._x = x || 0;\n\tthis._y = y || 0;\n\tthis._z = z || 0;\n\tthis._w = ( w !== undefined ) ? w : 1;\n\n}\n\nObject.assign( Quaternion, {\n\n\tslerp: function ( qa, qb, qm, t ) {\n\n\t\treturn qm.copy( qa ).slerp( qb, t );\n\n\t},\n\n\tslerpFlat: function ( dst, dstOffset, src0, srcOffset0, src1, srcOffset1, t ) {\n\n\t\t// fuzz-free, array-based Quaternion SLERP operation\n\n\t\tvar x0 = src0[ srcOffset0 + 0 ],\n\t\t\ty0 = src0[ srcOffset0 + 1 ],\n\t\t\tz0 = src0[ srcOffset0 + 2 ],\n\t\t\tw0 = src0[ srcOffset0 + 3 ],\n\n\t\t\tx1 = src1[ srcOffset1 + 0 ],\n\t\t\ty1 = src1[ srcOffset1 + 1 ],\n\t\t\tz1 = src1[ srcOffset1 + 2 ],\n\t\t\tw1 = src1[ srcOffset1 + 3 ];\n\n\t\tif ( w0 !== w1 || x0 !== x1 || y0 !== y1 || z0 !== z1 ) {\n\n\t\t\tvar s = 1 - t,\n\n\t\t\t\tcos = x0 * x1 + y0 * y1 + z0 * z1 + w0 * w1,\n\n\t\t\t\tdir = ( cos >= 0 ? 1 : - 1 ),\n\t\t\t\tsqrSin = 1 - cos * cos;\n\n\t\t\t// Skip the Slerp for tiny steps to avoid numeric problems:\n\t\t\tif ( sqrSin > Number.EPSILON ) {\n\n\t\t\t\tvar sin = Math.sqrt( sqrSin ),\n\t\t\t\t\tlen = Math.atan2( sin, cos * dir );\n\n\t\t\t\ts = Math.sin( s * len ) / sin;\n\t\t\t\tt = Math.sin( t * len ) / sin;\n\n\t\t\t}\n\n\t\t\tvar tDir = t * dir;\n\n\t\t\tx0 = x0 * s + x1 * tDir;\n\t\t\ty0 = y0 * s + y1 * tDir;\n\t\t\tz0 = z0 * s + z1 * tDir;\n\t\t\tw0 = w0 * s + w1 * tDir;\n\n\t\t\t// Normalize in case we just did a lerp:\n\t\t\tif ( s === 1 - t ) {\n\n\t\t\t\tvar f = 1 / Math.sqrt( x0 * x0 + y0 * y0 + z0 * z0 + w0 * w0 );\n\n\t\t\t\tx0 *= f;\n\t\t\t\ty0 *= f;\n\t\t\t\tz0 *= f;\n\t\t\t\tw0 *= f;\n\n\t\t\t}\n\n\t\t}\n\n\t\tdst[ dstOffset ] = x0;\n\t\tdst[ dstOffset + 1 ] = y0;\n\t\tdst[ dstOffset + 2 ] = z0;\n\t\tdst[ dstOffset + 3 ] = w0;\n\n\t}\n\n} );\n\nObject.defineProperties( Quaternion.prototype, {\n\n\tx: {\n\n\t\tget: function () {\n\n\t\t\treturn this._x;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._x = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t},\n\n\ty: {\n\n\t\tget: function () {\n\n\t\t\treturn this._y;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._y = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t},\n\n\tz: {\n\n\t\tget: function () {\n\n\t\t\treturn this._z;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._z = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t},\n\n\tw: {\n\n\t\tget: function () {\n\n\t\t\treturn this._w;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._w = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t}\n\n} );\n\nObject.assign( Quaternion.prototype, {\n\n\tisQuaternion: true,\n\n\tset: function ( x, y, z, w ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._w = w;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._w );\n\n\t},\n\n\tcopy: function ( quaternion ) {\n\n\t\tthis._x = quaternion.x;\n\t\tthis._y = quaternion.y;\n\t\tthis._z = quaternion.z;\n\t\tthis._w = quaternion.w;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromEuler: function ( euler, update ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tthrow new Error( 'THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\tvar x = euler._x, y = euler._y, z = euler._z, order = euler.order;\n\n\t\t// http://www.mathworks.com/matlabcentral/fileexchange/\n\t\t// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\n\t\t//\tcontent/SpinCalc.m\n\n\t\tvar cos = Math.cos;\n\t\tvar sin = Math.sin;\n\n\t\tvar c1 = cos( x / 2 );\n\t\tvar c2 = cos( y / 2 );\n\t\tvar c3 = cos( z / 2 );\n\n\t\tvar s1 = sin( x / 2 );\n\t\tvar s2 = sin( y / 2 );\n\t\tvar s3 = sin( z / 2 );\n\n\t\tif ( order === 'XYZ' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t} else if ( order === 'YXZ' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t} else if ( order === 'ZXY' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t} else if ( order === 'ZYX' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t} else if ( order === 'YZX' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t} else if ( order === 'XZY' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t}\n\n\t\tif ( update !== false ) this._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromAxisAngle: function ( axis, angle ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\n\n\t\t// assumes axis is normalized\n\n\t\tvar halfAngle = angle / 2, s = Math.sin( halfAngle );\n\n\t\tthis._x = axis.x * s;\n\t\tthis._y = axis.y * s;\n\t\tthis._z = axis.z * s;\n\t\tthis._w = Math.cos( halfAngle );\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromRotationMatrix: function ( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tvar te = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\n\n\t\t\ttrace = m11 + m22 + m33,\n\t\t\ts;\n\n\t\tif ( trace > 0 ) {\n\n\t\t\ts = 0.5 / Math.sqrt( trace + 1.0 );\n\n\t\t\tthis._w = 0.25 / s;\n\t\t\tthis._x = ( m32 - m23 ) * s;\n\t\t\tthis._y = ( m13 - m31 ) * s;\n\t\t\tthis._z = ( m21 - m12 ) * s;\n\n\t\t} else if ( m11 > m22 && m11 > m33 ) {\n\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\n\n\t\t\tthis._w = ( m32 - m23 ) / s;\n\t\t\tthis._x = 0.25 * s;\n\t\t\tthis._y = ( m12 + m21 ) / s;\n\t\t\tthis._z = ( m13 + m31 ) / s;\n\n\t\t} else if ( m22 > m33 ) {\n\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\n\n\t\t\tthis._w = ( m13 - m31 ) / s;\n\t\t\tthis._x = ( m12 + m21 ) / s;\n\t\t\tthis._y = 0.25 * s;\n\t\t\tthis._z = ( m23 + m32 ) / s;\n\n\t\t} else {\n\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\n\n\t\t\tthis._w = ( m21 - m12 ) / s;\n\t\t\tthis._x = ( m13 + m31 ) / s;\n\t\t\tthis._y = ( m23 + m32 ) / s;\n\t\t\tthis._z = 0.25 * s;\n\n\t\t}\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromUnitVectors: function ( vFrom, vTo ) {\n\n\t\t// assumes direction vectors vFrom and vTo are normalized\n\n\t\tvar EPS = 0.000001;\n\n\t\tvar r = vFrom.dot( vTo ) + 1;\n\n\t\tif ( r < EPS ) {\n\n\t\t\tr = 0;\n\n\t\t\tif ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\n\n\t\t\t\tthis._x = - vFrom.y;\n\t\t\t\tthis._y = vFrom.x;\n\t\t\t\tthis._z = 0;\n\t\t\t\tthis._w = r;\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._y = - vFrom.z;\n\t\t\t\tthis._z = vFrom.y;\n\t\t\t\tthis._w = r;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// crossVectors( vFrom, vTo ); // inlined to avoid cyclic dependency on Vector3\n\n\t\t\tthis._x = vFrom.y * vTo.z - vFrom.z * vTo.y;\n\t\t\tthis._y = vFrom.z * vTo.x - vFrom.x * vTo.z;\n\t\t\tthis._z = vFrom.x * vTo.y - vFrom.y * vTo.x;\n\t\t\tthis._w = r;\n\n\t\t}\n\n\t\treturn this.normalize();\n\n\t},\n\n\tangleTo: function ( q ) {\n\n\t\treturn 2 * Math.acos( Math.abs( _Math.clamp( this.dot( q ), - 1, 1 ) ) );\n\n\t},\n\n\trotateTowards: function ( q, step ) {\n\n\t\tvar angle = this.angleTo( q );\n\n\t\tif ( angle === 0 ) return this;\n\n\t\tvar t = Math.min( 1, step / angle );\n\n\t\tthis.slerp( q, t );\n\n\t\treturn this;\n\n\t},\n\n\tinverse: function () {\n\n\t\t// quaternion is assumed to have unit length\n\n\t\treturn this.conjugate();\n\n\t},\n\n\tconjugate: function () {\n\n\t\tthis._x *= - 1;\n\t\tthis._y *= - 1;\n\t\tthis._z *= - 1;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\n\n\t},\n\n\tnormalize: function () {\n\n\t\tvar l = this.length();\n\n\t\tif ( l === 0 ) {\n\n\t\t\tthis._x = 0;\n\t\t\tthis._y = 0;\n\t\t\tthis._z = 0;\n\t\t\tthis._w = 1;\n\n\t\t} else {\n\n\t\t\tl = 1 / l;\n\n\t\t\tthis._x = this._x * l;\n\t\t\tthis._y = this._y * l;\n\t\t\tthis._z = this._z * l;\n\t\t\tthis._w = this._w * l;\n\n\t\t}\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( q, p ) {\n\n\t\tif ( p !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.' );\n\t\t\treturn this.multiplyQuaternions( q, p );\n\n\t\t}\n\n\t\treturn this.multiplyQuaternions( this, q );\n\n\t},\n\n\tpremultiply: function ( q ) {\n\n\t\treturn this.multiplyQuaternions( q, this );\n\n\t},\n\n\tmultiplyQuaternions: function ( a, b ) {\n\n\t\t// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\n\n\t\tvar qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\n\t\tvar qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\n\n\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\n\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\n\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\n\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tslerp: function ( qb, t ) {\n\n\t\tif ( t === 0 ) return this;\n\t\tif ( t === 1 ) return this.copy( qb );\n\n\t\tvar x = this._x, y = this._y, z = this._z, w = this._w;\n\n\t\t// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\n\n\t\tvar cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\n\n\t\tif ( cosHalfTheta < 0 ) {\n\n\t\t\tthis._w = - qb._w;\n\t\t\tthis._x = - qb._x;\n\t\t\tthis._y = - qb._y;\n\t\t\tthis._z = - qb._z;\n\n\t\t\tcosHalfTheta = - cosHalfTheta;\n\n\t\t} else {\n\n\t\t\tthis.copy( qb );\n\n\t\t}\n\n\t\tif ( cosHalfTheta >= 1.0 ) {\n\n\t\t\tthis._w = w;\n\t\t\tthis._x = x;\n\t\t\tthis._y = y;\n\t\t\tthis._z = z;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar sqrSinHalfTheta = 1.0 - cosHalfTheta * cosHalfTheta;\n\n\t\tif ( sqrSinHalfTheta <= Number.EPSILON ) {\n\n\t\t\tvar s = 1 - t;\n\t\t\tthis._w = s * w + t * this._w;\n\t\t\tthis._x = s * x + t * this._x;\n\t\t\tthis._y = s * y + t * this._y;\n\t\t\tthis._z = s * z + t * this._z;\n\n\t\t\tthis.normalize();\n\t\t\tthis._onChangeCallback();\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar sinHalfTheta = Math.sqrt( sqrSinHalfTheta );\n\t\tvar halfTheta = Math.atan2( sinHalfTheta, cosHalfTheta );\n\t\tvar ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\n\t\t\tratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\n\n\t\tthis._w = ( w * ratioA + this._w * ratioB );\n\t\tthis._x = ( x * ratioA + this._x * ratioB );\n\t\tthis._y = ( y * ratioA + this._y * ratioB );\n\t\tthis._z = ( z * ratioA + this._z * ratioB );\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( quaternion ) {\n\n\t\treturn ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis._x = array[ offset ];\n\t\tthis._y = array[ offset + 1 ];\n\t\tthis._z = array[ offset + 2 ];\n\t\tthis._w = array[ offset + 3 ];\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._w;\n\n\t\treturn array;\n\n\t},\n\n\t_onChange: function ( callback ) {\n\n\t\tthis._onChangeCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\t_onChangeCallback: function () {}\n\n} );\n\n\nexport { Quaternion };\n","import { Object3D } from '../core/Object3D.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction Light( color, intensity ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Light';\n\n\tthis.color = new Color( color );\n\tthis.intensity = intensity !== undefined ? intensity : 1;\n\n\tthis.receiveShadow = undefined;\n\n}\n\nLight.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Light,\n\n\tisLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source );\n\n\t\tthis.color.copy( source.color );\n\t\tthis.intensity = source.intensity;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.color = this.color.getHex();\n\t\tdata.object.intensity = this.intensity;\n\n\t\tif ( this.groundColor !== undefined ) data.object.groundColor = this.groundColor.getHex();\n\n\t\tif ( this.distance !== undefined ) data.object.distance = this.distance;\n\t\tif ( this.angle !== undefined ) data.object.angle = this.angle;\n\t\tif ( this.decay !== undefined ) data.object.decay = this.decay;\n\t\tif ( this.penumbra !== undefined ) data.object.penumbra = this.penumbra;\n\n\t\tif ( this.shadow !== undefined ) data.object.shadow = this.shadow.toJSON();\n\n\t\treturn data;\n\n\t}\n\n} );\n\n\nexport { Light };\n","/**\n * https://github.com/mrdoob/eventdispatcher.js/\n */\n\nfunction EventDispatcher() {}\n\nObject.assign( EventDispatcher.prototype, {\n\n\taddEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) this._listeners = {};\n\n\t\tvar listeners = this._listeners;\n\n\t\tif ( listeners[ type ] === undefined ) {\n\n\t\t\tlisteners[ type ] = [];\n\n\t\t}\n\n\t\tif ( listeners[ type ].indexOf( listener ) === - 1 ) {\n\n\t\t\tlisteners[ type ].push( listener );\n\n\t\t}\n\n\t},\n\n\thasEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return false;\n\n\t\tvar listeners = this._listeners;\n\n\t\treturn listeners[ type ] !== undefined && listeners[ type ].indexOf( listener ) !== - 1;\n\n\t},\n\n\tremoveEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tvar listeners = this._listeners;\n\t\tvar listenerArray = listeners[ type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tvar index = listenerArray.indexOf( listener );\n\n\t\t\tif ( index !== - 1 ) {\n\n\t\t\t\tlistenerArray.splice( index, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tdispatchEvent: function ( event ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tvar listeners = this._listeners;\n\t\tvar listenerArray = listeners[ event.type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tevent.target = this;\n\n\t\t\tvar array = listenerArray.slice( 0 );\n\n\t\t\tfor ( var i = 0, l = array.length; i < l; i ++ ) {\n\n\t\t\t\tarray[ i ].call( this, event );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n} );\n\n\nexport { EventDispatcher };\n","import { Line } from './Line.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar _start = new Vector3();\nvar _end = new Vector3();\n\nfunction LineSegments( geometry, material ) {\n\n\tLine.call( this, geometry, material );\n\n\tthis.type = 'LineSegments';\n\n}\n\nLineSegments.prototype = Object.assign( Object.create( Line.prototype ), {\n\n\tconstructor: LineSegments,\n\n\tisLineSegments: true,\n\n\tcomputeLineDistances: function () {\n\n\t\tvar geometry = this.geometry;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\t// we assume non-indexed geometry\n\n\t\t\tif ( geometry.index === null ) {\n\n\t\t\t\tvar positionAttribute = geometry.attributes.position;\n\t\t\t\tvar lineDistances = [];\n\n\t\t\t\tfor ( var i = 0, l = positionAttribute.count; i < l; i += 2 ) {\n\n\t\t\t\t\t_start.fromBufferAttribute( positionAttribute, i );\n\t\t\t\t\t_end.fromBufferAttribute( positionAttribute, i + 1 );\n\n\t\t\t\t\tlineDistances[ i ] = ( i === 0 ) ? 0 : lineDistances[ i - 1 ];\n\t\t\t\t\tlineDistances[ i + 1 ] = lineDistances[ i ] + _start.distanceTo( _end );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.setAttribute( 'lineDistance', new Float32BufferAttribute( lineDistances, 1 ) );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.' );\n\n\t\t\t}\n\n\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\tvar vertices = geometry.vertices;\n\t\t\tvar lineDistances = geometry.lineDistances;\n\n\t\t\tfor ( var i = 0, l = vertices.length; i < l; i += 2 ) {\n\n\t\t\t\t_start.copy( vertices[ i ] );\n\t\t\t\t_end.copy( vertices[ i + 1 ] );\n\n\t\t\t\tlineDistances[ i ] = ( i === 0 ) ? 0 : lineDistances[ i - 1 ];\n\t\t\t\tlineDistances[ i + 1 ] = lineDistances[ i ] + _start.distanceTo( _end );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { LineSegments };\n","import { ShaderChunk } from './ShaderChunk.js';\nimport { mergeUniforms } from './UniformsUtils.js';\nimport { Vector2 } from '../../math/Vector2.js';\nimport { Vector3 } from '../../math/Vector3.js';\nimport { UniformsLib } from './UniformsLib.js';\nimport { Color } from '../../math/Color.js';\nimport { Matrix3 } from '../../math/Matrix3.js';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n * @author mikael emtinger / http://gomo.se/\n */\n\nvar ShaderLib = {\n\n\tbasic: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshbasic_vert,\n\t\tfragmentShader: ShaderChunk.meshbasic_frag\n\n\t},\n\n\tlambert: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshlambert_vert,\n\t\tfragmentShader: ShaderChunk.meshlambert_frag\n\n\t},\n\n\tphong: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) },\n\t\t\t\tspecular: { value: new Color( 0x111111 ) },\n\t\t\t\tshininess: { value: 30 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshphong_vert,\n\t\tfragmentShader: ShaderChunk.meshphong_frag\n\n\t},\n\n\tstandard: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.roughnessmap,\n\t\t\tUniformsLib.metalnessmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) },\n\t\t\t\troughness: { value: 0.5 },\n\t\t\t\tmetalness: { value: 0.5 },\n\t\t\t\tenvMapIntensity: { value: 1 } // temporary\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshphysical_vert,\n\t\tfragmentShader: ShaderChunk.meshphysical_frag\n\n\t},\n\n\ttoon: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.gradientmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) },\n\t\t\t\tspecular: { value: new Color( 0x111111 ) },\n\t\t\t\tshininess: { value: 30 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshtoon_vert,\n\t\tfragmentShader: ShaderChunk.meshtoon_frag\n\n\t},\n\n\tmatcap: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tmatcap: { value: null }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshmatcap_vert,\n\t\tfragmentShader: ShaderChunk.meshmatcap_frag\n\n\t},\n\n\tpoints: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.points,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.points_vert,\n\t\tfragmentShader: ShaderChunk.points_frag\n\n\t},\n\n\tdashed: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tscale: { value: 1 },\n\t\t\t\tdashSize: { value: 1 },\n\t\t\t\ttotalSize: { value: 2 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.linedashed_vert,\n\t\tfragmentShader: ShaderChunk.linedashed_frag\n\n\t},\n\n\tdepth: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.displacementmap\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.depth_vert,\n\t\tfragmentShader: ShaderChunk.depth_frag\n\n\t},\n\n\tnormal: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\t{\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.normal_vert,\n\t\tfragmentShader: ShaderChunk.normal_frag\n\n\t},\n\n\tsprite: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.sprite,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.sprite_vert,\n\t\tfragmentShader: ShaderChunk.sprite_frag\n\n\t},\n\n\tbackground: {\n\n\t\tuniforms: {\n\t\t\tuvTransform: { value: new Matrix3() },\n\t\t\tt2D: { value: null },\n\t\t},\n\n\t\tvertexShader: ShaderChunk.background_vert,\n\t\tfragmentShader: ShaderChunk.background_frag\n\n\t},\n\t/* -------------------------------------------------------------------------\n\t//\tCube map shader\n\t ------------------------------------------------------------------------- */\n\n\tcube: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.envmap,\n\t\t\t{\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.cube_vert,\n\t\tfragmentShader: ShaderChunk.cube_frag\n\n\t},\n\n\tequirect: {\n\n\t\tuniforms: {\n\t\t\ttEquirect: { value: null },\n\t\t},\n\n\t\tvertexShader: ShaderChunk.equirect_vert,\n\t\tfragmentShader: ShaderChunk.equirect_frag\n\n\t},\n\n\tdistanceRGBA: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.displacementmap,\n\t\t\t{\n\t\t\t\treferencePosition: { value: new Vector3() },\n\t\t\t\tnearDistance: { value: 1 },\n\t\t\t\tfarDistance: { value: 1000 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.distanceRGBA_vert,\n\t\tfragmentShader: ShaderChunk.distanceRGBA_frag\n\n\t},\n\n\tshadow: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.lights,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tcolor: { value: new Color( 0x00000 ) },\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t},\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.shadow_vert,\n\t\tfragmentShader: ShaderChunk.shadow_frag\n\n\t}\n\n};\n\nShaderLib.physical = {\n\n\tuniforms: mergeUniforms( [\n\t\tShaderLib.standard.uniforms,\n\t\t{\n\t\t\ttransparency: { value: 0 },\n\t\t\tclearcoat: { value: 0 },\n\t\t\tclearcoatRoughness: { value: 0 },\n\t\t\tsheen: { value: new Color( 0x000000 ) },\n\t\t\tclearcoatNormalScale: { value: new Vector2( 1, 1 ) },\n\t\t\tclearcoatNormalMap: { value: null },\n\t\t}\n\t] ),\n\n\tvertexShader: ShaderChunk.meshphysical_vert,\n\tfragmentShader: ShaderChunk.meshphysical_frag\n\n};\n\n\nexport { ShaderLib };\n","import { Interpolant } from '../Interpolant.js';\n\n/**\n *\n * Interpolant that evaluates to the sample value at the position preceeding\n * the parameter.\n *\n * @author tschw\n */\n\nfunction DiscreteInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n}\n\nDiscreteInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\n\n\tconstructor: DiscreteInterpolant,\n\n\tinterpolate_: function ( i1 /*, t0, t, t1 */ ) {\n\n\t\treturn this.copySampleValue_( i1 - 1 );\n\n\t}\n\n} );\n\n\nexport { DiscreteInterpolant };\n","import {\n\tInterpolateLinear,\n\tInterpolateSmooth,\n\tInterpolateDiscrete\n} from '../constants.js';\nimport { CubicInterpolant } from '../math/interpolants/CubicInterpolant.js';\nimport { LinearInterpolant } from '../math/interpolants/LinearInterpolant.js';\nimport { DiscreteInterpolant } from '../math/interpolants/DiscreteInterpolant.js';\nimport { AnimationUtils } from './AnimationUtils.js';\n\n/**\n *\n * A timed sequence of keyframes for a specific property.\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction KeyframeTrack( name, times, values, interpolation ) {\n\n\tif ( name === undefined ) throw new Error( 'THREE.KeyframeTrack: track name is undefined' );\n\tif ( times === undefined || times.length === 0 ) throw new Error( 'THREE.KeyframeTrack: no keyframes in track named ' + name );\n\n\tthis.name = name;\n\n\tthis.times = AnimationUtils.convertArray( times, this.TimeBufferType );\n\tthis.values = AnimationUtils.convertArray( values, this.ValueBufferType );\n\n\tthis.setInterpolation( interpolation || this.DefaultInterpolation );\n\n}\n\n// Static methods\n\nObject.assign( KeyframeTrack, {\n\n\t// Serialization (in static context, because of constructor invocation\n\t// and automatic invocation of .toJSON):\n\n\ttoJSON: function ( track ) {\n\n\t\tvar trackType = track.constructor;\n\n\t\tvar json;\n\n\t\t// derived classes can define a static toJSON method\n\t\tif ( trackType.toJSON !== undefined ) {\n\n\t\t\tjson = trackType.toJSON( track );\n\n\t\t} else {\n\n\t\t\t// by default, we assume the data can be serialized as-is\n\t\t\tjson = {\n\n\t\t\t\t'name': track.name,\n\t\t\t\t'times': AnimationUtils.convertArray( track.times, Array ),\n\t\t\t\t'values': AnimationUtils.convertArray( track.values, Array )\n\n\t\t\t};\n\n\t\t\tvar interpolation = track.getInterpolation();\n\n\t\t\tif ( interpolation !== track.DefaultInterpolation ) {\n\n\t\t\t\tjson.interpolation = interpolation;\n\n\t\t\t}\n\n\t\t}\n\n\t\tjson.type = track.ValueTypeName; // mandatory\n\n\t\treturn json;\n\n\t}\n\n} );\n\nObject.assign( KeyframeTrack.prototype, {\n\n\tconstructor: KeyframeTrack,\n\n\tTimeBufferType: Float32Array,\n\n\tValueBufferType: Float32Array,\n\n\tDefaultInterpolation: InterpolateLinear,\n\n\tInterpolantFactoryMethodDiscrete: function ( result ) {\n\n\t\treturn new DiscreteInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t},\n\n\tInterpolantFactoryMethodLinear: function ( result ) {\n\n\t\treturn new LinearInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t},\n\n\tInterpolantFactoryMethodSmooth: function ( result ) {\n\n\t\treturn new CubicInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t},\n\n\tsetInterpolation: function ( interpolation ) {\n\n\t\tvar factoryMethod;\n\n\t\tswitch ( interpolation ) {\n\n\t\t\tcase InterpolateDiscrete:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodDiscrete;\n\n\t\t\t\tbreak;\n\n\t\t\tcase InterpolateLinear:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodLinear;\n\n\t\t\t\tbreak;\n\n\t\t\tcase InterpolateSmooth:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodSmooth;\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( factoryMethod === undefined ) {\n\n\t\t\tvar message = \"unsupported interpolation for \" +\n\t\t\t\tthis.ValueTypeName + \" keyframe track named \" + this.name;\n\n\t\t\tif ( this.createInterpolant === undefined ) {\n\n\t\t\t\t// fall back to default, unless the default itself is messed up\n\t\t\t\tif ( interpolation !== this.DefaultInterpolation ) {\n\n\t\t\t\t\tthis.setInterpolation( this.DefaultInterpolation );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( message ); // fatal, in this case\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconsole.warn( 'THREE.KeyframeTrack:', message );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tthis.createInterpolant = factoryMethod;\n\n\t\treturn this;\n\n\t},\n\n\tgetInterpolation: function () {\n\n\t\tswitch ( this.createInterpolant ) {\n\n\t\t\tcase this.InterpolantFactoryMethodDiscrete:\n\n\t\t\t\treturn InterpolateDiscrete;\n\n\t\t\tcase this.InterpolantFactoryMethodLinear:\n\n\t\t\t\treturn InterpolateLinear;\n\n\t\t\tcase this.InterpolantFactoryMethodSmooth:\n\n\t\t\t\treturn InterpolateSmooth;\n\n\t\t}\n\n\t},\n\n\tgetValueSize: function () {\n\n\t\treturn this.values.length / this.times.length;\n\n\t},\n\n\t// move all keyframes either forwards or backwards in time\n\tshift: function ( timeOffset ) {\n\n\t\tif ( timeOffset !== 0.0 ) {\n\n\t\t\tvar times = this.times;\n\n\t\t\tfor ( var i = 0, n = times.length; i !== n; ++ i ) {\n\n\t\t\t\ttimes[ i ] += timeOffset;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// scale all keyframe times by a factor (useful for frame <-> seconds conversions)\n\tscale: function ( timeScale ) {\n\n\t\tif ( timeScale !== 1.0 ) {\n\n\t\t\tvar times = this.times;\n\n\t\t\tfor ( var i = 0, n = times.length; i !== n; ++ i ) {\n\n\t\t\t\ttimes[ i ] *= timeScale;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// removes keyframes before and after animation without changing any values within the range [startTime, endTime].\n\t// IMPORTANT: We do not shift around keys to the start of the track time, because for interpolated keys this will change their values\n\ttrim: function ( startTime, endTime ) {\n\n\t\tvar times = this.times,\n\t\t\tnKeys = times.length,\n\t\t\tfrom = 0,\n\t\t\tto = nKeys - 1;\n\n\t\twhile ( from !== nKeys && times[ from ] < startTime ) {\n\n\t\t\t++ from;\n\n\t\t}\n\n\t\twhile ( to !== - 1 && times[ to ] > endTime ) {\n\n\t\t\t-- to;\n\n\t\t}\n\n\t\t++ to; // inclusive -> exclusive bound\n\n\t\tif ( from !== 0 || to !== nKeys ) {\n\n\t\t\t// empty tracks are forbidden, so keep at least one keyframe\n\t\t\tif ( from >= to ) to = Math.max( to, 1 ), from = to - 1;\n\n\t\t\tvar stride = this.getValueSize();\n\t\t\tthis.times = AnimationUtils.arraySlice( times, from, to );\n\t\t\tthis.values = AnimationUtils.arraySlice( this.values, from * stride, to * stride );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// ensure we do not get a GarbageInGarbageOut situation, make sure tracks are at least minimally viable\n\tvalidate: function () {\n\n\t\tvar valid = true;\n\n\t\tvar valueSize = this.getValueSize();\n\t\tif ( valueSize - Math.floor( valueSize ) !== 0 ) {\n\n\t\t\tconsole.error( 'THREE.KeyframeTrack: Invalid value size in track.', this );\n\t\t\tvalid = false;\n\n\t\t}\n\n\t\tvar times = this.times,\n\t\t\tvalues = this.values,\n\n\t\t\tnKeys = times.length;\n\n\t\tif ( nKeys === 0 ) {\n\n\t\t\tconsole.error( 'THREE.KeyframeTrack: Track is empty.', this );\n\t\t\tvalid = false;\n\n\t\t}\n\n\t\tvar prevTime = null;\n\n\t\tfor ( var i = 0; i !== nKeys; i ++ ) {\n\n\t\t\tvar currTime = times[ i ];\n\n\t\t\tif ( typeof currTime === 'number' && isNaN( currTime ) ) {\n\n\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Time is not a valid number.', this, i, currTime );\n\t\t\t\tvalid = false;\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tif ( prevTime !== null && prevTime > currTime ) {\n\n\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Out of order keys.', this, i, currTime, prevTime );\n\t\t\t\tvalid = false;\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tprevTime = currTime;\n\n\t\t}\n\n\t\tif ( values !== undefined ) {\n\n\t\t\tif ( AnimationUtils.isTypedArray( values ) ) {\n\n\t\t\t\tfor ( var i = 0, n = values.length; i !== n; ++ i ) {\n\n\t\t\t\t\tvar value = values[ i ];\n\n\t\t\t\t\tif ( isNaN( value ) ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Value is not a valid number.', this, i, value );\n\t\t\t\t\t\tvalid = false;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn valid;\n\n\t},\n\n\t// removes equivalent sequential keys as common in morph target sequences\n\t// (0,0,0,0,1,1,1,0,0,0,0,0,0,0) --> (0,0,1,1,0,0)\n\toptimize: function () {\n\n\t\tvar times = this.times,\n\t\t\tvalues = this.values,\n\t\t\tstride = this.getValueSize(),\n\n\t\t\tsmoothInterpolation = this.getInterpolation() === InterpolateSmooth,\n\n\t\t\twriteIndex = 1,\n\t\t\tlastIndex = times.length - 1;\n\n\t\tfor ( var i = 1; i < lastIndex; ++ i ) {\n\n\t\t\tvar keep = false;\n\n\t\t\tvar time = times[ i ];\n\t\t\tvar timeNext = times[ i + 1 ];\n\n\t\t\t// remove adjacent keyframes scheduled at the same time\n\n\t\t\tif ( time !== timeNext && ( i !== 1 || time !== time[ 0 ] ) ) {\n\n\t\t\t\tif ( ! smoothInterpolation ) {\n\n\t\t\t\t\t// remove unnecessary keyframes same as their neighbors\n\n\t\t\t\t\tvar offset = i * stride,\n\t\t\t\t\t\toffsetP = offset - stride,\n\t\t\t\t\t\toffsetN = offset + stride;\n\n\t\t\t\t\tfor ( var j = 0; j !== stride; ++ j ) {\n\n\t\t\t\t\t\tvar value = values[ offset + j ];\n\n\t\t\t\t\t\tif ( value !== values[ offsetP + j ] ||\n\t\t\t\t\t\t\tvalue !== values[ offsetN + j ] ) {\n\n\t\t\t\t\t\t\tkeep = true;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tkeep = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// in-place compaction\n\n\t\t\tif ( keep ) {\n\n\t\t\t\tif ( i !== writeIndex ) {\n\n\t\t\t\t\ttimes[ writeIndex ] = times[ i ];\n\n\t\t\t\t\tvar readOffset = i * stride,\n\t\t\t\t\t\twriteOffset = writeIndex * stride;\n\n\t\t\t\t\tfor ( var j = 0; j !== stride; ++ j ) {\n\n\t\t\t\t\t\tvalues[ writeOffset + j ] = values[ readOffset + j ];\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t++ writeIndex;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// flush last keyframe (compaction looks ahead)\n\n\t\tif ( lastIndex > 0 ) {\n\n\t\t\ttimes[ writeIndex ] = times[ lastIndex ];\n\n\t\t\tfor ( var readOffset = lastIndex * stride, writeOffset = writeIndex * stride, j = 0; j !== stride; ++ j ) {\n\n\t\t\t\tvalues[ writeOffset + j ] = values[ readOffset + j ];\n\n\t\t\t}\n\n\t\t\t++ writeIndex;\n\n\t\t}\n\n\t\tif ( writeIndex !== times.length ) {\n\n\t\t\tthis.times = AnimationUtils.arraySlice( times, 0, writeIndex );\n\t\t\tthis.values = AnimationUtils.arraySlice( values, 0, writeIndex * stride );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\tvar times = AnimationUtils.arraySlice( this.times, 0 );\n\t\tvar values = AnimationUtils.arraySlice( this.values, 0 );\n\n\t\tvar TypedKeyframeTrack = this.constructor;\n\t\tvar track = new TypedKeyframeTrack( this.name, times, values );\n\n\t\t// Interpolant argument to constructor is not saved, so copy the factory method directly.\n\t\ttrack.createInterpolant = this.createInterpolant;\n\n\t\treturn track;\n\n\t}\n\n} );\n\nexport { KeyframeTrack };\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\n\n// PlaneGeometry\n\nfunction PlaneGeometry( width, height, widthSegments, heightSegments ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'PlaneGeometry';\n\n\tthis.parameters = {\n\t\twidth: width,\n\t\theight: height,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments\n\t};\n\n\tthis.fromBufferGeometry( new PlaneBufferGeometry( width, height, widthSegments, heightSegments ) );\n\tthis.mergeVertices();\n\n}\n\nPlaneGeometry.prototype = Object.create( Geometry.prototype );\nPlaneGeometry.prototype.constructor = PlaneGeometry;\n\n// PlaneBufferGeometry\n\nfunction PlaneBufferGeometry( width, height, widthSegments, heightSegments ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'PlaneBufferGeometry';\n\n\tthis.parameters = {\n\t\twidth: width,\n\t\theight: height,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments\n\t};\n\n\twidth = width || 1;\n\theight = height || 1;\n\n\tvar width_half = width / 2;\n\tvar height_half = height / 2;\n\n\tvar gridX = Math.floor( widthSegments ) || 1;\n\tvar gridY = Math.floor( heightSegments ) || 1;\n\n\tvar gridX1 = gridX + 1;\n\tvar gridY1 = gridY + 1;\n\n\tvar segment_width = width / gridX;\n\tvar segment_height = height / gridY;\n\n\tvar ix, iy;\n\n\t// buffers\n\n\tvar indices = [];\n\tvar vertices = [];\n\tvar normals = [];\n\tvar uvs = [];\n\n\t// generate vertices, normals and uvs\n\n\tfor ( iy = 0; iy < gridY1; iy ++ ) {\n\n\t\tvar y = iy * segment_height - height_half;\n\n\t\tfor ( ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\tvar x = ix * segment_width - width_half;\n\n\t\t\tvertices.push( x, - y, 0 );\n\n\t\t\tnormals.push( 0, 0, 1 );\n\n\t\t\tuvs.push( ix / gridX );\n\t\t\tuvs.push( 1 - ( iy / gridY ) );\n\n\t\t}\n\n\t}\n\n\t// indices\n\n\tfor ( iy = 0; iy < gridY; iy ++ ) {\n\n\t\tfor ( ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\tvar a = ix + gridX1 * iy;\n\t\t\tvar b = ix + gridX1 * ( iy + 1 );\n\t\t\tvar c = ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\tvar d = ( ix + 1 ) + gridX1 * iy;\n\n\t\t\t// faces\n\n\t\t\tindices.push( a, b, d );\n\t\t\tindices.push( b, c, d );\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n}\n\nPlaneBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nPlaneBufferGeometry.prototype.constructor = PlaneBufferGeometry;\n\n\nexport { PlaneGeometry, PlaneBufferGeometry };\n","import { Material } from './Material.js';\nimport { MultiplyOperation } from '../constants.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.Multiply,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  depthTest: <bool>,\n *  depthWrite: <bool>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>\n * }\n */\n\nfunction MeshBasicMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshBasicMaterial';\n\n\tthis.color = new Color( 0xffffff ); // emissive\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.specularMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.combine = MultiplyOperation;\n\tthis.reflectivity = 1;\n\tthis.refractionRatio = 0.98;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshBasicMaterial.prototype = Object.create( Material.prototype );\nMeshBasicMaterial.prototype.constructor = MeshBasicMaterial;\n\nMeshBasicMaterial.prototype.isMeshBasicMaterial = true;\n\nMeshBasicMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.map = source.map;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.specularMap = source.specularMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.envMap = source.envMap;\n\tthis.combine = source.combine;\n\tthis.reflectivity = source.reflectivity;\n\tthis.refractionRatio = source.refractionRatio;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\n\treturn this;\n\n};\n\n\nexport { MeshBasicMaterial };\n","import { Box3 } from './Box3.js';\nimport { Vector3 } from './Vector3.js';\n\nvar _box = new Box3();\n\n/**\n * @author bhouston / http://clara.io\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Sphere( center, radius ) {\n\n\tthis.center = ( center !== undefined ) ? center : new Vector3();\n\tthis.radius = ( radius !== undefined ) ? radius : 0;\n\n}\n\nObject.assign( Sphere.prototype, {\n\n\tset: function ( center, radius ) {\n\n\t\tthis.center.copy( center );\n\t\tthis.radius = radius;\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPoints: function ( points, optionalCenter ) {\n\n\t\tvar center = this.center;\n\n\t\tif ( optionalCenter !== undefined ) {\n\n\t\t\tcenter.copy( optionalCenter );\n\n\t\t} else {\n\n\t\t\t_box.setFromPoints( points ).getCenter( center );\n\n\t\t}\n\n\t\tvar maxRadiusSq = 0;\n\n\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( points[ i ] ) );\n\n\t\t}\n\n\t\tthis.radius = Math.sqrt( maxRadiusSq );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( sphere ) {\n\n\t\tthis.center.copy( sphere.center );\n\t\tthis.radius = sphere.radius;\n\n\t\treturn this;\n\n\t},\n\n\tempty: function () {\n\n\t\treturn ( this.radius <= 0 );\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\treturn ( point.distanceToSquared( this.center ) <= ( this.radius * this.radius ) );\n\n\t},\n\n\tdistanceToPoint: function ( point ) {\n\n\t\treturn ( point.distanceTo( this.center ) - this.radius );\n\n\t},\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\tvar radiusSum = this.radius + sphere.radius;\n\n\t\treturn sphere.center.distanceToSquared( this.center ) <= ( radiusSum * radiusSum );\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\treturn box.intersectsSphere( this );\n\n\t},\n\n\tintersectsPlane: function ( plane ) {\n\n\t\treturn Math.abs( plane.distanceToPoint( this.center ) ) <= this.radius;\n\n\t},\n\n\tclampPoint: function ( point, target ) {\n\n\t\tvar deltaLengthSq = this.center.distanceToSquared( point );\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Sphere: .clampPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\ttarget.copy( point );\n\n\t\tif ( deltaLengthSq > ( this.radius * this.radius ) ) {\n\n\t\t\ttarget.sub( this.center ).normalize();\n\t\t\ttarget.multiplyScalar( this.radius ).add( this.center );\n\n\t\t}\n\n\t\treturn target;\n\n\t},\n\n\tgetBoundingBox: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Sphere: .getBoundingBox() target is now required' );\n\t\t\ttarget = new Box3();\n\n\t\t}\n\n\t\ttarget.set( this.center, this.center );\n\t\ttarget.expandByScalar( this.radius );\n\n\t\treturn target;\n\n\t},\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\tthis.center.applyMatrix4( matrix );\n\t\tthis.radius = this.radius * matrix.getMaxScaleOnAxis();\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.center.add( offset );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( sphere ) {\n\n\t\treturn sphere.center.equals( this.center ) && ( sphere.radius === this.radius );\n\n\t}\n\n} );\n\n\nexport { Sphere };\n","import { Camera } from './Camera.js';\nimport { Object3D } from '../core/Object3D.js';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author arose / http://github.com/arose\n */\n\nfunction OrthographicCamera( left, right, top, bottom, near, far ) {\n\n\tCamera.call( this );\n\n\tthis.type = 'OrthographicCamera';\n\n\tthis.zoom = 1;\n\tthis.view = null;\n\n\tthis.left = ( left !== undefined ) ? left : - 1;\n\tthis.right = ( right !== undefined ) ? right : 1;\n\tthis.top = ( top !== undefined ) ? top : 1;\n\tthis.bottom = ( bottom !== undefined ) ? bottom : - 1;\n\n\tthis.near = ( near !== undefined ) ? near : 0.1;\n\tthis.far = ( far !== undefined ) ? far : 2000;\n\n\tthis.updateProjectionMatrix();\n\n}\n\nOrthographicCamera.prototype = Object.assign( Object.create( Camera.prototype ), {\n\n\tconstructor: OrthographicCamera,\n\n\tisOrthographicCamera: true,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tCamera.prototype.copy.call( this, source, recursive );\n\n\t\tthis.left = source.left;\n\t\tthis.right = source.right;\n\t\tthis.top = source.top;\n\t\tthis.bottom = source.bottom;\n\t\tthis.near = source.near;\n\t\tthis.far = source.far;\n\n\t\tthis.zoom = source.zoom;\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\n\n\t\treturn this;\n\n\t},\n\n\tsetViewOffset: function ( fullWidth, fullHeight, x, y, width, height ) {\n\n\t\tif ( this.view === null ) {\n\n\t\t\tthis.view = {\n\t\t\t\tenabled: true,\n\t\t\t\tfullWidth: 1,\n\t\t\t\tfullHeight: 1,\n\t\t\t\toffsetX: 0,\n\t\t\t\toffsetY: 0,\n\t\t\t\twidth: 1,\n\t\t\t\theight: 1\n\t\t\t};\n\n\t\t}\n\n\t\tthis.view.enabled = true;\n\t\tthis.view.fullWidth = fullWidth;\n\t\tthis.view.fullHeight = fullHeight;\n\t\tthis.view.offsetX = x;\n\t\tthis.view.offsetY = y;\n\t\tthis.view.width = width;\n\t\tthis.view.height = height;\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tclearViewOffset: function () {\n\n\t\tif ( this.view !== null ) {\n\n\t\t\tthis.view.enabled = false;\n\n\t\t}\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tupdateProjectionMatrix: function () {\n\n\t\tvar dx = ( this.right - this.left ) / ( 2 * this.zoom );\n\t\tvar dy = ( this.top - this.bottom ) / ( 2 * this.zoom );\n\t\tvar cx = ( this.right + this.left ) / 2;\n\t\tvar cy = ( this.top + this.bottom ) / 2;\n\n\t\tvar left = cx - dx;\n\t\tvar right = cx + dx;\n\t\tvar top = cy + dy;\n\t\tvar bottom = cy - dy;\n\n\t\tif ( this.view !== null && this.view.enabled ) {\n\n\t\t\tvar zoomW = this.zoom / ( this.view.width / this.view.fullWidth );\n\t\t\tvar zoomH = this.zoom / ( this.view.height / this.view.fullHeight );\n\t\t\tvar scaleW = ( this.right - this.left ) / this.view.width;\n\t\t\tvar scaleH = ( this.top - this.bottom ) / this.view.height;\n\n\t\t\tleft += scaleW * ( this.view.offsetX / zoomW );\n\t\t\tright = left + scaleW * ( this.view.width / zoomW );\n\t\t\ttop -= scaleH * ( this.view.offsetY / zoomH );\n\t\t\tbottom = top - scaleH * ( this.view.height / zoomH );\n\n\t\t}\n\n\t\tthis.projectionMatrix.makeOrthographic( left, right, top, bottom, this.near, this.far );\n\n\t\tthis.projectionMatrixInverse.getInverse( this.projectionMatrix );\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.zoom = this.zoom;\n\t\tdata.object.left = this.left;\n\t\tdata.object.right = this.right;\n\t\tdata.object.top = this.top;\n\t\tdata.object.bottom = this.bottom;\n\t\tdata.object.near = this.near;\n\t\tdata.object.far = this.far;\n\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\n\n\t\treturn data;\n\n\t}\n\n} );\n\n\nexport { OrthographicCamera };\n","import { Material } from './Material.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *  map: new THREE.Texture( <Image> ),\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  size: <float>,\n *  sizeAttenuation: <bool>\n *\n *  morphTargets: <bool>\n * }\n */\n\nfunction PointsMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'PointsMaterial';\n\n\tthis.color = new Color( 0xffffff );\n\n\tthis.map = null;\n\n\tthis.alphaMap = null;\n\n\tthis.size = 1;\n\tthis.sizeAttenuation = true;\n\n\tthis.morphTargets = false;\n\n\tthis.setValues( parameters );\n\n}\n\nPointsMaterial.prototype = Object.create( Material.prototype );\nPointsMaterial.prototype.constructor = PointsMaterial;\n\nPointsMaterial.prototype.isPointsMaterial = true;\n\nPointsMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.map = source.map;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.size = source.size;\n\tthis.sizeAttenuation = source.sizeAttenuation;\n\n\tthis.morphTargets = source.morphTargets;\n\n\treturn this;\n\n};\n\n\nexport { PointsMaterial };\n","import { Camera } from './Camera.js';\nimport { Object3D } from '../core/Object3D.js';\nimport { _Math } from '../math/Math.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author greggman / http://games.greggman.com/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author tschw\n */\n\nfunction PerspectiveCamera( fov, aspect, near, far ) {\n\n\tCamera.call( this );\n\n\tthis.type = 'PerspectiveCamera';\n\n\tthis.fov = fov !== undefined ? fov : 50;\n\tthis.zoom = 1;\n\n\tthis.near = near !== undefined ? near : 0.1;\n\tthis.far = far !== undefined ? far : 2000;\n\tthis.focus = 10;\n\n\tthis.aspect = aspect !== undefined ? aspect : 1;\n\tthis.view = null;\n\n\tthis.filmGauge = 35;\t// width of the film (default in millimeters)\n\tthis.filmOffset = 0;\t// horizontal film offset (same unit as gauge)\n\n\tthis.updateProjectionMatrix();\n\n}\n\nPerspectiveCamera.prototype = Object.assign( Object.create( Camera.prototype ), {\n\n\tconstructor: PerspectiveCamera,\n\n\tisPerspectiveCamera: true,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tCamera.prototype.copy.call( this, source, recursive );\n\n\t\tthis.fov = source.fov;\n\t\tthis.zoom = source.zoom;\n\n\t\tthis.near = source.near;\n\t\tthis.far = source.far;\n\t\tthis.focus = source.focus;\n\n\t\tthis.aspect = source.aspect;\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\n\n\t\tthis.filmGauge = source.filmGauge;\n\t\tthis.filmOffset = source.filmOffset;\n\n\t\treturn this;\n\n\t},\n\n\t/**\n\t * Sets the FOV by focal length in respect to the current .filmGauge.\n\t *\n\t * The default film gauge is 35, so that the focal length can be specified for\n\t * a 35mm (full frame) camera.\n\t *\n\t * Values for focal length and film gauge must have the same unit.\n\t */\n\tsetFocalLength: function ( focalLength ) {\n\n\t\t// see http://www.bobatkins.com/photography/technical/field_of_view.html\n\t\tvar vExtentSlope = 0.5 * this.getFilmHeight() / focalLength;\n\n\t\tthis.fov = _Math.RAD2DEG * 2 * Math.atan( vExtentSlope );\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\t/**\n\t * Calculates the focal length from the current .fov and .filmGauge.\n\t */\n\tgetFocalLength: function () {\n\n\t\tvar vExtentSlope = Math.tan( _Math.DEG2RAD * 0.5 * this.fov );\n\n\t\treturn 0.5 * this.getFilmHeight() / vExtentSlope;\n\n\t},\n\n\tgetEffectiveFOV: function () {\n\n\t\treturn _Math.RAD2DEG * 2 * Math.atan(\n\t\t\tMath.tan( _Math.DEG2RAD * 0.5 * this.fov ) / this.zoom );\n\n\t},\n\n\tgetFilmWidth: function () {\n\n\t\t// film not completely covered in portrait format (aspect < 1)\n\t\treturn this.filmGauge * Math.min( this.aspect, 1 );\n\n\t},\n\n\tgetFilmHeight: function () {\n\n\t\t// film not completely covered in landscape format (aspect > 1)\n\t\treturn this.filmGauge / Math.max( this.aspect, 1 );\n\n\t},\n\n\t/**\n\t * Sets an offset in a larger frustum. This is useful for multi-window or\n\t * multi-monitor/multi-machine setups.\n\t *\n\t * For example, if you have 3x2 monitors and each monitor is 1920x1080 and\n\t * the monitors are in grid like this\n\t *\n\t *   +---+---+---+\n\t *   | A | B | C |\n\t *   +---+---+---+\n\t *   | D | E | F |\n\t *   +---+---+---+\n\t *\n\t * then for each monitor you would call it like this\n\t *\n\t *   var w = 1920;\n\t *   var h = 1080;\n\t *   var fullWidth = w * 3;\n\t *   var fullHeight = h * 2;\n\t *\n\t *   --A--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );\n\t *   --B--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );\n\t *   --C--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );\n\t *   --D--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );\n\t *   --E--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );\n\t *   --F--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );\n\t *\n\t *   Note there is no reason monitors have to be the same size or in a grid.\n\t */\n\tsetViewOffset: function ( fullWidth, fullHeight, x, y, width, height ) {\n\n\t\tthis.aspect = fullWidth / fullHeight;\n\n\t\tif ( this.view === null ) {\n\n\t\t\tthis.view = {\n\t\t\t\tenabled: true,\n\t\t\t\tfullWidth: 1,\n\t\t\t\tfullHeight: 1,\n\t\t\t\toffsetX: 0,\n\t\t\t\toffsetY: 0,\n\t\t\t\twidth: 1,\n\t\t\t\theight: 1\n\t\t\t};\n\n\t\t}\n\n\t\tthis.view.enabled = true;\n\t\tthis.view.fullWidth = fullWidth;\n\t\tthis.view.fullHeight = fullHeight;\n\t\tthis.view.offsetX = x;\n\t\tthis.view.offsetY = y;\n\t\tthis.view.width = width;\n\t\tthis.view.height = height;\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tclearViewOffset: function () {\n\n\t\tif ( this.view !== null ) {\n\n\t\t\tthis.view.enabled = false;\n\n\t\t}\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tupdateProjectionMatrix: function () {\n\n\t\tvar near = this.near,\n\t\t\ttop = near * Math.tan( _Math.DEG2RAD * 0.5 * this.fov ) / this.zoom,\n\t\t\theight = 2 * top,\n\t\t\twidth = this.aspect * height,\n\t\t\tleft = - 0.5 * width,\n\t\t\tview = this.view;\n\n\t\tif ( this.view !== null && this.view.enabled ) {\n\n\t\t\tvar fullWidth = view.fullWidth,\n\t\t\t\tfullHeight = view.fullHeight;\n\n\t\t\tleft += view.offsetX * width / fullWidth;\n\t\t\ttop -= view.offsetY * height / fullHeight;\n\t\t\twidth *= view.width / fullWidth;\n\t\t\theight *= view.height / fullHeight;\n\n\t\t}\n\n\t\tvar skew = this.filmOffset;\n\t\tif ( skew !== 0 ) left += near * skew / this.getFilmWidth();\n\n\t\tthis.projectionMatrix.makePerspective( left, left + width, top, top - height, near, this.far );\n\n\t\tthis.projectionMatrixInverse.getInverse( this.projectionMatrix );\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.fov = this.fov;\n\t\tdata.object.zoom = this.zoom;\n\n\t\tdata.object.near = this.near;\n\t\tdata.object.far = this.far;\n\t\tdata.object.focus = this.focus;\n\n\t\tdata.object.aspect = this.aspect;\n\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\n\n\t\tdata.object.filmGauge = this.filmGauge;\n\t\tdata.object.filmOffset = this.filmOffset;\n\n\t\treturn data;\n\n\t}\n\n} );\n\n\nexport { PerspectiveCamera };\n","/**\n * @author tschw\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n */\n\nvar AnimationUtils = {\n\n\t// same as Array.prototype.slice, but also works on typed arrays\n\tarraySlice: function ( array, from, to ) {\n\n\t\tif ( AnimationUtils.isTypedArray( array ) ) {\n\n\t\t\t// in ios9 array.subarray(from, undefined) will return empty array\n\t\t\t// but array.subarray(from) or array.subarray(from, len) is correct\n\t\t\treturn new array.constructor( array.subarray( from, to !== undefined ? to : array.length ) );\n\n\t\t}\n\n\t\treturn array.slice( from, to );\n\n\t},\n\n\t// converts an array to a specific type\n\tconvertArray: function ( array, type, forceClone ) {\n\n\t\tif ( ! array || // let 'undefined' and 'null' pass\n\t\t\t! forceClone && array.constructor === type ) return array;\n\n\t\tif ( typeof type.BYTES_PER_ELEMENT === 'number' ) {\n\n\t\t\treturn new type( array ); // create typed array\n\n\t\t}\n\n\t\treturn Array.prototype.slice.call( array ); // create Array\n\n\t},\n\n\tisTypedArray: function ( object ) {\n\n\t\treturn ArrayBuffer.isView( object ) &&\n\t\t\t! ( object instanceof DataView );\n\n\t},\n\n\t// returns an array by which times and values can be sorted\n\tgetKeyframeOrder: function ( times ) {\n\n\t\tfunction compareTime( i, j ) {\n\n\t\t\treturn times[ i ] - times[ j ];\n\n\t\t}\n\n\t\tvar n = times.length;\n\t\tvar result = new Array( n );\n\t\tfor ( var i = 0; i !== n; ++ i ) result[ i ] = i;\n\n\t\tresult.sort( compareTime );\n\n\t\treturn result;\n\n\t},\n\n\t// uses the array previously returned by 'getKeyframeOrder' to sort data\n\tsortedArray: function ( values, stride, order ) {\n\n\t\tvar nValues = values.length;\n\t\tvar result = new values.constructor( nValues );\n\n\t\tfor ( var i = 0, dstOffset = 0; dstOffset !== nValues; ++ i ) {\n\n\t\t\tvar srcOffset = order[ i ] * stride;\n\n\t\t\tfor ( var j = 0; j !== stride; ++ j ) {\n\n\t\t\t\tresult[ dstOffset ++ ] = values[ srcOffset + j ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn result;\n\n\t},\n\n\t// function for parsing AOS keyframe formats\n\tflattenJSON: function ( jsonKeys, times, values, valuePropertyName ) {\n\n\t\tvar i = 1, key = jsonKeys[ 0 ];\n\n\t\twhile ( key !== undefined && key[ valuePropertyName ] === undefined ) {\n\n\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t}\n\n\t\tif ( key === undefined ) return; // no data\n\n\t\tvar value = key[ valuePropertyName ];\n\t\tif ( value === undefined ) return; // no data\n\n\t\tif ( Array.isArray( value ) ) {\n\n\t\t\tdo {\n\n\t\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\ttimes.push( key.time );\n\t\t\t\t\tvalues.push.apply( values, value ); // push all elements\n\n\t\t\t\t}\n\n\t\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t\t} while ( key !== undefined );\n\n\t\t} else if ( value.toArray !== undefined ) {\n\n\t\t\t// ...assume THREE.Math-ish\n\n\t\t\tdo {\n\n\t\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\ttimes.push( key.time );\n\t\t\t\t\tvalue.toArray( values, values.length );\n\n\t\t\t\t}\n\n\t\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t\t} while ( key !== undefined );\n\n\t\t} else {\n\n\t\t\t// otherwise push as-is\n\n\t\t\tdo {\n\n\t\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\ttimes.push( key.time );\n\t\t\t\t\tvalues.push( value );\n\n\t\t\t\t}\n\n\t\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t\t} while ( key !== undefined );\n\n\t\t}\n\n\t},\n\n\tsubclip: function ( sourceClip, name, startFrame, endFrame, fps ) {\n\n\t\tfps = fps || 30;\n\n\t\tvar clip = sourceClip.clone();\n\n\t\tclip.name = name;\n\n\t\tvar tracks = [];\n\n\t\tfor ( var i = 0; i < clip.tracks.length; ++ i ) {\n\n\t\t\tvar track = clip.tracks[ i ];\n\t\t\tvar valueSize = track.getValueSize();\n\n\t\t\tvar times = [];\n\t\t\tvar values = [];\n\n\t\t\tfor ( var j = 0; j < track.times.length; ++ j ) {\n\n\t\t\t\tvar frame = track.times[ j ] * fps;\n\n\t\t\t\tif ( frame < startFrame || frame >= endFrame ) continue;\n\n\t\t\t\ttimes.push( track.times[ j ] );\n\n\t\t\t\tfor ( var k = 0; k < valueSize; ++ k ) {\n\n\t\t\t\t\tvalues.push( track.values[ j * valueSize + k ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( times.length === 0 ) continue;\n\n\t\t\ttrack.times = AnimationUtils.convertArray( times, track.times.constructor );\n\t\t\ttrack.values = AnimationUtils.convertArray( values, track.values.constructor );\n\n\t\t\ttracks.push( track );\n\n\t\t}\n\n\t\tclip.tracks = tracks;\n\n\t\t// find minimum .times value across all tracks in the trimmed clip\n\n\t\tvar minStartTime = Infinity;\n\n\t\tfor ( var i = 0; i < clip.tracks.length; ++ i ) {\n\n\t\t\tif ( minStartTime > clip.tracks[ i ].times[ 0 ] ) {\n\n\t\t\t\tminStartTime = clip.tracks[ i ].times[ 0 ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// shift all tracks such that clip begins at t=0\n\n\t\tfor ( var i = 0; i < clip.tracks.length; ++ i ) {\n\n\t\t\tclip.tracks[ i ].shift( - 1 * minStartTime );\n\n\t\t}\n\n\t\tclip.resetDuration();\n\n\t\treturn clip;\n\n\t}\n\n};\n\nexport { AnimationUtils };\n","/**\n * @author Emmett Lalish / elalish\n *\n * This class generates a Prefiltered, Mipmapped Radiance Environment Map\n * (PMREM) from a cubeMap environment texture. This allows different levels of\n * blur to be quickly accessed based on material roughness. It is packed into a\n * special CubeUV format that allows us to perform custom interpolation so that\n * we can support nonlinear formats such as RGBE. Unlike a traditional mipmap\n * chain, it only goes down to the LOD_MIN level (above), and then creates extra\n * even more filtered 'mips' at the same LOD_MIN resolution, associated with\n * higher roughness levels. In this way we maintain resolution to smoothly\n * interpolate diffuse lighting while limiting sampling computation.\n */\n\nimport {\n\tCubeUVReflectionMapping,\n\tGammaEncoding,\n\tLinearEncoding,\n\tLinearToneMapping,\n\tNearestFilter,\n\tNoBlending,\n\tRGBDEncoding,\n\tRGBEEncoding,\n\tRGBEFormat,\n\tRGBM16Encoding,\n\tRGBM7Encoding,\n\tUnsignedByteType,\n\tsRGBEncoding\n} from \"../constants.js\";\n\nimport { BufferAttribute } from \"../core/BufferAttribute.js\";\nimport { BufferGeometry } from \"../core/BufferGeometry.js\";\nimport { Mesh } from \"../objects/Mesh.js\";\nimport { OrthographicCamera } from \"../cameras/OrthographicCamera.js\";\nimport { PerspectiveCamera } from \"../cameras/PerspectiveCamera.js\";\nimport { RawShaderMaterial } from \"../materials/RawShaderMaterial.js\";\nimport { Scene } from \"../scenes/Scene.js\";\nimport { Vector2 } from \"../math/Vector2.js\";\nimport { Vector3 } from \"../math/Vector3.js\";\nimport { WebGLRenderTarget } from \"../renderers/WebGLRenderTarget.js\";\n\nvar LOD_MIN = 4;\nvar LOD_MAX = 8;\nvar SIZE_MAX = Math.pow( 2, LOD_MAX );\n// The standard deviations (radians) associated with the extra mips. These are\n// chosen to approximate a Trowbridge-Reitz distribution function times the\n// geometric shadowing function. These sigma values squared must match the\n// variance #defines in cube_uv_reflection_fragment.glsl.js.\nvar EXTRA_LOD_SIGMA = [ 0.125, 0.215, 0.35, 0.446, 0.526, 0.582 ];\nvar TOTAL_LODS = LOD_MAX - LOD_MIN + 1 + EXTRA_LOD_SIGMA.length;\n// The maximum length of the blur for loop. Smaller sigmas will use fewer\n// samples and exit early, but not recompile the shader.\nvar MAX_SAMPLES = 20;\nvar ENCODINGS = {\n\t[ LinearEncoding ]: 0,\n\t[ sRGBEncoding ]: 1,\n\t[ RGBEEncoding ]: 2,\n\t[ RGBM7Encoding ]: 3,\n\t[ RGBM16Encoding ]: 4,\n\t[ RGBDEncoding ]: 5,\n\t[ GammaEncoding ]: 6\n};\n\nvar _flatCamera = new OrthographicCamera();\nvar _blurMaterial = _getBlurShader( MAX_SAMPLES );\nvar _equirectShader = null;\nvar _cubemapShader = null;\n\nvar { _lodPlanes, _sizeLods, _sigmas } = _createPlanes();\nvar _pingPongRenderTarget = null;\nvar _renderer = null;\n\n// Golden Ratio\nvar PHI = ( 1 + Math.sqrt( 5 ) ) / 2;\nvar INV_PHI = 1 / PHI;\n// Vertices of a dodecahedron (except the opposites, which represent the\n// same axis), used as axis directions evenly spread on a sphere.\nvar _axisDirections = [\n\tnew Vector3( 1, 1, 1 ),\n\tnew Vector3( - 1, 1, 1 ),\n\tnew Vector3( 1, 1, - 1 ),\n\tnew Vector3( - 1, 1, - 1 ),\n\tnew Vector3( 0, PHI, INV_PHI ),\n\tnew Vector3( 0, PHI, - INV_PHI ),\n\tnew Vector3( INV_PHI, 0, PHI ),\n\tnew Vector3( - INV_PHI, 0, PHI ),\n\tnew Vector3( PHI, INV_PHI, 0 ),\n\tnew Vector3( - PHI, INV_PHI, 0 ) ];\n\nfunction PMREMGenerator( renderer ) {\n\n\t_renderer = renderer;\n\t_compileMaterial( _blurMaterial );\n\n}\n\nPMREMGenerator.prototype = {\n\n\tconstructor: PMREMGenerator,\n\n\t/**\n\t * Generates a PMREM from a supplied Scene, which can be faster than using an\n\t * image if networking bandwidth is low. Optional sigma specifies a blur radius\n\t * in radians to be applied to the scene before PMREM generation. Optional near\n\t * and far planes ensure the scene is rendered in its entirety (the cubeCamera\n\t * is placed at the origin).\n\t */\n\tfromScene: function ( scene, sigma = 0, near = 0.1, far = 100 ) {\n\n\t\tvar cubeUVRenderTarget = _allocateTargets();\n\t\t_sceneToCubeUV( scene, near, far, cubeUVRenderTarget );\n\t\tif ( sigma > 0 ) {\n\n\t\t\t_blur( cubeUVRenderTarget, 0, 0, sigma );\n\n\t\t}\n\t\t_applyPMREM( cubeUVRenderTarget );\n\t\t_cleanup();\n\t\tcubeUVRenderTarget.scissorTest = false;\n\n\t\treturn cubeUVRenderTarget;\n\n\t},\n\n\t/**\n\t * Generates a PMREM from an equirectangular texture, which can be either LDR\n\t * (RGBFormat) or HDR (RGBEFormat). The ideal input image size is 1k (1024 x 512),\n\t * as this matches best with the 256 x 256 cubemap output.\n\t */\n\tfromEquirectangular: function ( equirectangular ) {\n\n\t\tequirectangular.magFilter = NearestFilter;\n\t\tequirectangular.minFilter = NearestFilter;\n\t\tequirectangular.generateMipmaps = false;\n\n\t\treturn this.fromCubemap( equirectangular );\n\n\t},\n\n\t/**\n\t * Generates a PMREM from an cubemap texture, which can be either LDR\n\t * (RGBFormat) or HDR (RGBEFormat). The ideal input cube size is 256 x 256,\n\t * as this matches best with the 256 x 256 cubemap output.\n\t */\n\tfromCubemap: function ( cubemap ) {\n\n\t\tvar cubeUVRenderTarget = _allocateTargets( cubemap );\n\t\t_textureToCubeUV( cubemap, cubeUVRenderTarget );\n\t\t_applyPMREM( cubeUVRenderTarget );\n\t\t_cleanup();\n\t\tcubeUVRenderTarget.scissorTest = false;\n\n\t\treturn cubeUVRenderTarget;\n\n\t},\n\n\t/**\n\t * Pre-compiles the cubemap shader. You can get faster start-up by invoking this method during\n\t * your texture's network fetch for increased concurrency.\n\t */\n\tcompileCubemapShader: function () {\n\n\t\tif ( _cubemapShader == null ) {\n\n\t\t\t_cubemapShader = _getCubemapShader();\n\t\t\t_compileMaterial( _cubemapShader );\n\n\t\t}\n\n\t},\n\n\t/**\n\t * Pre-compiles the equirectangular shader. You can get faster start-up by invoking this method during\n\t * your texture's network fetch for increased concurrency.\n\t */\n\tcompileEquirectangularShader: function () {\n\n\t\tif ( _equirectShader == null ) {\n\n\t\t\t_equirectShader = _getEquirectShader();\n\t\t\t_compileMaterial( _equirectShader );\n\n\t\t}\n\n\t},\n\n\t/**\n\t * Disposes of the PMREMGenerator's internal memory. Note that PMREMGenerator is a static class,\n\t * so you should not need more than one PMREMGenerator object. If you do, calling dispose() on\n\t * one of them will cause any others to also become unusable.\n\t */\n\tdispose: function () {\n\n\t\t_blurMaterial.dispose();\n\n\t\tif ( _cubemapShader != null ) _cubemapShader.dispose();\n\t\tif ( _equirectShader != null ) _equirectShader.dispose();\n\n\t\tfor ( var i = 0; i < _lodPlanes.length; i ++ ) {\n\n\t\t\t_lodPlanes[ i ].dispose();\n\n\t\t}\n\n\t},\n\n};\n\nfunction _createPlanes() {\n\n\tvar _lodPlanes = [];\n\tvar _sizeLods = [];\n\tvar _sigmas = [];\n\n\tvar lod = LOD_MAX;\n\tfor ( var i = 0; i < TOTAL_LODS; i ++ ) {\n\n\t\tvar sizeLod = Math.pow( 2, lod );\n\t\t_sizeLods.push( sizeLod );\n\t\tvar sigma = 1.0 / sizeLod;\n\t\tif ( i > LOD_MAX - LOD_MIN ) {\n\n\t\t\tsigma = EXTRA_LOD_SIGMA[ i - LOD_MAX + LOD_MIN - 1 ];\n\n\t\t} else if ( i == 0 ) {\n\n\t\t\tsigma = 0;\n\n\t\t}\n\t\t_sigmas.push( sigma );\n\n\t\tvar texelSize = 1.0 / ( sizeLod - 1 );\n\t\tvar min = - texelSize / 2;\n\t\tvar max = 1 + texelSize / 2;\n\t\tvar uv1 = [ min, min, max, min, max, max, min, min, max, max, min, max ];\n\n\t\tvar cubeFaces = 6;\n\t\tvar vertices = 6;\n\t\tvar positionSize = 3;\n\t\tvar uvSize = 2;\n\t\tvar faceIndexSize = 1;\n\n\t\tvar position = new Float32Array( positionSize * vertices * cubeFaces );\n\t\tvar uv = new Float32Array( uvSize * vertices * cubeFaces );\n\t\tvar faceIndex = new Float32Array( faceIndexSize * vertices * cubeFaces );\n\n\t\tfor ( var face = 0; face < cubeFaces; face ++ ) {\n\n\t\t\tvar x = ( face % 3 ) * 2 / 3 - 1;\n\t\t\tvar y = face > 2 ? 0 : - 1;\n\t\t\tvar coordinates = [\n\t\t\t\tx, y, 0,\n\t\t\t\tx + 2 / 3, y, 0,\n\t\t\t\tx + 2 / 3, y + 1, 0,\n\t\t\t\tx, y, 0,\n\t\t\t\tx + 2 / 3, y + 1, 0,\n\t\t\t\tx, y + 1, 0\n\t\t\t];\n\t\t\tposition.set( coordinates, positionSize * vertices * face );\n\t\t\tuv.set( uv1, uvSize * vertices * face );\n\t\t\tvar fill = [ face, face, face, face, face, face ];\n\t\t\tfaceIndex.set( fill, faceIndexSize * vertices * face );\n\n\t\t}\n\t\tvar planes = new BufferGeometry();\n\t\tplanes.setAttribute( 'position', new BufferAttribute( position, positionSize ) );\n\t\tplanes.setAttribute( 'uv', new BufferAttribute( uv, uvSize ) );\n\t\tplanes.setAttribute( 'faceIndex', new BufferAttribute( faceIndex, faceIndexSize ) );\n\t\t_lodPlanes.push( planes );\n\n\t\tif ( lod > LOD_MIN ) {\n\n\t\t\tlod --;\n\n\t\t}\n\n\t}\n\treturn { _lodPlanes, _sizeLods, _sigmas };\n\n}\n\nfunction _allocateTargets( equirectangular ) {\n\n\tvar params = {\n\t\tmagFilter: NearestFilter,\n\t\tminFilter: NearestFilter,\n\t\tgenerateMipmaps: false,\n\t\ttype: equirectangular ? equirectangular.type : UnsignedByteType,\n\t\tformat: equirectangular ? equirectangular.format : RGBEFormat,\n\t\tencoding: equirectangular ? equirectangular.encoding : RGBEEncoding,\n\t\tdepthBuffer: false,\n\t\tstencilBuffer: false\n\t};\n\tvar cubeUVRenderTarget = _createRenderTarget( params );\n\tcubeUVRenderTarget.depthBuffer = equirectangular ? false : true;\n\t_pingPongRenderTarget = _createRenderTarget( params );\n\treturn cubeUVRenderTarget;\n\n}\n\nfunction _cleanup() {\n\n\t_pingPongRenderTarget.dispose();\n\t_renderer.setRenderTarget( null );\n\tvar size = _renderer.getSize( new Vector2() );\n\t_renderer.setViewport( 0, 0, size.x, size.y );\n\n}\n\nfunction _sceneToCubeUV( scene, near, far, cubeUVRenderTarget ) {\n\n\tvar fov = 90;\n\tvar aspect = 1;\n\tvar cubeCamera = new PerspectiveCamera( fov, aspect, near, far );\n\tvar upSign = [ 1, 1, 1, 1, - 1, 1 ];\n\tvar forwardSign = [ 1, 1, - 1, - 1, - 1, 1 ];\n\n\tvar outputEncoding = _renderer.outputEncoding;\n\tvar toneMapping = _renderer.toneMapping;\n\tvar toneMappingExposure = _renderer.toneMappingExposure;\n\tvar clearColor = _renderer.getClearColor();\n\tvar clearAlpha = _renderer.getClearAlpha();\n\n\t_renderer.toneMapping = LinearToneMapping;\n\t_renderer.toneMappingExposure = 1.0;\n\t_renderer.outputEncoding = LinearEncoding;\n\tscene.scale.z *= - 1;\n\n\tvar background = scene.background;\n\tif ( background && background.isColor ) {\n\n\t\tbackground.convertSRGBToLinear();\n\t\t// Convert linear to RGBE\n\t\tvar maxComponent = Math.max( background.r, background.g, background.b );\n\t\tvar fExp = Math.min( Math.max( Math.ceil( Math.log2( maxComponent ) ), - 128.0 ), 127.0 );\n\t\tbackground = background.multiplyScalar( Math.pow( 2.0, - fExp ) );\n\t\tvar alpha = ( fExp + 128.0 ) / 255.0;\n\t\t_renderer.setClearColor( background, alpha );\n\t\tscene.background = null;\n\n\t}\n\n\t_renderer.setRenderTarget( cubeUVRenderTarget );\n\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\tvar col = i % 3;\n\t\tif ( col == 0 ) {\n\n\t\t\tcubeCamera.up.set( 0, upSign[ i ], 0 );\n\t\t\tcubeCamera.lookAt( forwardSign[ i ], 0, 0 );\n\n\t\t} else if ( col == 1 ) {\n\n\t\t\tcubeCamera.up.set( 0, 0, upSign[ i ] );\n\t\t\tcubeCamera.lookAt( 0, forwardSign[ i ], 0 );\n\n\t\t} else {\n\n\t\t\tcubeCamera.up.set( 0, upSign[ i ], 0 );\n\t\t\tcubeCamera.lookAt( 0, 0, forwardSign[ i ] );\n\n\t\t}\n\t\t_setViewport(\n\t\t\tcol * SIZE_MAX, i > 2 ? SIZE_MAX : 0, SIZE_MAX, SIZE_MAX );\n\t\t_renderer.render( scene, cubeCamera );\n\n\t}\n\n\t_renderer.toneMapping = toneMapping;\n\t_renderer.toneMappingExposure = toneMappingExposure;\n\t_renderer.outputEncoding = outputEncoding;\n\t_renderer.setClearColor( clearColor, clearAlpha );\n\tscene.scale.z *= - 1;\n\n}\n\nfunction _textureToCubeUV( texture, cubeUVRenderTarget ) {\n\n\tvar scene = new Scene();\n\tif ( texture.isCubeTexture ) {\n\n\t\tif ( _cubemapShader == null ) {\n\n\t\t\t_cubemapShader = _getCubemapShader();\n\n\t\t}\n\n\t} else {\n\n\t\tif ( _equirectShader == null ) {\n\n\t\t\t_equirectShader = _getEquirectShader();\n\n\t\t}\n\n\t}\n\tvar material = texture.isCubeTexture ? _cubemapShader : _equirectShader;\n\tscene.add( new Mesh( _lodPlanes[ 0 ], material ) );\n\tvar uniforms = material.uniforms;\n\n\tuniforms[ 'envMap' ].value = texture;\n\tif ( ! texture.isCubeTexture ) {\n\n\t\tuniforms[ 'texelSize' ].value.set( 1.0 / texture.image.width, 1.0 / texture.image.height );\n\n\t}\n\tuniforms[ 'inputEncoding' ].value = ENCODINGS[ texture.encoding ];\n\tuniforms[ 'outputEncoding' ].value = ENCODINGS[ texture.encoding ];\n\n\t_renderer.setRenderTarget( cubeUVRenderTarget );\n\t_setViewport( 0, 0, 3 * SIZE_MAX, 2 * SIZE_MAX );\n\t_renderer.render( scene, _flatCamera );\n\n}\n\nfunction _compileMaterial( material ) {\n\n\tvar tmpScene = new Scene();\n\ttmpScene.add( new Mesh( _lodPlanes[ 0 ], material ) );\n\t_renderer.compile( tmpScene, _flatCamera );\n\n}\n\nfunction _createRenderTarget( params ) {\n\n\tvar cubeUVRenderTarget = new WebGLRenderTarget( 3 * SIZE_MAX, 3 * SIZE_MAX, params );\n\tcubeUVRenderTarget.texture.mapping = CubeUVReflectionMapping;\n\tcubeUVRenderTarget.texture.name = 'PMREM.cubeUv';\n\tcubeUVRenderTarget.scissorTest = true;\n\treturn cubeUVRenderTarget;\n\n}\n\nfunction _setViewport( x, y, width, height ) {\n\n\tvar invDpr = 1.0 / _renderer.getPixelRatio();\n\tx *= invDpr;\n\ty *= invDpr;\n\twidth *= invDpr;\n\theight *= invDpr;\n\t_renderer.setViewport( x, y, width, height );\n\t_renderer.setScissor( x, y, width, height );\n\n}\n\nfunction _applyPMREM( cubeUVRenderTarget ) {\n\n\tvar autoClear = _renderer.autoClear;\n\t_renderer.autoClear = false;\n\n\tfor ( var i = 1; i < TOTAL_LODS; i ++ ) {\n\n\t\tvar sigma = Math.sqrt(\n\t\t\t_sigmas[ i ] * _sigmas[ i ] -\n\t\t_sigmas[ i - 1 ] * _sigmas[ i - 1 ] );\n\t\tvar poleAxis =\n\t\t_axisDirections[ ( i - 1 ) % _axisDirections.length ];\n\t\t_blur( cubeUVRenderTarget, i - 1, i, sigma, poleAxis );\n\n\t}\n\n\t_renderer.autoClear = autoClear;\n\n}\n\n/**\n * This is a two-pass Gaussian blur for a cubemap. Normally this is done\n * vertically and horizontally, but this breaks down on a cube. Here we apply\n * the blur latitudinally (around the poles), and then longitudinally (towards\n * the poles) to approximate the orthogonally-separable blur. It is least\n * accurate at the poles, but still does a decent job.\n */\nfunction _blur( cubeUVRenderTarget, lodIn, lodOut, sigma, poleAxis ) {\n\n\t_halfBlur(\n\t\tcubeUVRenderTarget,\n\t\t_pingPongRenderTarget,\n\t\tlodIn,\n\t\tlodOut,\n\t\tsigma,\n\t\t'latitudinal',\n\t\tpoleAxis );\n\n\t_halfBlur(\n\t\t_pingPongRenderTarget,\n\t\tcubeUVRenderTarget,\n\t\tlodOut,\n\t\tlodOut,\n\t\tsigma,\n\t\t'longitudinal',\n\t\tpoleAxis );\n\n}\n\nfunction _halfBlur( targetIn, targetOut, lodIn, lodOut, sigmaRadians, direction, poleAxis ) {\n\n\tif ( direction !== 'latitudinal' && direction !== 'longitudinal' ) {\n\n\t\tconsole.error(\n\t\t\t'blur direction must be either latitudinal or longitudinal!' );\n\n\t}\n\n\t// Number of standard deviations at which to cut off the discrete approximation.\n\tvar STANDARD_DEVIATIONS = 3;\n\n\tvar blurScene = new Scene();\n\tblurScene.add( new Mesh( _lodPlanes[ lodOut ], _blurMaterial ) );\n\tvar blurUniforms = _blurMaterial.uniforms;\n\n\tvar pixels = _sizeLods[ lodIn ] - 1;\n\tvar radiansPerPixel = isFinite( sigmaRadians ) ? Math.PI / ( 2 * pixels ) : 2 * Math.PI / ( 2 * MAX_SAMPLES - 1 );\n\tvar sigmaPixels = sigmaRadians / radiansPerPixel;\n\tvar samples = isFinite( sigmaRadians ) ? 1 + Math.floor( STANDARD_DEVIATIONS * sigmaPixels ) : MAX_SAMPLES;\n\n\tif ( samples > MAX_SAMPLES ) {\n\n\t\tconsole.warn( `sigmaRadians, ${\n\t\t\tsigmaRadians}, is too large and will clip, as it requested ${\n\t\t\tsamples} samples when the maximum is set to ${MAX_SAMPLES}` );\n\n\t}\n\n\tvar weights = [];\n\tvar sum = 0;\n\n\tfor ( var i = 0; i < MAX_SAMPLES; ++ i ) {\n\n\t\tvar x = i / sigmaPixels;\n\t\tvar weight = Math.exp( - x * x / 2 );\n\t\tweights.push( weight );\n\n\t\tif ( i == 0 ) {\n\n\t\t\tsum += weight;\n\n\t\t} else if ( i < samples ) {\n\n\t\t\tsum += 2 * weight;\n\n\t\t}\n\n\t}\n\n\tfor ( var i = 0; i < weights.length; i ++ ) {\n\n\t\tweights[ i ] = weights[ i ] / sum;\n\n\t}\n\n\tblurUniforms[ 'envMap' ].value = targetIn.texture;\n\tblurUniforms[ 'samples' ].value = samples;\n\tblurUniforms[ 'weights' ].value = weights;\n\tblurUniforms[ 'latitudinal' ].value = direction === 'latitudinal';\n\tif ( poleAxis ) {\n\n\t\tblurUniforms[ 'poleAxis' ].value = poleAxis;\n\n\t}\n\tblurUniforms[ 'dTheta' ].value = radiansPerPixel;\n\tblurUniforms[ 'mipInt' ].value = LOD_MAX - lodIn;\n\tblurUniforms[ 'inputEncoding' ].value = ENCODINGS[ targetIn.texture.encoding ];\n\tblurUniforms[ 'outputEncoding' ].value = ENCODINGS[ targetIn.texture.encoding ];\n\n\tvar outputSize = _sizeLods[ lodOut ];\n\tvar x = 3 * Math.max( 0, SIZE_MAX - 2 * outputSize );\n\tvar y = ( lodOut === 0 ? 0 : 2 * SIZE_MAX ) +\n\t2 * outputSize *\n\t\t( lodOut > LOD_MAX - LOD_MIN ? lodOut - LOD_MAX + LOD_MIN : 0 );\n\n\t_renderer.setRenderTarget( targetOut );\n\t_setViewport( x, y, 3 * outputSize, 2 * outputSize );\n\t_renderer.render( blurScene, _flatCamera );\n\n}\n\nfunction _getBlurShader( maxSamples ) {\n\n\tvar weights = new Float32Array( maxSamples );\n\tvar poleAxis = new Vector3( 0, 1, 0 );\n\tvar shaderMaterial = new RawShaderMaterial( {\n\n\t\tdefines: { 'n': maxSamples },\n\n\t\tuniforms: {\n\t\t\t'envMap': { value: null },\n\t\t\t'samples': { value: 1 },\n\t\t\t'weights': { value: weights },\n\t\t\t'latitudinal': { value: false },\n\t\t\t'dTheta': { value: 0 },\n\t\t\t'mipInt': { value: 0 },\n\t\t\t'poleAxis': { value: poleAxis },\n\t\t\t'inputEncoding': { value: ENCODINGS[ LinearEncoding ] },\n\t\t\t'outputEncoding': { value: ENCODINGS[ LinearEncoding ] }\n\t\t},\n\n\t\tvertexShader: _getCommonVertexShader(),\n\n\t\tfragmentShader: `\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform sampler2D envMap;\nuniform int samples;\nuniform float weights[n];\nuniform bool latitudinal;\nuniform float dTheta;\nuniform float mipInt;\nuniform vec3 poleAxis;\n\n${_getEncodings()}\n\n#define ENVMAP_TYPE_CUBE_UV\n#include <cube_uv_reflection_fragment>\n\nvoid main() {\n\tgl_FragColor = vec4(0.0);\n\tfor (int i = 0; i < n; i++) {\n\t\tif (i >= samples)\n\t\t\tbreak;\n\t\tfor (int dir = -1; dir < 2; dir += 2) {\n\t\t\tif (i == 0 && dir == 1)\n\t\t\t\tcontinue;\n\t\t\tvec3 axis = latitudinal ? poleAxis : cross(poleAxis, vOutputDirection);\n\t\t\tif (all(equal(axis, vec3(0.0))))\n\t\t\t\taxis = cross(vec3(0.0, 1.0, 0.0), vOutputDirection);\n\t\t\taxis = normalize(axis);\n\t\t\tfloat theta = dTheta * float(dir * i);\n\t\t\tfloat cosTheta = cos(theta);\n\t\t\t// Rodrigues' axis-angle rotation\n\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross(axis, vOutputDirection) * sin(theta)\n\t\t\t\t\t+ axis * dot(axis, vOutputDirection) * (1.0 - cosTheta);\n\t\t\tgl_FragColor.rgb +=\n\t\t\t\t\tweights[i] * bilinearCubeUV(envMap, sampleDirection, mipInt);\n\t\t}\n\t}\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t`,\n\n\t\tblending: NoBlending,\n\t\tdepthTest: false,\n\t\tdepthWrite: false\n\n\t} );\n\n\tshaderMaterial.type = 'SphericalGaussianBlur';\n\n\treturn shaderMaterial;\n\n}\n\nfunction _getEquirectShader() {\n\n\tvar texelSize = new Vector2( 1, 1 );\n\tvar shaderMaterial = new RawShaderMaterial( {\n\n\t\tuniforms: {\n\t\t\t'envMap': { value: null },\n\t\t\t'texelSize': { value: texelSize },\n\t\t\t'inputEncoding': { value: ENCODINGS[ LinearEncoding ] },\n\t\t\t'outputEncoding': { value: ENCODINGS[ LinearEncoding ] }\n\t\t},\n\n\t\tvertexShader: _getCommonVertexShader(),\n\n\t\tfragmentShader: `\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform sampler2D envMap;\nuniform vec2 texelSize;\n\n${_getEncodings()}\n\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n\nvoid main() {\n\tgl_FragColor = vec4(0.0);\n\tvec3 outputDirection = normalize(vOutputDirection);\n\tvec2 uv;\n\tuv.y = asin(clamp(outputDirection.y, -1.0, 1.0)) * RECIPROCAL_PI + 0.5;\n\tuv.x = atan(outputDirection.z, outputDirection.x) * RECIPROCAL_PI2 + 0.5;\n\tvec2 f = fract(uv / texelSize - 0.5);\n\tuv -= f * texelSize;\n\tvec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.x += texelSize.x;\n\tvec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.y += texelSize.y;\n\tvec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.x -= texelSize.x;\n\tvec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tvec3 tm = mix(tl, tr, f.x);\n\tvec3 bm = mix(bl, br, f.x);\n\tgl_FragColor.rgb = mix(tm, bm, f.y);\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t`,\n\n\t\tblending: NoBlending,\n\t\tdepthTest: false,\n\t\tdepthWrite: false\n\n\t} );\n\n\tshaderMaterial.type = 'EquirectangularToCubeUV';\n\n\treturn shaderMaterial;\n\n}\n\nfunction _getCubemapShader() {\n\n\tvar shaderMaterial = new RawShaderMaterial( {\n\n\t\tuniforms: {\n\t\t\t'envMap': { value: null },\n\t\t\t'inputEncoding': { value: ENCODINGS[ LinearEncoding ] },\n\t\t\t'outputEncoding': { value: ENCODINGS[ LinearEncoding ] }\n\t\t},\n\n\t\tvertexShader: _getCommonVertexShader(),\n\n\t\tfragmentShader: `\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform samplerCube envMap;\n\n${_getEncodings()}\n\nvoid main() {\n\tgl_FragColor = vec4(0.0);\n\tgl_FragColor.rgb = envMapTexelToLinear(textureCube(envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ))).rgb;\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t`,\n\n\t\tblending: NoBlending,\n\t\tdepthTest: false,\n\t\tdepthWrite: false\n\n\t} );\n\n\tshaderMaterial.type = 'CubemapToCubeUV';\n\n\treturn shaderMaterial;\n\n}\n\nfunction _getCommonVertexShader() {\n\n\treturn `\nprecision mediump float;\nprecision mediump int;\nattribute vec3 position;\nattribute vec2 uv;\nattribute float faceIndex;\nvarying vec3 vOutputDirection;\nvec3 getDirection(vec2 uv, float face) {\n\tuv = 2.0 * uv - 1.0;\n\tvec3 direction = vec3(uv, 1.0);\n\tif (face == 0.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.z *= -1.0;\n\t} else if (face == 1.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.z *= -1.0;\n\t} else if (face == 3.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.x *= -1.0;\n\t} else if (face == 4.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.y *= -1.0;\n\t} else if (face == 5.0) {\n\t\tdirection.xz *= -1.0;\n\t}\n\treturn direction;\n}\nvoid main() {\n\tvOutputDirection = getDirection(uv, faceIndex);\n\tgl_Position = vec4( position, 1.0 );\n}\n\t`;\n\n}\n\nfunction _getEncodings() {\n\n\treturn `\nuniform int inputEncoding;\nuniform int outputEncoding;\n\n#include <encodings_pars_fragment>\n\nvec4 inputTexelToLinear(vec4 value){\n\tif(inputEncoding == 0){\n\t\treturn value;\n\t}else if(inputEncoding == 1){\n\t\treturn sRGBToLinear(value);\n\t}else if(inputEncoding == 2){\n\t\treturn RGBEToLinear(value);\n\t}else if(inputEncoding == 3){\n\t\treturn RGBMToLinear(value, 7.0);\n\t}else if(inputEncoding == 4){\n\t\treturn RGBMToLinear(value, 16.0);\n\t}else if(inputEncoding == 5){\n\t\treturn RGBDToLinear(value, 256.0);\n\t}else{\n\t\treturn GammaToLinear(value, 2.2);\n\t}\n}\n\nvec4 linearToOutputTexel(vec4 value){\n\tif(outputEncoding == 0){\n\t\treturn value;\n\t}else if(outputEncoding == 1){\n\t\treturn LinearTosRGB(value);\n\t}else if(outputEncoding == 2){\n\t\treturn LinearToRGBE(value);\n\t}else if(outputEncoding == 3){\n\t\treturn LinearToRGBM(value, 7.0);\n\t}else if(outputEncoding == 4){\n\t\treturn LinearToRGBM(value, 16.0);\n\t}else if(outputEncoding == 5){\n\t\treturn LinearToRGBD(value, 256.0);\n\t}else{\n\t\treturn LinearToGamma(value, 2.2);\n\t}\n}\n\nvec4 envMapTexelToLinear(vec4 color) {\n\treturn inputTexelToLinear(color);\n}\n\t`;\n\n}\n\nexport { PMREMGenerator };\n","/**\n * @author sroucheray / http://sroucheray.org/\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { LineSegments } from '../objects/LineSegments.js';\nimport { VertexColors } from '../constants.js';\nimport { LineBasicMaterial } from '../materials/LineBasicMaterial.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\n\nfunction AxesHelper( size ) {\n\n\tsize = size || 1;\n\n\tvar vertices = [\n\t\t0, 0, 0,\tsize, 0, 0,\n\t\t0, 0, 0,\t0, size, 0,\n\t\t0, 0, 0,\t0, 0, size\n\t];\n\n\tvar colors = [\n\t\t1, 0, 0,\t1, 0.6, 0,\n\t\t0, 1, 0,\t0.6, 1, 0,\n\t\t0, 0, 1,\t0, 0.6, 1\n\t];\n\n\tvar geometry = new BufferGeometry();\n\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\tvar material = new LineBasicMaterial( { vertexColors: VertexColors } );\n\n\tLineSegments.call( this, geometry, material );\n\n}\n\nAxesHelper.prototype = Object.create( LineSegments.prototype );\nAxesHelper.prototype.constructor = AxesHelper;\n\n\nexport { AxesHelper };\n","import { Vector3 } from './Vector3.js';\n\nvar _points = [\n\tnew Vector3(),\n\tnew Vector3(),\n\tnew Vector3(),\n\tnew Vector3(),\n\tnew Vector3(),\n\tnew Vector3(),\n\tnew Vector3(),\n\tnew Vector3()\n];\n\nvar _vector = new Vector3();\n\nvar _box = new Box3();\n\n// triangle centered vertices\n\nvar _v0 = new Vector3();\nvar _v1 = new Vector3();\nvar _v2 = new Vector3();\n\n// triangle edge vectors\n\nvar _f0 = new Vector3();\nvar _f1 = new Vector3();\nvar _f2 = new Vector3();\n\nvar _center = new Vector3();\nvar _extents = new Vector3();\nvar _triangleNormal = new Vector3();\nvar _testAxis = new Vector3();\n\n/**\n * @author bhouston / http://clara.io\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction Box3( min, max ) {\n\n\tthis.min = ( min !== undefined ) ? min : new Vector3( + Infinity, + Infinity, + Infinity );\n\tthis.max = ( max !== undefined ) ? max : new Vector3( - Infinity, - Infinity, - Infinity );\n\n}\n\n\nObject.assign( Box3.prototype, {\n\n\tisBox3: true,\n\n\tset: function ( min, max ) {\n\n\t\tthis.min.copy( min );\n\t\tthis.max.copy( max );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromArray: function ( array ) {\n\n\t\tvar minX = + Infinity;\n\t\tvar minY = + Infinity;\n\t\tvar minZ = + Infinity;\n\n\t\tvar maxX = - Infinity;\n\t\tvar maxY = - Infinity;\n\t\tvar maxZ = - Infinity;\n\n\t\tfor ( var i = 0, l = array.length; i < l; i += 3 ) {\n\n\t\t\tvar x = array[ i ];\n\t\t\tvar y = array[ i + 1 ];\n\t\t\tvar z = array[ i + 2 ];\n\n\t\t\tif ( x < minX ) minX = x;\n\t\t\tif ( y < minY ) minY = y;\n\t\t\tif ( z < minZ ) minZ = z;\n\n\t\t\tif ( x > maxX ) maxX = x;\n\t\t\tif ( y > maxY ) maxY = y;\n\t\t\tif ( z > maxZ ) maxZ = z;\n\n\t\t}\n\n\t\tthis.min.set( minX, minY, minZ );\n\t\tthis.max.set( maxX, maxY, maxZ );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromBufferAttribute: function ( attribute ) {\n\n\t\tvar minX = + Infinity;\n\t\tvar minY = + Infinity;\n\t\tvar minZ = + Infinity;\n\n\t\tvar maxX = - Infinity;\n\t\tvar maxY = - Infinity;\n\t\tvar maxZ = - Infinity;\n\n\t\tfor ( var i = 0, l = attribute.count; i < l; i ++ ) {\n\n\t\t\tvar x = attribute.getX( i );\n\t\t\tvar y = attribute.getY( i );\n\t\t\tvar z = attribute.getZ( i );\n\n\t\t\tif ( x < minX ) minX = x;\n\t\t\tif ( y < minY ) minY = y;\n\t\t\tif ( z < minZ ) minZ = z;\n\n\t\t\tif ( x > maxX ) maxX = x;\n\t\t\tif ( y > maxY ) maxY = y;\n\t\t\tif ( z > maxZ ) maxZ = z;\n\n\t\t}\n\n\t\tthis.min.set( minX, minY, minZ );\n\t\tthis.max.set( maxX, maxY, maxZ );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPoints: function ( points ) {\n\n\t\tthis.makeEmpty();\n\n\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tthis.expandByPoint( points[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCenterAndSize: function ( center, size ) {\n\n\t\tvar halfSize = _vector.copy( size ).multiplyScalar( 0.5 );\n\n\t\tthis.min.copy( center ).sub( halfSize );\n\t\tthis.max.copy( center ).add( halfSize );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromObject: function ( object ) {\n\n\t\tthis.makeEmpty();\n\n\t\treturn this.expandByObject( object );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( box ) {\n\n\t\tthis.min.copy( box.min );\n\t\tthis.max.copy( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tmakeEmpty: function () {\n\n\t\tthis.min.x = this.min.y = this.min.z = + Infinity;\n\t\tthis.max.x = this.max.y = this.max.z = - Infinity;\n\n\t\treturn this;\n\n\t},\n\n\tisEmpty: function () {\n\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y ) || ( this.max.z < this.min.z );\n\n\t},\n\n\tgetCenter: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .getCenter() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn this.isEmpty() ? target.set( 0, 0, 0 ) : target.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\n\n\t},\n\n\tgetSize: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .getSize() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn this.isEmpty() ? target.set( 0, 0, 0 ) : target.subVectors( this.max, this.min );\n\n\t},\n\n\texpandByPoint: function ( point ) {\n\n\t\tthis.min.min( point );\n\t\tthis.max.max( point );\n\n\t\treturn this;\n\n\t},\n\n\texpandByVector: function ( vector ) {\n\n\t\tthis.min.sub( vector );\n\t\tthis.max.add( vector );\n\n\t\treturn this;\n\n\t},\n\n\texpandByScalar: function ( scalar ) {\n\n\t\tthis.min.addScalar( - scalar );\n\t\tthis.max.addScalar( scalar );\n\n\t\treturn this;\n\n\t},\n\n\texpandByObject: function ( object ) {\n\n\t\t// Computes the world-axis-aligned bounding box of an object (including its children),\n\t\t// accounting for both the object's, and children's, world transforms\n\n\t\tobject.updateWorldMatrix( false, false );\n\n\t\tvar geometry = object.geometry;\n\n\t\tif ( geometry !== undefined ) {\n\n\t\t\tif ( geometry.boundingBox === null ) {\n\n\t\t\t\tgeometry.computeBoundingBox();\n\n\t\t\t}\n\n\t\t\t_box.copy( geometry.boundingBox );\n\t\t\t_box.applyMatrix4( object.matrixWorld );\n\n\t\t\tthis.expandByPoint( _box.min );\n\t\t\tthis.expandByPoint( _box.max );\n\n\t\t}\n\n\t\tvar children = object.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tthis.expandByObject( children[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\treturn point.x < this.min.x || point.x > this.max.x ||\n\t\t\tpoint.y < this.min.y || point.y > this.max.y ||\n\t\t\tpoint.z < this.min.z || point.z > this.max.z ? false : true;\n\n\t},\n\n\tcontainsBox: function ( box ) {\n\n\t\treturn this.min.x <= box.min.x && box.max.x <= this.max.x &&\n\t\t\tthis.min.y <= box.min.y && box.max.y <= this.max.y &&\n\t\t\tthis.min.z <= box.min.z && box.max.z <= this.max.z;\n\n\t},\n\n\tgetParameter: function ( point, target ) {\n\n\t\t// This can potentially have a divide by zero if the box\n\t\t// has a size dimension of 0.\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .getParameter() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.set(\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y ),\n\t\t\t( point.z - this.min.z ) / ( this.max.z - this.min.z )\n\t\t);\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\t// using 6 splitting planes to rule out intersections.\n\t\treturn box.max.x < this.min.x || box.min.x > this.max.x ||\n\t\t\tbox.max.y < this.min.y || box.min.y > this.max.y ||\n\t\t\tbox.max.z < this.min.z || box.min.z > this.max.z ? false : true;\n\n\t},\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\t// Find the point on the AABB closest to the sphere center.\n\t\tthis.clampPoint( sphere.center, _vector );\n\n\t\t// If that point is inside the sphere, the AABB and sphere intersect.\n\t\treturn _vector.distanceToSquared( sphere.center ) <= ( sphere.radius * sphere.radius );\n\n\t},\n\n\tintersectsPlane: function ( plane ) {\n\n\t\t// We compute the minimum and maximum dot product values. If those values\n\t\t// are on the same side (back or front) of the plane, then there is no intersection.\n\n\t\tvar min, max;\n\n\t\tif ( plane.normal.x > 0 ) {\n\n\t\t\tmin = plane.normal.x * this.min.x;\n\t\t\tmax = plane.normal.x * this.max.x;\n\n\t\t} else {\n\n\t\t\tmin = plane.normal.x * this.max.x;\n\t\t\tmax = plane.normal.x * this.min.x;\n\n\t\t}\n\n\t\tif ( plane.normal.y > 0 ) {\n\n\t\t\tmin += plane.normal.y * this.min.y;\n\t\t\tmax += plane.normal.y * this.max.y;\n\n\t\t} else {\n\n\t\t\tmin += plane.normal.y * this.max.y;\n\t\t\tmax += plane.normal.y * this.min.y;\n\n\t\t}\n\n\t\tif ( plane.normal.z > 0 ) {\n\n\t\t\tmin += plane.normal.z * this.min.z;\n\t\t\tmax += plane.normal.z * this.max.z;\n\n\t\t} else {\n\n\t\t\tmin += plane.normal.z * this.max.z;\n\t\t\tmax += plane.normal.z * this.min.z;\n\n\t\t}\n\n\t\treturn ( min <= - plane.constant && max >= - plane.constant );\n\n\t},\n\n\tintersectsTriangle: function ( triangle ) {\n\n\t\tif ( this.isEmpty() ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t// compute box center and extents\n\t\tthis.getCenter( _center );\n\t\t_extents.subVectors( this.max, _center );\n\n\t\t// translate triangle to aabb origin\n\t\t_v0.subVectors( triangle.a, _center );\n\t\t_v1.subVectors( triangle.b, _center );\n\t\t_v2.subVectors( triangle.c, _center );\n\n\t\t// compute edge vectors for triangle\n\t\t_f0.subVectors( _v1, _v0 );\n\t\t_f1.subVectors( _v2, _v1 );\n\t\t_f2.subVectors( _v0, _v2 );\n\n\t\t// test against axes that are given by cross product combinations of the edges of the triangle and the edges of the aabb\n\t\t// make an axis testing of each of the 3 sides of the aabb against each of the 3 sides of the triangle = 9 axis of separation\n\t\t// axis_ij = u_i x f_j (u0, u1, u2 = face normals of aabb = x,y,z axes vectors since aabb is axis aligned)\n\t\tvar axes = [\n\t\t\t0, - _f0.z, _f0.y, 0, - _f1.z, _f1.y, 0, - _f2.z, _f2.y,\n\t\t\t_f0.z, 0, - _f0.x, _f1.z, 0, - _f1.x, _f2.z, 0, - _f2.x,\n\t\t\t- _f0.y, _f0.x, 0, - _f1.y, _f1.x, 0, - _f2.y, _f2.x, 0\n\t\t];\n\t\tif ( ! satForAxes( axes, _v0, _v1, _v2, _extents ) ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t// test 3 face normals from the aabb\n\t\taxes = [ 1, 0, 0, 0, 1, 0, 0, 0, 1 ];\n\t\tif ( ! satForAxes( axes, _v0, _v1, _v2, _extents ) ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t// finally testing the face normal of the triangle\n\t\t// use already existing triangle edge vectors here\n\t\t_triangleNormal.crossVectors( _f0, _f1 );\n\t\taxes = [ _triangleNormal.x, _triangleNormal.y, _triangleNormal.z ];\n\n\t\treturn satForAxes( axes, _v0, _v1, _v2, _extents );\n\n\t},\n\n\tclampPoint: function ( point, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .clampPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( point ).clamp( this.min, this.max );\n\n\t},\n\n\tdistanceToPoint: function ( point ) {\n\n\t\tvar clampedPoint = _vector.copy( point ).clamp( this.min, this.max );\n\n\t\treturn clampedPoint.sub( point ).length();\n\n\t},\n\n\tgetBoundingSphere: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.error( 'THREE.Box3: .getBoundingSphere() target is now required' );\n\t\t\t//target = new Sphere(); // removed to avoid cyclic dependency\n\n\t\t}\n\n\t\tthis.getCenter( target.center );\n\n\t\ttarget.radius = this.getSize( _vector ).length() * 0.5;\n\n\t\treturn target;\n\n\t},\n\n\tintersect: function ( box ) {\n\n\t\tthis.min.max( box.min );\n\t\tthis.max.min( box.max );\n\n\t\t// ensure that if there is no overlap, the result is fully empty, not slightly empty with non-inf/+inf values that will cause subsequence intersects to erroneously return valid values.\n\t\tif ( this.isEmpty() ) this.makeEmpty();\n\n\t\treturn this;\n\n\t},\n\n\tunion: function ( box ) {\n\n\t\tthis.min.min( box.min );\n\t\tthis.max.max( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\t// transform of empty box is an empty box.\n\t\tif ( this.isEmpty() ) return this;\n\n\t\t// NOTE: I am using a binary pattern to specify all 2^3 combinations below\n\t\t_points[ 0 ].set( this.min.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 000\n\t\t_points[ 1 ].set( this.min.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 001\n\t\t_points[ 2 ].set( this.min.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 010\n\t\t_points[ 3 ].set( this.min.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 011\n\t\t_points[ 4 ].set( this.max.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 100\n\t\t_points[ 5 ].set( this.max.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 101\n\t\t_points[ 6 ].set( this.max.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 110\n\t\t_points[ 7 ].set( this.max.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 111\n\n\t\tthis.setFromPoints( _points );\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.min.add( offset );\n\t\tthis.max.add( offset );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( box ) {\n\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\n\n\t}\n\n} );\n\nfunction satForAxes( axes, v0, v1, v2, extents ) {\n\n\tvar i, j;\n\n\tfor ( i = 0, j = axes.length - 3; i <= j; i += 3 ) {\n\n\t\t_testAxis.fromArray( axes, i );\n\t\t// project the aabb onto the seperating axis\n\t\tvar r = extents.x * Math.abs( _testAxis.x ) + extents.y * Math.abs( _testAxis.y ) + extents.z * Math.abs( _testAxis.z );\n\t\t// project all 3 vertices of the triangle onto the seperating axis\n\t\tvar p0 = v0.dot( _testAxis );\n\t\tvar p1 = v1.dot( _testAxis );\n\t\tvar p2 = v2.dot( _testAxis );\n\t\t// actual test, basically see if either of the most extreme of the triangle points intersects r\n\t\tif ( Math.max( - Math.max( p0, p1, p2 ), Math.min( p0, p1, p2 ) ) > r ) {\n\n\t\t\t// points of the projected triangle are outside the projected half-length of the aabb\n\t\t\t// the axis is seperating and we can exit\n\t\t\treturn false;\n\n\t\t}\n\n\t}\n\n\treturn true;\n\n}\n\nexport { Box3 };\n","/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n *\n * Bezier Curves formulas obtained from\n * http://en.wikipedia.org/wiki/Bézier_curve\n */\n\nfunction CatmullRom( t, p0, p1, p2, p3 ) {\n\n\tvar v0 = ( p2 - p0 ) * 0.5;\n\tvar v1 = ( p3 - p1 ) * 0.5;\n\tvar t2 = t * t;\n\tvar t3 = t * t2;\n\treturn ( 2 * p1 - 2 * p2 + v0 + v1 ) * t3 + ( - 3 * p1 + 3 * p2 - 2 * v0 - v1 ) * t2 + v0 * t + p1;\n\n}\n\n//\n\nfunction QuadraticBezierP0( t, p ) {\n\n\tvar k = 1 - t;\n\treturn k * k * p;\n\n}\n\nfunction QuadraticBezierP1( t, p ) {\n\n\treturn 2 * ( 1 - t ) * t * p;\n\n}\n\nfunction QuadraticBezierP2( t, p ) {\n\n\treturn t * t * p;\n\n}\n\nfunction QuadraticBezier( t, p0, p1, p2 ) {\n\n\treturn QuadraticBezierP0( t, p0 ) + QuadraticBezierP1( t, p1 ) +\n\t\tQuadraticBezierP2( t, p2 );\n\n}\n\n//\n\nfunction CubicBezierP0( t, p ) {\n\n\tvar k = 1 - t;\n\treturn k * k * k * p;\n\n}\n\nfunction CubicBezierP1( t, p ) {\n\n\tvar k = 1 - t;\n\treturn 3 * k * k * t * p;\n\n}\n\nfunction CubicBezierP2( t, p ) {\n\n\treturn 3 * ( 1 - t ) * t * t * p;\n\n}\n\nfunction CubicBezierP3( t, p ) {\n\n\treturn t * t * t * p;\n\n}\n\nfunction CubicBezier( t, p0, p1, p2, p3 ) {\n\n\treturn CubicBezierP0( t, p0 ) + CubicBezierP1( t, p1 ) + CubicBezierP2( t, p2 ) +\n\t\tCubicBezierP3( t, p3 );\n\n}\n\nexport { CatmullRom, QuadraticBezier, CubicBezier };\n","import { Object3D } from '../core/Object3D.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Scene() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Scene';\n\n\tthis.background = null;\n\tthis.environment = null;\n\tthis.fog = null;\n\n\tthis.overrideMaterial = null;\n\n\tthis.autoUpdate = true; // checked by the renderer\n\n\tif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\n\n\t\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'observe', { detail: this } ) ); // eslint-disable-line no-undef\n\n\t}\n\n}\n\nScene.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Scene,\n\n\tisScene: true,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tObject3D.prototype.copy.call( this, source, recursive );\n\n\t\tif ( source.background !== null ) this.background = source.background.clone();\n\t\tif ( source.environment !== null ) this.environment = source.environment.clone();\n\t\tif ( source.fog !== null ) this.fog = source.fog.clone();\n\n\t\tif ( source.overrideMaterial !== null ) this.overrideMaterial = source.overrideMaterial.clone();\n\n\t\tthis.autoUpdate = source.autoUpdate;\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tif ( this.background !== null ) data.object.background = this.background.toJSON( meta );\n\t\tif ( this.environment !== null ) data.object.environment = this.environment.toJSON( meta );\n\t\tif ( this.fog !== null ) data.object.fog = this.fog.toJSON();\n\n\t\treturn data;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\n\n\nexport { Scene };\n"],"sourceRoot":""}