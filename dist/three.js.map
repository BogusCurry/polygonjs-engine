{"version":3,"sources":["webpack://polygonjs-engine/./node_modules/three/src/constants.js","webpack://polygonjs-engine/./node_modules/three/src/math/Vector3.js","webpack://polygonjs-engine/./node_modules/three/src/core/Object3D.js","webpack://polygonjs-engine/./node_modules/three/src/animation/AnimationAction.js","webpack://polygonjs-engine/./node_modules/three/src/animation/PropertyMixer.js","webpack://polygonjs-engine/./node_modules/three/src/animation/AnimationMixer.js","webpack://polygonjs-engine/./node_modules/three/src/extras/core/Font.js","webpack://polygonjs-engine/./node_modules/three/src/loaders/FontLoader.js","webpack://polygonjs-engine/./node_modules/three/src/math/Ray.js","webpack://polygonjs-engine/./node_modules/three/src/loaders/DataTextureLoader.js","webpack://polygonjs-engine/./node_modules/three/src/loaders/LoaderUtils.js","webpack://polygonjs-engine/./node_modules/three/src/core/Geometry.js","webpack://polygonjs-engine/./node_modules/three/src/extras/curves/EllipseCurve.js","webpack://polygonjs-engine/./node_modules/three/src/extras/core/Curve.js","webpack://polygonjs-engine/./node_modules/three/src/animation/tracks/BooleanKeyframeTrack.js","webpack://polygonjs-engine/./node_modules/three/src/animation/tracks/ColorKeyframeTrack.js","webpack://polygonjs-engine/./node_modules/three/src/animation/tracks/StringKeyframeTrack.js","webpack://polygonjs-engine/./node_modules/three/src/animation/AnimationClip.js","webpack://polygonjs-engine/./node_modules/three/src/textures/CompressedTexture.js","webpack://polygonjs-engine/./node_modules/three/src/geometries/BoxGeometry.js","webpack://polygonjs-engine/./node_modules/three/src/geometries/ExtrudeGeometry.js","webpack://polygonjs-engine/./node_modules/three/src/math/Frustum.js","webpack://polygonjs-engine/./node_modules/three/src/materials/RawShaderMaterial.js","webpack://polygonjs-engine/./node_modules/three/src/math/MathUtils.js","webpack://polygonjs-engine/./node_modules/three/src/core/InterleavedBuffer.js","webpack://polygonjs-engine/./node_modules/three/src/loaders/Cache.js","webpack://polygonjs-engine/./node_modules/three/src/animation/tracks/NumberKeyframeTrack.js","webpack://polygonjs-engine/./node_modules/three/src/animation/tracks/VectorKeyframeTrack.js","webpack://polygonjs-engine/./node_modules/three/src/extras/core/Shape.js","webpack://polygonjs-engine/./node_modules/three/src/extras/curves/ArcCurve.js","webpack://polygonjs-engine/./node_modules/three/src/extras/curves/CubicBezierCurve3.js","webpack://polygonjs-engine/./node_modules/three/src/extras/curves/LineCurve3.js","webpack://polygonjs-engine/./node_modules/three/src/extras/curves/QuadraticBezierCurve3.js","webpack://polygonjs-engine/./node_modules/three/src/math/Matrix4.js","webpack://polygonjs-engine/./node_modules/three/src/materials/MeshLambertMaterial.js","webpack://polygonjs-engine/./node_modules/three/src/geometries/SphereGeometry.js","webpack://polygonjs-engine/./node_modules/three/src/lights/DirectionalLightShadow.js","webpack://polygonjs-engine/./node_modules/three/src/lights/DirectionalLight.js","webpack://polygonjs-engine/./node_modules/three/src/lights/PointLightShadow.js","webpack://polygonjs-engine/./node_modules/three/src/lights/PointLight.js","webpack://polygonjs-engine/./node_modules/three/src/lights/SpotLightShadow.js","webpack://polygonjs-engine/./node_modules/three/src/lights/SpotLight.js","webpack://polygonjs-engine/./node_modules/three/src/core/Face3.js","webpack://polygonjs-engine/./node_modules/three/src/math/interpolants/QuaternionLinearInterpolant.js","webpack://polygonjs-engine/./node_modules/three/src/animation/tracks/QuaternionKeyframeTrack.js","webpack://polygonjs-engine/./node_modules/three/src/loaders/Loader.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/alphamap_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/alphamap_pars_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/alphatest_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/aomap_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/aomap_pars_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/begin_vertex.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/beginnormal_vertex.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/bsdfs.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/bumpmap_pars_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/clipping_planes_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/clipping_planes_pars_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/clipping_planes_pars_vertex.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/clipping_planes_vertex.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/color_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/color_pars_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/color_pars_vertex.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/color_vertex.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/common.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/cube_uv_reflection_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/defaultnormal_vertex.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/displacementmap_pars_vertex.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/displacementmap_vertex.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/emissivemap_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/emissivemap_pars_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/encodings_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/encodings_pars_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/envmap_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/envmap_common_pars_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/envmap_pars_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/envmap_pars_vertex.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/envmap_physical_pars_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/envmap_vertex.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/fog_vertex.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/fog_pars_vertex.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/fog_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/fog_pars_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/gradientmap_pars_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/lightmap_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/lightmap_pars_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/lights_lambert_vertex.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/lights_pars_begin.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/lights_toon_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/lights_toon_pars_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/lights_phong_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/lights_phong_pars_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/lights_physical_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/lights_physical_pars_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/lights_fragment_begin.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/lights_fragment_maps.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/lights_fragment_end.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/logdepthbuf_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/logdepthbuf_pars_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/logdepthbuf_pars_vertex.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/logdepthbuf_vertex.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/map_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/map_pars_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/map_particle_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/map_particle_pars_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/metalnessmap_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/metalnessmap_pars_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/morphnormal_vertex.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/morphtarget_pars_vertex.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/morphtarget_vertex.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/normal_fragment_begin.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/normal_fragment_maps.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/normalmap_pars_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/clearcoat_normal_fragment_begin.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/clearcoat_normal_fragment_maps.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/clearcoat_pars_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/packing.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/premultiplied_alpha_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/project_vertex.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/dithering_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/dithering_pars_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/roughnessmap_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/roughnessmap_pars_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/shadowmap_pars_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/shadowmap_pars_vertex.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/shadowmap_vertex.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/shadowmask_pars_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/skinbase_vertex.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/skinning_pars_vertex.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/skinning_vertex.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/skinnormal_vertex.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/specularmap_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/specularmap_pars_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/tonemapping_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/tonemapping_pars_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/uv_pars_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/uv_pars_vertex.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/uv_vertex.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/uv2_pars_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/uv2_pars_vertex.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/uv2_vertex.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/worldpos_vertex.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderLib/background_frag.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderLib/background_vert.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderLib/cube_frag.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderLib/cube_vert.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderLib/depth_frag.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderLib/depth_vert.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderLib/distanceRGBA_frag.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderLib/distanceRGBA_vert.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderLib/equirect_frag.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderLib/equirect_vert.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderLib/linedashed_frag.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderLib/linedashed_vert.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderLib/meshbasic_frag.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderLib/meshbasic_vert.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderLib/meshlambert_frag.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderLib/meshlambert_vert.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderLib/meshmatcap_frag.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderLib/meshmatcap_vert.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderLib/meshtoon_frag.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderLib/meshtoon_vert.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderLib/meshphong_frag.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderLib/meshphong_vert.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderLib/meshphysical_frag.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderLib/meshphysical_vert.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderLib/normal_frag.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderLib/normal_vert.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderLib/points_frag.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderLib/points_vert.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderLib/shadow_frag.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderLib/shadow_vert.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderLib/sprite_frag.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderLib/sprite_vert.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/math/Vector2.js","webpack://polygonjs-engine/./node_modules/three/src/math/Vector4.js","webpack://polygonjs-engine/./node_modules/three/src/geometries/OctahedronGeometry.js","webpack://polygonjs-engine/./node_modules/three/src/geometries/IcosahedronGeometry.js","webpack://polygonjs-engine/./node_modules/three/src/geometries/TorusKnotGeometry.js","webpack://polygonjs-engine/./node_modules/three/src/geometries/TorusGeometry.js","webpack://polygonjs-engine/./node_modules/three/src/geometries/TextGeometry.js","webpack://polygonjs-engine/./node_modules/three/src/geometries/ShapeGeometry.js","webpack://polygonjs-engine/./node_modules/three/src/geometries/ConeGeometry.js","webpack://polygonjs-engine/./node_modules/three/src/geometries/CircleGeometry.js","webpack://polygonjs-engine/./node_modules/three/src/math/Euler.js","webpack://polygonjs-engine/./node_modules/three/src/materials/MeshDepthMaterial.js","webpack://polygonjs-engine/./node_modules/three/src/objects/Mesh.js","webpack://polygonjs-engine/./node_modules/three/src/materials/MeshDistanceMaterial.js","webpack://polygonjs-engine/./node_modules/three/src/extras/curves/CubicBezierCurve.js","webpack://polygonjs-engine/./node_modules/three/src/extras/curves/LineCurve.js","webpack://polygonjs-engine/./node_modules/three/src/extras/curves/QuadraticBezierCurve.js","webpack://polygonjs-engine/./node_modules/three/src/extras/curves/SplineCurve.js","webpack://polygonjs-engine/./node_modules/three/src/materials/MeshPhysicalMaterial.js","webpack://polygonjs-engine/./node_modules/three/src/materials/MeshPhongMaterial.js","webpack://polygonjs-engine/./node_modules/three/src/core/InstancedBufferAttribute.js","webpack://polygonjs-engine/./node_modules/three/src/core/Layers.js","webpack://polygonjs-engine/./node_modules/three/src/utils.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/UniformsUtils.js","webpack://polygonjs-engine/./node_modules/three/src/textures/CubeTexture.js","webpack://polygonjs-engine/./node_modules/three/src/loaders/ImageLoader.js","webpack://polygonjs-engine/./node_modules/three/src/loaders/LoadingManager.js","webpack://polygonjs-engine/./node_modules/three/src/math/interpolants/LinearInterpolant.js","webpack://polygonjs-engine/./node_modules/three/src/animation/PropertyBinding.js","webpack://polygonjs-engine/./node_modules/three/src/objects/LineLoop.js","webpack://polygonjs-engine/./node_modules/three/src/math/Matrix3.js","webpack://polygonjs-engine/./node_modules/three/src/materials/ShaderMaterial.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/default_vertex.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderChunk/default_fragment.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/core/Raycaster.js","webpack://polygonjs-engine/./node_modules/three/src/textures/VideoTexture.js","webpack://polygonjs-engine/./node_modules/three/src/extras/curves/CatmullRomCurve3.js","webpack://polygonjs-engine/./node_modules/three/src/math/interpolants/CubicInterpolant.js","webpack://polygonjs-engine/./node_modules/three/src/loaders/TextureLoader.js","webpack://polygonjs-engine/./node_modules/three/src/lights/AmbientLight.js","webpack://polygonjs-engine/./node_modules/three/src/lights/RectAreaLight.js","webpack://polygonjs-engine/./node_modules/three/src/lights/HemisphereLight.js","webpack://polygonjs-engine/./node_modules/three/src/scenes/FogExp2.js","webpack://polygonjs-engine/./node_modules/three/src/scenes/Fog.js","webpack://polygonjs-engine/./node_modules/three/src/objects/SkinnedMesh.js","webpack://polygonjs-engine/./node_modules/three/src/objects/Bone.js","webpack://polygonjs-engine/./node_modules/three/src/core/InstancedBufferGeometry.js","webpack://polygonjs-engine/./node_modules/three/src/math/Spherical.js","webpack://polygonjs-engine/./node_modules/three/src/loaders/FileLoader.js","webpack://polygonjs-engine/./node_modules/three/src/extras/ImageUtils.js","webpack://polygonjs-engine/./node_modules/three/src/textures/Texture.js","webpack://polygonjs-engine/./node_modules/three/src/lights/Light.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderLib.js","webpack://polygonjs-engine/./node_modules/three/src/math/interpolants/DiscreteInterpolant.js","webpack://polygonjs-engine/./node_modules/three/src/animation/KeyframeTrack.js","webpack://polygonjs-engine/./node_modules/three/src/animation/AnimationUtils.js","webpack://polygonjs-engine/./node_modules/three/src/core/BufferAttribute.js","webpack://polygonjs-engine/./node_modules/three/src/objects/Group.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/webgl/WebGLAnimation.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/webgl/WebGLAttributes.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/webgl/WebGLBackground.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/webgl/WebGLBufferRenderer.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/webgl/WebGLCapabilities.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/webgl/WebGLClipping.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/webgl/WebGLExtensions.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/webgl/WebGLGeometries.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/webgl/WebGLIndexedBufferRenderer.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/webgl/WebGLInfo.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/webgl/WebGLMorphtargets.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/webgl/WebGLObjects.js","webpack://polygonjs-engine/./node_modules/three/src/textures/DataTexture2DArray.js","webpack://polygonjs-engine/./node_modules/three/src/textures/DataTexture3D.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/webgl/WebGLUniforms.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/webgl/WebGLShader.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/webgl/WebGLProgram.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/webgl/WebGLPrograms.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/webgl/WebGLProperties.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/webgl/WebGLRenderLists.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/webgl/WebGLLights.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/webgl/WebGLRenderStates.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/webgl/WebGLShadowMap.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderLib/vsm_vert.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/ShaderLib/vsm_frag.glsl.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/webgl/WebGLState.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/webgl/WebGLTextures.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/webgl/WebGLUtils.js","webpack://polygonjs-engine/./node_modules/three/src/cameras/ArrayCamera.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/webxr/WebXRManager.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/WebGLRenderer.js","webpack://polygonjs-engine/./node_modules/three/src/objects/InstancedMesh.js","webpack://polygonjs-engine/./node_modules/three/src/objects/Sprite.js","webpack://polygonjs-engine/./node_modules/three/src/materials/SpriteMaterial.js","webpack://polygonjs-engine/./node_modules/three/src/objects/LOD.js","webpack://polygonjs-engine/./node_modules/three/src/materials/ShadowMaterial.js","webpack://polygonjs-engine/./node_modules/three/src/materials/MeshToonMaterial.js","webpack://polygonjs-engine/./node_modules/three/src/materials/MeshNormalMaterial.js","webpack://polygonjs-engine/./node_modules/three/src/materials/MeshMatcapMaterial.js","webpack://polygonjs-engine/./node_modules/three/src/materials/LineDashedMaterial.js","webpack://polygonjs-engine/./node_modules/three/src/loaders/MaterialLoader.js","webpack://polygonjs-engine/./node_modules/three/src/loaders/BufferGeometryLoader.js","webpack://polygonjs-engine/./node_modules/three/src/geometries/WireframeGeometry.js","webpack://polygonjs-engine/./node_modules/three/src/geometries/ParametricGeometry.js","webpack://polygonjs-engine/./node_modules/three/src/geometries/TetrahedronGeometry.js","webpack://polygonjs-engine/./node_modules/three/src/geometries/DodecahedronGeometry.js","webpack://polygonjs-engine/./node_modules/three/src/geometries/TubeGeometry.js","webpack://polygonjs-engine/./node_modules/three/src/geometries/RingGeometry.js","webpack://polygonjs-engine/./node_modules/three/src/geometries/LatheGeometry.js","webpack://polygonjs-engine/./node_modules/three/src/geometries/EdgesGeometry.js","webpack://polygonjs-engine/./node_modules/three/src/loaders/ObjectLoader.js","webpack://polygonjs-engine/./node_modules/three/src/materials/LineBasicMaterial.js","webpack://polygonjs-engine/./node_modules/three/src/core/Clock.js","webpack://polygonjs-engine/./node_modules/three/src/objects/Skeleton.js","webpack://polygonjs-engine/./node_modules/three/src/math/Quaternion.js","webpack://polygonjs-engine/./node_modules/three/src/core/EventDispatcher.js","webpack://polygonjs-engine/./node_modules/three/src/math/Sphere.js","webpack://polygonjs-engine/./node_modules/three/src/cameras/PerspectiveCamera.js","webpack://polygonjs-engine/./node_modules/three/src/extras/core/Interpolations.js","webpack://polygonjs-engine/./node_modules/three/src/geometries/PolyhedronGeometry.js","webpack://polygonjs-engine/./node_modules/three/src/math/Interpolant.js","webpack://polygonjs-engine/./node_modules/three/src/geometries/PlaneGeometry.js","webpack://polygonjs-engine/./node_modules/three/src/scenes/Scene.js","webpack://polygonjs-engine/./node_modules/three/src/materials/MeshBasicMaterial.js","webpack://polygonjs-engine/./node_modules/three/src/objects/LineSegments.js","webpack://polygonjs-engine/./node_modules/three/src/math/Box3.js","webpack://polygonjs-engine/./node_modules/three/src/materials/MeshStandardMaterial.js","webpack://polygonjs-engine/./node_modules/three/src/core/DirectGeometry.js","webpack://polygonjs-engine/./node_modules/three/src/core/BufferGeometry.js","webpack://polygonjs-engine/./node_modules/three/src/cameras/OrthographicCamera.js","webpack://polygonjs-engine/./node_modules/three/src/extras/PMREMGenerator.js","webpack://polygonjs-engine/./node_modules/three/src/math/Color.js","webpack://polygonjs-engine/./node_modules/three/src/textures/DataTexture.js","webpack://polygonjs-engine/./node_modules/three/src/materials/PointsMaterial.js","webpack://polygonjs-engine/./node_modules/three/src/extras/core/CurvePath.js","webpack://polygonjs-engine/./node_modules/three/src/extras/core/Path.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/WebGLRenderTarget.js","webpack://polygonjs-engine/./node_modules/three/src/objects/Line.js","webpack://polygonjs-engine/./node_modules/three/src/cameras/Camera.js","webpack://polygonjs-engine/./node_modules/three/src/math/Plane.js","webpack://polygonjs-engine/./node_modules/three/src/lights/LightShadow.js","webpack://polygonjs-engine/./node_modules/three/src/renderers/shaders/UniformsLib.js","webpack://polygonjs-engine/./node_modules/three/src/helpers/AxesHelper.js","webpack://polygonjs-engine/./node_modules/three/src/geometries/CylinderGeometry.js","webpack://polygonjs-engine/./node_modules/three/src/extras/Earcut.js","webpack://polygonjs-engine/./node_modules/three/src/extras/ShapeUtils.js","webpack://polygonjs-engine/./node_modules/three/src/extras/core/ShapePath.js","webpack://polygonjs-engine/./node_modules/three/src/materials/Material.js","webpack://polygonjs-engine/./node_modules/three/src/objects/Points.js","webpack://polygonjs-engine/./node_modules/three/src/core/InterleavedBufferAttribute.js","webpack://polygonjs-engine/./node_modules/three/src/math/Triangle.js"],"names":["REVISION","MOUSE","LEFT","MIDDLE","RIGHT","ROTATE","DOLLY","PAN","TOUCH","DOLLY_PAN","DOLLY_ROTATE","CullFaceNone","CullFaceBack","CullFaceFront","CullFaceFrontBack","FrontFaceDirectionCW","FrontFaceDirectionCCW","BasicShadowMap","PCFShadowMap","PCFSoftShadowMap","VSMShadowMap","FrontSide","BackSide","DoubleSide","FlatShading","SmoothShading","NoBlending","NormalBlending","AdditiveBlending","SubtractiveBlending","MultiplyBlending","CustomBlending","AddEquation","SubtractEquation","ReverseSubtractEquation","MinEquation","MaxEquation","ZeroFactor","OneFactor","SrcColorFactor","OneMinusSrcColorFactor","SrcAlphaFactor","OneMinusSrcAlphaFactor","DstAlphaFactor","OneMinusDstAlphaFactor","DstColorFactor","OneMinusDstColorFactor","SrcAlphaSaturateFactor","NeverDepth","AlwaysDepth","LessDepth","LessEqualDepth","EqualDepth","GreaterEqualDepth","GreaterDepth","NotEqualDepth","MultiplyOperation","MixOperation","AddOperation","NoToneMapping","LinearToneMapping","ReinhardToneMapping","Uncharted2ToneMapping","CineonToneMapping","ACESFilmicToneMapping","UVMapping","CubeReflectionMapping","CubeRefractionMapping","EquirectangularReflectionMapping","EquirectangularRefractionMapping","SphericalReflectionMapping","CubeUVReflectionMapping","CubeUVRefractionMapping","RepeatWrapping","ClampToEdgeWrapping","MirroredRepeatWrapping","NearestFilter","NearestMipmapNearestFilter","NearestMipMapNearestFilter","NearestMipmapLinearFilter","NearestMipMapLinearFilter","LinearFilter","LinearMipmapNearestFilter","LinearMipMapNearestFilter","LinearMipmapLinearFilter","LinearMipMapLinearFilter","UnsignedByteType","ByteType","ShortType","UnsignedShortType","IntType","UnsignedIntType","FloatType","HalfFloatType","UnsignedShort4444Type","UnsignedShort5551Type","UnsignedShort565Type","UnsignedInt248Type","AlphaFormat","RGBFormat","RGBAFormat","LuminanceFormat","LuminanceAlphaFormat","RGBEFormat","DepthFormat","DepthStencilFormat","RedFormat","RedIntegerFormat","RGFormat","RGIntegerFormat","RGBIntegerFormat","RGBAIntegerFormat","RGB_S3TC_DXT1_Format","RGBA_S3TC_DXT1_Format","RGBA_S3TC_DXT3_Format","RGBA_S3TC_DXT5_Format","RGB_PVRTC_4BPPV1_Format","RGB_PVRTC_2BPPV1_Format","RGBA_PVRTC_4BPPV1_Format","RGBA_PVRTC_2BPPV1_Format","RGB_ETC1_Format","RGB_ETC2_Format","RGBA_ETC2_EAC_Format","RGBA_ASTC_4x4_Format","RGBA_ASTC_5x4_Format","RGBA_ASTC_5x5_Format","RGBA_ASTC_6x5_Format","RGBA_ASTC_6x6_Format","RGBA_ASTC_8x5_Format","RGBA_ASTC_8x6_Format","RGBA_ASTC_8x8_Format","RGBA_ASTC_10x5_Format","RGBA_ASTC_10x6_Format","RGBA_ASTC_10x8_Format","RGBA_ASTC_10x10_Format","RGBA_ASTC_12x10_Format","RGBA_ASTC_12x12_Format","RGBA_BPTC_Format","SRGB8_ALPHA8_ASTC_4x4_Format","SRGB8_ALPHA8_ASTC_5x4_Format","SRGB8_ALPHA8_ASTC_5x5_Format","SRGB8_ALPHA8_ASTC_6x5_Format","SRGB8_ALPHA8_ASTC_6x6_Format","SRGB8_ALPHA8_ASTC_8x5_Format","SRGB8_ALPHA8_ASTC_8x6_Format","SRGB8_ALPHA8_ASTC_8x8_Format","SRGB8_ALPHA8_ASTC_10x5_Format","SRGB8_ALPHA8_ASTC_10x6_Format","SRGB8_ALPHA8_ASTC_10x8_Format","SRGB8_ALPHA8_ASTC_10x10_Format","SRGB8_ALPHA8_ASTC_12x10_Format","SRGB8_ALPHA8_ASTC_12x12_Format","LoopOnce","LoopRepeat","LoopPingPong","InterpolateDiscrete","InterpolateLinear","InterpolateSmooth","ZeroCurvatureEnding","ZeroSlopeEnding","WrapAroundEnding","TrianglesDrawMode","TriangleStripDrawMode","TriangleFanDrawMode","LinearEncoding","sRGBEncoding","GammaEncoding","RGBEEncoding","LogLuvEncoding","RGBM7Encoding","RGBM16Encoding","RGBDEncoding","BasicDepthPacking","RGBADepthPacking","TangentSpaceNormalMap","ObjectSpaceNormalMap","ZeroStencilOp","KeepStencilOp","ReplaceStencilOp","IncrementStencilOp","DecrementStencilOp","IncrementWrapStencilOp","DecrementWrapStencilOp","InvertStencilOp","NeverStencilFunc","LessStencilFunc","EqualStencilFunc","LessEqualStencilFunc","GreaterStencilFunc","NotEqualStencilFunc","GreaterEqualStencilFunc","AlwaysStencilFunc","StaticDrawUsage","DynamicDrawUsage","StreamDrawUsage","StaticReadUsage","DynamicReadUsage","StreamReadUsage","StaticCopyUsage","DynamicCopyUsage","StreamCopyUsage","_vector","Vector3","_quaternion","x","y","z","this","Object","assign","prototype","isVector3","set","setScalar","scalar","setX","setY","setZ","setComponent","index","value","Error","getComponent","clone","constructor","copy","v","add","w","undefined","console","warn","addVectors","addScalar","s","a","b","addScaledVector","sub","subVectors","subScalar","multiply","multiplyVectors","multiplyScalar","applyEuler","euler","isEuler","error","applyQuaternion","setFromEuler","applyAxisAngle","axis","angle","setFromAxisAngle","applyMatrix3","m","e","elements","applyNormalMatrix","normalize","applyMatrix4","q","qx","qy","qz","qw","ix","iy","iz","iw","project","camera","matrixWorldInverse","projectionMatrix","unproject","projectionMatrixInverse","matrixWorld","transformDirection","divide","divideScalar","min","Math","max","clamp","clampScalar","minVal","maxVal","clampLength","length","floor","ceil","round","roundToZero","negate","dot","lengthSq","sqrt","manhattanLength","abs","setLength","lerp","alpha","lerpVectors","v1","v2","cross","crossVectors","ax","ay","az","bx","by","bz","projectOnVector","denominator","projectOnPlane","planeNormal","reflect","normal","angleTo","PI","theta","acos","distanceTo","distanceToSquared","dx","dy","dz","manhattanDistanceTo","setFromSpherical","setFromSphericalCoords","radius","phi","sinPhiRadius","sin","cos","setFromCylindrical","c","setFromCylindricalCoords","setFromMatrixPosition","setFromMatrixScale","sx","setFromMatrixColumn","sy","sz","fromArray","setFromMatrix3Column","equals","array","offset","toArray","fromBufferAttribute","attribute","getX","getY","getZ","_object3DId","_v1","_q1","_m1","_target","_position","_scale","_xAxis","_yAxis","_zAxis","_addedEvent","type","_removedEvent","Object3D","defineProperty","uuid","generateUUID","name","parent","children","up","DefaultUp","position","rotation","quaternion","scale","_onChange","setFromQuaternion","defineProperties","configurable","enumerable","modelViewMatrix","normalMatrix","matrix","matrixAutoUpdate","DefaultMatrixAutoUpdate","matrixWorldNeedsUpdate","layers","visible","castShadow","receiveShadow","frustumCulled","renderOrder","userData","create","isObject3D","onBeforeRender","onAfterRender","updateMatrix","premultiply","decompose","setRotationFromAxisAngle","setRotationFromEuler","setRotationFromMatrix","setFromRotationMatrix","setRotationFromQuaternion","rotateOnAxis","rotateOnWorldAxis","rotateX","rotateY","rotateZ","translateOnAxis","distance","translateX","translateY","translateZ","localToWorld","vector","worldToLocal","getInverse","lookAt","updateWorldMatrix","isCamera","isLight","extractRotation","inverse","object","arguments","i","remove","push","dispatchEvent","indexOf","splice","attach","getObjectById","id","getObjectByProperty","getObjectByName","l","getWorldPosition","target","updateMatrixWorld","getWorldQuaternion","getWorldScale","getWorldDirection","raycast","traverse","callback","traverseVisible","traverseAncestors","compose","force","multiplyMatrices","updateParents","updateChildren","toJSON","meta","isRootObject","output","geometries","materials","textures","images","shapes","metadata","version","generator","serialize","library","element","JSON","stringify","mask","isInstancedMesh","count","instanceMatrix","isMesh","isLine","isPoints","geometry","parameters","Array","isArray","shape","material","uuids","extractFromCache","cache","values","key","data","recursive","source","parse","child","AnimationAction","mixer","clip","localRoot","_mixer","_clip","_localRoot","tracks","nTracks","interpolants","interpolantSettings","endingStart","endingEnd","interpolant","createInterpolant","settings","_interpolantSettings","_interpolants","_propertyBindings","_cacheIndex","_byClipCacheIndex","_timeScaleInterpolant","_weightInterpolant","loop","_loopCount","_startTime","time","timeScale","_effectiveTimeScale","weight","_effectiveWeight","repetitions","Infinity","paused","enabled","clampWhenFinished","zeroSlopeAtStart","zeroSlopeAtEnd","play","_activateAction","stop","_deactivateAction","reset","stopFading","stopWarping","isRunning","_isActiveAction","isScheduled","startAt","setLoop","mode","setEffectiveWeight","getEffectiveWeight","fadeIn","duration","_scheduleFading","fadeOut","crossFadeFrom","fadeOutAction","warp","fadeInDuration","fadeOutDuration","startEndRatio","endStartRatio","crossFadeTo","fadeInAction","weightInterpolant","_takeBackControlInterpolant","setEffectiveTimeScale","getEffectiveTimeScale","setDuration","syncWith","action","halt","startTimeScale","endTimeScale","now","_lendControlInterpolant","times","parameterPositions","sampleValues","timeScaleInterpolant","getMixer","getClip","getRoot","_root","_update","deltaTime","timeDirection","accuIndex","startTime","timeRunning","_updateTimeScale","clipTime","_updateTime","_updateWeight","propertyMixers","j","evaluate","accumulate","interpolantValue","loopCount","pingPong","_setEndings","handle_stop","direction","loopDelta","pending","atStart","atEnd","weightNow","weightThen","PropertyMixer","binding","typeName","valueSize","mixFunction","bufferType","Float64Array","_slerp","_select","_lerp","buffer","_mixBufferRegion","cumulativeWeight","useCount","referenceCount","stride","currentWeight","mix","apply","originalValueOffset","setValue","saveOriginalState","getValue","restoreOriginalState","dstOffset","srcOffset","t","Quaternion","slerpFlat","AnimationMixer","root","_initMemoryManager","_accuIndex","EventDispatcher","_bindAction","prototypeAction","bindings","rootUuid","bindingsByRoot","_bindingsByRootAndName","bindingsByName","track","trackName","_addInactiveBinding","path","parsedPath","PropertyBinding","ValueTypeName","getValueSize","resultBuffer","clipUuid","actionsForClip","_actionsByClip","knownActions","_addInactiveAction","n","_lendBinding","_lendAction","_takeBackBinding","_takeBackAction","_actions","_nActiveActions","_bindings","_nActiveBindings","_controlInterpolants","_nActiveControlInterpolants","scope","stats","actions","controlInterpolants","actionsByClip","actionByRoot","_removeInactiveAction","lastInactiveAction","cacheIndex","pop","knownActionsForClip","lastKnownAction","byClipCacheIndex","_removeInactiveBindingsForAction","_removeInactiveBinding","prevIndex","lastActiveIndex","firstInactiveAction","firstInactiveIndex","lastActiveAction","bindingByName","propBinding","rootNode","lastInactiveBinding","keys","firstInactiveBinding","lastActiveBinding","LinearInterpolant","Float32Array","_controlInterpolantsResultBuffer","__cacheIndex","lastActiveInterpolant","clipAction","optionalRoot","clipObject","AnimationClip","findByName","existingAction","newAction","stopAllAction","nActions","nBindings","update","sign","setTime","timeInSeconds","uncacheClip","actionsToRemove","uncacheRoot","uncacheAction","Font","createPath","char","offsetX","offsetY","glyph","glyphs","cpx","cpy","cpx1","cpy1","cpx2","cpy2","ShapePath","o","outline","_cachedOutline","split","moveTo","lineTo","quadraticCurveTo","bezierCurveTo","ha","familyName","isFont","generateShapes","text","size","paths","chars","from","String","resolution","line_height","boundingBox","yMax","yMin","underlineThickness","ret","createPaths","p","pl","toShapes","FontLoader","manager","Loader","call","load","url","onLoad","onProgress","onError","loader","FileLoader","setPath","json","substring","font","_segCenter","_segDir","_diff","_edge1","_edge2","_normal","Ray","origin","ray","at","recast","closestPointToPoint","point","directionDistance","distanceToPoint","distanceSqToPoint","distanceSqToSegment","v0","optionalPointOnRay","optionalPointOnSegment","s0","s1","sqrDist","extDet","segExtent","a01","b0","b1","det","invDet","intersectSphere","sphere","center","tca","d2","radius2","thc","t0","t1","intersectsSphere","distanceToPlane","plane","constant","intersectPlane","intersectsPlane","distToPoint","intersectBox","box","tmin","tmax","tymin","tymax","tzmin","tzmax","invdirx","invdiry","invdirz","intersectsBox","intersectTriangle","backfaceCulling","DdN","DdQxE2","DdE1xQ","QdN","matrix4","DataTextureLoader","texture","setResponseType","texData","image","width","height","wrapS","wrapT","magFilter","minFilter","anisotropy","format","mipmaps","mipmapCount","needsUpdate","LoaderUtils","decodeText","TextDecoder","decode","il","fromCharCode","decodeURIComponent","escape","extractUrlBase","lastIndexOf","substr","_geometryId","_obj","_offset","Geometry","vertices","colors","faces","faceVertexUvs","morphTargets","morphNormals","skinWeights","skinIndices","lineDistances","boundingSphere","elementsNeedUpdate","verticesNeedUpdate","uvsNeedUpdate","normalsNeedUpdate","colorsNeedUpdate","lineDistancesNeedUpdate","groupsNeedUpdate","isGeometry","getNormalMatrix","face","jl","vertexNormals","computeBoundingBox","computeBoundingSphere","makeRotationX","makeRotationY","makeRotationZ","translate","makeTranslation","makeScale","fromBufferGeometry","indices","attributes","positions","normals","color","uvs","uv","uvs2","uv2","addFace","materialIndex","vertexColors","groups","group","start","computeFaceNormals","getCenter","cb","ab","f","fl","vA","vB","vC","computeVertexNormals","areaWeighted","vl","computeFlatVertexNormals","computeMorphNormals","__originalFaceNormal","__originalVertexNormals","tmpGeo","faceNormals","dstNormalsFace","dstNormalsVertex","faceNormal","setFromPoints","merge","materialIndexOffset","vertexOffset","vertices1","vertices2","faces1","faces2","colors1","colors2","vertexCopy","faceCopy","faceVertexNormals","faceVertexColors","faceVertexUvs2","uvsCopy","k","kl","mergeMesh","mesh","mergeVertices","verticesMap","unique","changes","precision","pow","faceIndicesToRemove","idx","diff","points","sortFacesByMaterialIndex","_id","sort","newUvs1","newUvs2","uvs1","vertex","normalsHash","colorsHash","uvsHash","hasFaceVertexUv","hasFaceNormal","hasFaceVertexNormal","hasFaceColor","r","g","hasFaceVertexColor","faceType","setBit","getUvIndex","getNormalIndex","getColorIndex","hash","toString","getHex","morphTarget","morphNormal","srcVertexNormal","destVertexNormal","dispose","EllipseCurve","aX","aY","xRadius","yRadius","aStartAngle","aEndAngle","aClockwise","aRotation","isEllipseCurve","getPoint","optionalTarget","twoPi","deltaAngle","samePoints","Number","EPSILON","tx","ty","fromJSON","Curve","arcLengthDivisions","getPointAt","u","getUtoTmapping","getPoints","divisions","d","getSpacedPoints","getLength","lengths","getLengths","cacheArcLengths","current","last","sum","updateArcLengths","targetArcLength","arcLengths","comparison","low","high","lengthBefore","getTangent","t2","pt1","getTangentAt","computeFrenetFrames","segments","closed","tangents","binormals","vec","mat","MAX_VALUE","tz","makeRotationAxis","BooleanKeyframeTrack","KeyframeTrack","ColorKeyframeTrack","interpolation","ValueBufferType","DefaultInterpolation","InterpolantFactoryMethodLinear","InterpolantFactoryMethodSmooth","StringKeyframeTrack","MathUtils","resetDuration","parseKeyframeTrack","trackType","toLowerCase","NumberKeyframeTrack","VectorKeyframeTrack","QuaternionKeyframeTrack","getTrackTypeForValueTypeName","AnimationUtils","flattenJSON","jsonTracks","frameTime","fps","clipTracks","CreateFromMorphTargetSequence","morphTargetSequence","noLoop","numMorphTargets","order","getKeyframeOrder","sortedArray","objectOrClipArray","clipArray","animations","CreateClipsFromMorphTargetSequences","animationToMorphTargets","pattern","parts","match","animationMorphTargets","clips","parseAnimation","animation","bones","addNonemptyTrack","animationKeys","propertyName","destTracks","clipName","hierarchyTracks","hierarchy","h","morphTargetNames","morphTargetName","animationKey","boneName","trim","validate","valid","optimize","CompressedTexture","mapping","encoding","flipY","generateMipmaps","isCompressedTexture","BoxGeometry","depth","widthSegments","heightSegments","depthSegments","super","BoxBufferGeometry","numberOfVertices","groupStart","buildPlane","udir","vdir","gridX","gridY","segmentWidth","segmentHeight","widthHalf","heightHalf","depthHalf","gridX1","gridY1","vertexCounter","groupCount","addGroup","setIndex","setAttribute","ExtrudeGeometry","options","ExtrudeBufferGeometry","verticesArray","uvArray","addShape","placeholder","curveSegments","steps","bevelEnabled","bevelThickness","bevelSize","bevelOffset","bevelSegments","extrudePath","uvgen","UVGenerator","WorldUVGenerator","amount","extrudePts","splineTube","binormal","position2","ahole","hl","extrudeByPath","shapePoints","extractPoints","holes","isClockWise","reverse","triangulateShape","contour","concat","scalePt2","pt","bs","vert","vlen","flen","getBevelVec","inPt","inPrev","inNext","v_trans_x","v_trans_y","shrink_by","v_prev_x","v_prev_y","v_next_x","v_next_y","v_prev_lensq","collinear0","v_prev_len","v_next_len","ptPrevShift_x","ptPrevShift_y","sf","v_trans_lensq","direction_eq","contourMovements","oneHoleMovements","holesMovements","verticesMovements","sidewalls","layeroffset","sl","slen1","slen2","f4","f3","addVertex","nextIndex","generateTopUV","addUV","generateSideWallUV","vector2","layer","buildLidFaces","buildSideFaces","indexA","indexB","indexC","a_x","a_y","b_x","b_y","c_x","c_y","indexD","a_z","b_z","c_z","d_x","d_y","d_z","_sphere","Frustum","p0","p1","p2","p3","p4","p5","planes","frustum","setFromProjectionMatrix","me","me0","me1","me2","me3","me4","me5","me6","me7","me8","me9","me10","me11","me12","me13","me14","me15","setComponents","intersectsObject","intersectsSprite","sprite","negRadius","containsPoint","RawShaderMaterial","isRawShaderMaterial","_lut","DEG2RAD","RAD2DEG","d0","random","d1","d3","toUpperCase","euclideanModulo","mapLinear","a1","a2","b2","smoothstep","smootherstep","randInt","randFloat","randFloatSpread","range","degToRad","degrees","radToDeg","radians","isPowerOfTwo","ceilPowerOfTwo","log","LN2","floorPowerOfTwo","setQuaternionFromProperEuler","c2","s2","c13","s13","c1_3","s1_3","c3_1","s3_1","InterleavedBuffer","usage","updateRange","isInterleavedBuffer","onUploadCallback","setUsage","copyAt","index1","index2","onUpload","Cache","files","file","get","clear","Shape","getPointsHoles","holesPts","hole","ArcCurve","aRadius","isArcCurve","CubicBezierCurve3","v3","isCubicBezierCurve3","LineCurve3","isLineCurve3","QuadraticBezierCurve3","isQuadraticBezierCurve3","Matrix4","_zero","_one","_x","_y","_z","isMatrix4","n11","n12","n13","n14","n21","n22","n23","n24","n31","n32","n33","n34","n41","n42","n43","n44","te","identity","copyPosition","extractBasis","xAxis","yAxis","zAxis","makeBasis","scaleX","scaleY","scaleZ","makeRotationFromEuler","ae","af","be","bf","ce","cf","de","df","ac","ad","bc","bd","makeRotationFromQuaternion","eye","a11","a12","a13","a14","a21","a22","a23","a24","a31","a32","a33","a34","a41","a42","a43","a44","b11","b12","b13","b14","b21","b22","b23","b24","b31","b32","b33","b34","b41","b42","b43","b44","determinant","transpose","tmp","setPosition","throwOnDegenerate","t11","t12","t13","t14","detInv","getMaxScaleOnAxis","scaleXSq","scaleYSq","scaleZSq","makeShear","_w","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","invSX","invSY","invSZ","makePerspective","left","right","top","bottom","near","far","makeOrthographic","MeshLambertMaterial","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","specularMap","alphaMap","envMap","combine","reflectivity","refractionRatio","wireframe","wireframeLinewidth","wireframeLinecap","wireframeLinejoin","skinning","setValues","isMeshLambertMaterial","SphereGeometry","phiStart","phiLength","thetaStart","thetaLength","SphereBufferGeometry","thetaEnd","grid","verticesRow","uOffset","DirectionalLightShadow","LightShadow","OrthographicCamera","isDirectionalLightShadow","updateMatrices","light","DirectionalLight","intensity","Light","shadow","isDirectionalLight","PointLightShadow","PerspectiveCamera","_frameExtents","Vector2","_viewportCount","_viewports","Vector4","_cubeDirections","_cubeUps","PointLight","decay","power","isPointLightShadow","viewportIndex","shadowMatrix","lightPositionWorld","_lightPositionWorld","lookTarget","_lookTarget","projScreenMatrix","_projScreenMatrix","_frustum","isPointLight","SpotLightShadow","isSpotLightShadow","fov","aspect","mapSize","updateProjectionMatrix","SpotLight","penumbra","isSpotLight","Face3","isColor","QuaternionLinearInterpolant","sampleSize","Interpolant","interpolate_","i1","result","end","crossOrigin","resourcePath","setCrossOrigin","setResourcePath","ShaderChunk","alphamap_fragment","alphamap_pars_fragment","alphatest_fragment","aomap_fragment","aomap_pars_fragment","begin_vertex","beginnormal_vertex","bsdfs","bumpmap_pars_fragment","clipping_planes_fragment","clipping_planes_pars_fragment","clipping_planes_pars_vertex","clipping_planes_vertex","color_fragment","color_pars_fragment","color_pars_vertex","color_vertex","common","cube_uv_reflection_fragment","defaultnormal_vertex","displacementmap_pars_vertex","displacementmap_vertex","emissivemap_fragment","emissivemap_pars_fragment","encodings_fragment","encodings_pars_fragment","envmap_fragment","envmap_common_pars_fragment","envmap_pars_fragment","envmap_pars_vertex","envmap_physical_pars_fragment","envmap_vertex","fog_vertex","fog_pars_vertex","fog_fragment","fog_pars_fragment","gradientmap_pars_fragment","lightmap_fragment","lightmap_pars_fragment","lights_lambert_vertex","lights_pars_begin","lights_toon_fragment","lights_toon_pars_fragment","lights_phong_fragment","lights_phong_pars_fragment","lights_physical_fragment","lights_physical_pars_fragment","lights_fragment_begin","lights_fragment_maps","lights_fragment_end","logdepthbuf_fragment","logdepthbuf_pars_fragment","logdepthbuf_pars_vertex","logdepthbuf_vertex","map_fragment","map_pars_fragment","map_particle_fragment","map_particle_pars_fragment","metalnessmap_fragment","metalnessmap_pars_fragment","morphnormal_vertex","morphtarget_pars_vertex","morphtarget_vertex","normal_fragment_begin","normal_fragment_maps","normalmap_pars_fragment","clearcoat_normal_fragment_begin","clearcoat_normal_fragment_maps","clearcoat_pars_fragment","packing","premultiplied_alpha_fragment","project_vertex","dithering_fragment","dithering_pars_fragment","roughnessmap_fragment","roughnessmap_pars_fragment","shadowmap_pars_fragment","shadowmap_pars_vertex","shadowmap_vertex","shadowmask_pars_fragment","skinbase_vertex","skinning_pars_vertex","skinning_vertex","skinnormal_vertex","specularmap_fragment","specularmap_pars_fragment","tonemapping_fragment","tonemapping_pars_fragment","uv_pars_fragment","uv_pars_vertex","uv_vertex","uv2_pars_fragment","uv2_pars_vertex","uv2_vertex","worldpos_vertex","background_frag","background_vert","cube_frag","cube_vert","depth_frag","depth_vert","distanceRGBA_frag","distanceRGBA_vert","equirect_frag","equirect_vert","linedashed_frag","linedashed_vert","meshbasic_frag","meshbasic_vert","meshlambert_frag","meshlambert_vert","meshmatcap_frag","meshmatcap_vert","meshtoon_frag","meshtoon_vert","meshphong_frag","meshphong_vert","meshphysical_frag","meshphysical_vert","normal_frag","normal_vert","points_frag","points_vert","shadow_frag","shadow_vert","sprite_frag","sprite_vert","isVector2","atan2","rotateAround","isVector4","setW","setAxisAngleFromQuaternion","setAxisAngleFromRotationMatrix","m11","m12","m13","m21","m22","m23","m31","m32","m33","getW","OctahedronGeometry","detail","OctahedronBufferGeometry","IcosahedronGeometry","IcosahedronBufferGeometry","TorusKnotGeometry","tube","tubularSegments","radialSegments","heightScale","TorusKnotBufferGeometry","P1","P2","B","T","N","calculatePositionOnCurve","cx","cy","cu","su","quOverP","cs","TorusGeometry","arc","TorusBufferGeometry","TextGeometry","TextBufferGeometry","ShapeGeometry","ShapeBufferGeometry","shapeHole","indexOffset","shapeVertices","shapeHoles","ConeGeometry","openEnded","ConeBufferGeometry","CircleGeometry","CircleBufferGeometry","segment","_matrix","Euler","_order","DefaultOrder","RotationOrders","_onChangeCallback","asin","setFromVector3","reorder","newOrder","toVector3","optionalResult","MeshDepthMaterial","depthPacking","displacementMap","displacementScale","displacementBias","fog","isMeshDepthMaterial","_inverseMatrix","_ray","_vA","_vB","_vC","_tempA","_tempB","_tempC","_morphA","_morphB","_morphC","_uvA","_uvB","_uvC","_intersectionPoint","_intersectionPointWorld","Mesh","updateMorphTargets","checkIntersection","raycaster","pA","pB","pC","side","checkBufferGeometryIntersection","morphPosition","morphTargetsRelative","morphInfluences","morphTargetInfluences","influence","morphAttribute","intersection","getUV","getNormal","slice","morphTargetDictionary","ml","isBufferGeometry","morphAttributes","intersects","groupMaterial","drawRange","faceIndex","fvA","fvB","fvC","isMultiMaterial","faceMaterial","uvs_f","MeshDistanceMaterial","referencePosition","nearDistance","farDistance","isMeshDistanceMaterial","CubicBezierCurve","isCubicBezierCurve","LineCurve","isLineCurve","QuadraticBezierCurve","isQuadraticBezierCurve","SplineCurve","isSplineCurve","intPoint","MeshPhysicalMaterial","defines","clearcoat","clearcoatMap","clearcoatRoughness","clearcoatRoughnessMap","clearcoatNormalScale","clearcoatNormalMap","sheen","transparency","isMeshPhysicalMaterial","MeshPhongMaterial","specular","shininess","bumpMap","bumpScale","normalMap","normalMapType","normalScale","isMeshPhongMaterial","InstancedBufferAttribute","itemSize","normalized","meshPerAttribute","isInstancedBufferAttribute","Layers","channel","enable","enableAll","toggle","disable","disableAll","test","arrayMax","cloneUniforms","src","dst","property","isMatrix3","isTexture","mergeUniforms","uniforms","merged","UniformsUtils","CubeTexture","isCubeTexture","ImageLoader","resolveURL","cached","itemStart","setTimeout","itemEnd","document","createElementNS","onImageLoad","removeEventListener","onImageError","event","itemError","addEventListener","LoadingManager","isLoading","itemsLoaded","itemsTotal","urlModifier","handlers","onStart","setURLModifier","transform","addHandler","regex","removeHandler","getHandler","global","lastIndex","DefaultLoadingManager","offset1","offset0","weight1","weight0","_reservedRe","RegExp","_wordCharOrDot","replace","_directoryRe","_nodeRe","_objectRe","_propertyRe","_trackRe","_supportedObjectNames","Composite","targetGroup","optionalParsedPath","parseTrackName","_targetGroup","subscribe_","node","findNode","nodeName","bind","firstValidIndex","nCachedObjects_","unbind","isAnimationObjectGroup","sanitizeNodeName","matches","exec","results","objectName","objectIndex","propertyIndex","lastDot","skeleton","bone","getBoneByName","searchNodeSubtree","childNode","subTreeNode","_getValue_unavailable","_setValue_unavailable","BindingType","Direct","EntireArray","ArrayElement","HasFromToArray","Versioning","None","NeedsUpdate","MatrixWorldNeedsUpdate","GetterByBindingType","resolvedProperty","SetterByBindingTypeAndVersioning","targetObject","dest","targetArray","sourceArray","nodeProperty","versioning","bindingType","_getValue_unbound","_setValue_unbound","LineLoop","isLineLoop","Matrix3","setFromMatrix4","transposeIntoArray","setUvTransform","rotate","ShaderMaterial","Material","vertexShader","fragmentShader","linewidth","lights","clipping","extensions","derivatives","fragDepth","drawBuffers","shaderTextureLOD","defaultAttributeValues","index0AttributeName","uniformsNeedUpdate","isShaderMaterial","Raycaster","params","Line","threshold","LOD","Points","Sprite","PointCloud","ascSort","intersectObject","setFromCamera","coords","isPerspectiveCamera","isOrthographicCamera","intersectObjects","objects","VideoTexture","video","isVideoTexture","readyState","HAVE_CURRENT_DATA","CubicPoly","c0","c1","c3","init","x0","x1","initCatmullRom","x3","tension","initNonuniformCatmullRom","dt0","dt1","dt2","calc","px","py","pz","CatmullRomCurve3","curveType","isCatmullRomCurve3","CubicInterpolant","_weightPrev","_offsetPrev","_weightNext","_offsetNext","DefaultSettings_","intervalChanged_","pp","iPrev","iNext","tPrev","tNext","getSettings_","halfDt","o1","o0","oP","oN","wP","wN","ppp","sP","sN","TextureLoader","isJPEG","search","AmbientLight","isAmbientLight","RectAreaLight","isRectAreaLight","HemisphereLight","skyColor","groundColor","isHemisphereLight","FogExp2","density","isFogExp2","Fog","isFog","SkinnedMesh","bindMode","bindMatrix","bindMatrixInverse","isSkinnedMesh","calculateInverses","pose","normalizeSkinWeights","skinWeight","setXYZW","Bone","isBone","InstancedBufferGeometry","maxInstancedCount","isInstancedBufferGeometry","Spherical","other","makeSafe","setFromCartesianCoords","loading","dataUriRegexResult","mimeType","isBase64","atob","response","responseType","view","Uint8Array","charCodeAt","Blob","parser","DOMParser","parseFromString","request","XMLHttpRequest","header","open","callbacks","status","withCredentials","overrideMimeType","requestHeader","setRequestHeader","send","setWithCredentials","setMimeType","_canvas","ImageUtils","canvas","HTMLCanvasElement","context","getContext","ImageData","putImageData","drawImage","toDataURL","textureId","Texture","DEFAULT_IMAGE","DEFAULT_MAPPING","internalFormat","repeat","premultiplyAlpha","unpackAlignment","onUpdate","wrap","transformUv","ShaderLib","basic","specularmap","envmap","aomap","lightmap","lambert","emissivemap","phong","bumpmap","normalmap","displacementmap","standard","roughnessmap","metalnessmap","roughness","metalness","envMapIntensity","toon","gradientmap","matcap","dashed","dashSize","totalSize","opacity","background","uvTransform","t2D","cube","equirect","tEquirect","distanceRGBA","physical","DiscreteInterpolant","copySampleValue_","convertArray","TimeBufferType","setInterpolation","getInterpolation","InterpolantFactoryMethodDiscrete","factoryMethod","message","shift","timeOffset","endTime","nKeys","to","arraySlice","prevTime","currTime","isNaN","isTypedArray","smoothInterpolation","writeIndex","keep","offsetP","offsetN","readOffset","writeOffset","TypedKeyframeTrack","subarray","forceClone","BYTES_PER_ELEMENT","ArrayBuffer","isView","DataView","nValues","jsonKeys","valuePropertyName","subclip","sourceClip","startFrame","endFrame","frame","minStartTime","BufferAttribute","TypeError","Int8BufferAttribute","Int8Array","Uint8BufferAttribute","Uint8ClampedBufferAttribute","Uint8ClampedArray","Int16BufferAttribute","Int16Array","Uint16BufferAttribute","Uint16Array","Int32BufferAttribute","Int32Array","Uint32BufferAttribute","Uint32Array","Float32BufferAttribute","Float64BufferAttribute","isBufferAttribute","copyArray","copyColorsArray","copyVector2sArray","vectors","copyVector3sArray","copyVector4sArray","setXYZ","setXY","Group","isGroup","WebGLAnimation","isAnimating","animationLoop","onAnimationFrame","requestAnimationFrame","setAnimationLoop","setContext","WebGLAttributes","gl","capabilities","isWebGL2","buffers","WeakMap","isInterleavedBufferAttribute","deleteBuffer","delete","createBuffer","bindBuffer","bufferData","FLOAT","UNSIGNED_SHORT","SHORT","UNSIGNED_INT","INT","BYTE","UNSIGNED_BYTE","bytesPerElement","bufferSubData","updateBuffer","WebGLBackground","renderer","state","premultipliedAlpha","planeMesh","boxMesh","clearColor","Color","clearAlpha","currentBackground","currentBackgroundVersion","currentTonemapping","setClear","getClearColor","setClearColor","getClearAlpha","setClearAlpha","render","renderList","scene","forceClear","xr","session","getSession","environmentBlendMode","autoClear","autoClearColor","autoClearDepth","autoClearStencil","isWebGLCubeRenderTarget","depthTest","depthWrite","deleteAttribute","flipEnvMap","toneMapping","unshift","WebGLBufferRenderer","info","setMode","drawArrays","renderInstances","primcount","extension","methodName","WebGLCapabilities","maxAnisotropy","getMaxPrecision","getShaderPrecisionFormat","VERTEX_SHADER","HIGH_FLOAT","FRAGMENT_SHADER","MEDIUM_FLOAT","WebGL2RenderingContext","WebGL2ComputeRenderingContext","maxPrecision","logarithmicDepthBuffer","maxTextures","getParameter","MAX_TEXTURE_IMAGE_UNITS","maxVertexTextures","MAX_VERTEX_TEXTURE_IMAGE_UNITS","maxTextureSize","MAX_TEXTURE_SIZE","maxCubemapSize","MAX_CUBE_MAP_TEXTURE_SIZE","maxAttributes","MAX_VERTEX_ATTRIBS","maxVertexUniforms","MAX_VERTEX_UNIFORM_VECTORS","maxVaryings","MAX_VARYING_VECTORS","maxFragmentUniforms","MAX_FRAGMENT_UNIFORM_VECTORS","vertexTextures","floatFragmentTextures","getMaxAnisotropy","MAX_TEXTURE_MAX_ANISOTROPY_EXT","floatVertexTextures","maxSamples","MAX_SAMPLES","WebGLClipping","globalState","numGlobalPlanes","localClippingEnabled","renderingShadows","Plane","viewNormalMatrix","uniform","resetGlobalState","numPlanes","numIntersection","projectPlanes","skipTransform","nPlanes","dstArray","flatSize","viewMatrix","i4","enableLocalClipping","beginShadows","endShadows","setState","clipIntersection","clipShadows","fromCache","nGlobal","lGlobal","clippingState","WebGLExtensions","getExtension","WebGLGeometries","wireframeAttributes","onGeometryDispose","buffergeometry","memory","updateWireframeAttribute","geometryIndex","geometryPosition","ELEMENT_ARRAY_BUFFER","previousAttribute","_bufferGeometry","BufferGeometry","setFromObject","geometryAttributes","ARRAY_BUFFER","getWireframeAttribute","currentAttribute","WebGLIndexedBufferRenderer","drawElements","WebGLInfo","calls","triangles","lines","programs","autoReset","instanceCount","TRIANGLES","LINES","LINE_STRIP","LINE_LOOP","POINTS","absNumericalSort","WebGLMorphtargets","influencesList","program","objectInfluences","influences","morphInfluencesSum","morphBaseInfluence","getUniforms","WebGLObjects","updateMap","updateFromObject","DataTexture2DArray","wrapR","DataTexture3D","isDataTexture2DArray","isDataTexture3D","emptyTexture","emptyTexture2dArray","emptyTexture3d","emptyCubeTexture","arrayCacheF32","arrayCacheI32","mat4array","mat3array","mat2array","flatten","nBlocks","blockSize","firstElem","arraysEqual","allocTexUnits","allocateTextureUnit","setValueV1f","uniform1f","addr","setValueV2f","uniform2f","uniform2fv","setValueV3f","uniform3f","uniform3fv","setValueV4f","uniform4f","uniform4fv","setValueM2","uniformMatrix2fv","setValueM3","uniformMatrix3fv","setValueM4","uniformMatrix4fv","setValueT1","unit","uniform1i","safeSetTexture2D","setValueT2DArray1","setTexture2DArray","setValueT3D1","setTexture3D","setValueT6","safeSetTextureCube","setValueV1i","setValueV2i","uniform2iv","setValueV3i","uniform3iv","setValueV4i","uniform4iv","setValueV1ui","uniform1ui","setValueV1fArray","uniform1fv","setValueV1iArray","uniform1iv","setValueV2iArray","setValueV3iArray","setValueV4iArray","setValueV2fArray","setValueV3fArray","setValueV4fArray","setValueM2Array","setValueM3Array","setValueM4Array","setValueT1Array","units","setValueT6Array","SingleUniform","activeInfo","getSingularSetter","PureArrayUniform","getPureArraySetter","StructuredUniform","seq","updateCache","RePathPart","addUniform","container","uniformObject","parseUniform","pathLength","matchEnd","idIsIndex","subscript","next","WebGLUniforms","getProgramParameter","ACTIVE_UNIFORMS","getActiveUniform","getUniformLocation","WebGLShader","string","shader","createShader","shaderSource","compileShader","setOptional","upload","seqWithValue","programIdCount","getEncodingComponents","getShaderErrors","getShaderParameter","COMPILE_STATUS","getShaderInfoLog","join","addLineNumbers","getShaderSource","getTexelDecodingFunction","functionName","components","getToneMappingFunction","toneMappingName","filterEmptyLine","replaceLightNums","numDirLights","numSpotLights","numRectAreaLights","numPointLights","numHemiLights","numDirLightShadows","numSpotLightShadows","numPointLightShadows","replaceClippingPlaneNums","numClippingPlanes","numClipIntersection","includePattern","resolveIncludes","includeReplacer","include","deprecatedUnrollLoopPattern","unrollLoopPattern","unrollLoops","loopReplacer","deprecatedLoopReplacer","snippet","parseInt","generatePrecision","precisionstring","WebGLProgram","cacheKey","prefixVertex","prefixFragment","shadowMapTypeDefine","shadowMapType","generateShadowMapTypeDefine","envMapTypeDefine","envMapMode","generateEnvMapTypeDefine","envMapModeDefine","generateEnvMapModeDefine","envMapBlendingDefine","generateEnvMapBlendingDefine","gammaFactorDefine","gammaFactor","customExtensions","extensionDerivatives","envMapCubeUV","tangentSpaceNormalMap","flatShading","shaderID","extensionFragDepth","rendererExtensionFragDepth","extensionDrawBuffers","rendererExtensionDrawBuffers","extensionShaderTextureLOD","rendererExtensionShaderTextureLod","filter","generateExtensions","customDefines","chunks","generateDefines","createProgram","shaderName","instancing","supportsVertexTextures","maxBones","useFog","fogExp2","objectSpaceNormalMap","roughnessMap","metalnessMap","vertexTangents","vertexUvs","uvsVertexOnly","useVertexTexture","doubleSided","flipSided","shadowMapEnabled","sizeAttenuation","alphaTest","gradientMap","physicallyCorrectLights","dithering","outputEncoding","mapEncoding","matcapEncoding","envMapEncoding","emissiveMapEncoding","lightMapEncoding","isGLSL3ShaderMaterial","versionRegex","cachedUniforms","cachedAttributes","vertexGlsl","fragmentGlsl","glVertexShader","glFragmentShader","attachShader","bindAttribLocation","linkProgram","debug","checkShaderErrors","programLog","getProgramInfoLog","vertexLog","fragmentLog","runnable","haveDiagnostics","LINK_STATUS","vertexErrors","fragmentErrors","getError","VALIDATE_STATUS","diagnostics","prefix","detachShader","deleteShader","getAttributes","ACTIVE_ATTRIBUTES","getActiveAttrib","getAttribLocation","fetchAttributeLocations","destroy","deleteProgram","usedTimes","WebGLPrograms","shaderIDs","MeshNormalMaterial","MeshBasicMaterial","MeshToonMaterial","MeshStandardMaterial","MeshMatcapMaterial","LineBasicMaterial","LineDashedMaterial","PointsMaterial","ShadowMaterial","SpriteMaterial","parameterNames","getTextureEncodingFromMap","isWebGLRenderTarget","getParameters","shadows","nClipPlanes","nClipIntersection","environment","isMeshStandardMaterial","nVertexUniforms","nVertexMatrices","allocateBones","shaderobject","getShaderObject","onBeforeCompile","currentRenderTarget","getRenderTarget","maxMorphTargets","maxMorphNormals","directional","spot","rectArea","hemi","directionalShadowMap","pointShadowMap","spotShadowMap","shadowMap","toneMapped","getProgramCacheKey","acquireProgram","preexistingProgram","releaseProgram","WebGLProperties","properties","painterSortStable","groupOrder","reversePainterSortStable","WebGLRenderList","renderItems","renderItemsIndex","opaque","transparent","defaultProgram","getNextRenderItem","renderItem","finish","customOpaqueSort","customTransparentSort","WebGLRenderLists","lists","onSceneDispose","list","cameras","UniformsCache","coneCos","penumbraCos","halfWidth","halfHeight","nextVersion","shadowCastingLightsFirst","lightA","lightB","WebGLLights","shadowCache","shadowBias","shadowRadius","shadowMapSize","shadowCameraNear","shadowCameraFar","directionalLength","pointLength","spotLength","rectAreaLength","hemiLength","numDirectionalShadows","numPointShadows","numSpotShadows","ambient","probe","directionalShadow","directionalShadowMatrix","spotShadow","spotShadowMatrix","pointShadow","pointShadowMatrix","vector3","matrix42","setup","isLightProbe","sh","coefficients","shadowUniforms","bias","WebGLRenderState","lightsArray","shadowsArray","setupLights","pushLight","pushShadow","shadowLight","WebGLRenderStates","renderStates","renderState","has","WebGLShadowMap","_renderer","_objects","_shadowMapSize","_viewportSize","_viewport","_depthMaterials","_distanceMaterials","_materialCache","shadowSide","0","1","2","shadowMaterialVertical","SAMPLE_RATE","HALF_SAMPLE_RATE","shadow_pass","shadowMaterialHorizonal","HORIZONAL_PASS","fullScreenTri","fullScreenMesh","VSMPass","setRenderTarget","mapPass","renderBufferDirect","getDepthMaterialVariant","useMorphing","useSkinning","useInstancing","getDistanceMaterialVariant","getDepthMaterial","getMaterialVariant","customMaterial","customDepthMaterial","customDistanceMaterial","clippingPlanes","keyA","keyB","materialsForVariant","cachedMaterial","renderObject","shadowCamera","depthMaterial","autoUpdate","activeCubeFace","getActiveCubeFace","activeMipmapLevel","getActiveMipmapLevel","_state","setBlending","setTest","setScissorTest","shadowFrameExtents","getFrameExtents","pars","WebGLRenderTarget","viewportCount","getViewportCount","vp","viewport","getViewport","getFrustum","WebGLState","colorBuffer","locked","currentColorMask","currentColorClear","setMask","colorMask","setLocked","lock","depthBuffer","currentDepthMask","currentDepthFunc","currentDepthClear","DEPTH_TEST","depthMask","setFunc","depthFunc","NEVER","ALWAYS","LESS","LEQUAL","EQUAL","GEQUAL","GREATER","NOTEQUAL","clearDepth","stencilBuffer","currentStencilMask","currentStencilFunc","currentStencilRef","currentStencilFuncMask","currentStencilFail","currentStencilZFail","currentStencilZPass","currentStencilClear","stencilTest","STENCIL_TEST","stencilMask","stencilFunc","stencilRef","setOp","stencilFail","stencilZFail","stencilZPass","stencilOp","stencil","clearStencil","maxVertexAttributes","newAttributes","enabledAttributes","attributeDivisors","enabledCapabilities","currentProgram","currentBlendingEnabled","currentBlending","currentBlendEquation","currentBlendSrc","currentBlendDst","currentBlendEquationAlpha","currentBlendSrcAlpha","currentBlendDstAlpha","currentPremultipledAlpha","currentFlipSided","currentCullFace","currentLineWidth","currentPolygonOffsetFactor","currentPolygonOffsetUnits","MAX_COMBINED_TEXTURE_IMAGE_UNITS","lineWidthAvailable","glVersion","VERSION","parseFloat","currentTextureSlot","currentBoundTextures","currentScissor","currentViewport","createTexture","bindTexture","texParameteri","TEXTURE_MIN_FILTER","NEAREST","TEXTURE_MAG_FILTER","texImage2D","RGBA","emptyTextures","enableAttributeAndDivisor","enableVertexAttribArray","TEXTURE_2D","TEXTURE_CUBE_MAP","TEXTURE_CUBE_MAP_POSITIVE_X","setFlipSided","setCullFace","CULL_FACE","equationToGL","FUNC_ADD","FUNC_SUBTRACT","FUNC_REVERSE_SUBTRACT","MIN","MAX","MIN_EXT","MAX_EXT","factorToGL","ZERO","ONE","SRC_COLOR","SRC_ALPHA","SRC_ALPHA_SATURATE","DST_COLOR","DST_ALPHA","ONE_MINUS_SRC_COLOR","ONE_MINUS_SRC_ALPHA","ONE_MINUS_DST_COLOR","ONE_MINUS_DST_ALPHA","blending","blendEquation","blendSrc","blendDst","blendEquationAlpha","blendSrcAlpha","blendDstAlpha","BLEND","blendEquationSeparate","blendFuncSeparate","blendFunc","frontFace","CW","CCW","cullFace","BACK","FRONT","FRONT_AND_BACK","setPolygonOffset","polygonOffset","factor","POLYGON_OFFSET_FILL","activeTexture","webglSlot","TEXTURE0","initAttributes","enableAttribute","disableUnusedAttributes","disableVertexAttribArray","useProgram","setMaterial","frontFaceCW","colorWrite","stencilWrite","stencilWriteMask","stencilFuncMask","polygonOffsetFactor","polygonOffsetUnits","setLineWidth","lineWidth","scissorTest","SCISSOR_TEST","webglType","webglTexture","boundTexture","unbindTexture","compressedTexImage2D","texImage3D","scissor","WebGLTextures","_gl","utils","_videoTextures","useOffscreenCanvas","OffscreenCanvas","err","createCanvas","resizeImage","needsPowerOfTwo","needsNewCanvas","maxSize","HTMLImageElement","ImageBitmap","textureNeedsGenerateMipmaps","supportsMips","generateMipmap","__maxMipLevel","LOG2E","getInternalFormat","internalFormatName","glFormat","glType","RED","R32F","HALF_FLOAT","R16F","R8","RGB","RGB32F","RGB16F","RGB8","RGBA32F","RGBA16F","RGBA8","filterFallback","LINEAR","onTextureDispose","textureProperties","__webglInit","deleteTexture","__webglTexture","deallocateTexture","onRenderTargetDispose","renderTarget","renderTargetProperties","depthTexture","deleteFramebuffer","__webglFramebuffer","__webglDepthbuffer","deleteRenderbuffer","__webglMultisampledFramebuffer","__webglColorRenderbuffer","__webglDepthRenderbuffer","deallocateRenderTarget","textureUnits","setTexture2D","slot","updateVideoTexture","__version","complete","uploadTexture","setTextureCube","initTexture","pixelStorei","UNPACK_FLIP_Y_WEBGL","isCompressed","isDataTexture","cubeImage","convert","glInternalFormat","setTextureParameters","mipmap","mipmapImage","setTextureCubeDynamic","wrappingToGL","REPEAT","CLAMP_TO_EDGE","MIRRORED_REPEAT","filterToGL","NEAREST_MIPMAP_NEAREST","NEAREST_MIPMAP_LINEAR","LINEAR_MIPMAP_NEAREST","LINEAR_MIPMAP_LINEAR","textureType","TEXTURE_WRAP_S","TEXTURE_WRAP_T","TEXTURE_3D","TEXTURE_2D_ARRAY","TEXTURE_WRAP_R","__currentAnisotropy","texParameterf","TEXTURE_MAX_ANISOTROPY_EXT","UNPACK_PREMULTIPLY_ALPHA_WEBGL","UNPACK_ALIGNMENT","textureNeedsPowerOfTwo","isDepthTexture","DEPTH_COMPONENT","DEPTH_COMPONENT32F","DEPTH_COMPONENT24","DEPTH24_STENCIL8","DEPTH_COMPONENT16","DEPTH_STENCIL","setupFrameBufferTexture","framebuffer","attachment","textureTarget","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","setupRenderBufferStorage","renderbuffer","isMultisample","bindRenderbuffer","RENDERBUFFER","samples","getRenderTargetSamples","renderbufferStorageMultisample","renderbufferStorage","framebufferRenderbuffer","DEPTH_ATTACHMENT","DEPTH_STENCIL_ATTACHMENT","setupDepthRenderbuffer","isCube","webglDepthTexture","setupDepthTexture","createRenderbuffer","isWebGLMultisampleRenderTarget","warnedTexture2D","warnedTextureCube","textureUnit","resetTextureUnits","setupRenderTarget","createFramebuffer","COLOR_ATTACHMENT0","updateRenderTargetMipmap","updateMultisampleRenderTarget","READ_FRAMEBUFFER","DRAW_FRAMEBUFFER","COLOR_BUFFER_BIT","DEPTH_BUFFER_BIT","STENCIL_BUFFER_BIT","blitFramebuffer","WebGLUtils","UNSIGNED_SHORT_4_4_4_4","UNSIGNED_SHORT_5_5_5_1","UNSIGNED_SHORT_5_6_5","HALF_FLOAT_OES","ALPHA","LUMINANCE","LUMINANCE_ALPHA","RED_INTEGER","RG","RG_INTEGER","RGB_INTEGER","RGBA_INTEGER","COMPRESSED_RGB_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","COMPRESSED_RGB_PVRTC_4BPPV1_IMG","COMPRESSED_RGB_PVRTC_2BPPV1_IMG","COMPRESSED_RGBA_PVRTC_4BPPV1_IMG","COMPRESSED_RGBA_PVRTC_2BPPV1_IMG","COMPRESSED_RGB_ETC1_WEBGL","COMPRESSED_RGB8_ETC2","COMPRESSED_RGBA8_ETC2_EAC","UNSIGNED_INT_24_8","UNSIGNED_INT_24_8_WEBGL","ArrayCamera","isArrayCamera","WebXRManager","framebufferScaleFactor","referenceSpace","referenceSpaceType","controllers","inputSourcesMap","Map","cameraL","cameraR","cameraVR","_currentDepthNear","_currentDepthFar","onSessionEvent","controller","inputSource","targetRay","grip","onSessionEnd","forEach","setFramebuffer","isPresenting","onRequestReferenceSpace","updateInputSources","inputSources","removed","added","getController","getControllerGrip","setFramebufferScaleFactor","setReferenceSpaceType","getReferenceSpace","setSession","getContextAttributes","layerInit","antialias","baseLayer","XRWebGLLayer","updateRenderState","requestReferenceSpace","then","cameraLPos","cameraRPos","updateCamera","getCamera","depthNear","depthFar","ipd","projL","projR","topFov","bottomFov","leftFov","rightFov","zOffset","xOffset","near2","far2","left2","right2","top2","bottom2","setProjectionFromUnion","onAnimationFrameCallback","getViewerPose","views","inputPose","gripPose","getPose","targetRaySpace","gripSpace","WebGLRenderer","_context","_alpha","_depth","_stencil","_antialias","_premultipliedAlpha","_preserveDrawingBuffer","preserveDrawingBuffer","_powerPreference","powerPreference","_failIfMajorPerformanceCaveat","failIfMajorPerformanceCaveat","currentRenderList","currentRenderState","domElement","sortObjects","toneMappingExposure","toneMappingWhitePoint","programCache","renderLists","morphtargets","bufferRenderer","indexedBufferRenderer","_this","_isContextLost","_framebuffer","_currentActiveCubeFace","_currentActiveMipmapLevel","_currentRenderTarget","_currentFramebuffer","_currentMaterialId","_currentGeometryProgram","_currentCamera","_currentArrayCamera","_currentViewport","_currentScissor","_currentScissorTest","_width","_height","_pixelRatio","_opaqueSort","_transparentSort","_scissor","_scissorTest","_clipping","_clippingEnabled","_localClippingEnabled","_vector3","getTargetPixelRatio","contextAttributes","xrCompatible","onContextLost","onContextRestore","initGLContext","preventDefault","onMaterialDispose","releaseMaterialProgramReference","deallocateMaterial","programInfo","forceContextLoss","loseContext","forceContextRestore","restoreContext","getPixelRatio","setPixelRatio","setSize","getSize","updateStyle","style","setViewport","getDrawingBufferSize","setDrawingBufferSize","pixelRatio","getCurrentViewport","getScissor","setScissor","getScissorTest","boolean","setOpaqueSort","method","setTransparentSort","bits","renderBufferImmediate","hasPositions","hasNormals","hasUvs","hasColors","programAttributes","positionArray","DYNAMIC_DRAW","vertexAttribPointer","normalArray","colorArray","tempScene","Scene","setProgram","updateBuffers","rangeFactor","materialDefaultAttributeValues","programAttribute","geometryAttribute","isInstancedInterleavedBuffer","vertexAttrib2fv","vertexAttrib3fv","vertexAttrib4fv","vertexAttrib1fv","setupVertexAttributes","dataCount","rangeStart","rangeCount","drawStart","drawEnd","drawCount","isLineSegments","isSprite","compile","compiled","initMaterial","projectObject","isLOD","isImmediateRenderObject","renderObjects","overrideMaterial","camera2","renderObjectImmediate","materialProperties","lightsStateVersion","programCacheKey","programChange","numSupportedMorphTargets","numSupportedMorphNormals","needsLights","isMeshToonMaterial","isShadowMaterial","materialNeedsLights","ambientLightColor","lightProbe","directionalLights","directionalLightShadows","spotLights","spotLightShadows","rectAreaLights","pointLights","pointLightShadows","hemisphereLights","progUniforms","uniformsList","useCache","refreshProgram","refreshMaterial","refreshLights","p_uniforms","m_uniforms","uCamPos","cameraPosition","isMeshBasicMaterial","boneTexture","boneMatrices","DataTexture","boneTextureSize","fogColor","fogNear","fogFar","fogDensity","refreshUniformsFog","refreshUniformsCommon","refreshUniformsLambert","refreshUniformsToon","refreshUniformsPhong","refreshUniformsStandard","refreshUniformsPhysical","isMeshMatcapMaterial","refreshUniformsMatcap","refreshUniformsDepth","refreshUniformsDistance","isMeshNormalMaterial","refreshUniformsNormal","isLineBasicMaterial","diffuse","refreshUniformsLine","isLineDashedMaterial","gapSize","refreshUniformsDash","isPointsMaterial","uvScaleMap","refreshUniformsPoints","isSpriteMaterial","refreshUniformsSprites","ltc_1","UniformsLib","LTC_1","ltc_2","LTC_2","uv2ScaleMap","maxMipLevel","uv2Transform","window","opaqueObjects","transparentObjects","readRenderTargetPixels","activeCubeFaceIndex","restore","textureFormat","IMPLEMENTATION_COLOR_READ_FORMAT","IMPLEMENTATION_COLOR_READ_TYPE","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","readPixels","copyFramebufferToTexture","level","levelScale","copyTexImage2D","copyTextureToTexture","srcTexture","dstTexture","texSubImage2D","__THREE_DEVTOOLS__","CustomEvent","_instanceLocalMatrix","_instanceWorldMatrix","_instanceIntersects","_mesh","InstancedMesh","getMatrixAt","raycastTimes","instanceId","setMatrixAt","_geometry","_intersectPoint","_worldScale","_mvPosition","_alignedPosition","_rotatedPosition","_viewWorldMatrix","float32Array","interleavedBuffer","InterleavedBufferAttribute","transformVertex","vertexPosition","mvPosition","intersect","Triangle","_v2","_currentLevel","levels","addLevel","getCurrentLevel","getObjectForDistance","zoom","MaterialLoader","getTexture","setHex","shading","setTextures","BufferGeometryLoader","typedArray","TYPED_ARRAYS","bufferAttribute","attributeArray","drawcalls","offsets","Sphere","WireframeGeometry","ol","edge1","edge2","edge","edges","ParametricGeometry","func","slices","stacks","ParametricBufferGeometry","pu","pv","sliceCount","TetrahedronGeometry","TetrahedronBufferGeometry","DodecahedronGeometry","DodecahedronBufferGeometry","TubeGeometry","taper","bufferGeometry","TubeBufferGeometry","frames","P","generateSegment","generateUVs","generateIndices","generateBufferData","RingGeometry","innerRadius","outerRadius","thetaSegments","phiSegments","RingBufferGeometry","radiusStep","thetaSegmentLevel","LatheGeometry","LatheBufferGeometry","base","inverseSegments","n1","n2","EdgesGeometry","thresholdAngle","geometry2","thresholdDot","sourceVertices","face1","face2","ObjectLoader","parseShape","parseGeometries","parseImages","parseTextures","parseMaterials","parseObject","parseAnimations","bufferGeometryLoader","radiusTop","radiusBottom","Curves","details","geometryShapes","loadImage","currentUrl","parseConstant","TEXTURE_MAPPING","TEXTURE_WRAPPING","TEXTURE_FILTER","getGeometry","getMaterial","isInteger","focus","filmGauge","filmOffset","LineSegments","linecap","linejoin","Clock","autoStart","oldTime","elapsedTime","running","performance","Date","getElapsedTime","getDelta","newTime","_offsetMatrix","_identityMatrix","Skeleton","boneInverses","slerp","qa","qb","qm","src0","srcOffset0","src1","srcOffset1","y0","z0","w0","y1","z1","w1","dir","sqrSin","len","tDir","isQuaternion","s3","halfAngle","trace","setFromUnitVectors","vFrom","vTo","rotateTowards","step","conjugate","multiplyQuaternions","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","cosHalfTheta","sqrSinHalfTheta","sinHalfTheta","halfTheta","ratioA","ratioB","listener","_listeners","listeners","hasEventListener","listenerArray","_box","optionalCenter","maxRadiusSq","empty","radiusSum","clampPoint","deltaLengthSq","getBoundingBox","expandByScalar","setFocalLength","focalLength","vExtentSlope","getFilmHeight","atan","getFocalLength","tan","getEffectiveFOV","getFilmWidth","setViewOffset","fullWidth","fullHeight","clearViewOffset","skew","CatmullRom","QuadraticBezier","QuadraticBezierP0","QuadraticBezierP1","QuadraticBezierP2","CubicBezier","CubicBezierP0","CubicBezierP1","CubicBezierP2","CubicBezierP3","PolyhedronGeometry","PolyhedronBufferGeometry","vertexBuffer","uvBuffer","subdivideFace","cols","aj","bj","rows","pushVertex","getVertexByIndex","correctUV","azimuth","subdivide","applyRadius","centroid","uvA","uvB","uvC","azi","correctUVs","correctSeam","normalizeNormals","_cachedIndex","validate_interval","seek","linear_scan","forward_scan","giveUpAt","afterEnd_","t1global","beforeStart_","mid","PlaneGeometry","PlaneBufferGeometry","width_half","height_half","segment_width","segment_height","isScene","_start","_end","computeLineDistances","positionAttribute","_points","Box3","_v0","_f0","_f1","_f2","_center","_extents","_triangleNormal","_testAxis","satForAxes","axes","extents","isBox3","setFromArray","minX","minY","minZ","maxX","maxY","maxZ","setFromBufferAttribute","makeEmpty","expandByPoint","setFromCenterAndSize","halfSize","expandByObject","isEmpty","expandByVector","union","containsBox","intersectsTriangle","triangle","getBoundingSphere","DirectGeometry","computeGroups","fromGeometry","morphTargetsPosition","hasFaceVertexUv2","morphTargetsLength","morphTargetsNormal","morphNormalsLength","hasSkinIndices","hasSkinWeights","_bufferGeometryId","_boxMorphTargets","getIndex","getAttribute","clearGroups","setDrawRange","tangent","direct","__directGeometry","lineDistance","fromDirectGeometry","morphAttributesPosition","attributeArray1","attribute2","attributeArray2","attributeOffset","toNonIndexed","convertBufferAttribute","array2","newAttribute","morphArray","attributeData","hasMorphAttributes","scaleW","scaleH","weights","poleAxis","shaderMaterial","SIZE_MAX","EXTRA_LOD_SIGMA","TOTAL_LODS","LOD_MAX","ENCODINGS","_flatCamera","_blurMaterial","_getCommonVertexShader","_getEncodings","_equirectShader","_cubemapShader","_lodPlanes","_sizeLods","_sigmas","lod","sizeLod","sigma","texelSize","uv1","positionSize","uvSize","faceIndexSize","coordinates","fill","_createPlanes","_pingPongRenderTarget","_oldTarget","PHI","INV_PHI","_axisDirections","PMREMGenerator","_compileMaterial","_allocateTargets","equirectangular","cubeUVRenderTarget","_createRenderTarget","_cleanup","outputTarget","tmpScene","_setViewport","_applyPMREM","_blur","lodIn","lodOut","_halfBlur","targetIn","targetOut","sigmaRadians","blurScene","blurUniforms","pixels","radiansPerPixel","isFinite","sigmaPixels","exp","outputSize","_getEquirectShader","_getCubemapShader","fromScene","cubeCamera","upSign","forwardSign","convertSRGBToLinear","maxComponent","fExp","log2","col","_sceneToCubeUV","fromEquirectangular","fromCubemap","cubemap","_textureToCubeUV","compileCubemapShader","compileEquirectangularShader","_colorKeywords","_hslA","_hslB","setRGB","hue2rgb","SRGBToLinear","LinearToSRGB","setStyle","hex","setHSL","handleAlpha","charAt","setColorName","copyGammaToLinear","copyLinearToGamma","safeInverse","convertGammaToLinear","convertLinearToGamma","copySRGBToLinear","copyLinearToSRGB","convertLinearToSRGB","getHexString","getHSL","hue","saturation","lightness","delta","getStyle","offsetHSL","addColors","color1","color2","lerpHSL","NAMES","CurvePath","curves","autoClose","curve","closePath","startPoint","endPoint","curveLengths","getCurveLengths","segmentLength","lens","cacheLengths","sums","pts","Path","currentPoint","aCPx","aCPy","aCP1x","aCP1y","aCP2x","aCP2y","splineThru","npts","absarc","absellipse","ellipse","firstPoint","lastPoint","localThreshold","localThresholdSq","vStart","vEnd","interSegment","interRay","nbVertices","Camera","_vector1","_vector2","_normalMatrix","isPlane","setFromNormalAndCoplanarPoint","setFromCoplanarPoints","inverseNormalLength","distanceToSphere","projectPoint","intersectLine","line","intersectsLine","startSign","endSign","coplanarPoint","optionalNormalMatrix","referencePoint","AxesHelper","CylinderGeometry","CylinderBufferGeometry","indexArray","generateCap","centerIndexStart","centerIndexEnd","cosTheta","sinTheta","slope","indexRow","generateTorso","Earcut","holeIndices","dim","invSize","hasHoles","outerLen","outerNode","linkedList","prev","queue","steiner","getLeftmost","compareX","eliminateHole","filterPoints","eliminateHoles","earcutLinked","clockwise","signedArea","insertNode","removeNode","again","ear","pass","zOrder","prevZ","nextZ","tail","numMerges","pSize","qSize","inSize","sortLinked","indexCurve","isEarHashed","isEar","cureLocalIntersections","splitEarcut","pointInTriangle","minTX","minTY","maxTX","maxTY","locallyInside","isValidDiagonal","splitPolygon","hx","hy","mx","my","tanMin","findHoleBridge","leftmost","intersectsPolygon","inside","middleInside","q1","q2","Node","an","bp","ShapeUtils","area","removeDupEndPts","addContour","holeIndex","subPaths","currentPath","isCCW","noHoles","toShapesNoHoles","inSubpaths","tmpPath","tmpShape","isPointInsidePolygon","inPolygon","polyLen","edgeLowPt","edgeHighPt","edgeDx","edgeDy","perpEdge","solid","holesFirst","tmpPoints","tmpHoles","betterShapeHoles","newShapes","newShapeHoles","mainIdx","ambiguous","toChange","sIdx","sLen","sho","hIdx","ho","hole_unassigned","s2Idx","froms","tos","materialId","isMaterial","newValue","currentValue","isRoot","srcPlanes","dstPlanes","testPoint","rayPointDistanceSq","intersectPoint","distanceToRay","_v3","_vab","_vac","_vbc","_vap","_vbp","_vcp","targetLengthSq","getBarycoord","dot00","dot01","dot02","dot11","dot12","denom","invDenom","uv3","isFrontFacing","setFromPointsAndIndices","i0","i2","getArea","getMidpoint","getPlane","d4","vc","d5","d6","vb","va"],"mappings":"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a,cAAe,aAIf4Z,qBAAsB,oBAEtBC,+BAAgC,SAAWse,GAE1C,OAAO,IAAIL,EAA6Bp0C,KAAKqX,MAAOrX,KAAKgS,OAAQhS,KAAKuc,eAAgBk4B,IAIvFre,oCAAgC90B,K,gCCnCjC,+CAMA,SAASkiB,EAAQD,GAEhBvjB,KAAKujB,aAAwBjiB,IAAZiiB,EAA0BA,EAAU,IAErDvjB,KAAK20C,YAAc,YACnB30C,KAAKmc,KAAO,GACZnc,KAAK40C,aAAe,GAIrB30C,OAAOC,OAAQsjB,EAAOrjB,UAAW,CAEhCujB,KAAM,aAENrR,MAAO,aAEPwiC,eAAgB,SAAWF,GAG1B,OADA30C,KAAK20C,YAAcA,EACZ30C,MAIRikB,QAAS,SAAW9H,GAGnB,OADAnc,KAAKmc,KAAOA,EACLnc,MAIR80C,gBAAiB,SAAWF,GAG3B,OADA50C,KAAK40C,aAAeA,EACb50C,S,kECvCgB,ICiId+0C,EAAc,CACxBC,kBDlIwB,yFCmIxBC,uBCnIwB,qEDoIxBC,mBEpIwB,iFFqIxBC,eGrIwB,whBHsIxBC,oBItIwB,gGJuIxBC,aKvIwB,2CLwIxBC,mBMxIwB,yHNyIxBC,MOzIwB,4tYP0IxBC,sBQ1IwB,83CR2IxBC,yBS3IwB,ypBT4IxBC,8BU5IwB,sIV6IxBC,4BW7IwB,6EX8IxBC,uBY9IwB,mFZ+IxBC,ea/IwB,kEbgJxBC,oBchJwB,2DdiJxBC,kBejJwB,2DfkJxBC,agBlJwB,8DhBmJxBC,OiBnJwB,oqGjBoJxBC,4BkBpJwB,+yHlBqJxBC,qBmBrJwB,qtBnBsJxBC,4BoBtJwB,0JpBuJxBC,uBqBvJwB,2KrBwJxBC,qBsBxJwB,yNtByJxBC,0BuBzJwB,2EvB0JxBC,mBwB1JwB,0DxB2JxBC,wByB3JwB,0jHzB4JxBC,gB0B5JwB,mlE1B6JxBC,4B2B7JwB,iP3B8JxBC,qB4B9JwB,2U5B+JxBC,mB6B/JwB,mT7BgKxBC,8B8BhKwB,yqI9BiKxBC,c+BjKwB,mrB/BkKxBC,WgClKwB,8DhCmKxBC,gBiCnKwB,4DjCoKxBC,akCpKwB,0SlCqKxBC,kBmCrKwB,4NnCsKxBC,0BoCtKwB,kcpCuKxBC,kBqCvKwB,6QrCwKxBC,uBsCxKwB,yGtCyKxBC,sBuCzKwB,wsFvC0KxBC,kBwC1KwB,+6LxC2KxBC,qByC3KwB,oMzC4KxBC,0B0C5KwB,2xC1C6KxBC,sB2C7KwB,0M3C8KxBC,2B4C9KwB,u1C5C+KxBC,yB6C/KwB,y8C7CgLxBC,8B8ChLwB,2qM9CiLxBC,sB+CjLwB,ikJ/CkLxBC,qBgDlLwB,4iChDmLxBC,oBiDnLwB,yRjDoLxBC,qBkDpLwB,4SlDqLxBC,0BmDrLwB,iLnDsLxBC,wBoDtLwB,sMpDuLxBC,mBqDvLwB,qZrDwLxBC,asDxLwB,8JtDyLxBC,kBuDzLwB,2DvD0LxBC,sBwD1LwB,sWxD2LxBC,2ByD3LwB,2NzD4LxBC,sB0D5LwB,8Q1D6LxBC,2B2D7LwB,6E3D8LxBC,mB4D9LwB,wrB5D+LxBC,wB6D/LwB,wO7DgMxBC,mB8DhMwB,q9B9DiMxBC,sB+DjMwB,8iC/DkMxBC,qBgElMwB,2vBhEmMxBC,wBiEnMwB,qrCjEoMxBC,gCkEpMwB,6ElEqMxBC,+BmErMwB,sXnEsMxBC,wBoEtMwB,ySpEuMxBC,QqEvMwB,yvDrEwMxBC,6BsExMwB,8MtEyMxBC,euEzMwB,kOvE0MxBC,mBwE1MwB,wFxE2MxBC,wByE3MwB,2mBzE4MxBC,sB0E5MwB,8Q1E6MxBC,2B2E7MwB,6E3E8MxBC,wB4E9MwB,i7T5E+MxBC,sB6E/MwB,srB7EgNxBC,iB8EhNwB,y4B9EiNxBC,yB+EjNwB,wjD/EkNxBC,gBgFlNwB,0OhFmNxBC,qBiFnNwB,wjCjFoNxBC,gBkFpNwB,2YlFqNxBC,kBmFrNwB,senFsNxBC,qBoFtNwB,wMpFuNxBC,0BqFvNwB,2ErFwNxBC,qBsFxNwB,qGtFyNxBC,0BuFzNwB,4jDvF0NxBC,iBwF1NwB,iGxF2NxBC,eyF3NwB,0JzF4NxBC,U0F5NwB,6E1F6NxBC,kB2F7NwB,4F3F8NxBC,gB4F9NwB,mJ5F+NxBC,W6F/NwB,sH7FgOxBC,gB8FhOwB,kS9FkOxBC,gB+FlOwB,4O/FmOxBC,gBgGnOwB,0KhGoOxBC,UiGpOwB,8WjGqOxBC,UkGrOwB,wQlGsOxBC,WmGtOwB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","file":"three.js","sourcesContent":["export var REVISION = '115';\nexport var MOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2, ROTATE: 0, DOLLY: 1, PAN: 2 };\nexport var TOUCH = { ROTATE: 0, PAN: 1, DOLLY_PAN: 2, DOLLY_ROTATE: 3 };\nexport var CullFaceNone = 0;\nexport var CullFaceBack = 1;\nexport var CullFaceFront = 2;\nexport var CullFaceFrontBack = 3;\nexport var FrontFaceDirectionCW = 0;\nexport var FrontFaceDirectionCCW = 1;\nexport var BasicShadowMap = 0;\nexport var PCFShadowMap = 1;\nexport var PCFSoftShadowMap = 2;\nexport var VSMShadowMap = 3;\nexport var FrontSide = 0;\nexport var BackSide = 1;\nexport var DoubleSide = 2;\nexport var FlatShading = 1;\nexport var SmoothShading = 2;\nexport var NoBlending = 0;\nexport var NormalBlending = 1;\nexport var AdditiveBlending = 2;\nexport var SubtractiveBlending = 3;\nexport var MultiplyBlending = 4;\nexport var CustomBlending = 5;\nexport var AddEquation = 100;\nexport var SubtractEquation = 101;\nexport var ReverseSubtractEquation = 102;\nexport var MinEquation = 103;\nexport var MaxEquation = 104;\nexport var ZeroFactor = 200;\nexport var OneFactor = 201;\nexport var SrcColorFactor = 202;\nexport var OneMinusSrcColorFactor = 203;\nexport var SrcAlphaFactor = 204;\nexport var OneMinusSrcAlphaFactor = 205;\nexport var DstAlphaFactor = 206;\nexport var OneMinusDstAlphaFactor = 207;\nexport var DstColorFactor = 208;\nexport var OneMinusDstColorFactor = 209;\nexport var SrcAlphaSaturateFactor = 210;\nexport var NeverDepth = 0;\nexport var AlwaysDepth = 1;\nexport var LessDepth = 2;\nexport var LessEqualDepth = 3;\nexport var EqualDepth = 4;\nexport var GreaterEqualDepth = 5;\nexport var GreaterDepth = 6;\nexport var NotEqualDepth = 7;\nexport var MultiplyOperation = 0;\nexport var MixOperation = 1;\nexport var AddOperation = 2;\nexport var NoToneMapping = 0;\nexport var LinearToneMapping = 1;\nexport var ReinhardToneMapping = 2;\nexport var Uncharted2ToneMapping = 3;\nexport var CineonToneMapping = 4;\nexport var ACESFilmicToneMapping = 5;\n\nexport var UVMapping = 300;\nexport var CubeReflectionMapping = 301;\nexport var CubeRefractionMapping = 302;\nexport var EquirectangularReflectionMapping = 303;\nexport var EquirectangularRefractionMapping = 304;\nexport var SphericalReflectionMapping = 305;\nexport var CubeUVReflectionMapping = 306;\nexport var CubeUVRefractionMapping = 307;\nexport var RepeatWrapping = 1000;\nexport var ClampToEdgeWrapping = 1001;\nexport var MirroredRepeatWrapping = 1002;\nexport var NearestFilter = 1003;\nexport var NearestMipmapNearestFilter = 1004;\nexport var NearestMipMapNearestFilter = 1004;\nexport var NearestMipmapLinearFilter = 1005;\nexport var NearestMipMapLinearFilter = 1005;\nexport var LinearFilter = 1006;\nexport var LinearMipmapNearestFilter = 1007;\nexport var LinearMipMapNearestFilter = 1007;\nexport var LinearMipmapLinearFilter = 1008;\nexport var LinearMipMapLinearFilter = 1008;\nexport var UnsignedByteType = 1009;\nexport var ByteType = 1010;\nexport var ShortType = 1011;\nexport var UnsignedShortType = 1012;\nexport var IntType = 1013;\nexport var UnsignedIntType = 1014;\nexport var FloatType = 1015;\nexport var HalfFloatType = 1016;\nexport var UnsignedShort4444Type = 1017;\nexport var UnsignedShort5551Type = 1018;\nexport var UnsignedShort565Type = 1019;\nexport var UnsignedInt248Type = 1020;\nexport var AlphaFormat = 1021;\nexport var RGBFormat = 1022;\nexport var RGBAFormat = 1023;\nexport var LuminanceFormat = 1024;\nexport var LuminanceAlphaFormat = 1025;\nexport var RGBEFormat = RGBAFormat;\nexport var DepthFormat = 1026;\nexport var DepthStencilFormat = 1027;\nexport var RedFormat = 1028;\nexport var RedIntegerFormat = 1029;\nexport var RGFormat = 1030;\nexport var RGIntegerFormat = 1031;\nexport var RGBIntegerFormat = 1032;\nexport var RGBAIntegerFormat = 1033;\n\nexport var RGB_S3TC_DXT1_Format = 33776;\nexport var RGBA_S3TC_DXT1_Format = 33777;\nexport var RGBA_S3TC_DXT3_Format = 33778;\nexport var RGBA_S3TC_DXT5_Format = 33779;\nexport var RGB_PVRTC_4BPPV1_Format = 35840;\nexport var RGB_PVRTC_2BPPV1_Format = 35841;\nexport var RGBA_PVRTC_4BPPV1_Format = 35842;\nexport var RGBA_PVRTC_2BPPV1_Format = 35843;\nexport var RGB_ETC1_Format = 36196;\nexport var RGB_ETC2_Format = 37492;\nexport var RGBA_ETC2_EAC_Format = 37496;\nexport var RGBA_ASTC_4x4_Format = 37808;\nexport var RGBA_ASTC_5x4_Format = 37809;\nexport var RGBA_ASTC_5x5_Format = 37810;\nexport var RGBA_ASTC_6x5_Format = 37811;\nexport var RGBA_ASTC_6x6_Format = 37812;\nexport var RGBA_ASTC_8x5_Format = 37813;\nexport var RGBA_ASTC_8x6_Format = 37814;\nexport var RGBA_ASTC_8x8_Format = 37815;\nexport var RGBA_ASTC_10x5_Format = 37816;\nexport var RGBA_ASTC_10x6_Format = 37817;\nexport var RGBA_ASTC_10x8_Format = 37818;\nexport var RGBA_ASTC_10x10_Format = 37819;\nexport var RGBA_ASTC_12x10_Format = 37820;\nexport var RGBA_ASTC_12x12_Format = 37821;\nexport var RGBA_BPTC_Format = 36492;\nexport var SRGB8_ALPHA8_ASTC_4x4_Format = 37840;\nexport var SRGB8_ALPHA8_ASTC_5x4_Format = 37841;\nexport var SRGB8_ALPHA8_ASTC_5x5_Format = 37842;\nexport var SRGB8_ALPHA8_ASTC_6x5_Format = 37843;\nexport var SRGB8_ALPHA8_ASTC_6x6_Format = 37844;\nexport var SRGB8_ALPHA8_ASTC_8x5_Format = 37845;\nexport var SRGB8_ALPHA8_ASTC_8x6_Format = 37846;\nexport var SRGB8_ALPHA8_ASTC_8x8_Format = 37847;\nexport var SRGB8_ALPHA8_ASTC_10x5_Format = 37848;\nexport var SRGB8_ALPHA8_ASTC_10x6_Format = 37849;\nexport var SRGB8_ALPHA8_ASTC_10x8_Format = 37850;\nexport var SRGB8_ALPHA8_ASTC_10x10_Format = 37851;\nexport var SRGB8_ALPHA8_ASTC_12x10_Format = 37852;\nexport var SRGB8_ALPHA8_ASTC_12x12_Format = 37853;\nexport var LoopOnce = 2200;\nexport var LoopRepeat = 2201;\nexport var LoopPingPong = 2202;\nexport var InterpolateDiscrete = 2300;\nexport var InterpolateLinear = 2301;\nexport var InterpolateSmooth = 2302;\nexport var ZeroCurvatureEnding = 2400;\nexport var ZeroSlopeEnding = 2401;\nexport var WrapAroundEnding = 2402;\nexport var TrianglesDrawMode = 0;\nexport var TriangleStripDrawMode = 1;\nexport var TriangleFanDrawMode = 2;\nexport var LinearEncoding = 3000;\nexport var sRGBEncoding = 3001;\nexport var GammaEncoding = 3007;\nexport var RGBEEncoding = 3002;\nexport var LogLuvEncoding = 3003;\nexport var RGBM7Encoding = 3004;\nexport var RGBM16Encoding = 3005;\nexport var RGBDEncoding = 3006;\nexport var BasicDepthPacking = 3200;\nexport var RGBADepthPacking = 3201;\nexport var TangentSpaceNormalMap = 0;\nexport var ObjectSpaceNormalMap = 1;\n\nexport var ZeroStencilOp = 0;\nexport var KeepStencilOp = 7680;\nexport var ReplaceStencilOp = 7681;\nexport var IncrementStencilOp = 7682;\nexport var DecrementStencilOp = 7683;\nexport var IncrementWrapStencilOp = 34055;\nexport var DecrementWrapStencilOp = 34056;\nexport var InvertStencilOp = 5386;\n\nexport var NeverStencilFunc = 512;\nexport var LessStencilFunc = 513;\nexport var EqualStencilFunc = 514;\nexport var LessEqualStencilFunc = 515;\nexport var GreaterStencilFunc = 516;\nexport var NotEqualStencilFunc = 517;\nexport var GreaterEqualStencilFunc = 518;\nexport var AlwaysStencilFunc = 519;\n\nexport var StaticDrawUsage = 35044;\nexport var DynamicDrawUsage = 35048;\nexport var StreamDrawUsage = 35040;\nexport var StaticReadUsage = 35045;\nexport var DynamicReadUsage = 35049;\nexport var StreamReadUsage = 35041;\nexport var StaticCopyUsage = 35046;\nexport var DynamicCopyUsage = 35050;\nexport var StreamCopyUsage = 35042;\n","import { MathUtils } from './MathUtils.js';\nimport { Quaternion } from './Quaternion.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author kile / http://kile.stravaganza.org/\n * @author philogb / http://blog.thejit.org/\n * @author mikael emtinger / http://gomo.se/\n * @author egraether / http://egraether.com/\n * @author WestLangley / http://github.com/WestLangley\n */\n\nvar _vector = new Vector3();\nvar _quaternion = new Quaternion();\n\nfunction Vector3( x, y, z ) {\n\n\tthis.x = x || 0;\n\tthis.y = y || 0;\n\tthis.z = z || 0;\n\n}\n\nObject.assign( Vector3.prototype, {\n\n\tisVector3: true,\n\n\tset: function ( x, y, z ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetZ: function ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponent: function ( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetComponent: function ( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.x, this.y, this.z );\n\n\t},\n\n\tcopy: function ( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\n\t\treturn this;\n\n\t},\n\n\taddVectors: function ( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\n\t\treturn this;\n\n\t},\n\n\taddScaledVector: function ( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tsubScalar: function ( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\n\t\treturn this;\n\n\t},\n\n\tsubVectors: function ( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.' );\n\t\t\treturn this.multiplyVectors( v, w );\n\n\t\t}\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\t\tthis.z *= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyVectors: function ( a, b ) {\n\n\t\tthis.x = a.x * b.x;\n\t\tthis.y = a.y * b.y;\n\t\tthis.z = a.z * b.z;\n\n\t\treturn this;\n\n\t},\n\n\tapplyEuler: function ( euler ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tconsole.error( 'THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\treturn this.applyQuaternion( _quaternion.setFromEuler( euler ) );\n\n\t},\n\n\tapplyAxisAngle: function ( axis, angle ) {\n\n\t\treturn this.applyQuaternion( _quaternion.setFromAxisAngle( axis, angle ) );\n\n\t},\n\n\tapplyMatrix3: function ( m ) {\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\n\n\t\treturn this;\n\n\t},\n\n\tapplyNormalMatrix: function ( m ) {\n\n\t\treturn this.applyMatrix3( m ).normalize();\n\n\t},\n\n\tapplyMatrix4: function ( m ) {\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar e = m.elements;\n\n\t\tvar w = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] );\n\n\t\tthis.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] ) * w;\n\t\tthis.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] ) * w;\n\t\tthis.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * w;\n\n\t\treturn this;\n\n\t},\n\n\tapplyQuaternion: function ( q ) {\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar qx = q.x, qy = q.y, qz = q.z, qw = q.w;\n\n\t\t// calculate quat * vector\n\n\t\tvar ix = qw * x + qy * z - qz * y;\n\t\tvar iy = qw * y + qz * x - qx * z;\n\t\tvar iz = qw * z + qx * y - qy * x;\n\t\tvar iw = - qx * x - qy * y - qz * z;\n\n\t\t// calculate result * inverse quat\n\n\t\tthis.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\n\t\tthis.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\n\t\tthis.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\n\n\t\treturn this;\n\n\t},\n\n\tproject: function ( camera ) {\n\n\t\treturn this.applyMatrix4( camera.matrixWorldInverse ).applyMatrix4( camera.projectionMatrix );\n\n\t},\n\n\tunproject: function ( camera ) {\n\n\t\treturn this.applyMatrix4( camera.projectionMatrixInverse ).applyMatrix4( camera.matrixWorld );\n\n\t},\n\n\ttransformDirection: function ( m ) {\n\n\t\t// input: THREE.Matrix4 affine matrix\n\t\t// vector interpreted as a direction\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\n\n\t\treturn this.normalize();\n\n\t},\n\n\tdivide: function ( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\t\tthis.z /= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tdivideScalar: function ( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t},\n\n\tmin: function ( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\n\t\treturn this;\n\n\t},\n\n\tmax: function ( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\n\t\treturn this;\n\n\t},\n\n\tclamp: function ( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampScalar: function ( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\t\tthis.z = Math.max( minVal, Math.min( maxVal, this.z ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampLength: function ( min, max ) {\n\n\t\tvar length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t},\n\n\tfloor: function () {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tceil: function () {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tround: function () {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\n\t\treturn this;\n\n\t},\n\n\troundToZero: function () {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\n\n\t},\n\n\t// TODO lengthSquared?\n\n\tlengthSq: function () {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\n\n\t},\n\n\tmanhattanLength: function () {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\n\n\t},\n\n\tnormalize: function () {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t},\n\n\tsetLength: function ( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t},\n\n\tlerp: function ( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tlerpVectors: function ( v1, v2, alpha ) {\n\n\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\n\n\t},\n\n\tcross: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.' );\n\t\t\treturn this.crossVectors( v, w );\n\n\t\t}\n\n\t\treturn this.crossVectors( this, v );\n\n\t},\n\n\tcrossVectors: function ( a, b ) {\n\n\t\tvar ax = a.x, ay = a.y, az = a.z;\n\t\tvar bx = b.x, by = b.y, bz = b.z;\n\n\t\tthis.x = ay * bz - az * by;\n\t\tthis.y = az * bx - ax * bz;\n\t\tthis.z = ax * by - ay * bx;\n\n\t\treturn this;\n\n\t},\n\n\tprojectOnVector: function ( v ) {\n\n\t\tvar denominator = v.lengthSq();\n\n\t\tif ( denominator === 0 ) return this.set( 0, 0, 0 );\n\n\t\tvar scalar = v.dot( this ) / denominator;\n\n\t\treturn this.copy( v ).multiplyScalar( scalar );\n\n\t},\n\n\tprojectOnPlane: function ( planeNormal ) {\n\n\t\t_vector.copy( this ).projectOnVector( planeNormal );\n\n\t\treturn this.sub( _vector );\n\n\t},\n\n\treflect: function ( normal ) {\n\n\t\t// reflect incident vector off plane orthogonal to normal\n\t\t// normal is assumed to have unit length\n\n\t\treturn this.sub( _vector.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\n\n\t},\n\n\tangleTo: function ( v ) {\n\n\t\tvar denominator = Math.sqrt( this.lengthSq() * v.lengthSq() );\n\n\t\tif ( denominator === 0 ) return Math.PI / 2;\n\n\t\tvar theta = this.dot( v ) / denominator;\n\n\t\t// clamp, to handle numerical problems\n\n\t\treturn Math.acos( MathUtils.clamp( theta, - 1, 1 ) );\n\n\t},\n\n\tdistanceTo: function ( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t},\n\n\tdistanceToSquared: function ( v ) {\n\n\t\tvar dx = this.x - v.x, dy = this.y - v.y, dz = this.z - v.z;\n\n\t\treturn dx * dx + dy * dy + dz * dz;\n\n\t},\n\n\tmanhattanDistanceTo: function ( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y ) + Math.abs( this.z - v.z );\n\n\t},\n\n\tsetFromSpherical: function ( s ) {\n\n\t\treturn this.setFromSphericalCoords( s.radius, s.phi, s.theta );\n\n\t},\n\n\tsetFromSphericalCoords: function ( radius, phi, theta ) {\n\n\t\tvar sinPhiRadius = Math.sin( phi ) * radius;\n\n\t\tthis.x = sinPhiRadius * Math.sin( theta );\n\t\tthis.y = Math.cos( phi ) * radius;\n\t\tthis.z = sinPhiRadius * Math.cos( theta );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCylindrical: function ( c ) {\n\n\t\treturn this.setFromCylindricalCoords( c.radius, c.theta, c.y );\n\n\t},\n\n\tsetFromCylindricalCoords: function ( radius, theta, y ) {\n\n\t\tthis.x = radius * Math.sin( theta );\n\t\tthis.y = y;\n\t\tthis.z = radius * Math.cos( theta );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrixPosition: function ( m ) {\n\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 12 ];\n\t\tthis.y = e[ 13 ];\n\t\tthis.z = e[ 14 ];\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrixScale: function ( m ) {\n\n\t\tvar sx = this.setFromMatrixColumn( m, 0 ).length();\n\t\tvar sy = this.setFromMatrixColumn( m, 1 ).length();\n\t\tvar sz = this.setFromMatrixColumn( m, 2 ).length();\n\n\t\tthis.x = sx;\n\t\tthis.y = sy;\n\t\tthis.z = sz;\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrixColumn: function ( m, index ) {\n\n\t\treturn this.fromArray( m.elements, index * 4 );\n\n\t},\n\n\tsetFromMatrix3Column: function ( m, index ) {\n\n\t\treturn this.fromArray( m.elements, index * 3 );\n\n\t},\n\n\tequals: function ( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\n\t\treturn array;\n\n\t},\n\n\tfromBufferAttribute: function ( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Vector3 };\n","import { Quaternion } from '../math/Quaternion.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { EventDispatcher } from './EventDispatcher.js';\nimport { Euler } from '../math/Euler.js';\nimport { Layers } from './Layers.js';\nimport { Matrix3 } from '../math/Matrix3.js';\nimport { MathUtils } from '../math/MathUtils.js';\n\nvar _object3DId = 0;\n\nvar _v1 = new Vector3();\nvar _q1 = new Quaternion();\nvar _m1 = new Matrix4();\nvar _target = new Vector3();\n\nvar _position = new Vector3();\nvar _scale = new Vector3();\nvar _quaternion = new Quaternion();\n\nvar _xAxis = new Vector3( 1, 0, 0 );\nvar _yAxis = new Vector3( 0, 1, 0 );\nvar _zAxis = new Vector3( 0, 0, 1 );\n\nvar _addedEvent = { type: 'added' };\nvar _removedEvent = { type: 'removed' };\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author elephantatwork / www.elephantatwork.ch\n */\n\nfunction Object3D() {\n\n\tObject.defineProperty( this, 'id', { value: _object3DId ++ } );\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Object3D';\n\n\tthis.parent = null;\n\tthis.children = [];\n\n\tthis.up = Object3D.DefaultUp.clone();\n\n\tvar position = new Vector3();\n\tvar rotation = new Euler();\n\tvar quaternion = new Quaternion();\n\tvar scale = new Vector3( 1, 1, 1 );\n\n\tfunction onRotationChange() {\n\n\t\tquaternion.setFromEuler( rotation, false );\n\n\t}\n\n\tfunction onQuaternionChange() {\n\n\t\trotation.setFromQuaternion( quaternion, undefined, false );\n\n\t}\n\n\trotation._onChange( onRotationChange );\n\tquaternion._onChange( onQuaternionChange );\n\n\tObject.defineProperties( this, {\n\t\tposition: {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: position\n\t\t},\n\t\trotation: {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: rotation\n\t\t},\n\t\tquaternion: {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: quaternion\n\t\t},\n\t\tscale: {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: scale\n\t\t},\n\t\tmodelViewMatrix: {\n\t\t\tvalue: new Matrix4()\n\t\t},\n\t\tnormalMatrix: {\n\t\t\tvalue: new Matrix3()\n\t\t}\n\t} );\n\n\tthis.matrix = new Matrix4();\n\tthis.matrixWorld = new Matrix4();\n\n\tthis.matrixAutoUpdate = Object3D.DefaultMatrixAutoUpdate;\n\tthis.matrixWorldNeedsUpdate = false;\n\n\tthis.layers = new Layers();\n\tthis.visible = true;\n\n\tthis.castShadow = false;\n\tthis.receiveShadow = false;\n\n\tthis.frustumCulled = true;\n\tthis.renderOrder = 0;\n\n\tthis.userData = {};\n\n}\n\nObject3D.DefaultUp = new Vector3( 0, 1, 0 );\nObject3D.DefaultMatrixAutoUpdate = true;\n\nObject3D.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Object3D,\n\n\tisObject3D: true,\n\n\tonBeforeRender: function () {},\n\tonAfterRender: function () {},\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tthis.matrix.premultiply( matrix );\n\n\t\tthis.matrix.decompose( this.position, this.quaternion, this.scale );\n\n\t},\n\n\tapplyQuaternion: function ( q ) {\n\n\t\tthis.quaternion.premultiply( q );\n\n\t\treturn this;\n\n\t},\n\n\tsetRotationFromAxisAngle: function ( axis, angle ) {\n\n\t\t// assumes axis is normalized\n\n\t\tthis.quaternion.setFromAxisAngle( axis, angle );\n\n\t},\n\n\tsetRotationFromEuler: function ( euler ) {\n\n\t\tthis.quaternion.setFromEuler( euler, true );\n\n\t},\n\n\tsetRotationFromMatrix: function ( m ) {\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tthis.quaternion.setFromRotationMatrix( m );\n\n\t},\n\n\tsetRotationFromQuaternion: function ( q ) {\n\n\t\t// assumes q is normalized\n\n\t\tthis.quaternion.copy( q );\n\n\t},\n\n\trotateOnAxis: function ( axis, angle ) {\n\n\t\t// rotate object on axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\t_q1.setFromAxisAngle( axis, angle );\n\n\t\tthis.quaternion.multiply( _q1 );\n\n\t\treturn this;\n\n\t},\n\n\trotateOnWorldAxis: function ( axis, angle ) {\n\n\t\t// rotate object on axis in world space\n\t\t// axis is assumed to be normalized\n\t\t// method assumes no rotated parent\n\n\t\t_q1.setFromAxisAngle( axis, angle );\n\n\t\tthis.quaternion.premultiply( _q1 );\n\n\t\treturn this;\n\n\t},\n\n\trotateX: function ( angle ) {\n\n\t\treturn this.rotateOnAxis( _xAxis, angle );\n\n\t},\n\n\trotateY: function ( angle ) {\n\n\t\treturn this.rotateOnAxis( _yAxis, angle );\n\n\t},\n\n\trotateZ: function ( angle ) {\n\n\t\treturn this.rotateOnAxis( _zAxis, angle );\n\n\t},\n\n\ttranslateOnAxis: function ( axis, distance ) {\n\n\t\t// translate object by distance along axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\t_v1.copy( axis ).applyQuaternion( this.quaternion );\n\n\t\tthis.position.add( _v1.multiplyScalar( distance ) );\n\n\t\treturn this;\n\n\t},\n\n\ttranslateX: function ( distance ) {\n\n\t\treturn this.translateOnAxis( _xAxis, distance );\n\n\t},\n\n\ttranslateY: function ( distance ) {\n\n\t\treturn this.translateOnAxis( _yAxis, distance );\n\n\t},\n\n\ttranslateZ: function ( distance ) {\n\n\t\treturn this.translateOnAxis( _zAxis, distance );\n\n\t},\n\n\tlocalToWorld: function ( vector ) {\n\n\t\treturn vector.applyMatrix4( this.matrixWorld );\n\n\t},\n\n\tworldToLocal: function ( vector ) {\n\n\t\treturn vector.applyMatrix4( _m1.getInverse( this.matrixWorld ) );\n\n\t},\n\n\tlookAt: function ( x, y, z ) {\n\n\t\t// This method does not support objects having non-uniformly-scaled parent(s)\n\n\t\tif ( x.isVector3 ) {\n\n\t\t\t_target.copy( x );\n\n\t\t} else {\n\n\t\t\t_target.set( x, y, z );\n\n\t\t}\n\n\t\tvar parent = this.parent;\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\t_position.setFromMatrixPosition( this.matrixWorld );\n\n\t\tif ( this.isCamera || this.isLight ) {\n\n\t\t\t_m1.lookAt( _position, _target, this.up );\n\n\t\t} else {\n\n\t\t\t_m1.lookAt( _target, _position, this.up );\n\n\t\t}\n\n\t\tthis.quaternion.setFromRotationMatrix( _m1 );\n\n\t\tif ( parent ) {\n\n\t\t\t_m1.extractRotation( parent.matrixWorld );\n\t\t\t_q1.setFromRotationMatrix( _m1 );\n\t\t\tthis.quaternion.premultiply( _q1.inverse() );\n\n\t\t}\n\n\t},\n\n\tadd: function ( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( var i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.add( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( object === this ) {\n\n\t\t\tconsole.error( \"THREE.Object3D.add: object can't be added as a child of itself.\", object );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( ( object && object.isObject3D ) ) {\n\n\t\t\tif ( object.parent !== null ) {\n\n\t\t\t\tobject.parent.remove( object );\n\n\t\t\t}\n\n\t\t\tobject.parent = this;\n\t\t\tthis.children.push( object );\n\n\t\t\tobject.dispatchEvent( _addedEvent );\n\n\t\t} else {\n\n\t\t\tconsole.error( \"THREE.Object3D.add: object not an instance of THREE.Object3D.\", object );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tremove: function ( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( var i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.remove( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar index = this.children.indexOf( object );\n\n\t\tif ( index !== - 1 ) {\n\n\t\t\tobject.parent = null;\n\t\t\tthis.children.splice( index, 1 );\n\n\t\t\tobject.dispatchEvent( _removedEvent );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tattach: function ( object ) {\n\n\t\t// adds object as a child of this, while maintaining the object's world transform\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\t_m1.getInverse( this.matrixWorld );\n\n\t\tif ( object.parent !== null ) {\n\n\t\t\tobject.parent.updateWorldMatrix( true, false );\n\n\t\t\t_m1.multiply( object.parent.matrixWorld );\n\n\t\t}\n\n\t\tobject.applyMatrix4( _m1 );\n\n\t\tobject.updateWorldMatrix( false, false );\n\n\t\tthis.add( object );\n\n\t\treturn this;\n\n\t},\n\n\tgetObjectById: function ( id ) {\n\n\t\treturn this.getObjectByProperty( 'id', id );\n\n\t},\n\n\tgetObjectByName: function ( name ) {\n\n\t\treturn this.getObjectByProperty( 'name', name );\n\n\t},\n\n\tgetObjectByProperty: function ( name, value ) {\n\n\t\tif ( this[ name ] === value ) return this;\n\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\n\n\t\t\tvar child = this.children[ i ];\n\t\t\tvar object = child.getObjectByProperty( name, value );\n\n\t\t\tif ( object !== undefined ) {\n\n\t\t\t\treturn object;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn undefined;\n\n\t},\n\n\tgetWorldPosition: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldPosition() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\treturn target.setFromMatrixPosition( this.matrixWorld );\n\n\t},\n\n\tgetWorldQuaternion: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldQuaternion() target is now required' );\n\t\t\ttarget = new Quaternion();\n\n\t\t}\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\tthis.matrixWorld.decompose( _position, target, _scale );\n\n\t\treturn target;\n\n\t},\n\n\tgetWorldScale: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldScale() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\tthis.matrixWorld.decompose( _position, _quaternion, target );\n\n\t\treturn target;\n\n\t},\n\n\tgetWorldDirection: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldDirection() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\tvar e = this.matrixWorld.elements;\n\n\t\treturn target.set( e[ 8 ], e[ 9 ], e[ 10 ] ).normalize();\n\n\t},\n\n\traycast: function () {},\n\n\ttraverse: function ( callback ) {\n\n\t\tcallback( this );\n\n\t\tvar children = this.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].traverse( callback );\n\n\t\t}\n\n\t},\n\n\ttraverseVisible: function ( callback ) {\n\n\t\tif ( this.visible === false ) return;\n\n\t\tcallback( this );\n\n\t\tvar children = this.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].traverseVisible( callback );\n\n\t\t}\n\n\t},\n\n\ttraverseAncestors: function ( callback ) {\n\n\t\tvar parent = this.parent;\n\n\t\tif ( parent !== null ) {\n\n\t\t\tcallback( parent );\n\n\t\t\tparent.traverseAncestors( callback );\n\n\t\t}\n\n\t},\n\n\tupdateMatrix: function () {\n\n\t\tthis.matrix.compose( this.position, this.quaternion, this.scale );\n\n\t\tthis.matrixWorldNeedsUpdate = true;\n\n\t},\n\n\tupdateMatrixWorld: function ( force ) {\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tif ( this.matrixWorldNeedsUpdate || force ) {\n\n\t\t\tif ( this.parent === null ) {\n\n\t\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t\t} else {\n\n\t\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t\t}\n\n\t\t\tthis.matrixWorldNeedsUpdate = false;\n\n\t\t\tforce = true;\n\n\t\t}\n\n\t\t// update children\n\n\t\tvar children = this.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].updateMatrixWorld( force );\n\n\t\t}\n\n\t},\n\n\tupdateWorldMatrix: function ( updateParents, updateChildren ) {\n\n\t\tvar parent = this.parent;\n\n\t\tif ( updateParents === true && parent !== null ) {\n\n\t\t\tparent.updateWorldMatrix( true, false );\n\n\t\t}\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tif ( this.parent === null ) {\n\n\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t} else {\n\n\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t}\n\n\t\t// update children\n\n\t\tif ( updateChildren === true ) {\n\n\t\t\tvar children = this.children;\n\n\t\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\t\tchildren[ i ].updateWorldMatrix( false, true );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\t// meta is a string when called from JSON.stringify\n\t\tvar isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tvar output = {};\n\n\t\t// meta is a hash used to collect geometries, materials.\n\t\t// not providing it implies that this is the root object\n\t\t// being serialized.\n\t\tif ( isRootObject ) {\n\n\t\t\t// initialize meta obj\n\t\t\tmeta = {\n\t\t\t\tgeometries: {},\n\t\t\t\tmaterials: {},\n\t\t\t\ttextures: {},\n\t\t\t\timages: {},\n\t\t\t\tshapes: {}\n\t\t\t};\n\n\t\t\toutput.metadata = {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Object',\n\t\t\t\tgenerator: 'Object3D.toJSON'\n\t\t\t};\n\n\t\t}\n\n\t\t// standard Object3D serialization\n\n\t\tvar object = {};\n\n\t\tobject.uuid = this.uuid;\n\t\tobject.type = this.type;\n\n\t\tif ( this.name !== '' ) object.name = this.name;\n\t\tif ( this.castShadow === true ) object.castShadow = true;\n\t\tif ( this.receiveShadow === true ) object.receiveShadow = true;\n\t\tif ( this.visible === false ) object.visible = false;\n\t\tif ( this.frustumCulled === false ) object.frustumCulled = false;\n\t\tif ( this.renderOrder !== 0 ) object.renderOrder = this.renderOrder;\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) object.userData = this.userData;\n\n\t\tobject.layers = this.layers.mask;\n\t\tobject.matrix = this.matrix.toArray();\n\n\t\tif ( this.matrixAutoUpdate === false ) object.matrixAutoUpdate = false;\n\n\t\t// object specific properties\n\n\t\tif ( this.isInstancedMesh ) {\n\n\t\t\tobject.type = 'InstancedMesh';\n\t\t\tobject.count = this.count;\n\t\t\tobject.instanceMatrix = this.instanceMatrix.toJSON();\n\n\t\t}\n\n\t\t//\n\n\t\tfunction serialize( library, element ) {\n\n\t\t\tif ( library[ element.uuid ] === undefined ) {\n\n\t\t\t\tlibrary[ element.uuid ] = element.toJSON( meta );\n\n\t\t\t}\n\n\t\t\treturn element.uuid;\n\n\t\t}\n\n\t\tif ( this.isMesh || this.isLine || this.isPoints ) {\n\n\t\t\tobject.geometry = serialize( meta.geometries, this.geometry );\n\n\t\t\tvar parameters = this.geometry.parameters;\n\n\t\t\tif ( parameters !== undefined && parameters.shapes !== undefined ) {\n\n\t\t\t\tvar shapes = parameters.shapes;\n\n\t\t\t\tif ( Array.isArray( shapes ) ) {\n\n\t\t\t\t\tfor ( var i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\t\t\t\tvar shape = shapes[ i ];\n\n\t\t\t\t\t\tserialize( meta.shapes, shape );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tserialize( meta.shapes, shapes );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.material !== undefined ) {\n\n\t\t\tif ( Array.isArray( this.material ) ) {\n\n\t\t\t\tvar uuids = [];\n\n\t\t\t\tfor ( var i = 0, l = this.material.length; i < l; i ++ ) {\n\n\t\t\t\t\tuuids.push( serialize( meta.materials, this.material[ i ] ) );\n\n\t\t\t\t}\n\n\t\t\t\tobject.material = uuids;\n\n\t\t\t} else {\n\n\t\t\t\tobject.material = serialize( meta.materials, this.material );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tif ( this.children.length > 0 ) {\n\n\t\t\tobject.children = [];\n\n\t\t\tfor ( var i = 0; i < this.children.length; i ++ ) {\n\n\t\t\t\tobject.children.push( this.children[ i ].toJSON( meta ).object );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( isRootObject ) {\n\n\t\t\tvar geometries = extractFromCache( meta.geometries );\n\t\t\tvar materials = extractFromCache( meta.materials );\n\t\t\tvar textures = extractFromCache( meta.textures );\n\t\t\tvar images = extractFromCache( meta.images );\n\t\t\tvar shapes = extractFromCache( meta.shapes );\n\n\t\t\tif ( geometries.length > 0 ) output.geometries = geometries;\n\t\t\tif ( materials.length > 0 ) output.materials = materials;\n\t\t\tif ( textures.length > 0 ) output.textures = textures;\n\t\t\tif ( images.length > 0 ) output.images = images;\n\t\t\tif ( shapes.length > 0 ) output.shapes = shapes;\n\n\t\t}\n\n\t\toutput.object = object;\n\n\t\treturn output;\n\n\t\t// extract data from the cache hash\n\t\t// remove metadata on each item\n\t\t// and return as array\n\t\tfunction extractFromCache( cache ) {\n\n\t\t\tvar values = [];\n\t\t\tfor ( var key in cache ) {\n\n\t\t\t\tvar data = cache[ key ];\n\t\t\t\tdelete data.metadata;\n\t\t\t\tvalues.push( data );\n\n\t\t\t}\n\t\t\treturn values;\n\n\t\t}\n\n\t},\n\n\tclone: function ( recursive ) {\n\n\t\treturn new this.constructor().copy( this, recursive );\n\n\t},\n\n\tcopy: function ( source, recursive ) {\n\n\t\tif ( recursive === undefined ) recursive = true;\n\n\t\tthis.name = source.name;\n\n\t\tthis.up.copy( source.up );\n\n\t\tthis.position.copy( source.position );\n\t\tthis.quaternion.copy( source.quaternion );\n\t\tthis.scale.copy( source.scale );\n\n\t\tthis.matrix.copy( source.matrix );\n\t\tthis.matrixWorld.copy( source.matrixWorld );\n\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\t\tthis.matrixWorldNeedsUpdate = source.matrixWorldNeedsUpdate;\n\n\t\tthis.layers.mask = source.layers.mask;\n\t\tthis.visible = source.visible;\n\n\t\tthis.castShadow = source.castShadow;\n\t\tthis.receiveShadow = source.receiveShadow;\n\n\t\tthis.frustumCulled = source.frustumCulled;\n\t\tthis.renderOrder = source.renderOrder;\n\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\tif ( recursive === true ) {\n\n\t\t\tfor ( var i = 0; i < source.children.length; i ++ ) {\n\n\t\t\t\tvar child = source.children[ i ];\n\t\t\t\tthis.add( child.clone() );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Object3D };\n","import { WrapAroundEnding, ZeroCurvatureEnding, ZeroSlopeEnding, LoopPingPong, LoopOnce, LoopRepeat } from '../constants.js';\n\n/**\n *\n * Action provided by AnimationMixer for scheduling clip playback on specific\n * objects.\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n *\n */\n\nfunction AnimationAction( mixer, clip, localRoot ) {\n\n\tthis._mixer = mixer;\n\tthis._clip = clip;\n\tthis._localRoot = localRoot || null;\n\n\tvar tracks = clip.tracks,\n\t\tnTracks = tracks.length,\n\t\tinterpolants = new Array( nTracks );\n\n\tvar interpolantSettings = {\n\t\tendingStart: ZeroCurvatureEnding,\n\t\tendingEnd: ZeroCurvatureEnding\n\t};\n\n\tfor ( var i = 0; i !== nTracks; ++ i ) {\n\n\t\tvar interpolant = tracks[ i ].createInterpolant( null );\n\t\tinterpolants[ i ] = interpolant;\n\t\tinterpolant.settings = interpolantSettings;\n\n\t}\n\n\tthis._interpolantSettings = interpolantSettings;\n\n\tthis._interpolants = interpolants; // bound by the mixer\n\n\t// inside: PropertyMixer (managed by the mixer)\n\tthis._propertyBindings = new Array( nTracks );\n\n\tthis._cacheIndex = null; // for the memory manager\n\tthis._byClipCacheIndex = null; // for the memory manager\n\n\tthis._timeScaleInterpolant = null;\n\tthis._weightInterpolant = null;\n\n\tthis.loop = LoopRepeat;\n\tthis._loopCount = - 1;\n\n\t// global mixer time when the action is to be started\n\t// it's set back to 'null' upon start of the action\n\tthis._startTime = null;\n\n\t// scaled local time of the action\n\t// gets clamped or wrapped to 0..clip.duration according to loop\n\tthis.time = 0;\n\n\tthis.timeScale = 1;\n\tthis._effectiveTimeScale = 1;\n\n\tthis.weight = 1;\n\tthis._effectiveWeight = 1;\n\n\tthis.repetitions = Infinity; // no. of repetitions when looping\n\n\tthis.paused = false; // true -> zero effective time scale\n\tthis.enabled = true; // false -> zero effective weight\n\n\tthis.clampWhenFinished = false;// keep feeding the last frame?\n\n\tthis.zeroSlopeAtStart = true;// for smooth interpolation w/o separate\n\tthis.zeroSlopeAtEnd = true;// clips for start, loop and end\n\n}\n\nObject.assign( AnimationAction.prototype, {\n\n\t// State & Scheduling\n\n\tplay: function () {\n\n\t\tthis._mixer._activateAction( this );\n\n\t\treturn this;\n\n\t},\n\n\tstop: function () {\n\n\t\tthis._mixer._deactivateAction( this );\n\n\t\treturn this.reset();\n\n\t},\n\n\treset: function () {\n\n\t\tthis.paused = false;\n\t\tthis.enabled = true;\n\n\t\tthis.time = 0; // restart clip\n\t\tthis._loopCount = - 1;// forget previous loops\n\t\tthis._startTime = null;// forget scheduling\n\n\t\treturn this.stopFading().stopWarping();\n\n\t},\n\n\tisRunning: function () {\n\n\t\treturn this.enabled && ! this.paused && this.timeScale !== 0 &&\n\t\t\tthis._startTime === null && this._mixer._isActiveAction( this );\n\n\t},\n\n\t// return true when play has been called\n\tisScheduled: function () {\n\n\t\treturn this._mixer._isActiveAction( this );\n\n\t},\n\n\tstartAt: function ( time ) {\n\n\t\tthis._startTime = time;\n\n\t\treturn this;\n\n\t},\n\n\tsetLoop: function ( mode, repetitions ) {\n\n\t\tthis.loop = mode;\n\t\tthis.repetitions = repetitions;\n\n\t\treturn this;\n\n\t},\n\n\t// Weight\n\n\t// set the weight stopping any scheduled fading\n\t// although .enabled = false yields an effective weight of zero, this\n\t// method does *not* change .enabled, because it would be confusing\n\tsetEffectiveWeight: function ( weight ) {\n\n\t\tthis.weight = weight;\n\n\t\t// note: same logic as when updated at runtime\n\t\tthis._effectiveWeight = this.enabled ? weight : 0;\n\n\t\treturn this.stopFading();\n\n\t},\n\n\t// return the weight considering fading and .enabled\n\tgetEffectiveWeight: function () {\n\n\t\treturn this._effectiveWeight;\n\n\t},\n\n\tfadeIn: function ( duration ) {\n\n\t\treturn this._scheduleFading( duration, 0, 1 );\n\n\t},\n\n\tfadeOut: function ( duration ) {\n\n\t\treturn this._scheduleFading( duration, 1, 0 );\n\n\t},\n\n\tcrossFadeFrom: function ( fadeOutAction, duration, warp ) {\n\n\t\tfadeOutAction.fadeOut( duration );\n\t\tthis.fadeIn( duration );\n\n\t\tif ( warp ) {\n\n\t\t\tvar fadeInDuration = this._clip.duration,\n\t\t\t\tfadeOutDuration = fadeOutAction._clip.duration,\n\n\t\t\t\tstartEndRatio = fadeOutDuration / fadeInDuration,\n\t\t\t\tendStartRatio = fadeInDuration / fadeOutDuration;\n\n\t\t\tfadeOutAction.warp( 1.0, startEndRatio, duration );\n\t\t\tthis.warp( endStartRatio, 1.0, duration );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcrossFadeTo: function ( fadeInAction, duration, warp ) {\n\n\t\treturn fadeInAction.crossFadeFrom( this, duration, warp );\n\n\t},\n\n\tstopFading: function () {\n\n\t\tvar weightInterpolant = this._weightInterpolant;\n\n\t\tif ( weightInterpolant !== null ) {\n\n\t\t\tthis._weightInterpolant = null;\n\t\t\tthis._mixer._takeBackControlInterpolant( weightInterpolant );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// Time Scale Control\n\n\t// set the time scale stopping any scheduled warping\n\t// although .paused = true yields an effective time scale of zero, this\n\t// method does *not* change .paused, because it would be confusing\n\tsetEffectiveTimeScale: function ( timeScale ) {\n\n\t\tthis.timeScale = timeScale;\n\t\tthis._effectiveTimeScale = this.paused ? 0 : timeScale;\n\n\t\treturn this.stopWarping();\n\n\t},\n\n\t// return the time scale considering warping and .paused\n\tgetEffectiveTimeScale: function () {\n\n\t\treturn this._effectiveTimeScale;\n\n\t},\n\n\tsetDuration: function ( duration ) {\n\n\t\tthis.timeScale = this._clip.duration / duration;\n\n\t\treturn this.stopWarping();\n\n\t},\n\n\tsyncWith: function ( action ) {\n\n\t\tthis.time = action.time;\n\t\tthis.timeScale = action.timeScale;\n\n\t\treturn this.stopWarping();\n\n\t},\n\n\thalt: function ( duration ) {\n\n\t\treturn this.warp( this._effectiveTimeScale, 0, duration );\n\n\t},\n\n\twarp: function ( startTimeScale, endTimeScale, duration ) {\n\n\t\tvar mixer = this._mixer, now = mixer.time,\n\t\t\tinterpolant = this._timeScaleInterpolant,\n\n\t\t\ttimeScale = this.timeScale;\n\n\t\tif ( interpolant === null ) {\n\n\t\t\tinterpolant = mixer._lendControlInterpolant();\n\t\t\tthis._timeScaleInterpolant = interpolant;\n\n\t\t}\n\n\t\tvar times = interpolant.parameterPositions,\n\t\t\tvalues = interpolant.sampleValues;\n\n\t\ttimes[ 0 ] = now;\n\t\ttimes[ 1 ] = now + duration;\n\n\t\tvalues[ 0 ] = startTimeScale / timeScale;\n\t\tvalues[ 1 ] = endTimeScale / timeScale;\n\n\t\treturn this;\n\n\t},\n\n\tstopWarping: function () {\n\n\t\tvar timeScaleInterpolant = this._timeScaleInterpolant;\n\n\t\tif ( timeScaleInterpolant !== null ) {\n\n\t\t\tthis._timeScaleInterpolant = null;\n\t\t\tthis._mixer._takeBackControlInterpolant( timeScaleInterpolant );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// Object Accessors\n\n\tgetMixer: function () {\n\n\t\treturn this._mixer;\n\n\t},\n\n\tgetClip: function () {\n\n\t\treturn this._clip;\n\n\t},\n\n\tgetRoot: function () {\n\n\t\treturn this._localRoot || this._mixer._root;\n\n\t},\n\n\t// Interna\n\n\t_update: function ( time, deltaTime, timeDirection, accuIndex ) {\n\n\t\t// called by the mixer\n\n\t\tif ( ! this.enabled ) {\n\n\t\t\t// call ._updateWeight() to update ._effectiveWeight\n\n\t\t\tthis._updateWeight( time );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar startTime = this._startTime;\n\n\t\tif ( startTime !== null ) {\n\n\t\t\t// check for scheduled start of action\n\n\t\t\tvar timeRunning = ( time - startTime ) * timeDirection;\n\t\t\tif ( timeRunning < 0 || timeDirection === 0 ) {\n\n\t\t\t\treturn; // yet to come / don't decide when delta = 0\n\n\t\t\t}\n\n\t\t\t// start\n\n\t\t\tthis._startTime = null; // unschedule\n\t\t\tdeltaTime = timeDirection * timeRunning;\n\n\t\t}\n\n\t\t// apply time scale and advance time\n\n\t\tdeltaTime *= this._updateTimeScale( time );\n\t\tvar clipTime = this._updateTime( deltaTime );\n\n\t\t// note: _updateTime may disable the action resulting in\n\t\t// an effective weight of 0\n\n\t\tvar weight = this._updateWeight( time );\n\n\t\tif ( weight > 0 ) {\n\n\t\t\tvar interpolants = this._interpolants;\n\t\t\tvar propertyMixers = this._propertyBindings;\n\n\t\t\tfor ( var j = 0, m = interpolants.length; j !== m; ++ j ) {\n\n\t\t\t\tinterpolants[ j ].evaluate( clipTime );\n\t\t\t\tpropertyMixers[ j ].accumulate( accuIndex, weight );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t_updateWeight: function ( time ) {\n\n\t\tvar weight = 0;\n\n\t\tif ( this.enabled ) {\n\n\t\t\tweight = this.weight;\n\t\t\tvar interpolant = this._weightInterpolant;\n\n\t\t\tif ( interpolant !== null ) {\n\n\t\t\t\tvar interpolantValue = interpolant.evaluate( time )[ 0 ];\n\n\t\t\t\tweight *= interpolantValue;\n\n\t\t\t\tif ( time > interpolant.parameterPositions[ 1 ] ) {\n\n\t\t\t\t\tthis.stopFading();\n\n\t\t\t\t\tif ( interpolantValue === 0 ) {\n\n\t\t\t\t\t\t// faded out, disable\n\t\t\t\t\t\tthis.enabled = false;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis._effectiveWeight = weight;\n\t\treturn weight;\n\n\t},\n\n\t_updateTimeScale: function ( time ) {\n\n\t\tvar timeScale = 0;\n\n\t\tif ( ! this.paused ) {\n\n\t\t\ttimeScale = this.timeScale;\n\n\t\t\tvar interpolant = this._timeScaleInterpolant;\n\n\t\t\tif ( interpolant !== null ) {\n\n\t\t\t\tvar interpolantValue = interpolant.evaluate( time )[ 0 ];\n\n\t\t\t\ttimeScale *= interpolantValue;\n\n\t\t\t\tif ( time > interpolant.parameterPositions[ 1 ] ) {\n\n\t\t\t\t\tthis.stopWarping();\n\n\t\t\t\t\tif ( timeScale === 0 ) {\n\n\t\t\t\t\t\t// motion has halted, pause\n\t\t\t\t\t\tthis.paused = true;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// warp done - apply final time scale\n\t\t\t\t\t\tthis.timeScale = timeScale;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis._effectiveTimeScale = timeScale;\n\t\treturn timeScale;\n\n\t},\n\n\t_updateTime: function ( deltaTime ) {\n\n\t\tvar time = this.time + deltaTime;\n\t\tvar duration = this._clip.duration;\n\t\tvar loop = this.loop;\n\t\tvar loopCount = this._loopCount;\n\n\t\tvar pingPong = ( loop === LoopPingPong );\n\n\t\tif ( deltaTime === 0 ) {\n\n\t\t\tif ( loopCount === - 1 ) return time;\n\n\t\t\treturn ( pingPong && ( loopCount & 1 ) === 1 ) ? duration - time : time;\n\n\t\t}\n\n\t\tif ( loop === LoopOnce ) {\n\n\t\t\tif ( loopCount === - 1 ) {\n\n\t\t\t\t// just started\n\n\t\t\t\tthis._loopCount = 0;\n\t\t\t\tthis._setEndings( true, true, false );\n\n\t\t\t}\n\n\t\t\thandle_stop: {\n\n\t\t\t\tif ( time >= duration ) {\n\n\t\t\t\t\ttime = duration;\n\n\t\t\t\t} else if ( time < 0 ) {\n\n\t\t\t\t\ttime = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis.time = time;\n\n\t\t\t\t\tbreak handle_stop;\n\n\t\t\t\t}\n\n\t\t\t\tif ( this.clampWhenFinished ) this.paused = true;\n\t\t\t\telse this.enabled = false;\n\n\t\t\t\tthis.time = time;\n\n\t\t\t\tthis._mixer.dispatchEvent( {\n\t\t\t\t\ttype: 'finished', action: this,\n\t\t\t\t\tdirection: deltaTime < 0 ? - 1 : 1\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t} else { // repetitive Repeat or PingPong\n\n\t\t\tif ( loopCount === - 1 ) {\n\n\t\t\t\t// just started\n\n\t\t\t\tif ( deltaTime >= 0 ) {\n\n\t\t\t\t\tloopCount = 0;\n\n\t\t\t\t\tthis._setEndings( true, this.repetitions === 0, pingPong );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// when looping in reverse direction, the initial\n\t\t\t\t\t// transition through zero counts as a repetition,\n\t\t\t\t\t// so leave loopCount at -1\n\n\t\t\t\t\tthis._setEndings( this.repetitions === 0, true, pingPong );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( time >= duration || time < 0 ) {\n\n\t\t\t\t// wrap around\n\n\t\t\t\tvar loopDelta = Math.floor( time / duration ); // signed\n\t\t\t\ttime -= duration * loopDelta;\n\n\t\t\t\tloopCount += Math.abs( loopDelta );\n\n\t\t\t\tvar pending = this.repetitions - loopCount;\n\n\t\t\t\tif ( pending <= 0 ) {\n\n\t\t\t\t\t// have to stop (switch state, clamp time, fire event)\n\n\t\t\t\t\tif ( this.clampWhenFinished ) this.paused = true;\n\t\t\t\t\telse this.enabled = false;\n\n\t\t\t\t\ttime = deltaTime > 0 ? duration : 0;\n\n\t\t\t\t\tthis.time = time;\n\n\t\t\t\t\tthis._mixer.dispatchEvent( {\n\t\t\t\t\t\ttype: 'finished', action: this,\n\t\t\t\t\t\tdirection: deltaTime > 0 ? 1 : - 1\n\t\t\t\t\t} );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// keep running\n\n\t\t\t\t\tif ( pending === 1 ) {\n\n\t\t\t\t\t\t// entering the last round\n\n\t\t\t\t\t\tvar atStart = deltaTime < 0;\n\t\t\t\t\t\tthis._setEndings( atStart, ! atStart, pingPong );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis._setEndings( false, false, pingPong );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis._loopCount = loopCount;\n\n\t\t\t\t\tthis.time = time;\n\n\t\t\t\t\tthis._mixer.dispatchEvent( {\n\t\t\t\t\t\ttype: 'loop', action: this, loopDelta: loopDelta\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tthis.time = time;\n\n\t\t\t}\n\n\t\t\tif ( pingPong && ( loopCount & 1 ) === 1 ) {\n\n\t\t\t\t// invert time for the \"pong round\"\n\n\t\t\t\treturn duration - time;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn time;\n\n\t},\n\n\t_setEndings: function ( atStart, atEnd, pingPong ) {\n\n\t\tvar settings = this._interpolantSettings;\n\n\t\tif ( pingPong ) {\n\n\t\t\tsettings.endingStart = ZeroSlopeEnding;\n\t\t\tsettings.endingEnd = ZeroSlopeEnding;\n\n\t\t} else {\n\n\t\t\t// assuming for LoopOnce atStart == atEnd == true\n\n\t\t\tif ( atStart ) {\n\n\t\t\t\tsettings.endingStart = this.zeroSlopeAtStart ? ZeroSlopeEnding : ZeroCurvatureEnding;\n\n\t\t\t} else {\n\n\t\t\t\tsettings.endingStart = WrapAroundEnding;\n\n\t\t\t}\n\n\t\t\tif ( atEnd ) {\n\n\t\t\t\tsettings.endingEnd = this.zeroSlopeAtEnd ? ZeroSlopeEnding : ZeroCurvatureEnding;\n\n\t\t\t} else {\n\n\t\t\t\tsettings.endingEnd \t = WrapAroundEnding;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t_scheduleFading: function ( duration, weightNow, weightThen ) {\n\n\t\tvar mixer = this._mixer, now = mixer.time,\n\t\t\tinterpolant = this._weightInterpolant;\n\n\t\tif ( interpolant === null ) {\n\n\t\t\tinterpolant = mixer._lendControlInterpolant();\n\t\t\tthis._weightInterpolant = interpolant;\n\n\t\t}\n\n\t\tvar times = interpolant.parameterPositions,\n\t\t\tvalues = interpolant.sampleValues;\n\n\t\ttimes[ 0 ] = now;\n\t\tvalues[ 0 ] = weightNow;\n\t\ttimes[ 1 ] = now + duration;\n\t\tvalues[ 1 ] = weightThen;\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { AnimationAction };\n","import { Quaternion } from '../math/Quaternion.js';\n\n/**\n *\n * Buffered scene graph property that allows weighted accumulation.\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction PropertyMixer( binding, typeName, valueSize ) {\n\n\tthis.binding = binding;\n\tthis.valueSize = valueSize;\n\n\tvar bufferType = Float64Array,\n\t\tmixFunction;\n\n\tswitch ( typeName ) {\n\n\t\tcase 'quaternion':\n\t\t\tmixFunction = this._slerp;\n\t\t\tbreak;\n\n\t\tcase 'string':\n\t\tcase 'bool':\n\t\t\tbufferType = Array;\n\t\t\tmixFunction = this._select;\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tmixFunction = this._lerp;\n\n\t}\n\n\tthis.buffer = new bufferType( valueSize * 4 );\n\t// layout: [ incoming | accu0 | accu1 | orig ]\n\t//\n\t// interpolators can use .buffer as their .result\n\t// the data then goes to 'incoming'\n\t//\n\t// 'accu0' and 'accu1' are used frame-interleaved for\n\t// the cumulative result and are compared to detect\n\t// changes\n\t//\n\t// 'orig' stores the original state of the property\n\n\tthis._mixBufferRegion = mixFunction;\n\n\tthis.cumulativeWeight = 0;\n\n\tthis.useCount = 0;\n\tthis.referenceCount = 0;\n\n}\n\nObject.assign( PropertyMixer.prototype, {\n\n\t// accumulate data in the 'incoming' region into 'accu<i>'\n\taccumulate: function ( accuIndex, weight ) {\n\n\t\t// note: happily accumulating nothing when weight = 0, the caller knows\n\t\t// the weight and shouldn't have made the call in the first place\n\n\t\tvar buffer = this.buffer,\n\t\t\tstride = this.valueSize,\n\t\t\toffset = accuIndex * stride + stride,\n\n\t\t\tcurrentWeight = this.cumulativeWeight;\n\n\t\tif ( currentWeight === 0 ) {\n\n\t\t\t// accuN := incoming * weight\n\n\t\t\tfor ( var i = 0; i !== stride; ++ i ) {\n\n\t\t\t\tbuffer[ offset + i ] = buffer[ i ];\n\n\t\t\t}\n\n\t\t\tcurrentWeight = weight;\n\n\t\t} else {\n\n\t\t\t// accuN := accuN + incoming * weight\n\n\t\t\tcurrentWeight += weight;\n\t\t\tvar mix = weight / currentWeight;\n\t\t\tthis._mixBufferRegion( buffer, offset, 0, mix, stride );\n\n\t\t}\n\n\t\tthis.cumulativeWeight = currentWeight;\n\n\t},\n\n\t// apply the state of 'accu<i>' to the binding when accus differ\n\tapply: function ( accuIndex ) {\n\n\t\tvar stride = this.valueSize,\n\t\t\tbuffer = this.buffer,\n\t\t\toffset = accuIndex * stride + stride,\n\n\t\t\tweight = this.cumulativeWeight,\n\n\t\t\tbinding = this.binding;\n\n\t\tthis.cumulativeWeight = 0;\n\n\t\tif ( weight < 1 ) {\n\n\t\t\t// accuN := accuN + original * ( 1 - cumulativeWeight )\n\n\t\t\tvar originalValueOffset = stride * 3;\n\n\t\t\tthis._mixBufferRegion(\n\t\t\t\tbuffer, offset, originalValueOffset, 1 - weight, stride );\n\n\t\t}\n\n\t\tfor ( var i = stride, e = stride + stride; i !== e; ++ i ) {\n\n\t\t\tif ( buffer[ i ] !== buffer[ i + stride ] ) {\n\n\t\t\t\t// value has changed -> update scene graph\n\n\t\t\t\tbinding.setValue( buffer, offset );\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t// remember the state of the bound property and copy it to both accus\n\tsaveOriginalState: function () {\n\n\t\tvar binding = this.binding;\n\n\t\tvar buffer = this.buffer,\n\t\t\tstride = this.valueSize,\n\n\t\t\toriginalValueOffset = stride * 3;\n\n\t\tbinding.getValue( buffer, originalValueOffset );\n\n\t\t// accu[0..1] := orig -- initially detect changes against the original\n\t\tfor ( var i = stride, e = originalValueOffset; i !== e; ++ i ) {\n\n\t\t\tbuffer[ i ] = buffer[ originalValueOffset + ( i % stride ) ];\n\n\t\t}\n\n\t\tthis.cumulativeWeight = 0;\n\n\t},\n\n\t// apply the state previously taken via 'saveOriginalState' to the binding\n\trestoreOriginalState: function () {\n\n\t\tvar originalValueOffset = this.valueSize * 3;\n\t\tthis.binding.setValue( this.buffer, originalValueOffset );\n\n\t},\n\n\n\t// mix functions\n\n\t_select: function ( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tif ( t >= 0.5 ) {\n\n\t\t\tfor ( var i = 0; i !== stride; ++ i ) {\n\n\t\t\t\tbuffer[ dstOffset + i ] = buffer[ srcOffset + i ];\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t_slerp: function ( buffer, dstOffset, srcOffset, t ) {\n\n\t\tQuaternion.slerpFlat( buffer, dstOffset, buffer, dstOffset, buffer, srcOffset, t );\n\n\t},\n\n\t_lerp: function ( buffer, dstOffset, srcOffset, t, stride ) {\n\n\t\tvar s = 1 - t;\n\n\t\tfor ( var i = 0; i !== stride; ++ i ) {\n\n\t\t\tvar j = dstOffset + i;\n\n\t\t\tbuffer[ j ] = buffer[ j ] * s + buffer[ srcOffset + i ] * t;\n\n\t\t}\n\n\t}\n\n} );\n\n\nexport { PropertyMixer };\n","import { AnimationAction } from './AnimationAction.js';\nimport { EventDispatcher } from '../core/EventDispatcher.js';\nimport { LinearInterpolant } from '../math/interpolants/LinearInterpolant.js';\nimport { PropertyBinding } from './PropertyBinding.js';\nimport { PropertyMixer } from './PropertyMixer.js';\nimport { AnimationClip } from './AnimationClip.js';\n\n/**\n *\n * Player for AnimationClips.\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction AnimationMixer( root ) {\n\n\tthis._root = root;\n\tthis._initMemoryManager();\n\tthis._accuIndex = 0;\n\n\tthis.time = 0;\n\n\tthis.timeScale = 1.0;\n\n}\n\nAnimationMixer.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: AnimationMixer,\n\n\t_bindAction: function ( action, prototypeAction ) {\n\n\t\tvar root = action._localRoot || this._root,\n\t\t\ttracks = action._clip.tracks,\n\t\t\tnTracks = tracks.length,\n\t\t\tbindings = action._propertyBindings,\n\t\t\tinterpolants = action._interpolants,\n\t\t\trootUuid = root.uuid,\n\t\t\tbindingsByRoot = this._bindingsByRootAndName,\n\t\t\tbindingsByName = bindingsByRoot[ rootUuid ];\n\n\t\tif ( bindingsByName === undefined ) {\n\n\t\t\tbindingsByName = {};\n\t\t\tbindingsByRoot[ rootUuid ] = bindingsByName;\n\n\t\t}\n\n\t\tfor ( var i = 0; i !== nTracks; ++ i ) {\n\n\t\t\tvar track = tracks[ i ],\n\t\t\t\ttrackName = track.name,\n\t\t\t\tbinding = bindingsByName[ trackName ];\n\n\t\t\tif ( binding !== undefined ) {\n\n\t\t\t\tbindings[ i ] = binding;\n\n\t\t\t} else {\n\n\t\t\t\tbinding = bindings[ i ];\n\n\t\t\t\tif ( binding !== undefined ) {\n\n\t\t\t\t\t// existing binding, make sure the cache knows\n\n\t\t\t\t\tif ( binding._cacheIndex === null ) {\n\n\t\t\t\t\t\t++ binding.referenceCount;\n\t\t\t\t\t\tthis._addInactiveBinding( binding, rootUuid, trackName );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t\tvar path = prototypeAction && prototypeAction.\n\t\t\t\t\t_propertyBindings[ i ].binding.parsedPath;\n\n\t\t\t\tbinding = new PropertyMixer(\n\t\t\t\t\tPropertyBinding.create( root, trackName, path ),\n\t\t\t\t\ttrack.ValueTypeName, track.getValueSize() );\n\n\t\t\t\t++ binding.referenceCount;\n\t\t\t\tthis._addInactiveBinding( binding, rootUuid, trackName );\n\n\t\t\t\tbindings[ i ] = binding;\n\n\t\t\t}\n\n\t\t\tinterpolants[ i ].resultBuffer = binding.buffer;\n\n\t\t}\n\n\t},\n\n\t_activateAction: function ( action ) {\n\n\t\tif ( ! this._isActiveAction( action ) ) {\n\n\t\t\tif ( action._cacheIndex === null ) {\n\n\t\t\t\t// this action has been forgotten by the cache, but the user\n\t\t\t\t// appears to be still using it -> rebind\n\n\t\t\t\tvar rootUuid = ( action._localRoot || this._root ).uuid,\n\t\t\t\t\tclipUuid = action._clip.uuid,\n\t\t\t\t\tactionsForClip = this._actionsByClip[ clipUuid ];\n\n\t\t\t\tthis._bindAction( action,\n\t\t\t\t\tactionsForClip && actionsForClip.knownActions[ 0 ] );\n\n\t\t\t\tthis._addInactiveAction( action, clipUuid, rootUuid );\n\n\t\t\t}\n\n\t\t\tvar bindings = action._propertyBindings;\n\n\t\t\t// increment reference counts / sort out state\n\t\t\tfor ( var i = 0, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\t\tvar binding = bindings[ i ];\n\n\t\t\t\tif ( binding.useCount ++ === 0 ) {\n\n\t\t\t\t\tthis._lendBinding( binding );\n\t\t\t\t\tbinding.saveOriginalState();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis._lendAction( action );\n\n\t\t}\n\n\t},\n\n\t_deactivateAction: function ( action ) {\n\n\t\tif ( this._isActiveAction( action ) ) {\n\n\t\t\tvar bindings = action._propertyBindings;\n\n\t\t\t// decrement reference counts / sort out state\n\t\t\tfor ( var i = 0, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\t\tvar binding = bindings[ i ];\n\n\t\t\t\tif ( -- binding.useCount === 0 ) {\n\n\t\t\t\t\tbinding.restoreOriginalState();\n\t\t\t\t\tthis._takeBackBinding( binding );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis._takeBackAction( action );\n\n\t\t}\n\n\t},\n\n\t// Memory manager\n\n\t_initMemoryManager: function () {\n\n\t\tthis._actions = []; // 'nActiveActions' followed by inactive ones\n\t\tthis._nActiveActions = 0;\n\n\t\tthis._actionsByClip = {};\n\t\t// inside:\n\t\t// {\n\t\t// \tknownActions: Array< AnimationAction > - used as prototypes\n\t\t// \tactionByRoot: AnimationAction - lookup\n\t\t// }\n\n\n\t\tthis._bindings = []; // 'nActiveBindings' followed by inactive ones\n\t\tthis._nActiveBindings = 0;\n\n\t\tthis._bindingsByRootAndName = {}; // inside: Map< name, PropertyMixer >\n\n\n\t\tthis._controlInterpolants = []; // same game as above\n\t\tthis._nActiveControlInterpolants = 0;\n\n\t\tvar scope = this;\n\n\t\tthis.stats = {\n\n\t\t\tactions: {\n\t\t\t\tget total() {\n\n\t\t\t\t\treturn scope._actions.length;\n\n\t\t\t\t},\n\t\t\t\tget inUse() {\n\n\t\t\t\t\treturn scope._nActiveActions;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tbindings: {\n\t\t\t\tget total() {\n\n\t\t\t\t\treturn scope._bindings.length;\n\n\t\t\t\t},\n\t\t\t\tget inUse() {\n\n\t\t\t\t\treturn scope._nActiveBindings;\n\n\t\t\t\t}\n\t\t\t},\n\t\t\tcontrolInterpolants: {\n\t\t\t\tget total() {\n\n\t\t\t\t\treturn scope._controlInterpolants.length;\n\n\t\t\t\t},\n\t\t\t\tget inUse() {\n\n\t\t\t\t\treturn scope._nActiveControlInterpolants;\n\n\t\t\t\t}\n\t\t\t}\n\n\t\t};\n\n\t},\n\n\t// Memory management for AnimationAction objects\n\n\t_isActiveAction: function ( action ) {\n\n\t\tvar index = action._cacheIndex;\n\t\treturn index !== null && index < this._nActiveActions;\n\n\t},\n\n\t_addInactiveAction: function ( action, clipUuid, rootUuid ) {\n\n\t\tvar actions = this._actions,\n\t\t\tactionsByClip = this._actionsByClip,\n\t\t\tactionsForClip = actionsByClip[ clipUuid ];\n\n\t\tif ( actionsForClip === undefined ) {\n\n\t\t\tactionsForClip = {\n\n\t\t\t\tknownActions: [ action ],\n\t\t\t\tactionByRoot: {}\n\n\t\t\t};\n\n\t\t\taction._byClipCacheIndex = 0;\n\n\t\t\tactionsByClip[ clipUuid ] = actionsForClip;\n\n\t\t} else {\n\n\t\t\tvar knownActions = actionsForClip.knownActions;\n\n\t\t\taction._byClipCacheIndex = knownActions.length;\n\t\t\tknownActions.push( action );\n\n\t\t}\n\n\t\taction._cacheIndex = actions.length;\n\t\tactions.push( action );\n\n\t\tactionsForClip.actionByRoot[ rootUuid ] = action;\n\n\t},\n\n\t_removeInactiveAction: function ( action ) {\n\n\t\tvar actions = this._actions,\n\t\t\tlastInactiveAction = actions[ actions.length - 1 ],\n\t\t\tcacheIndex = action._cacheIndex;\n\n\t\tlastInactiveAction._cacheIndex = cacheIndex;\n\t\tactions[ cacheIndex ] = lastInactiveAction;\n\t\tactions.pop();\n\n\t\taction._cacheIndex = null;\n\n\n\t\tvar clipUuid = action._clip.uuid,\n\t\t\tactionsByClip = this._actionsByClip,\n\t\t\tactionsForClip = actionsByClip[ clipUuid ],\n\t\t\tknownActionsForClip = actionsForClip.knownActions,\n\n\t\t\tlastKnownAction =\n\t\t\t\tknownActionsForClip[ knownActionsForClip.length - 1 ],\n\n\t\t\tbyClipCacheIndex = action._byClipCacheIndex;\n\n\t\tlastKnownAction._byClipCacheIndex = byClipCacheIndex;\n\t\tknownActionsForClip[ byClipCacheIndex ] = lastKnownAction;\n\t\tknownActionsForClip.pop();\n\n\t\taction._byClipCacheIndex = null;\n\n\n\t\tvar actionByRoot = actionsForClip.actionByRoot,\n\t\t\trootUuid = ( action._localRoot || this._root ).uuid;\n\n\t\tdelete actionByRoot[ rootUuid ];\n\n\t\tif ( knownActionsForClip.length === 0 ) {\n\n\t\t\tdelete actionsByClip[ clipUuid ];\n\n\t\t}\n\n\t\tthis._removeInactiveBindingsForAction( action );\n\n\t},\n\n\t_removeInactiveBindingsForAction: function ( action ) {\n\n\t\tvar bindings = action._propertyBindings;\n\t\tfor ( var i = 0, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tvar binding = bindings[ i ];\n\n\t\t\tif ( -- binding.referenceCount === 0 ) {\n\n\t\t\t\tthis._removeInactiveBinding( binding );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t_lendAction: function ( action ) {\n\n\t\t// [ active actions |  inactive actions  ]\n\t\t// [  active actions >| inactive actions ]\n\t\t//                 s        a\n\t\t//                  <-swap->\n\t\t//                 a        s\n\n\t\tvar actions = this._actions,\n\t\t\tprevIndex = action._cacheIndex,\n\n\t\t\tlastActiveIndex = this._nActiveActions ++,\n\n\t\t\tfirstInactiveAction = actions[ lastActiveIndex ];\n\n\t\taction._cacheIndex = lastActiveIndex;\n\t\tactions[ lastActiveIndex ] = action;\n\n\t\tfirstInactiveAction._cacheIndex = prevIndex;\n\t\tactions[ prevIndex ] = firstInactiveAction;\n\n\t},\n\n\t_takeBackAction: function ( action ) {\n\n\t\t// [  active actions  | inactive actions ]\n\t\t// [ active actions |< inactive actions  ]\n\t\t//        a        s\n\t\t//         <-swap->\n\t\t//        s        a\n\n\t\tvar actions = this._actions,\n\t\t\tprevIndex = action._cacheIndex,\n\n\t\t\tfirstInactiveIndex = -- this._nActiveActions,\n\n\t\t\tlastActiveAction = actions[ firstInactiveIndex ];\n\n\t\taction._cacheIndex = firstInactiveIndex;\n\t\tactions[ firstInactiveIndex ] = action;\n\n\t\tlastActiveAction._cacheIndex = prevIndex;\n\t\tactions[ prevIndex ] = lastActiveAction;\n\n\t},\n\n\t// Memory management for PropertyMixer objects\n\n\t_addInactiveBinding: function ( binding, rootUuid, trackName ) {\n\n\t\tvar bindingsByRoot = this._bindingsByRootAndName,\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ],\n\n\t\t\tbindings = this._bindings;\n\n\t\tif ( bindingByName === undefined ) {\n\n\t\t\tbindingByName = {};\n\t\t\tbindingsByRoot[ rootUuid ] = bindingByName;\n\n\t\t}\n\n\t\tbindingByName[ trackName ] = binding;\n\n\t\tbinding._cacheIndex = bindings.length;\n\t\tbindings.push( binding );\n\n\t},\n\n\t_removeInactiveBinding: function ( binding ) {\n\n\t\tvar bindings = this._bindings,\n\t\t\tpropBinding = binding.binding,\n\t\t\trootUuid = propBinding.rootNode.uuid,\n\t\t\ttrackName = propBinding.path,\n\t\t\tbindingsByRoot = this._bindingsByRootAndName,\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ],\n\n\t\t\tlastInactiveBinding = bindings[ bindings.length - 1 ],\n\t\t\tcacheIndex = binding._cacheIndex;\n\n\t\tlastInactiveBinding._cacheIndex = cacheIndex;\n\t\tbindings[ cacheIndex ] = lastInactiveBinding;\n\t\tbindings.pop();\n\n\t\tdelete bindingByName[ trackName ];\n\n\t\tif ( Object.keys( bindingByName ).length === 0 ) {\n\n\t\t\tdelete bindingsByRoot[ rootUuid ];\n\n\t\t}\n\n\t},\n\n\t_lendBinding: function ( binding ) {\n\n\t\tvar bindings = this._bindings,\n\t\t\tprevIndex = binding._cacheIndex,\n\n\t\t\tlastActiveIndex = this._nActiveBindings ++,\n\n\t\t\tfirstInactiveBinding = bindings[ lastActiveIndex ];\n\n\t\tbinding._cacheIndex = lastActiveIndex;\n\t\tbindings[ lastActiveIndex ] = binding;\n\n\t\tfirstInactiveBinding._cacheIndex = prevIndex;\n\t\tbindings[ prevIndex ] = firstInactiveBinding;\n\n\t},\n\n\t_takeBackBinding: function ( binding ) {\n\n\t\tvar bindings = this._bindings,\n\t\t\tprevIndex = binding._cacheIndex,\n\n\t\t\tfirstInactiveIndex = -- this._nActiveBindings,\n\n\t\t\tlastActiveBinding = bindings[ firstInactiveIndex ];\n\n\t\tbinding._cacheIndex = firstInactiveIndex;\n\t\tbindings[ firstInactiveIndex ] = binding;\n\n\t\tlastActiveBinding._cacheIndex = prevIndex;\n\t\tbindings[ prevIndex ] = lastActiveBinding;\n\n\t},\n\n\n\t// Memory management of Interpolants for weight and time scale\n\n\t_lendControlInterpolant: function () {\n\n\t\tvar interpolants = this._controlInterpolants,\n\t\t\tlastActiveIndex = this._nActiveControlInterpolants ++,\n\t\t\tinterpolant = interpolants[ lastActiveIndex ];\n\n\t\tif ( interpolant === undefined ) {\n\n\t\t\tinterpolant = new LinearInterpolant(\n\t\t\t\tnew Float32Array( 2 ), new Float32Array( 2 ),\n\t\t\t\t1, this._controlInterpolantsResultBuffer );\n\n\t\t\tinterpolant.__cacheIndex = lastActiveIndex;\n\t\t\tinterpolants[ lastActiveIndex ] = interpolant;\n\n\t\t}\n\n\t\treturn interpolant;\n\n\t},\n\n\t_takeBackControlInterpolant: function ( interpolant ) {\n\n\t\tvar interpolants = this._controlInterpolants,\n\t\t\tprevIndex = interpolant.__cacheIndex,\n\n\t\t\tfirstInactiveIndex = -- this._nActiveControlInterpolants,\n\n\t\t\tlastActiveInterpolant = interpolants[ firstInactiveIndex ];\n\n\t\tinterpolant.__cacheIndex = firstInactiveIndex;\n\t\tinterpolants[ firstInactiveIndex ] = interpolant;\n\n\t\tlastActiveInterpolant.__cacheIndex = prevIndex;\n\t\tinterpolants[ prevIndex ] = lastActiveInterpolant;\n\n\t},\n\n\t_controlInterpolantsResultBuffer: new Float32Array( 1 ),\n\n\t// return an action for a clip optionally using a custom root target\n\t// object (this method allocates a lot of dynamic memory in case a\n\t// previously unknown clip/root combination is specified)\n\tclipAction: function ( clip, optionalRoot ) {\n\n\t\tvar root = optionalRoot || this._root,\n\t\t\trootUuid = root.uuid,\n\n\t\t\tclipObject = typeof clip === 'string' ?\n\t\t\t\tAnimationClip.findByName( root, clip ) : clip,\n\n\t\t\tclipUuid = clipObject !== null ? clipObject.uuid : clip,\n\n\t\t\tactionsForClip = this._actionsByClip[ clipUuid ],\n\t\t\tprototypeAction = null;\n\n\t\tif ( actionsForClip !== undefined ) {\n\n\t\t\tvar existingAction =\n\t\t\t\t\tactionsForClip.actionByRoot[ rootUuid ];\n\n\t\t\tif ( existingAction !== undefined ) {\n\n\t\t\t\treturn existingAction;\n\n\t\t\t}\n\n\t\t\t// we know the clip, so we don't have to parse all\n\t\t\t// the bindings again but can just copy\n\t\t\tprototypeAction = actionsForClip.knownActions[ 0 ];\n\n\t\t\t// also, take the clip from the prototype action\n\t\t\tif ( clipObject === null )\n\t\t\t\tclipObject = prototypeAction._clip;\n\n\t\t}\n\n\t\t// clip must be known when specified via string\n\t\tif ( clipObject === null ) return null;\n\n\t\t// allocate all resources required to run it\n\t\tvar newAction = new AnimationAction( this, clipObject, optionalRoot );\n\n\t\tthis._bindAction( newAction, prototypeAction );\n\n\t\t// and make the action known to the memory manager\n\t\tthis._addInactiveAction( newAction, clipUuid, rootUuid );\n\n\t\treturn newAction;\n\n\t},\n\n\t// get an existing action\n\texistingAction: function ( clip, optionalRoot ) {\n\n\t\tvar root = optionalRoot || this._root,\n\t\t\trootUuid = root.uuid,\n\n\t\t\tclipObject = typeof clip === 'string' ?\n\t\t\t\tAnimationClip.findByName( root, clip ) : clip,\n\n\t\t\tclipUuid = clipObject ? clipObject.uuid : clip,\n\n\t\t\tactionsForClip = this._actionsByClip[ clipUuid ];\n\n\t\tif ( actionsForClip !== undefined ) {\n\n\t\t\treturn actionsForClip.actionByRoot[ rootUuid ] || null;\n\n\t\t}\n\n\t\treturn null;\n\n\t},\n\n\t// deactivates all previously scheduled actions\n\tstopAllAction: function () {\n\n\t\tvar actions = this._actions,\n\t\t\tnActions = this._nActiveActions,\n\t\t\tbindings = this._bindings,\n\t\t\tnBindings = this._nActiveBindings;\n\n\t\tthis._nActiveActions = 0;\n\t\tthis._nActiveBindings = 0;\n\n\t\tfor ( var i = 0; i !== nActions; ++ i ) {\n\n\t\t\tactions[ i ].reset();\n\n\t\t}\n\n\t\tfor ( var i = 0; i !== nBindings; ++ i ) {\n\n\t\t\tbindings[ i ].useCount = 0;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// advance the time and update apply the animation\n\tupdate: function ( deltaTime ) {\n\n\t\tdeltaTime *= this.timeScale;\n\n\t\tvar actions = this._actions,\n\t\t\tnActions = this._nActiveActions,\n\n\t\t\ttime = this.time += deltaTime,\n\t\t\ttimeDirection = Math.sign( deltaTime ),\n\n\t\t\taccuIndex = this._accuIndex ^= 1;\n\n\t\t// run active actions\n\n\t\tfor ( var i = 0; i !== nActions; ++ i ) {\n\n\t\t\tvar action = actions[ i ];\n\n\t\t\taction._update( time, deltaTime, timeDirection, accuIndex );\n\n\t\t}\n\n\t\t// update scene graph\n\n\t\tvar bindings = this._bindings,\n\t\t\tnBindings = this._nActiveBindings;\n\n\t\tfor ( var i = 0; i !== nBindings; ++ i ) {\n\n\t\t\tbindings[ i ].apply( accuIndex );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// Allows you to seek to a specific time in an animation.\n\tsetTime: function ( timeInSeconds ) {\n\n\t\tthis.time = 0; // Zero out time attribute for AnimationMixer object;\n\t\tfor ( var i = 0; i < this._actions.length; i ++ ) {\n\n\t\t\tthis._actions[ i ].time = 0; // Zero out time attribute for all associated AnimationAction objects.\n\n\t\t}\n\n\t\treturn this.update( timeInSeconds ); // Update used to set exact time. Returns \"this\" AnimationMixer object.\n\n\t},\n\n\t// return this mixer's root target object\n\tgetRoot: function () {\n\n\t\treturn this._root;\n\n\t},\n\n\t// free all resources specific to a particular clip\n\tuncacheClip: function ( clip ) {\n\n\t\tvar actions = this._actions,\n\t\t\tclipUuid = clip.uuid,\n\t\t\tactionsByClip = this._actionsByClip,\n\t\t\tactionsForClip = actionsByClip[ clipUuid ];\n\n\t\tif ( actionsForClip !== undefined ) {\n\n\t\t\t// note: just calling _removeInactiveAction would mess up the\n\t\t\t// iteration state and also require updating the state we can\n\t\t\t// just throw away\n\n\t\t\tvar actionsToRemove = actionsForClip.knownActions;\n\n\t\t\tfor ( var i = 0, n = actionsToRemove.length; i !== n; ++ i ) {\n\n\t\t\t\tvar action = actionsToRemove[ i ];\n\n\t\t\t\tthis._deactivateAction( action );\n\n\t\t\t\tvar cacheIndex = action._cacheIndex,\n\t\t\t\t\tlastInactiveAction = actions[ actions.length - 1 ];\n\n\t\t\t\taction._cacheIndex = null;\n\t\t\t\taction._byClipCacheIndex = null;\n\n\t\t\t\tlastInactiveAction._cacheIndex = cacheIndex;\n\t\t\t\tactions[ cacheIndex ] = lastInactiveAction;\n\t\t\t\tactions.pop();\n\n\t\t\t\tthis._removeInactiveBindingsForAction( action );\n\n\t\t\t}\n\n\t\t\tdelete actionsByClip[ clipUuid ];\n\n\t\t}\n\n\t},\n\n\t// free all resources specific to a particular root target object\n\tuncacheRoot: function ( root ) {\n\n\t\tvar rootUuid = root.uuid,\n\t\t\tactionsByClip = this._actionsByClip;\n\n\t\tfor ( var clipUuid in actionsByClip ) {\n\n\t\t\tvar actionByRoot = actionsByClip[ clipUuid ].actionByRoot,\n\t\t\t\taction = actionByRoot[ rootUuid ];\n\n\t\t\tif ( action !== undefined ) {\n\n\t\t\t\tthis._deactivateAction( action );\n\t\t\t\tthis._removeInactiveAction( action );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar bindingsByRoot = this._bindingsByRootAndName,\n\t\t\tbindingByName = bindingsByRoot[ rootUuid ];\n\n\t\tif ( bindingByName !== undefined ) {\n\n\t\t\tfor ( var trackName in bindingByName ) {\n\n\t\t\t\tvar binding = bindingByName[ trackName ];\n\t\t\t\tbinding.restoreOriginalState();\n\t\t\t\tthis._removeInactiveBinding( binding );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\t// remove a targeted clip from the cache\n\tuncacheAction: function ( clip, optionalRoot ) {\n\n\t\tvar action = this.existingAction( clip, optionalRoot );\n\n\t\tif ( action !== null ) {\n\n\t\t\tthis._deactivateAction( action );\n\t\t\tthis._removeInactiveAction( action );\n\n\t\t}\n\n\t}\n\n} );\n\n\nexport { AnimationMixer };\n","/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { ShapePath } from './ShapePath.js';\n\n\nfunction Font( data ) {\n\n\tthis.type = 'Font';\n\n\tthis.data = data;\n\n}\n\nObject.assign( Font.prototype, {\n\n\tisFont: true,\n\n\tgenerateShapes: function ( text, size ) {\n\n\t\tif ( size === undefined ) size = 100;\n\n\t\tvar shapes = [];\n\t\tvar paths = createPaths( text, size, this.data );\n\n\t\tfor ( var p = 0, pl = paths.length; p < pl; p ++ ) {\n\n\t\t\tArray.prototype.push.apply( shapes, paths[ p ].toShapes() );\n\n\t\t}\n\n\t\treturn shapes;\n\n\t}\n\n} );\n\nfunction createPaths( text, size, data ) {\n\n\tvar chars = Array.from ? Array.from( text ) : String( text ).split( '' ); // workaround for IE11, see #13988\n\tvar scale = size / data.resolution;\n\tvar line_height = ( data.boundingBox.yMax - data.boundingBox.yMin + data.underlineThickness ) * scale;\n\n\tvar paths = [];\n\n\tvar offsetX = 0, offsetY = 0;\n\n\tfor ( var i = 0; i < chars.length; i ++ ) {\n\n\t\tvar char = chars[ i ];\n\n\t\tif ( char === '\\n' ) {\n\n\t\t\toffsetX = 0;\n\t\t\toffsetY -= line_height;\n\n\t\t} else {\n\n\t\t\tvar ret = createPath( char, scale, offsetX, offsetY, data );\n\t\t\toffsetX += ret.offsetX;\n\t\t\tpaths.push( ret.path );\n\n\t\t}\n\n\t}\n\n\treturn paths;\n\n}\n\nfunction createPath( char, scale, offsetX, offsetY, data ) {\n\n\tvar glyph = data.glyphs[ char ] || data.glyphs[ '?' ];\n\n\tif ( ! glyph ) {\n\n\t\tconsole.error( 'THREE.Font: character \"' + char + '\" does not exists in font family ' + data.familyName + '.' );\n\n\t\treturn;\n\n\t}\n\n\tvar path = new ShapePath();\n\n\tvar x, y, cpx, cpy, cpx1, cpy1, cpx2, cpy2;\n\n\tif ( glyph.o ) {\n\n\t\tvar outline = glyph._cachedOutline || ( glyph._cachedOutline = glyph.o.split( ' ' ) );\n\n\t\tfor ( var i = 0, l = outline.length; i < l; ) {\n\n\t\t\tvar action = outline[ i ++ ];\n\n\t\t\tswitch ( action ) {\n\n\t\t\t\tcase 'm': // moveTo\n\n\t\t\t\t\tx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\ty = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\tpath.moveTo( x, y );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'l': // lineTo\n\n\t\t\t\t\tx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\ty = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\tpath.lineTo( x, y );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'q': // quadraticCurveTo\n\n\t\t\t\t\tcpx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy = outline[ i ++ ] * scale + offsetY;\n\t\t\t\t\tcpx1 = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy1 = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\tpath.quadraticCurveTo( cpx1, cpy1, cpx, cpy );\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'b': // bezierCurveTo\n\n\t\t\t\t\tcpx = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy = outline[ i ++ ] * scale + offsetY;\n\t\t\t\t\tcpx1 = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy1 = outline[ i ++ ] * scale + offsetY;\n\t\t\t\t\tcpx2 = outline[ i ++ ] * scale + offsetX;\n\t\t\t\t\tcpy2 = outline[ i ++ ] * scale + offsetY;\n\n\t\t\t\t\tpath.bezierCurveTo( cpx1, cpy1, cpx2, cpy2, cpx, cpy );\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn { offsetX: glyph.ha * scale, path: path };\n\n}\n\nexport { Font };\n","import { Font } from '../extras/core/Font.js';\nimport { FileLoader } from './FileLoader.js';\nimport { Loader } from './Loader.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction FontLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nFontLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: FontLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar loader = new FileLoader( this.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tvar json;\n\n\t\t\ttry {\n\n\t\t\t\tjson = JSON.parse( text );\n\n\t\t\t} catch ( e ) {\n\n\t\t\t\tconsole.warn( 'THREE.FontLoader: typeface.js support is being deprecated. Use typeface.json instead.' );\n\t\t\t\tjson = JSON.parse( text.substring( 65, text.length - 2 ) );\n\n\t\t\t}\n\n\t\t\tvar font = scope.parse( json );\n\n\t\t\tif ( onLoad ) onLoad( font );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tparse: function ( json ) {\n\n\t\treturn new Font( json );\n\n\t}\n\n} );\n\n\nexport { FontLoader };\n","import { Vector3 } from './Vector3.js';\n\nvar _vector = new Vector3();\nvar _segCenter = new Vector3();\nvar _segDir = new Vector3();\nvar _diff = new Vector3();\n\nvar _edge1 = new Vector3();\nvar _edge2 = new Vector3();\nvar _normal = new Vector3();\n\n/**\n * @author bhouston / http://clara.io\n */\n\nfunction Ray( origin, direction ) {\n\n\tthis.origin = ( origin !== undefined ) ? origin : new Vector3();\n\tthis.direction = ( direction !== undefined ) ? direction : new Vector3( 0, 0, - 1 );\n\n}\n\nObject.assign( Ray.prototype, {\n\n\tset: function ( origin, direction ) {\n\n\t\tthis.origin.copy( origin );\n\t\tthis.direction.copy( direction );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( ray ) {\n\n\t\tthis.origin.copy( ray.origin );\n\t\tthis.direction.copy( ray.direction );\n\n\t\treturn this;\n\n\t},\n\n\tat: function ( t, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Ray: .at() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( this.direction ).multiplyScalar( t ).add( this.origin );\n\n\t},\n\n\tlookAt: function ( v ) {\n\n\t\tthis.direction.copy( v ).sub( this.origin ).normalize();\n\n\t\treturn this;\n\n\t},\n\n\trecast: function ( t ) {\n\n\t\tthis.origin.copy( this.at( t, _vector ) );\n\n\t\treturn this;\n\n\t},\n\n\tclosestPointToPoint: function ( point, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Ray: .closestPointToPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\ttarget.subVectors( point, this.origin );\n\n\t\tvar directionDistance = target.dot( this.direction );\n\n\t\tif ( directionDistance < 0 ) {\n\n\t\t\treturn target.copy( this.origin );\n\n\t\t}\n\n\t\treturn target.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\n\n\t},\n\n\tdistanceToPoint: function ( point ) {\n\n\t\treturn Math.sqrt( this.distanceSqToPoint( point ) );\n\n\t},\n\n\tdistanceSqToPoint: function ( point ) {\n\n\t\tvar directionDistance = _vector.subVectors( point, this.origin ).dot( this.direction );\n\n\t\t// point behind the ray\n\n\t\tif ( directionDistance < 0 ) {\n\n\t\t\treturn this.origin.distanceToSquared( point );\n\n\t\t}\n\n\t\t_vector.copy( this.direction ).multiplyScalar( directionDistance ).add( this.origin );\n\n\t\treturn _vector.distanceToSquared( point );\n\n\t},\n\n\tdistanceSqToSegment: function ( v0, v1, optionalPointOnRay, optionalPointOnSegment ) {\n\n\t\t// from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteDistRaySegment.h\n\t\t// It returns the min distance between the ray and the segment\n\t\t// defined by v0 and v1\n\t\t// It can also set two optional targets :\n\t\t// - The closest point on the ray\n\t\t// - The closest point on the segment\n\n\t\t_segCenter.copy( v0 ).add( v1 ).multiplyScalar( 0.5 );\n\t\t_segDir.copy( v1 ).sub( v0 ).normalize();\n\t\t_diff.copy( this.origin ).sub( _segCenter );\n\n\t\tvar segExtent = v0.distanceTo( v1 ) * 0.5;\n\t\tvar a01 = - this.direction.dot( _segDir );\n\t\tvar b0 = _diff.dot( this.direction );\n\t\tvar b1 = - _diff.dot( _segDir );\n\t\tvar c = _diff.lengthSq();\n\t\tvar det = Math.abs( 1 - a01 * a01 );\n\t\tvar s0, s1, sqrDist, extDet;\n\n\t\tif ( det > 0 ) {\n\n\t\t\t// The ray and segment are not parallel.\n\n\t\t\ts0 = a01 * b1 - b0;\n\t\t\ts1 = a01 * b0 - b1;\n\t\t\textDet = segExtent * det;\n\n\t\t\tif ( s0 >= 0 ) {\n\n\t\t\t\tif ( s1 >= - extDet ) {\n\n\t\t\t\t\tif ( s1 <= extDet ) {\n\n\t\t\t\t\t\t// region 0\n\t\t\t\t\t\t// Minimum at interior points of ray and segment.\n\n\t\t\t\t\t\tvar invDet = 1 / det;\n\t\t\t\t\t\ts0 *= invDet;\n\t\t\t\t\t\ts1 *= invDet;\n\t\t\t\t\t\tsqrDist = s0 * ( s0 + a01 * s1 + 2 * b0 ) + s1 * ( a01 * s0 + s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// region 1\n\n\t\t\t\t\t\ts1 = segExtent;\n\t\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// region 5\n\n\t\t\t\t\ts1 = - segExtent;\n\t\t\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( s1 <= - extDet ) {\n\n\t\t\t\t\t// region 4\n\n\t\t\t\t\ts0 = Math.max( 0, - ( - a01 * segExtent + b0 ) );\n\t\t\t\t\ts1 = ( s0 > 0 ) ? - segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t} else if ( s1 <= extDet ) {\n\n\t\t\t\t\t// region 3\n\n\t\t\t\t\ts0 = 0;\n\t\t\t\t\ts1 = Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\tsqrDist = s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// region 2\n\n\t\t\t\t\ts0 = Math.max( 0, - ( a01 * segExtent + b0 ) );\n\t\t\t\t\ts1 = ( s0 > 0 ) ? segExtent : Math.min( Math.max( - segExtent, - b1 ), segExtent );\n\t\t\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// Ray and segment are parallel.\n\n\t\t\ts1 = ( a01 > 0 ) ? - segExtent : segExtent;\n\t\t\ts0 = Math.max( 0, - ( a01 * s1 + b0 ) );\n\t\t\tsqrDist = - s0 * s0 + s1 * ( s1 + 2 * b1 ) + c;\n\n\t\t}\n\n\t\tif ( optionalPointOnRay ) {\n\n\t\t\toptionalPointOnRay.copy( this.direction ).multiplyScalar( s0 ).add( this.origin );\n\n\t\t}\n\n\t\tif ( optionalPointOnSegment ) {\n\n\t\t\toptionalPointOnSegment.copy( _segDir ).multiplyScalar( s1 ).add( _segCenter );\n\n\t\t}\n\n\t\treturn sqrDist;\n\n\t},\n\n\tintersectSphere: function ( sphere, target ) {\n\n\t\t_vector.subVectors( sphere.center, this.origin );\n\t\tvar tca = _vector.dot( this.direction );\n\t\tvar d2 = _vector.dot( _vector ) - tca * tca;\n\t\tvar radius2 = sphere.radius * sphere.radius;\n\n\t\tif ( d2 > radius2 ) return null;\n\n\t\tvar thc = Math.sqrt( radius2 - d2 );\n\n\t\t// t0 = first intersect point - entrance on front of sphere\n\t\tvar t0 = tca - thc;\n\n\t\t// t1 = second intersect point - exit point on back of sphere\n\t\tvar t1 = tca + thc;\n\n\t\t// test to see if both t0 and t1 are behind the ray - if so, return null\n\t\tif ( t0 < 0 && t1 < 0 ) return null;\n\n\t\t// test to see if t0 is behind the ray:\n\t\t// if it is, the ray is inside the sphere, so return the second exit point scaled by t1,\n\t\t// in order to always return an intersect point that is in front of the ray.\n\t\tif ( t0 < 0 ) return this.at( t1, target );\n\n\t\t// else t0 is in front of the ray, so return the first collision point scaled by t0\n\t\treturn this.at( t0, target );\n\n\t},\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\treturn this.distanceSqToPoint( sphere.center ) <= ( sphere.radius * sphere.radius );\n\n\t},\n\n\tdistanceToPlane: function ( plane ) {\n\n\t\tvar denominator = plane.normal.dot( this.direction );\n\n\t\tif ( denominator === 0 ) {\n\n\t\t\t// line is coplanar, return origin\n\t\t\tif ( plane.distanceToPoint( this.origin ) === 0 ) {\n\n\t\t\t\treturn 0;\n\n\t\t\t}\n\n\t\t\t// Null is preferable to undefined since undefined means.... it is undefined\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tvar t = - ( this.origin.dot( plane.normal ) + plane.constant ) / denominator;\n\n\t\t// Return if the ray never intersects the plane\n\n\t\treturn t >= 0 ? t : null;\n\n\t},\n\n\tintersectPlane: function ( plane, target ) {\n\n\t\tvar t = this.distanceToPlane( plane );\n\n\t\tif ( t === null ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\treturn this.at( t, target );\n\n\t},\n\n\tintersectsPlane: function ( plane ) {\n\n\t\t// check if the ray lies on the plane first\n\n\t\tvar distToPoint = plane.distanceToPoint( this.origin );\n\n\t\tif ( distToPoint === 0 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\tvar denominator = plane.normal.dot( this.direction );\n\n\t\tif ( denominator * distToPoint < 0 ) {\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\t// ray origin is behind the plane (and is pointing behind it)\n\n\t\treturn false;\n\n\t},\n\n\tintersectBox: function ( box, target ) {\n\n\t\tvar tmin, tmax, tymin, tymax, tzmin, tzmax;\n\n\t\tvar invdirx = 1 / this.direction.x,\n\t\t\tinvdiry = 1 / this.direction.y,\n\t\t\tinvdirz = 1 / this.direction.z;\n\n\t\tvar origin = this.origin;\n\n\t\tif ( invdirx >= 0 ) {\n\n\t\t\ttmin = ( box.min.x - origin.x ) * invdirx;\n\t\t\ttmax = ( box.max.x - origin.x ) * invdirx;\n\n\t\t} else {\n\n\t\t\ttmin = ( box.max.x - origin.x ) * invdirx;\n\t\t\ttmax = ( box.min.x - origin.x ) * invdirx;\n\n\t\t}\n\n\t\tif ( invdiry >= 0 ) {\n\n\t\t\ttymin = ( box.min.y - origin.y ) * invdiry;\n\t\t\ttymax = ( box.max.y - origin.y ) * invdiry;\n\n\t\t} else {\n\n\t\t\ttymin = ( box.max.y - origin.y ) * invdiry;\n\t\t\ttymax = ( box.min.y - origin.y ) * invdiry;\n\n\t\t}\n\n\t\tif ( ( tmin > tymax ) || ( tymin > tmax ) ) return null;\n\n\t\t// These lines also handle the case where tmin or tmax is NaN\n\t\t// (result of 0 * Infinity). x !== x returns true if x is NaN\n\n\t\tif ( tymin > tmin || tmin !== tmin ) tmin = tymin;\n\n\t\tif ( tymax < tmax || tmax !== tmax ) tmax = tymax;\n\n\t\tif ( invdirz >= 0 ) {\n\n\t\t\ttzmin = ( box.min.z - origin.z ) * invdirz;\n\t\t\ttzmax = ( box.max.z - origin.z ) * invdirz;\n\n\t\t} else {\n\n\t\t\ttzmin = ( box.max.z - origin.z ) * invdirz;\n\t\t\ttzmax = ( box.min.z - origin.z ) * invdirz;\n\n\t\t}\n\n\t\tif ( ( tmin > tzmax ) || ( tzmin > tmax ) ) return null;\n\n\t\tif ( tzmin > tmin || tmin !== tmin ) tmin = tzmin;\n\n\t\tif ( tzmax < tmax || tmax !== tmax ) tmax = tzmax;\n\n\t\t//return point closest to the ray (positive side)\n\n\t\tif ( tmax < 0 ) return null;\n\n\t\treturn this.at( tmin >= 0 ? tmin : tmax, target );\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\treturn this.intersectBox( box, _vector ) !== null;\n\n\t},\n\n\tintersectTriangle: function ( a, b, c, backfaceCulling, target ) {\n\n\t\t// Compute the offset origin, edges, and normal.\n\n\t\t// from http://www.geometrictools.com/GTEngine/Include/Mathematics/GteIntrRay3Triangle3.h\n\n\t\t_edge1.subVectors( b, a );\n\t\t_edge2.subVectors( c, a );\n\t\t_normal.crossVectors( _edge1, _edge2 );\n\n\t\t// Solve Q + t*D = b1*E1 + b2*E2 (Q = kDiff, D = ray direction,\n\t\t// E1 = kEdge1, E2 = kEdge2, N = Cross(E1,E2)) by\n\t\t//   |Dot(D,N)|*b1 = sign(Dot(D,N))*Dot(D,Cross(Q,E2))\n\t\t//   |Dot(D,N)|*b2 = sign(Dot(D,N))*Dot(D,Cross(E1,Q))\n\t\t//   |Dot(D,N)|*t = -sign(Dot(D,N))*Dot(Q,N)\n\t\tvar DdN = this.direction.dot( _normal );\n\t\tvar sign;\n\n\t\tif ( DdN > 0 ) {\n\n\t\t\tif ( backfaceCulling ) return null;\n\t\t\tsign = 1;\n\n\t\t} else if ( DdN < 0 ) {\n\n\t\t\tsign = - 1;\n\t\t\tDdN = - DdN;\n\n\t\t} else {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t_diff.subVectors( this.origin, a );\n\t\tvar DdQxE2 = sign * this.direction.dot( _edge2.crossVectors( _diff, _edge2 ) );\n\n\t\t// b1 < 0, no intersection\n\t\tif ( DdQxE2 < 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tvar DdE1xQ = sign * this.direction.dot( _edge1.cross( _diff ) );\n\n\t\t// b2 < 0, no intersection\n\t\tif ( DdE1xQ < 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// b1+b2 > 1, no intersection\n\t\tif ( DdQxE2 + DdE1xQ > DdN ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// Line intersects triangle, check if ray does.\n\t\tvar QdN = - sign * _diff.dot( _normal );\n\n\t\t// t < 0, no intersection\n\t\tif ( QdN < 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\t// Ray intersects triangle.\n\t\treturn this.at( QdN / DdN, target );\n\n\t},\n\n\tapplyMatrix4: function ( matrix4 ) {\n\n\t\tthis.origin.applyMatrix4( matrix4 );\n\t\tthis.direction.transformDirection( matrix4 );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( ray ) {\n\n\t\treturn ray.origin.equals( this.origin ) && ray.direction.equals( this.direction );\n\n\t}\n\n} );\n\n\nexport { Ray };\n","import { LinearFilter, LinearMipmapLinearFilter, ClampToEdgeWrapping } from '../constants.js';\nimport { FileLoader } from './FileLoader.js';\nimport { DataTexture } from '../textures/DataTexture.js';\nimport { Loader } from './Loader.js';\n\n/**\n * @author Nikos M. / https://github.com/foo123/\n *\n * Abstract Base class to load generic binary textures formats (rgbe, hdr, ...)\n *\n * Sub classes have to implement the parse() method which will be used in load().\n */\n\nfunction DataTextureLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nDataTextureLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: DataTextureLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar texture = new DataTexture();\n\n\t\tvar loader = new FileLoader( this.manager );\n\t\tloader.setResponseType( 'arraybuffer' );\n\t\tloader.setPath( this.path );\n\t\tloader.load( url, function ( buffer ) {\n\n\t\t\tvar texData = scope.parse( buffer );\n\n\t\t\tif ( ! texData ) return;\n\n\t\t\tif ( texData.image !== undefined ) {\n\n\t\t\t\ttexture.image = texData.image;\n\n\t\t\t} else if ( texData.data !== undefined ) {\n\n\t\t\t\ttexture.image.width = texData.width;\n\t\t\t\ttexture.image.height = texData.height;\n\t\t\t\ttexture.image.data = texData.data;\n\n\t\t\t}\n\n\t\t\ttexture.wrapS = texData.wrapS !== undefined ? texData.wrapS : ClampToEdgeWrapping;\n\t\t\ttexture.wrapT = texData.wrapT !== undefined ? texData.wrapT : ClampToEdgeWrapping;\n\n\t\t\ttexture.magFilter = texData.magFilter !== undefined ? texData.magFilter : LinearFilter;\n\t\t\ttexture.minFilter = texData.minFilter !== undefined ? texData.minFilter : LinearFilter;\n\n\t\t\ttexture.anisotropy = texData.anisotropy !== undefined ? texData.anisotropy : 1;\n\n\t\t\tif ( texData.format !== undefined ) {\n\n\t\t\t\ttexture.format = texData.format;\n\n\t\t\t}\n\t\t\tif ( texData.type !== undefined ) {\n\n\t\t\t\ttexture.type = texData.type;\n\n\t\t\t}\n\n\t\t\tif ( texData.mipmaps !== undefined ) {\n\n\t\t\t\ttexture.mipmaps = texData.mipmaps;\n\t\t\t\ttexture.minFilter = LinearMipmapLinearFilter; // presumably...\n\n\t\t\t}\n\n\t\t\tif ( texData.mipmapCount === 1 ) {\n\n\t\t\t\ttexture.minFilter = LinearFilter;\n\n\t\t\t}\n\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tif ( onLoad ) onLoad( texture, texData );\n\n\t\t}, onProgress, onError );\n\n\n\t\treturn texture;\n\n\t}\n\n} );\n\n\nexport { DataTextureLoader };\n","/**\n * @author Don McCurdy / https://www.donmccurdy.com\n */\n\nvar LoaderUtils = {\n\n\tdecodeText: function ( array ) {\n\n\t\tif ( typeof TextDecoder !== 'undefined' ) {\n\n\t\t\treturn new TextDecoder().decode( array );\n\n\t\t}\n\n\t\t// Avoid the String.fromCharCode.apply(null, array) shortcut, which\n\t\t// throws a \"maximum call stack size exceeded\" error for large arrays.\n\n\t\tvar s = '';\n\n\t\tfor ( var i = 0, il = array.length; i < il; i ++ ) {\n\n\t\t\t// Implicitly assumes little-endian.\n\t\t\ts += String.fromCharCode( array[ i ] );\n\n\t\t}\n\n\t\ttry {\n\n\t\t\t// merges multi-byte utf-8 characters.\n\n\t\t\treturn decodeURIComponent( escape( s ) );\n\n\t\t} catch ( e ) { // see #16358\n\n\t\t\treturn s;\n\n\t\t}\n\n\t},\n\n\textractUrlBase: function ( url ) {\n\n\t\tvar index = url.lastIndexOf( '/' );\n\n\t\tif ( index === - 1 ) return './';\n\n\t\treturn url.substr( 0, index + 1 );\n\n\t}\n\n};\n\nexport { LoaderUtils };\n","import { EventDispatcher } from './EventDispatcher.js';\nimport { Face3 } from './Face3.js';\nimport { Matrix3 } from '../math/Matrix3.js';\nimport { Sphere } from '../math/Sphere.js';\nimport { Box3 } from '../math/Box3.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Color } from '../math/Color.js';\nimport { Object3D } from './Object3D.js';\nimport { MathUtils } from '../math/MathUtils.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author kile / http://kile.stravaganza.org/\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author bhouston / http://clara.io\n */\n\nvar _geometryId = 0; // Geometry uses even numbers as Id\nvar _m1 = new Matrix4();\nvar _obj = new Object3D();\nvar _offset = new Vector3();\n\nfunction Geometry() {\n\n\tObject.defineProperty( this, 'id', { value: _geometryId += 2 } );\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Geometry';\n\n\tthis.vertices = [];\n\tthis.colors = [];\n\tthis.faces = [];\n\tthis.faceVertexUvs = [[]];\n\n\tthis.morphTargets = [];\n\tthis.morphNormals = [];\n\n\tthis.skinWeights = [];\n\tthis.skinIndices = [];\n\n\tthis.lineDistances = [];\n\n\tthis.boundingBox = null;\n\tthis.boundingSphere = null;\n\n\t// update flags\n\n\tthis.elementsNeedUpdate = false;\n\tthis.verticesNeedUpdate = false;\n\tthis.uvsNeedUpdate = false;\n\tthis.normalsNeedUpdate = false;\n\tthis.colorsNeedUpdate = false;\n\tthis.lineDistancesNeedUpdate = false;\n\tthis.groupsNeedUpdate = false;\n\n}\n\nGeometry.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Geometry,\n\n\tisGeometry: true,\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\tvar normalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\tfor ( var i = 0, il = this.vertices.length; i < il; i ++ ) {\n\n\t\t\tvar vertex = this.vertices[ i ];\n\t\t\tvertex.applyMatrix4( matrix );\n\n\t\t}\n\n\t\tfor ( var i = 0, il = this.faces.length; i < il; i ++ ) {\n\n\t\t\tvar face = this.faces[ i ];\n\t\t\tface.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\tfor ( var j = 0, jl = face.vertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\tface.vertexNormals[ j ].applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.boundingBox !== null ) {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t}\n\n\t\tif ( this.boundingSphere !== null ) {\n\n\t\t\tthis.computeBoundingSphere();\n\n\t\t}\n\n\t\tthis.verticesNeedUpdate = true;\n\t\tthis.normalsNeedUpdate = true;\n\n\t\treturn this;\n\n\t},\n\n\trotateX: function ( angle ) {\n\n\t\t// rotate geometry around world x-axis\n\n\t\t_m1.makeRotationX( angle );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t},\n\n\trotateY: function ( angle ) {\n\n\t\t// rotate geometry around world y-axis\n\n\t\t_m1.makeRotationY( angle );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t},\n\n\trotateZ: function ( angle ) {\n\n\t\t// rotate geometry around world z-axis\n\n\t\t_m1.makeRotationZ( angle );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( x, y, z ) {\n\n\t\t// translate geometry\n\n\t\t_m1.makeTranslation( x, y, z );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t},\n\n\tscale: function ( x, y, z ) {\n\n\t\t// scale geometry\n\n\t\t_m1.makeScale( x, y, z );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t},\n\n\tlookAt: function ( vector ) {\n\n\t\t_obj.lookAt( vector );\n\n\t\t_obj.updateMatrix();\n\n\t\tthis.applyMatrix4( _obj.matrix );\n\n\t\treturn this;\n\n\t},\n\n\tfromBufferGeometry: function ( geometry ) {\n\n\t\tvar scope = this;\n\n\t\tvar indices = geometry.index !== null ? geometry.index.array : undefined;\n\t\tvar attributes = geometry.attributes;\n\n\t\tif ( attributes.position === undefined ) {\n\n\t\t\tconsole.error( 'THREE.Geometry.fromBufferGeometry(): Position attribute required for conversion.' );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar positions = attributes.position.array;\n\t\tvar normals = attributes.normal !== undefined ? attributes.normal.array : undefined;\n\t\tvar colors = attributes.color !== undefined ? attributes.color.array : undefined;\n\t\tvar uvs = attributes.uv !== undefined ? attributes.uv.array : undefined;\n\t\tvar uvs2 = attributes.uv2 !== undefined ? attributes.uv2.array : undefined;\n\n\t\tif ( uvs2 !== undefined ) this.faceVertexUvs[ 1 ] = [];\n\n\t\tfor ( var i = 0; i < positions.length; i += 3 ) {\n\n\t\t\tscope.vertices.push( new Vector3().fromArray( positions, i ) );\n\n\t\t\tif ( colors !== undefined ) {\n\n\t\t\t\tscope.colors.push( new Color().fromArray( colors, i ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction addFace( a, b, c, materialIndex ) {\n\n\t\t\tvar vertexColors = ( colors === undefined ) ? [] : [\n\t\t\t\tscope.colors[ a ].clone(),\n\t\t\t\tscope.colors[ b ].clone(),\n\t\t\t\tscope.colors[ c ].clone() ];\n\n\t\t\tvar vertexNormals = ( normals === undefined ) ? [] : [\n\t\t\t\tnew Vector3().fromArray( normals, a * 3 ),\n\t\t\t\tnew Vector3().fromArray( normals, b * 3 ),\n\t\t\t\tnew Vector3().fromArray( normals, c * 3 )\n\t\t\t];\n\n\t\t\tvar face = new Face3( a, b, c, vertexNormals, vertexColors, materialIndex );\n\n\t\t\tscope.faces.push( face );\n\n\t\t\tif ( uvs !== undefined ) {\n\n\t\t\t\tscope.faceVertexUvs[ 0 ].push( [\n\t\t\t\t\tnew Vector2().fromArray( uvs, a * 2 ),\n\t\t\t\t\tnew Vector2().fromArray( uvs, b * 2 ),\n\t\t\t\t\tnew Vector2().fromArray( uvs, c * 2 )\n\t\t\t\t] );\n\n\t\t\t}\n\n\t\t\tif ( uvs2 !== undefined ) {\n\n\t\t\t\tscope.faceVertexUvs[ 1 ].push( [\n\t\t\t\t\tnew Vector2().fromArray( uvs2, a * 2 ),\n\t\t\t\t\tnew Vector2().fromArray( uvs2, b * 2 ),\n\t\t\t\t\tnew Vector2().fromArray( uvs2, c * 2 )\n\t\t\t\t] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar groups = geometry.groups;\n\n\t\tif ( groups.length > 0 ) {\n\n\t\t\tfor ( var i = 0; i < groups.length; i ++ ) {\n\n\t\t\t\tvar group = groups[ i ];\n\n\t\t\t\tvar start = group.start;\n\t\t\t\tvar count = group.count;\n\n\t\t\t\tfor ( var j = start, jl = start + count; j < jl; j += 3 ) {\n\n\t\t\t\t\tif ( indices !== undefined ) {\n\n\t\t\t\t\t\taddFace( indices[ j ], indices[ j + 1 ], indices[ j + 2 ], group.materialIndex );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\taddFace( j, j + 1, j + 2, group.materialIndex );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tif ( indices !== undefined ) {\n\n\t\t\t\tfor ( var i = 0; i < indices.length; i += 3 ) {\n\n\t\t\t\t\taddFace( indices[ i ], indices[ i + 1 ], indices[ i + 2 ] );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tfor ( var i = 0; i < positions.length / 3; i += 3 ) {\n\n\t\t\t\t\taddFace( i, i + 1, i + 2 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.computeFaceNormals();\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t}\n\n\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcenter: function () {\n\n\t\tthis.computeBoundingBox();\n\n\t\tthis.boundingBox.getCenter( _offset ).negate();\n\n\t\tthis.translate( _offset.x, _offset.y, _offset.z );\n\n\t\treturn this;\n\n\t},\n\n\tnormalize: function () {\n\n\t\tthis.computeBoundingSphere();\n\n\t\tvar center = this.boundingSphere.center;\n\t\tvar radius = this.boundingSphere.radius;\n\n\t\tvar s = radius === 0 ? 1 : 1.0 / radius;\n\n\t\tvar matrix = new Matrix4();\n\t\tmatrix.set(\n\t\t\ts, 0, 0, - s * center.x,\n\t\t\t0, s, 0, - s * center.y,\n\t\t\t0, 0, s, - s * center.z,\n\t\t\t0, 0, 0, 1\n\t\t);\n\n\t\tthis.applyMatrix4( matrix );\n\n\t\treturn this;\n\n\t},\n\n\tcomputeFaceNormals: function () {\n\n\t\tvar cb = new Vector3(), ab = new Vector3();\n\n\t\tfor ( var f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tvar face = this.faces[ f ];\n\n\t\t\tvar vA = this.vertices[ face.a ];\n\t\t\tvar vB = this.vertices[ face.b ];\n\t\t\tvar vC = this.vertices[ face.c ];\n\n\t\t\tcb.subVectors( vC, vB );\n\t\t\tab.subVectors( vA, vB );\n\t\t\tcb.cross( ab );\n\n\t\t\tcb.normalize();\n\n\t\t\tface.normal.copy( cb );\n\n\t\t}\n\n\t},\n\n\tcomputeVertexNormals: function ( areaWeighted ) {\n\n\t\tif ( areaWeighted === undefined ) areaWeighted = true;\n\n\t\tvar v, vl, f, fl, face, vertices;\n\n\t\tvertices = new Array( this.vertices.length );\n\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\n\n\t\t\tvertices[ v ] = new Vector3();\n\n\t\t}\n\n\t\tif ( areaWeighted ) {\n\n\t\t\t// vertex normals weighted by triangle areas\n\t\t\t// http://www.iquilezles.org/www/articles/normals/normals.htm\n\n\t\t\tvar vA, vB, vC;\n\t\t\tvar cb = new Vector3(), ab = new Vector3();\n\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tface = this.faces[ f ];\n\n\t\t\t\tvA = this.vertices[ face.a ];\n\t\t\t\tvB = this.vertices[ face.b ];\n\t\t\t\tvC = this.vertices[ face.c ];\n\n\t\t\t\tcb.subVectors( vC, vB );\n\t\t\t\tab.subVectors( vA, vB );\n\t\t\t\tcb.cross( ab );\n\n\t\t\t\tvertices[ face.a ].add( cb );\n\t\t\t\tvertices[ face.b ].add( cb );\n\t\t\t\tvertices[ face.c ].add( cb );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis.computeFaceNormals();\n\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tface = this.faces[ f ];\n\n\t\t\t\tvertices[ face.a ].add( face.normal );\n\t\t\t\tvertices[ face.b ].add( face.normal );\n\t\t\t\tvertices[ face.c ].add( face.normal );\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( v = 0, vl = this.vertices.length; v < vl; v ++ ) {\n\n\t\t\tvertices[ v ].normalize();\n\n\t\t}\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tvar vertexNormals = face.vertexNormals;\n\n\t\t\tif ( vertexNormals.length === 3 ) {\n\n\t\t\t\tvertexNormals[ 0 ].copy( vertices[ face.a ] );\n\t\t\t\tvertexNormals[ 1 ].copy( vertices[ face.b ] );\n\t\t\t\tvertexNormals[ 2 ].copy( vertices[ face.c ] );\n\n\t\t\t} else {\n\n\t\t\t\tvertexNormals[ 0 ] = vertices[ face.a ].clone();\n\t\t\t\tvertexNormals[ 1 ] = vertices[ face.b ].clone();\n\t\t\t\tvertexNormals[ 2 ] = vertices[ face.c ].clone();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.faces.length > 0 ) {\n\n\t\t\tthis.normalsNeedUpdate = true;\n\n\t\t}\n\n\t},\n\n\tcomputeFlatVertexNormals: function () {\n\n\t\tvar f, fl, face;\n\n\t\tthis.computeFaceNormals();\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tvar vertexNormals = face.vertexNormals;\n\n\t\t\tif ( vertexNormals.length === 3 ) {\n\n\t\t\t\tvertexNormals[ 0 ].copy( face.normal );\n\t\t\t\tvertexNormals[ 1 ].copy( face.normal );\n\t\t\t\tvertexNormals[ 2 ].copy( face.normal );\n\n\t\t\t} else {\n\n\t\t\t\tvertexNormals[ 0 ] = face.normal.clone();\n\t\t\t\tvertexNormals[ 1 ] = face.normal.clone();\n\t\t\t\tvertexNormals[ 2 ] = face.normal.clone();\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.faces.length > 0 ) {\n\n\t\t\tthis.normalsNeedUpdate = true;\n\n\t\t}\n\n\t},\n\n\tcomputeMorphNormals: function () {\n\n\t\tvar i, il, f, fl, face;\n\n\t\t// save original normals\n\t\t// - create temp variables on first access\n\t\t//   otherwise just copy (for faster repeated calls)\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tif ( ! face.__originalFaceNormal ) {\n\n\t\t\t\tface.__originalFaceNormal = face.normal.clone();\n\n\t\t\t} else {\n\n\t\t\t\tface.__originalFaceNormal.copy( face.normal );\n\n\t\t\t}\n\n\t\t\tif ( ! face.__originalVertexNormals ) face.__originalVertexNormals = [];\n\n\t\t\tfor ( i = 0, il = face.vertexNormals.length; i < il; i ++ ) {\n\n\t\t\t\tif ( ! face.__originalVertexNormals[ i ] ) {\n\n\t\t\t\t\tface.__originalVertexNormals[ i ] = face.vertexNormals[ i ].clone();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tface.__originalVertexNormals[ i ].copy( face.vertexNormals[ i ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// use temp geometry to compute face and vertex normals for each morph\n\n\t\tvar tmpGeo = new Geometry();\n\t\ttmpGeo.faces = this.faces;\n\n\t\tfor ( i = 0, il = this.morphTargets.length; i < il; i ++ ) {\n\n\t\t\t// create on first access\n\n\t\t\tif ( ! this.morphNormals[ i ] ) {\n\n\t\t\t\tthis.morphNormals[ i ] = {};\n\t\t\t\tthis.morphNormals[ i ].faceNormals = [];\n\t\t\t\tthis.morphNormals[ i ].vertexNormals = [];\n\n\t\t\t\tvar dstNormalsFace = this.morphNormals[ i ].faceNormals;\n\t\t\t\tvar dstNormalsVertex = this.morphNormals[ i ].vertexNormals;\n\n\t\t\t\tvar faceNormal, vertexNormals;\n\n\t\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\t\tfaceNormal = new Vector3();\n\t\t\t\t\tvertexNormals = { a: new Vector3(), b: new Vector3(), c: new Vector3() };\n\n\t\t\t\t\tdstNormalsFace.push( faceNormal );\n\t\t\t\t\tdstNormalsVertex.push( vertexNormals );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar morphNormals = this.morphNormals[ i ];\n\n\t\t\t// set vertices to morph target\n\n\t\t\ttmpGeo.vertices = this.morphTargets[ i ].vertices;\n\n\t\t\t// compute morph normals\n\n\t\t\ttmpGeo.computeFaceNormals();\n\t\t\ttmpGeo.computeVertexNormals();\n\n\t\t\t// store morph normals\n\n\t\t\tvar faceNormal, vertexNormals;\n\n\t\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\t\tface = this.faces[ f ];\n\n\t\t\t\tfaceNormal = morphNormals.faceNormals[ f ];\n\t\t\t\tvertexNormals = morphNormals.vertexNormals[ f ];\n\n\t\t\t\tfaceNormal.copy( face.normal );\n\n\t\t\t\tvertexNormals.a.copy( face.vertexNormals[ 0 ] );\n\t\t\t\tvertexNormals.b.copy( face.vertexNormals[ 1 ] );\n\t\t\t\tvertexNormals.c.copy( face.vertexNormals[ 2 ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// restore original normals\n\n\t\tfor ( f = 0, fl = this.faces.length; f < fl; f ++ ) {\n\n\t\t\tface = this.faces[ f ];\n\n\t\t\tface.normal = face.__originalFaceNormal;\n\t\t\tface.vertexNormals = face.__originalVertexNormals;\n\n\t\t}\n\n\t},\n\n\tcomputeBoundingBox: function () {\n\n\t\tif ( this.boundingBox === null ) {\n\n\t\t\tthis.boundingBox = new Box3();\n\n\t\t}\n\n\t\tthis.boundingBox.setFromPoints( this.vertices );\n\n\t},\n\n\tcomputeBoundingSphere: function () {\n\n\t\tif ( this.boundingSphere === null ) {\n\n\t\t\tthis.boundingSphere = new Sphere();\n\n\t\t}\n\n\t\tthis.boundingSphere.setFromPoints( this.vertices );\n\n\t},\n\n\tmerge: function ( geometry, matrix, materialIndexOffset ) {\n\n\t\tif ( ! ( geometry && geometry.isGeometry ) ) {\n\n\t\t\tconsole.error( 'THREE.Geometry.merge(): geometry not an instance of THREE.Geometry.', geometry );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar normalMatrix,\n\t\t\tvertexOffset = this.vertices.length,\n\t\t\tvertices1 = this.vertices,\n\t\t\tvertices2 = geometry.vertices,\n\t\t\tfaces1 = this.faces,\n\t\t\tfaces2 = geometry.faces,\n\t\t\tcolors1 = this.colors,\n\t\t\tcolors2 = geometry.colors;\n\n\t\tif ( materialIndexOffset === undefined ) materialIndexOffset = 0;\n\n\t\tif ( matrix !== undefined ) {\n\n\t\t\tnormalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\t}\n\n\t\t// vertices\n\n\t\tfor ( var i = 0, il = vertices2.length; i < il; i ++ ) {\n\n\t\t\tvar vertex = vertices2[ i ];\n\n\t\t\tvar vertexCopy = vertex.clone();\n\n\t\t\tif ( matrix !== undefined ) vertexCopy.applyMatrix4( matrix );\n\n\t\t\tvertices1.push( vertexCopy );\n\n\t\t}\n\n\t\t// colors\n\n\t\tfor ( var i = 0, il = colors2.length; i < il; i ++ ) {\n\n\t\t\tcolors1.push( colors2[ i ].clone() );\n\n\t\t}\n\n\t\t// faces\n\n\t\tfor ( i = 0, il = faces2.length; i < il; i ++ ) {\n\n\t\t\tvar face = faces2[ i ], faceCopy, normal, color,\n\t\t\t\tfaceVertexNormals = face.vertexNormals,\n\t\t\t\tfaceVertexColors = face.vertexColors;\n\n\t\t\tfaceCopy = new Face3( face.a + vertexOffset, face.b + vertexOffset, face.c + vertexOffset );\n\t\t\tfaceCopy.normal.copy( face.normal );\n\n\t\t\tif ( normalMatrix !== undefined ) {\n\n\t\t\t\tfaceCopy.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t}\n\n\t\t\tfor ( var j = 0, jl = faceVertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\tnormal = faceVertexNormals[ j ].clone();\n\n\t\t\t\tif ( normalMatrix !== undefined ) {\n\n\t\t\t\t\tnormal.applyMatrix3( normalMatrix ).normalize();\n\n\t\t\t\t}\n\n\t\t\t\tfaceCopy.vertexNormals.push( normal );\n\n\t\t\t}\n\n\t\t\tfaceCopy.color.copy( face.color );\n\n\t\t\tfor ( var j = 0, jl = faceVertexColors.length; j < jl; j ++ ) {\n\n\t\t\t\tcolor = faceVertexColors[ j ];\n\t\t\t\tfaceCopy.vertexColors.push( color.clone() );\n\n\t\t\t}\n\n\t\t\tfaceCopy.materialIndex = face.materialIndex + materialIndexOffset;\n\n\t\t\tfaces1.push( faceCopy );\n\n\t\t}\n\n\t\t// uvs\n\n\t\tfor ( var i = 0, il = geometry.faceVertexUvs.length; i < il; i ++ ) {\n\n\t\t\tvar faceVertexUvs2 = geometry.faceVertexUvs[ i ];\n\n\t\t\tif ( this.faceVertexUvs[ i ] === undefined ) this.faceVertexUvs[ i ] = [];\n\n\t\t\tfor ( var j = 0, jl = faceVertexUvs2.length; j < jl; j ++ ) {\n\n\t\t\t\tvar uvs2 = faceVertexUvs2[ j ], uvsCopy = [];\n\n\t\t\t\tfor ( var k = 0, kl = uvs2.length; k < kl; k ++ ) {\n\n\t\t\t\t\tuvsCopy.push( uvs2[ k ].clone() );\n\n\t\t\t\t}\n\n\t\t\t\tthis.faceVertexUvs[ i ].push( uvsCopy );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tmergeMesh: function ( mesh ) {\n\n\t\tif ( ! ( mesh && mesh.isMesh ) ) {\n\n\t\t\tconsole.error( 'THREE.Geometry.mergeMesh(): mesh not an instance of THREE.Mesh.', mesh );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( mesh.matrixAutoUpdate ) mesh.updateMatrix();\n\n\t\tthis.merge( mesh.geometry, mesh.matrix );\n\n\t},\n\n\t/*\n\t * Checks for duplicate vertices with hashmap.\n\t * Duplicated vertices are removed\n\t * and faces' vertices are updated.\n\t */\n\n\tmergeVertices: function () {\n\n\t\tvar verticesMap = {}; // Hashmap for looking up vertices by position coordinates (and making sure they are unique)\n\t\tvar unique = [], changes = [];\n\n\t\tvar v, key;\n\t\tvar precisionPoints = 4; // number of decimal points, e.g. 4 for epsilon of 0.0001\n\t\tvar precision = Math.pow( 10, precisionPoints );\n\t\tvar i, il, face;\n\t\tvar indices, j, jl;\n\n\t\tfor ( i = 0, il = this.vertices.length; i < il; i ++ ) {\n\n\t\t\tv = this.vertices[ i ];\n\t\t\tkey = Math.round( v.x * precision ) + '_' + Math.round( v.y * precision ) + '_' + Math.round( v.z * precision );\n\n\t\t\tif ( verticesMap[ key ] === undefined ) {\n\n\t\t\t\tverticesMap[ key ] = i;\n\t\t\t\tunique.push( this.vertices[ i ] );\n\t\t\t\tchanges[ i ] = unique.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\t//console.log('Duplicate vertex found. ', i, ' could be using ', verticesMap[key]);\n\t\t\t\tchanges[ i ] = changes[ verticesMap[ key ] ];\n\n\t\t\t}\n\n\t\t}\n\n\n\t\t// if faces are completely degenerate after merging vertices, we\n\t\t// have to remove them from the geometry.\n\t\tvar faceIndicesToRemove = [];\n\n\t\tfor ( i = 0, il = this.faces.length; i < il; i ++ ) {\n\n\t\t\tface = this.faces[ i ];\n\n\t\t\tface.a = changes[ face.a ];\n\t\t\tface.b = changes[ face.b ];\n\t\t\tface.c = changes[ face.c ];\n\n\t\t\tindices = [ face.a, face.b, face.c ];\n\n\t\t\t// if any duplicate vertices are found in a Face3\n\t\t\t// we have to remove the face as nothing can be saved\n\t\t\tfor ( var n = 0; n < 3; n ++ ) {\n\n\t\t\t\tif ( indices[ n ] === indices[ ( n + 1 ) % 3 ] ) {\n\n\t\t\t\t\tfaceIndicesToRemove.push( i );\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfor ( i = faceIndicesToRemove.length - 1; i >= 0; i -- ) {\n\n\t\t\tvar idx = faceIndicesToRemove[ i ];\n\n\t\t\tthis.faces.splice( idx, 1 );\n\n\t\t\tfor ( j = 0, jl = this.faceVertexUvs.length; j < jl; j ++ ) {\n\n\t\t\t\tthis.faceVertexUvs[ j ].splice( idx, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Use unique set of vertices\n\n\t\tvar diff = this.vertices.length - unique.length;\n\t\tthis.vertices = unique;\n\t\treturn diff;\n\n\t},\n\n\tsetFromPoints: function ( points ) {\n\n\t\tthis.vertices = [];\n\n\t\tfor ( var i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\tvar point = points[ i ];\n\t\t\tthis.vertices.push( new Vector3( point.x, point.y, point.z || 0 ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsortFacesByMaterialIndex: function () {\n\n\t\tvar faces = this.faces;\n\t\tvar length = faces.length;\n\n\t\t// tag faces\n\n\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\tfaces[ i ]._id = i;\n\n\t\t}\n\n\t\t// sort faces\n\n\t\tfunction materialIndexSort( a, b ) {\n\n\t\t\treturn a.materialIndex - b.materialIndex;\n\n\t\t}\n\n\t\tfaces.sort( materialIndexSort );\n\n\t\t// sort uvs\n\n\t\tvar uvs1 = this.faceVertexUvs[ 0 ];\n\t\tvar uvs2 = this.faceVertexUvs[ 1 ];\n\n\t\tvar newUvs1, newUvs2;\n\n\t\tif ( uvs1 && uvs1.length === length ) newUvs1 = [];\n\t\tif ( uvs2 && uvs2.length === length ) newUvs2 = [];\n\n\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\tvar id = faces[ i ]._id;\n\n\t\t\tif ( newUvs1 ) newUvs1.push( uvs1[ id ] );\n\t\t\tif ( newUvs2 ) newUvs2.push( uvs2[ id ] );\n\n\t\t}\n\n\t\tif ( newUvs1 ) this.faceVertexUvs[ 0 ] = newUvs1;\n\t\tif ( newUvs2 ) this.faceVertexUvs[ 1 ] = newUvs2;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Geometry',\n\t\t\t\tgenerator: 'Geometry.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard Geometry serialization\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\t\tif ( this.name !== '' ) data.name = this.name;\n\n\t\tif ( this.parameters !== undefined ) {\n\n\t\t\tvar parameters = this.parameters;\n\n\t\t\tfor ( var key in parameters ) {\n\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tvar vertices = [];\n\n\t\tfor ( var i = 0; i < this.vertices.length; i ++ ) {\n\n\t\t\tvar vertex = this.vertices[ i ];\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t}\n\n\t\tvar faces = [];\n\t\tvar normals = [];\n\t\tvar normalsHash = {};\n\t\tvar colors = [];\n\t\tvar colorsHash = {};\n\t\tvar uvs = [];\n\t\tvar uvsHash = {};\n\n\t\tfor ( var i = 0; i < this.faces.length; i ++ ) {\n\n\t\t\tvar face = this.faces[ i ];\n\n\t\t\tvar hasMaterial = true;\n\t\t\tvar hasFaceUv = false; // deprecated\n\t\t\tvar hasFaceVertexUv = this.faceVertexUvs[ 0 ][ i ] !== undefined;\n\t\t\tvar hasFaceNormal = face.normal.length() > 0;\n\t\t\tvar hasFaceVertexNormal = face.vertexNormals.length > 0;\n\t\t\tvar hasFaceColor = face.color.r !== 1 || face.color.g !== 1 || face.color.b !== 1;\n\t\t\tvar hasFaceVertexColor = face.vertexColors.length > 0;\n\n\t\t\tvar faceType = 0;\n\n\t\t\tfaceType = setBit( faceType, 0, 0 ); // isQuad\n\t\t\tfaceType = setBit( faceType, 1, hasMaterial );\n\t\t\tfaceType = setBit( faceType, 2, hasFaceUv );\n\t\t\tfaceType = setBit( faceType, 3, hasFaceVertexUv );\n\t\t\tfaceType = setBit( faceType, 4, hasFaceNormal );\n\t\t\tfaceType = setBit( faceType, 5, hasFaceVertexNormal );\n\t\t\tfaceType = setBit( faceType, 6, hasFaceColor );\n\t\t\tfaceType = setBit( faceType, 7, hasFaceVertexColor );\n\n\t\t\tfaces.push( faceType );\n\t\t\tfaces.push( face.a, face.b, face.c );\n\t\t\tfaces.push( face.materialIndex );\n\n\t\t\tif ( hasFaceVertexUv ) {\n\n\t\t\t\tvar faceVertexUvs = this.faceVertexUvs[ 0 ][ i ];\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 0 ] ),\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 1 ] ),\n\t\t\t\t\tgetUvIndex( faceVertexUvs[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif ( hasFaceNormal ) {\n\n\t\t\t\tfaces.push( getNormalIndex( face.normal ) );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexNormal ) {\n\n\t\t\t\tvar vertexNormals = face.vertexNormals;\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 0 ] ),\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 1 ] ),\n\t\t\t\t\tgetNormalIndex( vertexNormals[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t\tif ( hasFaceColor ) {\n\n\t\t\t\tfaces.push( getColorIndex( face.color ) );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexColor ) {\n\n\t\t\t\tvar vertexColors = face.vertexColors;\n\n\t\t\t\tfaces.push(\n\t\t\t\t\tgetColorIndex( vertexColors[ 0 ] ),\n\t\t\t\t\tgetColorIndex( vertexColors[ 1 ] ),\n\t\t\t\t\tgetColorIndex( vertexColors[ 2 ] )\n\t\t\t\t);\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction setBit( value, position, enabled ) {\n\n\t\t\treturn enabled ? value | ( 1 << position ) : value & ( ~ ( 1 << position ) );\n\n\t\t}\n\n\t\tfunction getNormalIndex( normal ) {\n\n\t\t\tvar hash = normal.x.toString() + normal.y.toString() + normal.z.toString();\n\n\t\t\tif ( normalsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn normalsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tnormalsHash[ hash ] = normals.length / 3;\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\treturn normalsHash[ hash ];\n\n\t\t}\n\n\t\tfunction getColorIndex( color ) {\n\n\t\t\tvar hash = color.r.toString() + color.g.toString() + color.b.toString();\n\n\t\t\tif ( colorsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn colorsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tcolorsHash[ hash ] = colors.length;\n\t\t\tcolors.push( color.getHex() );\n\n\t\t\treturn colorsHash[ hash ];\n\n\t\t}\n\n\t\tfunction getUvIndex( uv ) {\n\n\t\t\tvar hash = uv.x.toString() + uv.y.toString();\n\n\t\t\tif ( uvsHash[ hash ] !== undefined ) {\n\n\t\t\t\treturn uvsHash[ hash ];\n\n\t\t\t}\n\n\t\t\tuvsHash[ hash ] = uvs.length / 2;\n\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\treturn uvsHash[ hash ];\n\n\t\t}\n\n\t\tdata.data = {};\n\n\t\tdata.data.vertices = vertices;\n\t\tdata.data.normals = normals;\n\t\tif ( colors.length > 0 ) data.data.colors = colors;\n\t\tif ( uvs.length > 0 ) data.data.uvs = [ uvs ]; // temporal backward compatibility\n\t\tdata.data.faces = faces;\n\n\t\treturn data;\n\n\t},\n\n\tclone: function () {\n\n\t\t/*\n\t\t // Handle primitives\n\n\t\t var parameters = this.parameters;\n\n\t\t if ( parameters !== undefined ) {\n\n\t\t var values = [];\n\n\t\t for ( var key in parameters ) {\n\n\t\t values.push( parameters[ key ] );\n\n\t\t }\n\n\t\t var geometry = Object.create( this.constructor.prototype );\n\t\t this.constructor.apply( geometry, values );\n\t\t return geometry;\n\n\t\t }\n\n\t\t return new this.constructor().copy( this );\n\t\t */\n\n\t\treturn new Geometry().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tvar i, il, j, jl, k, kl;\n\n\t\t// reset\n\n\t\tthis.vertices = [];\n\t\tthis.colors = [];\n\t\tthis.faces = [];\n\t\tthis.faceVertexUvs = [[]];\n\t\tthis.morphTargets = [];\n\t\tthis.morphNormals = [];\n\t\tthis.skinWeights = [];\n\t\tthis.skinIndices = [];\n\t\tthis.lineDistances = [];\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\t// name\n\n\t\tthis.name = source.name;\n\n\t\t// vertices\n\n\t\tvar vertices = source.vertices;\n\n\t\tfor ( i = 0, il = vertices.length; i < il; i ++ ) {\n\n\t\t\tthis.vertices.push( vertices[ i ].clone() );\n\n\t\t}\n\n\t\t// colors\n\n\t\tvar colors = source.colors;\n\n\t\tfor ( i = 0, il = colors.length; i < il; i ++ ) {\n\n\t\t\tthis.colors.push( colors[ i ].clone() );\n\n\t\t}\n\n\t\t// faces\n\n\t\tvar faces = source.faces;\n\n\t\tfor ( i = 0, il = faces.length; i < il; i ++ ) {\n\n\t\t\tthis.faces.push( faces[ i ].clone() );\n\n\t\t}\n\n\t\t// face vertex uvs\n\n\t\tfor ( i = 0, il = source.faceVertexUvs.length; i < il; i ++ ) {\n\n\t\t\tvar faceVertexUvs = source.faceVertexUvs[ i ];\n\n\t\t\tif ( this.faceVertexUvs[ i ] === undefined ) {\n\n\t\t\t\tthis.faceVertexUvs[ i ] = [];\n\n\t\t\t}\n\n\t\t\tfor ( j = 0, jl = faceVertexUvs.length; j < jl; j ++ ) {\n\n\t\t\t\tvar uvs = faceVertexUvs[ j ], uvsCopy = [];\n\n\t\t\t\tfor ( k = 0, kl = uvs.length; k < kl; k ++ ) {\n\n\t\t\t\t\tvar uv = uvs[ k ];\n\n\t\t\t\t\tuvsCopy.push( uv.clone() );\n\n\t\t\t\t}\n\n\t\t\t\tthis.faceVertexUvs[ i ].push( uvsCopy );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// morph targets\n\n\t\tvar morphTargets = source.morphTargets;\n\n\t\tfor ( i = 0, il = morphTargets.length; i < il; i ++ ) {\n\n\t\t\tvar morphTarget = {};\n\t\t\tmorphTarget.name = morphTargets[ i ].name;\n\n\t\t\t// vertices\n\n\t\t\tif ( morphTargets[ i ].vertices !== undefined ) {\n\n\t\t\t\tmorphTarget.vertices = [];\n\n\t\t\t\tfor ( j = 0, jl = morphTargets[ i ].vertices.length; j < jl; j ++ ) {\n\n\t\t\t\t\tmorphTarget.vertices.push( morphTargets[ i ].vertices[ j ].clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// normals\n\n\t\t\tif ( morphTargets[ i ].normals !== undefined ) {\n\n\t\t\t\tmorphTarget.normals = [];\n\n\t\t\t\tfor ( j = 0, jl = morphTargets[ i ].normals.length; j < jl; j ++ ) {\n\n\t\t\t\t\tmorphTarget.normals.push( morphTargets[ i ].normals[ j ].clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.morphTargets.push( morphTarget );\n\n\t\t}\n\n\t\t// morph normals\n\n\t\tvar morphNormals = source.morphNormals;\n\n\t\tfor ( i = 0, il = morphNormals.length; i < il; i ++ ) {\n\n\t\t\tvar morphNormal = {};\n\n\t\t\t// vertex normals\n\n\t\t\tif ( morphNormals[ i ].vertexNormals !== undefined ) {\n\n\t\t\t\tmorphNormal.vertexNormals = [];\n\n\t\t\t\tfor ( j = 0, jl = morphNormals[ i ].vertexNormals.length; j < jl; j ++ ) {\n\n\t\t\t\t\tvar srcVertexNormal = morphNormals[ i ].vertexNormals[ j ];\n\t\t\t\t\tvar destVertexNormal = {};\n\n\t\t\t\t\tdestVertexNormal.a = srcVertexNormal.a.clone();\n\t\t\t\t\tdestVertexNormal.b = srcVertexNormal.b.clone();\n\t\t\t\t\tdestVertexNormal.c = srcVertexNormal.c.clone();\n\n\t\t\t\t\tmorphNormal.vertexNormals.push( destVertexNormal );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// face normals\n\n\t\t\tif ( morphNormals[ i ].faceNormals !== undefined ) {\n\n\t\t\t\tmorphNormal.faceNormals = [];\n\n\t\t\t\tfor ( j = 0, jl = morphNormals[ i ].faceNormals.length; j < jl; j ++ ) {\n\n\t\t\t\t\tmorphNormal.faceNormals.push( morphNormals[ i ].faceNormals[ j ].clone() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.morphNormals.push( morphNormal );\n\n\t\t}\n\n\t\t// skin weights\n\n\t\tvar skinWeights = source.skinWeights;\n\n\t\tfor ( i = 0, il = skinWeights.length; i < il; i ++ ) {\n\n\t\t\tthis.skinWeights.push( skinWeights[ i ].clone() );\n\n\t\t}\n\n\t\t// skin indices\n\n\t\tvar skinIndices = source.skinIndices;\n\n\t\tfor ( i = 0, il = skinIndices.length; i < il; i ++ ) {\n\n\t\t\tthis.skinIndices.push( skinIndices[ i ].clone() );\n\n\t\t}\n\n\t\t// line distances\n\n\t\tvar lineDistances = source.lineDistances;\n\n\t\tfor ( i = 0, il = lineDistances.length; i < il; i ++ ) {\n\n\t\t\tthis.lineDistances.push( lineDistances[ i ] );\n\n\t\t}\n\n\t\t// bounding box\n\n\t\tvar boundingBox = source.boundingBox;\n\n\t\tif ( boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = boundingBox.clone();\n\n\t\t}\n\n\t\t// bounding sphere\n\n\t\tvar boundingSphere = source.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = boundingSphere.clone();\n\n\t\t}\n\n\t\t// update flags\n\n\t\tthis.elementsNeedUpdate = source.elementsNeedUpdate;\n\t\tthis.verticesNeedUpdate = source.verticesNeedUpdate;\n\t\tthis.uvsNeedUpdate = source.uvsNeedUpdate;\n\t\tthis.normalsNeedUpdate = source.normalsNeedUpdate;\n\t\tthis.colorsNeedUpdate = source.colorsNeedUpdate;\n\t\tthis.lineDistancesNeedUpdate = source.lineDistancesNeedUpdate;\n\t\tthis.groupsNeedUpdate = source.groupsNeedUpdate;\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\n\nexport { Geometry };\n","import { Curve } from '../core/Curve.js';\nimport { Vector2 } from '../../math/Vector2.js';\n\n\nfunction EllipseCurve( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'EllipseCurve';\n\n\tthis.aX = aX || 0;\n\tthis.aY = aY || 0;\n\n\tthis.xRadius = xRadius || 1;\n\tthis.yRadius = yRadius || 1;\n\n\tthis.aStartAngle = aStartAngle || 0;\n\tthis.aEndAngle = aEndAngle || 2 * Math.PI;\n\n\tthis.aClockwise = aClockwise || false;\n\n\tthis.aRotation = aRotation || 0;\n\n}\n\nEllipseCurve.prototype = Object.create( Curve.prototype );\nEllipseCurve.prototype.constructor = EllipseCurve;\n\nEllipseCurve.prototype.isEllipseCurve = true;\n\nEllipseCurve.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new Vector2();\n\n\tvar twoPi = Math.PI * 2;\n\tvar deltaAngle = this.aEndAngle - this.aStartAngle;\n\tvar samePoints = Math.abs( deltaAngle ) < Number.EPSILON;\n\n\t// ensures that deltaAngle is 0 .. 2 PI\n\twhile ( deltaAngle < 0 ) deltaAngle += twoPi;\n\twhile ( deltaAngle > twoPi ) deltaAngle -= twoPi;\n\n\tif ( deltaAngle < Number.EPSILON ) {\n\n\t\tif ( samePoints ) {\n\n\t\t\tdeltaAngle = 0;\n\n\t\t} else {\n\n\t\t\tdeltaAngle = twoPi;\n\n\t\t}\n\n\t}\n\n\tif ( this.aClockwise === true && ! samePoints ) {\n\n\t\tif ( deltaAngle === twoPi ) {\n\n\t\t\tdeltaAngle = - twoPi;\n\n\t\t} else {\n\n\t\t\tdeltaAngle = deltaAngle - twoPi;\n\n\t\t}\n\n\t}\n\n\tvar angle = this.aStartAngle + t * deltaAngle;\n\tvar x = this.aX + this.xRadius * Math.cos( angle );\n\tvar y = this.aY + this.yRadius * Math.sin( angle );\n\n\tif ( this.aRotation !== 0 ) {\n\n\t\tvar cos = Math.cos( this.aRotation );\n\t\tvar sin = Math.sin( this.aRotation );\n\n\t\tvar tx = x - this.aX;\n\t\tvar ty = y - this.aY;\n\n\t\t// Rotate the point about the center of the ellipse.\n\t\tx = tx * cos - ty * sin + this.aX;\n\t\ty = tx * sin + ty * cos + this.aY;\n\n\t}\n\n\treturn point.set( x, y );\n\n};\n\nEllipseCurve.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.aX = source.aX;\n\tthis.aY = source.aY;\n\n\tthis.xRadius = source.xRadius;\n\tthis.yRadius = source.yRadius;\n\n\tthis.aStartAngle = source.aStartAngle;\n\tthis.aEndAngle = source.aEndAngle;\n\n\tthis.aClockwise = source.aClockwise;\n\n\tthis.aRotation = source.aRotation;\n\n\treturn this;\n\n};\n\n\nEllipseCurve.prototype.toJSON = function () {\n\n\tvar data = Curve.prototype.toJSON.call( this );\n\n\tdata.aX = this.aX;\n\tdata.aY = this.aY;\n\n\tdata.xRadius = this.xRadius;\n\tdata.yRadius = this.yRadius;\n\n\tdata.aStartAngle = this.aStartAngle;\n\tdata.aEndAngle = this.aEndAngle;\n\n\tdata.aClockwise = this.aClockwise;\n\n\tdata.aRotation = this.aRotation;\n\n\treturn data;\n\n};\n\nEllipseCurve.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.aX = json.aX;\n\tthis.aY = json.aY;\n\n\tthis.xRadius = json.xRadius;\n\tthis.yRadius = json.yRadius;\n\n\tthis.aStartAngle = json.aStartAngle;\n\tthis.aEndAngle = json.aEndAngle;\n\n\tthis.aClockwise = json.aClockwise;\n\n\tthis.aRotation = json.aRotation;\n\n\treturn this;\n\n};\n\n\nexport { EllipseCurve };\n","import { MathUtils } from '../../math/MathUtils.js';\nimport { Vector3 } from '../../math/Vector3.js';\nimport { Matrix4 } from '../../math/Matrix4.js';\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * Extensible curve object\n *\n * Some common of curve methods:\n * .getPoint( t, optionalTarget ), .getTangent( t )\n * .getPointAt( u, optionalTarget ), .getTangentAt( u )\n * .getPoints(), .getSpacedPoints()\n * .getLength()\n * .updateArcLengths()\n *\n * This following curves inherit from THREE.Curve:\n *\n * -- 2D curves --\n * THREE.ArcCurve\n * THREE.CubicBezierCurve\n * THREE.EllipseCurve\n * THREE.LineCurve\n * THREE.QuadraticBezierCurve\n * THREE.SplineCurve\n *\n * -- 3D curves --\n * THREE.CatmullRomCurve3\n * THREE.CubicBezierCurve3\n * THREE.LineCurve3\n * THREE.QuadraticBezierCurve3\n *\n * A series of curves can be represented as a THREE.CurvePath.\n *\n **/\n\n/**************************************************************\n *\tAbstract Curve base class\n **************************************************************/\n\nfunction Curve() {\n\n\tthis.type = 'Curve';\n\n\tthis.arcLengthDivisions = 200;\n\n}\n\nObject.assign( Curve.prototype, {\n\n\t// Virtual base class method to overwrite and implement in subclasses\n\t//\t- t [0 .. 1]\n\n\tgetPoint: function ( /* t, optionalTarget */ ) {\n\n\t\tconsole.warn( 'THREE.Curve: .getPoint() not implemented.' );\n\t\treturn null;\n\n\t},\n\n\t// Get point at relative position in curve according to arc length\n\t// - u [0 .. 1]\n\n\tgetPointAt: function ( u, optionalTarget ) {\n\n\t\tvar t = this.getUtoTmapping( u );\n\t\treturn this.getPoint( t, optionalTarget );\n\n\t},\n\n\t// Get sequence of points using getPoint( t )\n\n\tgetPoints: function ( divisions ) {\n\n\t\tif ( divisions === undefined ) divisions = 5;\n\n\t\tvar points = [];\n\n\t\tfor ( var d = 0; d <= divisions; d ++ ) {\n\n\t\t\tpoints.push( this.getPoint( d / divisions ) );\n\n\t\t}\n\n\t\treturn points;\n\n\t},\n\n\t// Get sequence of points using getPointAt( u )\n\n\tgetSpacedPoints: function ( divisions ) {\n\n\t\tif ( divisions === undefined ) divisions = 5;\n\n\t\tvar points = [];\n\n\t\tfor ( var d = 0; d <= divisions; d ++ ) {\n\n\t\t\tpoints.push( this.getPointAt( d / divisions ) );\n\n\t\t}\n\n\t\treturn points;\n\n\t},\n\n\t// Get total curve arc length\n\n\tgetLength: function () {\n\n\t\tvar lengths = this.getLengths();\n\t\treturn lengths[ lengths.length - 1 ];\n\n\t},\n\n\t// Get list of cumulative segment lengths\n\n\tgetLengths: function ( divisions ) {\n\n\t\tif ( divisions === undefined ) divisions = this.arcLengthDivisions;\n\n\t\tif ( this.cacheArcLengths &&\n\t\t\t( this.cacheArcLengths.length === divisions + 1 ) &&\n\t\t\t! this.needsUpdate ) {\n\n\t\t\treturn this.cacheArcLengths;\n\n\t\t}\n\n\t\tthis.needsUpdate = false;\n\n\t\tvar cache = [];\n\t\tvar current, last = this.getPoint( 0 );\n\t\tvar p, sum = 0;\n\n\t\tcache.push( 0 );\n\n\t\tfor ( p = 1; p <= divisions; p ++ ) {\n\n\t\t\tcurrent = this.getPoint( p / divisions );\n\t\t\tsum += current.distanceTo( last );\n\t\t\tcache.push( sum );\n\t\t\tlast = current;\n\n\t\t}\n\n\t\tthis.cacheArcLengths = cache;\n\n\t\treturn cache; // { sums: cache, sum: sum }; Sum is in the last element.\n\n\t},\n\n\tupdateArcLengths: function () {\n\n\t\tthis.needsUpdate = true;\n\t\tthis.getLengths();\n\n\t},\n\n\t// Given u ( 0 .. 1 ), get a t to find p. This gives you points which are equidistant\n\n\tgetUtoTmapping: function ( u, distance ) {\n\n\t\tvar arcLengths = this.getLengths();\n\n\t\tvar i = 0, il = arcLengths.length;\n\n\t\tvar targetArcLength; // The targeted u distance value to get\n\n\t\tif ( distance ) {\n\n\t\t\ttargetArcLength = distance;\n\n\t\t} else {\n\n\t\t\ttargetArcLength = u * arcLengths[ il - 1 ];\n\n\t\t}\n\n\t\t// binary search for the index with largest value smaller than target u distance\n\n\t\tvar low = 0, high = il - 1, comparison;\n\n\t\twhile ( low <= high ) {\n\n\t\t\ti = Math.floor( low + ( high - low ) / 2 ); // less likely to overflow, though probably not issue here, JS doesn't really have integers, all numbers are floats\n\n\t\t\tcomparison = arcLengths[ i ] - targetArcLength;\n\n\t\t\tif ( comparison < 0 ) {\n\n\t\t\t\tlow = i + 1;\n\n\t\t\t} else if ( comparison > 0 ) {\n\n\t\t\t\thigh = i - 1;\n\n\t\t\t} else {\n\n\t\t\t\thigh = i;\n\t\t\t\tbreak;\n\n\t\t\t\t// DONE\n\n\t\t\t}\n\n\t\t}\n\n\t\ti = high;\n\n\t\tif ( arcLengths[ i ] === targetArcLength ) {\n\n\t\t\treturn i / ( il - 1 );\n\n\t\t}\n\n\t\t// we could get finer grain at lengths, or use simple interpolation between two points\n\n\t\tvar lengthBefore = arcLengths[ i ];\n\t\tvar lengthAfter = arcLengths[ i + 1 ];\n\n\t\tvar segmentLength = lengthAfter - lengthBefore;\n\n\t\t// determine where we are between the 'before' and 'after' points\n\n\t\tvar segmentFraction = ( targetArcLength - lengthBefore ) / segmentLength;\n\n\t\t// add that fractional amount to t\n\n\t\tvar t = ( i + segmentFraction ) / ( il - 1 );\n\n\t\treturn t;\n\n\t},\n\n\t// Returns a unit vector tangent at t\n\t// In case any sub curve does not implement its tangent derivation,\n\t// 2 points a small delta apart will be used to find its gradient\n\t// which seems to give a reasonable approximation\n\n\tgetTangent: function ( t ) {\n\n\t\tvar delta = 0.0001;\n\t\tvar t1 = t - delta;\n\t\tvar t2 = t + delta;\n\n\t\t// Capping in case of danger\n\n\t\tif ( t1 < 0 ) t1 = 0;\n\t\tif ( t2 > 1 ) t2 = 1;\n\n\t\tvar pt1 = this.getPoint( t1 );\n\t\tvar pt2 = this.getPoint( t2 );\n\n\t\tvar vec = pt2.clone().sub( pt1 );\n\t\treturn vec.normalize();\n\n\t},\n\n\tgetTangentAt: function ( u ) {\n\n\t\tvar t = this.getUtoTmapping( u );\n\t\treturn this.getTangent( t );\n\n\t},\n\n\tcomputeFrenetFrames: function ( segments, closed ) {\n\n\t\t// see http://www.cs.indiana.edu/pub/techreports/TR425.pdf\n\n\t\tvar normal = new Vector3();\n\n\t\tvar tangents = [];\n\t\tvar normals = [];\n\t\tvar binormals = [];\n\n\t\tvar vec = new Vector3();\n\t\tvar mat = new Matrix4();\n\n\t\tvar i, u, theta;\n\n\t\t// compute the tangent vectors for each segment on the curve\n\n\t\tfor ( i = 0; i <= segments; i ++ ) {\n\n\t\t\tu = i / segments;\n\n\t\t\ttangents[ i ] = this.getTangentAt( u );\n\t\t\ttangents[ i ].normalize();\n\n\t\t}\n\n\t\t// select an initial normal vector perpendicular to the first tangent vector,\n\t\t// and in the direction of the minimum tangent xyz component\n\n\t\tnormals[ 0 ] = new Vector3();\n\t\tbinormals[ 0 ] = new Vector3();\n\t\tvar min = Number.MAX_VALUE;\n\t\tvar tx = Math.abs( tangents[ 0 ].x );\n\t\tvar ty = Math.abs( tangents[ 0 ].y );\n\t\tvar tz = Math.abs( tangents[ 0 ].z );\n\n\t\tif ( tx <= min ) {\n\n\t\t\tmin = tx;\n\t\t\tnormal.set( 1, 0, 0 );\n\n\t\t}\n\n\t\tif ( ty <= min ) {\n\n\t\t\tmin = ty;\n\t\t\tnormal.set( 0, 1, 0 );\n\n\t\t}\n\n\t\tif ( tz <= min ) {\n\n\t\t\tnormal.set( 0, 0, 1 );\n\n\t\t}\n\n\t\tvec.crossVectors( tangents[ 0 ], normal ).normalize();\n\n\t\tnormals[ 0 ].crossVectors( tangents[ 0 ], vec );\n\t\tbinormals[ 0 ].crossVectors( tangents[ 0 ], normals[ 0 ] );\n\n\n\t\t// compute the slowly-varying normal and binormal vectors for each segment on the curve\n\n\t\tfor ( i = 1; i <= segments; i ++ ) {\n\n\t\t\tnormals[ i ] = normals[ i - 1 ].clone();\n\n\t\t\tbinormals[ i ] = binormals[ i - 1 ].clone();\n\n\t\t\tvec.crossVectors( tangents[ i - 1 ], tangents[ i ] );\n\n\t\t\tif ( vec.length() > Number.EPSILON ) {\n\n\t\t\t\tvec.normalize();\n\n\t\t\t\ttheta = Math.acos( MathUtils.clamp( tangents[ i - 1 ].dot( tangents[ i ] ), - 1, 1 ) ); // clamp for floating pt errors\n\n\t\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( vec, theta ) );\n\n\t\t\t}\n\n\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\n\n\t\t}\n\n\t\t// if the curve is closed, postprocess the vectors so the first and last normal vectors are the same\n\n\t\tif ( closed === true ) {\n\n\t\t\ttheta = Math.acos( MathUtils.clamp( normals[ 0 ].dot( normals[ segments ] ), - 1, 1 ) );\n\t\t\ttheta /= segments;\n\n\t\t\tif ( tangents[ 0 ].dot( vec.crossVectors( normals[ 0 ], normals[ segments ] ) ) > 0 ) {\n\n\t\t\t\ttheta = - theta;\n\n\t\t\t}\n\n\t\t\tfor ( i = 1; i <= segments; i ++ ) {\n\n\t\t\t\t// twist a little...\n\t\t\t\tnormals[ i ].applyMatrix4( mat.makeRotationAxis( tangents[ i ], theta * i ) );\n\t\t\t\tbinormals[ i ].crossVectors( tangents[ i ], normals[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn {\n\t\t\ttangents: tangents,\n\t\t\tnormals: normals,\n\t\t\tbinormals: binormals\n\t\t};\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.arcLengthDivisions = source.arcLengthDivisions;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Curve',\n\t\t\t\tgenerator: 'Curve.toJSON'\n\t\t\t}\n\t\t};\n\n\t\tdata.arcLengthDivisions = this.arcLengthDivisions;\n\t\tdata.type = this.type;\n\n\t\treturn data;\n\n\t},\n\n\tfromJSON: function ( json ) {\n\n\t\tthis.arcLengthDivisions = json.arcLengthDivisions;\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Curve };\n","import { InterpolateDiscrete } from '../../constants.js';\nimport { KeyframeTrack } from '../KeyframeTrack.js';\n\n/**\n *\n * A Track of Boolean keyframe values.\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction BooleanKeyframeTrack( name, times, values ) {\n\n\tKeyframeTrack.call( this, name, times, values );\n\n}\n\nBooleanKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: BooleanKeyframeTrack,\n\n\tValueTypeName: 'bool',\n\tValueBufferType: Array,\n\n\tDefaultInterpolation: InterpolateDiscrete,\n\n\tInterpolantFactoryMethodLinear: undefined,\n\tInterpolantFactoryMethodSmooth: undefined\n\n\t// Note: Actually this track could have a optimized / compressed\n\t// representation of a single value and a custom interpolant that\n\t// computes \"firstValue ^ isOdd( index )\".\n\n} );\n\nexport { BooleanKeyframeTrack };\n","import { KeyframeTrack } from '../KeyframeTrack.js';\n\n/**\n *\n * A Track of keyframe values that represent color.\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction ColorKeyframeTrack( name, times, values, interpolation ) {\n\n\tKeyframeTrack.call( this, name, times, values, interpolation );\n\n}\n\nColorKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: ColorKeyframeTrack,\n\n\tValueTypeName: 'color'\n\n\t// ValueBufferType is inherited\n\n\t// DefaultInterpolation is inherited\n\n\t// Note: Very basic implementation and nothing special yet.\n\t// However, this is the place for color space parameterization.\n\n} );\n\nexport { ColorKeyframeTrack };\n","import { InterpolateDiscrete } from '../../constants.js';\nimport { KeyframeTrack } from '../KeyframeTrack.js';\n\n/**\n *\n * A Track that interpolates Strings\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction StringKeyframeTrack( name, times, values, interpolation ) {\n\n\tKeyframeTrack.call( this, name, times, values, interpolation );\n\n}\n\nStringKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: StringKeyframeTrack,\n\n\tValueTypeName: 'string',\n\tValueBufferType: Array,\n\n\tDefaultInterpolation: InterpolateDiscrete,\n\n\tInterpolantFactoryMethodLinear: undefined,\n\n\tInterpolantFactoryMethodSmooth: undefined\n\n} );\n\nexport { StringKeyframeTrack };\n","import { AnimationUtils } from './AnimationUtils.js';\nimport { KeyframeTrack } from './KeyframeTrack.js';\nimport { BooleanKeyframeTrack } from './tracks/BooleanKeyframeTrack.js';\nimport { ColorKeyframeTrack } from './tracks/ColorKeyframeTrack.js';\nimport { NumberKeyframeTrack } from './tracks/NumberKeyframeTrack.js';\nimport { QuaternionKeyframeTrack } from './tracks/QuaternionKeyframeTrack.js';\nimport { StringKeyframeTrack } from './tracks/StringKeyframeTrack.js';\nimport { VectorKeyframeTrack } from './tracks/VectorKeyframeTrack.js';\nimport { MathUtils } from '../math/MathUtils.js';\n\n/**\n *\n * Reusable set of Tracks that represent an animation.\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n */\n\nfunction AnimationClip( name, duration, tracks ) {\n\n\tthis.name = name;\n\tthis.tracks = tracks;\n\tthis.duration = ( duration !== undefined ) ? duration : - 1;\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\t// this means it should figure out its duration by scanning the tracks\n\tif ( this.duration < 0 ) {\n\n\t\tthis.resetDuration();\n\n\t}\n\n}\n\nfunction getTrackTypeForValueTypeName( typeName ) {\n\n\tswitch ( typeName.toLowerCase() ) {\n\n\t\tcase 'scalar':\n\t\tcase 'double':\n\t\tcase 'float':\n\t\tcase 'number':\n\t\tcase 'integer':\n\n\t\t\treturn NumberKeyframeTrack;\n\n\t\tcase 'vector':\n\t\tcase 'vector2':\n\t\tcase 'vector3':\n\t\tcase 'vector4':\n\n\t\t\treturn VectorKeyframeTrack;\n\n\t\tcase 'color':\n\n\t\t\treturn ColorKeyframeTrack;\n\n\t\tcase 'quaternion':\n\n\t\t\treturn QuaternionKeyframeTrack;\n\n\t\tcase 'bool':\n\t\tcase 'boolean':\n\n\t\t\treturn BooleanKeyframeTrack;\n\n\t\tcase 'string':\n\n\t\t\treturn StringKeyframeTrack;\n\n\t}\n\n\tthrow new Error( 'THREE.KeyframeTrack: Unsupported typeName: ' + typeName );\n\n}\n\nfunction parseKeyframeTrack( json ) {\n\n\tif ( json.type === undefined ) {\n\n\t\tthrow new Error( 'THREE.KeyframeTrack: track type undefined, can not parse' );\n\n\t}\n\n\tvar trackType = getTrackTypeForValueTypeName( json.type );\n\n\tif ( json.times === undefined ) {\n\n\t\tvar times = [], values = [];\n\n\t\tAnimationUtils.flattenJSON( json.keys, times, values, 'value' );\n\n\t\tjson.times = times;\n\t\tjson.values = values;\n\n\t}\n\n\t// derived classes can define a static parse method\n\tif ( trackType.parse !== undefined ) {\n\n\t\treturn trackType.parse( json );\n\n\t} else {\n\n\t\t// by default, we assume a constructor compatible with the base\n\t\treturn new trackType( json.name, json.times, json.values, json.interpolation );\n\n\t}\n\n}\n\nObject.assign( AnimationClip, {\n\n\tparse: function ( json ) {\n\n\t\tvar tracks = [],\n\t\t\tjsonTracks = json.tracks,\n\t\t\tframeTime = 1.0 / ( json.fps || 1.0 );\n\n\t\tfor ( var i = 0, n = jsonTracks.length; i !== n; ++ i ) {\n\n\t\t\ttracks.push( parseKeyframeTrack( jsonTracks[ i ] ).scale( frameTime ) );\n\n\t\t}\n\n\t\treturn new AnimationClip( json.name, json.duration, tracks );\n\n\t},\n\n\ttoJSON: function ( clip ) {\n\n\t\tvar tracks = [],\n\t\t\tclipTracks = clip.tracks;\n\n\t\tvar json = {\n\n\t\t\t'name': clip.name,\n\t\t\t'duration': clip.duration,\n\t\t\t'tracks': tracks,\n\t\t\t'uuid': clip.uuid\n\n\t\t};\n\n\t\tfor ( var i = 0, n = clipTracks.length; i !== n; ++ i ) {\n\n\t\t\ttracks.push( KeyframeTrack.toJSON( clipTracks[ i ] ) );\n\n\t\t}\n\n\t\treturn json;\n\n\t},\n\n\tCreateFromMorphTargetSequence: function ( name, morphTargetSequence, fps, noLoop ) {\n\n\t\tvar numMorphTargets = morphTargetSequence.length;\n\t\tvar tracks = [];\n\n\t\tfor ( var i = 0; i < numMorphTargets; i ++ ) {\n\n\t\t\tvar times = [];\n\t\t\tvar values = [];\n\n\t\t\ttimes.push(\n\t\t\t\t( i + numMorphTargets - 1 ) % numMorphTargets,\n\t\t\t\ti,\n\t\t\t\t( i + 1 ) % numMorphTargets );\n\n\t\t\tvalues.push( 0, 1, 0 );\n\n\t\t\tvar order = AnimationUtils.getKeyframeOrder( times );\n\t\t\ttimes = AnimationUtils.sortedArray( times, 1, order );\n\t\t\tvalues = AnimationUtils.sortedArray( values, 1, order );\n\n\t\t\t// if there is a key at the first frame, duplicate it as the\n\t\t\t// last frame as well for perfect loop.\n\t\t\tif ( ! noLoop && times[ 0 ] === 0 ) {\n\n\t\t\t\ttimes.push( numMorphTargets );\n\t\t\t\tvalues.push( values[ 0 ] );\n\n\t\t\t}\n\n\t\t\ttracks.push(\n\t\t\t\tnew NumberKeyframeTrack(\n\t\t\t\t\t'.morphTargetInfluences[' + morphTargetSequence[ i ].name + ']',\n\t\t\t\t\ttimes, values\n\t\t\t\t).scale( 1.0 / fps ) );\n\n\t\t}\n\n\t\treturn new AnimationClip( name, - 1, tracks );\n\n\t},\n\n\tfindByName: function ( objectOrClipArray, name ) {\n\n\t\tvar clipArray = objectOrClipArray;\n\n\t\tif ( ! Array.isArray( objectOrClipArray ) ) {\n\n\t\t\tvar o = objectOrClipArray;\n\t\t\tclipArray = o.geometry && o.geometry.animations || o.animations;\n\n\t\t}\n\n\t\tfor ( var i = 0; i < clipArray.length; i ++ ) {\n\n\t\t\tif ( clipArray[ i ].name === name ) {\n\n\t\t\t\treturn clipArray[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t},\n\n\tCreateClipsFromMorphTargetSequences: function ( morphTargets, fps, noLoop ) {\n\n\t\tvar animationToMorphTargets = {};\n\n\t\t// tested with https://regex101.com/ on trick sequences\n\t\t// such flamingo_flyA_003, flamingo_run1_003, crdeath0059\n\t\tvar pattern = /^([\\w-]*?)([\\d]+)$/;\n\n\t\t// sort morph target names into animation groups based\n\t\t// patterns like Walk_001, Walk_002, Run_001, Run_002\n\t\tfor ( var i = 0, il = morphTargets.length; i < il; i ++ ) {\n\n\t\t\tvar morphTarget = morphTargets[ i ];\n\t\t\tvar parts = morphTarget.name.match( pattern );\n\n\t\t\tif ( parts && parts.length > 1 ) {\n\n\t\t\t\tvar name = parts[ 1 ];\n\n\t\t\t\tvar animationMorphTargets = animationToMorphTargets[ name ];\n\t\t\t\tif ( ! animationMorphTargets ) {\n\n\t\t\t\t\tanimationToMorphTargets[ name ] = animationMorphTargets = [];\n\n\t\t\t\t}\n\n\t\t\t\tanimationMorphTargets.push( morphTarget );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar clips = [];\n\n\t\tfor ( var name in animationToMorphTargets ) {\n\n\t\t\tclips.push( AnimationClip.CreateFromMorphTargetSequence( name, animationToMorphTargets[ name ], fps, noLoop ) );\n\n\t\t}\n\n\t\treturn clips;\n\n\t},\n\n\t// parse the animation.hierarchy format\n\tparseAnimation: function ( animation, bones ) {\n\n\t\tif ( ! animation ) {\n\n\t\t\tconsole.error( 'THREE.AnimationClip: No animation in JSONLoader data.' );\n\t\t\treturn null;\n\n\t\t}\n\n\t\tvar addNonemptyTrack = function ( trackType, trackName, animationKeys, propertyName, destTracks ) {\n\n\t\t\t// only return track if there are actually keys.\n\t\t\tif ( animationKeys.length !== 0 ) {\n\n\t\t\t\tvar times = [];\n\t\t\t\tvar values = [];\n\n\t\t\t\tAnimationUtils.flattenJSON( animationKeys, times, values, propertyName );\n\n\t\t\t\t// empty keys are filtered out, so check again\n\t\t\t\tif ( times.length !== 0 ) {\n\n\t\t\t\t\tdestTracks.push( new trackType( trackName, times, values ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t};\n\n\t\tvar tracks = [];\n\n\t\tvar clipName = animation.name || 'default';\n\t\t// automatic length determination in AnimationClip.\n\t\tvar duration = animation.length || - 1;\n\t\tvar fps = animation.fps || 30;\n\n\t\tvar hierarchyTracks = animation.hierarchy || [];\n\n\t\tfor ( var h = 0; h < hierarchyTracks.length; h ++ ) {\n\n\t\t\tvar animationKeys = hierarchyTracks[ h ].keys;\n\n\t\t\t// skip empty tracks\n\t\t\tif ( ! animationKeys || animationKeys.length === 0 ) continue;\n\n\t\t\t// process morph targets\n\t\t\tif ( animationKeys[ 0 ].morphTargets ) {\n\n\t\t\t\t// figure out all morph targets used in this track\n\t\t\t\tvar morphTargetNames = {};\n\n\t\t\t\tfor ( var k = 0; k < animationKeys.length; k ++ ) {\n\n\t\t\t\t\tif ( animationKeys[ k ].morphTargets ) {\n\n\t\t\t\t\t\tfor ( var m = 0; m < animationKeys[ k ].morphTargets.length; m ++ ) {\n\n\t\t\t\t\t\t\tmorphTargetNames[ animationKeys[ k ].morphTargets[ m ] ] = - 1;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t// create a track for each morph target with all zero\n\t\t\t\t// morphTargetInfluences except for the keys in which\n\t\t\t\t// the morphTarget is named.\n\t\t\t\tfor ( var morphTargetName in morphTargetNames ) {\n\n\t\t\t\t\tvar times = [];\n\t\t\t\t\tvar values = [];\n\n\t\t\t\t\tfor ( var m = 0; m !== animationKeys[ k ].morphTargets.length; ++ m ) {\n\n\t\t\t\t\t\tvar animationKey = animationKeys[ k ];\n\n\t\t\t\t\t\ttimes.push( animationKey.time );\n\t\t\t\t\t\tvalues.push( ( animationKey.morphTarget === morphTargetName ) ? 1 : 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttracks.push( new NumberKeyframeTrack( '.morphTargetInfluence[' + morphTargetName + ']', times, values ) );\n\n\t\t\t\t}\n\n\t\t\t\tduration = morphTargetNames.length * ( fps || 1.0 );\n\n\t\t\t} else {\n\n\t\t\t\t// ...assume skeletal animation\n\n\t\t\t\tvar boneName = '.bones[' + bones[ h ].name + ']';\n\n\t\t\t\taddNonemptyTrack(\n\t\t\t\t\tVectorKeyframeTrack, boneName + '.position',\n\t\t\t\t\tanimationKeys, 'pos', tracks );\n\n\t\t\t\taddNonemptyTrack(\n\t\t\t\t\tQuaternionKeyframeTrack, boneName + '.quaternion',\n\t\t\t\t\tanimationKeys, 'rot', tracks );\n\n\t\t\t\taddNonemptyTrack(\n\t\t\t\t\tVectorKeyframeTrack, boneName + '.scale',\n\t\t\t\t\tanimationKeys, 'scl', tracks );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( tracks.length === 0 ) {\n\n\t\t\treturn null;\n\n\t\t}\n\n\t\tvar clip = new AnimationClip( clipName, duration, tracks );\n\n\t\treturn clip;\n\n\t}\n\n} );\n\nObject.assign( AnimationClip.prototype, {\n\n\tresetDuration: function () {\n\n\t\tvar tracks = this.tracks, duration = 0;\n\n\t\tfor ( var i = 0, n = tracks.length; i !== n; ++ i ) {\n\n\t\t\tvar track = this.tracks[ i ];\n\n\t\t\tduration = Math.max( duration, track.times[ track.times.length - 1 ] );\n\n\t\t}\n\n\t\tthis.duration = duration;\n\n\t\treturn this;\n\n\t},\n\n\ttrim: function () {\n\n\t\tfor ( var i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\tthis.tracks[ i ].trim( 0, this.duration );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tvalidate: function () {\n\n\t\tvar valid = true;\n\n\t\tfor ( var i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\tvalid = valid && this.tracks[ i ].validate();\n\n\t\t}\n\n\t\treturn valid;\n\n\t},\n\n\toptimize: function () {\n\n\t\tfor ( var i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\tthis.tracks[ i ].optimize();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\tvar tracks = [];\n\n\t\tfor ( var i = 0; i < this.tracks.length; i ++ ) {\n\n\t\t\ttracks.push( this.tracks[ i ].clone() );\n\n\t\t}\n\n\t\treturn new AnimationClip( this.name, this.duration, tracks );\n\n\t}\n\n} );\n\n\nexport { AnimationClip };\n","/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nimport { Texture } from './Texture.js';\n\nfunction CompressedTexture( mipmaps, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding ) {\n\n\tTexture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\tthis.image = { width: width, height: height };\n\tthis.mipmaps = mipmaps;\n\n\t// no flipping for cube textures\n\t// (also flipping doesn't work for compressed textures )\n\n\tthis.flipY = false;\n\n\t// can't generate mipmaps for compressed textures\n\t// mips must be embedded in DDS files\n\n\tthis.generateMipmaps = false;\n\n}\n\nCompressedTexture.prototype = Object.create( Texture.prototype );\nCompressedTexture.prototype.constructor = CompressedTexture;\n\nCompressedTexture.prototype.isCompressedTexture = true;\n\n\nexport { CompressedTexture };\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { Vector3 } from '../math/Vector3.js';\n\n// BoxGeometry\n\nclass BoxGeometry extends Geometry {\n\n\tconstructor( width, height, depth, widthSegments, heightSegments, depthSegments ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'BoxGeometry';\n\n\t\tthis.parameters = {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\tdepth: depth,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\tdepthSegments: depthSegments\n\t\t};\n\n\t\tthis.fromBufferGeometry( new BoxBufferGeometry( width, height, depth, widthSegments, heightSegments, depthSegments ) );\n\t\tthis.mergeVertices();\n\n\t}\n\n}\n\n// BoxBufferGeometry\n\nclass BoxBufferGeometry extends BufferGeometry {\n\n\tconstructor( width, height, depth, widthSegments, heightSegments, depthSegments ) {\n\n\t\tsuper();\n\n\t\tthis.type = 'BoxBufferGeometry';\n\n\t\tthis.parameters = {\n\t\t\twidth: width,\n\t\t\theight: height,\n\t\t\tdepth: depth,\n\t\t\twidthSegments: widthSegments,\n\t\t\theightSegments: heightSegments,\n\t\t\tdepthSegments: depthSegments\n\t\t};\n\n\t\tvar scope = this;\n\n\t\twidth = width || 1;\n\t\theight = height || 1;\n\t\tdepth = depth || 1;\n\n\t\t// segments\n\n\t\twidthSegments = Math.floor( widthSegments ) || 1;\n\t\theightSegments = Math.floor( heightSegments ) || 1;\n\t\tdepthSegments = Math.floor( depthSegments ) || 1;\n\n\t\t// buffers\n\n\t\tvar indices = [];\n\t\tvar vertices = [];\n\t\tvar normals = [];\n\t\tvar uvs = [];\n\n\t\t// helper variables\n\n\t\tvar numberOfVertices = 0;\n\t\tvar groupStart = 0;\n\n\t\t// build each side of the box geometry\n\n\t\tbuildPlane( 'z', 'y', 'x', - 1, - 1, depth, height, width, depthSegments, heightSegments, 0 ); // px\n\t\tbuildPlane( 'z', 'y', 'x', 1, - 1, depth, height, - width, depthSegments, heightSegments, 1 ); // nx\n\t\tbuildPlane( 'x', 'z', 'y', 1, 1, width, depth, height, widthSegments, depthSegments, 2 ); // py\n\t\tbuildPlane( 'x', 'z', 'y', 1, - 1, width, depth, - height, widthSegments, depthSegments, 3 ); // ny\n\t\tbuildPlane( 'x', 'y', 'z', 1, - 1, width, height, depth, widthSegments, heightSegments, 4 ); // pz\n\t\tbuildPlane( 'x', 'y', 'z', - 1, - 1, width, height, - depth, widthSegments, heightSegments, 5 ); // nz\n\n\t\t// build geometry\n\n\t\tthis.setIndex( indices );\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\t\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\t\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t\tfunction buildPlane( u, v, w, udir, vdir, width, height, depth, gridX, gridY, materialIndex ) {\n\n\t\t\tvar segmentWidth = width / gridX;\n\t\t\tvar segmentHeight = height / gridY;\n\n\t\t\tvar widthHalf = width / 2;\n\t\t\tvar heightHalf = height / 2;\n\t\t\tvar depthHalf = depth / 2;\n\n\t\t\tvar gridX1 = gridX + 1;\n\t\t\tvar gridY1 = gridY + 1;\n\n\t\t\tvar vertexCounter = 0;\n\t\t\tvar groupCount = 0;\n\n\t\t\tvar ix, iy;\n\n\t\t\tvar vector = new Vector3();\n\n\t\t\t// generate vertices, normals and uvs\n\n\t\t\tfor ( iy = 0; iy < gridY1; iy ++ ) {\n\n\t\t\t\tvar y = iy * segmentHeight - heightHalf;\n\n\t\t\t\tfor ( ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\t\t\tvar x = ix * segmentWidth - widthHalf;\n\n\t\t\t\t\t// set values to correct vector component\n\n\t\t\t\t\tvector[ u ] = x * udir;\n\t\t\t\t\tvector[ v ] = y * vdir;\n\t\t\t\t\tvector[ w ] = depthHalf;\n\n\t\t\t\t\t// now apply vector to vertex buffer\n\n\t\t\t\t\tvertices.push( vector.x, vector.y, vector.z );\n\n\t\t\t\t\t// set values to correct vector component\n\n\t\t\t\t\tvector[ u ] = 0;\n\t\t\t\t\tvector[ v ] = 0;\n\t\t\t\t\tvector[ w ] = depth > 0 ? 1 : - 1;\n\n\t\t\t\t\t// now apply vector to normal buffer\n\n\t\t\t\t\tnormals.push( vector.x, vector.y, vector.z );\n\n\t\t\t\t\t// uvs\n\n\t\t\t\t\tuvs.push( ix / gridX );\n\t\t\t\t\tuvs.push( 1 - ( iy / gridY ) );\n\n\t\t\t\t\t// counters\n\n\t\t\t\t\tvertexCounter += 1;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// indices\n\n\t\t\t// 1. you need three indices to draw a single face\n\t\t\t// 2. a single segment consists of two faces\n\t\t\t// 3. so we need to generate six (2*3) indices per segment\n\n\t\t\tfor ( iy = 0; iy < gridY; iy ++ ) {\n\n\t\t\t\tfor ( ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\t\t\tvar a = numberOfVertices + ix + gridX1 * iy;\n\t\t\t\t\tvar b = numberOfVertices + ix + gridX1 * ( iy + 1 );\n\t\t\t\t\tvar c = numberOfVertices + ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\t\t\tvar d = numberOfVertices + ( ix + 1 ) + gridX1 * iy;\n\n\t\t\t\t\t// faces\n\n\t\t\t\t\tindices.push( a, b, d );\n\t\t\t\t\tindices.push( b, c, d );\n\n\t\t\t\t\t// increase counter\n\n\t\t\t\t\tgroupCount += 6;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\t\tscope.addGroup( groupStart, groupCount, materialIndex );\n\n\t\t\t// calculate new start value for groups\n\n\t\t\tgroupStart += groupCount;\n\n\t\t\t// update total number of vertices\n\n\t\t\tnumberOfVertices += vertexCounter;\n\n\t\t}\n\n\t}\n\n}\n\nexport { BoxGeometry, BoxBufferGeometry };\n","/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n *\n * Creates extruded geometry from a path shape.\n *\n * parameters = {\n *\n *  curveSegments: <int>, // number of points on the curves\n *  steps: <int>, // number of points for z-side extrusions / used for subdividing segments of extrude spline too\n *  depth: <float>, // Depth to extrude the shape\n *\n *  bevelEnabled: <bool>, // turn on bevel\n *  bevelThickness: <float>, // how deep into the original shape bevel goes\n *  bevelSize: <float>, // how far from shape outline (including bevelOffset) is bevel\n *  bevelOffset: <float>, // how far from shape outline does bevel start\n *  bevelSegments: <int>, // number of bevel layers\n *\n *  extrudePath: <THREE.Curve> // curve to extrude shape along\n *\n *  UVGenerator: <Object> // object that provides UV generator functions\n *\n * }\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { ShapeUtils } from '../extras/ShapeUtils.js';\n\n// ExtrudeGeometry\n\nfunction ExtrudeGeometry( shapes, options ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'ExtrudeGeometry';\n\n\tthis.parameters = {\n\t\tshapes: shapes,\n\t\toptions: options\n\t};\n\n\tthis.fromBufferGeometry( new ExtrudeBufferGeometry( shapes, options ) );\n\tthis.mergeVertices();\n\n}\n\nExtrudeGeometry.prototype = Object.create( Geometry.prototype );\nExtrudeGeometry.prototype.constructor = ExtrudeGeometry;\n\nExtrudeGeometry.prototype.toJSON = function () {\n\n\tvar data = Geometry.prototype.toJSON.call( this );\n\n\tvar shapes = this.parameters.shapes;\n\tvar options = this.parameters.options;\n\n\treturn toJSON( shapes, options, data );\n\n};\n\n// ExtrudeBufferGeometry\n\nfunction ExtrudeBufferGeometry( shapes, options ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'ExtrudeBufferGeometry';\n\n\tthis.parameters = {\n\t\tshapes: shapes,\n\t\toptions: options\n\t};\n\n\tshapes = Array.isArray( shapes ) ? shapes : [ shapes ];\n\n\tvar scope = this;\n\n\tvar verticesArray = [];\n\tvar uvArray = [];\n\n\tfor ( var i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\tvar shape = shapes[ i ];\n\t\taddShape( shape );\n\n\t}\n\n\t// build geometry\n\n\tthis.setAttribute( 'position', new Float32BufferAttribute( verticesArray, 3 ) );\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvArray, 2 ) );\n\n\tthis.computeVertexNormals();\n\n\t// functions\n\n\tfunction addShape( shape ) {\n\n\t\tvar placeholder = [];\n\n\t\t// options\n\n\t\tvar curveSegments = options.curveSegments !== undefined ? options.curveSegments : 12;\n\t\tvar steps = options.steps !== undefined ? options.steps : 1;\n\t\tvar depth = options.depth !== undefined ? options.depth : 100;\n\n\t\tvar bevelEnabled = options.bevelEnabled !== undefined ? options.bevelEnabled : true;\n\t\tvar bevelThickness = options.bevelThickness !== undefined ? options.bevelThickness : 6;\n\t\tvar bevelSize = options.bevelSize !== undefined ? options.bevelSize : bevelThickness - 2;\n\t\tvar bevelOffset = options.bevelOffset !== undefined ? options.bevelOffset : 0;\n\t\tvar bevelSegments = options.bevelSegments !== undefined ? options.bevelSegments : 3;\n\n\t\tvar extrudePath = options.extrudePath;\n\n\t\tvar uvgen = options.UVGenerator !== undefined ? options.UVGenerator : WorldUVGenerator;\n\n\t\t// deprecated options\n\n\t\tif ( options.amount !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.ExtrudeBufferGeometry: amount has been renamed to depth.' );\n\t\t\tdepth = options.amount;\n\n\t\t}\n\n\t\t//\n\n\t\tvar extrudePts, extrudeByPath = false;\n\t\tvar splineTube, binormal, normal, position2;\n\n\t\tif ( extrudePath ) {\n\n\t\t\textrudePts = extrudePath.getSpacedPoints( steps );\n\n\t\t\textrudeByPath = true;\n\t\t\tbevelEnabled = false; // bevels not supported for path extrusion\n\n\t\t\t// SETUP TNB variables\n\n\t\t\t// TODO1 - have a .isClosed in spline?\n\n\t\t\tsplineTube = extrudePath.computeFrenetFrames( steps, false );\n\n\t\t\t// console.log(splineTube, 'splineTube', splineTube.normals.length, 'steps', steps, 'extrudePts', extrudePts.length);\n\n\t\t\tbinormal = new Vector3();\n\t\t\tnormal = new Vector3();\n\t\t\tposition2 = new Vector3();\n\n\t\t}\n\n\t\t// Safeguards if bevels are not enabled\n\n\t\tif ( ! bevelEnabled ) {\n\n\t\t\tbevelSegments = 0;\n\t\t\tbevelThickness = 0;\n\t\t\tbevelSize = 0;\n\t\t\tbevelOffset = 0;\n\n\t\t}\n\n\t\t// Variables initialization\n\n\t\tvar ahole, h, hl; // looping of holes\n\n\t\tvar shapePoints = shape.extractPoints( curveSegments );\n\n\t\tvar vertices = shapePoints.shape;\n\t\tvar holes = shapePoints.holes;\n\n\t\tvar reverse = ! ShapeUtils.isClockWise( vertices );\n\n\t\tif ( reverse ) {\n\n\t\t\tvertices = vertices.reverse();\n\n\t\t\t// Maybe we should also check if holes are in the opposite direction, just to be safe ...\n\n\t\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\tahole = holes[ h ];\n\n\t\t\t\tif ( ShapeUtils.isClockWise( ahole ) ) {\n\n\t\t\t\t\tholes[ h ] = ahole.reverse();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tvar faces = ShapeUtils.triangulateShape( vertices, holes );\n\n\t\t/* Vertices */\n\n\t\tvar contour = vertices; // vertices has all points but contour has only points of circumference\n\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\tahole = holes[ h ];\n\n\t\t\tvertices = vertices.concat( ahole );\n\n\t\t}\n\n\n\t\tfunction scalePt2( pt, vec, size ) {\n\n\t\t\tif ( ! vec ) console.error( \"THREE.ExtrudeGeometry: vec does not exist\" );\n\n\t\t\treturn vec.clone().multiplyScalar( size ).add( pt );\n\n\t\t}\n\n\t\tvar b, bs, t, z,\n\t\t\tvert, vlen = vertices.length,\n\t\t\tface, flen = faces.length;\n\n\n\t\t// Find directions for point movement\n\n\n\t\tfunction getBevelVec( inPt, inPrev, inNext ) {\n\n\t\t\t// computes for inPt the corresponding point inPt' on a new contour\n\t\t\t//   shifted by 1 unit (length of normalized vector) to the left\n\t\t\t// if we walk along contour clockwise, this new contour is outside the old one\n\t\t\t//\n\t\t\t// inPt' is the intersection of the two lines parallel to the two\n\t\t\t//  adjacent edges of inPt at a distance of 1 unit on the left side.\n\n\t\t\tvar v_trans_x, v_trans_y, shrink_by; // resulting translation vector for inPt\n\n\t\t\t// good reading for geometry algorithms (here: line-line intersection)\n\t\t\t// http://geomalgorithms.com/a05-_intersect-1.html\n\n\t\t\tvar v_prev_x = inPt.x - inPrev.x,\n\t\t\t\tv_prev_y = inPt.y - inPrev.y;\n\t\t\tvar v_next_x = inNext.x - inPt.x,\n\t\t\t\tv_next_y = inNext.y - inPt.y;\n\n\t\t\tvar v_prev_lensq = ( v_prev_x * v_prev_x + v_prev_y * v_prev_y );\n\n\t\t\t// check for collinear edges\n\t\t\tvar collinear0 = ( v_prev_x * v_next_y - v_prev_y * v_next_x );\n\n\t\t\tif ( Math.abs( collinear0 ) > Number.EPSILON ) {\n\n\t\t\t\t// not collinear\n\n\t\t\t\t// length of vectors for normalizing\n\n\t\t\t\tvar v_prev_len = Math.sqrt( v_prev_lensq );\n\t\t\t\tvar v_next_len = Math.sqrt( v_next_x * v_next_x + v_next_y * v_next_y );\n\n\t\t\t\t// shift adjacent points by unit vectors to the left\n\n\t\t\t\tvar ptPrevShift_x = ( inPrev.x - v_prev_y / v_prev_len );\n\t\t\t\tvar ptPrevShift_y = ( inPrev.y + v_prev_x / v_prev_len );\n\n\t\t\t\tvar ptNextShift_x = ( inNext.x - v_next_y / v_next_len );\n\t\t\t\tvar ptNextShift_y = ( inNext.y + v_next_x / v_next_len );\n\n\t\t\t\t// scaling factor for v_prev to intersection point\n\n\t\t\t\tvar sf = ( ( ptNextShift_x - ptPrevShift_x ) * v_next_y -\n\t\t\t\t\t\t( ptNextShift_y - ptPrevShift_y ) * v_next_x ) /\n\t\t\t\t\t( v_prev_x * v_next_y - v_prev_y * v_next_x );\n\n\t\t\t\t// vector from inPt to intersection point\n\n\t\t\t\tv_trans_x = ( ptPrevShift_x + v_prev_x * sf - inPt.x );\n\t\t\t\tv_trans_y = ( ptPrevShift_y + v_prev_y * sf - inPt.y );\n\n\t\t\t\t// Don't normalize!, otherwise sharp corners become ugly\n\t\t\t\t//  but prevent crazy spikes\n\t\t\t\tvar v_trans_lensq = ( v_trans_x * v_trans_x + v_trans_y * v_trans_y );\n\t\t\t\tif ( v_trans_lensq <= 2 ) {\n\n\t\t\t\t\treturn new Vector2( v_trans_x, v_trans_y );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tshrink_by = Math.sqrt( v_trans_lensq / 2 );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// handle special case of collinear edges\n\n\t\t\t\tvar direction_eq = false; // assumes: opposite\n\t\t\t\tif ( v_prev_x > Number.EPSILON ) {\n\n\t\t\t\t\tif ( v_next_x > Number.EPSILON ) {\n\n\t\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( v_prev_x < - Number.EPSILON ) {\n\n\t\t\t\t\t\tif ( v_next_x < - Number.EPSILON ) {\n\n\t\t\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( Math.sign( v_prev_y ) === Math.sign( v_next_y ) ) {\n\n\t\t\t\t\t\t\tdirection_eq = true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( direction_eq ) {\n\n\t\t\t\t\t// console.log(\"Warning: lines are a straight sequence\");\n\t\t\t\t\tv_trans_x = - v_prev_y;\n\t\t\t\t\tv_trans_y = v_prev_x;\n\t\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// console.log(\"Warning: lines are a straight spike\");\n\t\t\t\t\tv_trans_x = v_prev_x;\n\t\t\t\t\tv_trans_y = v_prev_y;\n\t\t\t\t\tshrink_by = Math.sqrt( v_prev_lensq / 2 );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new Vector2( v_trans_x / shrink_by, v_trans_y / shrink_by );\n\n\t\t}\n\n\n\t\tvar contourMovements = [];\n\n\t\tfor ( var i = 0, il = contour.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\n\n\t\t\tif ( j === il ) j = 0;\n\t\t\tif ( k === il ) k = 0;\n\n\t\t\t//  (j)---(i)---(k)\n\t\t\t// console.log('i,j,k', i, j , k)\n\n\t\t\tcontourMovements[ i ] = getBevelVec( contour[ i ], contour[ j ], contour[ k ] );\n\n\t\t}\n\n\t\tvar holesMovements = [],\n\t\t\toneHoleMovements, verticesMovements = contourMovements.concat();\n\n\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\tahole = holes[ h ];\n\n\t\t\toneHoleMovements = [];\n\n\t\t\tfor ( i = 0, il = ahole.length, j = il - 1, k = i + 1; i < il; i ++, j ++, k ++ ) {\n\n\t\t\t\tif ( j === il ) j = 0;\n\t\t\t\tif ( k === il ) k = 0;\n\n\t\t\t\t//  (j)---(i)---(k)\n\t\t\t\toneHoleMovements[ i ] = getBevelVec( ahole[ i ], ahole[ j ], ahole[ k ] );\n\n\t\t\t}\n\n\t\t\tholesMovements.push( oneHoleMovements );\n\t\t\tverticesMovements = verticesMovements.concat( oneHoleMovements );\n\n\t\t}\n\n\n\t\t// Loop bevelSegments, 1 for the front, 1 for the back\n\n\t\tfor ( b = 0; b < bevelSegments; b ++ ) {\n\n\t\t\t//for ( b = bevelSegments; b > 0; b -- ) {\n\n\t\t\tt = b / bevelSegments;\n\t\t\tz = bevelThickness * Math.cos( t * Math.PI / 2 );\n\t\t\tbs = bevelSize * Math.sin( t * Math.PI / 2 ) + bevelOffset;\n\n\t\t\t// contract shape\n\n\t\t\tfor ( i = 0, il = contour.length; i < il; i ++ ) {\n\n\t\t\t\tvert = scalePt2( contour[ i ], contourMovements[ i ], bs );\n\n\t\t\t\tv( vert.x, vert.y, - z );\n\n\t\t\t}\n\n\t\t\t// expand holes\n\n\t\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\tahole = holes[ h ];\n\t\t\t\toneHoleMovements = holesMovements[ h ];\n\n\t\t\t\tfor ( i = 0, il = ahole.length; i < il; i ++ ) {\n\n\t\t\t\t\tvert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\n\n\t\t\t\t\tv( vert.x, vert.y, - z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tbs = bevelSize + bevelOffset;\n\n\t\t// Back facing vertices\n\n\t\tfor ( i = 0; i < vlen; i ++ ) {\n\n\t\t\tvert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\n\n\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\tv( vert.x, vert.y, 0 );\n\n\t\t\t} else {\n\n\t\t\t\t// v( vert.x, vert.y + extrudePts[ 0 ].y, extrudePts[ 0 ].x );\n\n\t\t\t\tnormal.copy( splineTube.normals[ 0 ] ).multiplyScalar( vert.x );\n\t\t\t\tbinormal.copy( splineTube.binormals[ 0 ] ).multiplyScalar( vert.y );\n\n\t\t\t\tposition2.copy( extrudePts[ 0 ] ).add( normal ).add( binormal );\n\n\t\t\t\tv( position2.x, position2.y, position2.z );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Add stepped vertices...\n\t\t// Including front facing vertices\n\n\t\tvar s;\n\n\t\tfor ( s = 1; s <= steps; s ++ ) {\n\n\t\t\tfor ( i = 0; i < vlen; i ++ ) {\n\n\t\t\t\tvert = bevelEnabled ? scalePt2( vertices[ i ], verticesMovements[ i ], bs ) : vertices[ i ];\n\n\t\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\t\tv( vert.x, vert.y, depth / steps * s );\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// v( vert.x, vert.y + extrudePts[ s - 1 ].y, extrudePts[ s - 1 ].x );\n\n\t\t\t\t\tnormal.copy( splineTube.normals[ s ] ).multiplyScalar( vert.x );\n\t\t\t\t\tbinormal.copy( splineTube.binormals[ s ] ).multiplyScalar( vert.y );\n\n\t\t\t\t\tposition2.copy( extrudePts[ s ] ).add( normal ).add( binormal );\n\n\t\t\t\t\tv( position2.x, position2.y, position2.z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\n\t\t// Add bevel segments planes\n\n\t\t//for ( b = 1; b <= bevelSegments; b ++ ) {\n\t\tfor ( b = bevelSegments - 1; b >= 0; b -- ) {\n\n\t\t\tt = b / bevelSegments;\n\t\t\tz = bevelThickness * Math.cos( t * Math.PI / 2 );\n\t\t\tbs = bevelSize * Math.sin( t * Math.PI / 2 ) + bevelOffset;\n\n\t\t\t// contract shape\n\n\t\t\tfor ( i = 0, il = contour.length; i < il; i ++ ) {\n\n\t\t\t\tvert = scalePt2( contour[ i ], contourMovements[ i ], bs );\n\t\t\t\tv( vert.x, vert.y, depth + z );\n\n\t\t\t}\n\n\t\t\t// expand holes\n\n\t\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\tahole = holes[ h ];\n\t\t\t\toneHoleMovements = holesMovements[ h ];\n\n\t\t\t\tfor ( i = 0, il = ahole.length; i < il; i ++ ) {\n\n\t\t\t\t\tvert = scalePt2( ahole[ i ], oneHoleMovements[ i ], bs );\n\n\t\t\t\t\tif ( ! extrudeByPath ) {\n\n\t\t\t\t\t\tv( vert.x, vert.y, depth + z );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tv( vert.x, vert.y + extrudePts[ steps - 1 ].y, extrudePts[ steps - 1 ].x + z );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t/* Faces */\n\n\t\t// Top and bottom faces\n\n\t\tbuildLidFaces();\n\n\t\t// Sides faces\n\n\t\tbuildSideFaces();\n\n\n\t\t/////  Internal functions\n\n\t\tfunction buildLidFaces() {\n\n\t\t\tvar start = verticesArray.length / 3;\n\n\t\t\tif ( bevelEnabled ) {\n\n\t\t\t\tvar layer = 0; // steps + 1\n\t\t\t\tvar offset = vlen * layer;\n\n\t\t\t\t// Bottom faces\n\n\t\t\t\tfor ( i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\tface = faces[ i ];\n\t\t\t\t\tf3( face[ 2 ] + offset, face[ 1 ] + offset, face[ 0 ] + offset );\n\n\t\t\t\t}\n\n\t\t\t\tlayer = steps + bevelSegments * 2;\n\t\t\t\toffset = vlen * layer;\n\n\t\t\t\t// Top faces\n\n\t\t\t\tfor ( i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\tface = faces[ i ];\n\t\t\t\t\tf3( face[ 0 ] + offset, face[ 1 ] + offset, face[ 2 ] + offset );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// Bottom faces\n\n\t\t\t\tfor ( i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\tface = faces[ i ];\n\t\t\t\t\tf3( face[ 2 ], face[ 1 ], face[ 0 ] );\n\n\t\t\t\t}\n\n\t\t\t\t// Top faces\n\n\t\t\t\tfor ( i = 0; i < flen; i ++ ) {\n\n\t\t\t\t\tface = faces[ i ];\n\t\t\t\t\tf3( face[ 0 ] + vlen * steps, face[ 1 ] + vlen * steps, face[ 2 ] + vlen * steps );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tscope.addGroup( start, verticesArray.length / 3 - start, 0 );\n\n\t\t}\n\n\t\t// Create faces for the z-sides of the shape\n\n\t\tfunction buildSideFaces() {\n\n\t\t\tvar start = verticesArray.length / 3;\n\t\t\tvar layeroffset = 0;\n\t\t\tsidewalls( contour, layeroffset );\n\t\t\tlayeroffset += contour.length;\n\n\t\t\tfor ( h = 0, hl = holes.length; h < hl; h ++ ) {\n\n\t\t\t\tahole = holes[ h ];\n\t\t\t\tsidewalls( ahole, layeroffset );\n\n\t\t\t\t//, true\n\t\t\t\tlayeroffset += ahole.length;\n\n\t\t\t}\n\n\n\t\t\tscope.addGroup( start, verticesArray.length / 3 - start, 1 );\n\n\n\t\t}\n\n\t\tfunction sidewalls( contour, layeroffset ) {\n\n\t\t\tvar j, k;\n\t\t\ti = contour.length;\n\n\t\t\twhile ( -- i >= 0 ) {\n\n\t\t\t\tj = i;\n\t\t\t\tk = i - 1;\n\t\t\t\tif ( k < 0 ) k = contour.length - 1;\n\n\t\t\t\t//console.log('b', i,j, i-1, k,vertices.length);\n\n\t\t\t\tvar s = 0,\n\t\t\t\t\tsl = steps + bevelSegments * 2;\n\n\t\t\t\tfor ( s = 0; s < sl; s ++ ) {\n\n\t\t\t\t\tvar slen1 = vlen * s;\n\t\t\t\t\tvar slen2 = vlen * ( s + 1 );\n\n\t\t\t\t\tvar a = layeroffset + j + slen1,\n\t\t\t\t\t\tb = layeroffset + k + slen1,\n\t\t\t\t\t\tc = layeroffset + k + slen2,\n\t\t\t\t\t\td = layeroffset + j + slen2;\n\n\t\t\t\t\tf4( a, b, c, d );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tfunction v( x, y, z ) {\n\n\t\t\tplaceholder.push( x );\n\t\t\tplaceholder.push( y );\n\t\t\tplaceholder.push( z );\n\n\t\t}\n\n\n\t\tfunction f3( a, b, c ) {\n\n\t\t\taddVertex( a );\n\t\t\taddVertex( b );\n\t\t\taddVertex( c );\n\n\t\t\tvar nextIndex = verticesArray.length / 3;\n\t\t\tvar uvs = uvgen.generateTopUV( scope, verticesArray, nextIndex - 3, nextIndex - 2, nextIndex - 1 );\n\n\t\t\taddUV( uvs[ 0 ] );\n\t\t\taddUV( uvs[ 1 ] );\n\t\t\taddUV( uvs[ 2 ] );\n\n\t\t}\n\n\t\tfunction f4( a, b, c, d ) {\n\n\t\t\taddVertex( a );\n\t\t\taddVertex( b );\n\t\t\taddVertex( d );\n\n\t\t\taddVertex( b );\n\t\t\taddVertex( c );\n\t\t\taddVertex( d );\n\n\n\t\t\tvar nextIndex = verticesArray.length / 3;\n\t\t\tvar uvs = uvgen.generateSideWallUV( scope, verticesArray, nextIndex - 6, nextIndex - 3, nextIndex - 2, nextIndex - 1 );\n\n\t\t\taddUV( uvs[ 0 ] );\n\t\t\taddUV( uvs[ 1 ] );\n\t\t\taddUV( uvs[ 3 ] );\n\n\t\t\taddUV( uvs[ 1 ] );\n\t\t\taddUV( uvs[ 2 ] );\n\t\t\taddUV( uvs[ 3 ] );\n\n\t\t}\n\n\t\tfunction addVertex( index ) {\n\n\t\t\tverticesArray.push( placeholder[ index * 3 + 0 ] );\n\t\t\tverticesArray.push( placeholder[ index * 3 + 1 ] );\n\t\t\tverticesArray.push( placeholder[ index * 3 + 2 ] );\n\n\t\t}\n\n\n\t\tfunction addUV( vector2 ) {\n\n\t\t\tuvArray.push( vector2.x );\n\t\t\tuvArray.push( vector2.y );\n\n\t\t}\n\n\t}\n\n}\n\nExtrudeBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nExtrudeBufferGeometry.prototype.constructor = ExtrudeBufferGeometry;\n\nExtrudeBufferGeometry.prototype.toJSON = function () {\n\n\tvar data = BufferGeometry.prototype.toJSON.call( this );\n\n\tvar shapes = this.parameters.shapes;\n\tvar options = this.parameters.options;\n\n\treturn toJSON( shapes, options, data );\n\n};\n\n//\n\nvar WorldUVGenerator = {\n\n\tgenerateTopUV: function ( geometry, vertices, indexA, indexB, indexC ) {\n\n\t\tvar a_x = vertices[ indexA * 3 ];\n\t\tvar a_y = vertices[ indexA * 3 + 1 ];\n\t\tvar b_x = vertices[ indexB * 3 ];\n\t\tvar b_y = vertices[ indexB * 3 + 1 ];\n\t\tvar c_x = vertices[ indexC * 3 ];\n\t\tvar c_y = vertices[ indexC * 3 + 1 ];\n\n\t\treturn [\n\t\t\tnew Vector2( a_x, a_y ),\n\t\t\tnew Vector2( b_x, b_y ),\n\t\t\tnew Vector2( c_x, c_y )\n\t\t];\n\n\t},\n\n\tgenerateSideWallUV: function ( geometry, vertices, indexA, indexB, indexC, indexD ) {\n\n\t\tvar a_x = vertices[ indexA * 3 ];\n\t\tvar a_y = vertices[ indexA * 3 + 1 ];\n\t\tvar a_z = vertices[ indexA * 3 + 2 ];\n\t\tvar b_x = vertices[ indexB * 3 ];\n\t\tvar b_y = vertices[ indexB * 3 + 1 ];\n\t\tvar b_z = vertices[ indexB * 3 + 2 ];\n\t\tvar c_x = vertices[ indexC * 3 ];\n\t\tvar c_y = vertices[ indexC * 3 + 1 ];\n\t\tvar c_z = vertices[ indexC * 3 + 2 ];\n\t\tvar d_x = vertices[ indexD * 3 ];\n\t\tvar d_y = vertices[ indexD * 3 + 1 ];\n\t\tvar d_z = vertices[ indexD * 3 + 2 ];\n\n\t\tif ( Math.abs( a_y - b_y ) < 0.01 ) {\n\n\t\t\treturn [\n\t\t\t\tnew Vector2( a_x, 1 - a_z ),\n\t\t\t\tnew Vector2( b_x, 1 - b_z ),\n\t\t\t\tnew Vector2( c_x, 1 - c_z ),\n\t\t\t\tnew Vector2( d_x, 1 - d_z )\n\t\t\t];\n\n\t\t} else {\n\n\t\t\treturn [\n\t\t\t\tnew Vector2( a_y, 1 - a_z ),\n\t\t\t\tnew Vector2( b_y, 1 - b_z ),\n\t\t\t\tnew Vector2( c_y, 1 - c_z ),\n\t\t\t\tnew Vector2( d_y, 1 - d_z )\n\t\t\t];\n\n\t\t}\n\n\t}\n};\n\nfunction toJSON( shapes, options, data ) {\n\n\t//\n\n\tdata.shapes = [];\n\n\tif ( Array.isArray( shapes ) ) {\n\n\t\tfor ( var i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\tvar shape = shapes[ i ];\n\n\t\t\tdata.shapes.push( shape.uuid );\n\n\t\t}\n\n\t} else {\n\n\t\tdata.shapes.push( shapes.uuid );\n\n\t}\n\n\t//\n\n\tif ( options.extrudePath !== undefined ) data.options.extrudePath = options.extrudePath.toJSON();\n\n\treturn data;\n\n}\n\n\nexport { ExtrudeGeometry, ExtrudeBufferGeometry };\n","import { Vector3 } from './Vector3.js';\nimport { Sphere } from './Sphere.js';\nimport { Plane } from './Plane.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author bhouston / http://clara.io\n */\n\nvar _sphere = new Sphere();\nvar _vector = new Vector3();\n\nfunction Frustum( p0, p1, p2, p3, p4, p5 ) {\n\n\tthis.planes = [\n\n\t\t( p0 !== undefined ) ? p0 : new Plane(),\n\t\t( p1 !== undefined ) ? p1 : new Plane(),\n\t\t( p2 !== undefined ) ? p2 : new Plane(),\n\t\t( p3 !== undefined ) ? p3 : new Plane(),\n\t\t( p4 !== undefined ) ? p4 : new Plane(),\n\t\t( p5 !== undefined ) ? p5 : new Plane()\n\n\t];\n\n}\n\nObject.assign( Frustum.prototype, {\n\n\tset: function ( p0, p1, p2, p3, p4, p5 ) {\n\n\t\tvar planes = this.planes;\n\n\t\tplanes[ 0 ].copy( p0 );\n\t\tplanes[ 1 ].copy( p1 );\n\t\tplanes[ 2 ].copy( p2 );\n\t\tplanes[ 3 ].copy( p3 );\n\t\tplanes[ 4 ].copy( p4 );\n\t\tplanes[ 5 ].copy( p5 );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( frustum ) {\n\n\t\tvar planes = this.planes;\n\n\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\tplanes[ i ].copy( frustum.planes[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromProjectionMatrix: function ( m ) {\n\n\t\tvar planes = this.planes;\n\t\tvar me = m.elements;\n\t\tvar me0 = me[ 0 ], me1 = me[ 1 ], me2 = me[ 2 ], me3 = me[ 3 ];\n\t\tvar me4 = me[ 4 ], me5 = me[ 5 ], me6 = me[ 6 ], me7 = me[ 7 ];\n\t\tvar me8 = me[ 8 ], me9 = me[ 9 ], me10 = me[ 10 ], me11 = me[ 11 ];\n\t\tvar me12 = me[ 12 ], me13 = me[ 13 ], me14 = me[ 14 ], me15 = me[ 15 ];\n\n\t\tplanes[ 0 ].setComponents( me3 - me0, me7 - me4, me11 - me8, me15 - me12 ).normalize();\n\t\tplanes[ 1 ].setComponents( me3 + me0, me7 + me4, me11 + me8, me15 + me12 ).normalize();\n\t\tplanes[ 2 ].setComponents( me3 + me1, me7 + me5, me11 + me9, me15 + me13 ).normalize();\n\t\tplanes[ 3 ].setComponents( me3 - me1, me7 - me5, me11 - me9, me15 - me13 ).normalize();\n\t\tplanes[ 4 ].setComponents( me3 - me2, me7 - me6, me11 - me10, me15 - me14 ).normalize();\n\t\tplanes[ 5 ].setComponents( me3 + me2, me7 + me6, me11 + me10, me15 + me14 ).normalize();\n\n\t\treturn this;\n\n\t},\n\n\tintersectsObject: function ( object ) {\n\n\t\tvar geometry = object.geometry;\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere.copy( geometry.boundingSphere ).applyMatrix4( object.matrixWorld );\n\n\t\treturn this.intersectsSphere( _sphere );\n\n\t},\n\n\tintersectsSprite: function ( sprite ) {\n\n\t\t_sphere.center.set( 0, 0, 0 );\n\t\t_sphere.radius = 0.7071067811865476;\n\t\t_sphere.applyMatrix4( sprite.matrixWorld );\n\n\t\treturn this.intersectsSphere( _sphere );\n\n\t},\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\tvar planes = this.planes;\n\t\tvar center = sphere.center;\n\t\tvar negRadius = - sphere.radius;\n\n\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\tvar distance = planes[ i ].distanceToPoint( center );\n\n\t\t\tif ( distance < negRadius ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\tvar planes = this.planes;\n\n\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\tvar plane = planes[ i ];\n\n\t\t\t// corner at max distance\n\n\t\t\t_vector.x = plane.normal.x > 0 ? box.max.x : box.min.x;\n\t\t\t_vector.y = plane.normal.y > 0 ? box.max.y : box.min.y;\n\t\t\t_vector.z = plane.normal.z > 0 ? box.max.z : box.min.z;\n\n\t\t\tif ( plane.distanceToPoint( _vector ) < 0 ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\tvar planes = this.planes;\n\n\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\tif ( planes[ i ].distanceToPoint( point ) < 0 ) {\n\n\t\t\t\treturn false;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn true;\n\n\t}\n\n} );\n\n\nexport { Frustum };\n","import { ShaderMaterial } from './ShaderMaterial.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction RawShaderMaterial( parameters ) {\n\n\tShaderMaterial.call( this, parameters );\n\n\tthis.type = 'RawShaderMaterial';\n\n}\n\nRawShaderMaterial.prototype = Object.create( ShaderMaterial.prototype );\nRawShaderMaterial.prototype.constructor = RawShaderMaterial;\n\nRawShaderMaterial.prototype.isRawShaderMaterial = true;\n\n\nexport { RawShaderMaterial };\n","/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author thezwap\n */\n\nvar _lut = [];\n\nfor ( var i = 0; i < 256; i ++ ) {\n\n\t_lut[ i ] = ( i < 16 ? '0' : '' ) + ( i ).toString( 16 );\n\n}\n\nvar MathUtils = {\n\n\tDEG2RAD: Math.PI / 180,\n\tRAD2DEG: 180 / Math.PI,\n\n\tgenerateUUID: function () {\n\n\t\t// http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136\n\n\t\tvar d0 = Math.random() * 0xffffffff | 0;\n\t\tvar d1 = Math.random() * 0xffffffff | 0;\n\t\tvar d2 = Math.random() * 0xffffffff | 0;\n\t\tvar d3 = Math.random() * 0xffffffff | 0;\n\t\tvar uuid = _lut[ d0 & 0xff ] + _lut[ d0 >> 8 & 0xff ] + _lut[ d0 >> 16 & 0xff ] + _lut[ d0 >> 24 & 0xff ] + '-' +\n\t\t\t_lut[ d1 & 0xff ] + _lut[ d1 >> 8 & 0xff ] + '-' + _lut[ d1 >> 16 & 0x0f | 0x40 ] + _lut[ d1 >> 24 & 0xff ] + '-' +\n\t\t\t_lut[ d2 & 0x3f | 0x80 ] + _lut[ d2 >> 8 & 0xff ] + '-' + _lut[ d2 >> 16 & 0xff ] + _lut[ d2 >> 24 & 0xff ] +\n\t\t\t_lut[ d3 & 0xff ] + _lut[ d3 >> 8 & 0xff ] + _lut[ d3 >> 16 & 0xff ] + _lut[ d3 >> 24 & 0xff ];\n\n\t\t// .toUpperCase() here flattens concatenated strings to save heap memory space.\n\t\treturn uuid.toUpperCase();\n\n\t},\n\n\tclamp: function ( value, min, max ) {\n\n\t\treturn Math.max( min, Math.min( max, value ) );\n\n\t},\n\n\t// compute euclidian modulo of m % n\n\t// https://en.wikipedia.org/wiki/Modulo_operation\n\n\teuclideanModulo: function ( n, m ) {\n\n\t\treturn ( ( n % m ) + m ) % m;\n\n\t},\n\n\t// Linear mapping from range <a1, a2> to range <b1, b2>\n\n\tmapLinear: function ( x, a1, a2, b1, b2 ) {\n\n\t\treturn b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\n\n\t},\n\n\t// https://en.wikipedia.org/wiki/Linear_interpolation\n\n\tlerp: function ( x, y, t ) {\n\n\t\treturn ( 1 - t ) * x + t * y;\n\n\t},\n\n\t// http://en.wikipedia.org/wiki/Smoothstep\n\n\tsmoothstep: function ( x, min, max ) {\n\n\t\tif ( x <= min ) return 0;\n\t\tif ( x >= max ) return 1;\n\n\t\tx = ( x - min ) / ( max - min );\n\n\t\treturn x * x * ( 3 - 2 * x );\n\n\t},\n\n\tsmootherstep: function ( x, min, max ) {\n\n\t\tif ( x <= min ) return 0;\n\t\tif ( x >= max ) return 1;\n\n\t\tx = ( x - min ) / ( max - min );\n\n\t\treturn x * x * x * ( x * ( x * 6 - 15 ) + 10 );\n\n\t},\n\n\t// Random integer from <low, high> interval\n\n\trandInt: function ( low, high ) {\n\n\t\treturn low + Math.floor( Math.random() * ( high - low + 1 ) );\n\n\t},\n\n\t// Random float from <low, high> interval\n\n\trandFloat: function ( low, high ) {\n\n\t\treturn low + Math.random() * ( high - low );\n\n\t},\n\n\t// Random float from <-range/2, range/2> interval\n\n\trandFloatSpread: function ( range ) {\n\n\t\treturn range * ( 0.5 - Math.random() );\n\n\t},\n\n\tdegToRad: function ( degrees ) {\n\n\t\treturn degrees * MathUtils.DEG2RAD;\n\n\t},\n\n\tradToDeg: function ( radians ) {\n\n\t\treturn radians * MathUtils.RAD2DEG;\n\n\t},\n\n\tisPowerOfTwo: function ( value ) {\n\n\t\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\n\n\t},\n\n\tceilPowerOfTwo: function ( value ) {\n\n\t\treturn Math.pow( 2, Math.ceil( Math.log( value ) / Math.LN2 ) );\n\n\t},\n\n\tfloorPowerOfTwo: function ( value ) {\n\n\t\treturn Math.pow( 2, Math.floor( Math.log( value ) / Math.LN2 ) );\n\n\t},\n\n\tsetQuaternionFromProperEuler: function ( q, a, b, c, order ) {\n\n\t\t// Intrinsic Proper Euler Angles - see https://en.wikipedia.org/wiki/Euler_angles\n\n\t\t// rotations are applied to the axes in the order specified by 'order'\n\t\t// rotation by angle 'a' is applied first, then by angle 'b', then by angle 'c'\n\t\t// angles are in radians\n\n\t\tvar cos = Math.cos;\n\t\tvar sin = Math.sin;\n\n\t\tvar c2 = cos( b / 2 );\n\t\tvar s2 = sin( b / 2 );\n\n\t\tvar c13 = cos( ( a + c ) / 2 );\n\t\tvar s13 = sin( ( a + c ) / 2 );\n\n\t\tvar c1_3 = cos( ( a - c ) / 2 );\n\t\tvar s1_3 = sin( ( a - c ) / 2 );\n\n\t\tvar c3_1 = cos( ( c - a ) / 2 );\n\t\tvar s3_1 = sin( ( c - a ) / 2 );\n\n\t\tif ( order === 'XYX' ) {\n\n\t\t\tq.set( c2 * s13, s2 * c1_3, s2 * s1_3, c2 * c13 );\n\n\t\t} else if ( order === 'YZY' ) {\n\n\t\t\tq.set( s2 * s1_3, c2 * s13, s2 * c1_3, c2 * c13 );\n\n\t\t} else if ( order === 'ZXZ' ) {\n\n\t\t\tq.set( s2 * c1_3, s2 * s1_3, c2 * s13, c2 * c13 );\n\n\t\t} else if ( order === 'XZX' ) {\n\n\t\t\tq.set( c2 * s13, s2 * s3_1, s2 * c3_1, c2 * c13 );\n\n\t\t} else if ( order === 'YXY' ) {\n\n\t\t\tq.set( s2 * c3_1, c2 * s13, s2 * s3_1, c2 * c13 );\n\n\t\t} else if ( order === 'ZYZ' ) {\n\n\t\t\tq.set( s2 * s3_1, s2 * c3_1, c2 * s13, c2 * c13 );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order.' );\n\n\t\t}\n\n\t}\n\n};\n\n\nexport { MathUtils };\n","import { StaticDrawUsage } from '../constants.js';\n\n/**\n * @author benaadams / https://twitter.com/ben_a_adams\n */\n\nfunction InterleavedBuffer( array, stride ) {\n\n\tthis.array = array;\n\tthis.stride = stride;\n\tthis.count = array !== undefined ? array.length / stride : 0;\n\n\tthis.usage = StaticDrawUsage;\n\tthis.updateRange = { offset: 0, count: - 1 };\n\n\tthis.version = 0;\n\n}\n\nObject.defineProperty( InterleavedBuffer.prototype, 'needsUpdate', {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\nObject.assign( InterleavedBuffer.prototype, {\n\n\tisInterleavedBuffer: true,\n\n\tonUploadCallback: function () {},\n\n\tsetUsage: function ( value ) {\n\n\t\tthis.usage = value;\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.array = new source.array.constructor( source.array );\n\t\tthis.count = source.count;\n\t\tthis.stride = source.stride;\n\t\tthis.usage = source.usage;\n\n\t\treturn this;\n\n\t},\n\n\tcopyAt: function ( index1, attribute, index2 ) {\n\n\t\tindex1 *= this.stride;\n\t\tindex2 *= attribute.stride;\n\n\t\tfor ( var i = 0, l = this.stride; i < l; i ++ ) {\n\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tset: function ( value, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.array.set( value, offset );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tonUpload: function ( callback ) {\n\n\t\tthis.onUploadCallback = callback;\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { InterleavedBuffer };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar Cache = {\n\n\tenabled: false,\n\n\tfiles: {},\n\n\tadd: function ( key, file ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\t// console.log( 'THREE.Cache', 'Adding key:', key );\n\n\t\tthis.files[ key ] = file;\n\n\t},\n\n\tget: function ( key ) {\n\n\t\tif ( this.enabled === false ) return;\n\n\t\t// console.log( 'THREE.Cache', 'Checking key:', key );\n\n\t\treturn this.files[ key ];\n\n\t},\n\n\tremove: function ( key ) {\n\n\t\tdelete this.files[ key ];\n\n\t},\n\n\tclear: function () {\n\n\t\tthis.files = {};\n\n\t}\n\n};\n\n\nexport { Cache };\n","import { KeyframeTrack } from '../KeyframeTrack.js';\n\n/**\n *\n * A Track of numeric keyframe values.\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction NumberKeyframeTrack( name, times, values, interpolation ) {\n\n\tKeyframeTrack.call( this, name, times, values, interpolation );\n\n}\n\nNumberKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: NumberKeyframeTrack,\n\n\tValueTypeName: 'number'\n\n\t// ValueBufferType is inherited\n\n\t// DefaultInterpolation is inherited\n\n} );\n\nexport { NumberKeyframeTrack };\n","import { KeyframeTrack } from '../KeyframeTrack.js';\n\n/**\n *\n * A Track of vectored keyframe values.\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction VectorKeyframeTrack( name, times, values, interpolation ) {\n\n\tKeyframeTrack.call( this, name, times, values, interpolation );\n\n}\n\nVectorKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: VectorKeyframeTrack,\n\n\tValueTypeName: 'vector'\n\n\t// ValueBufferType is inherited\n\n\t// DefaultInterpolation is inherited\n\n} );\n\nexport { VectorKeyframeTrack };\n","import { Path } from './Path.js';\nimport { MathUtils } from '../../math/MathUtils.js';\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * Defines a 2d shape plane using paths.\n **/\n\n// STEP 1 Create a path.\n// STEP 2 Turn path into shape.\n// STEP 3 ExtrudeGeometry takes in Shape/Shapes\n// STEP 3a - Extract points from each shape, turn to vertices\n// STEP 3b - Triangulate each shape, add faces.\n\nfunction Shape( points ) {\n\n\tPath.call( this, points );\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\tthis.type = 'Shape';\n\n\tthis.holes = [];\n\n}\n\nShape.prototype = Object.assign( Object.create( Path.prototype ), {\n\n\tconstructor: Shape,\n\n\tgetPointsHoles: function ( divisions ) {\n\n\t\tvar holesPts = [];\n\n\t\tfor ( var i = 0, l = this.holes.length; i < l; i ++ ) {\n\n\t\t\tholesPts[ i ] = this.holes[ i ].getPoints( divisions );\n\n\t\t}\n\n\t\treturn holesPts;\n\n\t},\n\n\t// get points of shape and holes (keypoints based on segments parameter)\n\n\textractPoints: function ( divisions ) {\n\n\t\treturn {\n\n\t\t\tshape: this.getPoints( divisions ),\n\t\t\tholes: this.getPointsHoles( divisions )\n\n\t\t};\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tPath.prototype.copy.call( this, source );\n\n\t\tthis.holes = [];\n\n\t\tfor ( var i = 0, l = source.holes.length; i < l; i ++ ) {\n\n\t\t\tvar hole = source.holes[ i ];\n\n\t\t\tthis.holes.push( hole.clone() );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar data = Path.prototype.toJSON.call( this );\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.holes = [];\n\n\t\tfor ( var i = 0, l = this.holes.length; i < l; i ++ ) {\n\n\t\t\tvar hole = this.holes[ i ];\n\t\t\tdata.holes.push( hole.toJSON() );\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tfromJSON: function ( json ) {\n\n\t\tPath.prototype.fromJSON.call( this, json );\n\n\t\tthis.uuid = json.uuid;\n\t\tthis.holes = [];\n\n\t\tfor ( var i = 0, l = json.holes.length; i < l; i ++ ) {\n\n\t\t\tvar hole = json.holes[ i ];\n\t\t\tthis.holes.push( new Path().fromJSON( hole ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Shape };\n","import { EllipseCurve } from './EllipseCurve.js';\n\n\nfunction ArcCurve( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\tEllipseCurve.call( this, aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\n\n\tthis.type = 'ArcCurve';\n\n}\n\nArcCurve.prototype = Object.create( EllipseCurve.prototype );\nArcCurve.prototype.constructor = ArcCurve;\n\nArcCurve.prototype.isArcCurve = true;\n\n\nexport { ArcCurve };\n","import { Curve } from '../core/Curve.js';\nimport { CubicBezier } from '../core/Interpolations.js';\nimport { Vector3 } from '../../math/Vector3.js';\n\n\nfunction CubicBezierCurve3( v0, v1, v2, v3 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'CubicBezierCurve3';\n\n\tthis.v0 = v0 || new Vector3();\n\tthis.v1 = v1 || new Vector3();\n\tthis.v2 = v2 || new Vector3();\n\tthis.v3 = v3 || new Vector3();\n\n}\n\nCubicBezierCurve3.prototype = Object.create( Curve.prototype );\nCubicBezierCurve3.prototype.constructor = CubicBezierCurve3;\n\nCubicBezierCurve3.prototype.isCubicBezierCurve3 = true;\n\nCubicBezierCurve3.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new Vector3();\n\n\tvar v0 = this.v0, v1 = this.v1, v2 = this.v2, v3 = this.v3;\n\n\tpoint.set(\n\t\tCubicBezier( t, v0.x, v1.x, v2.x, v3.x ),\n\t\tCubicBezier( t, v0.y, v1.y, v2.y, v3.y ),\n\t\tCubicBezier( t, v0.z, v1.z, v2.z, v3.z )\n\t);\n\n\treturn point;\n\n};\n\nCubicBezierCurve3.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v0.copy( source.v0 );\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\tthis.v3.copy( source.v3 );\n\n\treturn this;\n\n};\n\nCubicBezierCurve3.prototype.toJSON = function () {\n\n\tvar data = Curve.prototype.toJSON.call( this );\n\n\tdata.v0 = this.v0.toArray();\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\tdata.v3 = this.v3.toArray();\n\n\treturn data;\n\n};\n\nCubicBezierCurve3.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v0.fromArray( json.v0 );\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\tthis.v3.fromArray( json.v3 );\n\n\treturn this;\n\n};\n\n\nexport { CubicBezierCurve3 };\n","import { Vector3 } from '../../math/Vector3.js';\nimport { Curve } from '../core/Curve.js';\n\n\nfunction LineCurve3( v1, v2 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'LineCurve3';\n\n\tthis.v1 = v1 || new Vector3();\n\tthis.v2 = v2 || new Vector3();\n\n}\n\nLineCurve3.prototype = Object.create( Curve.prototype );\nLineCurve3.prototype.constructor = LineCurve3;\n\nLineCurve3.prototype.isLineCurve3 = true;\n\nLineCurve3.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new Vector3();\n\n\tif ( t === 1 ) {\n\n\t\tpoint.copy( this.v2 );\n\n\t} else {\n\n\t\tpoint.copy( this.v2 ).sub( this.v1 );\n\t\tpoint.multiplyScalar( t ).add( this.v1 );\n\n\t}\n\n\treturn point;\n\n};\n\n// Line curve is linear, so we can overwrite default getPointAt\n\nLineCurve3.prototype.getPointAt = function ( u, optionalTarget ) {\n\n\treturn this.getPoint( u, optionalTarget );\n\n};\n\nLineCurve3.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\n\treturn this;\n\n};\n\nLineCurve3.prototype.toJSON = function () {\n\n\tvar data = Curve.prototype.toJSON.call( this );\n\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\n\treturn data;\n\n};\n\nLineCurve3.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\n\treturn this;\n\n};\n\n\nexport { LineCurve3 };\n","import { Curve } from '../core/Curve.js';\nimport { QuadraticBezier } from '../core/Interpolations.js';\nimport { Vector3 } from '../../math/Vector3.js';\n\n\nfunction QuadraticBezierCurve3( v0, v1, v2 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'QuadraticBezierCurve3';\n\n\tthis.v0 = v0 || new Vector3();\n\tthis.v1 = v1 || new Vector3();\n\tthis.v2 = v2 || new Vector3();\n\n}\n\nQuadraticBezierCurve3.prototype = Object.create( Curve.prototype );\nQuadraticBezierCurve3.prototype.constructor = QuadraticBezierCurve3;\n\nQuadraticBezierCurve3.prototype.isQuadraticBezierCurve3 = true;\n\nQuadraticBezierCurve3.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new Vector3();\n\n\tvar v0 = this.v0, v1 = this.v1, v2 = this.v2;\n\n\tpoint.set(\n\t\tQuadraticBezier( t, v0.x, v1.x, v2.x ),\n\t\tQuadraticBezier( t, v0.y, v1.y, v2.y ),\n\t\tQuadraticBezier( t, v0.z, v1.z, v2.z )\n\t);\n\n\treturn point;\n\n};\n\nQuadraticBezierCurve3.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v0.copy( source.v0 );\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\n\treturn this;\n\n};\n\nQuadraticBezierCurve3.prototype.toJSON = function () {\n\n\tvar data = Curve.prototype.toJSON.call( this );\n\n\tdata.v0 = this.v0.toArray();\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\n\treturn data;\n\n};\n\nQuadraticBezierCurve3.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v0.fromArray( json.v0 );\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\n\treturn this;\n\n};\n\n\nexport { QuadraticBezierCurve3 };\n","import { Vector3 } from './Vector3.js';\n\nvar _v1 = new Vector3();\nvar _m1 = new Matrix4();\nvar _zero = new Vector3( 0, 0, 0 );\nvar _one = new Vector3( 1, 1, 1 );\nvar _x = new Vector3();\nvar _y = new Vector3();\nvar _z = new Vector3();\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author philogb / http://blog.thejit.org/\n * @author jordi_ros / http://plattsoft.com\n * @author D1plo1d / http://github.com/D1plo1d\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author timknip / http://www.floorplanner.com/\n * @author bhouston / http://clara.io\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction Matrix4() {\n\n\tthis.elements = [\n\n\t\t1, 0, 0, 0,\n\t\t0, 1, 0, 0,\n\t\t0, 0, 1, 0,\n\t\t0, 0, 0, 1\n\n\t];\n\n\tif ( arguments.length > 0 ) {\n\n\t\tconsole.error( 'THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.' );\n\n\t}\n\n}\n\nObject.assign( Matrix4.prototype, {\n\n\tisMatrix4: true,\n\n\tset: function ( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\n\t\tte[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\n\t\tte[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\n\t\tte[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\n\n\t\treturn this;\n\n\t},\n\n\tidentity: function () {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new Matrix4().fromArray( this.elements );\n\n\t},\n\n\tcopy: function ( m ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ]; te[ 3 ] = me[ 3 ];\n\t\tte[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ]; te[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ];\n\t\tte[ 8 ] = me[ 8 ]; te[ 9 ] = me[ 9 ]; te[ 10 ] = me[ 10 ]; te[ 11 ] = me[ 11 ];\n\t\tte[ 12 ] = me[ 12 ]; te[ 13 ] = me[ 13 ]; te[ 14 ] = me[ 14 ]; te[ 15 ] = me[ 15 ];\n\n\t\treturn this;\n\n\t},\n\n\tcopyPosition: function ( m ) {\n\n\t\tvar te = this.elements, me = m.elements;\n\n\t\tte[ 12 ] = me[ 12 ];\n\t\tte[ 13 ] = me[ 13 ];\n\t\tte[ 14 ] = me[ 14 ];\n\n\t\treturn this;\n\n\t},\n\n\textractBasis: function ( xAxis, yAxis, zAxis ) {\n\n\t\txAxis.setFromMatrixColumn( this, 0 );\n\t\tyAxis.setFromMatrixColumn( this, 1 );\n\t\tzAxis.setFromMatrixColumn( this, 2 );\n\n\t\treturn this;\n\n\t},\n\n\tmakeBasis: function ( xAxis, yAxis, zAxis ) {\n\n\t\tthis.set(\n\t\t\txAxis.x, yAxis.x, zAxis.x, 0,\n\t\t\txAxis.y, yAxis.y, zAxis.y, 0,\n\t\t\txAxis.z, yAxis.z, zAxis.z, 0,\n\t\t\t0, 0, 0, 1\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\textractRotation: function ( m ) {\n\n\t\t// this method does not support reflection matrices\n\n\t\tvar te = this.elements;\n\t\tvar me = m.elements;\n\n\t\tvar scaleX = 1 / _v1.setFromMatrixColumn( m, 0 ).length();\n\t\tvar scaleY = 1 / _v1.setFromMatrixColumn( m, 1 ).length();\n\t\tvar scaleZ = 1 / _v1.setFromMatrixColumn( m, 2 ).length();\n\n\t\tte[ 0 ] = me[ 0 ] * scaleX;\n\t\tte[ 1 ] = me[ 1 ] * scaleX;\n\t\tte[ 2 ] = me[ 2 ] * scaleX;\n\t\tte[ 3 ] = 0;\n\n\t\tte[ 4 ] = me[ 4 ] * scaleY;\n\t\tte[ 5 ] = me[ 5 ] * scaleY;\n\t\tte[ 6 ] = me[ 6 ] * scaleY;\n\t\tte[ 7 ] = 0;\n\n\t\tte[ 8 ] = me[ 8 ] * scaleZ;\n\t\tte[ 9 ] = me[ 9 ] * scaleZ;\n\t\tte[ 10 ] = me[ 10 ] * scaleZ;\n\t\tte[ 11 ] = 0;\n\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationFromEuler: function ( euler ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tconsole.error( 'THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\tvar te = this.elements;\n\n\t\tvar x = euler.x, y = euler.y, z = euler.z;\n\t\tvar a = Math.cos( x ), b = Math.sin( x );\n\t\tvar c = Math.cos( y ), d = Math.sin( y );\n\t\tvar e = Math.cos( z ), f = Math.sin( z );\n\n\t\tif ( euler.order === 'XYZ' ) {\n\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - c * f;\n\t\t\tte[ 8 ] = d;\n\n\t\t\tte[ 1 ] = af + be * d;\n\t\t\tte[ 5 ] = ae - bf * d;\n\t\t\tte[ 9 ] = - b * c;\n\n\t\t\tte[ 2 ] = bf - ae * d;\n\t\t\tte[ 6 ] = be + af * d;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YXZ' ) {\n\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce + df * b;\n\t\t\tte[ 4 ] = de * b - cf;\n\t\t\tte[ 8 ] = a * d;\n\n\t\t\tte[ 1 ] = a * f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b;\n\n\t\t\tte[ 2 ] = cf * b - de;\n\t\t\tte[ 6 ] = df + ce * b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZXY' ) {\n\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce - df * b;\n\t\t\tte[ 4 ] = - a * f;\n\t\t\tte[ 8 ] = de + cf * b;\n\n\t\t\tte[ 1 ] = cf + de * b;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = df - ce * b;\n\n\t\t\tte[ 2 ] = - a * d;\n\t\t\tte[ 6 ] = b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZYX' ) {\n\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = be * d - af;\n\t\t\tte[ 8 ] = ae * d + bf;\n\n\t\t\tte[ 1 ] = c * f;\n\t\t\tte[ 5 ] = bf * d + ae;\n\t\t\tte[ 9 ] = af * d - be;\n\n\t\t\tte[ 2 ] = - d;\n\t\t\tte[ 6 ] = b * c;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YZX' ) {\n\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = bd - ac * f;\n\t\t\tte[ 8 ] = bc * f + ad;\n\n\t\t\tte[ 1 ] = f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b * e;\n\n\t\t\tte[ 2 ] = - d * e;\n\t\t\tte[ 6 ] = ad * f + bc;\n\t\t\tte[ 10 ] = ac - bd * f;\n\n\t\t} else if ( euler.order === 'XZY' ) {\n\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - f;\n\t\t\tte[ 8 ] = d * e;\n\n\t\t\tte[ 1 ] = ac * f + bd;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = ad * f - bc;\n\n\t\t\tte[ 2 ] = bc * f - ad;\n\t\t\tte[ 6 ] = b * e;\n\t\t\tte[ 10 ] = bd * f + ac;\n\n\t\t}\n\n\t\t// bottom row\n\t\tte[ 3 ] = 0;\n\t\tte[ 7 ] = 0;\n\t\tte[ 11 ] = 0;\n\n\t\t// last column\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationFromQuaternion: function ( q ) {\n\n\t\treturn this.compose( _zero, q, _one );\n\n\t},\n\n\tlookAt: function ( eye, target, up ) {\n\n\t\tvar te = this.elements;\n\n\t\t_z.subVectors( eye, target );\n\n\t\tif ( _z.lengthSq() === 0 ) {\n\n\t\t\t// eye and target are in the same position\n\n\t\t\t_z.z = 1;\n\n\t\t}\n\n\t\t_z.normalize();\n\t\t_x.crossVectors( up, _z );\n\n\t\tif ( _x.lengthSq() === 0 ) {\n\n\t\t\t// up and z are parallel\n\n\t\t\tif ( Math.abs( up.z ) === 1 ) {\n\n\t\t\t\t_z.x += 0.0001;\n\n\t\t\t} else {\n\n\t\t\t\t_z.z += 0.0001;\n\n\t\t\t}\n\n\t\t\t_z.normalize();\n\t\t\t_x.crossVectors( up, _z );\n\n\t\t}\n\n\t\t_x.normalize();\n\t\t_y.crossVectors( _z, _x );\n\n\t\tte[ 0 ] = _x.x; te[ 4 ] = _y.x; te[ 8 ] = _z.x;\n\t\tte[ 1 ] = _x.y; te[ 5 ] = _y.y; te[ 9 ] = _z.y;\n\t\tte[ 2 ] = _x.z; te[ 6 ] = _y.z; te[ 10 ] = _z.z;\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( m, n ) {\n\n\t\tif ( n !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.' );\n\t\t\treturn this.multiplyMatrices( m, n );\n\n\t\t}\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t},\n\n\tpremultiply: function ( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t},\n\n\tmultiplyMatrices: function ( a, b ) {\n\n\t\tvar ae = a.elements;\n\t\tvar be = b.elements;\n\t\tvar te = this.elements;\n\n\t\tvar a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\n\t\tvar a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\n\t\tvar a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\n\t\tvar a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\n\n\t\tvar b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\n\t\tvar b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\n\t\tvar b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\n\t\tvar b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\n\t\tte[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\n\t\tte[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\n\t\tte[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\n\t\tte[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\n\t\tte[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\n\t\tte[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\n\t\tte[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\n\t\tte[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\n\t\tte[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\n\n\t\tte[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\n\t\tte[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\n\t\tte[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\n\t\tte[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\n\t\tte[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\n\t\tte[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\n\t\tte[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\n\n\t\treturn this;\n\n\t},\n\n\tdeterminant: function () {\n\n\t\tvar te = this.elements;\n\n\t\tvar n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\n\t\tvar n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\n\t\tvar n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\n\t\tvar n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\n\n\t\t//TODO: make this more efficient\n\t\t//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\n\n\t\treturn (\n\t\t\tn41 * (\n\t\t\t\t+ n14 * n23 * n32\n\t\t\t\t - n13 * n24 * n32\n\t\t\t\t - n14 * n22 * n33\n\t\t\t\t + n12 * n24 * n33\n\t\t\t\t + n13 * n22 * n34\n\t\t\t\t - n12 * n23 * n34\n\t\t\t) +\n\t\t\tn42 * (\n\t\t\t\t+ n11 * n23 * n34\n\t\t\t\t - n11 * n24 * n33\n\t\t\t\t + n14 * n21 * n33\n\t\t\t\t - n13 * n21 * n34\n\t\t\t\t + n13 * n24 * n31\n\t\t\t\t - n14 * n23 * n31\n\t\t\t) +\n\t\t\tn43 * (\n\t\t\t\t+ n11 * n24 * n32\n\t\t\t\t - n11 * n22 * n34\n\t\t\t\t - n14 * n21 * n32\n\t\t\t\t + n12 * n21 * n34\n\t\t\t\t + n14 * n22 * n31\n\t\t\t\t - n12 * n24 * n31\n\t\t\t) +\n\t\t\tn44 * (\n\t\t\t\t- n13 * n22 * n31\n\t\t\t\t - n11 * n23 * n32\n\t\t\t\t + n11 * n22 * n33\n\t\t\t\t + n13 * n21 * n32\n\t\t\t\t - n12 * n21 * n33\n\t\t\t\t + n12 * n23 * n31\n\t\t\t)\n\n\t\t);\n\n\t},\n\n\ttranspose: function () {\n\n\t\tvar te = this.elements;\n\t\tvar tmp;\n\n\t\ttmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\n\t\ttmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\n\t\ttmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\n\n\t\ttmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\n\t\ttmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\n\t\ttmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\n\n\t\treturn this;\n\n\t},\n\n\tsetPosition: function ( x, y, z ) {\n\n\t\tvar te = this.elements;\n\n\t\tif ( x.isVector3 ) {\n\n\t\t\tte[ 12 ] = x.x;\n\t\t\tte[ 13 ] = x.y;\n\t\t\tte[ 14 ] = x.z;\n\n\t\t} else {\n\n\t\t\tte[ 12 ] = x;\n\t\t\tte[ 13 ] = y;\n\t\t\tte[ 14 ] = z;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetInverse: function ( m, throwOnDegenerate ) {\n\n\t\tif ( throwOnDegenerate !== undefined ) {\n\n\t\t\tconsole.warn( \"THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.\" );\n\n\t\t}\n\n\t\t// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\n\t\tvar te = this.elements,\n\t\t\tme = m.elements,\n\n\t\t\tn11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ], n41 = me[ 3 ],\n\t\t\tn12 = me[ 4 ], n22 = me[ 5 ], n32 = me[ 6 ], n42 = me[ 7 ],\n\t\t\tn13 = me[ 8 ], n23 = me[ 9 ], n33 = me[ 10 ], n43 = me[ 11 ],\n\t\t\tn14 = me[ 12 ], n24 = me[ 13 ], n34 = me[ 14 ], n44 = me[ 15 ],\n\n\t\t\tt11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44,\n\t\t\tt12 = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44,\n\t\t\tt13 = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44,\n\t\t\tt14 = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\n\n\t\tvar det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\n\n\t\tif ( det === 0 ) return this.set( 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 );\n\n\t\tvar detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44 ) * detInv;\n\t\tte[ 2 ] = ( n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44 ) * detInv;\n\t\tte[ 3 ] = ( n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43 ) * detInv;\n\n\t\tte[ 4 ] = t12 * detInv;\n\t\tte[ 5 ] = ( n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44 ) * detInv;\n\t\tte[ 6 ] = ( n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44 ) * detInv;\n\t\tte[ 7 ] = ( n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43 ) * detInv;\n\n\t\tte[ 8 ] = t13 * detInv;\n\t\tte[ 9 ] = ( n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44 ) * detInv;\n\t\tte[ 10 ] = ( n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44 ) * detInv;\n\t\tte[ 11 ] = ( n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43 ) * detInv;\n\n\t\tte[ 12 ] = t14 * detInv;\n\t\tte[ 13 ] = ( n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34 ) * detInv;\n\t\tte[ 14 ] = ( n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34 ) * detInv;\n\t\tte[ 15 ] = ( n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33 ) * detInv;\n\n\t\treturn this;\n\n\t},\n\n\tscale: function ( v ) {\n\n\t\tvar te = this.elements;\n\t\tvar x = v.x, y = v.y, z = v.z;\n\n\t\tte[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\n\t\tte[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\n\t\tte[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\n\t\tte[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\n\n\t\treturn this;\n\n\t},\n\n\tgetMaxScaleOnAxis: function () {\n\n\t\tvar te = this.elements;\n\n\t\tvar scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\n\t\tvar scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\n\t\tvar scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\n\n\t\treturn Math.sqrt( Math.max( scaleXSq, scaleYSq, scaleZSq ) );\n\n\t},\n\n\tmakeTranslation: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, x,\n\t\t\t0, 1, 0, y,\n\t\t\t0, 0, 1, z,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationX: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, c, - s, 0,\n\t\t\t0, s, c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationY: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t c, 0, s, 0,\n\t\t\t 0, 1, 0, 0,\n\t\t\t- s, 0, c, 0,\n\t\t\t 0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationZ: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\tc, - s, 0, 0,\n\t\t\ts, c, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationAxis: function ( axis, angle ) {\n\n\t\t// Based on http://www.gamedev.net/reference/articles/article1199.asp\n\n\t\tvar c = Math.cos( angle );\n\t\tvar s = Math.sin( angle );\n\t\tvar t = 1 - c;\n\t\tvar x = axis.x, y = axis.y, z = axis.z;\n\t\tvar tx = t * x, ty = t * y;\n\n\t\tthis.set(\n\n\t\t\ttx * x + c, tx * y - s * z, tx * z + s * y, 0,\n\t\t\ttx * y + s * z, ty * y + c, ty * z - s * x, 0,\n\t\t\ttx * z - s * y, ty * z + s * x, t * z * z + c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\t return this;\n\n\t},\n\n\tmakeScale: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\tx, 0, 0, 0,\n\t\t\t0, y, 0, 0,\n\t\t\t0, 0, z, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeShear: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\t1, y, z, 0,\n\t\t\tx, 1, z, 0,\n\t\t\tx, y, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tcompose: function ( position, quaternion, scale ) {\n\n\t\tvar te = this.elements;\n\n\t\tvar x = quaternion._x, y = quaternion._y, z = quaternion._z, w = quaternion._w;\n\t\tvar x2 = x + x,\ty2 = y + y, z2 = z + z;\n\t\tvar xx = x * x2, xy = x * y2, xz = x * z2;\n\t\tvar yy = y * y2, yz = y * z2, zz = z * z2;\n\t\tvar wx = w * x2, wy = w * y2, wz = w * z2;\n\n\t\tvar sx = scale.x, sy = scale.y, sz = scale.z;\n\n\t\tte[ 0 ] = ( 1 - ( yy + zz ) ) * sx;\n\t\tte[ 1 ] = ( xy + wz ) * sx;\n\t\tte[ 2 ] = ( xz - wy ) * sx;\n\t\tte[ 3 ] = 0;\n\n\t\tte[ 4 ] = ( xy - wz ) * sy;\n\t\tte[ 5 ] = ( 1 - ( xx + zz ) ) * sy;\n\t\tte[ 6 ] = ( yz + wx ) * sy;\n\t\tte[ 7 ] = 0;\n\n\t\tte[ 8 ] = ( xz + wy ) * sz;\n\t\tte[ 9 ] = ( yz - wx ) * sz;\n\t\tte[ 10 ] = ( 1 - ( xx + yy ) ) * sz;\n\t\tte[ 11 ] = 0;\n\n\t\tte[ 12 ] = position.x;\n\t\tte[ 13 ] = position.y;\n\t\tte[ 14 ] = position.z;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tdecompose: function ( position, quaternion, scale ) {\n\n\t\tvar te = this.elements;\n\n\t\tvar sx = _v1.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\n\t\tvar sy = _v1.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\n\t\tvar sz = _v1.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\n\n\t\t// if determine is negative, we need to invert one scale\n\t\tvar det = this.determinant();\n\t\tif ( det < 0 ) sx = - sx;\n\n\t\tposition.x = te[ 12 ];\n\t\tposition.y = te[ 13 ];\n\t\tposition.z = te[ 14 ];\n\n\t\t// scale the rotation part\n\t\t_m1.copy( this );\n\n\t\tvar invSX = 1 / sx;\n\t\tvar invSY = 1 / sy;\n\t\tvar invSZ = 1 / sz;\n\n\t\t_m1.elements[ 0 ] *= invSX;\n\t\t_m1.elements[ 1 ] *= invSX;\n\t\t_m1.elements[ 2 ] *= invSX;\n\n\t\t_m1.elements[ 4 ] *= invSY;\n\t\t_m1.elements[ 5 ] *= invSY;\n\t\t_m1.elements[ 6 ] *= invSY;\n\n\t\t_m1.elements[ 8 ] *= invSZ;\n\t\t_m1.elements[ 9 ] *= invSZ;\n\t\t_m1.elements[ 10 ] *= invSZ;\n\n\t\tquaternion.setFromRotationMatrix( _m1 );\n\n\t\tscale.x = sx;\n\t\tscale.y = sy;\n\t\tscale.z = sz;\n\n\t\treturn this;\n\n\t},\n\n\tmakePerspective: function ( left, right, top, bottom, near, far ) {\n\n\t\tif ( far === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.' );\n\n\t\t}\n\n\t\tvar te = this.elements;\n\t\tvar x = 2 * near / ( right - left );\n\t\tvar y = 2 * near / ( top - bottom );\n\n\t\tvar a = ( right + left ) / ( right - left );\n\t\tvar b = ( top + bottom ) / ( top - bottom );\n\t\tvar c = - ( far + near ) / ( far - near );\n\t\tvar d = - 2 * far * near / ( far - near );\n\n\t\tte[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a;\tte[ 12 ] = 0;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b;\tte[ 13 ] = 0;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c;\tte[ 14 ] = d;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\n\n\t\treturn this;\n\n\t},\n\n\tmakeOrthographic: function ( left, right, top, bottom, near, far ) {\n\n\t\tvar te = this.elements;\n\t\tvar w = 1.0 / ( right - left );\n\t\tvar h = 1.0 / ( top - bottom );\n\t\tvar p = 1.0 / ( far - near );\n\n\t\tvar x = ( right + left ) * w;\n\t\tvar y = ( top + bottom ) * h;\n\t\tvar z = ( far + near ) * p;\n\n\t\tte[ 0 ] = 2 * w;\tte[ 4 ] = 0;\tte[ 8 ] = 0;\tte[ 12 ] = - x;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = 2 * h;\tte[ 9 ] = 0;\tte[ 13 ] = - y;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = - 2 * p;\tte[ 14 ] = - z;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = 0;\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( matrix ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = matrix.elements;\n\n\t\tfor ( var i = 0; i < 16; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tfor ( var i = 0; i < 16; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tvar te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\t\tarray[ offset + 9 ] = te[ 9 ];\n\t\tarray[ offset + 10 ] = te[ 10 ];\n\t\tarray[ offset + 11 ] = te[ 11 ];\n\n\t\tarray[ offset + 12 ] = te[ 12 ];\n\t\tarray[ offset + 13 ] = te[ 13 ];\n\t\tarray[ offset + 14 ] = te[ 14 ];\n\t\tarray[ offset + 15 ] = te[ 15 ];\n\n\t\treturn array;\n\n\t}\n\n} );\n\n\nexport { Matrix4 };\n","import { Material } from './Material.js';\nimport { MultiplyOperation } from '../constants.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.Multiply,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshLambertMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshLambertMaterial';\n\n\tthis.color = new Color( 0xffffff ); // diffuse\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.emissive = new Color( 0x000000 );\n\tthis.emissiveIntensity = 1.0;\n\tthis.emissiveMap = null;\n\n\tthis.specularMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.combine = MultiplyOperation;\n\tthis.reflectivity = 1;\n\tthis.refractionRatio = 0.98;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshLambertMaterial.prototype = Object.create( Material.prototype );\nMeshLambertMaterial.prototype.constructor = MeshLambertMaterial;\n\nMeshLambertMaterial.prototype.isMeshLambertMaterial = true;\n\nMeshLambertMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.map = source.map;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.emissive.copy( source.emissive );\n\tthis.emissiveMap = source.emissiveMap;\n\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\tthis.specularMap = source.specularMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.envMap = source.envMap;\n\tthis.combine = source.combine;\n\tthis.reflectivity = source.reflectivity;\n\tthis.refractionRatio = source.refractionRatio;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n\nexport { MeshLambertMaterial };\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author benaadams / https://twitter.com/ben_a_adams\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { Vector3 } from '../math/Vector3.js';\n\n// SphereGeometry\n\nfunction SphereGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'SphereGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments,\n\t\tphiStart: phiStart,\n\t\tphiLength: phiLength,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tthis.fromBufferGeometry( new SphereBufferGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) );\n\tthis.mergeVertices();\n\n}\n\nSphereGeometry.prototype = Object.create( Geometry.prototype );\nSphereGeometry.prototype.constructor = SphereGeometry;\n\n// SphereBufferGeometry\n\nfunction SphereBufferGeometry( radius, widthSegments, heightSegments, phiStart, phiLength, thetaStart, thetaLength ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'SphereBufferGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments,\n\t\tphiStart: phiStart,\n\t\tphiLength: phiLength,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tradius = radius || 1;\n\n\twidthSegments = Math.max( 3, Math.floor( widthSegments ) || 8 );\n\theightSegments = Math.max( 2, Math.floor( heightSegments ) || 6 );\n\n\tphiStart = phiStart !== undefined ? phiStart : 0;\n\tphiLength = phiLength !== undefined ? phiLength : Math.PI * 2;\n\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI;\n\n\tvar thetaEnd = Math.min( thetaStart + thetaLength, Math.PI );\n\n\tvar ix, iy;\n\n\tvar index = 0;\n\tvar grid = [];\n\n\tvar vertex = new Vector3();\n\tvar normal = new Vector3();\n\n\t// buffers\n\n\tvar indices = [];\n\tvar vertices = [];\n\tvar normals = [];\n\tvar uvs = [];\n\n\t// generate vertices, normals and uvs\n\n\tfor ( iy = 0; iy <= heightSegments; iy ++ ) {\n\n\t\tvar verticesRow = [];\n\n\t\tvar v = iy / heightSegments;\n\n\t\t// special case for the poles\n\n\t\tvar uOffset = 0;\n\n\t\tif ( iy == 0 && thetaStart == 0 ) {\n\n\t\t\tuOffset = 0.5 / widthSegments;\n\n\t\t} else if ( iy == heightSegments && thetaEnd == Math.PI ) {\n\n\t\t\tuOffset = - 0.5 / widthSegments;\n\n\t\t}\n\n\t\tfor ( ix = 0; ix <= widthSegments; ix ++ ) {\n\n\t\t\tvar u = ix / widthSegments;\n\n\t\t\t// vertex\n\n\t\t\tvertex.x = - radius * Math.cos( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\n\t\t\tvertex.y = radius * Math.cos( thetaStart + v * thetaLength );\n\t\t\tvertex.z = radius * Math.sin( phiStart + u * phiLength ) * Math.sin( thetaStart + v * thetaLength );\n\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t// normal\n\n\t\t\tnormal.copy( vertex ).normalize();\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t// uv\n\n\t\t\tuvs.push( u + uOffset, 1 - v );\n\n\t\t\tverticesRow.push( index ++ );\n\n\t\t}\n\n\t\tgrid.push( verticesRow );\n\n\t}\n\n\t// indices\n\n\tfor ( iy = 0; iy < heightSegments; iy ++ ) {\n\n\t\tfor ( ix = 0; ix < widthSegments; ix ++ ) {\n\n\t\t\tvar a = grid[ iy ][ ix + 1 ];\n\t\t\tvar b = grid[ iy ][ ix ];\n\t\t\tvar c = grid[ iy + 1 ][ ix ];\n\t\t\tvar d = grid[ iy + 1 ][ ix + 1 ];\n\n\t\t\tif ( iy !== 0 || thetaStart > 0 ) indices.push( a, b, d );\n\t\t\tif ( iy !== heightSegments - 1 || thetaEnd < Math.PI ) indices.push( b, c, d );\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n}\n\nSphereBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nSphereBufferGeometry.prototype.constructor = SphereBufferGeometry;\n\n\nexport { SphereGeometry, SphereBufferGeometry };\n","import { LightShadow } from './LightShadow.js';\nimport { OrthographicCamera } from '../cameras/OrthographicCamera.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction DirectionalLightShadow() {\n\n\tLightShadow.call( this, new OrthographicCamera( - 5, 5, 5, - 5, 0.5, 500 ) );\n\n}\n\nDirectionalLightShadow.prototype = Object.assign( Object.create( LightShadow.prototype ), {\n\n\tconstructor: DirectionalLightShadow,\n\n\tisDirectionalLightShadow: true,\n\n\tupdateMatrices: function ( light ) {\n\n\t\tLightShadow.prototype.updateMatrices.call( this, light );\n\n\t}\n\n} );\n\n\nexport { DirectionalLightShadow };\n","import { Light } from './Light.js';\nimport { DirectionalLightShadow } from './DirectionalLightShadow.js';\nimport { Object3D } from '../core/Object3D.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction DirectionalLight( color, intensity ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'DirectionalLight';\n\n\tthis.position.copy( Object3D.DefaultUp );\n\tthis.updateMatrix();\n\n\tthis.target = new Object3D();\n\n\tthis.shadow = new DirectionalLightShadow();\n\n}\n\nDirectionalLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: DirectionalLight,\n\n\tisDirectionalLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.target = source.target.clone();\n\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { DirectionalLight };\n","import { LightShadow } from './LightShadow.js';\nimport { PerspectiveCamera } from '../cameras/PerspectiveCamera.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Vector4 } from '../math/Vector4.js';\n\nfunction PointLightShadow() {\n\n\tLightShadow.call( this, new PerspectiveCamera( 90, 1, 0.5, 500 ) );\n\n\tthis._frameExtents = new Vector2( 4, 2 );\n\n\tthis._viewportCount = 6;\n\n\tthis._viewports = [\n\t\t// These viewports map a cube-map onto a 2D texture with the\n\t\t// following orientation:\n\t\t//\n\t\t//  xzXZ\n\t\t//   y Y\n\t\t//\n\t\t// X - Positive x direction\n\t\t// x - Negative x direction\n\t\t// Y - Positive y direction\n\t\t// y - Negative y direction\n\t\t// Z - Positive z direction\n\t\t// z - Negative z direction\n\n\t\t// positive X\n\t\tnew Vector4( 2, 1, 1, 1 ),\n\t\t// negative X\n\t\tnew Vector4( 0, 1, 1, 1 ),\n\t\t// positive Z\n\t\tnew Vector4( 3, 1, 1, 1 ),\n\t\t// negative Z\n\t\tnew Vector4( 1, 1, 1, 1 ),\n\t\t// positive Y\n\t\tnew Vector4( 3, 0, 1, 1 ),\n\t\t// negative Y\n\t\tnew Vector4( 1, 0, 1, 1 )\n\t];\n\n\tthis._cubeDirections = [\n\t\tnew Vector3( 1, 0, 0 ), new Vector3( - 1, 0, 0 ), new Vector3( 0, 0, 1 ),\n\t\tnew Vector3( 0, 0, - 1 ), new Vector3( 0, 1, 0 ), new Vector3( 0, - 1, 0 )\n\t];\n\n\tthis._cubeUps = [\n\t\tnew Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ), new Vector3( 0, 1, 0 ),\n\t\tnew Vector3( 0, 1, 0 ), new Vector3( 0, 0, 1 ),\tnew Vector3( 0, 0, - 1 )\n\t];\n\n}\n\nPointLightShadow.prototype = Object.assign( Object.create( LightShadow.prototype ), {\n\n\tconstructor: PointLightShadow,\n\n\tisPointLightShadow: true,\n\n\tupdateMatrices: function ( light, viewportIndex ) {\n\n\t\tif ( viewportIndex === undefined ) viewportIndex = 0;\n\n\t\tvar camera = this.camera,\n\t\t\tshadowMatrix = this.matrix,\n\t\t\tlightPositionWorld = this._lightPositionWorld,\n\t\t\tlookTarget = this._lookTarget,\n\t\t\tprojScreenMatrix = this._projScreenMatrix;\n\n\t\tlightPositionWorld.setFromMatrixPosition( light.matrixWorld );\n\t\tcamera.position.copy( lightPositionWorld );\n\n\t\tlookTarget.copy( camera.position );\n\t\tlookTarget.add( this._cubeDirections[ viewportIndex ] );\n\t\tcamera.up.copy( this._cubeUps[ viewportIndex ] );\n\t\tcamera.lookAt( lookTarget );\n\t\tcamera.updateMatrixWorld();\n\n\t\tshadowMatrix.makeTranslation( - lightPositionWorld.x, - lightPositionWorld.y, - lightPositionWorld.z );\n\n\t\tprojScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\n\t\tthis._frustum.setFromProjectionMatrix( projScreenMatrix );\n\n\t}\n\n} );\n\n\nexport { PointLightShadow };\n","import { Light } from './Light.js';\nimport { PointLightShadow } from './PointLightShadow.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\n\nfunction PointLight( color, intensity, distance, decay ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'PointLight';\n\n\tObject.defineProperty( this, 'power', {\n\t\tget: function () {\n\n\t\t\t// intensity = power per solid angle.\n\t\t\t// ref: equation (15) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t\t\treturn this.intensity * 4 * Math.PI;\n\n\t\t},\n\t\tset: function ( power ) {\n\n\t\t\t// intensity = power per solid angle.\n\t\t\t// ref: equation (15) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t\t\tthis.intensity = power / ( 4 * Math.PI );\n\n\t\t}\n\t} );\n\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\n\tthis.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\n\n\tthis.shadow = new PointLightShadow();\n\n}\n\nPointLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: PointLight,\n\n\tisPointLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.distance = source.distance;\n\t\tthis.decay = source.decay;\n\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { PointLight };\n","import { LightShadow } from './LightShadow.js';\nimport { MathUtils } from '../math/MathUtils.js';\nimport { PerspectiveCamera } from '../cameras/PerspectiveCamera.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction SpotLightShadow() {\n\n\tLightShadow.call( this, new PerspectiveCamera( 50, 1, 0.5, 500 ) );\n\n}\n\nSpotLightShadow.prototype = Object.assign( Object.create( LightShadow.prototype ), {\n\n\tconstructor: SpotLightShadow,\n\n\tisSpotLightShadow: true,\n\n\tupdateMatrices: function ( light ) {\n\n\t\tvar camera = this.camera;\n\n\t\tvar fov = MathUtils.RAD2DEG * 2 * light.angle;\n\t\tvar aspect = this.mapSize.width / this.mapSize.height;\n\t\tvar far = light.distance || camera.far;\n\n\t\tif ( fov !== camera.fov || aspect !== camera.aspect || far !== camera.far ) {\n\n\t\t\tcamera.fov = fov;\n\t\t\tcamera.aspect = aspect;\n\t\t\tcamera.far = far;\n\t\t\tcamera.updateProjectionMatrix();\n\n\t\t}\n\n\t\tLightShadow.prototype.updateMatrices.call( this, light );\n\n\t}\n\n} );\n\n\nexport { SpotLightShadow };\n","import { Light } from './Light.js';\nimport { SpotLightShadow } from './SpotLightShadow.js';\nimport { Object3D } from '../core/Object3D.js';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction SpotLight( color, intensity, distance, angle, penumbra, decay ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'SpotLight';\n\n\tthis.position.copy( Object3D.DefaultUp );\n\tthis.updateMatrix();\n\n\tthis.target = new Object3D();\n\n\tObject.defineProperty( this, 'power', {\n\t\tget: function () {\n\n\t\t\t// intensity = power per solid angle.\n\t\t\t// ref: equation (17) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t\t\treturn this.intensity * Math.PI;\n\n\t\t},\n\t\tset: function ( power ) {\n\n\t\t\t// intensity = power per solid angle.\n\t\t\t// ref: equation (17) from https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t\t\tthis.intensity = power / Math.PI;\n\n\t\t}\n\t} );\n\n\tthis.distance = ( distance !== undefined ) ? distance : 0;\n\tthis.angle = ( angle !== undefined ) ? angle : Math.PI / 3;\n\tthis.penumbra = ( penumbra !== undefined ) ? penumbra : 0;\n\tthis.decay = ( decay !== undefined ) ? decay : 1;\t// for physically correct lights, should be 2.\n\n\tthis.shadow = new SpotLightShadow();\n\n}\n\nSpotLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: SpotLight,\n\n\tisSpotLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.distance = source.distance;\n\t\tthis.angle = source.angle;\n\t\tthis.penumbra = source.penumbra;\n\t\tthis.decay = source.decay;\n\n\t\tthis.target = source.target.clone();\n\n\t\tthis.shadow = source.shadow.clone();\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { SpotLight };\n","import { Color } from '../math/Color.js';\nimport { Vector3 } from '../math/Vector3.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction Face3( a, b, c, normal, color, materialIndex ) {\n\n\tthis.a = a;\n\tthis.b = b;\n\tthis.c = c;\n\n\tthis.normal = ( normal && normal.isVector3 ) ? normal : new Vector3();\n\tthis.vertexNormals = Array.isArray( normal ) ? normal : [];\n\n\tthis.color = ( color && color.isColor ) ? color : new Color();\n\tthis.vertexColors = Array.isArray( color ) ? color : [];\n\n\tthis.materialIndex = materialIndex !== undefined ? materialIndex : 0;\n\n}\n\nObject.assign( Face3.prototype, {\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.a = source.a;\n\t\tthis.b = source.b;\n\t\tthis.c = source.c;\n\n\t\tthis.normal.copy( source.normal );\n\t\tthis.color.copy( source.color );\n\n\t\tthis.materialIndex = source.materialIndex;\n\n\t\tfor ( var i = 0, il = source.vertexNormals.length; i < il; i ++ ) {\n\n\t\t\tthis.vertexNormals[ i ] = source.vertexNormals[ i ].clone();\n\n\t\t}\n\n\t\tfor ( var i = 0, il = source.vertexColors.length; i < il; i ++ ) {\n\n\t\t\tthis.vertexColors[ i ] = source.vertexColors[ i ].clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Face3 };\n","import { Interpolant } from '../Interpolant.js';\nimport { Quaternion } from '../Quaternion.js';\n\n/**\n * Spherical linear unit quaternion interpolant.\n *\n * @author tschw\n */\n\nfunction QuaternionLinearInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n}\n\nQuaternionLinearInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\n\n\tconstructor: QuaternionLinearInterpolant,\n\n\tinterpolate_: function ( i1, t0, t, t1 ) {\n\n\t\tvar result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\toffset = i1 * stride,\n\n\t\t\talpha = ( t - t0 ) / ( t1 - t0 );\n\n\t\tfor ( var end = offset + stride; offset !== end; offset += 4 ) {\n\n\t\t\tQuaternion.slerpFlat( result, 0, values, offset - stride, values, offset, alpha );\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n} );\n\n\nexport { QuaternionLinearInterpolant };\n","import { InterpolateLinear } from '../../constants.js';\nimport { KeyframeTrack } from '../KeyframeTrack.js';\nimport { QuaternionLinearInterpolant } from '../../math/interpolants/QuaternionLinearInterpolant.js';\n\n/**\n *\n * A Track of quaternion keyframe values.\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction QuaternionKeyframeTrack( name, times, values, interpolation ) {\n\n\tKeyframeTrack.call( this, name, times, values, interpolation );\n\n}\n\nQuaternionKeyframeTrack.prototype = Object.assign( Object.create( KeyframeTrack.prototype ), {\n\n\tconstructor: QuaternionKeyframeTrack,\n\n\tValueTypeName: 'quaternion',\n\n\t// ValueBufferType is inherited\n\n\tDefaultInterpolation: InterpolateLinear,\n\n\tInterpolantFactoryMethodLinear: function ( result ) {\n\n\t\treturn new QuaternionLinearInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t},\n\n\tInterpolantFactoryMethodSmooth: undefined // not yet implemented\n\n} );\n\nexport { QuaternionKeyframeTrack };\n","import { DefaultLoadingManager } from './LoadingManager.js';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction Loader( manager ) {\n\n\tthis.manager = ( manager !== undefined ) ? manager : DefaultLoadingManager;\n\n\tthis.crossOrigin = 'anonymous';\n\tthis.path = '';\n\tthis.resourcePath = '';\n\n}\n\nObject.assign( Loader.prototype, {\n\n\tload: function ( /* url, onLoad, onProgress, onError */ ) {},\n\n\tparse: function ( /* data */ ) {},\n\n\tsetCrossOrigin: function ( crossOrigin ) {\n\n\t\tthis.crossOrigin = crossOrigin;\n\t\treturn this;\n\n\t},\n\n\tsetPath: function ( path ) {\n\n\t\tthis.path = path;\n\t\treturn this;\n\n\t},\n\n\tsetResourcePath: function ( resourcePath ) {\n\n\t\tthis.resourcePath = resourcePath;\n\t\treturn this;\n\n\t}\n\n} );\n\nexport { Loader };\n","export default /* glsl */`\n#ifdef USE_ALPHAMAP\n\n\tdiffuseColor.a *= texture2D( alphaMap, vUv ).g;\n\n#endif\n`;\n","import alphamap_fragment from './ShaderChunk/alphamap_fragment.glsl.js';\nimport alphamap_pars_fragment from './ShaderChunk/alphamap_pars_fragment.glsl.js';\nimport alphatest_fragment from './ShaderChunk/alphatest_fragment.glsl.js';\nimport aomap_fragment from './ShaderChunk/aomap_fragment.glsl.js';\nimport aomap_pars_fragment from './ShaderChunk/aomap_pars_fragment.glsl.js';\nimport begin_vertex from './ShaderChunk/begin_vertex.glsl.js';\nimport beginnormal_vertex from './ShaderChunk/beginnormal_vertex.glsl.js';\nimport bsdfs from './ShaderChunk/bsdfs.glsl.js';\nimport bumpmap_pars_fragment from './ShaderChunk/bumpmap_pars_fragment.glsl.js';\nimport clipping_planes_fragment from './ShaderChunk/clipping_planes_fragment.glsl.js';\nimport clipping_planes_pars_fragment from './ShaderChunk/clipping_planes_pars_fragment.glsl.js';\nimport clipping_planes_pars_vertex from './ShaderChunk/clipping_planes_pars_vertex.glsl.js';\nimport clipping_planes_vertex from './ShaderChunk/clipping_planes_vertex.glsl.js';\nimport color_fragment from './ShaderChunk/color_fragment.glsl.js';\nimport color_pars_fragment from './ShaderChunk/color_pars_fragment.glsl.js';\nimport color_pars_vertex from './ShaderChunk/color_pars_vertex.glsl.js';\nimport color_vertex from './ShaderChunk/color_vertex.glsl.js';\nimport common from './ShaderChunk/common.glsl.js';\nimport cube_uv_reflection_fragment from './ShaderChunk/cube_uv_reflection_fragment.glsl.js';\nimport defaultnormal_vertex from './ShaderChunk/defaultnormal_vertex.glsl.js';\nimport displacementmap_pars_vertex from './ShaderChunk/displacementmap_pars_vertex.glsl.js';\nimport displacementmap_vertex from './ShaderChunk/displacementmap_vertex.glsl.js';\nimport emissivemap_fragment from './ShaderChunk/emissivemap_fragment.glsl.js';\nimport emissivemap_pars_fragment from './ShaderChunk/emissivemap_pars_fragment.glsl.js';\nimport encodings_fragment from './ShaderChunk/encodings_fragment.glsl.js';\nimport encodings_pars_fragment from './ShaderChunk/encodings_pars_fragment.glsl.js';\nimport envmap_fragment from './ShaderChunk/envmap_fragment.glsl.js';\nimport envmap_common_pars_fragment from './ShaderChunk/envmap_common_pars_fragment.glsl.js';\nimport envmap_pars_fragment from './ShaderChunk/envmap_pars_fragment.glsl.js';\nimport envmap_pars_vertex from './ShaderChunk/envmap_pars_vertex.glsl.js';\nimport envmap_vertex from './ShaderChunk/envmap_vertex.glsl.js';\nimport fog_vertex from './ShaderChunk/fog_vertex.glsl.js';\nimport fog_pars_vertex from './ShaderChunk/fog_pars_vertex.glsl.js';\nimport fog_fragment from './ShaderChunk/fog_fragment.glsl.js';\nimport fog_pars_fragment from './ShaderChunk/fog_pars_fragment.glsl.js';\nimport gradientmap_pars_fragment from './ShaderChunk/gradientmap_pars_fragment.glsl.js';\nimport lightmap_fragment from './ShaderChunk/lightmap_fragment.glsl.js';\nimport lightmap_pars_fragment from './ShaderChunk/lightmap_pars_fragment.glsl.js';\nimport lights_lambert_vertex from './ShaderChunk/lights_lambert_vertex.glsl.js';\nimport lights_pars_begin from './ShaderChunk/lights_pars_begin.glsl.js';\nimport envmap_physical_pars_fragment from './ShaderChunk/envmap_physical_pars_fragment.glsl.js';\nimport lights_toon_fragment from './ShaderChunk/lights_toon_fragment.glsl.js';\nimport lights_toon_pars_fragment from './ShaderChunk/lights_toon_pars_fragment.glsl.js';\nimport lights_phong_fragment from './ShaderChunk/lights_phong_fragment.glsl.js';\nimport lights_phong_pars_fragment from './ShaderChunk/lights_phong_pars_fragment.glsl.js';\nimport lights_physical_fragment from './ShaderChunk/lights_physical_fragment.glsl.js';\nimport lights_physical_pars_fragment from './ShaderChunk/lights_physical_pars_fragment.glsl.js';\nimport lights_fragment_begin from './ShaderChunk/lights_fragment_begin.glsl.js';\nimport lights_fragment_maps from './ShaderChunk/lights_fragment_maps.glsl.js';\nimport lights_fragment_end from './ShaderChunk/lights_fragment_end.glsl.js';\nimport logdepthbuf_fragment from './ShaderChunk/logdepthbuf_fragment.glsl.js';\nimport logdepthbuf_pars_fragment from './ShaderChunk/logdepthbuf_pars_fragment.glsl.js';\nimport logdepthbuf_pars_vertex from './ShaderChunk/logdepthbuf_pars_vertex.glsl.js';\nimport logdepthbuf_vertex from './ShaderChunk/logdepthbuf_vertex.glsl.js';\nimport map_fragment from './ShaderChunk/map_fragment.glsl.js';\nimport map_pars_fragment from './ShaderChunk/map_pars_fragment.glsl.js';\nimport map_particle_fragment from './ShaderChunk/map_particle_fragment.glsl.js';\nimport map_particle_pars_fragment from './ShaderChunk/map_particle_pars_fragment.glsl.js';\nimport metalnessmap_fragment from './ShaderChunk/metalnessmap_fragment.glsl.js';\nimport metalnessmap_pars_fragment from './ShaderChunk/metalnessmap_pars_fragment.glsl.js';\nimport morphnormal_vertex from './ShaderChunk/morphnormal_vertex.glsl.js';\nimport morphtarget_pars_vertex from './ShaderChunk/morphtarget_pars_vertex.glsl.js';\nimport morphtarget_vertex from './ShaderChunk/morphtarget_vertex.glsl.js';\nimport normal_fragment_begin from './ShaderChunk/normal_fragment_begin.glsl.js';\nimport normal_fragment_maps from './ShaderChunk/normal_fragment_maps.glsl.js';\nimport normalmap_pars_fragment from './ShaderChunk/normalmap_pars_fragment.glsl.js';\nimport clearcoat_normal_fragment_begin from './ShaderChunk/clearcoat_normal_fragment_begin.glsl.js';\nimport clearcoat_normal_fragment_maps from './ShaderChunk/clearcoat_normal_fragment_maps.glsl.js';\nimport clearcoat_pars_fragment from './ShaderChunk/clearcoat_pars_fragment.glsl.js';\nimport packing from './ShaderChunk/packing.glsl.js';\nimport premultiplied_alpha_fragment from './ShaderChunk/premultiplied_alpha_fragment.glsl.js';\nimport project_vertex from './ShaderChunk/project_vertex.glsl.js';\nimport dithering_fragment from './ShaderChunk/dithering_fragment.glsl.js';\nimport dithering_pars_fragment from './ShaderChunk/dithering_pars_fragment.glsl.js';\nimport roughnessmap_fragment from './ShaderChunk/roughnessmap_fragment.glsl.js';\nimport roughnessmap_pars_fragment from './ShaderChunk/roughnessmap_pars_fragment.glsl.js';\nimport shadowmap_pars_fragment from './ShaderChunk/shadowmap_pars_fragment.glsl.js';\nimport shadowmap_pars_vertex from './ShaderChunk/shadowmap_pars_vertex.glsl.js';\nimport shadowmap_vertex from './ShaderChunk/shadowmap_vertex.glsl.js';\nimport shadowmask_pars_fragment from './ShaderChunk/shadowmask_pars_fragment.glsl.js';\nimport skinbase_vertex from './ShaderChunk/skinbase_vertex.glsl.js';\nimport skinning_pars_vertex from './ShaderChunk/skinning_pars_vertex.glsl.js';\nimport skinning_vertex from './ShaderChunk/skinning_vertex.glsl.js';\nimport skinnormal_vertex from './ShaderChunk/skinnormal_vertex.glsl.js';\nimport specularmap_fragment from './ShaderChunk/specularmap_fragment.glsl.js';\nimport specularmap_pars_fragment from './ShaderChunk/specularmap_pars_fragment.glsl.js';\nimport tonemapping_fragment from './ShaderChunk/tonemapping_fragment.glsl.js';\nimport tonemapping_pars_fragment from './ShaderChunk/tonemapping_pars_fragment.glsl.js';\nimport uv_pars_fragment from './ShaderChunk/uv_pars_fragment.glsl.js';\nimport uv_pars_vertex from './ShaderChunk/uv_pars_vertex.glsl.js';\nimport uv_vertex from './ShaderChunk/uv_vertex.glsl.js';\nimport uv2_pars_fragment from './ShaderChunk/uv2_pars_fragment.glsl.js';\nimport uv2_pars_vertex from './ShaderChunk/uv2_pars_vertex.glsl.js';\nimport uv2_vertex from './ShaderChunk/uv2_vertex.glsl.js';\nimport worldpos_vertex from './ShaderChunk/worldpos_vertex.glsl.js';\n\nimport background_frag from './ShaderLib/background_frag.glsl.js';\nimport background_vert from './ShaderLib/background_vert.glsl.js';\nimport cube_frag from './ShaderLib/cube_frag.glsl.js';\nimport cube_vert from './ShaderLib/cube_vert.glsl.js';\nimport depth_frag from './ShaderLib/depth_frag.glsl.js';\nimport depth_vert from './ShaderLib/depth_vert.glsl.js';\nimport distanceRGBA_frag from './ShaderLib/distanceRGBA_frag.glsl.js';\nimport distanceRGBA_vert from './ShaderLib/distanceRGBA_vert.glsl.js';\nimport equirect_frag from './ShaderLib/equirect_frag.glsl.js';\nimport equirect_vert from './ShaderLib/equirect_vert.glsl.js';\nimport linedashed_frag from './ShaderLib/linedashed_frag.glsl.js';\nimport linedashed_vert from './ShaderLib/linedashed_vert.glsl.js';\nimport meshbasic_frag from './ShaderLib/meshbasic_frag.glsl.js';\nimport meshbasic_vert from './ShaderLib/meshbasic_vert.glsl.js';\nimport meshlambert_frag from './ShaderLib/meshlambert_frag.glsl.js';\nimport meshlambert_vert from './ShaderLib/meshlambert_vert.glsl.js';\nimport meshmatcap_frag from './ShaderLib/meshmatcap_frag.glsl.js';\nimport meshmatcap_vert from './ShaderLib/meshmatcap_vert.glsl.js';\nimport meshtoon_frag from './ShaderLib/meshtoon_frag.glsl.js';\nimport meshtoon_vert from './ShaderLib/meshtoon_vert.glsl.js';\nimport meshphong_frag from './ShaderLib/meshphong_frag.glsl.js';\nimport meshphong_vert from './ShaderLib/meshphong_vert.glsl.js';\nimport meshphysical_frag from './ShaderLib/meshphysical_frag.glsl.js';\nimport meshphysical_vert from './ShaderLib/meshphysical_vert.glsl.js';\nimport normal_frag from './ShaderLib/normal_frag.glsl.js';\nimport normal_vert from './ShaderLib/normal_vert.glsl.js';\nimport points_frag from './ShaderLib/points_frag.glsl.js';\nimport points_vert from './ShaderLib/points_vert.glsl.js';\nimport shadow_frag from './ShaderLib/shadow_frag.glsl.js';\nimport shadow_vert from './ShaderLib/shadow_vert.glsl.js';\nimport sprite_frag from './ShaderLib/sprite_frag.glsl.js';\nimport sprite_vert from './ShaderLib/sprite_vert.glsl.js';\n\nexport var ShaderChunk = {\n\talphamap_fragment: alphamap_fragment,\n\talphamap_pars_fragment: alphamap_pars_fragment,\n\talphatest_fragment: alphatest_fragment,\n\taomap_fragment: aomap_fragment,\n\taomap_pars_fragment: aomap_pars_fragment,\n\tbegin_vertex: begin_vertex,\n\tbeginnormal_vertex: beginnormal_vertex,\n\tbsdfs: bsdfs,\n\tbumpmap_pars_fragment: bumpmap_pars_fragment,\n\tclipping_planes_fragment: clipping_planes_fragment,\n\tclipping_planes_pars_fragment: clipping_planes_pars_fragment,\n\tclipping_planes_pars_vertex: clipping_planes_pars_vertex,\n\tclipping_planes_vertex: clipping_planes_vertex,\n\tcolor_fragment: color_fragment,\n\tcolor_pars_fragment: color_pars_fragment,\n\tcolor_pars_vertex: color_pars_vertex,\n\tcolor_vertex: color_vertex,\n\tcommon: common,\n\tcube_uv_reflection_fragment: cube_uv_reflection_fragment,\n\tdefaultnormal_vertex: defaultnormal_vertex,\n\tdisplacementmap_pars_vertex: displacementmap_pars_vertex,\n\tdisplacementmap_vertex: displacementmap_vertex,\n\temissivemap_fragment: emissivemap_fragment,\n\temissivemap_pars_fragment: emissivemap_pars_fragment,\n\tencodings_fragment: encodings_fragment,\n\tencodings_pars_fragment: encodings_pars_fragment,\n\tenvmap_fragment: envmap_fragment,\n\tenvmap_common_pars_fragment: envmap_common_pars_fragment,\n\tenvmap_pars_fragment: envmap_pars_fragment,\n\tenvmap_pars_vertex: envmap_pars_vertex,\n\tenvmap_physical_pars_fragment: envmap_physical_pars_fragment,\n\tenvmap_vertex: envmap_vertex,\n\tfog_vertex: fog_vertex,\n\tfog_pars_vertex: fog_pars_vertex,\n\tfog_fragment: fog_fragment,\n\tfog_pars_fragment: fog_pars_fragment,\n\tgradientmap_pars_fragment: gradientmap_pars_fragment,\n\tlightmap_fragment: lightmap_fragment,\n\tlightmap_pars_fragment: lightmap_pars_fragment,\n\tlights_lambert_vertex: lights_lambert_vertex,\n\tlights_pars_begin: lights_pars_begin,\n\tlights_toon_fragment: lights_toon_fragment,\n\tlights_toon_pars_fragment: lights_toon_pars_fragment,\n\tlights_phong_fragment: lights_phong_fragment,\n\tlights_phong_pars_fragment: lights_phong_pars_fragment,\n\tlights_physical_fragment: lights_physical_fragment,\n\tlights_physical_pars_fragment: lights_physical_pars_fragment,\n\tlights_fragment_begin: lights_fragment_begin,\n\tlights_fragment_maps: lights_fragment_maps,\n\tlights_fragment_end: lights_fragment_end,\n\tlogdepthbuf_fragment: logdepthbuf_fragment,\n\tlogdepthbuf_pars_fragment: logdepthbuf_pars_fragment,\n\tlogdepthbuf_pars_vertex: logdepthbuf_pars_vertex,\n\tlogdepthbuf_vertex: logdepthbuf_vertex,\n\tmap_fragment: map_fragment,\n\tmap_pars_fragment: map_pars_fragment,\n\tmap_particle_fragment: map_particle_fragment,\n\tmap_particle_pars_fragment: map_particle_pars_fragment,\n\tmetalnessmap_fragment: metalnessmap_fragment,\n\tmetalnessmap_pars_fragment: metalnessmap_pars_fragment,\n\tmorphnormal_vertex: morphnormal_vertex,\n\tmorphtarget_pars_vertex: morphtarget_pars_vertex,\n\tmorphtarget_vertex: morphtarget_vertex,\n\tnormal_fragment_begin: normal_fragment_begin,\n\tnormal_fragment_maps: normal_fragment_maps,\n\tnormalmap_pars_fragment: normalmap_pars_fragment,\n\tclearcoat_normal_fragment_begin: clearcoat_normal_fragment_begin,\n\tclearcoat_normal_fragment_maps: clearcoat_normal_fragment_maps,\n\tclearcoat_pars_fragment: clearcoat_pars_fragment,\n\tpacking: packing,\n\tpremultiplied_alpha_fragment: premultiplied_alpha_fragment,\n\tproject_vertex: project_vertex,\n\tdithering_fragment: dithering_fragment,\n\tdithering_pars_fragment: dithering_pars_fragment,\n\troughnessmap_fragment: roughnessmap_fragment,\n\troughnessmap_pars_fragment: roughnessmap_pars_fragment,\n\tshadowmap_pars_fragment: shadowmap_pars_fragment,\n\tshadowmap_pars_vertex: shadowmap_pars_vertex,\n\tshadowmap_vertex: shadowmap_vertex,\n\tshadowmask_pars_fragment: shadowmask_pars_fragment,\n\tskinbase_vertex: skinbase_vertex,\n\tskinning_pars_vertex: skinning_pars_vertex,\n\tskinning_vertex: skinning_vertex,\n\tskinnormal_vertex: skinnormal_vertex,\n\tspecularmap_fragment: specularmap_fragment,\n\tspecularmap_pars_fragment: specularmap_pars_fragment,\n\ttonemapping_fragment: tonemapping_fragment,\n\ttonemapping_pars_fragment: tonemapping_pars_fragment,\n\tuv_pars_fragment: uv_pars_fragment,\n\tuv_pars_vertex: uv_pars_vertex,\n\tuv_vertex: uv_vertex,\n\tuv2_pars_fragment: uv2_pars_fragment,\n\tuv2_pars_vertex: uv2_pars_vertex,\n\tuv2_vertex: uv2_vertex,\n\tworldpos_vertex: worldpos_vertex,\n\n\tbackground_frag: background_frag,\n\tbackground_vert: background_vert,\n\tcube_frag: cube_frag,\n\tcube_vert: cube_vert,\n\tdepth_frag: depth_frag,\n\tdepth_vert: depth_vert,\n\tdistanceRGBA_frag: distanceRGBA_frag,\n\tdistanceRGBA_vert: distanceRGBA_vert,\n\tequirect_frag: equirect_frag,\n\tequirect_vert: equirect_vert,\n\tlinedashed_frag: linedashed_frag,\n\tlinedashed_vert: linedashed_vert,\n\tmeshbasic_frag: meshbasic_frag,\n\tmeshbasic_vert: meshbasic_vert,\n\tmeshlambert_frag: meshlambert_frag,\n\tmeshlambert_vert: meshlambert_vert,\n\tmeshmatcap_frag: meshmatcap_frag,\n\tmeshmatcap_vert: meshmatcap_vert,\n\tmeshtoon_frag: meshtoon_frag,\n\tmeshtoon_vert: meshtoon_vert,\n\tmeshphong_frag: meshphong_frag,\n\tmeshphong_vert: meshphong_vert,\n\tmeshphysical_frag: meshphysical_frag,\n\tmeshphysical_vert: meshphysical_vert,\n\tnormal_frag: normal_frag,\n\tnormal_vert: normal_vert,\n\tpoints_frag: points_frag,\n\tpoints_vert: points_vert,\n\tshadow_frag: shadow_frag,\n\tshadow_vert: shadow_vert,\n\tsprite_frag: sprite_frag,\n\tsprite_vert: sprite_vert\n};\n","export default /* glsl */`\n#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef ALPHATEST\n\n\tif ( diffuseColor.a < ALPHATEST ) discard;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_AOMAP\n\n\t// reads channel R, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\tfloat ambientOcclusion = ( texture2D( aoMap, vUv2 ).r - 1.0 ) * aoMapIntensity + 1.0;\n\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\n\t\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.specularRoughness );\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_AOMAP\n\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n\n#endif\n`;\n","export default /* glsl */`\nvec3 transformed = vec3( position );\n`;\n","export default /* glsl */`\nvec3 objectNormal = vec3( normal );\n\n#ifdef USE_TANGENT\n\n\tvec3 objectTangent = vec3( tangent.xyz );\n\n#endif\n`;\n","export default /* glsl */`\n\n// Analytical approximation of the DFG LUT, one half of the\n// split-sum approximation used in indirect specular lighting.\n// via 'environmentBRDF' from \"Physically Based Shading on Mobile\"\n// https://www.unrealengine.com/blog/physically-based-shading-on-mobile - environmentBRDF for GGX on mobile\nvec2 integrateSpecularBRDF( const in float dotNV, const in float roughness ) {\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\n\tvec4 r = roughness * c0 + c1;\n\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\n\treturn vec2( -1.04, 1.04 ) * a004 + r.zw;\n\n}\n\nfloat punctualLightIntensityToIrradianceFactor( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\n#if defined ( PHYSICALLY_CORRECT_LIGHTS )\n\n\t// based upon Frostbite 3 Moving to Physically-based Rendering\n\t// page 32, equation 26: E[window1]\n\t// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\n\t// this is intended to be used on spot and point lights who are represented as luminous intensity\n\t// but who must be converted to luminous irradiance for surface lighting calculation\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\n\tif( cutoffDistance > 0.0 ) {\n\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\n\t}\n\n\treturn distanceFalloff;\n\n#else\n\n\tif( cutoffDistance > 0.0 && decayExponent > 0.0 ) {\n\n\t\treturn pow( saturate( -lightDistance / cutoffDistance + 1.0 ), decayExponent );\n\n\t}\n\n\treturn 1.0;\n\n#endif\n\n}\n\nvec3 BRDF_Diffuse_Lambert( const in vec3 diffuseColor ) {\n\n\treturn RECIPROCAL_PI * diffuseColor;\n\n} // validated\n\nvec3 F_Schlick( const in vec3 specularColor, const in float dotLH ) {\n\n\t// Original approximation by Christophe Schlick '94\n\t// float fresnel = pow( 1.0 - dotLH, 5.0 );\n\n\t// Optimized variant (presented by Epic at SIGGRAPH '13)\n\t// https://cdn2.unrealengine.com/Resources/files/2013SiggraphPresentationsNotes-26915738.pdf\n\tfloat fresnel = exp2( ( -5.55473 * dotLH - 6.98316 ) * dotLH );\n\n\treturn ( 1.0 - specularColor ) * fresnel + specularColor;\n\n} // validated\n\nvec3 F_Schlick_RoughnessDependent( const in vec3 F0, const in float dotNV, const in float roughness ) {\n\n\t// See F_Schlick\n\tfloat fresnel = exp2( ( -5.55473 * dotNV - 6.98316 ) * dotNV );\n\tvec3 Fr = max( vec3( 1.0 - roughness ), F0 ) - F0;\n\n\treturn Fr * fresnel + F0;\n\n}\n\n\n// Microfacet Models for Refraction through Rough Surfaces - equation (34)\n// http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html\n// alpha is \"roughness squared\" in Disney’s reparameterization\nfloat G_GGX_Smith( const in float alpha, const in float dotNL, const in float dotNV ) {\n\n\t// geometry term (normalized) = G(l)⋅G(v) / 4(n⋅l)(n⋅v)\n\t// also see #12151\n\n\tfloat a2 = pow2( alpha );\n\n\tfloat gl = dotNL + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\tfloat gv = dotNV + sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\n\treturn 1.0 / ( gl * gv );\n\n} // validated\n\n// Moving Frostbite to Physically Based Rendering 3.0 - page 12, listing 2\n// https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\nfloat G_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\n\tfloat a2 = pow2( alpha );\n\n\t// dotNL and dotNV are explicitly swapped. This is not a mistake.\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\n\treturn 0.5 / max( gv + gl, EPSILON );\n\n}\n\n// Microfacet Models for Refraction through Rough Surfaces - equation (33)\n// http://graphicrants.blogspot.com/2013/08/specular-brdf-reference.html\n// alpha is \"roughness squared\" in Disney’s reparameterization\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\n\tfloat a2 = pow2( alpha );\n\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0; // avoid alpha = 0 with dotNH = 1\n\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n\n}\n\n// GGX Distribution, Schlick Fresnel, GGX-Smith Visibility\nvec3 BRDF_Specular_GGX( const in IncidentLight incidentLight, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\n\tfloat alpha = pow2( roughness ); // UE4's roughness\n\n\tvec3 halfDir = normalize( incidentLight.direction + viewDir );\n\n\tfloat dotNL = saturate( dot( normal, incidentLight.direction ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\n\tfloat G = G_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\n\tfloat D = D_GGX( alpha, dotNH );\n\n\treturn F * ( G * D );\n\n} // validated\n\n// Rect Area Light\n\n// Real-Time Polygonal-Light Shading with Linearly Transformed Cosines\n// by Eric Heitz, Jonathan Dupuy, Stephen Hill and David Neubelt\n// code: https://github.com/selfshadow/ltc_code/\n\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\n\tfloat dotNV = saturate( dot( N, V ) );\n\n\t// texture parameterized by sqrt( GGX alpha ) and sqrt( 1 - cos( theta ) )\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\n\treturn uv;\n\n}\n\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\n\t// Real-Time Area Lighting: a Journey from Research to Production (p.102)\n\t// An approximation of the form factor of a horizon-clipped rectangle.\n\n\tfloat l = length( f );\n\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n\n}\n\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\n\tfloat x = dot( v1, v2 );\n\n\tfloat y = abs( x );\n\n\t// rational polynomial approximation to theta / sin( theta ) / 2PI\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\n\treturn cross( v1, v2 ) * theta_sintheta;\n\n}\n\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\n\t// bail if point is on back side of plane of light\n\t// assumes ccw winding order of light vertices\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\n\t// construct orthonormal basis around N\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 ); // negated from paper; possibly due to a different handedness of world coordinate system\n\n\t// compute transform\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\n\t// transform rect\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\n\t// project rect onto sphere\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\n\t// calculate vector form factor\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\n\t// adjust for horizon clipping\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\n/*\n\t// alternate method of adjusting for horizon clipping (see referece)\n\t// refactoring required\n\tfloat len = length( vectorFormFactor );\n\tfloat z = vectorFormFactor.z / len;\n\n\tconst float LUT_SIZE  = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS  = 0.5 / LUT_SIZE;\n\n\t// tabulated horizon-clipped sphere, apparently...\n\tvec2 uv = vec2( z * 0.5 + 0.5, len );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\n\tfloat scale = texture2D( ltc_2, uv ).w;\n\n\tfloat result = len * scale;\n*/\n\n\treturn vec3( result );\n\n}\n\n// End Rect Area Light\n\n// ref: https://www.unrealengine.com/blog/physically-based-shading-on-mobile - environmentBRDF for GGX on mobile\nvec3 BRDF_Specular_GGX_Environment( const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float roughness ) {\n\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\n\treturn specularColor * brdf.x + brdf.y;\n\n} // validated\n\n// Fdez-Agüera's \"Multiple-Scattering Microfacet Model for Real-Time Image Based Lighting\"\n// Approximates multiscattering in order to preserve energy.\n// http://www.jcgt.org/published/0008/01/03/\nvoid BRDF_Specular_Multiscattering_Environment( const in GeometricContext geometry, const in vec3 specularColor, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n\n\tfloat dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\n\tvec3 F = F_Schlick_RoughnessDependent( specularColor, dotNV, roughness );\n\tvec2 brdf = integrateSpecularBRDF( dotNV, roughness );\n\tvec3 FssEss = F * brdf.x + brdf.y;\n\n\tfloat Ess = brdf.x + brdf.y;\n\tfloat Ems = 1.0 - Ess;\n\n\tvec3 Favg = specularColor + ( 1.0 - specularColor ) * 0.047619; // 1/21\n\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n\n}\n\nfloat G_BlinnPhong_Implicit( /* const in float dotNL, const in float dotNV */ ) {\n\n\t// geometry term is (n dot l)(n dot v) / 4(n dot l)(n dot v)\n\treturn 0.25;\n\n}\n\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n\n}\n\nvec3 BRDF_Specular_BlinnPhong( const in IncidentLight incidentLight, const in GeometricContext geometry, const in vec3 specularColor, const in float shininess ) {\n\n\tvec3 halfDir = normalize( incidentLight.direction + geometry.viewDir );\n\n\t//float dotNL = saturate( dot( geometry.normal, incidentLight.direction ) );\n\t//float dotNV = saturate( dot( geometry.normal, geometry.viewDir ) );\n\tfloat dotNH = saturate( dot( geometry.normal, halfDir ) );\n\tfloat dotLH = saturate( dot( incidentLight.direction, halfDir ) );\n\n\tvec3 F = F_Schlick( specularColor, dotLH );\n\n\tfloat G = G_BlinnPhong_Implicit( /* dotNL, dotNV */ );\n\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\n\treturn F * ( G * D );\n\n} // validated\n\n// source: http://simonstechblog.blogspot.ca/2011/12/microfacet-brdf.html\nfloat GGXRoughnessToBlinnExponent( const in float ggxRoughness ) {\n\treturn ( 2.0 / pow2( ggxRoughness + 0.0001 ) - 2.0 );\n}\n\nfloat BlinnExponentToGGXRoughness( const in float blinnExponent ) {\n\treturn sqrt( 2.0 / ( blinnExponent + 2.0 ) );\n}\n\n#if defined( USE_SHEEN )\n\n// https://github.com/google/filament/blob/master/shaders/src/brdf.fs#L94\nfloat D_Charlie(float roughness, float NoH) {\n\t// Estevez and Kulla 2017, \"Production Friendly Microfacet Sheen BRDF\"\n\tfloat invAlpha  = 1.0 / roughness;\n\tfloat cos2h = NoH * NoH;\n\tfloat sin2h = max(1.0 - cos2h, 0.0078125); // 2^(-14/2), so sin2h^2 > 0 in fp16\n\treturn (2.0 + invAlpha) * pow(sin2h, invAlpha * 0.5) / (2.0 * PI);\n}\n\n// https://github.com/google/filament/blob/master/shaders/src/brdf.fs#L136\nfloat V_Neubelt(float NoV, float NoL) {\n\t// Neubelt and Pettineo 2013, \"Crafting a Next-gen Material Pipeline for The Order: 1886\"\n\treturn saturate(1.0 / (4.0 * (NoL + NoV - NoL * NoV)));\n}\n\nvec3 BRDF_Specular_Sheen( const in float roughness, const in vec3 L, const in GeometricContext geometry, vec3 specularColor ) {\n\n\tvec3 N = geometry.normal;\n\tvec3 V = geometry.viewDir;\n\n\tvec3 H = normalize( V + L );\n\tfloat dotNH = saturate( dot( N, H ) );\n\n\treturn specularColor * D_Charlie( roughness, dotNH ) * V_Neubelt( dot(N, V), dot(N, L) );\n\n}\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_BUMPMAP\n\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\n\t// Bump Mapping Unparametrized Surfaces on the GPU by Morten S. Mikkelsen\n\t// http://api.unrealengine.com/attachments/Engine/Rendering/LightingAndShadows/BumpMappingWithoutTangentSpace/mm_sfgrad_bump.pdf\n\n\t// Evaluate the derivative of the height w.r.t. screen-space using forward differencing (listing 2)\n\n\tvec2 dHdxy_fwd() {\n\n\t\tvec2 dSTdx = dFdx( vUv );\n\t\tvec2 dSTdy = dFdy( vUv );\n\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vUv + dSTdy ).x - Hll;\n\n\t\treturn vec2( dBx, dBy );\n\n\t}\n\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy ) {\n\n\t\t// Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\n\n\t\tvec3 vSigmaX = vec3( dFdx( surf_pos.x ), dFdx( surf_pos.y ), dFdx( surf_pos.z ) );\n\t\tvec3 vSigmaY = vec3( dFdy( surf_pos.x ), dFdy( surf_pos.y ), dFdy( surf_pos.z ) );\n\t\tvec3 vN = surf_norm;\t\t// normalized\n\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\n\t\tfloat fDet = dot( vSigmaX, R1 );\n\n\t\tfDet *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\n\t}\n\n#endif\n`;\n","export default /* glsl */`\n#if NUM_CLIPPING_PLANES > 0\n\n\tvec4 plane;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\n\t\tplane = clippingPlanes[ i ];\n\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\n\t\tbool clipped = true;\n\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\n\t\t}\n\t\t#pragma unroll_loop_end\n\n\t\tif ( clipped ) discard;\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#if NUM_CLIPPING_PLANES > 0\n\n\tvarying vec3 vClipPosition;\n\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n\n#endif\n`;\n","export default /* glsl */`\n#if NUM_CLIPPING_PLANES > 0\n\n\tvarying vec3 vClipPosition;\n\n#endif\n`;\n","export default /* glsl */`\n#if NUM_CLIPPING_PLANES > 0\n\n\tvClipPosition = - mvPosition.xyz;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_COLOR\n\n\tdiffuseColor.rgb *= vColor;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_COLOR\n\n\tvarying vec3 vColor;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_COLOR\n\n\tvColor.xyz = color.xyz;\n\n#endif\n`;\n","export default /* glsl */`\n#define PI 3.14159265359\n#define PI2 6.28318530718\n#define PI_HALF 1.5707963267949\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n#define LOG2 1.442695\n#define EPSILON 1e-6\n\n#ifndef saturate\n// <tonemapping_pars_fragment> may have defined saturate() already\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement(a) ( 1.0 - saturate( a ) )\n\nfloat pow2( const in float x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat average( const in vec3 color ) { return dot( color, vec3( 0.3333 ) ); }\n// expects values in the range of [0,1]x[0,1], returns values in the [0,1] range.\n// do not collapse into a single function per: http://byteblacksmith.com/improvements-to-the-canonical-one-liner-glsl-rand-for-opengl-es-2-0/\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract(sin(sn) * c);\n}\n\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat max3( vec3 v ) { return max( max( v.x, v.y ), v.z ); }\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\n\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\n\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n\nstruct GeometricContext {\n\tvec3 position;\n\tvec3 normal;\n\tvec3 viewDir;\n#ifdef CLEARCOAT\n\tvec3 clearcoatNormal;\n#endif\n};\n\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n}\n\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t// dir can be either a direction vector or a normal vector\n\t// upper-left 3x3 of matrix is assumed to be orthogonal\n\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n\n}\n\nvec3 projectOnPlane(in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\tfloat distance = dot( planeNormal, point - pointOnPlane );\n\n\treturn - distance * planeNormal + point;\n\n}\n\nfloat sideOfPlane( in vec3 point, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn sign( dot( point - pointOnPlane, planeNormal ) );\n\n}\n\nvec3 linePlaneIntersect( in vec3 pointOnLine, in vec3 lineDirection, in vec3 pointOnPlane, in vec3 planeNormal ) {\n\n\treturn lineDirection * ( dot( planeNormal, pointOnPlane - pointOnLine ) / dot( planeNormal, lineDirection ) ) + pointOnLine;\n\n}\n\nmat3 transposeMat3( const in mat3 m ) {\n\n\tmat3 tmp;\n\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\n\treturn tmp;\n\n}\n\n// https://en.wikipedia.org/wiki/Relative_luminance\nfloat linearToRelativeLuminance( const in vec3 color ) {\n\n\tvec3 weights = vec3( 0.2126, 0.7152, 0.0722 );\n\n\treturn dot( weights, color.rgb );\n\n}\n\nbool isPerspectiveMatrix( mat4 m ) {\n\n  return m[ 2 ][ 3 ] == - 1.0;\n\n}\n`;\n","export default /* glsl */`\n#ifdef ENVMAP_TYPE_CUBE_UV\n\n#define cubeUV_maxMipLevel 8.0\n#define cubeUV_minMipLevel 4.0\n#define cubeUV_maxTileSize 256.0\n#define cubeUV_minTileSize 16.0\n\n// These shader functions convert between the UV coordinates of a single face of\n// a cubemap, the 0-5 integer index of a cube face, and the direction vector for\n// sampling a textureCube (not generally normalized).\n\nfloat getFace(vec3 direction) {\n    vec3 absDirection = abs(direction);\n    float face = -1.0;\n    if (absDirection.x > absDirection.z) {\n      if (absDirection.x > absDirection.y)\n        face = direction.x > 0.0 ? 0.0 : 3.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    } else {\n      if (absDirection.z > absDirection.y)\n        face = direction.z > 0.0 ? 2.0 : 5.0;\n      else\n        face = direction.y > 0.0 ? 1.0 : 4.0;\n    }\n    return face;\n}\n\nvec2 getUV(vec3 direction, float face) {\n    vec2 uv;\n    if (face == 0.0) {\n      uv = vec2(-direction.z, direction.y) / abs(direction.x);\n    } else if (face == 1.0) {\n      uv = vec2(direction.x, -direction.z) / abs(direction.y);\n    } else if (face == 2.0) {\n      uv = direction.xy / abs(direction.z);\n    } else if (face == 3.0) {\n      uv = vec2(direction.z, direction.y) / abs(direction.x);\n    } else if (face == 4.0) {\n      uv = direction.xz / abs(direction.y);\n    } else {\n      uv = vec2(-direction.x, direction.y) / abs(direction.z);\n    }\n    return 0.5 * (uv + 1.0);\n}\n\nvec3 bilinearCubeUV(sampler2D envMap, vec3 direction, float mipInt) {\n  float face = getFace(direction);\n  float filterInt = max(cubeUV_minMipLevel - mipInt, 0.0);\n  mipInt = max(mipInt, cubeUV_minMipLevel);\n  float faceSize = exp2(mipInt);\n\n  float texelSize = 1.0 / (3.0 * cubeUV_maxTileSize);\n\n  vec2 uv = getUV(direction, face) * (faceSize - 1.0);\n  vec2 f = fract(uv);\n  uv += 0.5 - f;\n  if (face > 2.0) {\n    uv.y += faceSize;\n    face -= 3.0;\n  }\n  uv.x += face * faceSize;\n  if(mipInt < cubeUV_maxMipLevel){\n    uv.y += 2.0 * cubeUV_maxTileSize;\n  }\n  uv.y += filterInt * 2.0 * cubeUV_minTileSize;\n  uv.x += 3.0 * max(0.0, cubeUV_maxTileSize - 2.0 * faceSize);\n  uv *= texelSize;\n\n  vec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x += texelSize;\n  vec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.y += texelSize;\n  vec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  uv.x -= texelSize;\n  vec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n  vec3 tm = mix(tl, tr, f.x);\n  vec3 bm = mix(bl, br, f.x);\n  return mix(tm, bm, f.y);\n}\n\n// These defines must match with PMREMGenerator\n\n#define r0 1.0\n#define v0 0.339\n#define m0 -2.0\n#define r1 0.8\n#define v1 0.276\n#define m1 -1.0\n#define r4 0.4\n#define v4 0.046\n#define m4 2.0\n#define r5 0.305\n#define v5 0.016\n#define m5 3.0\n#define r6 0.21\n#define v6 0.0038\n#define m6 4.0\n\nfloat roughnessToMip(float roughness) {\n  float mip = 0.0;\n  if (roughness >= r1) {\n    mip = (r0 - roughness) * (m1 - m0) / (r0 - r1) + m0;\n  } else if (roughness >= r4) {\n    mip = (r1 - roughness) * (m4 - m1) / (r1 - r4) + m1;\n  } else if (roughness >= r5) {\n    mip = (r4 - roughness) * (m5 - m4) / (r4 - r5) + m4;\n  } else if (roughness >= r6) {\n    mip = (r5 - roughness) * (m6 - m5) / (r5 - r6) + m5;\n  } else {\n    mip = -2.0 * log2(1.16 * roughness);// 1.16 = 1.79^0.25\n  }\n  return mip;\n}\n\nvec4 textureCubeUV(sampler2D envMap, vec3 sampleDir, float roughness) {\n  float mip = clamp(roughnessToMip(roughness), m0, cubeUV_maxMipLevel);\n  float mipF = fract(mip);\n  float mipInt = floor(mip);\n\n  vec3 color0 = bilinearCubeUV(envMap, sampleDir, mipInt);\n  if (mipF == 0.0) {\n    return vec4(color0, 1.0);\n  } else {\n    vec3 color1 = bilinearCubeUV(envMap, sampleDir, mipInt + 1.0);\n    return vec4(mix(color0, color1, mipF), 1.0);\n  }\n}\n#endif\n`;\n","export default /* glsl */`\nvec3 transformedNormal = objectNormal;\n\n#ifdef USE_INSTANCING\n\n\t// this is in lieu of a per-instance normal-matrix\n\t// shear transforms in the instance matrix are not supported\n\n\tmat3 m = mat3( instanceMatrix );\n\n\ttransformedNormal /= vec3( dot( m[ 0 ], m[ 0 ] ), dot( m[ 1 ], m[ 1 ] ), dot( m[ 2 ], m[ 2 ] ) );\n\n\ttransformedNormal = m * transformedNormal;\n\n#endif\n\ntransformedNormal = normalMatrix * transformedNormal;\n\n#ifdef FLIP_SIDED\n\n\ttransformedNormal = - transformedNormal;\n\n#endif\n\n#ifdef USE_TANGENT\n\n\tvec3 transformedTangent = ( modelViewMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\n\t#ifdef FLIP_SIDED\n\n\t\ttransformedTangent = - transformedTangent;\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_DISPLACEMENTMAP\n\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_DISPLACEMENTMAP\n\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vUv ).x * displacementScale + displacementBias );\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_EMISSIVEMAP\n\n\tvec4 emissiveColor = texture2D( emissiveMap, vUv );\n\n\temissiveColor.rgb = emissiveMapTexelToLinear( emissiveColor ).rgb;\n\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_EMISSIVEMAP\n\n\tuniform sampler2D emissiveMap;\n\n#endif\n`;\n","export default /* glsl */`\ngl_FragColor = linearToOutputTexel( gl_FragColor );\n`;\n","export default /* glsl */`\n// For a discussion of what this is, please read this: http://lousodrome.net/blog/light/2013/05/26/gamma-correct-and-hdr-rendering-in-a-32-bits-buffer/\n\nvec4 LinearToLinear( in vec4 value ) {\n\treturn value;\n}\n\nvec4 GammaToLinear( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( gammaFactor ) ), value.a );\n}\n\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\n\treturn vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\n}\n\nvec4 sRGBToLinear( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\n\nvec4 LinearTosRGB( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}\n\nvec4 RGBEToLinear( in vec4 value ) {\n\treturn vec4( value.rgb * exp2( value.a * 255.0 - 128.0 ), 1.0 );\n}\n\nvec4 LinearToRGBE( in vec4 value ) {\n\tfloat maxComponent = max( max( value.r, value.g ), value.b );\n\tfloat fExp = clamp( ceil( log2( maxComponent ) ), -128.0, 127.0 );\n\treturn vec4( value.rgb / exp2( fExp ), ( fExp + 128.0 ) / 255.0 );\n//  return vec4( value.brg, ( 3.0 + 128.0 ) / 256.0 );\n}\n\n// reference: http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html\nvec4 RGBMToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * value.a * maxRange, 1.0 );\n}\n\nvec4 LinearToRGBM( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat M = clamp( maxRGB / maxRange, 0.0, 1.0 );\n\tM = ceil( M * 255.0 ) / 255.0;\n\treturn vec4( value.rgb / ( M * maxRange ), M );\n}\n\n// reference: http://iwasbeingirony.blogspot.ca/2010/06/difference-between-rgbm-and-rgbd.html\nvec4 RGBDToLinear( in vec4 value, in float maxRange ) {\n\treturn vec4( value.rgb * ( ( maxRange / 255.0 ) / value.a ), 1.0 );\n}\n\nvec4 LinearToRGBD( in vec4 value, in float maxRange ) {\n\tfloat maxRGB = max( value.r, max( value.g, value.b ) );\n\tfloat D = max( maxRange / maxRGB, 1.0 );\n\t// NOTE: The implementation with min causes the shader to not compile on\n\t// a common Alcatel A502DL in Chrome 78/Android 8.1. Some research suggests \n\t// that the chipset is Mediatek MT6739 w/ IMG PowerVR GE8100 GPU.\n\t// D = min( floor( D ) / 255.0, 1.0 );\n\tD = clamp( floor( D ) / 255.0, 0.0, 1.0 );\n\treturn vec4( value.rgb * ( D * ( 255.0 / maxRange ) ), D );\n}\n\n// LogLuv reference: http://graphicrants.blogspot.ca/2009/04/rgbm-color-encoding.html\n\n// M matrix, for encoding\nconst mat3 cLogLuvM = mat3( 0.2209, 0.3390, 0.4184, 0.1138, 0.6780, 0.7319, 0.0102, 0.1130, 0.2969 );\nvec4 LinearToLogLuv( in vec4 value )  {\n\tvec3 Xp_Y_XYZp = cLogLuvM * value.rgb;\n\tXp_Y_XYZp = max( Xp_Y_XYZp, vec3( 1e-6, 1e-6, 1e-6 ) );\n\tvec4 vResult;\n\tvResult.xy = Xp_Y_XYZp.xy / Xp_Y_XYZp.z;\n\tfloat Le = 2.0 * log2(Xp_Y_XYZp.y) + 127.0;\n\tvResult.w = fract( Le );\n\tvResult.z = ( Le - ( floor( vResult.w * 255.0 ) ) / 255.0 ) / 255.0;\n\treturn vResult;\n}\n\n// Inverse M matrix, for decoding\nconst mat3 cLogLuvInverseM = mat3( 6.0014, -2.7008, -1.7996, -1.3320, 3.1029, -5.7721, 0.3008, -1.0882, 5.6268 );\nvec4 LogLuvToLinear( in vec4 value ) {\n\tfloat Le = value.z * 255.0 + value.w;\n\tvec3 Xp_Y_XYZp;\n\tXp_Y_XYZp.y = exp2( ( Le - 127.0 ) / 2.0 );\n\tXp_Y_XYZp.z = Xp_Y_XYZp.y / value.y;\n\tXp_Y_XYZp.x = value.x * Xp_Y_XYZp.z;\n\tvec3 vRGB = cLogLuvInverseM * Xp_Y_XYZp.rgb;\n\treturn vec4( max( vRGB, 0.0 ), 1.0 );\n}\n`;\n","export default /* glsl */`\n#ifdef USE_ENVMAP\n\n\t#ifdef ENV_WORLDPOS\n\n\t\tvec3 cameraToFrag;\n\t\t\n\t\tif ( isOrthographic ) {\n\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\n\t\t}  else {\n\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\n\t\t}\n\n\t\t// Transforming Normal Vectors with the Inverse Transformation\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\n\t\t#else\n\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#else\n\n\t\tvec3 reflectVec = vReflect;\n\n\t#endif\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\tvec4 envColor = textureCube( envMap, vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\tvec4 envColor = textureCubeUV( envMap, reflectVec, 0.0 );\n\n\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\n\t\tvec2 sampleUV;\n\n\t\treflectVec = normalize( reflectVec );\n\n\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\n\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\n\t\tvec4 envColor = texture2D( envMap, sampleUV );\n\n\t#elif defined( ENVMAP_TYPE_SPHERE )\n\n\t\treflectVec = normalize( reflectVec );\n\n\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0, 0.0, 1.0 ) );\n\n\t\tvec4 envColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5 );\n\n\t#else\n\n\t\tvec4 envColor = vec4( 0.0 );\n\n\t#endif\n\n\t#ifndef ENVMAP_TYPE_CUBE_UV\n\n\t\tenvColor = envMapTexelToLinear( envColor );\n\n\t#endif\n\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_ENVMAP\n\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform int maxMipLevel;\n\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_ENVMAP\n\n\tuniform float reflectivity;\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG )\n\n\t\t#define ENV_WORLDPOS\n\n\t#endif\n\n\t#ifdef ENV_WORLDPOS\n\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_ENVMAP\n\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) ||defined( PHONG )\n\n\t\t#define ENV_WORLDPOS\n\n\t#endif\n\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\n\t#else\n\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_ENVMAP )\n\n\t#ifdef ENVMAP_MODE_REFRACTION\n\t\tuniform float refractionRatio;\n\t#endif\n\n\tvec3 getLightProbeIndirectIrradiance( /*const in SpecularLightProbe specularLightProbe,*/ const in GeometricContext geometry, const in int maxMIPLevel ) {\n\n\t\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\t\tvec3 queryVec = vec3( flipEnvMap * worldNormal.x, worldNormal.yz );\n\n\t\t\t// TODO: replace with properly filtered cubemaps and access the irradiance LOD level, be it the last LOD level\n\t\t\t// of a specular cubemap, or just the default level of a specially created irradiance cubemap.\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryVec, float( maxMIPLevel ) );\n\n\t\t\t#else\n\n\t\t\t\t// force the bias high to get the last LOD level as it is the most blurred.\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryVec, float( maxMIPLevel ) );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, worldNormal, 1.0 );\n\n\t\t#else\n\n\t\t\tvec4 envMapColor = vec4( 0.0 );\n\n\t\t#endif\n\n\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\n\t}\n\n\t// Trowbridge-Reitz distribution to Mip level, following the logic of http://casual-effects.blogspot.ca/2011/08/plausible-environment-lighting-in-two.html\n\tfloat getSpecularMIPLevel( const in float roughness, const in int maxMIPLevel ) {\n\n\t\tfloat maxMIPLevelScalar = float( maxMIPLevel );\n\n\t\tfloat sigma = PI * roughness * roughness / ( 1.0 + roughness );\n\t\tfloat desiredMIPLevel = maxMIPLevelScalar + log2( sigma );\n\n\t\t// clamp to allowable LOD ranges.\n\t\treturn clamp( desiredMIPLevel, 0.0, maxMIPLevelScalar );\n\n\t}\n\n\tvec3 getLightProbeIndirectRadiance( /*const in SpecularLightProbe specularLightProbe,*/ const in vec3 viewDir, const in vec3 normal, const in float roughness, const in int maxMIPLevel ) {\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t  vec3 reflectVec = reflect( -viewDir, normal );\n\n\t\t  // Mixing the reflection with the normal is more accurate and keeps rough objects from gathering light from behind their tangent plane.\n\t\t  reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\n\t\t#else\n\n\t\t  vec3 reflectVec = refract( -viewDir, normal, refractionRatio );\n\n\t\t#endif\n\n\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\n\t\tfloat specularMIPLevel = getSpecularMIPLevel( roughness, maxMIPLevel );\n\n\t\t#ifdef ENVMAP_TYPE_CUBE\n\n\t\t\tvec3 queryReflectVec = vec3( flipEnvMap * reflectVec.x, reflectVec.yz );\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = textureCubeLodEXT( envMap, queryReflectVec, specularMIPLevel );\n\n\t\t\t#else\n\n\t\t\t\tvec4 envMapColor = textureCube( envMap, queryReflectVec, specularMIPLevel );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, reflectVec, roughness );\n\n\t\t#elif defined( ENVMAP_TYPE_EQUIREC )\n\n\t\t\tvec2 sampleUV;\n\t\t\tsampleUV.y = asin( clamp( reflectVec.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\t\t\tsampleUV.x = atan( reflectVec.z, reflectVec.x ) * RECIPROCAL_PI2 + 0.5;\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, sampleUV, specularMIPLevel );\n\n\t\t\t#else\n\n\t\t\t\tvec4 envMapColor = texture2D( envMap, sampleUV, specularMIPLevel );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#elif defined( ENVMAP_TYPE_SPHERE )\n\n\t\t\tvec3 reflectView = normalize( ( viewMatrix * vec4( reflectVec, 0.0 ) ).xyz + vec3( 0.0,0.0,1.0 ) );\n\n\t\t\t#ifdef TEXTURE_LOD_EXT\n\n\t\t\t\tvec4 envMapColor = texture2DLodEXT( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\n\t\t\t#else\n\n\t\t\t\tvec4 envMapColor = texture2D( envMap, reflectView.xy * 0.5 + 0.5, specularMIPLevel );\n\n\t\t\t#endif\n\n\t\t\tenvMapColor.rgb = envMapTexelToLinear( envMapColor ).rgb;\n\n\t\t#endif\n\n\t\treturn envMapColor.rgb * envMapIntensity;\n\n\t}\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_ENVMAP\n\n\t#ifdef ENV_WORLDPOS\n\n\t\tvWorldPosition = worldPosition.xyz;\n\n\t#else\n\n\t\tvec3 cameraToVertex;\n\n\t\tif ( isOrthographic ) { \n\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\n\t\t} else {\n\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\n\t\t}\n\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\n\t\t#else\n\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\n\t\t#endif\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_FOG\n\n\tfogDepth = -mvPosition.z;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_FOG\n\n\tvarying float fogDepth;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_FOG\n\n\t#ifdef FOG_EXP2\n\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\n\n\t#else\n\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, fogDepth );\n\n\t#endif\n\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_FOG\n\n\tuniform vec3 fogColor;\n\tvarying float fogDepth;\n\n\t#ifdef FOG_EXP2\n\n\t\tuniform float fogDensity;\n\n\t#else\n\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n\n#ifdef USE_GRADIENTMAP\n\n\tuniform sampler2D gradientMap;\n\n#endif\n\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\n\t// dotNL will be from -1.0 to 1.0\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\n\t#ifdef USE_GRADIENTMAP\n\n\t\treturn texture2D( gradientMap, coord ).rgb;\n\n\t#else\n\n\t\treturn ( coord.x < 0.7 ) ? vec3( 0.7 ) : vec3( 1.0 );\n\n\t#endif\n\n}\n\n`;\n","export default /* glsl */`\n#ifdef USE_LIGHTMAP\n\n\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\treflectedLight.indirectDiffuse += PI * lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity; // factor of PI should not be present; included here to prevent breakage\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_LIGHTMAP\n\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n\n#endif\n`;\n","export default /* glsl */`\nvec3 diffuse = vec3( 1.0 );\n\nGeometricContext geometry;\ngeometry.position = mvPosition.xyz;\ngeometry.normal = normalize( transformedNormal );\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( -mvPosition.xyz );\n\nGeometricContext backGeometry;\nbackGeometry.position = geometry.position;\nbackGeometry.normal = -geometry.normal;\nbackGeometry.viewDir = geometry.viewDir;\n\nvLightFront = vec3( 0.0 );\nvIndirectFront = vec3( 0.0 );\n\n#ifdef DOUBLE_SIDED\n\tvLightBack = vec3( 0.0 );\n\tvIndirectBack = vec3( 0.0 );\n#endif\n\nIncidentLight directLight;\nfloat dotNL;\nvec3 directLightColor_Diffuse;\n\n#if NUM_POINT_LIGHTS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\n\t\tgetPointDirectLightIrradiance( pointLights[ i ], geometry, directLight );\n\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\n\t\t#endif\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if NUM_SPOT_LIGHTS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\n\t\tgetSpotDirectLightIrradiance( spotLights[ i ], geometry, directLight );\n\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\n\t\t#endif\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n/*\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\n\t\t// TODO (abelnation): implement\n\n\t}\n\n#endif\n*/\n\n#if NUM_DIR_LIGHTS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\tgetDirectionalDirectLightIrradiance( directionalLights[ i ], geometry, directLight );\n\n\t\tdotNL = dot( geometry.normal, directLight.direction );\n\t\tdirectLightColor_Diffuse = PI * directLight.color;\n\n\t\tvLightFront += saturate( dotNL ) * directLightColor_Diffuse;\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvLightBack += saturate( -dotNL ) * directLightColor_Diffuse;\n\n\t\t#endif\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if NUM_HEMI_LIGHTS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\n\t\tvIndirectFront += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\tvIndirectBack += getHemisphereLightIrradiance( hemisphereLights[ i ], backGeometry );\n\n\t\t#endif\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n`;\n","export default /* glsl */`\nuniform bool receiveShadow;\nuniform vec3 ambientLightColor;\nuniform vec3 lightProbe[ 9 ];\n\n// get the irradiance (radiance convolved with cosine lobe) at the point 'normal' on the unit sphere\n// source: https://graphics.stanford.edu/papers/envmap/envmap.pdf\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\n\t// normal is assumed to have unit length\n\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\n\t// band 0\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\n\t// band 1\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\n\t// band 2\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\n\treturn result;\n\n}\n\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in GeometricContext geometry ) {\n\n\tvec3 worldNormal = inverseTransformDirection( geometry.normal, viewMatrix );\n\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\n\treturn irradiance;\n\n}\n\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\n\tvec3 irradiance = ambientLightColor;\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI;\n\n\t#endif\n\n\treturn irradiance;\n\n}\n\n#if NUM_DIR_LIGHTS > 0\n\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t#endif\n\n\n\tvoid getDirectionalDirectLightIrradiance( const in DirectionalLight directionalLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\n\t\tdirectLight.color = directionalLight.color;\n\t\tdirectLight.direction = directionalLight.direction;\n\t\tdirectLight.visible = true;\n\n\t}\n\n#endif\n\n\n#if NUM_POINT_LIGHTS > 0\n\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t// directLight is an out parameter as having it as a return value caused compiler errors on some devices\n\tvoid getPointDirectLightIrradiance( const in PointLight pointLight, const in GeometricContext geometry, out IncidentLight directLight ) {\n\n\t\tvec3 lVector = pointLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\n\t\tfloat lightDistance = length( lVector );\n\n\t\tdirectLight.color = pointLight.color;\n\t\tdirectLight.color *= punctualLightIntensityToIrradianceFactor( lightDistance, pointLight.distance, pointLight.decay );\n\t\tdirectLight.visible = ( directLight.color != vec3( 0.0 ) );\n\n\t}\n\n#endif\n\n\n#if NUM_SPOT_LIGHTS > 0\n\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t// directLight is an out parameter as having it as a return value caused compiler errors on some devices\n\tvoid getSpotDirectLightIrradiance( const in SpotLight spotLight, const in GeometricContext geometry, out IncidentLight directLight  ) {\n\n\t\tvec3 lVector = spotLight.position - geometry.position;\n\t\tdirectLight.direction = normalize( lVector );\n\n\t\tfloat lightDistance = length( lVector );\n\t\tfloat angleCos = dot( directLight.direction, spotLight.direction );\n\n\t\tif ( angleCos > spotLight.coneCos ) {\n\n\t\t\tfloat spotEffect = smoothstep( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\n\t\t\tdirectLight.color = spotLight.color;\n\t\t\tdirectLight.color *= spotEffect * punctualLightIntensityToIrradianceFactor( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tdirectLight.visible = true;\n\n\t\t} else {\n\n\t\t\tdirectLight.color = vec3( 0.0 );\n\t\t\tdirectLight.visible = false;\n\n\t\t}\n\t}\n\n#endif\n\n\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\n\t// Pre-computed values of LinearTransformedCosine approximation of BRDF\n\t// BRDF approximation Texture is 64x64\n\tuniform sampler2D ltc_1; // RGBA Float\n\tuniform sampler2D ltc_2; // RGBA Float\n\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n\n#endif\n\n\n#if NUM_HEMI_LIGHTS > 0\n\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in GeometricContext geometry ) {\n\n\t\tfloat dotNL = dot( geometry.normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\t\tirradiance *= PI;\n\n\t\t#endif\n\n\t\treturn irradiance;\n\n\t}\n\n#endif\n`;\n","export default /* glsl */`\nToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n`;\n","export default /* glsl */`\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n\nstruct ToonMaterial {\n\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n\n};\n\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tvec3 irradiance = getGradientIrradiance( geometry.normal, directLight.direction ) * directLight.color;\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI; // punctual light\n\n\t#endif\n\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n\n}\n\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in GeometricContext geometry, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon\n\n#define Material_LightProbeLOD( material )\t(0)\n`;\n","export default /* glsl */`\nBlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;\n`;\n","export default /* glsl */`\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n\nstruct BlinnPhongMaterial {\n\n\tvec3\tdiffuseColor;\n\tvec3\tspecularColor;\n\tfloat\tspecularShininess;\n\tfloat\tspecularStrength;\n\n};\n\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI; // punctual light\n\n\t#endif\n\n\treflectedLight.directDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n\treflectedLight.directSpecular += irradiance * BRDF_Specular_BlinnPhong( directLight, geometry, material.specularColor, material.specularShininess ) * material.specularStrength;\n\n}\n\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in GeometricContext geometry, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong\n\n#define Material_LightProbeLOD( material )\t(0)\n`;\n","export default /* glsl */`\nPhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\n\nvec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\n\nmaterial.specularRoughness = max( roughnessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.\nmaterial.specularRoughness += geometryRoughness;\nmaterial.specularRoughness = min( material.specularRoughness, 1.0 );\n\n#ifdef REFLECTIVITY\n\n\tmaterial.specularColor = mix( vec3( MAXIMUM_SPECULAR_COEFFICIENT * pow2( reflectivity ) ), diffuseColor.rgb, metalnessFactor );\n\n#else\n\n\tmaterial.specularColor = mix( vec3( DEFAULT_SPECULAR_COEFFICIENT ), diffuseColor.rgb, metalnessFactor );\n\n#endif\n\n#ifdef CLEARCOAT\n\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\n\t#ifdef USE_CLEARCOATMAP\n\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vUv ).x;\n\n\t#endif\n\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vUv ).y;\n\n\t#endif\n\n\tmaterial.clearcoat = saturate( material.clearcoat ); // Burley clearcoat model\n\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n\n#endif\n\n#ifdef USE_SHEEN\n\n\tmaterial.sheenColor = sheen;\n\n#endif\n`;\n","export default /* glsl */`\nstruct PhysicalMaterial {\n\n\tvec3\tdiffuseColor;\n\tfloat\tspecularRoughness;\n\tvec3\tspecularColor;\n\n#ifdef CLEARCOAT\n\tfloat clearcoat;\n\tfloat clearcoatRoughness;\n#endif\n#ifdef USE_SHEEN\n\tvec3 sheenColor;\n#endif\n\n};\n\n#define MAXIMUM_SPECULAR_COEFFICIENT 0.16\n#define DEFAULT_SPECULAR_COEFFICIENT 0.04\n\n// Clear coat directional hemishperical reflectance (this approximation should be improved)\nfloat clearcoatDHRApprox( const in float roughness, const in float dotNL ) {\n\n\treturn DEFAULT_SPECULAR_COEFFICIENT + ( 1.0 - DEFAULT_SPECULAR_COEFFICIENT ) * ( pow( 1.0 - dotNL, 5.0 ) * pow( 1.0 - roughness, 2.0 ) );\n\n}\n\n#if NUM_RECT_AREA_LIGHTS > 0\n\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\t\tvec3 normal = geometry.normal;\n\t\tvec3 viewDir = geometry.viewDir;\n\t\tvec3 position = geometry.position;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.specularRoughness;\n\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight; // counterclockwise; light shines in local neg z direction\n\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\n\t\t// LTC Fresnel Approximation by Stephen Hill\n\t\t// http://blog.selfshadow.com/publications/s2016-advances/s2016_ltc_fresnel.pdf\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\n\t}\n\n#endif\n\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\tfloat dotNL = saturate( dot( geometry.normal, directLight.direction ) );\n\n\tvec3 irradiance = dotNL * directLight.color;\n\n\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\tirradiance *= PI; // punctual light\n\n\t#endif\n\n\t#ifdef CLEARCOAT\n\n\t\tfloat ccDotNL = saturate( dot( geometry.clearcoatNormal, directLight.direction ) );\n\n\t\tvec3 ccIrradiance = ccDotNL * directLight.color;\n\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\t\tccIrradiance *= PI; // punctual light\n\n\t\t#endif\n\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\n\t\treflectedLight.directSpecular += ccIrradiance * material.clearcoat * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\n\t#else\n\n\t\tfloat clearcoatDHR = 0.0;\n\n\t#endif\n\n\t#ifdef USE_SHEEN\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_Sheen(\n\t\t\tmaterial.specularRoughness,\n\t\t\tdirectLight.direction,\n\t\t\tgeometry,\n\t\t\tmaterial.sheenColor\n\t\t);\n\t#else\n\t\treflectedLight.directSpecular += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Specular_GGX( directLight, geometry.viewDir, geometry.normal, material.specularColor, material.specularRoughness);\n\t#endif\n\n\treflectedLight.directDiffuse += ( 1.0 - clearcoatDHR ) * irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n}\n\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Diffuse_Lambert( material.diffuseColor );\n\n}\n\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in GeometricContext geometry, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\n\t#ifdef CLEARCOAT\n\n\t\tfloat ccDotNV = saturate( dot( geometry.clearcoatNormal, geometry.viewDir ) );\n\n\t\treflectedLight.indirectSpecular += clearcoatRadiance * material.clearcoat * BRDF_Specular_GGX_Environment( geometry.viewDir, geometry.clearcoatNormal, vec3( DEFAULT_SPECULAR_COEFFICIENT ), material.clearcoatRoughness );\n\n\t\tfloat ccDotNL = ccDotNV;\n\t\tfloat clearcoatDHR = material.clearcoat * clearcoatDHRApprox( material.clearcoatRoughness, ccDotNL );\n\n\t#else\n\n\t\tfloat clearcoatDHR = 0.0;\n\n\t#endif\n\n\tfloat clearcoatInv = 1.0 - clearcoatDHR;\n\n\t// Both indirect specular and indirect diffuse light accumulate here\n\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\n\tBRDF_Specular_Multiscattering_Environment( geometry, material.specularColor, material.specularRoughness, singleScattering, multiScattering );\n\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - ( singleScattering + multiScattering ) );\n\n\treflectedLight.indirectSpecular += clearcoatInv * radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n\n}\n\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\n\n// ref: https://seblagarde.files.wordpress.com/2015/07/course_notes_moving_frostbite_to_pbr_v32.pdf\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n\n}\n`;\n","export default /* glsl */`\n/**\n * This is a template that can be used to light a material, it uses pluggable\n * RenderEquations (RE)for specific lighting scenarios.\n *\n * Instructions for use:\n * - Ensure that both RE_Direct, RE_IndirectDiffuse and RE_IndirectSpecular are defined\n * - If you have defined an RE_IndirectSpecular, you need to also provide a Material_LightProbeLOD. <---- ???\n * - Create a material parameter that is to be passed as the third parameter to your lighting functions.\n *\n * TODO:\n * - Add area light support.\n * - Add sphere light support.\n * - Add diffuse light probe (irradiance cubemap) support.\n */\n\nGeometricContext geometry;\n\ngeometry.position = - vViewPosition;\ngeometry.normal = normal;\ngeometry.viewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\n\n#ifdef CLEARCOAT\n\n\tgeometry.clearcoatNormal = clearcoatNormal;\n\n#endif\n\nIncidentLight directLight;\n\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\n\t\tpointLight = pointLights[ i ];\n\n\t\tgetPointDirectLightIrradiance( pointLight, geometry, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tSpotLight spotLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\n\t\tspotLight = spotLights[ i ];\n\n\t\tgetSpotDirectLightIrradiance( spotLight, geometry, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\n\t\tdirectionalLight = directionalLights[ i ];\n\n\t\tgetDirectionalDirectLightIrradiance( directionalLight, geometry, directLight );\n\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= all( bvec2( directLight.visible, receiveShadow ) ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\n\t\tRE_Direct( directLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\n\tRectAreaLight rectAreaLight;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometry, material, reflectedLight );\n\n\t}\n\t#pragma unroll_loop_end\n\n#endif\n\n#if defined( RE_IndirectDiffuse )\n\n\tvec3 iblIrradiance = vec3( 0.0 );\n\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\n\tirradiance += getLightProbeIrradiance( lightProbe, geometry );\n\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometry );\n\n\t\t}\n\t\t#pragma unroll_loop_end\n\n\t#endif\n\n#endif\n\n#if defined( RE_IndirectSpecular )\n\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( RE_IndirectDiffuse )\n\n\t#ifdef USE_LIGHTMAP\n\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\tvec3 lightMapIrradiance = lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\n\t\t#ifndef PHYSICALLY_CORRECT_LIGHTS\n\n\t\t\tlightMapIrradiance *= PI; // factor of PI should not be present; included here to prevent breakage\n\n\t\t#endif\n\n\t\tirradiance += lightMapIrradiance;\n\n\t#endif\n\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\n\t\tiblIrradiance += getLightProbeIndirectIrradiance( /*lightProbe,*/ geometry, maxMipLevel );\n\n\t#endif\n\n#endif\n\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\n\tradiance += getLightProbeIndirectRadiance( /*specularLightProbe,*/ geometry.viewDir, geometry.normal, material.specularRoughness, maxMipLevel );\n\n\t#ifdef CLEARCOAT\n\n\t\tclearcoatRadiance += getLightProbeIndirectRadiance( /*specularLightProbe,*/ geometry.viewDir, geometry.clearcoatNormal, material.clearcoatRoughness, maxMipLevel );\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( RE_IndirectDiffuse )\n\n\tRE_IndirectDiffuse( irradiance, geometry, material, reflectedLight );\n\n#endif\n\n#if defined( RE_IndirectSpecular )\n\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometry, material, reflectedLight );\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\n\t// Doing a strict comparison with == 1.0 can cause noise artifacts\n\t// on some platforms. See issue #17623.\n\tgl_FragDepthEXT = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_LOGDEPTHBUF ) && defined( USE_LOGDEPTHBUF_EXT )\n\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvarying float vFragDepth;\n\t\tvarying float vIsPerspective;\n\n\t#else\n\n\t\tuniform float logDepthBufFC;\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_LOGDEPTHBUF\n\n\t#ifdef USE_LOGDEPTHBUF_EXT\n\n\t\tvFragDepth = 1.0 + gl_Position.w;\n\t\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n\n\t#else\n\n\t\tif ( isPerspectiveMatrix( projectionMatrix ) ) {\n\n\t\t\tgl_Position.z = log2( max( EPSILON, gl_Position.w + 1.0 ) ) * logDepthBufFC - 1.0;\n\n\t\t\tgl_Position.z *= gl_Position.w;\n\n\t\t}\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_MAP\n\n\tvec4 texelColor = texture2D( map, vUv );\n\n\ttexelColor = mapTexelToLinear( texelColor );\n\tdiffuseColor *= texelColor;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\n\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\n#endif\n\n#ifdef USE_MAP\n\n\tvec4 mapTexel = texture2D( map, uv );\n\tdiffuseColor *= mapTexelToLinear( mapTexel );\n\n#endif\n\n#ifdef USE_ALPHAMAP\n\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\n\tuniform mat3 uvTransform;\n\n#endif\n\n#ifdef USE_MAP\n\n\tuniform sampler2D map;\n\n#endif\n\n#ifdef USE_ALPHAMAP\n\n\tuniform sampler2D alphaMap;\n\n#endif\n`;\n","export default /* glsl */`\nfloat metalnessFactor = metalness;\n\n#ifdef USE_METALNESSMAP\n\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\n\t// reads channel B, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\tmetalnessFactor *= texelMetalness.b;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_METALNESSMAP\n\n\tuniform sampler2D metalnessMap;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_MORPHNORMALS\n\n\t// morphTargetBaseInfluence is set based on BufferGeometry.morphTargetsRelative value:\n\t// When morphTargetsRelative is false, this is set to 1 - sum(influences); this results in normal = sum((target - base) * influence)\n\t// When morphTargetsRelative is true, this is set to 1; as a result, all morph targets are simply added to the base after weighting\n\tobjectNormal *= morphTargetBaseInfluence;\n\tobjectNormal += morphNormal0 * morphTargetInfluences[ 0 ];\n\tobjectNormal += morphNormal1 * morphTargetInfluences[ 1 ];\n\tobjectNormal += morphNormal2 * morphTargetInfluences[ 2 ];\n\tobjectNormal += morphNormal3 * morphTargetInfluences[ 3 ];\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_MORPHTARGETS\n\n\tuniform float morphTargetBaseInfluence;\n\n\t#ifndef USE_MORPHNORMALS\n\n\tuniform float morphTargetInfluences[ 8 ];\n\n\t#else\n\n\tuniform float morphTargetInfluences[ 4 ];\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_MORPHTARGETS\n\n\t// morphTargetBaseInfluence is set based on BufferGeometry.morphTargetsRelative value:\n\t// When morphTargetsRelative is false, this is set to 1 - sum(influences); this results in position = sum((target - base) * influence)\n\t// When morphTargetsRelative is true, this is set to 1; as a result, all morph targets are simply added to the base after weighting\n\ttransformed *= morphTargetBaseInfluence;\n\ttransformed += morphTarget0 * morphTargetInfluences[ 0 ];\n\ttransformed += morphTarget1 * morphTargetInfluences[ 1 ];\n\ttransformed += morphTarget2 * morphTargetInfluences[ 2 ];\n\ttransformed += morphTarget3 * morphTargetInfluences[ 3 ];\n\n\t#ifndef USE_MORPHNORMALS\n\n\ttransformed += morphTarget4 * morphTargetInfluences[ 4 ];\n\ttransformed += morphTarget5 * morphTargetInfluences[ 5 ];\n\ttransformed += morphTarget6 * morphTargetInfluences[ 6 ];\n\ttransformed += morphTarget7 * morphTargetInfluences[ 7 ];\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef FLAT_SHADED\n\n\t// Workaround for Adreno/Nexus5 not able able to do dFdx( vViewPosition ) ...\n\n\tvec3 fdx = vec3( dFdx( vViewPosition.x ), dFdx( vViewPosition.y ), dFdx( vViewPosition.z ) );\n\tvec3 fdy = vec3( dFdy( vViewPosition.x ), dFdy( vViewPosition.y ), dFdy( vViewPosition.z ) );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n\n#else\n\n\tvec3 normal = normalize( vNormal );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t#endif\n\n\t#ifdef USE_TANGENT\n\n\t\tvec3 tangent = normalize( vTangent );\n\t\tvec3 bitangent = normalize( vBitangent );\n\n\t\t#ifdef DOUBLE_SIDED\n\n\t\t\ttangent = tangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\t\t\tbitangent = bitangent * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t\t#endif\n\n\t\t#if defined( TANGENTSPACE_NORMALMAP ) || defined( USE_CLEARCOAT_NORMALMAP )\n\n\t\t\tmat3 vTBN = mat3( tangent, bitangent, normal );\n\n\t\t#endif\n\n\t#endif\n\n#endif\n\n// non perturbed normal for clearcoat among others\n\nvec3 geometryNormal = normal;\n\n`;\n","export default /* glsl */`\n\n#ifdef OBJECTSPACE_NORMALMAP\n\n\tnormal = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0; // overrides both flatShading and attribute normals\n\n\t#ifdef FLIP_SIDED\n\n\t\tnormal = - normal;\n\n\t#endif\n\n\t#ifdef DOUBLE_SIDED\n\n\t\tnormal = normal * ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t#endif\n\n\tnormal = normalize( normalMatrix * normal );\n\n#elif defined( TANGENTSPACE_NORMALMAP )\n\n\tvec3 mapN = texture2D( normalMap, vUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\n\t#ifdef USE_TANGENT\n\n\t\tnormal = normalize( vTBN * mapN );\n\n\t#else\n\n\t\tnormal = perturbNormal2Arb( -vViewPosition, normal, mapN );\n\n\t#endif\n\n#elif defined( USE_BUMPMAP )\n\n\tnormal = perturbNormalArb( -vViewPosition, normal, dHdxy_fwd() );\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_NORMALMAP\n\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n\n#endif\n\n#ifdef OBJECTSPACE_NORMALMAP\n\n\tuniform mat3 normalMatrix;\n\n#endif\n\n#if ! defined ( USE_TANGENT ) && ( defined ( TANGENTSPACE_NORMALMAP ) || defined ( USE_CLEARCOAT_NORMALMAP ) )\n\n\t// Per-Pixel Tangent Space Normal Mapping\n\t// http://hacksoflife.blogspot.ch/2009/11/per-pixel-tangent-space-normal-mapping.html\n\n\tvec3 perturbNormal2Arb( vec3 eye_pos, vec3 surf_norm, vec3 mapN ) {\n\n\t\t// Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\n\n\t\tvec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n\t\tvec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n\t\tvec2 st0 = dFdx( vUv.st );\n\t\tvec2 st1 = dFdy( vUv.st );\n\n\t\tfloat scale = sign( st1.t * st0.s - st0.t * st1.s ); // we do not care about the magnitude\n\n\t\tvec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n\t\tvec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n\t\tvec3 N = normalize( surf_norm );\n\n\t\tmat3 tsn = mat3( S, T, N );\n\n\t\tmapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n\t\treturn normalize( tsn * mapN );\n\n\t}\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef CLEARCOAT\n\n\tvec3 clearcoatNormal = geometryNormal;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_CLEARCOAT_NORMALMAP\n\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\n\t#ifdef USE_TANGENT\n\n\t\tclearcoatNormal = normalize( vTBN * clearcoatMapN );\n\n\t#else\n\n\t\tclearcoatNormal = perturbNormal2Arb( - vViewPosition, clearcoatNormal, clearcoatMapN );\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n\n#ifdef USE_CLEARCOATMAP\n\n\tuniform sampler2D clearcoatMap;\n\n#endif\n\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\n\tuniform sampler2D clearcoatRoughnessMap;\n\n#endif\n\n#ifdef USE_CLEARCOAT_NORMALMAP\n\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n\n#endif\n`;\n","export default /* glsl */`\nvec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\n\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\n\nconst float PackUpscale = 256. / 255.; // fraction -> 0..1 (including 1)\nconst float UnpackDownscale = 255. / 256.; // 0..1 -> fraction (excluding 1)\n\nconst vec3 PackFactors = vec3( 256. * 256. * 256., 256. * 256.,  256. );\nconst vec4 UnpackFactors = UnpackDownscale / vec4( PackFactors, 1. );\n\nconst float ShiftRight8 = 1. / 256.;\n\nvec4 packDepthToRGBA( const in float v ) {\n\tvec4 r = vec4( fract( v * PackFactors ), v );\n\tr.yzw -= r.xyz * ShiftRight8; // tidy overflow\n\treturn r * PackUpscale;\n}\n\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors );\n}\n\nvec4 pack2HalfToRGBA( vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ));\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w);\n}\nvec2 unpackRGBATo2Half( vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\n\n// NOTE: viewZ/eyeZ is < 0 when in front of the camera per OpenGL conventions\n\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float linearClipZ, const in float near, const in float far ) {\n\treturn linearClipZ * ( near - far ) - near;\n}\n\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn (( near + viewZ ) * far ) / (( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float invClipZ, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * invClipZ - far );\n}\n`;\n","export default /* glsl */`\n#ifdef PREMULTIPLIED_ALPHA\n\n\t// Get get normal blending with premultipled, use with CustomBlending, OneFactor, OneMinusSrcAlphaFactor, AddEquation.\n\tgl_FragColor.rgb *= gl_FragColor.a;\n\n#endif\n`;\n","export default /* glsl */`\nvec4 mvPosition = vec4( transformed, 1.0 );\n\n#ifdef USE_INSTANCING\n\n\tmvPosition = instanceMatrix * mvPosition;\n\n#endif\n\nmvPosition = modelViewMatrix * mvPosition;\n\ngl_Position = projectionMatrix * mvPosition;\n`;\n","export default /* glsl */`\n#ifdef DITHERING\n\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef DITHERING\n\n\t// based on https://www.shadertoy.com/view/MslGR8\n\tvec3 dithering( vec3 color ) {\n\t\t//Calculate grid position\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\n\t\t//Shift the individual colors differently, thus making it even harder to see the dithering pattern\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\n\t\t//modify shift acording to grid position.\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\n\t\t//shift the color by dither_shift\n\t\treturn color + dither_shift_RGB;\n\t}\n\n#endif\n`;\n","export default /* glsl */`\nfloat roughnessFactor = roughness;\n\n#ifdef USE_ROUGHNESSMAP\n\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\n\t// reads channel G, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\troughnessFactor *= texelRoughness.g;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_ROUGHNESSMAP\n\n\tuniform sampler2D roughnessMap;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): create uniforms for area light shadows\n\n\t#endif\n\t*/\n\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\n\t}\n\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\n\t}\n\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\n\t\tfloat occlusion = 1.0;\n\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\n\t\tfloat hard_shadow = step( compare , distribution.x ); // Hard Shadow\n\n\t\tif (hard_shadow != 1.0 ) {\n\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance ); // Chebeyshevs inequality\n\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 ); // 0.3 reduces light bleed\n\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\n\t\t}\n\t\treturn occlusion;\n\n\t}\n\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\n\t\tfloat shadow = 1.0;\n\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\n\t\t// if ( something && something ) breaks ATI OpenGL shader compiler\n\t\t// if ( all( something, something ) ) using this instead\n\n\t\tbvec4 inFrustumVec = bvec4 ( shadowCoord.x >= 0.0, shadowCoord.x <= 1.0, shadowCoord.y >= 0.0, shadowCoord.y <= 1.0 );\n\t\tbool inFrustum = all( inFrustumVec );\n\n\t\tbvec2 frustumTestVec = bvec2( inFrustum, shadowCoord.z <= 1.0 );\n\n\t\tbool frustumTest = all( frustumTestVec );\n\n\t\tif ( frustumTest ) {\n\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ), \n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\n\t\t#else // no percentage-closer filtering:\n\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\n\t\t#endif\n\n\t\t}\n\n\t\treturn shadow;\n\n\t}\n\n\t// cubeToUV() maps a 3D direction vector suitable for cube texture mapping to a 2D\n\t// vector suitable for 2D texture mapping. This code uses the following layout for the\n\t// 2D texture:\n\t//\n\t// xzXZ\n\t//  y Y\n\t//\n\t// Y - Positive y direction\n\t// y - Negative y direction\n\t// X - Positive x direction\n\t// x - Negative x direction\n\t// Z - Positive z direction\n\t// z - Negative z direction\n\t//\n\t// Source and test bed:\n\t// https://gist.github.com/tschw/da10c43c467ce8afd0c4\n\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\n\t\t// Number of texels to avoid at the edge of each square\n\n\t\tvec3 absV = abs( v );\n\n\t\t// Intersect unit cube\n\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\n\t\t// Apply scale to avoid seams\n\n\t\t// two texels less per square (one texel will do for NEAREST)\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\n\t\t// Unwrap\n\n\t\t// space: -1 ... 1 range for each square\n\t\t//\n\t\t// #X##\t\tdim    := ( 4 , 2 )\n\t\t//  # #\t\tcenter := ( 1 , 1 )\n\n\t\tvec2 planar = v.xy;\n\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\n\t\tif ( absV.z >= almostOne ) {\n\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\n\t\t} else if ( absV.x >= almostOne ) {\n\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\n\t\t} else if ( absV.y >= almostOne ) {\n\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\n\t\t}\n\n\t\t// Transform to UV space\n\n\t\t// scale := 0.5 / dim\n\t\t// translate := ( center + 0.5 ) / dim\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\n\t}\n\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\n\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\n\t\t// for point lights, the uniform @vShadowCoord is re-purposed to hold\n\t\t// the vector from the light to the world-space position of the fragment.\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\n\t\t// dp = normalized distance from light to fragment position\n\t\tfloat dp = ( length( lightToPosition ) - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear ); // need to clamp?\n\t\tdp += shadowBias;\n\n\t\t// bd3D = base direction 3D\n\t\tvec3 bd3D = normalize( lightToPosition );\n\n\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\n\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\n\t\t\treturn (\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t) * ( 1.0 / 9.0 );\n\n\t\t#else // no percentage-closer filtering\n\n\t\t\treturn texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\n\t\t#endif\n\n\t}\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\t\tuniform mat4 spotShadowMatrix[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vSpotShadowCoord[ NUM_SPOT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): uniforms for area light shadows\n\n\t#endif\n\t*/\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\n\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * worldPosition;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tvSpotShadowCoord[ i ] = spotShadowMatrix[ i ] * worldPosition;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * worldPosition;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): update vAreaShadowCoord with area light info\n\n\t#endif\n\t*/\n\n#endif\n`;\n","export default /* glsl */`\nfloat getShadowMask() {\n\n\tfloat shadow = 1.0;\n\n\t#ifdef USE_SHADOWMAP\n\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\n\tDirectionalLightShadow directionalLight;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\n\tSpotLightShadow spotLight;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowBias, spotLight.shadowRadius, vSpotShadowCoord[ i ] ) : 1.0;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\n\tPointLightShadow pointLight;\n\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\n\t}\n\t#pragma unroll_loop_end\n\n\t#endif\n\n\t/*\n\t#if NUM_RECT_AREA_LIGHTS > 0\n\n\t\t// TODO (abelnation): update shadow for Area light\n\n\t#endif\n\t*/\n\n\t#endif\n\n\treturn shadow;\n\n}\n`;\n","export default /* glsl */`\n#ifdef USE_SKINNING\n\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_SKINNING\n\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\n\t#ifdef BONE_TEXTURE\n\n\t\tuniform highp sampler2D boneTexture;\n\t\tuniform int boneTextureSize;\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tfloat j = i * 4.0;\n\t\t\tfloat x = mod( j, float( boneTextureSize ) );\n\t\t\tfloat y = floor( j / float( boneTextureSize ) );\n\n\t\t\tfloat dx = 1.0 / float( boneTextureSize );\n\t\t\tfloat dy = 1.0 / float( boneTextureSize );\n\n\t\t\ty = dy * ( y + 0.5 );\n\n\t\t\tvec4 v1 = texture2D( boneTexture, vec2( dx * ( x + 0.5 ), y ) );\n\t\t\tvec4 v2 = texture2D( boneTexture, vec2( dx * ( x + 1.5 ), y ) );\n\t\t\tvec4 v3 = texture2D( boneTexture, vec2( dx * ( x + 2.5 ), y ) );\n\t\t\tvec4 v4 = texture2D( boneTexture, vec2( dx * ( x + 3.5 ), y ) );\n\n\t\t\tmat4 bone = mat4( v1, v2, v3, v4 );\n\n\t\t\treturn bone;\n\n\t\t}\n\n\t#else\n\n\t\tuniform mat4 boneMatrices[ MAX_BONES ];\n\n\t\tmat4 getBoneMatrix( const in float i ) {\n\n\t\t\tmat4 bone = boneMatrices[ int(i) ];\n\t\t\treturn bone;\n\n\t\t}\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_SKINNING\n\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_SKINNING\n\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix  = bindMatrixInverse * skinMatrix * bindMatrix;\n\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\n\t#ifdef USE_TANGENT\n\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\n\t#endif\n\n#endif\n`;\n","export default /* glsl */`\nfloat specularStrength;\n\n#ifdef USE_SPECULARMAP\n\n\tvec4 texelSpecular = texture2D( specularMap, vUv );\n\tspecularStrength = texelSpecular.r;\n\n#else\n\n\tspecularStrength = 1.0;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_SPECULARMAP\n\n\tuniform sampler2D specularMap;\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( TONE_MAPPING )\n\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n\n#endif\n`;\n","export default /* glsl */`\n#ifndef saturate\n// <common> may have defined saturate() already\n#define saturate(a) clamp( a, 0.0, 1.0 )\n#endif\n\nuniform float toneMappingExposure;\nuniform float toneMappingWhitePoint;\n\n// exposure only\nvec3 LinearToneMapping( vec3 color ) {\n\n\treturn toneMappingExposure * color;\n\n}\n\n// source: https://www.cs.utah.edu/~reinhard/cdrom/\nvec3 ReinhardToneMapping( vec3 color ) {\n\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n\n}\n\n// source: http://filmicgames.com/archives/75\n#define Uncharted2Helper( x ) max( ( ( x * ( 0.15 * x + 0.10 * 0.50 ) + 0.20 * 0.02 ) / ( x * ( 0.15 * x + 0.50 ) + 0.20 * 0.30 ) ) - 0.02 / 0.30, vec3( 0.0 ) )\nvec3 Uncharted2ToneMapping( vec3 color ) {\n\n\t// John Hable's filmic operator from Uncharted 2 video game\n\tcolor *= toneMappingExposure;\n\treturn saturate( Uncharted2Helper( color ) / Uncharted2Helper( vec3( toneMappingWhitePoint ) ) );\n\n}\n\n// source: http://filmicgames.com/archives/75\nvec3 OptimizedCineonToneMapping( vec3 color ) {\n\n\t// optimized filmic operator by Jim Hejl and Richard Burgess-Dawson\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n\n}\n\n// source: https://knarkowicz.wordpress.com/2016/01/06/aces-filmic-tone-mapping-curve/\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\n\tcolor *= toneMappingExposure;\n\treturn saturate( ( color * ( 2.51 * color + 0.03 ) ) / ( color * ( 2.43 * color + 0.59 ) + 0.14 ) );\n\n}\n`;\n","export default /* glsl */`\n#if ( defined( USE_UV ) && ! defined( UVS_VERTEX_ONLY ) )\n\n\tvarying vec2 vUv;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_UV\n\n\t#ifdef UVS_VERTEX_ONLY\n\n\t\tvec2 vUv;\n\n\t#else\n\n\t\tvarying vec2 vUv;\n\n\t#endif\n\n\tuniform mat3 uvTransform;\n\n#endif\n`;\n","export default /* glsl */`\n#ifdef USE_UV\n\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvarying vec2 vUv2;\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tattribute vec2 uv2;\n\tvarying vec2 vUv2;\n\n\tuniform mat3 uv2Transform;\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_LIGHTMAP ) || defined( USE_AOMAP )\n\n\tvUv2 = ( uv2Transform * vec3( uv2, 1 ) ).xy;\n\n#endif\n`;\n","export default /* glsl */`\n#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP )\n\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\n\t#ifdef USE_INSTANCING\n\n\t\tworldPosition = instanceMatrix * worldPosition;\n\n\t#endif\n\n\tworldPosition = modelMatrix * worldPosition;\n\n#endif\n`;\n","export default /* glsl */`\nuniform sampler2D t2D;\n\nvarying vec2 vUv;\n\nvoid main() {\n\n\tvec4 texColor = texture2D( t2D, vUv );\n\n\tgl_FragColor = mapTexelToLinear( texColor );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n`;\n","export default /* glsl */`\nvarying vec2 vUv;\nuniform mat3 uvTransform;\n\nvoid main() {\n\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n\n}\n`;\n","export default /* glsl */`\n\n#include <envmap_common_pars_fragment>\nuniform float opacity;\n\nvarying vec3 vWorldDirection;\n\n#include <cube_uv_reflection_fragment>\n\nvoid main() {\n\n\tvec3 vReflect = vWorldDirection;\n\t#include <envmap_fragment>\n\n\tgl_FragColor = envColor;\n\tgl_FragColor.a *= opacity;\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n`;\n","export default /* glsl */`\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\n\tgl_Position.z = gl_Position.w; // set z to camera.far\n\n}\n`;\n","export default /* glsl */`\n#if DEPTH_PACKING == 3200\n\n\tuniform float opacity;\n\n#endif\n\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvarying vec2 vHighPrecisionZW;\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( 1.0 );\n\n\t#if DEPTH_PACKING == 3200\n\n\t\tdiffuseColor.a = opacity;\n\n\t#endif\n\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\t#include <logdepthbuf_fragment>\n\n\t// Higher precision equivalent of gl_FragCoord.z. This assumes depthRange has been left to its default values.\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\n\t#if DEPTH_PACKING == 3200\n\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\n\t#elif DEPTH_PACKING == 3201\n\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\n\t#endif\n\n}\n`;\n","export default /* glsl */`\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\n// This is used for computing an equivalent of gl_FragCoord.z that is as high precision as possible.\n// Some platforms compute gl_FragCoord at a lower precision which makes the manually computed value better for\n// depth-based postprocessing effects. Reproduced on iPad with A10 processor / iPadOS 13.3.1.\nvarying vec2 vHighPrecisionZW;\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_DISPLACEMENTMAP\n\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvHighPrecisionZW = gl_Position.zw;\n\n}\n`;\n","export default /* glsl */`\n#define DISTANCE\n\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main () {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( 1.0 );\n\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist ); // clamp to [ 0, 1 ]\n\n\tgl_FragColor = packDepthToRGBA( dist );\n\n}\n`;\n","export default /* glsl */`\n#define DISTANCE\n\nvarying vec3 vWorldPosition;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_DISPLACEMENTMAP\n\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvWorldPosition = worldPosition.xyz;\n\n}\n`;\n","export default /* glsl */`\nuniform sampler2D tEquirect;\n\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvec3 direction = normalize( vWorldDirection );\n\n\tvec2 sampleUV;\n\n\tsampleUV.y = asin( clamp( direction.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\n\tsampleUV.x = atan( direction.z, direction.x ) * RECIPROCAL_PI2 + 0.5;\n\n\tvec4 texColor = texture2D( tEquirect, sampleUV );\n\n\tgl_FragColor = mapTexelToLinear( texColor );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\n}\n`;\n","export default /* glsl */`\nvarying vec3 vWorldDirection;\n\n#include <common>\n\nvoid main() {\n\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\n}\n`;\n","export default /* glsl */`\nuniform vec3 diffuse;\nuniform float opacity;\n\nuniform float dashSize;\nuniform float totalSize;\n\nvarying float vLineDistance;\n\n#include <common>\n#include <color_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\n\t\tdiscard;\n\n\t}\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <color_fragment>\n\n\toutgoingLight = diffuseColor.rgb; // simple shader\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\n}\n`;\n","export default /* glsl */`\nuniform float scale;\nattribute float lineDistance;\n\nvarying float vLineDistance;\n\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\tvLineDistance = scale * lineDistance;\n\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n}\n`;\n","export default /* glsl */`\nuniform vec3 diffuse;\nuniform float opacity;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\n\t// accumulation (baked indirect lighting only)\n\t#ifdef USE_LIGHTMAP\n\t\n\t\tvec4 lightMapTexel= texture2D( lightMap, vUv2 );\n\t\treflectedLight.indirectDiffuse += lightMapTexelToLinear( lightMapTexel ).rgb * lightMapIntensity;\n\n\t#else\n\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\n\t#endif\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\n}\n`;\n","export default /* glsl */`\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\t#include <skinbase_vertex>\n\n\t#ifdef USE_ENVMAP\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n\n}\n`;\n","export default /* glsl */`\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <fog_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\treflectedLight.indirectDiffuse = getAmbientLightIrradiance( ambientLightColor );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\treflectedLight.indirectDiffuse += ( gl_FrontFacing ) ? vIndirectFront : vIndirectBack;\n\n\t#else\n\n\t\treflectedLight.indirectDiffuse += vIndirectFront;\n\n\t#endif\n\n\t#include <lightmap_fragment>\n\n\treflectedLight.indirectDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb );\n\n\t#ifdef DOUBLE_SIDED\n\n\t\treflectedLight.directDiffuse = ( gl_FrontFacing ) ? vLightFront : vLightBack;\n\n\t#else\n\n\t\treflectedLight.directDiffuse = vLightFront;\n\n\t#endif\n\n\treflectedLight.directDiffuse *= BRDF_Diffuse_Lambert( diffuseColor.rgb ) * getShadowMask();\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}\n`;\n","export default /* glsl */`\n#define LAMBERT\n\nvarying vec3 vLightFront;\nvarying vec3 vIndirectFront;\n\n#ifdef DOUBLE_SIDED\n\tvarying vec3 vLightBack;\n\tvarying vec3 vIndirectBack;\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <envmap_pars_vertex>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <lights_lambert_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}\n`;\n","export default /* glsl */`\n#define MATCAP\n\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n\n#include <fog_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5; // 0.495 to remove artifacts caused by undersized matcap disks\n\n\t#ifdef USE_MATCAP\n\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t\tmatcapColor = matcapTexelToLinear( matcapColor );\n\n\t#else\n\n\t\tvec4 matcapColor = vec4( 1.0 );\n\n\t#endif\n\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\n}\n`;\n","export default /* glsl */`\n#define MATCAP\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n\t#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\t\tvNormal = normalize( transformedNormal );\n\n\t#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n}\n`;\n","export default /* glsl */`\n#define TOON\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n`;\n","export default /* glsl */`\n#define TOON\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n`;\n","export default /* glsl */`\n#define PHONG\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <cube_uv_reflection_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n\t#include <envmap_fragment>\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n`;\n","export default /* glsl */`\n#define PHONG\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n`;\n","export default /* glsl */`\n#define STANDARD\n\n#ifdef PHYSICAL\n\t#define REFLECTIVITY\n\t#define CLEARCOAT\n\t#define TRANSPARENCY\n#endif\n\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n\n#ifdef TRANSPARENCY\n\tuniform float transparency;\n#endif\n\n#ifdef REFLECTIVITY\n\tuniform float reflectivity;\n#endif\n\n#ifdef CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n\n#ifdef USE_SHEEN\n\tuniform vec3 sheen;\n#endif\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <bsdfs>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <lights_physical_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\n\t// accumulation\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\n\t// modulation\n\t#include <aomap_fragment>\n\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n\t// this is a stub for the transparency model\n\t#ifdef TRANSPARENCY\n\t\tdiffuseColor.a *= saturate( 1. - transparency + linearToRelativeLuminance( reflectedLight.directSpecular + reflectedLight.indirectSpecular ) );\n\t#endif\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n\n}\n`;\n","export default /* glsl */`\n#define STANDARD\n\nvarying vec3 vViewPosition;\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\t#include <uv2_vertex>\n\t#include <color_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n\t#ifdef USE_TANGENT\n\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\n\t#endif\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewPosition = - mvPosition.xyz;\n\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n`;\n","export default /* glsl */`\n#define NORMAL\n\nuniform float opacity;\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\n\tvarying vec3 vViewPosition;\n\n#endif\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <packing>\n#include <uv_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\n\tgl_FragColor = vec4( packNormalToRGB( normal ), opacity );\n\n}\n`;\n","export default /* glsl */`\n#define NORMAL\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\n\tvarying vec3 vViewPosition;\n\n#endif\n\n#ifndef FLAT_SHADED\n\n\tvarying vec3 vNormal;\n\n\t#ifdef USE_TANGENT\n\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\n\t#endif\n\n#endif\n\n#include <common>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\n#ifndef FLAT_SHADED // Normal computed with derivatives when FLAT_SHADED\n\n\tvNormal = normalize( transformedNormal );\n\n\t#ifdef USE_TANGENT\n\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\n\t#endif\n\n#endif\n\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( TANGENTSPACE_NORMALMAP )\n\n\tvViewPosition = - mvPosition.xyz;\n\n#endif\n\n}\n`;\n","export default /* glsl */`\nuniform vec3 diffuse;\nuniform float opacity;\n\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\n\toutgoingLight = diffuseColor.rgb;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\n}\n`;\n","export default /* glsl */`\nuniform float size;\nuniform float scale;\n\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <color_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\n\tgl_PointSize = size;\n\n\t#ifdef USE_SIZEATTENUATION\n\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\n\t#endif\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n\n}\n`;\n","export default /* glsl */`\nuniform vec3 color;\nuniform float opacity;\n\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\n\nvoid main() {\n\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n`;\n","export default /* glsl */`\n#include <fog_pars_vertex>\n#include <shadowmap_pars_vertex>\n\nvoid main() {\n\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n\n}\n`;\n","export default /* glsl */`\nuniform vec3 diffuse;\nuniform float opacity;\n\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n\n\t#include <clipping_planes_fragment>\n\n\tvec3 outgoingLight = vec3( 0.0 );\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\n\toutgoingLight = diffuseColor.rgb;\n\n\tgl_FragColor = vec4( outgoingLight, diffuseColor.a );\n\n\t#include <tonemapping_fragment>\n\t#include <encodings_fragment>\n\t#include <fog_fragment>\n\n}\n`;\n","export default /* glsl */`\nuniform float rotation;\nuniform vec2 center;\n\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n\n\t#include <uv_vertex>\n\n\tvec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );\n\n\tvec2 scale;\n\tscale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );\n\tscale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );\n\n\t#ifndef USE_SIZEATTENUATION\n\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\n\t#endif\n\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\n\tmvPosition.xy += rotatedPosition;\n\n\tgl_Position = projectionMatrix * mvPosition;\n\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\n}\n`;\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author philogb / http://blog.thejit.org/\n * @author egraether / http://egraether.com/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n */\n\nfunction Vector2( x, y ) {\n\n\tthis.x = x || 0;\n\tthis.y = y || 0;\n\n}\n\nObject.defineProperties( Vector2.prototype, {\n\n\t\"width\": {\n\n\t\tget: function () {\n\n\t\t\treturn this.x;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis.x = value;\n\n\t\t}\n\n\t},\n\n\t\"height\": {\n\n\t\tget: function () {\n\n\t\t\treturn this.y;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis.y = value;\n\n\t\t}\n\n\t}\n\n} );\n\nObject.assign( Vector2.prototype, {\n\n\tisVector2: true,\n\n\tset: function ( x, y ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponent: function ( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetComponent: function ( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.x, this.y );\n\n\t},\n\n\tcopy: function ( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\n\t\treturn this;\n\n\t},\n\n\taddVectors: function ( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\n\t\treturn this;\n\n\t},\n\n\taddScaledVector: function ( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\n\t\treturn this;\n\n\t},\n\n\tsubScalar: function ( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\n\t\treturn this;\n\n\t},\n\n\tsubVectors: function ( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( v ) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\n\t\treturn this;\n\n\t},\n\n\tdivide: function ( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\n\t\treturn this;\n\n\t},\n\n\tdivideScalar: function ( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t},\n\n\tapplyMatrix3: function ( m ) {\n\n\t\tvar x = this.x, y = this.y;\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ];\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ];\n\n\t\treturn this;\n\n\t},\n\n\tmin: function ( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\n\t\treturn this;\n\n\t},\n\n\tmax: function ( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\n\t\treturn this;\n\n\t},\n\n\tclamp: function ( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampScalar: function ( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampLength: function ( min, max ) {\n\n\t\tvar length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t},\n\n\tfloor: function () {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\n\t\treturn this;\n\n\t},\n\n\tceil: function () {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\n\t\treturn this;\n\n\t},\n\n\tround: function () {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\n\t\treturn this;\n\n\t},\n\n\troundToZero: function () {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y;\n\n\t},\n\n\tcross: function ( v ) {\n\n\t\treturn this.x * v.y - this.y * v.x;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this.x * this.x + this.y * this.y;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y );\n\n\t},\n\n\tmanhattanLength: function () {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y );\n\n\t},\n\n\tnormalize: function () {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t},\n\n\tangle: function () {\n\n\t\t// computes the angle in radians with respect to the positive x-axis\n\n\t\tvar angle = Math.atan2( - this.y, - this.x ) + Math.PI;\n\n\t\treturn angle;\n\n\t},\n\n\tdistanceTo: function ( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t},\n\n\tdistanceToSquared: function ( v ) {\n\n\t\tvar dx = this.x - v.x, dy = this.y - v.y;\n\t\treturn dx * dx + dy * dy;\n\n\t},\n\n\tmanhattanDistanceTo: function ( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y );\n\n\t},\n\n\tsetLength: function ( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t},\n\n\tlerp: function ( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tlerpVectors: function ( v1, v2, alpha ) {\n\n\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\n\n\t},\n\n\tequals: function ( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\n\t\treturn array;\n\n\t},\n\n\tfromBufferAttribute: function ( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\n\t\treturn this;\n\n\t},\n\n\trotateAround: function ( center, angle ) {\n\n\t\tvar c = Math.cos( angle ), s = Math.sin( angle );\n\n\t\tvar x = this.x - center.x;\n\t\tvar y = this.y - center.y;\n\n\t\tthis.x = x * c - y * s + center.x;\n\t\tthis.y = x * s + y * c + center.y;\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Vector2 };\n","/**\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author philogb / http://blog.thejit.org/\n * @author mikael emtinger / http://gomo.se/\n * @author egraether / http://egraether.com/\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction Vector4( x, y, z, w ) {\n\n\tthis.x = x || 0;\n\tthis.y = y || 0;\n\tthis.z = z || 0;\n\tthis.w = ( w !== undefined ) ? w : 1;\n\n}\n\nObject.defineProperties( Vector4.prototype, {\n\n\t\"width\": {\n\n\t\tget: function () {\n\n\t\t\treturn this.z;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis.z = value;\n\n\t\t}\n\n\t},\n\n\t\"height\": {\n\n\t\tget: function () {\n\n\t\t\treturn this.w;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis.w = value;\n\n\t\t}\n\n\t}\n\n} );\n\nObject.assign( Vector4.prototype, {\n\n\tisVector4: true,\n\n\tset: function ( x, y, z, w ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\t\tthis.w = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetZ: function ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetW: function ( w ) {\n\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponent: function ( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tcase 3: this.w = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetComponent: function ( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tcase 3: return this.w;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.x, this.y, this.z, this.w );\n\n\t},\n\n\tcopy: function ( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\t\tthis.w = ( v.w !== undefined ) ? v.w : 1;\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\t\tthis.w += v.w;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\t\tthis.w += s;\n\n\t\treturn this;\n\n\t},\n\n\taddVectors: function ( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\t\tthis.w = a.w + b.w;\n\n\t\treturn this;\n\n\t},\n\n\taddScaledVector: function ( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\t\tthis.w += v.w * s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\t\tthis.w -= v.w;\n\n\t\treturn this;\n\n\t},\n\n\tsubScalar: function ( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\t\tthis.w -= s;\n\n\t\treturn this;\n\n\t},\n\n\tsubVectors: function ( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\t\tthis.w = a.w - b.w;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\t\tthis.w *= scalar;\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function ( m ) {\n\n\t\tvar x = this.x, y = this.y, z = this.z, w = this.w;\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] * w;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] * w;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] * w;\n\t\tthis.w = e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] * w;\n\n\t\treturn this;\n\n\t},\n\n\tdivideScalar: function ( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t},\n\n\tsetAxisAngleFromQuaternion: function ( q ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\n\n\t\t// q is assumed to be normalized\n\n\t\tthis.w = 2 * Math.acos( q.w );\n\n\t\tvar s = Math.sqrt( 1 - q.w * q.w );\n\n\t\tif ( s < 0.0001 ) {\n\n\t\t\tthis.x = 1;\n\t\t\tthis.y = 0;\n\t\t\tthis.z = 0;\n\n\t\t} else {\n\n\t\t\tthis.x = q.x / s;\n\t\t\tthis.y = q.y / s;\n\t\t\tthis.z = q.z / s;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetAxisAngleFromRotationMatrix: function ( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tvar angle, x, y, z,\t\t// variables for result\n\t\t\tepsilon = 0.01,\t\t// margin to allow for rounding errors\n\t\t\tepsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\n\n\t\t\tte = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\tif ( ( Math.abs( m12 - m21 ) < epsilon ) &&\n\t\t     ( Math.abs( m13 - m31 ) < epsilon ) &&\n\t\t     ( Math.abs( m23 - m32 ) < epsilon ) ) {\n\n\t\t\t// singularity found\n\t\t\t// first check for identity matrix which must have +1 for all terms\n\t\t\t// in leading diagonal and zero in other terms\n\n\t\t\tif ( ( Math.abs( m12 + m21 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m13 + m31 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m23 + m32 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m11 + m22 + m33 - 3 ) < epsilon2 ) ) {\n\n\t\t\t\t// this singularity is identity matrix so angle = 0\n\n\t\t\t\tthis.set( 1, 0, 0, 0 );\n\n\t\t\t\treturn this; // zero angle, arbitrary axis\n\n\t\t\t}\n\n\t\t\t// otherwise this singularity is angle = 180\n\n\t\t\tangle = Math.PI;\n\n\t\t\tvar xx = ( m11 + 1 ) / 2;\n\t\t\tvar yy = ( m22 + 1 ) / 2;\n\t\t\tvar zz = ( m33 + 1 ) / 2;\n\t\t\tvar xy = ( m12 + m21 ) / 4;\n\t\t\tvar xz = ( m13 + m31 ) / 4;\n\t\t\tvar yz = ( m23 + m32 ) / 4;\n\n\t\t\tif ( ( xx > yy ) && ( xx > zz ) ) {\n\n\t\t\t\t// m11 is the largest diagonal term\n\n\t\t\t\tif ( xx < epsilon ) {\n\n\t\t\t\t\tx = 0;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tx = Math.sqrt( xx );\n\t\t\t\t\ty = xy / x;\n\t\t\t\t\tz = xz / x;\n\n\t\t\t\t}\n\n\t\t\t} else if ( yy > zz ) {\n\n\t\t\t\t// m22 is the largest diagonal term\n\n\t\t\t\tif ( yy < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ty = Math.sqrt( yy );\n\t\t\t\t\tx = xy / y;\n\t\t\t\t\tz = yz / y;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// m33 is the largest diagonal term so base result on this\n\n\t\t\t\tif ( zz < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tz = Math.sqrt( zz );\n\t\t\t\t\tx = xz / z;\n\t\t\t\t\ty = yz / z;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.set( x, y, z, angle );\n\n\t\t\treturn this; // return 180 deg rotation\n\n\t\t}\n\n\t\t// as we have reached here there are no singularities so we can handle normally\n\n\t\tvar s = Math.sqrt( ( m32 - m23 ) * ( m32 - m23 ) +\n\t\t                   ( m13 - m31 ) * ( m13 - m31 ) +\n\t\t                   ( m21 - m12 ) * ( m21 - m12 ) ); // used to normalize\n\n\t\tif ( Math.abs( s ) < 0.001 ) s = 1;\n\n\t\t// prevent divide by zero, should not happen if matrix is orthogonal and should be\n\t\t// caught by singularity test above, but I've left it in just in case\n\n\t\tthis.x = ( m32 - m23 ) / s;\n\t\tthis.y = ( m13 - m31 ) / s;\n\t\tthis.z = ( m21 - m12 ) / s;\n\t\tthis.w = Math.acos( ( m11 + m22 + m33 - 1 ) / 2 );\n\n\t\treturn this;\n\n\t},\n\n\tmin: function ( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\t\tthis.w = Math.min( this.w, v.w );\n\n\t\treturn this;\n\n\t},\n\n\tmax: function ( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\t\tthis.w = Math.max( this.w, v.w );\n\n\t\treturn this;\n\n\t},\n\n\tclamp: function ( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\t\tthis.w = Math.max( min.w, Math.min( max.w, this.w ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampScalar: function ( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\t\tthis.z = Math.max( minVal, Math.min( maxVal, this.z ) );\n\t\tthis.w = Math.max( minVal, Math.min( maxVal, this.w ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampLength: function ( min, max ) {\n\n\t\tvar length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t},\n\n\tfloor: function () {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\t\tthis.w = Math.floor( this.w );\n\n\t\treturn this;\n\n\t},\n\n\tceil: function () {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\t\tthis.w = Math.ceil( this.w );\n\n\t\treturn this;\n\n\t},\n\n\tround: function () {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\t\tthis.w = Math.round( this.w );\n\n\t\treturn this;\n\n\t},\n\n\troundToZero: function () {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\t\tthis.w = ( this.w < 0 ) ? Math.ceil( this.w ) : Math.floor( this.w );\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\t\tthis.w = - this.w;\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\n\n\t},\n\n\tmanhattanLength: function () {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z ) + Math.abs( this.w );\n\n\t},\n\n\tnormalize: function () {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t},\n\n\tsetLength: function ( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t},\n\n\tlerp: function ( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\t\tthis.w += ( v.w - this.w ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tlerpVectors: function ( v1, v2, alpha ) {\n\n\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\n\n\t},\n\n\tequals: function ( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) && ( v.w === this.w ) );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\t\tthis.w = array[ offset + 3 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\t\tarray[ offset + 3 ] = this.w;\n\n\t\treturn array;\n\n\t},\n\n\tfromBufferAttribute: function ( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\t\tthis.w = attribute.getW( index );\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Vector4 };\n","/**\n * @author timothypratley / https://github.com/timothypratley\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { PolyhedronBufferGeometry } from './PolyhedronGeometry.js';\n\n// OctahedronGeometry\n\nfunction OctahedronGeometry( radius, detail ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'OctahedronGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n\tthis.fromBufferGeometry( new OctahedronBufferGeometry( radius, detail ) );\n\tthis.mergeVertices();\n\n}\n\nOctahedronGeometry.prototype = Object.create( Geometry.prototype );\nOctahedronGeometry.prototype.constructor = OctahedronGeometry;\n\n// OctahedronBufferGeometry\n\nfunction OctahedronBufferGeometry( radius, detail ) {\n\n\tvar vertices = [\n\t\t1, 0, 0, \t- 1, 0, 0,\t0, 1, 0,\n\t\t0, - 1, 0, \t0, 0, 1,\t0, 0, - 1\n\t];\n\n\tvar indices = [\n\t\t0, 2, 4,\t0, 4, 3,\t0, 3, 5,\n\t\t0, 5, 2,\t1, 2, 5,\t1, 5, 3,\n\t\t1, 3, 4,\t1, 4, 2\n\t];\n\n\tPolyhedronBufferGeometry.call( this, vertices, indices, radius, detail );\n\n\tthis.type = 'OctahedronBufferGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n}\n\nOctahedronBufferGeometry.prototype = Object.create( PolyhedronBufferGeometry.prototype );\nOctahedronBufferGeometry.prototype.constructor = OctahedronBufferGeometry;\n\n\nexport { OctahedronGeometry, OctahedronBufferGeometry };\n","/**\n * @author timothypratley / https://github.com/timothypratley\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { PolyhedronBufferGeometry } from './PolyhedronGeometry.js';\n\n// IcosahedronGeometry\n\nfunction IcosahedronGeometry( radius, detail ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'IcosahedronGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n\tthis.fromBufferGeometry( new IcosahedronBufferGeometry( radius, detail ) );\n\tthis.mergeVertices();\n\n}\n\nIcosahedronGeometry.prototype = Object.create( Geometry.prototype );\nIcosahedronGeometry.prototype.constructor = IcosahedronGeometry;\n\n// IcosahedronBufferGeometry\n\nfunction IcosahedronBufferGeometry( radius, detail ) {\n\n\tvar t = ( 1 + Math.sqrt( 5 ) ) / 2;\n\n\tvar vertices = [\n\t\t- 1, t, 0, \t1, t, 0, \t- 1, - t, 0, \t1, - t, 0,\n\t\t 0, - 1, t, \t0, 1, t,\t0, - 1, - t, \t0, 1, - t,\n\t\t t, 0, - 1, \tt, 0, 1, \t- t, 0, - 1, \t- t, 0, 1\n\t];\n\n\tvar indices = [\n\t\t 0, 11, 5, \t0, 5, 1, \t0, 1, 7, \t0, 7, 10, \t0, 10, 11,\n\t\t 1, 5, 9, \t5, 11, 4,\t11, 10, 2,\t10, 7, 6,\t7, 1, 8,\n\t\t 3, 9, 4, \t3, 4, 2,\t3, 2, 6,\t3, 6, 8,\t3, 8, 9,\n\t\t 4, 9, 5, \t2, 4, 11,\t6, 2, 10,\t8, 6, 7,\t9, 8, 1\n\t];\n\n\tPolyhedronBufferGeometry.call( this, vertices, indices, radius, detail );\n\n\tthis.type = 'IcosahedronBufferGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n}\n\nIcosahedronBufferGeometry.prototype = Object.create( PolyhedronBufferGeometry.prototype );\nIcosahedronBufferGeometry.prototype.constructor = IcosahedronBufferGeometry;\n\n\nexport { IcosahedronGeometry, IcosahedronBufferGeometry };\n","/**\n * @author oosmoxiecode\n * @author Mugen87 / https://github.com/Mugen87\n *\n * based on http://www.blackpawn.com/texts/pqtorus/\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { Vector3 } from '../math/Vector3.js';\n\n// TorusKnotGeometry\n\nfunction TorusKnotGeometry( radius, tube, tubularSegments, radialSegments, p, q, heightScale ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'TorusKnotGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\ttube: tube,\n\t\ttubularSegments: tubularSegments,\n\t\tradialSegments: radialSegments,\n\t\tp: p,\n\t\tq: q\n\t};\n\n\tif ( heightScale !== undefined ) console.warn( 'THREE.TorusKnotGeometry: heightScale has been deprecated. Use .scale( x, y, z ) instead.' );\n\n\tthis.fromBufferGeometry( new TorusKnotBufferGeometry( radius, tube, tubularSegments, radialSegments, p, q ) );\n\tthis.mergeVertices();\n\n}\n\nTorusKnotGeometry.prototype = Object.create( Geometry.prototype );\nTorusKnotGeometry.prototype.constructor = TorusKnotGeometry;\n\n// TorusKnotBufferGeometry\n\nfunction TorusKnotBufferGeometry( radius, tube, tubularSegments, radialSegments, p, q ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'TorusKnotBufferGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\ttube: tube,\n\t\ttubularSegments: tubularSegments,\n\t\tradialSegments: radialSegments,\n\t\tp: p,\n\t\tq: q\n\t};\n\n\tradius = radius || 1;\n\ttube = tube || 0.4;\n\ttubularSegments = Math.floor( tubularSegments ) || 64;\n\tradialSegments = Math.floor( radialSegments ) || 8;\n\tp = p || 2;\n\tq = q || 3;\n\n\t// buffers\n\n\tvar indices = [];\n\tvar vertices = [];\n\tvar normals = [];\n\tvar uvs = [];\n\n\t// helper variables\n\n\tvar i, j;\n\n\tvar vertex = new Vector3();\n\tvar normal = new Vector3();\n\n\tvar P1 = new Vector3();\n\tvar P2 = new Vector3();\n\n\tvar B = new Vector3();\n\tvar T = new Vector3();\n\tvar N = new Vector3();\n\n\t// generate vertices, normals and uvs\n\n\tfor ( i = 0; i <= tubularSegments; ++ i ) {\n\n\t\t// the radian \"u\" is used to calculate the position on the torus curve of the current tubular segement\n\n\t\tvar u = i / tubularSegments * p * Math.PI * 2;\n\n\t\t// now we calculate two points. P1 is our current position on the curve, P2 is a little farther ahead.\n\t\t// these points are used to create a special \"coordinate space\", which is necessary to calculate the correct vertex positions\n\n\t\tcalculatePositionOnCurve( u, p, q, radius, P1 );\n\t\tcalculatePositionOnCurve( u + 0.01, p, q, radius, P2 );\n\n\t\t// calculate orthonormal basis\n\n\t\tT.subVectors( P2, P1 );\n\t\tN.addVectors( P2, P1 );\n\t\tB.crossVectors( T, N );\n\t\tN.crossVectors( B, T );\n\n\t\t// normalize B, N. T can be ignored, we don't use it\n\n\t\tB.normalize();\n\t\tN.normalize();\n\n\t\tfor ( j = 0; j <= radialSegments; ++ j ) {\n\n\t\t\t// now calculate the vertices. they are nothing more than an extrusion of the torus curve.\n\t\t\t// because we extrude a shape in the xy-plane, there is no need to calculate a z-value.\n\n\t\t\tvar v = j / radialSegments * Math.PI * 2;\n\t\t\tvar cx = - tube * Math.cos( v );\n\t\t\tvar cy = tube * Math.sin( v );\n\n\t\t\t// now calculate the final vertex position.\n\t\t\t// first we orient the extrusion with our basis vectos, then we add it to the current position on the curve\n\n\t\t\tvertex.x = P1.x + ( cx * N.x + cy * B.x );\n\t\t\tvertex.y = P1.y + ( cx * N.y + cy * B.y );\n\t\t\tvertex.z = P1.z + ( cx * N.z + cy * B.z );\n\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t// normal (P1 is always the center/origin of the extrusion, thus we can use it to calculate the normal)\n\n\t\t\tnormal.subVectors( vertex, P1 ).normalize();\n\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t// uv\n\n\t\t\tuvs.push( i / tubularSegments );\n\t\t\tuvs.push( j / radialSegments );\n\n\t\t}\n\n\t}\n\n\t// generate indices\n\n\tfor ( j = 1; j <= tubularSegments; j ++ ) {\n\n\t\tfor ( i = 1; i <= radialSegments; i ++ ) {\n\n\t\t\t// indices\n\n\t\t\tvar a = ( radialSegments + 1 ) * ( j - 1 ) + ( i - 1 );\n\t\t\tvar b = ( radialSegments + 1 ) * j + ( i - 1 );\n\t\t\tvar c = ( radialSegments + 1 ) * j + i;\n\t\t\tvar d = ( radialSegments + 1 ) * ( j - 1 ) + i;\n\n\t\t\t// faces\n\n\t\t\tindices.push( a, b, d );\n\t\t\tindices.push( b, c, d );\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t// this function calculates the current position on the torus curve\n\n\tfunction calculatePositionOnCurve( u, p, q, radius, position ) {\n\n\t\tvar cu = Math.cos( u );\n\t\tvar su = Math.sin( u );\n\t\tvar quOverP = q / p * u;\n\t\tvar cs = Math.cos( quOverP );\n\n\t\tposition.x = radius * ( 2 + cs ) * 0.5 * cu;\n\t\tposition.y = radius * ( 2 + cs ) * su * 0.5;\n\t\tposition.z = radius * Math.sin( quOverP ) * 0.5;\n\n\t}\n\n}\n\nTorusKnotBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nTorusKnotBufferGeometry.prototype.constructor = TorusKnotBufferGeometry;\n\n\nexport { TorusKnotGeometry, TorusKnotBufferGeometry };\n","/**\n * @author oosmoxiecode\n * @author mrdoob / http://mrdoob.com/\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { Vector3 } from '../math/Vector3.js';\n\n// TorusGeometry\n\nfunction TorusGeometry( radius, tube, radialSegments, tubularSegments, arc ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'TorusGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\ttube: tube,\n\t\tradialSegments: radialSegments,\n\t\ttubularSegments: tubularSegments,\n\t\tarc: arc\n\t};\n\n\tthis.fromBufferGeometry( new TorusBufferGeometry( radius, tube, radialSegments, tubularSegments, arc ) );\n\tthis.mergeVertices();\n\n}\n\nTorusGeometry.prototype = Object.create( Geometry.prototype );\nTorusGeometry.prototype.constructor = TorusGeometry;\n\n// TorusBufferGeometry\n\nfunction TorusBufferGeometry( radius, tube, radialSegments, tubularSegments, arc ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'TorusBufferGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\ttube: tube,\n\t\tradialSegments: radialSegments,\n\t\ttubularSegments: tubularSegments,\n\t\tarc: arc\n\t};\n\n\tradius = radius || 1;\n\ttube = tube || 0.4;\n\tradialSegments = Math.floor( radialSegments ) || 8;\n\ttubularSegments = Math.floor( tubularSegments ) || 6;\n\tarc = arc || Math.PI * 2;\n\n\t// buffers\n\n\tvar indices = [];\n\tvar vertices = [];\n\tvar normals = [];\n\tvar uvs = [];\n\n\t// helper variables\n\n\tvar center = new Vector3();\n\tvar vertex = new Vector3();\n\tvar normal = new Vector3();\n\n\tvar j, i;\n\n\t// generate vertices, normals and uvs\n\n\tfor ( j = 0; j <= radialSegments; j ++ ) {\n\n\t\tfor ( i = 0; i <= tubularSegments; i ++ ) {\n\n\t\t\tvar u = i / tubularSegments * arc;\n\t\t\tvar v = j / radialSegments * Math.PI * 2;\n\n\t\t\t// vertex\n\n\t\t\tvertex.x = ( radius + tube * Math.cos( v ) ) * Math.cos( u );\n\t\t\tvertex.y = ( radius + tube * Math.cos( v ) ) * Math.sin( u );\n\t\t\tvertex.z = tube * Math.sin( v );\n\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t// normal\n\n\t\t\tcenter.x = radius * Math.cos( u );\n\t\t\tcenter.y = radius * Math.sin( u );\n\t\t\tnormal.subVectors( vertex, center ).normalize();\n\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t// uv\n\n\t\t\tuvs.push( i / tubularSegments );\n\t\t\tuvs.push( j / radialSegments );\n\n\t\t}\n\n\t}\n\n\t// generate indices\n\n\tfor ( j = 1; j <= radialSegments; j ++ ) {\n\n\t\tfor ( i = 1; i <= tubularSegments; i ++ ) {\n\n\t\t\t// indices\n\n\t\t\tvar a = ( tubularSegments + 1 ) * j + i - 1;\n\t\t\tvar b = ( tubularSegments + 1 ) * ( j - 1 ) + i - 1;\n\t\t\tvar c = ( tubularSegments + 1 ) * ( j - 1 ) + i;\n\t\t\tvar d = ( tubularSegments + 1 ) * j + i;\n\n\t\t\t// faces\n\n\t\t\tindices.push( a, b, d );\n\t\t\tindices.push( b, c, d );\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n}\n\nTorusBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nTorusBufferGeometry.prototype.constructor = TorusBufferGeometry;\n\n\nexport { TorusGeometry, TorusBufferGeometry };\n","/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author alteredq / http://alteredqualia.com/\n *\n * Text = 3D Text\n *\n * parameters = {\n *  font: <THREE.Font>, // font\n *\n *  size: <float>, // size of the text\n *  height: <float>, // thickness to extrude text\n *  curveSegments: <int>, // number of points on the curves\n *\n *  bevelEnabled: <bool>, // turn on bevel\n *  bevelThickness: <float>, // how deep into text bevel goes\n *  bevelSize: <float>, // how far from text outline (including bevelOffset) is bevel\n *  bevelOffset: <float> // how far from text outline does bevel start\n * }\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { ExtrudeBufferGeometry } from './ExtrudeGeometry.js';\n\n// TextGeometry\n\nfunction TextGeometry( text, parameters ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'TextGeometry';\n\n\tthis.parameters = {\n\t\ttext: text,\n\t\tparameters: parameters\n\t};\n\n\tthis.fromBufferGeometry( new TextBufferGeometry( text, parameters ) );\n\tthis.mergeVertices();\n\n}\n\nTextGeometry.prototype = Object.create( Geometry.prototype );\nTextGeometry.prototype.constructor = TextGeometry;\n\n// TextBufferGeometry\n\nfunction TextBufferGeometry( text, parameters ) {\n\n\tparameters = parameters || {};\n\n\tvar font = parameters.font;\n\n\tif ( ! ( font && font.isFont ) ) {\n\n\t\tconsole.error( 'THREE.TextGeometry: font parameter is not an instance of THREE.Font.' );\n\t\treturn new Geometry();\n\n\t}\n\n\tvar shapes = font.generateShapes( text, parameters.size );\n\n\t// translate parameters to ExtrudeGeometry API\n\n\tparameters.depth = parameters.height !== undefined ? parameters.height : 50;\n\n\t// defaults\n\n\tif ( parameters.bevelThickness === undefined ) parameters.bevelThickness = 10;\n\tif ( parameters.bevelSize === undefined ) parameters.bevelSize = 8;\n\tif ( parameters.bevelEnabled === undefined ) parameters.bevelEnabled = false;\n\n\tExtrudeBufferGeometry.call( this, shapes, parameters );\n\n\tthis.type = 'TextBufferGeometry';\n\n}\n\nTextBufferGeometry.prototype = Object.create( ExtrudeBufferGeometry.prototype );\nTextBufferGeometry.prototype.constructor = TextBufferGeometry;\n\n\nexport { TextGeometry, TextBufferGeometry };\n","/**\n * @author jonobr1 / http://jonobr1.com\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { ShapeUtils } from '../extras/ShapeUtils.js';\n\n// ShapeGeometry\n\nfunction ShapeGeometry( shapes, curveSegments ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'ShapeGeometry';\n\n\tif ( typeof curveSegments === 'object' ) {\n\n\t\tconsole.warn( 'THREE.ShapeGeometry: Options parameter has been removed.' );\n\n\t\tcurveSegments = curveSegments.curveSegments;\n\n\t}\n\n\tthis.parameters = {\n\t\tshapes: shapes,\n\t\tcurveSegments: curveSegments\n\t};\n\n\tthis.fromBufferGeometry( new ShapeBufferGeometry( shapes, curveSegments ) );\n\tthis.mergeVertices();\n\n}\n\nShapeGeometry.prototype = Object.create( Geometry.prototype );\nShapeGeometry.prototype.constructor = ShapeGeometry;\n\nShapeGeometry.prototype.toJSON = function () {\n\n\tvar data = Geometry.prototype.toJSON.call( this );\n\n\tvar shapes = this.parameters.shapes;\n\n\treturn toJSON( shapes, data );\n\n};\n\n// ShapeBufferGeometry\n\nfunction ShapeBufferGeometry( shapes, curveSegments ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'ShapeBufferGeometry';\n\n\tthis.parameters = {\n\t\tshapes: shapes,\n\t\tcurveSegments: curveSegments\n\t};\n\n\tcurveSegments = curveSegments || 12;\n\n\t// buffers\n\n\tvar indices = [];\n\tvar vertices = [];\n\tvar normals = [];\n\tvar uvs = [];\n\n\t// helper variables\n\n\tvar groupStart = 0;\n\tvar groupCount = 0;\n\n\t// allow single and array values for \"shapes\" parameter\n\n\tif ( Array.isArray( shapes ) === false ) {\n\n\t\taddShape( shapes );\n\n\t} else {\n\n\t\tfor ( var i = 0; i < shapes.length; i ++ ) {\n\n\t\t\taddShape( shapes[ i ] );\n\n\t\t\tthis.addGroup( groupStart, groupCount, i ); // enables MultiMaterial support\n\n\t\t\tgroupStart += groupCount;\n\t\t\tgroupCount = 0;\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\n\t// helper functions\n\n\tfunction addShape( shape ) {\n\n\t\tvar i, l, shapeHole;\n\n\t\tvar indexOffset = vertices.length / 3;\n\t\tvar points = shape.extractPoints( curveSegments );\n\n\t\tvar shapeVertices = points.shape;\n\t\tvar shapeHoles = points.holes;\n\n\t\t// check direction of vertices\n\n\t\tif ( ShapeUtils.isClockWise( shapeVertices ) === false ) {\n\n\t\t\tshapeVertices = shapeVertices.reverse();\n\n\t\t}\n\n\t\tfor ( i = 0, l = shapeHoles.length; i < l; i ++ ) {\n\n\t\t\tshapeHole = shapeHoles[ i ];\n\n\t\t\tif ( ShapeUtils.isClockWise( shapeHole ) === true ) {\n\n\t\t\t\tshapeHoles[ i ] = shapeHole.reverse();\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar faces = ShapeUtils.triangulateShape( shapeVertices, shapeHoles );\n\n\t\t// join vertices of inner and outer paths to a single array\n\n\t\tfor ( i = 0, l = shapeHoles.length; i < l; i ++ ) {\n\n\t\t\tshapeHole = shapeHoles[ i ];\n\t\t\tshapeVertices = shapeVertices.concat( shapeHole );\n\n\t\t}\n\n\t\t// vertices, normals, uvs\n\n\t\tfor ( i = 0, l = shapeVertices.length; i < l; i ++ ) {\n\n\t\t\tvar vertex = shapeVertices[ i ];\n\n\t\t\tvertices.push( vertex.x, vertex.y, 0 );\n\t\t\tnormals.push( 0, 0, 1 );\n\t\t\tuvs.push( vertex.x, vertex.y ); // world uvs\n\n\t\t}\n\n\t\t// incides\n\n\t\tfor ( i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\tvar face = faces[ i ];\n\n\t\t\tvar a = face[ 0 ] + indexOffset;\n\t\t\tvar b = face[ 1 ] + indexOffset;\n\t\t\tvar c = face[ 2 ] + indexOffset;\n\n\t\t\tindices.push( a, b, c );\n\t\t\tgroupCount += 3;\n\n\t\t}\n\n\t}\n\n}\n\nShapeBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nShapeBufferGeometry.prototype.constructor = ShapeBufferGeometry;\n\nShapeBufferGeometry.prototype.toJSON = function () {\n\n\tvar data = BufferGeometry.prototype.toJSON.call( this );\n\n\tvar shapes = this.parameters.shapes;\n\n\treturn toJSON( shapes, data );\n\n};\n\n//\n\nfunction toJSON( shapes, data ) {\n\n\tdata.shapes = [];\n\n\tif ( Array.isArray( shapes ) ) {\n\n\t\tfor ( var i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\tvar shape = shapes[ i ];\n\n\t\t\tdata.shapes.push( shape.uuid );\n\n\t\t}\n\n\t} else {\n\n\t\tdata.shapes.push( shapes.uuid );\n\n\t}\n\n\treturn data;\n\n}\n\n\nexport { ShapeGeometry, ShapeBufferGeometry };\n","/**\n * @author abelnation / http://github.com/abelnation\n */\n\nimport { CylinderGeometry } from './CylinderGeometry.js';\nimport { CylinderBufferGeometry } from './CylinderGeometry.js';\n\n// ConeGeometry\n\nfunction ConeGeometry( radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\n\n\tCylinderGeometry.call( this, 0, radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength );\n\n\tthis.type = 'ConeGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\theight: height,\n\t\tradialSegments: radialSegments,\n\t\theightSegments: heightSegments,\n\t\topenEnded: openEnded,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n}\n\nConeGeometry.prototype = Object.create( CylinderGeometry.prototype );\nConeGeometry.prototype.constructor = ConeGeometry;\n\n// ConeBufferGeometry\n\nfunction ConeBufferGeometry( radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\n\n\tCylinderBufferGeometry.call( this, 0, radius, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength );\n\n\tthis.type = 'ConeBufferGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\theight: height,\n\t\tradialSegments: radialSegments,\n\t\theightSegments: heightSegments,\n\t\topenEnded: openEnded,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n}\n\nConeBufferGeometry.prototype = Object.create( CylinderBufferGeometry.prototype );\nConeBufferGeometry.prototype.constructor = ConeBufferGeometry;\n\n\nexport { ConeGeometry, ConeBufferGeometry };\n","/**\n * @author benaadams / https://twitter.com/ben_a_adams\n * @author Mugen87 / https://github.com/Mugen87\n * @author hughes\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Vector2 } from '../math/Vector2.js';\n\n// CircleGeometry\n\nfunction CircleGeometry( radius, segments, thetaStart, thetaLength ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'CircleGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tsegments: segments,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tthis.fromBufferGeometry( new CircleBufferGeometry( radius, segments, thetaStart, thetaLength ) );\n\tthis.mergeVertices();\n\n}\n\nCircleGeometry.prototype = Object.create( Geometry.prototype );\nCircleGeometry.prototype.constructor = CircleGeometry;\n\n// CircleBufferGeometry\n\nfunction CircleBufferGeometry( radius, segments, thetaStart, thetaLength ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'CircleBufferGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tsegments: segments,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tradius = radius || 1;\n\tsegments = segments !== undefined ? Math.max( 3, segments ) : 8;\n\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\n\n\t// buffers\n\n\tvar indices = [];\n\tvar vertices = [];\n\tvar normals = [];\n\tvar uvs = [];\n\n\t// helper variables\n\n\tvar i, s;\n\tvar vertex = new Vector3();\n\tvar uv = new Vector2();\n\n\t// center point\n\n\tvertices.push( 0, 0, 0 );\n\tnormals.push( 0, 0, 1 );\n\tuvs.push( 0.5, 0.5 );\n\n\tfor ( s = 0, i = 3; s <= segments; s ++, i += 3 ) {\n\n\t\tvar segment = thetaStart + s / segments * thetaLength;\n\n\t\t// vertex\n\n\t\tvertex.x = radius * Math.cos( segment );\n\t\tvertex.y = radius * Math.sin( segment );\n\n\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t// normal\n\n\t\tnormals.push( 0, 0, 1 );\n\n\t\t// uvs\n\n\t\tuv.x = ( vertices[ i ] / radius + 1 ) / 2;\n\t\tuv.y = ( vertices[ i + 1 ] / radius + 1 ) / 2;\n\n\t\tuvs.push( uv.x, uv.y );\n\n\t}\n\n\t// indices\n\n\tfor ( i = 1; i <= segments; i ++ ) {\n\n\t\tindices.push( i, i + 1, 0 );\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n}\n\nCircleBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nCircleBufferGeometry.prototype.constructor = CircleBufferGeometry;\n\n\nexport { CircleGeometry, CircleBufferGeometry };\n","import { Quaternion } from './Quaternion.js';\nimport { Vector3 } from './Vector3.js';\nimport { Matrix4 } from './Matrix4.js';\nimport { MathUtils } from './MathUtils.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://clara.io\n */\n\nvar _matrix = new Matrix4();\nvar _quaternion = new Quaternion();\n\nfunction Euler( x, y, z, order ) {\n\n\tthis._x = x || 0;\n\tthis._y = y || 0;\n\tthis._z = z || 0;\n\tthis._order = order || Euler.DefaultOrder;\n\n}\n\nEuler.RotationOrders = [ 'XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX' ];\n\nEuler.DefaultOrder = 'XYZ';\n\nObject.defineProperties( Euler.prototype, {\n\n\tx: {\n\n\t\tget: function () {\n\n\t\t\treturn this._x;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._x = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t},\n\n\ty: {\n\n\t\tget: function () {\n\n\t\t\treturn this._y;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._y = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t},\n\n\tz: {\n\n\t\tget: function () {\n\n\t\t\treturn this._z;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._z = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t},\n\n\torder: {\n\n\t\tget: function () {\n\n\t\t\treturn this._order;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._order = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t}\n\n} );\n\nObject.assign( Euler.prototype, {\n\n\tisEuler: true,\n\n\tset: function ( x, y, z, order ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._order = order || this._order;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._order );\n\n\t},\n\n\tcopy: function ( euler ) {\n\n\t\tthis._x = euler._x;\n\t\tthis._y = euler._y;\n\t\tthis._z = euler._z;\n\t\tthis._order = euler._order;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromRotationMatrix: function ( m, order, update ) {\n\n\t\tvar clamp = MathUtils.clamp;\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tvar te = m.elements;\n\t\tvar m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\n\t\tvar m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ];\n\t\tvar m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\torder = order || this._order;\n\n\t\tif ( order === 'XYZ' ) {\n\n\t\t\tthis._y = Math.asin( clamp( m13, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m13 ) < 0.9999999 ) {\n\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\tthis._z = Math.atan2( - m12, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\tthis._z = 0;\n\n\t\t\t}\n\n\t\t} else if ( order === 'YXZ' ) {\n\n\t\t\tthis._x = Math.asin( - clamp( m23, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m23 ) < 0.9999999 ) {\n\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\t\t\t\tthis._z = Math.atan2( m21, m22 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\t\t\t\tthis._z = 0;\n\n\t\t\t}\n\n\t\t} else if ( order === 'ZXY' ) {\n\n\t\t\tthis._x = Math.asin( clamp( m32, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m32 ) < 0.9999999 ) {\n\n\t\t\t\tthis._y = Math.atan2( - m31, m33 );\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._y = 0;\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t}\n\n\t\t} else if ( order === 'ZYX' ) {\n\n\t\t\tthis._y = Math.asin( - clamp( m31, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m31 ) < 0.9999999 ) {\n\n\t\t\t\tthis._x = Math.atan2( m32, m33 );\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t}\n\n\t\t} else if ( order === 'YZX' ) {\n\n\t\t\tthis._z = Math.asin( clamp( m21, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m21 ) < 0.9999999 ) {\n\n\t\t\t\tthis._x = Math.atan2( - m23, m22 );\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\n\t\t\t}\n\n\t\t} else if ( order === 'XZY' ) {\n\n\t\t\tthis._z = Math.asin( - clamp( m12, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m12 ) < 0.9999999 ) {\n\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\tthis._y = Math.atan2( m13, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\tthis._y = 0;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.Euler: .setFromRotationMatrix() given unsupported order: ' + order );\n\n\t\t}\n\n\t\tthis._order = order;\n\n\t\tif ( update !== false ) this._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromQuaternion: function ( q, order, update ) {\n\n\t\t_matrix.makeRotationFromQuaternion( q );\n\n\t\treturn this.setFromRotationMatrix( _matrix, order, update );\n\n\t},\n\n\tsetFromVector3: function ( v, order ) {\n\n\t\treturn this.set( v.x, v.y, v.z, order || this._order );\n\n\t},\n\n\treorder: function ( newOrder ) {\n\n\t\t// WARNING: this discards revolution information -bhouston\n\n\t\t_quaternion.setFromEuler( this );\n\n\t\treturn this.setFromQuaternion( _quaternion, newOrder );\n\n\t},\n\n\tequals: function ( euler ) {\n\n\t\treturn ( euler._x === this._x ) && ( euler._y === this._y ) && ( euler._z === this._z ) && ( euler._order === this._order );\n\n\t},\n\n\tfromArray: function ( array ) {\n\n\t\tthis._x = array[ 0 ];\n\t\tthis._y = array[ 1 ];\n\t\tthis._z = array[ 2 ];\n\t\tif ( array[ 3 ] !== undefined ) this._order = array[ 3 ];\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._order;\n\n\t\treturn array;\n\n\t},\n\n\ttoVector3: function ( optionalResult ) {\n\n\t\tif ( optionalResult ) {\n\n\t\t\treturn optionalResult.set( this._x, this._y, this._z );\n\n\t\t} else {\n\n\t\t\treturn new Vector3( this._x, this._y, this._z );\n\n\t\t}\n\n\t},\n\n\t_onChange: function ( callback ) {\n\n\t\tthis._onChangeCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\t_onChangeCallback: function () {}\n\n} );\n\n\nexport { Euler };\n","import { Material } from './Material.js';\nimport { BasicDepthPacking } from '../constants.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author bhouston / https://clara.io\n * @author WestLangley / http://github.com/WestLangley\n *\n * parameters = {\n *\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>\n * }\n */\n\nfunction MeshDepthMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshDepthMaterial';\n\n\tthis.depthPacking = BasicDepthPacking;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\n\tthis.map = null;\n\n\tthis.alphaMap = null;\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.fog = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshDepthMaterial.prototype = Object.create( Material.prototype );\nMeshDepthMaterial.prototype.constructor = MeshDepthMaterial;\n\nMeshDepthMaterial.prototype.isMeshDepthMaterial = true;\n\nMeshDepthMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.depthPacking = source.depthPacking;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\n\tthis.map = source.map;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\treturn this;\n\n};\n\n\nexport { MeshDepthMaterial };\n","import { Vector3 } from '../math/Vector3.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Sphere } from '../math/Sphere.js';\nimport { Ray } from '../math/Ray.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { Object3D } from '../core/Object3D.js';\nimport { Triangle } from '../math/Triangle.js';\nimport { Face3 } from '../core/Face3.js';\nimport { DoubleSide, BackSide } from '../constants.js';\nimport { MeshBasicMaterial } from '../materials/MeshBasicMaterial.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author jonobr1 / http://jonobr1.com/\n */\n\nvar _inverseMatrix = new Matrix4();\nvar _ray = new Ray();\nvar _sphere = new Sphere();\n\nvar _vA = new Vector3();\nvar _vB = new Vector3();\nvar _vC = new Vector3();\n\nvar _tempA = new Vector3();\nvar _tempB = new Vector3();\nvar _tempC = new Vector3();\n\nvar _morphA = new Vector3();\nvar _morphB = new Vector3();\nvar _morphC = new Vector3();\n\nvar _uvA = new Vector2();\nvar _uvB = new Vector2();\nvar _uvC = new Vector2();\n\nvar _intersectionPoint = new Vector3();\nvar _intersectionPointWorld = new Vector3();\n\nfunction Mesh( geometry, material ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Mesh';\n\n\tthis.geometry = geometry !== undefined ? geometry : new BufferGeometry();\n\tthis.material = material !== undefined ? material : new MeshBasicMaterial();\n\n\tthis.updateMorphTargets();\n\n}\n\nMesh.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Mesh,\n\n\tisMesh: true,\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source );\n\n\t\tif ( source.morphTargetInfluences !== undefined ) {\n\n\t\t\tthis.morphTargetInfluences = source.morphTargetInfluences.slice();\n\n\t\t}\n\n\t\tif ( source.morphTargetDictionary !== undefined ) {\n\n\t\t\tthis.morphTargetDictionary = Object.assign( {}, source.morphTargetDictionary );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tupdateMorphTargets: function () {\n\n\t\tvar geometry = this.geometry;\n\t\tvar m, ml, name;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tvar morphAttributes = geometry.morphAttributes;\n\t\t\tvar keys = Object.keys( morphAttributes );\n\n\t\t\tif ( keys.length > 0 ) {\n\n\t\t\t\tvar morphAttribute = morphAttributes[ keys[ 0 ] ];\n\n\t\t\t\tif ( morphAttribute !== undefined ) {\n\n\t\t\t\t\tthis.morphTargetInfluences = [];\n\t\t\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\t\t\tfor ( m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\n\n\t\t\t\t\t\tname = morphAttribute[ m ].name || String( m );\n\n\t\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tvar morphTargets = geometry.morphTargets;\n\n\t\t\tif ( morphTargets !== undefined && morphTargets.length > 0 ) {\n\n\t\t\t\tconsole.error( 'THREE.Mesh.updateMorphTargets() no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.' );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\traycast: function ( raycaster, intersects ) {\n\n\t\tvar geometry = this.geometry;\n\t\tvar material = this.material;\n\t\tvar matrixWorld = this.matrixWorld;\n\n\t\tif ( material === undefined ) return;\n\n\t\t// Checking boundingSphere distance to ray\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere.copy( geometry.boundingSphere );\n\t\t_sphere.applyMatrix4( matrixWorld );\n\n\t\tif ( raycaster.ray.intersectsSphere( _sphere ) === false ) return;\n\n\t\t//\n\n\t\t_inverseMatrix.getInverse( matrixWorld );\n\t\t_ray.copy( raycaster.ray ).applyMatrix4( _inverseMatrix );\n\n\t\t// Check boundingBox before continuing\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tif ( _ray.intersectsBox( geometry.boundingBox ) === false ) return;\n\n\t\t}\n\n\t\tvar intersection;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tvar a, b, c;\n\t\t\tvar index = geometry.index;\n\t\t\tvar position = geometry.attributes.position;\n\t\t\tvar morphPosition = geometry.morphAttributes.position;\n\t\t\tvar morphTargetsRelative = geometry.morphTargetsRelative;\n\t\t\tvar uv = geometry.attributes.uv;\n\t\t\tvar uv2 = geometry.attributes.uv2;\n\t\t\tvar groups = geometry.groups;\n\t\t\tvar drawRange = geometry.drawRange;\n\t\t\tvar i, j, il, jl;\n\t\t\tvar group, groupMaterial;\n\t\t\tvar start, end;\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\t// indexed buffer geometry\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tfor ( i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tgroup = groups[ i ];\n\t\t\t\t\t\tgroupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\tstart = Math.max( group.start, drawRange.start );\n\t\t\t\t\t\tend = Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) );\n\n\t\t\t\t\t\tfor ( j = start, jl = end; j < jl; j += 3 ) {\n\n\t\t\t\t\t\t\ta = index.getX( j );\n\t\t\t\t\t\t\tb = index.getX( j + 1 );\n\t\t\t\t\t\t\tc = index.getX( j + 2 );\n\n\t\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, groupMaterial, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( j / 3 ); // triangle number in indexed buffer semantics\n\t\t\t\t\t\t\t\tintersection.face.materialIndex = group.materialIndex;\n\t\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstart = Math.max( 0, drawRange.start );\n\t\t\t\t\tend = Math.min( index.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\t\t\tfor ( i = start, il = end; i < il; i += 3 ) {\n\n\t\t\t\t\t\ta = index.getX( i );\n\t\t\t\t\t\tb = index.getX( i + 1 );\n\t\t\t\t\t\tc = index.getX( i + 2 );\n\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, material, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in indexed buffer semantics\n\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( position !== undefined ) {\n\n\t\t\t\t// non-indexed buffer geometry\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tfor ( i = 0, il = groups.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tgroup = groups[ i ];\n\t\t\t\t\t\tgroupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\tstart = Math.max( group.start, drawRange.start );\n\t\t\t\t\t\tend = Math.min( ( group.start + group.count ), ( drawRange.start + drawRange.count ) );\n\n\t\t\t\t\t\tfor ( j = start, jl = end; j < jl; j += 3 ) {\n\n\t\t\t\t\t\t\ta = j;\n\t\t\t\t\t\t\tb = j + 1;\n\t\t\t\t\t\t\tc = j + 2;\n\n\t\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, groupMaterial, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( j / 3 ); // triangle number in non-indexed buffer semantics\n\t\t\t\t\t\t\t\tintersection.face.materialIndex = group.materialIndex;\n\t\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstart = Math.max( 0, drawRange.start );\n\t\t\t\t\tend = Math.min( position.count, ( drawRange.start + drawRange.count ) );\n\n\t\t\t\t\tfor ( i = start, il = end; i < il; i += 3 ) {\n\n\t\t\t\t\t\ta = i;\n\t\t\t\t\t\tb = i + 1;\n\t\t\t\t\t\tc = i + 2;\n\n\t\t\t\t\t\tintersection = checkBufferGeometryIntersection( this, material, raycaster, _ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c );\n\n\t\t\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\t\t\tintersection.faceIndex = Math.floor( i / 3 ); // triangle number in non-indexed buffer semantics\n\t\t\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\tvar fvA, fvB, fvC;\n\t\t\tvar isMultiMaterial = Array.isArray( material );\n\n\t\t\tvar vertices = geometry.vertices;\n\t\t\tvar faces = geometry.faces;\n\t\t\tvar uvs;\n\n\t\t\tvar faceVertexUvs = geometry.faceVertexUvs[ 0 ];\n\t\t\tif ( faceVertexUvs.length > 0 ) uvs = faceVertexUvs;\n\n\t\t\tfor ( var f = 0, fl = faces.length; f < fl; f ++ ) {\n\n\t\t\t\tvar face = faces[ f ];\n\t\t\t\tvar faceMaterial = isMultiMaterial ? material[ face.materialIndex ] : material;\n\n\t\t\t\tif ( faceMaterial === undefined ) continue;\n\n\t\t\t\tfvA = vertices[ face.a ];\n\t\t\t\tfvB = vertices[ face.b ];\n\t\t\t\tfvC = vertices[ face.c ];\n\n\t\t\t\tintersection = checkIntersection( this, faceMaterial, raycaster, _ray, fvA, fvB, fvC, _intersectionPoint );\n\n\t\t\t\tif ( intersection ) {\n\n\t\t\t\t\tif ( uvs && uvs[ f ] ) {\n\n\t\t\t\t\t\tvar uvs_f = uvs[ f ];\n\t\t\t\t\t\t_uvA.copy( uvs_f[ 0 ] );\n\t\t\t\t\t\t_uvB.copy( uvs_f[ 1 ] );\n\t\t\t\t\t\t_uvC.copy( uvs_f[ 2 ] );\n\n\t\t\t\t\t\tintersection.uv = Triangle.getUV( _intersectionPoint, fvA, fvB, fvC, _uvA, _uvB, _uvC, new Vector2() );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tintersection.face = face;\n\t\t\t\t\tintersection.faceIndex = f;\n\t\t\t\t\tintersects.push( intersection );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.geometry, this.material ).copy( this );\n\n\t}\n\n} );\n\nfunction checkIntersection( object, material, raycaster, ray, pA, pB, pC, point ) {\n\n\tvar intersect;\n\n\tif ( material.side === BackSide ) {\n\n\t\tintersect = ray.intersectTriangle( pC, pB, pA, true, point );\n\n\t} else {\n\n\t\tintersect = ray.intersectTriangle( pA, pB, pC, material.side !== DoubleSide, point );\n\n\t}\n\n\tif ( intersect === null ) return null;\n\n\t_intersectionPointWorld.copy( point );\n\t_intersectionPointWorld.applyMatrix4( object.matrixWorld );\n\n\tvar distance = raycaster.ray.origin.distanceTo( _intersectionPointWorld );\n\n\tif ( distance < raycaster.near || distance > raycaster.far ) return null;\n\n\treturn {\n\t\tdistance: distance,\n\t\tpoint: _intersectionPointWorld.clone(),\n\t\tobject: object\n\t};\n\n}\n\nfunction checkBufferGeometryIntersection( object, material, raycaster, ray, position, morphPosition, morphTargetsRelative, uv, uv2, a, b, c ) {\n\n\t_vA.fromBufferAttribute( position, a );\n\t_vB.fromBufferAttribute( position, b );\n\t_vC.fromBufferAttribute( position, c );\n\n\tvar morphInfluences = object.morphTargetInfluences;\n\n\tif ( material.morphTargets && morphPosition && morphInfluences ) {\n\n\t\t_morphA.set( 0, 0, 0 );\n\t\t_morphB.set( 0, 0, 0 );\n\t\t_morphC.set( 0, 0, 0 );\n\n\t\tfor ( var i = 0, il = morphPosition.length; i < il; i ++ ) {\n\n\t\t\tvar influence = morphInfluences[ i ];\n\t\t\tvar morphAttribute = morphPosition[ i ];\n\n\t\t\tif ( influence === 0 ) continue;\n\n\t\t\t_tempA.fromBufferAttribute( morphAttribute, a );\n\t\t\t_tempB.fromBufferAttribute( morphAttribute, b );\n\t\t\t_tempC.fromBufferAttribute( morphAttribute, c );\n\n\t\t\tif ( morphTargetsRelative ) {\n\n\t\t\t\t_morphA.addScaledVector( _tempA, influence );\n\t\t\t\t_morphB.addScaledVector( _tempB, influence );\n\t\t\t\t_morphC.addScaledVector( _tempC, influence );\n\n\t\t\t} else {\n\n\t\t\t\t_morphA.addScaledVector( _tempA.sub( _vA ), influence );\n\t\t\t\t_morphB.addScaledVector( _tempB.sub( _vB ), influence );\n\t\t\t\t_morphC.addScaledVector( _tempC.sub( _vC ), influence );\n\n\t\t\t}\n\n\t\t}\n\n\t\t_vA.add( _morphA );\n\t\t_vB.add( _morphB );\n\t\t_vC.add( _morphC );\n\n\t}\n\n\tvar intersection = checkIntersection( object, material, raycaster, ray, _vA, _vB, _vC, _intersectionPoint );\n\n\tif ( intersection ) {\n\n\t\tif ( uv ) {\n\n\t\t\t_uvA.fromBufferAttribute( uv, a );\n\t\t\t_uvB.fromBufferAttribute( uv, b );\n\t\t\t_uvC.fromBufferAttribute( uv, c );\n\n\t\t\tintersection.uv = Triangle.getUV( _intersectionPoint, _vA, _vB, _vC, _uvA, _uvB, _uvC, new Vector2() );\n\n\t\t}\n\n\t\tif ( uv2 ) {\n\n\t\t\t_uvA.fromBufferAttribute( uv2, a );\n\t\t\t_uvB.fromBufferAttribute( uv2, b );\n\t\t\t_uvC.fromBufferAttribute( uv2, c );\n\n\t\t\tintersection.uv2 = Triangle.getUV( _intersectionPoint, _vA, _vB, _vC, _uvA, _uvB, _uvC, new Vector2() );\n\n\t\t}\n\n\t\tvar face = new Face3( a, b, c );\n\t\tTriangle.getNormal( _vA, _vB, _vC, face.normal );\n\n\t\tintersection.face = face;\n\n\t}\n\n\treturn intersection;\n\n}\n\nexport { Mesh };\n","import { Material } from './Material.js';\nimport { Vector3 } from '../math/Vector3.js';\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n *\n * parameters = {\n *\n *  referencePosition: <float>,\n *  nearDistance: <float>,\n *  farDistance: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>\n *\n * }\n */\n\nfunction MeshDistanceMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshDistanceMaterial';\n\n\tthis.referencePosition = new Vector3();\n\tthis.nearDistance = 1;\n\tthis.farDistance = 1000;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\n\tthis.map = null;\n\n\tthis.alphaMap = null;\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.fog = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshDistanceMaterial.prototype = Object.create( Material.prototype );\nMeshDistanceMaterial.prototype.constructor = MeshDistanceMaterial;\n\nMeshDistanceMaterial.prototype.isMeshDistanceMaterial = true;\n\nMeshDistanceMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.referencePosition.copy( source.referencePosition );\n\tthis.nearDistance = source.nearDistance;\n\tthis.farDistance = source.farDistance;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\n\tthis.map = source.map;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\treturn this;\n\n};\n\n\nexport { MeshDistanceMaterial };\n","import { Curve } from '../core/Curve.js';\nimport { CubicBezier } from '../core/Interpolations.js';\nimport { Vector2 } from '../../math/Vector2.js';\n\n\nfunction CubicBezierCurve( v0, v1, v2, v3 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'CubicBezierCurve';\n\n\tthis.v0 = v0 || new Vector2();\n\tthis.v1 = v1 || new Vector2();\n\tthis.v2 = v2 || new Vector2();\n\tthis.v3 = v3 || new Vector2();\n\n}\n\nCubicBezierCurve.prototype = Object.create( Curve.prototype );\nCubicBezierCurve.prototype.constructor = CubicBezierCurve;\n\nCubicBezierCurve.prototype.isCubicBezierCurve = true;\n\nCubicBezierCurve.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new Vector2();\n\n\tvar v0 = this.v0, v1 = this.v1, v2 = this.v2, v3 = this.v3;\n\n\tpoint.set(\n\t\tCubicBezier( t, v0.x, v1.x, v2.x, v3.x ),\n\t\tCubicBezier( t, v0.y, v1.y, v2.y, v3.y )\n\t);\n\n\treturn point;\n\n};\n\nCubicBezierCurve.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v0.copy( source.v0 );\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\tthis.v3.copy( source.v3 );\n\n\treturn this;\n\n};\n\nCubicBezierCurve.prototype.toJSON = function () {\n\n\tvar data = Curve.prototype.toJSON.call( this );\n\n\tdata.v0 = this.v0.toArray();\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\tdata.v3 = this.v3.toArray();\n\n\treturn data;\n\n};\n\nCubicBezierCurve.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v0.fromArray( json.v0 );\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\tthis.v3.fromArray( json.v3 );\n\n\treturn this;\n\n};\n\n\nexport { CubicBezierCurve };\n","import { Vector2 } from '../../math/Vector2.js';\nimport { Curve } from '../core/Curve.js';\n\n\nfunction LineCurve( v1, v2 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'LineCurve';\n\n\tthis.v1 = v1 || new Vector2();\n\tthis.v2 = v2 || new Vector2();\n\n}\n\nLineCurve.prototype = Object.create( Curve.prototype );\nLineCurve.prototype.constructor = LineCurve;\n\nLineCurve.prototype.isLineCurve = true;\n\nLineCurve.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new Vector2();\n\n\tif ( t === 1 ) {\n\n\t\tpoint.copy( this.v2 );\n\n\t} else {\n\n\t\tpoint.copy( this.v2 ).sub( this.v1 );\n\t\tpoint.multiplyScalar( t ).add( this.v1 );\n\n\t}\n\n\treturn point;\n\n};\n\n// Line curve is linear, so we can overwrite default getPointAt\n\nLineCurve.prototype.getPointAt = function ( u, optionalTarget ) {\n\n\treturn this.getPoint( u, optionalTarget );\n\n};\n\nLineCurve.prototype.getTangent = function ( /* t */ ) {\n\n\tvar tangent = this.v2.clone().sub( this.v1 );\n\n\treturn tangent.normalize();\n\n};\n\nLineCurve.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\n\treturn this;\n\n};\n\nLineCurve.prototype.toJSON = function () {\n\n\tvar data = Curve.prototype.toJSON.call( this );\n\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\n\treturn data;\n\n};\n\nLineCurve.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\n\treturn this;\n\n};\n\n\nexport { LineCurve };\n","import { Curve } from '../core/Curve.js';\nimport { QuadraticBezier } from '../core/Interpolations.js';\nimport { Vector2 } from '../../math/Vector2.js';\n\n\nfunction QuadraticBezierCurve( v0, v1, v2 ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'QuadraticBezierCurve';\n\n\tthis.v0 = v0 || new Vector2();\n\tthis.v1 = v1 || new Vector2();\n\tthis.v2 = v2 || new Vector2();\n\n}\n\nQuadraticBezierCurve.prototype = Object.create( Curve.prototype );\nQuadraticBezierCurve.prototype.constructor = QuadraticBezierCurve;\n\nQuadraticBezierCurve.prototype.isQuadraticBezierCurve = true;\n\nQuadraticBezierCurve.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new Vector2();\n\n\tvar v0 = this.v0, v1 = this.v1, v2 = this.v2;\n\n\tpoint.set(\n\t\tQuadraticBezier( t, v0.x, v1.x, v2.x ),\n\t\tQuadraticBezier( t, v0.y, v1.y, v2.y )\n\t);\n\n\treturn point;\n\n};\n\nQuadraticBezierCurve.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.v0.copy( source.v0 );\n\tthis.v1.copy( source.v1 );\n\tthis.v2.copy( source.v2 );\n\n\treturn this;\n\n};\n\nQuadraticBezierCurve.prototype.toJSON = function () {\n\n\tvar data = Curve.prototype.toJSON.call( this );\n\n\tdata.v0 = this.v0.toArray();\n\tdata.v1 = this.v1.toArray();\n\tdata.v2 = this.v2.toArray();\n\n\treturn data;\n\n};\n\nQuadraticBezierCurve.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.v0.fromArray( json.v0 );\n\tthis.v1.fromArray( json.v1 );\n\tthis.v2.fromArray( json.v2 );\n\n\treturn this;\n\n};\n\n\nexport { QuadraticBezierCurve };\n","import { Curve } from '../core/Curve.js';\nimport { CatmullRom } from '../core/Interpolations.js';\nimport { Vector2 } from '../../math/Vector2.js';\n\n\nfunction SplineCurve( points /* array of Vector2 */ ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'SplineCurve';\n\n\tthis.points = points || [];\n\n}\n\nSplineCurve.prototype = Object.create( Curve.prototype );\nSplineCurve.prototype.constructor = SplineCurve;\n\nSplineCurve.prototype.isSplineCurve = true;\n\nSplineCurve.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new Vector2();\n\n\tvar points = this.points;\n\tvar p = ( points.length - 1 ) * t;\n\n\tvar intPoint = Math.floor( p );\n\tvar weight = p - intPoint;\n\n\tvar p0 = points[ intPoint === 0 ? intPoint : intPoint - 1 ];\n\tvar p1 = points[ intPoint ];\n\tvar p2 = points[ intPoint > points.length - 2 ? points.length - 1 : intPoint + 1 ];\n\tvar p3 = points[ intPoint > points.length - 3 ? points.length - 1 : intPoint + 2 ];\n\n\tpoint.set(\n\t\tCatmullRom( weight, p0.x, p1.x, p2.x, p3.x ),\n\t\tCatmullRom( weight, p0.y, p1.y, p2.y, p3.y )\n\t);\n\n\treturn point;\n\n};\n\nSplineCurve.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.points = [];\n\n\tfor ( var i = 0, l = source.points.length; i < l; i ++ ) {\n\n\t\tvar point = source.points[ i ];\n\n\t\tthis.points.push( point.clone() );\n\n\t}\n\n\treturn this;\n\n};\n\nSplineCurve.prototype.toJSON = function () {\n\n\tvar data = Curve.prototype.toJSON.call( this );\n\n\tdata.points = [];\n\n\tfor ( var i = 0, l = this.points.length; i < l; i ++ ) {\n\n\t\tvar point = this.points[ i ];\n\t\tdata.points.push( point.toArray() );\n\n\t}\n\n\treturn data;\n\n};\n\nSplineCurve.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.points = [];\n\n\tfor ( var i = 0, l = json.points.length; i < l; i ++ ) {\n\n\t\tvar point = json.points[ i ];\n\t\tthis.points.push( new Vector2().fromArray( point ) );\n\n\t}\n\n\treturn this;\n\n};\n\n\nexport { SplineCurve };\n","import { Vector2 } from '../math/Vector2.js';\nimport { MeshStandardMaterial } from './MeshStandardMaterial.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n *\n * parameters = {\n *  clearcoat: <float>,\n *  clearcoatMap: new THREE.Texture( <Image> ),\n *  clearcoatRoughness: <float>,\n *  clearcoatRoughnessMap: new THREE.Texture( <Image> ),\n *  clearcoatNormalScale: <Vector2>,\n *  clearcoatNormalMap: new THREE.Texture( <Image> ),\n *\n *  reflectivity: <float>,\n *\n *  sheen: <Color>,\n *\n *  transparency: <float>\n * }\n */\n\nfunction MeshPhysicalMaterial( parameters ) {\n\n\tMeshStandardMaterial.call( this );\n\n\tthis.defines = {\n\n\t\t'STANDARD': '',\n\t\t'PHYSICAL': ''\n\n\t};\n\n\tthis.type = 'MeshPhysicalMaterial';\n\n\tthis.clearcoat = 0.0;\n\tthis.clearcoatMap = null;\n\tthis.clearcoatRoughness = 0.0;\n\tthis.clearcoatRoughnessMap = null;\n\tthis.clearcoatNormalScale = new Vector2( 1, 1 );\n\tthis.clearcoatNormalMap = null;\n\n\tthis.reflectivity = 0.5; // maps to F0 = 0.04\n\n\tthis.sheen = null; // null will disable sheen bsdf\n\n\tthis.transparency = 0.0;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshPhysicalMaterial.prototype = Object.create( MeshStandardMaterial.prototype );\nMeshPhysicalMaterial.prototype.constructor = MeshPhysicalMaterial;\n\nMeshPhysicalMaterial.prototype.isMeshPhysicalMaterial = true;\n\nMeshPhysicalMaterial.prototype.copy = function ( source ) {\n\n\tMeshStandardMaterial.prototype.copy.call( this, source );\n\n\tthis.defines = {\n\n\t\t'STANDARD': '',\n\t\t'PHYSICAL': ''\n\n\t};\n\n\tthis.clearcoat = source.clearcoat;\n\tthis.clearcoatMap = source.clearcoatMap;\n\tthis.clearcoatRoughness = source.clearcoatRoughness;\n\tthis.clearcoatRoughnessMap = source.clearcoatRoughnessMap;\n\tthis.clearcoatNormalMap = source.clearcoatNormalMap;\n\tthis.clearcoatNormalScale.copy( source.clearcoatNormalScale );\n\n\tthis.reflectivity = source.reflectivity;\n\n\tif ( source.sheen ) {\n\n\t\tthis.sheen = ( this.sheen || new Color() ).copy( source.sheen );\n\n\t} else {\n\n\t\tthis.sheen = null;\n\n\t}\n\n\tthis.transparency = source.transparency;\n\n\treturn this;\n\n};\n\nexport { MeshPhysicalMaterial };\n","import { MultiplyOperation, TangentSpaceNormalMap } from '../constants.js';\nimport { Material } from './Material.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  specular: <hex>,\n *  shininess: <float>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalMapType: THREE.TangentSpaceNormalMap,\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.MultiplyOperation,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshPhongMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshPhongMaterial';\n\n\tthis.color = new Color( 0xffffff ); // diffuse\n\tthis.specular = new Color( 0x111111 );\n\tthis.shininess = 30;\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.emissive = new Color( 0x000000 );\n\tthis.emissiveIntensity = 1.0;\n\tthis.emissiveMap = null;\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalMapType = TangentSpaceNormalMap;\n\tthis.normalScale = new Vector2( 1, 1 );\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.specularMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.combine = MultiplyOperation;\n\tthis.reflectivity = 1;\n\tthis.refractionRatio = 0.98;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshPhongMaterial.prototype = Object.create( Material.prototype );\nMeshPhongMaterial.prototype.constructor = MeshPhongMaterial;\n\nMeshPhongMaterial.prototype.isMeshPhongMaterial = true;\n\nMeshPhongMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\tthis.specular.copy( source.specular );\n\tthis.shininess = source.shininess;\n\n\tthis.map = source.map;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.emissive.copy( source.emissive );\n\tthis.emissiveMap = source.emissiveMap;\n\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\tthis.bumpMap = source.bumpMap;\n\tthis.bumpScale = source.bumpScale;\n\n\tthis.normalMap = source.normalMap;\n\tthis.normalMapType = source.normalMapType;\n\tthis.normalScale.copy( source.normalScale );\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.specularMap = source.specularMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.envMap = source.envMap;\n\tthis.combine = source.combine;\n\tthis.reflectivity = source.reflectivity;\n\tthis.refractionRatio = source.refractionRatio;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n\nexport { MeshPhongMaterial };\n","import { BufferAttribute } from './BufferAttribute.js';\n\n/**\n * @author benaadams / https://twitter.com/ben_a_adams\n */\n\nfunction InstancedBufferAttribute( array, itemSize, normalized, meshPerAttribute ) {\n\n\tif ( typeof ( normalized ) === 'number' ) {\n\n\t\tmeshPerAttribute = normalized;\n\n\t\tnormalized = false;\n\n\t\tconsole.error( 'THREE.InstancedBufferAttribute: The constructor now expects normalized as the third argument.' );\n\n\t}\n\n\tBufferAttribute.call( this, array, itemSize, normalized );\n\n\tthis.meshPerAttribute = meshPerAttribute || 1;\n\n}\n\nInstancedBufferAttribute.prototype = Object.assign( Object.create( BufferAttribute.prototype ), {\n\n\tconstructor: InstancedBufferAttribute,\n\n\tisInstancedBufferAttribute: true,\n\n\tcopy: function ( source ) {\n\n\t\tBufferAttribute.prototype.copy.call( this, source );\n\n\t\tthis.meshPerAttribute = source.meshPerAttribute;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ()\t{\n\n\t\tvar data = BufferAttribute.prototype.toJSON.call( this );\n\n\t\tdata.meshPerAttribute = this.meshPerAttribute;\n\n\t\tdata.isInstancedBufferAttribute = true;\n\n\t\treturn data;\n\n\t}\n\n} );\n\n\n\nexport { InstancedBufferAttribute };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Layers() {\n\n\tthis.mask = 1 | 0;\n\n}\n\nObject.assign( Layers.prototype, {\n\n\tset: function ( channel ) {\n\n\t\tthis.mask = 1 << channel | 0;\n\n\t},\n\n\tenable: function ( channel ) {\n\n\t\tthis.mask |= 1 << channel | 0;\n\n\t},\n\n\tenableAll: function () {\n\n\t\tthis.mask = 0xffffffff | 0;\n\n\t},\n\n\ttoggle: function ( channel ) {\n\n\t\tthis.mask ^= 1 << channel | 0;\n\n\t},\n\n\tdisable: function ( channel ) {\n\n\t\tthis.mask &= ~ ( 1 << channel | 0 );\n\n\t},\n\n\tdisableAll: function () {\n\n\t\tthis.mask = 0;\n\n\t},\n\n\ttest: function ( layers ) {\n\n\t\treturn ( this.mask & layers.mask ) !== 0;\n\n\t}\n\n} );\n\n\nexport { Layers };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction arrayMin( array ) {\n\n\tif ( array.length === 0 ) return Infinity;\n\n\tvar min = array[ 0 ];\n\n\tfor ( var i = 1, l = array.length; i < l; ++ i ) {\n\n\t\tif ( array[ i ] < min ) min = array[ i ];\n\n\t}\n\n\treturn min;\n\n}\n\nfunction arrayMax( array ) {\n\n\tif ( array.length === 0 ) return - Infinity;\n\n\tvar max = array[ 0 ];\n\n\tfor ( var i = 1, l = array.length; i < l; ++ i ) {\n\n\t\tif ( array[ i ] > max ) max = array[ i ];\n\n\t}\n\n\treturn max;\n\n}\n\nexport { arrayMin, arrayMax };\n","/**\n * Uniform Utilities\n */\n\nexport function cloneUniforms( src ) {\n\n\tvar dst = {};\n\n\tfor ( var u in src ) {\n\n\t\tdst[ u ] = {};\n\n\t\tfor ( var p in src[ u ] ) {\n\n\t\t\tvar property = src[ u ][ p ];\n\n\t\t\tif ( property && ( property.isColor ||\n\t\t\t\tproperty.isMatrix3 || property.isMatrix4 ||\n\t\t\t\tproperty.isVector2 || property.isVector3 || property.isVector4 ||\n\t\t\t\tproperty.isTexture ) ) {\n\n\t\t\t\tdst[ u ][ p ] = property.clone();\n\n\t\t\t} else if ( Array.isArray( property ) ) {\n\n\t\t\t\tdst[ u ][ p ] = property.slice();\n\n\t\t\t} else {\n\n\t\t\t\tdst[ u ][ p ] = property;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn dst;\n\n}\n\nexport function mergeUniforms( uniforms ) {\n\n\tvar merged = {};\n\n\tfor ( var u = 0; u < uniforms.length; u ++ ) {\n\n\t\tvar tmp = cloneUniforms( uniforms[ u ] );\n\n\t\tfor ( var p in tmp ) {\n\n\t\t\tmerged[ p ] = tmp[ p ];\n\n\t\t}\n\n\t}\n\n\treturn merged;\n\n}\n\n// Legacy\n\nvar UniformsUtils = { clone: cloneUniforms, merge: mergeUniforms };\n\nexport { UniformsUtils };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { Texture } from './Texture.js';\nimport { CubeReflectionMapping, RGBFormat } from '../constants.js';\n\nfunction CubeTexture( images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\n\n\timages = images !== undefined ? images : [];\n\tmapping = mapping !== undefined ? mapping : CubeReflectionMapping;\n\tformat = format !== undefined ? format : RGBFormat;\n\n\tTexture.call( this, images, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\tthis.flipY = false;\n\n}\n\nCubeTexture.prototype = Object.create( Texture.prototype );\nCubeTexture.prototype.constructor = CubeTexture;\n\nCubeTexture.prototype.isCubeTexture = true;\n\nObject.defineProperty( CubeTexture.prototype, 'images', {\n\n\tget: function () {\n\n\t\treturn this.image;\n\n\t},\n\n\tset: function ( value ) {\n\n\t\tthis.image = value;\n\n\t}\n\n} );\n\n\nexport { CubeTexture };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { Cache } from './Cache.js';\nimport { Loader } from './Loader.js';\n\nfunction ImageLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nImageLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: ImageLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\turl = this.manager.resolveURL( url );\n\n\t\tvar scope = this;\n\n\t\tvar cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tsetTimeout( function () {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\tvar image = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'img' );\n\n\t\tfunction onImageLoad() {\n\n\t\t\timage.removeEventListener( 'load', onImageLoad, false );\n\t\t\timage.removeEventListener( 'error', onImageError, false );\n\n\t\t\tCache.add( url, this );\n\n\t\t\tif ( onLoad ) onLoad( this );\n\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t}\n\n\t\tfunction onImageError( event ) {\n\n\t\t\timage.removeEventListener( 'load', onImageLoad, false );\n\t\t\timage.removeEventListener( 'error', onImageError, false );\n\n\t\t\tif ( onError ) onError( event );\n\n\t\t\tscope.manager.itemError( url );\n\t\t\tscope.manager.itemEnd( url );\n\n\t\t}\n\n\t\timage.addEventListener( 'load', onImageLoad, false );\n\t\timage.addEventListener( 'error', onImageError, false );\n\n\t\tif ( url.substr( 0, 5 ) !== 'data:' ) {\n\n\t\t\tif ( this.crossOrigin !== undefined ) image.crossOrigin = this.crossOrigin;\n\n\t\t}\n\n\t\tscope.manager.itemStart( url );\n\n\t\timage.src = url;\n\n\t\treturn image;\n\n\t}\n\n} );\n\n\nexport { ImageLoader };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction LoadingManager( onLoad, onProgress, onError ) {\n\n\tvar scope = this;\n\n\tvar isLoading = false;\n\tvar itemsLoaded = 0;\n\tvar itemsTotal = 0;\n\tvar urlModifier = undefined;\n\tvar handlers = [];\n\n\t// Refer to #5689 for the reason why we don't set .onStart\n\t// in the constructor\n\n\tthis.onStart = undefined;\n\tthis.onLoad = onLoad;\n\tthis.onProgress = onProgress;\n\tthis.onError = onError;\n\n\tthis.itemStart = function ( url ) {\n\n\t\titemsTotal ++;\n\n\t\tif ( isLoading === false ) {\n\n\t\t\tif ( scope.onStart !== undefined ) {\n\n\t\t\t\tscope.onStart( url, itemsLoaded, itemsTotal );\n\n\t\t\t}\n\n\t\t}\n\n\t\tisLoading = true;\n\n\t};\n\n\tthis.itemEnd = function ( url ) {\n\n\t\titemsLoaded ++;\n\n\t\tif ( scope.onProgress !== undefined ) {\n\n\t\t\tscope.onProgress( url, itemsLoaded, itemsTotal );\n\n\t\t}\n\n\t\tif ( itemsLoaded === itemsTotal ) {\n\n\t\t\tisLoading = false;\n\n\t\t\tif ( scope.onLoad !== undefined ) {\n\n\t\t\t\tscope.onLoad();\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.itemError = function ( url ) {\n\n\t\tif ( scope.onError !== undefined ) {\n\n\t\t\tscope.onError( url );\n\n\t\t}\n\n\t};\n\n\tthis.resolveURL = function ( url ) {\n\n\t\tif ( urlModifier ) {\n\n\t\t\treturn urlModifier( url );\n\n\t\t}\n\n\t\treturn url;\n\n\t};\n\n\tthis.setURLModifier = function ( transform ) {\n\n\t\turlModifier = transform;\n\n\t\treturn this;\n\n\t};\n\n\tthis.addHandler = function ( regex, loader ) {\n\n\t\thandlers.push( regex, loader );\n\n\t\treturn this;\n\n\t};\n\n\tthis.removeHandler = function ( regex ) {\n\n\t\tvar index = handlers.indexOf( regex );\n\n\t\tif ( index !== - 1 ) {\n\n\t\t\thandlers.splice( index, 2 );\n\n\t\t}\n\n\t\treturn this;\n\n\t};\n\n\tthis.getHandler = function ( file ) {\n\n\t\tfor ( var i = 0, l = handlers.length; i < l; i += 2 ) {\n\n\t\t\tvar regex = handlers[ i ];\n\t\t\tvar loader = handlers[ i + 1 ];\n\n\t\t\tif ( regex.global ) regex.lastIndex = 0; // see #17920\n\n\t\t\tif ( regex.test( file ) ) {\n\n\t\t\t\treturn loader;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t};\n\n}\n\nvar DefaultLoadingManager = new LoadingManager();\n\n\nexport { DefaultLoadingManager, LoadingManager };\n","import { Interpolant } from '../Interpolant.js';\n\n/**\n * @author tschw\n */\n\nfunction LinearInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n}\n\nLinearInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\n\n\tconstructor: LinearInterpolant,\n\n\tinterpolate_: function ( i1, t0, t, t1 ) {\n\n\t\tvar result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\toffset1 = i1 * stride,\n\t\t\toffset0 = offset1 - stride,\n\n\t\t\tweight1 = ( t - t0 ) / ( t1 - t0 ),\n\t\t\tweight0 = 1 - weight1;\n\n\t\tfor ( var i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] =\n\t\t\t\t\tvalues[ offset0 + i ] * weight0 +\n\t\t\t\t\tvalues[ offset1 + i ] * weight1;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n} );\n\n\nexport { LinearInterpolant };\n","/**\n *\n * A reference to a real property in the scene graph.\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\n// Characters [].:/ are reserved for track binding syntax.\nvar _RESERVED_CHARS_RE = '\\\\[\\\\]\\\\.:\\\\/';\nvar _reservedRe = new RegExp( '[' + _RESERVED_CHARS_RE + ']', 'g' );\n\n// Attempts to allow node names from any language. ES5's `\\w` regexp matches\n// only latin characters, and the unicode \\p{L} is not yet supported. So\n// instead, we exclude reserved characters and match everything else.\nvar _wordChar = '[^' + _RESERVED_CHARS_RE + ']';\nvar _wordCharOrDot = '[^' + _RESERVED_CHARS_RE.replace( '\\\\.', '' ) + ']';\n\n// Parent directories, delimited by '/' or ':'. Currently unused, but must\n// be matched to parse the rest of the track name.\nvar _directoryRe = /((?:WC+[\\/:])*)/.source.replace( 'WC', _wordChar );\n\n// Target node. May contain word characters (a-zA-Z0-9_) and '.' or '-'.\nvar _nodeRe = /(WCOD+)?/.source.replace( 'WCOD', _wordCharOrDot );\n\n// Object on target node, and accessor. May not contain reserved\n// characters. Accessor may contain any character except closing bracket.\nvar _objectRe = /(?:\\.(WC+)(?:\\[(.+)\\])?)?/.source.replace( 'WC', _wordChar );\n\n// Property and accessor. May not contain reserved characters. Accessor may\n// contain any non-bracket characters.\nvar _propertyRe = /\\.(WC+)(?:\\[(.+)\\])?/.source.replace( 'WC', _wordChar );\n\nvar _trackRe = new RegExp( ''\n\t+ '^'\n\t+ _directoryRe\n\t+ _nodeRe\n\t+ _objectRe\n\t+ _propertyRe\n\t+ '$'\n);\n\nvar _supportedObjectNames = [ 'material', 'materials', 'bones' ];\n\nfunction Composite( targetGroup, path, optionalParsedPath ) {\n\n\tvar parsedPath = optionalParsedPath || PropertyBinding.parseTrackName( path );\n\n\tthis._targetGroup = targetGroup;\n\tthis._bindings = targetGroup.subscribe_( path, parsedPath );\n\n}\n\nObject.assign( Composite.prototype, {\n\n\tgetValue: function ( array, offset ) {\n\n\t\tthis.bind(); // bind all binding\n\n\t\tvar firstValidIndex = this._targetGroup.nCachedObjects_,\n\t\t\tbinding = this._bindings[ firstValidIndex ];\n\n\t\t// and only call .getValue on the first\n\t\tif ( binding !== undefined ) binding.getValue( array, offset );\n\n\t},\n\n\tsetValue: function ( array, offset ) {\n\n\t\tvar bindings = this._bindings;\n\n\t\tfor ( var i = this._targetGroup.nCachedObjects_, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tbindings[ i ].setValue( array, offset );\n\n\t\t}\n\n\t},\n\n\tbind: function () {\n\n\t\tvar bindings = this._bindings;\n\n\t\tfor ( var i = this._targetGroup.nCachedObjects_, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tbindings[ i ].bind();\n\n\t\t}\n\n\t},\n\n\tunbind: function () {\n\n\t\tvar bindings = this._bindings;\n\n\t\tfor ( var i = this._targetGroup.nCachedObjects_, n = bindings.length; i !== n; ++ i ) {\n\n\t\t\tbindings[ i ].unbind();\n\n\t\t}\n\n\t}\n\n} );\n\n\nfunction PropertyBinding( rootNode, path, parsedPath ) {\n\n\tthis.path = path;\n\tthis.parsedPath = parsedPath || PropertyBinding.parseTrackName( path );\n\n\tthis.node = PropertyBinding.findNode( rootNode, this.parsedPath.nodeName ) || rootNode;\n\n\tthis.rootNode = rootNode;\n\n}\n\nObject.assign( PropertyBinding, {\n\n\tComposite: Composite,\n\n\tcreate: function ( root, path, parsedPath ) {\n\n\t\tif ( ! ( root && root.isAnimationObjectGroup ) ) {\n\n\t\t\treturn new PropertyBinding( root, path, parsedPath );\n\n\t\t} else {\n\n\t\t\treturn new PropertyBinding.Composite( root, path, parsedPath );\n\n\t\t}\n\n\t},\n\n\t/**\n\t * Replaces spaces with underscores and removes unsupported characters from\n\t * node names, to ensure compatibility with parseTrackName().\n\t *\n\t * @param {string} name Node name to be sanitized.\n\t * @return {string}\n\t */\n\tsanitizeNodeName: function ( name ) {\n\n\t\treturn name.replace( /\\s/g, '_' ).replace( _reservedRe, '' );\n\n\t},\n\n\tparseTrackName: function ( trackName ) {\n\n\t\tvar matches = _trackRe.exec( trackName );\n\n\t\tif ( ! matches ) {\n\n\t\t\tthrow new Error( 'PropertyBinding: Cannot parse trackName: ' + trackName );\n\n\t\t}\n\n\t\tvar results = {\n\t\t\t// directoryName: matches[ 1 ], // (tschw) currently unused\n\t\t\tnodeName: matches[ 2 ],\n\t\t\tobjectName: matches[ 3 ],\n\t\t\tobjectIndex: matches[ 4 ],\n\t\t\tpropertyName: matches[ 5 ], // required\n\t\t\tpropertyIndex: matches[ 6 ]\n\t\t};\n\n\t\tvar lastDot = results.nodeName && results.nodeName.lastIndexOf( '.' );\n\n\t\tif ( lastDot !== undefined && lastDot !== - 1 ) {\n\n\t\t\tvar objectName = results.nodeName.substring( lastDot + 1 );\n\n\t\t\t// Object names must be checked against a whitelist. Otherwise, there\n\t\t\t// is no way to parse 'foo.bar.baz': 'baz' must be a property, but\n\t\t\t// 'bar' could be the objectName, or part of a nodeName (which can\n\t\t\t// include '.' characters).\n\t\t\tif ( _supportedObjectNames.indexOf( objectName ) !== - 1 ) {\n\n\t\t\t\tresults.nodeName = results.nodeName.substring( 0, lastDot );\n\t\t\t\tresults.objectName = objectName;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( results.propertyName === null || results.propertyName.length === 0 ) {\n\n\t\t\tthrow new Error( 'PropertyBinding: can not parse propertyName from trackName: ' + trackName );\n\n\t\t}\n\n\t\treturn results;\n\n\t},\n\n\tfindNode: function ( root, nodeName ) {\n\n\t\tif ( ! nodeName || nodeName === \"\" || nodeName === \".\" || nodeName === - 1 || nodeName === root.name || nodeName === root.uuid ) {\n\n\t\t\treturn root;\n\n\t\t}\n\n\t\t// search into skeleton bones.\n\t\tif ( root.skeleton ) {\n\n\t\t\tvar bone = root.skeleton.getBoneByName( nodeName );\n\n\t\t\tif ( bone !== undefined ) {\n\n\t\t\t\treturn bone;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// search into node subtree.\n\t\tif ( root.children ) {\n\n\t\t\tvar searchNodeSubtree = function ( children ) {\n\n\t\t\t\tfor ( var i = 0; i < children.length; i ++ ) {\n\n\t\t\t\t\tvar childNode = children[ i ];\n\n\t\t\t\t\tif ( childNode.name === nodeName || childNode.uuid === nodeName ) {\n\n\t\t\t\t\t\treturn childNode;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar result = searchNodeSubtree( childNode.children );\n\n\t\t\t\t\tif ( result ) return result;\n\n\t\t\t\t}\n\n\t\t\t\treturn null;\n\n\t\t\t};\n\n\t\t\tvar subTreeNode = searchNodeSubtree( root.children );\n\n\t\t\tif ( subTreeNode ) {\n\n\t\t\t\treturn subTreeNode;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n} );\n\nObject.assign( PropertyBinding.prototype, { // prototype, continued\n\n\t// these are used to \"bind\" a nonexistent property\n\t_getValue_unavailable: function () {},\n\t_setValue_unavailable: function () {},\n\n\tBindingType: {\n\t\tDirect: 0,\n\t\tEntireArray: 1,\n\t\tArrayElement: 2,\n\t\tHasFromToArray: 3\n\t},\n\n\tVersioning: {\n\t\tNone: 0,\n\t\tNeedsUpdate: 1,\n\t\tMatrixWorldNeedsUpdate: 2\n\t},\n\n\tGetterByBindingType: [\n\n\t\tfunction getValue_direct( buffer, offset ) {\n\n\t\t\tbuffer[ offset ] = this.node[ this.propertyName ];\n\n\t\t},\n\n\t\tfunction getValue_array( buffer, offset ) {\n\n\t\t\tvar source = this.resolvedProperty;\n\n\t\t\tfor ( var i = 0, n = source.length; i !== n; ++ i ) {\n\n\t\t\t\tbuffer[ offset ++ ] = source[ i ];\n\n\t\t\t}\n\n\t\t},\n\n\t\tfunction getValue_arrayElement( buffer, offset ) {\n\n\t\t\tbuffer[ offset ] = this.resolvedProperty[ this.propertyIndex ];\n\n\t\t},\n\n\t\tfunction getValue_toArray( buffer, offset ) {\n\n\t\t\tthis.resolvedProperty.toArray( buffer, offset );\n\n\t\t}\n\n\t],\n\n\tSetterByBindingTypeAndVersioning: [\n\n\t\t[\n\t\t\t// Direct\n\n\t\t\tfunction setValue_direct( buffer, offset ) {\n\n\t\t\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\n\n\t\t\t},\n\n\t\t\tfunction setValue_direct_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\n\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t},\n\n\t\t\tfunction setValue_direct_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.targetObject[ this.propertyName ] = buffer[ offset ];\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t], [\n\n\t\t\t// EntireArray\n\n\t\t\tfunction setValue_array( buffer, offset ) {\n\n\t\t\t\tvar dest = this.resolvedProperty;\n\n\t\t\t\tfor ( var i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tfunction setValue_array_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tvar dest = this.resolvedProperty;\n\n\t\t\t\tfor ( var i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t\t\t}\n\n\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t},\n\n\t\t\tfunction setValue_array_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tvar dest = this.resolvedProperty;\n\n\t\t\t\tfor ( var i = 0, n = dest.length; i !== n; ++ i ) {\n\n\t\t\t\t\tdest[ i ] = buffer[ offset ++ ];\n\n\t\t\t\t}\n\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t], [\n\n\t\t\t// ArrayElement\n\n\t\t\tfunction setValue_arrayElement( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\n\t\t\t},\n\n\t\t\tfunction setValue_arrayElement_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t},\n\n\t\t\tfunction setValue_arrayElement_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty[ this.propertyIndex ] = buffer[ offset ];\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t], [\n\n\t\t\t// HasToFromArray\n\n\t\t\tfunction setValue_fromArray( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\n\t\t\t},\n\n\t\t\tfunction setValue_fromArray_setNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\t\t\t\tthis.targetObject.needsUpdate = true;\n\n\t\t\t},\n\n\t\t\tfunction setValue_fromArray_setMatrixWorldNeedsUpdate( buffer, offset ) {\n\n\t\t\t\tthis.resolvedProperty.fromArray( buffer, offset );\n\t\t\t\tthis.targetObject.matrixWorldNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t]\n\n\t],\n\n\tgetValue: function getValue_unbound( targetArray, offset ) {\n\n\t\tthis.bind();\n\t\tthis.getValue( targetArray, offset );\n\n\t\t// Note: This class uses a State pattern on a per-method basis:\n\t\t// 'bind' sets 'this.getValue' / 'setValue' and shadows the\n\t\t// prototype version of these methods with one that represents\n\t\t// the bound state. When the property is not found, the methods\n\t\t// become no-ops.\n\n\t},\n\n\tsetValue: function getValue_unbound( sourceArray, offset ) {\n\n\t\tthis.bind();\n\t\tthis.setValue( sourceArray, offset );\n\n\t},\n\n\t// create getter / setter pair for a property in the scene graph\n\tbind: function () {\n\n\t\tvar targetObject = this.node,\n\t\t\tparsedPath = this.parsedPath,\n\n\t\t\tobjectName = parsedPath.objectName,\n\t\t\tpropertyName = parsedPath.propertyName,\n\t\t\tpropertyIndex = parsedPath.propertyIndex;\n\n\t\tif ( ! targetObject ) {\n\n\t\t\ttargetObject = PropertyBinding.findNode( this.rootNode, parsedPath.nodeName ) || this.rootNode;\n\n\t\t\tthis.node = targetObject;\n\n\t\t}\n\n\t\t// set fail state so we can just 'return' on error\n\t\tthis.getValue = this._getValue_unavailable;\n\t\tthis.setValue = this._setValue_unavailable;\n\n\t\t// ensure there is a value node\n\t\tif ( ! targetObject ) {\n\n\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to update node for track: ' + this.path + ' but it wasn\\'t found.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( objectName ) {\n\n\t\t\tvar objectIndex = parsedPath.objectIndex;\n\n\t\t\t// special cases were we need to reach deeper into the hierarchy to get the face materials....\n\t\t\tswitch ( objectName ) {\n\n\t\t\t\tcase 'materials':\n\n\t\t\t\t\tif ( ! targetObject.material ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to material as node does not have a material.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( ! targetObject.material.materials ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttargetObject = targetObject.material.materials;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'bones':\n\n\t\t\t\t\tif ( ! targetObject.skeleton ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// potential future optimization: skip this if propertyIndex is already an integer\n\t\t\t\t\t// and convert the integer string to a true integer.\n\n\t\t\t\t\ttargetObject = targetObject.skeleton.bones;\n\n\t\t\t\t\t// support resolving morphTarget names into indices.\n\t\t\t\t\tfor ( var i = 0; i < targetObject.length; i ++ ) {\n\n\t\t\t\t\t\tif ( targetObject[ i ].name === objectIndex ) {\n\n\t\t\t\t\t\t\tobjectIndex = i;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\n\t\t\t\t\tif ( targetObject[ objectName ] === undefined ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to objectName of node undefined.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\ttargetObject = targetObject[ objectName ];\n\n\t\t\t}\n\n\n\t\t\tif ( objectIndex !== undefined ) {\n\n\t\t\t\tif ( targetObject[ objectIndex ] === undefined ) {\n\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.', this, targetObject );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\ttargetObject = targetObject[ objectIndex ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// resolve property\n\t\tvar nodeProperty = targetObject[ propertyName ];\n\n\t\tif ( nodeProperty === undefined ) {\n\n\t\t\tvar nodeName = parsedPath.nodeName;\n\n\t\t\tconsole.error( 'THREE.PropertyBinding: Trying to update property for track: ' + nodeName +\n\t\t\t\t'.' + propertyName + ' but it wasn\\'t found.', targetObject );\n\t\t\treturn;\n\n\t\t}\n\n\t\t// determine versioning scheme\n\t\tvar versioning = this.Versioning.None;\n\n\t\tthis.targetObject = targetObject;\n\n\t\tif ( targetObject.needsUpdate !== undefined ) { // material\n\n\t\t\tversioning = this.Versioning.NeedsUpdate;\n\n\t\t} else if ( targetObject.matrixWorldNeedsUpdate !== undefined ) { // node transform\n\n\t\t\tversioning = this.Versioning.MatrixWorldNeedsUpdate;\n\n\t\t}\n\n\t\t// determine how the property gets bound\n\t\tvar bindingType = this.BindingType.Direct;\n\n\t\tif ( propertyIndex !== undefined ) {\n\n\t\t\t// access a sub element of the property array (only primitives are supported right now)\n\n\t\t\tif ( propertyName === \"morphTargetInfluences\" ) {\n\n\t\t\t\t// potential optimization, skip this if propertyIndex is already an integer, and convert the integer string to a true integer.\n\n\t\t\t\t// support resolving morphTarget names into indices.\n\t\t\t\tif ( ! targetObject.geometry ) {\n\n\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.', this );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( targetObject.geometry.isBufferGeometry ) {\n\n\t\t\t\t\tif ( ! targetObject.geometry.morphAttributes ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( var i = 0; i < this.node.geometry.morphAttributes.position.length; i ++ ) {\n\n\t\t\t\t\t\tif ( targetObject.geometry.morphAttributes.position[ i ].name === propertyIndex ) {\n\n\t\t\t\t\t\t\tpropertyIndex = i;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( ! targetObject.geometry.morphTargets ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphTargets.', this );\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfor ( var i = 0; i < this.node.geometry.morphTargets.length; i ++ ) {\n\n\t\t\t\t\t\tif ( targetObject.geometry.morphTargets[ i ].name === propertyIndex ) {\n\n\t\t\t\t\t\t\tpropertyIndex = i;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tbindingType = this.BindingType.ArrayElement;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\t\t\tthis.propertyIndex = propertyIndex;\n\n\t\t} else if ( nodeProperty.fromArray !== undefined && nodeProperty.toArray !== undefined ) {\n\n\t\t\t// must use copy for Object3D.Euler/Quaternion\n\n\t\t\tbindingType = this.BindingType.HasFromToArray;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\n\t\t} else if ( Array.isArray( nodeProperty ) ) {\n\n\t\t\tbindingType = this.BindingType.EntireArray;\n\n\t\t\tthis.resolvedProperty = nodeProperty;\n\n\t\t} else {\n\n\t\t\tthis.propertyName = propertyName;\n\n\t\t}\n\n\t\t// select getter / setter\n\t\tthis.getValue = this.GetterByBindingType[ bindingType ];\n\t\tthis.setValue = this.SetterByBindingTypeAndVersioning[ bindingType ][ versioning ];\n\n\t},\n\n\tunbind: function () {\n\n\t\tthis.node = null;\n\n\t\t// back to the prototype version of getValue / setValue\n\t\t// note: avoiding to mutate the shape of 'this' via 'delete'\n\t\tthis.getValue = this._getValue_unbound;\n\t\tthis.setValue = this._setValue_unbound;\n\n\t}\n\n} );\n\n// DECLARE ALIAS AFTER assign prototype\nObject.assign( PropertyBinding.prototype, {\n\n\t// initial state of these methods that calls 'bind'\n\t_getValue_unbound: PropertyBinding.prototype.getValue,\n\t_setValue_unbound: PropertyBinding.prototype.setValue,\n\n} );\n\nexport { PropertyBinding };\n","import { Line } from './Line.js';\n\n/**\n * @author mgreter / http://github.com/mgreter\n */\n\nfunction LineLoop( geometry, material ) {\n\n\tLine.call( this, geometry, material );\n\n\tthis.type = 'LineLoop';\n\n}\n\nLineLoop.prototype = Object.assign( Object.create( Line.prototype ), {\n\n\tconstructor: LineLoop,\n\n\tisLineLoop: true,\n\n} );\n\n\nexport { LineLoop };\n","/**\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://clara.io\n * @author tschw\n */\n\nfunction Matrix3() {\n\n\tthis.elements = [\n\n\t\t1, 0, 0,\n\t\t0, 1, 0,\n\t\t0, 0, 1\n\n\t];\n\n\tif ( arguments.length > 0 ) {\n\n\t\tconsole.error( 'THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.' );\n\n\t}\n\n}\n\nObject.assign( Matrix3.prototype, {\n\n\tisMatrix3: true,\n\n\tset: function ( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 1 ] = n21; te[ 2 ] = n31;\n\t\tte[ 3 ] = n12; te[ 4 ] = n22; te[ 5 ] = n32;\n\t\tte[ 6 ] = n13; te[ 7 ] = n23; te[ 8 ] = n33;\n\n\t\treturn this;\n\n\t},\n\n\tidentity: function () {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0,\n\t\t\t0, 1, 0,\n\t\t\t0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().fromArray( this.elements );\n\n\t},\n\n\tcopy: function ( m ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ];\n\t\tte[ 3 ] = me[ 3 ]; te[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ];\n\t\tte[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ]; te[ 8 ] = me[ 8 ];\n\n\t\treturn this;\n\n\t},\n\n\textractBasis: function ( xAxis, yAxis, zAxis ) {\n\n\t\txAxis.setFromMatrix3Column( this, 0 );\n\t\tyAxis.setFromMatrix3Column( this, 1 );\n\t\tzAxis.setFromMatrix3Column( this, 2 );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrix4: function ( m ) {\n\n\t\tvar me = m.elements;\n\n\t\tthis.set(\n\n\t\t\tme[ 0 ], me[ 4 ], me[ 8 ],\n\t\t\tme[ 1 ], me[ 5 ], me[ 9 ],\n\t\t\tme[ 2 ], me[ 6 ], me[ 10 ]\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( m ) {\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t},\n\n\tpremultiply: function ( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t},\n\n\tmultiplyMatrices: function ( a, b ) {\n\n\t\tvar ae = a.elements;\n\t\tvar be = b.elements;\n\t\tvar te = this.elements;\n\n\t\tvar a11 = ae[ 0 ], a12 = ae[ 3 ], a13 = ae[ 6 ];\n\t\tvar a21 = ae[ 1 ], a22 = ae[ 4 ], a23 = ae[ 7 ];\n\t\tvar a31 = ae[ 2 ], a32 = ae[ 5 ], a33 = ae[ 8 ];\n\n\t\tvar b11 = be[ 0 ], b12 = be[ 3 ], b13 = be[ 6 ];\n\t\tvar b21 = be[ 1 ], b22 = be[ 4 ], b23 = be[ 7 ];\n\t\tvar b31 = be[ 2 ], b32 = be[ 5 ], b33 = be[ 8 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31;\n\t\tte[ 3 ] = a11 * b12 + a12 * b22 + a13 * b32;\n\t\tte[ 6 ] = a11 * b13 + a12 * b23 + a13 * b33;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31;\n\t\tte[ 4 ] = a21 * b12 + a22 * b22 + a23 * b32;\n\t\tte[ 7 ] = a21 * b13 + a22 * b23 + a23 * b33;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31;\n\t\tte[ 5 ] = a31 * b12 + a32 * b22 + a33 * b32;\n\t\tte[ 8 ] = a31 * b13 + a32 * b23 + a33 * b33;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 3 ] *= s; te[ 6 ] *= s;\n\t\tte[ 1 ] *= s; te[ 4 ] *= s; te[ 7 ] *= s;\n\t\tte[ 2 ] *= s; te[ 5 ] *= s; te[ 8 ] *= s;\n\n\t\treturn this;\n\n\t},\n\n\tdeterminant: function () {\n\n\t\tvar te = this.elements;\n\n\t\tvar a = te[ 0 ], b = te[ 1 ], c = te[ 2 ],\n\t\t\td = te[ 3 ], e = te[ 4 ], f = te[ 5 ],\n\t\t\tg = te[ 6 ], h = te[ 7 ], i = te[ 8 ];\n\n\t\treturn a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\n\n\t},\n\n\tgetInverse: function ( matrix, throwOnDegenerate ) {\n\n\t\tif ( throwOnDegenerate !== undefined ) {\n\n\t\t\tconsole.warn( \"THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.\" );\n\n\t\t}\n\n\t\tvar me = matrix.elements,\n\t\t\tte = this.elements,\n\n\t\t\tn11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ],\n\t\t\tn12 = me[ 3 ], n22 = me[ 4 ], n32 = me[ 5 ],\n\t\t\tn13 = me[ 6 ], n23 = me[ 7 ], n33 = me[ 8 ],\n\n\t\t\tt11 = n33 * n22 - n32 * n23,\n\t\t\tt12 = n32 * n13 - n33 * n12,\n\t\t\tt13 = n23 * n12 - n22 * n13,\n\n\t\t\tdet = n11 * t11 + n21 * t12 + n31 * t13;\n\n\t\tif ( det === 0 ) return this.set( 0, 0, 0, 0, 0, 0, 0, 0, 0 );\n\n\t\tvar detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n31 * n23 - n33 * n21 ) * detInv;\n\t\tte[ 2 ] = ( n32 * n21 - n31 * n22 ) * detInv;\n\n\t\tte[ 3 ] = t12 * detInv;\n\t\tte[ 4 ] = ( n33 * n11 - n31 * n13 ) * detInv;\n\t\tte[ 5 ] = ( n31 * n12 - n32 * n11 ) * detInv;\n\n\t\tte[ 6 ] = t13 * detInv;\n\t\tte[ 7 ] = ( n21 * n13 - n23 * n11 ) * detInv;\n\t\tte[ 8 ] = ( n22 * n11 - n21 * n12 ) * detInv;\n\n\t\treturn this;\n\n\t},\n\n\ttranspose: function () {\n\n\t\tvar tmp, m = this.elements;\n\n\t\ttmp = m[ 1 ]; m[ 1 ] = m[ 3 ]; m[ 3 ] = tmp;\n\t\ttmp = m[ 2 ]; m[ 2 ] = m[ 6 ]; m[ 6 ] = tmp;\n\t\ttmp = m[ 5 ]; m[ 5 ] = m[ 7 ]; m[ 7 ] = tmp;\n\n\t\treturn this;\n\n\t},\n\n\tgetNormalMatrix: function ( matrix4 ) {\n\n\t\treturn this.setFromMatrix4( matrix4 ).getInverse( this ).transpose();\n\n\t},\n\n\ttransposeIntoArray: function ( r ) {\n\n\t\tvar m = this.elements;\n\n\t\tr[ 0 ] = m[ 0 ];\n\t\tr[ 1 ] = m[ 3 ];\n\t\tr[ 2 ] = m[ 6 ];\n\t\tr[ 3 ] = m[ 1 ];\n\t\tr[ 4 ] = m[ 4 ];\n\t\tr[ 5 ] = m[ 7 ];\n\t\tr[ 6 ] = m[ 2 ];\n\t\tr[ 7 ] = m[ 5 ];\n\t\tr[ 8 ] = m[ 8 ];\n\n\t\treturn this;\n\n\t},\n\n\tsetUvTransform: function ( tx, ty, sx, sy, rotation, cx, cy ) {\n\n\t\tvar c = Math.cos( rotation );\n\t\tvar s = Math.sin( rotation );\n\n\t\tthis.set(\n\t\t\tsx * c, sx * s, - sx * ( c * cx + s * cy ) + cx + tx,\n\t\t\t- sy * s, sy * c, - sy * ( - s * cx + c * cy ) + cy + ty,\n\t\t\t0, 0, 1\n\t\t);\n\n\t},\n\n\tscale: function ( sx, sy ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] *= sx; te[ 3 ] *= sx; te[ 6 ] *= sx;\n\t\tte[ 1 ] *= sy; te[ 4 ] *= sy; te[ 7 ] *= sy;\n\n\t\treturn this;\n\n\t},\n\n\trotate: function ( theta ) {\n\n\t\tvar c = Math.cos( theta );\n\t\tvar s = Math.sin( theta );\n\n\t\tvar te = this.elements;\n\n\t\tvar a11 = te[ 0 ], a12 = te[ 3 ], a13 = te[ 6 ];\n\t\tvar a21 = te[ 1 ], a22 = te[ 4 ], a23 = te[ 7 ];\n\n\t\tte[ 0 ] = c * a11 + s * a21;\n\t\tte[ 3 ] = c * a12 + s * a22;\n\t\tte[ 6 ] = c * a13 + s * a23;\n\n\t\tte[ 1 ] = - s * a11 + c * a21;\n\t\tte[ 4 ] = - s * a12 + c * a22;\n\t\tte[ 7 ] = - s * a13 + c * a23;\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( tx, ty ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] += tx * te[ 2 ]; te[ 3 ] += tx * te[ 5 ]; te[ 6 ] += tx * te[ 8 ];\n\t\tte[ 1 ] += ty * te[ 2 ]; te[ 4 ] += ty * te[ 5 ]; te[ 7 ] += ty * te[ 8 ];\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( matrix ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = matrix.elements;\n\n\t\tfor ( var i = 0; i < 9; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tfor ( var i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tvar te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\n\t\treturn array;\n\n\t}\n\n} );\n\n\nexport { Matrix3 };\n","/**\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  defines: { \"label\" : \"value\" },\n *  uniforms: { \"parameter1\": { value: 1.0 }, \"parameter2\": { value2: 2 } },\n *\n *  fragmentShader: <string>,\n *  vertexShader: <string>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  lights: <bool>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nimport { Material } from './Material.js';\nimport { cloneUniforms } from '../renderers/shaders/UniformsUtils.js';\n\nimport default_vertex from '../renderers/shaders/ShaderChunk/default_vertex.glsl.js';\nimport default_fragment from '../renderers/shaders/ShaderChunk/default_fragment.glsl.js';\n\nfunction ShaderMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'ShaderMaterial';\n\n\tthis.defines = {};\n\tthis.uniforms = {};\n\n\tthis.vertexShader = default_vertex;\n\tthis.fragmentShader = default_fragment;\n\n\tthis.linewidth = 1;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.fog = false; // set to use scene fog\n\tthis.lights = false; // set to use scene lights\n\tthis.clipping = false; // set to use user-defined clipping planes\n\n\tthis.skinning = false; // set to use skinning attribute streams\n\tthis.morphTargets = false; // set to use morph targets\n\tthis.morphNormals = false; // set to use morph normals\n\n\tthis.extensions = {\n\t\tderivatives: false, // set to use derivatives\n\t\tfragDepth: false, // set to use fragment depth values\n\t\tdrawBuffers: false, // set to use draw buffers\n\t\tshaderTextureLOD: false // set to use shader texture LOD\n\t};\n\n\t// When rendered geometry doesn't include these attributes but the material does,\n\t// use these default values in WebGL. This avoids errors when buffer data is missing.\n\tthis.defaultAttributeValues = {\n\t\t'color': [ 1, 1, 1 ],\n\t\t'uv': [ 0, 0 ],\n\t\t'uv2': [ 0, 0 ]\n\t};\n\n\tthis.index0AttributeName = undefined;\n\tthis.uniformsNeedUpdate = false;\n\n\tif ( parameters !== undefined ) {\n\n\t\tif ( parameters.attributes !== undefined ) {\n\n\t\t\tconsole.error( 'THREE.ShaderMaterial: attributes should now be defined in THREE.BufferGeometry instead.' );\n\n\t\t}\n\n\t\tthis.setValues( parameters );\n\n\t}\n\n}\n\nShaderMaterial.prototype = Object.create( Material.prototype );\nShaderMaterial.prototype.constructor = ShaderMaterial;\n\nShaderMaterial.prototype.isShaderMaterial = true;\n\nShaderMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.fragmentShader = source.fragmentShader;\n\tthis.vertexShader = source.vertexShader;\n\n\tthis.uniforms = cloneUniforms( source.uniforms );\n\n\tthis.defines = Object.assign( {}, source.defines );\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\tthis.lights = source.lights;\n\tthis.clipping = source.clipping;\n\n\tthis.skinning = source.skinning;\n\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\tthis.extensions = source.extensions;\n\n\treturn this;\n\n};\n\nShaderMaterial.prototype.toJSON = function ( meta ) {\n\n\tvar data = Material.prototype.toJSON.call( this, meta );\n\n\tdata.uniforms = {};\n\n\tfor ( var name in this.uniforms ) {\n\n\t\tvar uniform = this.uniforms[ name ];\n\t\tvar value = uniform.value;\n\n\t\tif ( value && value.isTexture ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 't',\n\t\t\t\tvalue: value.toJSON( meta ).uuid\n\t\t\t};\n\n\t\t} else if ( value && value.isColor ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'c',\n\t\t\t\tvalue: value.getHex()\n\t\t\t};\n\n\t\t} else if ( value && value.isVector2 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'v2',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else if ( value && value.isVector3 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'v3',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else if ( value && value.isVector4 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'v4',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else if ( value && value.isMatrix3 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'm3',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else if ( value && value.isMatrix4 ) {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\ttype: 'm4',\n\t\t\t\tvalue: value.toArray()\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tdata.uniforms[ name ] = {\n\t\t\t\tvalue: value\n\t\t\t};\n\n\t\t\t// note: the array variants v2v, v3v, v4v, m4v and tv are not supported so far\n\n\t\t}\n\n\t}\n\n\tif ( Object.keys( this.defines ).length > 0 ) data.defines = this.defines;\n\n\tdata.vertexShader = this.vertexShader;\n\tdata.fragmentShader = this.fragmentShader;\n\n\tvar extensions = {};\n\n\tfor ( var key in this.extensions ) {\n\n\t\tif ( this.extensions[ key ] === true ) extensions[ key ] = true;\n\n\t}\n\n\tif ( Object.keys( extensions ).length > 0 ) data.extensions = extensions;\n\n\treturn data;\n\n};\n\n\nexport { ShaderMaterial };\n","export default /* glsl */`\nvoid main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}\n`;\n","export default /* glsl */`\nvoid main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}\n`;\n","import { Ray } from '../math/Ray.js';\nimport { Layers } from './Layers.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author bhouston / http://clara.io/\n * @author stephomi / http://stephaneginier.com/\n */\n\nfunction Raycaster( origin, direction, near, far ) {\n\n\tthis.ray = new Ray( origin, direction );\n\t// direction is assumed to be normalized (for accurate distance calculations)\n\n\tthis.near = near || 0;\n\tthis.far = far || Infinity;\n\tthis.camera = null;\n\tthis.layers = new Layers();\n\n\tthis.params = {\n\t\tMesh: {},\n\t\tLine: { threshold: 1 },\n\t\tLOD: {},\n\t\tPoints: { threshold: 1 },\n\t\tSprite: {}\n\t};\n\n\tObject.defineProperties( this.params, {\n\t\tPointCloud: {\n\t\t\tget: function () {\n\n\t\t\t\tconsole.warn( 'THREE.Raycaster: params.PointCloud has been renamed to params.Points.' );\n\t\t\t\treturn this.Points;\n\n\t\t\t}\n\t\t}\n\t} );\n\n}\n\nfunction ascSort( a, b ) {\n\n\treturn a.distance - b.distance;\n\n}\n\nfunction intersectObject( object, raycaster, intersects, recursive ) {\n\n\tif ( object.layers.test( raycaster.layers ) ) {\n\n\t\tobject.raycast( raycaster, intersects );\n\n\t}\n\n\tif ( recursive === true ) {\n\n\t\tvar children = object.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tintersectObject( children[ i ], raycaster, intersects, true );\n\n\t\t}\n\n\t}\n\n}\n\nObject.assign( Raycaster.prototype, {\n\n\tset: function ( origin, direction ) {\n\n\t\t// direction is assumed to be normalized (for accurate distance calculations)\n\n\t\tthis.ray.set( origin, direction );\n\n\t},\n\n\tsetFromCamera: function ( coords, camera ) {\n\n\t\tif ( ( camera && camera.isPerspectiveCamera ) ) {\n\n\t\t\tthis.ray.origin.setFromMatrixPosition( camera.matrixWorld );\n\t\t\tthis.ray.direction.set( coords.x, coords.y, 0.5 ).unproject( camera ).sub( this.ray.origin ).normalize();\n\t\t\tthis.camera = camera;\n\n\t\t} else if ( ( camera && camera.isOrthographicCamera ) ) {\n\n\t\t\tthis.ray.origin.set( coords.x, coords.y, ( camera.near + camera.far ) / ( camera.near - camera.far ) ).unproject( camera ); // set origin in plane of camera\n\t\t\tthis.ray.direction.set( 0, 0, - 1 ).transformDirection( camera.matrixWorld );\n\t\t\tthis.camera = camera;\n\n\t\t} else {\n\n\t\t\tconsole.error( 'THREE.Raycaster: Unsupported camera type.' );\n\n\t\t}\n\n\t},\n\n\tintersectObject: function ( object, recursive, optionalTarget ) {\n\n\t\tvar intersects = optionalTarget || [];\n\n\t\tintersectObject( object, this, intersects, recursive );\n\n\t\tintersects.sort( ascSort );\n\n\t\treturn intersects;\n\n\t},\n\n\tintersectObjects: function ( objects, recursive, optionalTarget ) {\n\n\t\tvar intersects = optionalTarget || [];\n\n\t\tif ( Array.isArray( objects ) === false ) {\n\n\t\t\tconsole.warn( 'THREE.Raycaster.intersectObjects: objects is not an Array.' );\n\t\t\treturn intersects;\n\n\t\t}\n\n\t\tfor ( var i = 0, l = objects.length; i < l; i ++ ) {\n\n\t\t\tintersectObject( objects[ i ], this, intersects, recursive );\n\n\t\t}\n\n\t\tintersects.sort( ascSort );\n\n\t\treturn intersects;\n\n\t}\n\n} );\n\n\nexport { Raycaster };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { RGBFormat, LinearFilter } from '../constants.js';\nimport { Texture } from './Texture.js';\n\nfunction VideoTexture( video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy ) {\n\n\tTexture.call( this, video, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy );\n\n\tthis.format = format !== undefined ? format : RGBFormat;\n\n\tthis.minFilter = minFilter !== undefined ? minFilter : LinearFilter;\n\tthis.magFilter = magFilter !== undefined ? magFilter : LinearFilter;\n\n\tthis.generateMipmaps = false;\n\n}\n\nVideoTexture.prototype = Object.assign( Object.create( Texture.prototype ), {\n\n\tconstructor: VideoTexture,\n\n\tisVideoTexture: true,\n\n\tupdate: function () {\n\n\t\tvar video = this.image;\n\n\t\tif ( video.readyState >= video.HAVE_CURRENT_DATA ) {\n\n\t\t\tthis.needsUpdate = true;\n\n\t\t}\n\n\t}\n\n} );\n\n\nexport { VideoTexture };\n","import { Vector3 } from '../../math/Vector3.js';\nimport { Curve } from '../core/Curve.js';\n\n/**\n * @author zz85 https://github.com/zz85\n *\n * Centripetal CatmullRom Curve - which is useful for avoiding\n * cusps and self-intersections in non-uniform catmull rom curves.\n * http://www.cemyuksel.com/research/catmullrom_param/catmullrom.pdf\n *\n * curve.type accepts centripetal(default), chordal and catmullrom\n * curve.tension is used for catmullrom which defaults to 0.5\n */\n\n\n/*\nBased on an optimized c++ solution in\n - http://stackoverflow.com/questions/9489736/catmull-rom-curve-with-no-cusps-and-no-self-intersections/\n - http://ideone.com/NoEbVM\n\nThis CubicPoly class could be used for reusing some variables and calculations,\nbut for three.js curve use, it could be possible inlined and flatten into a single function call\nwhich can be placed in CurveUtils.\n*/\n\nfunction CubicPoly() {\n\n\tvar c0 = 0, c1 = 0, c2 = 0, c3 = 0;\n\n\t/*\n\t * Compute coefficients for a cubic polynomial\n\t *   p(s) = c0 + c1*s + c2*s^2 + c3*s^3\n\t * such that\n\t *   p(0) = x0, p(1) = x1\n\t *  and\n\t *   p'(0) = t0, p'(1) = t1.\n\t */\n\tfunction init( x0, x1, t0, t1 ) {\n\n\t\tc0 = x0;\n\t\tc1 = t0;\n\t\tc2 = - 3 * x0 + 3 * x1 - 2 * t0 - t1;\n\t\tc3 = 2 * x0 - 2 * x1 + t0 + t1;\n\n\t}\n\n\treturn {\n\n\t\tinitCatmullRom: function ( x0, x1, x2, x3, tension ) {\n\n\t\t\tinit( x1, x2, tension * ( x2 - x0 ), tension * ( x3 - x1 ) );\n\n\t\t},\n\n\t\tinitNonuniformCatmullRom: function ( x0, x1, x2, x3, dt0, dt1, dt2 ) {\n\n\t\t\t// compute tangents when parameterized in [t1,t2]\n\t\t\tvar t1 = ( x1 - x0 ) / dt0 - ( x2 - x0 ) / ( dt0 + dt1 ) + ( x2 - x1 ) / dt1;\n\t\t\tvar t2 = ( x2 - x1 ) / dt1 - ( x3 - x1 ) / ( dt1 + dt2 ) + ( x3 - x2 ) / dt2;\n\n\t\t\t// rescale tangents for parametrization in [0,1]\n\t\t\tt1 *= dt1;\n\t\t\tt2 *= dt1;\n\n\t\t\tinit( x1, x2, t1, t2 );\n\n\t\t},\n\n\t\tcalc: function ( t ) {\n\n\t\t\tvar t2 = t * t;\n\t\t\tvar t3 = t2 * t;\n\t\t\treturn c0 + c1 * t + c2 * t2 + c3 * t3;\n\n\t\t}\n\n\t};\n\n}\n\n//\n\nvar tmp = new Vector3();\nvar px = new CubicPoly(), py = new CubicPoly(), pz = new CubicPoly();\n\nfunction CatmullRomCurve3( points, closed, curveType, tension ) {\n\n\tCurve.call( this );\n\n\tthis.type = 'CatmullRomCurve3';\n\n\tthis.points = points || [];\n\tthis.closed = closed || false;\n\tthis.curveType = curveType || 'centripetal';\n\tthis.tension = tension || 0.5;\n\n}\n\nCatmullRomCurve3.prototype = Object.create( Curve.prototype );\nCatmullRomCurve3.prototype.constructor = CatmullRomCurve3;\n\nCatmullRomCurve3.prototype.isCatmullRomCurve3 = true;\n\nCatmullRomCurve3.prototype.getPoint = function ( t, optionalTarget ) {\n\n\tvar point = optionalTarget || new Vector3();\n\n\tvar points = this.points;\n\tvar l = points.length;\n\n\tvar p = ( l - ( this.closed ? 0 : 1 ) ) * t;\n\tvar intPoint = Math.floor( p );\n\tvar weight = p - intPoint;\n\n\tif ( this.closed ) {\n\n\t\tintPoint += intPoint > 0 ? 0 : ( Math.floor( Math.abs( intPoint ) / l ) + 1 ) * l;\n\n\t} else if ( weight === 0 && intPoint === l - 1 ) {\n\n\t\tintPoint = l - 2;\n\t\tweight = 1;\n\n\t}\n\n\tvar p0, p1, p2, p3; // 4 points\n\n\tif ( this.closed || intPoint > 0 ) {\n\n\t\tp0 = points[ ( intPoint - 1 ) % l ];\n\n\t} else {\n\n\t\t// extrapolate first point\n\t\ttmp.subVectors( points[ 0 ], points[ 1 ] ).add( points[ 0 ] );\n\t\tp0 = tmp;\n\n\t}\n\n\tp1 = points[ intPoint % l ];\n\tp2 = points[ ( intPoint + 1 ) % l ];\n\n\tif ( this.closed || intPoint + 2 < l ) {\n\n\t\tp3 = points[ ( intPoint + 2 ) % l ];\n\n\t} else {\n\n\t\t// extrapolate last point\n\t\ttmp.subVectors( points[ l - 1 ], points[ l - 2 ] ).add( points[ l - 1 ] );\n\t\tp3 = tmp;\n\n\t}\n\n\tif ( this.curveType === 'centripetal' || this.curveType === 'chordal' ) {\n\n\t\t// init Centripetal / Chordal Catmull-Rom\n\t\tvar pow = this.curveType === 'chordal' ? 0.5 : 0.25;\n\t\tvar dt0 = Math.pow( p0.distanceToSquared( p1 ), pow );\n\t\tvar dt1 = Math.pow( p1.distanceToSquared( p2 ), pow );\n\t\tvar dt2 = Math.pow( p2.distanceToSquared( p3 ), pow );\n\n\t\t// safety check for repeated points\n\t\tif ( dt1 < 1e-4 ) dt1 = 1.0;\n\t\tif ( dt0 < 1e-4 ) dt0 = dt1;\n\t\tif ( dt2 < 1e-4 ) dt2 = dt1;\n\n\t\tpx.initNonuniformCatmullRom( p0.x, p1.x, p2.x, p3.x, dt0, dt1, dt2 );\n\t\tpy.initNonuniformCatmullRom( p0.y, p1.y, p2.y, p3.y, dt0, dt1, dt2 );\n\t\tpz.initNonuniformCatmullRom( p0.z, p1.z, p2.z, p3.z, dt0, dt1, dt2 );\n\n\t} else if ( this.curveType === 'catmullrom' ) {\n\n\t\tpx.initCatmullRom( p0.x, p1.x, p2.x, p3.x, this.tension );\n\t\tpy.initCatmullRom( p0.y, p1.y, p2.y, p3.y, this.tension );\n\t\tpz.initCatmullRom( p0.z, p1.z, p2.z, p3.z, this.tension );\n\n\t}\n\n\tpoint.set(\n\t\tpx.calc( weight ),\n\t\tpy.calc( weight ),\n\t\tpz.calc( weight )\n\t);\n\n\treturn point;\n\n};\n\nCatmullRomCurve3.prototype.copy = function ( source ) {\n\n\tCurve.prototype.copy.call( this, source );\n\n\tthis.points = [];\n\n\tfor ( var i = 0, l = source.points.length; i < l; i ++ ) {\n\n\t\tvar point = source.points[ i ];\n\n\t\tthis.points.push( point.clone() );\n\n\t}\n\n\tthis.closed = source.closed;\n\tthis.curveType = source.curveType;\n\tthis.tension = source.tension;\n\n\treturn this;\n\n};\n\nCatmullRomCurve3.prototype.toJSON = function () {\n\n\tvar data = Curve.prototype.toJSON.call( this );\n\n\tdata.points = [];\n\n\tfor ( var i = 0, l = this.points.length; i < l; i ++ ) {\n\n\t\tvar point = this.points[ i ];\n\t\tdata.points.push( point.toArray() );\n\n\t}\n\n\tdata.closed = this.closed;\n\tdata.curveType = this.curveType;\n\tdata.tension = this.tension;\n\n\treturn data;\n\n};\n\nCatmullRomCurve3.prototype.fromJSON = function ( json ) {\n\n\tCurve.prototype.fromJSON.call( this, json );\n\n\tthis.points = [];\n\n\tfor ( var i = 0, l = json.points.length; i < l; i ++ ) {\n\n\t\tvar point = json.points[ i ];\n\t\tthis.points.push( new Vector3().fromArray( point ) );\n\n\t}\n\n\tthis.closed = json.closed;\n\tthis.curveType = json.curveType;\n\tthis.tension = json.tension;\n\n\treturn this;\n\n};\n\n\nexport { CatmullRomCurve3 };\n","import { ZeroCurvatureEnding } from '../../constants.js';\nimport { Interpolant } from '../Interpolant.js';\nimport { WrapAroundEnding, ZeroSlopeEnding } from '../../constants.js';\n\n/**\n * Fast and simple cubic spline interpolant.\n *\n * It was derived from a Hermitian construction setting the first derivative\n * at each sample position to the linear slope between neighboring positions\n * over their parameter interval.\n *\n * @author tschw\n */\n\nfunction CubicInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\tthis._weightPrev = - 0;\n\tthis._offsetPrev = - 0;\n\tthis._weightNext = - 0;\n\tthis._offsetNext = - 0;\n\n}\n\nCubicInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\n\n\tconstructor: CubicInterpolant,\n\n\tDefaultSettings_: {\n\n\t\tendingStart: ZeroCurvatureEnding,\n\t\tendingEnd: ZeroCurvatureEnding\n\n\t},\n\n\tintervalChanged_: function ( i1, t0, t1 ) {\n\n\t\tvar pp = this.parameterPositions,\n\t\t\tiPrev = i1 - 2,\n\t\t\tiNext = i1 + 1,\n\n\t\t\ttPrev = pp[ iPrev ],\n\t\t\ttNext = pp[ iNext ];\n\n\t\tif ( tPrev === undefined ) {\n\n\t\t\tswitch ( this.getSettings_().endingStart ) {\n\n\t\t\t\tcase ZeroSlopeEnding:\n\n\t\t\t\t\t// f'(t0) = 0\n\t\t\t\t\tiPrev = i1;\n\t\t\t\t\ttPrev = 2 * t0 - t1;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase WrapAroundEnding:\n\n\t\t\t\t\t// use the other end of the curve\n\t\t\t\t\tiPrev = pp.length - 2;\n\t\t\t\t\ttPrev = t0 + pp[ iPrev ] - pp[ iPrev + 1 ];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault: // ZeroCurvatureEnding\n\n\t\t\t\t\t// f''(t0) = 0 a.k.a. Natural Spline\n\t\t\t\t\tiPrev = i1;\n\t\t\t\t\ttPrev = t1;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( tNext === undefined ) {\n\n\t\t\tswitch ( this.getSettings_().endingEnd ) {\n\n\t\t\t\tcase ZeroSlopeEnding:\n\n\t\t\t\t\t// f'(tN) = 0\n\t\t\t\t\tiNext = i1;\n\t\t\t\t\ttNext = 2 * t1 - t0;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase WrapAroundEnding:\n\n\t\t\t\t\t// use the other end of the curve\n\t\t\t\t\tiNext = 1;\n\t\t\t\t\ttNext = t1 + pp[ 1 ] - pp[ 0 ];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault: // ZeroCurvatureEnding\n\n\t\t\t\t\t// f''(tN) = 0, a.k.a. Natural Spline\n\t\t\t\t\tiNext = i1 - 1;\n\t\t\t\t\ttNext = t0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar halfDt = ( t1 - t0 ) * 0.5,\n\t\t\tstride = this.valueSize;\n\n\t\tthis._weightPrev = halfDt / ( t0 - tPrev );\n\t\tthis._weightNext = halfDt / ( tNext - t1 );\n\t\tthis._offsetPrev = iPrev * stride;\n\t\tthis._offsetNext = iNext * stride;\n\n\t},\n\n\tinterpolate_: function ( i1, t0, t, t1 ) {\n\n\t\tvar result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\to1 = i1 * stride,\t\to0 = o1 - stride,\n\t\t\toP = this._offsetPrev, \toN = this._offsetNext,\n\t\t\twP = this._weightPrev,\twN = this._weightNext,\n\n\t\t\tp = ( t - t0 ) / ( t1 - t0 ),\n\t\t\tpp = p * p,\n\t\t\tppp = pp * p;\n\n\t\t// evaluate polynomials\n\n\t\tvar sP = - wP * ppp + 2 * wP * pp - wP * p;\n\t\tvar s0 = ( 1 + wP ) * ppp + ( - 1.5 - 2 * wP ) * pp + ( - 0.5 + wP ) * p + 1;\n\t\tvar s1 = ( - 1 - wN ) * ppp + ( 1.5 + wN ) * pp + 0.5 * p;\n\t\tvar sN = wN * ppp - wN * pp;\n\n\t\t// combine data linearly\n\n\t\tfor ( var i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] =\n\t\t\t\t\tsP * values[ oP + i ] +\n\t\t\t\t\ts0 * values[ o0 + i ] +\n\t\t\t\t\ts1 * values[ o1 + i ] +\n\t\t\t\t\tsN * values[ oN + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n} );\n\n\nexport { CubicInterpolant };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { RGBAFormat, RGBFormat } from '../constants.js';\nimport { ImageLoader } from './ImageLoader.js';\nimport { Texture } from '../textures/Texture.js';\nimport { Loader } from './Loader.js';\n\nfunction TextureLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nTextureLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: TextureLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar texture = new Texture();\n\n\t\tvar loader = new ImageLoader( this.manager );\n\t\tloader.setCrossOrigin( this.crossOrigin );\n\t\tloader.setPath( this.path );\n\n\t\tloader.load( url, function ( image ) {\n\n\t\t\ttexture.image = image;\n\n\t\t\t// JPEGs can't have an alpha channel, so memory can be saved by storing them as RGB.\n\t\t\tvar isJPEG = url.search( /\\.jpe?g($|\\?)/i ) > 0 || url.search( /^data\\:image\\/jpeg/ ) === 0;\n\n\t\t\ttexture.format = isJPEG ? RGBFormat : RGBAFormat;\n\t\t\ttexture.needsUpdate = true;\n\n\t\t\tif ( onLoad !== undefined ) {\n\n\t\t\t\tonLoad( texture );\n\n\t\t\t}\n\n\t\t}, onProgress, onError );\n\n\t\treturn texture;\n\n\t}\n\n} );\n\n\nexport { TextureLoader };\n","import { Light } from './Light.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction AmbientLight( color, intensity ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'AmbientLight';\n\n\tthis.castShadow = undefined;\n\n}\n\nAmbientLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: AmbientLight,\n\n\tisAmbientLight: true\n\n} );\n\n\nexport { AmbientLight };\n","import { Light } from './Light.js';\n\n/**\n * @author abelnation / http://github.com/abelnation\n */\n\nfunction RectAreaLight( color, intensity, width, height ) {\n\n\tLight.call( this, color, intensity );\n\n\tthis.type = 'RectAreaLight';\n\n\tthis.width = ( width !== undefined ) ? width : 10;\n\tthis.height = ( height !== undefined ) ? height : 10;\n\n}\n\nRectAreaLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: RectAreaLight,\n\n\tisRectAreaLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.width = source.width;\n\t\tthis.height = source.height;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = Light.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.width = this.width;\n\t\tdata.object.height = this.height;\n\n\t\treturn data;\n\n\t}\n\n} );\n\nexport { RectAreaLight };\n","import { Light } from './Light.js';\nimport { Color } from '../math/Color.js';\nimport { Object3D } from '../core/Object3D.js';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction HemisphereLight( skyColor, groundColor, intensity ) {\n\n\tLight.call( this, skyColor, intensity );\n\n\tthis.type = 'HemisphereLight';\n\n\tthis.castShadow = undefined;\n\n\tthis.position.copy( Object3D.DefaultUp );\n\tthis.updateMatrix();\n\n\tthis.groundColor = new Color( groundColor );\n\n}\n\nHemisphereLight.prototype = Object.assign( Object.create( Light.prototype ), {\n\n\tconstructor: HemisphereLight,\n\n\tisHemisphereLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tLight.prototype.copy.call( this, source );\n\n\t\tthis.groundColor.copy( source.groundColor );\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { HemisphereLight };\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nimport { Color } from '../math/Color.js';\n\nfunction FogExp2( color, density ) {\n\n\tthis.name = '';\n\n\tthis.color = new Color( color );\n\tthis.density = ( density !== undefined ) ? density : 0.00025;\n\n}\n\nObject.assign( FogExp2.prototype, {\n\n\tisFogExp2: true,\n\n\tclone: function () {\n\n\t\treturn new FogExp2( this.color, this.density );\n\n\t},\n\n\ttoJSON: function ( /* meta */ ) {\n\n\t\treturn {\n\t\t\ttype: 'FogExp2',\n\t\t\tcolor: this.color.getHex(),\n\t\t\tdensity: this.density\n\t\t};\n\n\t}\n\n} );\n\nexport { FogExp2 };\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nimport { Color } from '../math/Color.js';\n\nfunction Fog( color, near, far ) {\n\n\tthis.name = '';\n\n\tthis.color = new Color( color );\n\n\tthis.near = ( near !== undefined ) ? near : 1;\n\tthis.far = ( far !== undefined ) ? far : 1000;\n\n}\n\nObject.assign( Fog.prototype, {\n\n\tisFog: true,\n\n\tclone: function () {\n\n\t\treturn new Fog( this.color, this.near, this.far );\n\n\t},\n\n\ttoJSON: function ( /* meta */ ) {\n\n\t\treturn {\n\t\t\ttype: 'Fog',\n\t\t\tcolor: this.color.getHex(),\n\t\t\tnear: this.near,\n\t\t\tfar: this.far\n\t\t};\n\n\t}\n\n} );\n\nexport { Fog };\n","/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author ikerr / http://verold.com\n */\n\nimport { Mesh } from './Mesh.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { Vector4 } from '../math/Vector4.js';\n\nfunction SkinnedMesh( geometry, material ) {\n\n\tif ( geometry && geometry.isGeometry ) {\n\n\t\tconsole.error( 'THREE.SkinnedMesh no longer supports THREE.Geometry. Use THREE.BufferGeometry instead.' );\n\n\t}\n\n\tMesh.call( this, geometry, material );\n\n\tthis.type = 'SkinnedMesh';\n\n\tthis.bindMode = 'attached';\n\tthis.bindMatrix = new Matrix4();\n\tthis.bindMatrixInverse = new Matrix4();\n\n}\n\nSkinnedMesh.prototype = Object.assign( Object.create( Mesh.prototype ), {\n\n\tconstructor: SkinnedMesh,\n\n\tisSkinnedMesh: true,\n\n\tbind: function ( skeleton, bindMatrix ) {\n\n\t\tthis.skeleton = skeleton;\n\n\t\tif ( bindMatrix === undefined ) {\n\n\t\t\tthis.updateMatrixWorld( true );\n\n\t\t\tthis.skeleton.calculateInverses();\n\n\t\t\tbindMatrix = this.matrixWorld;\n\n\t\t}\n\n\t\tthis.bindMatrix.copy( bindMatrix );\n\t\tthis.bindMatrixInverse.getInverse( bindMatrix );\n\n\t},\n\n\tpose: function () {\n\n\t\tthis.skeleton.pose();\n\n\t},\n\n\tnormalizeSkinWeights: function () {\n\n\t\tvar vector = new Vector4();\n\n\t\tvar skinWeight = this.geometry.attributes.skinWeight;\n\n\t\tfor ( var i = 0, l = skinWeight.count; i < l; i ++ ) {\n\n\t\t\tvector.x = skinWeight.getX( i );\n\t\t\tvector.y = skinWeight.getY( i );\n\t\t\tvector.z = skinWeight.getZ( i );\n\t\t\tvector.w = skinWeight.getW( i );\n\n\t\t\tvar scale = 1.0 / vector.manhattanLength();\n\n\t\t\tif ( scale !== Infinity ) {\n\n\t\t\t\tvector.multiplyScalar( scale );\n\n\t\t\t} else {\n\n\t\t\t\tvector.set( 1, 0, 0, 0 ); // do something reasonable\n\n\t\t\t}\n\n\t\t\tskinWeight.setXYZW( i, vector.x, vector.y, vector.z, vector.w );\n\n\t\t}\n\n\t},\n\n\tupdateMatrixWorld: function ( force ) {\n\n\t\tMesh.prototype.updateMatrixWorld.call( this, force );\n\n\t\tif ( this.bindMode === 'attached' ) {\n\n\t\t\tthis.bindMatrixInverse.getInverse( this.matrixWorld );\n\n\t\t} else if ( this.bindMode === 'detached' ) {\n\n\t\t\tthis.bindMatrixInverse.getInverse( this.bindMatrix );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.SkinnedMesh: Unrecognized bindMode: ' + this.bindMode );\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.geometry, this.material ).copy( this );\n\n\t}\n\n} );\n\n\nexport { SkinnedMesh };\n","import { Object3D } from '../core/Object3D.js';\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author ikerr / http://verold.com\n */\n\nfunction Bone() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Bone';\n\n}\n\nBone.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Bone,\n\n\tisBone: true\n\n} );\n\n\nexport { Bone };\n","import { BufferGeometry } from './BufferGeometry.js';\n\n/**\n * @author benaadams / https://twitter.com/ben_a_adams\n */\n\nfunction InstancedBufferGeometry() {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'InstancedBufferGeometry';\n\tthis.maxInstancedCount = undefined;\n\n}\n\nInstancedBufferGeometry.prototype = Object.assign( Object.create( BufferGeometry.prototype ), {\n\n\tconstructor: InstancedBufferGeometry,\n\n\tisInstancedBufferGeometry: true,\n\n\tcopy: function ( source ) {\n\n\t\tBufferGeometry.prototype.copy.call( this, source );\n\n\t\tthis.maxInstancedCount = source.maxInstancedCount;\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar data = BufferGeometry.prototype.toJSON.call( this );\n\n\t\tdata.maxInstancedCount = this.maxInstancedCount;\n\n\t\tdata.isInstancedBufferGeometry = true;\n\n\t\treturn data;\n\n\t}\n\n} );\n\nexport { InstancedBufferGeometry };\n","import { MathUtils } from './MathUtils.js';\n\n/**\n * @author bhouston / http://clara.io\n * @author WestLangley / http://github.com/WestLangley\n *\n * Ref: https://en.wikipedia.org/wiki/Spherical_coordinate_system\n *\n * The polar angle (phi) is measured from the positive y-axis. The positive y-axis is up.\n * The azimuthal angle (theta) is measured from the positive z-axis.\n */\n\nfunction Spherical( radius, phi, theta ) {\n\n\tthis.radius = ( radius !== undefined ) ? radius : 1.0;\n\tthis.phi = ( phi !== undefined ) ? phi : 0; // polar angle\n\tthis.theta = ( theta !== undefined ) ? theta : 0; // azimuthal angle\n\n\treturn this;\n\n}\n\nObject.assign( Spherical.prototype, {\n\n\tset: function ( radius, phi, theta ) {\n\n\t\tthis.radius = radius;\n\t\tthis.phi = phi;\n\t\tthis.theta = theta;\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( other ) {\n\n\t\tthis.radius = other.radius;\n\t\tthis.phi = other.phi;\n\t\tthis.theta = other.theta;\n\n\t\treturn this;\n\n\t},\n\n\t// restrict phi to be betwee EPS and PI-EPS\n\tmakeSafe: function () {\n\n\t\tvar EPS = 0.000001;\n\t\tthis.phi = Math.max( EPS, Math.min( Math.PI - EPS, this.phi ) );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromVector3: function ( v ) {\n\n\t\treturn this.setFromCartesianCoords( v.x, v.y, v.z );\n\n\t},\n\n\tsetFromCartesianCoords: function ( x, y, z ) {\n\n\t\tthis.radius = Math.sqrt( x * x + y * y + z * z );\n\n\t\tif ( this.radius === 0 ) {\n\n\t\t\tthis.theta = 0;\n\t\t\tthis.phi = 0;\n\n\t\t} else {\n\n\t\t\tthis.theta = Math.atan2( x, z );\n\t\t\tthis.phi = Math.acos( MathUtils.clamp( y / this.radius, - 1, 1 ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Spherical };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { Cache } from './Cache.js';\nimport { Loader } from './Loader.js';\n\nvar loading = {};\n\nfunction FileLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nFileLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: FileLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tif ( url === undefined ) url = '';\n\n\t\tif ( this.path !== undefined ) url = this.path + url;\n\n\t\turl = this.manager.resolveURL( url );\n\n\t\tvar scope = this;\n\n\t\tvar cached = Cache.get( url );\n\n\t\tif ( cached !== undefined ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\tsetTimeout( function () {\n\n\t\t\t\tif ( onLoad ) onLoad( cached );\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, 0 );\n\n\t\t\treturn cached;\n\n\t\t}\n\n\t\t// Check if request is duplicate\n\n\t\tif ( loading[ url ] !== undefined ) {\n\n\t\t\tloading[ url ].push( {\n\n\t\t\t\tonLoad: onLoad,\n\t\t\t\tonProgress: onProgress,\n\t\t\t\tonError: onError\n\n\t\t\t} );\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t// Check for data: URI\n\t\tvar dataUriRegex = /^data:(.*?)(;base64)?,(.*)$/;\n\t\tvar dataUriRegexResult = url.match( dataUriRegex );\n\n\t\t// Safari can not handle Data URIs through XMLHttpRequest so process manually\n\t\tif ( dataUriRegexResult ) {\n\n\t\t\tvar mimeType = dataUriRegexResult[ 1 ];\n\t\t\tvar isBase64 = !! dataUriRegexResult[ 2 ];\n\t\t\tvar data = dataUriRegexResult[ 3 ];\n\n\t\t\tdata = decodeURIComponent( data );\n\n\t\t\tif ( isBase64 ) data = atob( data );\n\n\t\t\ttry {\n\n\t\t\t\tvar response;\n\t\t\t\tvar responseType = ( this.responseType || '' ).toLowerCase();\n\n\t\t\t\tswitch ( responseType ) {\n\n\t\t\t\t\tcase 'arraybuffer':\n\t\t\t\t\tcase 'blob':\n\n\t\t\t\t\t\tvar view = new Uint8Array( data.length );\n\n\t\t\t\t\t\tfor ( var i = 0; i < data.length; i ++ ) {\n\n\t\t\t\t\t\t\tview[ i ] = data.charCodeAt( i );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( responseType === 'blob' ) {\n\n\t\t\t\t\t\t\tresponse = new Blob( [ view.buffer ], { type: mimeType } );\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tresponse = view.buffer;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'document':\n\n\t\t\t\t\t\tvar parser = new DOMParser();\n\t\t\t\t\t\tresponse = parser.parseFromString( data, mimeType );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'json':\n\n\t\t\t\t\t\tresponse = JSON.parse( data );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault: // 'text' or other\n\n\t\t\t\t\t\tresponse = data;\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t\t// Wait for next browser tick like standard XMLHttpRequest event dispatching does\n\t\t\t\tsetTimeout( function () {\n\n\t\t\t\t\tif ( onLoad ) onLoad( response );\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t}, 0 );\n\n\t\t\t} catch ( error ) {\n\n\t\t\t\t// Wait for next browser tick like standard XMLHttpRequest event dispatching does\n\t\t\t\tsetTimeout( function () {\n\n\t\t\t\t\tif ( onError ) onError( error );\n\n\t\t\t\t\tscope.manager.itemError( url );\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t}, 0 );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// Initialise array for duplicate requests\n\n\t\t\tloading[ url ] = [];\n\n\t\t\tloading[ url ].push( {\n\n\t\t\t\tonLoad: onLoad,\n\t\t\t\tonProgress: onProgress,\n\t\t\t\tonError: onError\n\n\t\t\t} );\n\n\t\t\tvar request = new XMLHttpRequest();\n\n\t\t\trequest.open( 'GET', url, true );\n\n\t\t\trequest.addEventListener( 'load', function ( event ) {\n\n\t\t\t\tvar response = this.response;\n\n\t\t\t\tvar callbacks = loading[ url ];\n\n\t\t\t\tdelete loading[ url ];\n\n\t\t\t\tif ( this.status === 200 || this.status === 0 ) {\n\n\t\t\t\t\t// Some browsers return HTTP Status 0 when using non-http protocol\n\t\t\t\t\t// e.g. 'file://' or 'data://'. Handle as success.\n\n\t\t\t\t\tif ( this.status === 0 ) console.warn( 'THREE.FileLoader: HTTP Status 0 received.' );\n\n\t\t\t\t\t// Add to cache only on HTTP success, so that we do not cache\n\t\t\t\t\t// error response bodies as proper responses to requests.\n\t\t\t\t\tCache.add( url, response );\n\n\t\t\t\t\tfor ( var i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tvar callback = callbacks[ i ];\n\t\t\t\t\t\tif ( callback.onLoad ) callback.onLoad( response );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tfor ( var i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\t\tvar callback = callbacks[ i ];\n\t\t\t\t\t\tif ( callback.onError ) callback.onError( event );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tscope.manager.itemError( url );\n\t\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t\t}\n\n\t\t\t}, false );\n\n\t\t\trequest.addEventListener( 'progress', function ( event ) {\n\n\t\t\t\tvar callbacks = loading[ url ];\n\n\t\t\t\tfor ( var i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar callback = callbacks[ i ];\n\t\t\t\t\tif ( callback.onProgress ) callback.onProgress( event );\n\n\t\t\t\t}\n\n\t\t\t}, false );\n\n\t\t\trequest.addEventListener( 'error', function ( event ) {\n\n\t\t\t\tvar callbacks = loading[ url ];\n\n\t\t\t\tdelete loading[ url ];\n\n\t\t\t\tfor ( var i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar callback = callbacks[ i ];\n\t\t\t\t\tif ( callback.onError ) callback.onError( event );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, false );\n\n\t\t\trequest.addEventListener( 'abort', function ( event ) {\n\n\t\t\t\tvar callbacks = loading[ url ];\n\n\t\t\t\tdelete loading[ url ];\n\n\t\t\t\tfor ( var i = 0, il = callbacks.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar callback = callbacks[ i ];\n\t\t\t\t\tif ( callback.onError ) callback.onError( event );\n\n\t\t\t\t}\n\n\t\t\t\tscope.manager.itemError( url );\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, false );\n\n\t\t\tif ( this.responseType !== undefined ) request.responseType = this.responseType;\n\t\t\tif ( this.withCredentials !== undefined ) request.withCredentials = this.withCredentials;\n\n\t\t\tif ( request.overrideMimeType ) request.overrideMimeType( this.mimeType !== undefined ? this.mimeType : 'text/plain' );\n\n\t\t\tfor ( var header in this.requestHeader ) {\n\n\t\t\t\trequest.setRequestHeader( header, this.requestHeader[ header ] );\n\n\t\t\t}\n\n\t\t\trequest.send( null );\n\n\t\t}\n\n\t\tscope.manager.itemStart( url );\n\n\t\treturn request;\n\n\t},\n\n\tsetResponseType: function ( value ) {\n\n\t\tthis.responseType = value;\n\t\treturn this;\n\n\t},\n\n\tsetWithCredentials: function ( value ) {\n\n\t\tthis.withCredentials = value;\n\t\treturn this;\n\n\t},\n\n\tsetMimeType: function ( value ) {\n\n\t\tthis.mimeType = value;\n\t\treturn this;\n\n\t},\n\n\tsetRequestHeader: function ( value ) {\n\n\t\tthis.requestHeader = value;\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { FileLoader };\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author szimek / https://github.com/szimek/\n */\n\nvar _canvas;\n\nvar ImageUtils = {\n\n\tgetDataURL: function ( image ) {\n\n\t\tvar canvas;\n\n\t\tif ( typeof HTMLCanvasElement == 'undefined' ) {\n\n\t\t\treturn image.src;\n\n\t\t} else if ( image instanceof HTMLCanvasElement ) {\n\n\t\t\tcanvas = image;\n\n\t\t} else {\n\n\t\t\tif ( _canvas === undefined ) _canvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\n\t\t\t_canvas.width = image.width;\n\t\t\t_canvas.height = image.height;\n\n\t\t\tvar context = _canvas.getContext( '2d' );\n\n\t\t\tif ( image instanceof ImageData ) {\n\n\t\t\t\tcontext.putImageData( image, 0, 0 );\n\n\t\t\t} else {\n\n\t\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height );\n\n\t\t\t}\n\n\t\t\tcanvas = _canvas;\n\n\t\t}\n\n\t\tif ( canvas.width > 2048 || canvas.height > 2048 ) {\n\n\t\t\treturn canvas.toDataURL( 'image/jpeg', 0.6 );\n\n\t\t} else {\n\n\t\t\treturn canvas.toDataURL( 'image/png' );\n\n\t\t}\n\n\t}\n\n};\n\nexport { ImageUtils };\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author szimek / https://github.com/szimek/\n */\n\nimport { EventDispatcher } from '../core/EventDispatcher.js';\nimport {\n\tMirroredRepeatWrapping,\n\tClampToEdgeWrapping,\n\tRepeatWrapping,\n\tLinearEncoding,\n\tUnsignedByteType,\n\tRGBAFormat,\n\tLinearMipmapLinearFilter,\n\tLinearFilter,\n\tUVMapping\n} from '../constants.js';\nimport { MathUtils } from '../math/MathUtils.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Matrix3 } from '../math/Matrix3.js';\nimport { ImageUtils } from '../extras/ImageUtils.js';\n\nvar textureId = 0;\n\nfunction Texture( image, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\n\n\tObject.defineProperty( this, 'id', { value: textureId ++ } );\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\tthis.name = '';\n\n\tthis.image = image !== undefined ? image : Texture.DEFAULT_IMAGE;\n\tthis.mipmaps = [];\n\n\tthis.mapping = mapping !== undefined ? mapping : Texture.DEFAULT_MAPPING;\n\n\tthis.wrapS = wrapS !== undefined ? wrapS : ClampToEdgeWrapping;\n\tthis.wrapT = wrapT !== undefined ? wrapT : ClampToEdgeWrapping;\n\n\tthis.magFilter = magFilter !== undefined ? magFilter : LinearFilter;\n\tthis.minFilter = minFilter !== undefined ? minFilter : LinearMipmapLinearFilter;\n\n\tthis.anisotropy = anisotropy !== undefined ? anisotropy : 1;\n\n\tthis.format = format !== undefined ? format : RGBAFormat;\n\tthis.internalFormat = null;\n\tthis.type = type !== undefined ? type : UnsignedByteType;\n\n\tthis.offset = new Vector2( 0, 0 );\n\tthis.repeat = new Vector2( 1, 1 );\n\tthis.center = new Vector2( 0, 0 );\n\tthis.rotation = 0;\n\n\tthis.matrixAutoUpdate = true;\n\tthis.matrix = new Matrix3();\n\n\tthis.generateMipmaps = true;\n\tthis.premultiplyAlpha = false;\n\tthis.flipY = true;\n\tthis.unpackAlignment = 4;\t// valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\n\n\t// Values of encoding !== THREE.LinearEncoding only supported on map, envMap and emissiveMap.\n\t//\n\t// Also changing the encoding after already used by a Material will not automatically make the Material\n\t// update. You need to explicitly call Material.needsUpdate to trigger it to recompile.\n\tthis.encoding = encoding !== undefined ? encoding : LinearEncoding;\n\n\tthis.version = 0;\n\tthis.onUpdate = null;\n\n}\n\nTexture.DEFAULT_IMAGE = undefined;\nTexture.DEFAULT_MAPPING = UVMapping;\n\nTexture.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Texture,\n\n\tisTexture: true,\n\n\tupdateMatrix: function () {\n\n\t\tthis.matrix.setUvTransform( this.offset.x, this.offset.y, this.repeat.x, this.repeat.y, this.rotation, this.center.x, this.center.y );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.image = source.image;\n\t\tthis.mipmaps = source.mipmaps.slice( 0 );\n\n\t\tthis.mapping = source.mapping;\n\n\t\tthis.wrapS = source.wrapS;\n\t\tthis.wrapT = source.wrapT;\n\n\t\tthis.magFilter = source.magFilter;\n\t\tthis.minFilter = source.minFilter;\n\n\t\tthis.anisotropy = source.anisotropy;\n\n\t\tthis.format = source.format;\n\t\tthis.internalFormat = source.internalFormat;\n\t\tthis.type = source.type;\n\n\t\tthis.offset.copy( source.offset );\n\t\tthis.repeat.copy( source.repeat );\n\t\tthis.center.copy( source.center );\n\t\tthis.rotation = source.rotation;\n\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\t\tthis.matrix.copy( source.matrix );\n\n\t\tthis.generateMipmaps = source.generateMipmaps;\n\t\tthis.premultiplyAlpha = source.premultiplyAlpha;\n\t\tthis.flipY = source.flipY;\n\t\tthis.unpackAlignment = source.unpackAlignment;\n\t\tthis.encoding = source.encoding;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( ! isRootObject && meta.textures[ this.uuid ] !== undefined ) {\n\n\t\t\treturn meta.textures[ this.uuid ];\n\n\t\t}\n\n\t\tvar output = {\n\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Texture',\n\t\t\t\tgenerator: 'Texture.toJSON'\n\t\t\t},\n\n\t\t\tuuid: this.uuid,\n\t\t\tname: this.name,\n\n\t\t\tmapping: this.mapping,\n\n\t\t\trepeat: [ this.repeat.x, this.repeat.y ],\n\t\t\toffset: [ this.offset.x, this.offset.y ],\n\t\t\tcenter: [ this.center.x, this.center.y ],\n\t\t\trotation: this.rotation,\n\n\t\t\twrap: [ this.wrapS, this.wrapT ],\n\n\t\t\tformat: this.format,\n\t\t\ttype: this.type,\n\t\t\tencoding: this.encoding,\n\n\t\t\tminFilter: this.minFilter,\n\t\t\tmagFilter: this.magFilter,\n\t\t\tanisotropy: this.anisotropy,\n\n\t\t\tflipY: this.flipY,\n\n\t\t\tpremultiplyAlpha: this.premultiplyAlpha,\n\t\t\tunpackAlignment: this.unpackAlignment\n\n\t\t};\n\n\t\tif ( this.image !== undefined ) {\n\n\t\t\t// TODO: Move to THREE.Image\n\n\t\t\tvar image = this.image;\n\n\t\t\tif ( image.uuid === undefined ) {\n\n\t\t\t\timage.uuid = MathUtils.generateUUID(); // UGH\n\n\t\t\t}\n\n\t\t\tif ( ! isRootObject && meta.images[ image.uuid ] === undefined ) {\n\n\t\t\t\tvar url;\n\n\t\t\t\tif ( Array.isArray( image ) ) {\n\n\t\t\t\t\t// process array of images e.g. CubeTexture\n\n\t\t\t\t\turl = [];\n\n\t\t\t\t\tfor ( var i = 0, l = image.length; i < l; i ++ ) {\n\n\t\t\t\t\t\turl.push( ImageUtils.getDataURL( image[ i ] ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// process single image\n\n\t\t\t\t\turl = ImageUtils.getDataURL( image );\n\n\t\t\t\t}\n\n\t\t\t\tmeta.images[ image.uuid ] = {\n\t\t\t\t\tuuid: image.uuid,\n\t\t\t\t\turl: url\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\toutput.image = image.uuid;\n\n\t\t}\n\n\t\tif ( ! isRootObject ) {\n\n\t\t\tmeta.textures[ this.uuid ] = output;\n\n\t\t}\n\n\t\treturn output;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t},\n\n\ttransformUv: function ( uv ) {\n\n\t\tif ( this.mapping !== UVMapping ) return uv;\n\n\t\tuv.applyMatrix3( this.matrix );\n\n\t\tif ( uv.x < 0 || uv.x > 1 ) {\n\n\t\t\tswitch ( this.wrapS ) {\n\n\t\t\t\tcase RepeatWrapping:\n\n\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ClampToEdgeWrapping:\n\n\t\t\t\t\tuv.x = uv.x < 0 ? 0 : 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MirroredRepeatWrapping:\n\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.x ) % 2 ) === 1 ) {\n\n\t\t\t\t\t\tuv.x = Math.ceil( uv.x ) - uv.x;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\n\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( uv.y < 0 || uv.y > 1 ) {\n\n\t\t\tswitch ( this.wrapT ) {\n\n\t\t\t\tcase RepeatWrapping:\n\n\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ClampToEdgeWrapping:\n\n\t\t\t\t\tuv.y = uv.y < 0 ? 0 : 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MirroredRepeatWrapping:\n\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.y ) % 2 ) === 1 ) {\n\n\t\t\t\t\t\tuv.y = Math.ceil( uv.y ) - uv.y;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\n\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.flipY ) {\n\n\t\t\tuv.y = 1 - uv.y;\n\n\t\t}\n\n\t\treturn uv;\n\n\t}\n\n} );\n\nObject.defineProperty( Texture.prototype, \"needsUpdate\", {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\n\nexport { Texture };\n","import { Object3D } from '../core/Object3D.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction Light( color, intensity ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Light';\n\n\tthis.color = new Color( color );\n\tthis.intensity = intensity !== undefined ? intensity : 1;\n\n\tthis.receiveShadow = undefined;\n\n}\n\nLight.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Light,\n\n\tisLight: true,\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source );\n\n\t\tthis.color.copy( source.color );\n\t\tthis.intensity = source.intensity;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.color = this.color.getHex();\n\t\tdata.object.intensity = this.intensity;\n\n\t\tif ( this.groundColor !== undefined ) data.object.groundColor = this.groundColor.getHex();\n\n\t\tif ( this.distance !== undefined ) data.object.distance = this.distance;\n\t\tif ( this.angle !== undefined ) data.object.angle = this.angle;\n\t\tif ( this.decay !== undefined ) data.object.decay = this.decay;\n\t\tif ( this.penumbra !== undefined ) data.object.penumbra = this.penumbra;\n\n\t\tif ( this.shadow !== undefined ) data.object.shadow = this.shadow.toJSON();\n\n\t\treturn data;\n\n\t}\n\n} );\n\n\nexport { Light };\n","import { ShaderChunk } from './ShaderChunk.js';\nimport { mergeUniforms } from './UniformsUtils.js';\nimport { Vector2 } from '../../math/Vector2.js';\nimport { Vector3 } from '../../math/Vector3.js';\nimport { UniformsLib } from './UniformsLib.js';\nimport { Color } from '../../math/Color.js';\nimport { Matrix3 } from '../../math/Matrix3.js';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n * @author mikael emtinger / http://gomo.se/\n */\n\nvar ShaderLib = {\n\n\tbasic: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshbasic_vert,\n\t\tfragmentShader: ShaderChunk.meshbasic_frag\n\n\t},\n\n\tlambert: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshlambert_vert,\n\t\tfragmentShader: ShaderChunk.meshlambert_frag\n\n\t},\n\n\tphong: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) },\n\t\t\t\tspecular: { value: new Color( 0x111111 ) },\n\t\t\t\tshininess: { value: 30 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshphong_vert,\n\t\tfragmentShader: ShaderChunk.meshphong_frag\n\n\t},\n\n\tstandard: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.envmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.roughnessmap,\n\t\t\tUniformsLib.metalnessmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) },\n\t\t\t\troughness: { value: 0.5 },\n\t\t\t\tmetalness: { value: 0.5 },\n\t\t\t\tenvMapIntensity: { value: 1 } // temporary\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshphysical_vert,\n\t\tfragmentShader: ShaderChunk.meshphysical_frag\n\n\t},\n\n\ttoon: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.specularmap,\n\t\t\tUniformsLib.aomap,\n\t\t\tUniformsLib.lightmap,\n\t\t\tUniformsLib.emissivemap,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.gradientmap,\n\t\t\tUniformsLib.fog,\n\t\t\tUniformsLib.lights,\n\t\t\t{\n\t\t\t\temissive: { value: new Color( 0x000000 ) },\n\t\t\t\tspecular: { value: new Color( 0x111111 ) },\n\t\t\t\tshininess: { value: 30 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshtoon_vert,\n\t\tfragmentShader: ShaderChunk.meshtoon_frag\n\n\t},\n\n\tmatcap: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tmatcap: { value: null }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.meshmatcap_vert,\n\t\tfragmentShader: ShaderChunk.meshmatcap_frag\n\n\t},\n\n\tpoints: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.points,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.points_vert,\n\t\tfragmentShader: ShaderChunk.points_frag\n\n\t},\n\n\tdashed: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tscale: { value: 1 },\n\t\t\t\tdashSize: { value: 1 },\n\t\t\t\ttotalSize: { value: 2 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.linedashed_vert,\n\t\tfragmentShader: ShaderChunk.linedashed_frag\n\n\t},\n\n\tdepth: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.displacementmap\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.depth_vert,\n\t\tfragmentShader: ShaderChunk.depth_frag\n\n\t},\n\n\tnormal: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.bumpmap,\n\t\t\tUniformsLib.normalmap,\n\t\t\tUniformsLib.displacementmap,\n\t\t\t{\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.normal_vert,\n\t\tfragmentShader: ShaderChunk.normal_frag\n\n\t},\n\n\tsprite: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.sprite,\n\t\t\tUniformsLib.fog\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.sprite_vert,\n\t\tfragmentShader: ShaderChunk.sprite_frag\n\n\t},\n\n\tbackground: {\n\n\t\tuniforms: {\n\t\t\tuvTransform: { value: new Matrix3() },\n\t\t\tt2D: { value: null },\n\t\t},\n\n\t\tvertexShader: ShaderChunk.background_vert,\n\t\tfragmentShader: ShaderChunk.background_frag\n\n\t},\n\t/* -------------------------------------------------------------------------\n\t//\tCube map shader\n\t ------------------------------------------------------------------------- */\n\n\tcube: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.envmap,\n\t\t\t{\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.cube_vert,\n\t\tfragmentShader: ShaderChunk.cube_frag\n\n\t},\n\n\tequirect: {\n\n\t\tuniforms: {\n\t\t\ttEquirect: { value: null },\n\t\t},\n\n\t\tvertexShader: ShaderChunk.equirect_vert,\n\t\tfragmentShader: ShaderChunk.equirect_frag\n\n\t},\n\n\tdistanceRGBA: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.common,\n\t\t\tUniformsLib.displacementmap,\n\t\t\t{\n\t\t\t\treferencePosition: { value: new Vector3() },\n\t\t\t\tnearDistance: { value: 1 },\n\t\t\t\tfarDistance: { value: 1000 }\n\t\t\t}\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.distanceRGBA_vert,\n\t\tfragmentShader: ShaderChunk.distanceRGBA_frag\n\n\t},\n\n\tshadow: {\n\n\t\tuniforms: mergeUniforms( [\n\t\t\tUniformsLib.lights,\n\t\t\tUniformsLib.fog,\n\t\t\t{\n\t\t\t\tcolor: { value: new Color( 0x00000 ) },\n\t\t\t\topacity: { value: 1.0 }\n\t\t\t},\n\t\t] ),\n\n\t\tvertexShader: ShaderChunk.shadow_vert,\n\t\tfragmentShader: ShaderChunk.shadow_frag\n\n\t}\n\n};\n\nShaderLib.physical = {\n\n\tuniforms: mergeUniforms( [\n\t\tShaderLib.standard.uniforms,\n\t\t{\n\t\t\tclearcoat: { value: 0 },\n\t\t\tclearcoatMap: { value: null },\n\t\t\tclearcoatRoughness: { value: 0 },\n\t\t\tclearcoatRoughnessMap: { value: null },\n\t\t\tclearcoatNormalScale: { value: new Vector2( 1, 1 ) },\n\t\t\tclearcoatNormalMap: { value: null },\n\t\t\tsheen: { value: new Color( 0x000000 ) },\n\t\t\ttransparency: { value: 0 },\n\t\t}\n\t] ),\n\n\tvertexShader: ShaderChunk.meshphysical_vert,\n\tfragmentShader: ShaderChunk.meshphysical_frag\n\n};\n\n\nexport { ShaderLib };\n","import { Interpolant } from '../Interpolant.js';\n\n/**\n *\n * Interpolant that evaluates to the sample value at the position preceeding\n * the parameter.\n *\n * @author tschw\n */\n\nfunction DiscreteInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n}\n\nDiscreteInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\n\n\tconstructor: DiscreteInterpolant,\n\n\tinterpolate_: function ( i1 /*, t0, t, t1 */ ) {\n\n\t\treturn this.copySampleValue_( i1 - 1 );\n\n\t}\n\n} );\n\n\nexport { DiscreteInterpolant };\n","import {\n\tInterpolateLinear,\n\tInterpolateSmooth,\n\tInterpolateDiscrete\n} from '../constants.js';\nimport { CubicInterpolant } from '../math/interpolants/CubicInterpolant.js';\nimport { LinearInterpolant } from '../math/interpolants/LinearInterpolant.js';\nimport { DiscreteInterpolant } from '../math/interpolants/DiscreteInterpolant.js';\nimport { AnimationUtils } from './AnimationUtils.js';\n\n/**\n *\n * A timed sequence of keyframes for a specific property.\n *\n *\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n * @author tschw\n */\n\nfunction KeyframeTrack( name, times, values, interpolation ) {\n\n\tif ( name === undefined ) throw new Error( 'THREE.KeyframeTrack: track name is undefined' );\n\tif ( times === undefined || times.length === 0 ) throw new Error( 'THREE.KeyframeTrack: no keyframes in track named ' + name );\n\n\tthis.name = name;\n\n\tthis.times = AnimationUtils.convertArray( times, this.TimeBufferType );\n\tthis.values = AnimationUtils.convertArray( values, this.ValueBufferType );\n\n\tthis.setInterpolation( interpolation || this.DefaultInterpolation );\n\n}\n\n// Static methods\n\nObject.assign( KeyframeTrack, {\n\n\t// Serialization (in static context, because of constructor invocation\n\t// and automatic invocation of .toJSON):\n\n\ttoJSON: function ( track ) {\n\n\t\tvar trackType = track.constructor;\n\n\t\tvar json;\n\n\t\t// derived classes can define a static toJSON method\n\t\tif ( trackType.toJSON !== undefined ) {\n\n\t\t\tjson = trackType.toJSON( track );\n\n\t\t} else {\n\n\t\t\t// by default, we assume the data can be serialized as-is\n\t\t\tjson = {\n\n\t\t\t\t'name': track.name,\n\t\t\t\t'times': AnimationUtils.convertArray( track.times, Array ),\n\t\t\t\t'values': AnimationUtils.convertArray( track.values, Array )\n\n\t\t\t};\n\n\t\t\tvar interpolation = track.getInterpolation();\n\n\t\t\tif ( interpolation !== track.DefaultInterpolation ) {\n\n\t\t\t\tjson.interpolation = interpolation;\n\n\t\t\t}\n\n\t\t}\n\n\t\tjson.type = track.ValueTypeName; // mandatory\n\n\t\treturn json;\n\n\t}\n\n} );\n\nObject.assign( KeyframeTrack.prototype, {\n\n\tconstructor: KeyframeTrack,\n\n\tTimeBufferType: Float32Array,\n\n\tValueBufferType: Float32Array,\n\n\tDefaultInterpolation: InterpolateLinear,\n\n\tInterpolantFactoryMethodDiscrete: function ( result ) {\n\n\t\treturn new DiscreteInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t},\n\n\tInterpolantFactoryMethodLinear: function ( result ) {\n\n\t\treturn new LinearInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t},\n\n\tInterpolantFactoryMethodSmooth: function ( result ) {\n\n\t\treturn new CubicInterpolant( this.times, this.values, this.getValueSize(), result );\n\n\t},\n\n\tsetInterpolation: function ( interpolation ) {\n\n\t\tvar factoryMethod;\n\n\t\tswitch ( interpolation ) {\n\n\t\t\tcase InterpolateDiscrete:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodDiscrete;\n\n\t\t\t\tbreak;\n\n\t\t\tcase InterpolateLinear:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodLinear;\n\n\t\t\t\tbreak;\n\n\t\t\tcase InterpolateSmooth:\n\n\t\t\t\tfactoryMethod = this.InterpolantFactoryMethodSmooth;\n\n\t\t\t\tbreak;\n\n\t\t}\n\n\t\tif ( factoryMethod === undefined ) {\n\n\t\t\tvar message = \"unsupported interpolation for \" +\n\t\t\t\tthis.ValueTypeName + \" keyframe track named \" + this.name;\n\n\t\t\tif ( this.createInterpolant === undefined ) {\n\n\t\t\t\t// fall back to default, unless the default itself is messed up\n\t\t\t\tif ( interpolation !== this.DefaultInterpolation ) {\n\n\t\t\t\t\tthis.setInterpolation( this.DefaultInterpolation );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthrow new Error( message ); // fatal, in this case\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tconsole.warn( 'THREE.KeyframeTrack:', message );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tthis.createInterpolant = factoryMethod;\n\n\t\treturn this;\n\n\t},\n\n\tgetInterpolation: function () {\n\n\t\tswitch ( this.createInterpolant ) {\n\n\t\t\tcase this.InterpolantFactoryMethodDiscrete:\n\n\t\t\t\treturn InterpolateDiscrete;\n\n\t\t\tcase this.InterpolantFactoryMethodLinear:\n\n\t\t\t\treturn InterpolateLinear;\n\n\t\t\tcase this.InterpolantFactoryMethodSmooth:\n\n\t\t\t\treturn InterpolateSmooth;\n\n\t\t}\n\n\t},\n\n\tgetValueSize: function () {\n\n\t\treturn this.values.length / this.times.length;\n\n\t},\n\n\t// move all keyframes either forwards or backwards in time\n\tshift: function ( timeOffset ) {\n\n\t\tif ( timeOffset !== 0.0 ) {\n\n\t\t\tvar times = this.times;\n\n\t\t\tfor ( var i = 0, n = times.length; i !== n; ++ i ) {\n\n\t\t\t\ttimes[ i ] += timeOffset;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// scale all keyframe times by a factor (useful for frame <-> seconds conversions)\n\tscale: function ( timeScale ) {\n\n\t\tif ( timeScale !== 1.0 ) {\n\n\t\t\tvar times = this.times;\n\n\t\t\tfor ( var i = 0, n = times.length; i !== n; ++ i ) {\n\n\t\t\t\ttimes[ i ] *= timeScale;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// removes keyframes before and after animation without changing any values within the range [startTime, endTime].\n\t// IMPORTANT: We do not shift around keys to the start of the track time, because for interpolated keys this will change their values\n\ttrim: function ( startTime, endTime ) {\n\n\t\tvar times = this.times,\n\t\t\tnKeys = times.length,\n\t\t\tfrom = 0,\n\t\t\tto = nKeys - 1;\n\n\t\twhile ( from !== nKeys && times[ from ] < startTime ) {\n\n\t\t\t++ from;\n\n\t\t}\n\n\t\twhile ( to !== - 1 && times[ to ] > endTime ) {\n\n\t\t\t-- to;\n\n\t\t}\n\n\t\t++ to; // inclusive -> exclusive bound\n\n\t\tif ( from !== 0 || to !== nKeys ) {\n\n\t\t\t// empty tracks are forbidden, so keep at least one keyframe\n\t\t\tif ( from >= to ) {\n\n\t\t\t\tto = Math.max( to, 1 );\n\t\t\t\tfrom = to - 1;\n\n\t\t\t}\n\n\t\t\tvar stride = this.getValueSize();\n\t\t\tthis.times = AnimationUtils.arraySlice( times, from, to );\n\t\t\tthis.values = AnimationUtils.arraySlice( this.values, from * stride, to * stride );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\t// ensure we do not get a GarbageInGarbageOut situation, make sure tracks are at least minimally viable\n\tvalidate: function () {\n\n\t\tvar valid = true;\n\n\t\tvar valueSize = this.getValueSize();\n\t\tif ( valueSize - Math.floor( valueSize ) !== 0 ) {\n\n\t\t\tconsole.error( 'THREE.KeyframeTrack: Invalid value size in track.', this );\n\t\t\tvalid = false;\n\n\t\t}\n\n\t\tvar times = this.times,\n\t\t\tvalues = this.values,\n\n\t\t\tnKeys = times.length;\n\n\t\tif ( nKeys === 0 ) {\n\n\t\t\tconsole.error( 'THREE.KeyframeTrack: Track is empty.', this );\n\t\t\tvalid = false;\n\n\t\t}\n\n\t\tvar prevTime = null;\n\n\t\tfor ( var i = 0; i !== nKeys; i ++ ) {\n\n\t\t\tvar currTime = times[ i ];\n\n\t\t\tif ( typeof currTime === 'number' && isNaN( currTime ) ) {\n\n\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Time is not a valid number.', this, i, currTime );\n\t\t\t\tvalid = false;\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tif ( prevTime !== null && prevTime > currTime ) {\n\n\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Out of order keys.', this, i, currTime, prevTime );\n\t\t\t\tvalid = false;\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tprevTime = currTime;\n\n\t\t}\n\n\t\tif ( values !== undefined ) {\n\n\t\t\tif ( AnimationUtils.isTypedArray( values ) ) {\n\n\t\t\t\tfor ( var i = 0, n = values.length; i !== n; ++ i ) {\n\n\t\t\t\t\tvar value = values[ i ];\n\n\t\t\t\t\tif ( isNaN( value ) ) {\n\n\t\t\t\t\t\tconsole.error( 'THREE.KeyframeTrack: Value is not a valid number.', this, i, value );\n\t\t\t\t\t\tvalid = false;\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn valid;\n\n\t},\n\n\t// removes equivalent sequential keys as common in morph target sequences\n\t// (0,0,0,0,1,1,1,0,0,0,0,0,0,0) --> (0,0,1,1,0,0)\n\toptimize: function () {\n\n\t\t// times or values may be shared with other tracks, so overwriting is unsafe\n\t\tvar times = AnimationUtils.arraySlice( this.times ),\n\t\t\tvalues = AnimationUtils.arraySlice( this.values ),\n\t\t\tstride = this.getValueSize(),\n\n\t\t\tsmoothInterpolation = this.getInterpolation() === InterpolateSmooth,\n\n\t\t\twriteIndex = 1,\n\t\t\tlastIndex = times.length - 1;\n\n\t\tfor ( var i = 1; i < lastIndex; ++ i ) {\n\n\t\t\tvar keep = false;\n\n\t\t\tvar time = times[ i ];\n\t\t\tvar timeNext = times[ i + 1 ];\n\n\t\t\t// remove adjacent keyframes scheduled at the same time\n\n\t\t\tif ( time !== timeNext && ( i !== 1 || time !== time[ 0 ] ) ) {\n\n\t\t\t\tif ( ! smoothInterpolation ) {\n\n\t\t\t\t\t// remove unnecessary keyframes same as their neighbors\n\n\t\t\t\t\tvar offset = i * stride,\n\t\t\t\t\t\toffsetP = offset - stride,\n\t\t\t\t\t\toffsetN = offset + stride;\n\n\t\t\t\t\tfor ( var j = 0; j !== stride; ++ j ) {\n\n\t\t\t\t\t\tvar value = values[ offset + j ];\n\n\t\t\t\t\t\tif ( value !== values[ offsetP + j ] ||\n\t\t\t\t\t\t\tvalue !== values[ offsetN + j ] ) {\n\n\t\t\t\t\t\t\tkeep = true;\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tkeep = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// in-place compaction\n\n\t\t\tif ( keep ) {\n\n\t\t\t\tif ( i !== writeIndex ) {\n\n\t\t\t\t\ttimes[ writeIndex ] = times[ i ];\n\n\t\t\t\t\tvar readOffset = i * stride,\n\t\t\t\t\t\twriteOffset = writeIndex * stride;\n\n\t\t\t\t\tfor ( var j = 0; j !== stride; ++ j ) {\n\n\t\t\t\t\t\tvalues[ writeOffset + j ] = values[ readOffset + j ];\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t++ writeIndex;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// flush last keyframe (compaction looks ahead)\n\n\t\tif ( lastIndex > 0 ) {\n\n\t\t\ttimes[ writeIndex ] = times[ lastIndex ];\n\n\t\t\tfor ( var readOffset = lastIndex * stride, writeOffset = writeIndex * stride, j = 0; j !== stride; ++ j ) {\n\n\t\t\t\tvalues[ writeOffset + j ] = values[ readOffset + j ];\n\n\t\t\t}\n\n\t\t\t++ writeIndex;\n\n\t\t}\n\n\t\tif ( writeIndex !== times.length ) {\n\n\t\t\tthis.times = AnimationUtils.arraySlice( times, 0, writeIndex );\n\t\t\tthis.values = AnimationUtils.arraySlice( values, 0, writeIndex * stride );\n\n\t\t} else {\n\n\t\t\tthis.times = times;\n\t\t\tthis.values = values;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\tvar times = AnimationUtils.arraySlice( this.times, 0 );\n\t\tvar values = AnimationUtils.arraySlice( this.values, 0 );\n\n\t\tvar TypedKeyframeTrack = this.constructor;\n\t\tvar track = new TypedKeyframeTrack( this.name, times, values );\n\n\t\t// Interpolant argument to constructor is not saved, so copy the factory method directly.\n\t\ttrack.createInterpolant = this.createInterpolant;\n\n\t\treturn track;\n\n\t}\n\n} );\n\nexport { KeyframeTrack };\n","/**\n * @author tschw\n * @author Ben Houston / http://clara.io/\n * @author David Sarno / http://lighthaus.us/\n */\n\nvar AnimationUtils = {\n\n\t// same as Array.prototype.slice, but also works on typed arrays\n\tarraySlice: function ( array, from, to ) {\n\n\t\tif ( AnimationUtils.isTypedArray( array ) ) {\n\n\t\t\t// in ios9 array.subarray(from, undefined) will return empty array\n\t\t\t// but array.subarray(from) or array.subarray(from, len) is correct\n\t\t\treturn new array.constructor( array.subarray( from, to !== undefined ? to : array.length ) );\n\n\t\t}\n\n\t\treturn array.slice( from, to );\n\n\t},\n\n\t// converts an array to a specific type\n\tconvertArray: function ( array, type, forceClone ) {\n\n\t\tif ( ! array || // let 'undefined' and 'null' pass\n\t\t\t! forceClone && array.constructor === type ) return array;\n\n\t\tif ( typeof type.BYTES_PER_ELEMENT === 'number' ) {\n\n\t\t\treturn new type( array ); // create typed array\n\n\t\t}\n\n\t\treturn Array.prototype.slice.call( array ); // create Array\n\n\t},\n\n\tisTypedArray: function ( object ) {\n\n\t\treturn ArrayBuffer.isView( object ) &&\n\t\t\t! ( object instanceof DataView );\n\n\t},\n\n\t// returns an array by which times and values can be sorted\n\tgetKeyframeOrder: function ( times ) {\n\n\t\tfunction compareTime( i, j ) {\n\n\t\t\treturn times[ i ] - times[ j ];\n\n\t\t}\n\n\t\tvar n = times.length;\n\t\tvar result = new Array( n );\n\t\tfor ( var i = 0; i !== n; ++ i ) result[ i ] = i;\n\n\t\tresult.sort( compareTime );\n\n\t\treturn result;\n\n\t},\n\n\t// uses the array previously returned by 'getKeyframeOrder' to sort data\n\tsortedArray: function ( values, stride, order ) {\n\n\t\tvar nValues = values.length;\n\t\tvar result = new values.constructor( nValues );\n\n\t\tfor ( var i = 0, dstOffset = 0; dstOffset !== nValues; ++ i ) {\n\n\t\t\tvar srcOffset = order[ i ] * stride;\n\n\t\t\tfor ( var j = 0; j !== stride; ++ j ) {\n\n\t\t\t\tresult[ dstOffset ++ ] = values[ srcOffset + j ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn result;\n\n\t},\n\n\t// function for parsing AOS keyframe formats\n\tflattenJSON: function ( jsonKeys, times, values, valuePropertyName ) {\n\n\t\tvar i = 1, key = jsonKeys[ 0 ];\n\n\t\twhile ( key !== undefined && key[ valuePropertyName ] === undefined ) {\n\n\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t}\n\n\t\tif ( key === undefined ) return; // no data\n\n\t\tvar value = key[ valuePropertyName ];\n\t\tif ( value === undefined ) return; // no data\n\n\t\tif ( Array.isArray( value ) ) {\n\n\t\t\tdo {\n\n\t\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\ttimes.push( key.time );\n\t\t\t\t\tvalues.push.apply( values, value ); // push all elements\n\n\t\t\t\t}\n\n\t\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t\t} while ( key !== undefined );\n\n\t\t} else if ( value.toArray !== undefined ) {\n\n\t\t\t// ...assume THREE.Math-ish\n\n\t\t\tdo {\n\n\t\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\ttimes.push( key.time );\n\t\t\t\t\tvalue.toArray( values, values.length );\n\n\t\t\t\t}\n\n\t\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t\t} while ( key !== undefined );\n\n\t\t} else {\n\n\t\t\t// otherwise push as-is\n\n\t\t\tdo {\n\n\t\t\t\tvalue = key[ valuePropertyName ];\n\n\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\ttimes.push( key.time );\n\t\t\t\t\tvalues.push( value );\n\n\t\t\t\t}\n\n\t\t\t\tkey = jsonKeys[ i ++ ];\n\n\t\t\t} while ( key !== undefined );\n\n\t\t}\n\n\t},\n\n\tsubclip: function ( sourceClip, name, startFrame, endFrame, fps ) {\n\n\t\tfps = fps || 30;\n\n\t\tvar clip = sourceClip.clone();\n\n\t\tclip.name = name;\n\n\t\tvar tracks = [];\n\n\t\tfor ( var i = 0; i < clip.tracks.length; ++ i ) {\n\n\t\t\tvar track = clip.tracks[ i ];\n\t\t\tvar valueSize = track.getValueSize();\n\n\t\t\tvar times = [];\n\t\t\tvar values = [];\n\n\t\t\tfor ( var j = 0; j < track.times.length; ++ j ) {\n\n\t\t\t\tvar frame = track.times[ j ] * fps;\n\n\t\t\t\tif ( frame < startFrame || frame >= endFrame ) continue;\n\n\t\t\t\ttimes.push( track.times[ j ] );\n\n\t\t\t\tfor ( var k = 0; k < valueSize; ++ k ) {\n\n\t\t\t\t\tvalues.push( track.values[ j * valueSize + k ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( times.length === 0 ) continue;\n\n\t\t\ttrack.times = AnimationUtils.convertArray( times, track.times.constructor );\n\t\t\ttrack.values = AnimationUtils.convertArray( values, track.values.constructor );\n\n\t\t\ttracks.push( track );\n\n\t\t}\n\n\t\tclip.tracks = tracks;\n\n\t\t// find minimum .times value across all tracks in the trimmed clip\n\n\t\tvar minStartTime = Infinity;\n\n\t\tfor ( var i = 0; i < clip.tracks.length; ++ i ) {\n\n\t\t\tif ( minStartTime > clip.tracks[ i ].times[ 0 ] ) {\n\n\t\t\t\tminStartTime = clip.tracks[ i ].times[ 0 ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// shift all tracks such that clip begins at t=0\n\n\t\tfor ( var i = 0; i < clip.tracks.length; ++ i ) {\n\n\t\t\tclip.tracks[ i ].shift( - 1 * minStartTime );\n\n\t\t}\n\n\t\tclip.resetDuration();\n\n\t\treturn clip;\n\n\t}\n\n};\n\nexport { AnimationUtils };\n","import { Vector4 } from '../math/Vector4.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Color } from '../math/Color.js';\nimport { StaticDrawUsage } from '../constants.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar _vector = new Vector3();\n\nfunction BufferAttribute( array, itemSize, normalized ) {\n\n\tif ( Array.isArray( array ) ) {\n\n\t\tthrow new TypeError( 'THREE.BufferAttribute: array should be a Typed Array.' );\n\n\t}\n\n\tthis.name = '';\n\n\tthis.array = array;\n\tthis.itemSize = itemSize;\n\tthis.count = array !== undefined ? array.length / itemSize : 0;\n\tthis.normalized = normalized === true;\n\n\tthis.usage = StaticDrawUsage;\n\tthis.updateRange = { offset: 0, count: - 1 };\n\n\tthis.version = 0;\n\n}\n\nObject.defineProperty( BufferAttribute.prototype, 'needsUpdate', {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\nObject.assign( BufferAttribute.prototype, {\n\n\tisBufferAttribute: true,\n\n\tonUploadCallback: function () {},\n\n\tsetUsage: function ( value ) {\n\n\t\tthis.usage = value;\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.name = source.name;\n\t\tthis.array = new source.array.constructor( source.array );\n\t\tthis.itemSize = source.itemSize;\n\t\tthis.count = source.count;\n\t\tthis.normalized = source.normalized;\n\n\t\tthis.usage = source.usage;\n\n\t\treturn this;\n\n\t},\n\n\tcopyAt: function ( index1, attribute, index2 ) {\n\n\t\tindex1 *= this.itemSize;\n\t\tindex2 *= attribute.itemSize;\n\n\t\tfor ( var i = 0, l = this.itemSize; i < l; i ++ ) {\n\n\t\t\tthis.array[ index1 + i ] = attribute.array[ index2 + i ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyArray: function ( array ) {\n\n\t\tthis.array.set( array );\n\n\t\treturn this;\n\n\t},\n\n\tcopyColorsArray: function ( colors ) {\n\n\t\tvar array = this.array, offset = 0;\n\n\t\tfor ( var i = 0, l = colors.length; i < l; i ++ ) {\n\n\t\t\tvar color = colors[ i ];\n\n\t\t\tif ( color === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyColorsArray(): color is undefined', i );\n\t\t\t\tcolor = new Color();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = color.r;\n\t\t\tarray[ offset ++ ] = color.g;\n\t\t\tarray[ offset ++ ] = color.b;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector2sArray: function ( vectors ) {\n\n\t\tvar array = this.array, offset = 0;\n\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tvar vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector2sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector2();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector3sArray: function ( vectors ) {\n\n\t\tvar array = this.array, offset = 0;\n\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tvar vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector3sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector3();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\t\t\tarray[ offset ++ ] = vector.z;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcopyVector4sArray: function ( vectors ) {\n\n\t\tvar array = this.array, offset = 0;\n\n\t\tfor ( var i = 0, l = vectors.length; i < l; i ++ ) {\n\n\t\t\tvar vector = vectors[ i ];\n\n\t\t\tif ( vector === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.BufferAttribute.copyVector4sArray(): vector is undefined', i );\n\t\t\t\tvector = new Vector4();\n\n\t\t\t}\n\n\t\t\tarray[ offset ++ ] = vector.x;\n\t\t\tarray[ offset ++ ] = vector.y;\n\t\t\tarray[ offset ++ ] = vector.z;\n\t\t\tarray[ offset ++ ] = vector.w;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix3: function ( m ) {\n\n\t\tfor ( var i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector.x = this.getX( i );\n\t\t\t_vector.y = this.getY( i );\n\t\t\t_vector.z = this.getZ( i );\n\n\t\t\t_vector.applyMatrix3( m );\n\n\t\t\tthis.setXYZ( i, _vector.x, _vector.y, _vector.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function ( m ) {\n\n\t\tfor ( var i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector.x = this.getX( i );\n\t\t\t_vector.y = this.getY( i );\n\t\t\t_vector.z = this.getZ( i );\n\n\t\t\t_vector.applyMatrix4( m );\n\n\t\t\tthis.setXYZ( i, _vector.x, _vector.y, _vector.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tapplyNormalMatrix: function ( m ) {\n\n\t\tfor ( var i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector.x = this.getX( i );\n\t\t\t_vector.y = this.getY( i );\n\t\t\t_vector.z = this.getZ( i );\n\n\t\t\t_vector.applyNormalMatrix( m );\n\n\t\t\tthis.setXYZ( i, _vector.x, _vector.y, _vector.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttransformDirection: function ( m ) {\n\n\t\tfor ( var i = 0, l = this.count; i < l; i ++ ) {\n\n\t\t\t_vector.x = this.getX( i );\n\t\t\t_vector.y = this.getY( i );\n\t\t\t_vector.z = this.getZ( i );\n\n\t\t\t_vector.transformDirection( m );\n\n\t\t\tthis.setXYZ( i, _vector.x, _vector.y, _vector.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tset: function ( value, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.array.set( value, offset );\n\n\t\treturn this;\n\n\t},\n\n\tgetX: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize ];\n\n\t},\n\n\tsetX: function ( index, x ) {\n\n\t\tthis.array[ index * this.itemSize ] = x;\n\n\t\treturn this;\n\n\t},\n\n\tgetY: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 1 ];\n\n\t},\n\n\tsetY: function ( index, y ) {\n\n\t\tthis.array[ index * this.itemSize + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tgetZ: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 2 ];\n\n\t},\n\n\tsetZ: function ( index, z ) {\n\n\t\tthis.array[ index * this.itemSize + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tgetW: function ( index ) {\n\n\t\treturn this.array[ index * this.itemSize + 3 ];\n\n\t},\n\n\tsetW: function ( index, w ) {\n\n\t\tthis.array[ index * this.itemSize + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetXY: function ( index, x, y ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZ: function ( index, x, y, z ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZW: function ( index, x, y, z, w ) {\n\n\t\tindex *= this.itemSize;\n\n\t\tthis.array[ index + 0 ] = x;\n\t\tthis.array[ index + 1 ] = y;\n\t\tthis.array[ index + 2 ] = z;\n\t\tthis.array[ index + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tonUpload: function ( callback ) {\n\n\t\tthis.onUploadCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.array, this.itemSize ).copy( this );\n\n\t},\n\n\ttoJSON: function () {\n\n\t\treturn {\n\t\t\titemSize: this.itemSize,\n\t\t\ttype: this.array.constructor.name,\n\t\t\tarray: Array.prototype.slice.call( this.array ),\n\t\t\tnormalized: this.normalized\n\t\t};\n\n\t}\n\n} );\n\n//\n\nfunction Int8BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Int8Array( array ), itemSize, normalized );\n\n}\n\nInt8BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nInt8BufferAttribute.prototype.constructor = Int8BufferAttribute;\n\n\nfunction Uint8BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint8Array( array ), itemSize, normalized );\n\n}\n\nUint8BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint8BufferAttribute.prototype.constructor = Uint8BufferAttribute;\n\n\nfunction Uint8ClampedBufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint8ClampedArray( array ), itemSize, normalized );\n\n}\n\nUint8ClampedBufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint8ClampedBufferAttribute.prototype.constructor = Uint8ClampedBufferAttribute;\n\n\nfunction Int16BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Int16Array( array ), itemSize, normalized );\n\n}\n\nInt16BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nInt16BufferAttribute.prototype.constructor = Int16BufferAttribute;\n\n\nfunction Uint16BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint16Array( array ), itemSize, normalized );\n\n}\n\nUint16BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint16BufferAttribute.prototype.constructor = Uint16BufferAttribute;\n\n\nfunction Int32BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Int32Array( array ), itemSize, normalized );\n\n}\n\nInt32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nInt32BufferAttribute.prototype.constructor = Int32BufferAttribute;\n\n\nfunction Uint32BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Uint32Array( array ), itemSize, normalized );\n\n}\n\nUint32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nUint32BufferAttribute.prototype.constructor = Uint32BufferAttribute;\n\n\nfunction Float32BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Float32Array( array ), itemSize, normalized );\n\n}\n\nFloat32BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nFloat32BufferAttribute.prototype.constructor = Float32BufferAttribute;\n\n\nfunction Float64BufferAttribute( array, itemSize, normalized ) {\n\n\tBufferAttribute.call( this, new Float64Array( array ), itemSize, normalized );\n\n}\n\nFloat64BufferAttribute.prototype = Object.create( BufferAttribute.prototype );\nFloat64BufferAttribute.prototype.constructor = Float64BufferAttribute;\n\n//\n\nexport {\n\tFloat64BufferAttribute,\n\tFloat32BufferAttribute,\n\tUint32BufferAttribute,\n\tInt32BufferAttribute,\n\tUint16BufferAttribute,\n\tInt16BufferAttribute,\n\tUint8ClampedBufferAttribute,\n\tUint8BufferAttribute,\n\tInt8BufferAttribute,\n\tBufferAttribute\n};\n","import { Object3D } from '../core/Object3D.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Group() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Group';\n\n}\n\nGroup.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Group,\n\n\tisGroup: true\n\n} );\n\n\nexport { Group };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLAnimation() {\n\n\tvar context = null;\n\tvar isAnimating = false;\n\tvar animationLoop = null;\n\n\tfunction onAnimationFrame( time, frame ) {\n\n\t\tif ( isAnimating === false ) return;\n\n\t\tanimationLoop( time, frame );\n\n\t\tcontext.requestAnimationFrame( onAnimationFrame );\n\n\t}\n\n\treturn {\n\n\t\tstart: function () {\n\n\t\t\tif ( isAnimating === true ) return;\n\t\t\tif ( animationLoop === null ) return;\n\n\t\t\tcontext.requestAnimationFrame( onAnimationFrame );\n\n\t\t\tisAnimating = true;\n\n\t\t},\n\n\t\tstop: function () {\n\n\t\t\tisAnimating = false;\n\n\t\t},\n\n\t\tsetAnimationLoop: function ( callback ) {\n\n\t\t\tanimationLoop = callback;\n\n\t\t},\n\n\t\tsetContext: function ( value ) {\n\n\t\t\tcontext = value;\n\n\t\t}\n\n\t};\n\n}\n\nexport { WebGLAnimation };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLAttributes( gl, capabilities ) {\n\n\tvar isWebGL2 = capabilities.isWebGL2;\n\n\tvar buffers = new WeakMap();\n\n\tfunction createBuffer( attribute, bufferType ) {\n\n\t\tvar array = attribute.array;\n\t\tvar usage = attribute.usage;\n\n\t\tvar buffer = gl.createBuffer();\n\n\t\tgl.bindBuffer( bufferType, buffer );\n\t\tgl.bufferData( bufferType, array, usage );\n\n\t\tattribute.onUploadCallback();\n\n\t\tvar type = gl.FLOAT;\n\n\t\tif ( array instanceof Float32Array ) {\n\n\t\t\ttype = gl.FLOAT;\n\n\t\t} else if ( array instanceof Float64Array ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLAttributes: Unsupported data buffer format: Float64Array.' );\n\n\t\t} else if ( array instanceof Uint16Array ) {\n\n\t\t\ttype = gl.UNSIGNED_SHORT;\n\n\t\t} else if ( array instanceof Int16Array ) {\n\n\t\t\ttype = gl.SHORT;\n\n\t\t} else if ( array instanceof Uint32Array ) {\n\n\t\t\ttype = gl.UNSIGNED_INT;\n\n\t\t} else if ( array instanceof Int32Array ) {\n\n\t\t\ttype = gl.INT;\n\n\t\t} else if ( array instanceof Int8Array ) {\n\n\t\t\ttype = gl.BYTE;\n\n\t\t} else if ( array instanceof Uint8Array ) {\n\n\t\t\ttype = gl.UNSIGNED_BYTE;\n\n\t\t}\n\n\t\treturn {\n\t\t\tbuffer: buffer,\n\t\t\ttype: type,\n\t\t\tbytesPerElement: array.BYTES_PER_ELEMENT,\n\t\t\tversion: attribute.version\n\t\t};\n\n\t}\n\n\tfunction updateBuffer( buffer, attribute, bufferType ) {\n\n\t\tvar array = attribute.array;\n\t\tvar updateRange = attribute.updateRange;\n\n\t\tgl.bindBuffer( bufferType, buffer );\n\n\t\tif ( updateRange.count === - 1 ) {\n\n\t\t\t// Not using update ranges\n\n\t\t\tgl.bufferSubData( bufferType, 0, array );\n\n\t\t} else {\n\n\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\tgl.bufferSubData( bufferType, updateRange.offset * array.BYTES_PER_ELEMENT,\n\t\t\t\t\tarray, updateRange.offset, updateRange.count );\n\n\t\t\t} else {\n\n\t\t\t\tgl.bufferSubData( bufferType, updateRange.offset * array.BYTES_PER_ELEMENT,\n\t\t\t\t\tarray.subarray( updateRange.offset, updateRange.offset + updateRange.count ) );\n\n\t\t\t}\n\n\t\t\tupdateRange.count = - 1; // reset range\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction get( attribute ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\treturn buffers.get( attribute );\n\n\t}\n\n\tfunction remove( attribute ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\tvar data = buffers.get( attribute );\n\n\t\tif ( data ) {\n\n\t\t\tgl.deleteBuffer( data.buffer );\n\n\t\t\tbuffers.delete( attribute );\n\n\t\t}\n\n\t}\n\n\tfunction update( attribute, bufferType ) {\n\n\t\tif ( attribute.isInterleavedBufferAttribute ) attribute = attribute.data;\n\n\t\tvar data = buffers.get( attribute );\n\n\t\tif ( data === undefined ) {\n\n\t\t\tbuffers.set( attribute, createBuffer( attribute, bufferType ) );\n\n\t\t} else if ( data.version < attribute.version ) {\n\n\t\t\tupdateBuffer( data.buffer, attribute, bufferType );\n\n\t\t\tdata.version = attribute.version;\n\n\t\t}\n\n\t}\n\n\treturn {\n\n\t\tget: get,\n\t\tremove: remove,\n\t\tupdate: update\n\n\t};\n\n}\n\n\nexport { WebGLAttributes };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { BackSide, FrontSide, CubeUVReflectionMapping } from '../../constants.js';\nimport { BoxBufferGeometry } from '../../geometries/BoxGeometry.js';\nimport { PlaneBufferGeometry } from '../../geometries/PlaneGeometry.js';\nimport { ShaderMaterial } from '../../materials/ShaderMaterial.js';\nimport { Color } from '../../math/Color.js';\nimport { Mesh } from '../../objects/Mesh.js';\nimport { ShaderLib } from '../shaders/ShaderLib.js';\nimport { cloneUniforms } from '../shaders/UniformsUtils.js';\n\nfunction WebGLBackground( renderer, state, objects, premultipliedAlpha ) {\n\n\tvar clearColor = new Color( 0x000000 );\n\tvar clearAlpha = 0;\n\n\tvar planeMesh;\n\tvar boxMesh;\n\n\tvar currentBackground = null;\n\tvar currentBackgroundVersion = 0;\n\tvar currentTonemapping = null;\n\n\tfunction render( renderList, scene, camera, forceClear ) {\n\n\t\tvar background = scene.background;\n\n\t\t// Ignore background in AR\n\t\t// TODO: Reconsider this.\n\n\t\tvar xr = renderer.xr;\n\t\tvar session = xr.getSession && xr.getSession();\n\n\t\tif ( session && session.environmentBlendMode === 'additive' ) {\n\n\t\t\tbackground = null;\n\n\t\t}\n\n\t\tif ( background === null ) {\n\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t} else if ( background && background.isColor ) {\n\n\t\t\tsetClear( background, 1 );\n\t\t\tforceClear = true;\n\n\t\t}\n\n\t\tif ( renderer.autoClear || forceClear ) {\n\n\t\t\trenderer.clear( renderer.autoClearColor, renderer.autoClearDepth, renderer.autoClearStencil );\n\n\t\t}\n\n\t\tif ( background && ( background.isCubeTexture || background.isWebGLCubeRenderTarget || background.mapping === CubeUVReflectionMapping ) ) {\n\n\t\t\tif ( boxMesh === undefined ) {\n\n\t\t\t\tboxMesh = new Mesh(\n\t\t\t\t\tnew BoxBufferGeometry( 1, 1, 1 ),\n\t\t\t\t\tnew ShaderMaterial( {\n\t\t\t\t\t\ttype: 'BackgroundCubeMaterial',\n\t\t\t\t\t\tuniforms: cloneUniforms( ShaderLib.cube.uniforms ),\n\t\t\t\t\t\tvertexShader: ShaderLib.cube.vertexShader,\n\t\t\t\t\t\tfragmentShader: ShaderLib.cube.fragmentShader,\n\t\t\t\t\t\tside: BackSide,\n\t\t\t\t\t\tdepthTest: false,\n\t\t\t\t\t\tdepthWrite: false,\n\t\t\t\t\t\tfog: false\n\t\t\t\t\t} )\n\t\t\t\t);\n\n\t\t\t\tboxMesh.geometry.deleteAttribute( 'normal' );\n\t\t\t\tboxMesh.geometry.deleteAttribute( 'uv' );\n\n\t\t\t\tboxMesh.onBeforeRender = function ( renderer, scene, camera ) {\n\n\t\t\t\t\tthis.matrixWorld.copyPosition( camera.matrixWorld );\n\n\t\t\t\t};\n\n\t\t\t\t// enable code injection for non-built-in material\n\t\t\t\tObject.defineProperty( boxMesh.material, 'envMap', {\n\n\t\t\t\t\tget: function () {\n\n\t\t\t\t\t\treturn this.uniforms.envMap.value;\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\tobjects.update( boxMesh );\n\n\t\t\t}\n\n\t\t\tvar texture = background.isWebGLCubeRenderTarget ? background.texture : background;\n\n\t\t\tboxMesh.material.uniforms.envMap.value = texture;\n\t\t\tboxMesh.material.uniforms.flipEnvMap.value = texture.isCubeTexture ? - 1 : 1;\n\n\t\t\tif ( currentBackground !== background ||\n\t\t\t\tcurrentBackgroundVersion !== texture.version ||\n\t\t\t\tcurrentTonemapping !== renderer.toneMapping ) {\n\n\t\t\t\tboxMesh.material.needsUpdate = true;\n\n\t\t\t\tcurrentBackground = background;\n\t\t\t\tcurrentBackgroundVersion = texture.version;\n\t\t\t\tcurrentTonemapping = renderer.toneMapping;\n\n\t\t\t}\n\n\t\t\t// push to the pre-sorted opaque render list\n\t\t\trenderList.unshift( boxMesh, boxMesh.geometry, boxMesh.material, 0, 0, null );\n\n\t\t} else if ( background && background.isTexture ) {\n\n\t\t\tif ( planeMesh === undefined ) {\n\n\t\t\t\tplaneMesh = new Mesh(\n\t\t\t\t\tnew PlaneBufferGeometry( 2, 2 ),\n\t\t\t\t\tnew ShaderMaterial( {\n\t\t\t\t\t\ttype: 'BackgroundMaterial',\n\t\t\t\t\t\tuniforms: cloneUniforms( ShaderLib.background.uniforms ),\n\t\t\t\t\t\tvertexShader: ShaderLib.background.vertexShader,\n\t\t\t\t\t\tfragmentShader: ShaderLib.background.fragmentShader,\n\t\t\t\t\t\tside: FrontSide,\n\t\t\t\t\t\tdepthTest: false,\n\t\t\t\t\t\tdepthWrite: false,\n\t\t\t\t\t\tfog: false\n\t\t\t\t\t} )\n\t\t\t\t);\n\n\t\t\t\tplaneMesh.geometry.deleteAttribute( 'normal' );\n\n\t\t\t\t// enable code injection for non-built-in material\n\t\t\t\tObject.defineProperty( planeMesh.material, 'map', {\n\n\t\t\t\t\tget: function () {\n\n\t\t\t\t\t\treturn this.uniforms.t2D.value;\n\n\t\t\t\t\t}\n\n\t\t\t\t} );\n\n\t\t\t\tobjects.update( planeMesh );\n\n\t\t\t}\n\n\t\t\tplaneMesh.material.uniforms.t2D.value = background;\n\n\t\t\tif ( background.matrixAutoUpdate === true ) {\n\n\t\t\t\tbackground.updateMatrix();\n\n\t\t\t}\n\n\t\t\tplaneMesh.material.uniforms.uvTransform.value.copy( background.matrix );\n\n\t\t\tif ( currentBackground !== background ||\n\t\t\t\tcurrentBackgroundVersion !== background.version ||\n\t\t\t\tcurrentTonemapping !== renderer.toneMapping ) {\n\n\t\t\t\tplaneMesh.material.needsUpdate = true;\n\n\t\t\t\tcurrentBackground = background;\n\t\t\t\tcurrentBackgroundVersion = background.version;\n\t\t\t\tcurrentTonemapping = renderer.toneMapping;\n\n\t\t\t}\n\n\n\t\t\t// push to the pre-sorted opaque render list\n\t\t\trenderList.unshift( planeMesh, planeMesh.geometry, planeMesh.material, 0, 0, null );\n\n\t\t}\n\n\t}\n\n\tfunction setClear( color, alpha ) {\n\n\t\tstate.buffers.color.setClear( color.r, color.g, color.b, alpha, premultipliedAlpha );\n\n\t}\n\n\treturn {\n\n\t\tgetClearColor: function () {\n\n\t\t\treturn clearColor;\n\n\t\t},\n\t\tsetClearColor: function ( color, alpha ) {\n\n\t\t\tclearColor.set( color );\n\t\t\tclearAlpha = alpha !== undefined ? alpha : 1;\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t},\n\t\tgetClearAlpha: function () {\n\n\t\t\treturn clearAlpha;\n\n\t\t},\n\t\tsetClearAlpha: function ( alpha ) {\n\n\t\t\tclearAlpha = alpha;\n\t\t\tsetClear( clearColor, clearAlpha );\n\n\t\t},\n\t\trender: render\n\n\t};\n\n}\n\n\nexport { WebGLBackground };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLBufferRenderer( gl, extensions, info, capabilities ) {\n\n\tvar isWebGL2 = capabilities.isWebGL2;\n\n\tvar mode;\n\n\tfunction setMode( value ) {\n\n\t\tmode = value;\n\n\t}\n\n\tfunction render( start, count ) {\n\n\t\tgl.drawArrays( mode, start, count );\n\n\t\tinfo.update( count, mode );\n\n\t}\n\n\tfunction renderInstances( geometry, start, count, primcount ) {\n\n\t\tif ( primcount === 0 ) return;\n\n\t\tvar extension, methodName;\n\n\t\tif ( isWebGL2 ) {\n\n\t\t\textension = gl;\n\t\t\tmethodName = 'drawArraysInstanced';\n\n\t\t} else {\n\n\t\t\textension = extensions.get( 'ANGLE_instanced_arrays' );\n\t\t\tmethodName = 'drawArraysInstancedANGLE';\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\textension[ methodName ]( mode, start, count, primcount );\n\n\t\tinfo.update( count, mode, primcount );\n\n\t}\n\n\t//\n\n\tthis.setMode = setMode;\n\tthis.render = render;\n\tthis.renderInstances = renderInstances;\n\n}\n\n\nexport { WebGLBufferRenderer };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLCapabilities( gl, extensions, parameters ) {\n\n\tvar maxAnisotropy;\n\n\tfunction getMaxAnisotropy() {\n\n\t\tif ( maxAnisotropy !== undefined ) return maxAnisotropy;\n\n\t\tvar extension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\tif ( extension !== null ) {\n\n\t\t\tmaxAnisotropy = gl.getParameter( extension.MAX_TEXTURE_MAX_ANISOTROPY_EXT );\n\n\t\t} else {\n\n\t\t\tmaxAnisotropy = 0;\n\n\t\t}\n\n\t\treturn maxAnisotropy;\n\n\t}\n\n\tfunction getMaxPrecision( precision ) {\n\n\t\tif ( precision === 'highp' ) {\n\n\t\t\tif ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.HIGH_FLOAT ).precision > 0 &&\n\t\t\t\tgl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.HIGH_FLOAT ).precision > 0 ) {\n\n\t\t\t\treturn 'highp';\n\n\t\t\t}\n\n\t\t\tprecision = 'mediump';\n\n\t\t}\n\n\t\tif ( precision === 'mediump' ) {\n\n\t\t\tif ( gl.getShaderPrecisionFormat( gl.VERTEX_SHADER, gl.MEDIUM_FLOAT ).precision > 0 &&\n\t\t\t\tgl.getShaderPrecisionFormat( gl.FRAGMENT_SHADER, gl.MEDIUM_FLOAT ).precision > 0 ) {\n\n\t\t\t\treturn 'mediump';\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn 'lowp';\n\n\t}\n\n\t/* eslint-disable no-undef */\n\tvar isWebGL2 = ( typeof WebGL2RenderingContext !== 'undefined' && gl instanceof WebGL2RenderingContext ) ||\n\t\t( typeof WebGL2ComputeRenderingContext !== 'undefined' && gl instanceof WebGL2ComputeRenderingContext );\n\t/* eslint-enable no-undef */\n\n\tvar precision = parameters.precision !== undefined ? parameters.precision : 'highp';\n\tvar maxPrecision = getMaxPrecision( precision );\n\n\tif ( maxPrecision !== precision ) {\n\n\t\tconsole.warn( 'THREE.WebGLRenderer:', precision, 'not supported, using', maxPrecision, 'instead.' );\n\t\tprecision = maxPrecision;\n\n\t}\n\n\tvar logarithmicDepthBuffer = parameters.logarithmicDepthBuffer === true;\n\n\tvar maxTextures = gl.getParameter( gl.MAX_TEXTURE_IMAGE_UNITS );\n\tvar maxVertexTextures = gl.getParameter( gl.MAX_VERTEX_TEXTURE_IMAGE_UNITS );\n\tvar maxTextureSize = gl.getParameter( gl.MAX_TEXTURE_SIZE );\n\tvar maxCubemapSize = gl.getParameter( gl.MAX_CUBE_MAP_TEXTURE_SIZE );\n\n\tvar maxAttributes = gl.getParameter( gl.MAX_VERTEX_ATTRIBS );\n\tvar maxVertexUniforms = gl.getParameter( gl.MAX_VERTEX_UNIFORM_VECTORS );\n\tvar maxVaryings = gl.getParameter( gl.MAX_VARYING_VECTORS );\n\tvar maxFragmentUniforms = gl.getParameter( gl.MAX_FRAGMENT_UNIFORM_VECTORS );\n\n\tvar vertexTextures = maxVertexTextures > 0;\n\tvar floatFragmentTextures = isWebGL2 || !! extensions.get( 'OES_texture_float' );\n\tvar floatVertexTextures = vertexTextures && floatFragmentTextures;\n\n\tvar maxSamples = isWebGL2 ? gl.getParameter( gl.MAX_SAMPLES ) : 0;\n\n\treturn {\n\n\t\tisWebGL2: isWebGL2,\n\n\t\tgetMaxAnisotropy: getMaxAnisotropy,\n\t\tgetMaxPrecision: getMaxPrecision,\n\n\t\tprecision: precision,\n\t\tlogarithmicDepthBuffer: logarithmicDepthBuffer,\n\n\t\tmaxTextures: maxTextures,\n\t\tmaxVertexTextures: maxVertexTextures,\n\t\tmaxTextureSize: maxTextureSize,\n\t\tmaxCubemapSize: maxCubemapSize,\n\n\t\tmaxAttributes: maxAttributes,\n\t\tmaxVertexUniforms: maxVertexUniforms,\n\t\tmaxVaryings: maxVaryings,\n\t\tmaxFragmentUniforms: maxFragmentUniforms,\n\n\t\tvertexTextures: vertexTextures,\n\t\tfloatFragmentTextures: floatFragmentTextures,\n\t\tfloatVertexTextures: floatVertexTextures,\n\n\t\tmaxSamples: maxSamples\n\n\t};\n\n}\n\n\nexport { WebGLCapabilities };\n","/**\n * @author tschw\n */\n\nimport { Matrix3 } from '../../math/Matrix3.js';\nimport { Plane } from '../../math/Plane.js';\n\nfunction WebGLClipping() {\n\n\tvar scope = this,\n\n\t\tglobalState = null,\n\t\tnumGlobalPlanes = 0,\n\t\tlocalClippingEnabled = false,\n\t\trenderingShadows = false,\n\n\t\tplane = new Plane(),\n\t\tviewNormalMatrix = new Matrix3(),\n\n\t\tuniform = { value: null, needsUpdate: false };\n\n\tthis.uniform = uniform;\n\tthis.numPlanes = 0;\n\tthis.numIntersection = 0;\n\n\tthis.init = function ( planes, enableLocalClipping, camera ) {\n\n\t\tvar enabled =\n\t\t\tplanes.length !== 0 ||\n\t\t\tenableLocalClipping ||\n\t\t\t// enable state of previous frame - the clipping code has to\n\t\t\t// run another frame in order to reset the state:\n\t\t\tnumGlobalPlanes !== 0 ||\n\t\t\tlocalClippingEnabled;\n\n\t\tlocalClippingEnabled = enableLocalClipping;\n\n\t\tglobalState = projectPlanes( planes, camera, 0 );\n\t\tnumGlobalPlanes = planes.length;\n\n\t\treturn enabled;\n\n\t};\n\n\tthis.beginShadows = function () {\n\n\t\trenderingShadows = true;\n\t\tprojectPlanes( null );\n\n\t};\n\n\tthis.endShadows = function () {\n\n\t\trenderingShadows = false;\n\t\tresetGlobalState();\n\n\t};\n\n\tthis.setState = function ( planes, clipIntersection, clipShadows, camera, cache, fromCache ) {\n\n\t\tif ( ! localClippingEnabled || planes === null || planes.length === 0 || renderingShadows && ! clipShadows ) {\n\n\t\t\t// there's no local clipping\n\n\t\t\tif ( renderingShadows ) {\n\n\t\t\t\t// there's no global clipping\n\n\t\t\t\tprojectPlanes( null );\n\n\t\t\t} else {\n\n\t\t\t\tresetGlobalState();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tvar nGlobal = renderingShadows ? 0 : numGlobalPlanes,\n\t\t\t\tlGlobal = nGlobal * 4,\n\n\t\t\t\tdstArray = cache.clippingState || null;\n\n\t\t\tuniform.value = dstArray; // ensure unique state\n\n\t\t\tdstArray = projectPlanes( planes, camera, lGlobal, fromCache );\n\n\t\t\tfor ( var i = 0; i !== lGlobal; ++ i ) {\n\n\t\t\t\tdstArray[ i ] = globalState[ i ];\n\n\t\t\t}\n\n\t\t\tcache.clippingState = dstArray;\n\t\t\tthis.numIntersection = clipIntersection ? this.numPlanes : 0;\n\t\t\tthis.numPlanes += nGlobal;\n\n\t\t}\n\n\n\t};\n\n\tfunction resetGlobalState() {\n\n\t\tif ( uniform.value !== globalState ) {\n\n\t\t\tuniform.value = globalState;\n\t\t\tuniform.needsUpdate = numGlobalPlanes > 0;\n\n\t\t}\n\n\t\tscope.numPlanes = numGlobalPlanes;\n\t\tscope.numIntersection = 0;\n\n\t}\n\n\tfunction projectPlanes( planes, camera, dstOffset, skipTransform ) {\n\n\t\tvar nPlanes = planes !== null ? planes.length : 0,\n\t\t\tdstArray = null;\n\n\t\tif ( nPlanes !== 0 ) {\n\n\t\t\tdstArray = uniform.value;\n\n\t\t\tif ( skipTransform !== true || dstArray === null ) {\n\n\t\t\t\tvar flatSize = dstOffset + nPlanes * 4,\n\t\t\t\t\tviewMatrix = camera.matrixWorldInverse;\n\n\t\t\t\tviewNormalMatrix.getNormalMatrix( viewMatrix );\n\n\t\t\t\tif ( dstArray === null || dstArray.length < flatSize ) {\n\n\t\t\t\t\tdstArray = new Float32Array( flatSize );\n\n\t\t\t\t}\n\n\t\t\t\tfor ( var i = 0, i4 = dstOffset; i !== nPlanes; ++ i, i4 += 4 ) {\n\n\t\t\t\t\tplane.copy( planes[ i ] ).applyMatrix4( viewMatrix, viewNormalMatrix );\n\n\t\t\t\t\tplane.normal.toArray( dstArray, i4 );\n\t\t\t\t\tdstArray[ i4 + 3 ] = plane.constant;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tuniform.value = dstArray;\n\t\t\tuniform.needsUpdate = true;\n\n\t\t}\n\n\t\tscope.numPlanes = nPlanes;\n\t\tscope.numIntersection = 0;\n\n\t\treturn dstArray;\n\n\t}\n\n}\n\n\nexport { WebGLClipping };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLExtensions( gl ) {\n\n\tvar extensions = {};\n\n\treturn {\n\n\t\tget: function ( name ) {\n\n\t\t\tif ( extensions[ name ] !== undefined ) {\n\n\t\t\t\treturn extensions[ name ];\n\n\t\t\t}\n\n\t\t\tvar extension;\n\n\t\t\tswitch ( name ) {\n\n\t\t\t\tcase 'WEBGL_depth_texture':\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_depth_texture' ) || gl.getExtension( 'MOZ_WEBGL_depth_texture' ) || gl.getExtension( 'WEBKIT_WEBGL_depth_texture' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'EXT_texture_filter_anisotropic':\n\t\t\t\t\textension = gl.getExtension( 'EXT_texture_filter_anisotropic' ) || gl.getExtension( 'MOZ_EXT_texture_filter_anisotropic' ) || gl.getExtension( 'WEBKIT_EXT_texture_filter_anisotropic' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'WEBGL_compressed_texture_s3tc':\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'MOZ_WEBGL_compressed_texture_s3tc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_s3tc' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'WEBGL_compressed_texture_pvrtc':\n\t\t\t\t\textension = gl.getExtension( 'WEBGL_compressed_texture_pvrtc' ) || gl.getExtension( 'WEBKIT_WEBGL_compressed_texture_pvrtc' );\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\textension = gl.getExtension( name );\n\n\t\t\t}\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: ' + name + ' extension not supported.' );\n\n\t\t\t}\n\n\t\t\textensions[ name ] = extension;\n\n\t\t\treturn extension;\n\n\t\t}\n\n\t};\n\n}\n\n\nexport { WebGLExtensions };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { Uint16BufferAttribute, Uint32BufferAttribute } from '../../core/BufferAttribute.js';\nimport { BufferGeometry } from '../../core/BufferGeometry.js';\nimport { arrayMax } from '../../utils.js';\n\nfunction WebGLGeometries( gl, attributes, info ) {\n\n\tvar geometries = new WeakMap();\n\tvar wireframeAttributes = new WeakMap();\n\n\tfunction onGeometryDispose( event ) {\n\n\t\tvar geometry = event.target;\n\t\tvar buffergeometry = geometries.get( geometry );\n\n\t\tif ( buffergeometry.index !== null ) {\n\n\t\t\tattributes.remove( buffergeometry.index );\n\n\t\t}\n\n\t\tfor ( var name in buffergeometry.attributes ) {\n\n\t\t\tattributes.remove( buffergeometry.attributes[ name ] );\n\n\t\t}\n\n\t\tgeometry.removeEventListener( 'dispose', onGeometryDispose );\n\n\t\tgeometries.delete( geometry );\n\n\t\tvar attribute = wireframeAttributes.get( buffergeometry );\n\n\t\tif ( attribute ) {\n\n\t\t\tattributes.remove( attribute );\n\t\t\twireframeAttributes.delete( buffergeometry );\n\n\t\t}\n\n\t\t//\n\n\t\tinfo.memory.geometries --;\n\n\t}\n\n\tfunction get( object, geometry ) {\n\n\t\tvar buffergeometry = geometries.get( geometry );\n\n\t\tif ( buffergeometry ) return buffergeometry;\n\n\t\tgeometry.addEventListener( 'dispose', onGeometryDispose );\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tbuffergeometry = geometry;\n\n\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\tif ( geometry._bufferGeometry === undefined ) {\n\n\t\t\t\tgeometry._bufferGeometry = new BufferGeometry().setFromObject( object );\n\n\t\t\t}\n\n\t\t\tbuffergeometry = geometry._bufferGeometry;\n\n\t\t}\n\n\t\tgeometries.set( geometry, buffergeometry );\n\n\t\tinfo.memory.geometries ++;\n\n\t\treturn buffergeometry;\n\n\t}\n\n\tfunction update( geometry ) {\n\n\t\tvar index = geometry.index;\n\t\tvar geometryAttributes = geometry.attributes;\n\n\t\tif ( index !== null ) {\n\n\t\t\tattributes.update( index, gl.ELEMENT_ARRAY_BUFFER );\n\n\t\t}\n\n\t\tfor ( var name in geometryAttributes ) {\n\n\t\t\tattributes.update( geometryAttributes[ name ], gl.ARRAY_BUFFER );\n\n\t\t}\n\n\t\t// morph targets\n\n\t\tvar morphAttributes = geometry.morphAttributes;\n\n\t\tfor ( var name in morphAttributes ) {\n\n\t\t\tvar array = morphAttributes[ name ];\n\n\t\t\tfor ( var i = 0, l = array.length; i < l; i ++ ) {\n\n\t\t\t\tattributes.update( array[ i ], gl.ARRAY_BUFFER );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction updateWireframeAttribute( geometry ) {\n\n\t\tvar indices = [];\n\n\t\tvar geometryIndex = geometry.index;\n\t\tvar geometryPosition = geometry.attributes.position;\n\t\tvar version = 0;\n\n\t\tif ( geometryIndex !== null ) {\n\n\t\t\tvar array = geometryIndex.array;\n\t\t\tversion = geometryIndex.version;\n\n\t\t\tfor ( var i = 0, l = array.length; i < l; i += 3 ) {\n\n\t\t\t\tvar a = array[ i + 0 ];\n\t\t\t\tvar b = array[ i + 1 ];\n\t\t\t\tvar c = array[ i + 2 ];\n\n\t\t\t\tindices.push( a, b, b, c, c, a );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tvar array = geometryPosition.array;\n\t\t\tversion = geometryPosition.version;\n\n\t\t\tfor ( var i = 0, l = ( array.length / 3 ) - 1; i < l; i += 3 ) {\n\n\t\t\t\tvar a = i + 0;\n\t\t\t\tvar b = i + 1;\n\t\t\t\tvar c = i + 2;\n\n\t\t\t\tindices.push( a, b, b, c, c, a );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar attribute = new ( arrayMax( indices ) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute )( indices, 1 );\n\t\tattribute.version = version;\n\n\t\tattributes.update( attribute, gl.ELEMENT_ARRAY_BUFFER );\n\n\t\t//\n\n\t\tvar previousAttribute = wireframeAttributes.get( geometry );\n\n\t\tif ( previousAttribute ) attributes.remove( previousAttribute );\n\n\t\t//\n\n\t\twireframeAttributes.set( geometry, attribute );\n\n\t}\n\n\tfunction getWireframeAttribute( geometry ) {\n\n\t\tvar currentAttribute = wireframeAttributes.get( geometry );\n\n\t\tif ( currentAttribute ) {\n\n\t\t\tvar geometryIndex = geometry.index;\n\n\t\t\tif ( geometryIndex !== null ) {\n\n\t\t\t\t// if the attribute is obsolete, create a new one\n\n\t\t\t\tif ( currentAttribute.version < geometryIndex.version ) {\n\n\t\t\t\t\tupdateWireframeAttribute( geometry );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tupdateWireframeAttribute( geometry );\n\n\t\t}\n\n\t\treturn wireframeAttributes.get( geometry );\n\n\t}\n\n\treturn {\n\n\t\tget: get,\n\t\tupdate: update,\n\n\t\tgetWireframeAttribute: getWireframeAttribute\n\n\t};\n\n}\n\n\nexport { WebGLGeometries };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLIndexedBufferRenderer( gl, extensions, info, capabilities ) {\n\n\tvar isWebGL2 = capabilities.isWebGL2;\n\n\tvar mode;\n\n\tfunction setMode( value ) {\n\n\t\tmode = value;\n\n\t}\n\n\tvar type, bytesPerElement;\n\n\tfunction setIndex( value ) {\n\n\t\ttype = value.type;\n\t\tbytesPerElement = value.bytesPerElement;\n\n\t}\n\n\tfunction render( start, count ) {\n\n\t\tgl.drawElements( mode, count, type, start * bytesPerElement );\n\n\t\tinfo.update( count, mode );\n\n\t}\n\n\tfunction renderInstances( geometry, start, count, primcount ) {\n\n\t\tif ( primcount === 0 ) return;\n\n\t\tvar extension, methodName;\n\n\t\tif ( isWebGL2 ) {\n\n\t\t\textension = gl;\n\t\t\tmethodName = 'drawElementsInstanced';\n\n\t\t} else {\n\n\t\t\textension = extensions.get( 'ANGLE_instanced_arrays' );\n\t\t\tmethodName = 'drawElementsInstancedANGLE';\n\n\t\t\tif ( extension === null ) {\n\n\t\t\t\tconsole.error( 'THREE.WebGLIndexedBufferRenderer: using THREE.InstancedBufferGeometry but hardware does not support extension ANGLE_instanced_arrays.' );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\textension[ methodName ]( mode, count, type, start * bytesPerElement, primcount );\n\n\t\tinfo.update( count, mode, primcount );\n\n\t}\n\n\t//\n\n\tthis.setMode = setMode;\n\tthis.setIndex = setIndex;\n\tthis.render = render;\n\tthis.renderInstances = renderInstances;\n\n}\n\n\nexport { WebGLIndexedBufferRenderer };\n","/**\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nfunction WebGLInfo( gl ) {\n\n\tvar memory = {\n\t\tgeometries: 0,\n\t\ttextures: 0\n\t};\n\n\tvar render = {\n\t\tframe: 0,\n\t\tcalls: 0,\n\t\ttriangles: 0,\n\t\tpoints: 0,\n\t\tlines: 0\n\t};\n\n\tfunction update( count, mode, instanceCount ) {\n\n\t\tinstanceCount = instanceCount || 1;\n\n\t\trender.calls ++;\n\n\t\tswitch ( mode ) {\n\n\t\t\tcase gl.TRIANGLES:\n\t\t\t\trender.triangles += instanceCount * ( count / 3 );\n\t\t\t\tbreak;\n\n\t\t\tcase gl.LINES:\n\t\t\t\trender.lines += instanceCount * ( count / 2 );\n\t\t\t\tbreak;\n\n\t\t\tcase gl.LINE_STRIP:\n\t\t\t\trender.lines += instanceCount * ( count - 1 );\n\t\t\t\tbreak;\n\n\t\t\tcase gl.LINE_LOOP:\n\t\t\t\trender.lines += instanceCount * count;\n\t\t\t\tbreak;\n\n\t\t\tcase gl.POINTS:\n\t\t\t\trender.points += instanceCount * count;\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tconsole.error( 'THREE.WebGLInfo: Unknown draw mode:', mode );\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\tfunction reset() {\n\n\t\trender.frame ++;\n\t\trender.calls = 0;\n\t\trender.triangles = 0;\n\t\trender.points = 0;\n\t\trender.lines = 0;\n\n\t}\n\n\treturn {\n\t\tmemory: memory,\n\t\trender: render,\n\t\tprograms: null,\n\t\tautoReset: true,\n\t\treset: reset,\n\t\tupdate: update\n\t};\n\n}\n\n\nexport { WebGLInfo };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction absNumericalSort( a, b ) {\n\n\treturn Math.abs( b[ 1 ] ) - Math.abs( a[ 1 ] );\n\n}\n\nfunction WebGLMorphtargets( gl ) {\n\n\tvar influencesList = {};\n\tvar morphInfluences = new Float32Array( 8 );\n\n\tfunction update( object, geometry, material, program ) {\n\n\t\tvar objectInfluences = object.morphTargetInfluences;\n\n\t\t// When object doesn't have morph target influences defined, we treat it as a 0-length array\n\t\t// This is important to make sure we set up morphTargetBaseInfluence / morphTargetInfluences\n\n\t\tvar length = objectInfluences === undefined ? 0 : objectInfluences.length;\n\n\t\tvar influences = influencesList[ geometry.id ];\n\n\t\tif ( influences === undefined ) {\n\n\t\t\t// initialise list\n\n\t\t\tinfluences = [];\n\n\t\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\t\tinfluences[ i ] = [ i, 0 ];\n\n\t\t\t}\n\n\t\t\tinfluencesList[ geometry.id ] = influences;\n\n\t\t}\n\n\t\tvar morphTargets = material.morphTargets && geometry.morphAttributes.position;\n\t\tvar morphNormals = material.morphNormals && geometry.morphAttributes.normal;\n\n\t\t// Remove current morphAttributes\n\n\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\tvar influence = influences[ i ];\n\n\t\t\tif ( influence[ 1 ] !== 0 ) {\n\n\t\t\t\tif ( morphTargets ) geometry.deleteAttribute( 'morphTarget' + i );\n\t\t\t\tif ( morphNormals ) geometry.deleteAttribute( 'morphNormal' + i );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Collect influences\n\n\t\tfor ( var i = 0; i < length; i ++ ) {\n\n\t\t\tvar influence = influences[ i ];\n\n\t\t\tinfluence[ 0 ] = i;\n\t\t\tinfluence[ 1 ] = objectInfluences[ i ];\n\n\t\t}\n\n\t\tinfluences.sort( absNumericalSort );\n\n\t\t// Add morphAttributes\n\n\t\tvar morphInfluencesSum = 0;\n\n\t\tfor ( var i = 0; i < 8; i ++ ) {\n\n\t\t\tvar influence = influences[ i ];\n\n\t\t\tif ( influence ) {\n\n\t\t\t\tvar index = influence[ 0 ];\n\t\t\t\tvar value = influence[ 1 ];\n\n\t\t\t\tif ( value ) {\n\n\t\t\t\t\tif ( morphTargets ) geometry.setAttribute( 'morphTarget' + i, morphTargets[ index ] );\n\t\t\t\t\tif ( morphNormals ) geometry.setAttribute( 'morphNormal' + i, morphNormals[ index ] );\n\n\t\t\t\t\tmorphInfluences[ i ] = value;\n\t\t\t\t\tmorphInfluencesSum += value;\n\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tmorphInfluences[ i ] = 0;\n\n\t\t}\n\n\t\t// GLSL shader uses formula baseinfluence * base + sum(target * influence)\n\t\t// This allows us to switch between absolute morphs and relative morphs without changing shader code\n\t\t// When baseinfluence = 1 - sum(influence), the above is equivalent to sum((target - base) * influence)\n\t\tvar morphBaseInfluence = geometry.morphTargetsRelative ? 1 : 1 - morphInfluencesSum;\n\n\t\tprogram.getUniforms().setValue( gl, 'morphTargetBaseInfluence', morphBaseInfluence );\n\t\tprogram.getUniforms().setValue( gl, 'morphTargetInfluences', morphInfluences );\n\n\t}\n\n\treturn {\n\n\t\tupdate: update\n\n\t};\n\n}\n\n\nexport { WebGLMorphtargets };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLObjects( gl, geometries, attributes, info ) {\n\n\tvar updateMap = new WeakMap();\n\n\tfunction update( object ) {\n\n\t\tvar frame = info.render.frame;\n\n\t\tvar geometry = object.geometry;\n\t\tvar buffergeometry = geometries.get( object, geometry );\n\n\t\t// Update once per frame\n\n\t\tif ( updateMap.get( buffergeometry ) !== frame ) {\n\n\t\t\tif ( geometry.isGeometry ) {\n\n\t\t\t\tbuffergeometry.updateFromObject( object );\n\n\t\t\t}\n\n\t\t\tgeometries.update( buffergeometry );\n\n\t\t\tupdateMap.set( buffergeometry, frame );\n\n\t\t}\n\n\t\tif ( object.isInstancedMesh ) {\n\n\t\t\tattributes.update( object.instanceMatrix, gl.ARRAY_BUFFER );\n\n\t\t}\n\n\t\treturn buffergeometry;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tupdateMap = new WeakMap();\n\n\t}\n\n\treturn {\n\n\t\tupdate: update,\n\t\tdispose: dispose\n\n\t};\n\n}\n\n\nexport { WebGLObjects };\n","/**\n * @author Takahiro https://github.com/takahirox\n */\n\nimport { Texture } from './Texture.js';\nimport { ClampToEdgeWrapping, NearestFilter } from '../constants.js';\n\nfunction DataTexture2DArray( data, width, height, depth ) {\n\n\tTexture.call( this, null );\n\n\tthis.image = { data: data || null, width: width || 1, height: height || 1, depth: depth || 1 };\n\n\tthis.magFilter = NearestFilter;\n\tthis.minFilter = NearestFilter;\n\n\tthis.wrapR = ClampToEdgeWrapping;\n\n\tthis.generateMipmaps = false;\n\tthis.flipY = false;\n\n\tthis.needsUpdate = true;\n\n}\n\nDataTexture2DArray.prototype = Object.create( Texture.prototype );\nDataTexture2DArray.prototype.constructor = DataTexture2DArray;\nDataTexture2DArray.prototype.isDataTexture2DArray = true;\n\nexport { DataTexture2DArray };\n","/**\n * @author Artur Trzesiok\n */\n\nimport { Texture } from './Texture.js';\nimport { ClampToEdgeWrapping, NearestFilter } from '../constants.js';\n\nfunction DataTexture3D( data, width, height, depth ) {\n\n\t// We're going to add .setXXX() methods for setting properties later.\n\t// Users can still set in DataTexture3D directly.\n\t//\n\t//\tvar texture = new THREE.DataTexture3D( data, width, height, depth );\n\t// \ttexture.anisotropy = 16;\n\t//\n\t// See #14839\n\n\tTexture.call( this, null );\n\n\tthis.image = { data: data || null, width: width || 1, height: height || 1, depth: depth || 1 };\n\n\tthis.magFilter = NearestFilter;\n\tthis.minFilter = NearestFilter;\n\n\tthis.wrapR = ClampToEdgeWrapping;\n\n\tthis.generateMipmaps = false;\n\tthis.flipY = false;\n\n\tthis.needsUpdate = true;\n\n\n}\n\nDataTexture3D.prototype = Object.create( Texture.prototype );\nDataTexture3D.prototype.constructor = DataTexture3D;\nDataTexture3D.prototype.isDataTexture3D = true;\n\nexport { DataTexture3D };\n","/**\n * @author tschw\n * @author Mugen87 / https://github.com/Mugen87\n * @author mrdoob / http://mrdoob.com/\n *\n * Uniforms of a program.\n * Those form a tree structure with a special top-level container for the root,\n * which you get by calling 'new WebGLUniforms( gl, program )'.\n *\n *\n * Properties of inner nodes including the top-level container:\n *\n * .seq - array of nested uniforms\n * .map - nested uniforms by name\n *\n *\n * Methods of all nodes except the top-level container:\n *\n * .setValue( gl, value, [textures] )\n *\n * \t\tuploads a uniform value(s)\n *  \tthe 'textures' parameter is needed for sampler uniforms\n *\n *\n * Static methods of the top-level container (textures factorizations):\n *\n * .upload( gl, seq, values, textures )\n *\n * \t\tsets uniforms in 'seq' to 'values[id].value'\n *\n * .seqWithValue( seq, values ) : filteredSeq\n *\n * \t\tfilters 'seq' entries with corresponding entry in values\n *\n *\n * Methods of the top-level container (textures factorizations):\n *\n * .setValue( gl, name, value, textures )\n *\n * \t\tsets uniform with  name 'name' to 'value'\n *\n * .setOptional( gl, obj, prop )\n *\n * \t\tlike .set for an optional property of the object\n *\n */\n\nimport { CubeTexture } from '../../textures/CubeTexture.js';\nimport { Texture } from '../../textures/Texture.js';\nimport { DataTexture2DArray } from '../../textures/DataTexture2DArray.js';\nimport { DataTexture3D } from '../../textures/DataTexture3D.js';\n\nvar emptyTexture = new Texture();\nvar emptyTexture2dArray = new DataTexture2DArray();\nvar emptyTexture3d = new DataTexture3D();\nvar emptyCubeTexture = new CubeTexture();\n\n// --- Utilities ---\n\n// Array Caches (provide typed arrays for temporary by size)\n\nvar arrayCacheF32 = [];\nvar arrayCacheI32 = [];\n\n// Float32Array caches used for uploading Matrix uniforms\n\nvar mat4array = new Float32Array( 16 );\nvar mat3array = new Float32Array( 9 );\nvar mat2array = new Float32Array( 4 );\n\n// Flattening for arrays of vectors and matrices\n\nfunction flatten( array, nBlocks, blockSize ) {\n\n\tvar firstElem = array[ 0 ];\n\n\tif ( firstElem <= 0 || firstElem > 0 ) return array;\n\t// unoptimized: ! isNaN( firstElem )\n\t// see http://jacksondunstan.com/articles/983\n\n\tvar n = nBlocks * blockSize,\n\t\tr = arrayCacheF32[ n ];\n\n\tif ( r === undefined ) {\n\n\t\tr = new Float32Array( n );\n\t\tarrayCacheF32[ n ] = r;\n\n\t}\n\n\tif ( nBlocks !== 0 ) {\n\n\t\tfirstElem.toArray( r, 0 );\n\n\t\tfor ( var i = 1, offset = 0; i !== nBlocks; ++ i ) {\n\n\t\t\toffset += blockSize;\n\t\t\tarray[ i ].toArray( r, offset );\n\n\t\t}\n\n\t}\n\n\treturn r;\n\n}\n\nfunction arraysEqual( a, b ) {\n\n\tif ( a.length !== b.length ) return false;\n\n\tfor ( var i = 0, l = a.length; i < l; i ++ ) {\n\n\t\tif ( a[ i ] !== b[ i ] ) return false;\n\n\t}\n\n\treturn true;\n\n}\n\nfunction copyArray( a, b ) {\n\n\tfor ( var i = 0, l = b.length; i < l; i ++ ) {\n\n\t\ta[ i ] = b[ i ];\n\n\t}\n\n}\n\n// Texture unit allocation\n\nfunction allocTexUnits( textures, n ) {\n\n\tvar r = arrayCacheI32[ n ];\n\n\tif ( r === undefined ) {\n\n\t\tr = new Int32Array( n );\n\t\tarrayCacheI32[ n ] = r;\n\n\t}\n\n\tfor ( var i = 0; i !== n; ++ i )\n\t\tr[ i ] = textures.allocateTextureUnit();\n\n\treturn r;\n\n}\n\n// --- Setters ---\n\n// Note: Defining these methods externally, because they come in a bunch\n// and this way their names minify.\n\n// Single scalar\n\nfunction setValueV1f( gl, v ) {\n\n\tvar cache = this.cache;\n\n\tif ( cache[ 0 ] === v ) return;\n\n\tgl.uniform1f( this.addr, v );\n\n\tcache[ 0 ] = v;\n\n}\n\n// Single float vector (from flat array or THREE.VectorN)\n\nfunction setValueV2f( gl, v ) {\n\n\tvar cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y ) {\n\n\t\t\tgl.uniform2f( this.addr, v.x, v.y );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform2fv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\nfunction setValueV3f( gl, v ) {\n\n\tvar cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z ) {\n\n\t\t\tgl.uniform3f( this.addr, v.x, v.y, v.z );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\t\t\tcache[ 2 ] = v.z;\n\n\t\t}\n\n\t} else if ( v.r !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.r || cache[ 1 ] !== v.g || cache[ 2 ] !== v.b ) {\n\n\t\t\tgl.uniform3f( this.addr, v.r, v.g, v.b );\n\n\t\t\tcache[ 0 ] = v.r;\n\t\t\tcache[ 1 ] = v.g;\n\t\t\tcache[ 2 ] = v.b;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform3fv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\nfunction setValueV4f( gl, v ) {\n\n\tvar cache = this.cache;\n\n\tif ( v.x !== undefined ) {\n\n\t\tif ( cache[ 0 ] !== v.x || cache[ 1 ] !== v.y || cache[ 2 ] !== v.z || cache[ 3 ] !== v.w ) {\n\n\t\t\tgl.uniform4f( this.addr, v.x, v.y, v.z, v.w );\n\n\t\t\tcache[ 0 ] = v.x;\n\t\t\tcache[ 1 ] = v.y;\n\t\t\tcache[ 2 ] = v.z;\n\t\t\tcache[ 3 ] = v.w;\n\n\t\t}\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniform4fv( this.addr, v );\n\n\t\tcopyArray( cache, v );\n\n\t}\n\n}\n\n// Single matrix (from flat array or MatrixN)\n\nfunction setValueM2( gl, v ) {\n\n\tvar cache = this.cache;\n\tvar elements = v.elements;\n\n\tif ( elements === undefined ) {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniformMatrix2fv( this.addr, false, v );\n\n\t\tcopyArray( cache, v );\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, elements ) ) return;\n\n\t\tmat2array.set( elements );\n\n\t\tgl.uniformMatrix2fv( this.addr, false, mat2array );\n\n\t\tcopyArray( cache, elements );\n\n\t}\n\n}\n\nfunction setValueM3( gl, v ) {\n\n\tvar cache = this.cache;\n\tvar elements = v.elements;\n\n\tif ( elements === undefined ) {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniformMatrix3fv( this.addr, false, v );\n\n\t\tcopyArray( cache, v );\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, elements ) ) return;\n\n\t\tmat3array.set( elements );\n\n\t\tgl.uniformMatrix3fv( this.addr, false, mat3array );\n\n\t\tcopyArray( cache, elements );\n\n\t}\n\n}\n\nfunction setValueM4( gl, v ) {\n\n\tvar cache = this.cache;\n\tvar elements = v.elements;\n\n\tif ( elements === undefined ) {\n\n\t\tif ( arraysEqual( cache, v ) ) return;\n\n\t\tgl.uniformMatrix4fv( this.addr, false, v );\n\n\t\tcopyArray( cache, v );\n\n\t} else {\n\n\t\tif ( arraysEqual( cache, elements ) ) return;\n\n\t\tmat4array.set( elements );\n\n\t\tgl.uniformMatrix4fv( this.addr, false, mat4array );\n\n\t\tcopyArray( cache, elements );\n\n\t}\n\n}\n\n// Single texture (2D / Cube)\n\nfunction setValueT1( gl, v, textures ) {\n\n\tvar cache = this.cache;\n\tvar unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.safeSetTexture2D( v || emptyTexture, unit );\n\n}\n\nfunction setValueT2DArray1( gl, v, textures ) {\n\n\tvar cache = this.cache;\n\tvar unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.setTexture2DArray( v || emptyTexture2dArray, unit );\n\n}\n\nfunction setValueT3D1( gl, v, textures ) {\n\n\tvar cache = this.cache;\n\tvar unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.setTexture3D( v || emptyTexture3d, unit );\n\n}\n\nfunction setValueT6( gl, v, textures ) {\n\n\tvar cache = this.cache;\n\tvar unit = textures.allocateTextureUnit();\n\n\tif ( cache[ 0 ] !== unit ) {\n\n\t\tgl.uniform1i( this.addr, unit );\n\t\tcache[ 0 ] = unit;\n\n\t}\n\n\ttextures.safeSetTextureCube( v || emptyCubeTexture, unit );\n\n}\n\n// Integer / Boolean vectors or arrays thereof (always flat arrays)\n\nfunction setValueV1i( gl, v ) {\n\n\tvar cache = this.cache;\n\n\tif ( cache[ 0 ] === v ) return;\n\n\tgl.uniform1i( this.addr, v );\n\n\tcache[ 0 ] = v;\n\n}\n\nfunction setValueV2i( gl, v ) {\n\n\tvar cache = this.cache;\n\n\tif ( arraysEqual( cache, v ) ) return;\n\n\tgl.uniform2iv( this.addr, v );\n\n\tcopyArray( cache, v );\n\n}\n\nfunction setValueV3i( gl, v ) {\n\n\tvar cache = this.cache;\n\n\tif ( arraysEqual( cache, v ) ) return;\n\n\tgl.uniform3iv( this.addr, v );\n\n\tcopyArray( cache, v );\n\n}\n\nfunction setValueV4i( gl, v ) {\n\n\tvar cache = this.cache;\n\n\tif ( arraysEqual( cache, v ) ) return;\n\n\tgl.uniform4iv( this.addr, v );\n\n\tcopyArray( cache, v );\n\n}\n\n// uint\n\nfunction setValueV1ui( gl, v ) {\n\n\tvar cache = this.cache;\n\n\tif ( cache[ 0 ] === v ) return;\n\n\tgl.uniform1ui( this.addr, v );\n\n\tcache[ 0 ] = v;\n\n}\n\n// Helper to pick the right setter for the singular case\n\nfunction getSingularSetter( type ) {\n\n\tswitch ( type ) {\n\n\t\tcase 0x1406: return setValueV1f; // FLOAT\n\t\tcase 0x8b50: return setValueV2f; // _VEC2\n\t\tcase 0x8b51: return setValueV3f; // _VEC3\n\t\tcase 0x8b52: return setValueV4f; // _VEC4\n\n\t\tcase 0x8b5a: return setValueM2; // _MAT2\n\t\tcase 0x8b5b: return setValueM3; // _MAT3\n\t\tcase 0x8b5c: return setValueM4; // _MAT4\n\n\t\tcase 0x1404: case 0x8b56: return setValueV1i; // INT, BOOL\n\t\tcase 0x8b53: case 0x8b57: return setValueV2i; // _VEC2\n\t\tcase 0x8b54: case 0x8b58: return setValueV3i; // _VEC3\n\t\tcase 0x8b55: case 0x8b59: return setValueV4i; // _VEC4\n\n\t\tcase 0x1405: return setValueV1ui; // UINT\n\n\t\tcase 0x8b5e: // SAMPLER_2D\n\t\tcase 0x8d66: // SAMPLER_EXTERNAL_OES\n\t\tcase 0x8dca: // INT_SAMPLER_2D\n\t\tcase 0x8dd2: // UNSIGNED_INT_SAMPLER_2D\n\t\tcase 0x8b62: // SAMPLER_2D_SHADOW\n\t\t\treturn setValueT1;\n\n\t\tcase 0x8b5f: // SAMPLER_3D\n\t\tcase 0x8dcb: // INT_SAMPLER_3D\n\t\tcase 0x8dd3: // UNSIGNED_INT_SAMPLER_3D\n\t\t\treturn setValueT3D1;\n\n\t\tcase 0x8b60: // SAMPLER_CUBE\n\t\tcase 0x8dcc: // INT_SAMPLER_CUBE\n\t\tcase 0x8dd4: // UNSIGNED_INT_SAMPLER_CUBE\n\t\tcase 0x8dc5: // SAMPLER_CUBE_SHADOW\n\t\t\treturn setValueT6;\n\n\t\tcase 0x8dc1: // SAMPLER_2D_ARRAY\n\t\tcase 0x8dcf: // INT_SAMPLER_2D_ARRAY\n\t\tcase 0x8dd7: // UNSIGNED_INT_SAMPLER_2D_ARRAY\n\t\tcase 0x8dc4: // SAMPLER_2D_ARRAY_SHADOW\n\t\t\treturn setValueT2DArray1;\n\n\t}\n\n}\n\n// Array of scalars\nfunction setValueV1fArray( gl, v ) {\n\n\tgl.uniform1fv( this.addr, v );\n\n}\n\n// Integer / Boolean vectors or arrays thereof (always flat arrays)\nfunction setValueV1iArray( gl, v ) {\n\n\tgl.uniform1iv( this.addr, v );\n\n}\n\nfunction setValueV2iArray( gl, v ) {\n\n\tgl.uniform2iv( this.addr, v );\n\n}\n\nfunction setValueV3iArray( gl, v ) {\n\n\tgl.uniform3iv( this.addr, v );\n\n}\n\nfunction setValueV4iArray( gl, v ) {\n\n\tgl.uniform4iv( this.addr, v );\n\n}\n\n\n// Array of vectors (flat or from THREE classes)\n\nfunction setValueV2fArray( gl, v ) {\n\n\tvar data = flatten( v, this.size, 2 );\n\n\tgl.uniform2fv( this.addr, data );\n\n}\n\nfunction setValueV3fArray( gl, v ) {\n\n\tvar data = flatten( v, this.size, 3 );\n\n\tgl.uniform3fv( this.addr, data );\n\n}\n\nfunction setValueV4fArray( gl, v ) {\n\n\tvar data = flatten( v, this.size, 4 );\n\n\tgl.uniform4fv( this.addr, data );\n\n}\n\n// Array of matrices (flat or from THREE clases)\n\nfunction setValueM2Array( gl, v ) {\n\n\tvar data = flatten( v, this.size, 4 );\n\n\tgl.uniformMatrix2fv( this.addr, false, data );\n\n}\n\nfunction setValueM3Array( gl, v ) {\n\n\tvar data = flatten( v, this.size, 9 );\n\n\tgl.uniformMatrix3fv( this.addr, false, data );\n\n}\n\nfunction setValueM4Array( gl, v ) {\n\n\tvar data = flatten( v, this.size, 16 );\n\n\tgl.uniformMatrix4fv( this.addr, false, data );\n\n}\n\n// Array of textures (2D / Cube)\n\nfunction setValueT1Array( gl, v, textures ) {\n\n\tvar n = v.length;\n\n\tvar units = allocTexUnits( textures, n );\n\n\tgl.uniform1iv( this.addr, units );\n\n\tfor ( var i = 0; i !== n; ++ i ) {\n\n\t\ttextures.safeSetTexture2D( v[ i ] || emptyTexture, units[ i ] );\n\n\t}\n\n}\n\nfunction setValueT6Array( gl, v, textures ) {\n\n\tvar n = v.length;\n\n\tvar units = allocTexUnits( textures, n );\n\n\tgl.uniform1iv( this.addr, units );\n\n\tfor ( var i = 0; i !== n; ++ i ) {\n\n\t\ttextures.safeSetTextureCube( v[ i ] || emptyCubeTexture, units[ i ] );\n\n\t}\n\n}\n\n// Helper to pick the right setter for a pure (bottom-level) array\n\nfunction getPureArraySetter( type ) {\n\n\tswitch ( type ) {\n\n\t\tcase 0x1406: return setValueV1fArray; // FLOAT\n\t\tcase 0x8b50: return setValueV2fArray; // _VEC2\n\t\tcase 0x8b51: return setValueV3fArray; // _VEC3\n\t\tcase 0x8b52: return setValueV4fArray; // _VEC4\n\n\t\tcase 0x8b5a: return setValueM2Array; // _MAT2\n\t\tcase 0x8b5b: return setValueM3Array; // _MAT3\n\t\tcase 0x8b5c: return setValueM4Array; // _MAT4\n\n\t\tcase 0x1404: case 0x8b56: return setValueV1iArray; // INT, BOOL\n\t\tcase 0x8b53: case 0x8b57: return setValueV2iArray; // _VEC2\n\t\tcase 0x8b54: case 0x8b58: return setValueV3iArray; // _VEC3\n\t\tcase 0x8b55: case 0x8b59: return setValueV4iArray; // _VEC4\n\n\t\tcase 0x8b5e: // SAMPLER_2D\n\t\tcase 0x8d66: // SAMPLER_EXTERNAL_OES\n\t\tcase 0x8dca: // INT_SAMPLER_2D\n\t\tcase 0x8dd2: // UNSIGNED_INT_SAMPLER_2D\n\t\tcase 0x8b62: // SAMPLER_2D_SHADOW\n\t\t\treturn setValueT1Array;\n\n\t\tcase 0x8b60: // SAMPLER_CUBE\n\t\tcase 0x8dcc: // INT_SAMPLER_CUBE\n\t\tcase 0x8dd4: // UNSIGNED_INT_SAMPLER_CUBE\n\t\tcase 0x8dc5: // SAMPLER_CUBE_SHADOW\n\t\t\treturn setValueT6Array;\n\n\t}\n\n}\n\n// --- Uniform Classes ---\n\nfunction SingleUniform( id, activeInfo, addr ) {\n\n\tthis.id = id;\n\tthis.addr = addr;\n\tthis.cache = [];\n\tthis.setValue = getSingularSetter( activeInfo.type );\n\n\t// this.path = activeInfo.name; // DEBUG\n\n}\n\nfunction PureArrayUniform( id, activeInfo, addr ) {\n\n\tthis.id = id;\n\tthis.addr = addr;\n\tthis.cache = [];\n\tthis.size = activeInfo.size;\n\tthis.setValue = getPureArraySetter( activeInfo.type );\n\n\t// this.path = activeInfo.name; // DEBUG\n\n}\n\nPureArrayUniform.prototype.updateCache = function ( data ) {\n\n\tvar cache = this.cache;\n\n\tif ( data instanceof Float32Array && cache.length !== data.length ) {\n\n\t\tthis.cache = new Float32Array( data.length );\n\n\t}\n\n\tcopyArray( cache, data );\n\n};\n\nfunction StructuredUniform( id ) {\n\n\tthis.id = id;\n\n\tthis.seq = [];\n\tthis.map = {};\n\n}\n\nStructuredUniform.prototype.setValue = function ( gl, value, textures ) {\n\n\tvar seq = this.seq;\n\n\tfor ( var i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\tvar u = seq[ i ];\n\t\tu.setValue( gl, value[ u.id ], textures );\n\n\t}\n\n};\n\n// --- Top-level ---\n\n// Parser - builds up the property tree from the path strings\n\nvar RePathPart = /([\\w\\d_]+)(\\])?(\\[|\\.)?/g;\n\n// extracts\n// \t- the identifier (member name or array index)\n//  - followed by an optional right bracket (found when array index)\n//  - followed by an optional left bracket or dot (type of subscript)\n//\n// Note: These portions can be read in a non-overlapping fashion and\n// allow straightforward parsing of the hierarchy that WebGL encodes\n// in the uniform names.\n\nfunction addUniform( container, uniformObject ) {\n\n\tcontainer.seq.push( uniformObject );\n\tcontainer.map[ uniformObject.id ] = uniformObject;\n\n}\n\nfunction parseUniform( activeInfo, addr, container ) {\n\n\tvar path = activeInfo.name,\n\t\tpathLength = path.length;\n\n\t// reset RegExp object, because of the early exit of a previous run\n\tRePathPart.lastIndex = 0;\n\n\twhile ( true ) {\n\n\t\tvar match = RePathPart.exec( path ),\n\t\t\tmatchEnd = RePathPart.lastIndex,\n\n\t\t\tid = match[ 1 ],\n\t\t\tidIsIndex = match[ 2 ] === ']',\n\t\t\tsubscript = match[ 3 ];\n\n\t\tif ( idIsIndex ) id = id | 0; // convert to integer\n\n\t\tif ( subscript === undefined || subscript === '[' && matchEnd + 2 === pathLength ) {\n\n\t\t\t// bare name or \"pure\" bottom-level array \"[0]\" suffix\n\n\t\t\taddUniform( container, subscript === undefined ?\n\t\t\t\tnew SingleUniform( id, activeInfo, addr ) :\n\t\t\t\tnew PureArrayUniform( id, activeInfo, addr ) );\n\n\t\t\tbreak;\n\n\t\t} else {\n\n\t\t\t// step into inner node / create it in case it doesn't exist\n\n\t\t\tvar map = container.map, next = map[ id ];\n\n\t\t\tif ( next === undefined ) {\n\n\t\t\t\tnext = new StructuredUniform( id );\n\t\t\t\taddUniform( container, next );\n\n\t\t\t}\n\n\t\t\tcontainer = next;\n\n\t\t}\n\n\t}\n\n}\n\n// Root Container\n\nfunction WebGLUniforms( gl, program ) {\n\n\tthis.seq = [];\n\tthis.map = {};\n\n\tvar n = gl.getProgramParameter( program, gl.ACTIVE_UNIFORMS );\n\n\tfor ( var i = 0; i < n; ++ i ) {\n\n\t\tvar info = gl.getActiveUniform( program, i ),\n\t\t\taddr = gl.getUniformLocation( program, info.name );\n\n\t\tparseUniform( info, addr, this );\n\n\t}\n\n}\n\nWebGLUniforms.prototype.setValue = function ( gl, name, value, textures ) {\n\n\tvar u = this.map[ name ];\n\n\tif ( u !== undefined ) u.setValue( gl, value, textures );\n\n};\n\nWebGLUniforms.prototype.setOptional = function ( gl, object, name ) {\n\n\tvar v = object[ name ];\n\n\tif ( v !== undefined ) this.setValue( gl, name, v );\n\n};\n\n\n// Static interface\n\nWebGLUniforms.upload = function ( gl, seq, values, textures ) {\n\n\tfor ( var i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\tvar u = seq[ i ],\n\t\t\tv = values[ u.id ];\n\n\t\tif ( v.needsUpdate !== false ) {\n\n\t\t\t// note: always updating when .needsUpdate is undefined\n\t\t\tu.setValue( gl, v.value, textures );\n\n\t\t}\n\n\t}\n\n};\n\nWebGLUniforms.seqWithValue = function ( seq, values ) {\n\n\tvar r = [];\n\n\tfor ( var i = 0, n = seq.length; i !== n; ++ i ) {\n\n\t\tvar u = seq[ i ];\n\t\tif ( u.id in values ) r.push( u );\n\n\t}\n\n\treturn r;\n\n};\n\nexport { WebGLUniforms };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction WebGLShader( gl, type, string ) {\n\n\tvar shader = gl.createShader( type );\n\n\tgl.shaderSource( shader, string );\n\tgl.compileShader( shader );\n\n\treturn shader;\n\n}\n\nexport { WebGLShader };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { WebGLUniforms } from './WebGLUniforms.js';\nimport { WebGLShader } from './WebGLShader.js';\nimport { ShaderChunk } from '../shaders/ShaderChunk.js';\nimport { NoToneMapping, AddOperation, MixOperation, MultiplyOperation, EquirectangularRefractionMapping, CubeRefractionMapping, SphericalReflectionMapping, EquirectangularReflectionMapping, CubeUVRefractionMapping, CubeUVReflectionMapping, CubeReflectionMapping, PCFSoftShadowMap, PCFShadowMap, VSMShadowMap, ACESFilmicToneMapping, CineonToneMapping, Uncharted2ToneMapping, ReinhardToneMapping, LinearToneMapping, GammaEncoding, RGBDEncoding, RGBM16Encoding, RGBM7Encoding, RGBEEncoding, sRGBEncoding, LinearEncoding, LogLuvEncoding } from '../../constants.js';\n\nvar programIdCount = 0;\n\nfunction addLineNumbers( string ) {\n\n\tvar lines = string.split( '\\n' );\n\n\tfor ( var i = 0; i < lines.length; i ++ ) {\n\n\t\tlines[ i ] = ( i + 1 ) + ': ' + lines[ i ];\n\n\t}\n\n\treturn lines.join( '\\n' );\n\n}\n\nfunction getEncodingComponents( encoding ) {\n\n\tswitch ( encoding ) {\n\n\t\tcase LinearEncoding:\n\t\t\treturn [ 'Linear', '( value )' ];\n\t\tcase sRGBEncoding:\n\t\t\treturn [ 'sRGB', '( value )' ];\n\t\tcase RGBEEncoding:\n\t\t\treturn [ 'RGBE', '( value )' ];\n\t\tcase RGBM7Encoding:\n\t\t\treturn [ 'RGBM', '( value, 7.0 )' ];\n\t\tcase RGBM16Encoding:\n\t\t\treturn [ 'RGBM', '( value, 16.0 )' ];\n\t\tcase RGBDEncoding:\n\t\t\treturn [ 'RGBD', '( value, 256.0 )' ];\n\t\tcase GammaEncoding:\n\t\t\treturn [ 'Gamma', '( value, float( GAMMA_FACTOR ) )' ];\n\t\tcase LogLuvEncoding:\n\t\t\treturn [ 'LogLuv', '( value )' ];\n\t\tdefault:\n\t\t\tthrow new Error( 'unsupported encoding: ' + encoding );\n\n\t}\n\n}\n\nfunction getShaderErrors( gl, shader, type ) {\n\n\tvar status = gl.getShaderParameter( shader, gl.COMPILE_STATUS );\n\tvar log = gl.getShaderInfoLog( shader ).trim();\n\n\tif ( status && log === '' ) return '';\n\n\t// --enable-privileged-webgl-extension\n\t// console.log( '**' + type + '**', gl.getExtension( 'WEBGL_debug_shaders' ).getTranslatedShaderSource( shader ) );\n\n\tvar source = gl.getShaderSource( shader );\n\n\treturn 'THREE.WebGLShader: gl.getShaderInfoLog() ' + type + '\\n' + log + addLineNumbers( source );\n\n}\n\nfunction getTexelDecodingFunction( functionName, encoding ) {\n\n\tvar components = getEncodingComponents( encoding );\n\treturn 'vec4 ' + functionName + '( vec4 value ) { return ' + components[ 0 ] + 'ToLinear' + components[ 1 ] + '; }';\n\n}\n\nfunction getTexelEncodingFunction( functionName, encoding ) {\n\n\tvar components = getEncodingComponents( encoding );\n\treturn 'vec4 ' + functionName + '( vec4 value ) { return LinearTo' + components[ 0 ] + components[ 1 ] + '; }';\n\n}\n\nfunction getToneMappingFunction( functionName, toneMapping ) {\n\n\tvar toneMappingName;\n\n\tswitch ( toneMapping ) {\n\n\t\tcase LinearToneMapping:\n\t\t\ttoneMappingName = 'Linear';\n\t\t\tbreak;\n\n\t\tcase ReinhardToneMapping:\n\t\t\ttoneMappingName = 'Reinhard';\n\t\t\tbreak;\n\n\t\tcase Uncharted2ToneMapping:\n\t\t\ttoneMappingName = 'Uncharted2';\n\t\t\tbreak;\n\n\t\tcase CineonToneMapping:\n\t\t\ttoneMappingName = 'OptimizedCineon';\n\t\t\tbreak;\n\n\t\tcase ACESFilmicToneMapping:\n\t\t\ttoneMappingName = 'ACESFilmic';\n\t\t\tbreak;\n\n\t\tdefault:\n\t\t\tthrow new Error( 'unsupported toneMapping: ' + toneMapping );\n\n\t}\n\n\treturn 'vec3 ' + functionName + '( vec3 color ) { return ' + toneMappingName + 'ToneMapping( color ); }';\n\n}\n\nfunction generateExtensions( parameters ) {\n\n\tvar chunks = [\n\t\t( parameters.extensionDerivatives || parameters.envMapCubeUV || parameters.bumpMap || parameters.tangentSpaceNormalMap || parameters.clearcoatNormalMap || parameters.flatShading || parameters.shaderID === 'physical' ) ? '#extension GL_OES_standard_derivatives : enable' : '',\n\t\t( parameters.extensionFragDepth || parameters.logarithmicDepthBuffer ) && parameters.rendererExtensionFragDepth ? '#extension GL_EXT_frag_depth : enable' : '',\n\t\t( parameters.extensionDrawBuffers && parameters.rendererExtensionDrawBuffers ) ? '#extension GL_EXT_draw_buffers : require' : '',\n\t\t( parameters.extensionShaderTextureLOD || parameters.envMap ) && parameters.rendererExtensionShaderTextureLod ? '#extension GL_EXT_shader_texture_lod : enable' : ''\n\t];\n\n\treturn chunks.filter( filterEmptyLine ).join( '\\n' );\n\n}\n\nfunction generateDefines( defines ) {\n\n\tvar chunks = [];\n\n\tfor ( var name in defines ) {\n\n\t\tvar value = defines[ name ];\n\n\t\tif ( value === false ) continue;\n\n\t\tchunks.push( '#define ' + name + ' ' + value );\n\n\t}\n\n\treturn chunks.join( '\\n' );\n\n}\n\nfunction fetchAttributeLocations( gl, program ) {\n\n\tvar attributes = {};\n\n\tvar n = gl.getProgramParameter( program, gl.ACTIVE_ATTRIBUTES );\n\n\tfor ( var i = 0; i < n; i ++ ) {\n\n\t\tvar info = gl.getActiveAttrib( program, i );\n\t\tvar name = info.name;\n\n\t\t// console.log( 'THREE.WebGLProgram: ACTIVE VERTEX ATTRIBUTE:', name, i );\n\n\t\tattributes[ name ] = gl.getAttribLocation( program, name );\n\n\t}\n\n\treturn attributes;\n\n}\n\nfunction filterEmptyLine( string ) {\n\n\treturn string !== '';\n\n}\n\nfunction replaceLightNums( string, parameters ) {\n\n\treturn string\n\t\t.replace( /NUM_DIR_LIGHTS/g, parameters.numDirLights )\n\t\t.replace( /NUM_SPOT_LIGHTS/g, parameters.numSpotLights )\n\t\t.replace( /NUM_RECT_AREA_LIGHTS/g, parameters.numRectAreaLights )\n\t\t.replace( /NUM_POINT_LIGHTS/g, parameters.numPointLights )\n\t\t.replace( /NUM_HEMI_LIGHTS/g, parameters.numHemiLights )\n\t\t.replace( /NUM_DIR_LIGHT_SHADOWS/g, parameters.numDirLightShadows )\n\t\t.replace( /NUM_SPOT_LIGHT_SHADOWS/g, parameters.numSpotLightShadows )\n\t\t.replace( /NUM_POINT_LIGHT_SHADOWS/g, parameters.numPointLightShadows );\n\n}\n\nfunction replaceClippingPlaneNums( string, parameters ) {\n\n\treturn string\n\t\t.replace( /NUM_CLIPPING_PLANES/g, parameters.numClippingPlanes )\n\t\t.replace( /UNION_CLIPPING_PLANES/g, ( parameters.numClippingPlanes - parameters.numClipIntersection ) );\n\n}\n\n// Resolve Includes\n\nvar includePattern = /^[ \\t]*#include +<([\\w\\d./]+)>/gm;\n\nfunction resolveIncludes( string ) {\n\n\treturn string.replace( includePattern, includeReplacer );\n\n}\n\nfunction includeReplacer( match, include ) {\n\n\tvar string = ShaderChunk[ include ];\n\n\tif ( string === undefined ) {\n\n\t\tthrow new Error( 'Can not resolve #include <' + include + '>' );\n\n\t}\n\n\treturn resolveIncludes( string );\n\n}\n\n// Unroll Loops\n\nvar deprecatedUnrollLoopPattern = /#pragma unroll_loop[\\s]+?for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}/g;\nvar unrollLoopPattern = /#pragma unroll_loop_start[\\s]+?for \\( int i \\= (\\d+)\\; i < (\\d+)\\; i \\+\\+ \\) \\{([\\s\\S]+?)(?=\\})\\}[\\s]+?#pragma unroll_loop_end/g;\n\nfunction unrollLoops( string ) {\n\n\treturn string\n\t\t.replace( unrollLoopPattern, loopReplacer )\n\t\t.replace( deprecatedUnrollLoopPattern, deprecatedLoopReplacer );\n\n}\n\nfunction deprecatedLoopReplacer( match, start, end, snippet ) {\n\n\tconsole.warn( 'WebGLProgram: #pragma unroll_loop shader syntax is deprecated. Please use #pragma unroll_loop_start syntax instead.' );\n\treturn loopReplacer( match, start, end, snippet );\n\n}\n\nfunction loopReplacer( match, start, end, snippet ) {\n\n\tvar string = '';\n\n\tfor ( var i = parseInt( start ); i < parseInt( end ); i ++ ) {\n\n\t\tstring += snippet\n\t\t\t.replace( /\\[ i \\]/g, '[ ' + i + ' ]' )\n\t\t\t.replace( /UNROLLED_LOOP_INDEX/g, i );\n\n\t}\n\n\treturn string;\n\n}\n\n//\n\nfunction generatePrecision( parameters ) {\n\n\tvar precisionstring = \"precision \" + parameters.precision + \" float;\\nprecision \" + parameters.precision + \" int;\";\n\n\tif ( parameters.precision === \"highp\" ) {\n\n\t\tprecisionstring += \"\\n#define HIGH_PRECISION\";\n\n\t} else if ( parameters.precision === \"mediump\" ) {\n\n\t\tprecisionstring += \"\\n#define MEDIUM_PRECISION\";\n\n\t} else if ( parameters.precision === \"lowp\" ) {\n\n\t\tprecisionstring += \"\\n#define LOW_PRECISION\";\n\n\t}\n\n\treturn precisionstring;\n\n}\n\nfunction generateShadowMapTypeDefine( parameters ) {\n\n\tvar shadowMapTypeDefine = 'SHADOWMAP_TYPE_BASIC';\n\n\tif ( parameters.shadowMapType === PCFShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF';\n\n\t} else if ( parameters.shadowMapType === PCFSoftShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_PCF_SOFT';\n\n\t} else if ( parameters.shadowMapType === VSMShadowMap ) {\n\n\t\tshadowMapTypeDefine = 'SHADOWMAP_TYPE_VSM';\n\n\t}\n\n\treturn shadowMapTypeDefine;\n\n}\n\nfunction generateEnvMapTypeDefine( parameters ) {\n\n\tvar envMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( parameters.envMapMode ) {\n\n\t\t\tcase CubeReflectionMapping:\n\t\t\tcase CubeRefractionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE';\n\t\t\t\tbreak;\n\n\t\t\tcase CubeUVReflectionMapping:\n\t\t\tcase CubeUVRefractionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_CUBE_UV';\n\t\t\t\tbreak;\n\n\t\t\tcase EquirectangularReflectionMapping:\n\t\t\tcase EquirectangularRefractionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_EQUIREC';\n\t\t\t\tbreak;\n\n\t\t\tcase SphericalReflectionMapping:\n\t\t\t\tenvMapTypeDefine = 'ENVMAP_TYPE_SPHERE';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn envMapTypeDefine;\n\n}\n\nfunction generateEnvMapModeDefine( parameters ) {\n\n\tvar envMapModeDefine = 'ENVMAP_MODE_REFLECTION';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( parameters.envMapMode ) {\n\n\t\t\tcase CubeRefractionMapping:\n\t\t\tcase EquirectangularRefractionMapping:\n\t\t\t\tenvMapModeDefine = 'ENVMAP_MODE_REFRACTION';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn envMapModeDefine;\n\n}\n\nfunction generateEnvMapBlendingDefine( parameters ) {\n\n\tvar envMapBlendingDefine = 'ENVMAP_BLENDING_NONE';\n\n\tif ( parameters.envMap ) {\n\n\t\tswitch ( parameters.combine ) {\n\n\t\t\tcase MultiplyOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MULTIPLY';\n\t\t\t\tbreak;\n\n\t\t\tcase MixOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_MIX';\n\t\t\t\tbreak;\n\n\t\t\tcase AddOperation:\n\t\t\t\tenvMapBlendingDefine = 'ENVMAP_BLENDING_ADD';\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn envMapBlendingDefine;\n\n}\n\nfunction WebGLProgram( renderer, cacheKey, parameters ) {\n\n\tvar gl = renderer.getContext();\n\n\tvar defines = parameters.defines;\n\n\tvar vertexShader = parameters.vertexShader;\n\tvar fragmentShader = parameters.fragmentShader;\n\tvar shadowMapTypeDefine = generateShadowMapTypeDefine( parameters );\n\tvar envMapTypeDefine = generateEnvMapTypeDefine( parameters );\n\tvar envMapModeDefine = generateEnvMapModeDefine( parameters );\n\tvar envMapBlendingDefine = generateEnvMapBlendingDefine( parameters );\n\n\n\tvar gammaFactorDefine = ( renderer.gammaFactor > 0 ) ? renderer.gammaFactor : 1.0;\n\n\tvar customExtensions = parameters.isWebGL2 ? '' : generateExtensions( parameters );\n\n\tvar customDefines = generateDefines( defines );\n\n\tvar program = gl.createProgram();\n\n\tvar prefixVertex, prefixFragment;\n\n\tif ( parameters.isRawShaderMaterial ) {\n\n\t\tprefixVertex = [\n\n\t\t\tcustomDefines\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tif ( prefixVertex.length > 0 ) {\n\n\t\t\tprefixVertex += '\\n';\n\n\t\t}\n\n\t\tprefixFragment = [\n\n\t\t\tcustomExtensions,\n\t\t\tcustomDefines\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tif ( prefixFragment.length > 0 ) {\n\n\t\t\tprefixFragment += '\\n';\n\n\t\t}\n\n\t} else {\n\n\t\tprefixVertex = [\n\n\t\t\tgeneratePrecision( parameters ),\n\n\t\t\t'#define SHADER_NAME ' + parameters.shaderName,\n\n\t\t\tcustomDefines,\n\n\t\t\tparameters.instancing ? '#define USE_INSTANCING' : '',\n\t\t\tparameters.supportsVertexTextures ? '#define VERTEX_TEXTURES' : '',\n\n\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\n\n\t\t\t'#define MAX_BONES ' + parameters.maxBones,\n\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\n\t\t\t( parameters.useFog && parameters.fogExp2 ) ? '#define FOG_EXP2' : '',\n\n\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\n\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\n\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.objectSpaceNormalMap ) ? '#define OBJECTSPACE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.tangentSpaceNormalMap ) ? '#define TANGENTSPACE_NORMALMAP' : '',\n\n\t\t\tparameters.clearcoatMap ? '#define USE_CLEARCOATMAP' : '',\n\t\t\tparameters.clearcoatRoughnessMap ? '#define USE_CLEARCOAT_ROUGHNESSMAP' : '',\n\t\t\tparameters.clearcoatNormalMap ? '#define USE_CLEARCOAT_NORMALMAP' : '',\n\t\t\tparameters.displacementMap && parameters.supportsVertexTextures ? '#define USE_DISPLACEMENTMAP' : '',\n\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\n\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\n\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\n\t\t\tparameters.vertexTangents ? '#define USE_TANGENT' : '',\n\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\n\t\t\tparameters.vertexUvs ? '#define USE_UV' : '',\n\t\t\tparameters.uvsVertexOnly ? '#define UVS_VERTEX_ONLY' : '',\n\n\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\n\n\t\t\tparameters.skinning ? '#define USE_SKINNING' : '',\n\t\t\tparameters.useVertexTexture ? '#define BONE_TEXTURE' : '',\n\n\t\t\tparameters.morphTargets ? '#define USE_MORPHTARGETS' : '',\n\t\t\tparameters.morphNormals && parameters.flatShading === false ? '#define USE_MORPHNORMALS' : '',\n\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\n\t\t\tparameters.sizeAttenuation ? '#define USE_SIZEATTENUATION' : '',\n\n\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\t( parameters.logarithmicDepthBuffer && parameters.rendererExtensionFragDepth ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\t\t\t'uniform mat4 modelMatrix;',\n\t\t\t'uniform mat4 modelViewMatrix;',\n\t\t\t'uniform mat4 projectionMatrix;',\n\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t'uniform mat3 normalMatrix;',\n\t\t\t'uniform vec3 cameraPosition;',\n\t\t\t'uniform bool isOrthographic;',\n\n\t\t\t'#ifdef USE_INSTANCING',\n\n\t\t\t' attribute mat4 instanceMatrix;',\n\n\t\t\t'#endif',\n\n\t\t\t'attribute vec3 position;',\n\t\t\t'attribute vec3 normal;',\n\t\t\t'attribute vec2 uv;',\n\n\t\t\t'#ifdef USE_TANGENT',\n\n\t\t\t'\tattribute vec4 tangent;',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_COLOR',\n\n\t\t\t'\tattribute vec3 color;',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_MORPHTARGETS',\n\n\t\t\t'\tattribute vec3 morphTarget0;',\n\t\t\t'\tattribute vec3 morphTarget1;',\n\t\t\t'\tattribute vec3 morphTarget2;',\n\t\t\t'\tattribute vec3 morphTarget3;',\n\n\t\t\t'\t#ifdef USE_MORPHNORMALS',\n\n\t\t\t'\t\tattribute vec3 morphNormal0;',\n\t\t\t'\t\tattribute vec3 morphNormal1;',\n\t\t\t'\t\tattribute vec3 morphNormal2;',\n\t\t\t'\t\tattribute vec3 morphNormal3;',\n\n\t\t\t'\t#else',\n\n\t\t\t'\t\tattribute vec3 morphTarget4;',\n\t\t\t'\t\tattribute vec3 morphTarget5;',\n\t\t\t'\t\tattribute vec3 morphTarget6;',\n\t\t\t'\t\tattribute vec3 morphTarget7;',\n\n\t\t\t'\t#endif',\n\n\t\t\t'#endif',\n\n\t\t\t'#ifdef USE_SKINNING',\n\n\t\t\t'\tattribute vec4 skinIndex;',\n\t\t\t'\tattribute vec4 skinWeight;',\n\n\t\t\t'#endif',\n\n\t\t\t'\\n'\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t\tprefixFragment = [\n\n\t\t\tcustomExtensions,\n\n\t\t\tgeneratePrecision( parameters ),\n\n\t\t\t'#define SHADER_NAME ' + parameters.shaderName,\n\n\t\t\tcustomDefines,\n\n\t\t\tparameters.alphaTest ? '#define ALPHATEST ' + parameters.alphaTest + ( parameters.alphaTest % 1 ? '' : '.0' ) : '', // add '.0' if integer\n\n\t\t\t'#define GAMMA_FACTOR ' + gammaFactorDefine,\n\n\t\t\t( parameters.useFog && parameters.fog ) ? '#define USE_FOG' : '',\n\t\t\t( parameters.useFog && parameters.fogExp2 ) ? '#define FOG_EXP2' : '',\n\n\t\t\tparameters.map ? '#define USE_MAP' : '',\n\t\t\tparameters.matcap ? '#define USE_MATCAP' : '',\n\t\t\tparameters.envMap ? '#define USE_ENVMAP' : '',\n\t\t\tparameters.envMap ? '#define ' + envMapTypeDefine : '',\n\t\t\tparameters.envMap ? '#define ' + envMapModeDefine : '',\n\t\t\tparameters.envMap ? '#define ' + envMapBlendingDefine : '',\n\t\t\tparameters.lightMap ? '#define USE_LIGHTMAP' : '',\n\t\t\tparameters.aoMap ? '#define USE_AOMAP' : '',\n\t\t\tparameters.emissiveMap ? '#define USE_EMISSIVEMAP' : '',\n\t\t\tparameters.bumpMap ? '#define USE_BUMPMAP' : '',\n\t\t\tparameters.normalMap ? '#define USE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.objectSpaceNormalMap ) ? '#define OBJECTSPACE_NORMALMAP' : '',\n\t\t\t( parameters.normalMap && parameters.tangentSpaceNormalMap ) ? '#define TANGENTSPACE_NORMALMAP' : '',\n\t\t\tparameters.clearcoatMap ? '#define USE_CLEARCOATMAP' : '',\n\t\t\tparameters.clearcoatRoughnessMap ? '#define USE_CLEARCOAT_ROUGHNESSMAP' : '',\n\t\t\tparameters.clearcoatNormalMap ? '#define USE_CLEARCOAT_NORMALMAP' : '',\n\t\t\tparameters.specularMap ? '#define USE_SPECULARMAP' : '',\n\t\t\tparameters.roughnessMap ? '#define USE_ROUGHNESSMAP' : '',\n\t\t\tparameters.metalnessMap ? '#define USE_METALNESSMAP' : '',\n\t\t\tparameters.alphaMap ? '#define USE_ALPHAMAP' : '',\n\n\t\t\tparameters.sheen ? '#define USE_SHEEN' : '',\n\n\t\t\tparameters.vertexTangents ? '#define USE_TANGENT' : '',\n\t\t\tparameters.vertexColors ? '#define USE_COLOR' : '',\n\t\t\tparameters.vertexUvs ? '#define USE_UV' : '',\n\t\t\tparameters.uvsVertexOnly ? '#define UVS_VERTEX_ONLY' : '',\n\n\t\t\tparameters.gradientMap ? '#define USE_GRADIENTMAP' : '',\n\n\t\t\tparameters.flatShading ? '#define FLAT_SHADED' : '',\n\n\t\t\tparameters.doubleSided ? '#define DOUBLE_SIDED' : '',\n\t\t\tparameters.flipSided ? '#define FLIP_SIDED' : '',\n\n\t\t\tparameters.shadowMapEnabled ? '#define USE_SHADOWMAP' : '',\n\t\t\tparameters.shadowMapEnabled ? '#define ' + shadowMapTypeDefine : '',\n\n\t\t\tparameters.premultipliedAlpha ? '#define PREMULTIPLIED_ALPHA' : '',\n\n\t\t\tparameters.physicallyCorrectLights ? '#define PHYSICALLY_CORRECT_LIGHTS' : '',\n\n\t\t\tparameters.logarithmicDepthBuffer ? '#define USE_LOGDEPTHBUF' : '',\n\t\t\t( parameters.logarithmicDepthBuffer && parameters.rendererExtensionFragDepth ) ? '#define USE_LOGDEPTHBUF_EXT' : '',\n\n\t\t\t( ( parameters.extensionShaderTextureLOD || parameters.envMap ) && parameters.rendererExtensionShaderTextureLod ) ? '#define TEXTURE_LOD_EXT' : '',\n\n\t\t\t'uniform mat4 viewMatrix;',\n\t\t\t'uniform vec3 cameraPosition;',\n\t\t\t'uniform bool isOrthographic;',\n\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? '#define TONE_MAPPING' : '',\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? ShaderChunk[ 'tonemapping_pars_fragment' ] : '', // this code is required here because it is used by the toneMapping() function defined below\n\t\t\t( parameters.toneMapping !== NoToneMapping ) ? getToneMappingFunction( 'toneMapping', parameters.toneMapping ) : '',\n\n\t\t\tparameters.dithering ? '#define DITHERING' : '',\n\n\t\t\t( parameters.outputEncoding || parameters.mapEncoding || parameters.matcapEncoding || parameters.envMapEncoding || parameters.emissiveMapEncoding || parameters.lightMapEncoding ) ?\n\t\t\t\tShaderChunk[ 'encodings_pars_fragment' ] : '', // this code is required here because it is used by the various encoding/decoding function defined below\n\t\t\tparameters.mapEncoding ? getTexelDecodingFunction( 'mapTexelToLinear', parameters.mapEncoding ) : '',\n\t\t\tparameters.matcapEncoding ? getTexelDecodingFunction( 'matcapTexelToLinear', parameters.matcapEncoding ) : '',\n\t\t\tparameters.envMapEncoding ? getTexelDecodingFunction( 'envMapTexelToLinear', parameters.envMapEncoding ) : '',\n\t\t\tparameters.emissiveMapEncoding ? getTexelDecodingFunction( 'emissiveMapTexelToLinear', parameters.emissiveMapEncoding ) : '',\n\t\t\tparameters.lightMapEncoding ? getTexelDecodingFunction( 'lightMapTexelToLinear', parameters.lightMapEncoding ) : '',\n\t\t\tparameters.outputEncoding ? getTexelEncodingFunction( 'linearToOutputTexel', parameters.outputEncoding ) : '',\n\n\t\t\tparameters.depthPacking ? '#define DEPTH_PACKING ' + parameters.depthPacking : '',\n\n\t\t\t'\\n'\n\n\t\t].filter( filterEmptyLine ).join( '\\n' );\n\n\t}\n\n\tvertexShader = resolveIncludes( vertexShader );\n\tvertexShader = replaceLightNums( vertexShader, parameters );\n\tvertexShader = replaceClippingPlaneNums( vertexShader, parameters );\n\n\tfragmentShader = resolveIncludes( fragmentShader );\n\tfragmentShader = replaceLightNums( fragmentShader, parameters );\n\tfragmentShader = replaceClippingPlaneNums( fragmentShader, parameters );\n\n\tvertexShader = unrollLoops( vertexShader );\n\tfragmentShader = unrollLoops( fragmentShader );\n\n\tif ( parameters.isWebGL2 && ! parameters.isRawShaderMaterial ) {\n\n\t\tvar isGLSL3ShaderMaterial = false;\n\n\t\tvar versionRegex = /^\\s*#version\\s+300\\s+es\\s*\\n/;\n\n\t\tif ( parameters.isShaderMaterial &&\n\t\t\tvertexShader.match( versionRegex ) !== null &&\n\t\t\tfragmentShader.match( versionRegex ) !== null ) {\n\n\t\t\tisGLSL3ShaderMaterial = true;\n\n\t\t\tvertexShader = vertexShader.replace( versionRegex, '' );\n\t\t\tfragmentShader = fragmentShader.replace( versionRegex, '' );\n\n\t\t}\n\n\t\t// GLSL 3.0 conversion\n\n\t\tprefixVertex = [\n\t\t\t'#version 300 es\\n',\n\t\t\t'#define attribute in',\n\t\t\t'#define varying out',\n\t\t\t'#define texture2D texture'\n\t\t].join( '\\n' ) + '\\n' + prefixVertex;\n\n\t\tprefixFragment = [\n\t\t\t'#version 300 es\\n',\n\t\t\t'#define varying in',\n\t\t\tisGLSL3ShaderMaterial ? '' : 'out highp vec4 pc_fragColor;',\n\t\t\tisGLSL3ShaderMaterial ? '' : '#define gl_FragColor pc_fragColor',\n\t\t\t'#define gl_FragDepthEXT gl_FragDepth',\n\t\t\t'#define texture2D texture',\n\t\t\t'#define textureCube texture',\n\t\t\t'#define texture2DProj textureProj',\n\t\t\t'#define texture2DLodEXT textureLod',\n\t\t\t'#define texture2DProjLodEXT textureProjLod',\n\t\t\t'#define textureCubeLodEXT textureLod',\n\t\t\t'#define texture2DGradEXT textureGrad',\n\t\t\t'#define texture2DProjGradEXT textureProjGrad',\n\t\t\t'#define textureCubeGradEXT textureGrad'\n\t\t].join( '\\n' ) + '\\n' + prefixFragment;\n\n\t}\n\n\tvar vertexGlsl = prefixVertex + vertexShader;\n\tvar fragmentGlsl = prefixFragment + fragmentShader;\n\n\t// console.log( '*VERTEX*', vertexGlsl );\n\t// console.log( '*FRAGMENT*', fragmentGlsl );\n\n\tvar glVertexShader = WebGLShader( gl, gl.VERTEX_SHADER, vertexGlsl );\n\tvar glFragmentShader = WebGLShader( gl, gl.FRAGMENT_SHADER, fragmentGlsl );\n\n\tgl.attachShader( program, glVertexShader );\n\tgl.attachShader( program, glFragmentShader );\n\n\t// Force a particular attribute to index 0.\n\n\tif ( parameters.index0AttributeName !== undefined ) {\n\n\t\tgl.bindAttribLocation( program, 0, parameters.index0AttributeName );\n\n\t} else if ( parameters.morphTargets === true ) {\n\n\t\t// programs with morphTargets displace position out of attribute 0\n\t\tgl.bindAttribLocation( program, 0, 'position' );\n\n\t}\n\n\tgl.linkProgram( program );\n\n\t// check for link errors\n\tif ( renderer.debug.checkShaderErrors ) {\n\n\t\tvar programLog = gl.getProgramInfoLog( program ).trim();\n\t\tvar vertexLog = gl.getShaderInfoLog( glVertexShader ).trim();\n\t\tvar fragmentLog = gl.getShaderInfoLog( glFragmentShader ).trim();\n\n\t\tvar runnable = true;\n\t\tvar haveDiagnostics = true;\n\n\t\tif ( gl.getProgramParameter( program, gl.LINK_STATUS ) === false ) {\n\n\t\t\trunnable = false;\n\n\t\t\tvar vertexErrors = getShaderErrors( gl, glVertexShader, 'vertex' );\n\t\t\tvar fragmentErrors = getShaderErrors( gl, glFragmentShader, 'fragment' );\n\n\t\t\tconsole.error( 'THREE.WebGLProgram: shader error: ', gl.getError(), 'gl.VALIDATE_STATUS', gl.getProgramParameter( program, gl.VALIDATE_STATUS ), 'gl.getProgramInfoLog', programLog, vertexErrors, fragmentErrors );\n\n\t\t} else if ( programLog !== '' ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLProgram: gl.getProgramInfoLog()', programLog );\n\n\t\t} else if ( vertexLog === '' || fragmentLog === '' ) {\n\n\t\t\thaveDiagnostics = false;\n\n\t\t}\n\n\t\tif ( haveDiagnostics ) {\n\n\t\t\tthis.diagnostics = {\n\n\t\t\t\trunnable: runnable,\n\n\t\t\t\tprogramLog: programLog,\n\n\t\t\t\tvertexShader: {\n\n\t\t\t\t\tlog: vertexLog,\n\t\t\t\t\tprefix: prefixVertex\n\n\t\t\t\t},\n\n\t\t\t\tfragmentShader: {\n\n\t\t\t\t\tlog: fragmentLog,\n\t\t\t\t\tprefix: prefixFragment\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}\n\n\t}\n\n\t// clean up\n\n\tgl.detachShader( program, glVertexShader );\n\tgl.detachShader( program, glFragmentShader );\n\n\tgl.deleteShader( glVertexShader );\n\tgl.deleteShader( glFragmentShader );\n\n\t// set up caching for uniform locations\n\n\tvar cachedUniforms;\n\n\tthis.getUniforms = function () {\n\n\t\tif ( cachedUniforms === undefined ) {\n\n\t\t\tcachedUniforms = new WebGLUniforms( gl, program );\n\n\t\t}\n\n\t\treturn cachedUniforms;\n\n\t};\n\n\t// set up caching for attribute locations\n\n\tvar cachedAttributes;\n\n\tthis.getAttributes = function () {\n\n\t\tif ( cachedAttributes === undefined ) {\n\n\t\t\tcachedAttributes = fetchAttributeLocations( gl, program );\n\n\t\t}\n\n\t\treturn cachedAttributes;\n\n\t};\n\n\t// free resource\n\n\tthis.destroy = function () {\n\n\t\tgl.deleteProgram( program );\n\t\tthis.program = undefined;\n\n\t};\n\n\t//\n\n\tthis.name = parameters.shaderName;\n\tthis.id = programIdCount ++;\n\tthis.cacheKey = cacheKey;\n\tthis.usedTimes = 1;\n\tthis.program = program;\n\tthis.vertexShader = glVertexShader;\n\tthis.fragmentShader = glFragmentShader;\n\n\treturn this;\n\n}\n\nexport { WebGLProgram };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { BackSide, DoubleSide, CubeUVRefractionMapping, CubeUVReflectionMapping, LinearEncoding, ObjectSpaceNormalMap, TangentSpaceNormalMap, NoToneMapping } from '../../constants.js';\nimport { WebGLProgram } from './WebGLProgram.js';\nimport { ShaderLib } from '../shaders/ShaderLib.js';\nimport { UniformsUtils } from '../shaders/UniformsUtils.js';\n\nfunction WebGLPrograms( renderer, extensions, capabilities ) {\n\n\tvar programs = [];\n\n\tvar isWebGL2 = capabilities.isWebGL2;\n\tvar logarithmicDepthBuffer = capabilities.logarithmicDepthBuffer;\n\tvar floatVertexTextures = capabilities.floatVertexTextures;\n\tvar precision = capabilities.precision;\n\tvar maxVertexUniforms = capabilities.maxVertexUniforms;\n\tvar vertexTextures = capabilities.vertexTextures;\n\n\tvar shaderIDs = {\n\t\tMeshDepthMaterial: 'depth',\n\t\tMeshDistanceMaterial: 'distanceRGBA',\n\t\tMeshNormalMaterial: 'normal',\n\t\tMeshBasicMaterial: 'basic',\n\t\tMeshLambertMaterial: 'lambert',\n\t\tMeshPhongMaterial: 'phong',\n\t\tMeshToonMaterial: 'toon',\n\t\tMeshStandardMaterial: 'physical',\n\t\tMeshPhysicalMaterial: 'physical',\n\t\tMeshMatcapMaterial: 'matcap',\n\t\tLineBasicMaterial: 'basic',\n\t\tLineDashedMaterial: 'dashed',\n\t\tPointsMaterial: 'points',\n\t\tShadowMaterial: 'shadow',\n\t\tSpriteMaterial: 'sprite'\n\t};\n\n\tvar parameterNames = [\n\t\t\"precision\", \"isWebGL2\", \"supportsVertexTextures\", \"outputEncoding\", \"instancing\",\n\t\t\"map\", \"mapEncoding\", \"matcap\", \"matcapEncoding\", \"envMap\", \"envMapMode\", \"envMapEncoding\", \"envMapCubeUV\",\n\t\t\"lightMap\", \"lightMapEncoding\", \"aoMap\", \"emissiveMap\", \"emissiveMapEncoding\", \"bumpMap\", \"normalMap\", \"objectSpaceNormalMap\", \"tangentSpaceNormalMap\", \"clearcoatMap\", \"clearcoatRoughnessMap\", \"clearcoatNormalMap\", \"displacementMap\", \"specularMap\",\n\t\t\"roughnessMap\", \"metalnessMap\", \"gradientMap\",\n\t\t\"alphaMap\", \"combine\", \"vertexColors\", \"vertexTangents\", \"vertexUvs\", \"uvsVertexOnly\", \"fog\", \"useFog\", \"fogExp2\",\n\t\t\"flatShading\", \"sizeAttenuation\", \"logarithmicDepthBuffer\", \"skinning\",\n\t\t\"maxBones\", \"useVertexTexture\", \"morphTargets\", \"morphNormals\",\n\t\t\"maxMorphTargets\", \"maxMorphNormals\", \"premultipliedAlpha\",\n\t\t\"numDirLights\", \"numPointLights\", \"numSpotLights\", \"numHemiLights\", \"numRectAreaLights\",\n\t\t\"numDirLightShadows\", \"numPointLightShadows\", \"numSpotLightShadows\",\n\t\t\"shadowMapEnabled\", \"shadowMapType\", \"toneMapping\", 'physicallyCorrectLights',\n\t\t\"alphaTest\", \"doubleSided\", \"flipSided\", \"numClippingPlanes\", \"numClipIntersection\", \"depthPacking\", \"dithering\",\n\t\t\"sheen\"\n\t];\n\n\tfunction getShaderObject( material, shaderID ) {\n\n\t\tvar shaderobject;\n\n\t\tif ( shaderID ) {\n\n\t\t\tvar shader = ShaderLib[ shaderID ];\n\n\t\t\tshaderobject = {\n\t\t\t\tname: material.type,\n\t\t\t\tuniforms: UniformsUtils.clone( shader.uniforms ),\n\t\t\t\tvertexShader: shader.vertexShader,\n\t\t\t\tfragmentShader: shader.fragmentShader\n\t\t\t};\n\n\t\t} else {\n\n\t\t\tshaderobject = {\n\t\t\t\tname: material.type,\n\t\t\t\tuniforms: material.uniforms,\n\t\t\t\tvertexShader: material.vertexShader,\n\t\t\t\tfragmentShader: material.fragmentShader\n\t\t\t};\n\n\t\t}\n\n\t\treturn shaderobject;\n\n\t}\n\n\tfunction allocateBones( object ) {\n\n\t\tvar skeleton = object.skeleton;\n\t\tvar bones = skeleton.bones;\n\n\t\tif ( floatVertexTextures ) {\n\n\t\t\treturn 1024;\n\n\t\t} else {\n\n\t\t\t// default for when object is not specified\n\t\t\t// ( for example when prebuilding shader to be used with multiple objects )\n\t\t\t//\n\t\t\t//  - leave some extra space for other uniforms\n\t\t\t//  - limit here is ANGLE's 254 max uniform vectors\n\t\t\t//    (up to 54 should be safe)\n\n\t\t\tvar nVertexUniforms = maxVertexUniforms;\n\t\t\tvar nVertexMatrices = Math.floor( ( nVertexUniforms - 20 ) / 4 );\n\n\t\t\tvar maxBones = Math.min( nVertexMatrices, bones.length );\n\n\t\t\tif ( maxBones < bones.length ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Skeleton has ' + bones.length + ' bones. This GPU supports ' + maxBones + '.' );\n\t\t\t\treturn 0;\n\n\t\t\t}\n\n\t\t\treturn maxBones;\n\n\t\t}\n\n\t}\n\n\tfunction getTextureEncodingFromMap( map ) {\n\n\t\tvar encoding;\n\n\t\tif ( ! map ) {\n\n\t\t\tencoding = LinearEncoding;\n\n\t\t} else if ( map.isTexture ) {\n\n\t\t\tencoding = map.encoding;\n\n\t\t} else if ( map.isWebGLRenderTarget ) {\n\n\t\t\tconsole.warn( \"THREE.WebGLPrograms.getTextureEncodingFromMap: don't use render targets as textures. Use their .texture property instead.\" );\n\t\t\tencoding = map.texture.encoding;\n\n\t\t}\n\n\t\treturn encoding;\n\n\t}\n\n\tthis.getParameters = function ( material, lights, shadows, scene, nClipPlanes, nClipIntersection, object ) {\n\n\t\tvar fog = scene.fog;\n\t\tvar environment = material.isMeshStandardMaterial ? scene.environment : null;\n\n\t\tvar envMap = material.envMap || environment;\n\n\t\tvar shaderID = shaderIDs[ material.type ];\n\n\t\t// heuristics to create shader parameters according to lights in the scene\n\t\t// (not to blow over maxLights budget)\n\n\t\tvar maxBones = object.isSkinnedMesh ? allocateBones( object ) : 0;\n\n\t\tif ( material.precision !== null ) {\n\n\t\t\tprecision = capabilities.getMaxPrecision( material.precision );\n\n\t\t\tif ( precision !== material.precision ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLProgram.getParameters:', material.precision, 'not supported, using', precision, 'instead.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar shaderobject = getShaderObject( material, shaderID );\n\t\tmaterial.onBeforeCompile( shaderobject, renderer );\n\n\t\tvar currentRenderTarget = renderer.getRenderTarget();\n\n\t\tvar parameters = {\n\n\t\t\tisWebGL2: isWebGL2,\n\n\t\t\tshaderID: shaderID,\n\t\t\tshaderName: shaderobject.name,\n\n\t\t\tuniforms: shaderobject.uniforms,\n\t\t\tvertexShader: shaderobject.vertexShader,\n\t\t\tfragmentShader: shaderobject.fragmentShader,\n\t\t\tdefines: material.defines,\n\n\t\t\tisRawShaderMaterial: material.isRawShaderMaterial,\n\t\t\tisShaderMaterial: material.isShaderMaterial,\n\n\t\t\tprecision: precision,\n\n\t\t\tinstancing: object.isInstancedMesh === true,\n\n\t\t\tsupportsVertexTextures: vertexTextures,\n\t\t\toutputEncoding: ( currentRenderTarget !== null ) ? getTextureEncodingFromMap( currentRenderTarget.texture ) : renderer.outputEncoding,\n\t\t\tmap: !! material.map,\n\t\t\tmapEncoding: getTextureEncodingFromMap( material.map ),\n\t\t\tmatcap: !! material.matcap,\n\t\t\tmatcapEncoding: getTextureEncodingFromMap( material.matcap ),\n\t\t\tenvMap: !! envMap,\n\t\t\tenvMapMode: envMap && envMap.mapping,\n\t\t\tenvMapEncoding: getTextureEncodingFromMap( envMap ),\n\t\t\tenvMapCubeUV: ( !! envMap ) && ( ( envMap.mapping === CubeUVReflectionMapping ) || ( envMap.mapping === CubeUVRefractionMapping ) ),\n\t\t\tlightMap: !! material.lightMap,\n\t\t\tlightMapEncoding: getTextureEncodingFromMap( material.lightMap ),\n\t\t\taoMap: !! material.aoMap,\n\t\t\temissiveMap: !! material.emissiveMap,\n\t\t\temissiveMapEncoding: getTextureEncodingFromMap( material.emissiveMap ),\n\t\t\tbumpMap: !! material.bumpMap,\n\t\t\tnormalMap: !! material.normalMap,\n\t\t\tobjectSpaceNormalMap: material.normalMapType === ObjectSpaceNormalMap,\n\t\t\ttangentSpaceNormalMap: material.normalMapType === TangentSpaceNormalMap,\n\t\t\tclearcoatMap: !! material.clearcoatMap,\n\t\t\tclearcoatRoughnessMap: !! material.clearcoatRoughnessMap,\n\t\t\tclearcoatNormalMap: !! material.clearcoatNormalMap,\n\t\t\tdisplacementMap: !! material.displacementMap,\n\t\t\troughnessMap: !! material.roughnessMap,\n\t\t\tmetalnessMap: !! material.metalnessMap,\n\t\t\tspecularMap: !! material.specularMap,\n\t\t\talphaMap: !! material.alphaMap,\n\n\t\t\tgradientMap: !! material.gradientMap,\n\n\t\t\tsheen: !! material.sheen,\n\n\t\t\tcombine: material.combine,\n\n\t\t\tvertexTangents: ( material.normalMap && material.vertexTangents ),\n\t\t\tvertexColors: material.vertexColors,\n\t\t\tvertexUvs: !! material.map || !! material.bumpMap || !! material.normalMap || !! material.specularMap || !! material.alphaMap || !! material.emissiveMap || !! material.roughnessMap || !! material.metalnessMap || !! material.clearcoatMap || !! material.clearcoatRoughnessMap || !! material.clearcoatNormalMap || !! material.displacementMap,\n\t\t\tuvsVertexOnly: ! ( !! material.map || !! material.bumpMap || !! material.normalMap || !! material.specularMap || !! material.alphaMap || !! material.emissiveMap || !! material.roughnessMap || !! material.metalnessMap || !! material.clearcoatNormalMap ) && !! material.displacementMap,\n\n\t\t\tfog: !! fog,\n\t\t\tuseFog: material.fog,\n\t\t\tfogExp2: ( fog && fog.isFogExp2 ),\n\n\t\t\tflatShading: material.flatShading,\n\n\t\t\tsizeAttenuation: material.sizeAttenuation,\n\t\t\tlogarithmicDepthBuffer: logarithmicDepthBuffer,\n\n\t\t\tskinning: material.skinning && maxBones > 0,\n\t\t\tmaxBones: maxBones,\n\t\t\tuseVertexTexture: floatVertexTextures,\n\n\t\t\tmorphTargets: material.morphTargets,\n\t\t\tmorphNormals: material.morphNormals,\n\t\t\tmaxMorphTargets: renderer.maxMorphTargets,\n\t\t\tmaxMorphNormals: renderer.maxMorphNormals,\n\n\t\t\tnumDirLights: lights.directional.length,\n\t\t\tnumPointLights: lights.point.length,\n\t\t\tnumSpotLights: lights.spot.length,\n\t\t\tnumRectAreaLights: lights.rectArea.length,\n\t\t\tnumHemiLights: lights.hemi.length,\n\n\t\t\tnumDirLightShadows: lights.directionalShadowMap.length,\n\t\t\tnumPointLightShadows: lights.pointShadowMap.length,\n\t\t\tnumSpotLightShadows: lights.spotShadowMap.length,\n\n\t\t\tnumClippingPlanes: nClipPlanes,\n\t\t\tnumClipIntersection: nClipIntersection,\n\n\t\t\tdithering: material.dithering,\n\n\t\t\tshadowMapEnabled: renderer.shadowMap.enabled && shadows.length > 0,\n\t\t\tshadowMapType: renderer.shadowMap.type,\n\n\t\t\ttoneMapping: material.toneMapped ? renderer.toneMapping : NoToneMapping,\n\t\t\tphysicallyCorrectLights: renderer.physicallyCorrectLights,\n\n\t\t\tpremultipliedAlpha: material.premultipliedAlpha,\n\n\t\t\talphaTest: material.alphaTest,\n\t\t\tdoubleSided: material.side === DoubleSide,\n\t\t\tflipSided: material.side === BackSide,\n\n\t\t\tdepthPacking: ( material.depthPacking !== undefined ) ? material.depthPacking : false,\n\n\t\t\tindex0AttributeName: material.index0AttributeName,\n\n\t\t\textensionDerivatives: material.extensions && material.extensions.derivatives,\n\t\t\textensionFragDepth: material.extensions && material.extensions.fragDepth,\n\t\t\textensionDrawBuffers: material.extensions && material.extensions.drawBuffers,\n\t\t\textensionShaderTextureLOD: material.extensions && material.extensions.shaderTextureLOD,\n\n\t\t\trendererExtensionFragDepth: isWebGL2 || extensions.get( 'EXT_frag_depth' ) !== null,\n\t\t\trendererExtensionDrawBuffers: isWebGL2 || extensions.get( 'WEBGL_draw_buffers' ) !== null,\n\t\t\trendererExtensionShaderTextureLod: isWebGL2 || extensions.get( 'EXT_shader_texture_lod' ) !== null,\n\n\t\t\tonBeforeCompile: material.onBeforeCompile\n\n\t\t};\n\n\t\treturn parameters;\n\n\t};\n\n\tthis.getProgramCacheKey = function ( parameters ) {\n\n\t\tvar array = [];\n\n\t\tif ( parameters.shaderID ) {\n\n\t\t\tarray.push( parameters.shaderID );\n\n\t\t} else {\n\n\t\t\tarray.push( parameters.fragmentShader );\n\t\t\tarray.push( parameters.vertexShader );\n\n\t\t}\n\n\t\tif ( parameters.defines !== undefined ) {\n\n\t\t\tfor ( var name in parameters.defines ) {\n\n\t\t\t\tarray.push( name );\n\t\t\t\tarray.push( parameters.defines[ name ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( parameters.isRawShaderMaterial === undefined ) {\n\n\t\t\tfor ( var i = 0; i < parameterNames.length; i ++ ) {\n\n\t\t\t\tarray.push( parameters[ parameterNames[ i ] ] );\n\n\t\t\t}\n\n\t\t\tarray.push( renderer.outputEncoding );\n\t\t\tarray.push( renderer.gammaFactor );\n\n\t\t}\n\n\t\tarray.push( parameters.onBeforeCompile.toString() );\n\n\t\treturn array.join();\n\n\t};\n\n\tthis.acquireProgram = function ( parameters, cacheKey ) {\n\n\t\tvar program;\n\n\t\t// Check if code has been already compiled\n\t\tfor ( var p = 0, pl = programs.length; p < pl; p ++ ) {\n\n\t\t\tvar preexistingProgram = programs[ p ];\n\n\t\t\tif ( preexistingProgram.cacheKey === cacheKey ) {\n\n\t\t\t\tprogram = preexistingProgram;\n\t\t\t\t++ program.usedTimes;\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( program === undefined ) {\n\n\t\t\tprogram = new WebGLProgram( renderer, cacheKey, parameters );\n\t\t\tprograms.push( program );\n\n\t\t}\n\n\t\treturn program;\n\n\t};\n\n\tthis.releaseProgram = function ( program ) {\n\n\t\tif ( -- program.usedTimes === 0 ) {\n\n\t\t\t// Remove from unordered set\n\t\t\tvar i = programs.indexOf( program );\n\t\t\tprograms[ i ] = programs[ programs.length - 1 ];\n\t\t\tprograms.pop();\n\n\t\t\t// Free WebGL resources\n\t\t\tprogram.destroy();\n\n\t\t}\n\n\t};\n\n\t// Exposed for resource monitoring & error feedback via renderer.info:\n\tthis.programs = programs;\n\n}\n\n\nexport { WebGLPrograms };\n","/**\n * @author fordacious / fordacious.github.io\n */\n\nfunction WebGLProperties() {\n\n\tvar properties = new WeakMap();\n\n\tfunction get( object ) {\n\n\t\tvar map = properties.get( object );\n\n\t\tif ( map === undefined ) {\n\n\t\t\tmap = {};\n\t\t\tproperties.set( object, map );\n\n\t\t}\n\n\t\treturn map;\n\n\t}\n\n\tfunction remove( object ) {\n\n\t\tproperties.delete( object );\n\n\t}\n\n\tfunction update( object, key, value ) {\n\n\t\tproperties.get( object )[ key ] = value;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tproperties = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tremove: remove,\n\t\tupdate: update,\n\t\tdispose: dispose\n\t};\n\n}\n\n\nexport { WebGLProperties };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction painterSortStable( a, b ) {\n\n\tif ( a.groupOrder !== b.groupOrder ) {\n\n\t\treturn a.groupOrder - b.groupOrder;\n\n\t} else if ( a.renderOrder !== b.renderOrder ) {\n\n\t\treturn a.renderOrder - b.renderOrder;\n\n\t} else if ( a.program !== b.program ) {\n\n\t\treturn a.program.id - b.program.id;\n\n\t} else if ( a.material.id !== b.material.id ) {\n\n\t\treturn a.material.id - b.material.id;\n\n\t} else if ( a.z !== b.z ) {\n\n\t\treturn a.z - b.z;\n\n\t} else {\n\n\t\treturn a.id - b.id;\n\n\t}\n\n}\n\nfunction reversePainterSortStable( a, b ) {\n\n\tif ( a.groupOrder !== b.groupOrder ) {\n\n\t\treturn a.groupOrder - b.groupOrder;\n\n\t} else if ( a.renderOrder !== b.renderOrder ) {\n\n\t\treturn a.renderOrder - b.renderOrder;\n\n\t} else if ( a.z !== b.z ) {\n\n\t\treturn b.z - a.z;\n\n\t} else {\n\n\t\treturn a.id - b.id;\n\n\t}\n\n}\n\n\nfunction WebGLRenderList() {\n\n\tvar renderItems = [];\n\tvar renderItemsIndex = 0;\n\n\tvar opaque = [];\n\tvar transparent = [];\n\n\tvar defaultProgram = { id: - 1 };\n\n\tfunction init() {\n\n\t\trenderItemsIndex = 0;\n\n\t\topaque.length = 0;\n\t\ttransparent.length = 0;\n\n\t}\n\n\tfunction getNextRenderItem( object, geometry, material, groupOrder, z, group ) {\n\n\t\tvar renderItem = renderItems[ renderItemsIndex ];\n\n\t\tif ( renderItem === undefined ) {\n\n\t\t\trenderItem = {\n\t\t\t\tid: object.id,\n\t\t\t\tobject: object,\n\t\t\t\tgeometry: geometry,\n\t\t\t\tmaterial: material,\n\t\t\t\tprogram: material.program || defaultProgram,\n\t\t\t\tgroupOrder: groupOrder,\n\t\t\t\trenderOrder: object.renderOrder,\n\t\t\t\tz: z,\n\t\t\t\tgroup: group\n\t\t\t};\n\n\t\t\trenderItems[ renderItemsIndex ] = renderItem;\n\n\t\t} else {\n\n\t\t\trenderItem.id = object.id;\n\t\t\trenderItem.object = object;\n\t\t\trenderItem.geometry = geometry;\n\t\t\trenderItem.material = material;\n\t\t\trenderItem.program = material.program || defaultProgram;\n\t\t\trenderItem.groupOrder = groupOrder;\n\t\t\trenderItem.renderOrder = object.renderOrder;\n\t\t\trenderItem.z = z;\n\t\t\trenderItem.group = group;\n\n\t\t}\n\n\t\trenderItemsIndex ++;\n\n\t\treturn renderItem;\n\n\t}\n\n\tfunction push( object, geometry, material, groupOrder, z, group ) {\n\n\t\tvar renderItem = getNextRenderItem( object, geometry, material, groupOrder, z, group );\n\n\t\t( material.transparent === true ? transparent : opaque ).push( renderItem );\n\n\t}\n\n\tfunction unshift( object, geometry, material, groupOrder, z, group ) {\n\n\t\tvar renderItem = getNextRenderItem( object, geometry, material, groupOrder, z, group );\n\n\t\t( material.transparent === true ? transparent : opaque ).unshift( renderItem );\n\n\t}\n\n\tfunction sort( customOpaqueSort, customTransparentSort ) {\n\n\t\tif ( opaque.length > 1 ) opaque.sort( customOpaqueSort || painterSortStable );\n\t\tif ( transparent.length > 1 ) transparent.sort( customTransparentSort || reversePainterSortStable );\n\n\t}\n\n\tfunction finish() {\n\n\t\t// Clear references from inactive renderItems in the list\n\n\t\tfor ( var i = renderItemsIndex, il = renderItems.length; i < il; i ++ ) {\n\n\t\t\tvar renderItem = renderItems[ i ];\n\n\t\t\tif ( renderItem.id === null ) break;\n\n\t\t\trenderItem.id = null;\n\t\t\trenderItem.object = null;\n\t\t\trenderItem.geometry = null;\n\t\t\trenderItem.material = null;\n\t\t\trenderItem.program = null;\n\t\t\trenderItem.group = null;\n\n\t\t}\n\n\t}\n\n\treturn {\n\t\topaque: opaque,\n\t\ttransparent: transparent,\n\n\t\tinit: init,\n\t\tpush: push,\n\t\tunshift: unshift,\n\t\tfinish: finish,\n\n\t\tsort: sort\n\t};\n\n}\n\nfunction WebGLRenderLists() {\n\n\tvar lists = new WeakMap();\n\n\tfunction onSceneDispose( event ) {\n\n\t\tvar scene = event.target;\n\n\t\tscene.removeEventListener( 'dispose', onSceneDispose );\n\n\t\tlists.delete( scene );\n\n\t}\n\n\tfunction get( scene, camera ) {\n\n\t\tvar cameras = lists.get( scene );\n\t\tvar list;\n\t\tif ( cameras === undefined ) {\n\n\t\t\tlist = new WebGLRenderList();\n\t\t\tlists.set( scene, new WeakMap() );\n\t\t\tlists.get( scene ).set( camera, list );\n\n\t\t\tscene.addEventListener( 'dispose', onSceneDispose );\n\n\t\t} else {\n\n\t\t\tlist = cameras.get( camera );\n\t\t\tif ( list === undefined ) {\n\n\t\t\t\tlist = new WebGLRenderList();\n\t\t\t\tcameras.set( camera, list );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn list;\n\n\t}\n\n\tfunction dispose() {\n\n\t\tlists = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\n\nexport { WebGLRenderLists };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { Color } from '../../math/Color.js';\nimport { Matrix4 } from '../../math/Matrix4.js';\nimport { Vector2 } from '../../math/Vector2.js';\nimport { Vector3 } from '../../math/Vector3.js';\n\nfunction UniformsCache() {\n\n\tvar lights = {};\n\n\treturn {\n\n\t\tget: function ( light ) {\n\n\t\t\tif ( lights[ light.id ] !== undefined ) {\n\n\t\t\t\treturn lights[ light.id ];\n\n\t\t\t}\n\n\t\t\tvar uniforms;\n\n\t\t\tswitch ( light.type ) {\n\n\t\t\t\tcase 'DirectionalLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tcolor: new Color()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'SpotLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tdistance: 0,\n\t\t\t\t\t\tconeCos: 0,\n\t\t\t\t\t\tpenumbraCos: 0,\n\t\t\t\t\t\tdecay: 0\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PointLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tdistance: 0,\n\t\t\t\t\t\tdecay: 0\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'HemisphereLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tdirection: new Vector3(),\n\t\t\t\t\t\tskyColor: new Color(),\n\t\t\t\t\t\tgroundColor: new Color()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'RectAreaLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tcolor: new Color(),\n\t\t\t\t\t\tposition: new Vector3(),\n\t\t\t\t\t\thalfWidth: new Vector3(),\n\t\t\t\t\t\thalfHeight: new Vector3()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t\tlights[ light.id ] = uniforms;\n\n\t\t\treturn uniforms;\n\n\t\t}\n\n\t};\n\n}\n\nfunction ShadowUniformsCache() {\n\n\tvar lights = {};\n\n\treturn {\n\n\t\tget: function ( light ) {\n\n\t\t\tif ( lights[ light.id ] !== undefined ) {\n\n\t\t\t\treturn lights[ light.id ];\n\n\t\t\t}\n\n\t\t\tvar uniforms;\n\n\t\t\tswitch ( light.type ) {\n\n\t\t\t\tcase 'DirectionalLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'SpotLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2()\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'PointLight':\n\t\t\t\t\tuniforms = {\n\t\t\t\t\t\tshadowBias: 0,\n\t\t\t\t\t\tshadowRadius: 1,\n\t\t\t\t\t\tshadowMapSize: new Vector2(),\n\t\t\t\t\t\tshadowCameraNear: 1,\n\t\t\t\t\t\tshadowCameraFar: 1000\n\t\t\t\t\t};\n\t\t\t\t\tbreak;\n\n\t\t\t\t// TODO (abelnation): set RectAreaLight shadow uniforms\n\n\t\t\t}\n\n\t\t\tlights[ light.id ] = uniforms;\n\n\t\t\treturn uniforms;\n\n\t\t}\n\n\t};\n\n}\n\n\n\nvar nextVersion = 0;\n\nfunction shadowCastingLightsFirst( lightA, lightB ) {\n\n\treturn ( lightB.castShadow ? 1 : 0 ) - ( lightA.castShadow ? 1 : 0 );\n\n}\n\nfunction WebGLLights() {\n\n\tvar cache = new UniformsCache();\n\n\tvar shadowCache = ShadowUniformsCache();\n\n\tvar state = {\n\n\t\tversion: 0,\n\n\t\thash: {\n\t\t\tdirectionalLength: - 1,\n\t\t\tpointLength: - 1,\n\t\t\tspotLength: - 1,\n\t\t\trectAreaLength: - 1,\n\t\t\themiLength: - 1,\n\n\t\t\tnumDirectionalShadows: - 1,\n\t\t\tnumPointShadows: - 1,\n\t\t\tnumSpotShadows: - 1\n\t\t},\n\n\t\tambient: [ 0, 0, 0 ],\n\t\tprobe: [],\n\t\tdirectional: [],\n\t\tdirectionalShadow: [],\n\t\tdirectionalShadowMap: [],\n\t\tdirectionalShadowMatrix: [],\n\t\tspot: [],\n\t\tspotShadow: [],\n\t\tspotShadowMap: [],\n\t\tspotShadowMatrix: [],\n\t\trectArea: [],\n\t\tpoint: [],\n\t\tpointShadow: [],\n\t\tpointShadowMap: [],\n\t\tpointShadowMatrix: [],\n\t\themi: []\n\n\t};\n\n\tfor ( var i = 0; i < 9; i ++ ) state.probe.push( new Vector3() );\n\n\tvar vector3 = new Vector3();\n\tvar matrix4 = new Matrix4();\n\tvar matrix42 = new Matrix4();\n\n\tfunction setup( lights, shadows, camera ) {\n\n\t\tvar r = 0, g = 0, b = 0;\n\n\t\tfor ( var i = 0; i < 9; i ++ ) state.probe[ i ].set( 0, 0, 0 );\n\n\t\tvar directionalLength = 0;\n\t\tvar pointLength = 0;\n\t\tvar spotLength = 0;\n\t\tvar rectAreaLength = 0;\n\t\tvar hemiLength = 0;\n\n\t\tvar numDirectionalShadows = 0;\n\t\tvar numPointShadows = 0;\n\t\tvar numSpotShadows = 0;\n\n\t\tvar viewMatrix = camera.matrixWorldInverse;\n\n\t\tlights.sort( shadowCastingLightsFirst );\n\n\t\tfor ( var i = 0, l = lights.length; i < l; i ++ ) {\n\n\t\t\tvar light = lights[ i ];\n\n\t\t\tvar color = light.color;\n\t\t\tvar intensity = light.intensity;\n\t\t\tvar distance = light.distance;\n\n\t\t\tvar shadowMap = ( light.shadow && light.shadow.map ) ? light.shadow.map.texture : null;\n\n\t\t\tif ( light.isAmbientLight ) {\n\n\t\t\t\tr += color.r * intensity;\n\t\t\t\tg += color.g * intensity;\n\t\t\t\tb += color.b * intensity;\n\n\t\t\t} else if ( light.isLightProbe ) {\n\n\t\t\t\tfor ( var j = 0; j < 9; j ++ ) {\n\n\t\t\t\t\tstate.probe[ j ].addScaledVector( light.sh.coefficients[ j ], intensity );\n\n\t\t\t\t}\n\n\t\t\t} else if ( light.isDirectionalLight ) {\n\n\t\t\t\tvar uniforms = cache.get( light );\n\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity );\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tvector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\tuniforms.direction.sub( vector3 );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tvar shadow = light.shadow;\n\n\t\t\t\t\tvar shadowUniforms = shadowCache.get( light );\n\n\t\t\t\t\tshadowUniforms.shadowBias = shadow.bias;\n\t\t\t\t\tshadowUniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tshadowUniforms.shadowMapSize = shadow.mapSize;\n\n\t\t\t\t\tstate.directionalShadow[ directionalLength ] = shadowUniforms;\n\t\t\t\t\tstate.directionalShadowMap[ directionalLength ] = shadowMap;\n\t\t\t\t\tstate.directionalShadowMatrix[ directionalLength ] = light.shadow.matrix;\n\n\t\t\t\t\tnumDirectionalShadows ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.directional[ directionalLength ] = uniforms;\n\n\t\t\t\tdirectionalLength ++;\n\n\t\t\t} else if ( light.isSpotLight ) {\n\n\t\t\t\tvar uniforms = cache.get( light );\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity );\n\t\t\t\tuniforms.distance = distance;\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tvector3.setFromMatrixPosition( light.target.matrixWorld );\n\t\t\t\tuniforms.direction.sub( vector3 );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\n\t\t\t\tuniforms.coneCos = Math.cos( light.angle );\n\t\t\t\tuniforms.penumbraCos = Math.cos( light.angle * ( 1 - light.penumbra ) );\n\t\t\t\tuniforms.decay = light.decay;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tvar shadow = light.shadow;\n\n\t\t\t\t\tvar shadowUniforms = shadowCache.get( light );\n\n\t\t\t\t\tshadowUniforms.shadowBias = shadow.bias;\n\t\t\t\t\tshadowUniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tshadowUniforms.shadowMapSize = shadow.mapSize;\n\n\t\t\t\t\tstate.spotShadow[ spotLength ] = shadowUniforms;\n\t\t\t\t\tstate.spotShadowMap[ spotLength ] = shadowMap;\n\t\t\t\t\tstate.spotShadowMatrix[ spotLength ] = light.shadow.matrix;\n\n\t\t\t\t\tnumSpotShadows ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.spot[ spotLength ] = uniforms;\n\n\t\t\t\tspotLength ++;\n\n\t\t\t} else if ( light.isRectAreaLight ) {\n\n\t\t\t\tvar uniforms = cache.get( light );\n\n\t\t\t\t// (a) intensity is the total visible light emitted\n\t\t\t\t//uniforms.color.copy( color ).multiplyScalar( intensity / ( light.width * light.height * Math.PI ) );\n\n\t\t\t\t// (b) intensity is the brightness of the light\n\t\t\t\tuniforms.color.copy( color ).multiplyScalar( intensity );\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\t// extract local rotation of light to derive width/height half vectors\n\t\t\t\tmatrix42.identity();\n\t\t\t\tmatrix4.copy( light.matrixWorld );\n\t\t\t\tmatrix4.premultiply( viewMatrix );\n\t\t\t\tmatrix42.extractRotation( matrix4 );\n\n\t\t\t\tuniforms.halfWidth.set( light.width * 0.5, 0.0, 0.0 );\n\t\t\t\tuniforms.halfHeight.set( 0.0, light.height * 0.5, 0.0 );\n\n\t\t\t\tuniforms.halfWidth.applyMatrix4( matrix42 );\n\t\t\t\tuniforms.halfHeight.applyMatrix4( matrix42 );\n\n\t\t\t\t// TODO (abelnation): RectAreaLight distance?\n\t\t\t\t// uniforms.distance = distance;\n\n\t\t\t\tstate.rectArea[ rectAreaLength ] = uniforms;\n\n\t\t\t\trectAreaLength ++;\n\n\t\t\t} else if ( light.isPointLight ) {\n\n\t\t\t\tvar uniforms = cache.get( light );\n\n\t\t\t\tuniforms.position.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.position.applyMatrix4( viewMatrix );\n\n\t\t\t\tuniforms.color.copy( light.color ).multiplyScalar( light.intensity );\n\t\t\t\tuniforms.distance = light.distance;\n\t\t\t\tuniforms.decay = light.decay;\n\n\t\t\t\tif ( light.castShadow ) {\n\n\t\t\t\t\tvar shadow = light.shadow;\n\n\t\t\t\t\tvar shadowUniforms = shadowCache.get( light );\n\n\t\t\t\t\tshadowUniforms.shadowBias = shadow.bias;\n\t\t\t\t\tshadowUniforms.shadowRadius = shadow.radius;\n\t\t\t\t\tshadowUniforms.shadowMapSize = shadow.mapSize;\n\t\t\t\t\tshadowUniforms.shadowCameraNear = shadow.camera.near;\n\t\t\t\t\tshadowUniforms.shadowCameraFar = shadow.camera.far;\n\n\t\t\t\t\tstate.pointShadow[ pointLength ] = shadowUniforms;\n\t\t\t\t\tstate.pointShadowMap[ pointLength ] = shadowMap;\n\t\t\t\t\tstate.pointShadowMatrix[ pointLength ] = light.shadow.matrix;\n\n\t\t\t\t\tnumPointShadows ++;\n\n\t\t\t\t}\n\n\t\t\t\tstate.point[ pointLength ] = uniforms;\n\n\t\t\t\tpointLength ++;\n\n\t\t\t} else if ( light.isHemisphereLight ) {\n\n\t\t\t\tvar uniforms = cache.get( light );\n\n\t\t\t\tuniforms.direction.setFromMatrixPosition( light.matrixWorld );\n\t\t\t\tuniforms.direction.transformDirection( viewMatrix );\n\t\t\t\tuniforms.direction.normalize();\n\n\t\t\t\tuniforms.skyColor.copy( light.color ).multiplyScalar( intensity );\n\t\t\t\tuniforms.groundColor.copy( light.groundColor ).multiplyScalar( intensity );\n\n\t\t\t\tstate.hemi[ hemiLength ] = uniforms;\n\n\t\t\t\themiLength ++;\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.ambient[ 0 ] = r;\n\t\tstate.ambient[ 1 ] = g;\n\t\tstate.ambient[ 2 ] = b;\n\n\t\tvar hash = state.hash;\n\n\t\tif ( hash.directionalLength !== directionalLength ||\n\t\t\thash.pointLength !== pointLength ||\n\t\t\thash.spotLength !== spotLength ||\n\t\t\thash.rectAreaLength !== rectAreaLength ||\n\t\t\thash.hemiLength !== hemiLength ||\n\t\t\thash.numDirectionalShadows !== numDirectionalShadows ||\n\t\t\thash.numPointShadows !== numPointShadows ||\n\t\t\thash.numSpotShadows !== numSpotShadows ) {\n\n\t\t\tstate.directional.length = directionalLength;\n\t\t\tstate.spot.length = spotLength;\n\t\t\tstate.rectArea.length = rectAreaLength;\n\t\t\tstate.point.length = pointLength;\n\t\t\tstate.hemi.length = hemiLength;\n\n\t\t\tstate.directionalShadow.length = numDirectionalShadows;\n\t\t\tstate.directionalShadowMap.length = numDirectionalShadows;\n\t\t\tstate.pointShadow.length = numPointShadows;\n\t\t\tstate.pointShadowMap.length = numPointShadows;\n\t\t\tstate.spotShadow.length = numSpotShadows;\n\t\t\tstate.spotShadowMap.length = numSpotShadows;\n\t\t\tstate.directionalShadowMatrix.length = numDirectionalShadows;\n\t\t\tstate.pointShadowMatrix.length = numPointShadows;\n\t\t\tstate.spotShadowMatrix.length = numSpotShadows;\n\n\t\t\thash.directionalLength = directionalLength;\n\t\t\thash.pointLength = pointLength;\n\t\t\thash.spotLength = spotLength;\n\t\t\thash.rectAreaLength = rectAreaLength;\n\t\t\thash.hemiLength = hemiLength;\n\n\t\t\thash.numDirectionalShadows = numDirectionalShadows;\n\t\t\thash.numPointShadows = numPointShadows;\n\t\t\thash.numSpotShadows = numSpotShadows;\n\n\t\t\tstate.version = nextVersion ++;\n\n\t\t}\n\n\t}\n\n\treturn {\n\t\tsetup: setup,\n\t\tstate: state\n\t};\n\n}\n\n\nexport { WebGLLights };\n","/**\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { WebGLLights } from './WebGLLights.js';\n\nfunction WebGLRenderState() {\n\n\tvar lights = new WebGLLights();\n\n\tvar lightsArray = [];\n\tvar shadowsArray = [];\n\n\tfunction init() {\n\n\t\tlightsArray.length = 0;\n\t\tshadowsArray.length = 0;\n\n\t}\n\n\tfunction pushLight( light ) {\n\n\t\tlightsArray.push( light );\n\n\t}\n\n\tfunction pushShadow( shadowLight ) {\n\n\t\tshadowsArray.push( shadowLight );\n\n\t}\n\n\tfunction setupLights( camera ) {\n\n\t\tlights.setup( lightsArray, shadowsArray, camera );\n\n\t}\n\n\tvar state = {\n\t\tlightsArray: lightsArray,\n\t\tshadowsArray: shadowsArray,\n\n\t\tlights: lights\n\t};\n\n\treturn {\n\t\tinit: init,\n\t\tstate: state,\n\t\tsetupLights: setupLights,\n\n\t\tpushLight: pushLight,\n\t\tpushShadow: pushShadow\n\t};\n\n}\n\nfunction WebGLRenderStates() {\n\n\tvar renderStates = new WeakMap();\n\n\tfunction onSceneDispose( event ) {\n\n\t\tvar scene = event.target;\n\n\t\tscene.removeEventListener( 'dispose', onSceneDispose );\n\n\t\trenderStates.delete( scene );\n\n\t}\n\n\tfunction get( scene, camera ) {\n\n\t\tvar renderState;\n\n\t\tif ( renderStates.has( scene ) === false ) {\n\n\t\t\trenderState = new WebGLRenderState();\n\t\t\trenderStates.set( scene, new WeakMap() );\n\t\t\trenderStates.get( scene ).set( camera, renderState );\n\n\t\t\tscene.addEventListener( 'dispose', onSceneDispose );\n\n\t\t} else {\n\n\t\t\tif ( renderStates.get( scene ).has( camera ) === false ) {\n\n\t\t\t\trenderState = new WebGLRenderState();\n\t\t\t\trenderStates.get( scene ).set( camera, renderState );\n\n\t\t\t} else {\n\n\t\t\t\trenderState = renderStates.get( scene ).get( camera );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn renderState;\n\n\t}\n\n\tfunction dispose() {\n\n\t\trenderStates = new WeakMap();\n\n\t}\n\n\treturn {\n\t\tget: get,\n\t\tdispose: dispose\n\t};\n\n}\n\n\nexport { WebGLRenderStates };\n","/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { FrontSide, BackSide, DoubleSide, RGBAFormat, NearestFilter, LinearFilter, PCFShadowMap, VSMShadowMap, RGBADepthPacking, NoBlending } from '../../constants.js';\nimport { WebGLRenderTarget } from '../WebGLRenderTarget.js';\nimport { MeshDepthMaterial } from '../../materials/MeshDepthMaterial.js';\nimport { MeshDistanceMaterial } from '../../materials/MeshDistanceMaterial.js';\nimport { ShaderMaterial } from '../../materials/ShaderMaterial.js';\nimport { BufferAttribute } from '../../core/BufferAttribute.js';\nimport { BufferGeometry } from '../../core/BufferGeometry.js';\nimport { Mesh } from '../../objects/Mesh.js';\nimport { Vector4 } from '../../math/Vector4.js';\nimport { Vector2 } from '../../math/Vector2.js';\nimport { Frustum } from '../../math/Frustum.js';\n\nimport vsm_frag from '../shaders/ShaderLib/vsm_frag.glsl.js';\nimport vsm_vert from '../shaders/ShaderLib/vsm_vert.glsl.js';\n\nfunction WebGLShadowMap( _renderer, _objects, maxTextureSize ) {\n\n\tvar _frustum = new Frustum(),\n\n\t\t_shadowMapSize = new Vector2(),\n\t\t_viewportSize = new Vector2(),\n\n\t\t_viewport = new Vector4(),\n\n\t\t_depthMaterials = [],\n\t\t_distanceMaterials = [],\n\n\t\t_materialCache = {};\n\n\tvar shadowSide = { 0: BackSide, 1: FrontSide, 2: DoubleSide };\n\n\tvar shadowMaterialVertical = new ShaderMaterial( {\n\n\t\tdefines: {\n\t\t\tSAMPLE_RATE: 2.0 / 8.0,\n\t\t\tHALF_SAMPLE_RATE: 1.0 / 8.0\n\t\t},\n\n\t\tuniforms: {\n\t\t\tshadow_pass: { value: null },\n\t\t\tresolution: { value: new Vector2() },\n\t\t\tradius: { value: 4.0 }\n\t\t},\n\n\t\tvertexShader: vsm_vert,\n\n\t\tfragmentShader: vsm_frag\n\n\t} );\n\n\tvar shadowMaterialHorizonal = shadowMaterialVertical.clone();\n\tshadowMaterialHorizonal.defines.HORIZONAL_PASS = 1;\n\n\tvar fullScreenTri = new BufferGeometry();\n\tfullScreenTri.setAttribute(\n\t\t\"position\",\n\t\tnew BufferAttribute(\n\t\t\tnew Float32Array( [ - 1, - 1, 0.5, 3, - 1, 0.5, - 1, 3, 0.5 ] ),\n\t\t\t3\n\t\t)\n\t);\n\n\tvar fullScreenMesh = new Mesh( fullScreenTri, shadowMaterialVertical );\n\n\tvar scope = this;\n\n\tthis.enabled = false;\n\n\tthis.autoUpdate = true;\n\tthis.needsUpdate = false;\n\n\tthis.type = PCFShadowMap;\n\n\tthis.render = function ( lights, scene, camera ) {\n\n\t\tif ( scope.enabled === false ) return;\n\t\tif ( scope.autoUpdate === false && scope.needsUpdate === false ) return;\n\n\t\tif ( lights.length === 0 ) return;\n\n\t\tvar currentRenderTarget = _renderer.getRenderTarget();\n\t\tvar activeCubeFace = _renderer.getActiveCubeFace();\n\t\tvar activeMipmapLevel = _renderer.getActiveMipmapLevel();\n\n\t\tvar _state = _renderer.state;\n\n\t\t// Set GL state for depth map.\n\t\t_state.setBlending( NoBlending );\n\t\t_state.buffers.color.setClear( 1, 1, 1, 1 );\n\t\t_state.buffers.depth.setTest( true );\n\t\t_state.setScissorTest( false );\n\n\t\t// render depth map\n\n\t\tfor ( var i = 0, il = lights.length; i < il; i ++ ) {\n\n\t\t\tvar light = lights[ i ];\n\t\t\tvar shadow = light.shadow;\n\n\t\t\tif ( shadow === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLShadowMap:', light, 'has no shadow.' );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\t_shadowMapSize.copy( shadow.mapSize );\n\n\t\t\tvar shadowFrameExtents = shadow.getFrameExtents();\n\n\t\t\t_shadowMapSize.multiply( shadowFrameExtents );\n\n\t\t\t_viewportSize.copy( shadow.mapSize );\n\n\t\t\tif ( _shadowMapSize.x > maxTextureSize || _shadowMapSize.y > maxTextureSize ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLShadowMap:', light, 'has shadow exceeding max texture size, reducing' );\n\n\t\t\t\tif ( _shadowMapSize.x > maxTextureSize ) {\n\n\t\t\t\t\t_viewportSize.x = Math.floor( maxTextureSize / shadowFrameExtents.x );\n\t\t\t\t\t_shadowMapSize.x = _viewportSize.x * shadowFrameExtents.x;\n\t\t\t\t\tshadow.mapSize.x = _viewportSize.x;\n\n\t\t\t\t}\n\n\t\t\t\tif ( _shadowMapSize.y > maxTextureSize ) {\n\n\t\t\t\t\t_viewportSize.y = Math.floor( maxTextureSize / shadowFrameExtents.y );\n\t\t\t\t\t_shadowMapSize.y = _viewportSize.y * shadowFrameExtents.y;\n\t\t\t\t\tshadow.mapSize.y = _viewportSize.y;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( shadow.map === null && ! shadow.isPointLightShadow && this.type === VSMShadowMap ) {\n\n\t\t\t\tvar pars = { minFilter: LinearFilter, magFilter: LinearFilter, format: RGBAFormat };\n\n\t\t\t\tshadow.map = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\n\t\t\t\tshadow.map.texture.name = light.name + \".shadowMap\";\n\n\t\t\t\tshadow.mapPass = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\n\n\t\t\t\tshadow.camera.updateProjectionMatrix();\n\n\t\t\t}\n\n\t\t\tif ( shadow.map === null ) {\n\n\t\t\t\tvar pars = { minFilter: NearestFilter, magFilter: NearestFilter, format: RGBAFormat };\n\n\t\t\t\tshadow.map = new WebGLRenderTarget( _shadowMapSize.x, _shadowMapSize.y, pars );\n\t\t\t\tshadow.map.texture.name = light.name + \".shadowMap\";\n\n\t\t\t\tshadow.camera.updateProjectionMatrix();\n\n\t\t\t}\n\n\t\t\t_renderer.setRenderTarget( shadow.map );\n\t\t\t_renderer.clear();\n\n\t\t\tvar viewportCount = shadow.getViewportCount();\n\n\t\t\tfor ( var vp = 0; vp < viewportCount; vp ++ ) {\n\n\t\t\t\tvar viewport = shadow.getViewport( vp );\n\n\t\t\t\t_viewport.set(\n\t\t\t\t\t_viewportSize.x * viewport.x,\n\t\t\t\t\t_viewportSize.y * viewport.y,\n\t\t\t\t\t_viewportSize.x * viewport.z,\n\t\t\t\t\t_viewportSize.y * viewport.w\n\t\t\t\t);\n\n\t\t\t\t_state.viewport( _viewport );\n\n\t\t\t\tshadow.updateMatrices( light, vp );\n\n\t\t\t\t_frustum = shadow.getFrustum();\n\n\t\t\t\trenderObject( scene, camera, shadow.camera, light, this.type );\n\n\t\t\t}\n\n\t\t\t// do blur pass for VSM\n\n\t\t\tif ( ! shadow.isPointLightShadow && this.type === VSMShadowMap ) {\n\n\t\t\t\tVSMPass( shadow, camera );\n\n\t\t\t}\n\n\t\t}\n\n\t\tscope.needsUpdate = false;\n\n\t\t_renderer.setRenderTarget( currentRenderTarget, activeCubeFace, activeMipmapLevel );\n\n\t};\n\n\tfunction VSMPass( shadow, camera ) {\n\n\t\tvar geometry = _objects.update( fullScreenMesh );\n\n\t\t// vertical pass\n\n\t\tshadowMaterialVertical.uniforms.shadow_pass.value = shadow.map.texture;\n\t\tshadowMaterialVertical.uniforms.resolution.value = shadow.mapSize;\n\t\tshadowMaterialVertical.uniforms.radius.value = shadow.radius;\n\t\t_renderer.setRenderTarget( shadow.mapPass );\n\t\t_renderer.clear();\n\t\t_renderer.renderBufferDirect( camera, null, geometry, shadowMaterialVertical, fullScreenMesh, null );\n\n\t\t// horizonal pass\n\n\t\tshadowMaterialHorizonal.uniforms.shadow_pass.value = shadow.mapPass.texture;\n\t\tshadowMaterialHorizonal.uniforms.resolution.value = shadow.mapSize;\n\t\tshadowMaterialHorizonal.uniforms.radius.value = shadow.radius;\n\t\t_renderer.setRenderTarget( shadow.map );\n\t\t_renderer.clear();\n\t\t_renderer.renderBufferDirect( camera, null, geometry, shadowMaterialHorizonal, fullScreenMesh, null );\n\n\t}\n\n\tfunction getDepthMaterialVariant( useMorphing, useSkinning, useInstancing ) {\n\n\t\tvar index = useMorphing << 0 | useSkinning << 1 | useInstancing << 2;\n\n\t\tvar material = _depthMaterials[ index ];\n\n\t\tif ( material === undefined ) {\n\n\t\t\tmaterial = new MeshDepthMaterial( {\n\n\t\t\t\tdepthPacking: RGBADepthPacking,\n\n\t\t\t\tmorphTargets: useMorphing,\n\t\t\t\tskinning: useSkinning\n\n\t\t\t} );\n\n\t\t\t_depthMaterials[ index ] = material;\n\n\t\t}\n\n\t\treturn material;\n\n\t}\n\n\tfunction getDistanceMaterialVariant( useMorphing, useSkinning, useInstancing ) {\n\n\t\tvar index = useMorphing << 0 | useSkinning << 1 | useInstancing << 2;\n\n\t\tvar material = _distanceMaterials[ index ];\n\n\t\tif ( material === undefined ) {\n\n\t\t\tmaterial = new MeshDistanceMaterial( {\n\n\t\t\t\tmorphTargets: useMorphing,\n\t\t\t\tskinning: useSkinning\n\n\t\t\t} );\n\n\t\t\t_distanceMaterials[ index ] = material;\n\n\t\t}\n\n\t\treturn material;\n\n\t}\n\n\tfunction getDepthMaterial( object, material, light, shadowCameraNear, shadowCameraFar, type ) {\n\n\t\tvar geometry = object.geometry;\n\n\t\tvar result = null;\n\n\t\tvar getMaterialVariant = getDepthMaterialVariant;\n\t\tvar customMaterial = object.customDepthMaterial;\n\n\t\tif ( light.isPointLight === true ) {\n\n\t\t\tgetMaterialVariant = getDistanceMaterialVariant;\n\t\t\tcustomMaterial = object.customDistanceMaterial;\n\n\t\t}\n\n\t\tif ( customMaterial === undefined ) {\n\n\t\t\tvar useMorphing = false;\n\n\t\t\tif ( material.morphTargets === true ) {\n\n\t\t\t\tif ( geometry.isBufferGeometry === true ) {\n\n\t\t\t\t\tuseMorphing = geometry.morphAttributes && geometry.morphAttributes.position && geometry.morphAttributes.position.length > 0;\n\n\t\t\t\t} else if ( geometry.isGeometry === true ) {\n\n\t\t\t\t\tuseMorphing = geometry.morphTargets && geometry.morphTargets.length > 0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar useSkinning = false;\n\n\t\t\tif ( object.isSkinnedMesh === true ) {\n\n\t\t\t\tif ( material.skinning === true ) {\n\n\t\t\t\t\tuseSkinning = true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLShadowMap: THREE.SkinnedMesh with material.skinning set to false:', object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar useInstancing = object.isInstancedMesh === true;\n\n\t\t\tresult = getMaterialVariant( useMorphing, useSkinning, useInstancing );\n\n\t\t} else {\n\n\t\t\tresult = customMaterial;\n\n\t\t}\n\n\t\tif ( _renderer.localClippingEnabled &&\n\t\t\t\tmaterial.clipShadows === true &&\n\t\t\t\tmaterial.clippingPlanes.length !== 0 ) {\n\n\t\t\t// in this case we need a unique material instance reflecting the\n\t\t\t// appropriate state\n\n\t\t\tvar keyA = result.uuid, keyB = material.uuid;\n\n\t\t\tvar materialsForVariant = _materialCache[ keyA ];\n\n\t\t\tif ( materialsForVariant === undefined ) {\n\n\t\t\t\tmaterialsForVariant = {};\n\t\t\t\t_materialCache[ keyA ] = materialsForVariant;\n\n\t\t\t}\n\n\t\t\tvar cachedMaterial = materialsForVariant[ keyB ];\n\n\t\t\tif ( cachedMaterial === undefined ) {\n\n\t\t\t\tcachedMaterial = result.clone();\n\t\t\t\tmaterialsForVariant[ keyB ] = cachedMaterial;\n\n\t\t\t}\n\n\t\t\tresult = cachedMaterial;\n\n\t\t}\n\n\t\tresult.visible = material.visible;\n\t\tresult.wireframe = material.wireframe;\n\n\t\tif ( type === VSMShadowMap ) {\n\n\t\t\tresult.side = ( material.shadowSide !== null ) ? material.shadowSide : material.side;\n\n\t\t} else {\n\n\t\t\tresult.side = ( material.shadowSide !== null ) ? material.shadowSide : shadowSide[ material.side ];\n\n\t\t}\n\n\t\tresult.clipShadows = material.clipShadows;\n\t\tresult.clippingPlanes = material.clippingPlanes;\n\t\tresult.clipIntersection = material.clipIntersection;\n\n\t\tresult.wireframeLinewidth = material.wireframeLinewidth;\n\t\tresult.linewidth = material.linewidth;\n\n\t\tif ( light.isPointLight === true && result.isMeshDistanceMaterial === true ) {\n\n\t\t\tresult.referencePosition.setFromMatrixPosition( light.matrixWorld );\n\t\t\tresult.nearDistance = shadowCameraNear;\n\t\t\tresult.farDistance = shadowCameraFar;\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\tfunction renderObject( object, camera, shadowCamera, light, type ) {\n\n\t\tif ( object.visible === false ) return;\n\n\t\tvar visible = object.layers.test( camera.layers );\n\n\t\tif ( visible && ( object.isMesh || object.isLine || object.isPoints ) ) {\n\n\t\t\tif ( ( object.castShadow || ( object.receiveShadow && type === VSMShadowMap ) ) && ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) ) {\n\n\t\t\t\tobject.modelViewMatrix.multiplyMatrices( shadowCamera.matrixWorldInverse, object.matrixWorld );\n\n\t\t\t\tvar geometry = _objects.update( object );\n\t\t\t\tvar material = object.material;\n\n\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\tvar groups = geometry.groups;\n\n\t\t\t\t\tfor ( var k = 0, kl = groups.length; k < kl; k ++ ) {\n\n\t\t\t\t\t\tvar group = groups[ k ];\n\t\t\t\t\t\tvar groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\tif ( groupMaterial && groupMaterial.visible ) {\n\n\t\t\t\t\t\t\tvar depthMaterial = getDepthMaterial( object, groupMaterial, light, shadowCamera.near, shadowCamera.far, type );\n\n\t\t\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, group );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( material.visible ) {\n\n\t\t\t\t\tvar depthMaterial = getDepthMaterial( object, material, light, shadowCamera.near, shadowCamera.far, type );\n\n\t\t\t\t\t_renderer.renderBufferDirect( shadowCamera, null, geometry, depthMaterial, object, null );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar children = object.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\trenderObject( children[ i ], camera, shadowCamera, light, type );\n\n\t\t}\n\n\t}\n\n}\n\n\nexport { WebGLShadowMap };\n","export default /* glsl */`\n\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}\n\n`;\n","export default /* glsl */`\nuniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n\n#include <packing>\n\nvoid main() {\n\n  float mean = 0.0;\n  float squared_mean = 0.0;\n\n\t// This seems totally useless but it's a crazy work around for a Adreno compiler bug\n\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy  ) / resolution ) );\n\n  for ( float i = -1.0; i < 1.0 ; i += SAMPLE_RATE) {\n\n    #ifdef HORIZONAL_PASS\n\n      vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( i, 0.0 ) * radius ) / resolution ) );\n      mean += distribution.x;\n      squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\n    #else\n\n      float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0,  i )  * radius ) / resolution ) );\n      mean += depth;\n      squared_mean += depth * depth;\n\n    #endif\n\n  }\n\n  mean = mean * HALF_SAMPLE_RATE;\n  squared_mean = squared_mean * HALF_SAMPLE_RATE;\n\n  float std_dev = sqrt( squared_mean - mean * mean );\n\n  gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n\n}\n`;\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { NotEqualDepth, GreaterDepth, GreaterEqualDepth, EqualDepth, LessEqualDepth, LessDepth, AlwaysDepth, NeverDepth, CullFaceFront, CullFaceBack, CullFaceNone, DoubleSide, BackSide, CustomBlending, MultiplyBlending, SubtractiveBlending, AdditiveBlending, NoBlending, NormalBlending, AddEquation, SubtractEquation, ReverseSubtractEquation, MinEquation, MaxEquation, ZeroFactor, OneFactor, SrcColorFactor, SrcAlphaFactor, SrcAlphaSaturateFactor, DstColorFactor, DstAlphaFactor, OneMinusSrcColorFactor, OneMinusSrcAlphaFactor, OneMinusDstColorFactor, OneMinusDstAlphaFactor } from '../../constants.js';\nimport { Vector4 } from '../../math/Vector4.js';\n\nfunction WebGLState( gl, extensions, capabilities ) {\n\n\tvar isWebGL2 = capabilities.isWebGL2;\n\n\tfunction ColorBuffer() {\n\n\t\tvar locked = false;\n\n\t\tvar color = new Vector4();\n\t\tvar currentColorMask = null;\n\t\tvar currentColorClear = new Vector4( 0, 0, 0, 0 );\n\n\t\treturn {\n\n\t\t\tsetMask: function ( colorMask ) {\n\n\t\t\t\tif ( currentColorMask !== colorMask && ! locked ) {\n\n\t\t\t\t\tgl.colorMask( colorMask, colorMask, colorMask, colorMask );\n\t\t\t\t\tcurrentColorMask = colorMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( r, g, b, a, premultipliedAlpha ) {\n\n\t\t\t\tif ( premultipliedAlpha === true ) {\n\n\t\t\t\t\tr *= a; g *= a; b *= a;\n\n\t\t\t\t}\n\n\t\t\t\tcolor.set( r, g, b, a );\n\n\t\t\t\tif ( currentColorClear.equals( color ) === false ) {\n\n\t\t\t\t\tgl.clearColor( r, g, b, a );\n\t\t\t\t\tcurrentColorClear.copy( color );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentColorMask = null;\n\t\t\t\tcurrentColorClear.set( - 1, 0, 0, 0 ); // set to invalid state\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tfunction DepthBuffer() {\n\n\t\tvar locked = false;\n\n\t\tvar currentDepthMask = null;\n\t\tvar currentDepthFunc = null;\n\t\tvar currentDepthClear = null;\n\n\t\treturn {\n\n\t\t\tsetTest: function ( depthTest ) {\n\n\t\t\t\tif ( depthTest ) {\n\n\t\t\t\t\tenable( gl.DEPTH_TEST );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tdisable( gl.DEPTH_TEST );\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetMask: function ( depthMask ) {\n\n\t\t\t\tif ( currentDepthMask !== depthMask && ! locked ) {\n\n\t\t\t\t\tgl.depthMask( depthMask );\n\t\t\t\t\tcurrentDepthMask = depthMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetFunc: function ( depthFunc ) {\n\n\t\t\t\tif ( currentDepthFunc !== depthFunc ) {\n\n\t\t\t\t\tif ( depthFunc ) {\n\n\t\t\t\t\t\tswitch ( depthFunc ) {\n\n\t\t\t\t\t\t\tcase NeverDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.NEVER );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase AlwaysDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.ALWAYS );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase LessDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.LESS );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase LessEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase EqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.EQUAL );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase GreaterEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.GEQUAL );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase GreaterDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.GREATER );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase NotEqualDepth:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.NOTEQUAL );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\n\t\t\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tgl.depthFunc( gl.LEQUAL );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcurrentDepthFunc = depthFunc;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( depth ) {\n\n\t\t\t\tif ( currentDepthClear !== depth ) {\n\n\t\t\t\t\tgl.clearDepth( depth );\n\t\t\t\t\tcurrentDepthClear = depth;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentDepthMask = null;\n\t\t\t\tcurrentDepthFunc = null;\n\t\t\t\tcurrentDepthClear = null;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\tfunction StencilBuffer() {\n\n\t\tvar locked = false;\n\n\t\tvar currentStencilMask = null;\n\t\tvar currentStencilFunc = null;\n\t\tvar currentStencilRef = null;\n\t\tvar currentStencilFuncMask = null;\n\t\tvar currentStencilFail = null;\n\t\tvar currentStencilZFail = null;\n\t\tvar currentStencilZPass = null;\n\t\tvar currentStencilClear = null;\n\n\t\treturn {\n\n\t\t\tsetTest: function ( stencilTest ) {\n\n\t\t\t\tif ( ! locked ) {\n\n\t\t\t\t\tif ( stencilTest ) {\n\n\t\t\t\t\t\tenable( gl.STENCIL_TEST );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tdisable( gl.STENCIL_TEST );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetMask: function ( stencilMask ) {\n\n\t\t\t\tif ( currentStencilMask !== stencilMask && ! locked ) {\n\n\t\t\t\t\tgl.stencilMask( stencilMask );\n\t\t\t\t\tcurrentStencilMask = stencilMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetFunc: function ( stencilFunc, stencilRef, stencilMask ) {\n\n\t\t\t\tif ( currentStencilFunc !== stencilFunc ||\n\t\t\t\t     currentStencilRef \t!== stencilRef \t||\n\t\t\t\t     currentStencilFuncMask !== stencilMask ) {\n\n\t\t\t\t\tgl.stencilFunc( stencilFunc, stencilRef, stencilMask );\n\n\t\t\t\t\tcurrentStencilFunc = stencilFunc;\n\t\t\t\t\tcurrentStencilRef = stencilRef;\n\t\t\t\t\tcurrentStencilFuncMask = stencilMask;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetOp: function ( stencilFail, stencilZFail, stencilZPass ) {\n\n\t\t\t\tif ( currentStencilFail\t !== stencilFail \t||\n\t\t\t\t     currentStencilZFail !== stencilZFail ||\n\t\t\t\t     currentStencilZPass !== stencilZPass ) {\n\n\t\t\t\t\tgl.stencilOp( stencilFail, stencilZFail, stencilZPass );\n\n\t\t\t\t\tcurrentStencilFail = stencilFail;\n\t\t\t\t\tcurrentStencilZFail = stencilZFail;\n\t\t\t\t\tcurrentStencilZPass = stencilZPass;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\tsetLocked: function ( lock ) {\n\n\t\t\t\tlocked = lock;\n\n\t\t\t},\n\n\t\t\tsetClear: function ( stencil ) {\n\n\t\t\t\tif ( currentStencilClear !== stencil ) {\n\n\t\t\t\t\tgl.clearStencil( stencil );\n\t\t\t\t\tcurrentStencilClear = stencil;\n\n\t\t\t\t}\n\n\t\t\t},\n\n\t\t\treset: function () {\n\n\t\t\t\tlocked = false;\n\n\t\t\t\tcurrentStencilMask = null;\n\t\t\t\tcurrentStencilFunc = null;\n\t\t\t\tcurrentStencilRef = null;\n\t\t\t\tcurrentStencilFuncMask = null;\n\t\t\t\tcurrentStencilFail = null;\n\t\t\t\tcurrentStencilZFail = null;\n\t\t\t\tcurrentStencilZPass = null;\n\t\t\t\tcurrentStencilClear = null;\n\n\t\t\t}\n\n\t\t};\n\n\t}\n\n\t//\n\n\tvar colorBuffer = new ColorBuffer();\n\tvar depthBuffer = new DepthBuffer();\n\tvar stencilBuffer = new StencilBuffer();\n\n\tvar maxVertexAttributes = gl.getParameter( gl.MAX_VERTEX_ATTRIBS );\n\tvar newAttributes = new Uint8Array( maxVertexAttributes );\n\tvar enabledAttributes = new Uint8Array( maxVertexAttributes );\n\tvar attributeDivisors = new Uint8Array( maxVertexAttributes );\n\n\tvar enabledCapabilities = {};\n\n\tvar currentProgram = null;\n\n\tvar currentBlendingEnabled = null;\n\tvar currentBlending = null;\n\tvar currentBlendEquation = null;\n\tvar currentBlendSrc = null;\n\tvar currentBlendDst = null;\n\tvar currentBlendEquationAlpha = null;\n\tvar currentBlendSrcAlpha = null;\n\tvar currentBlendDstAlpha = null;\n\tvar currentPremultipledAlpha = false;\n\n\tvar currentFlipSided = null;\n\tvar currentCullFace = null;\n\n\tvar currentLineWidth = null;\n\n\tvar currentPolygonOffsetFactor = null;\n\tvar currentPolygonOffsetUnits = null;\n\n\tvar maxTextures = gl.getParameter( gl.MAX_COMBINED_TEXTURE_IMAGE_UNITS );\n\n\tvar lineWidthAvailable = false;\n\tvar version = 0;\n\tvar glVersion = gl.getParameter( gl.VERSION );\n\n\tif ( glVersion.indexOf( 'WebGL' ) !== - 1 ) {\n\n\t\tversion = parseFloat( /^WebGL\\ ([0-9])/.exec( glVersion )[ 1 ] );\n\t\tlineWidthAvailable = ( version >= 1.0 );\n\n\t} else if ( glVersion.indexOf( 'OpenGL ES' ) !== - 1 ) {\n\n\t\tversion = parseFloat( /^OpenGL\\ ES\\ ([0-9])/.exec( glVersion )[ 1 ] );\n\t\tlineWidthAvailable = ( version >= 2.0 );\n\n\t}\n\n\tvar currentTextureSlot = null;\n\tvar currentBoundTextures = {};\n\n\tvar currentScissor = new Vector4();\n\tvar currentViewport = new Vector4();\n\n\tfunction createTexture( type, target, count ) {\n\n\t\tvar data = new Uint8Array( 4 ); // 4 is required to match default unpack alignment of 4.\n\t\tvar texture = gl.createTexture();\n\n\t\tgl.bindTexture( type, texture );\n\t\tgl.texParameteri( type, gl.TEXTURE_MIN_FILTER, gl.NEAREST );\n\t\tgl.texParameteri( type, gl.TEXTURE_MAG_FILTER, gl.NEAREST );\n\n\t\tfor ( var i = 0; i < count; i ++ ) {\n\n\t\t\tgl.texImage2D( target + i, 0, gl.RGBA, 1, 1, 0, gl.RGBA, gl.UNSIGNED_BYTE, data );\n\n\t\t}\n\n\t\treturn texture;\n\n\t}\n\n\tvar emptyTextures = {};\n\temptyTextures[ gl.TEXTURE_2D ] = createTexture( gl.TEXTURE_2D, gl.TEXTURE_2D, 1 );\n\temptyTextures[ gl.TEXTURE_CUBE_MAP ] = createTexture( gl.TEXTURE_CUBE_MAP, gl.TEXTURE_CUBE_MAP_POSITIVE_X, 6 );\n\n\t// init\n\n\tcolorBuffer.setClear( 0, 0, 0, 1 );\n\tdepthBuffer.setClear( 1 );\n\tstencilBuffer.setClear( 0 );\n\n\tenable( gl.DEPTH_TEST );\n\tdepthBuffer.setFunc( LessEqualDepth );\n\n\tsetFlipSided( false );\n\tsetCullFace( CullFaceBack );\n\tenable( gl.CULL_FACE );\n\n\tsetBlending( NoBlending );\n\n\t//\n\n\tfunction initAttributes() {\n\n\t\tfor ( var i = 0, l = newAttributes.length; i < l; i ++ ) {\n\n\t\t\tnewAttributes[ i ] = 0;\n\n\t\t}\n\n\t}\n\n\tfunction enableAttribute( attribute ) {\n\n\t\tenableAttributeAndDivisor( attribute, 0 );\n\n\t}\n\n\tfunction enableAttributeAndDivisor( attribute, meshPerAttribute ) {\n\n\t\tnewAttributes[ attribute ] = 1;\n\n\t\tif ( enabledAttributes[ attribute ] === 0 ) {\n\n\t\t\tgl.enableVertexAttribArray( attribute );\n\t\t\tenabledAttributes[ attribute ] = 1;\n\n\t\t}\n\n\t\tif ( attributeDivisors[ attribute ] !== meshPerAttribute ) {\n\n\t\t\tvar extension = isWebGL2 ? gl : extensions.get( 'ANGLE_instanced_arrays' );\n\n\t\t\textension[ isWebGL2 ? 'vertexAttribDivisor' : 'vertexAttribDivisorANGLE' ]( attribute, meshPerAttribute );\n\t\t\tattributeDivisors[ attribute ] = meshPerAttribute;\n\n\t\t}\n\n\t}\n\n\tfunction disableUnusedAttributes() {\n\n\t\tfor ( var i = 0, l = enabledAttributes.length; i !== l; ++ i ) {\n\n\t\t\tif ( enabledAttributes[ i ] !== newAttributes[ i ] ) {\n\n\t\t\t\tgl.disableVertexAttribArray( i );\n\t\t\t\tenabledAttributes[ i ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction enable( id ) {\n\n\t\tif ( enabledCapabilities[ id ] !== true ) {\n\n\t\t\tgl.enable( id );\n\t\t\tenabledCapabilities[ id ] = true;\n\n\t\t}\n\n\t}\n\n\tfunction disable( id ) {\n\n\t\tif ( enabledCapabilities[ id ] !== false ) {\n\n\t\t\tgl.disable( id );\n\t\t\tenabledCapabilities[ id ] = false;\n\n\t\t}\n\n\t}\n\n\tfunction useProgram( program ) {\n\n\t\tif ( currentProgram !== program ) {\n\n\t\t\tgl.useProgram( program );\n\n\t\t\tcurrentProgram = program;\n\n\t\t\treturn true;\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\tvar equationToGL = {\n\t\t[ AddEquation ]: gl.FUNC_ADD,\n\t\t[ SubtractEquation ]: gl.FUNC_SUBTRACT,\n\t\t[ ReverseSubtractEquation ]: gl.FUNC_REVERSE_SUBTRACT\n\t};\n\n\tif ( isWebGL2 ) {\n\n\t\tequationToGL[ MinEquation ] = gl.MIN;\n\t\tequationToGL[ MaxEquation ] = gl.MAX;\n\n\t} else {\n\n\t\tvar extension = extensions.get( 'EXT_blend_minmax' );\n\n\t\tif ( extension !== null ) {\n\n\t\t\tequationToGL[ MinEquation ] = extension.MIN_EXT;\n\t\t\tequationToGL[ MaxEquation ] = extension.MAX_EXT;\n\n\t\t}\n\n\t}\n\n\tvar factorToGL = {\n\t\t[ ZeroFactor ]: gl.ZERO,\n\t\t[ OneFactor ]: gl.ONE,\n\t\t[ SrcColorFactor ]: gl.SRC_COLOR,\n\t\t[ SrcAlphaFactor ]: gl.SRC_ALPHA,\n\t\t[ SrcAlphaSaturateFactor ]: gl.SRC_ALPHA_SATURATE,\n\t\t[ DstColorFactor ]: gl.DST_COLOR,\n\t\t[ DstAlphaFactor ]: gl.DST_ALPHA,\n\t\t[ OneMinusSrcColorFactor ]: gl.ONE_MINUS_SRC_COLOR,\n\t\t[ OneMinusSrcAlphaFactor ]: gl.ONE_MINUS_SRC_ALPHA,\n\t\t[ OneMinusDstColorFactor ]: gl.ONE_MINUS_DST_COLOR,\n\t\t[ OneMinusDstAlphaFactor ]: gl.ONE_MINUS_DST_ALPHA\n\t};\n\n\tfunction setBlending( blending, blendEquation, blendSrc, blendDst, blendEquationAlpha, blendSrcAlpha, blendDstAlpha, premultipliedAlpha ) {\n\n\t\tif ( blending === NoBlending ) {\n\n\t\t\tif ( currentBlendingEnabled ) {\n\n\t\t\t\tdisable( gl.BLEND );\n\t\t\t\tcurrentBlendingEnabled = false;\n\n\t\t\t}\n\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( ! currentBlendingEnabled ) {\n\n\t\t\tenable( gl.BLEND );\n\t\t\tcurrentBlendingEnabled = true;\n\n\t\t}\n\n\t\tif ( blending !== CustomBlending ) {\n\n\t\t\tif ( blending !== currentBlending || premultipliedAlpha !== currentPremultipledAlpha ) {\n\n\t\t\t\tif ( currentBlendEquation !== AddEquation || currentBlendEquationAlpha !== AddEquation ) {\n\n\t\t\t\t\tgl.blendEquation( gl.FUNC_ADD );\n\n\t\t\t\t\tcurrentBlendEquation = AddEquation;\n\t\t\t\t\tcurrentBlendEquationAlpha = AddEquation;\n\n\t\t\t\t}\n\n\t\t\t\tif ( premultipliedAlpha ) {\n\n\t\t\t\t\tswitch ( blending ) {\n\n\t\t\t\t\t\tcase NormalBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( gl.ONE, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase AdditiveBlending:\n\t\t\t\t\t\t\tgl.blendFunc( gl.ONE, gl.ONE );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase SubtractiveBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( gl.ZERO, gl.ZERO, gl.ONE_MINUS_SRC_COLOR, gl.ONE_MINUS_SRC_ALPHA );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase MultiplyBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( gl.ZERO, gl.SRC_COLOR, gl.ZERO, gl.SRC_ALPHA );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.WebGLState: Invalid blending: ', blending );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tswitch ( blending ) {\n\n\t\t\t\t\t\tcase NormalBlending:\n\t\t\t\t\t\t\tgl.blendFuncSeparate( gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase AdditiveBlending:\n\t\t\t\t\t\t\tgl.blendFunc( gl.SRC_ALPHA, gl.ONE );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase SubtractiveBlending:\n\t\t\t\t\t\t\tgl.blendFunc( gl.ZERO, gl.ONE_MINUS_SRC_COLOR );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tcase MultiplyBlending:\n\t\t\t\t\t\t\tgl.blendFunc( gl.ZERO, gl.SRC_COLOR );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tconsole.error( 'THREE.WebGLState: Invalid blending: ', blending );\n\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tcurrentBlendSrc = null;\n\t\t\t\tcurrentBlendDst = null;\n\t\t\t\tcurrentBlendSrcAlpha = null;\n\t\t\t\tcurrentBlendDstAlpha = null;\n\n\t\t\t\tcurrentBlending = blending;\n\t\t\t\tcurrentPremultipledAlpha = premultipliedAlpha;\n\n\t\t\t}\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t// custom blending\n\n\t\tblendEquationAlpha = blendEquationAlpha || blendEquation;\n\t\tblendSrcAlpha = blendSrcAlpha || blendSrc;\n\t\tblendDstAlpha = blendDstAlpha || blendDst;\n\n\t\tif ( blendEquation !== currentBlendEquation || blendEquationAlpha !== currentBlendEquationAlpha ) {\n\n\t\t\tgl.blendEquationSeparate( equationToGL[ blendEquation ], equationToGL[ blendEquationAlpha ] );\n\n\t\t\tcurrentBlendEquation = blendEquation;\n\t\t\tcurrentBlendEquationAlpha = blendEquationAlpha;\n\n\t\t}\n\n\t\tif ( blendSrc !== currentBlendSrc || blendDst !== currentBlendDst || blendSrcAlpha !== currentBlendSrcAlpha || blendDstAlpha !== currentBlendDstAlpha ) {\n\n\t\t\tgl.blendFuncSeparate( factorToGL[ blendSrc ], factorToGL[ blendDst ], factorToGL[ blendSrcAlpha ], factorToGL[ blendDstAlpha ] );\n\n\t\t\tcurrentBlendSrc = blendSrc;\n\t\t\tcurrentBlendDst = blendDst;\n\t\t\tcurrentBlendSrcAlpha = blendSrcAlpha;\n\t\t\tcurrentBlendDstAlpha = blendDstAlpha;\n\n\t\t}\n\n\t\tcurrentBlending = blending;\n\t\tcurrentPremultipledAlpha = null;\n\n\t}\n\n\tfunction setMaterial( material, frontFaceCW ) {\n\n\t\tmaterial.side === DoubleSide\n\t\t\t? disable( gl.CULL_FACE )\n\t\t\t: enable( gl.CULL_FACE );\n\n\t\tvar flipSided = ( material.side === BackSide );\n\t\tif ( frontFaceCW ) flipSided = ! flipSided;\n\n\t\tsetFlipSided( flipSided );\n\n\t\t( material.blending === NormalBlending && material.transparent === false )\n\t\t\t? setBlending( NoBlending )\n\t\t\t: setBlending( material.blending, material.blendEquation, material.blendSrc, material.blendDst, material.blendEquationAlpha, material.blendSrcAlpha, material.blendDstAlpha, material.premultipliedAlpha );\n\n\t\tdepthBuffer.setFunc( material.depthFunc );\n\t\tdepthBuffer.setTest( material.depthTest );\n\t\tdepthBuffer.setMask( material.depthWrite );\n\t\tcolorBuffer.setMask( material.colorWrite );\n\n\t\tvar stencilWrite = material.stencilWrite;\n\t\tstencilBuffer.setTest( stencilWrite );\n\t\tif ( stencilWrite ) {\n\n\t\t\tstencilBuffer.setMask( material.stencilWriteMask );\n\t\t\tstencilBuffer.setFunc( material.stencilFunc, material.stencilRef, material.stencilFuncMask );\n\t\t\tstencilBuffer.setOp( material.stencilFail, material.stencilZFail, material.stencilZPass );\n\n\t\t}\n\n\t\tsetPolygonOffset( material.polygonOffset, material.polygonOffsetFactor, material.polygonOffsetUnits );\n\n\t}\n\n\t//\n\n\tfunction setFlipSided( flipSided ) {\n\n\t\tif ( currentFlipSided !== flipSided ) {\n\n\t\t\tif ( flipSided ) {\n\n\t\t\t\tgl.frontFace( gl.CW );\n\n\t\t\t} else {\n\n\t\t\t\tgl.frontFace( gl.CCW );\n\n\t\t\t}\n\n\t\t\tcurrentFlipSided = flipSided;\n\n\t\t}\n\n\t}\n\n\tfunction setCullFace( cullFace ) {\n\n\t\tif ( cullFace !== CullFaceNone ) {\n\n\t\t\tenable( gl.CULL_FACE );\n\n\t\t\tif ( cullFace !== currentCullFace ) {\n\n\t\t\t\tif ( cullFace === CullFaceBack ) {\n\n\t\t\t\t\tgl.cullFace( gl.BACK );\n\n\t\t\t\t} else if ( cullFace === CullFaceFront ) {\n\n\t\t\t\t\tgl.cullFace( gl.FRONT );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tgl.cullFace( gl.FRONT_AND_BACK );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tdisable( gl.CULL_FACE );\n\n\t\t}\n\n\t\tcurrentCullFace = cullFace;\n\n\t}\n\n\tfunction setLineWidth( width ) {\n\n\t\tif ( width !== currentLineWidth ) {\n\n\t\t\tif ( lineWidthAvailable ) gl.lineWidth( width );\n\n\t\t\tcurrentLineWidth = width;\n\n\t\t}\n\n\t}\n\n\tfunction setPolygonOffset( polygonOffset, factor, units ) {\n\n\t\tif ( polygonOffset ) {\n\n\t\t\tenable( gl.POLYGON_OFFSET_FILL );\n\n\t\t\tif ( currentPolygonOffsetFactor !== factor || currentPolygonOffsetUnits !== units ) {\n\n\t\t\t\tgl.polygonOffset( factor, units );\n\n\t\t\t\tcurrentPolygonOffsetFactor = factor;\n\t\t\t\tcurrentPolygonOffsetUnits = units;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tdisable( gl.POLYGON_OFFSET_FILL );\n\n\t\t}\n\n\t}\n\n\tfunction setScissorTest( scissorTest ) {\n\n\t\tif ( scissorTest ) {\n\n\t\t\tenable( gl.SCISSOR_TEST );\n\n\t\t} else {\n\n\t\t\tdisable( gl.SCISSOR_TEST );\n\n\t\t}\n\n\t}\n\n\t// texture\n\n\tfunction activeTexture( webglSlot ) {\n\n\t\tif ( webglSlot === undefined ) webglSlot = gl.TEXTURE0 + maxTextures - 1;\n\n\t\tif ( currentTextureSlot !== webglSlot ) {\n\n\t\t\tgl.activeTexture( webglSlot );\n\t\t\tcurrentTextureSlot = webglSlot;\n\n\t\t}\n\n\t}\n\n\tfunction bindTexture( webglType, webglTexture ) {\n\n\t\tif ( currentTextureSlot === null ) {\n\n\t\t\tactiveTexture();\n\n\t\t}\n\n\t\tvar boundTexture = currentBoundTextures[ currentTextureSlot ];\n\n\t\tif ( boundTexture === undefined ) {\n\n\t\t\tboundTexture = { type: undefined, texture: undefined };\n\t\t\tcurrentBoundTextures[ currentTextureSlot ] = boundTexture;\n\n\t\t}\n\n\t\tif ( boundTexture.type !== webglType || boundTexture.texture !== webglTexture ) {\n\n\t\t\tgl.bindTexture( webglType, webglTexture || emptyTextures[ webglType ] );\n\n\t\t\tboundTexture.type = webglType;\n\t\t\tboundTexture.texture = webglTexture;\n\n\t\t}\n\n\t}\n\n\tfunction unbindTexture() {\n\n\t\tvar boundTexture = currentBoundTextures[ currentTextureSlot ];\n\n\t\tif ( boundTexture !== undefined && boundTexture.type !== undefined ) {\n\n\t\t\tgl.bindTexture( boundTexture.type, null );\n\n\t\t\tboundTexture.type = undefined;\n\t\t\tboundTexture.texture = undefined;\n\n\t\t}\n\n\t}\n\n\tfunction compressedTexImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.compressedTexImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texImage2D() {\n\n\t\ttry {\n\n\t\t\tgl.texImage2D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\tfunction texImage3D() {\n\n\t\ttry {\n\n\t\t\tgl.texImage3D.apply( gl, arguments );\n\n\t\t} catch ( error ) {\n\n\t\t\tconsole.error( 'THREE.WebGLState:', error );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction scissor( scissor ) {\n\n\t\tif ( currentScissor.equals( scissor ) === false ) {\n\n\t\t\tgl.scissor( scissor.x, scissor.y, scissor.z, scissor.w );\n\t\t\tcurrentScissor.copy( scissor );\n\n\t\t}\n\n\t}\n\n\tfunction viewport( viewport ) {\n\n\t\tif ( currentViewport.equals( viewport ) === false ) {\n\n\t\t\tgl.viewport( viewport.x, viewport.y, viewport.z, viewport.w );\n\t\t\tcurrentViewport.copy( viewport );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tfunction reset() {\n\n\t\tfor ( var i = 0; i < enabledAttributes.length; i ++ ) {\n\n\t\t\tif ( enabledAttributes[ i ] === 1 ) {\n\n\t\t\t\tgl.disableVertexAttribArray( i );\n\t\t\t\tenabledAttributes[ i ] = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tenabledCapabilities = {};\n\n\t\tcurrentTextureSlot = null;\n\t\tcurrentBoundTextures = {};\n\n\t\tcurrentProgram = null;\n\n\t\tcurrentBlending = null;\n\n\t\tcurrentFlipSided = null;\n\t\tcurrentCullFace = null;\n\n\t\tcolorBuffer.reset();\n\t\tdepthBuffer.reset();\n\t\tstencilBuffer.reset();\n\n\t}\n\n\treturn {\n\n\t\tbuffers: {\n\t\t\tcolor: colorBuffer,\n\t\t\tdepth: depthBuffer,\n\t\t\tstencil: stencilBuffer\n\t\t},\n\n\t\tinitAttributes: initAttributes,\n\t\tenableAttribute: enableAttribute,\n\t\tenableAttributeAndDivisor: enableAttributeAndDivisor,\n\t\tdisableUnusedAttributes: disableUnusedAttributes,\n\t\tenable: enable,\n\t\tdisable: disable,\n\n\t\tuseProgram: useProgram,\n\n\t\tsetBlending: setBlending,\n\t\tsetMaterial: setMaterial,\n\n\t\tsetFlipSided: setFlipSided,\n\t\tsetCullFace: setCullFace,\n\n\t\tsetLineWidth: setLineWidth,\n\t\tsetPolygonOffset: setPolygonOffset,\n\n\t\tsetScissorTest: setScissorTest,\n\n\t\tactiveTexture: activeTexture,\n\t\tbindTexture: bindTexture,\n\t\tunbindTexture: unbindTexture,\n\t\tcompressedTexImage2D: compressedTexImage2D,\n\t\ttexImage2D: texImage2D,\n\t\ttexImage3D: texImage3D,\n\n\t\tscissor: scissor,\n\t\tviewport: viewport,\n\n\t\treset: reset\n\n\t};\n\n}\n\nexport { WebGLState };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { LinearFilter, LinearMipmapLinearFilter, LinearMipmapNearestFilter, NearestFilter, NearestMipmapLinearFilter, NearestMipmapNearestFilter, RGBFormat, RGBAFormat, DepthFormat, DepthStencilFormat, UnsignedShortType, UnsignedIntType, UnsignedInt248Type, FloatType, HalfFloatType, MirroredRepeatWrapping, ClampToEdgeWrapping, RepeatWrapping } from '../../constants.js';\nimport { MathUtils } from '../../math/MathUtils.js';\n\nfunction WebGLTextures( _gl, extensions, state, properties, capabilities, utils, info ) {\n\n\tvar isWebGL2 = capabilities.isWebGL2;\n\tvar maxTextures = capabilities.maxTextures;\n\tvar maxCubemapSize = capabilities.maxCubemapSize;\n\tvar maxTextureSize = capabilities.maxTextureSize;\n\tvar maxSamples = capabilities.maxSamples;\n\n\tvar _videoTextures = new WeakMap();\n\tvar _canvas;\n\n\t// cordova iOS (as of 5.0) still uses UIWebView, which provides OffscreenCanvas,\n\t// also OffscreenCanvas.getContext(\"webgl\"), but not OffscreenCanvas.getContext(\"2d\")!\n\t// Some implementations may only implement OffscreenCanvas partially (e.g. lacking 2d).\n\n\tvar useOffscreenCanvas = false;\n\n\ttry {\n\n\t\tuseOffscreenCanvas = typeof OffscreenCanvas !== 'undefined'\n\t\t\t&& ( new OffscreenCanvas( 1, 1 ).getContext( \"2d\" ) ) !== null;\n\n\t} catch ( err ) {\n\n\t\t// Ignore any errors\n\n\t}\n\n\tfunction createCanvas( width, height ) {\n\n\t\t// Use OffscreenCanvas when available. Specially needed in web workers\n\n\t\treturn useOffscreenCanvas ?\n\t\t\tnew OffscreenCanvas( width, height ) :\n\t\t\tdocument.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\n\t}\n\n\tfunction resizeImage( image, needsPowerOfTwo, needsNewCanvas, maxSize ) {\n\n\t\tvar scale = 1;\n\n\t\t// handle case if texture exceeds max size\n\n\t\tif ( image.width > maxSize || image.height > maxSize ) {\n\n\t\t\tscale = maxSize / Math.max( image.width, image.height );\n\n\t\t}\n\n\t\t// only perform resize if necessary\n\n\t\tif ( scale < 1 || needsPowerOfTwo === true ) {\n\n\t\t\t// only perform resize for certain image types\n\n\t\t\tif ( ( typeof HTMLImageElement !== 'undefined' && image instanceof HTMLImageElement ) ||\n\t\t\t\t( typeof HTMLCanvasElement !== 'undefined' && image instanceof HTMLCanvasElement ) ||\n\t\t\t\t( typeof ImageBitmap !== 'undefined' && image instanceof ImageBitmap ) ) {\n\n\t\t\t\tvar floor = needsPowerOfTwo ? MathUtils.floorPowerOfTwo : Math.floor;\n\n\t\t\t\tvar width = floor( scale * image.width );\n\t\t\t\tvar height = floor( scale * image.height );\n\n\t\t\t\tif ( _canvas === undefined ) _canvas = createCanvas( width, height );\n\n\t\t\t\t// cube textures can't reuse the same canvas\n\n\t\t\t\tvar canvas = needsNewCanvas ? createCanvas( width, height ) : _canvas;\n\n\t\t\t\tcanvas.width = width;\n\t\t\t\tcanvas.height = height;\n\n\t\t\t\tvar context = canvas.getContext( '2d' );\n\t\t\t\tcontext.drawImage( image, 0, 0, width, height );\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture has been resized from (' + image.width + 'x' + image.height + ') to (' + width + 'x' + height + ').' );\n\n\t\t\t\treturn canvas;\n\n\t\t\t} else {\n\n\t\t\t\tif ( 'data' in image ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Image in DataTexture is too big (' + image.width + 'x' + image.height + ').' );\n\n\t\t\t\t}\n\n\t\t\t\treturn image;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn image;\n\n\t}\n\n\tfunction isPowerOfTwo( image ) {\n\n\t\treturn MathUtils.isPowerOfTwo( image.width ) && MathUtils.isPowerOfTwo( image.height );\n\n\t}\n\n\tfunction textureNeedsPowerOfTwo( texture ) {\n\n\t\tif ( isWebGL2 ) return false;\n\n\t\treturn ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) ||\n\t\t\t( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter );\n\n\t}\n\n\tfunction textureNeedsGenerateMipmaps( texture, supportsMips ) {\n\n\t\treturn texture.generateMipmaps && supportsMips &&\n\t\t\ttexture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter;\n\n\t}\n\n\tfunction generateMipmap( target, texture, width, height ) {\n\n\t\t_gl.generateMipmap( target );\n\n\t\tvar textureProperties = properties.get( texture );\n\n\t\t// Note: Math.log( x ) * Math.LOG2E used instead of Math.log2( x ) which is not supported by IE11\n\t\ttextureProperties.__maxMipLevel = Math.log( Math.max( width, height ) ) * Math.LOG2E;\n\n\t}\n\n\tfunction getInternalFormat( internalFormatName, glFormat, glType ) {\n\n\t\tif ( isWebGL2 === false ) return glFormat;\n\n\t\tif ( internalFormatName !== null ) {\n\n\t\t\tif ( _gl[ internalFormatName ] !== undefined ) return _gl[ internalFormatName ];\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format \\'' + internalFormatName + '\\'' );\n\n\t\t}\n\n\t\tvar internalFormat = glFormat;\n\n\t\tif ( glFormat === _gl.RED ) {\n\n\t\t\tif ( glType === _gl.FLOAT ) internalFormat = _gl.R32F;\n\t\t\tif ( glType === _gl.HALF_FLOAT ) internalFormat = _gl.R16F;\n\t\t\tif ( glType === _gl.UNSIGNED_BYTE ) internalFormat = _gl.R8;\n\n\t\t}\n\n\t\tif ( glFormat === _gl.RGB ) {\n\n\t\t\tif ( glType === _gl.FLOAT ) internalFormat = _gl.RGB32F;\n\t\t\tif ( glType === _gl.HALF_FLOAT ) internalFormat = _gl.RGB16F;\n\t\t\tif ( glType === _gl.UNSIGNED_BYTE ) internalFormat = _gl.RGB8;\n\n\t\t}\n\n\t\tif ( glFormat === _gl.RGBA ) {\n\n\t\t\tif ( glType === _gl.FLOAT ) internalFormat = _gl.RGBA32F;\n\t\t\tif ( glType === _gl.HALF_FLOAT ) internalFormat = _gl.RGBA16F;\n\t\t\tif ( glType === _gl.UNSIGNED_BYTE ) internalFormat = _gl.RGBA8;\n\n\t\t}\n\n\t\tif ( internalFormat === _gl.R16F || internalFormat === _gl.R32F ||\n\t\t\tinternalFormat === _gl.RGBA16F || internalFormat === _gl.RGBA32F ) {\n\n\t\t\textensions.get( 'EXT_color_buffer_float' );\n\n\t\t}\n\n\t\treturn internalFormat;\n\n\t}\n\n\t// Fallback filters for non-power-of-2 textures\n\n\tfunction filterFallback( f ) {\n\n\t\tif ( f === NearestFilter || f === NearestMipmapNearestFilter || f === NearestMipmapLinearFilter ) {\n\n\t\t\treturn _gl.NEAREST;\n\n\t\t}\n\n\t\treturn _gl.LINEAR;\n\n\t}\n\n\t//\n\n\tfunction onTextureDispose( event ) {\n\n\t\tvar texture = event.target;\n\n\t\ttexture.removeEventListener( 'dispose', onTextureDispose );\n\n\t\tdeallocateTexture( texture );\n\n\t\tif ( texture.isVideoTexture ) {\n\n\t\t\t_videoTextures.delete( texture );\n\n\t\t}\n\n\t\tinfo.memory.textures --;\n\n\t}\n\n\tfunction onRenderTargetDispose( event ) {\n\n\t\tvar renderTarget = event.target;\n\n\t\trenderTarget.removeEventListener( 'dispose', onRenderTargetDispose );\n\n\t\tdeallocateRenderTarget( renderTarget );\n\n\t\tinfo.memory.textures --;\n\n\t}\n\n\t//\n\n\tfunction deallocateTexture( texture ) {\n\n\t\tvar textureProperties = properties.get( texture );\n\n\t\tif ( textureProperties.__webglInit === undefined ) return;\n\n\t\t_gl.deleteTexture( textureProperties.__webglTexture );\n\n\t\tproperties.remove( texture );\n\n\t}\n\n\tfunction deallocateRenderTarget( renderTarget ) {\n\n\t\tvar renderTargetProperties = properties.get( renderTarget );\n\t\tvar textureProperties = properties.get( renderTarget.texture );\n\n\t\tif ( ! renderTarget ) return;\n\n\t\tif ( textureProperties.__webglTexture !== undefined ) {\n\n\t\t\t_gl.deleteTexture( textureProperties.__webglTexture );\n\n\t\t}\n\n\t\tif ( renderTarget.depthTexture ) {\n\n\t\t\trenderTarget.depthTexture.dispose();\n\n\t\t}\n\n\t\tif ( renderTarget.isWebGLCubeRenderTarget ) {\n\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer[ i ] );\n\t\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer[ i ] );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t_gl.deleteFramebuffer( renderTargetProperties.__webglFramebuffer );\n\t\t\tif ( renderTargetProperties.__webglDepthbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthbuffer );\n\t\t\tif ( renderTargetProperties.__webglMultisampledFramebuffer ) _gl.deleteFramebuffer( renderTargetProperties.__webglMultisampledFramebuffer );\n\t\t\tif ( renderTargetProperties.__webglColorRenderbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglColorRenderbuffer );\n\t\t\tif ( renderTargetProperties.__webglDepthRenderbuffer ) _gl.deleteRenderbuffer( renderTargetProperties.__webglDepthRenderbuffer );\n\n\t\t}\n\n\t\tproperties.remove( renderTarget.texture );\n\t\tproperties.remove( renderTarget );\n\n\t}\n\n\t//\n\n\tvar textureUnits = 0;\n\n\tfunction resetTextureUnits() {\n\n\t\ttextureUnits = 0;\n\n\t}\n\n\tfunction allocateTextureUnit() {\n\n\t\tvar textureUnit = textureUnits;\n\n\t\tif ( textureUnit >= maxTextures ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLTextures: Trying to use ' + textureUnit + ' texture units while this GPU supports only ' + maxTextures );\n\n\t\t}\n\n\t\ttextureUnits += 1;\n\n\t\treturn textureUnit;\n\n\t}\n\n\t//\n\n\tfunction setTexture2D( texture, slot ) {\n\n\t\tvar textureProperties = properties.get( texture );\n\n\t\tif ( texture.isVideoTexture ) updateVideoTexture( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tvar image = texture.image;\n\n\t\t\tif ( image === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is undefined' );\n\n\t\t\t} else if ( image.complete === false ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture marked for update but image is incomplete' );\n\n\t\t\t} else {\n\n\t\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\n\n\t}\n\n\tfunction setTexture2DArray( texture, slot ) {\n\n\t\tvar textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\treturn;\n\n\t\t}\n\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\tstate.bindTexture( _gl.TEXTURE_2D_ARRAY, textureProperties.__webglTexture );\n\n\t}\n\n\tfunction setTexture3D( texture, slot ) {\n\n\t\tvar textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tuploadTexture( textureProperties, texture, slot );\n\t\t\treturn;\n\n\t\t}\n\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\tstate.bindTexture( _gl.TEXTURE_3D, textureProperties.__webglTexture );\n\n\t}\n\n\tfunction setTextureCube( texture, slot ) {\n\n\t\tif ( texture.image.length !== 6 ) return;\n\n\t\tvar textureProperties = properties.get( texture );\n\n\t\tif ( texture.version > 0 && textureProperties.__version !== texture.version ) {\n\n\t\t\tinitTexture( textureProperties, texture );\n\n\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__webglTexture );\n\n\t\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\n\n\t\t\tvar isCompressed = ( texture && ( texture.isCompressedTexture || texture.image[ 0 ].isCompressedTexture ) );\n\t\t\tvar isDataTexture = ( texture.image[ 0 ] && texture.image[ 0 ].isDataTexture );\n\n\t\t\tvar cubeImage = [];\n\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\tif ( ! isCompressed && ! isDataTexture ) {\n\n\t\t\t\t\tcubeImage[ i ] = resizeImage( texture.image[ i ], false, true, maxCubemapSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcubeImage[ i ] = isDataTexture ? texture.image[ i ].image : texture.image[ i ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar image = cubeImage[ 0 ],\n\t\t\t\tsupportsMips = isPowerOfTwo( image ) || isWebGL2,\n\t\t\t\tglFormat = utils.convert( texture.format ),\n\t\t\t\tglType = utils.convert( texture.type ),\n\t\t\t\tglInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType );\n\n\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, texture, supportsMips );\n\n\t\t\tvar mipmaps;\n\n\t\t\tif ( isCompressed ) {\n\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\tmipmaps = cubeImage[ i ].mipmaps;\n\n\t\t\t\t\tfor ( var j = 0; j < mipmaps.length; j ++ ) {\n\n\t\t\t\t\t\tvar mipmap = mipmaps[ j ];\n\n\t\t\t\t\t\tif ( texture.format !== RGBAFormat && texture.format !== RGBFormat ) {\n\n\t\t\t\t\t\t\tif ( glFormat !== null ) {\n\n\t\t\t\t\t\t\t\tstate.compressedTexImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glInternalFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()' );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\tmipmaps = texture.mipmaps;\n\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\tif ( isDataTexture ) {\n\n\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glInternalFormat, cubeImage[ i ].width, cubeImage[ i ].height, 0, glFormat, glType, cubeImage[ i ].data );\n\n\t\t\t\t\t\tfor ( var j = 0; j < mipmaps.length; j ++ ) {\n\n\t\t\t\t\t\t\tvar mipmap = mipmaps[ j ];\n\t\t\t\t\t\t\tvar mipmapImage = mipmap.image[ i ].image;\n\n\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j + 1, glInternalFormat, mipmapImage.width, mipmapImage.height, 0, glFormat, glType, mipmapImage.data );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, 0, glInternalFormat, glFormat, glType, cubeImage[ i ] );\n\n\t\t\t\t\t\tfor ( var j = 0; j < mipmaps.length; j ++ ) {\n\n\t\t\t\t\t\t\tvar mipmap = mipmaps[ j ];\n\n\t\t\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i, j + 1, glInternalFormat, glFormat, glType, mipmap.image[ i ] );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length;\n\n\t\t\t}\n\n\t\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\t\t// We assume images for cube map have the same size.\n\t\t\t\tgenerateMipmap( _gl.TEXTURE_CUBE_MAP, texture, image.width, image.height );\n\n\t\t\t}\n\n\t\t\ttextureProperties.__version = texture.version;\n\n\t\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t\t} else {\n\n\t\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__webglTexture );\n\n\t\t}\n\n\t}\n\n\tfunction setTextureCubeDynamic( texture, slot ) {\n\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, properties.get( texture ).__webglTexture );\n\n\t}\n\n\tvar wrappingToGL = {\n\t\t[ RepeatWrapping ]: _gl.REPEAT,\n\t\t[ ClampToEdgeWrapping ]: _gl.CLAMP_TO_EDGE,\n\t\t[ MirroredRepeatWrapping ]: _gl.MIRRORED_REPEAT\n\t};\n\n\tvar filterToGL = {\n\t\t[ NearestFilter ]: _gl.NEAREST,\n\t\t[ NearestMipmapNearestFilter ]: _gl.NEAREST_MIPMAP_NEAREST,\n\t\t[ NearestMipmapLinearFilter ]: _gl.NEAREST_MIPMAP_LINEAR,\n\n\t\t[ LinearFilter ]: _gl.LINEAR,\n\t\t[ LinearMipmapNearestFilter ]: _gl.LINEAR_MIPMAP_NEAREST,\n\t\t[ LinearMipmapLinearFilter ]: _gl.LINEAR_MIPMAP_LINEAR\n\t};\n\n\tfunction setTextureParameters( textureType, texture, supportsMips ) {\n\n\t\tif ( supportsMips ) {\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, wrappingToGL[ texture.wrapS ] );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, wrappingToGL[ texture.wrapT ] );\n\n\t\t\tif ( textureType === _gl.TEXTURE_3D || textureType === _gl.TEXTURE_2D_ARRAY ) {\n\n\t\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_R, wrappingToGL[ texture.wrapR ] );\n\n\t\t\t}\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, filterToGL[ texture.magFilter ] );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, filterToGL[ texture.minFilter ] );\n\n\t\t} else {\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_S, _gl.CLAMP_TO_EDGE );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_T, _gl.CLAMP_TO_EDGE );\n\n\t\t\tif ( textureType === _gl.TEXTURE_3D || textureType === _gl.TEXTURE_2D_ARRAY ) {\n\n\t\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_WRAP_R, _gl.CLAMP_TO_EDGE );\n\n\t\t\t}\n\n\t\t\tif ( texture.wrapS !== ClampToEdgeWrapping || texture.wrapT !== ClampToEdgeWrapping ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.wrapS and Texture.wrapT should be set to THREE.ClampToEdgeWrapping.' );\n\n\t\t\t}\n\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MAG_FILTER, filterFallback( texture.magFilter ) );\n\t\t\t_gl.texParameteri( textureType, _gl.TEXTURE_MIN_FILTER, filterFallback( texture.minFilter ) );\n\n\t\t\tif ( texture.minFilter !== NearestFilter && texture.minFilter !== LinearFilter ) {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Texture is not power of two. Texture.minFilter should be set to THREE.NearestFilter or THREE.LinearFilter.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar extension = extensions.get( 'EXT_texture_filter_anisotropic' );\n\n\t\tif ( extension ) {\n\n\t\t\tif ( texture.type === FloatType && extensions.get( 'OES_texture_float_linear' ) === null ) return;\n\t\t\tif ( texture.type === HalfFloatType && ( isWebGL2 || extensions.get( 'OES_texture_half_float_linear' ) ) === null ) return;\n\n\t\t\tif ( texture.anisotropy > 1 || properties.get( texture ).__currentAnisotropy ) {\n\n\t\t\t\t_gl.texParameterf( textureType, extension.TEXTURE_MAX_ANISOTROPY_EXT, Math.min( texture.anisotropy, capabilities.getMaxAnisotropy() ) );\n\t\t\t\tproperties.get( texture ).__currentAnisotropy = texture.anisotropy;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction initTexture( textureProperties, texture ) {\n\n\t\tif ( textureProperties.__webglInit === undefined ) {\n\n\t\t\ttextureProperties.__webglInit = true;\n\n\t\t\ttexture.addEventListener( 'dispose', onTextureDispose );\n\n\t\t\ttextureProperties.__webglTexture = _gl.createTexture();\n\n\t\t\tinfo.memory.textures ++;\n\n\t\t}\n\n\t}\n\n\tfunction uploadTexture( textureProperties, texture, slot ) {\n\n\t\tvar textureType = _gl.TEXTURE_2D;\n\n\t\tif ( texture.isDataTexture2DArray ) textureType = _gl.TEXTURE_2D_ARRAY;\n\t\tif ( texture.isDataTexture3D ) textureType = _gl.TEXTURE_3D;\n\n\t\tinitTexture( textureProperties, texture );\n\n\t\tstate.activeTexture( _gl.TEXTURE0 + slot );\n\t\tstate.bindTexture( textureType, textureProperties.__webglTexture );\n\n\t\t_gl.pixelStorei( _gl.UNPACK_FLIP_Y_WEBGL, texture.flipY );\n\t\t_gl.pixelStorei( _gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, texture.premultiplyAlpha );\n\t\t_gl.pixelStorei( _gl.UNPACK_ALIGNMENT, texture.unpackAlignment );\n\n\t\tvar needsPowerOfTwo = textureNeedsPowerOfTwo( texture ) && isPowerOfTwo( texture.image ) === false;\n\t\tvar image = resizeImage( texture.image, needsPowerOfTwo, false, maxTextureSize );\n\n\t\tvar supportsMips = isPowerOfTwo( image ) || isWebGL2,\n\t\t\tglFormat = utils.convert( texture.format ),\n\t\t\tglType = utils.convert( texture.type ),\n\t\t\tglInternalFormat = getInternalFormat( texture.internalFormat, glFormat, glType );\n\n\t\tsetTextureParameters( textureType, texture, supportsMips );\n\n\t\tvar mipmap, mipmaps = texture.mipmaps;\n\n\t\tif ( texture.isDepthTexture ) {\n\n\t\t\t// populate depth texture with dummy data\n\n\t\t\tglInternalFormat = _gl.DEPTH_COMPONENT;\n\n\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\tif ( texture.type === FloatType ) {\n\n\t\t\t\t\tglInternalFormat = _gl.DEPTH_COMPONENT32F;\n\n\t\t\t\t} else if ( texture.type === UnsignedIntType ) {\n\n\t\t\t\t\tglInternalFormat = _gl.DEPTH_COMPONENT24;\n\n\t\t\t\t} else if ( texture.type === UnsignedInt248Type ) {\n\n\t\t\t\t\tglInternalFormat = _gl.DEPTH24_STENCIL8;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tglInternalFormat = _gl.DEPTH_COMPONENT16; // WebGL2 requires sized internalformat for glTexImage2D\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tif ( texture.type === FloatType ) {\n\n\t\t\t\t\tconsole.error( 'WebGLRenderer: Floating point depth texture requires WebGL2.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// validation checks for WebGL 1\n\n\t\t\tif ( texture.format === DepthFormat && glInternalFormat === _gl.DEPTH_COMPONENT ) {\n\n\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n\t\t\t\t// DEPTH_COMPONENT and type is not UNSIGNED_SHORT or UNSIGNED_INT\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\tif ( texture.type !== UnsignedShortType && texture.type !== UnsignedIntType ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Use UnsignedShortType or UnsignedIntType for DepthFormat DepthTexture.' );\n\n\t\t\t\t\ttexture.type = UnsignedShortType;\n\t\t\t\t\tglType = utils.convert( texture.type );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( texture.format === DepthStencilFormat && glInternalFormat === _gl.DEPTH_COMPONENT ) {\n\n\t\t\t\t// Depth stencil textures need the DEPTH_STENCIL internal format\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\tglInternalFormat = _gl.DEPTH_STENCIL;\n\n\t\t\t\t// The error INVALID_OPERATION is generated by texImage2D if format and internalformat are\n\t\t\t\t// DEPTH_STENCIL and type is not UNSIGNED_INT_24_8_WEBGL.\n\t\t\t\t// (https://www.khronos.org/registry/webgl/extensions/WEBGL_depth_texture/)\n\t\t\t\tif ( texture.type !== UnsignedInt248Type ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Use UnsignedInt248Type for DepthStencilFormat DepthTexture.' );\n\n\t\t\t\t\ttexture.type = UnsignedInt248Type;\n\t\t\t\t\tglType = utils.convert( texture.type );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glInternalFormat, image.width, image.height, 0, glFormat, glType, null );\n\n\t\t} else if ( texture.isDataTexture ) {\n\n\t\t\t// use manually created mipmaps if available\n\t\t\t// if there are no manual mipmaps\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\tif ( mipmaps.length > 0 && supportsMips ) {\n\n\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\tmipmap = mipmaps[ i ];\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t}\n\n\t\t\t\ttexture.generateMipmaps = false;\n\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glInternalFormat, image.width, image.height, 0, glFormat, glType, image.data );\n\t\t\t\ttextureProperties.__maxMipLevel = 0;\n\n\t\t\t}\n\n\t\t} else if ( texture.isCompressedTexture ) {\n\n\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\tmipmap = mipmaps[ i ];\n\n\t\t\t\tif ( texture.format !== RGBAFormat && texture.format !== RGBFormat ) {\n\n\t\t\t\t\tif ( glFormat !== null ) {\n\n\t\t\t\t\t\tstate.compressedTexImage2D( _gl.TEXTURE_2D, i, glInternalFormat, mipmap.width, mipmap.height, 0, mipmap.data );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()' );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glInternalFormat, mipmap.width, mipmap.height, 0, glFormat, glType, mipmap.data );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t} else if ( texture.isDataTexture2DArray ) {\n\n\t\t\tstate.texImage3D( _gl.TEXTURE_2D_ARRAY, 0, glInternalFormat, image.width, image.height, image.depth, 0, glFormat, glType, image.data );\n\t\t\ttextureProperties.__maxMipLevel = 0;\n\n\t\t} else if ( texture.isDataTexture3D ) {\n\n\t\t\tstate.texImage3D( _gl.TEXTURE_3D, 0, glInternalFormat, image.width, image.height, image.depth, 0, glFormat, glType, image.data );\n\t\t\ttextureProperties.__maxMipLevel = 0;\n\n\t\t} else {\n\n\t\t\t// regular Texture (image, video, canvas)\n\n\t\t\t// use manually created mipmaps if available\n\t\t\t// if there are no manual mipmaps\n\t\t\t// set 0 level mipmap and then use GL to generate other mipmap levels\n\n\t\t\tif ( mipmaps.length > 0 && supportsMips ) {\n\n\t\t\t\tfor ( var i = 0, il = mipmaps.length; i < il; i ++ ) {\n\n\t\t\t\t\tmipmap = mipmaps[ i ];\n\t\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, i, glInternalFormat, glFormat, glType, mipmap );\n\n\t\t\t\t}\n\n\t\t\t\ttexture.generateMipmaps = false;\n\t\t\t\ttextureProperties.__maxMipLevel = mipmaps.length - 1;\n\n\t\t\t} else {\n\n\t\t\t\tstate.texImage2D( _gl.TEXTURE_2D, 0, glInternalFormat, glFormat, glType, image );\n\t\t\t\ttextureProperties.__maxMipLevel = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\tgenerateMipmap( textureType, texture, image.width, image.height );\n\n\t\t}\n\n\t\ttextureProperties.__version = texture.version;\n\n\t\tif ( texture.onUpdate ) texture.onUpdate( texture );\n\n\t}\n\n\t// Render targets\n\n\t// Setup storage for target texture and bind it to correct framebuffer\n\tfunction setupFrameBufferTexture( framebuffer, renderTarget, attachment, textureTarget ) {\n\n\t\tvar glFormat = utils.convert( renderTarget.texture.format );\n\t\tvar glType = utils.convert( renderTarget.texture.type );\n\t\tvar glInternalFormat = getInternalFormat( renderTarget.texture.internalFormat, glFormat, glType );\n\t\tstate.texImage2D( textureTarget, 0, glInternalFormat, renderTarget.width, renderTarget.height, 0, glFormat, glType, null );\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, attachment, textureTarget, properties.get( renderTarget.texture ).__webglTexture, 0 );\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\n\n\t}\n\n\t// Setup storage for internal depth/stencil buffers and bind to correct framebuffer\n\tfunction setupRenderBufferStorage( renderbuffer, renderTarget, isMultisample ) {\n\n\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, renderbuffer );\n\n\t\tif ( renderTarget.depthBuffer && ! renderTarget.stencilBuffer ) {\n\n\t\t\tvar glInternalFormat = _gl.DEPTH_COMPONENT16;\n\n\t\t\tif ( isMultisample ) {\n\n\t\t\t\tvar depthTexture = renderTarget.depthTexture;\n\n\t\t\t\tif ( depthTexture && depthTexture.isDepthTexture ) {\n\n\t\t\t\t\tif ( depthTexture.type === FloatType ) {\n\n\t\t\t\t\t\tglInternalFormat = _gl.DEPTH_COMPONENT32F;\n\n\t\t\t\t\t} else if ( depthTexture.type === UnsignedIntType ) {\n\n\t\t\t\t\t\tglInternalFormat = _gl.DEPTH_COMPONENT24;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tvar samples = getRenderTargetSamples( renderTarget );\n\n\t\t\t\t_gl.renderbufferStorageMultisample( _gl.RENDERBUFFER, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\n\n\t\t} else if ( renderTarget.depthBuffer && renderTarget.stencilBuffer ) {\n\n\t\t\tif ( isMultisample ) {\n\n\t\t\t\tvar samples = getRenderTargetSamples( renderTarget );\n\n\t\t\t\t_gl.renderbufferStorageMultisample( _gl.RENDERBUFFER, samples, _gl.DEPTH24_STENCIL8, renderTarget.width, renderTarget.height );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, _gl.DEPTH_STENCIL, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\n\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.RENDERBUFFER, renderbuffer );\n\n\t\t} else {\n\n\t\t\tvar glFormat = utils.convert( renderTarget.texture.format );\n\t\t\tvar glType = utils.convert( renderTarget.texture.type );\n\t\t\tvar glInternalFormat = getInternalFormat( renderTarget.texture.internalFormat, glFormat, glType );\n\n\t\t\tif ( isMultisample ) {\n\n\t\t\t\tvar samples = getRenderTargetSamples( renderTarget );\n\n\t\t\t\t_gl.renderbufferStorageMultisample( _gl.RENDERBUFFER, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t} else {\n\n\t\t\t\t_gl.renderbufferStorage( _gl.RENDERBUFFER, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t}\n\n\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, null );\n\n\t}\n\n\t// Setup resources for a Depth Texture for a FBO (needs an extension)\n\tfunction setupDepthTexture( framebuffer, renderTarget ) {\n\n\t\tvar isCube = ( renderTarget && renderTarget.isWebGLCubeRenderTarget );\n\t\tif ( isCube ) throw new Error( 'Depth Texture with cube render targets is not supported' );\n\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\n\t\tif ( ! ( renderTarget.depthTexture && renderTarget.depthTexture.isDepthTexture ) ) {\n\n\t\t\tthrow new Error( 'renderTarget.depthTexture must be an instance of THREE.DepthTexture' );\n\n\t\t}\n\n\t\t// upload an empty depth texture with framebuffer size\n\t\tif ( ! properties.get( renderTarget.depthTexture ).__webglTexture ||\n\t\t\t\trenderTarget.depthTexture.image.width !== renderTarget.width ||\n\t\t\t\trenderTarget.depthTexture.image.height !== renderTarget.height ) {\n\n\t\t\trenderTarget.depthTexture.image.width = renderTarget.width;\n\t\t\trenderTarget.depthTexture.image.height = renderTarget.height;\n\t\t\trenderTarget.depthTexture.needsUpdate = true;\n\n\t\t}\n\n\t\tsetTexture2D( renderTarget.depthTexture, 0 );\n\n\t\tvar webglDepthTexture = properties.get( renderTarget.depthTexture ).__webglTexture;\n\n\t\tif ( renderTarget.depthTexture.format === DepthFormat ) {\n\n\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.DEPTH_ATTACHMENT, _gl.TEXTURE_2D, webglDepthTexture, 0 );\n\n\t\t} else if ( renderTarget.depthTexture.format === DepthStencilFormat ) {\n\n\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.DEPTH_STENCIL_ATTACHMENT, _gl.TEXTURE_2D, webglDepthTexture, 0 );\n\n\t\t} else {\n\n\t\t\tthrow new Error( 'Unknown depthTexture format' );\n\n\t\t}\n\n\t}\n\n\t// Setup GL resources for a non-texture depth buffer\n\tfunction setupDepthRenderbuffer( renderTarget ) {\n\n\t\tvar renderTargetProperties = properties.get( renderTarget );\n\n\t\tvar isCube = ( renderTarget.isWebGLCubeRenderTarget === true );\n\n\t\tif ( renderTarget.depthTexture ) {\n\n\t\t\tif ( isCube ) throw new Error( 'target.depthTexture not supported in Cube render targets' );\n\n\t\t\tsetupDepthTexture( renderTargetProperties.__webglFramebuffer, renderTarget );\n\n\t\t} else {\n\n\t\t\tif ( isCube ) {\n\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = [];\n\n\t\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer[ i ] );\n\t\t\t\t\trenderTargetProperties.__webglDepthbuffer[ i ] = _gl.createRenderbuffer();\n\t\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer[ i ], renderTarget, false );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglFramebuffer );\n\t\t\t\trenderTargetProperties.__webglDepthbuffer = _gl.createRenderbuffer();\n\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthbuffer, renderTarget, false );\n\n\t\t\t}\n\n\t\t}\n\n\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\n\n\t}\n\n\t// Set up GL resources for the render target\n\tfunction setupRenderTarget( renderTarget ) {\n\n\t\tvar renderTargetProperties = properties.get( renderTarget );\n\t\tvar textureProperties = properties.get( renderTarget.texture );\n\n\t\trenderTarget.addEventListener( 'dispose', onRenderTargetDispose );\n\n\t\ttextureProperties.__webglTexture = _gl.createTexture();\n\n\t\tinfo.memory.textures ++;\n\n\t\tvar isCube = ( renderTarget.isWebGLCubeRenderTarget === true );\n\t\tvar isMultisample = ( renderTarget.isWebGLMultisampleRenderTarget === true );\n\t\tvar supportsMips = isPowerOfTwo( renderTarget ) || isWebGL2;\n\n\t\t// Handles WebGL2 RGBFormat fallback - #18858\n\n\t\tif ( isWebGL2 && renderTarget.texture.format === RGBFormat && ( renderTarget.texture.type === FloatType || renderTarget.texture.type === HalfFloatType ) ) {\n\n\t\t\trenderTarget.texture.format = RGBAFormat;\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Rendering to textures with RGB format is not supported. Using RGBA format instead.' );\n\n\t\t}\n\n\t\t// Setup framebuffer\n\n\t\tif ( isCube ) {\n\n\t\t\trenderTargetProperties.__webglFramebuffer = [];\n\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\trenderTargetProperties.__webglFramebuffer[ i ] = _gl.createFramebuffer();\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\trenderTargetProperties.__webglFramebuffer = _gl.createFramebuffer();\n\n\t\t\tif ( isMultisample ) {\n\n\t\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\t\trenderTargetProperties.__webglMultisampledFramebuffer = _gl.createFramebuffer();\n\t\t\t\t\trenderTargetProperties.__webglColorRenderbuffer = _gl.createRenderbuffer();\n\n\t\t\t\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, renderTargetProperties.__webglColorRenderbuffer );\n\n\t\t\t\t\tvar glFormat = utils.convert( renderTarget.texture.format );\n\t\t\t\t\tvar glType = utils.convert( renderTarget.texture.type );\n\t\t\t\t\tvar glInternalFormat = getInternalFormat( renderTarget.texture.internalFormat, glFormat, glType );\n\t\t\t\t\tvar samples = getRenderTargetSamples( renderTarget );\n\t\t\t\t\t_gl.renderbufferStorageMultisample( _gl.RENDERBUFFER, samples, glInternalFormat, renderTarget.width, renderTarget.height );\n\n\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglMultisampledFramebuffer );\n\t\t\t\t\t_gl.framebufferRenderbuffer( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0, _gl.RENDERBUFFER, renderTargetProperties.__webglColorRenderbuffer );\n\t\t\t\t\t_gl.bindRenderbuffer( _gl.RENDERBUFFER, null );\n\n\t\t\t\t\tif ( renderTarget.depthBuffer ) {\n\n\t\t\t\t\t\trenderTargetProperties.__webglDepthRenderbuffer = _gl.createRenderbuffer();\n\t\t\t\t\t\tsetupRenderBufferStorage( renderTargetProperties.__webglDepthRenderbuffer, renderTarget, true );\n\n\t\t\t\t\t}\n\n\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, null );\n\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Setup color buffer\n\n\t\tif ( isCube ) {\n\n\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, textureProperties.__webglTexture );\n\t\t\tsetTextureParameters( _gl.TEXTURE_CUBE_MAP, renderTarget.texture, supportsMips );\n\n\t\t\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer[ i ], renderTarget, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + i );\n\n\t\t\t}\n\n\t\t\tif ( textureNeedsGenerateMipmaps( renderTarget.texture, supportsMips ) ) {\n\n\t\t\t\tgenerateMipmap( _gl.TEXTURE_CUBE_MAP, renderTarget.texture, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t\tstate.bindTexture( _gl.TEXTURE_CUBE_MAP, null );\n\n\t\t} else {\n\n\t\t\tstate.bindTexture( _gl.TEXTURE_2D, textureProperties.__webglTexture );\n\t\t\tsetTextureParameters( _gl.TEXTURE_2D, renderTarget.texture, supportsMips );\n\t\t\tsetupFrameBufferTexture( renderTargetProperties.__webglFramebuffer, renderTarget, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_2D );\n\n\t\t\tif ( textureNeedsGenerateMipmaps( renderTarget.texture, supportsMips ) ) {\n\n\t\t\t\tgenerateMipmap( _gl.TEXTURE_2D, renderTarget.texture, renderTarget.width, renderTarget.height );\n\n\t\t\t}\n\n\t\t\tstate.bindTexture( _gl.TEXTURE_2D, null );\n\n\t\t}\n\n\t\t// Setup depth and stencil buffers\n\n\t\tif ( renderTarget.depthBuffer ) {\n\n\t\t\tsetupDepthRenderbuffer( renderTarget );\n\n\t\t}\n\n\t}\n\n\tfunction updateRenderTargetMipmap( renderTarget ) {\n\n\t\tvar texture = renderTarget.texture;\n\t\tvar supportsMips = isPowerOfTwo( renderTarget ) || isWebGL2;\n\n\t\tif ( textureNeedsGenerateMipmaps( texture, supportsMips ) ) {\n\n\t\t\tvar target = renderTarget.isWebGLCubeRenderTarget ? _gl.TEXTURE_CUBE_MAP : _gl.TEXTURE_2D;\n\t\t\tvar webglTexture = properties.get( texture ).__webglTexture;\n\n\t\t\tstate.bindTexture( target, webglTexture );\n\t\t\tgenerateMipmap( target, texture, renderTarget.width, renderTarget.height );\n\t\t\tstate.bindTexture( target, null );\n\n\t\t}\n\n\t}\n\n\tfunction updateMultisampleRenderTarget( renderTarget ) {\n\n\t\tif ( renderTarget.isWebGLMultisampleRenderTarget ) {\n\n\t\t\tif ( isWebGL2 ) {\n\n\t\t\t\tvar renderTargetProperties = properties.get( renderTarget );\n\n\t\t\t\t_gl.bindFramebuffer( _gl.READ_FRAMEBUFFER, renderTargetProperties.__webglMultisampledFramebuffer );\n\t\t\t\t_gl.bindFramebuffer( _gl.DRAW_FRAMEBUFFER, renderTargetProperties.__webglFramebuffer );\n\n\t\t\t\tvar width = renderTarget.width;\n\t\t\t\tvar height = renderTarget.height;\n\t\t\t\tvar mask = _gl.COLOR_BUFFER_BIT;\n\n\t\t\t\tif ( renderTarget.depthBuffer ) mask |= _gl.DEPTH_BUFFER_BIT;\n\t\t\t\tif ( renderTarget.stencilBuffer ) mask |= _gl.STENCIL_BUFFER_BIT;\n\n\t\t\t\t_gl.blitFramebuffer( 0, 0, width, height, 0, 0, width, height, mask, _gl.NEAREST );\n\n\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, renderTargetProperties.__webglMultisampledFramebuffer ); // see #18905\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.WebGLRenderer: WebGLMultisampleRenderTarget can only be used with WebGL2.' );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction getRenderTargetSamples( renderTarget ) {\n\n\t\treturn ( isWebGL2 && renderTarget.isWebGLMultisampleRenderTarget ) ?\n\t\t\tMath.min( maxSamples, renderTarget.samples ) : 0;\n\n\t}\n\n\tfunction updateVideoTexture( texture ) {\n\n\t\tvar frame = info.render.frame;\n\n\t\t// Check the last frame we updated the VideoTexture\n\n\t\tif ( _videoTextures.get( texture ) !== frame ) {\n\n\t\t\t_videoTextures.set( texture, frame );\n\t\t\ttexture.update();\n\n\t\t}\n\n\t}\n\n\t// backwards compatibility\n\n\tvar warnedTexture2D = false;\n\tvar warnedTextureCube = false;\n\n\tfunction safeSetTexture2D( texture, slot ) {\n\n\t\tif ( texture && texture.isWebGLRenderTarget ) {\n\n\t\t\tif ( warnedTexture2D === false ) {\n\n\t\t\t\tconsole.warn( \"THREE.WebGLTextures.safeSetTexture2D: don't use render targets as textures. Use their .texture property instead.\" );\n\t\t\t\twarnedTexture2D = true;\n\n\t\t\t}\n\n\t\t\ttexture = texture.texture;\n\n\t\t}\n\n\t\tsetTexture2D( texture, slot );\n\n\t}\n\n\tfunction safeSetTextureCube( texture, slot ) {\n\n\t\tif ( texture && texture.isWebGLCubeRenderTarget ) {\n\n\t\t\tif ( warnedTextureCube === false ) {\n\n\t\t\t\tconsole.warn( \"THREE.WebGLTextures.safeSetTextureCube: don't use cube render targets as textures. Use their .texture property instead.\" );\n\t\t\t\twarnedTextureCube = true;\n\n\t\t\t}\n\n\t\t\ttexture = texture.texture;\n\n\t\t}\n\n\t\t// currently relying on the fact that WebGLCubeRenderTarget.texture is a Texture and NOT a CubeTexture\n\t\t// TODO: unify these code paths\n\t\tif ( ( texture && texture.isCubeTexture ) ||\n\t\t\t( Array.isArray( texture.image ) && texture.image.length === 6 ) ) {\n\n\t\t\t// CompressedTexture can have Array in image :/\n\n\t\t\t// this function alone should take care of cube textures\n\t\t\tsetTextureCube( texture, slot );\n\n\t\t} else {\n\n\t\t\t// assumed: texture property of THREE.WebGLCubeRenderTarget\n\t\t\tsetTextureCubeDynamic( texture, slot );\n\n\t\t}\n\n\t}\n\n\t//\n\n\tthis.allocateTextureUnit = allocateTextureUnit;\n\tthis.resetTextureUnits = resetTextureUnits;\n\n\tthis.setTexture2D = setTexture2D;\n\tthis.setTexture2DArray = setTexture2DArray;\n\tthis.setTexture3D = setTexture3D;\n\tthis.setTextureCube = setTextureCube;\n\tthis.setTextureCubeDynamic = setTextureCubeDynamic;\n\tthis.setupRenderTarget = setupRenderTarget;\n\tthis.updateRenderTargetMipmap = updateRenderTargetMipmap;\n\tthis.updateMultisampleRenderTarget = updateMultisampleRenderTarget;\n\n\tthis.safeSetTexture2D = safeSetTexture2D;\n\tthis.safeSetTextureCube = safeSetTextureCube;\n\n}\n\nexport { WebGLTextures };\n","/**\n * @author thespite / http://www.twitter.com/thespite\n */\n\nimport { RGBA_ASTC_4x4_Format, RGBA_ASTC_5x4_Format, RGBA_ASTC_5x5_Format, RGBA_ASTC_6x5_Format, RGBA_ASTC_6x6_Format, RGBA_ASTC_8x5_Format, RGBA_ASTC_8x6_Format, RGBA_ASTC_8x8_Format, RGBA_ASTC_10x5_Format, RGBA_ASTC_10x6_Format, RGBA_ASTC_10x8_Format, RGBA_ASTC_10x10_Format, RGBA_ASTC_12x10_Format, RGBA_ASTC_12x12_Format, RGB_ETC1_Format, RGB_ETC2_Format, RGBA_ETC2_EAC_Format, RGBA_PVRTC_2BPPV1_Format, RGBA_PVRTC_4BPPV1_Format, RGB_PVRTC_2BPPV1_Format, RGB_PVRTC_4BPPV1_Format, RGBA_S3TC_DXT5_Format, RGBA_S3TC_DXT3_Format, RGBA_S3TC_DXT1_Format, RGB_S3TC_DXT1_Format, DepthFormat, DepthStencilFormat, LuminanceAlphaFormat, LuminanceFormat, RedFormat, RGBAFormat, RGBFormat, AlphaFormat, RedIntegerFormat, RGFormat, RGIntegerFormat, RGBIntegerFormat, RGBAIntegerFormat, HalfFloatType, FloatType, UnsignedIntType, IntType, UnsignedShortType, ShortType, ByteType, UnsignedInt248Type, UnsignedShort565Type, UnsignedShort5551Type, UnsignedShort4444Type, UnsignedByteType, SRGB8_ALPHA8_ASTC_4x4_Format, SRGB8_ALPHA8_ASTC_5x4_Format, SRGB8_ALPHA8_ASTC_5x5_Format, SRGB8_ALPHA8_ASTC_6x5_Format, SRGB8_ALPHA8_ASTC_6x6_Format, SRGB8_ALPHA8_ASTC_8x5_Format, SRGB8_ALPHA8_ASTC_8x6_Format, SRGB8_ALPHA8_ASTC_8x8_Format, SRGB8_ALPHA8_ASTC_10x5_Format, SRGB8_ALPHA8_ASTC_10x6_Format, SRGB8_ALPHA8_ASTC_10x8_Format, SRGB8_ALPHA8_ASTC_10x10_Format, SRGB8_ALPHA8_ASTC_12x10_Format, SRGB8_ALPHA8_ASTC_12x12_Format, RGBA_BPTC_Format } from '../../constants.js';\n\nfunction WebGLUtils( gl, extensions, capabilities ) {\n\n\tvar isWebGL2 = capabilities.isWebGL2;\n\n\tfunction convert( p ) {\n\n\t\tvar extension;\n\n\t\tif ( p === UnsignedByteType ) return gl.UNSIGNED_BYTE;\n\t\tif ( p === UnsignedShort4444Type ) return gl.UNSIGNED_SHORT_4_4_4_4;\n\t\tif ( p === UnsignedShort5551Type ) return gl.UNSIGNED_SHORT_5_5_5_1;\n\t\tif ( p === UnsignedShort565Type ) return gl.UNSIGNED_SHORT_5_6_5;\n\n\t\tif ( p === ByteType ) return gl.BYTE;\n\t\tif ( p === ShortType ) return gl.SHORT;\n\t\tif ( p === UnsignedShortType ) return gl.UNSIGNED_SHORT;\n\t\tif ( p === IntType ) return gl.INT;\n\t\tif ( p === UnsignedIntType ) return gl.UNSIGNED_INT;\n\t\tif ( p === FloatType ) return gl.FLOAT;\n\n\t\tif ( p === HalfFloatType ) {\n\n\t\t\tif ( isWebGL2 ) return gl.HALF_FLOAT;\n\n\t\t\textension = extensions.get( 'OES_texture_half_float' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.HALF_FLOAT_OES;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === AlphaFormat ) return gl.ALPHA;\n\t\tif ( p === RGBFormat ) return gl.RGB;\n\t\tif ( p === RGBAFormat ) return gl.RGBA;\n\t\tif ( p === LuminanceFormat ) return gl.LUMINANCE;\n\t\tif ( p === LuminanceAlphaFormat ) return gl.LUMINANCE_ALPHA;\n\t\tif ( p === DepthFormat ) return gl.DEPTH_COMPONENT;\n\t\tif ( p === DepthStencilFormat ) return gl.DEPTH_STENCIL;\n\t\tif ( p === RedFormat ) return gl.RED;\n\n\t\t// WebGL2 formats.\n\n\t\tif ( p === RedIntegerFormat ) return gl.RED_INTEGER;\n\t\tif ( p === RGFormat ) return gl.RG;\n\t\tif ( p === RGIntegerFormat ) return gl.RG_INTEGER;\n\t\tif ( p === RGBIntegerFormat ) return gl.RGB_INTEGER;\n\t\tif ( p === RGBAIntegerFormat ) return gl.RGBA_INTEGER;\n\n\t\tif ( p === RGB_S3TC_DXT1_Format || p === RGBA_S3TC_DXT1_Format ||\n\t\t\tp === RGBA_S3TC_DXT3_Format || p === RGBA_S3TC_DXT5_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_s3tc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_S3TC_DXT1_Format ) return extension.COMPRESSED_RGB_S3TC_DXT1_EXT;\n\t\t\t\tif ( p === RGBA_S3TC_DXT1_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT1_EXT;\n\t\t\t\tif ( p === RGBA_S3TC_DXT3_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT3_EXT;\n\t\t\t\tif ( p === RGBA_S3TC_DXT5_Format ) return extension.COMPRESSED_RGBA_S3TC_DXT5_EXT;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGB_PVRTC_4BPPV1_Format || p === RGB_PVRTC_2BPPV1_Format ||\n\t\t\tp === RGBA_PVRTC_4BPPV1_Format || p === RGBA_PVRTC_2BPPV1_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_pvrtc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;\n\t\t\t\tif ( p === RGB_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;\n\t\t\t\tif ( p === RGBA_PVRTC_4BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;\n\t\t\t\tif ( p === RGBA_PVRTC_2BPPV1_Format ) return extension.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGB_ETC1_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_etc1' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.COMPRESSED_RGB_ETC1_WEBGL;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGB_ETC2_Format || p === RGBA_ETC2_EAC_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_etc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\tif ( p === RGB_ETC2_Format ) return extension.COMPRESSED_RGB8_ETC2;\n\t\t\t\tif ( p === RGBA_ETC2_EAC_Format ) return extension.COMPRESSED_RGBA8_ETC2_EAC;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGBA_ASTC_4x4_Format || p === RGBA_ASTC_5x4_Format || p === RGBA_ASTC_5x5_Format ||\n\t\t\tp === RGBA_ASTC_6x5_Format || p === RGBA_ASTC_6x6_Format || p === RGBA_ASTC_8x5_Format ||\n\t\t\tp === RGBA_ASTC_8x6_Format || p === RGBA_ASTC_8x8_Format || p === RGBA_ASTC_10x5_Format ||\n\t\t\tp === RGBA_ASTC_10x6_Format || p === RGBA_ASTC_10x8_Format || p === RGBA_ASTC_10x10_Format ||\n\t\t\tp === RGBA_ASTC_12x10_Format || p === RGBA_ASTC_12x12_Format ||\n\t\t\tp === SRGB8_ALPHA8_ASTC_4x4_Format || p === SRGB8_ALPHA8_ASTC_5x4_Format || p === SRGB8_ALPHA8_ASTC_5x5_Format ||\n\t\t\tp === SRGB8_ALPHA8_ASTC_6x5_Format || p === SRGB8_ALPHA8_ASTC_6x6_Format || p === SRGB8_ALPHA8_ASTC_8x5_Format ||\n\t\t\tp === SRGB8_ALPHA8_ASTC_8x6_Format || p === SRGB8_ALPHA8_ASTC_8x8_Format || p === SRGB8_ALPHA8_ASTC_10x5_Format ||\n\t\t\tp === SRGB8_ALPHA8_ASTC_10x6_Format || p === SRGB8_ALPHA8_ASTC_10x8_Format || p === SRGB8_ALPHA8_ASTC_10x10_Format ||\n\t\t\tp === SRGB8_ALPHA8_ASTC_12x10_Format || p === SRGB8_ALPHA8_ASTC_12x12_Format ) {\n\n\t\t\textension = extensions.get( 'WEBGL_compressed_texture_astc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\t// TODO Complete?\n\n\t\t\t\treturn p;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === RGBA_BPTC_Format ) {\n\n\t\t\textension = extensions.get( 'EXT_texture_compression_bptc' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\t// TODO Complete?\n\n\t\t\t\treturn p;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( p === UnsignedInt248Type ) {\n\n\t\t\tif ( isWebGL2 ) return gl.UNSIGNED_INT_24_8;\n\n\t\t\textension = extensions.get( 'WEBGL_depth_texture' );\n\n\t\t\tif ( extension !== null ) {\n\n\t\t\t\treturn extension.UNSIGNED_INT_24_8_WEBGL;\n\n\t\t\t} else {\n\n\t\t\t\treturn null;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn { convert: convert };\n\n}\n\n\nexport { WebGLUtils };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { PerspectiveCamera } from './PerspectiveCamera.js';\n\nfunction ArrayCamera( array ) {\n\n\tPerspectiveCamera.call( this );\n\n\tthis.cameras = array || [];\n\n}\n\nArrayCamera.prototype = Object.assign( Object.create( PerspectiveCamera.prototype ), {\n\n\tconstructor: ArrayCamera,\n\n\tisArrayCamera: true\n\n} );\n\n\nexport { ArrayCamera };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { ArrayCamera } from '../../cameras/ArrayCamera.js';\nimport { EventDispatcher } from '../../core/EventDispatcher.js';\nimport { Group } from '../../objects/Group.js';\nimport { PerspectiveCamera } from '../../cameras/PerspectiveCamera.js';\nimport { Vector3 } from '../../math/Vector3.js';\nimport { Vector4 } from '../../math/Vector4.js';\nimport { WebGLAnimation } from '../webgl/WebGLAnimation.js';\n\nfunction WebXRManager( renderer, gl ) {\n\n\tvar scope = this;\n\n\tvar session = null;\n\n\tvar framebufferScaleFactor = 1.0;\n\n\tvar referenceSpace = null;\n\tvar referenceSpaceType = 'local-floor';\n\n\tvar pose = null;\n\n\tvar controllers = [];\n\tvar inputSourcesMap = new Map();\n\n\t//\n\n\tvar cameraL = new PerspectiveCamera();\n\tcameraL.layers.enable( 1 );\n\tcameraL.viewport = new Vector4();\n\n\tvar cameraR = new PerspectiveCamera();\n\tcameraR.layers.enable( 2 );\n\tcameraR.viewport = new Vector4();\n\n\tvar cameraVR = new ArrayCamera( [ cameraL, cameraR ] );\n\tcameraVR.layers.enable( 1 );\n\tcameraVR.layers.enable( 2 );\n\n\tvar _currentDepthNear = null;\n\tvar _currentDepthFar = null;\n\n\t//\n\n\tthis.enabled = false;\n\n\tthis.isPresenting = false;\n\n\tthis.getController = function ( id ) {\n\n\t\tvar controller = controllers[ id ];\n\n\t\tif ( controller === undefined ) {\n\n\t\t\tcontroller = {};\n\t\t\tcontrollers[ id ] = controller;\n\n\t\t}\n\n\t\tif ( controller.targetRay === undefined ) {\n\n\t\t\tcontroller.targetRay = new Group();\n\t\t\tcontroller.targetRay.matrixAutoUpdate = false;\n\t\t\tcontroller.targetRay.visible = false;\n\n\t\t}\n\n\t\treturn controller.targetRay;\n\n\t};\n\n\tthis.getControllerGrip = function ( id ) {\n\n\t\tvar controller = controllers[ id ];\n\n\t\tif ( controller === undefined ) {\n\n\t\t\tcontroller = {};\n\t\t\tcontrollers[ id ] = controller;\n\n\t\t}\n\n\t\tif ( controller.grip === undefined ) {\n\n\t\t\tcontroller.grip = new Group();\n\t\t\tcontroller.grip.matrixAutoUpdate = false;\n\t\t\tcontroller.grip.visible = false;\n\n\t\t}\n\n\t\treturn controller.grip;\n\n\t};\n\n\t//\n\n\tfunction onSessionEvent( event ) {\n\n\t\tvar controller = inputSourcesMap.get( event.inputSource );\n\n\t\tif ( controller ) {\n\n\t\t\tif ( controller.targetRay ) {\n\n\t\t\t\tcontroller.targetRay.dispatchEvent( { type: event.type } );\n\n\t\t\t}\n\n\t\t\tif ( controller.grip ) {\n\n\t\t\t\tcontroller.grip.dispatchEvent( { type: event.type } );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction onSessionEnd() {\n\n\t\tinputSourcesMap.forEach( function ( controller, inputSource ) {\n\n\t\t\tif ( controller.targetRay ) {\n\n\t\t\t\tcontroller.targetRay.dispatchEvent( { type: 'disconnected', data: inputSource } );\n\t\t\t\tcontroller.targetRay.visible = false;\n\n\t\t\t}\n\n\t\t\tif ( controller.grip ) {\n\n\t\t\t\tcontroller.grip.dispatchEvent( { type: 'disconnected', data: inputSource } );\n\t\t\t\tcontroller.grip.visible = false;\n\n\t\t\t}\n\n\t\t} );\n\n\t\tinputSourcesMap.clear();\n\n\t\t//\n\n\t\trenderer.setFramebuffer( null );\n\t\trenderer.setRenderTarget( renderer.getRenderTarget() ); // Hack #15830\n\t\tanimation.stop();\n\n\t\tscope.isPresenting = false;\n\n\t\tscope.dispatchEvent( { type: 'sessionend' } );\n\n\t}\n\n\tfunction onRequestReferenceSpace( value ) {\n\n\t\treferenceSpace = value;\n\n\t\tanimation.setContext( session );\n\t\tanimation.start();\n\n\t\tscope.isPresenting = true;\n\n\t\tscope.dispatchEvent( { type: 'sessionstart' } );\n\n\t}\n\n\tthis.setFramebufferScaleFactor = function ( value ) {\n\n\t\tframebufferScaleFactor = value;\n\n\t\t// Warn if function is used while presenting\n\t\tif ( scope.isPresenting == true ) {\n\n\t\t\tconsole.warn( \"WebXRManager: Cannot change framebuffer scale while presenting VR content\" );\n\n\t\t}\n\n\t};\n\n\tthis.setReferenceSpaceType = function ( value ) {\n\n\t\treferenceSpaceType = value;\n\n\t};\n\n\tthis.getReferenceSpace = function () {\n\n\t\treturn referenceSpace;\n\n\t};\n\n\tthis.getSession = function () {\n\n\t\treturn session;\n\n\t};\n\n\tthis.setSession = function ( value ) {\n\n\t\tsession = value;\n\n\t\tif ( session !== null ) {\n\n\t\t\tsession.addEventListener( 'select', onSessionEvent );\n\t\t\tsession.addEventListener( 'selectstart', onSessionEvent );\n\t\t\tsession.addEventListener( 'selectend', onSessionEvent );\n\t\t\tsession.addEventListener( 'squeeze', onSessionEvent );\n\t\t\tsession.addEventListener( 'squeezestart', onSessionEvent );\n\t\t\tsession.addEventListener( 'squeezeend', onSessionEvent );\n\t\t\tsession.addEventListener( 'end', onSessionEnd );\n\n\t\t\tvar attributes = gl.getContextAttributes();\n\n\t\t\tvar layerInit = {\n\t\t\t\tantialias: attributes.antialias,\n\t\t\t\talpha: attributes.alpha,\n\t\t\t\tdepth: attributes.depth,\n\t\t\t\tstencil: attributes.stencil,\n\t\t\t\tframebufferScaleFactor: framebufferScaleFactor\n\t\t\t};\n\n\t\t\t// eslint-disable-next-line no-undef\n\t\t\tvar baseLayer = new XRWebGLLayer( session, gl, layerInit );\n\n\t\t\tsession.updateRenderState( { baseLayer: baseLayer } );\n\n\t\t\tsession.requestReferenceSpace( referenceSpaceType ).then( onRequestReferenceSpace );\n\n\t\t\t//\n\n\t\t\tsession.addEventListener( 'inputsourceschange', updateInputSources );\n\n\t\t}\n\n\t};\n\n\tfunction updateInputSources( event ) {\n\n\t\tvar inputSources = session.inputSources;\n\n\t\t// Assign inputSources to available controllers\n\n\t\tfor ( var i = 0; i < controllers.length; i ++ ) {\n\n\t\t\tinputSourcesMap.set( inputSources[ i ], controllers[ i ] );\n\n\t\t}\n\n\t\t// Notify disconnected\n\n\t\tfor ( var i = 0; i < event.removed.length; i ++ ) {\n\n\t\t\tvar inputSource = event.removed[ i ];\n\t\t\tvar controller = inputSourcesMap.get( inputSource );\n\n\t\t\tif ( controller ) {\n\n\t\t\t\tif ( controller.targetRay ) {\n\n\t\t\t\t\tcontroller.targetRay.dispatchEvent( { type: 'disconnected', data: inputSource } );\n\n\t\t\t\t}\n\n\t\t\t\tif ( controller.grip ) {\n\n\t\t\t\t\tcontroller.grip.dispatchEvent( { type: 'disconnected', data: inputSource } );\n\n\t\t\t\t}\n\n\t\t\t\tinputSourcesMap.delete( inputSource );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Notify connected\n\n\t\tfor ( var i = 0; i < event.added.length; i ++ ) {\n\n\t\t\tvar inputSource = event.added[ i ];\n\t\t\tvar controller = inputSourcesMap.get( inputSource );\n\n\t\t\tif ( controller ) {\n\n\t\t\t\tif ( controller.targetRay ) {\n\n\t\t\t\t\tcontroller.targetRay.dispatchEvent( { type: 'connected', data: inputSource } );\n\n\t\t\t\t}\n\n\t\t\t\tif ( controller.grip ) {\n\n\t\t\t\t\tcontroller.grip.dispatchEvent( { type: 'connected', data: inputSource } );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t//\n\n\tvar cameraLPos = new Vector3();\n\tvar cameraRPos = new Vector3();\n\n\t/**\n\t * @author jsantell / https://www.jsantell.com/\n\t *\n\t * Assumes 2 cameras that are parallel and share an X-axis, and that\n\t * the cameras' projection and world matrices have already been set.\n\t * And that near and far planes are identical for both cameras.\n\t * Visualization of this technique: https://computergraphics.stackexchange.com/a/4765\n\t */\n\tfunction setProjectionFromUnion( camera, cameraL, cameraR ) {\n\n\t\tcameraLPos.setFromMatrixPosition( cameraL.matrixWorld );\n\t\tcameraRPos.setFromMatrixPosition( cameraR.matrixWorld );\n\n\t\tvar ipd = cameraLPos.distanceTo( cameraRPos );\n\n\t\tvar projL = cameraL.projectionMatrix.elements;\n\t\tvar projR = cameraR.projectionMatrix.elements;\n\n\t\t// VR systems will have identical far and near planes, and\n\t\t// most likely identical top and bottom frustum extents.\n\t\t// Use the left camera for these values.\n\t\tvar near = projL[ 14 ] / ( projL[ 10 ] - 1 );\n\t\tvar far = projL[ 14 ] / ( projL[ 10 ] + 1 );\n\t\tvar topFov = ( projL[ 9 ] + 1 ) / projL[ 5 ];\n\t\tvar bottomFov = ( projL[ 9 ] - 1 ) / projL[ 5 ];\n\n\t\tvar leftFov = ( projL[ 8 ] - 1 ) / projL[ 0 ];\n\t\tvar rightFov = ( projR[ 8 ] + 1 ) / projR[ 0 ];\n\t\tvar left = near * leftFov;\n\t\tvar right = near * rightFov;\n\n\t\t// Calculate the new camera's position offset from the\n\t\t// left camera. xOffset should be roughly half `ipd`.\n\t\tvar zOffset = ipd / ( - leftFov + rightFov );\n\t\tvar xOffset = zOffset * - leftFov;\n\n\t\t// TODO: Better way to apply this offset?\n\t\tcameraL.matrixWorld.decompose( camera.position, camera.quaternion, camera.scale );\n\t\tcamera.translateX( xOffset );\n\t\tcamera.translateZ( zOffset );\n\t\tcamera.matrixWorld.compose( camera.position, camera.quaternion, camera.scale );\n\t\tcamera.matrixWorldInverse.getInverse( camera.matrixWorld );\n\n\t\t// Find the union of the frustum values of the cameras and scale\n\t\t// the values so that the near plane's position does not change in world space,\n\t\t// although must now be relative to the new union camera.\n\t\tvar near2 = near + zOffset;\n\t\tvar far2 = far + zOffset;\n\t\tvar left2 = left - xOffset;\n\t\tvar right2 = right + ( ipd - xOffset );\n\t\tvar top2 = topFov * far / far2 * near2;\n\t\tvar bottom2 = bottomFov * far / far2 * near2;\n\n\t\tcamera.projectionMatrix.makePerspective( left2, right2, top2, bottom2, near2, far2 );\n\n\t}\n\n\tfunction updateCamera( camera, parent ) {\n\n\t\tif ( parent === null ) {\n\n\t\t\tcamera.matrixWorld.copy( camera.matrix );\n\n\t\t} else {\n\n\t\t\tcamera.matrixWorld.multiplyMatrices( parent.matrixWorld, camera.matrix );\n\n\t\t}\n\n\t\tcamera.matrixWorldInverse.getInverse( camera.matrixWorld );\n\n\t}\n\n\tthis.getCamera = function ( camera ) {\n\n\t\tcameraVR.near = cameraR.near = cameraL.near = camera.near;\n\t\tcameraVR.far = cameraR.far = cameraL.far = camera.far;\n\n\t\tif ( _currentDepthNear !== cameraVR.near || _currentDepthFar !== cameraVR.far ) {\n\n\t\t\t// Note that the new renderState won't apply until the next frame. See #18320\n\n\t\t\tsession.updateRenderState( {\n\t\t\t\tdepthNear: cameraVR.near,\n\t\t\t\tdepthFar: cameraVR.far\n\t\t\t} );\n\n\t\t\t_currentDepthNear = cameraVR.near;\n\t\t\t_currentDepthFar = cameraVR.far;\n\n\t\t}\n\n\t\tvar parent = camera.parent;\n\t\tvar cameras = cameraVR.cameras;\n\n\t\tupdateCamera( cameraVR, parent );\n\n\t\tfor ( var i = 0; i < cameras.length; i ++ ) {\n\n\t\t\tupdateCamera( cameras[ i ], parent );\n\n\t\t}\n\n\t\t// update camera and its children\n\n\t\tcamera.matrixWorld.copy( cameraVR.matrixWorld );\n\n\t\tvar children = camera.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].updateMatrixWorld( true );\n\n\t\t}\n\n\t\tsetProjectionFromUnion( cameraVR, cameraL, cameraR );\n\n\t\treturn cameraVR;\n\n\t};\n\n\t// Animation Loop\n\n\tvar onAnimationFrameCallback = null;\n\n\tfunction onAnimationFrame( time, frame ) {\n\n\t\tpose = frame.getViewerPose( referenceSpace );\n\n\t\tif ( pose !== null ) {\n\n\t\t\tvar views = pose.views;\n\t\t\tvar baseLayer = session.renderState.baseLayer;\n\n\t\t\trenderer.setFramebuffer( baseLayer.framebuffer );\n\n\t\t\tfor ( var i = 0; i < views.length; i ++ ) {\n\n\t\t\t\tvar view = views[ i ];\n\t\t\t\tvar viewport = baseLayer.getViewport( view );\n\n\t\t\t\tvar camera = cameraVR.cameras[ i ];\n\t\t\t\tcamera.matrix.fromArray( view.transform.matrix );\n\t\t\t\tcamera.projectionMatrix.fromArray( view.projectionMatrix );\n\t\t\t\tcamera.viewport.set( viewport.x, viewport.y, viewport.width, viewport.height );\n\n\t\t\t\tif ( i === 0 ) {\n\n\t\t\t\t\tcameraVR.matrix.copy( camera.matrix );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tvar inputSources = session.inputSources;\n\n\t\tfor ( var i = 0; i < controllers.length; i ++ ) {\n\n\t\t\tvar controller = controllers[ i ];\n\n\t\t\tvar inputSource = inputSources[ i ];\n\n\t\t\tvar inputPose = null;\n\t\t\tvar gripPose = null;\n\n\t\t\tif ( inputSource ) {\n\n\t\t\t\tif ( controller.targetRay ) {\n\n\t\t\t\t\tinputPose = frame.getPose( inputSource.targetRaySpace, referenceSpace );\n\n\t\t\t\t\tif ( inputPose !== null ) {\n\n\t\t\t\t\t\tcontroller.targetRay.matrix.fromArray( inputPose.transform.matrix );\n\t\t\t\t\t\tcontroller.targetRay.matrix.decompose( controller.targetRay.position, controller.targetRay.rotation, controller.targetRay.scale );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( controller.grip && inputSource.gripSpace ) {\n\n\t\t\t\t\tgripPose = frame.getPose( inputSource.gripSpace, referenceSpace );\n\n\t\t\t\t\tif ( gripPose !== null ) {\n\n\t\t\t\t\t\tcontroller.grip.matrix.fromArray( gripPose.transform.matrix );\n\t\t\t\t\t\tcontroller.grip.matrix.decompose( controller.grip.position, controller.grip.rotation, controller.grip.scale );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( controller.targetRay ) {\n\n\t\t\t\tcontroller.targetRay.visible = inputPose !== null;\n\n\t\t\t}\n\n\t\t\tif ( controller.grip ) {\n\n\t\t\t\tcontroller.grip.visible = gripPose !== null;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( onAnimationFrameCallback ) onAnimationFrameCallback( time, frame );\n\n\t}\n\n\tvar animation = new WebGLAnimation();\n\tanimation.setAnimationLoop( onAnimationFrame );\n\n\tthis.setAnimationLoop = function ( callback ) {\n\n\t\tonAnimationFrameCallback = callback;\n\n\t};\n\n\tthis.dispose = function () {};\n\n}\n\nObject.assign( WebXRManager.prototype, EventDispatcher.prototype );\n\nexport { WebXRManager };\n","/**\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author szimek / https://github.com/szimek/\n * @author tschw\n */\n\nimport {\n\tRGBAFormat,\n\tHalfFloatType,\n\tFloatType,\n\tUnsignedByteType,\n\tLinearEncoding,\n\tLinearToneMapping,\n\tBackSide\n} from '../constants.js';\nimport { MathUtils } from '../math/MathUtils.js';\nimport { DataTexture } from '../textures/DataTexture.js';\nimport { Frustum } from '../math/Frustum.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { UniformsLib } from './shaders/UniformsLib.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Vector4 } from '../math/Vector4.js';\nimport { Scene } from '../scenes/Scene.js';\nimport { WebGLAnimation } from './webgl/WebGLAnimation.js';\nimport { WebGLAttributes } from './webgl/WebGLAttributes.js';\nimport { WebGLBackground } from './webgl/WebGLBackground.js';\nimport { WebGLBufferRenderer } from './webgl/WebGLBufferRenderer.js';\nimport { WebGLCapabilities } from './webgl/WebGLCapabilities.js';\nimport { WebGLClipping } from './webgl/WebGLClipping.js';\nimport { WebGLExtensions } from './webgl/WebGLExtensions.js';\nimport { WebGLGeometries } from './webgl/WebGLGeometries.js';\nimport { WebGLIndexedBufferRenderer } from './webgl/WebGLIndexedBufferRenderer.js';\nimport { WebGLInfo } from './webgl/WebGLInfo.js';\nimport { WebGLMorphtargets } from './webgl/WebGLMorphtargets.js';\nimport { WebGLObjects } from './webgl/WebGLObjects.js';\nimport { WebGLPrograms } from './webgl/WebGLPrograms.js';\nimport { WebGLProperties } from './webgl/WebGLProperties.js';\nimport { WebGLRenderLists } from './webgl/WebGLRenderLists.js';\nimport { WebGLRenderStates } from './webgl/WebGLRenderStates.js';\nimport { WebGLShadowMap } from './webgl/WebGLShadowMap.js';\nimport { WebGLState } from './webgl/WebGLState.js';\nimport { WebGLTextures } from './webgl/WebGLTextures.js';\nimport { WebGLUniforms } from './webgl/WebGLUniforms.js';\nimport { WebGLUtils } from './webgl/WebGLUtils.js';\nimport { WebXRManager } from './webxr/WebXRManager.js';\n\nfunction WebGLRenderer( parameters ) {\n\n\tparameters = parameters || {};\n\n\tvar _canvas = parameters.canvas !== undefined ? parameters.canvas : document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' ),\n\t\t_context = parameters.context !== undefined ? parameters.context : null,\n\n\t\t_alpha = parameters.alpha !== undefined ? parameters.alpha : false,\n\t\t_depth = parameters.depth !== undefined ? parameters.depth : true,\n\t\t_stencil = parameters.stencil !== undefined ? parameters.stencil : true,\n\t\t_antialias = parameters.antialias !== undefined ? parameters.antialias : false,\n\t\t_premultipliedAlpha = parameters.premultipliedAlpha !== undefined ? parameters.premultipliedAlpha : true,\n\t\t_preserveDrawingBuffer = parameters.preserveDrawingBuffer !== undefined ? parameters.preserveDrawingBuffer : false,\n\t\t_powerPreference = parameters.powerPreference !== undefined ? parameters.powerPreference : 'default',\n\t\t_failIfMajorPerformanceCaveat = parameters.failIfMajorPerformanceCaveat !== undefined ? parameters.failIfMajorPerformanceCaveat : false;\n\n\tvar currentRenderList = null;\n\tvar currentRenderState = null;\n\n\t// public properties\n\n\tthis.domElement = _canvas;\n\n\t// Debug configuration container\n\tthis.debug = {\n\n\t\t/**\n\t\t * Enables error checking and reporting when shader programs are being compiled\n\t\t * @type {boolean}\n\t\t */\n\t\tcheckShaderErrors: true\n\t};\n\n\t// clearing\n\n\tthis.autoClear = true;\n\tthis.autoClearColor = true;\n\tthis.autoClearDepth = true;\n\tthis.autoClearStencil = true;\n\n\t// scene graph\n\n\tthis.sortObjects = true;\n\n\t// user-defined clipping\n\n\tthis.clippingPlanes = [];\n\tthis.localClippingEnabled = false;\n\n\t// physically based shading\n\n\tthis.gammaFactor = 2.0;\t// for backwards compatibility\n\tthis.outputEncoding = LinearEncoding;\n\n\t// physical lights\n\n\tthis.physicallyCorrectLights = false;\n\n\t// tone mapping\n\n\tthis.toneMapping = LinearToneMapping;\n\tthis.toneMappingExposure = 1.0;\n\tthis.toneMappingWhitePoint = 1.0;\n\n\t// morphs\n\n\tthis.maxMorphTargets = 8;\n\tthis.maxMorphNormals = 4;\n\n\t// internal properties\n\n\tvar _this = this,\n\n\t\t_isContextLost = false,\n\n\t\t// internal state cache\n\n\t\t_framebuffer = null,\n\n\t\t_currentActiveCubeFace = 0,\n\t\t_currentActiveMipmapLevel = 0,\n\t\t_currentRenderTarget = null,\n\t\t_currentFramebuffer = null,\n\t\t_currentMaterialId = - 1,\n\n\t\t// geometry and program caching\n\n\t\t_currentGeometryProgram = {\n\t\t\tgeometry: null,\n\t\t\tprogram: null,\n\t\t\twireframe: false\n\t\t},\n\n\t\t_currentCamera = null,\n\t\t_currentArrayCamera = null,\n\n\t\t_currentViewport = new Vector4(),\n\t\t_currentScissor = new Vector4(),\n\t\t_currentScissorTest = null,\n\n\t\t//\n\n\t\t_width = _canvas.width,\n\t\t_height = _canvas.height,\n\n\t\t_pixelRatio = 1,\n\t\t_opaqueSort = null,\n\t\t_transparentSort = null,\n\n\t\t_viewport = new Vector4( 0, 0, _width, _height ),\n\t\t_scissor = new Vector4( 0, 0, _width, _height ),\n\t\t_scissorTest = false,\n\n\t\t// frustum\n\n\t\t_frustum = new Frustum(),\n\n\t\t// clipping\n\n\t\t_clipping = new WebGLClipping(),\n\t\t_clippingEnabled = false,\n\t\t_localClippingEnabled = false,\n\n\t\t// camera matrices cache\n\n\t\t_projScreenMatrix = new Matrix4(),\n\n\t\t_vector3 = new Vector3();\n\n\tfunction getTargetPixelRatio() {\n\n\t\treturn _currentRenderTarget === null ? _pixelRatio : 1;\n\n\t}\n\n\t// initialize\n\n\tvar _gl;\n\n\ttry {\n\n\t\tvar contextAttributes = {\n\t\t\talpha: _alpha,\n\t\t\tdepth: _depth,\n\t\t\tstencil: _stencil,\n\t\t\tantialias: _antialias,\n\t\t\tpremultipliedAlpha: _premultipliedAlpha,\n\t\t\tpreserveDrawingBuffer: _preserveDrawingBuffer,\n\t\t\tpowerPreference: _powerPreference,\n\t\t\tfailIfMajorPerformanceCaveat: _failIfMajorPerformanceCaveat,\n\t\t\txrCompatible: true\n\t\t};\n\n\t\t// event listeners must be registered before WebGL context is created, see #12753\n\n\t\t_canvas.addEventListener( 'webglcontextlost', onContextLost, false );\n\t\t_canvas.addEventListener( 'webglcontextrestored', onContextRestore, false );\n\n\t\t_gl = _context || _canvas.getContext( 'webgl', contextAttributes ) || _canvas.getContext( 'experimental-webgl', contextAttributes );\n\n\t\tif ( _gl === null ) {\n\n\t\t\tif ( _canvas.getContext( 'webgl' ) !== null ) {\n\n\t\t\t\tthrow new Error( 'Error creating WebGL context with your selected attributes.' );\n\n\t\t\t} else {\n\n\t\t\t\tthrow new Error( 'Error creating WebGL context.' );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Some experimental-webgl implementations do not have getShaderPrecisionFormat\n\n\t\tif ( _gl.getShaderPrecisionFormat === undefined ) {\n\n\t\t\t_gl.getShaderPrecisionFormat = function () {\n\n\t\t\t\treturn { 'rangeMin': 1, 'rangeMax': 1, 'precision': 1 };\n\n\t\t\t};\n\n\t\t}\n\n\t} catch ( error ) {\n\n\t\tconsole.error( 'THREE.WebGLRenderer: ' + error.message );\n\t\tthrow error;\n\n\t}\n\n\tvar extensions, capabilities, state, info;\n\tvar properties, textures, attributes, geometries, objects;\n\tvar programCache, renderLists, renderStates;\n\n\tvar background, morphtargets, bufferRenderer, indexedBufferRenderer;\n\n\tvar utils;\n\n\tfunction initGLContext() {\n\n\t\textensions = new WebGLExtensions( _gl );\n\n\t\tcapabilities = new WebGLCapabilities( _gl, extensions, parameters );\n\n\t\tif ( capabilities.isWebGL2 === false ) {\n\n\t\t\textensions.get( 'WEBGL_depth_texture' );\n\t\t\textensions.get( 'OES_texture_float' );\n\t\t\textensions.get( 'OES_texture_half_float' );\n\t\t\textensions.get( 'OES_texture_half_float_linear' );\n\t\t\textensions.get( 'OES_standard_derivatives' );\n\t\t\textensions.get( 'OES_element_index_uint' );\n\t\t\textensions.get( 'ANGLE_instanced_arrays' );\n\n\t\t}\n\n\t\textensions.get( 'OES_texture_float_linear' );\n\n\t\tutils = new WebGLUtils( _gl, extensions, capabilities );\n\n\t\tstate = new WebGLState( _gl, extensions, capabilities );\n\t\tstate.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor() );\n\t\tstate.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor() );\n\n\t\tinfo = new WebGLInfo( _gl );\n\t\tproperties = new WebGLProperties();\n\t\ttextures = new WebGLTextures( _gl, extensions, state, properties, capabilities, utils, info );\n\t\tattributes = new WebGLAttributes( _gl, capabilities );\n\t\tgeometries = new WebGLGeometries( _gl, attributes, info );\n\t\tobjects = new WebGLObjects( _gl, geometries, attributes, info );\n\t\tmorphtargets = new WebGLMorphtargets( _gl );\n\t\tprogramCache = new WebGLPrograms( _this, extensions, capabilities );\n\t\trenderLists = new WebGLRenderLists();\n\t\trenderStates = new WebGLRenderStates();\n\n\t\tbackground = new WebGLBackground( _this, state, objects, _premultipliedAlpha );\n\n\t\tbufferRenderer = new WebGLBufferRenderer( _gl, extensions, info, capabilities );\n\t\tindexedBufferRenderer = new WebGLIndexedBufferRenderer( _gl, extensions, info, capabilities );\n\n\t\tinfo.programs = programCache.programs;\n\n\t\t_this.capabilities = capabilities;\n\t\t_this.extensions = extensions;\n\t\t_this.properties = properties;\n\t\t_this.renderLists = renderLists;\n\t\t_this.state = state;\n\t\t_this.info = info;\n\n\t}\n\n\tinitGLContext();\n\n\t// xr\n\n\tvar xr = new WebXRManager( _this, _gl );\n\n\tthis.xr = xr;\n\n\t// shadow map\n\n\tvar shadowMap = new WebGLShadowMap( _this, objects, capabilities.maxTextureSize );\n\n\tthis.shadowMap = shadowMap;\n\n\t// API\n\n\tthis.getContext = function () {\n\n\t\treturn _gl;\n\n\t};\n\n\tthis.getContextAttributes = function () {\n\n\t\treturn _gl.getContextAttributes();\n\n\t};\n\n\tthis.forceContextLoss = function () {\n\n\t\tvar extension = extensions.get( 'WEBGL_lose_context' );\n\t\tif ( extension ) extension.loseContext();\n\n\t};\n\n\tthis.forceContextRestore = function () {\n\n\t\tvar extension = extensions.get( 'WEBGL_lose_context' );\n\t\tif ( extension ) extension.restoreContext();\n\n\t};\n\n\tthis.getPixelRatio = function () {\n\n\t\treturn _pixelRatio;\n\n\t};\n\n\tthis.setPixelRatio = function ( value ) {\n\n\t\tif ( value === undefined ) return;\n\n\t\t_pixelRatio = value;\n\n\t\tthis.setSize( _width, _height, false );\n\n\t};\n\n\tthis.getSize = function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'WebGLRenderer: .getsize() now requires a Vector2 as an argument' );\n\n\t\t\ttarget = new Vector2();\n\n\t\t}\n\n\t\treturn target.set( _width, _height );\n\n\t};\n\n\tthis.setSize = function ( width, height, updateStyle ) {\n\n\t\tif ( xr.isPresenting ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer: Can\\'t change size while VR device is presenting.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\t_width = width;\n\t\t_height = height;\n\n\t\t_canvas.width = Math.floor( width * _pixelRatio );\n\t\t_canvas.height = Math.floor( height * _pixelRatio );\n\n\t\tif ( updateStyle !== false ) {\n\n\t\t\t_canvas.style.width = width + 'px';\n\t\t\t_canvas.style.height = height + 'px';\n\n\t\t}\n\n\t\tthis.setViewport( 0, 0, width, height );\n\n\t};\n\n\tthis.getDrawingBufferSize = function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'WebGLRenderer: .getdrawingBufferSize() now requires a Vector2 as an argument' );\n\n\t\t\ttarget = new Vector2();\n\n\t\t}\n\n\t\treturn target.set( _width * _pixelRatio, _height * _pixelRatio ).floor();\n\n\t};\n\n\tthis.setDrawingBufferSize = function ( width, height, pixelRatio ) {\n\n\t\t_width = width;\n\t\t_height = height;\n\n\t\t_pixelRatio = pixelRatio;\n\n\t\t_canvas.width = Math.floor( width * pixelRatio );\n\t\t_canvas.height = Math.floor( height * pixelRatio );\n\n\t\tthis.setViewport( 0, 0, width, height );\n\n\t};\n\n\tthis.getCurrentViewport = function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'WebGLRenderer: .getCurrentViewport() now requires a Vector4 as an argument' );\n\n\t\t\ttarget = new Vector4();\n\n\t\t}\n\n\t\treturn target.copy( _currentViewport );\n\n\t};\n\n\tthis.getViewport = function ( target ) {\n\n\t\treturn target.copy( _viewport );\n\n\t};\n\n\tthis.setViewport = function ( x, y, width, height ) {\n\n\t\tif ( x.isVector4 ) {\n\n\t\t\t_viewport.set( x.x, x.y, x.z, x.w );\n\n\t\t} else {\n\n\t\t\t_viewport.set( x, y, width, height );\n\n\t\t}\n\n\t\tstate.viewport( _currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor() );\n\n\t};\n\n\tthis.getScissor = function ( target ) {\n\n\t\treturn target.copy( _scissor );\n\n\t};\n\n\tthis.setScissor = function ( x, y, width, height ) {\n\n\t\tif ( x.isVector4 ) {\n\n\t\t\t_scissor.set( x.x, x.y, x.z, x.w );\n\n\t\t} else {\n\n\t\t\t_scissor.set( x, y, width, height );\n\n\t\t}\n\n\t\tstate.scissor( _currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor() );\n\n\t};\n\n\tthis.getScissorTest = function () {\n\n\t\treturn _scissorTest;\n\n\t};\n\n\tthis.setScissorTest = function ( boolean ) {\n\n\t\tstate.setScissorTest( _scissorTest = boolean );\n\n\t};\n\n\tthis.setOpaqueSort = function ( method ) {\n\n\t\t_opaqueSort = method;\n\n\t};\n\n\tthis.setTransparentSort = function ( method ) {\n\n\t\t_transparentSort = method;\n\n\t};\n\n\t// Clearing\n\n\tthis.getClearColor = function () {\n\n\t\treturn background.getClearColor();\n\n\t};\n\n\tthis.setClearColor = function () {\n\n\t\tbackground.setClearColor.apply( background, arguments );\n\n\t};\n\n\tthis.getClearAlpha = function () {\n\n\t\treturn background.getClearAlpha();\n\n\t};\n\n\tthis.setClearAlpha = function () {\n\n\t\tbackground.setClearAlpha.apply( background, arguments );\n\n\t};\n\n\tthis.clear = function ( color, depth, stencil ) {\n\n\t\tvar bits = 0;\n\n\t\tif ( color === undefined || color ) bits |= _gl.COLOR_BUFFER_BIT;\n\t\tif ( depth === undefined || depth ) bits |= _gl.DEPTH_BUFFER_BIT;\n\t\tif ( stencil === undefined || stencil ) bits |= _gl.STENCIL_BUFFER_BIT;\n\n\t\t_gl.clear( bits );\n\n\t};\n\n\tthis.clearColor = function () {\n\n\t\tthis.clear( true, false, false );\n\n\t};\n\n\tthis.clearDepth = function () {\n\n\t\tthis.clear( false, true, false );\n\n\t};\n\n\tthis.clearStencil = function () {\n\n\t\tthis.clear( false, false, true );\n\n\t};\n\n\t//\n\n\tthis.dispose = function () {\n\n\t\t_canvas.removeEventListener( 'webglcontextlost', onContextLost, false );\n\t\t_canvas.removeEventListener( 'webglcontextrestored', onContextRestore, false );\n\n\t\trenderLists.dispose();\n\t\trenderStates.dispose();\n\t\tproperties.dispose();\n\t\tobjects.dispose();\n\n\t\txr.dispose();\n\n\t\tanimation.stop();\n\n\t\tthis.forceContextLoss();\n\n\t};\n\n\t// Events\n\n\tfunction onContextLost( event ) {\n\n\t\tevent.preventDefault();\n\n\t\tconsole.log( 'THREE.WebGLRenderer: Context Lost.' );\n\n\t\t_isContextLost = true;\n\n\t}\n\n\tfunction onContextRestore( /* event */ ) {\n\n\t\tconsole.log( 'THREE.WebGLRenderer: Context Restored.' );\n\n\t\t_isContextLost = false;\n\n\t\tinitGLContext();\n\n\t}\n\n\tfunction onMaterialDispose( event ) {\n\n\t\tvar material = event.target;\n\n\t\tmaterial.removeEventListener( 'dispose', onMaterialDispose );\n\n\t\tdeallocateMaterial( material );\n\n\t}\n\n\t// Buffer deallocation\n\n\tfunction deallocateMaterial( material ) {\n\n\t\treleaseMaterialProgramReference( material );\n\n\t\tproperties.remove( material );\n\n\t}\n\n\n\tfunction releaseMaterialProgramReference( material ) {\n\n\t\tvar programInfo = properties.get( material ).program;\n\n\t\tmaterial.program = undefined;\n\n\t\tif ( programInfo !== undefined ) {\n\n\t\t\tprogramCache.releaseProgram( programInfo );\n\n\t\t}\n\n\t}\n\n\t// Buffer rendering\n\n\tfunction renderObjectImmediate( object, program ) {\n\n\t\tobject.render( function ( object ) {\n\n\t\t\t_this.renderBufferImmediate( object, program );\n\n\t\t} );\n\n\t}\n\n\tthis.renderBufferImmediate = function ( object, program ) {\n\n\t\tstate.initAttributes();\n\n\t\tvar buffers = properties.get( object );\n\n\t\tif ( object.hasPositions && ! buffers.position ) buffers.position = _gl.createBuffer();\n\t\tif ( object.hasNormals && ! buffers.normal ) buffers.normal = _gl.createBuffer();\n\t\tif ( object.hasUvs && ! buffers.uv ) buffers.uv = _gl.createBuffer();\n\t\tif ( object.hasColors && ! buffers.color ) buffers.color = _gl.createBuffer();\n\n\t\tvar programAttributes = program.getAttributes();\n\n\t\tif ( object.hasPositions ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.position );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.positionArray, _gl.DYNAMIC_DRAW );\n\n\t\t\tstate.enableAttribute( programAttributes.position );\n\t\t\t_gl.vertexAttribPointer( programAttributes.position, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasNormals ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.normal );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.normalArray, _gl.DYNAMIC_DRAW );\n\n\t\t\tstate.enableAttribute( programAttributes.normal );\n\t\t\t_gl.vertexAttribPointer( programAttributes.normal, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasUvs ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.uv );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.uvArray, _gl.DYNAMIC_DRAW );\n\n\t\t\tstate.enableAttribute( programAttributes.uv );\n\t\t\t_gl.vertexAttribPointer( programAttributes.uv, 2, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tif ( object.hasColors ) {\n\n\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffers.color );\n\t\t\t_gl.bufferData( _gl.ARRAY_BUFFER, object.colorArray, _gl.DYNAMIC_DRAW );\n\n\t\t\tstate.enableAttribute( programAttributes.color );\n\t\t\t_gl.vertexAttribPointer( programAttributes.color, 3, _gl.FLOAT, false, 0, 0 );\n\n\t\t}\n\n\t\tstate.disableUnusedAttributes();\n\n\t\t_gl.drawArrays( _gl.TRIANGLES, 0, object.count );\n\n\t\tobject.count = 0;\n\n\t};\n\n\tvar tempScene = new Scene();\n\n\tthis.renderBufferDirect = function ( camera, scene, geometry, material, object, group ) {\n\n\t\tif ( scene === null ) scene = tempScene; // renderBufferDirect second parameter used to be fog (could be null)\n\n\t\tvar frontFaceCW = ( object.isMesh && object.matrixWorld.determinant() < 0 );\n\n\t\tvar program = setProgram( camera, scene, material, object );\n\n\t\tstate.setMaterial( material, frontFaceCW );\n\n\t\tvar updateBuffers = false;\n\n\t\tif ( _currentGeometryProgram.geometry !== geometry.id ||\n\t\t\t_currentGeometryProgram.program !== program.id ||\n\t\t\t_currentGeometryProgram.wireframe !== ( material.wireframe === true ) ) {\n\n\t\t\t_currentGeometryProgram.geometry = geometry.id;\n\t\t\t_currentGeometryProgram.program = program.id;\n\t\t\t_currentGeometryProgram.wireframe = material.wireframe === true;\n\t\t\tupdateBuffers = true;\n\n\t\t}\n\n\t\tif ( material.morphTargets || material.morphNormals ) {\n\n\t\t\tmorphtargets.update( object, geometry, material, program );\n\n\t\t\tupdateBuffers = true;\n\n\t\t}\n\n\t\t//\n\n\t\tvar index = geometry.index;\n\t\tvar position = geometry.attributes.position;\n\n\t\t//\n\n\t\tif ( index === null ) {\n\n\t\t\tif ( position === undefined || position.count === 0 ) return;\n\n\t\t} else if ( index.count === 0 ) {\n\n\t\t\treturn;\n\n\t\t}\n\n\t\t//\n\n\t\tvar rangeFactor = 1;\n\n\t\tif ( material.wireframe === true ) {\n\n\t\t\tindex = geometries.getWireframeAttribute( geometry );\n\t\t\trangeFactor = 2;\n\n\t\t}\n\n\t\tvar attribute;\n\t\tvar renderer = bufferRenderer;\n\n\t\tif ( index !== null ) {\n\n\t\t\tattribute = attributes.get( index );\n\n\t\t\trenderer = indexedBufferRenderer;\n\t\t\trenderer.setIndex( attribute );\n\n\t\t}\n\n\t\tif ( updateBuffers ) {\n\n\t\t\tsetupVertexAttributes( object, geometry, material, program );\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\t_gl.bindBuffer( _gl.ELEMENT_ARRAY_BUFFER, attribute.buffer );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tvar dataCount = ( index !== null ) ? index.count : position.count;\n\n\t\tvar rangeStart = geometry.drawRange.start * rangeFactor;\n\t\tvar rangeCount = geometry.drawRange.count * rangeFactor;\n\n\t\tvar groupStart = group !== null ? group.start * rangeFactor : 0;\n\t\tvar groupCount = group !== null ? group.count * rangeFactor : Infinity;\n\n\t\tvar drawStart = Math.max( rangeStart, groupStart );\n\t\tvar drawEnd = Math.min( dataCount, rangeStart + rangeCount, groupStart + groupCount ) - 1;\n\n\t\tvar drawCount = Math.max( 0, drawEnd - drawStart + 1 );\n\n\t\tif ( drawCount === 0 ) return;\n\n\t\t//\n\n\t\tif ( object.isMesh ) {\n\n\t\t\tif ( material.wireframe === true ) {\n\n\t\t\t\tstate.setLineWidth( material.wireframeLinewidth * getTargetPixelRatio() );\n\t\t\t\trenderer.setMode( _gl.LINES );\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setMode( _gl.TRIANGLES );\n\n\t\t\t}\n\n\t\t} else if ( object.isLine ) {\n\n\t\t\tvar lineWidth = material.linewidth;\n\n\t\t\tif ( lineWidth === undefined ) lineWidth = 1; // Not using Line*Material\n\n\t\t\tstate.setLineWidth( lineWidth * getTargetPixelRatio() );\n\n\t\t\tif ( object.isLineSegments ) {\n\n\t\t\t\trenderer.setMode( _gl.LINES );\n\n\t\t\t} else if ( object.isLineLoop ) {\n\n\t\t\t\trenderer.setMode( _gl.LINE_LOOP );\n\n\t\t\t} else {\n\n\t\t\t\trenderer.setMode( _gl.LINE_STRIP );\n\n\t\t\t}\n\n\t\t} else if ( object.isPoints ) {\n\n\t\t\trenderer.setMode( _gl.POINTS );\n\n\t\t} else if ( object.isSprite ) {\n\n\t\t\trenderer.setMode( _gl.TRIANGLES );\n\n\t\t}\n\n\t\tif ( object.isInstancedMesh ) {\n\n\t\t\trenderer.renderInstances( geometry, drawStart, drawCount, object.count );\n\n\t\t} else if ( geometry.isInstancedBufferGeometry ) {\n\n\t\t\trenderer.renderInstances( geometry, drawStart, drawCount, geometry.maxInstancedCount );\n\n\t\t} else {\n\n\t\t\trenderer.render( drawStart, drawCount );\n\n\t\t}\n\n\t};\n\n\tfunction setupVertexAttributes( object, geometry, material, program ) {\n\n\t\tif ( capabilities.isWebGL2 === false && ( object.isInstancedMesh || geometry.isInstancedBufferGeometry ) ) {\n\n\t\t\tif ( extensions.get( 'ANGLE_instanced_arrays' ) === null ) return;\n\n\t\t}\n\n\t\tstate.initAttributes();\n\n\t\tvar geometryAttributes = geometry.attributes;\n\n\t\tvar programAttributes = program.getAttributes();\n\n\t\tvar materialDefaultAttributeValues = material.defaultAttributeValues;\n\n\t\tfor ( var name in programAttributes ) {\n\n\t\t\tvar programAttribute = programAttributes[ name ];\n\n\t\t\tif ( programAttribute >= 0 ) {\n\n\t\t\t\tvar geometryAttribute = geometryAttributes[ name ];\n\n\t\t\t\tif ( geometryAttribute !== undefined ) {\n\n\t\t\t\t\tvar normalized = geometryAttribute.normalized;\n\t\t\t\t\tvar size = geometryAttribute.itemSize;\n\n\t\t\t\t\tvar attribute = attributes.get( geometryAttribute );\n\n\t\t\t\t\t// TODO Attribute may not be available on context restore\n\n\t\t\t\t\tif ( attribute === undefined ) continue;\n\n\t\t\t\t\tvar buffer = attribute.buffer;\n\t\t\t\t\tvar type = attribute.type;\n\t\t\t\t\tvar bytesPerElement = attribute.bytesPerElement;\n\n\t\t\t\t\tif ( geometryAttribute.isInterleavedBufferAttribute ) {\n\n\t\t\t\t\t\tvar data = geometryAttribute.data;\n\t\t\t\t\t\tvar stride = data.stride;\n\t\t\t\t\t\tvar offset = geometryAttribute.offset;\n\n\t\t\t\t\t\tif ( data && data.isInstancedInterleavedBuffer ) {\n\n\t\t\t\t\t\t\tstate.enableAttributeAndDivisor( programAttribute, data.meshPerAttribute );\n\n\t\t\t\t\t\t\tif ( geometry.maxInstancedCount === undefined ) {\n\n\t\t\t\t\t\t\t\tgeometry.maxInstancedCount = data.meshPerAttribute * data.count;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.enableAttribute( programAttribute );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffer );\n\t\t\t\t\t\t_gl.vertexAttribPointer( programAttribute, size, type, normalized, stride * bytesPerElement, offset * bytesPerElement );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tif ( geometryAttribute.isInstancedBufferAttribute ) {\n\n\t\t\t\t\t\t\tstate.enableAttributeAndDivisor( programAttribute, geometryAttribute.meshPerAttribute );\n\n\t\t\t\t\t\t\tif ( geometry.maxInstancedCount === undefined ) {\n\n\t\t\t\t\t\t\t\tgeometry.maxInstancedCount = geometryAttribute.meshPerAttribute * geometryAttribute.count;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tstate.enableAttribute( programAttribute );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffer );\n\t\t\t\t\t\t_gl.vertexAttribPointer( programAttribute, size, type, normalized, 0, 0 );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( name === 'instanceMatrix' ) {\n\n\t\t\t\t\tvar attribute = attributes.get( object.instanceMatrix );\n\n\t\t\t\t\t// TODO Attribute may not be available on context restore\n\n\t\t\t\t\tif ( attribute === undefined ) continue;\n\n\t\t\t\t\tvar buffer = attribute.buffer;\n\t\t\t\t\tvar type = attribute.type;\n\n\t\t\t\t\tstate.enableAttributeAndDivisor( programAttribute + 0, 1 );\n\t\t\t\t\tstate.enableAttributeAndDivisor( programAttribute + 1, 1 );\n\t\t\t\t\tstate.enableAttributeAndDivisor( programAttribute + 2, 1 );\n\t\t\t\t\tstate.enableAttributeAndDivisor( programAttribute + 3, 1 );\n\n\t\t\t\t\t_gl.bindBuffer( _gl.ARRAY_BUFFER, buffer );\n\n\t\t\t\t\t_gl.vertexAttribPointer( programAttribute + 0, 4, type, false, 64, 0 );\n\t\t\t\t\t_gl.vertexAttribPointer( programAttribute + 1, 4, type, false, 64, 16 );\n\t\t\t\t\t_gl.vertexAttribPointer( programAttribute + 2, 4, type, false, 64, 32 );\n\t\t\t\t\t_gl.vertexAttribPointer( programAttribute + 3, 4, type, false, 64, 48 );\n\n\t\t\t\t} else if ( materialDefaultAttributeValues !== undefined ) {\n\n\t\t\t\t\tvar value = materialDefaultAttributeValues[ name ];\n\n\t\t\t\t\tif ( value !== undefined ) {\n\n\t\t\t\t\t\tswitch ( value.length ) {\n\n\t\t\t\t\t\t\tcase 2:\n\t\t\t\t\t\t\t\t_gl.vertexAttrib2fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 3:\n\t\t\t\t\t\t\t\t_gl.vertexAttrib3fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tcase 4:\n\t\t\t\t\t\t\t\t_gl.vertexAttrib4fv( programAttribute, value );\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\t\t_gl.vertexAttrib1fv( programAttribute, value );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tstate.disableUnusedAttributes();\n\n\t}\n\n\t// Compile\n\n\tthis.compile = function ( scene, camera ) {\n\n\t\tcurrentRenderState = renderStates.get( scene, camera );\n\t\tcurrentRenderState.init();\n\n\t\tscene.traverse( function ( object ) {\n\n\t\t\tif ( object.isLight ) {\n\n\t\t\t\tcurrentRenderState.pushLight( object );\n\n\t\t\t\tif ( object.castShadow ) {\n\n\t\t\t\t\tcurrentRenderState.pushShadow( object );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t\tcurrentRenderState.setupLights( camera );\n\n\t\tvar compiled = {};\n\n\t\tscene.traverse( function ( object ) {\n\n\t\t\tif ( object.material ) {\n\n\t\t\t\tif ( Array.isArray( object.material ) ) {\n\n\t\t\t\t\tfor ( var i = 0; i < object.material.length; i ++ ) {\n\n\t\t\t\t\t\tif ( object.material[ i ].uuid in compiled === false ) {\n\n\t\t\t\t\t\t\tinitMaterial( object.material[ i ], scene, object );\n\t\t\t\t\t\t\tcompiled[ object.material[ i ].uuid ] = true;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t} else if ( object.material.uuid in compiled === false ) {\n\n\t\t\t\t\tinitMaterial( object.material, scene, object );\n\t\t\t\t\tcompiled[ object.material.uuid ] = true;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} );\n\n\t};\n\n\t// Animation Loop\n\n\tvar onAnimationFrameCallback = null;\n\n\tfunction onAnimationFrame( time ) {\n\n\t\tif ( xr.isPresenting ) return;\n\t\tif ( onAnimationFrameCallback ) onAnimationFrameCallback( time );\n\n\t}\n\n\tvar animation = new WebGLAnimation();\n\tanimation.setAnimationLoop( onAnimationFrame );\n\n\tif ( typeof window !== 'undefined' ) animation.setContext( window );\n\n\tthis.setAnimationLoop = function ( callback ) {\n\n\t\tonAnimationFrameCallback = callback;\n\t\txr.setAnimationLoop( callback );\n\n\t\tanimation.start();\n\n\t};\n\n\t// Rendering\n\n\tthis.render = function ( scene, camera ) {\n\n\t\tvar renderTarget, forceClear;\n\n\t\tif ( arguments[ 2 ] !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer.render(): the renderTarget argument has been removed. Use .setRenderTarget() instead.' );\n\t\t\trenderTarget = arguments[ 2 ];\n\n\t\t}\n\n\t\tif ( arguments[ 3 ] !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.WebGLRenderer.render(): the forceClear argument has been removed. Use .clear() instead.' );\n\t\t\tforceClear = arguments[ 3 ];\n\n\t\t}\n\n\t\tif ( ! ( camera && camera.isCamera ) ) {\n\n\t\t\tconsole.error( 'THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( _isContextLost ) return;\n\n\t\t// reset caching for this frame\n\n\t\t_currentGeometryProgram.geometry = null;\n\t\t_currentGeometryProgram.program = null;\n\t\t_currentGeometryProgram.wireframe = false;\n\t\t_currentMaterialId = - 1;\n\t\t_currentCamera = null;\n\n\t\t// update scene graph\n\n\t\tif ( scene.autoUpdate === true ) scene.updateMatrixWorld();\n\n\t\t// update camera matrices and frustum\n\n\t\tif ( camera.parent === null ) camera.updateMatrixWorld();\n\n\t\tif ( xr.enabled && xr.isPresenting ) {\n\n\t\t\tcamera = xr.getCamera( camera );\n\n\t\t}\n\n\t\t//\n\n\t\tcurrentRenderState = renderStates.get( scene, camera );\n\t\tcurrentRenderState.init();\n\n\t\tscene.onBeforeRender( _this, scene, camera, renderTarget || _currentRenderTarget );\n\n\t\t_projScreenMatrix.multiplyMatrices( camera.projectionMatrix, camera.matrixWorldInverse );\n\t\t_frustum.setFromProjectionMatrix( _projScreenMatrix );\n\n\t\t_localClippingEnabled = this.localClippingEnabled;\n\t\t_clippingEnabled = _clipping.init( this.clippingPlanes, _localClippingEnabled, camera );\n\n\t\tcurrentRenderList = renderLists.get( scene, camera );\n\t\tcurrentRenderList.init();\n\n\t\tprojectObject( scene, camera, 0, _this.sortObjects );\n\n\t\tcurrentRenderList.finish();\n\n\t\tif ( _this.sortObjects === true ) {\n\n\t\t\tcurrentRenderList.sort( _opaqueSort, _transparentSort );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( _clippingEnabled ) _clipping.beginShadows();\n\n\t\tvar shadowsArray = currentRenderState.state.shadowsArray;\n\n\t\tshadowMap.render( shadowsArray, scene, camera );\n\n\t\tcurrentRenderState.setupLights( camera );\n\n\t\tif ( _clippingEnabled ) _clipping.endShadows();\n\n\t\t//\n\n\t\tif ( this.info.autoReset ) this.info.reset();\n\n\t\tif ( renderTarget !== undefined ) {\n\n\t\t\tthis.setRenderTarget( renderTarget );\n\n\t\t}\n\n\t\t//\n\n\t\tbackground.render( currentRenderList, scene, camera, forceClear );\n\n\t\t// render scene\n\n\t\tvar opaqueObjects = currentRenderList.opaque;\n\t\tvar transparentObjects = currentRenderList.transparent;\n\n\t\tif ( scene.overrideMaterial ) {\n\n\t\t\tvar overrideMaterial = scene.overrideMaterial;\n\n\t\t\tif ( opaqueObjects.length ) renderObjects( opaqueObjects, scene, camera, overrideMaterial );\n\t\t\tif ( transparentObjects.length ) renderObjects( transparentObjects, scene, camera, overrideMaterial );\n\n\t\t} else {\n\n\t\t\t// opaque pass (front-to-back order)\n\n\t\t\tif ( opaqueObjects.length ) renderObjects( opaqueObjects, scene, camera );\n\n\t\t\t// transparent pass (back-to-front order)\n\n\t\t\tif ( transparentObjects.length ) renderObjects( transparentObjects, scene, camera );\n\n\t\t}\n\n\t\t//\n\n\t\tscene.onAfterRender( _this, scene, camera );\n\n\t\t//\n\n\t\tif ( _currentRenderTarget !== null ) {\n\n\t\t\t// Generate mipmap if we're using any kind of mipmap filtering\n\n\t\t\ttextures.updateRenderTargetMipmap( _currentRenderTarget );\n\n\t\t\t// resolve multisample renderbuffers to a single-sample texture if necessary\n\n\t\t\ttextures.updateMultisampleRenderTarget( _currentRenderTarget );\n\n\t\t}\n\n\t\t// Ensure depth buffer writing is enabled so it can be cleared on next render\n\n\t\tstate.buffers.depth.setTest( true );\n\t\tstate.buffers.depth.setMask( true );\n\t\tstate.buffers.color.setMask( true );\n\n\t\tstate.setPolygonOffset( false );\n\n\t\t// _gl.finish();\n\n\t\tcurrentRenderList = null;\n\t\tcurrentRenderState = null;\n\n\t};\n\n\tfunction projectObject( object, camera, groupOrder, sortObjects ) {\n\n\t\tif ( object.visible === false ) return;\n\n\t\tvar visible = object.layers.test( camera.layers );\n\n\t\tif ( visible ) {\n\n\t\t\tif ( object.isGroup ) {\n\n\t\t\t\tgroupOrder = object.renderOrder;\n\n\t\t\t} else if ( object.isLOD ) {\n\n\t\t\t\tif ( object.autoUpdate === true ) object.update( camera );\n\n\t\t\t} else if ( object.isLight ) {\n\n\t\t\t\tcurrentRenderState.pushLight( object );\n\n\t\t\t\tif ( object.castShadow ) {\n\n\t\t\t\t\tcurrentRenderState.pushShadow( object );\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.isSprite ) {\n\n\t\t\t\tif ( ! object.frustumCulled || _frustum.intersectsSprite( object ) ) {\n\n\t\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar geometry = objects.update( object );\n\t\t\t\t\tvar material = object.material;\n\n\t\t\t\t\tif ( material.visible ) {\n\n\t\t\t\t\t\tcurrentRenderList.push( object, geometry, material, groupOrder, _vector3.z, null );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else if ( object.isImmediateRenderObject ) {\n\n\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t}\n\n\t\t\t\tcurrentRenderList.push( object, null, object.material, groupOrder, _vector3.z, null );\n\n\t\t\t} else if ( object.isMesh || object.isLine || object.isPoints ) {\n\n\t\t\t\tif ( object.isSkinnedMesh ) {\n\n\t\t\t\t\t// update skeleton only once in a frame\n\n\t\t\t\t\tif ( object.skeleton.frame !== info.render.frame ) {\n\n\t\t\t\t\t\tobject.skeleton.update();\n\t\t\t\t\t\tobject.skeleton.frame = info.render.frame;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! object.frustumCulled || _frustum.intersectsObject( object ) ) {\n\n\t\t\t\t\tif ( sortObjects ) {\n\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( object.matrixWorld )\n\t\t\t\t\t\t\t.applyMatrix4( _projScreenMatrix );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar geometry = objects.update( object );\n\t\t\t\t\tvar material = object.material;\n\n\t\t\t\t\tif ( Array.isArray( material ) ) {\n\n\t\t\t\t\t\tvar groups = geometry.groups;\n\n\t\t\t\t\t\tfor ( var i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\t\t\t\t\tvar group = groups[ i ];\n\t\t\t\t\t\t\tvar groupMaterial = material[ group.materialIndex ];\n\n\t\t\t\t\t\t\tif ( groupMaterial && groupMaterial.visible ) {\n\n\t\t\t\t\t\t\t\tcurrentRenderList.push( object, geometry, groupMaterial, groupOrder, _vector3.z, group );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( material.visible ) {\n\n\t\t\t\t\t\tcurrentRenderList.push( object, geometry, material, groupOrder, _vector3.z, null );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar children = object.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tprojectObject( children[ i ], camera, groupOrder, sortObjects );\n\n\t\t}\n\n\t}\n\n\tfunction renderObjects( renderList, scene, camera, overrideMaterial ) {\n\n\t\tfor ( var i = 0, l = renderList.length; i < l; i ++ ) {\n\n\t\t\tvar renderItem = renderList[ i ];\n\n\t\t\tvar object = renderItem.object;\n\t\t\tvar geometry = renderItem.geometry;\n\t\t\tvar material = overrideMaterial === undefined ? renderItem.material : overrideMaterial;\n\t\t\tvar group = renderItem.group;\n\n\t\t\tif ( camera.isArrayCamera ) {\n\n\t\t\t\t_currentArrayCamera = camera;\n\n\t\t\t\tvar cameras = camera.cameras;\n\n\t\t\t\tfor ( var j = 0, jl = cameras.length; j < jl; j ++ ) {\n\n\t\t\t\t\tvar camera2 = cameras[ j ];\n\n\t\t\t\t\tif ( object.layers.test( camera2.layers ) ) {\n\n\t\t\t\t\t\tstate.viewport( _currentViewport.copy( camera2.viewport ) );\n\n\t\t\t\t\t\tcurrentRenderState.setupLights( camera2 );\n\n\t\t\t\t\t\trenderObject( object, scene, camera2, geometry, material, group );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t_currentArrayCamera = null;\n\n\t\t\t\trenderObject( object, scene, camera, geometry, material, group );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction renderObject( object, scene, camera, geometry, material, group ) {\n\n\t\tobject.onBeforeRender( _this, scene, camera, geometry, material, group );\n\t\tcurrentRenderState = renderStates.get( scene, _currentArrayCamera || camera );\n\n\t\tobject.modelViewMatrix.multiplyMatrices( camera.matrixWorldInverse, object.matrixWorld );\n\t\tobject.normalMatrix.getNormalMatrix( object.modelViewMatrix );\n\n\t\tif ( object.isImmediateRenderObject ) {\n\n\t\t\tvar program = setProgram( camera, scene, material, object );\n\n\t\t\tstate.setMaterial( material );\n\n\t\t\t_currentGeometryProgram.geometry = null;\n\t\t\t_currentGeometryProgram.program = null;\n\t\t\t_currentGeometryProgram.wireframe = false;\n\n\t\t\trenderObjectImmediate( object, program );\n\n\t\t} else {\n\n\t\t\t_this.renderBufferDirect( camera, scene, geometry, material, object, group );\n\n\t\t}\n\n\t\tobject.onAfterRender( _this, scene, camera, geometry, material, group );\n\t\tcurrentRenderState = renderStates.get( scene, _currentArrayCamera || camera );\n\n\t}\n\n\tfunction initMaterial( material, scene, object ) {\n\n\t\tvar materialProperties = properties.get( material );\n\n\t\tvar lights = currentRenderState.state.lights;\n\t\tvar shadowsArray = currentRenderState.state.shadowsArray;\n\n\t\tvar lightsStateVersion = lights.state.version;\n\n\t\tvar parameters = programCache.getParameters( material, lights.state, shadowsArray, scene, _clipping.numPlanes, _clipping.numIntersection, object );\n\t\tvar programCacheKey = programCache.getProgramCacheKey( parameters );\n\n\t\tvar program = materialProperties.program;\n\t\tvar programChange = true;\n\n\t\tif ( program === undefined ) {\n\n\t\t\t// new material\n\t\t\tmaterial.addEventListener( 'dispose', onMaterialDispose );\n\n\t\t} else if ( program.cacheKey !== programCacheKey ) {\n\n\t\t\t// changed glsl or parameters\n\t\t\treleaseMaterialProgramReference( material );\n\n\t\t} else if ( materialProperties.lightsStateVersion !== lightsStateVersion ) {\n\n\t\t\tmaterialProperties.lightsStateVersion = lightsStateVersion;\n\n\t\t\tprogramChange = false;\n\n\t\t} else if ( parameters.shaderID !== undefined ) {\n\n\t\t\t// same glsl and uniform list\n\t\t\treturn;\n\n\t\t} else {\n\n\t\t\t// only rebuild uniform list\n\t\t\tprogramChange = false;\n\n\t\t}\n\n\t\tif ( programChange ) {\n\n\t\t\tprogram = programCache.acquireProgram( parameters, programCacheKey );\n\n\t\t\tmaterialProperties.program = program;\n\t\t\tmaterialProperties.uniforms = parameters.uniforms;\n\t\t\tmaterialProperties.environment = material.isMeshStandardMaterial ? scene.environment : null;\n\t\t\tmaterialProperties.outputEncoding = _this.outputEncoding;\n\t\t\tmaterial.program = program;\n\n\t\t}\n\n\t\tvar programAttributes = program.getAttributes();\n\n\t\tif ( material.morphTargets ) {\n\n\t\t\tmaterial.numSupportedMorphTargets = 0;\n\n\t\t\tfor ( var i = 0; i < _this.maxMorphTargets; i ++ ) {\n\n\t\t\t\tif ( programAttributes[ 'morphTarget' + i ] >= 0 ) {\n\n\t\t\t\t\tmaterial.numSupportedMorphTargets ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.morphNormals ) {\n\n\t\t\tmaterial.numSupportedMorphNormals = 0;\n\n\t\t\tfor ( var i = 0; i < _this.maxMorphNormals; i ++ ) {\n\n\t\t\t\tif ( programAttributes[ 'morphNormal' + i ] >= 0 ) {\n\n\t\t\t\t\tmaterial.numSupportedMorphNormals ++;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar uniforms = materialProperties.uniforms;\n\n\t\tif ( ! material.isShaderMaterial &&\n\t\t\t! material.isRawShaderMaterial ||\n\t\t\tmaterial.clipping === true ) {\n\n\t\t\tmaterialProperties.numClippingPlanes = _clipping.numPlanes;\n\t\t\tmaterialProperties.numIntersection = _clipping.numIntersection;\n\t\t\tuniforms.clippingPlanes = _clipping.uniform;\n\n\t\t}\n\n\t\tmaterialProperties.fog = scene.fog;\n\n\t\t// store the light setup it was created for\n\n\t\tmaterialProperties.needsLights = materialNeedsLights( material );\n\t\tmaterialProperties.lightsStateVersion = lightsStateVersion;\n\n\t\tif ( materialProperties.needsLights ) {\n\n\t\t\t// wire up the material to this renderer's lighting state\n\n\t\t\tuniforms.ambientLightColor.value = lights.state.ambient;\n\t\t\tuniforms.lightProbe.value = lights.state.probe;\n\t\t\tuniforms.directionalLights.value = lights.state.directional;\n\t\t\tuniforms.directionalLightShadows.value = lights.state.directionalShadow;\n\t\t\tuniforms.spotLights.value = lights.state.spot;\n\t\t\tuniforms.spotLightShadows.value = lights.state.spotShadow;\n\t\t\tuniforms.rectAreaLights.value = lights.state.rectArea;\n\t\t\tuniforms.pointLights.value = lights.state.point;\n\t\t\tuniforms.pointLightShadows.value = lights.state.pointShadow;\n\t\t\tuniforms.hemisphereLights.value = lights.state.hemi;\n\n\t\t\tuniforms.directionalShadowMap.value = lights.state.directionalShadowMap;\n\t\t\tuniforms.directionalShadowMatrix.value = lights.state.directionalShadowMatrix;\n\t\t\tuniforms.spotShadowMap.value = lights.state.spotShadowMap;\n\t\t\tuniforms.spotShadowMatrix.value = lights.state.spotShadowMatrix;\n\t\t\tuniforms.pointShadowMap.value = lights.state.pointShadowMap;\n\t\t\tuniforms.pointShadowMatrix.value = lights.state.pointShadowMatrix;\n\t\t\t// TODO (abelnation): add area lights shadow info to uniforms\n\n\t\t}\n\n\t\tvar progUniforms = materialProperties.program.getUniforms(),\n\t\t\tuniformsList =\n\t\t\t\tWebGLUniforms.seqWithValue( progUniforms.seq, uniforms );\n\n\t\tmaterialProperties.uniformsList = uniformsList;\n\n\t}\n\n\tfunction setProgram( camera, scene, material, object ) {\n\n\t\ttextures.resetTextureUnits();\n\n\t\tvar fog = scene.fog;\n\t\tvar environment = material.isMeshStandardMaterial ? scene.environment : null;\n\n\t\tvar materialProperties = properties.get( material );\n\t\tvar lights = currentRenderState.state.lights;\n\n\t\tif ( _clippingEnabled ) {\n\n\t\t\tif ( _localClippingEnabled || camera !== _currentCamera ) {\n\n\t\t\t\tvar useCache =\n\t\t\t\t\tcamera === _currentCamera &&\n\t\t\t\t\tmaterial.id === _currentMaterialId;\n\n\t\t\t\t// we might want to call this function with some ClippingGroup\n\t\t\t\t// object instead of the material, once it becomes feasible\n\t\t\t\t// (#8465, #8379)\n\t\t\t\t_clipping.setState(\n\t\t\t\t\tmaterial.clippingPlanes, material.clipIntersection, material.clipShadows,\n\t\t\t\t\tcamera, materialProperties, useCache );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.version === materialProperties.__version ) {\n\n\t\t\tif ( materialProperties.program === undefined ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t} else if ( material.fog && materialProperties.fog !== fog ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t} else if ( materialProperties.environment !== environment ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t} else if ( materialProperties.needsLights && ( materialProperties.lightsStateVersion !== lights.state.version ) ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t} else if ( materialProperties.numClippingPlanes !== undefined &&\n\t\t\t\t( materialProperties.numClippingPlanes !== _clipping.numPlanes ||\n\t\t\t\tmaterialProperties.numIntersection !== _clipping.numIntersection ) ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t} else if ( materialProperties.outputEncoding !== _this.outputEncoding ) {\n\n\t\t\t\tinitMaterial( material, scene, object );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tinitMaterial( material, scene, object );\n\t\t\tmaterialProperties.__version = material.version;\n\n\t\t}\n\n\t\tvar refreshProgram = false;\n\t\tvar refreshMaterial = false;\n\t\tvar refreshLights = false;\n\n\t\tvar program = materialProperties.program,\n\t\t\tp_uniforms = program.getUniforms(),\n\t\t\tm_uniforms = materialProperties.uniforms;\n\n\t\tif ( state.useProgram( program.program ) ) {\n\n\t\t\trefreshProgram = true;\n\t\t\trefreshMaterial = true;\n\t\t\trefreshLights = true;\n\n\t\t}\n\n\t\tif ( material.id !== _currentMaterialId ) {\n\n\t\t\t_currentMaterialId = material.id;\n\n\t\t\trefreshMaterial = true;\n\n\t\t}\n\n\t\tif ( refreshProgram || _currentCamera !== camera ) {\n\n\t\t\tp_uniforms.setValue( _gl, 'projectionMatrix', camera.projectionMatrix );\n\n\t\t\tif ( capabilities.logarithmicDepthBuffer ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'logDepthBufFC',\n\t\t\t\t\t2.0 / ( Math.log( camera.far + 1.0 ) / Math.LN2 ) );\n\n\t\t\t}\n\n\t\t\tif ( _currentCamera !== camera ) {\n\n\t\t\t\t_currentCamera = camera;\n\n\t\t\t\t// lighting uniforms depend on the camera so enforce an update\n\t\t\t\t// now, in case this material supports lights - or later, when\n\t\t\t\t// the next material that does gets activated:\n\n\t\t\t\trefreshMaterial = true;\t\t// set to true on material change\n\t\t\t\trefreshLights = true;\t\t// remains set until update done\n\n\t\t\t}\n\n\t\t\t// load material specific uniforms\n\t\t\t// (shader material also gets them for the sake of genericity)\n\n\t\t\tif ( material.isShaderMaterial ||\n\t\t\t\tmaterial.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshToonMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.envMap ) {\n\n\t\t\t\tvar uCamPos = p_uniforms.map.cameraPosition;\n\n\t\t\t\tif ( uCamPos !== undefined ) {\n\n\t\t\t\t\tuCamPos.setValue( _gl,\n\t\t\t\t\t\t_vector3.setFromMatrixPosition( camera.matrixWorld ) );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( material.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshToonMaterial ||\n\t\t\t\tmaterial.isMeshLambertMaterial ||\n\t\t\t\tmaterial.isMeshBasicMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.isShaderMaterial ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'isOrthographic', camera.isOrthographicCamera === true );\n\n\t\t\t}\n\n\t\t\tif ( material.isMeshPhongMaterial ||\n\t\t\t\tmaterial.isMeshToonMaterial ||\n\t\t\t\tmaterial.isMeshLambertMaterial ||\n\t\t\t\tmaterial.isMeshBasicMaterial ||\n\t\t\t\tmaterial.isMeshStandardMaterial ||\n\t\t\t\tmaterial.isShaderMaterial ||\n\t\t\t\tmaterial.skinning ) {\n\n\t\t\t\tp_uniforms.setValue( _gl, 'viewMatrix', camera.matrixWorldInverse );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// skinning uniforms must be set even if material didn't change\n\t\t// auto-setting of texture unit for bone texture must go before other textures\n\t\t// otherwise textures used for skinning can take over texture units reserved for other material textures\n\n\t\tif ( material.skinning ) {\n\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrix' );\n\t\t\tp_uniforms.setOptional( _gl, object, 'bindMatrixInverse' );\n\n\t\t\tvar skeleton = object.skeleton;\n\n\t\t\tif ( skeleton ) {\n\n\t\t\t\tvar bones = skeleton.bones;\n\n\t\t\t\tif ( capabilities.floatVertexTextures ) {\n\n\t\t\t\t\tif ( skeleton.boneTexture === undefined ) {\n\n\t\t\t\t\t\t// layout (1 matrix = 4 pixels)\n\t\t\t\t\t\t//      RGBA RGBA RGBA RGBA (=> column1, column2, column3, column4)\n\t\t\t\t\t\t//  with  8x8  pixel texture max   16 bones * 4 pixels =  (8 * 8)\n\t\t\t\t\t\t//       16x16 pixel texture max   64 bones * 4 pixels = (16 * 16)\n\t\t\t\t\t\t//       32x32 pixel texture max  256 bones * 4 pixels = (32 * 32)\n\t\t\t\t\t\t//       64x64 pixel texture max 1024 bones * 4 pixels = (64 * 64)\n\n\n\t\t\t\t\t\tvar size = Math.sqrt( bones.length * 4 ); // 4 pixels needed for 1 matrix\n\t\t\t\t\t\tsize = MathUtils.ceilPowerOfTwo( size );\n\t\t\t\t\t\tsize = Math.max( size, 4 );\n\n\t\t\t\t\t\tvar boneMatrices = new Float32Array( size * size * 4 ); // 4 floats per RGBA pixel\n\t\t\t\t\t\tboneMatrices.set( skeleton.boneMatrices ); // copy current values\n\n\t\t\t\t\t\tvar boneTexture = new DataTexture( boneMatrices, size, size, RGBAFormat, FloatType );\n\n\t\t\t\t\t\tskeleton.boneMatrices = boneMatrices;\n\t\t\t\t\t\tskeleton.boneTexture = boneTexture;\n\t\t\t\t\t\tskeleton.boneTextureSize = size;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tp_uniforms.setValue( _gl, 'boneTexture', skeleton.boneTexture, textures );\n\t\t\t\t\tp_uniforms.setValue( _gl, 'boneTextureSize', skeleton.boneTextureSize );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tp_uniforms.setOptional( _gl, skeleton, 'boneMatrices' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( refreshMaterial || materialProperties.receiveShadow !== object.receiveShadow ) {\n\n\t\t\tmaterialProperties.receiveShadow = object.receiveShadow;\n\t\t\tp_uniforms.setValue( _gl, 'receiveShadow', object.receiveShadow );\n\n\t\t}\n\n\t\tif ( refreshMaterial ) {\n\n\t\t\tp_uniforms.setValue( _gl, 'toneMappingExposure', _this.toneMappingExposure );\n\t\t\tp_uniforms.setValue( _gl, 'toneMappingWhitePoint', _this.toneMappingWhitePoint );\n\n\t\t\tif ( materialProperties.needsLights ) {\n\n\t\t\t\t// the current material requires lighting info\n\n\t\t\t\t// note: all lighting uniforms are always set correctly\n\t\t\t\t// they simply reference the renderer's state for their\n\t\t\t\t// values\n\t\t\t\t//\n\t\t\t\t// use the current material's .needsUpdate flags to set\n\t\t\t\t// the GL state when required\n\n\t\t\t\tmarkUniformsLightsNeedsUpdate( m_uniforms, refreshLights );\n\n\t\t\t}\n\n\t\t\t// refresh uniforms common to several materials\n\n\t\t\tif ( fog && material.fog ) {\n\n\t\t\t\trefreshUniformsFog( m_uniforms, fog );\n\n\t\t\t}\n\n\t\t\tif ( material.isMeshBasicMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\n\t\t\t} else if ( material.isMeshLambertMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\t\t\t\trefreshUniformsLambert( m_uniforms, material );\n\n\t\t\t} else if ( material.isMeshToonMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\t\t\t\trefreshUniformsToon( m_uniforms, material );\n\n\t\t\t} else if ( material.isMeshPhongMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\t\t\t\trefreshUniformsPhong( m_uniforms, material );\n\n\t\t\t} else if ( material.isMeshStandardMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material, environment );\n\n\t\t\t\tif ( material.isMeshPhysicalMaterial ) {\n\n\t\t\t\t\trefreshUniformsPhysical( m_uniforms, material, environment );\n\n\t\t\t\t} else {\n\n\t\t\t\t\trefreshUniformsStandard( m_uniforms, material, environment );\n\n\t\t\t\t}\n\n\t\t\t} else if ( material.isMeshMatcapMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\t\t\t\trefreshUniformsMatcap( m_uniforms, material );\n\n\t\t\t} else if ( material.isMeshDepthMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\t\t\t\trefreshUniformsDepth( m_uniforms, material );\n\n\t\t\t} else if ( material.isMeshDistanceMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\t\t\t\trefreshUniformsDistance( m_uniforms, material );\n\n\t\t\t} else if ( material.isMeshNormalMaterial ) {\n\n\t\t\t\trefreshUniformsCommon( m_uniforms, material );\n\t\t\t\trefreshUniformsNormal( m_uniforms, material );\n\n\t\t\t} else if ( material.isLineBasicMaterial ) {\n\n\t\t\t\trefreshUniformsLine( m_uniforms, material );\n\n\t\t\t\tif ( material.isLineDashedMaterial ) {\n\n\t\t\t\t\trefreshUniformsDash( m_uniforms, material );\n\n\t\t\t\t}\n\n\t\t\t} else if ( material.isPointsMaterial ) {\n\n\t\t\t\trefreshUniformsPoints( m_uniforms, material );\n\n\t\t\t} else if ( material.isSpriteMaterial ) {\n\n\t\t\t\trefreshUniformsSprites( m_uniforms, material );\n\n\t\t\t} else if ( material.isShadowMaterial ) {\n\n\t\t\t\tm_uniforms.color.value.copy( material.color );\n\t\t\t\tm_uniforms.opacity.value = material.opacity;\n\n\t\t\t}\n\n\t\t\t// RectAreaLight Texture\n\t\t\t// TODO (mrdoob): Find a nicer implementation\n\n\t\t\tif ( m_uniforms.ltc_1 !== undefined ) m_uniforms.ltc_1.value = UniformsLib.LTC_1;\n\t\t\tif ( m_uniforms.ltc_2 !== undefined ) m_uniforms.ltc_2.value = UniformsLib.LTC_2;\n\n\t\t\tWebGLUniforms.upload( _gl, materialProperties.uniformsList, m_uniforms, textures );\n\n\t\t\tif ( material.isShaderMaterial ) {\n\n\t\t\t\tmaterial.uniformsNeedUpdate = false; // #15581\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( material.isShaderMaterial && material.uniformsNeedUpdate === true ) {\n\n\t\t\tWebGLUniforms.upload( _gl, materialProperties.uniformsList, m_uniforms, textures );\n\t\t\tmaterial.uniformsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( material.isSpriteMaterial ) {\n\n\t\t\tp_uniforms.setValue( _gl, 'center', object.center );\n\n\t\t}\n\n\t\t// common matrices\n\n\t\tp_uniforms.setValue( _gl, 'modelViewMatrix', object.modelViewMatrix );\n\t\tp_uniforms.setValue( _gl, 'normalMatrix', object.normalMatrix );\n\t\tp_uniforms.setValue( _gl, 'modelMatrix', object.matrixWorld );\n\n\t\treturn program;\n\n\t}\n\n\t// Uniforms (refresh uniforms objects)\n\n\tfunction refreshUniformsCommon( uniforms, material, environment ) {\n\n\t\tuniforms.opacity.value = material.opacity;\n\n\t\tif ( material.color ) {\n\n\t\t\tuniforms.diffuse.value.copy( material.color );\n\n\t\t}\n\n\t\tif ( material.emissive ) {\n\n\t\t\tuniforms.emissive.value.copy( material.emissive ).multiplyScalar( material.emissiveIntensity );\n\n\t\t}\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t}\n\n\t\tif ( material.specularMap ) {\n\n\t\t\tuniforms.specularMap.value = material.specularMap;\n\n\t\t}\n\n\t\tvar envMap = material.envMap || environment;\n\n\t\tif ( envMap ) {\n\n\t\t\tuniforms.envMap.value = envMap;\n\n\t\t\tuniforms.flipEnvMap.value = envMap.isCubeTexture ? - 1 : 1;\n\n\t\t\tuniforms.reflectivity.value = material.reflectivity;\n\t\t\tuniforms.refractionRatio.value = material.refractionRatio;\n\n\t\t\tuniforms.maxMipLevel.value = properties.get( envMap ).__maxMipLevel;\n\n\t\t}\n\n\t\tif ( material.lightMap ) {\n\n\t\t\tuniforms.lightMap.value = material.lightMap;\n\t\t\tuniforms.lightMapIntensity.value = material.lightMapIntensity;\n\n\t\t}\n\n\t\tif ( material.aoMap ) {\n\n\t\t\tuniforms.aoMap.value = material.aoMap;\n\t\t\tuniforms.aoMapIntensity.value = material.aoMapIntensity;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. specular map\n\t\t// 3. normal map\n\t\t// 4. bump map\n\t\t// 5. alpha map\n\t\t// 6. emissive map\n\n\t\tvar uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.specularMap ) {\n\n\t\t\tuvScaleMap = material.specularMap;\n\n\t\t} else if ( material.displacementMap ) {\n\n\t\t\tuvScaleMap = material.displacementMap;\n\n\t\t} else if ( material.normalMap ) {\n\n\t\t\tuvScaleMap = material.normalMap;\n\n\t\t} else if ( material.bumpMap ) {\n\n\t\t\tuvScaleMap = material.bumpMap;\n\n\t\t} else if ( material.roughnessMap ) {\n\n\t\t\tuvScaleMap = material.roughnessMap;\n\n\t\t} else if ( material.metalnessMap ) {\n\n\t\t\tuvScaleMap = material.metalnessMap;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t} else if ( material.emissiveMap ) {\n\n\t\t\tuvScaleMap = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\t// backwards compatibility\n\t\t\tif ( uvScaleMap.isWebGLRenderTarget ) {\n\n\t\t\t\tuvScaleMap = uvScaleMap.texture;\n\n\t\t\t}\n\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuvScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities for uv2\n\t\t// 1. ao map\n\t\t// 2. light map\n\n\t\tvar uv2ScaleMap;\n\n\t\tif ( material.aoMap ) {\n\n\t\t\tuv2ScaleMap = material.aoMap;\n\n\t\t} else if ( material.lightMap ) {\n\n\t\t\tuv2ScaleMap = material.lightMap;\n\n\t\t}\n\n\t\tif ( uv2ScaleMap !== undefined ) {\n\n\t\t\t// backwards compatibility\n\t\t\tif ( uv2ScaleMap.isWebGLRenderTarget ) {\n\n\t\t\t\tuv2ScaleMap = uv2ScaleMap.texture;\n\n\t\t\t}\n\n\t\t\tif ( uv2ScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuv2ScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uv2Transform.value.copy( uv2ScaleMap.matrix );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsLine( uniforms, material ) {\n\n\t\tuniforms.diffuse.value.copy( material.color );\n\t\tuniforms.opacity.value = material.opacity;\n\n\t}\n\n\tfunction refreshUniformsDash( uniforms, material ) {\n\n\t\tuniforms.dashSize.value = material.dashSize;\n\t\tuniforms.totalSize.value = material.dashSize + material.gapSize;\n\t\tuniforms.scale.value = material.scale;\n\n\t}\n\n\tfunction refreshUniformsPoints( uniforms, material ) {\n\n\t\tuniforms.diffuse.value.copy( material.color );\n\t\tuniforms.opacity.value = material.opacity;\n\t\tuniforms.size.value = material.size * _pixelRatio;\n\t\tuniforms.scale.value = _height * 0.5;\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. alpha map\n\n\t\tvar uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuvScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsSprites( uniforms, material ) {\n\n\t\tuniforms.diffuse.value.copy( material.color );\n\t\tuniforms.opacity.value = material.opacity;\n\t\tuniforms.rotation.value = material.rotation;\n\n\t\tif ( material.map ) {\n\n\t\t\tuniforms.map.value = material.map;\n\n\t\t}\n\n\t\tif ( material.alphaMap ) {\n\n\t\t\tuniforms.alphaMap.value = material.alphaMap;\n\n\t\t}\n\n\t\t// uv repeat and offset setting priorities\n\t\t// 1. color map\n\t\t// 2. alpha map\n\n\t\tvar uvScaleMap;\n\n\t\tif ( material.map ) {\n\n\t\t\tuvScaleMap = material.map;\n\n\t\t} else if ( material.alphaMap ) {\n\n\t\t\tuvScaleMap = material.alphaMap;\n\n\t\t}\n\n\t\tif ( uvScaleMap !== undefined ) {\n\n\t\t\tif ( uvScaleMap.matrixAutoUpdate === true ) {\n\n\t\t\t\tuvScaleMap.updateMatrix();\n\n\t\t\t}\n\n\t\t\tuniforms.uvTransform.value.copy( uvScaleMap.matrix );\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsFog( uniforms, fog ) {\n\n\t\tuniforms.fogColor.value.copy( fog.color );\n\n\t\tif ( fog.isFog ) {\n\n\t\t\tuniforms.fogNear.value = fog.near;\n\t\t\tuniforms.fogFar.value = fog.far;\n\n\t\t} else if ( fog.isFogExp2 ) {\n\n\t\t\tuniforms.fogDensity.value = fog.density;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsLambert( uniforms, material ) {\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsPhong( uniforms, material ) {\n\n\t\tuniforms.specular.value.copy( material.specular );\n\t\tuniforms.shininess.value = Math.max( material.shininess, 1e-4 ); // to prevent pow( 0.0, 0.0 )\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsToon( uniforms, material ) {\n\n\t\tuniforms.specular.value.copy( material.specular );\n\t\tuniforms.shininess.value = Math.max( material.shininess, 1e-4 ); // to prevent pow( 0.0, 0.0 )\n\n\t\tif ( material.gradientMap ) {\n\n\t\t\tuniforms.gradientMap.value = material.gradientMap;\n\n\t\t}\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsStandard( uniforms, material, environment ) {\n\n\t\tuniforms.roughness.value = material.roughness;\n\t\tuniforms.metalness.value = material.metalness;\n\n\t\tif ( material.roughnessMap ) {\n\n\t\t\tuniforms.roughnessMap.value = material.roughnessMap;\n\n\t\t}\n\n\t\tif ( material.metalnessMap ) {\n\n\t\t\tuniforms.metalnessMap.value = material.metalnessMap;\n\n\t\t}\n\n\t\tif ( material.emissiveMap ) {\n\n\t\t\tuniforms.emissiveMap.value = material.emissiveMap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t\tif ( material.envMap || environment ) {\n\n\t\t\t//uniforms.envMap.value = material.envMap; // part of uniforms common\n\t\t\tuniforms.envMapIntensity.value = material.envMapIntensity;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsPhysical( uniforms, material, environment ) {\n\n\t\trefreshUniformsStandard( uniforms, material, environment );\n\n\t\tuniforms.reflectivity.value = material.reflectivity; // also part of uniforms common\n\n\t\tuniforms.clearcoat.value = material.clearcoat;\n\t\tuniforms.clearcoatRoughness.value = material.clearcoatRoughness;\n\t\tif ( material.sheen ) uniforms.sheen.value.copy( material.sheen );\n\n\t\tif ( material.clearcoatMap ) {\n\n\t\t\tuniforms.clearcoatMap.value = material.clearcoatMap;\n\n\t\t}\n\n\t\tif ( material.clearcoatRoughnessMap ) {\n\n\t\t\tuniforms.clearcoatRoughnessMap.value = material.clearcoatRoughnessMap;\n\n\t\t}\n\n\t\tif ( material.clearcoatNormalMap ) {\n\n\t\t\tuniforms.clearcoatNormalScale.value.copy( material.clearcoatNormalScale );\n\t\t\tuniforms.clearcoatNormalMap.value = material.clearcoatNormalMap;\n\n\t\t\tif ( material.side === BackSide ) {\n\n\t\t\t\tuniforms.clearcoatNormalScale.value.negate();\n\n\t\t\t}\n\n\t\t}\n\n\t\tuniforms.transparency.value = material.transparency;\n\n\t}\n\n\tfunction refreshUniformsMatcap( uniforms, material ) {\n\n\t\tif ( material.matcap ) {\n\n\t\t\tuniforms.matcap.value = material.matcap;\n\n\t\t}\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsDepth( uniforms, material ) {\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\tfunction refreshUniformsDistance( uniforms, material ) {\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t\tuniforms.referencePosition.value.copy( material.referencePosition );\n\t\tuniforms.nearDistance.value = material.nearDistance;\n\t\tuniforms.farDistance.value = material.farDistance;\n\n\t}\n\n\tfunction refreshUniformsNormal( uniforms, material ) {\n\n\t\tif ( material.bumpMap ) {\n\n\t\t\tuniforms.bumpMap.value = material.bumpMap;\n\t\t\tuniforms.bumpScale.value = material.bumpScale;\n\t\t\tif ( material.side === BackSide ) uniforms.bumpScale.value *= - 1;\n\n\t\t}\n\n\t\tif ( material.normalMap ) {\n\n\t\t\tuniforms.normalMap.value = material.normalMap;\n\t\t\tuniforms.normalScale.value.copy( material.normalScale );\n\t\t\tif ( material.side === BackSide ) uniforms.normalScale.value.negate();\n\n\t\t}\n\n\t\tif ( material.displacementMap ) {\n\n\t\t\tuniforms.displacementMap.value = material.displacementMap;\n\t\t\tuniforms.displacementScale.value = material.displacementScale;\n\t\t\tuniforms.displacementBias.value = material.displacementBias;\n\n\t\t}\n\n\t}\n\n\t// If uniforms are marked as clean, they don't need to be loaded to the GPU.\n\n\tfunction markUniformsLightsNeedsUpdate( uniforms, value ) {\n\n\t\tuniforms.ambientLightColor.needsUpdate = value;\n\t\tuniforms.lightProbe.needsUpdate = value;\n\n\t\tuniforms.directionalLights.needsUpdate = value;\n\t\tuniforms.directionalLightShadows.needsUpdate = value;\n\t\tuniforms.pointLights.needsUpdate = value;\n\t\tuniforms.pointLightShadows.needsUpdate = value;\n\t\tuniforms.spotLights.needsUpdate = value;\n\t\tuniforms.spotLightShadows.needsUpdate = value;\n\t\tuniforms.rectAreaLights.needsUpdate = value;\n\t\tuniforms.hemisphereLights.needsUpdate = value;\n\n\t}\n\n\tfunction materialNeedsLights( material ) {\n\n\t\treturn material.isMeshLambertMaterial || material.isMeshToonMaterial || material.isMeshPhongMaterial ||\n\t\t\tmaterial.isMeshStandardMaterial || material.isShadowMaterial ||\n\t\t\t( material.isShaderMaterial && material.lights === true );\n\n\t}\n\n\t//\n\tthis.setFramebuffer = function ( value ) {\n\n\t\tif ( _framebuffer !== value && _currentRenderTarget === null ) _gl.bindFramebuffer( _gl.FRAMEBUFFER, value );\n\n\t\t_framebuffer = value;\n\n\t};\n\n\tthis.getActiveCubeFace = function () {\n\n\t\treturn _currentActiveCubeFace;\n\n\t};\n\n\tthis.getActiveMipmapLevel = function () {\n\n\t\treturn _currentActiveMipmapLevel;\n\n\t};\n\n\tthis.getRenderTarget = function () {\n\n\t\treturn _currentRenderTarget;\n\n\t};\n\n\tthis.setRenderTarget = function ( renderTarget, activeCubeFace, activeMipmapLevel ) {\n\n\t\t_currentRenderTarget = renderTarget;\n\t\t_currentActiveCubeFace = activeCubeFace;\n\t\t_currentActiveMipmapLevel = activeMipmapLevel;\n\n\t\tif ( renderTarget && properties.get( renderTarget ).__webglFramebuffer === undefined ) {\n\n\t\t\ttextures.setupRenderTarget( renderTarget );\n\n\t\t}\n\n\t\tvar framebuffer = _framebuffer;\n\t\tvar isCube = false;\n\n\t\tif ( renderTarget ) {\n\n\t\t\tvar __webglFramebuffer = properties.get( renderTarget ).__webglFramebuffer;\n\n\t\t\tif ( renderTarget.isWebGLCubeRenderTarget ) {\n\n\t\t\t\tframebuffer = __webglFramebuffer[ activeCubeFace || 0 ];\n\t\t\t\tisCube = true;\n\n\t\t\t} else if ( renderTarget.isWebGLMultisampleRenderTarget ) {\n\n\t\t\t\tframebuffer = properties.get( renderTarget ).__webglMultisampledFramebuffer;\n\n\t\t\t} else {\n\n\t\t\t\tframebuffer = __webglFramebuffer;\n\n\t\t\t}\n\n\t\t\t_currentViewport.copy( renderTarget.viewport );\n\t\t\t_currentScissor.copy( renderTarget.scissor );\n\t\t\t_currentScissorTest = renderTarget.scissorTest;\n\n\t\t} else {\n\n\t\t\t_currentViewport.copy( _viewport ).multiplyScalar( _pixelRatio ).floor();\n\t\t\t_currentScissor.copy( _scissor ).multiplyScalar( _pixelRatio ).floor();\n\t\t\t_currentScissorTest = _scissorTest;\n\n\t\t}\n\n\t\tif ( _currentFramebuffer !== framebuffer ) {\n\n\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\t\t\t_currentFramebuffer = framebuffer;\n\n\t\t}\n\n\t\tstate.viewport( _currentViewport );\n\t\tstate.scissor( _currentScissor );\n\t\tstate.setScissorTest( _currentScissorTest );\n\n\t\tif ( isCube ) {\n\n\t\t\tvar textureProperties = properties.get( renderTarget.texture );\n\t\t\t_gl.framebufferTexture2D( _gl.FRAMEBUFFER, _gl.COLOR_ATTACHMENT0, _gl.TEXTURE_CUBE_MAP_POSITIVE_X + ( activeCubeFace || 0 ), textureProperties.__webglTexture, activeMipmapLevel || 0 );\n\n\t\t}\n\n\t};\n\n\tthis.readRenderTargetPixels = function ( renderTarget, x, y, width, height, buffer, activeCubeFaceIndex ) {\n\n\t\tif ( ! ( renderTarget && renderTarget.isWebGLRenderTarget ) ) {\n\n\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.' );\n\t\t\treturn;\n\n\t\t}\n\n\t\tvar framebuffer = properties.get( renderTarget ).__webglFramebuffer;\n\n\t\tif ( renderTarget.isWebGLCubeRenderTarget && activeCubeFaceIndex !== undefined ) {\n\n\t\t\tframebuffer = framebuffer[ activeCubeFaceIndex ];\n\n\t\t}\n\n\t\tif ( framebuffer ) {\n\n\t\t\tvar restore = false;\n\n\t\t\tif ( framebuffer !== _currentFramebuffer ) {\n\n\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, framebuffer );\n\n\t\t\t\trestore = true;\n\n\t\t\t}\n\n\t\t\ttry {\n\n\t\t\t\tvar texture = renderTarget.texture;\n\t\t\t\tvar textureFormat = texture.format;\n\t\t\t\tvar textureType = texture.type;\n\n\t\t\t\tif ( textureFormat !== RGBAFormat && utils.convert( textureFormat ) !== _gl.getParameter( _gl.IMPLEMENTATION_COLOR_READ_FORMAT ) ) {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.' );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( textureType !== UnsignedByteType && utils.convert( textureType ) !== _gl.getParameter( _gl.IMPLEMENTATION_COLOR_READ_TYPE ) && // IE11, Edge and Chrome Mac < 52 (#9513)\n\t\t\t\t\t! ( textureType === FloatType && ( capabilities.isWebGL2 || extensions.get( 'OES_texture_float' ) || extensions.get( 'WEBGL_color_buffer_float' ) ) ) && // Chrome Mac >= 52 and Firefox\n\t\t\t\t\t! ( textureType === HalfFloatType && ( capabilities.isWebGL2 ? extensions.get( 'EXT_color_buffer_float' ) : extensions.get( 'EXT_color_buffer_half_float' ) ) ) ) {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.' );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( _gl.checkFramebufferStatus( _gl.FRAMEBUFFER ) === _gl.FRAMEBUFFER_COMPLETE ) {\n\n\t\t\t\t\t// the following if statement ensures valid read requests (no out-of-bounds pixels, see #8604)\n\n\t\t\t\t\tif ( ( x >= 0 && x <= ( renderTarget.width - width ) ) && ( y >= 0 && y <= ( renderTarget.height - height ) ) ) {\n\n\t\t\t\t\t\t_gl.readPixels( x, y, width, height, utils.convert( textureFormat ), utils.convert( textureType ), buffer );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.error( 'THREE.WebGLRenderer.readRenderTargetPixels: readPixels from renderTarget failed. Framebuffer not complete.' );\n\n\t\t\t\t}\n\n\t\t\t} finally {\n\n\t\t\t\tif ( restore ) {\n\n\t\t\t\t\t_gl.bindFramebuffer( _gl.FRAMEBUFFER, _currentFramebuffer );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t};\n\n\tthis.copyFramebufferToTexture = function ( position, texture, level ) {\n\n\t\tif ( level === undefined ) level = 0;\n\n\t\tvar levelScale = Math.pow( 2, - level );\n\t\tvar width = Math.floor( texture.image.width * levelScale );\n\t\tvar height = Math.floor( texture.image.height * levelScale );\n\t\tvar glFormat = utils.convert( texture.format );\n\n\t\ttextures.setTexture2D( texture, 0 );\n\n\t\t_gl.copyTexImage2D( _gl.TEXTURE_2D, level, glFormat, position.x, position.y, width, height, 0 );\n\n\t\tstate.unbindTexture();\n\n\t};\n\n\tthis.copyTextureToTexture = function ( position, srcTexture, dstTexture, level ) {\n\n\t\tvar width = srcTexture.image.width;\n\t\tvar height = srcTexture.image.height;\n\t\tvar glFormat = utils.convert( dstTexture.format );\n\t\tvar glType = utils.convert( dstTexture.type );\n\n\t\ttextures.setTexture2D( dstTexture, 0 );\n\n\t\tif ( srcTexture.isDataTexture ) {\n\n\t\t\t_gl.texSubImage2D( _gl.TEXTURE_2D, level || 0, position.x, position.y, width, height, glFormat, glType, srcTexture.image.data );\n\n\t\t} else {\n\n\t\t\t_gl.texSubImage2D( _gl.TEXTURE_2D, level || 0, position.x, position.y, glFormat, glType, srcTexture.image );\n\n\t\t}\n\n\t\tstate.unbindTexture();\n\n\t};\n\n\tthis.initTexture = function ( texture ) {\n\n\t\ttextures.setTexture2D( texture, 0 );\n\n\t\tstate.unbindTexture();\n\n\t};\n\n\tif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\n\n\t\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'observe', { detail: this } ) ); // eslint-disable-line no-undef\n\n\t}\n\n}\n\nexport { WebGLRenderer };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\nimport { BufferAttribute } from '../core/BufferAttribute.js';\nimport { Mesh } from './Mesh.js';\nimport { Matrix4 } from '../math/Matrix4.js';\n\nvar _instanceLocalMatrix = new Matrix4();\nvar _instanceWorldMatrix = new Matrix4();\n\nvar _instanceIntersects = [];\n\nvar _mesh = new Mesh();\n\nfunction InstancedMesh( geometry, material, count ) {\n\n\tMesh.call( this, geometry, material );\n\n\tthis.instanceMatrix = new BufferAttribute( new Float32Array( count * 16 ), 16 );\n\n\tthis.count = count;\n\n\tthis.frustumCulled = false;\n\n}\n\nInstancedMesh.prototype = Object.assign( Object.create( Mesh.prototype ), {\n\n\tconstructor: InstancedMesh,\n\n\tisInstancedMesh: true,\n\n\tgetMatrixAt: function ( index, matrix ) {\n\n\t\tmatrix.fromArray( this.instanceMatrix.array, index * 16 );\n\n\t},\n\n\traycast: function ( raycaster, intersects ) {\n\n\t\tvar matrixWorld = this.matrixWorld;\n\t\tvar raycastTimes = this.count;\n\n\t\t_mesh.geometry = this.geometry;\n\t\t_mesh.material = this.material;\n\n\t\tif ( _mesh.material === undefined ) return;\n\n\t\tfor ( var instanceId = 0; instanceId < raycastTimes; instanceId ++ ) {\n\n\t\t\t// calculate the world matrix for each instance\n\n\t\t\tthis.getMatrixAt( instanceId, _instanceLocalMatrix );\n\n\t\t\t_instanceWorldMatrix.multiplyMatrices( matrixWorld, _instanceLocalMatrix );\n\n\t\t\t// the mesh represents this single instance\n\n\t\t\t_mesh.matrixWorld = _instanceWorldMatrix;\n\n\t\t\t_mesh.raycast( raycaster, _instanceIntersects );\n\n\t\t\t// process the result of raycast\n\n\t\t\tif ( _instanceIntersects.length > 0 ) {\n\n\t\t\t\t_instanceIntersects[ 0 ].instanceId = instanceId;\n\t\t\t\t_instanceIntersects[ 0 ].object = this;\n\n\t\t\t\tintersects.push( _instanceIntersects[ 0 ] );\n\n\t\t\t\t_instanceIntersects.length = 0;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tsetMatrixAt: function ( index, matrix ) {\n\n\t\tmatrix.toArray( this.instanceMatrix.array, index * 16 );\n\n\t},\n\n\tupdateMorphTargets: function () {\n\n\t}\n\n} );\n\nexport { InstancedMesh };\n","/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n */\n\nimport { Vector2 } from '../math/Vector2.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { Triangle } from '../math/Triangle.js';\nimport { Object3D } from '../core/Object3D.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { InterleavedBuffer } from '../core/InterleavedBuffer.js';\nimport { InterleavedBufferAttribute } from '../core/InterleavedBufferAttribute.js';\nimport { SpriteMaterial } from '../materials/SpriteMaterial.js';\n\nvar _geometry;\n\nvar _intersectPoint = new Vector3();\nvar _worldScale = new Vector3();\nvar _mvPosition = new Vector3();\n\nvar _alignedPosition = new Vector2();\nvar _rotatedPosition = new Vector2();\nvar _viewWorldMatrix = new Matrix4();\n\nvar _vA = new Vector3();\nvar _vB = new Vector3();\nvar _vC = new Vector3();\n\nvar _uvA = new Vector2();\nvar _uvB = new Vector2();\nvar _uvC = new Vector2();\n\nfunction Sprite( material ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Sprite';\n\n\tif ( _geometry === undefined ) {\n\n\t\t_geometry = new BufferGeometry();\n\n\t\tvar float32Array = new Float32Array( [\n\t\t\t- 0.5, - 0.5, 0, 0, 0,\n\t\t\t0.5, - 0.5, 0, 1, 0,\n\t\t\t0.5, 0.5, 0, 1, 1,\n\t\t\t- 0.5, 0.5, 0, 0, 1\n\t\t] );\n\n\t\tvar interleavedBuffer = new InterleavedBuffer( float32Array, 5 );\n\n\t\t_geometry.setIndex( [ 0, 1, 2,\t0, 2, 3 ] );\n\t\t_geometry.setAttribute( 'position', new InterleavedBufferAttribute( interleavedBuffer, 3, 0, false ) );\n\t\t_geometry.setAttribute( 'uv', new InterleavedBufferAttribute( interleavedBuffer, 2, 3, false ) );\n\n\t}\n\n\tthis.geometry = _geometry;\n\tthis.material = ( material !== undefined ) ? material : new SpriteMaterial();\n\n\tthis.center = new Vector2( 0.5, 0.5 );\n\n}\n\nSprite.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Sprite,\n\n\tisSprite: true,\n\n\traycast: function ( raycaster, intersects ) {\n\n\t\tif ( raycaster.camera === null ) {\n\n\t\t\tconsole.error( 'THREE.Sprite: \"Raycaster.camera\" needs to be set in order to raycast against sprites.' );\n\n\t\t}\n\n\t\t_worldScale.setFromMatrixScale( this.matrixWorld );\n\n\t\t_viewWorldMatrix.copy( raycaster.camera.matrixWorld );\n\t\tthis.modelViewMatrix.multiplyMatrices( raycaster.camera.matrixWorldInverse, this.matrixWorld );\n\n\t\t_mvPosition.setFromMatrixPosition( this.modelViewMatrix );\n\n\t\tif ( raycaster.camera.isPerspectiveCamera && this.material.sizeAttenuation === false ) {\n\n\t\t\t_worldScale.multiplyScalar( - _mvPosition.z );\n\n\t\t}\n\n\t\tvar rotation = this.material.rotation;\n\t\tvar sin, cos;\n\t\tif ( rotation !== 0 ) {\n\n\t\t\tcos = Math.cos( rotation );\n\t\t\tsin = Math.sin( rotation );\n\n\t\t}\n\n\t\tvar center = this.center;\n\n\t\ttransformVertex( _vA.set( - 0.5, - 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\n\t\ttransformVertex( _vB.set( 0.5, - 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\n\t\ttransformVertex( _vC.set( 0.5, 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\n\n\t\t_uvA.set( 0, 0 );\n\t\t_uvB.set( 1, 0 );\n\t\t_uvC.set( 1, 1 );\n\n\t\t// check first triangle\n\t\tvar intersect = raycaster.ray.intersectTriangle( _vA, _vB, _vC, false, _intersectPoint );\n\n\t\tif ( intersect === null ) {\n\n\t\t\t// check second triangle\n\t\t\ttransformVertex( _vB.set( - 0.5, 0.5, 0 ), _mvPosition, center, _worldScale, sin, cos );\n\t\t\t_uvB.set( 0, 1 );\n\n\t\t\tintersect = raycaster.ray.intersectTriangle( _vA, _vC, _vB, false, _intersectPoint );\n\t\t\tif ( intersect === null ) {\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar distance = raycaster.ray.origin.distanceTo( _intersectPoint );\n\n\t\tif ( distance < raycaster.near || distance > raycaster.far ) return;\n\n\t\tintersects.push( {\n\n\t\t\tdistance: distance,\n\t\t\tpoint: _intersectPoint.clone(),\n\t\t\tuv: Triangle.getUV( _intersectPoint, _vA, _vB, _vC, _uvA, _uvB, _uvC, new Vector2() ),\n\t\t\tface: null,\n\t\t\tobject: this\n\n\t\t} );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.material ).copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source );\n\n\t\tif ( source.center !== undefined ) this.center.copy( source.center );\n\n\t\treturn this;\n\n\t}\n\n\n} );\n\nfunction transformVertex( vertexPosition, mvPosition, center, scale, sin, cos ) {\n\n\t// compute position in camera space\n\t_alignedPosition.subVectors( vertexPosition, center ).addScalar( 0.5 ).multiply( scale );\n\n\t// to check if rotation is not zero\n\tif ( sin !== undefined ) {\n\n\t\t_rotatedPosition.x = ( cos * _alignedPosition.x ) - ( sin * _alignedPosition.y );\n\t\t_rotatedPosition.y = ( sin * _alignedPosition.x ) + ( cos * _alignedPosition.y );\n\n\t} else {\n\n\t\t_rotatedPosition.copy( _alignedPosition );\n\n\t}\n\n\n\tvertexPosition.copy( mvPosition );\n\tvertexPosition.x += _rotatedPosition.x;\n\tvertexPosition.y += _rotatedPosition.y;\n\n\t// transform to world space\n\tvertexPosition.applyMatrix4( _viewWorldMatrix );\n\n}\n\nexport { Sprite };\n","import { Material } from './Material.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  map: new THREE.Texture( <Image> ),\n *  alphaMap: new THREE.Texture( <Image> ),\n *  rotation: <float>,\n *  sizeAttenuation: <bool>\n * }\n */\n\nfunction SpriteMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'SpriteMaterial';\n\n\tthis.color = new Color( 0xffffff );\n\n\tthis.map = null;\n\n\tthis.alphaMap = null;\n\n\tthis.rotation = 0;\n\n\tthis.sizeAttenuation = true;\n\n\tthis.transparent = true;\n\n\tthis.setValues( parameters );\n\n}\n\nSpriteMaterial.prototype = Object.create( Material.prototype );\nSpriteMaterial.prototype.constructor = SpriteMaterial;\nSpriteMaterial.prototype.isSpriteMaterial = true;\n\nSpriteMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.map = source.map;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.rotation = source.rotation;\n\n\tthis.sizeAttenuation = source.sizeAttenuation;\n\n\treturn this;\n\n};\n\n\nexport { SpriteMaterial };\n","import { Vector3 } from '../math/Vector3.js';\nimport { Object3D } from '../core/Object3D.js';\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar _v1 = new Vector3();\nvar _v2 = new Vector3();\n\nfunction LOD() {\n\n\tObject3D.call( this );\n\n\tthis._currentLevel = 0;\n\n\tthis.type = 'LOD';\n\n\tObject.defineProperties( this, {\n\t\tlevels: {\n\t\t\tenumerable: true,\n\t\t\tvalue: []\n\t\t}\n\t} );\n\n\tthis.autoUpdate = true;\n\n}\n\nLOD.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: LOD,\n\n\tisLOD: true,\n\n\tcopy: function ( source ) {\n\n\t\tObject3D.prototype.copy.call( this, source, false );\n\n\t\tvar levels = source.levels;\n\n\t\tfor ( var i = 0, l = levels.length; i < l; i ++ ) {\n\n\t\t\tvar level = levels[ i ];\n\n\t\t\tthis.addLevel( level.object.clone(), level.distance );\n\n\t\t}\n\n\t\tthis.autoUpdate = source.autoUpdate;\n\n\t\treturn this;\n\n\t},\n\n\taddLevel: function ( object, distance ) {\n\n\t\tif ( distance === undefined ) distance = 0;\n\n\t\tdistance = Math.abs( distance );\n\n\t\tvar levels = this.levels;\n\n\t\tfor ( var l = 0; l < levels.length; l ++ ) {\n\n\t\t\tif ( distance < levels[ l ].distance ) {\n\n\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tlevels.splice( l, 0, { distance: distance, object: object } );\n\n\t\tthis.add( object );\n\n\t\treturn this;\n\n\t},\n\n\tgetCurrentLevel: function () {\n\n\t\treturn this._currentLevel;\n\n\t},\n\n\tgetObjectForDistance: function ( distance ) {\n\n\t\tvar levels = this.levels;\n\n\t\tif ( levels.length > 0 ) {\n\n\t\t\tfor ( var i = 1, l = levels.length; i < l; i ++ ) {\n\n\t\t\t\tif ( distance < levels[ i ].distance ) {\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn levels[ i - 1 ].object;\n\n\t\t}\n\n\t\treturn null;\n\n\t},\n\n\traycast: function ( raycaster, intersects ) {\n\n\t\tvar levels = this.levels;\n\n\t\tif ( levels.length > 0 ) {\n\n\t\t\t_v1.setFromMatrixPosition( this.matrixWorld );\n\n\t\t\tvar distance = raycaster.ray.origin.distanceTo( _v1 );\n\n\t\t\tthis.getObjectForDistance( distance ).raycast( raycaster, intersects );\n\n\t\t}\n\n\t},\n\n\tupdate: function ( camera ) {\n\n\t\tvar levels = this.levels;\n\n\t\tif ( levels.length > 1 ) {\n\n\t\t\t_v1.setFromMatrixPosition( camera.matrixWorld );\n\t\t\t_v2.setFromMatrixPosition( this.matrixWorld );\n\n\t\t\tvar distance = _v1.distanceTo( _v2 ) / camera.zoom;\n\n\t\t\tlevels[ 0 ].object.visible = true;\n\n\t\t\tfor ( var i = 1, l = levels.length; i < l; i ++ ) {\n\n\t\t\t\tif ( distance >= levels[ i ].distance ) {\n\n\t\t\t\t\tlevels[ i - 1 ].object.visible = false;\n\t\t\t\t\tlevels[ i ].object.visible = true;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis._currentLevel = i - 1;\n\n\t\t\tfor ( ; i < l; i ++ ) {\n\n\t\t\t\tlevels[ i ].object.visible = false;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tif ( this.autoUpdate === false ) data.object.autoUpdate = false;\n\n\t\tdata.object.levels = [];\n\n\t\tvar levels = this.levels;\n\n\t\tfor ( var i = 0, l = levels.length; i < l; i ++ ) {\n\n\t\t\tvar level = levels[ i ];\n\n\t\t\tdata.object.levels.push( {\n\t\t\t\tobject: level.object.uuid,\n\t\t\t\tdistance: level.distance\n\t\t\t} );\n\n\t\t}\n\n\t\treturn data;\n\n\t}\n\n} );\n\n\nexport { LOD };\n","/**\n * @author mrdoob / http://mrdoob.com/\n *\n * parameters = {\n *  color: <THREE.Color>\n * }\n */\n\nimport { Material } from './Material.js';\nimport { Color } from '../math/Color.js';\n\nfunction ShadowMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'ShadowMaterial';\n\n\tthis.color = new Color( 0x000000 );\n\tthis.transparent = true;\n\n\tthis.setValues( parameters );\n\n}\n\nShadowMaterial.prototype = Object.create( Material.prototype );\nShadowMaterial.prototype.constructor = ShadowMaterial;\n\nShadowMaterial.prototype.isShadowMaterial = true;\n\nShadowMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\treturn this;\n\n};\n\n\nexport { ShadowMaterial };\n","import { TangentSpaceNormalMap } from '../constants.js';\nimport { Material } from './Material.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * @author takahirox / http://github.com/takahirox\n *\n * parameters = {\n *  color: <hex>,\n *  specular: <hex>,\n *  shininess: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *  gradientMap: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalMapType: THREE.TangentSpaceNormalMap,\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshToonMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.defines = { 'TOON': '' };\n\n\tthis.type = 'MeshToonMaterial';\n\n\tthis.color = new Color( 0xffffff );\n\tthis.specular = new Color( 0x111111 );\n\tthis.shininess = 30;\n\n\tthis.map = null;\n\tthis.gradientMap = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.emissive = new Color( 0x000000 );\n\tthis.emissiveIntensity = 1.0;\n\tthis.emissiveMap = null;\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalMapType = TangentSpaceNormalMap;\n\tthis.normalScale = new Vector2( 1, 1 );\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.specularMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshToonMaterial.prototype = Object.create( Material.prototype );\nMeshToonMaterial.prototype.constructor = MeshToonMaterial;\n\nMeshToonMaterial.prototype.isMeshToonMaterial = true;\n\nMeshToonMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\tthis.specular.copy( source.specular );\n\tthis.shininess = source.shininess;\n\n\tthis.map = source.map;\n\tthis.gradientMap = source.gradientMap;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.emissive.copy( source.emissive );\n\tthis.emissiveMap = source.emissiveMap;\n\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\tthis.bumpMap = source.bumpMap;\n\tthis.bumpScale = source.bumpScale;\n\n\tthis.normalMap = source.normalMap;\n\tthis.normalMapType = source.normalMapType;\n\tthis.normalScale.copy( source.normalScale );\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.specularMap = source.specularMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n\nexport { MeshToonMaterial };\n","import { TangentSpaceNormalMap } from '../constants.js';\nimport { Material } from './Material.js';\nimport { Vector2 } from '../math/Vector2.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n *\n * parameters = {\n *  opacity: <float>,\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalMapType: THREE.TangentSpaceNormalMap,\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshNormalMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshNormalMaterial';\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalMapType = TangentSpaceNormalMap;\n\tthis.normalScale = new Vector2( 1, 1 );\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\n\tthis.fog = false;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshNormalMaterial.prototype = Object.create( Material.prototype );\nMeshNormalMaterial.prototype.constructor = MeshNormalMaterial;\n\nMeshNormalMaterial.prototype.isMeshNormalMaterial = true;\n\nMeshNormalMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.bumpMap = source.bumpMap;\n\tthis.bumpScale = source.bumpScale;\n\n\tthis.normalMap = source.normalMap;\n\tthis.normalMapType = source.normalMapType;\n\tthis.normalScale.copy( source.normalScale );\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n\nexport { MeshNormalMaterial };\n","import { TangentSpaceNormalMap } from '../constants.js';\nimport { Material } from './Material.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  matcap: new THREE.Texture( <Image> ),\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalMapType: THREE.TangentSpaceNormalMap,\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshMatcapMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.defines = { 'MATCAP': '' };\n\n\tthis.type = 'MeshMatcapMaterial';\n\n\tthis.color = new Color( 0xffffff ); // diffuse\n\n\tthis.matcap = null;\n\n\tthis.map = null;\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalMapType = TangentSpaceNormalMap;\n\tthis.normalScale = new Vector2( 1, 1 );\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.alphaMap = null;\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshMatcapMaterial.prototype = Object.create( Material.prototype );\nMeshMatcapMaterial.prototype.constructor = MeshMatcapMaterial;\n\nMeshMatcapMaterial.prototype.isMeshMatcapMaterial = true;\n\nMeshMatcapMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.defines = { 'MATCAP': '' };\n\n\tthis.color.copy( source.color );\n\n\tthis.matcap = source.matcap;\n\n\tthis.map = source.map;\n\n\tthis.bumpMap = source.bumpMap;\n\tthis.bumpScale = source.bumpScale;\n\n\tthis.normalMap = source.normalMap;\n\tthis.normalMapType = source.normalMapType;\n\tthis.normalScale.copy( source.normalScale );\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\treturn this;\n\n};\n\n\nexport { MeshMatcapMaterial };\n","/**\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  linewidth: <float>,\n *\n *  scale: <float>,\n *  dashSize: <float>,\n *  gapSize: <float>\n * }\n */\n\nimport { LineBasicMaterial } from './LineBasicMaterial.js';\n\nfunction LineDashedMaterial( parameters ) {\n\n\tLineBasicMaterial.call( this );\n\n\tthis.type = 'LineDashedMaterial';\n\n\tthis.scale = 1;\n\tthis.dashSize = 3;\n\tthis.gapSize = 1;\n\n\tthis.setValues( parameters );\n\n}\n\nLineDashedMaterial.prototype = Object.create( LineBasicMaterial.prototype );\nLineDashedMaterial.prototype.constructor = LineDashedMaterial;\n\nLineDashedMaterial.prototype.isLineDashedMaterial = true;\n\nLineDashedMaterial.prototype.copy = function ( source ) {\n\n\tLineBasicMaterial.prototype.copy.call( this, source );\n\n\tthis.scale = source.scale;\n\tthis.dashSize = source.dashSize;\n\tthis.gapSize = source.gapSize;\n\n\treturn this;\n\n};\n\n\nexport { LineDashedMaterial };\n","import { Color } from '../math/Color.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Vector4 } from '../math/Vector4.js';\nimport { Matrix3 } from '../math/Matrix3.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { FileLoader } from './FileLoader.js';\nimport { Loader } from './Loader.js';\nimport * as Materials from '../materials/Materials.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction MaterialLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n\tthis.textures = {};\n\n}\n\nMaterialLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: MaterialLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar loader = new FileLoader( scope.manager );\n\t\tloader.setPath( scope.path );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tparse: function ( json ) {\n\n\t\tvar textures = this.textures;\n\n\t\tfunction getTexture( name ) {\n\n\t\t\tif ( textures[ name ] === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.MaterialLoader: Undefined texture', name );\n\n\t\t\t}\n\n\t\t\treturn textures[ name ];\n\n\t\t}\n\n\t\tvar material = new Materials[ json.type ]();\n\n\t\tif ( json.uuid !== undefined ) material.uuid = json.uuid;\n\t\tif ( json.name !== undefined ) material.name = json.name;\n\t\tif ( json.color !== undefined ) material.color.setHex( json.color );\n\t\tif ( json.roughness !== undefined ) material.roughness = json.roughness;\n\t\tif ( json.metalness !== undefined ) material.metalness = json.metalness;\n\t\tif ( json.sheen !== undefined ) material.sheen = new Color().setHex( json.sheen );\n\t\tif ( json.emissive !== undefined ) material.emissive.setHex( json.emissive );\n\t\tif ( json.specular !== undefined ) material.specular.setHex( json.specular );\n\t\tif ( json.shininess !== undefined ) material.shininess = json.shininess;\n\t\tif ( json.clearcoat !== undefined ) material.clearcoat = json.clearcoat;\n\t\tif ( json.clearcoatRoughness !== undefined ) material.clearcoatRoughness = json.clearcoatRoughness;\n\t\tif ( json.fog !== undefined ) material.fog = json.fog;\n\t\tif ( json.flatShading !== undefined ) material.flatShading = json.flatShading;\n\t\tif ( json.blending !== undefined ) material.blending = json.blending;\n\t\tif ( json.combine !== undefined ) material.combine = json.combine;\n\t\tif ( json.side !== undefined ) material.side = json.side;\n\t\tif ( json.opacity !== undefined ) material.opacity = json.opacity;\n\t\tif ( json.transparent !== undefined ) material.transparent = json.transparent;\n\t\tif ( json.alphaTest !== undefined ) material.alphaTest = json.alphaTest;\n\t\tif ( json.depthTest !== undefined ) material.depthTest = json.depthTest;\n\t\tif ( json.depthWrite !== undefined ) material.depthWrite = json.depthWrite;\n\t\tif ( json.colorWrite !== undefined ) material.colorWrite = json.colorWrite;\n\n\t\tif ( json.stencilWrite !== undefined ) material.stencilWrite = json.stencilWrite;\n\t\tif ( json.stencilWriteMask !== undefined ) material.stencilWriteMask = json.stencilWriteMask;\n\t\tif ( json.stencilFunc !== undefined ) material.stencilFunc = json.stencilFunc;\n\t\tif ( json.stencilRef !== undefined ) material.stencilRef = json.stencilRef;\n\t\tif ( json.stencilFuncMask !== undefined ) material.stencilFuncMask = json.stencilFuncMask;\n\t\tif ( json.stencilFail !== undefined ) material.stencilFail = json.stencilFail;\n\t\tif ( json.stencilZFail !== undefined ) material.stencilZFail = json.stencilZFail;\n\t\tif ( json.stencilZPass !== undefined ) material.stencilZPass = json.stencilZPass;\n\n\t\tif ( json.wireframe !== undefined ) material.wireframe = json.wireframe;\n\t\tif ( json.wireframeLinewidth !== undefined ) material.wireframeLinewidth = json.wireframeLinewidth;\n\t\tif ( json.wireframeLinecap !== undefined ) material.wireframeLinecap = json.wireframeLinecap;\n\t\tif ( json.wireframeLinejoin !== undefined ) material.wireframeLinejoin = json.wireframeLinejoin;\n\n\t\tif ( json.rotation !== undefined ) material.rotation = json.rotation;\n\n\t\tif ( json.linewidth !== 1 ) material.linewidth = json.linewidth;\n\t\tif ( json.dashSize !== undefined ) material.dashSize = json.dashSize;\n\t\tif ( json.gapSize !== undefined ) material.gapSize = json.gapSize;\n\t\tif ( json.scale !== undefined ) material.scale = json.scale;\n\n\t\tif ( json.polygonOffset !== undefined ) material.polygonOffset = json.polygonOffset;\n\t\tif ( json.polygonOffsetFactor !== undefined ) material.polygonOffsetFactor = json.polygonOffsetFactor;\n\t\tif ( json.polygonOffsetUnits !== undefined ) material.polygonOffsetUnits = json.polygonOffsetUnits;\n\n\t\tif ( json.skinning !== undefined ) material.skinning = json.skinning;\n\t\tif ( json.morphTargets !== undefined ) material.morphTargets = json.morphTargets;\n\t\tif ( json.morphNormals !== undefined ) material.morphNormals = json.morphNormals;\n\t\tif ( json.dithering !== undefined ) material.dithering = json.dithering;\n\n\t\tif ( json.vertexTangents !== undefined ) material.vertexTangents = json.vertexTangents;\n\n\t\tif ( json.visible !== undefined ) material.visible = json.visible;\n\n\t\tif ( json.toneMapped !== undefined ) material.toneMapped = json.toneMapped;\n\n\t\tif ( json.userData !== undefined ) material.userData = json.userData;\n\n\t\tif ( json.vertexColors !== undefined ) {\n\n\t\t\tif ( typeof json.vertexColors === 'number' ) {\n\n\t\t\t\tmaterial.vertexColors = ( json.vertexColors > 0 ) ? true : false;\n\n\t\t\t} else {\n\n\t\t\t\tmaterial.vertexColors = json.vertexColors;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Shader Material\n\n\t\tif ( json.uniforms !== undefined ) {\n\n\t\t\tfor ( var name in json.uniforms ) {\n\n\t\t\t\tvar uniform = json.uniforms[ name ];\n\n\t\t\t\tmaterial.uniforms[ name ] = {};\n\n\t\t\t\tswitch ( uniform.type ) {\n\n\t\t\t\t\tcase 't':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = getTexture( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'c':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Color().setHex( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'v2':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Vector2().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'v3':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Vector3().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'v4':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Vector4().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'm3':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Matrix3().fromArray( uniform.value );\n\n\t\t\t\t\tcase 'm4':\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = new Matrix4().fromArray( uniform.value );\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\t\t\t\t\t\tmaterial.uniforms[ name ].value = uniform.value;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( json.defines !== undefined ) material.defines = json.defines;\n\t\tif ( json.vertexShader !== undefined ) material.vertexShader = json.vertexShader;\n\t\tif ( json.fragmentShader !== undefined ) material.fragmentShader = json.fragmentShader;\n\n\t\tif ( json.extensions !== undefined ) {\n\n\t\t\tfor ( var key in json.extensions ) {\n\n\t\t\t\tmaterial.extensions[ key ] = json.extensions[ key ];\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Deprecated\n\n\t\tif ( json.shading !== undefined ) material.flatShading = json.shading === 1; // THREE.FlatShading\n\n\t\t// for PointsMaterial\n\n\t\tif ( json.size !== undefined ) material.size = json.size;\n\t\tif ( json.sizeAttenuation !== undefined ) material.sizeAttenuation = json.sizeAttenuation;\n\n\t\t// maps\n\n\t\tif ( json.map !== undefined ) material.map = getTexture( json.map );\n\t\tif ( json.matcap !== undefined ) material.matcap = getTexture( json.matcap );\n\n\t\tif ( json.alphaMap !== undefined ) material.alphaMap = getTexture( json.alphaMap );\n\n\t\tif ( json.bumpMap !== undefined ) material.bumpMap = getTexture( json.bumpMap );\n\t\tif ( json.bumpScale !== undefined ) material.bumpScale = json.bumpScale;\n\n\t\tif ( json.normalMap !== undefined ) material.normalMap = getTexture( json.normalMap );\n\t\tif ( json.normalMapType !== undefined ) material.normalMapType = json.normalMapType;\n\t\tif ( json.normalScale !== undefined ) {\n\n\t\t\tvar normalScale = json.normalScale;\n\n\t\t\tif ( Array.isArray( normalScale ) === false ) {\n\n\t\t\t\t// Blender exporter used to export a scalar. See #7459\n\n\t\t\t\tnormalScale = [ normalScale, normalScale ];\n\n\t\t\t}\n\n\t\t\tmaterial.normalScale = new Vector2().fromArray( normalScale );\n\n\t\t}\n\n\t\tif ( json.displacementMap !== undefined ) material.displacementMap = getTexture( json.displacementMap );\n\t\tif ( json.displacementScale !== undefined ) material.displacementScale = json.displacementScale;\n\t\tif ( json.displacementBias !== undefined ) material.displacementBias = json.displacementBias;\n\n\t\tif ( json.roughnessMap !== undefined ) material.roughnessMap = getTexture( json.roughnessMap );\n\t\tif ( json.metalnessMap !== undefined ) material.metalnessMap = getTexture( json.metalnessMap );\n\n\t\tif ( json.emissiveMap !== undefined ) material.emissiveMap = getTexture( json.emissiveMap );\n\t\tif ( json.emissiveIntensity !== undefined ) material.emissiveIntensity = json.emissiveIntensity;\n\n\t\tif ( json.specularMap !== undefined ) material.specularMap = getTexture( json.specularMap );\n\n\t\tif ( json.envMap !== undefined ) material.envMap = getTexture( json.envMap );\n\t\tif ( json.envMapIntensity !== undefined ) material.envMapIntensity = json.envMapIntensity;\n\n\t\tif ( json.reflectivity !== undefined ) material.reflectivity = json.reflectivity;\n\t\tif ( json.refractionRatio !== undefined ) material.refractionRatio = json.refractionRatio;\n\n\t\tif ( json.lightMap !== undefined ) material.lightMap = getTexture( json.lightMap );\n\t\tif ( json.lightMapIntensity !== undefined ) material.lightMapIntensity = json.lightMapIntensity;\n\n\t\tif ( json.aoMap !== undefined ) material.aoMap = getTexture( json.aoMap );\n\t\tif ( json.aoMapIntensity !== undefined ) material.aoMapIntensity = json.aoMapIntensity;\n\n\t\tif ( json.gradientMap !== undefined ) material.gradientMap = getTexture( json.gradientMap );\n\n\t\tif ( json.clearcoatMap !== undefined ) material.clearcoatMap = getTexture( json.clearcoatMap );\n\t\tif ( json.clearcoatRoughnessMap !== undefined ) material.clearcoatRoughnessMap = getTexture( json.clearcoatRoughnessMap );\n\t\tif ( json.clearcoatNormalMap !== undefined ) material.clearcoatNormalMap = getTexture( json.clearcoatNormalMap );\n\t\tif ( json.clearcoatNormalScale !== undefined ) material.clearcoatNormalScale = new Vector2().fromArray( json.clearcoatNormalScale );\n\n\t\treturn material;\n\n\t},\n\n\tsetTextures: function ( value ) {\n\n\t\tthis.textures = value;\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { MaterialLoader };\n","import { Sphere } from '../math/Sphere.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { BufferAttribute } from '../core/BufferAttribute.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { FileLoader } from './FileLoader.js';\nimport { Loader } from './Loader.js';\nimport { InstancedBufferGeometry } from '../core/InstancedBufferGeometry.js';\nimport { InstancedBufferAttribute } from '../core/InstancedBufferAttribute.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction BufferGeometryLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nBufferGeometryLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: BufferGeometryLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar loader = new FileLoader( scope.manager );\n\t\tloader.setPath( scope.path );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tonLoad( scope.parse( JSON.parse( text ) ) );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tparse: function ( json ) {\n\n\t\tvar geometry = json.isInstancedBufferGeometry ? new InstancedBufferGeometry() : new BufferGeometry();\n\n\t\tvar index = json.data.index;\n\n\t\tif ( index !== undefined ) {\n\n\t\t\tvar typedArray = new TYPED_ARRAYS[ index.type ]( index.array );\n\t\t\tgeometry.setIndex( new BufferAttribute( typedArray, 1 ) );\n\n\t\t}\n\n\t\tvar attributes = json.data.attributes;\n\n\t\tfor ( var key in attributes ) {\n\n\t\t\tvar attribute = attributes[ key ];\n\t\t\tvar typedArray = new TYPED_ARRAYS[ attribute.type ]( attribute.array );\n\t\t\tvar bufferAttributeConstr = attribute.isInstancedBufferAttribute ? InstancedBufferAttribute : BufferAttribute;\n\t\t\tvar bufferAttribute = new bufferAttributeConstr( typedArray, attribute.itemSize, attribute.normalized );\n\t\t\tif ( attribute.name !== undefined ) bufferAttribute.name = attribute.name;\n\t\t\tgeometry.setAttribute( key, bufferAttribute );\n\n\t\t}\n\n\t\tvar morphAttributes = json.data.morphAttributes;\n\n\t\tif ( morphAttributes ) {\n\n\t\t\tfor ( var key in morphAttributes ) {\n\n\t\t\t\tvar attributeArray = morphAttributes[ key ];\n\n\t\t\t\tvar array = [];\n\n\t\t\t\tfor ( var i = 0, il = attributeArray.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar attribute = attributeArray[ i ];\n\t\t\t\t\tvar typedArray = new TYPED_ARRAYS[ attribute.type ]( attribute.array );\n\n\t\t\t\t\tvar bufferAttribute = new BufferAttribute( typedArray, attribute.itemSize, attribute.normalized );\n\t\t\t\t\tif ( attribute.name !== undefined ) bufferAttribute.name = attribute.name;\n\t\t\t\t\tarray.push( bufferAttribute );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.morphAttributes[ key ] = array;\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar morphTargetsRelative = json.data.morphTargetsRelative;\n\n\t\tif ( morphTargetsRelative ) {\n\n\t\t\tgeometry.morphTargetsRelative = true;\n\n\t\t}\n\n\t\tvar groups = json.data.groups || json.data.drawcalls || json.data.offsets;\n\n\t\tif ( groups !== undefined ) {\n\n\t\t\tfor ( var i = 0, n = groups.length; i !== n; ++ i ) {\n\n\t\t\t\tvar group = groups[ i ];\n\n\t\t\t\tgeometry.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar boundingSphere = json.data.boundingSphere;\n\n\t\tif ( boundingSphere !== undefined ) {\n\n\t\t\tvar center = new Vector3();\n\n\t\t\tif ( boundingSphere.center !== undefined ) {\n\n\t\t\t\tcenter.fromArray( boundingSphere.center );\n\n\t\t\t}\n\n\t\t\tgeometry.boundingSphere = new Sphere( center, boundingSphere.radius );\n\n\t\t}\n\n\t\tif ( json.name ) geometry.name = json.name;\n\t\tif ( json.userData ) geometry.userData = json.userData;\n\n\t\treturn geometry;\n\n\t}\n\n} );\n\nvar TYPED_ARRAYS = {\n\tInt8Array: Int8Array,\n\tUint8Array: Uint8Array,\n\t// Workaround for IE11 pre KB2929437. See #11440\n\tUint8ClampedArray: typeof Uint8ClampedArray !== 'undefined' ? Uint8ClampedArray : Uint8Array,\n\tInt16Array: Int16Array,\n\tUint16Array: Uint16Array,\n\tInt32Array: Int32Array,\n\tUint32Array: Uint32Array,\n\tFloat32Array: Float32Array,\n\tFloat64Array: Float64Array\n};\n\nexport { BufferGeometryLoader };\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { Vector3 } from '../math/Vector3.js';\n\nfunction WireframeGeometry( geometry ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'WireframeGeometry';\n\n\t// buffer\n\n\tvar vertices = [];\n\n\t// helper variables\n\n\tvar i, j, l, o, ol;\n\tvar edge = [ 0, 0 ], edges = {}, e, edge1, edge2;\n\tvar key, keys = [ 'a', 'b', 'c' ];\n\tvar vertex;\n\n\t// different logic for Geometry and BufferGeometry\n\n\tif ( geometry && geometry.isGeometry ) {\n\n\t\t// create a data structure that contains all edges without duplicates\n\n\t\tvar faces = geometry.faces;\n\n\t\tfor ( i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\t\tvar face = faces[ i ];\n\n\t\t\tfor ( j = 0; j < 3; j ++ ) {\n\n\t\t\t\tedge1 = face[ keys[ j ] ];\n\t\t\t\tedge2 = face[ keys[ ( j + 1 ) % 3 ] ];\n\t\t\t\tedge[ 0 ] = Math.min( edge1, edge2 ); // sorting prevents duplicates\n\t\t\t\tedge[ 1 ] = Math.max( edge1, edge2 );\n\n\t\t\t\tkey = edge[ 0 ] + ',' + edge[ 1 ];\n\n\t\t\t\tif ( edges[ key ] === undefined ) {\n\n\t\t\t\t\tedges[ key ] = { index1: edge[ 0 ], index2: edge[ 1 ] };\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// generate vertices\n\n\t\tfor ( key in edges ) {\n\n\t\t\te = edges[ key ];\n\n\t\t\tvertex = geometry.vertices[ e.index1 ];\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\tvertex = geometry.vertices[ e.index2 ];\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t}\n\n\t} else if ( geometry && geometry.isBufferGeometry ) {\n\n\t\tvar position, indices, groups;\n\t\tvar group, start, count;\n\t\tvar index1, index2;\n\n\t\tvertex = new Vector3();\n\n\t\tif ( geometry.index !== null ) {\n\n\t\t\t// indexed BufferGeometry\n\n\t\t\tposition = geometry.attributes.position;\n\t\t\tindices = geometry.index;\n\t\t\tgroups = geometry.groups;\n\n\t\t\tif ( groups.length === 0 ) {\n\n\t\t\t\tgroups = [ { start: 0, count: indices.count, materialIndex: 0 } ];\n\n\t\t\t}\n\n\t\t\t// create a data structure that contains all eges without duplicates\n\n\t\t\tfor ( o = 0, ol = groups.length; o < ol; ++ o ) {\n\n\t\t\t\tgroup = groups[ o ];\n\n\t\t\t\tstart = group.start;\n\t\t\t\tcount = group.count;\n\n\t\t\t\tfor ( i = start, l = ( start + count ); i < l; i += 3 ) {\n\n\t\t\t\t\tfor ( j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\t\tedge1 = indices.getX( i + j );\n\t\t\t\t\t\tedge2 = indices.getX( i + ( j + 1 ) % 3 );\n\t\t\t\t\t\tedge[ 0 ] = Math.min( edge1, edge2 ); // sorting prevents duplicates\n\t\t\t\t\t\tedge[ 1 ] = Math.max( edge1, edge2 );\n\n\t\t\t\t\t\tkey = edge[ 0 ] + ',' + edge[ 1 ];\n\n\t\t\t\t\t\tif ( edges[ key ] === undefined ) {\n\n\t\t\t\t\t\t\tedges[ key ] = { index1: edge[ 0 ], index2: edge[ 1 ] };\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// generate vertices\n\n\t\t\tfor ( key in edges ) {\n\n\t\t\t\te = edges[ key ];\n\n\t\t\t\tvertex.fromBufferAttribute( position, e.index1 );\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\tvertex.fromBufferAttribute( position, e.index2 );\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// non-indexed BufferGeometry\n\n\t\t\tposition = geometry.attributes.position;\n\n\t\t\tfor ( i = 0, l = ( position.count / 3 ); i < l; i ++ ) {\n\n\t\t\t\tfor ( j = 0; j < 3; j ++ ) {\n\n\t\t\t\t\t// three edges per triangle, an edge is represented as (index1, index2)\n\t\t\t\t\t// e.g. the first triangle has the following edges: (0,1),(1,2),(2,0)\n\n\t\t\t\t\tindex1 = 3 * i + j;\n\t\t\t\t\tvertex.fromBufferAttribute( position, index1 );\n\t\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t\tindex2 = 3 * i + ( ( j + 1 ) % 3 );\n\t\t\t\t\tvertex.fromBufferAttribute( position, index2 );\n\t\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\n}\n\nWireframeGeometry.prototype = Object.create( BufferGeometry.prototype );\nWireframeGeometry.prototype.constructor = WireframeGeometry;\n\n\nexport { WireframeGeometry };\n","/**\n * @author zz85 / https://github.com/zz85\n * @author Mugen87 / https://github.com/Mugen87\n *\n * Parametric Surfaces Geometry\n * based on the brilliant article by @prideout https://prideout.net/blog/old/blog/index.html@p=44.html\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { Vector3 } from '../math/Vector3.js';\n\n// ParametricGeometry\n\nfunction ParametricGeometry( func, slices, stacks ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'ParametricGeometry';\n\n\tthis.parameters = {\n\t\tfunc: func,\n\t\tslices: slices,\n\t\tstacks: stacks\n\t};\n\n\tthis.fromBufferGeometry( new ParametricBufferGeometry( func, slices, stacks ) );\n\tthis.mergeVertices();\n\n}\n\nParametricGeometry.prototype = Object.create( Geometry.prototype );\nParametricGeometry.prototype.constructor = ParametricGeometry;\n\n// ParametricBufferGeometry\n\nfunction ParametricBufferGeometry( func, slices, stacks ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'ParametricBufferGeometry';\n\n\tthis.parameters = {\n\t\tfunc: func,\n\t\tslices: slices,\n\t\tstacks: stacks\n\t};\n\n\t// buffers\n\n\tvar indices = [];\n\tvar vertices = [];\n\tvar normals = [];\n\tvar uvs = [];\n\n\tvar EPS = 0.00001;\n\n\tvar normal = new Vector3();\n\n\tvar p0 = new Vector3(), p1 = new Vector3();\n\tvar pu = new Vector3(), pv = new Vector3();\n\n\tvar i, j;\n\n\tif ( func.length < 3 ) {\n\n\t\tconsole.error( 'THREE.ParametricGeometry: Function must now modify a Vector3 as third parameter.' );\n\n\t}\n\n\t// generate vertices, normals and uvs\n\n\tvar sliceCount = slices + 1;\n\n\tfor ( i = 0; i <= stacks; i ++ ) {\n\n\t\tvar v = i / stacks;\n\n\t\tfor ( j = 0; j <= slices; j ++ ) {\n\n\t\t\tvar u = j / slices;\n\n\t\t\t// vertex\n\n\t\t\tfunc( u, v, p0 );\n\t\t\tvertices.push( p0.x, p0.y, p0.z );\n\n\t\t\t// normal\n\n\t\t\t// approximate tangent vectors via finite differences\n\n\t\t\tif ( u - EPS >= 0 ) {\n\n\t\t\t\tfunc( u - EPS, v, p1 );\n\t\t\t\tpu.subVectors( p0, p1 );\n\n\t\t\t} else {\n\n\t\t\t\tfunc( u + EPS, v, p1 );\n\t\t\t\tpu.subVectors( p1, p0 );\n\n\t\t\t}\n\n\t\t\tif ( v - EPS >= 0 ) {\n\n\t\t\t\tfunc( u, v - EPS, p1 );\n\t\t\t\tpv.subVectors( p0, p1 );\n\n\t\t\t} else {\n\n\t\t\t\tfunc( u, v + EPS, p1 );\n\t\t\t\tpv.subVectors( p1, p0 );\n\n\t\t\t}\n\n\t\t\t// cross product of tangent vectors returns surface normal\n\n\t\t\tnormal.crossVectors( pu, pv ).normalize();\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t// uv\n\n\t\t\tuvs.push( u, v );\n\n\t\t}\n\n\t}\n\n\t// generate indices\n\n\tfor ( i = 0; i < stacks; i ++ ) {\n\n\t\tfor ( j = 0; j < slices; j ++ ) {\n\n\t\t\tvar a = i * sliceCount + j;\n\t\t\tvar b = i * sliceCount + j + 1;\n\t\t\tvar c = ( i + 1 ) * sliceCount + j + 1;\n\t\t\tvar d = ( i + 1 ) * sliceCount + j;\n\n\t\t\t// faces one and two\n\n\t\t\tindices.push( a, b, d );\n\t\t\tindices.push( b, c, d );\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n}\n\nParametricBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nParametricBufferGeometry.prototype.constructor = ParametricBufferGeometry;\n\n\nexport { ParametricGeometry, ParametricBufferGeometry };\n","/**\n * @author timothypratley / https://github.com/timothypratley\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { PolyhedronBufferGeometry } from './PolyhedronGeometry.js';\n\n// TetrahedronGeometry\n\nfunction TetrahedronGeometry( radius, detail ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'TetrahedronGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n\tthis.fromBufferGeometry( new TetrahedronBufferGeometry( radius, detail ) );\n\tthis.mergeVertices();\n\n}\n\nTetrahedronGeometry.prototype = Object.create( Geometry.prototype );\nTetrahedronGeometry.prototype.constructor = TetrahedronGeometry;\n\n// TetrahedronBufferGeometry\n\nfunction TetrahedronBufferGeometry( radius, detail ) {\n\n\tvar vertices = [\n\t\t1, 1, 1, \t- 1, - 1, 1, \t- 1, 1, - 1, \t1, - 1, - 1\n\t];\n\n\tvar indices = [\n\t\t2, 1, 0, \t0, 3, 2,\t1, 3, 0,\t2, 3, 1\n\t];\n\n\tPolyhedronBufferGeometry.call( this, vertices, indices, radius, detail );\n\n\tthis.type = 'TetrahedronBufferGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n}\n\nTetrahedronBufferGeometry.prototype = Object.create( PolyhedronBufferGeometry.prototype );\nTetrahedronBufferGeometry.prototype.constructor = TetrahedronBufferGeometry;\n\n\nexport { TetrahedronGeometry, TetrahedronBufferGeometry };\n","/**\n * @author Abe Pazos / https://hamoid.com\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { PolyhedronBufferGeometry } from './PolyhedronGeometry.js';\n\n// DodecahedronGeometry\n\nfunction DodecahedronGeometry( radius, detail ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'DodecahedronGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n\tthis.fromBufferGeometry( new DodecahedronBufferGeometry( radius, detail ) );\n\tthis.mergeVertices();\n\n}\n\nDodecahedronGeometry.prototype = Object.create( Geometry.prototype );\nDodecahedronGeometry.prototype.constructor = DodecahedronGeometry;\n\n// DodecahedronBufferGeometry\n\nfunction DodecahedronBufferGeometry( radius, detail ) {\n\n\tvar t = ( 1 + Math.sqrt( 5 ) ) / 2;\n\tvar r = 1 / t;\n\n\tvar vertices = [\n\n\t\t// (±1, ±1, ±1)\n\t\t- 1, - 1, - 1,\t- 1, - 1, 1,\n\t\t- 1, 1, - 1, - 1, 1, 1,\n\t\t1, - 1, - 1, 1, - 1, 1,\n\t\t1, 1, - 1, 1, 1, 1,\n\n\t\t// (0, ±1/φ, ±φ)\n\t\t 0, - r, - t, 0, - r, t,\n\t\t 0, r, - t, 0, r, t,\n\n\t\t// (±1/φ, ±φ, 0)\n\t\t- r, - t, 0, - r, t, 0,\n\t\t r, - t, 0, r, t, 0,\n\n\t\t// (±φ, 0, ±1/φ)\n\t\t- t, 0, - r, t, 0, - r,\n\t\t- t, 0, r, t, 0, r\n\t];\n\n\tvar indices = [\n\t\t3, 11, 7, \t3, 7, 15, \t3, 15, 13,\n\t\t7, 19, 17, \t7, 17, 6, \t7, 6, 15,\n\t\t17, 4, 8, \t17, 8, 10, \t17, 10, 6,\n\t\t8, 0, 16, \t8, 16, 2, \t8, 2, 10,\n\t\t0, 12, 1, \t0, 1, 18, \t0, 18, 16,\n\t\t6, 10, 2, \t6, 2, 13, \t6, 13, 15,\n\t\t2, 16, 18, \t2, 18, 3, \t2, 3, 13,\n\t\t18, 1, 9, \t18, 9, 11, \t18, 11, 3,\n\t\t4, 14, 12, \t4, 12, 0, \t4, 0, 8,\n\t\t11, 9, 5, \t11, 5, 19, \t11, 19, 7,\n\t\t19, 5, 14, \t19, 14, 4, \t19, 4, 17,\n\t\t1, 12, 14, \t1, 14, 5, \t1, 5, 9\n\t];\n\n\tPolyhedronBufferGeometry.call( this, vertices, indices, radius, detail );\n\n\tthis.type = 'DodecahedronBufferGeometry';\n\n\tthis.parameters = {\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n}\n\nDodecahedronBufferGeometry.prototype = Object.create( PolyhedronBufferGeometry.prototype );\nDodecahedronBufferGeometry.prototype.constructor = DodecahedronBufferGeometry;\n\n\nexport { DodecahedronGeometry, DodecahedronBufferGeometry };\n","/**\n * @author oosmoxiecode / https://github.com/oosmoxiecode\n * @author WestLangley / https://github.com/WestLangley\n * @author zz85 / https://github.com/zz85\n * @author miningold / https://github.com/miningold\n * @author jonobr1 / https://github.com/jonobr1\n * @author Mugen87 / https://github.com/Mugen87\n *\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Vector3 } from '../math/Vector3.js';\n\n// TubeGeometry\n\nfunction TubeGeometry( path, tubularSegments, radius, radialSegments, closed, taper ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'TubeGeometry';\n\n\tthis.parameters = {\n\t\tpath: path,\n\t\ttubularSegments: tubularSegments,\n\t\tradius: radius,\n\t\tradialSegments: radialSegments,\n\t\tclosed: closed\n\t};\n\n\tif ( taper !== undefined ) console.warn( 'THREE.TubeGeometry: taper has been removed.' );\n\n\tvar bufferGeometry = new TubeBufferGeometry( path, tubularSegments, radius, radialSegments, closed );\n\n\t// expose internals\n\n\tthis.tangents = bufferGeometry.tangents;\n\tthis.normals = bufferGeometry.normals;\n\tthis.binormals = bufferGeometry.binormals;\n\n\t// create geometry\n\n\tthis.fromBufferGeometry( bufferGeometry );\n\tthis.mergeVertices();\n\n}\n\nTubeGeometry.prototype = Object.create( Geometry.prototype );\nTubeGeometry.prototype.constructor = TubeGeometry;\n\n// TubeBufferGeometry\n\nfunction TubeBufferGeometry( path, tubularSegments, radius, radialSegments, closed ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'TubeBufferGeometry';\n\n\tthis.parameters = {\n\t\tpath: path,\n\t\ttubularSegments: tubularSegments,\n\t\tradius: radius,\n\t\tradialSegments: radialSegments,\n\t\tclosed: closed\n\t};\n\n\ttubularSegments = tubularSegments || 64;\n\tradius = radius || 1;\n\tradialSegments = radialSegments || 8;\n\tclosed = closed || false;\n\n\tvar frames = path.computeFrenetFrames( tubularSegments, closed );\n\n\t// expose internals\n\n\tthis.tangents = frames.tangents;\n\tthis.normals = frames.normals;\n\tthis.binormals = frames.binormals;\n\n\t// helper variables\n\n\tvar vertex = new Vector3();\n\tvar normal = new Vector3();\n\tvar uv = new Vector2();\n\tvar P = new Vector3();\n\n\tvar i, j;\n\n\t// buffer\n\n\tvar vertices = [];\n\tvar normals = [];\n\tvar uvs = [];\n\tvar indices = [];\n\n\t// create buffer data\n\n\tgenerateBufferData();\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t// functions\n\n\tfunction generateBufferData() {\n\n\t\tfor ( i = 0; i < tubularSegments; i ++ ) {\n\n\t\t\tgenerateSegment( i );\n\n\t\t}\n\n\t\t// if the geometry is not closed, generate the last row of vertices and normals\n\t\t// at the regular position on the given path\n\t\t//\n\t\t// if the geometry is closed, duplicate the first row of vertices and normals (uvs will differ)\n\n\t\tgenerateSegment( ( closed === false ) ? tubularSegments : 0 );\n\n\t\t// uvs are generated in a separate function.\n\t\t// this makes it easy compute correct values for closed geometries\n\n\t\tgenerateUVs();\n\n\t\t// finally create faces\n\n\t\tgenerateIndices();\n\n\t}\n\n\tfunction generateSegment( i ) {\n\n\t\t// we use getPointAt to sample evenly distributed points from the given path\n\n\t\tP = path.getPointAt( i / tubularSegments, P );\n\n\t\t// retrieve corresponding normal and binormal\n\n\t\tvar N = frames.normals[ i ];\n\t\tvar B = frames.binormals[ i ];\n\n\t\t// generate normals and vertices for the current segment\n\n\t\tfor ( j = 0; j <= radialSegments; j ++ ) {\n\n\t\t\tvar v = j / radialSegments * Math.PI * 2;\n\n\t\t\tvar sin = Math.sin( v );\n\t\t\tvar cos = - Math.cos( v );\n\n\t\t\t// normal\n\n\t\t\tnormal.x = ( cos * N.x + sin * B.x );\n\t\t\tnormal.y = ( cos * N.y + sin * B.y );\n\t\t\tnormal.z = ( cos * N.z + sin * B.z );\n\t\t\tnormal.normalize();\n\n\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t// vertex\n\n\t\t\tvertex.x = P.x + radius * normal.x;\n\t\t\tvertex.y = P.y + radius * normal.y;\n\t\t\tvertex.z = P.z + radius * normal.z;\n\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t}\n\n\t}\n\n\tfunction generateIndices() {\n\n\t\tfor ( j = 1; j <= tubularSegments; j ++ ) {\n\n\t\t\tfor ( i = 1; i <= radialSegments; i ++ ) {\n\n\t\t\t\tvar a = ( radialSegments + 1 ) * ( j - 1 ) + ( i - 1 );\n\t\t\t\tvar b = ( radialSegments + 1 ) * j + ( i - 1 );\n\t\t\t\tvar c = ( radialSegments + 1 ) * j + i;\n\t\t\t\tvar d = ( radialSegments + 1 ) * ( j - 1 ) + i;\n\n\t\t\t\t// faces\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction generateUVs() {\n\n\t\tfor ( i = 0; i <= tubularSegments; i ++ ) {\n\n\t\t\tfor ( j = 0; j <= radialSegments; j ++ ) {\n\n\t\t\t\tuv.x = i / tubularSegments;\n\t\t\t\tuv.y = j / radialSegments;\n\n\t\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nTubeBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nTubeBufferGeometry.prototype.constructor = TubeBufferGeometry;\n\nTubeBufferGeometry.prototype.toJSON = function () {\n\n\tvar data = BufferGeometry.prototype.toJSON.call( this );\n\n\tdata.path = this.parameters.path.toJSON();\n\n\treturn data;\n\n};\n\nexport { TubeGeometry, TubeBufferGeometry };\n","/**\n * @author Kaleb Murphy\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Vector3 } from '../math/Vector3.js';\n\n// RingGeometry\n\nfunction RingGeometry( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'RingGeometry';\n\n\tthis.parameters = {\n\t\tinnerRadius: innerRadius,\n\t\touterRadius: outerRadius,\n\t\tthetaSegments: thetaSegments,\n\t\tphiSegments: phiSegments,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tthis.fromBufferGeometry( new RingBufferGeometry( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) );\n\tthis.mergeVertices();\n\n}\n\nRingGeometry.prototype = Object.create( Geometry.prototype );\nRingGeometry.prototype.constructor = RingGeometry;\n\n// RingBufferGeometry\n\nfunction RingBufferGeometry( innerRadius, outerRadius, thetaSegments, phiSegments, thetaStart, thetaLength ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'RingBufferGeometry';\n\n\tthis.parameters = {\n\t\tinnerRadius: innerRadius,\n\t\touterRadius: outerRadius,\n\t\tthetaSegments: thetaSegments,\n\t\tphiSegments: phiSegments,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tinnerRadius = innerRadius || 0.5;\n\touterRadius = outerRadius || 1;\n\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0;\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\n\n\tthetaSegments = thetaSegments !== undefined ? Math.max( 3, thetaSegments ) : 8;\n\tphiSegments = phiSegments !== undefined ? Math.max( 1, phiSegments ) : 1;\n\n\t// buffers\n\n\tvar indices = [];\n\tvar vertices = [];\n\tvar normals = [];\n\tvar uvs = [];\n\n\t// some helper variables\n\n\tvar segment;\n\tvar radius = innerRadius;\n\tvar radiusStep = ( ( outerRadius - innerRadius ) / phiSegments );\n\tvar vertex = new Vector3();\n\tvar uv = new Vector2();\n\tvar j, i;\n\n\t// generate vertices, normals and uvs\n\n\tfor ( j = 0; j <= phiSegments; j ++ ) {\n\n\t\tfor ( i = 0; i <= thetaSegments; i ++ ) {\n\n\t\t\t// values are generate from the inside of the ring to the outside\n\n\t\t\tsegment = thetaStart + i / thetaSegments * thetaLength;\n\n\t\t\t// vertex\n\n\t\t\tvertex.x = radius * Math.cos( segment );\n\t\t\tvertex.y = radius * Math.sin( segment );\n\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t// normal\n\n\t\t\tnormals.push( 0, 0, 1 );\n\n\t\t\t// uv\n\n\t\t\tuv.x = ( vertex.x / outerRadius + 1 ) / 2;\n\t\t\tuv.y = ( vertex.y / outerRadius + 1 ) / 2;\n\n\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t}\n\n\t\t// increase the radius for next row of vertices\n\n\t\tradius += radiusStep;\n\n\t}\n\n\t// indices\n\n\tfor ( j = 0; j < phiSegments; j ++ ) {\n\n\t\tvar thetaSegmentLevel = j * ( thetaSegments + 1 );\n\n\t\tfor ( i = 0; i < thetaSegments; i ++ ) {\n\n\t\t\tsegment = i + thetaSegmentLevel;\n\n\t\t\tvar a = segment;\n\t\t\tvar b = segment + thetaSegments + 1;\n\t\t\tvar c = segment + thetaSegments + 2;\n\t\t\tvar d = segment + 1;\n\n\t\t\t// faces\n\n\t\t\tindices.push( a, b, d );\n\t\t\tindices.push( b, c, d );\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n}\n\nRingBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nRingBufferGeometry.prototype.constructor = RingBufferGeometry;\n\n\nexport { RingGeometry, RingBufferGeometry };\n","/**\n * @author zz85 / https://github.com/zz85\n * @author bhouston / http://clara.io\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { MathUtils } from '../math/MathUtils.js';\n\n// LatheGeometry\n\nfunction LatheGeometry( points, segments, phiStart, phiLength ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'LatheGeometry';\n\n\tthis.parameters = {\n\t\tpoints: points,\n\t\tsegments: segments,\n\t\tphiStart: phiStart,\n\t\tphiLength: phiLength\n\t};\n\n\tthis.fromBufferGeometry( new LatheBufferGeometry( points, segments, phiStart, phiLength ) );\n\tthis.mergeVertices();\n\n}\n\nLatheGeometry.prototype = Object.create( Geometry.prototype );\nLatheGeometry.prototype.constructor = LatheGeometry;\n\n// LatheBufferGeometry\n\nfunction LatheBufferGeometry( points, segments, phiStart, phiLength ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'LatheBufferGeometry';\n\n\tthis.parameters = {\n\t\tpoints: points,\n\t\tsegments: segments,\n\t\tphiStart: phiStart,\n\t\tphiLength: phiLength\n\t};\n\n\tsegments = Math.floor( segments ) || 12;\n\tphiStart = phiStart || 0;\n\tphiLength = phiLength || Math.PI * 2;\n\n\t// clamp phiLength so it's in range of [ 0, 2PI ]\n\n\tphiLength = MathUtils.clamp( phiLength, 0, Math.PI * 2 );\n\n\n\t// buffers\n\n\tvar indices = [];\n\tvar vertices = [];\n\tvar uvs = [];\n\n\t// helper variables\n\n\tvar base;\n\tvar inverseSegments = 1.0 / segments;\n\tvar vertex = new Vector3();\n\tvar uv = new Vector2();\n\tvar i, j;\n\n\t// generate vertices and uvs\n\n\tfor ( i = 0; i <= segments; i ++ ) {\n\n\t\tvar phi = phiStart + i * inverseSegments * phiLength;\n\n\t\tvar sin = Math.sin( phi );\n\t\tvar cos = Math.cos( phi );\n\n\t\tfor ( j = 0; j <= ( points.length - 1 ); j ++ ) {\n\n\t\t\t// vertex\n\n\t\t\tvertex.x = points[ j ].x * sin;\n\t\t\tvertex.y = points[ j ].y;\n\t\t\tvertex.z = points[ j ].x * cos;\n\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t// uv\n\n\t\t\tuv.x = i / segments;\n\t\t\tuv.y = j / ( points.length - 1 );\n\n\t\t\tuvs.push( uv.x, uv.y );\n\n\n\t\t}\n\n\t}\n\n\t// indices\n\n\tfor ( i = 0; i < segments; i ++ ) {\n\n\t\tfor ( j = 0; j < ( points.length - 1 ); j ++ ) {\n\n\t\t\tbase = j + i * points.length;\n\n\t\t\tvar a = base;\n\t\t\tvar b = base + points.length;\n\t\t\tvar c = base + points.length + 1;\n\t\t\tvar d = base + 1;\n\n\t\t\t// faces\n\n\t\t\tindices.push( a, b, d );\n\t\t\tindices.push( b, c, d );\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\t// generate normals\n\n\tthis.computeVertexNormals();\n\n\t// if the geometry is closed, we need to average the normals along the seam.\n\t// because the corresponding vertices are identical (but still have different UVs).\n\n\tif ( phiLength === Math.PI * 2 ) {\n\n\t\tvar normals = this.attributes.normal.array;\n\t\tvar n1 = new Vector3();\n\t\tvar n2 = new Vector3();\n\t\tvar n = new Vector3();\n\n\t\t// this is the buffer offset for the last line of vertices\n\n\t\tbase = segments * points.length * 3;\n\n\t\tfor ( i = 0, j = 0; i < points.length; i ++, j += 3 ) {\n\n\t\t\t// select the normal of the vertex in the first line\n\n\t\t\tn1.x = normals[ j + 0 ];\n\t\t\tn1.y = normals[ j + 1 ];\n\t\t\tn1.z = normals[ j + 2 ];\n\n\t\t\t// select the normal of the vertex in the last line\n\n\t\t\tn2.x = normals[ base + j + 0 ];\n\t\t\tn2.y = normals[ base + j + 1 ];\n\t\t\tn2.z = normals[ base + j + 2 ];\n\n\t\t\t// average normals\n\n\t\t\tn.addVectors( n1, n2 ).normalize();\n\n\t\t\t// assign the new values to both normals\n\n\t\t\tnormals[ j + 0 ] = normals[ base + j + 0 ] = n.x;\n\t\t\tnormals[ j + 1 ] = normals[ base + j + 1 ] = n.y;\n\t\t\tnormals[ j + 2 ] = normals[ base + j + 2 ] = n.z;\n\n\t\t}\n\n\t}\n\n}\n\nLatheBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nLatheBufferGeometry.prototype.constructor = LatheBufferGeometry;\n\n\nexport { LatheGeometry, LatheBufferGeometry };\n","/**\n * @author WestLangley / http://github.com/WestLangley\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { Geometry } from '../core/Geometry.js';\nimport { MathUtils } from '../math/MathUtils.js';\n\nfunction EdgesGeometry( geometry, thresholdAngle ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'EdgesGeometry';\n\n\tthis.parameters = {\n\t\tthresholdAngle: thresholdAngle\n\t};\n\n\tthresholdAngle = ( thresholdAngle !== undefined ) ? thresholdAngle : 1;\n\n\t// buffer\n\n\tvar vertices = [];\n\n\t// helper variables\n\n\tvar thresholdDot = Math.cos( MathUtils.DEG2RAD * thresholdAngle );\n\tvar edge = [ 0, 0 ], edges = {}, edge1, edge2;\n\tvar key, keys = [ 'a', 'b', 'c' ];\n\n\t// prepare source geometry\n\n\tvar geometry2;\n\n\tif ( geometry.isBufferGeometry ) {\n\n\t\tgeometry2 = new Geometry();\n\t\tgeometry2.fromBufferGeometry( geometry );\n\n\t} else {\n\n\t\tgeometry2 = geometry.clone();\n\n\t}\n\n\tgeometry2.mergeVertices();\n\tgeometry2.computeFaceNormals();\n\n\tvar sourceVertices = geometry2.vertices;\n\tvar faces = geometry2.faces;\n\n\t// now create a data structure where each entry represents an edge with its adjoining faces\n\n\tfor ( var i = 0, l = faces.length; i < l; i ++ ) {\n\n\t\tvar face = faces[ i ];\n\n\t\tfor ( var j = 0; j < 3; j ++ ) {\n\n\t\t\tedge1 = face[ keys[ j ] ];\n\t\t\tedge2 = face[ keys[ ( j + 1 ) % 3 ] ];\n\t\t\tedge[ 0 ] = Math.min( edge1, edge2 );\n\t\t\tedge[ 1 ] = Math.max( edge1, edge2 );\n\n\t\t\tkey = edge[ 0 ] + ',' + edge[ 1 ];\n\n\t\t\tif ( edges[ key ] === undefined ) {\n\n\t\t\t\tedges[ key ] = { index1: edge[ 0 ], index2: edge[ 1 ], face1: i, face2: undefined };\n\n\t\t\t} else {\n\n\t\t\t\tedges[ key ].face2 = i;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\t// generate vertices\n\n\tfor ( key in edges ) {\n\n\t\tvar e = edges[ key ];\n\n\t\t// an edge is only rendered if the angle (in degrees) between the face normals of the adjoining faces exceeds this value. default = 1 degree.\n\n\t\tif ( e.face2 === undefined || faces[ e.face1 ].normal.dot( faces[ e.face2 ].normal ) <= thresholdDot ) {\n\n\t\t\tvar vertex = sourceVertices[ e.index1 ];\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\tvertex = sourceVertices[ e.index2 ];\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\n}\n\nEdgesGeometry.prototype = Object.create( BufferGeometry.prototype );\nEdgesGeometry.prototype.constructor = EdgesGeometry;\n\n\nexport { EdgesGeometry };\n","import {\n\tUVMapping,\n\tCubeReflectionMapping,\n\tCubeRefractionMapping,\n\tEquirectangularReflectionMapping,\n\tEquirectangularRefractionMapping,\n\tSphericalReflectionMapping,\n\tCubeUVReflectionMapping,\n\tCubeUVRefractionMapping,\n\n\tRepeatWrapping,\n\tClampToEdgeWrapping,\n\tMirroredRepeatWrapping,\n\n\tNearestFilter,\n\tNearestMipmapNearestFilter,\n\tNearestMipmapLinearFilter,\n\tLinearFilter,\n\tLinearMipmapNearestFilter,\n\tLinearMipmapLinearFilter\n} from '../constants.js';\nimport { BufferAttribute } from '../core/BufferAttribute.js';\nimport { Color } from '../math/Color.js';\nimport { Object3D } from '../core/Object3D.js';\nimport { Group } from '../objects/Group.js';\nimport { InstancedMesh } from '../objects/InstancedMesh.js';\nimport { Sprite } from '../objects/Sprite.js';\nimport { Points } from '../objects/Points.js';\nimport { Line } from '../objects/Line.js';\nimport { LineLoop } from '../objects/LineLoop.js';\nimport { LineSegments } from '../objects/LineSegments.js';\nimport { LOD } from '../objects/LOD.js';\nimport { Mesh } from '../objects/Mesh.js';\nimport { Shape } from '../extras/core/Shape.js';\nimport { Fog } from '../scenes/Fog.js';\nimport { FogExp2 } from '../scenes/FogExp2.js';\nimport { HemisphereLight } from '../lights/HemisphereLight.js';\nimport { SpotLight } from '../lights/SpotLight.js';\nimport { PointLight } from '../lights/PointLight.js';\nimport { DirectionalLight } from '../lights/DirectionalLight.js';\nimport { AmbientLight } from '../lights/AmbientLight.js';\nimport { RectAreaLight } from '../lights/RectAreaLight.js';\nimport { OrthographicCamera } from '../cameras/OrthographicCamera.js';\nimport { PerspectiveCamera } from '../cameras/PerspectiveCamera.js';\nimport { Scene } from '../scenes/Scene.js';\nimport { CubeTexture } from '../textures/CubeTexture.js';\nimport { Texture } from '../textures/Texture.js';\nimport { ImageLoader } from './ImageLoader.js';\nimport { LoadingManager } from './LoadingManager.js';\nimport { AnimationClip } from '../animation/AnimationClip.js';\nimport { MaterialLoader } from './MaterialLoader.js';\nimport { LoaderUtils } from './LoaderUtils.js';\nimport { BufferGeometryLoader } from './BufferGeometryLoader.js';\nimport { Loader } from './Loader.js';\nimport { FileLoader } from './FileLoader.js';\nimport * as Geometries from '../geometries/Geometries.js';\nimport * as Curves from '../extras/curves/Curves.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction ObjectLoader( manager ) {\n\n\tLoader.call( this, manager );\n\n}\n\nObjectLoader.prototype = Object.assign( Object.create( Loader.prototype ), {\n\n\tconstructor: ObjectLoader,\n\n\tload: function ( url, onLoad, onProgress, onError ) {\n\n\t\tvar scope = this;\n\n\t\tvar path = ( this.path === '' ) ? LoaderUtils.extractUrlBase( url ) : this.path;\n\t\tthis.resourcePath = this.resourcePath || path;\n\n\t\tvar loader = new FileLoader( scope.manager );\n\t\tloader.setPath( this.path );\n\t\tloader.load( url, function ( text ) {\n\n\t\t\tvar json = null;\n\n\t\t\ttry {\n\n\t\t\t\tjson = JSON.parse( text );\n\n\t\t\t} catch ( error ) {\n\n\t\t\t\tif ( onError !== undefined ) onError( error );\n\n\t\t\t\tconsole.error( 'THREE:ObjectLoader: Can\\'t parse ' + url + '.', error.message );\n\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tvar metadata = json.metadata;\n\n\t\t\tif ( metadata === undefined || metadata.type === undefined || metadata.type.toLowerCase() === 'geometry' ) {\n\n\t\t\t\tconsole.error( 'THREE.ObjectLoader: Can\\'t load ' + url );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tscope.parse( json, onLoad );\n\n\t\t}, onProgress, onError );\n\n\t},\n\n\tparse: function ( json, onLoad ) {\n\n\t\tvar shapes = this.parseShape( json.shapes );\n\t\tvar geometries = this.parseGeometries( json.geometries, shapes );\n\n\t\tvar images = this.parseImages( json.images, function () {\n\n\t\t\tif ( onLoad !== undefined ) onLoad( object );\n\n\t\t} );\n\n\t\tvar textures = this.parseTextures( json.textures, images );\n\t\tvar materials = this.parseMaterials( json.materials, textures );\n\n\t\tvar object = this.parseObject( json.object, geometries, materials );\n\n\t\tif ( json.animations ) {\n\n\t\t\tobject.animations = this.parseAnimations( json.animations );\n\n\t\t}\n\n\t\tif ( json.images === undefined || json.images.length === 0 ) {\n\n\t\t\tif ( onLoad !== undefined ) onLoad( object );\n\n\t\t}\n\n\t\treturn object;\n\n\t},\n\n\tparseShape: function ( json ) {\n\n\t\tvar shapes = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tvar shape = new Shape().fromJSON( json[ i ] );\n\n\t\t\t\tshapes[ shape.uuid ] = shape;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn shapes;\n\n\t},\n\n\tparseGeometries: function ( json, shapes ) {\n\n\t\tvar geometries = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tvar bufferGeometryLoader = new BufferGeometryLoader();\n\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tvar geometry;\n\t\t\t\tvar data = json[ i ];\n\n\t\t\t\tswitch ( data.type ) {\n\n\t\t\t\t\tcase 'PlaneGeometry':\n\t\t\t\t\tcase 'PlaneBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.width,\n\t\t\t\t\t\t\tdata.height,\n\t\t\t\t\t\t\tdata.widthSegments,\n\t\t\t\t\t\t\tdata.heightSegments\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'BoxGeometry':\n\t\t\t\t\tcase 'BoxBufferGeometry':\n\t\t\t\t\tcase 'CubeGeometry': // backwards compatible\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.width,\n\t\t\t\t\t\t\tdata.height,\n\t\t\t\t\t\t\tdata.depth,\n\t\t\t\t\t\t\tdata.widthSegments,\n\t\t\t\t\t\t\tdata.heightSegments,\n\t\t\t\t\t\t\tdata.depthSegments\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'CircleGeometry':\n\t\t\t\t\tcase 'CircleBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.segments,\n\t\t\t\t\t\t\tdata.thetaStart,\n\t\t\t\t\t\t\tdata.thetaLength\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'CylinderGeometry':\n\t\t\t\t\tcase 'CylinderBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.radiusTop,\n\t\t\t\t\t\t\tdata.radiusBottom,\n\t\t\t\t\t\t\tdata.height,\n\t\t\t\t\t\t\tdata.radialSegments,\n\t\t\t\t\t\t\tdata.heightSegments,\n\t\t\t\t\t\t\tdata.openEnded,\n\t\t\t\t\t\t\tdata.thetaStart,\n\t\t\t\t\t\t\tdata.thetaLength\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'ConeGeometry':\n\t\t\t\t\tcase 'ConeBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.height,\n\t\t\t\t\t\t\tdata.radialSegments,\n\t\t\t\t\t\t\tdata.heightSegments,\n\t\t\t\t\t\t\tdata.openEnded,\n\t\t\t\t\t\t\tdata.thetaStart,\n\t\t\t\t\t\t\tdata.thetaLength\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'SphereGeometry':\n\t\t\t\t\tcase 'SphereBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.widthSegments,\n\t\t\t\t\t\t\tdata.heightSegments,\n\t\t\t\t\t\t\tdata.phiStart,\n\t\t\t\t\t\t\tdata.phiLength,\n\t\t\t\t\t\t\tdata.thetaStart,\n\t\t\t\t\t\t\tdata.thetaLength\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'DodecahedronGeometry':\n\t\t\t\t\tcase 'DodecahedronBufferGeometry':\n\t\t\t\t\tcase 'IcosahedronGeometry':\n\t\t\t\t\tcase 'IcosahedronBufferGeometry':\n\t\t\t\t\tcase 'OctahedronGeometry':\n\t\t\t\t\tcase 'OctahedronBufferGeometry':\n\t\t\t\t\tcase 'TetrahedronGeometry':\n\t\t\t\t\tcase 'TetrahedronBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.detail\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'RingGeometry':\n\t\t\t\t\tcase 'RingBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.innerRadius,\n\t\t\t\t\t\t\tdata.outerRadius,\n\t\t\t\t\t\t\tdata.thetaSegments,\n\t\t\t\t\t\t\tdata.phiSegments,\n\t\t\t\t\t\t\tdata.thetaStart,\n\t\t\t\t\t\t\tdata.thetaLength\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'TorusGeometry':\n\t\t\t\t\tcase 'TorusBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.tube,\n\t\t\t\t\t\t\tdata.radialSegments,\n\t\t\t\t\t\t\tdata.tubularSegments,\n\t\t\t\t\t\t\tdata.arc\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'TorusKnotGeometry':\n\t\t\t\t\tcase 'TorusKnotBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.tube,\n\t\t\t\t\t\t\tdata.tubularSegments,\n\t\t\t\t\t\t\tdata.radialSegments,\n\t\t\t\t\t\t\tdata.p,\n\t\t\t\t\t\t\tdata.q\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'TubeGeometry':\n\t\t\t\t\tcase 'TubeBufferGeometry':\n\n\t\t\t\t\t\t// This only works for built-in curves (e.g. CatmullRomCurve3).\n\t\t\t\t\t\t// User defined curves or instances of CurvePath will not be deserialized.\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tnew Curves[ data.path.type ]().fromJSON( data.path ),\n\t\t\t\t\t\t\tdata.tubularSegments,\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.radialSegments,\n\t\t\t\t\t\t\tdata.closed\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'LatheGeometry':\n\t\t\t\t\tcase 'LatheBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.points,\n\t\t\t\t\t\t\tdata.segments,\n\t\t\t\t\t\t\tdata.phiStart,\n\t\t\t\t\t\t\tdata.phiLength\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'PolyhedronGeometry':\n\t\t\t\t\tcase 'PolyhedronBufferGeometry':\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tdata.vertices,\n\t\t\t\t\t\t\tdata.indices,\n\t\t\t\t\t\t\tdata.radius,\n\t\t\t\t\t\t\tdata.details\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'ShapeGeometry':\n\t\t\t\t\tcase 'ShapeBufferGeometry':\n\n\t\t\t\t\t\tvar geometryShapes = [];\n\n\t\t\t\t\t\tfor ( var j = 0, jl = data.shapes.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tvar shape = shapes[ data.shapes[ j ] ];\n\n\t\t\t\t\t\t\tgeometryShapes.push( shape );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tgeometryShapes,\n\t\t\t\t\t\t\tdata.curveSegments\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\n\t\t\t\t\tcase 'ExtrudeGeometry':\n\t\t\t\t\tcase 'ExtrudeBufferGeometry':\n\n\t\t\t\t\t\tvar geometryShapes = [];\n\n\t\t\t\t\t\tfor ( var j = 0, jl = data.shapes.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\t\tvar shape = shapes[ data.shapes[ j ] ];\n\n\t\t\t\t\t\t\tgeometryShapes.push( shape );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tvar extrudePath = data.options.extrudePath;\n\n\t\t\t\t\t\tif ( extrudePath !== undefined ) {\n\n\t\t\t\t\t\t\tdata.options.extrudePath = new Curves[ extrudePath.type ]().fromJSON( extrudePath );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tgeometry = new Geometries[ data.type ](\n\t\t\t\t\t\t\tgeometryShapes,\n\t\t\t\t\t\t\tdata.options\n\t\t\t\t\t\t);\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'BufferGeometry':\n\t\t\t\t\tcase 'InstancedBufferGeometry':\n\n\t\t\t\t\t\tgeometry = bufferGeometryLoader.parse( data );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tcase 'Geometry':\n\n\t\t\t\t\t\tconsole.error( 'THREE.ObjectLoader: Loading \"Geometry\" is not supported anymore.' );\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\tdefault:\n\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Unsupported geometry type \"' + data.type + '\"' );\n\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.uuid = data.uuid;\n\n\t\t\t\tif ( data.name !== undefined ) geometry.name = data.name;\n\t\t\t\tif ( geometry.isBufferGeometry === true && data.userData !== undefined ) geometry.userData = data.userData;\n\n\t\t\t\tgeometries[ data.uuid ] = geometry;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn geometries;\n\n\t},\n\n\tparseMaterials: function ( json, textures ) {\n\n\t\tvar cache = {}; // MultiMaterial\n\t\tvar materials = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tvar loader = new MaterialLoader();\n\t\t\tloader.setTextures( textures );\n\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tvar data = json[ i ];\n\n\t\t\t\tif ( data.type === 'MultiMaterial' ) {\n\n\t\t\t\t\t// Deprecated\n\n\t\t\t\t\tvar array = [];\n\n\t\t\t\t\tfor ( var j = 0; j < data.materials.length; j ++ ) {\n\n\t\t\t\t\t\tvar material = data.materials[ j ];\n\n\t\t\t\t\t\tif ( cache[ material.uuid ] === undefined ) {\n\n\t\t\t\t\t\t\tcache[ material.uuid ] = loader.parse( material );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tarray.push( cache[ material.uuid ] );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tmaterials[ data.uuid ] = array;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( cache[ data.uuid ] === undefined ) {\n\n\t\t\t\t\t\tcache[ data.uuid ] = loader.parse( data );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tmaterials[ data.uuid ] = cache[ data.uuid ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn materials;\n\n\t},\n\n\tparseAnimations: function ( json ) {\n\n\t\tvar animations = [];\n\n\t\tfor ( var i = 0; i < json.length; i ++ ) {\n\n\t\t\tvar data = json[ i ];\n\n\t\t\tvar clip = AnimationClip.parse( data );\n\n\t\t\tif ( data.uuid !== undefined ) clip.uuid = data.uuid;\n\n\t\t\tanimations.push( clip );\n\n\t\t}\n\n\t\treturn animations;\n\n\t},\n\n\tparseImages: function ( json, onLoad ) {\n\n\t\tvar scope = this;\n\t\tvar images = {};\n\n\t\tfunction loadImage( url ) {\n\n\t\t\tscope.manager.itemStart( url );\n\n\t\t\treturn loader.load( url, function () {\n\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t}, undefined, function () {\n\n\t\t\t\tscope.manager.itemError( url );\n\t\t\t\tscope.manager.itemEnd( url );\n\n\t\t\t} );\n\n\t\t}\n\n\t\tif ( json !== undefined && json.length > 0 ) {\n\n\t\t\tvar manager = new LoadingManager( onLoad );\n\n\t\t\tvar loader = new ImageLoader( manager );\n\t\t\tloader.setCrossOrigin( this.crossOrigin );\n\n\t\t\tfor ( var i = 0, il = json.length; i < il; i ++ ) {\n\n\t\t\t\tvar image = json[ i ];\n\t\t\t\tvar url = image.url;\n\n\t\t\t\tif ( Array.isArray( url ) ) {\n\n\t\t\t\t\t// load array of images e.g CubeTexture\n\n\t\t\t\t\timages[ image.uuid ] = [];\n\n\t\t\t\t\tfor ( var j = 0, jl = url.length; j < jl; j ++ ) {\n\n\t\t\t\t\t\tvar currentUrl = url[ j ];\n\n\t\t\t\t\t\tvar path = /^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test( currentUrl ) ? currentUrl : scope.resourcePath + currentUrl;\n\n\t\t\t\t\t\timages[ image.uuid ].push( loadImage( path ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// load single image\n\n\t\t\t\t\tvar path = /^(\\/\\/)|([a-z]+:(\\/\\/)?)/i.test( image.url ) ? image.url : scope.resourcePath + image.url;\n\n\t\t\t\t\timages[ image.uuid ] = loadImage( path );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn images;\n\n\t},\n\n\tparseTextures: function ( json, images ) {\n\n\t\tfunction parseConstant( value, type ) {\n\n\t\t\tif ( typeof value === 'number' ) return value;\n\n\t\t\tconsole.warn( 'THREE.ObjectLoader.parseTexture: Constant should be in numeric form.', value );\n\n\t\t\treturn type[ value ];\n\n\t\t}\n\n\t\tvar textures = {};\n\n\t\tif ( json !== undefined ) {\n\n\t\t\tfor ( var i = 0, l = json.length; i < l; i ++ ) {\n\n\t\t\t\tvar data = json[ i ];\n\n\t\t\t\tif ( data.image === undefined ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: No \"image\" specified for', data.uuid );\n\n\t\t\t\t}\n\n\t\t\t\tif ( images[ data.image ] === undefined ) {\n\n\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined image', data.image );\n\n\t\t\t\t}\n\n\t\t\t\tvar texture;\n\n\t\t\t\tif ( Array.isArray( images[ data.image ] ) ) {\n\n\t\t\t\t\ttexture = new CubeTexture( images[ data.image ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\ttexture = new Texture( images[ data.image ] );\n\n\t\t\t\t}\n\n\t\t\t\ttexture.needsUpdate = true;\n\n\t\t\t\ttexture.uuid = data.uuid;\n\n\t\t\t\tif ( data.name !== undefined ) texture.name = data.name;\n\n\t\t\t\tif ( data.mapping !== undefined ) texture.mapping = parseConstant( data.mapping, TEXTURE_MAPPING );\n\n\t\t\t\tif ( data.offset !== undefined ) texture.offset.fromArray( data.offset );\n\t\t\t\tif ( data.repeat !== undefined ) texture.repeat.fromArray( data.repeat );\n\t\t\t\tif ( data.center !== undefined ) texture.center.fromArray( data.center );\n\t\t\t\tif ( data.rotation !== undefined ) texture.rotation = data.rotation;\n\n\t\t\t\tif ( data.wrap !== undefined ) {\n\n\t\t\t\t\ttexture.wrapS = parseConstant( data.wrap[ 0 ], TEXTURE_WRAPPING );\n\t\t\t\t\ttexture.wrapT = parseConstant( data.wrap[ 1 ], TEXTURE_WRAPPING );\n\n\t\t\t\t}\n\n\t\t\t\tif ( data.format !== undefined ) texture.format = data.format;\n\t\t\t\tif ( data.type !== undefined ) texture.type = data.type;\n\t\t\t\tif ( data.encoding !== undefined ) texture.encoding = data.encoding;\n\n\t\t\t\tif ( data.minFilter !== undefined ) texture.minFilter = parseConstant( data.minFilter, TEXTURE_FILTER );\n\t\t\t\tif ( data.magFilter !== undefined ) texture.magFilter = parseConstant( data.magFilter, TEXTURE_FILTER );\n\t\t\t\tif ( data.anisotropy !== undefined ) texture.anisotropy = data.anisotropy;\n\n\t\t\t\tif ( data.flipY !== undefined ) texture.flipY = data.flipY;\n\n\t\t\t\tif ( data.premultiplyAlpha !== undefined ) texture.premultiplyAlpha = data.premultiplyAlpha;\n\t\t\t\tif ( data.unpackAlignment !== undefined ) texture.unpackAlignment = data.unpackAlignment;\n\n\t\t\t\ttextures[ data.uuid ] = texture;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn textures;\n\n\t},\n\n\tparseObject: function ( data, geometries, materials ) {\n\n\t\tvar object;\n\n\t\tfunction getGeometry( name ) {\n\n\t\t\tif ( geometries[ name ] === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined geometry', name );\n\n\t\t\t}\n\n\t\t\treturn geometries[ name ];\n\n\t\t}\n\n\t\tfunction getMaterial( name ) {\n\n\t\t\tif ( name === undefined ) return undefined;\n\n\t\t\tif ( Array.isArray( name ) ) {\n\n\t\t\t\tvar array = [];\n\n\t\t\t\tfor ( var i = 0, l = name.length; i < l; i ++ ) {\n\n\t\t\t\t\tvar uuid = name[ i ];\n\n\t\t\t\t\tif ( materials[ uuid ] === undefined ) {\n\n\t\t\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', uuid );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tarray.push( materials[ uuid ] );\n\n\t\t\t\t}\n\n\t\t\t\treturn array;\n\n\t\t\t}\n\n\t\t\tif ( materials[ name ] === undefined ) {\n\n\t\t\t\tconsole.warn( 'THREE.ObjectLoader: Undefined material', name );\n\n\t\t\t}\n\n\t\t\treturn materials[ name ];\n\n\t\t}\n\n\t\tswitch ( data.type ) {\n\n\t\t\tcase 'Scene':\n\n\t\t\t\tobject = new Scene();\n\n\t\t\t\tif ( data.background !== undefined ) {\n\n\t\t\t\t\tif ( Number.isInteger( data.background ) ) {\n\n\t\t\t\t\t\tobject.background = new Color( data.background );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tif ( data.fog !== undefined ) {\n\n\t\t\t\t\tif ( data.fog.type === 'Fog' ) {\n\n\t\t\t\t\t\tobject.fog = new Fog( data.fog.color, data.fog.near, data.fog.far );\n\n\t\t\t\t\t} else if ( data.fog.type === 'FogExp2' ) {\n\n\t\t\t\t\t\tobject.fog = new FogExp2( data.fog.color, data.fog.density );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'PerspectiveCamera':\n\n\t\t\t\tobject = new PerspectiveCamera( data.fov, data.aspect, data.near, data.far );\n\n\t\t\t\tif ( data.focus !== undefined ) object.focus = data.focus;\n\t\t\t\tif ( data.zoom !== undefined ) object.zoom = data.zoom;\n\t\t\t\tif ( data.filmGauge !== undefined ) object.filmGauge = data.filmGauge;\n\t\t\t\tif ( data.filmOffset !== undefined ) object.filmOffset = data.filmOffset;\n\t\t\t\tif ( data.view !== undefined ) object.view = Object.assign( {}, data.view );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'OrthographicCamera':\n\n\t\t\t\tobject = new OrthographicCamera( data.left, data.right, data.top, data.bottom, data.near, data.far );\n\n\t\t\t\tif ( data.zoom !== undefined ) object.zoom = data.zoom;\n\t\t\t\tif ( data.view !== undefined ) object.view = Object.assign( {}, data.view );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'AmbientLight':\n\n\t\t\t\tobject = new AmbientLight( data.color, data.intensity );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'DirectionalLight':\n\n\t\t\t\tobject = new DirectionalLight( data.color, data.intensity );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'PointLight':\n\n\t\t\t\tobject = new PointLight( data.color, data.intensity, data.distance, data.decay );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'RectAreaLight':\n\n\t\t\t\tobject = new RectAreaLight( data.color, data.intensity, data.width, data.height );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'SpotLight':\n\n\t\t\t\tobject = new SpotLight( data.color, data.intensity, data.distance, data.angle, data.penumbra, data.decay );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'HemisphereLight':\n\n\t\t\t\tobject = new HemisphereLight( data.color, data.groundColor, data.intensity );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'SkinnedMesh':\n\n\t\t\t\tconsole.warn( 'THREE.ObjectLoader.parseObject() does not support SkinnedMesh yet.' );\n\n\t\t\tcase 'Mesh':\n\n\t\t\t\tvar geometry = getGeometry( data.geometry );\n\t\t\t\tvar material = getMaterial( data.material );\n\n\t\t\t\tobject = new Mesh( geometry, material );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'InstancedMesh':\n\n\t\t\t\tvar geometry = getGeometry( data.geometry );\n\t\t\t\tvar material = getMaterial( data.material );\n\t\t\t\tvar count = data.count;\n\t\t\t\tvar instanceMatrix = data.instanceMatrix;\n\n\t\t\t\tobject = new InstancedMesh( geometry, material, count );\n\t\t\t\tobject.instanceMatrix = new BufferAttribute( new Float32Array( instanceMatrix.array ), 16 );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'LOD':\n\n\t\t\t\tobject = new LOD();\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'Line':\n\n\t\t\t\tobject = new Line( getGeometry( data.geometry ), getMaterial( data.material ), data.mode );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'LineLoop':\n\n\t\t\t\tobject = new LineLoop( getGeometry( data.geometry ), getMaterial( data.material ) );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'LineSegments':\n\n\t\t\t\tobject = new LineSegments( getGeometry( data.geometry ), getMaterial( data.material ) );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'PointCloud':\n\t\t\tcase 'Points':\n\n\t\t\t\tobject = new Points( getGeometry( data.geometry ), getMaterial( data.material ) );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'Sprite':\n\n\t\t\t\tobject = new Sprite( getMaterial( data.material ) );\n\n\t\t\t\tbreak;\n\n\t\t\tcase 'Group':\n\n\t\t\t\tobject = new Group();\n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\n\t\t\t\tobject = new Object3D();\n\n\t\t}\n\n\t\tobject.uuid = data.uuid;\n\n\t\tif ( data.name !== undefined ) object.name = data.name;\n\n\t\tif ( data.matrix !== undefined ) {\n\n\t\t\tobject.matrix.fromArray( data.matrix );\n\n\t\t\tif ( data.matrixAutoUpdate !== undefined ) object.matrixAutoUpdate = data.matrixAutoUpdate;\n\t\t\tif ( object.matrixAutoUpdate ) object.matrix.decompose( object.position, object.quaternion, object.scale );\n\n\t\t} else {\n\n\t\t\tif ( data.position !== undefined ) object.position.fromArray( data.position );\n\t\t\tif ( data.rotation !== undefined ) object.rotation.fromArray( data.rotation );\n\t\t\tif ( data.quaternion !== undefined ) object.quaternion.fromArray( data.quaternion );\n\t\t\tif ( data.scale !== undefined ) object.scale.fromArray( data.scale );\n\n\t\t}\n\n\t\tif ( data.castShadow !== undefined ) object.castShadow = data.castShadow;\n\t\tif ( data.receiveShadow !== undefined ) object.receiveShadow = data.receiveShadow;\n\n\t\tif ( data.shadow ) {\n\n\t\t\tif ( data.shadow.bias !== undefined ) object.shadow.bias = data.shadow.bias;\n\t\t\tif ( data.shadow.radius !== undefined ) object.shadow.radius = data.shadow.radius;\n\t\t\tif ( data.shadow.mapSize !== undefined ) object.shadow.mapSize.fromArray( data.shadow.mapSize );\n\t\t\tif ( data.shadow.camera !== undefined ) object.shadow.camera = this.parseObject( data.shadow.camera );\n\n\t\t}\n\n\t\tif ( data.visible !== undefined ) object.visible = data.visible;\n\t\tif ( data.frustumCulled !== undefined ) object.frustumCulled = data.frustumCulled;\n\t\tif ( data.renderOrder !== undefined ) object.renderOrder = data.renderOrder;\n\t\tif ( data.userData !== undefined ) object.userData = data.userData;\n\t\tif ( data.layers !== undefined ) object.layers.mask = data.layers;\n\n\t\tif ( data.children !== undefined ) {\n\n\t\t\tvar children = data.children;\n\n\t\t\tfor ( var i = 0; i < children.length; i ++ ) {\n\n\t\t\t\tobject.add( this.parseObject( children[ i ], geometries, materials ) );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( data.type === 'LOD' ) {\n\n\t\t\tif ( data.autoUpdate !== undefined ) object.autoUpdate = data.autoUpdate;\n\n\t\t\tvar levels = data.levels;\n\n\t\t\tfor ( var l = 0; l < levels.length; l ++ ) {\n\n\t\t\t\tvar level = levels[ l ];\n\t\t\t\tvar child = object.getObjectByProperty( 'uuid', level.object );\n\n\t\t\t\tif ( child !== undefined ) {\n\n\t\t\t\t\tobject.addLevel( child, level.distance );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn object;\n\n\t}\n\n} );\n\nvar TEXTURE_MAPPING = {\n\tUVMapping: UVMapping,\n\tCubeReflectionMapping: CubeReflectionMapping,\n\tCubeRefractionMapping: CubeRefractionMapping,\n\tEquirectangularReflectionMapping: EquirectangularReflectionMapping,\n\tEquirectangularRefractionMapping: EquirectangularRefractionMapping,\n\tSphericalReflectionMapping: SphericalReflectionMapping,\n\tCubeUVReflectionMapping: CubeUVReflectionMapping,\n\tCubeUVRefractionMapping: CubeUVRefractionMapping\n};\n\nvar TEXTURE_WRAPPING = {\n\tRepeatWrapping: RepeatWrapping,\n\tClampToEdgeWrapping: ClampToEdgeWrapping,\n\tMirroredRepeatWrapping: MirroredRepeatWrapping\n};\n\nvar TEXTURE_FILTER = {\n\tNearestFilter: NearestFilter,\n\tNearestMipmapNearestFilter: NearestMipmapNearestFilter,\n\tNearestMipmapLinearFilter: NearestMipmapLinearFilter,\n\tLinearFilter: LinearFilter,\n\tLinearMipmapNearestFilter: LinearMipmapNearestFilter,\n\tLinearMipmapLinearFilter: LinearMipmapLinearFilter\n};\n\n\nexport { ObjectLoader };\n","import { Material } from './Material.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *\n *  linewidth: <float>,\n *  linecap: \"round\",\n *  linejoin: \"round\"\n * }\n */\n\nfunction LineBasicMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'LineBasicMaterial';\n\n\tthis.color = new Color( 0xffffff );\n\n\tthis.linewidth = 1;\n\tthis.linecap = 'round';\n\tthis.linejoin = 'round';\n\n\tthis.setValues( parameters );\n\n}\n\nLineBasicMaterial.prototype = Object.create( Material.prototype );\nLineBasicMaterial.prototype.constructor = LineBasicMaterial;\n\nLineBasicMaterial.prototype.isLineBasicMaterial = true;\n\nLineBasicMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.linewidth = source.linewidth;\n\tthis.linecap = source.linecap;\n\tthis.linejoin = source.linejoin;\n\n\treturn this;\n\n};\n\n\nexport { LineBasicMaterial };\n","/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nfunction Clock( autoStart ) {\n\n\tthis.autoStart = ( autoStart !== undefined ) ? autoStart : true;\n\n\tthis.startTime = 0;\n\tthis.oldTime = 0;\n\tthis.elapsedTime = 0;\n\n\tthis.running = false;\n\n}\n\nObject.assign( Clock.prototype, {\n\n\tstart: function () {\n\n\t\tthis.startTime = ( typeof performance === 'undefined' ? Date : performance ).now(); // see #10732\n\n\t\tthis.oldTime = this.startTime;\n\t\tthis.elapsedTime = 0;\n\t\tthis.running = true;\n\n\t},\n\n\tstop: function () {\n\n\t\tthis.getElapsedTime();\n\t\tthis.running = false;\n\t\tthis.autoStart = false;\n\n\t},\n\n\tgetElapsedTime: function () {\n\n\t\tthis.getDelta();\n\t\treturn this.elapsedTime;\n\n\t},\n\n\tgetDelta: function () {\n\n\t\tvar diff = 0;\n\n\t\tif ( this.autoStart && ! this.running ) {\n\n\t\t\tthis.start();\n\t\t\treturn 0;\n\n\t\t}\n\n\t\tif ( this.running ) {\n\n\t\t\tvar newTime = ( typeof performance === 'undefined' ? Date : performance ).now();\n\n\t\t\tdiff = ( newTime - this.oldTime ) / 1000;\n\t\t\tthis.oldTime = newTime;\n\n\t\t\tthis.elapsedTime += diff;\n\n\t\t}\n\n\t\treturn diff;\n\n\t}\n\n} );\n\n\nexport { Clock };\n","import { Matrix4 } from '../math/Matrix4.js';\n\n/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author michael guerrero / http://realitymeltdown.com\n * @author ikerr / http://verold.com\n */\n\nvar _offsetMatrix = new Matrix4();\nvar _identityMatrix = new Matrix4();\n\nfunction Skeleton( bones, boneInverses ) {\n\n\t// copy the bone array\n\n\tbones = bones || [];\n\n\tthis.bones = bones.slice( 0 );\n\tthis.boneMatrices = new Float32Array( this.bones.length * 16 );\n\n\tthis.frame = - 1;\n\n\t// use the supplied bone inverses or calculate the inverses\n\n\tif ( boneInverses === undefined ) {\n\n\t\tthis.calculateInverses();\n\n\t} else {\n\n\t\tif ( this.bones.length === boneInverses.length ) {\n\n\t\t\tthis.boneInverses = boneInverses.slice( 0 );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.Skeleton boneInverses is the wrong length.' );\n\n\t\t\tthis.boneInverses = [];\n\n\t\t\tfor ( var i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\t\tthis.boneInverses.push( new Matrix4() );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nObject.assign( Skeleton.prototype, {\n\n\tcalculateInverses: function () {\n\n\t\tthis.boneInverses = [];\n\n\t\tfor ( var i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tvar inverse = new Matrix4();\n\n\t\t\tif ( this.bones[ i ] ) {\n\n\t\t\t\tinverse.getInverse( this.bones[ i ].matrixWorld );\n\n\t\t\t}\n\n\t\t\tthis.boneInverses.push( inverse );\n\n\t\t}\n\n\t},\n\n\tpose: function () {\n\n\t\tvar bone, i, il;\n\n\t\t// recover the bind-time world matrices\n\n\t\tfor ( i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tbone = this.bones[ i ];\n\n\t\t\tif ( bone ) {\n\n\t\t\t\tbone.matrixWorld.getInverse( this.boneInverses[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// compute the local matrices, positions, rotations and scales\n\n\t\tfor ( i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tbone = this.bones[ i ];\n\n\t\t\tif ( bone ) {\n\n\t\t\t\tif ( bone.parent && bone.parent.isBone ) {\n\n\t\t\t\t\tbone.matrix.getInverse( bone.parent.matrixWorld );\n\t\t\t\t\tbone.matrix.multiply( bone.matrixWorld );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tbone.matrix.copy( bone.matrixWorld );\n\n\t\t\t\t}\n\n\t\t\t\tbone.matrix.decompose( bone.position, bone.quaternion, bone.scale );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tupdate: function () {\n\n\t\tvar bones = this.bones;\n\t\tvar boneInverses = this.boneInverses;\n\t\tvar boneMatrices = this.boneMatrices;\n\t\tvar boneTexture = this.boneTexture;\n\n\t\t// flatten bone matrices to array\n\n\t\tfor ( var i = 0, il = bones.length; i < il; i ++ ) {\n\n\t\t\t// compute the offset between the current and the original transform\n\n\t\t\tvar matrix = bones[ i ] ? bones[ i ].matrixWorld : _identityMatrix;\n\n\t\t\t_offsetMatrix.multiplyMatrices( matrix, boneInverses[ i ] );\n\t\t\t_offsetMatrix.toArray( boneMatrices, i * 16 );\n\n\t\t}\n\n\t\tif ( boneTexture !== undefined ) {\n\n\t\t\tboneTexture.needsUpdate = true;\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new Skeleton( this.bones, this.boneInverses );\n\n\t},\n\n\tgetBoneByName: function ( name ) {\n\n\t\tfor ( var i = 0, il = this.bones.length; i < il; i ++ ) {\n\n\t\t\tvar bone = this.bones[ i ];\n\n\t\t\tif ( bone.name === name ) {\n\n\t\t\t\treturn bone;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn undefined;\n\n\t},\n\n\tdispose: function ( ) {\n\n\t\tif ( this.boneTexture ) {\n\n\t\t\tthis.boneTexture.dispose();\n\n\t\t\tthis.boneTexture = undefined;\n\n\t\t}\n\n\t}\n\n} );\n\n\nexport { Skeleton };\n","/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://clara.io\n */\n\nimport { MathUtils } from './MathUtils.js';\n\nfunction Quaternion( x, y, z, w ) {\n\n\tthis._x = x || 0;\n\tthis._y = y || 0;\n\tthis._z = z || 0;\n\tthis._w = ( w !== undefined ) ? w : 1;\n\n}\n\nObject.assign( Quaternion, {\n\n\tslerp: function ( qa, qb, qm, t ) {\n\n\t\treturn qm.copy( qa ).slerp( qb, t );\n\n\t},\n\n\tslerpFlat: function ( dst, dstOffset, src0, srcOffset0, src1, srcOffset1, t ) {\n\n\t\t// fuzz-free, array-based Quaternion SLERP operation\n\n\t\tvar x0 = src0[ srcOffset0 + 0 ],\n\t\t\ty0 = src0[ srcOffset0 + 1 ],\n\t\t\tz0 = src0[ srcOffset0 + 2 ],\n\t\t\tw0 = src0[ srcOffset0 + 3 ],\n\n\t\t\tx1 = src1[ srcOffset1 + 0 ],\n\t\t\ty1 = src1[ srcOffset1 + 1 ],\n\t\t\tz1 = src1[ srcOffset1 + 2 ],\n\t\t\tw1 = src1[ srcOffset1 + 3 ];\n\n\t\tif ( w0 !== w1 || x0 !== x1 || y0 !== y1 || z0 !== z1 ) {\n\n\t\t\tvar s = 1 - t,\n\n\t\t\t\tcos = x0 * x1 + y0 * y1 + z0 * z1 + w0 * w1,\n\n\t\t\t\tdir = ( cos >= 0 ? 1 : - 1 ),\n\t\t\t\tsqrSin = 1 - cos * cos;\n\n\t\t\t// Skip the Slerp for tiny steps to avoid numeric problems:\n\t\t\tif ( sqrSin > Number.EPSILON ) {\n\n\t\t\t\tvar sin = Math.sqrt( sqrSin ),\n\t\t\t\t\tlen = Math.atan2( sin, cos * dir );\n\n\t\t\t\ts = Math.sin( s * len ) / sin;\n\t\t\t\tt = Math.sin( t * len ) / sin;\n\n\t\t\t}\n\n\t\t\tvar tDir = t * dir;\n\n\t\t\tx0 = x0 * s + x1 * tDir;\n\t\t\ty0 = y0 * s + y1 * tDir;\n\t\t\tz0 = z0 * s + z1 * tDir;\n\t\t\tw0 = w0 * s + w1 * tDir;\n\n\t\t\t// Normalize in case we just did a lerp:\n\t\t\tif ( s === 1 - t ) {\n\n\t\t\t\tvar f = 1 / Math.sqrt( x0 * x0 + y0 * y0 + z0 * z0 + w0 * w0 );\n\n\t\t\t\tx0 *= f;\n\t\t\t\ty0 *= f;\n\t\t\t\tz0 *= f;\n\t\t\t\tw0 *= f;\n\n\t\t\t}\n\n\t\t}\n\n\t\tdst[ dstOffset ] = x0;\n\t\tdst[ dstOffset + 1 ] = y0;\n\t\tdst[ dstOffset + 2 ] = z0;\n\t\tdst[ dstOffset + 3 ] = w0;\n\n\t}\n\n} );\n\nObject.defineProperties( Quaternion.prototype, {\n\n\tx: {\n\n\t\tget: function () {\n\n\t\t\treturn this._x;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._x = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t},\n\n\ty: {\n\n\t\tget: function () {\n\n\t\t\treturn this._y;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._y = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t},\n\n\tz: {\n\n\t\tget: function () {\n\n\t\t\treturn this._z;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._z = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t},\n\n\tw: {\n\n\t\tget: function () {\n\n\t\t\treturn this._w;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._w = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t}\n\n} );\n\nObject.assign( Quaternion.prototype, {\n\n\tisQuaternion: true,\n\n\tset: function ( x, y, z, w ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._w = w;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._w );\n\n\t},\n\n\tcopy: function ( quaternion ) {\n\n\t\tthis._x = quaternion.x;\n\t\tthis._y = quaternion.y;\n\t\tthis._z = quaternion.z;\n\t\tthis._w = quaternion.w;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromEuler: function ( euler, update ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tthrow new Error( 'THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\tvar x = euler._x, y = euler._y, z = euler._z, order = euler.order;\n\n\t\t// http://www.mathworks.com/matlabcentral/fileexchange/\n\t\t// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\n\t\t//\tcontent/SpinCalc.m\n\n\t\tvar cos = Math.cos;\n\t\tvar sin = Math.sin;\n\n\t\tvar c1 = cos( x / 2 );\n\t\tvar c2 = cos( y / 2 );\n\t\tvar c3 = cos( z / 2 );\n\n\t\tvar s1 = sin( x / 2 );\n\t\tvar s2 = sin( y / 2 );\n\t\tvar s3 = sin( z / 2 );\n\n\t\tif ( order === 'XYZ' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t} else if ( order === 'YXZ' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t} else if ( order === 'ZXY' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t} else if ( order === 'ZYX' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t} else if ( order === 'YZX' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t} else if ( order === 'XZY' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t}\n\n\t\tif ( update !== false ) this._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromAxisAngle: function ( axis, angle ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\n\n\t\t// assumes axis is normalized\n\n\t\tvar halfAngle = angle / 2, s = Math.sin( halfAngle );\n\n\t\tthis._x = axis.x * s;\n\t\tthis._y = axis.y * s;\n\t\tthis._z = axis.z * s;\n\t\tthis._w = Math.cos( halfAngle );\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromRotationMatrix: function ( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tvar te = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\n\n\t\t\ttrace = m11 + m22 + m33,\n\t\t\ts;\n\n\t\tif ( trace > 0 ) {\n\n\t\t\ts = 0.5 / Math.sqrt( trace + 1.0 );\n\n\t\t\tthis._w = 0.25 / s;\n\t\t\tthis._x = ( m32 - m23 ) * s;\n\t\t\tthis._y = ( m13 - m31 ) * s;\n\t\t\tthis._z = ( m21 - m12 ) * s;\n\n\t\t} else if ( m11 > m22 && m11 > m33 ) {\n\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\n\n\t\t\tthis._w = ( m32 - m23 ) / s;\n\t\t\tthis._x = 0.25 * s;\n\t\t\tthis._y = ( m12 + m21 ) / s;\n\t\t\tthis._z = ( m13 + m31 ) / s;\n\n\t\t} else if ( m22 > m33 ) {\n\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\n\n\t\t\tthis._w = ( m13 - m31 ) / s;\n\t\t\tthis._x = ( m12 + m21 ) / s;\n\t\t\tthis._y = 0.25 * s;\n\t\t\tthis._z = ( m23 + m32 ) / s;\n\n\t\t} else {\n\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\n\n\t\t\tthis._w = ( m21 - m12 ) / s;\n\t\t\tthis._x = ( m13 + m31 ) / s;\n\t\t\tthis._y = ( m23 + m32 ) / s;\n\t\t\tthis._z = 0.25 * s;\n\n\t\t}\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromUnitVectors: function ( vFrom, vTo ) {\n\n\t\t// assumes direction vectors vFrom and vTo are normalized\n\n\t\tvar EPS = 0.000001;\n\n\t\tvar r = vFrom.dot( vTo ) + 1;\n\n\t\tif ( r < EPS ) {\n\n\t\t\tr = 0;\n\n\t\t\tif ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\n\n\t\t\t\tthis._x = - vFrom.y;\n\t\t\t\tthis._y = vFrom.x;\n\t\t\t\tthis._z = 0;\n\t\t\t\tthis._w = r;\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._y = - vFrom.z;\n\t\t\t\tthis._z = vFrom.y;\n\t\t\t\tthis._w = r;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// crossVectors( vFrom, vTo ); // inlined to avoid cyclic dependency on Vector3\n\n\t\t\tthis._x = vFrom.y * vTo.z - vFrom.z * vTo.y;\n\t\t\tthis._y = vFrom.z * vTo.x - vFrom.x * vTo.z;\n\t\t\tthis._z = vFrom.x * vTo.y - vFrom.y * vTo.x;\n\t\t\tthis._w = r;\n\n\t\t}\n\n\t\treturn this.normalize();\n\n\t},\n\n\tangleTo: function ( q ) {\n\n\t\treturn 2 * Math.acos( Math.abs( MathUtils.clamp( this.dot( q ), - 1, 1 ) ) );\n\n\t},\n\n\trotateTowards: function ( q, step ) {\n\n\t\tvar angle = this.angleTo( q );\n\n\t\tif ( angle === 0 ) return this;\n\n\t\tvar t = Math.min( 1, step / angle );\n\n\t\tthis.slerp( q, t );\n\n\t\treturn this;\n\n\t},\n\n\tinverse: function () {\n\n\t\t// quaternion is assumed to have unit length\n\n\t\treturn this.conjugate();\n\n\t},\n\n\tconjugate: function () {\n\n\t\tthis._x *= - 1;\n\t\tthis._y *= - 1;\n\t\tthis._z *= - 1;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\n\n\t},\n\n\tnormalize: function () {\n\n\t\tvar l = this.length();\n\n\t\tif ( l === 0 ) {\n\n\t\t\tthis._x = 0;\n\t\t\tthis._y = 0;\n\t\t\tthis._z = 0;\n\t\t\tthis._w = 1;\n\n\t\t} else {\n\n\t\t\tl = 1 / l;\n\n\t\t\tthis._x = this._x * l;\n\t\t\tthis._y = this._y * l;\n\t\t\tthis._z = this._z * l;\n\t\t\tthis._w = this._w * l;\n\n\t\t}\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( q, p ) {\n\n\t\tif ( p !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.' );\n\t\t\treturn this.multiplyQuaternions( q, p );\n\n\t\t}\n\n\t\treturn this.multiplyQuaternions( this, q );\n\n\t},\n\n\tpremultiply: function ( q ) {\n\n\t\treturn this.multiplyQuaternions( q, this );\n\n\t},\n\n\tmultiplyQuaternions: function ( a, b ) {\n\n\t\t// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\n\n\t\tvar qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\n\t\tvar qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\n\n\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\n\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\n\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\n\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tslerp: function ( qb, t ) {\n\n\t\tif ( t === 0 ) return this;\n\t\tif ( t === 1 ) return this.copy( qb );\n\n\t\tvar x = this._x, y = this._y, z = this._z, w = this._w;\n\n\t\t// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\n\n\t\tvar cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\n\n\t\tif ( cosHalfTheta < 0 ) {\n\n\t\t\tthis._w = - qb._w;\n\t\t\tthis._x = - qb._x;\n\t\t\tthis._y = - qb._y;\n\t\t\tthis._z = - qb._z;\n\n\t\t\tcosHalfTheta = - cosHalfTheta;\n\n\t\t} else {\n\n\t\t\tthis.copy( qb );\n\n\t\t}\n\n\t\tif ( cosHalfTheta >= 1.0 ) {\n\n\t\t\tthis._w = w;\n\t\t\tthis._x = x;\n\t\t\tthis._y = y;\n\t\t\tthis._z = z;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar sqrSinHalfTheta = 1.0 - cosHalfTheta * cosHalfTheta;\n\n\t\tif ( sqrSinHalfTheta <= Number.EPSILON ) {\n\n\t\t\tvar s = 1 - t;\n\t\t\tthis._w = s * w + t * this._w;\n\t\t\tthis._x = s * x + t * this._x;\n\t\t\tthis._y = s * y + t * this._y;\n\t\t\tthis._z = s * z + t * this._z;\n\n\t\t\tthis.normalize();\n\t\t\tthis._onChangeCallback();\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar sinHalfTheta = Math.sqrt( sqrSinHalfTheta );\n\t\tvar halfTheta = Math.atan2( sinHalfTheta, cosHalfTheta );\n\t\tvar ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\n\t\t\tratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\n\n\t\tthis._w = ( w * ratioA + this._w * ratioB );\n\t\tthis._x = ( x * ratioA + this._x * ratioB );\n\t\tthis._y = ( y * ratioA + this._y * ratioB );\n\t\tthis._z = ( z * ratioA + this._z * ratioB );\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( quaternion ) {\n\n\t\treturn ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis._x = array[ offset ];\n\t\tthis._y = array[ offset + 1 ];\n\t\tthis._z = array[ offset + 2 ];\n\t\tthis._w = array[ offset + 3 ];\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._w;\n\n\t\treturn array;\n\n\t},\n\n\tfromBufferAttribute: function ( attribute, index ) {\n\n\t\tthis._x = attribute.getX( index );\n\t\tthis._y = attribute.getY( index );\n\t\tthis._z = attribute.getZ( index );\n\t\tthis._w = attribute.getW( index );\n\n\t\treturn this;\n\n\t},\n\n\t_onChange: function ( callback ) {\n\n\t\tthis._onChangeCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\t_onChangeCallback: function () {}\n\n} );\n\n\nexport { Quaternion };\n","/**\n * https://github.com/mrdoob/eventdispatcher.js/\n */\n\nfunction EventDispatcher() {}\n\nObject.assign( EventDispatcher.prototype, {\n\n\taddEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) this._listeners = {};\n\n\t\tvar listeners = this._listeners;\n\n\t\tif ( listeners[ type ] === undefined ) {\n\n\t\t\tlisteners[ type ] = [];\n\n\t\t}\n\n\t\tif ( listeners[ type ].indexOf( listener ) === - 1 ) {\n\n\t\t\tlisteners[ type ].push( listener );\n\n\t\t}\n\n\t},\n\n\thasEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return false;\n\n\t\tvar listeners = this._listeners;\n\n\t\treturn listeners[ type ] !== undefined && listeners[ type ].indexOf( listener ) !== - 1;\n\n\t},\n\n\tremoveEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tvar listeners = this._listeners;\n\t\tvar listenerArray = listeners[ type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tvar index = listenerArray.indexOf( listener );\n\n\t\t\tif ( index !== - 1 ) {\n\n\t\t\t\tlistenerArray.splice( index, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tdispatchEvent: function ( event ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tvar listeners = this._listeners;\n\t\tvar listenerArray = listeners[ event.type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tevent.target = this;\n\n\t\t\t// Make a copy, in case listeners are removed while iterating.\n\t\t\tvar array = listenerArray.slice( 0 );\n\n\t\t\tfor ( var i = 0, l = array.length; i < l; i ++ ) {\n\n\t\t\t\tarray[ i ].call( this, event );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n} );\n\n\nexport { EventDispatcher };\n","import { Box3 } from './Box3.js';\nimport { Vector3 } from './Vector3.js';\n\nvar _box = new Box3();\n\n/**\n * @author bhouston / http://clara.io\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Sphere( center, radius ) {\n\n\tthis.center = ( center !== undefined ) ? center : new Vector3();\n\tthis.radius = ( radius !== undefined ) ? radius : 0;\n\n}\n\nObject.assign( Sphere.prototype, {\n\n\tset: function ( center, radius ) {\n\n\t\tthis.center.copy( center );\n\t\tthis.radius = radius;\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPoints: function ( points, optionalCenter ) {\n\n\t\tvar center = this.center;\n\n\t\tif ( optionalCenter !== undefined ) {\n\n\t\t\tcenter.copy( optionalCenter );\n\n\t\t} else {\n\n\t\t\t_box.setFromPoints( points ).getCenter( center );\n\n\t\t}\n\n\t\tvar maxRadiusSq = 0;\n\n\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( points[ i ] ) );\n\n\t\t}\n\n\t\tthis.radius = Math.sqrt( maxRadiusSq );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( sphere ) {\n\n\t\tthis.center.copy( sphere.center );\n\t\tthis.radius = sphere.radius;\n\n\t\treturn this;\n\n\t},\n\n\tempty: function () {\n\n\t\treturn ( this.radius <= 0 );\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\treturn ( point.distanceToSquared( this.center ) <= ( this.radius * this.radius ) );\n\n\t},\n\n\tdistanceToPoint: function ( point ) {\n\n\t\treturn ( point.distanceTo( this.center ) - this.radius );\n\n\t},\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\tvar radiusSum = this.radius + sphere.radius;\n\n\t\treturn sphere.center.distanceToSquared( this.center ) <= ( radiusSum * radiusSum );\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\treturn box.intersectsSphere( this );\n\n\t},\n\n\tintersectsPlane: function ( plane ) {\n\n\t\treturn Math.abs( plane.distanceToPoint( this.center ) ) <= this.radius;\n\n\t},\n\n\tclampPoint: function ( point, target ) {\n\n\t\tvar deltaLengthSq = this.center.distanceToSquared( point );\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Sphere: .clampPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\ttarget.copy( point );\n\n\t\tif ( deltaLengthSq > ( this.radius * this.radius ) ) {\n\n\t\t\ttarget.sub( this.center ).normalize();\n\t\t\ttarget.multiplyScalar( this.radius ).add( this.center );\n\n\t\t}\n\n\t\treturn target;\n\n\t},\n\n\tgetBoundingBox: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Sphere: .getBoundingBox() target is now required' );\n\t\t\ttarget = new Box3();\n\n\t\t}\n\n\t\ttarget.set( this.center, this.center );\n\t\ttarget.expandByScalar( this.radius );\n\n\t\treturn target;\n\n\t},\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\tthis.center.applyMatrix4( matrix );\n\t\tthis.radius = this.radius * matrix.getMaxScaleOnAxis();\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.center.add( offset );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( sphere ) {\n\n\t\treturn sphere.center.equals( this.center ) && ( sphere.radius === this.radius );\n\n\t}\n\n} );\n\n\nexport { Sphere };\n","import { Camera } from './Camera.js';\nimport { Object3D } from '../core/Object3D.js';\nimport { MathUtils } from '../math/MathUtils.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author greggman / http://games.greggman.com/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * @author tschw\n */\n\nfunction PerspectiveCamera( fov, aspect, near, far ) {\n\n\tCamera.call( this );\n\n\tthis.type = 'PerspectiveCamera';\n\n\tthis.fov = fov !== undefined ? fov : 50;\n\tthis.zoom = 1;\n\n\tthis.near = near !== undefined ? near : 0.1;\n\tthis.far = far !== undefined ? far : 2000;\n\tthis.focus = 10;\n\n\tthis.aspect = aspect !== undefined ? aspect : 1;\n\tthis.view = null;\n\n\tthis.filmGauge = 35;\t// width of the film (default in millimeters)\n\tthis.filmOffset = 0;\t// horizontal film offset (same unit as gauge)\n\n\tthis.updateProjectionMatrix();\n\n}\n\nPerspectiveCamera.prototype = Object.assign( Object.create( Camera.prototype ), {\n\n\tconstructor: PerspectiveCamera,\n\n\tisPerspectiveCamera: true,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tCamera.prototype.copy.call( this, source, recursive );\n\n\t\tthis.fov = source.fov;\n\t\tthis.zoom = source.zoom;\n\n\t\tthis.near = source.near;\n\t\tthis.far = source.far;\n\t\tthis.focus = source.focus;\n\n\t\tthis.aspect = source.aspect;\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\n\n\t\tthis.filmGauge = source.filmGauge;\n\t\tthis.filmOffset = source.filmOffset;\n\n\t\treturn this;\n\n\t},\n\n\t/**\n\t * Sets the FOV by focal length in respect to the current .filmGauge.\n\t *\n\t * The default film gauge is 35, so that the focal length can be specified for\n\t * a 35mm (full frame) camera.\n\t *\n\t * Values for focal length and film gauge must have the same unit.\n\t */\n\tsetFocalLength: function ( focalLength ) {\n\n\t\t// see http://www.bobatkins.com/photography/technical/field_of_view.html\n\t\tvar vExtentSlope = 0.5 * this.getFilmHeight() / focalLength;\n\n\t\tthis.fov = MathUtils.RAD2DEG * 2 * Math.atan( vExtentSlope );\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\t/**\n\t * Calculates the focal length from the current .fov and .filmGauge.\n\t */\n\tgetFocalLength: function () {\n\n\t\tvar vExtentSlope = Math.tan( MathUtils.DEG2RAD * 0.5 * this.fov );\n\n\t\treturn 0.5 * this.getFilmHeight() / vExtentSlope;\n\n\t},\n\n\tgetEffectiveFOV: function () {\n\n\t\treturn MathUtils.RAD2DEG * 2 * Math.atan(\n\t\t\tMath.tan( MathUtils.DEG2RAD * 0.5 * this.fov ) / this.zoom );\n\n\t},\n\n\tgetFilmWidth: function () {\n\n\t\t// film not completely covered in portrait format (aspect < 1)\n\t\treturn this.filmGauge * Math.min( this.aspect, 1 );\n\n\t},\n\n\tgetFilmHeight: function () {\n\n\t\t// film not completely covered in landscape format (aspect > 1)\n\t\treturn this.filmGauge / Math.max( this.aspect, 1 );\n\n\t},\n\n\t/**\n\t * Sets an offset in a larger frustum. This is useful for multi-window or\n\t * multi-monitor/multi-machine setups.\n\t *\n\t * For example, if you have 3x2 monitors and each monitor is 1920x1080 and\n\t * the monitors are in grid like this\n\t *\n\t *   +---+---+---+\n\t *   | A | B | C |\n\t *   +---+---+---+\n\t *   | D | E | F |\n\t *   +---+---+---+\n\t *\n\t * then for each monitor you would call it like this\n\t *\n\t *   var w = 1920;\n\t *   var h = 1080;\n\t *   var fullWidth = w * 3;\n\t *   var fullHeight = h * 2;\n\t *\n\t *   --A--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 0, w, h );\n\t *   --B--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 0, w, h );\n\t *   --C--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 0, w, h );\n\t *   --D--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 0, h * 1, w, h );\n\t *   --E--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 1, h * 1, w, h );\n\t *   --F--\n\t *   camera.setViewOffset( fullWidth, fullHeight, w * 2, h * 1, w, h );\n\t *\n\t *   Note there is no reason monitors have to be the same size or in a grid.\n\t */\n\tsetViewOffset: function ( fullWidth, fullHeight, x, y, width, height ) {\n\n\t\tthis.aspect = fullWidth / fullHeight;\n\n\t\tif ( this.view === null ) {\n\n\t\t\tthis.view = {\n\t\t\t\tenabled: true,\n\t\t\t\tfullWidth: 1,\n\t\t\t\tfullHeight: 1,\n\t\t\t\toffsetX: 0,\n\t\t\t\toffsetY: 0,\n\t\t\t\twidth: 1,\n\t\t\t\theight: 1\n\t\t\t};\n\n\t\t}\n\n\t\tthis.view.enabled = true;\n\t\tthis.view.fullWidth = fullWidth;\n\t\tthis.view.fullHeight = fullHeight;\n\t\tthis.view.offsetX = x;\n\t\tthis.view.offsetY = y;\n\t\tthis.view.width = width;\n\t\tthis.view.height = height;\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tclearViewOffset: function () {\n\n\t\tif ( this.view !== null ) {\n\n\t\t\tthis.view.enabled = false;\n\n\t\t}\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tupdateProjectionMatrix: function () {\n\n\t\tvar near = this.near,\n\t\t\ttop = near * Math.tan( MathUtils.DEG2RAD * 0.5 * this.fov ) / this.zoom,\n\t\t\theight = 2 * top,\n\t\t\twidth = this.aspect * height,\n\t\t\tleft = - 0.5 * width,\n\t\t\tview = this.view;\n\n\t\tif ( this.view !== null && this.view.enabled ) {\n\n\t\t\tvar fullWidth = view.fullWidth,\n\t\t\t\tfullHeight = view.fullHeight;\n\n\t\t\tleft += view.offsetX * width / fullWidth;\n\t\t\ttop -= view.offsetY * height / fullHeight;\n\t\t\twidth *= view.width / fullWidth;\n\t\t\theight *= view.height / fullHeight;\n\n\t\t}\n\n\t\tvar skew = this.filmOffset;\n\t\tif ( skew !== 0 ) left += near * skew / this.getFilmWidth();\n\n\t\tthis.projectionMatrix.makePerspective( left, left + width, top, top - height, near, this.far );\n\n\t\tthis.projectionMatrixInverse.getInverse( this.projectionMatrix );\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.fov = this.fov;\n\t\tdata.object.zoom = this.zoom;\n\n\t\tdata.object.near = this.near;\n\t\tdata.object.far = this.far;\n\t\tdata.object.focus = this.focus;\n\n\t\tdata.object.aspect = this.aspect;\n\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\n\n\t\tdata.object.filmGauge = this.filmGauge;\n\t\tdata.object.filmOffset = this.filmOffset;\n\n\t\treturn data;\n\n\t}\n\n} );\n\n\nexport { PerspectiveCamera };\n","/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n *\n * Bezier Curves formulas obtained from\n * http://en.wikipedia.org/wiki/Bézier_curve\n */\n\nfunction CatmullRom( t, p0, p1, p2, p3 ) {\n\n\tvar v0 = ( p2 - p0 ) * 0.5;\n\tvar v1 = ( p3 - p1 ) * 0.5;\n\tvar t2 = t * t;\n\tvar t3 = t * t2;\n\treturn ( 2 * p1 - 2 * p2 + v0 + v1 ) * t3 + ( - 3 * p1 + 3 * p2 - 2 * v0 - v1 ) * t2 + v0 * t + p1;\n\n}\n\n//\n\nfunction QuadraticBezierP0( t, p ) {\n\n\tvar k = 1 - t;\n\treturn k * k * p;\n\n}\n\nfunction QuadraticBezierP1( t, p ) {\n\n\treturn 2 * ( 1 - t ) * t * p;\n\n}\n\nfunction QuadraticBezierP2( t, p ) {\n\n\treturn t * t * p;\n\n}\n\nfunction QuadraticBezier( t, p0, p1, p2 ) {\n\n\treturn QuadraticBezierP0( t, p0 ) + QuadraticBezierP1( t, p1 ) +\n\t\tQuadraticBezierP2( t, p2 );\n\n}\n\n//\n\nfunction CubicBezierP0( t, p ) {\n\n\tvar k = 1 - t;\n\treturn k * k * k * p;\n\n}\n\nfunction CubicBezierP1( t, p ) {\n\n\tvar k = 1 - t;\n\treturn 3 * k * k * t * p;\n\n}\n\nfunction CubicBezierP2( t, p ) {\n\n\treturn 3 * ( 1 - t ) * t * t * p;\n\n}\n\nfunction CubicBezierP3( t, p ) {\n\n\treturn t * t * t * p;\n\n}\n\nfunction CubicBezier( t, p0, p1, p2, p3 ) {\n\n\treturn CubicBezierP0( t, p0 ) + CubicBezierP1( t, p1 ) + CubicBezierP2( t, p2 ) +\n\t\tCubicBezierP3( t, p3 );\n\n}\n\nexport { CatmullRom, QuadraticBezier, CubicBezier };\n","/**\n * @author clockworkgeek / https://github.com/clockworkgeek\n * @author timothypratley / https://github.com/timothypratley\n * @author WestLangley / http://github.com/WestLangley\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Vector2 } from '../math/Vector2.js';\n\n// PolyhedronGeometry\n\nfunction PolyhedronGeometry( vertices, indices, radius, detail ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'PolyhedronGeometry';\n\n\tthis.parameters = {\n\t\tvertices: vertices,\n\t\tindices: indices,\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n\tthis.fromBufferGeometry( new PolyhedronBufferGeometry( vertices, indices, radius, detail ) );\n\tthis.mergeVertices();\n\n}\n\nPolyhedronGeometry.prototype = Object.create( Geometry.prototype );\nPolyhedronGeometry.prototype.constructor = PolyhedronGeometry;\n\n// PolyhedronBufferGeometry\n\nfunction PolyhedronBufferGeometry( vertices, indices, radius, detail ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'PolyhedronBufferGeometry';\n\n\tthis.parameters = {\n\t\tvertices: vertices,\n\t\tindices: indices,\n\t\tradius: radius,\n\t\tdetail: detail\n\t};\n\n\tradius = radius || 1;\n\tdetail = detail || 0;\n\n\t// default buffer data\n\n\tvar vertexBuffer = [];\n\tvar uvBuffer = [];\n\n\t// the subdivision creates the vertex buffer data\n\n\tsubdivide( detail );\n\n\t// all vertices should lie on a conceptual sphere with a given radius\n\n\tapplyRadius( radius );\n\n\t// finally, create the uv data\n\n\tgenerateUVs();\n\n\t// build non-indexed geometry\n\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertexBuffer, 3 ) );\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( vertexBuffer.slice(), 3 ) );\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvBuffer, 2 ) );\n\n\tif ( detail === 0 ) {\n\n\t\tthis.computeVertexNormals(); // flat normals\n\n\t} else {\n\n\t\tthis.normalizeNormals(); // smooth normals\n\n\t}\n\n\t// helper functions\n\n\tfunction subdivide( detail ) {\n\n\t\tvar a = new Vector3();\n\t\tvar b = new Vector3();\n\t\tvar c = new Vector3();\n\n\t\t// iterate over all faces and apply a subdivison with the given detail value\n\n\t\tfor ( var i = 0; i < indices.length; i += 3 ) {\n\n\t\t\t// get the vertices of the face\n\n\t\t\tgetVertexByIndex( indices[ i + 0 ], a );\n\t\t\tgetVertexByIndex( indices[ i + 1 ], b );\n\t\t\tgetVertexByIndex( indices[ i + 2 ], c );\n\n\t\t\t// perform subdivision\n\n\t\t\tsubdivideFace( a, b, c, detail );\n\n\t\t}\n\n\t}\n\n\tfunction subdivideFace( a, b, c, detail ) {\n\n\t\tvar cols = Math.pow( 2, detail );\n\n\t\t// we use this multidimensional array as a data structure for creating the subdivision\n\n\t\tvar v = [];\n\n\t\tvar i, j;\n\n\t\t// construct all of the vertices for this subdivision\n\n\t\tfor ( i = 0; i <= cols; i ++ ) {\n\n\t\t\tv[ i ] = [];\n\n\t\t\tvar aj = a.clone().lerp( c, i / cols );\n\t\t\tvar bj = b.clone().lerp( c, i / cols );\n\n\t\t\tvar rows = cols - i;\n\n\t\t\tfor ( j = 0; j <= rows; j ++ ) {\n\n\t\t\t\tif ( j === 0 && i === cols ) {\n\n\t\t\t\t\tv[ i ][ j ] = aj;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tv[ i ][ j ] = aj.clone().lerp( bj, j / rows );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\t// construct all of the faces\n\n\t\tfor ( i = 0; i < cols; i ++ ) {\n\n\t\t\tfor ( j = 0; j < 2 * ( cols - i ) - 1; j ++ ) {\n\n\t\t\t\tvar k = Math.floor( j / 2 );\n\n\t\t\t\tif ( j % 2 === 0 ) {\n\n\t\t\t\t\tpushVertex( v[ i ][ k + 1 ] );\n\t\t\t\t\tpushVertex( v[ i + 1 ][ k ] );\n\t\t\t\t\tpushVertex( v[ i ][ k ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tpushVertex( v[ i ][ k + 1 ] );\n\t\t\t\t\tpushVertex( v[ i + 1 ][ k + 1 ] );\n\t\t\t\t\tpushVertex( v[ i + 1 ][ k ] );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction applyRadius( radius ) {\n\n\t\tvar vertex = new Vector3();\n\n\t\t// iterate over the entire buffer and apply the radius to each vertex\n\n\t\tfor ( var i = 0; i < vertexBuffer.length; i += 3 ) {\n\n\t\t\tvertex.x = vertexBuffer[ i + 0 ];\n\t\t\tvertex.y = vertexBuffer[ i + 1 ];\n\t\t\tvertex.z = vertexBuffer[ i + 2 ];\n\n\t\t\tvertex.normalize().multiplyScalar( radius );\n\n\t\t\tvertexBuffer[ i + 0 ] = vertex.x;\n\t\t\tvertexBuffer[ i + 1 ] = vertex.y;\n\t\t\tvertexBuffer[ i + 2 ] = vertex.z;\n\n\t\t}\n\n\t}\n\n\tfunction generateUVs() {\n\n\t\tvar vertex = new Vector3();\n\n\t\tfor ( var i = 0; i < vertexBuffer.length; i += 3 ) {\n\n\t\t\tvertex.x = vertexBuffer[ i + 0 ];\n\t\t\tvertex.y = vertexBuffer[ i + 1 ];\n\t\t\tvertex.z = vertexBuffer[ i + 2 ];\n\n\t\t\tvar u = azimuth( vertex ) / 2 / Math.PI + 0.5;\n\t\t\tvar v = inclination( vertex ) / Math.PI + 0.5;\n\t\t\tuvBuffer.push( u, 1 - v );\n\n\t\t}\n\n\t\tcorrectUVs();\n\n\t\tcorrectSeam();\n\n\t}\n\n\tfunction correctSeam() {\n\n\t\t// handle case when face straddles the seam, see #3269\n\n\t\tfor ( var i = 0; i < uvBuffer.length; i += 6 ) {\n\n\t\t\t// uv data of a single face\n\n\t\t\tvar x0 = uvBuffer[ i + 0 ];\n\t\t\tvar x1 = uvBuffer[ i + 2 ];\n\t\t\tvar x2 = uvBuffer[ i + 4 ];\n\n\t\t\tvar max = Math.max( x0, x1, x2 );\n\t\t\tvar min = Math.min( x0, x1, x2 );\n\n\t\t\t// 0.9 is somewhat arbitrary\n\n\t\t\tif ( max > 0.9 && min < 0.1 ) {\n\n\t\t\t\tif ( x0 < 0.2 ) uvBuffer[ i + 0 ] += 1;\n\t\t\t\tif ( x1 < 0.2 ) uvBuffer[ i + 2 ] += 1;\n\t\t\t\tif ( x2 < 0.2 ) uvBuffer[ i + 4 ] += 1;\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\tfunction pushVertex( vertex ) {\n\n\t\tvertexBuffer.push( vertex.x, vertex.y, vertex.z );\n\n\t}\n\n\tfunction getVertexByIndex( index, vertex ) {\n\n\t\tvar stride = index * 3;\n\n\t\tvertex.x = vertices[ stride + 0 ];\n\t\tvertex.y = vertices[ stride + 1 ];\n\t\tvertex.z = vertices[ stride + 2 ];\n\n\t}\n\n\tfunction correctUVs() {\n\n\t\tvar a = new Vector3();\n\t\tvar b = new Vector3();\n\t\tvar c = new Vector3();\n\n\t\tvar centroid = new Vector3();\n\n\t\tvar uvA = new Vector2();\n\t\tvar uvB = new Vector2();\n\t\tvar uvC = new Vector2();\n\n\t\tfor ( var i = 0, j = 0; i < vertexBuffer.length; i += 9, j += 6 ) {\n\n\t\t\ta.set( vertexBuffer[ i + 0 ], vertexBuffer[ i + 1 ], vertexBuffer[ i + 2 ] );\n\t\t\tb.set( vertexBuffer[ i + 3 ], vertexBuffer[ i + 4 ], vertexBuffer[ i + 5 ] );\n\t\t\tc.set( vertexBuffer[ i + 6 ], vertexBuffer[ i + 7 ], vertexBuffer[ i + 8 ] );\n\n\t\t\tuvA.set( uvBuffer[ j + 0 ], uvBuffer[ j + 1 ] );\n\t\t\tuvB.set( uvBuffer[ j + 2 ], uvBuffer[ j + 3 ] );\n\t\t\tuvC.set( uvBuffer[ j + 4 ], uvBuffer[ j + 5 ] );\n\n\t\t\tcentroid.copy( a ).add( b ).add( c ).divideScalar( 3 );\n\n\t\t\tvar azi = azimuth( centroid );\n\n\t\t\tcorrectUV( uvA, j + 0, a, azi );\n\t\t\tcorrectUV( uvB, j + 2, b, azi );\n\t\t\tcorrectUV( uvC, j + 4, c, azi );\n\n\t\t}\n\n\t}\n\n\tfunction correctUV( uv, stride, vector, azimuth ) {\n\n\t\tif ( ( azimuth < 0 ) && ( uv.x === 1 ) ) {\n\n\t\t\tuvBuffer[ stride ] = uv.x - 1;\n\n\t\t}\n\n\t\tif ( ( vector.x === 0 ) && ( vector.z === 0 ) ) {\n\n\t\t\tuvBuffer[ stride ] = azimuth / 2 / Math.PI + 0.5;\n\n\t\t}\n\n\t}\n\n\t// Angle around the Y axis, counter-clockwise when looking from above.\n\n\tfunction azimuth( vector ) {\n\n\t\treturn Math.atan2( vector.z, - vector.x );\n\n\t}\n\n\n\t// Angle above the XZ plane.\n\n\tfunction inclination( vector ) {\n\n\t\treturn Math.atan2( - vector.y, Math.sqrt( ( vector.x * vector.x ) + ( vector.z * vector.z ) ) );\n\n\t}\n\n}\n\nPolyhedronBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nPolyhedronBufferGeometry.prototype.constructor = PolyhedronBufferGeometry;\n\n\nexport { PolyhedronGeometry, PolyhedronBufferGeometry };\n","/**\n * Abstract base class of interpolants over parametric samples.\n *\n * The parameter domain is one dimensional, typically the time or a path\n * along a curve defined by the data.\n *\n * The sample values can have any dimensionality and derived classes may\n * apply special interpretations to the data.\n *\n * This class provides the interval seek in a Template Method, deferring\n * the actual interpolation to derived classes.\n *\n * Time complexity is O(1) for linear access crossing at most two points\n * and O(log N) for random access, where N is the number of positions.\n *\n * References:\n *\n * \t\thttp://www.oodesign.com/template-method-pattern.html\n *\n * @author tschw\n */\n\nfunction Interpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tthis.parameterPositions = parameterPositions;\n\tthis._cachedIndex = 0;\n\n\tthis.resultBuffer = resultBuffer !== undefined ?\n\t\tresultBuffer : new sampleValues.constructor( sampleSize );\n\tthis.sampleValues = sampleValues;\n\tthis.valueSize = sampleSize;\n\n}\n\nObject.assign( Interpolant.prototype, {\n\n\tevaluate: function ( t ) {\n\n\t\tvar pp = this.parameterPositions,\n\t\t\ti1 = this._cachedIndex,\n\n\t\t\tt1 = pp[ i1 ],\n\t\t\tt0 = pp[ i1 - 1 ];\n\n\t\tvalidate_interval: {\n\n\t\t\tseek: {\n\n\t\t\t\tvar right;\n\n\t\t\t\tlinear_scan: {\n\n\t\t\t\t\t//- See http://jsperf.com/comparison-to-undefined/3\n\t\t\t\t\t//- slower code:\n\t\t\t\t\t//-\n\t\t\t\t\t//- \t\t\t\tif ( t >= t1 || t1 === undefined ) {\n\t\t\t\t\tforward_scan: if ( ! ( t < t1 ) ) {\n\n\t\t\t\t\t\tfor ( var giveUpAt = i1 + 2; ; ) {\n\n\t\t\t\t\t\t\tif ( t1 === undefined ) {\n\n\t\t\t\t\t\t\t\tif ( t < t0 ) break forward_scan;\n\n\t\t\t\t\t\t\t\t// after end\n\n\t\t\t\t\t\t\t\ti1 = pp.length;\n\t\t\t\t\t\t\t\tthis._cachedIndex = i1;\n\t\t\t\t\t\t\t\treturn this.afterEnd_( i1 - 1, t, t0 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\n\n\t\t\t\t\t\t\tt0 = t1;\n\t\t\t\t\t\t\tt1 = pp[ ++ i1 ];\n\n\t\t\t\t\t\t\tif ( t < t1 ) {\n\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\n\t\t\t\t\t\t\t\tbreak seek;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// prepare binary search on the right side of the index\n\t\t\t\t\t\tright = pp.length;\n\t\t\t\t\t\tbreak linear_scan;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t//- slower code:\n\t\t\t\t\t//-\t\t\t\t\tif ( t < t0 || t0 === undefined ) {\n\t\t\t\t\tif ( ! ( t >= t0 ) ) {\n\n\t\t\t\t\t\t// looping?\n\n\t\t\t\t\t\tvar t1global = pp[ 1 ];\n\n\t\t\t\t\t\tif ( t < t1global ) {\n\n\t\t\t\t\t\t\ti1 = 2; // + 1, using the scan for the details\n\t\t\t\t\t\t\tt0 = t1global;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// linear reverse scan\n\n\t\t\t\t\t\tfor ( var giveUpAt = i1 - 2; ; ) {\n\n\t\t\t\t\t\t\tif ( t0 === undefined ) {\n\n\t\t\t\t\t\t\t\t// before start\n\n\t\t\t\t\t\t\t\tthis._cachedIndex = 0;\n\t\t\t\t\t\t\t\treturn this.beforeStart_( 0, t, t1 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\n\n\t\t\t\t\t\t\tt1 = t0;\n\t\t\t\t\t\t\tt0 = pp[ -- i1 - 1 ];\n\n\t\t\t\t\t\t\tif ( t >= t0 ) {\n\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\n\t\t\t\t\t\t\t\tbreak seek;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// prepare binary search on the left side of the index\n\t\t\t\t\t\tright = i1;\n\t\t\t\t\t\ti1 = 0;\n\t\t\t\t\t\tbreak linear_scan;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// the interval is valid\n\n\t\t\t\t\tbreak validate_interval;\n\n\t\t\t\t} // linear scan\n\n\t\t\t\t// binary search\n\n\t\t\t\twhile ( i1 < right ) {\n\n\t\t\t\t\tvar mid = ( i1 + right ) >>> 1;\n\n\t\t\t\t\tif ( t < pp[ mid ] ) {\n\n\t\t\t\t\t\tright = mid;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ti1 = mid + 1;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tt1 = pp[ i1 ];\n\t\t\t\tt0 = pp[ i1 - 1 ];\n\n\t\t\t\t// check boundary cases, again\n\n\t\t\t\tif ( t0 === undefined ) {\n\n\t\t\t\t\tthis._cachedIndex = 0;\n\t\t\t\t\treturn this.beforeStart_( 0, t, t1 );\n\n\t\t\t\t}\n\n\t\t\t\tif ( t1 === undefined ) {\n\n\t\t\t\t\ti1 = pp.length;\n\t\t\t\t\tthis._cachedIndex = i1;\n\t\t\t\t\treturn this.afterEnd_( i1 - 1, t0, t );\n\n\t\t\t\t}\n\n\t\t\t} // seek\n\n\t\t\tthis._cachedIndex = i1;\n\n\t\t\tthis.intervalChanged_( i1, t0, t1 );\n\n\t\t} // validate_interval\n\n\t\treturn this.interpolate_( i1, t0, t, t1 );\n\n\t},\n\n\tsettings: null, // optional, subclass-specific settings structure\n\t// Note: The indirection allows central control of many interpolants.\n\n\t// --- Protected interface\n\n\tDefaultSettings_: {},\n\n\tgetSettings_: function () {\n\n\t\treturn this.settings || this.DefaultSettings_;\n\n\t},\n\n\tcopySampleValue_: function ( index ) {\n\n\t\t// copies a sample value to the result buffer\n\n\t\tvar result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\t\t\toffset = index * stride;\n\n\t\tfor ( var i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] = values[ offset + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t},\n\n\t// Template methods for derived classes:\n\n\tinterpolate_: function ( /* i1, t0, t, t1 */ ) {\n\n\t\tthrow new Error( 'call to abstract method' );\n\t\t// implementations shall return this.resultBuffer\n\n\t},\n\n\tintervalChanged_: function ( /* i1, t0, t1 */ ) {\n\n\t\t// empty\n\n\t}\n\n} );\n\n// DECLARE ALIAS AFTER assign prototype\nObject.assign( Interpolant.prototype, {\n\n\t//( 0, t, t0 ), returns this.resultBuffer\n\tbeforeStart_: Interpolant.prototype.copySampleValue_,\n\n\t//( N-1, tN-1, t ), returns this.resultBuffer\n\tafterEnd_: Interpolant.prototype.copySampleValue_,\n\n} );\n\n\nexport { Interpolant };\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\n\n// PlaneGeometry\n\nfunction PlaneGeometry( width, height, widthSegments, heightSegments ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'PlaneGeometry';\n\n\tthis.parameters = {\n\t\twidth: width,\n\t\theight: height,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments\n\t};\n\n\tthis.fromBufferGeometry( new PlaneBufferGeometry( width, height, widthSegments, heightSegments ) );\n\tthis.mergeVertices();\n\n}\n\nPlaneGeometry.prototype = Object.create( Geometry.prototype );\nPlaneGeometry.prototype.constructor = PlaneGeometry;\n\n// PlaneBufferGeometry\n\nfunction PlaneBufferGeometry( width, height, widthSegments, heightSegments ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'PlaneBufferGeometry';\n\n\tthis.parameters = {\n\t\twidth: width,\n\t\theight: height,\n\t\twidthSegments: widthSegments,\n\t\theightSegments: heightSegments\n\t};\n\n\twidth = width || 1;\n\theight = height || 1;\n\n\tvar width_half = width / 2;\n\tvar height_half = height / 2;\n\n\tvar gridX = Math.floor( widthSegments ) || 1;\n\tvar gridY = Math.floor( heightSegments ) || 1;\n\n\tvar gridX1 = gridX + 1;\n\tvar gridY1 = gridY + 1;\n\n\tvar segment_width = width / gridX;\n\tvar segment_height = height / gridY;\n\n\tvar ix, iy;\n\n\t// buffers\n\n\tvar indices = [];\n\tvar vertices = [];\n\tvar normals = [];\n\tvar uvs = [];\n\n\t// generate vertices, normals and uvs\n\n\tfor ( iy = 0; iy < gridY1; iy ++ ) {\n\n\t\tvar y = iy * segment_height - height_half;\n\n\t\tfor ( ix = 0; ix < gridX1; ix ++ ) {\n\n\t\t\tvar x = ix * segment_width - width_half;\n\n\t\t\tvertices.push( x, - y, 0 );\n\n\t\t\tnormals.push( 0, 0, 1 );\n\n\t\t\tuvs.push( ix / gridX );\n\t\t\tuvs.push( 1 - ( iy / gridY ) );\n\n\t\t}\n\n\t}\n\n\t// indices\n\n\tfor ( iy = 0; iy < gridY; iy ++ ) {\n\n\t\tfor ( ix = 0; ix < gridX; ix ++ ) {\n\n\t\t\tvar a = ix + gridX1 * iy;\n\t\t\tvar b = ix + gridX1 * ( iy + 1 );\n\t\t\tvar c = ( ix + 1 ) + gridX1 * ( iy + 1 );\n\t\t\tvar d = ( ix + 1 ) + gridX1 * iy;\n\n\t\t\t// faces\n\n\t\t\tindices.push( a, b, d );\n\t\t\tindices.push( b, c, d );\n\n\t\t}\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n}\n\nPlaneBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nPlaneBufferGeometry.prototype.constructor = PlaneBufferGeometry;\n\n\nexport { PlaneGeometry, PlaneBufferGeometry };\n","import { Object3D } from '../core/Object3D.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Scene() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Scene';\n\n\tthis.background = null;\n\tthis.environment = null;\n\tthis.fog = null;\n\n\tthis.overrideMaterial = null;\n\n\tthis.autoUpdate = true; // checked by the renderer\n\n\tif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\n\n\t\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'observe', { detail: this } ) ); // eslint-disable-line no-undef\n\n\t}\n\n}\n\nScene.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Scene,\n\n\tisScene: true,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tObject3D.prototype.copy.call( this, source, recursive );\n\n\t\tif ( source.background !== null ) this.background = source.background.clone();\n\t\tif ( source.environment !== null ) this.environment = source.environment.clone();\n\t\tif ( source.fog !== null ) this.fog = source.fog.clone();\n\n\t\tif ( source.overrideMaterial !== null ) this.overrideMaterial = source.overrideMaterial.clone();\n\n\t\tthis.autoUpdate = source.autoUpdate;\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tif ( this.background !== null ) data.object.background = this.background.toJSON( meta );\n\t\tif ( this.environment !== null ) data.object.environment = this.environment.toJSON( meta );\n\t\tif ( this.fog !== null ) data.object.fog = this.fog.toJSON();\n\n\t\treturn data;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\n\n\nexport { Scene };\n","import { Material } from './Material.js';\nimport { MultiplyOperation } from '../constants.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  specularMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\n *  combine: THREE.Multiply,\n *  reflectivity: <float>,\n *  refractionRatio: <float>,\n *\n *  depthTest: <bool>,\n *  depthWrite: <bool>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>\n * }\n */\n\nfunction MeshBasicMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'MeshBasicMaterial';\n\n\tthis.color = new Color( 0xffffff ); // emissive\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.specularMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.combine = MultiplyOperation;\n\tthis.reflectivity = 1;\n\tthis.refractionRatio = 0.98;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshBasicMaterial.prototype = Object.create( Material.prototype );\nMeshBasicMaterial.prototype.constructor = MeshBasicMaterial;\n\nMeshBasicMaterial.prototype.isMeshBasicMaterial = true;\n\nMeshBasicMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.map = source.map;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.specularMap = source.specularMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.envMap = source.envMap;\n\tthis.combine = source.combine;\n\tthis.reflectivity = source.reflectivity;\n\tthis.refractionRatio = source.refractionRatio;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\n\treturn this;\n\n};\n\n\nexport { MeshBasicMaterial };\n","import { Line } from './Line.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar _start = new Vector3();\nvar _end = new Vector3();\n\nfunction LineSegments( geometry, material ) {\n\n\tLine.call( this, geometry, material );\n\n\tthis.type = 'LineSegments';\n\n}\n\nLineSegments.prototype = Object.assign( Object.create( Line.prototype ), {\n\n\tconstructor: LineSegments,\n\n\tisLineSegments: true,\n\n\tcomputeLineDistances: function () {\n\n\t\tvar geometry = this.geometry;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\t// we assume non-indexed geometry\n\n\t\t\tif ( geometry.index === null ) {\n\n\t\t\t\tvar positionAttribute = geometry.attributes.position;\n\t\t\t\tvar lineDistances = [];\n\n\t\t\t\tfor ( var i = 0, l = positionAttribute.count; i < l; i += 2 ) {\n\n\t\t\t\t\t_start.fromBufferAttribute( positionAttribute, i );\n\t\t\t\t\t_end.fromBufferAttribute( positionAttribute, i + 1 );\n\n\t\t\t\t\tlineDistances[ i ] = ( i === 0 ) ? 0 : lineDistances[ i - 1 ];\n\t\t\t\t\tlineDistances[ i + 1 ] = lineDistances[ i ] + _start.distanceTo( _end );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.setAttribute( 'lineDistance', new Float32BufferAttribute( lineDistances, 1 ) );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.' );\n\n\t\t\t}\n\n\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\tvar vertices = geometry.vertices;\n\t\t\tvar lineDistances = geometry.lineDistances;\n\n\t\t\tfor ( var i = 0, l = vertices.length; i < l; i += 2 ) {\n\n\t\t\t\t_start.copy( vertices[ i ] );\n\t\t\t\t_end.copy( vertices[ i + 1 ] );\n\n\t\t\t\tlineDistances[ i ] = ( i === 0 ) ? 0 : lineDistances[ i - 1 ];\n\t\t\t\tlineDistances[ i + 1 ] = lineDistances[ i ] + _start.distanceTo( _end );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { LineSegments };\n","import { Vector3 } from './Vector3.js';\n\nvar _points = [\n\tnew Vector3(),\n\tnew Vector3(),\n\tnew Vector3(),\n\tnew Vector3(),\n\tnew Vector3(),\n\tnew Vector3(),\n\tnew Vector3(),\n\tnew Vector3()\n];\n\nvar _vector = new Vector3();\n\nvar _box = new Box3();\n\n// triangle centered vertices\n\nvar _v0 = new Vector3();\nvar _v1 = new Vector3();\nvar _v2 = new Vector3();\n\n// triangle edge vectors\n\nvar _f0 = new Vector3();\nvar _f1 = new Vector3();\nvar _f2 = new Vector3();\n\nvar _center = new Vector3();\nvar _extents = new Vector3();\nvar _triangleNormal = new Vector3();\nvar _testAxis = new Vector3();\n\n/**\n * @author bhouston / http://clara.io\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction Box3( min, max ) {\n\n\tthis.min = ( min !== undefined ) ? min : new Vector3( + Infinity, + Infinity, + Infinity );\n\tthis.max = ( max !== undefined ) ? max : new Vector3( - Infinity, - Infinity, - Infinity );\n\n}\n\n\nObject.assign( Box3.prototype, {\n\n\tisBox3: true,\n\n\tset: function ( min, max ) {\n\n\t\tthis.min.copy( min );\n\t\tthis.max.copy( max );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromArray: function ( array ) {\n\n\t\tvar minX = + Infinity;\n\t\tvar minY = + Infinity;\n\t\tvar minZ = + Infinity;\n\n\t\tvar maxX = - Infinity;\n\t\tvar maxY = - Infinity;\n\t\tvar maxZ = - Infinity;\n\n\t\tfor ( var i = 0, l = array.length; i < l; i += 3 ) {\n\n\t\t\tvar x = array[ i ];\n\t\t\tvar y = array[ i + 1 ];\n\t\t\tvar z = array[ i + 2 ];\n\n\t\t\tif ( x < minX ) minX = x;\n\t\t\tif ( y < minY ) minY = y;\n\t\t\tif ( z < minZ ) minZ = z;\n\n\t\t\tif ( x > maxX ) maxX = x;\n\t\t\tif ( y > maxY ) maxY = y;\n\t\t\tif ( z > maxZ ) maxZ = z;\n\n\t\t}\n\n\t\tthis.min.set( minX, minY, minZ );\n\t\tthis.max.set( maxX, maxY, maxZ );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromBufferAttribute: function ( attribute ) {\n\n\t\tvar minX = + Infinity;\n\t\tvar minY = + Infinity;\n\t\tvar minZ = + Infinity;\n\n\t\tvar maxX = - Infinity;\n\t\tvar maxY = - Infinity;\n\t\tvar maxZ = - Infinity;\n\n\t\tfor ( var i = 0, l = attribute.count; i < l; i ++ ) {\n\n\t\t\tvar x = attribute.getX( i );\n\t\t\tvar y = attribute.getY( i );\n\t\t\tvar z = attribute.getZ( i );\n\n\t\t\tif ( x < minX ) minX = x;\n\t\t\tif ( y < minY ) minY = y;\n\t\t\tif ( z < minZ ) minZ = z;\n\n\t\t\tif ( x > maxX ) maxX = x;\n\t\t\tif ( y > maxY ) maxY = y;\n\t\t\tif ( z > maxZ ) maxZ = z;\n\n\t\t}\n\n\t\tthis.min.set( minX, minY, minZ );\n\t\tthis.max.set( maxX, maxY, maxZ );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPoints: function ( points ) {\n\n\t\tthis.makeEmpty();\n\n\t\tfor ( var i = 0, il = points.length; i < il; i ++ ) {\n\n\t\t\tthis.expandByPoint( points[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCenterAndSize: function ( center, size ) {\n\n\t\tvar halfSize = _vector.copy( size ).multiplyScalar( 0.5 );\n\n\t\tthis.min.copy( center ).sub( halfSize );\n\t\tthis.max.copy( center ).add( halfSize );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromObject: function ( object ) {\n\n\t\tthis.makeEmpty();\n\n\t\treturn this.expandByObject( object );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( box ) {\n\n\t\tthis.min.copy( box.min );\n\t\tthis.max.copy( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tmakeEmpty: function () {\n\n\t\tthis.min.x = this.min.y = this.min.z = + Infinity;\n\t\tthis.max.x = this.max.y = this.max.z = - Infinity;\n\n\t\treturn this;\n\n\t},\n\n\tisEmpty: function () {\n\n\t\t// this is a more robust check for empty than ( volume <= 0 ) because volume can get positive with two negative axes\n\n\t\treturn ( this.max.x < this.min.x ) || ( this.max.y < this.min.y ) || ( this.max.z < this.min.z );\n\n\t},\n\n\tgetCenter: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .getCenter() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn this.isEmpty() ? target.set( 0, 0, 0 ) : target.addVectors( this.min, this.max ).multiplyScalar( 0.5 );\n\n\t},\n\n\tgetSize: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .getSize() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn this.isEmpty() ? target.set( 0, 0, 0 ) : target.subVectors( this.max, this.min );\n\n\t},\n\n\texpandByPoint: function ( point ) {\n\n\t\tthis.min.min( point );\n\t\tthis.max.max( point );\n\n\t\treturn this;\n\n\t},\n\n\texpandByVector: function ( vector ) {\n\n\t\tthis.min.sub( vector );\n\t\tthis.max.add( vector );\n\n\t\treturn this;\n\n\t},\n\n\texpandByScalar: function ( scalar ) {\n\n\t\tthis.min.addScalar( - scalar );\n\t\tthis.max.addScalar( scalar );\n\n\t\treturn this;\n\n\t},\n\n\texpandByObject: function ( object ) {\n\n\t\t// Computes the world-axis-aligned bounding box of an object (including its children),\n\t\t// accounting for both the object's, and children's, world transforms\n\n\t\tobject.updateWorldMatrix( false, false );\n\n\t\tvar geometry = object.geometry;\n\n\t\tif ( geometry !== undefined ) {\n\n\t\t\tif ( geometry.boundingBox === null ) {\n\n\t\t\t\tgeometry.computeBoundingBox();\n\n\t\t\t}\n\n\t\t\t_box.copy( geometry.boundingBox );\n\t\t\t_box.applyMatrix4( object.matrixWorld );\n\n\t\t\tthis.union( _box );\n\n\t\t}\n\n\t\tvar children = object.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tthis.expandByObject( children[ i ] );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\treturn point.x < this.min.x || point.x > this.max.x ||\n\t\t\tpoint.y < this.min.y || point.y > this.max.y ||\n\t\t\tpoint.z < this.min.z || point.z > this.max.z ? false : true;\n\n\t},\n\n\tcontainsBox: function ( box ) {\n\n\t\treturn this.min.x <= box.min.x && box.max.x <= this.max.x &&\n\t\t\tthis.min.y <= box.min.y && box.max.y <= this.max.y &&\n\t\t\tthis.min.z <= box.min.z && box.max.z <= this.max.z;\n\n\t},\n\n\tgetParameter: function ( point, target ) {\n\n\t\t// This can potentially have a divide by zero if the box\n\t\t// has a size dimension of 0.\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .getParameter() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.set(\n\t\t\t( point.x - this.min.x ) / ( this.max.x - this.min.x ),\n\t\t\t( point.y - this.min.y ) / ( this.max.y - this.min.y ),\n\t\t\t( point.z - this.min.z ) / ( this.max.z - this.min.z )\n\t\t);\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\t// using 6 splitting planes to rule out intersections.\n\t\treturn box.max.x < this.min.x || box.min.x > this.max.x ||\n\t\t\tbox.max.y < this.min.y || box.min.y > this.max.y ||\n\t\t\tbox.max.z < this.min.z || box.min.z > this.max.z ? false : true;\n\n\t},\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\t// Find the point on the AABB closest to the sphere center.\n\t\tthis.clampPoint( sphere.center, _vector );\n\n\t\t// If that point is inside the sphere, the AABB and sphere intersect.\n\t\treturn _vector.distanceToSquared( sphere.center ) <= ( sphere.radius * sphere.radius );\n\n\t},\n\n\tintersectsPlane: function ( plane ) {\n\n\t\t// We compute the minimum and maximum dot product values. If those values\n\t\t// are on the same side (back or front) of the plane, then there is no intersection.\n\n\t\tvar min, max;\n\n\t\tif ( plane.normal.x > 0 ) {\n\n\t\t\tmin = plane.normal.x * this.min.x;\n\t\t\tmax = plane.normal.x * this.max.x;\n\n\t\t} else {\n\n\t\t\tmin = plane.normal.x * this.max.x;\n\t\t\tmax = plane.normal.x * this.min.x;\n\n\t\t}\n\n\t\tif ( plane.normal.y > 0 ) {\n\n\t\t\tmin += plane.normal.y * this.min.y;\n\t\t\tmax += plane.normal.y * this.max.y;\n\n\t\t} else {\n\n\t\t\tmin += plane.normal.y * this.max.y;\n\t\t\tmax += plane.normal.y * this.min.y;\n\n\t\t}\n\n\t\tif ( plane.normal.z > 0 ) {\n\n\t\t\tmin += plane.normal.z * this.min.z;\n\t\t\tmax += plane.normal.z * this.max.z;\n\n\t\t} else {\n\n\t\t\tmin += plane.normal.z * this.max.z;\n\t\t\tmax += plane.normal.z * this.min.z;\n\n\t\t}\n\n\t\treturn ( min <= - plane.constant && max >= - plane.constant );\n\n\t},\n\n\tintersectsTriangle: function ( triangle ) {\n\n\t\tif ( this.isEmpty() ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t// compute box center and extents\n\t\tthis.getCenter( _center );\n\t\t_extents.subVectors( this.max, _center );\n\n\t\t// translate triangle to aabb origin\n\t\t_v0.subVectors( triangle.a, _center );\n\t\t_v1.subVectors( triangle.b, _center );\n\t\t_v2.subVectors( triangle.c, _center );\n\n\t\t// compute edge vectors for triangle\n\t\t_f0.subVectors( _v1, _v0 );\n\t\t_f1.subVectors( _v2, _v1 );\n\t\t_f2.subVectors( _v0, _v2 );\n\n\t\t// test against axes that are given by cross product combinations of the edges of the triangle and the edges of the aabb\n\t\t// make an axis testing of each of the 3 sides of the aabb against each of the 3 sides of the triangle = 9 axis of separation\n\t\t// axis_ij = u_i x f_j (u0, u1, u2 = face normals of aabb = x,y,z axes vectors since aabb is axis aligned)\n\t\tvar axes = [\n\t\t\t0, - _f0.z, _f0.y, 0, - _f1.z, _f1.y, 0, - _f2.z, _f2.y,\n\t\t\t_f0.z, 0, - _f0.x, _f1.z, 0, - _f1.x, _f2.z, 0, - _f2.x,\n\t\t\t- _f0.y, _f0.x, 0, - _f1.y, _f1.x, 0, - _f2.y, _f2.x, 0\n\t\t];\n\t\tif ( ! satForAxes( axes, _v0, _v1, _v2, _extents ) ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t// test 3 face normals from the aabb\n\t\taxes = [ 1, 0, 0, 0, 1, 0, 0, 0, 1 ];\n\t\tif ( ! satForAxes( axes, _v0, _v1, _v2, _extents ) ) {\n\n\t\t\treturn false;\n\n\t\t}\n\n\t\t// finally testing the face normal of the triangle\n\t\t// use already existing triangle edge vectors here\n\t\t_triangleNormal.crossVectors( _f0, _f1 );\n\t\taxes = [ _triangleNormal.x, _triangleNormal.y, _triangleNormal.z ];\n\n\t\treturn satForAxes( axes, _v0, _v1, _v2, _extents );\n\n\t},\n\n\tclampPoint: function ( point, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Box3: .clampPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( point ).clamp( this.min, this.max );\n\n\t},\n\n\tdistanceToPoint: function ( point ) {\n\n\t\tvar clampedPoint = _vector.copy( point ).clamp( this.min, this.max );\n\n\t\treturn clampedPoint.sub( point ).length();\n\n\t},\n\n\tgetBoundingSphere: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.error( 'THREE.Box3: .getBoundingSphere() target is now required' );\n\t\t\t//target = new Sphere(); // removed to avoid cyclic dependency\n\n\t\t}\n\n\t\tthis.getCenter( target.center );\n\n\t\ttarget.radius = this.getSize( _vector ).length() * 0.5;\n\n\t\treturn target;\n\n\t},\n\n\tintersect: function ( box ) {\n\n\t\tthis.min.max( box.min );\n\t\tthis.max.min( box.max );\n\n\t\t// ensure that if there is no overlap, the result is fully empty, not slightly empty with non-inf/+inf values that will cause subsequence intersects to erroneously return valid values.\n\t\tif ( this.isEmpty() ) this.makeEmpty();\n\n\t\treturn this;\n\n\t},\n\n\tunion: function ( box ) {\n\n\t\tthis.min.min( box.min );\n\t\tthis.max.max( box.max );\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\t// transform of empty box is an empty box.\n\t\tif ( this.isEmpty() ) return this;\n\n\t\t// NOTE: I am using a binary pattern to specify all 2^3 combinations below\n\t\t_points[ 0 ].set( this.min.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 000\n\t\t_points[ 1 ].set( this.min.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 001\n\t\t_points[ 2 ].set( this.min.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 010\n\t\t_points[ 3 ].set( this.min.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 011\n\t\t_points[ 4 ].set( this.max.x, this.min.y, this.min.z ).applyMatrix4( matrix ); // 100\n\t\t_points[ 5 ].set( this.max.x, this.min.y, this.max.z ).applyMatrix4( matrix ); // 101\n\t\t_points[ 6 ].set( this.max.x, this.max.y, this.min.z ).applyMatrix4( matrix ); // 110\n\t\t_points[ 7 ].set( this.max.x, this.max.y, this.max.z ).applyMatrix4( matrix ); // 111\n\n\t\tthis.setFromPoints( _points );\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.min.add( offset );\n\t\tthis.max.add( offset );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( box ) {\n\n\t\treturn box.min.equals( this.min ) && box.max.equals( this.max );\n\n\t}\n\n} );\n\nfunction satForAxes( axes, v0, v1, v2, extents ) {\n\n\tvar i, j;\n\n\tfor ( i = 0, j = axes.length - 3; i <= j; i += 3 ) {\n\n\t\t_testAxis.fromArray( axes, i );\n\t\t// project the aabb onto the seperating axis\n\t\tvar r = extents.x * Math.abs( _testAxis.x ) + extents.y * Math.abs( _testAxis.y ) + extents.z * Math.abs( _testAxis.z );\n\t\t// project all 3 vertices of the triangle onto the seperating axis\n\t\tvar p0 = v0.dot( _testAxis );\n\t\tvar p1 = v1.dot( _testAxis );\n\t\tvar p2 = v2.dot( _testAxis );\n\t\t// actual test, basically see if either of the most extreme of the triangle points intersects r\n\t\tif ( Math.max( - Math.max( p0, p1, p2 ), Math.min( p0, p1, p2 ) ) > r ) {\n\n\t\t\t// points of the projected triangle are outside the projected half-length of the aabb\n\t\t\t// the axis is seperating and we can exit\n\t\t\treturn false;\n\n\t\t}\n\n\t}\n\n\treturn true;\n\n}\n\nexport { Box3 };\n","import { TangentSpaceNormalMap } from '../constants.js';\nimport { Material } from './Material.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * @author WestLangley / http://github.com/WestLangley\n *\n * parameters = {\n *  color: <hex>,\n *  roughness: <float>,\n *  metalness: <float>,\n *  opacity: <float>,\n *\n *  map: new THREE.Texture( <Image> ),\n *\n *  lightMap: new THREE.Texture( <Image> ),\n *  lightMapIntensity: <float>\n *\n *  aoMap: new THREE.Texture( <Image> ),\n *  aoMapIntensity: <float>\n *\n *  emissive: <hex>,\n *  emissiveIntensity: <float>\n *  emissiveMap: new THREE.Texture( <Image> ),\n *\n *  bumpMap: new THREE.Texture( <Image> ),\n *  bumpScale: <float>,\n *\n *  normalMap: new THREE.Texture( <Image> ),\n *  normalMapType: THREE.TangentSpaceNormalMap,\n *  normalScale: <Vector2>,\n *\n *  displacementMap: new THREE.Texture( <Image> ),\n *  displacementScale: <float>,\n *  displacementBias: <float>,\n *\n *  roughnessMap: new THREE.Texture( <Image> ),\n *\n *  metalnessMap: new THREE.Texture( <Image> ),\n *\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  envMap: new THREE.CubeTexture( [posx, negx, posy, negy, posz, negz] ),\n *  envMapIntensity: <float>\n *\n *  refractionRatio: <float>,\n *\n *  wireframe: <boolean>,\n *  wireframeLinewidth: <float>,\n *\n *  skinning: <bool>,\n *  morphTargets: <bool>,\n *  morphNormals: <bool>\n * }\n */\n\nfunction MeshStandardMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.defines = { 'STANDARD': '' };\n\n\tthis.type = 'MeshStandardMaterial';\n\n\tthis.color = new Color( 0xffffff ); // diffuse\n\tthis.roughness = 1.0;\n\tthis.metalness = 0.0;\n\n\tthis.map = null;\n\n\tthis.lightMap = null;\n\tthis.lightMapIntensity = 1.0;\n\n\tthis.aoMap = null;\n\tthis.aoMapIntensity = 1.0;\n\n\tthis.emissive = new Color( 0x000000 );\n\tthis.emissiveIntensity = 1.0;\n\tthis.emissiveMap = null;\n\n\tthis.bumpMap = null;\n\tthis.bumpScale = 1;\n\n\tthis.normalMap = null;\n\tthis.normalMapType = TangentSpaceNormalMap;\n\tthis.normalScale = new Vector2( 1, 1 );\n\n\tthis.displacementMap = null;\n\tthis.displacementScale = 1;\n\tthis.displacementBias = 0;\n\n\tthis.roughnessMap = null;\n\n\tthis.metalnessMap = null;\n\n\tthis.alphaMap = null;\n\n\tthis.envMap = null;\n\tthis.envMapIntensity = 1.0;\n\n\tthis.refractionRatio = 0.98;\n\n\tthis.wireframe = false;\n\tthis.wireframeLinewidth = 1;\n\tthis.wireframeLinecap = 'round';\n\tthis.wireframeLinejoin = 'round';\n\n\tthis.skinning = false;\n\tthis.morphTargets = false;\n\tthis.morphNormals = false;\n\n\tthis.vertexTangents = false;\n\n\tthis.setValues( parameters );\n\n}\n\nMeshStandardMaterial.prototype = Object.create( Material.prototype );\nMeshStandardMaterial.prototype.constructor = MeshStandardMaterial;\n\nMeshStandardMaterial.prototype.isMeshStandardMaterial = true;\n\nMeshStandardMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.defines = { 'STANDARD': '' };\n\n\tthis.color.copy( source.color );\n\tthis.roughness = source.roughness;\n\tthis.metalness = source.metalness;\n\n\tthis.map = source.map;\n\n\tthis.lightMap = source.lightMap;\n\tthis.lightMapIntensity = source.lightMapIntensity;\n\n\tthis.aoMap = source.aoMap;\n\tthis.aoMapIntensity = source.aoMapIntensity;\n\n\tthis.emissive.copy( source.emissive );\n\tthis.emissiveMap = source.emissiveMap;\n\tthis.emissiveIntensity = source.emissiveIntensity;\n\n\tthis.bumpMap = source.bumpMap;\n\tthis.bumpScale = source.bumpScale;\n\n\tthis.normalMap = source.normalMap;\n\tthis.normalMapType = source.normalMapType;\n\tthis.normalScale.copy( source.normalScale );\n\n\tthis.displacementMap = source.displacementMap;\n\tthis.displacementScale = source.displacementScale;\n\tthis.displacementBias = source.displacementBias;\n\n\tthis.roughnessMap = source.roughnessMap;\n\n\tthis.metalnessMap = source.metalnessMap;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.envMap = source.envMap;\n\tthis.envMapIntensity = source.envMapIntensity;\n\n\tthis.refractionRatio = source.refractionRatio;\n\n\tthis.wireframe = source.wireframe;\n\tthis.wireframeLinewidth = source.wireframeLinewidth;\n\tthis.wireframeLinecap = source.wireframeLinecap;\n\tthis.wireframeLinejoin = source.wireframeLinejoin;\n\n\tthis.skinning = source.skinning;\n\tthis.morphTargets = source.morphTargets;\n\tthis.morphNormals = source.morphNormals;\n\n\tthis.vertexTangents = source.vertexTangents;\n\n\treturn this;\n\n};\n\n\nexport { MeshStandardMaterial };\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { Vector2 } from '../math/Vector2.js';\n\nfunction DirectGeometry() {\n\n\tthis.vertices = [];\n\tthis.normals = [];\n\tthis.colors = [];\n\tthis.uvs = [];\n\tthis.uvs2 = [];\n\n\tthis.groups = [];\n\n\tthis.morphTargets = {};\n\n\tthis.skinWeights = [];\n\tthis.skinIndices = [];\n\n\t// this.lineDistances = [];\n\n\tthis.boundingBox = null;\n\tthis.boundingSphere = null;\n\n\t// update flags\n\n\tthis.verticesNeedUpdate = false;\n\tthis.normalsNeedUpdate = false;\n\tthis.colorsNeedUpdate = false;\n\tthis.uvsNeedUpdate = false;\n\tthis.groupsNeedUpdate = false;\n\n}\n\nObject.assign( DirectGeometry.prototype, {\n\n\tcomputeGroups: function ( geometry ) {\n\n\t\tvar group;\n\t\tvar groups = [];\n\t\tvar materialIndex = undefined;\n\n\t\tvar faces = geometry.faces;\n\n\t\tfor ( var i = 0; i < faces.length; i ++ ) {\n\n\t\t\tvar face = faces[ i ];\n\n\t\t\t// materials\n\n\t\t\tif ( face.materialIndex !== materialIndex ) {\n\n\t\t\t\tmaterialIndex = face.materialIndex;\n\n\t\t\t\tif ( group !== undefined ) {\n\n\t\t\t\t\tgroup.count = ( i * 3 ) - group.start;\n\t\t\t\t\tgroups.push( group );\n\n\t\t\t\t}\n\n\t\t\t\tgroup = {\n\t\t\t\t\tstart: i * 3,\n\t\t\t\t\tmaterialIndex: materialIndex\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( group !== undefined ) {\n\n\t\t\tgroup.count = ( i * 3 ) - group.start;\n\t\t\tgroups.push( group );\n\n\t\t}\n\n\t\tthis.groups = groups;\n\n\t},\n\n\tfromGeometry: function ( geometry ) {\n\n\t\tvar faces = geometry.faces;\n\t\tvar vertices = geometry.vertices;\n\t\tvar faceVertexUvs = geometry.faceVertexUvs;\n\n\t\tvar hasFaceVertexUv = faceVertexUvs[ 0 ] && faceVertexUvs[ 0 ].length > 0;\n\t\tvar hasFaceVertexUv2 = faceVertexUvs[ 1 ] && faceVertexUvs[ 1 ].length > 0;\n\n\t\t// morphs\n\n\t\tvar morphTargets = geometry.morphTargets;\n\t\tvar morphTargetsLength = morphTargets.length;\n\n\t\tvar morphTargetsPosition;\n\n\t\tif ( morphTargetsLength > 0 ) {\n\n\t\t\tmorphTargetsPosition = [];\n\n\t\t\tfor ( var i = 0; i < morphTargetsLength; i ++ ) {\n\n\t\t\t\tmorphTargetsPosition[ i ] = {\n\t\t\t\t\tname: morphTargets[ i ].name,\n\t\t\t\t \tdata: []\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\tthis.morphTargets.position = morphTargetsPosition;\n\n\t\t}\n\n\t\tvar morphNormals = geometry.morphNormals;\n\t\tvar morphNormalsLength = morphNormals.length;\n\n\t\tvar morphTargetsNormal;\n\n\t\tif ( morphNormalsLength > 0 ) {\n\n\t\t\tmorphTargetsNormal = [];\n\n\t\t\tfor ( var i = 0; i < morphNormalsLength; i ++ ) {\n\n\t\t\t\tmorphTargetsNormal[ i ] = {\n\t\t\t\t\tname: morphNormals[ i ].name,\n\t\t\t\t \tdata: []\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\tthis.morphTargets.normal = morphTargetsNormal;\n\n\t\t}\n\n\t\t// skins\n\n\t\tvar skinIndices = geometry.skinIndices;\n\t\tvar skinWeights = geometry.skinWeights;\n\n\t\tvar hasSkinIndices = skinIndices.length === vertices.length;\n\t\tvar hasSkinWeights = skinWeights.length === vertices.length;\n\n\t\t//\n\n\t\tif ( vertices.length > 0 && faces.length === 0 ) {\n\n\t\t\tconsole.error( 'THREE.DirectGeometry: Faceless geometries are not supported.' );\n\n\t\t}\n\n\t\tfor ( var i = 0; i < faces.length; i ++ ) {\n\n\t\t\tvar face = faces[ i ];\n\n\t\t\tthis.vertices.push( vertices[ face.a ], vertices[ face.b ], vertices[ face.c ] );\n\n\t\t\tvar vertexNormals = face.vertexNormals;\n\n\t\t\tif ( vertexNormals.length === 3 ) {\n\n\t\t\t\tthis.normals.push( vertexNormals[ 0 ], vertexNormals[ 1 ], vertexNormals[ 2 ] );\n\n\t\t\t} else {\n\n\t\t\t\tvar normal = face.normal;\n\n\t\t\t\tthis.normals.push( normal, normal, normal );\n\n\t\t\t}\n\n\t\t\tvar vertexColors = face.vertexColors;\n\n\t\t\tif ( vertexColors.length === 3 ) {\n\n\t\t\t\tthis.colors.push( vertexColors[ 0 ], vertexColors[ 1 ], vertexColors[ 2 ] );\n\n\t\t\t} else {\n\n\t\t\t\tvar color = face.color;\n\n\t\t\t\tthis.colors.push( color, color, color );\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexUv === true ) {\n\n\t\t\t\tvar vertexUvs = faceVertexUvs[ 0 ][ i ];\n\n\t\t\t\tif ( vertexUvs !== undefined ) {\n\n\t\t\t\t\tthis.uvs.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv ', i );\n\n\t\t\t\t\tthis.uvs.push( new Vector2(), new Vector2(), new Vector2() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tif ( hasFaceVertexUv2 === true ) {\n\n\t\t\t\tvar vertexUvs = faceVertexUvs[ 1 ][ i ];\n\n\t\t\t\tif ( vertexUvs !== undefined ) {\n\n\t\t\t\t\tthis.uvs2.push( vertexUvs[ 0 ], vertexUvs[ 1 ], vertexUvs[ 2 ] );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( 'THREE.DirectGeometry.fromGeometry(): Undefined vertexUv2 ', i );\n\n\t\t\t\t\tthis.uvs2.push( new Vector2(), new Vector2(), new Vector2() );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// morphs\n\n\t\t\tfor ( var j = 0; j < morphTargetsLength; j ++ ) {\n\n\t\t\t\tvar morphTarget = morphTargets[ j ].vertices;\n\n\t\t\t\tmorphTargetsPosition[ j ].data.push( morphTarget[ face.a ], morphTarget[ face.b ], morphTarget[ face.c ] );\n\n\t\t\t}\n\n\t\t\tfor ( var j = 0; j < morphNormalsLength; j ++ ) {\n\n\t\t\t\tvar morphNormal = morphNormals[ j ].vertexNormals[ i ];\n\n\t\t\t\tmorphTargetsNormal[ j ].data.push( morphNormal.a, morphNormal.b, morphNormal.c );\n\n\t\t\t}\n\n\t\t\t// skins\n\n\t\t\tif ( hasSkinIndices ) {\n\n\t\t\t\tthis.skinIndices.push( skinIndices[ face.a ], skinIndices[ face.b ], skinIndices[ face.c ] );\n\n\t\t\t}\n\n\t\t\tif ( hasSkinWeights ) {\n\n\t\t\t\tthis.skinWeights.push( skinWeights[ face.a ], skinWeights[ face.b ], skinWeights[ face.c ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.computeGroups( geometry );\n\n\t\tthis.verticesNeedUpdate = geometry.verticesNeedUpdate;\n\t\tthis.normalsNeedUpdate = geometry.normalsNeedUpdate;\n\t\tthis.colorsNeedUpdate = geometry.colorsNeedUpdate;\n\t\tthis.uvsNeedUpdate = geometry.uvsNeedUpdate;\n\t\tthis.groupsNeedUpdate = geometry.groupsNeedUpdate;\n\n\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t}\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { DirectGeometry };\n","import { Vector3 } from '../math/Vector3.js';\nimport { Box3 } from '../math/Box3.js';\nimport { EventDispatcher } from './EventDispatcher.js';\nimport { BufferAttribute, Float32BufferAttribute, Uint16BufferAttribute, Uint32BufferAttribute } from './BufferAttribute.js';\nimport { Sphere } from '../math/Sphere.js';\nimport { DirectGeometry } from './DirectGeometry.js';\nimport { Object3D } from './Object3D.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { Matrix3 } from '../math/Matrix3.js';\nimport { MathUtils } from '../math/MathUtils.js';\nimport { arrayMax } from '../utils.js';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar _bufferGeometryId = 1; // BufferGeometry uses odd numbers as Id\n\nvar _m1 = new Matrix4();\nvar _obj = new Object3D();\nvar _offset = new Vector3();\nvar _box = new Box3();\nvar _boxMorphTargets = new Box3();\nvar _vector = new Vector3();\n\nfunction BufferGeometry() {\n\n\tObject.defineProperty( this, 'id', { value: _bufferGeometryId += 2 } );\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'BufferGeometry';\n\n\tthis.index = null;\n\tthis.attributes = {};\n\n\tthis.morphAttributes = {};\n\tthis.morphTargetsRelative = false;\n\n\tthis.groups = [];\n\n\tthis.boundingBox = null;\n\tthis.boundingSphere = null;\n\n\tthis.drawRange = { start: 0, count: Infinity };\n\n\tthis.userData = {};\n\n}\n\nBufferGeometry.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: BufferGeometry,\n\n\tisBufferGeometry: true,\n\n\tgetIndex: function () {\n\n\t\treturn this.index;\n\n\t},\n\n\tsetIndex: function ( index ) {\n\n\t\tif ( Array.isArray( index ) ) {\n\n\t\t\tthis.index = new ( arrayMax( index ) > 65535 ? Uint32BufferAttribute : Uint16BufferAttribute )( index, 1 );\n\n\t\t} else {\n\n\t\t\tthis.index = index;\n\n\t\t}\n\n\t},\n\n\tgetAttribute: function ( name ) {\n\n\t\treturn this.attributes[ name ];\n\n\t},\n\n\tsetAttribute: function ( name, attribute ) {\n\n\t\tthis.attributes[ name ] = attribute;\n\n\t\treturn this;\n\n\t},\n\n\tdeleteAttribute: function ( name ) {\n\n\t\tdelete this.attributes[ name ];\n\n\t\treturn this;\n\n\t},\n\n\taddGroup: function ( start, count, materialIndex ) {\n\n\t\tthis.groups.push( {\n\n\t\t\tstart: start,\n\t\t\tcount: count,\n\t\t\tmaterialIndex: materialIndex !== undefined ? materialIndex : 0\n\n\t\t} );\n\n\t},\n\n\tclearGroups: function () {\n\n\t\tthis.groups = [];\n\n\t},\n\n\tsetDrawRange: function ( start, count ) {\n\n\t\tthis.drawRange.start = start;\n\t\tthis.drawRange.count = count;\n\n\t},\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\tvar position = this.attributes.position;\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tposition.applyMatrix4( matrix );\n\n\t\t\tposition.needsUpdate = true;\n\n\t\t}\n\n\t\tvar normal = this.attributes.normal;\n\n\t\tif ( normal !== undefined ) {\n\n\t\t\tvar normalMatrix = new Matrix3().getNormalMatrix( matrix );\n\n\t\t\tnormal.applyNormalMatrix( normalMatrix );\n\n\t\t\tnormal.needsUpdate = true;\n\n\t\t}\n\n\t\tvar tangent = this.attributes.tangent;\n\n\t\tif ( tangent !== undefined ) {\n\n\t\t\ttangent.transformDirection( matrix );\n\n\t\t\ttangent.needsUpdate = true;\n\n\t\t}\n\n\t\tif ( this.boundingBox !== null ) {\n\n\t\t\tthis.computeBoundingBox();\n\n\t\t}\n\n\t\tif ( this.boundingSphere !== null ) {\n\n\t\t\tthis.computeBoundingSphere();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\trotateX: function ( angle ) {\n\n\t\t// rotate geometry around world x-axis\n\n\t\t_m1.makeRotationX( angle );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t},\n\n\trotateY: function ( angle ) {\n\n\t\t// rotate geometry around world y-axis\n\n\t\t_m1.makeRotationY( angle );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t},\n\n\trotateZ: function ( angle ) {\n\n\t\t// rotate geometry around world z-axis\n\n\t\t_m1.makeRotationZ( angle );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( x, y, z ) {\n\n\t\t// translate geometry\n\n\t\t_m1.makeTranslation( x, y, z );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t},\n\n\tscale: function ( x, y, z ) {\n\n\t\t// scale geometry\n\n\t\t_m1.makeScale( x, y, z );\n\n\t\tthis.applyMatrix4( _m1 );\n\n\t\treturn this;\n\n\t},\n\n\tlookAt: function ( vector ) {\n\n\t\t_obj.lookAt( vector );\n\n\t\t_obj.updateMatrix();\n\n\t\tthis.applyMatrix4( _obj.matrix );\n\n\t\treturn this;\n\n\t},\n\n\tcenter: function () {\n\n\t\tthis.computeBoundingBox();\n\n\t\tthis.boundingBox.getCenter( _offset ).negate();\n\n\t\tthis.translate( _offset.x, _offset.y, _offset.z );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromObject: function ( object ) {\n\n\t\t// console.log( 'THREE.BufferGeometry.setFromObject(). Converting', object, this );\n\n\t\tvar geometry = object.geometry;\n\n\t\tif ( object.isPoints || object.isLine ) {\n\n\t\t\tvar positions = new Float32BufferAttribute( geometry.vertices.length * 3, 3 );\n\t\t\tvar colors = new Float32BufferAttribute( geometry.colors.length * 3, 3 );\n\n\t\t\tthis.setAttribute( 'position', positions.copyVector3sArray( geometry.vertices ) );\n\t\t\tthis.setAttribute( 'color', colors.copyColorsArray( geometry.colors ) );\n\n\t\t\tif ( geometry.lineDistances && geometry.lineDistances.length === geometry.vertices.length ) {\n\n\t\t\t\tvar lineDistances = new Float32BufferAttribute( geometry.lineDistances.length, 1 );\n\n\t\t\t\tthis.setAttribute( 'lineDistance', lineDistances.copyArray( geometry.lineDistances ) );\n\n\t\t\t}\n\n\t\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t\t}\n\n\t\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t\t}\n\n\t\t} else if ( object.isMesh ) {\n\n\t\t\tif ( geometry && geometry.isGeometry ) {\n\n\t\t\t\tthis.fromGeometry( geometry );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPoints: function ( points ) {\n\n\t\tvar position = [];\n\n\t\tfor ( var i = 0, l = points.length; i < l; i ++ ) {\n\n\t\t\tvar point = points[ i ];\n\t\t\tposition.push( point.x, point.y, point.z || 0 );\n\n\t\t}\n\n\t\tthis.setAttribute( 'position', new Float32BufferAttribute( position, 3 ) );\n\n\t\treturn this;\n\n\t},\n\n\tupdateFromObject: function ( object ) {\n\n\t\tvar geometry = object.geometry;\n\n\t\tif ( object.isMesh ) {\n\n\t\t\tvar direct = geometry.__directGeometry;\n\n\t\t\tif ( geometry.elementsNeedUpdate === true ) {\n\n\t\t\t\tdirect = undefined;\n\t\t\t\tgeometry.elementsNeedUpdate = false;\n\n\t\t\t}\n\n\t\t\tif ( direct === undefined ) {\n\n\t\t\t\treturn this.fromGeometry( geometry );\n\n\t\t\t}\n\n\t\t\tdirect.verticesNeedUpdate = geometry.verticesNeedUpdate;\n\t\t\tdirect.normalsNeedUpdate = geometry.normalsNeedUpdate;\n\t\t\tdirect.colorsNeedUpdate = geometry.colorsNeedUpdate;\n\t\t\tdirect.uvsNeedUpdate = geometry.uvsNeedUpdate;\n\t\t\tdirect.groupsNeedUpdate = geometry.groupsNeedUpdate;\n\n\t\t\tgeometry.verticesNeedUpdate = false;\n\t\t\tgeometry.normalsNeedUpdate = false;\n\t\t\tgeometry.colorsNeedUpdate = false;\n\t\t\tgeometry.uvsNeedUpdate = false;\n\t\t\tgeometry.groupsNeedUpdate = false;\n\n\t\t\tgeometry = direct;\n\n\t\t}\n\n\t\tvar attribute;\n\n\t\tif ( geometry.verticesNeedUpdate === true ) {\n\n\t\t\tattribute = this.attributes.position;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyVector3sArray( geometry.vertices );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.verticesNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.normalsNeedUpdate === true ) {\n\n\t\t\tattribute = this.attributes.normal;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyVector3sArray( geometry.normals );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.normalsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.colorsNeedUpdate === true ) {\n\n\t\t\tattribute = this.attributes.color;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyColorsArray( geometry.colors );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.colorsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.uvsNeedUpdate ) {\n\n\t\t\tattribute = this.attributes.uv;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyVector2sArray( geometry.uvs );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.uvsNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.lineDistancesNeedUpdate ) {\n\n\t\t\tattribute = this.attributes.lineDistance;\n\n\t\t\tif ( attribute !== undefined ) {\n\n\t\t\t\tattribute.copyArray( geometry.lineDistances );\n\t\t\t\tattribute.needsUpdate = true;\n\n\t\t\t}\n\n\t\t\tgeometry.lineDistancesNeedUpdate = false;\n\n\t\t}\n\n\t\tif ( geometry.groupsNeedUpdate ) {\n\n\t\t\tgeometry.computeGroups( object.geometry );\n\t\t\tthis.groups = geometry.groups;\n\n\t\t\tgeometry.groupsNeedUpdate = false;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tfromGeometry: function ( geometry ) {\n\n\t\tgeometry.__directGeometry = new DirectGeometry().fromGeometry( geometry );\n\n\t\treturn this.fromDirectGeometry( geometry.__directGeometry );\n\n\t},\n\n\tfromDirectGeometry: function ( geometry ) {\n\n\t\tvar positions = new Float32Array( geometry.vertices.length * 3 );\n\t\tthis.setAttribute( 'position', new BufferAttribute( positions, 3 ).copyVector3sArray( geometry.vertices ) );\n\n\t\tif ( geometry.normals.length > 0 ) {\n\n\t\t\tvar normals = new Float32Array( geometry.normals.length * 3 );\n\t\t\tthis.setAttribute( 'normal', new BufferAttribute( normals, 3 ).copyVector3sArray( geometry.normals ) );\n\n\t\t}\n\n\t\tif ( geometry.colors.length > 0 ) {\n\n\t\t\tvar colors = new Float32Array( geometry.colors.length * 3 );\n\t\t\tthis.setAttribute( 'color', new BufferAttribute( colors, 3 ).copyColorsArray( geometry.colors ) );\n\n\t\t}\n\n\t\tif ( geometry.uvs.length > 0 ) {\n\n\t\t\tvar uvs = new Float32Array( geometry.uvs.length * 2 );\n\t\t\tthis.setAttribute( 'uv', new BufferAttribute( uvs, 2 ).copyVector2sArray( geometry.uvs ) );\n\n\t\t}\n\n\t\tif ( geometry.uvs2.length > 0 ) {\n\n\t\t\tvar uvs2 = new Float32Array( geometry.uvs2.length * 2 );\n\t\t\tthis.setAttribute( 'uv2', new BufferAttribute( uvs2, 2 ).copyVector2sArray( geometry.uvs2 ) );\n\n\t\t}\n\n\t\t// groups\n\n\t\tthis.groups = geometry.groups;\n\n\t\t// morphs\n\n\t\tfor ( var name in geometry.morphTargets ) {\n\n\t\t\tvar array = [];\n\t\t\tvar morphTargets = geometry.morphTargets[ name ];\n\n\t\t\tfor ( var i = 0, l = morphTargets.length; i < l; i ++ ) {\n\n\t\t\t\tvar morphTarget = morphTargets[ i ];\n\n\t\t\t\tvar attribute = new Float32BufferAttribute( morphTarget.data.length * 3, 3 );\n\t\t\t\tattribute.name = morphTarget.name;\n\n\t\t\t\tarray.push( attribute.copyVector3sArray( morphTarget.data ) );\n\n\t\t\t}\n\n\t\t\tthis.morphAttributes[ name ] = array;\n\n\t\t}\n\n\t\t// skinning\n\n\t\tif ( geometry.skinIndices.length > 0 ) {\n\n\t\t\tvar skinIndices = new Float32BufferAttribute( geometry.skinIndices.length * 4, 4 );\n\t\t\tthis.setAttribute( 'skinIndex', skinIndices.copyVector4sArray( geometry.skinIndices ) );\n\n\t\t}\n\n\t\tif ( geometry.skinWeights.length > 0 ) {\n\n\t\t\tvar skinWeights = new Float32BufferAttribute( geometry.skinWeights.length * 4, 4 );\n\t\t\tthis.setAttribute( 'skinWeight', skinWeights.copyVector4sArray( geometry.skinWeights ) );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( geometry.boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = geometry.boundingSphere.clone();\n\n\t\t}\n\n\t\tif ( geometry.boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = geometry.boundingBox.clone();\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tcomputeBoundingBox: function () {\n\n\t\tif ( this.boundingBox === null ) {\n\n\t\t\tthis.boundingBox = new Box3();\n\n\t\t}\n\n\t\tvar position = this.attributes.position;\n\t\tvar morphAttributesPosition = this.morphAttributes.position;\n\n\t\tif ( position !== undefined ) {\n\n\t\t\tthis.boundingBox.setFromBufferAttribute( position );\n\n\t\t\t// process morph attributes if present\n\n\t\t\tif ( morphAttributesPosition ) {\n\n\t\t\t\tfor ( var i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar morphAttribute = morphAttributesPosition[ i ];\n\t\t\t\t\t_box.setFromBufferAttribute( morphAttribute );\n\n\t\t\t\t\tif ( this.morphTargetsRelative ) {\n\n\t\t\t\t\t\t_vector.addVectors( this.boundingBox.min, _box.min );\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _vector );\n\n\t\t\t\t\t\t_vector.addVectors( this.boundingBox.max, _box.max );\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _vector );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _box.min );\n\t\t\t\t\t\tthis.boundingBox.expandByPoint( _box.max );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis.boundingBox.makeEmpty();\n\n\t\t}\n\n\t\tif ( isNaN( this.boundingBox.min.x ) || isNaN( this.boundingBox.min.y ) || isNaN( this.boundingBox.min.z ) ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingBox: Computed min/max have NaN values. The \"position\" attribute is likely to have NaN values.', this );\n\n\t\t}\n\n\t},\n\n\tcomputeBoundingSphere: function () {\n\n\t\tif ( this.boundingSphere === null ) {\n\n\t\t\tthis.boundingSphere = new Sphere();\n\n\t\t}\n\n\t\tvar position = this.attributes.position;\n\t\tvar morphAttributesPosition = this.morphAttributes.position;\n\n\t\tif ( position ) {\n\n\t\t\t// first, find the center of the bounding sphere\n\n\t\t\tvar center = this.boundingSphere.center;\n\n\t\t\t_box.setFromBufferAttribute( position );\n\n\t\t\t// process morph attributes if present\n\n\t\t\tif ( morphAttributesPosition ) {\n\n\t\t\t\tfor ( var i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar morphAttribute = morphAttributesPosition[ i ];\n\t\t\t\t\t_boxMorphTargets.setFromBufferAttribute( morphAttribute );\n\n\t\t\t\t\tif ( this.morphTargetsRelative ) {\n\n\t\t\t\t\t\t_vector.addVectors( _box.min, _boxMorphTargets.min );\n\t\t\t\t\t\t_box.expandByPoint( _vector );\n\n\t\t\t\t\t\t_vector.addVectors( _box.max, _boxMorphTargets.max );\n\t\t\t\t\t\t_box.expandByPoint( _vector );\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t_box.expandByPoint( _boxMorphTargets.min );\n\t\t\t\t\t\t_box.expandByPoint( _boxMorphTargets.max );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t_box.getCenter( center );\n\n\t\t\t// second, try to find a boundingSphere with a radius smaller than the\n\t\t\t// boundingSphere of the boundingBox: sqrt(3) smaller in the best case\n\n\t\t\tvar maxRadiusSq = 0;\n\n\t\t\tfor ( var i = 0, il = position.count; i < il; i ++ ) {\n\n\t\t\t\t_vector.fromBufferAttribute( position, i );\n\n\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( _vector ) );\n\n\t\t\t}\n\n\t\t\t// process morph attributes if present\n\n\t\t\tif ( morphAttributesPosition ) {\n\n\t\t\t\tfor ( var i = 0, il = morphAttributesPosition.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar morphAttribute = morphAttributesPosition[ i ];\n\t\t\t\t\tvar morphTargetsRelative = this.morphTargetsRelative;\n\n\t\t\t\t\tfor ( var j = 0, jl = morphAttribute.count; j < jl; j ++ ) {\n\n\t\t\t\t\t\t_vector.fromBufferAttribute( morphAttribute, j );\n\n\t\t\t\t\t\tif ( morphTargetsRelative ) {\n\n\t\t\t\t\t\t\t_offset.fromBufferAttribute( position, j );\n\t\t\t\t\t\t\t_vector.add( _offset );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tmaxRadiusSq = Math.max( maxRadiusSq, center.distanceToSquared( _vector ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.boundingSphere.radius = Math.sqrt( maxRadiusSq );\n\n\t\t\tif ( isNaN( this.boundingSphere.radius ) ) {\n\n\t\t\t\tconsole.error( 'THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The \"position\" attribute is likely to have NaN values.', this );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tcomputeFaceNormals: function () {\n\n\t\t// backwards compatibility\n\n\t},\n\n\tcomputeVertexNormals: function () {\n\n\t\tvar index = this.index;\n\t\tvar attributes = this.attributes;\n\n\t\tif ( attributes.position ) {\n\n\t\t\tvar positions = attributes.position.array;\n\n\t\t\tif ( attributes.normal === undefined ) {\n\n\t\t\t\tthis.setAttribute( 'normal', new BufferAttribute( new Float32Array( positions.length ), 3 ) );\n\n\t\t\t} else {\n\n\t\t\t\t// reset existing normals to zero\n\n\t\t\t\tvar array = attributes.normal.array;\n\n\t\t\t\tfor ( var i = 0, il = array.length; i < il; i ++ ) {\n\n\t\t\t\t\tarray[ i ] = 0;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tvar normals = attributes.normal.array;\n\n\t\t\tvar vA, vB, vC;\n\t\t\tvar pA = new Vector3(), pB = new Vector3(), pC = new Vector3();\n\t\t\tvar cb = new Vector3(), ab = new Vector3();\n\n\t\t\t// indexed elements\n\n\t\t\tif ( index ) {\n\n\t\t\t\tvar indices = index.array;\n\n\t\t\t\tfor ( var i = 0, il = index.count; i < il; i += 3 ) {\n\n\t\t\t\t\tvA = indices[ i + 0 ] * 3;\n\t\t\t\t\tvB = indices[ i + 1 ] * 3;\n\t\t\t\t\tvC = indices[ i + 2 ] * 3;\n\n\t\t\t\t\tpA.fromArray( positions, vA );\n\t\t\t\t\tpB.fromArray( positions, vB );\n\t\t\t\t\tpC.fromArray( positions, vC );\n\n\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\tnormals[ vA ] += cb.x;\n\t\t\t\t\tnormals[ vA + 1 ] += cb.y;\n\t\t\t\t\tnormals[ vA + 2 ] += cb.z;\n\n\t\t\t\t\tnormals[ vB ] += cb.x;\n\t\t\t\t\tnormals[ vB + 1 ] += cb.y;\n\t\t\t\t\tnormals[ vB + 2 ] += cb.z;\n\n\t\t\t\t\tnormals[ vC ] += cb.x;\n\t\t\t\t\tnormals[ vC + 1 ] += cb.y;\n\t\t\t\t\tnormals[ vC + 2 ] += cb.z;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// non-indexed elements (unconnected triangle soup)\n\n\t\t\t\tfor ( var i = 0, il = positions.length; i < il; i += 9 ) {\n\n\t\t\t\t\tpA.fromArray( positions, i );\n\t\t\t\t\tpB.fromArray( positions, i + 3 );\n\t\t\t\t\tpC.fromArray( positions, i + 6 );\n\n\t\t\t\t\tcb.subVectors( pC, pB );\n\t\t\t\t\tab.subVectors( pA, pB );\n\t\t\t\t\tcb.cross( ab );\n\n\t\t\t\t\tnormals[ i ] = cb.x;\n\t\t\t\t\tnormals[ i + 1 ] = cb.y;\n\t\t\t\t\tnormals[ i + 2 ] = cb.z;\n\n\t\t\t\t\tnormals[ i + 3 ] = cb.x;\n\t\t\t\t\tnormals[ i + 4 ] = cb.y;\n\t\t\t\t\tnormals[ i + 5 ] = cb.z;\n\n\t\t\t\t\tnormals[ i + 6 ] = cb.x;\n\t\t\t\t\tnormals[ i + 7 ] = cb.y;\n\t\t\t\t\tnormals[ i + 8 ] = cb.z;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.normalizeNormals();\n\n\t\t\tattributes.normal.needsUpdate = true;\n\n\t\t}\n\n\t},\n\n\tmerge: function ( geometry, offset ) {\n\n\t\tif ( ! ( geometry && geometry.isBufferGeometry ) ) {\n\n\t\t\tconsole.error( 'THREE.BufferGeometry.merge(): geometry not an instance of THREE.BufferGeometry.', geometry );\n\t\t\treturn;\n\n\t\t}\n\n\t\tif ( offset === undefined ) {\n\n\t\t\toffset = 0;\n\n\t\t\tconsole.warn(\n\t\t\t\t'THREE.BufferGeometry.merge(): Overwriting original geometry, starting at offset=0. '\n\t\t\t\t+ 'Use BufferGeometryUtils.mergeBufferGeometries() for lossless merge.'\n\t\t\t);\n\n\t\t}\n\n\t\tvar attributes = this.attributes;\n\n\t\tfor ( var key in attributes ) {\n\n\t\t\tif ( geometry.attributes[ key ] === undefined ) continue;\n\n\t\t\tvar attribute1 = attributes[ key ];\n\t\t\tvar attributeArray1 = attribute1.array;\n\n\t\t\tvar attribute2 = geometry.attributes[ key ];\n\t\t\tvar attributeArray2 = attribute2.array;\n\n\t\t\tvar attributeOffset = attribute2.itemSize * offset;\n\t\t\tvar length = Math.min( attributeArray2.length, attributeArray1.length - attributeOffset );\n\n\t\t\tfor ( var i = 0, j = attributeOffset; i < length; i ++, j ++ ) {\n\n\t\t\t\tattributeArray1[ j ] = attributeArray2[ i ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tnormalizeNormals: function () {\n\n\t\tvar normals = this.attributes.normal;\n\n\t\tfor ( var i = 0, il = normals.count; i < il; i ++ ) {\n\n\t\t\t_vector.x = normals.getX( i );\n\t\t\t_vector.y = normals.getY( i );\n\t\t\t_vector.z = normals.getZ( i );\n\n\t\t\t_vector.normalize();\n\n\t\t\tnormals.setXYZ( i, _vector.x, _vector.y, _vector.z );\n\n\t\t}\n\n\t},\n\n\ttoNonIndexed: function () {\n\n\t\tfunction convertBufferAttribute( attribute, indices ) {\n\n\t\t\tvar array = attribute.array;\n\t\t\tvar itemSize = attribute.itemSize;\n\n\t\t\tvar array2 = new array.constructor( indices.length * itemSize );\n\n\t\t\tvar index = 0, index2 = 0;\n\n\t\t\tfor ( var i = 0, l = indices.length; i < l; i ++ ) {\n\n\t\t\t\tindex = indices[ i ] * itemSize;\n\n\t\t\t\tfor ( var j = 0; j < itemSize; j ++ ) {\n\n\t\t\t\t\tarray2[ index2 ++ ] = array[ index ++ ];\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn new BufferAttribute( array2, itemSize );\n\n\t\t}\n\n\t\t//\n\n\t\tif ( this.index === null ) {\n\n\t\t\tconsole.warn( 'THREE.BufferGeometry.toNonIndexed(): Geometry is already non-indexed.' );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar geometry2 = new BufferGeometry();\n\n\t\tvar indices = this.index.array;\n\t\tvar attributes = this.attributes;\n\n\t\t// attributes\n\n\t\tfor ( var name in attributes ) {\n\n\t\t\tvar attribute = attributes[ name ];\n\n\t\t\tvar newAttribute = convertBufferAttribute( attribute, indices );\n\n\t\t\tgeometry2.setAttribute( name, newAttribute );\n\n\t\t}\n\n\t\t// morph attributes\n\n\t\tvar morphAttributes = this.morphAttributes;\n\n\t\tfor ( name in morphAttributes ) {\n\n\t\t\tvar morphArray = [];\n\t\t\tvar morphAttribute = morphAttributes[ name ]; // morphAttribute: array of Float32BufferAttributes\n\n\t\t\tfor ( var i = 0, il = morphAttribute.length; i < il; i ++ ) {\n\n\t\t\t\tvar attribute = morphAttribute[ i ];\n\n\t\t\t\tvar newAttribute = convertBufferAttribute( attribute, indices );\n\n\t\t\t\tmorphArray.push( newAttribute );\n\n\t\t\t}\n\n\t\t\tgeometry2.morphAttributes[ name ] = morphArray;\n\n\t\t}\n\n\t\tgeometry2.morphTargetsRelative = this.morphTargetsRelative;\n\n\t\t// groups\n\n\t\tvar groups = this.groups;\n\n\t\tfor ( var i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\tvar group = groups[ i ];\n\t\t\tgeometry2.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t}\n\n\t\treturn geometry2;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'BufferGeometry',\n\t\t\t\tgenerator: 'BufferGeometry.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard BufferGeometry serialization\n\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\t\tif ( this.name !== '' ) data.name = this.name;\n\t\tif ( Object.keys( this.userData ).length > 0 ) data.userData = this.userData;\n\n\t\tif ( this.parameters !== undefined ) {\n\n\t\t\tvar parameters = this.parameters;\n\n\t\t\tfor ( var key in parameters ) {\n\n\t\t\t\tif ( parameters[ key ] !== undefined ) data[ key ] = parameters[ key ];\n\n\t\t\t}\n\n\t\t\treturn data;\n\n\t\t}\n\n\t\tdata.data = { attributes: {} };\n\n\t\tvar index = this.index;\n\n\t\tif ( index !== null ) {\n\n\t\t\tdata.data.index = {\n\t\t\t\ttype: index.array.constructor.name,\n\t\t\t\tarray: Array.prototype.slice.call( index.array )\n\t\t\t};\n\n\t\t}\n\n\t\tvar attributes = this.attributes;\n\n\t\tfor ( var key in attributes ) {\n\n\t\t\tvar attribute = attributes[ key ];\n\n\t\t\tvar attributeData = attribute.toJSON();\n\n\t\t\tif ( attribute.name !== '' ) attributeData.name = attribute.name;\n\n\t\t\tdata.data.attributes[ key ] = attributeData;\n\n\t\t}\n\n\t\tvar morphAttributes = {};\n\t\tvar hasMorphAttributes = false;\n\n\t\tfor ( var key in this.morphAttributes ) {\n\n\t\t\tvar attributeArray = this.morphAttributes[ key ];\n\n\t\t\tvar array = [];\n\n\t\t\tfor ( var i = 0, il = attributeArray.length; i < il; i ++ ) {\n\n\t\t\t\tvar attribute = attributeArray[ i ];\n\n\t\t\t\tvar attributeData = attribute.toJSON();\n\n\t\t\t\tif ( attribute.name !== '' ) attributeData.name = attribute.name;\n\n\t\t\t\tarray.push( attributeData );\n\n\t\t\t}\n\n\t\t\tif ( array.length > 0 ) {\n\n\t\t\t\tmorphAttributes[ key ] = array;\n\n\t\t\t\thasMorphAttributes = true;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( hasMorphAttributes ) {\n\n\t\t\tdata.data.morphAttributes = morphAttributes;\n\t\t\tdata.data.morphTargetsRelative = this.morphTargetsRelative;\n\n\t\t}\n\n\t\tvar groups = this.groups;\n\n\t\tif ( groups.length > 0 ) {\n\n\t\t\tdata.data.groups = JSON.parse( JSON.stringify( groups ) );\n\n\t\t}\n\n\t\tvar boundingSphere = this.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tdata.data.boundingSphere = {\n\t\t\t\tcenter: boundingSphere.center.toArray(),\n\t\t\t\tradius: boundingSphere.radius\n\t\t\t};\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tclone: function () {\n\n\t\t/*\n\t\t // Handle primitives\n\n\t\t var parameters = this.parameters;\n\n\t\t if ( parameters !== undefined ) {\n\n\t\t var values = [];\n\n\t\t for ( var key in parameters ) {\n\n\t\t values.push( parameters[ key ] );\n\n\t\t }\n\n\t\t var geometry = Object.create( this.constructor.prototype );\n\t\t this.constructor.apply( geometry, values );\n\t\t return geometry;\n\n\t\t }\n\n\t\t return new this.constructor().copy( this );\n\t\t */\n\n\t\treturn new BufferGeometry().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tvar name, i, l;\n\n\t\t// reset\n\n\t\tthis.index = null;\n\t\tthis.attributes = {};\n\t\tthis.morphAttributes = {};\n\t\tthis.groups = [];\n\t\tthis.boundingBox = null;\n\t\tthis.boundingSphere = null;\n\n\t\t// name\n\n\t\tthis.name = source.name;\n\n\t\t// index\n\n\t\tvar index = source.index;\n\n\t\tif ( index !== null ) {\n\n\t\t\tthis.setIndex( index.clone() );\n\n\t\t}\n\n\t\t// attributes\n\n\t\tvar attributes = source.attributes;\n\n\t\tfor ( name in attributes ) {\n\n\t\t\tvar attribute = attributes[ name ];\n\t\t\tthis.setAttribute( name, attribute.clone() );\n\n\t\t}\n\n\t\t// morph attributes\n\n\t\tvar morphAttributes = source.morphAttributes;\n\n\t\tfor ( name in morphAttributes ) {\n\n\t\t\tvar array = [];\n\t\t\tvar morphAttribute = morphAttributes[ name ]; // morphAttribute: array of Float32BufferAttributes\n\n\t\t\tfor ( i = 0, l = morphAttribute.length; i < l; i ++ ) {\n\n\t\t\t\tarray.push( morphAttribute[ i ].clone() );\n\n\t\t\t}\n\n\t\t\tthis.morphAttributes[ name ] = array;\n\n\t\t}\n\n\t\tthis.morphTargetsRelative = source.morphTargetsRelative;\n\n\t\t// groups\n\n\t\tvar groups = source.groups;\n\n\t\tfor ( i = 0, l = groups.length; i < l; i ++ ) {\n\n\t\t\tvar group = groups[ i ];\n\t\t\tthis.addGroup( group.start, group.count, group.materialIndex );\n\n\t\t}\n\n\t\t// bounding box\n\n\t\tvar boundingBox = source.boundingBox;\n\n\t\tif ( boundingBox !== null ) {\n\n\t\t\tthis.boundingBox = boundingBox.clone();\n\n\t\t}\n\n\t\t// bounding sphere\n\n\t\tvar boundingSphere = source.boundingSphere;\n\n\t\tif ( boundingSphere !== null ) {\n\n\t\t\tthis.boundingSphere = boundingSphere.clone();\n\n\t\t}\n\n\t\t// draw range\n\n\t\tthis.drawRange.start = source.drawRange.start;\n\t\tthis.drawRange.count = source.drawRange.count;\n\n\t\t// user data\n\n\t\tthis.userData = source.userData;\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\n\nexport { BufferGeometry };\n","import { Camera } from './Camera.js';\nimport { Object3D } from '../core/Object3D.js';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n * @author arose / http://github.com/arose\n */\n\nfunction OrthographicCamera( left, right, top, bottom, near, far ) {\n\n\tCamera.call( this );\n\n\tthis.type = 'OrthographicCamera';\n\n\tthis.zoom = 1;\n\tthis.view = null;\n\n\tthis.left = ( left !== undefined ) ? left : - 1;\n\tthis.right = ( right !== undefined ) ? right : 1;\n\tthis.top = ( top !== undefined ) ? top : 1;\n\tthis.bottom = ( bottom !== undefined ) ? bottom : - 1;\n\n\tthis.near = ( near !== undefined ) ? near : 0.1;\n\tthis.far = ( far !== undefined ) ? far : 2000;\n\n\tthis.updateProjectionMatrix();\n\n}\n\nOrthographicCamera.prototype = Object.assign( Object.create( Camera.prototype ), {\n\n\tconstructor: OrthographicCamera,\n\n\tisOrthographicCamera: true,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tCamera.prototype.copy.call( this, source, recursive );\n\n\t\tthis.left = source.left;\n\t\tthis.right = source.right;\n\t\tthis.top = source.top;\n\t\tthis.bottom = source.bottom;\n\t\tthis.near = source.near;\n\t\tthis.far = source.far;\n\n\t\tthis.zoom = source.zoom;\n\t\tthis.view = source.view === null ? null : Object.assign( {}, source.view );\n\n\t\treturn this;\n\n\t},\n\n\tsetViewOffset: function ( fullWidth, fullHeight, x, y, width, height ) {\n\n\t\tif ( this.view === null ) {\n\n\t\t\tthis.view = {\n\t\t\t\tenabled: true,\n\t\t\t\tfullWidth: 1,\n\t\t\t\tfullHeight: 1,\n\t\t\t\toffsetX: 0,\n\t\t\t\toffsetY: 0,\n\t\t\t\twidth: 1,\n\t\t\t\theight: 1\n\t\t\t};\n\n\t\t}\n\n\t\tthis.view.enabled = true;\n\t\tthis.view.fullWidth = fullWidth;\n\t\tthis.view.fullHeight = fullHeight;\n\t\tthis.view.offsetX = x;\n\t\tthis.view.offsetY = y;\n\t\tthis.view.width = width;\n\t\tthis.view.height = height;\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tclearViewOffset: function () {\n\n\t\tif ( this.view !== null ) {\n\n\t\t\tthis.view.enabled = false;\n\n\t\t}\n\n\t\tthis.updateProjectionMatrix();\n\n\t},\n\n\tupdateProjectionMatrix: function () {\n\n\t\tvar dx = ( this.right - this.left ) / ( 2 * this.zoom );\n\t\tvar dy = ( this.top - this.bottom ) / ( 2 * this.zoom );\n\t\tvar cx = ( this.right + this.left ) / 2;\n\t\tvar cy = ( this.top + this.bottom ) / 2;\n\n\t\tvar left = cx - dx;\n\t\tvar right = cx + dx;\n\t\tvar top = cy + dy;\n\t\tvar bottom = cy - dy;\n\n\t\tif ( this.view !== null && this.view.enabled ) {\n\n\t\t\tvar scaleW = ( this.right - this.left ) / this.view.fullWidth / this.zoom;\n\t\t\tvar scaleH = ( this.top - this.bottom ) / this.view.fullHeight / this.zoom;\n\n\t\t\tleft += scaleW * this.view.offsetX;\n\t\t\tright = left + scaleW * this.view.width;\n\t\t\ttop -= scaleH * this.view.offsetY;\n\t\t\tbottom = top - scaleH * this.view.height;\n\n\t\t}\n\n\t\tthis.projectionMatrix.makeOrthographic( left, right, top, bottom, this.near, this.far );\n\n\t\tthis.projectionMatrixInverse.getInverse( this.projectionMatrix );\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tdata.object.zoom = this.zoom;\n\t\tdata.object.left = this.left;\n\t\tdata.object.right = this.right;\n\t\tdata.object.top = this.top;\n\t\tdata.object.bottom = this.bottom;\n\t\tdata.object.near = this.near;\n\t\tdata.object.far = this.far;\n\n\t\tif ( this.view !== null ) data.object.view = Object.assign( {}, this.view );\n\n\t\treturn data;\n\n\t}\n\n} );\n\n\nexport { OrthographicCamera };\n","/**\n * @author Emmett Lalish / elalish\n *\n * This class generates a Prefiltered, Mipmapped Radiance Environment Map\n * (PMREM) from a cubeMap environment texture. This allows different levels of\n * blur to be quickly accessed based on material roughness. It is packed into a\n * special CubeUV format that allows us to perform custom interpolation so that\n * we can support nonlinear formats such as RGBE. Unlike a traditional mipmap\n * chain, it only goes down to the LOD_MIN level (above), and then creates extra\n * even more filtered 'mips' at the same LOD_MIN resolution, associated with\n * higher roughness levels. In this way we maintain resolution to smoothly\n * interpolate diffuse lighting while limiting sampling computation.\n */\n\nimport {\n\tCubeUVReflectionMapping,\n\tGammaEncoding,\n\tLinearEncoding,\n\tLinearToneMapping,\n\tNearestFilter,\n\tNoBlending,\n\tRGBDEncoding,\n\tRGBEEncoding,\n\tRGBEFormat,\n\tRGBM16Encoding,\n\tRGBM7Encoding,\n\tUnsignedByteType,\n\tsRGBEncoding\n} from \"../constants.js\";\n\nimport { BufferAttribute } from \"../core/BufferAttribute.js\";\nimport { BufferGeometry } from \"../core/BufferGeometry.js\";\nimport { Mesh } from \"../objects/Mesh.js\";\nimport { OrthographicCamera } from \"../cameras/OrthographicCamera.js\";\nimport { PerspectiveCamera } from \"../cameras/PerspectiveCamera.js\";\nimport { RawShaderMaterial } from \"../materials/RawShaderMaterial.js\";\nimport { Scene } from \"../scenes/Scene.js\";\nimport { Vector2 } from \"../math/Vector2.js\";\nimport { Vector3 } from \"../math/Vector3.js\";\nimport { WebGLRenderTarget } from \"../renderers/WebGLRenderTarget.js\";\n\nvar LOD_MIN = 4;\nvar LOD_MAX = 8;\nvar SIZE_MAX = Math.pow( 2, LOD_MAX );\n// The standard deviations (radians) associated with the extra mips. These are\n// chosen to approximate a Trowbridge-Reitz distribution function times the\n// geometric shadowing function. These sigma values squared must match the\n// variance #defines in cube_uv_reflection_fragment.glsl.js.\nvar EXTRA_LOD_SIGMA = [ 0.125, 0.215, 0.35, 0.446, 0.526, 0.582 ];\nvar TOTAL_LODS = LOD_MAX - LOD_MIN + 1 + EXTRA_LOD_SIGMA.length;\n// The maximum length of the blur for loop. Smaller sigmas will use fewer\n// samples and exit early, but not recompile the shader.\nvar MAX_SAMPLES = 20;\nvar ENCODINGS = {\n\t[ LinearEncoding ]: 0,\n\t[ sRGBEncoding ]: 1,\n\t[ RGBEEncoding ]: 2,\n\t[ RGBM7Encoding ]: 3,\n\t[ RGBM16Encoding ]: 4,\n\t[ RGBDEncoding ]: 5,\n\t[ GammaEncoding ]: 6\n};\n\nvar _flatCamera = new OrthographicCamera();\nvar _blurMaterial = _getBlurShader( MAX_SAMPLES );\nvar _equirectShader = null;\nvar _cubemapShader = null;\n\nvar { _lodPlanes, _sizeLods, _sigmas } = _createPlanes();\nvar _pingPongRenderTarget = null;\nvar _renderer = null;\n\nvar _oldTarget = null;\n\n// Golden Ratio\nvar PHI = ( 1 + Math.sqrt( 5 ) ) / 2;\nvar INV_PHI = 1 / PHI;\n// Vertices of a dodecahedron (except the opposites, which represent the\n// same axis), used as axis directions evenly spread on a sphere.\nvar _axisDirections = [\n\tnew Vector3( 1, 1, 1 ),\n\tnew Vector3( - 1, 1, 1 ),\n\tnew Vector3( 1, 1, - 1 ),\n\tnew Vector3( - 1, 1, - 1 ),\n\tnew Vector3( 0, PHI, INV_PHI ),\n\tnew Vector3( 0, PHI, - INV_PHI ),\n\tnew Vector3( INV_PHI, 0, PHI ),\n\tnew Vector3( - INV_PHI, 0, PHI ),\n\tnew Vector3( PHI, INV_PHI, 0 ),\n\tnew Vector3( - PHI, INV_PHI, 0 ) ];\n\nfunction PMREMGenerator( renderer ) {\n\n\t_renderer = renderer;\n\t_compileMaterial( _blurMaterial );\n\n}\n\nPMREMGenerator.prototype = {\n\n\tconstructor: PMREMGenerator,\n\n\t/**\n\t * Generates a PMREM from a supplied Scene, which can be faster than using an\n\t * image if networking bandwidth is low. Optional sigma specifies a blur radius\n\t * in radians to be applied to the scene before PMREM generation. Optional near\n\t * and far planes ensure the scene is rendered in its entirety (the cubeCamera\n\t * is placed at the origin).\n\t */\n\tfromScene: function ( scene, sigma = 0, near = 0.1, far = 100 ) {\n\n\t\t_oldTarget = _renderer.getRenderTarget();\n\t\tvar cubeUVRenderTarget = _allocateTargets();\n\t\t_sceneToCubeUV( scene, near, far, cubeUVRenderTarget );\n\t\tif ( sigma > 0 ) {\n\n\t\t\t_blur( cubeUVRenderTarget, 0, 0, sigma );\n\n\t\t}\n\t\t_applyPMREM( cubeUVRenderTarget );\n\t\t_cleanup( cubeUVRenderTarget );\n\n\t\treturn cubeUVRenderTarget;\n\n\t},\n\n\t/**\n\t * Generates a PMREM from an equirectangular texture, which can be either LDR\n\t * (RGBFormat) or HDR (RGBEFormat). The ideal input image size is 1k (1024 x 512),\n\t * as this matches best with the 256 x 256 cubemap output.\n\t */\n\tfromEquirectangular: function ( equirectangular ) {\n\n\t\tequirectangular.magFilter = NearestFilter;\n\t\tequirectangular.minFilter = NearestFilter;\n\t\tequirectangular.generateMipmaps = false;\n\n\t\treturn this.fromCubemap( equirectangular );\n\n\t},\n\n\t/**\n\t * Generates a PMREM from an cubemap texture, which can be either LDR\n\t * (RGBFormat) or HDR (RGBEFormat). The ideal input cube size is 256 x 256,\n\t * as this matches best with the 256 x 256 cubemap output.\n\t */\n\tfromCubemap: function ( cubemap ) {\n\n\t\t_oldTarget = _renderer.getRenderTarget();\n\t\tvar cubeUVRenderTarget = _allocateTargets( cubemap );\n\t\t_textureToCubeUV( cubemap, cubeUVRenderTarget );\n\t\t_applyPMREM( cubeUVRenderTarget );\n\t\t_cleanup( cubeUVRenderTarget );\n\n\t\treturn cubeUVRenderTarget;\n\n\t},\n\n\t/**\n\t * Pre-compiles the cubemap shader. You can get faster start-up by invoking this method during\n\t * your texture's network fetch for increased concurrency.\n\t */\n\tcompileCubemapShader: function () {\n\n\t\tif ( _cubemapShader == null ) {\n\n\t\t\t_cubemapShader = _getCubemapShader();\n\t\t\t_compileMaterial( _cubemapShader );\n\n\t\t}\n\n\t},\n\n\t/**\n\t * Pre-compiles the equirectangular shader. You can get faster start-up by invoking this method during\n\t * your texture's network fetch for increased concurrency.\n\t */\n\tcompileEquirectangularShader: function () {\n\n\t\tif ( _equirectShader == null ) {\n\n\t\t\t_equirectShader = _getEquirectShader();\n\t\t\t_compileMaterial( _equirectShader );\n\n\t\t}\n\n\t},\n\n\t/**\n\t * Disposes of the PMREMGenerator's internal memory. Note that PMREMGenerator is a static class,\n\t * so you should not need more than one PMREMGenerator object. If you do, calling dispose() on\n\t * one of them will cause any others to also become unusable.\n\t */\n\tdispose: function () {\n\n\t\t_blurMaterial.dispose();\n\n\t\tif ( _cubemapShader != null ) _cubemapShader.dispose();\n\t\tif ( _equirectShader != null ) _equirectShader.dispose();\n\n\t\tfor ( var i = 0; i < _lodPlanes.length; i ++ ) {\n\n\t\t\t_lodPlanes[ i ].dispose();\n\n\t\t}\n\n\t},\n\n};\n\nfunction _createPlanes() {\n\n\tvar _lodPlanes = [];\n\tvar _sizeLods = [];\n\tvar _sigmas = [];\n\n\tvar lod = LOD_MAX;\n\tfor ( var i = 0; i < TOTAL_LODS; i ++ ) {\n\n\t\tvar sizeLod = Math.pow( 2, lod );\n\t\t_sizeLods.push( sizeLod );\n\t\tvar sigma = 1.0 / sizeLod;\n\t\tif ( i > LOD_MAX - LOD_MIN ) {\n\n\t\t\tsigma = EXTRA_LOD_SIGMA[ i - LOD_MAX + LOD_MIN - 1 ];\n\n\t\t} else if ( i == 0 ) {\n\n\t\t\tsigma = 0;\n\n\t\t}\n\t\t_sigmas.push( sigma );\n\n\t\tvar texelSize = 1.0 / ( sizeLod - 1 );\n\t\tvar min = - texelSize / 2;\n\t\tvar max = 1 + texelSize / 2;\n\t\tvar uv1 = [ min, min, max, min, max, max, min, min, max, max, min, max ];\n\n\t\tvar cubeFaces = 6;\n\t\tvar vertices = 6;\n\t\tvar positionSize = 3;\n\t\tvar uvSize = 2;\n\t\tvar faceIndexSize = 1;\n\n\t\tvar position = new Float32Array( positionSize * vertices * cubeFaces );\n\t\tvar uv = new Float32Array( uvSize * vertices * cubeFaces );\n\t\tvar faceIndex = new Float32Array( faceIndexSize * vertices * cubeFaces );\n\n\t\tfor ( var face = 0; face < cubeFaces; face ++ ) {\n\n\t\t\tvar x = ( face % 3 ) * 2 / 3 - 1;\n\t\t\tvar y = face > 2 ? 0 : - 1;\n\t\t\tvar coordinates = [\n\t\t\t\tx, y, 0,\n\t\t\t\tx + 2 / 3, y, 0,\n\t\t\t\tx + 2 / 3, y + 1, 0,\n\t\t\t\tx, y, 0,\n\t\t\t\tx + 2 / 3, y + 1, 0,\n\t\t\t\tx, y + 1, 0\n\t\t\t];\n\t\t\tposition.set( coordinates, positionSize * vertices * face );\n\t\t\tuv.set( uv1, uvSize * vertices * face );\n\t\t\tvar fill = [ face, face, face, face, face, face ];\n\t\t\tfaceIndex.set( fill, faceIndexSize * vertices * face );\n\n\t\t}\n\t\tvar planes = new BufferGeometry();\n\t\tplanes.setAttribute( 'position', new BufferAttribute( position, positionSize ) );\n\t\tplanes.setAttribute( 'uv', new BufferAttribute( uv, uvSize ) );\n\t\tplanes.setAttribute( 'faceIndex', new BufferAttribute( faceIndex, faceIndexSize ) );\n\t\t_lodPlanes.push( planes );\n\n\t\tif ( lod > LOD_MIN ) {\n\n\t\t\tlod --;\n\n\t\t}\n\n\t}\n\treturn { _lodPlanes, _sizeLods, _sigmas };\n\n}\n\nfunction _allocateTargets( equirectangular ) {\n\n\tvar params = {\n\t\tmagFilter: NearestFilter,\n\t\tminFilter: NearestFilter,\n\t\tgenerateMipmaps: false,\n\t\ttype: equirectangular ? equirectangular.type : UnsignedByteType,\n\t\tformat: equirectangular ? equirectangular.format : RGBEFormat,\n\t\tencoding: equirectangular ? equirectangular.encoding : RGBEEncoding,\n\t\tdepthBuffer: false,\n\t\tstencilBuffer: false\n\t};\n\tvar cubeUVRenderTarget = _createRenderTarget( params );\n\tcubeUVRenderTarget.depthBuffer = equirectangular ? false : true;\n\t_pingPongRenderTarget = _createRenderTarget( params );\n\treturn cubeUVRenderTarget;\n\n}\n\nfunction _cleanup( outputTarget ) {\n\n\t_pingPongRenderTarget.dispose();\n\t_renderer.setRenderTarget( _oldTarget );\n\toutputTarget.scissorTest = false;\n\t// reset viewport and scissor\n\toutputTarget.setSize( outputTarget.width, outputTarget.height );\n\n}\n\nfunction _sceneToCubeUV( scene, near, far, cubeUVRenderTarget ) {\n\n\tvar fov = 90;\n\tvar aspect = 1;\n\tvar cubeCamera = new PerspectiveCamera( fov, aspect, near, far );\n\tvar upSign = [ 1, 1, 1, 1, - 1, 1 ];\n\tvar forwardSign = [ 1, 1, - 1, - 1, - 1, 1 ];\n\n\tvar outputEncoding = _renderer.outputEncoding;\n\tvar toneMapping = _renderer.toneMapping;\n\tvar toneMappingExposure = _renderer.toneMappingExposure;\n\tvar clearColor = _renderer.getClearColor();\n\tvar clearAlpha = _renderer.getClearAlpha();\n\n\t_renderer.toneMapping = LinearToneMapping;\n\t_renderer.toneMappingExposure = 1.0;\n\t_renderer.outputEncoding = LinearEncoding;\n\tscene.scale.z *= - 1;\n\n\tvar background = scene.background;\n\tif ( background && background.isColor ) {\n\n\t\tbackground.convertSRGBToLinear();\n\t\t// Convert linear to RGBE\n\t\tvar maxComponent = Math.max( background.r, background.g, background.b );\n\t\tvar fExp = Math.min( Math.max( Math.ceil( Math.log2( maxComponent ) ), - 128.0 ), 127.0 );\n\t\tbackground = background.multiplyScalar( Math.pow( 2.0, - fExp ) );\n\t\tvar alpha = ( fExp + 128.0 ) / 255.0;\n\t\t_renderer.setClearColor( background, alpha );\n\t\tscene.background = null;\n\n\t}\n\n\tfor ( var i = 0; i < 6; i ++ ) {\n\n\t\tvar col = i % 3;\n\t\tif ( col == 0 ) {\n\n\t\t\tcubeCamera.up.set( 0, upSign[ i ], 0 );\n\t\t\tcubeCamera.lookAt( forwardSign[ i ], 0, 0 );\n\n\t\t} else if ( col == 1 ) {\n\n\t\t\tcubeCamera.up.set( 0, 0, upSign[ i ] );\n\t\t\tcubeCamera.lookAt( 0, forwardSign[ i ], 0 );\n\n\t\t} else {\n\n\t\t\tcubeCamera.up.set( 0, upSign[ i ], 0 );\n\t\t\tcubeCamera.lookAt( 0, 0, forwardSign[ i ] );\n\n\t\t}\n\t\t_setViewport( cubeUVRenderTarget,\n\t\t\tcol * SIZE_MAX, i > 2 ? SIZE_MAX : 0, SIZE_MAX, SIZE_MAX );\n\t\t_renderer.setRenderTarget( cubeUVRenderTarget );\n\t\t_renderer.render( scene, cubeCamera );\n\n\t}\n\n\t_renderer.toneMapping = toneMapping;\n\t_renderer.toneMappingExposure = toneMappingExposure;\n\t_renderer.outputEncoding = outputEncoding;\n\t_renderer.setClearColor( clearColor, clearAlpha );\n\tscene.scale.z *= - 1;\n\n}\n\nfunction _textureToCubeUV( texture, cubeUVRenderTarget ) {\n\n\tvar scene = new Scene();\n\tif ( texture.isCubeTexture ) {\n\n\t\tif ( _cubemapShader == null ) {\n\n\t\t\t_cubemapShader = _getCubemapShader();\n\n\t\t}\n\n\t} else {\n\n\t\tif ( _equirectShader == null ) {\n\n\t\t\t_equirectShader = _getEquirectShader();\n\n\t\t}\n\n\t}\n\tvar material = texture.isCubeTexture ? _cubemapShader : _equirectShader;\n\tscene.add( new Mesh( _lodPlanes[ 0 ], material ) );\n\tvar uniforms = material.uniforms;\n\n\tuniforms[ 'envMap' ].value = texture;\n\tif ( ! texture.isCubeTexture ) {\n\n\t\tuniforms[ 'texelSize' ].value.set( 1.0 / texture.image.width, 1.0 / texture.image.height );\n\n\t}\n\tuniforms[ 'inputEncoding' ].value = ENCODINGS[ texture.encoding ];\n\tuniforms[ 'outputEncoding' ].value = ENCODINGS[ texture.encoding ];\n\n\t_setViewport( cubeUVRenderTarget, 0, 0, 3 * SIZE_MAX, 2 * SIZE_MAX );\n\t_renderer.setRenderTarget( cubeUVRenderTarget );\n\t_renderer.render( scene, _flatCamera );\n\n}\n\nfunction _compileMaterial( material ) {\n\n\tvar tmpScene = new Scene();\n\ttmpScene.add( new Mesh( _lodPlanes[ 0 ], material ) );\n\t_renderer.compile( tmpScene, _flatCamera );\n\n}\n\nfunction _createRenderTarget( params ) {\n\n\tvar cubeUVRenderTarget = new WebGLRenderTarget( 3 * SIZE_MAX, 3 * SIZE_MAX, params );\n\tcubeUVRenderTarget.texture.mapping = CubeUVReflectionMapping;\n\tcubeUVRenderTarget.texture.name = 'PMREM.cubeUv';\n\tcubeUVRenderTarget.scissorTest = true;\n\treturn cubeUVRenderTarget;\n\n}\n\nfunction _setViewport( target, x, y, width, height ) {\n\n\ttarget.viewport.set( x, y, width, height );\n\ttarget.scissor.set( x, y, width, height );\n\n}\n\nfunction _applyPMREM( cubeUVRenderTarget ) {\n\n\tvar autoClear = _renderer.autoClear;\n\t_renderer.autoClear = false;\n\n\tfor ( var i = 1; i < TOTAL_LODS; i ++ ) {\n\n\t\tvar sigma = Math.sqrt(\n\t\t\t_sigmas[ i ] * _sigmas[ i ] -\n\t\t_sigmas[ i - 1 ] * _sigmas[ i - 1 ] );\n\t\tvar poleAxis =\n\t\t_axisDirections[ ( i - 1 ) % _axisDirections.length ];\n\t\t_blur( cubeUVRenderTarget, i - 1, i, sigma, poleAxis );\n\n\t}\n\n\t_renderer.autoClear = autoClear;\n\n}\n\n/**\n * This is a two-pass Gaussian blur for a cubemap. Normally this is done\n * vertically and horizontally, but this breaks down on a cube. Here we apply\n * the blur latitudinally (around the poles), and then longitudinally (towards\n * the poles) to approximate the orthogonally-separable blur. It is least\n * accurate at the poles, but still does a decent job.\n */\nfunction _blur( cubeUVRenderTarget, lodIn, lodOut, sigma, poleAxis ) {\n\n\t_halfBlur(\n\t\tcubeUVRenderTarget,\n\t\t_pingPongRenderTarget,\n\t\tlodIn,\n\t\tlodOut,\n\t\tsigma,\n\t\t'latitudinal',\n\t\tpoleAxis );\n\n\t_halfBlur(\n\t\t_pingPongRenderTarget,\n\t\tcubeUVRenderTarget,\n\t\tlodOut,\n\t\tlodOut,\n\t\tsigma,\n\t\t'longitudinal',\n\t\tpoleAxis );\n\n}\n\nfunction _halfBlur( targetIn, targetOut, lodIn, lodOut, sigmaRadians, direction, poleAxis ) {\n\n\tif ( direction !== 'latitudinal' && direction !== 'longitudinal' ) {\n\n\t\tconsole.error(\n\t\t\t'blur direction must be either latitudinal or longitudinal!' );\n\n\t}\n\n\t// Number of standard deviations at which to cut off the discrete approximation.\n\tvar STANDARD_DEVIATIONS = 3;\n\n\tvar blurScene = new Scene();\n\tblurScene.add( new Mesh( _lodPlanes[ lodOut ], _blurMaterial ) );\n\tvar blurUniforms = _blurMaterial.uniforms;\n\n\tvar pixels = _sizeLods[ lodIn ] - 1;\n\tvar radiansPerPixel = isFinite( sigmaRadians ) ? Math.PI / ( 2 * pixels ) : 2 * Math.PI / ( 2 * MAX_SAMPLES - 1 );\n\tvar sigmaPixels = sigmaRadians / radiansPerPixel;\n\tvar samples = isFinite( sigmaRadians ) ? 1 + Math.floor( STANDARD_DEVIATIONS * sigmaPixels ) : MAX_SAMPLES;\n\n\tif ( samples > MAX_SAMPLES ) {\n\n\t\tconsole.warn( `sigmaRadians, ${\n\t\t\tsigmaRadians}, is too large and will clip, as it requested ${\n\t\t\tsamples} samples when the maximum is set to ${MAX_SAMPLES}` );\n\n\t}\n\n\tvar weights = [];\n\tvar sum = 0;\n\n\tfor ( var i = 0; i < MAX_SAMPLES; ++ i ) {\n\n\t\tvar x = i / sigmaPixels;\n\t\tvar weight = Math.exp( - x * x / 2 );\n\t\tweights.push( weight );\n\n\t\tif ( i == 0 ) {\n\n\t\t\tsum += weight;\n\n\t\t} else if ( i < samples ) {\n\n\t\t\tsum += 2 * weight;\n\n\t\t}\n\n\t}\n\n\tfor ( var i = 0; i < weights.length; i ++ ) {\n\n\t\tweights[ i ] = weights[ i ] / sum;\n\n\t}\n\n\tblurUniforms[ 'envMap' ].value = targetIn.texture;\n\tblurUniforms[ 'samples' ].value = samples;\n\tblurUniforms[ 'weights' ].value = weights;\n\tblurUniforms[ 'latitudinal' ].value = direction === 'latitudinal';\n\tif ( poleAxis ) {\n\n\t\tblurUniforms[ 'poleAxis' ].value = poleAxis;\n\n\t}\n\tblurUniforms[ 'dTheta' ].value = radiansPerPixel;\n\tblurUniforms[ 'mipInt' ].value = LOD_MAX - lodIn;\n\tblurUniforms[ 'inputEncoding' ].value = ENCODINGS[ targetIn.texture.encoding ];\n\tblurUniforms[ 'outputEncoding' ].value = ENCODINGS[ targetIn.texture.encoding ];\n\n\tvar outputSize = _sizeLods[ lodOut ];\n\tvar x = 3 * Math.max( 0, SIZE_MAX - 2 * outputSize );\n\tvar y = ( lodOut === 0 ? 0 : 2 * SIZE_MAX ) +\n\t2 * outputSize *\n\t\t( lodOut > LOD_MAX - LOD_MIN ? lodOut - LOD_MAX + LOD_MIN : 0 );\n\n\t_setViewport( targetOut, x, y, 3 * outputSize, 2 * outputSize );\n\t_renderer.setRenderTarget( targetOut );\n\t_renderer.render( blurScene, _flatCamera );\n\n}\n\nfunction _getBlurShader( maxSamples ) {\n\n\tvar weights = new Float32Array( maxSamples );\n\tvar poleAxis = new Vector3( 0, 1, 0 );\n\tvar shaderMaterial = new RawShaderMaterial( {\n\n\t\tdefines: { 'n': maxSamples },\n\n\t\tuniforms: {\n\t\t\t'envMap': { value: null },\n\t\t\t'samples': { value: 1 },\n\t\t\t'weights': { value: weights },\n\t\t\t'latitudinal': { value: false },\n\t\t\t'dTheta': { value: 0 },\n\t\t\t'mipInt': { value: 0 },\n\t\t\t'poleAxis': { value: poleAxis },\n\t\t\t'inputEncoding': { value: ENCODINGS[ LinearEncoding ] },\n\t\t\t'outputEncoding': { value: ENCODINGS[ LinearEncoding ] }\n\t\t},\n\n\t\tvertexShader: _getCommonVertexShader(),\n\n\t\tfragmentShader: `\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform sampler2D envMap;\nuniform int samples;\nuniform float weights[n];\nuniform bool latitudinal;\nuniform float dTheta;\nuniform float mipInt;\nuniform vec3 poleAxis;\n\n${_getEncodings()}\n\n#define ENVMAP_TYPE_CUBE_UV\n#include <cube_uv_reflection_fragment>\n\nvec3 getSample(float theta, vec3 axis) {\n\tfloat cosTheta = cos(theta);\n\t// Rodrigues' axis-angle rotation\n\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t+ cross(axis, vOutputDirection) * sin(theta)\n\t\t+ axis * dot(axis, vOutputDirection) * (1.0 - cosTheta);\n\treturn bilinearCubeUV(envMap, sampleDirection, mipInt);\n}\n\nvoid main() {\n\tvec3 axis = latitudinal ? poleAxis : cross(poleAxis, vOutputDirection);\n\tif (all(equal(axis, vec3(0.0))))\n\t\taxis = vec3(vOutputDirection.z, 0.0, - vOutputDirection.x);\n\taxis = normalize(axis);\n\tgl_FragColor = vec4(0.0);\n\tgl_FragColor.rgb += weights[0] * getSample(0.0, axis);\n\tfor (int i = 1; i < n; i++) {\n\t\tif (i >= samples)\n\t\t\tbreak;\n\t\tfloat theta = dTheta * float(i);\n\t\tgl_FragColor.rgb += weights[i] * getSample(-1.0 * theta, axis);\n\t\tgl_FragColor.rgb += weights[i] * getSample(theta, axis);\n\t}\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t`,\n\n\t\tblending: NoBlending,\n\t\tdepthTest: false,\n\t\tdepthWrite: false\n\n\t} );\n\n\tshaderMaterial.type = 'SphericalGaussianBlur';\n\n\treturn shaderMaterial;\n\n}\n\nfunction _getEquirectShader() {\n\n\tvar texelSize = new Vector2( 1, 1 );\n\tvar shaderMaterial = new RawShaderMaterial( {\n\n\t\tuniforms: {\n\t\t\t'envMap': { value: null },\n\t\t\t'texelSize': { value: texelSize },\n\t\t\t'inputEncoding': { value: ENCODINGS[ LinearEncoding ] },\n\t\t\t'outputEncoding': { value: ENCODINGS[ LinearEncoding ] }\n\t\t},\n\n\t\tvertexShader: _getCommonVertexShader(),\n\n\t\tfragmentShader: `\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform sampler2D envMap;\nuniform vec2 texelSize;\n\n${_getEncodings()}\n\n#define RECIPROCAL_PI 0.31830988618\n#define RECIPROCAL_PI2 0.15915494\n\nvoid main() {\n\tgl_FragColor = vec4(0.0);\n\tvec3 outputDirection = normalize(vOutputDirection);\n\tvec2 uv;\n\tuv.y = asin(clamp(outputDirection.y, -1.0, 1.0)) * RECIPROCAL_PI + 0.5;\n\tuv.x = atan(outputDirection.z, outputDirection.x) * RECIPROCAL_PI2 + 0.5;\n\tvec2 f = fract(uv / texelSize - 0.5);\n\tuv -= f * texelSize;\n\tvec3 tl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.x += texelSize.x;\n\tvec3 tr = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.y += texelSize.y;\n\tvec3 br = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tuv.x -= texelSize.x;\n\tvec3 bl = envMapTexelToLinear(texture2D(envMap, uv)).rgb;\n\tvec3 tm = mix(tl, tr, f.x);\n\tvec3 bm = mix(bl, br, f.x);\n\tgl_FragColor.rgb = mix(tm, bm, f.y);\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t`,\n\n\t\tblending: NoBlending,\n\t\tdepthTest: false,\n\t\tdepthWrite: false\n\n\t} );\n\n\tshaderMaterial.type = 'EquirectangularToCubeUV';\n\n\treturn shaderMaterial;\n\n}\n\nfunction _getCubemapShader() {\n\n\tvar shaderMaterial = new RawShaderMaterial( {\n\n\t\tuniforms: {\n\t\t\t'envMap': { value: null },\n\t\t\t'inputEncoding': { value: ENCODINGS[ LinearEncoding ] },\n\t\t\t'outputEncoding': { value: ENCODINGS[ LinearEncoding ] }\n\t\t},\n\n\t\tvertexShader: _getCommonVertexShader(),\n\n\t\tfragmentShader: `\nprecision mediump float;\nprecision mediump int;\nvarying vec3 vOutputDirection;\nuniform samplerCube envMap;\n\n${_getEncodings()}\n\nvoid main() {\n\tgl_FragColor = vec4(0.0);\n\tgl_FragColor.rgb = envMapTexelToLinear(textureCube(envMap, vec3( - vOutputDirection.x, vOutputDirection.yz ))).rgb;\n\tgl_FragColor = linearToOutputTexel(gl_FragColor);\n}\n\t\t`,\n\n\t\tblending: NoBlending,\n\t\tdepthTest: false,\n\t\tdepthWrite: false\n\n\t} );\n\n\tshaderMaterial.type = 'CubemapToCubeUV';\n\n\treturn shaderMaterial;\n\n}\n\nfunction _getCommonVertexShader() {\n\n\treturn `\nprecision mediump float;\nprecision mediump int;\nattribute vec3 position;\nattribute vec2 uv;\nattribute float faceIndex;\nvarying vec3 vOutputDirection;\nvec3 getDirection(vec2 uv, float face) {\n\tuv = 2.0 * uv - 1.0;\n\tvec3 direction = vec3(uv, 1.0);\n\tif (face == 0.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.z *= -1.0;\n\t} else if (face == 1.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.z *= -1.0;\n\t} else if (face == 3.0) {\n\t\tdirection = direction.zyx;\n\t\tdirection.x *= -1.0;\n\t} else if (face == 4.0) {\n\t\tdirection = direction.xzy;\n\t\tdirection.y *= -1.0;\n\t} else if (face == 5.0) {\n\t\tdirection.xz *= -1.0;\n\t}\n\treturn direction;\n}\nvoid main() {\n\tvOutputDirection = getDirection(uv, faceIndex);\n\tgl_Position = vec4( position, 1.0 );\n}\n\t`;\n\n}\n\nfunction _getEncodings() {\n\n\treturn `\nuniform int inputEncoding;\nuniform int outputEncoding;\n\n#include <encodings_pars_fragment>\n\nvec4 inputTexelToLinear(vec4 value){\n\tif(inputEncoding == 0){\n\t\treturn value;\n\t}else if(inputEncoding == 1){\n\t\treturn sRGBToLinear(value);\n\t}else if(inputEncoding == 2){\n\t\treturn RGBEToLinear(value);\n\t}else if(inputEncoding == 3){\n\t\treturn RGBMToLinear(value, 7.0);\n\t}else if(inputEncoding == 4){\n\t\treturn RGBMToLinear(value, 16.0);\n\t}else if(inputEncoding == 5){\n\t\treturn RGBDToLinear(value, 256.0);\n\t}else{\n\t\treturn GammaToLinear(value, 2.2);\n\t}\n}\n\nvec4 linearToOutputTexel(vec4 value){\n\tif(outputEncoding == 0){\n\t\treturn value;\n\t}else if(outputEncoding == 1){\n\t\treturn LinearTosRGB(value);\n\t}else if(outputEncoding == 2){\n\t\treturn LinearToRGBE(value);\n\t}else if(outputEncoding == 3){\n\t\treturn LinearToRGBM(value, 7.0);\n\t}else if(outputEncoding == 4){\n\t\treturn LinearToRGBM(value, 16.0);\n\t}else if(outputEncoding == 5){\n\t\treturn LinearToRGBD(value, 256.0);\n\t}else{\n\t\treturn LinearToGamma(value, 2.2);\n\t}\n}\n\nvec4 envMapTexelToLinear(vec4 color) {\n\treturn inputTexelToLinear(color);\n}\n\t`;\n\n}\n\nexport { PMREMGenerator };\n","import { MathUtils } from './MathUtils.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar _colorKeywords = { 'aliceblue': 0xF0F8FF, 'antiquewhite': 0xFAEBD7, 'aqua': 0x00FFFF, 'aquamarine': 0x7FFFD4, 'azure': 0xF0FFFF,\n\t'beige': 0xF5F5DC, 'bisque': 0xFFE4C4, 'black': 0x000000, 'blanchedalmond': 0xFFEBCD, 'blue': 0x0000FF, 'blueviolet': 0x8A2BE2,\n\t'brown': 0xA52A2A, 'burlywood': 0xDEB887, 'cadetblue': 0x5F9EA0, 'chartreuse': 0x7FFF00, 'chocolate': 0xD2691E, 'coral': 0xFF7F50,\n\t'cornflowerblue': 0x6495ED, 'cornsilk': 0xFFF8DC, 'crimson': 0xDC143C, 'cyan': 0x00FFFF, 'darkblue': 0x00008B, 'darkcyan': 0x008B8B,\n\t'darkgoldenrod': 0xB8860B, 'darkgray': 0xA9A9A9, 'darkgreen': 0x006400, 'darkgrey': 0xA9A9A9, 'darkkhaki': 0xBDB76B, 'darkmagenta': 0x8B008B,\n\t'darkolivegreen': 0x556B2F, 'darkorange': 0xFF8C00, 'darkorchid': 0x9932CC, 'darkred': 0x8B0000, 'darksalmon': 0xE9967A, 'darkseagreen': 0x8FBC8F,\n\t'darkslateblue': 0x483D8B, 'darkslategray': 0x2F4F4F, 'darkslategrey': 0x2F4F4F, 'darkturquoise': 0x00CED1, 'darkviolet': 0x9400D3,\n\t'deeppink': 0xFF1493, 'deepskyblue': 0x00BFFF, 'dimgray': 0x696969, 'dimgrey': 0x696969, 'dodgerblue': 0x1E90FF, 'firebrick': 0xB22222,\n\t'floralwhite': 0xFFFAF0, 'forestgreen': 0x228B22, 'fuchsia': 0xFF00FF, 'gainsboro': 0xDCDCDC, 'ghostwhite': 0xF8F8FF, 'gold': 0xFFD700,\n\t'goldenrod': 0xDAA520, 'gray': 0x808080, 'green': 0x008000, 'greenyellow': 0xADFF2F, 'grey': 0x808080, 'honeydew': 0xF0FFF0, 'hotpink': 0xFF69B4,\n\t'indianred': 0xCD5C5C, 'indigo': 0x4B0082, 'ivory': 0xFFFFF0, 'khaki': 0xF0E68C, 'lavender': 0xE6E6FA, 'lavenderblush': 0xFFF0F5, 'lawngreen': 0x7CFC00,\n\t'lemonchiffon': 0xFFFACD, 'lightblue': 0xADD8E6, 'lightcoral': 0xF08080, 'lightcyan': 0xE0FFFF, 'lightgoldenrodyellow': 0xFAFAD2, 'lightgray': 0xD3D3D3,\n\t'lightgreen': 0x90EE90, 'lightgrey': 0xD3D3D3, 'lightpink': 0xFFB6C1, 'lightsalmon': 0xFFA07A, 'lightseagreen': 0x20B2AA, 'lightskyblue': 0x87CEFA,\n\t'lightslategray': 0x778899, 'lightslategrey': 0x778899, 'lightsteelblue': 0xB0C4DE, 'lightyellow': 0xFFFFE0, 'lime': 0x00FF00, 'limegreen': 0x32CD32,\n\t'linen': 0xFAF0E6, 'magenta': 0xFF00FF, 'maroon': 0x800000, 'mediumaquamarine': 0x66CDAA, 'mediumblue': 0x0000CD, 'mediumorchid': 0xBA55D3,\n\t'mediumpurple': 0x9370DB, 'mediumseagreen': 0x3CB371, 'mediumslateblue': 0x7B68EE, 'mediumspringgreen': 0x00FA9A, 'mediumturquoise': 0x48D1CC,\n\t'mediumvioletred': 0xC71585, 'midnightblue': 0x191970, 'mintcream': 0xF5FFFA, 'mistyrose': 0xFFE4E1, 'moccasin': 0xFFE4B5, 'navajowhite': 0xFFDEAD,\n\t'navy': 0x000080, 'oldlace': 0xFDF5E6, 'olive': 0x808000, 'olivedrab': 0x6B8E23, 'orange': 0xFFA500, 'orangered': 0xFF4500, 'orchid': 0xDA70D6,\n\t'palegoldenrod': 0xEEE8AA, 'palegreen': 0x98FB98, 'paleturquoise': 0xAFEEEE, 'palevioletred': 0xDB7093, 'papayawhip': 0xFFEFD5, 'peachpuff': 0xFFDAB9,\n\t'peru': 0xCD853F, 'pink': 0xFFC0CB, 'plum': 0xDDA0DD, 'powderblue': 0xB0E0E6, 'purple': 0x800080, 'rebeccapurple': 0x663399, 'red': 0xFF0000, 'rosybrown': 0xBC8F8F,\n\t'royalblue': 0x4169E1, 'saddlebrown': 0x8B4513, 'salmon': 0xFA8072, 'sandybrown': 0xF4A460, 'seagreen': 0x2E8B57, 'seashell': 0xFFF5EE,\n\t'sienna': 0xA0522D, 'silver': 0xC0C0C0, 'skyblue': 0x87CEEB, 'slateblue': 0x6A5ACD, 'slategray': 0x708090, 'slategrey': 0x708090, 'snow': 0xFFFAFA,\n\t'springgreen': 0x00FF7F, 'steelblue': 0x4682B4, 'tan': 0xD2B48C, 'teal': 0x008080, 'thistle': 0xD8BFD8, 'tomato': 0xFF6347, 'turquoise': 0x40E0D0,\n\t'violet': 0xEE82EE, 'wheat': 0xF5DEB3, 'white': 0xFFFFFF, 'whitesmoke': 0xF5F5F5, 'yellow': 0xFFFF00, 'yellowgreen': 0x9ACD32 };\n\nvar _hslA = { h: 0, s: 0, l: 0 };\nvar _hslB = { h: 0, s: 0, l: 0 };\n\nfunction Color( r, g, b ) {\n\n\tif ( g === undefined && b === undefined ) {\n\n\t\t// r is THREE.Color, hex or string\n\t\treturn this.set( r );\n\n\t}\n\n\treturn this.setRGB( r, g, b );\n\n}\n\nfunction hue2rgb( p, q, t ) {\n\n\tif ( t < 0 ) t += 1;\n\tif ( t > 1 ) t -= 1;\n\tif ( t < 1 / 6 ) return p + ( q - p ) * 6 * t;\n\tif ( t < 1 / 2 ) return q;\n\tif ( t < 2 / 3 ) return p + ( q - p ) * 6 * ( 2 / 3 - t );\n\treturn p;\n\n}\n\nfunction SRGBToLinear( c ) {\n\n\treturn ( c < 0.04045 ) ? c * 0.0773993808 : Math.pow( c * 0.9478672986 + 0.0521327014, 2.4 );\n\n}\n\nfunction LinearToSRGB( c ) {\n\n\treturn ( c < 0.0031308 ) ? c * 12.92 : 1.055 * ( Math.pow( c, 0.41666 ) ) - 0.055;\n\n}\n\nObject.assign( Color.prototype, {\n\n\tisColor: true,\n\n\tr: 1, g: 1, b: 1,\n\n\tset: function ( value ) {\n\n\t\tif ( value && value.isColor ) {\n\n\t\t\tthis.copy( value );\n\n\t\t} else if ( typeof value === 'number' ) {\n\n\t\t\tthis.setHex( value );\n\n\t\t} else if ( typeof value === 'string' ) {\n\n\t\t\tthis.setStyle( value );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.r = scalar;\n\t\tthis.g = scalar;\n\t\tthis.b = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetHex: function ( hex ) {\n\n\t\thex = Math.floor( hex );\n\n\t\tthis.r = ( hex >> 16 & 255 ) / 255;\n\t\tthis.g = ( hex >> 8 & 255 ) / 255;\n\t\tthis.b = ( hex & 255 ) / 255;\n\n\t\treturn this;\n\n\t},\n\n\tsetRGB: function ( r, g, b ) {\n\n\t\tthis.r = r;\n\t\tthis.g = g;\n\t\tthis.b = b;\n\n\t\treturn this;\n\n\t},\n\n\tsetHSL: function ( h, s, l ) {\n\n\t\t// h,s,l ranges are in 0.0 - 1.0\n\t\th = MathUtils.euclideanModulo( h, 1 );\n\t\ts = MathUtils.clamp( s, 0, 1 );\n\t\tl = MathUtils.clamp( l, 0, 1 );\n\n\t\tif ( s === 0 ) {\n\n\t\t\tthis.r = this.g = this.b = l;\n\n\t\t} else {\n\n\t\t\tvar p = l <= 0.5 ? l * ( 1 + s ) : l + s - ( l * s );\n\t\t\tvar q = ( 2 * l ) - p;\n\n\t\t\tthis.r = hue2rgb( q, p, h + 1 / 3 );\n\t\t\tthis.g = hue2rgb( q, p, h );\n\t\t\tthis.b = hue2rgb( q, p, h - 1 / 3 );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetStyle: function ( style ) {\n\n\t\tfunction handleAlpha( string ) {\n\n\t\t\tif ( string === undefined ) return;\n\n\t\t\tif ( parseFloat( string ) < 1 ) {\n\n\t\t\t\tconsole.warn( 'THREE.Color: Alpha component of ' + style + ' will be ignored.' );\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tvar m;\n\n\t\tif ( m = /^((?:rgb|hsl)a?)\\(\\s*([^\\)]*)\\)/.exec( style ) ) {\n\n\t\t\t// rgb / hsl\n\n\t\t\tvar color;\n\t\t\tvar name = m[ 1 ];\n\t\t\tvar components = m[ 2 ];\n\n\t\t\tswitch ( name ) {\n\n\t\t\t\tcase 'rgb':\n\t\t\t\tcase 'rgba':\n\n\t\t\t\t\tif ( color = /^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// rgb(255,0,0) rgba(255,0,0,0.5)\n\t\t\t\t\t\tthis.r = Math.min( 255, parseInt( color[ 1 ], 10 ) ) / 255;\n\t\t\t\t\t\tthis.g = Math.min( 255, parseInt( color[ 2 ], 10 ) ) / 255;\n\t\t\t\t\t\tthis.b = Math.min( 255, parseInt( color[ 3 ], 10 ) ) / 255;\n\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\n\n\t\t\t\t\t\treturn this;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( color = /^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// rgb(100%,0%,0%) rgba(100%,0%,0%,0.5)\n\t\t\t\t\t\tthis.r = Math.min( 100, parseInt( color[ 1 ], 10 ) ) / 100;\n\t\t\t\t\t\tthis.g = Math.min( 100, parseInt( color[ 2 ], 10 ) ) / 100;\n\t\t\t\t\t\tthis.b = Math.min( 100, parseInt( color[ 3 ], 10 ) ) / 100;\n\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\n\n\t\t\t\t\t\treturn this;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'hsl':\n\t\t\t\tcase 'hsla':\n\n\t\t\t\t\tif ( color = /^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// hsl(120,50%,50%) hsla(120,50%,50%,0.5)\n\t\t\t\t\t\tvar h = parseFloat( color[ 1 ] ) / 360;\n\t\t\t\t\t\tvar s = parseInt( color[ 2 ], 10 ) / 100;\n\t\t\t\t\t\tvar l = parseInt( color[ 3 ], 10 ) / 100;\n\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\n\n\t\t\t\t\t\treturn this.setHSL( h, s, l );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t} else if ( m = /^\\#([A-Fa-f0-9]+)$/.exec( style ) ) {\n\n\t\t\t// hex color\n\n\t\t\tvar hex = m[ 1 ];\n\t\t\tvar size = hex.length;\n\n\t\t\tif ( size === 3 ) {\n\n\t\t\t\t// #ff0\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 0 ), 16 ) / 255;\n\t\t\t\tthis.g = parseInt( hex.charAt( 1 ) + hex.charAt( 1 ), 16 ) / 255;\n\t\t\t\tthis.b = parseInt( hex.charAt( 2 ) + hex.charAt( 2 ), 16 ) / 255;\n\n\t\t\t\treturn this;\n\n\t\t\t} else if ( size === 6 ) {\n\n\t\t\t\t// #ff0000\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 1 ), 16 ) / 255;\n\t\t\t\tthis.g = parseInt( hex.charAt( 2 ) + hex.charAt( 3 ), 16 ) / 255;\n\t\t\t\tthis.b = parseInt( hex.charAt( 4 ) + hex.charAt( 5 ), 16 ) / 255;\n\n\t\t\t\treturn this;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( style && style.length > 0 ) {\n\n\t\t\treturn this.setColorName( style );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetColorName: function ( style ) {\n\n\t\t// color keywords\n\t\tvar hex = _colorKeywords[ style ];\n\n\t\tif ( hex !== undefined ) {\n\n\t\t\t// red\n\t\t\tthis.setHex( hex );\n\n\t\t} else {\n\n\t\t\t// unknown color\n\t\t\tconsole.warn( 'THREE.Color: Unknown color ' + style );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.r, this.g, this.b );\n\n\t},\n\n\tcopy: function ( color ) {\n\n\t\tthis.r = color.r;\n\t\tthis.g = color.g;\n\t\tthis.b = color.b;\n\n\t\treturn this;\n\n\t},\n\n\tcopyGammaToLinear: function ( color, gammaFactor ) {\n\n\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\n\n\t\tthis.r = Math.pow( color.r, gammaFactor );\n\t\tthis.g = Math.pow( color.g, gammaFactor );\n\t\tthis.b = Math.pow( color.b, gammaFactor );\n\n\t\treturn this;\n\n\t},\n\n\tcopyLinearToGamma: function ( color, gammaFactor ) {\n\n\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\n\n\t\tvar safeInverse = ( gammaFactor > 0 ) ? ( 1.0 / gammaFactor ) : 1.0;\n\n\t\tthis.r = Math.pow( color.r, safeInverse );\n\t\tthis.g = Math.pow( color.g, safeInverse );\n\t\tthis.b = Math.pow( color.b, safeInverse );\n\n\t\treturn this;\n\n\t},\n\n\tconvertGammaToLinear: function ( gammaFactor ) {\n\n\t\tthis.copyGammaToLinear( this, gammaFactor );\n\n\t\treturn this;\n\n\t},\n\n\tconvertLinearToGamma: function ( gammaFactor ) {\n\n\t\tthis.copyLinearToGamma( this, gammaFactor );\n\n\t\treturn this;\n\n\t},\n\n\tcopySRGBToLinear: function ( color ) {\n\n\t\tthis.r = SRGBToLinear( color.r );\n\t\tthis.g = SRGBToLinear( color.g );\n\t\tthis.b = SRGBToLinear( color.b );\n\n\t\treturn this;\n\n\t},\n\n\tcopyLinearToSRGB: function ( color ) {\n\n\t\tthis.r = LinearToSRGB( color.r );\n\t\tthis.g = LinearToSRGB( color.g );\n\t\tthis.b = LinearToSRGB( color.b );\n\n\t\treturn this;\n\n\t},\n\n\tconvertSRGBToLinear: function () {\n\n\t\tthis.copySRGBToLinear( this );\n\n\t\treturn this;\n\n\t},\n\n\tconvertLinearToSRGB: function () {\n\n\t\tthis.copyLinearToSRGB( this );\n\n\t\treturn this;\n\n\t},\n\n\tgetHex: function () {\n\n\t\treturn ( this.r * 255 ) << 16 ^ ( this.g * 255 ) << 8 ^ ( this.b * 255 ) << 0;\n\n\t},\n\n\tgetHexString: function () {\n\n\t\treturn ( '000000' + this.getHex().toString( 16 ) ).slice( - 6 );\n\n\t},\n\n\tgetHSL: function ( target ) {\n\n\t\t// h,s,l ranges are in 0.0 - 1.0\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Color: .getHSL() target is now required' );\n\t\t\ttarget = { h: 0, s: 0, l: 0 };\n\n\t\t}\n\n\t\tvar r = this.r, g = this.g, b = this.b;\n\n\t\tvar max = Math.max( r, g, b );\n\t\tvar min = Math.min( r, g, b );\n\n\t\tvar hue, saturation;\n\t\tvar lightness = ( min + max ) / 2.0;\n\n\t\tif ( min === max ) {\n\n\t\t\thue = 0;\n\t\t\tsaturation = 0;\n\n\t\t} else {\n\n\t\t\tvar delta = max - min;\n\n\t\t\tsaturation = lightness <= 0.5 ? delta / ( max + min ) : delta / ( 2 - max - min );\n\n\t\t\tswitch ( max ) {\n\n\t\t\t\tcase r: hue = ( g - b ) / delta + ( g < b ? 6 : 0 ); break;\n\t\t\t\tcase g: hue = ( b - r ) / delta + 2; break;\n\t\t\t\tcase b: hue = ( r - g ) / delta + 4; break;\n\n\t\t\t}\n\n\t\t\thue /= 6;\n\n\t\t}\n\n\t\ttarget.h = hue;\n\t\ttarget.s = saturation;\n\t\ttarget.l = lightness;\n\n\t\treturn target;\n\n\t},\n\n\tgetStyle: function () {\n\n\t\treturn 'rgb(' + ( ( this.r * 255 ) | 0 ) + ',' + ( ( this.g * 255 ) | 0 ) + ',' + ( ( this.b * 255 ) | 0 ) + ')';\n\n\t},\n\n\toffsetHSL: function ( h, s, l ) {\n\n\t\tthis.getHSL( _hslA );\n\n\t\t_hslA.h += h; _hslA.s += s; _hslA.l += l;\n\n\t\tthis.setHSL( _hslA.h, _hslA.s, _hslA.l );\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( color ) {\n\n\t\tthis.r += color.r;\n\t\tthis.g += color.g;\n\t\tthis.b += color.b;\n\n\t\treturn this;\n\n\t},\n\n\taddColors: function ( color1, color2 ) {\n\n\t\tthis.r = color1.r + color2.r;\n\t\tthis.g = color1.g + color2.g;\n\t\tthis.b = color1.b + color2.b;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.r += s;\n\t\tthis.g += s;\n\t\tthis.b += s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( color ) {\n\n\t\tthis.r = Math.max( 0, this.r - color.r );\n\t\tthis.g = Math.max( 0, this.g - color.g );\n\t\tthis.b = Math.max( 0, this.b - color.b );\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( color ) {\n\n\t\tthis.r *= color.r;\n\t\tthis.g *= color.g;\n\t\tthis.b *= color.b;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tthis.r *= s;\n\t\tthis.g *= s;\n\t\tthis.b *= s;\n\n\t\treturn this;\n\n\t},\n\n\tlerp: function ( color, alpha ) {\n\n\t\tthis.r += ( color.r - this.r ) * alpha;\n\t\tthis.g += ( color.g - this.g ) * alpha;\n\t\tthis.b += ( color.b - this.b ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tlerpHSL: function ( color, alpha ) {\n\n\t\tthis.getHSL( _hslA );\n\t\tcolor.getHSL( _hslB );\n\n\t\tvar h = MathUtils.lerp( _hslA.h, _hslB.h, alpha );\n\t\tvar s = MathUtils.lerp( _hslA.s, _hslB.s, alpha );\n\t\tvar l = MathUtils.lerp( _hslA.l, _hslB.l, alpha );\n\n\t\tthis.setHSL( h, s, l );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( c ) {\n\n\t\treturn ( c.r === this.r ) && ( c.g === this.g ) && ( c.b === this.b );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.r = array[ offset ];\n\t\tthis.g = array[ offset + 1 ];\n\t\tthis.b = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.r;\n\t\tarray[ offset + 1 ] = this.g;\n\t\tarray[ offset + 2 ] = this.b;\n\n\t\treturn array;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\treturn this.getHex();\n\n\t}\n\n} );\n\nColor.NAMES = _colorKeywords;\n\nexport { Color };\n","/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nimport { Texture } from './Texture.js';\nimport { NearestFilter } from '../constants.js';\n\nfunction DataTexture( data, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding ) {\n\n\tTexture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\tthis.image = { data: data || null, width: width || 1, height: height || 1 };\n\n\tthis.magFilter = magFilter !== undefined ? magFilter : NearestFilter;\n\tthis.minFilter = minFilter !== undefined ? minFilter : NearestFilter;\n\n\tthis.generateMipmaps = false;\n\tthis.flipY = false;\n\tthis.unpackAlignment = 1;\n\n\tthis.needsUpdate = true;\n\n}\n\nDataTexture.prototype = Object.create( Texture.prototype );\nDataTexture.prototype.constructor = DataTexture;\n\nDataTexture.prototype.isDataTexture = true;\n\n\nexport { DataTexture };\n","import { Material } from './Material.js';\nimport { Color } from '../math/Color.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n *\n * parameters = {\n *  color: <hex>,\n *  opacity: <float>,\n *  map: new THREE.Texture( <Image> ),\n *  alphaMap: new THREE.Texture( <Image> ),\n *\n *  size: <float>,\n *  sizeAttenuation: <bool>\n *\n *  morphTargets: <bool>\n * }\n */\n\nfunction PointsMaterial( parameters ) {\n\n\tMaterial.call( this );\n\n\tthis.type = 'PointsMaterial';\n\n\tthis.color = new Color( 0xffffff );\n\n\tthis.map = null;\n\n\tthis.alphaMap = null;\n\n\tthis.size = 1;\n\tthis.sizeAttenuation = true;\n\n\tthis.morphTargets = false;\n\n\tthis.setValues( parameters );\n\n}\n\nPointsMaterial.prototype = Object.create( Material.prototype );\nPointsMaterial.prototype.constructor = PointsMaterial;\n\nPointsMaterial.prototype.isPointsMaterial = true;\n\nPointsMaterial.prototype.copy = function ( source ) {\n\n\tMaterial.prototype.copy.call( this, source );\n\n\tthis.color.copy( source.color );\n\n\tthis.map = source.map;\n\n\tthis.alphaMap = source.alphaMap;\n\n\tthis.size = source.size;\n\tthis.sizeAttenuation = source.sizeAttenuation;\n\n\tthis.morphTargets = source.morphTargets;\n\n\treturn this;\n\n};\n\n\nexport { PointsMaterial };\n","import { Curve } from './Curve.js';\nimport * as Curves from '../curves/Curves.js';\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n *\n **/\n\n/**************************************************************\n *\tCurved Path - a curve path is simply a array of connected\n *  curves, but retains the api of a curve\n **************************************************************/\n\nfunction CurvePath() {\n\n\tCurve.call( this );\n\n\tthis.type = 'CurvePath';\n\n\tthis.curves = [];\n\tthis.autoClose = false; // Automatically closes the path\n\n}\n\nCurvePath.prototype = Object.assign( Object.create( Curve.prototype ), {\n\n\tconstructor: CurvePath,\n\n\tadd: function ( curve ) {\n\n\t\tthis.curves.push( curve );\n\n\t},\n\n\tclosePath: function () {\n\n\t\t// Add a line curve if start and end of lines are not connected\n\t\tvar startPoint = this.curves[ 0 ].getPoint( 0 );\n\t\tvar endPoint = this.curves[ this.curves.length - 1 ].getPoint( 1 );\n\n\t\tif ( ! startPoint.equals( endPoint ) ) {\n\n\t\t\tthis.curves.push( new Curves[ 'LineCurve' ]( endPoint, startPoint ) );\n\n\t\t}\n\n\t},\n\n\t// To get accurate point with reference to\n\t// entire path distance at time t,\n\t// following has to be done:\n\n\t// 1. Length of each sub path have to be known\n\t// 2. Locate and identify type of curve\n\t// 3. Get t for the curve\n\t// 4. Return curve.getPointAt(t')\n\n\tgetPoint: function ( t ) {\n\n\t\tvar d = t * this.getLength();\n\t\tvar curveLengths = this.getCurveLengths();\n\t\tvar i = 0;\n\n\t\t// To think about boundaries points.\n\n\t\twhile ( i < curveLengths.length ) {\n\n\t\t\tif ( curveLengths[ i ] >= d ) {\n\n\t\t\t\tvar diff = curveLengths[ i ] - d;\n\t\t\t\tvar curve = this.curves[ i ];\n\n\t\t\t\tvar segmentLength = curve.getLength();\n\t\t\t\tvar u = segmentLength === 0 ? 0 : 1 - diff / segmentLength;\n\n\t\t\t\treturn curve.getPointAt( u );\n\n\t\t\t}\n\n\t\t\ti ++;\n\n\t\t}\n\n\t\treturn null;\n\n\t\t// loop where sum != 0, sum > d , sum+1 <d\n\n\t},\n\n\t// We cannot use the default THREE.Curve getPoint() with getLength() because in\n\t// THREE.Curve, getLength() depends on getPoint() but in THREE.CurvePath\n\t// getPoint() depends on getLength\n\n\tgetLength: function () {\n\n\t\tvar lens = this.getCurveLengths();\n\t\treturn lens[ lens.length - 1 ];\n\n\t},\n\n\t// cacheLengths must be recalculated.\n\tupdateArcLengths: function () {\n\n\t\tthis.needsUpdate = true;\n\t\tthis.cacheLengths = null;\n\t\tthis.getCurveLengths();\n\n\t},\n\n\t// Compute lengths and cache them\n\t// We cannot overwrite getLengths() because UtoT mapping uses it.\n\n\tgetCurveLengths: function () {\n\n\t\t// We use cache values if curves and cache array are same length\n\n\t\tif ( this.cacheLengths && this.cacheLengths.length === this.curves.length ) {\n\n\t\t\treturn this.cacheLengths;\n\n\t\t}\n\n\t\t// Get length of sub-curve\n\t\t// Push sums into cached array\n\n\t\tvar lengths = [], sums = 0;\n\n\t\tfor ( var i = 0, l = this.curves.length; i < l; i ++ ) {\n\n\t\t\tsums += this.curves[ i ].getLength();\n\t\t\tlengths.push( sums );\n\n\t\t}\n\n\t\tthis.cacheLengths = lengths;\n\n\t\treturn lengths;\n\n\t},\n\n\tgetSpacedPoints: function ( divisions ) {\n\n\t\tif ( divisions === undefined ) divisions = 40;\n\n\t\tvar points = [];\n\n\t\tfor ( var i = 0; i <= divisions; i ++ ) {\n\n\t\t\tpoints.push( this.getPoint( i / divisions ) );\n\n\t\t}\n\n\t\tif ( this.autoClose ) {\n\n\t\t\tpoints.push( points[ 0 ] );\n\n\t\t}\n\n\t\treturn points;\n\n\t},\n\n\tgetPoints: function ( divisions ) {\n\n\t\tdivisions = divisions || 12;\n\n\t\tvar points = [], last;\n\n\t\tfor ( var i = 0, curves = this.curves; i < curves.length; i ++ ) {\n\n\t\t\tvar curve = curves[ i ];\n\t\t\tvar resolution = ( curve && curve.isEllipseCurve ) ? divisions * 2\n\t\t\t\t: ( curve && ( curve.isLineCurve || curve.isLineCurve3 ) ) ? 1\n\t\t\t\t\t: ( curve && curve.isSplineCurve ) ? divisions * curve.points.length\n\t\t\t\t\t\t: divisions;\n\n\t\t\tvar pts = curve.getPoints( resolution );\n\n\t\t\tfor ( var j = 0; j < pts.length; j ++ ) {\n\n\t\t\t\tvar point = pts[ j ];\n\n\t\t\t\tif ( last && last.equals( point ) ) continue; // ensures no consecutive points are duplicates\n\n\t\t\t\tpoints.push( point );\n\t\t\t\tlast = point;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.autoClose && points.length > 1 && ! points[ points.length - 1 ].equals( points[ 0 ] ) ) {\n\n\t\t\tpoints.push( points[ 0 ] );\n\n\t\t}\n\n\t\treturn points;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tCurve.prototype.copy.call( this, source );\n\n\t\tthis.curves = [];\n\n\t\tfor ( var i = 0, l = source.curves.length; i < l; i ++ ) {\n\n\t\t\tvar curve = source.curves[ i ];\n\n\t\t\tthis.curves.push( curve.clone() );\n\n\t\t}\n\n\t\tthis.autoClose = source.autoClose;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar data = Curve.prototype.toJSON.call( this );\n\n\t\tdata.autoClose = this.autoClose;\n\t\tdata.curves = [];\n\n\t\tfor ( var i = 0, l = this.curves.length; i < l; i ++ ) {\n\n\t\t\tvar curve = this.curves[ i ];\n\t\t\tdata.curves.push( curve.toJSON() );\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tfromJSON: function ( json ) {\n\n\t\tCurve.prototype.fromJSON.call( this, json );\n\n\t\tthis.autoClose = json.autoClose;\n\t\tthis.curves = [];\n\n\t\tfor ( var i = 0, l = json.curves.length; i < l; i ++ ) {\n\n\t\t\tvar curve = json.curves[ i ];\n\t\t\tthis.curves.push( new Curves[ curve.type ]().fromJSON( curve ) );\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { CurvePath };\n","import { Vector2 } from '../../math/Vector2.js';\nimport { CurvePath } from './CurvePath.js';\nimport { EllipseCurve } from '../curves/EllipseCurve.js';\nimport { SplineCurve } from '../curves/SplineCurve.js';\nimport { CubicBezierCurve } from '../curves/CubicBezierCurve.js';\nimport { QuadraticBezierCurve } from '../curves/QuadraticBezierCurve.js';\nimport { LineCurve } from '../curves/LineCurve.js';\n\n/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * Creates free form 2d path using series of points, lines or curves.\n **/\n\nfunction Path( points ) {\n\n\tCurvePath.call( this );\n\n\tthis.type = 'Path';\n\n\tthis.currentPoint = new Vector2();\n\n\tif ( points ) {\n\n\t\tthis.setFromPoints( points );\n\n\t}\n\n}\n\nPath.prototype = Object.assign( Object.create( CurvePath.prototype ), {\n\n\tconstructor: Path,\n\n\tsetFromPoints: function ( points ) {\n\n\t\tthis.moveTo( points[ 0 ].x, points[ 0 ].y );\n\n\t\tfor ( var i = 1, l = points.length; i < l; i ++ ) {\n\n\t\t\tthis.lineTo( points[ i ].x, points[ i ].y );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tmoveTo: function ( x, y ) {\n\n\t\tthis.currentPoint.set( x, y ); // TODO consider referencing vectors instead of copying?\n\n\t\treturn this;\n\n\t},\n\n\tlineTo: function ( x, y ) {\n\n\t\tvar curve = new LineCurve( this.currentPoint.clone(), new Vector2( x, y ) );\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( x, y );\n\n\t\treturn this;\n\n\t},\n\n\tquadraticCurveTo: function ( aCPx, aCPy, aX, aY ) {\n\n\t\tvar curve = new QuadraticBezierCurve(\n\t\t\tthis.currentPoint.clone(),\n\t\t\tnew Vector2( aCPx, aCPy ),\n\t\t\tnew Vector2( aX, aY )\n\t\t);\n\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( aX, aY );\n\n\t\treturn this;\n\n\t},\n\n\tbezierCurveTo: function ( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\n\n\t\tvar curve = new CubicBezierCurve(\n\t\t\tthis.currentPoint.clone(),\n\t\t\tnew Vector2( aCP1x, aCP1y ),\n\t\t\tnew Vector2( aCP2x, aCP2y ),\n\t\t\tnew Vector2( aX, aY )\n\t\t);\n\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.set( aX, aY );\n\n\t\treturn this;\n\n\t},\n\n\tsplineThru: function ( pts /*Array of Vector*/ ) {\n\n\t\tvar npts = [ this.currentPoint.clone() ].concat( pts );\n\n\t\tvar curve = new SplineCurve( npts );\n\t\tthis.curves.push( curve );\n\n\t\tthis.currentPoint.copy( pts[ pts.length - 1 ] );\n\n\t\treturn this;\n\n\t},\n\n\tarc: function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\t\tvar x0 = this.currentPoint.x;\n\t\tvar y0 = this.currentPoint.y;\n\n\t\tthis.absarc( aX + x0, aY + y0, aRadius,\n\t\t\taStartAngle, aEndAngle, aClockwise );\n\n\t\treturn this;\n\n\t},\n\n\tabsarc: function ( aX, aY, aRadius, aStartAngle, aEndAngle, aClockwise ) {\n\n\t\tthis.absellipse( aX, aY, aRadius, aRadius, aStartAngle, aEndAngle, aClockwise );\n\n\t\treturn this;\n\n\t},\n\n\tellipse: function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\n\n\t\tvar x0 = this.currentPoint.x;\n\t\tvar y0 = this.currentPoint.y;\n\n\t\tthis.absellipse( aX + x0, aY + y0, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\n\n\t\treturn this;\n\n\t},\n\n\tabsellipse: function ( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation ) {\n\n\t\tvar curve = new EllipseCurve( aX, aY, xRadius, yRadius, aStartAngle, aEndAngle, aClockwise, aRotation );\n\n\t\tif ( this.curves.length > 0 ) {\n\n\t\t\t// if a previous curve is present, attempt to join\n\t\t\tvar firstPoint = curve.getPoint( 0 );\n\n\t\t\tif ( ! firstPoint.equals( this.currentPoint ) ) {\n\n\t\t\t\tthis.lineTo( firstPoint.x, firstPoint.y );\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.curves.push( curve );\n\n\t\tvar lastPoint = curve.getPoint( 1 );\n\t\tthis.currentPoint.copy( lastPoint );\n\n\t\treturn this;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tCurvePath.prototype.copy.call( this, source );\n\n\t\tthis.currentPoint.copy( source.currentPoint );\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar data = CurvePath.prototype.toJSON.call( this );\n\n\t\tdata.currentPoint = this.currentPoint.toArray();\n\n\t\treturn data;\n\n\t},\n\n\tfromJSON: function ( json ) {\n\n\t\tCurvePath.prototype.fromJSON.call( this, json );\n\n\t\tthis.currentPoint.fromArray( json.currentPoint );\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Path };\n","import { EventDispatcher } from '../core/EventDispatcher.js';\nimport { Texture } from '../textures/Texture.js';\nimport { LinearFilter } from '../constants.js';\nimport { Vector4 } from '../math/Vector4.js';\n\n/**\n * @author szimek / https://github.com/szimek/\n * @author alteredq / http://alteredqualia.com/\n * @author Marius Kintel / https://github.com/kintel\n */\n\n/*\n In options, we can specify:\n * Texture parameters for an auto-generated target texture\n * depthBuffer/stencilBuffer: Booleans to indicate if we should generate these buffers\n*/\nfunction WebGLRenderTarget( width, height, options ) {\n\n\tthis.width = width;\n\tthis.height = height;\n\n\tthis.scissor = new Vector4( 0, 0, width, height );\n\tthis.scissorTest = false;\n\n\tthis.viewport = new Vector4( 0, 0, width, height );\n\n\toptions = options || {};\n\n\tthis.texture = new Texture( undefined, options.mapping, options.wrapS, options.wrapT, options.magFilter, options.minFilter, options.format, options.type, options.anisotropy, options.encoding );\n\n\tthis.texture.image = {};\n\tthis.texture.image.width = width;\n\tthis.texture.image.height = height;\n\n\tthis.texture.generateMipmaps = options.generateMipmaps !== undefined ? options.generateMipmaps : false;\n\tthis.texture.minFilter = options.minFilter !== undefined ? options.minFilter : LinearFilter;\n\n\tthis.depthBuffer = options.depthBuffer !== undefined ? options.depthBuffer : true;\n\tthis.stencilBuffer = options.stencilBuffer !== undefined ? options.stencilBuffer : true;\n\tthis.depthTexture = options.depthTexture !== undefined ? options.depthTexture : null;\n\n}\n\nWebGLRenderTarget.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: WebGLRenderTarget,\n\n\tisWebGLRenderTarget: true,\n\n\tsetSize: function ( width, height ) {\n\n\t\tif ( this.width !== width || this.height !== height ) {\n\n\t\t\tthis.width = width;\n\t\t\tthis.height = height;\n\n\t\t\tthis.texture.image.width = width;\n\t\t\tthis.texture.image.height = height;\n\n\t\t\tthis.dispose();\n\n\t\t}\n\n\t\tthis.viewport.set( 0, 0, width, height );\n\t\tthis.scissor.set( 0, 0, width, height );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.width = source.width;\n\t\tthis.height = source.height;\n\n\t\tthis.viewport.copy( source.viewport );\n\n\t\tthis.texture = source.texture.clone();\n\n\t\tthis.depthBuffer = source.depthBuffer;\n\t\tthis.stencilBuffer = source.stencilBuffer;\n\t\tthis.depthTexture = source.depthTexture;\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\n\nexport { WebGLRenderTarget };\n","import { Sphere } from '../math/Sphere.js';\nimport { Ray } from '../math/Ray.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { Object3D } from '../core/Object3D.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { LineBasicMaterial } from '../materials/LineBasicMaterial.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar _start = new Vector3();\nvar _end = new Vector3();\nvar _inverseMatrix = new Matrix4();\nvar _ray = new Ray();\nvar _sphere = new Sphere();\n\nfunction Line( geometry, material, mode ) {\n\n\tif ( mode === 1 ) {\n\n\t\tconsole.error( 'THREE.Line: parameter THREE.LinePieces no longer supported. Use THREE.LineSegments instead.' );\n\n\t}\n\n\tObject3D.call( this );\n\n\tthis.type = 'Line';\n\n\tthis.geometry = geometry !== undefined ? geometry : new BufferGeometry();\n\tthis.material = material !== undefined ? material : new LineBasicMaterial();\n\n}\n\nLine.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Line,\n\n\tisLine: true,\n\n\tcomputeLineDistances: function () {\n\n\t\tvar geometry = this.geometry;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\t// we assume non-indexed geometry\n\n\t\t\tif ( geometry.index === null ) {\n\n\t\t\t\tvar positionAttribute = geometry.attributes.position;\n\t\t\t\tvar lineDistances = [ 0 ];\n\n\t\t\t\tfor ( var i = 1, l = positionAttribute.count; i < l; i ++ ) {\n\n\t\t\t\t\t_start.fromBufferAttribute( positionAttribute, i - 1 );\n\t\t\t\t\t_end.fromBufferAttribute( positionAttribute, i );\n\n\t\t\t\t\tlineDistances[ i ] = lineDistances[ i - 1 ];\n\t\t\t\t\tlineDistances[ i ] += _start.distanceTo( _end );\n\n\t\t\t\t}\n\n\t\t\t\tgeometry.setAttribute( 'lineDistance', new Float32BufferAttribute( lineDistances, 1 ) );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( 'THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.' );\n\n\t\t\t}\n\n\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\tvar vertices = geometry.vertices;\n\t\t\tvar lineDistances = geometry.lineDistances;\n\n\t\t\tlineDistances[ 0 ] = 0;\n\n\t\t\tfor ( var i = 1, l = vertices.length; i < l; i ++ ) {\n\n\t\t\t\tlineDistances[ i ] = lineDistances[ i - 1 ];\n\t\t\t\tlineDistances[ i ] += vertices[ i - 1 ].distanceTo( vertices[ i ] );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\traycast: function ( raycaster, intersects ) {\n\n\t\tvar geometry = this.geometry;\n\t\tvar matrixWorld = this.matrixWorld;\n\t\tvar threshold = raycaster.params.Line.threshold;\n\n\t\t// Checking boundingSphere distance to ray\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere.copy( geometry.boundingSphere );\n\t\t_sphere.applyMatrix4( matrixWorld );\n\t\t_sphere.radius += threshold;\n\n\t\tif ( raycaster.ray.intersectsSphere( _sphere ) === false ) return;\n\n\t\t//\n\n\t\t_inverseMatrix.getInverse( matrixWorld );\n\t\t_ray.copy( raycaster.ray ).applyMatrix4( _inverseMatrix );\n\n\t\tvar localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\n\t\tvar localThresholdSq = localThreshold * localThreshold;\n\n\t\tvar vStart = new Vector3();\n\t\tvar vEnd = new Vector3();\n\t\tvar interSegment = new Vector3();\n\t\tvar interRay = new Vector3();\n\t\tvar step = ( this && this.isLineSegments ) ? 2 : 1;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tvar index = geometry.index;\n\t\t\tvar attributes = geometry.attributes;\n\t\t\tvar positions = attributes.position.array;\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\tvar indices = index.array;\n\n\t\t\t\tfor ( var i = 0, l = indices.length - 1; i < l; i += step ) {\n\n\t\t\t\t\tvar a = indices[ i ];\n\t\t\t\t\tvar b = indices[ i + 1 ];\n\n\t\t\t\t\tvStart.fromArray( positions, a * 3 );\n\t\t\t\t\tvEnd.fromArray( positions, b * 3 );\n\n\t\t\t\t\tvar distSq = _ray.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\n\n\t\t\t\t\tif ( distSq > localThresholdSq ) continue;\n\n\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\t\tintersects.push( {\n\n\t\t\t\t\t\tdistance: distance,\n\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\t\tindex: i,\n\t\t\t\t\t\tface: null,\n\t\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\t\tobject: this\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tfor ( var i = 0, l = positions.length / 3 - 1; i < l; i += step ) {\n\n\t\t\t\t\tvStart.fromArray( positions, 3 * i );\n\t\t\t\t\tvEnd.fromArray( positions, 3 * i + 3 );\n\n\t\t\t\t\tvar distSq = _ray.distanceSqToSegment( vStart, vEnd, interRay, interSegment );\n\n\t\t\t\t\tif ( distSq > localThresholdSq ) continue;\n\n\t\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\t\tintersects.push( {\n\n\t\t\t\t\t\tdistance: distance,\n\t\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\t\tindex: i,\n\t\t\t\t\t\tface: null,\n\t\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\t\tobject: this\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else if ( geometry.isGeometry ) {\n\n\t\t\tvar vertices = geometry.vertices;\n\t\t\tvar nbVertices = vertices.length;\n\n\t\t\tfor ( var i = 0; i < nbVertices - 1; i += step ) {\n\n\t\t\t\tvar distSq = _ray.distanceSqToSegment( vertices[ i ], vertices[ i + 1 ], interRay, interSegment );\n\n\t\t\t\tif ( distSq > localThresholdSq ) continue;\n\n\t\t\t\tinterRay.applyMatrix4( this.matrixWorld ); //Move back to world space for distance calculation\n\n\t\t\t\tvar distance = raycaster.ray.origin.distanceTo( interRay );\n\n\t\t\t\tif ( distance < raycaster.near || distance > raycaster.far ) continue;\n\n\t\t\t\tintersects.push( {\n\n\t\t\t\t\tdistance: distance,\n\t\t\t\t\t// What do we want? intersection point on the ray or on the segment??\n\t\t\t\t\t// point: raycaster.ray.at( distance ),\n\t\t\t\t\tpoint: interSegment.clone().applyMatrix4( this.matrixWorld ),\n\t\t\t\t\tindex: i,\n\t\t\t\t\tface: null,\n\t\t\t\t\tfaceIndex: null,\n\t\t\t\t\tobject: this\n\n\t\t\t\t} );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.geometry, this.material ).copy( this );\n\n\t}\n\n} );\n\n\nexport { Line };\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author mikael emtinger / http://gomo.se/\n * @author WestLangley / http://github.com/WestLangley\n*/\n\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { Object3D } from '../core/Object3D.js';\nimport { Vector3 } from '../math/Vector3.js';\n\nfunction Camera() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Camera';\n\n\tthis.matrixWorldInverse = new Matrix4();\n\n\tthis.projectionMatrix = new Matrix4();\n\tthis.projectionMatrixInverse = new Matrix4();\n\n}\n\nCamera.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Camera,\n\n\tisCamera: true,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tObject3D.prototype.copy.call( this, source, recursive );\n\n\t\tthis.matrixWorldInverse.copy( source.matrixWorldInverse );\n\n\t\tthis.projectionMatrix.copy( source.projectionMatrix );\n\t\tthis.projectionMatrixInverse.copy( source.projectionMatrixInverse );\n\n\t\treturn this;\n\n\t},\n\n\tgetWorldDirection: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Camera: .getWorldDirection() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\tvar e = this.matrixWorld.elements;\n\n\t\treturn target.set( - e[ 8 ], - e[ 9 ], - e[ 10 ] ).normalize();\n\n\t},\n\n\tupdateMatrixWorld: function ( force ) {\n\n\t\tObject3D.prototype.updateMatrixWorld.call( this, force );\n\n\t\tthis.matrixWorldInverse.getInverse( this.matrixWorld );\n\n\t},\n\n\tupdateWorldMatrix: function ( updateParents, updateChildren ) {\n\n\t\tObject3D.prototype.updateWorldMatrix.call( this, updateParents, updateChildren );\n\n\t\tthis.matrixWorldInverse.getInverse( this.matrixWorld );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t}\n\n} );\n\nexport { Camera };\n","import { Matrix3 } from './Matrix3.js';\nimport { Vector3 } from './Vector3.js';\n\n/**\n * @author bhouston / http://clara.io\n */\n\nvar _vector1 = new Vector3();\nvar _vector2 = new Vector3();\nvar _normalMatrix = new Matrix3();\n\nfunction Plane( normal, constant ) {\n\n\t// normal is assumed to be normalized\n\n\tthis.normal = ( normal !== undefined ) ? normal : new Vector3( 1, 0, 0 );\n\tthis.constant = ( constant !== undefined ) ? constant : 0;\n\n}\n\nObject.assign( Plane.prototype, {\n\n\tisPlane: true,\n\n\tset: function ( normal, constant ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = constant;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponents: function ( x, y, z, w ) {\n\n\t\tthis.normal.set( x, y, z );\n\t\tthis.constant = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetFromNormalAndCoplanarPoint: function ( normal, point ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = - point.dot( this.normal );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCoplanarPoints: function ( a, b, c ) {\n\n\t\tvar normal = _vector1.subVectors( c, b ).cross( _vector2.subVectors( a, b ) ).normalize();\n\n\t\t// Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\n\n\t\tthis.setFromNormalAndCoplanarPoint( normal, a );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( plane ) {\n\n\t\tthis.normal.copy( plane.normal );\n\t\tthis.constant = plane.constant;\n\n\t\treturn this;\n\n\t},\n\n\tnormalize: function () {\n\n\t\t// Note: will lead to a divide by zero if the plane is invalid.\n\n\t\tvar inverseNormalLength = 1.0 / this.normal.length();\n\t\tthis.normal.multiplyScalar( inverseNormalLength );\n\t\tthis.constant *= inverseNormalLength;\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.constant *= - 1;\n\t\tthis.normal.negate();\n\n\t\treturn this;\n\n\t},\n\n\tdistanceToPoint: function ( point ) {\n\n\t\treturn this.normal.dot( point ) + this.constant;\n\n\t},\n\n\tdistanceToSphere: function ( sphere ) {\n\n\t\treturn this.distanceToPoint( sphere.center ) - sphere.radius;\n\n\t},\n\n\tprojectPoint: function ( point, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Plane: .projectPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( this.normal ).multiplyScalar( - this.distanceToPoint( point ) ).add( point );\n\n\t},\n\n\tintersectLine: function ( line, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Plane: .intersectLine() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tvar direction = line.delta( _vector1 );\n\n\t\tvar denominator = this.normal.dot( direction );\n\n\t\tif ( denominator === 0 ) {\n\n\t\t\t// line is coplanar, return origin\n\t\t\tif ( this.distanceToPoint( line.start ) === 0 ) {\n\n\t\t\t\treturn target.copy( line.start );\n\n\t\t\t}\n\n\t\t\t// Unsure if this is the correct method to handle this case.\n\t\t\treturn undefined;\n\n\t\t}\n\n\t\tvar t = - ( line.start.dot( this.normal ) + this.constant ) / denominator;\n\n\t\tif ( t < 0 || t > 1 ) {\n\n\t\t\treturn undefined;\n\n\t\t}\n\n\t\treturn target.copy( direction ).multiplyScalar( t ).add( line.start );\n\n\t},\n\n\tintersectsLine: function ( line ) {\n\n\t\t// Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\n\n\t\tvar startSign = this.distanceToPoint( line.start );\n\t\tvar endSign = this.distanceToPoint( line.end );\n\n\t\treturn ( startSign < 0 && endSign > 0 ) || ( endSign < 0 && startSign > 0 );\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\treturn box.intersectsPlane( this );\n\n\t},\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\treturn sphere.intersectsPlane( this );\n\n\t},\n\n\tcoplanarPoint: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Plane: .coplanarPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( this.normal ).multiplyScalar( - this.constant );\n\n\t},\n\n\tapplyMatrix4: function ( matrix, optionalNormalMatrix ) {\n\n\t\tvar normalMatrix = optionalNormalMatrix || _normalMatrix.getNormalMatrix( matrix );\n\n\t\tvar referencePoint = this.coplanarPoint( _vector1 ).applyMatrix4( matrix );\n\n\t\tvar normal = this.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\tthis.constant = - referencePoint.dot( normal );\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.constant -= offset.dot( this.normal );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( plane ) {\n\n\t\treturn plane.normal.equals( this.normal ) && ( plane.constant === this.constant );\n\n\t}\n\n} );\n\n\nexport { Plane };\n","import { Matrix4 } from '../math/Matrix4.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Vector4 } from '../math/Vector4.js';\nimport { Frustum } from '../math/Frustum.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction LightShadow( camera ) {\n\n\tthis.camera = camera;\n\n\tthis.bias = 0;\n\tthis.radius = 1;\n\n\tthis.mapSize = new Vector2( 512, 512 );\n\n\tthis.map = null;\n\tthis.mapPass = null;\n\tthis.matrix = new Matrix4();\n\n\tthis._frustum = new Frustum();\n\tthis._frameExtents = new Vector2( 1, 1 );\n\n\tthis._viewportCount = 1;\n\n\tthis._viewports = [\n\n\t\tnew Vector4( 0, 0, 1, 1 )\n\n\t];\n\n}\n\nObject.assign( LightShadow.prototype, {\n\n\t_projScreenMatrix: new Matrix4(),\n\n\t_lightPositionWorld: new Vector3(),\n\n\t_lookTarget: new Vector3(),\n\n\tgetViewportCount: function () {\n\n\t\treturn this._viewportCount;\n\n\t},\n\n\tgetFrustum: function () {\n\n\t\treturn this._frustum;\n\n\t},\n\n\tupdateMatrices: function ( light ) {\n\n\t\tvar shadowCamera = this.camera,\n\t\t\tshadowMatrix = this.matrix,\n\t\t\tprojScreenMatrix = this._projScreenMatrix,\n\t\t\tlookTarget = this._lookTarget,\n\t\t\tlightPositionWorld = this._lightPositionWorld;\n\n\t\tlightPositionWorld.setFromMatrixPosition( light.matrixWorld );\n\t\tshadowCamera.position.copy( lightPositionWorld );\n\n\t\tlookTarget.setFromMatrixPosition( light.target.matrixWorld );\n\t\tshadowCamera.lookAt( lookTarget );\n\t\tshadowCamera.updateMatrixWorld();\n\n\t\tprojScreenMatrix.multiplyMatrices( shadowCamera.projectionMatrix, shadowCamera.matrixWorldInverse );\n\t\tthis._frustum.setFromProjectionMatrix( projScreenMatrix );\n\n\t\tshadowMatrix.set(\n\t\t\t0.5, 0.0, 0.0, 0.5,\n\t\t\t0.0, 0.5, 0.0, 0.5,\n\t\t\t0.0, 0.0, 0.5, 0.5,\n\t\t\t0.0, 0.0, 0.0, 1.0\n\t\t);\n\n\t\tshadowMatrix.multiply( shadowCamera.projectionMatrix );\n\t\tshadowMatrix.multiply( shadowCamera.matrixWorldInverse );\n\n\t},\n\n\tgetViewport: function ( viewportIndex ) {\n\n\t\treturn this._viewports[ viewportIndex ];\n\n\t},\n\n\tgetFrameExtents: function () {\n\n\t\treturn this._frameExtents;\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.camera = source.camera.clone();\n\n\t\tthis.bias = source.bias;\n\t\tthis.radius = source.radius;\n\n\t\tthis.mapSize.copy( source.mapSize );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\ttoJSON: function () {\n\n\t\tvar object = {};\n\n\t\tif ( this.bias !== 0 ) object.bias = this.bias;\n\t\tif ( this.radius !== 1 ) object.radius = this.radius;\n\t\tif ( this.mapSize.x !== 512 || this.mapSize.y !== 512 ) object.mapSize = this.mapSize.toArray();\n\n\t\tobject.camera = this.camera.toJSON( false ).object;\n\t\tdelete object.camera.matrix;\n\n\t\treturn object;\n\n\t}\n\n} );\n\n\nexport { LightShadow };\n","import { Color } from '../../math/Color.js';\nimport { Vector2 } from '../../math/Vector2.js';\nimport { Matrix3 } from '../../math/Matrix3.js';\n\n/**\n * Uniforms library for shared webgl shaders\n */\n\nvar UniformsLib = {\n\n\tcommon: {\n\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\n\t\topacity: { value: 1.0 },\n\n\t\tmap: { value: null },\n\t\tuvTransform: { value: new Matrix3() },\n\t\tuv2Transform: { value: new Matrix3() },\n\n\t\talphaMap: { value: null },\n\n\t},\n\n\tspecularmap: {\n\n\t\tspecularMap: { value: null },\n\n\t},\n\n\tenvmap: {\n\n\t\tenvMap: { value: null },\n\t\tflipEnvMap: { value: - 1 },\n\t\treflectivity: { value: 1.0 },\n\t\trefractionRatio: { value: 0.98 },\n\t\tmaxMipLevel: { value: 0 }\n\n\t},\n\n\taomap: {\n\n\t\taoMap: { value: null },\n\t\taoMapIntensity: { value: 1 }\n\n\t},\n\n\tlightmap: {\n\n\t\tlightMap: { value: null },\n\t\tlightMapIntensity: { value: 1 }\n\n\t},\n\n\temissivemap: {\n\n\t\temissiveMap: { value: null }\n\n\t},\n\n\tbumpmap: {\n\n\t\tbumpMap: { value: null },\n\t\tbumpScale: { value: 1 }\n\n\t},\n\n\tnormalmap: {\n\n\t\tnormalMap: { value: null },\n\t\tnormalScale: { value: new Vector2( 1, 1 ) }\n\n\t},\n\n\tdisplacementmap: {\n\n\t\tdisplacementMap: { value: null },\n\t\tdisplacementScale: { value: 1 },\n\t\tdisplacementBias: { value: 0 }\n\n\t},\n\n\troughnessmap: {\n\n\t\troughnessMap: { value: null }\n\n\t},\n\n\tmetalnessmap: {\n\n\t\tmetalnessMap: { value: null }\n\n\t},\n\n\tgradientmap: {\n\n\t\tgradientMap: { value: null }\n\n\t},\n\n\tfog: {\n\n\t\tfogDensity: { value: 0.00025 },\n\t\tfogNear: { value: 1 },\n\t\tfogFar: { value: 2000 },\n\t\tfogColor: { value: new Color( 0xffffff ) }\n\n\t},\n\n\tlights: {\n\n\t\tambientLightColor: { value: [] },\n\n\t\tlightProbe: { value: [] },\n\n\t\tdirectionalLights: { value: [], properties: {\n\t\t\tdirection: {},\n\t\t\tcolor: {}\n\t\t} },\n\n\t\tdirectionalLightShadows: { value: [], properties: {\n\t\t\tshadowBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {}\n\t\t} },\n\n\t\tdirectionalShadowMap: { value: [] },\n\t\tdirectionalShadowMatrix: { value: [] },\n\n\t\tspotLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\tdirection: {},\n\t\t\tdistance: {},\n\t\t\tconeCos: {},\n\t\t\tpenumbraCos: {},\n\t\t\tdecay: {}\n\t\t} },\n\n\t\tspotLightShadows: { value: [], properties: {\n\t\t\tshadowBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {}\n\t\t} },\n\n\t\tspotShadowMap: { value: [] },\n\t\tspotShadowMatrix: { value: [] },\n\n\t\tpointLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\tdecay: {},\n\t\t\tdistance: {}\n\t\t} },\n\n\t\tpointLightShadows: { value: [], properties: {\n\t\t\tshadowBias: {},\n\t\t\tshadowRadius: {},\n\t\t\tshadowMapSize: {},\n\t\t\tshadowCameraNear: {},\n\t\t\tshadowCameraFar: {}\n\t\t} },\n\n\t\tpointShadowMap: { value: [] },\n\t\tpointShadowMatrix: { value: [] },\n\n\t\themisphereLights: { value: [], properties: {\n\t\t\tdirection: {},\n\t\t\tskyColor: {},\n\t\t\tgroundColor: {}\n\t\t} },\n\n\t\t// TODO (abelnation): RectAreaLight BRDF data needs to be moved from example to main src\n\t\trectAreaLights: { value: [], properties: {\n\t\t\tcolor: {},\n\t\t\tposition: {},\n\t\t\twidth: {},\n\t\t\theight: {}\n\t\t} }\n\n\t},\n\n\tpoints: {\n\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\n\t\topacity: { value: 1.0 },\n\t\tsize: { value: 1.0 },\n\t\tscale: { value: 1.0 },\n\t\tmap: { value: null },\n\t\talphaMap: { value: null },\n\t\tuvTransform: { value: new Matrix3() }\n\n\t},\n\n\tsprite: {\n\n\t\tdiffuse: { value: new Color( 0xeeeeee ) },\n\t\topacity: { value: 1.0 },\n\t\tcenter: { value: new Vector2( 0.5, 0.5 ) },\n\t\trotation: { value: 0.0 },\n\t\tmap: { value: null },\n\t\talphaMap: { value: null },\n\t\tuvTransform: { value: new Matrix3() }\n\n\t}\n\n};\n\nexport { UniformsLib };\n","/**\n * @author sroucheray / http://sroucheray.org/\n * @author mrdoob / http://mrdoob.com/\n */\n\nimport { LineSegments } from '../objects/LineSegments.js';\nimport { LineBasicMaterial } from '../materials/LineBasicMaterial.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\n\nfunction AxesHelper( size ) {\n\n\tsize = size || 1;\n\n\tvar vertices = [\n\t\t0, 0, 0,\tsize, 0, 0,\n\t\t0, 0, 0,\t0, size, 0,\n\t\t0, 0, 0,\t0, 0, size\n\t];\n\n\tvar colors = [\n\t\t1, 0, 0,\t1, 0.6, 0,\n\t\t0, 1, 0,\t0.6, 1, 0,\n\t\t0, 0, 1,\t0, 0.6, 1\n\t];\n\n\tvar geometry = new BufferGeometry();\n\tgeometry.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tgeometry.setAttribute( 'color', new Float32BufferAttribute( colors, 3 ) );\n\n\tvar material = new LineBasicMaterial( { vertexColors: true, toneMapped: false } );\n\n\tLineSegments.call( this, geometry, material );\n\n}\n\nAxesHelper.prototype = Object.create( LineSegments.prototype );\nAxesHelper.prototype.constructor = AxesHelper;\n\n\nexport { AxesHelper };\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author Mugen87 / https://github.com/Mugen87\n */\n\nimport { Geometry } from '../core/Geometry.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\nimport { Float32BufferAttribute } from '../core/BufferAttribute.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Vector2 } from '../math/Vector2.js';\n\n// CylinderGeometry\n\nfunction CylinderGeometry( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\n\n\tGeometry.call( this );\n\n\tthis.type = 'CylinderGeometry';\n\n\tthis.parameters = {\n\t\tradiusTop: radiusTop,\n\t\tradiusBottom: radiusBottom,\n\t\theight: height,\n\t\tradialSegments: radialSegments,\n\t\theightSegments: heightSegments,\n\t\topenEnded: openEnded,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tthis.fromBufferGeometry( new CylinderBufferGeometry( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) );\n\tthis.mergeVertices();\n\n}\n\nCylinderGeometry.prototype = Object.create( Geometry.prototype );\nCylinderGeometry.prototype.constructor = CylinderGeometry;\n\n// CylinderBufferGeometry\n\nfunction CylinderBufferGeometry( radiusTop, radiusBottom, height, radialSegments, heightSegments, openEnded, thetaStart, thetaLength ) {\n\n\tBufferGeometry.call( this );\n\n\tthis.type = 'CylinderBufferGeometry';\n\n\tthis.parameters = {\n\t\tradiusTop: radiusTop,\n\t\tradiusBottom: radiusBottom,\n\t\theight: height,\n\t\tradialSegments: radialSegments,\n\t\theightSegments: heightSegments,\n\t\topenEnded: openEnded,\n\t\tthetaStart: thetaStart,\n\t\tthetaLength: thetaLength\n\t};\n\n\tvar scope = this;\n\n\tradiusTop = radiusTop !== undefined ? radiusTop : 1;\n\tradiusBottom = radiusBottom !== undefined ? radiusBottom : 1;\n\theight = height || 1;\n\n\tradialSegments = Math.floor( radialSegments ) || 8;\n\theightSegments = Math.floor( heightSegments ) || 1;\n\n\topenEnded = openEnded !== undefined ? openEnded : false;\n\tthetaStart = thetaStart !== undefined ? thetaStart : 0.0;\n\tthetaLength = thetaLength !== undefined ? thetaLength : Math.PI * 2;\n\n\t// buffers\n\n\tvar indices = [];\n\tvar vertices = [];\n\tvar normals = [];\n\tvar uvs = [];\n\n\t// helper variables\n\n\tvar index = 0;\n\tvar indexArray = [];\n\tvar halfHeight = height / 2;\n\tvar groupStart = 0;\n\n\t// generate geometry\n\n\tgenerateTorso();\n\n\tif ( openEnded === false ) {\n\n\t\tif ( radiusTop > 0 ) generateCap( true );\n\t\tif ( radiusBottom > 0 ) generateCap( false );\n\n\t}\n\n\t// build geometry\n\n\tthis.setIndex( indices );\n\tthis.setAttribute( 'position', new Float32BufferAttribute( vertices, 3 ) );\n\tthis.setAttribute( 'normal', new Float32BufferAttribute( normals, 3 ) );\n\tthis.setAttribute( 'uv', new Float32BufferAttribute( uvs, 2 ) );\n\n\tfunction generateTorso() {\n\n\t\tvar x, y;\n\t\tvar normal = new Vector3();\n\t\tvar vertex = new Vector3();\n\n\t\tvar groupCount = 0;\n\n\t\t// this will be used to calculate the normal\n\t\tvar slope = ( radiusBottom - radiusTop ) / height;\n\n\t\t// generate vertices, normals and uvs\n\n\t\tfor ( y = 0; y <= heightSegments; y ++ ) {\n\n\t\t\tvar indexRow = [];\n\n\t\t\tvar v = y / heightSegments;\n\n\t\t\t// calculate the radius of the current row\n\n\t\t\tvar radius = v * ( radiusBottom - radiusTop ) + radiusTop;\n\n\t\t\tfor ( x = 0; x <= radialSegments; x ++ ) {\n\n\t\t\t\tvar u = x / radialSegments;\n\n\t\t\t\tvar theta = u * thetaLength + thetaStart;\n\n\t\t\t\tvar sinTheta = Math.sin( theta );\n\t\t\t\tvar cosTheta = Math.cos( theta );\n\n\t\t\t\t// vertex\n\n\t\t\t\tvertex.x = radius * sinTheta;\n\t\t\t\tvertex.y = - v * height + halfHeight;\n\t\t\t\tvertex.z = radius * cosTheta;\n\t\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t\t// normal\n\n\t\t\t\tnormal.set( sinTheta, slope, cosTheta ).normalize();\n\t\t\t\tnormals.push( normal.x, normal.y, normal.z );\n\n\t\t\t\t// uv\n\n\t\t\t\tuvs.push( u, 1 - v );\n\n\t\t\t\t// save index of vertex in respective row\n\n\t\t\t\tindexRow.push( index ++ );\n\n\t\t\t}\n\n\t\t\t// now save vertices of the row in our index array\n\n\t\t\tindexArray.push( indexRow );\n\n\t\t}\n\n\t\t// generate indices\n\n\t\tfor ( x = 0; x < radialSegments; x ++ ) {\n\n\t\t\tfor ( y = 0; y < heightSegments; y ++ ) {\n\n\t\t\t\t// we use the index array to access the correct indices\n\n\t\t\t\tvar a = indexArray[ y ][ x ];\n\t\t\t\tvar b = indexArray[ y + 1 ][ x ];\n\t\t\t\tvar c = indexArray[ y + 1 ][ x + 1 ];\n\t\t\t\tvar d = indexArray[ y ][ x + 1 ];\n\n\t\t\t\t// faces\n\n\t\t\t\tindices.push( a, b, d );\n\t\t\t\tindices.push( b, c, d );\n\n\t\t\t\t// update group counter\n\n\t\t\t\tgroupCount += 6;\n\n\t\t\t}\n\n\t\t}\n\n\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\tscope.addGroup( groupStart, groupCount, 0 );\n\n\t\t// calculate new start value for groups\n\n\t\tgroupStart += groupCount;\n\n\t}\n\n\tfunction generateCap( top ) {\n\n\t\tvar x, centerIndexStart, centerIndexEnd;\n\n\t\tvar uv = new Vector2();\n\t\tvar vertex = new Vector3();\n\n\t\tvar groupCount = 0;\n\n\t\tvar radius = ( top === true ) ? radiusTop : radiusBottom;\n\t\tvar sign = ( top === true ) ? 1 : - 1;\n\n\t\t// save the index of the first center vertex\n\t\tcenterIndexStart = index;\n\n\t\t// first we generate the center vertex data of the cap.\n\t\t// because the geometry needs one set of uvs per face,\n\t\t// we must generate a center vertex per face/segment\n\n\t\tfor ( x = 1; x <= radialSegments; x ++ ) {\n\n\t\t\t// vertex\n\n\t\t\tvertices.push( 0, halfHeight * sign, 0 );\n\n\t\t\t// normal\n\n\t\t\tnormals.push( 0, sign, 0 );\n\n\t\t\t// uv\n\n\t\t\tuvs.push( 0.5, 0.5 );\n\n\t\t\t// increase index\n\n\t\t\tindex ++;\n\n\t\t}\n\n\t\t// save the index of the last center vertex\n\n\t\tcenterIndexEnd = index;\n\n\t\t// now we generate the surrounding vertices, normals and uvs\n\n\t\tfor ( x = 0; x <= radialSegments; x ++ ) {\n\n\t\t\tvar u = x / radialSegments;\n\t\t\tvar theta = u * thetaLength + thetaStart;\n\n\t\t\tvar cosTheta = Math.cos( theta );\n\t\t\tvar sinTheta = Math.sin( theta );\n\n\t\t\t// vertex\n\n\t\t\tvertex.x = radius * sinTheta;\n\t\t\tvertex.y = halfHeight * sign;\n\t\t\tvertex.z = radius * cosTheta;\n\t\t\tvertices.push( vertex.x, vertex.y, vertex.z );\n\n\t\t\t// normal\n\n\t\t\tnormals.push( 0, sign, 0 );\n\n\t\t\t// uv\n\n\t\t\tuv.x = ( cosTheta * 0.5 ) + 0.5;\n\t\t\tuv.y = ( sinTheta * 0.5 * sign ) + 0.5;\n\t\t\tuvs.push( uv.x, uv.y );\n\n\t\t\t// increase index\n\n\t\t\tindex ++;\n\n\t\t}\n\n\t\t// generate indices\n\n\t\tfor ( x = 0; x < radialSegments; x ++ ) {\n\n\t\t\tvar c = centerIndexStart + x;\n\t\t\tvar i = centerIndexEnd + x;\n\n\t\t\tif ( top === true ) {\n\n\t\t\t\t// face top\n\n\t\t\t\tindices.push( i, i + 1, c );\n\n\t\t\t} else {\n\n\t\t\t\t// face bottom\n\n\t\t\t\tindices.push( i + 1, i, c );\n\n\t\t\t}\n\n\t\t\tgroupCount += 3;\n\n\t\t}\n\n\t\t// add a group to the geometry. this will ensure multi material support\n\n\t\tscope.addGroup( groupStart, groupCount, top === true ? 1 : 2 );\n\n\t\t// calculate new start value for groups\n\n\t\tgroupStart += groupCount;\n\n\t}\n\n}\n\nCylinderBufferGeometry.prototype = Object.create( BufferGeometry.prototype );\nCylinderBufferGeometry.prototype.constructor = CylinderBufferGeometry;\n\n\nexport { CylinderGeometry, CylinderBufferGeometry };\n","/**\n * @author Mugen87 / https://github.com/Mugen87\n * Port from https://github.com/mapbox/earcut (v2.1.5)\n */\n\nvar Earcut = {\n\n\ttriangulate: function ( data, holeIndices, dim ) {\n\n\t\tdim = dim || 2;\n\n\t\tvar hasHoles = holeIndices && holeIndices.length,\n\t\t\touterLen = hasHoles ? holeIndices[ 0 ] * dim : data.length,\n\t\t\touterNode = linkedList( data, 0, outerLen, dim, true ),\n\t\t\ttriangles = [];\n\n\t\tif ( ! outerNode || outerNode.next === outerNode.prev ) return triangles;\n\n\t\tvar minX, minY, maxX, maxY, x, y, invSize;\n\n\t\tif ( hasHoles ) outerNode = eliminateHoles( data, holeIndices, outerNode, dim );\n\n\t\t// if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n\t\tif ( data.length > 80 * dim ) {\n\n\t\t\tminX = maxX = data[ 0 ];\n\t\t\tminY = maxY = data[ 1 ];\n\n\t\t\tfor ( var i = dim; i < outerLen; i += dim ) {\n\n\t\t\t\tx = data[ i ];\n\t\t\t\ty = data[ i + 1 ];\n\t\t\t\tif ( x < minX ) minX = x;\n\t\t\t\tif ( y < minY ) minY = y;\n\t\t\t\tif ( x > maxX ) maxX = x;\n\t\t\t\tif ( y > maxY ) maxY = y;\n\n\t\t\t}\n\n\t\t\t// minX, minY and invSize are later used to transform coords into integers for z-order calculation\n\t\t\tinvSize = Math.max( maxX - minX, maxY - minY );\n\t\t\tinvSize = invSize !== 0 ? 1 / invSize : 0;\n\n\t\t}\n\n\t\tearcutLinked( outerNode, triangles, dim, minX, minY, invSize );\n\n\t\treturn triangles;\n\n\t}\n\n};\n\n// create a circular doubly linked list from polygon points in the specified winding order\nfunction linkedList( data, start, end, dim, clockwise ) {\n\n\tvar i, last;\n\n\tif ( clockwise === ( signedArea( data, start, end, dim ) > 0 ) ) {\n\n\t\tfor ( i = start; i < end; i += dim ) last = insertNode( i, data[ i ], data[ i + 1 ], last );\n\n\t} else {\n\n\t\tfor ( i = end - dim; i >= start; i -= dim ) last = insertNode( i, data[ i ], data[ i + 1 ], last );\n\n\t}\n\n\tif ( last && equals( last, last.next ) ) {\n\n\t\tremoveNode( last );\n\t\tlast = last.next;\n\n\t}\n\n\treturn last;\n\n}\n\n// eliminate colinear or duplicate points\nfunction filterPoints( start, end ) {\n\n\tif ( ! start ) return start;\n\tif ( ! end ) end = start;\n\n\tvar p = start,\n\t\tagain;\n\tdo {\n\n\t\tagain = false;\n\n\t\tif ( ! p.steiner && ( equals( p, p.next ) || area( p.prev, p, p.next ) === 0 ) ) {\n\n\t\t\tremoveNode( p );\n\t\t\tp = end = p.prev;\n\t\t\tif ( p === p.next ) break;\n\t\t\tagain = true;\n\n\t\t} else {\n\n\t\t\tp = p.next;\n\n\t\t}\n\n\t} while ( again || p !== end );\n\n\treturn end;\n\n}\n\n// main ear slicing loop which triangulates a polygon (given as a linked list)\nfunction earcutLinked( ear, triangles, dim, minX, minY, invSize, pass ) {\n\n\tif ( ! ear ) return;\n\n\t// interlink polygon nodes in z-order\n\tif ( ! pass && invSize ) indexCurve( ear, minX, minY, invSize );\n\n\tvar stop = ear,\n\t\tprev, next;\n\n\t// iterate through ears, slicing them one by one\n\twhile ( ear.prev !== ear.next ) {\n\n\t\tprev = ear.prev;\n\t\tnext = ear.next;\n\n\t\tif ( invSize ? isEarHashed( ear, minX, minY, invSize ) : isEar( ear ) ) {\n\n\t\t\t// cut off the triangle\n\t\t\ttriangles.push( prev.i / dim );\n\t\t\ttriangles.push( ear.i / dim );\n\t\t\ttriangles.push( next.i / dim );\n\n\t\t\tremoveNode( ear );\n\n\t\t\t// skipping the next vertex leads to less sliver triangles\n\t\t\tear = next.next;\n\t\t\tstop = next.next;\n\n\t\t\tcontinue;\n\n\t\t}\n\n\t\tear = next;\n\n\t\t// if we looped through the whole remaining polygon and can't find any more ears\n\t\tif ( ear === stop ) {\n\n\t\t\t// try filtering points and slicing again\n\t\t\tif ( ! pass ) {\n\n\t\t\t\tearcutLinked( filterPoints( ear ), triangles, dim, minX, minY, invSize, 1 );\n\n\t\t\t\t// if this didn't work, try curing all small self-intersections locally\n\n\t\t\t} else if ( pass === 1 ) {\n\n\t\t\t\tear = cureLocalIntersections( ear, triangles, dim );\n\t\t\t\tearcutLinked( ear, triangles, dim, minX, minY, invSize, 2 );\n\n\t\t\t\t// as a last resort, try splitting the remaining polygon into two\n\n\t\t\t} else if ( pass === 2 ) {\n\n\t\t\t\tsplitEarcut( ear, triangles, dim, minX, minY, invSize );\n\n\t\t\t}\n\n\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n}\n\n// check whether a polygon node forms a valid ear with adjacent nodes\nfunction isEar( ear ) {\n\n\tvar a = ear.prev,\n\t\tb = ear,\n\t\tc = ear.next;\n\n\tif ( area( a, b, c ) >= 0 ) return false; // reflex, can't be an ear\n\n\t// now make sure we don't have other points inside the potential ear\n\tvar p = ear.next.next;\n\n\twhile ( p !== ear.prev ) {\n\n\t\tif ( pointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\n\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\n\t\tp = p.next;\n\n\t}\n\n\treturn true;\n\n}\n\nfunction isEarHashed( ear, minX, minY, invSize ) {\n\n\tvar a = ear.prev,\n\t\tb = ear,\n\t\tc = ear.next;\n\n\tif ( area( a, b, c ) >= 0 ) return false; // reflex, can't be an ear\n\n\t// triangle bbox; min & max are calculated like this for speed\n\tvar minTX = a.x < b.x ? ( a.x < c.x ? a.x : c.x ) : ( b.x < c.x ? b.x : c.x ),\n\t\tminTY = a.y < b.y ? ( a.y < c.y ? a.y : c.y ) : ( b.y < c.y ? b.y : c.y ),\n\t\tmaxTX = a.x > b.x ? ( a.x > c.x ? a.x : c.x ) : ( b.x > c.x ? b.x : c.x ),\n\t\tmaxTY = a.y > b.y ? ( a.y > c.y ? a.y : c.y ) : ( b.y > c.y ? b.y : c.y );\n\n\t// z-order range for the current triangle bbox;\n\tvar minZ = zOrder( minTX, minTY, minX, minY, invSize ),\n\t\tmaxZ = zOrder( maxTX, maxTY, minX, minY, invSize );\n\n\tvar p = ear.prevZ,\n\t\tn = ear.nextZ;\n\n\t// look for points inside the triangle in both directions\n\twhile ( p && p.z >= minZ && n && n.z <= maxZ ) {\n\n\t\tif ( p !== ear.prev && p !== ear.next &&\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\n\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\n\t\tp = p.prevZ;\n\n\t\tif ( n !== ear.prev && n !== ear.next &&\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y ) &&\n\t\t\tarea( n.prev, n, n.next ) >= 0 ) return false;\n\t\tn = n.nextZ;\n\n\t}\n\n\t// look for remaining points in decreasing z-order\n\twhile ( p && p.z >= minZ ) {\n\n\t\tif ( p !== ear.prev && p !== ear.next &&\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, p.x, p.y ) &&\n\t\t\tarea( p.prev, p, p.next ) >= 0 ) return false;\n\t\tp = p.prevZ;\n\n\t}\n\n\t// look for remaining points in increasing z-order\n\twhile ( n && n.z <= maxZ ) {\n\n\t\tif ( n !== ear.prev && n !== ear.next &&\n\t\t\tpointInTriangle( a.x, a.y, b.x, b.y, c.x, c.y, n.x, n.y ) &&\n\t\t\tarea( n.prev, n, n.next ) >= 0 ) return false;\n\t\tn = n.nextZ;\n\n\t}\n\n\treturn true;\n\n}\n\n// go through all polygon nodes and cure small local self-intersections\nfunction cureLocalIntersections( start, triangles, dim ) {\n\n\tvar p = start;\n\tdo {\n\n\t\tvar a = p.prev,\n\t\t\tb = p.next.next;\n\n\t\tif ( ! equals( a, b ) && intersects( a, p, p.next, b ) && locallyInside( a, b ) && locallyInside( b, a ) ) {\n\n\t\t\ttriangles.push( a.i / dim );\n\t\t\ttriangles.push( p.i / dim );\n\t\t\ttriangles.push( b.i / dim );\n\n\t\t\t// remove two nodes involved\n\t\t\tremoveNode( p );\n\t\t\tremoveNode( p.next );\n\n\t\t\tp = start = b;\n\n\t\t}\n\n\t\tp = p.next;\n\n\t} while ( p !== start );\n\n\treturn p;\n\n}\n\n// try splitting polygon into two and triangulate them independently\nfunction splitEarcut( start, triangles, dim, minX, minY, invSize ) {\n\n\t// look for a valid diagonal that divides the polygon into two\n\tvar a = start;\n\tdo {\n\n\t\tvar b = a.next.next;\n\t\twhile ( b !== a.prev ) {\n\n\t\t\tif ( a.i !== b.i && isValidDiagonal( a, b ) ) {\n\n\t\t\t\t// split the polygon in two by the diagonal\n\t\t\t\tvar c = splitPolygon( a, b );\n\n\t\t\t\t// filter colinear points around the cuts\n\t\t\t\ta = filterPoints( a, a.next );\n\t\t\t\tc = filterPoints( c, c.next );\n\n\t\t\t\t// run earcut on each half\n\t\t\t\tearcutLinked( a, triangles, dim, minX, minY, invSize );\n\t\t\t\tearcutLinked( c, triangles, dim, minX, minY, invSize );\n\t\t\t\treturn;\n\n\t\t\t}\n\n\t\t\tb = b.next;\n\n\t\t}\n\n\t\ta = a.next;\n\n\t} while ( a !== start );\n\n}\n\n// link every hole into the outer loop, producing a single-ring polygon without holes\nfunction eliminateHoles( data, holeIndices, outerNode, dim ) {\n\n\tvar queue = [],\n\t\ti, len, start, end, list;\n\n\tfor ( i = 0, len = holeIndices.length; i < len; i ++ ) {\n\n\t\tstart = holeIndices[ i ] * dim;\n\t\tend = i < len - 1 ? holeIndices[ i + 1 ] * dim : data.length;\n\t\tlist = linkedList( data, start, end, dim, false );\n\t\tif ( list === list.next ) list.steiner = true;\n\t\tqueue.push( getLeftmost( list ) );\n\n\t}\n\n\tqueue.sort( compareX );\n\n\t// process holes from left to right\n\tfor ( i = 0; i < queue.length; i ++ ) {\n\n\t\teliminateHole( queue[ i ], outerNode );\n\t\touterNode = filterPoints( outerNode, outerNode.next );\n\n\t}\n\n\treturn outerNode;\n\n}\n\nfunction compareX( a, b ) {\n\n\treturn a.x - b.x;\n\n}\n\n// find a bridge between vertices that connects hole with an outer ring and and link it\nfunction eliminateHole( hole, outerNode ) {\n\n\touterNode = findHoleBridge( hole, outerNode );\n\tif ( outerNode ) {\n\n\t\tvar b = splitPolygon( outerNode, hole );\n\t\tfilterPoints( b, b.next );\n\n\t}\n\n}\n\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\nfunction findHoleBridge( hole, outerNode ) {\n\n\tvar p = outerNode,\n\t\thx = hole.x,\n\t\thy = hole.y,\n\t\tqx = - Infinity,\n\t\tm;\n\n\t// find a segment intersected by a ray from the hole's leftmost point to the left;\n\t// segment's endpoint with lesser x will be potential connection point\n\tdo {\n\n\t\tif ( hy <= p.y && hy >= p.next.y && p.next.y !== p.y ) {\n\n\t\t\tvar x = p.x + ( hy - p.y ) * ( p.next.x - p.x ) / ( p.next.y - p.y );\n\t\t\tif ( x <= hx && x > qx ) {\n\n\t\t\t\tqx = x;\n\t\t\t\tif ( x === hx ) {\n\n\t\t\t\t\tif ( hy === p.y ) return p;\n\t\t\t\t\tif ( hy === p.next.y ) return p.next;\n\n\t\t\t\t}\n\n\t\t\t\tm = p.x < p.next.x ? p : p.next;\n\n\t\t\t}\n\n\t\t}\n\n\t\tp = p.next;\n\n\t} while ( p !== outerNode );\n\n\tif ( ! m ) return null;\n\n\tif ( hx === qx ) return m.prev; // hole touches outer segment; pick lower endpoint\n\n\t// look for points inside the triangle of hole point, segment intersection and endpoint;\n\t// if there are no points found, we have a valid connection;\n\t// otherwise choose the point of the minimum angle with the ray as connection point\n\n\tvar stop = m,\n\t\tmx = m.x,\n\t\tmy = m.y,\n\t\ttanMin = Infinity,\n\t\ttan;\n\n\tp = m.next;\n\n\twhile ( p !== stop ) {\n\n\t\tif ( hx >= p.x && p.x >= mx && hx !== p.x &&\n\t\t\t\tpointInTriangle( hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y ) ) {\n\n\t\t\ttan = Math.abs( hy - p.y ) / ( hx - p.x ); // tangential\n\n\t\t\tif ( ( tan < tanMin || ( tan === tanMin && p.x > m.x ) ) && locallyInside( p, hole ) ) {\n\n\t\t\t\tm = p;\n\t\t\t\ttanMin = tan;\n\n\t\t\t}\n\n\t\t}\n\n\t\tp = p.next;\n\n\t}\n\n\treturn m;\n\n}\n\n// interlink polygon nodes in z-order\nfunction indexCurve( start, minX, minY, invSize ) {\n\n\tvar p = start;\n\tdo {\n\n\t\tif ( p.z === null ) p.z = zOrder( p.x, p.y, minX, minY, invSize );\n\t\tp.prevZ = p.prev;\n\t\tp.nextZ = p.next;\n\t\tp = p.next;\n\n\t} while ( p !== start );\n\n\tp.prevZ.nextZ = null;\n\tp.prevZ = null;\n\n\tsortLinked( p );\n\n}\n\n// Simon Tatham's linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\nfunction sortLinked( list ) {\n\n\tvar i, p, q, e, tail, numMerges, pSize, qSize,\n\t\tinSize = 1;\n\n\tdo {\n\n\t\tp = list;\n\t\tlist = null;\n\t\ttail = null;\n\t\tnumMerges = 0;\n\n\t\twhile ( p ) {\n\n\t\t\tnumMerges ++;\n\t\t\tq = p;\n\t\t\tpSize = 0;\n\t\t\tfor ( i = 0; i < inSize; i ++ ) {\n\n\t\t\t\tpSize ++;\n\t\t\t\tq = q.nextZ;\n\t\t\t\tif ( ! q ) break;\n\n\t\t\t}\n\n\t\t\tqSize = inSize;\n\n\t\t\twhile ( pSize > 0 || ( qSize > 0 && q ) ) {\n\n\t\t\t\tif ( pSize !== 0 && ( qSize === 0 || ! q || p.z <= q.z ) ) {\n\n\t\t\t\t\te = p;\n\t\t\t\t\tp = p.nextZ;\n\t\t\t\t\tpSize --;\n\n\t\t\t\t} else {\n\n\t\t\t\t\te = q;\n\t\t\t\t\tq = q.nextZ;\n\t\t\t\t\tqSize --;\n\n\t\t\t\t}\n\n\t\t\t\tif ( tail ) tail.nextZ = e;\n\t\t\t\telse list = e;\n\n\t\t\t\te.prevZ = tail;\n\t\t\t\ttail = e;\n\n\t\t\t}\n\n\t\t\tp = q;\n\n\t\t}\n\n\t\ttail.nextZ = null;\n\t\tinSize *= 2;\n\n\t} while ( numMerges > 1 );\n\n\treturn list;\n\n}\n\n// z-order of a point given coords and inverse of the longer side of data bbox\nfunction zOrder( x, y, minX, minY, invSize ) {\n\n\t// coords are transformed into non-negative 15-bit integer range\n\tx = 32767 * ( x - minX ) * invSize;\n\ty = 32767 * ( y - minY ) * invSize;\n\n\tx = ( x | ( x << 8 ) ) & 0x00FF00FF;\n\tx = ( x | ( x << 4 ) ) & 0x0F0F0F0F;\n\tx = ( x | ( x << 2 ) ) & 0x33333333;\n\tx = ( x | ( x << 1 ) ) & 0x55555555;\n\n\ty = ( y | ( y << 8 ) ) & 0x00FF00FF;\n\ty = ( y | ( y << 4 ) ) & 0x0F0F0F0F;\n\ty = ( y | ( y << 2 ) ) & 0x33333333;\n\ty = ( y | ( y << 1 ) ) & 0x55555555;\n\n\treturn x | ( y << 1 );\n\n}\n\n// find the leftmost node of a polygon ring\nfunction getLeftmost( start ) {\n\n\tvar p = start,\n\t\tleftmost = start;\n\tdo {\n\n\t\tif ( p.x < leftmost.x || ( p.x === leftmost.x && p.y < leftmost.y ) ) leftmost = p;\n\t\tp = p.next;\n\n\t} while ( p !== start );\n\n\treturn leftmost;\n\n}\n\n// check if a point lies within a convex triangle\nfunction pointInTriangle( ax, ay, bx, by, cx, cy, px, py ) {\n\n\treturn ( cx - px ) * ( ay - py ) - ( ax - px ) * ( cy - py ) >= 0 &&\n\t\t   ( ax - px ) * ( by - py ) - ( bx - px ) * ( ay - py ) >= 0 &&\n\t\t   ( bx - px ) * ( cy - py ) - ( cx - px ) * ( by - py ) >= 0;\n\n}\n\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\nfunction isValidDiagonal( a, b ) {\n\n\treturn a.next.i !== b.i && a.prev.i !== b.i && ! intersectsPolygon( a, b ) &&\n\t\t   locallyInside( a, b ) && locallyInside( b, a ) && middleInside( a, b );\n\n}\n\n// signed area of a triangle\nfunction area( p, q, r ) {\n\n\treturn ( q.y - p.y ) * ( r.x - q.x ) - ( q.x - p.x ) * ( r.y - q.y );\n\n}\n\n// check if two points are equal\nfunction equals( p1, p2 ) {\n\n\treturn p1.x === p2.x && p1.y === p2.y;\n\n}\n\n// check if two segments intersect\nfunction intersects( p1, q1, p2, q2 ) {\n\n\tif ( ( equals( p1, p2 ) && equals( q1, q2 ) ) ||\n\t\t( equals( p1, q2 ) && equals( p2, q1 ) ) ) return true;\n\treturn area( p1, q1, p2 ) > 0 !== area( p1, q1, q2 ) > 0 &&\n\t\t   area( p2, q2, p1 ) > 0 !== area( p2, q2, q1 ) > 0;\n\n}\n\n// check if a polygon diagonal intersects any polygon segments\nfunction intersectsPolygon( a, b ) {\n\n\tvar p = a;\n\tdo {\n\n\t\tif ( p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\n\t\t\t\tintersects( p, p.next, a, b ) ) return true;\n\t\tp = p.next;\n\n\t} while ( p !== a );\n\n\treturn false;\n\n}\n\n// check if a polygon diagonal is locally inside the polygon\nfunction locallyInside( a, b ) {\n\n\treturn area( a.prev, a, a.next ) < 0 ?\n\t\tarea( a, b, a.next ) >= 0 && area( a, a.prev, b ) >= 0 :\n\t\tarea( a, b, a.prev ) < 0 || area( a, a.next, b ) < 0;\n\n}\n\n// check if the middle point of a polygon diagonal is inside the polygon\nfunction middleInside( a, b ) {\n\n\tvar p = a,\n\t\tinside = false,\n\t\tpx = ( a.x + b.x ) / 2,\n\t\tpy = ( a.y + b.y ) / 2;\n\tdo {\n\n\t\tif ( ( ( p.y > py ) !== ( p.next.y > py ) ) && p.next.y !== p.y &&\n\t\t\t\t( px < ( p.next.x - p.x ) * ( py - p.y ) / ( p.next.y - p.y ) + p.x ) )\n\t\t\tinside = ! inside;\n\t\tp = p.next;\n\n\t} while ( p !== a );\n\n\treturn inside;\n\n}\n\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\nfunction splitPolygon( a, b ) {\n\n\tvar a2 = new Node( a.i, a.x, a.y ),\n\t\tb2 = new Node( b.i, b.x, b.y ),\n\t\tan = a.next,\n\t\tbp = b.prev;\n\n\ta.next = b;\n\tb.prev = a;\n\n\ta2.next = an;\n\tan.prev = a2;\n\n\tb2.next = a2;\n\ta2.prev = b2;\n\n\tbp.next = b2;\n\tb2.prev = bp;\n\n\treturn b2;\n\n}\n\n// create a node and optionally link it with previous one (in a circular doubly linked list)\nfunction insertNode( i, x, y, last ) {\n\n\tvar p = new Node( i, x, y );\n\n\tif ( ! last ) {\n\n\t\tp.prev = p;\n\t\tp.next = p;\n\n\t} else {\n\n\t\tp.next = last.next;\n\t\tp.prev = last;\n\t\tlast.next.prev = p;\n\t\tlast.next = p;\n\n\t}\n\n\treturn p;\n\n}\n\nfunction removeNode( p ) {\n\n\tp.next.prev = p.prev;\n\tp.prev.next = p.next;\n\n\tif ( p.prevZ ) p.prevZ.nextZ = p.nextZ;\n\tif ( p.nextZ ) p.nextZ.prevZ = p.prevZ;\n\n}\n\nfunction Node( i, x, y ) {\n\n\t// vertex index in coordinates array\n\tthis.i = i;\n\n\t// vertex coordinates\n\tthis.x = x;\n\tthis.y = y;\n\n\t// previous and next vertex nodes in a polygon ring\n\tthis.prev = null;\n\tthis.next = null;\n\n\t// z-order curve value\n\tthis.z = null;\n\n\t// previous and next nodes in z-order\n\tthis.prevZ = null;\n\tthis.nextZ = null;\n\n\t// indicates whether this is a steiner point\n\tthis.steiner = false;\n\n}\n\nfunction signedArea( data, start, end, dim ) {\n\n\tvar sum = 0;\n\tfor ( var i = start, j = end - dim; i < end; i += dim ) {\n\n\t\tsum += ( data[ j ] - data[ i ] ) * ( data[ i + 1 ] + data[ j + 1 ] );\n\t\tj = i;\n\n\t}\n\n\treturn sum;\n\n}\n\nexport { Earcut };\n","/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n */\n\nimport { Earcut } from './Earcut.js';\n\nvar ShapeUtils = {\n\n\t// calculate area of the contour polygon\n\n\tarea: function ( contour ) {\n\n\t\tvar n = contour.length;\n\t\tvar a = 0.0;\n\n\t\tfor ( var p = n - 1, q = 0; q < n; p = q ++ ) {\n\n\t\t\ta += contour[ p ].x * contour[ q ].y - contour[ q ].x * contour[ p ].y;\n\n\t\t}\n\n\t\treturn a * 0.5;\n\n\t},\n\n\tisClockWise: function ( pts ) {\n\n\t\treturn ShapeUtils.area( pts ) < 0;\n\n\t},\n\n\ttriangulateShape: function ( contour, holes ) {\n\n\t\tvar vertices = []; // flat array of vertices like [ x0,y0, x1,y1, x2,y2, ... ]\n\t\tvar holeIndices = []; // array of hole indices\n\t\tvar faces = []; // final array of vertex indices like [ [ a,b,d ], [ b,c,d ] ]\n\n\t\tremoveDupEndPts( contour );\n\t\taddContour( vertices, contour );\n\n\t\t//\n\n\t\tvar holeIndex = contour.length;\n\n\t\tholes.forEach( removeDupEndPts );\n\n\t\tfor ( var i = 0; i < holes.length; i ++ ) {\n\n\t\t\tholeIndices.push( holeIndex );\n\t\t\tholeIndex += holes[ i ].length;\n\t\t\taddContour( vertices, holes[ i ] );\n\n\t\t}\n\n\t\t//\n\n\t\tvar triangles = Earcut.triangulate( vertices, holeIndices );\n\n\t\t//\n\n\t\tfor ( var i = 0; i < triangles.length; i += 3 ) {\n\n\t\t\tfaces.push( triangles.slice( i, i + 3 ) );\n\n\t\t}\n\n\t\treturn faces;\n\n\t}\n\n};\n\nfunction removeDupEndPts( points ) {\n\n\tvar l = points.length;\n\n\tif ( l > 2 && points[ l - 1 ].equals( points[ 0 ] ) ) {\n\n\t\tpoints.pop();\n\n\t}\n\n}\n\nfunction addContour( vertices, contour ) {\n\n\tfor ( var i = 0; i < contour.length; i ++ ) {\n\n\t\tvertices.push( contour[ i ].x );\n\t\tvertices.push( contour[ i ].y );\n\n\t}\n\n}\n\nexport { ShapeUtils };\n","/**\n * @author zz85 / http://www.lab4games.net/zz85/blog\n * minimal class for proxing functions to Path. Replaces old \"extractSubpaths()\"\n **/\n\nimport { Color } from '../../math/Color.js';\nimport { Path } from './Path.js';\nimport { Shape } from './Shape.js';\nimport { ShapeUtils } from '../ShapeUtils.js';\n\nfunction ShapePath() {\n\n\tthis.type = 'ShapePath';\n\n\tthis.color = new Color();\n\n\tthis.subPaths = [];\n\tthis.currentPath = null;\n\n}\n\nObject.assign( ShapePath.prototype, {\n\n\tmoveTo: function ( x, y ) {\n\n\t\tthis.currentPath = new Path();\n\t\tthis.subPaths.push( this.currentPath );\n\t\tthis.currentPath.moveTo( x, y );\n\n\t\treturn this;\n\n\t},\n\n\tlineTo: function ( x, y ) {\n\n\t\tthis.currentPath.lineTo( x, y );\n\n\t\treturn this;\n\n\t},\n\n\tquadraticCurveTo: function ( aCPx, aCPy, aX, aY ) {\n\n\t\tthis.currentPath.quadraticCurveTo( aCPx, aCPy, aX, aY );\n\n\t\treturn this;\n\n\t},\n\n\tbezierCurveTo: function ( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY ) {\n\n\t\tthis.currentPath.bezierCurveTo( aCP1x, aCP1y, aCP2x, aCP2y, aX, aY );\n\n\t\treturn this;\n\n\t},\n\n\tsplineThru: function ( pts ) {\n\n\t\tthis.currentPath.splineThru( pts );\n\n\t\treturn this;\n\n\t},\n\n\ttoShapes: function ( isCCW, noHoles ) {\n\n\t\tfunction toShapesNoHoles( inSubpaths ) {\n\n\t\t\tvar shapes = [];\n\n\t\t\tfor ( var i = 0, l = inSubpaths.length; i < l; i ++ ) {\n\n\t\t\t\tvar tmpPath = inSubpaths[ i ];\n\n\t\t\t\tvar tmpShape = new Shape();\n\t\t\t\ttmpShape.curves = tmpPath.curves;\n\n\t\t\t\tshapes.push( tmpShape );\n\n\t\t\t}\n\n\t\t\treturn shapes;\n\n\t\t}\n\n\t\tfunction isPointInsidePolygon( inPt, inPolygon ) {\n\n\t\t\tvar polyLen = inPolygon.length;\n\n\t\t\t// inPt on polygon contour => immediate success    or\n\t\t\t// toggling of inside/outside at every single! intersection point of an edge\n\t\t\t//  with the horizontal line through inPt, left of inPt\n\t\t\t//  not counting lowerY endpoints of edges and whole edges on that line\n\t\t\tvar inside = false;\n\t\t\tfor ( var p = polyLen - 1, q = 0; q < polyLen; p = q ++ ) {\n\n\t\t\t\tvar edgeLowPt = inPolygon[ p ];\n\t\t\t\tvar edgeHighPt = inPolygon[ q ];\n\n\t\t\t\tvar edgeDx = edgeHighPt.x - edgeLowPt.x;\n\t\t\t\tvar edgeDy = edgeHighPt.y - edgeLowPt.y;\n\n\t\t\t\tif ( Math.abs( edgeDy ) > Number.EPSILON ) {\n\n\t\t\t\t\t// not parallel\n\t\t\t\t\tif ( edgeDy < 0 ) {\n\n\t\t\t\t\t\tedgeLowPt = inPolygon[ q ]; edgeDx = - edgeDx;\n\t\t\t\t\t\tedgeHighPt = inPolygon[ p ]; edgeDy = - edgeDy;\n\n\t\t\t\t\t}\n\t\t\t\t\tif ( ( inPt.y < edgeLowPt.y ) || ( inPt.y > edgeHighPt.y ) ) \t\tcontinue;\n\n\t\t\t\t\tif ( inPt.y === edgeLowPt.y ) {\n\n\t\t\t\t\t\tif ( inPt.x === edgeLowPt.x )\t\treturn\ttrue;\t\t// inPt is on contour ?\n\t\t\t\t\t\t// continue;\t\t\t\t// no intersection or edgeLowPt => doesn't count !!!\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tvar perpEdge = edgeDy * ( inPt.x - edgeLowPt.x ) - edgeDx * ( inPt.y - edgeLowPt.y );\n\t\t\t\t\t\tif ( perpEdge === 0 )\t\t\t\treturn\ttrue;\t\t// inPt is on contour ?\n\t\t\t\t\t\tif ( perpEdge < 0 ) \t\t\t\tcontinue;\n\t\t\t\t\t\tinside = ! inside;\t\t// true intersection left of inPt\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// parallel or collinear\n\t\t\t\t\tif ( inPt.y !== edgeLowPt.y ) \t\tcontinue;\t\t\t// parallel\n\t\t\t\t\t// edge lies on the same horizontal line as inPt\n\t\t\t\t\tif ( ( ( edgeHighPt.x <= inPt.x ) && ( inPt.x <= edgeLowPt.x ) ) ||\n\t\t\t\t\t\t ( ( edgeLowPt.x <= inPt.x ) && ( inPt.x <= edgeHighPt.x ) ) )\t\treturn\ttrue;\t// inPt: Point on contour !\n\t\t\t\t\t// continue;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn\tinside;\n\n\t\t}\n\n\t\tvar isClockWise = ShapeUtils.isClockWise;\n\n\t\tvar subPaths = this.subPaths;\n\t\tif ( subPaths.length === 0 ) return [];\n\n\t\tif ( noHoles === true )\treturn\ttoShapesNoHoles( subPaths );\n\n\n\t\tvar solid, tmpPath, tmpShape, shapes = [];\n\n\t\tif ( subPaths.length === 1 ) {\n\n\t\t\ttmpPath = subPaths[ 0 ];\n\t\t\ttmpShape = new Shape();\n\t\t\ttmpShape.curves = tmpPath.curves;\n\t\t\tshapes.push( tmpShape );\n\t\t\treturn shapes;\n\n\t\t}\n\n\t\tvar holesFirst = ! isClockWise( subPaths[ 0 ].getPoints() );\n\t\tholesFirst = isCCW ? ! holesFirst : holesFirst;\n\n\t\t// console.log(\"Holes first\", holesFirst);\n\n\t\tvar betterShapeHoles = [];\n\t\tvar newShapes = [];\n\t\tvar newShapeHoles = [];\n\t\tvar mainIdx = 0;\n\t\tvar tmpPoints;\n\n\t\tnewShapes[ mainIdx ] = undefined;\n\t\tnewShapeHoles[ mainIdx ] = [];\n\n\t\tfor ( var i = 0, l = subPaths.length; i < l; i ++ ) {\n\n\t\t\ttmpPath = subPaths[ i ];\n\t\t\ttmpPoints = tmpPath.getPoints();\n\t\t\tsolid = isClockWise( tmpPoints );\n\t\t\tsolid = isCCW ? ! solid : solid;\n\n\t\t\tif ( solid ) {\n\n\t\t\t\tif ( ( ! holesFirst ) && ( newShapes[ mainIdx ] ) )\tmainIdx ++;\n\n\t\t\t\tnewShapes[ mainIdx ] = { s: new Shape(), p: tmpPoints };\n\t\t\t\tnewShapes[ mainIdx ].s.curves = tmpPath.curves;\n\n\t\t\t\tif ( holesFirst )\tmainIdx ++;\n\t\t\t\tnewShapeHoles[ mainIdx ] = [];\n\n\t\t\t\t//console.log('cw', i);\n\n\t\t\t} else {\n\n\t\t\t\tnewShapeHoles[ mainIdx ].push( { h: tmpPath, p: tmpPoints[ 0 ] } );\n\n\t\t\t\t//console.log('ccw', i);\n\n\t\t\t}\n\n\t\t}\n\n\t\t// only Holes? -> probably all Shapes with wrong orientation\n\t\tif ( ! newShapes[ 0 ] )\treturn\ttoShapesNoHoles( subPaths );\n\n\n\t\tif ( newShapes.length > 1 ) {\n\n\t\t\tvar ambiguous = false;\n\t\t\tvar toChange = [];\n\n\t\t\tfor ( var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\n\n\t\t\t\tbetterShapeHoles[ sIdx ] = [];\n\n\t\t\t}\n\n\t\t\tfor ( var sIdx = 0, sLen = newShapes.length; sIdx < sLen; sIdx ++ ) {\n\n\t\t\t\tvar sho = newShapeHoles[ sIdx ];\n\n\t\t\t\tfor ( var hIdx = 0; hIdx < sho.length; hIdx ++ ) {\n\n\t\t\t\t\tvar ho = sho[ hIdx ];\n\t\t\t\t\tvar hole_unassigned = true;\n\n\t\t\t\t\tfor ( var s2Idx = 0; s2Idx < newShapes.length; s2Idx ++ ) {\n\n\t\t\t\t\t\tif ( isPointInsidePolygon( ho.p, newShapes[ s2Idx ].p ) ) {\n\n\t\t\t\t\t\t\tif ( sIdx !== s2Idx )\ttoChange.push( { froms: sIdx, tos: s2Idx, hole: hIdx } );\n\t\t\t\t\t\t\tif ( hole_unassigned ) {\n\n\t\t\t\t\t\t\t\thole_unassigned = false;\n\t\t\t\t\t\t\t\tbetterShapeHoles[ s2Idx ].push( ho );\n\n\t\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t\tambiguous = true;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\t\t\t\t\tif ( hole_unassigned ) {\n\n\t\t\t\t\t\tbetterShapeHoles[ sIdx ].push( ho );\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t\t// console.log(\"ambiguous: \", ambiguous);\n\t\t\tif ( toChange.length > 0 ) {\n\n\t\t\t\t// console.log(\"to change: \", toChange);\n\t\t\t\tif ( ! ambiguous )\tnewShapeHoles = betterShapeHoles;\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar tmpHoles;\n\n\t\tfor ( var i = 0, il = newShapes.length; i < il; i ++ ) {\n\n\t\t\ttmpShape = newShapes[ i ].s;\n\t\t\tshapes.push( tmpShape );\n\t\t\ttmpHoles = newShapeHoles[ i ];\n\n\t\t\tfor ( var j = 0, jl = tmpHoles.length; j < jl; j ++ ) {\n\n\t\t\t\ttmpShape.holes.push( tmpHoles[ j ].h );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//console.log(\"shape\", shapes);\n\n\t\treturn shapes;\n\n\t}\n\n} );\n\n\nexport { ShapePath };\n","import { EventDispatcher } from '../core/EventDispatcher.js';\nimport { FrontSide, FlatShading, NormalBlending, LessEqualDepth, AddEquation, OneMinusSrcAlphaFactor, SrcAlphaFactor, AlwaysStencilFunc, KeepStencilOp } from '../constants.js';\nimport { MathUtils } from '../math/MathUtils.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nvar materialId = 0;\n\nfunction Material() {\n\n\tObject.defineProperty( this, 'id', { value: materialId ++ } );\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Material';\n\n\tthis.fog = true;\n\n\tthis.blending = NormalBlending;\n\tthis.side = FrontSide;\n\tthis.flatShading = false;\n\tthis.vertexColors = false;\n\n\tthis.opacity = 1;\n\tthis.transparent = false;\n\n\tthis.blendSrc = SrcAlphaFactor;\n\tthis.blendDst = OneMinusSrcAlphaFactor;\n\tthis.blendEquation = AddEquation;\n\tthis.blendSrcAlpha = null;\n\tthis.blendDstAlpha = null;\n\tthis.blendEquationAlpha = null;\n\n\tthis.depthFunc = LessEqualDepth;\n\tthis.depthTest = true;\n\tthis.depthWrite = true;\n\n\tthis.stencilWriteMask = 0xff;\n\tthis.stencilFunc = AlwaysStencilFunc;\n\tthis.stencilRef = 0;\n\tthis.stencilFuncMask = 0xff;\n\tthis.stencilFail = KeepStencilOp;\n\tthis.stencilZFail = KeepStencilOp;\n\tthis.stencilZPass = KeepStencilOp;\n\tthis.stencilWrite = false;\n\n\tthis.clippingPlanes = null;\n\tthis.clipIntersection = false;\n\tthis.clipShadows = false;\n\n\tthis.shadowSide = null;\n\n\tthis.colorWrite = true;\n\n\tthis.precision = null; // override the renderer's default precision for this material\n\n\tthis.polygonOffset = false;\n\tthis.polygonOffsetFactor = 0;\n\tthis.polygonOffsetUnits = 0;\n\n\tthis.dithering = false;\n\n\tthis.alphaTest = 0;\n\tthis.premultipliedAlpha = false;\n\n\tthis.visible = true;\n\n\tthis.toneMapped = true;\n\n\tthis.userData = {};\n\n\tthis.version = 0;\n\n}\n\nMaterial.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Material,\n\n\tisMaterial: true,\n\n\tonBeforeCompile: function () {},\n\n\tsetValues: function ( values ) {\n\n\t\tif ( values === undefined ) return;\n\n\t\tfor ( var key in values ) {\n\n\t\t\tvar newValue = values[ key ];\n\n\t\t\tif ( newValue === undefined ) {\n\n\t\t\t\tconsole.warn( \"THREE.Material: '\" + key + \"' parameter is undefined.\" );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\t// for backward compatability if shading is set in the constructor\n\t\t\tif ( key === 'shading' ) {\n\n\t\t\t\tconsole.warn( 'THREE.' + this.type + ': .shading has been removed. Use the boolean .flatShading instead.' );\n\t\t\t\tthis.flatShading = ( newValue === FlatShading ) ? true : false;\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tvar currentValue = this[ key ];\n\n\t\t\tif ( currentValue === undefined ) {\n\n\t\t\t\tconsole.warn( \"THREE.\" + this.type + \": '\" + key + \"' is not a property of this material.\" );\n\t\t\t\tcontinue;\n\n\t\t\t}\n\n\t\t\tif ( currentValue && currentValue.isColor ) {\n\n\t\t\t\tcurrentValue.set( newValue );\n\n\t\t\t} else if ( ( currentValue && currentValue.isVector3 ) && ( newValue && newValue.isVector3 ) ) {\n\n\t\t\t\tcurrentValue.copy( newValue );\n\n\t\t\t} else {\n\n\t\t\t\tthis[ key ] = newValue;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar isRoot = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( isRoot ) {\n\n\t\t\tmeta = {\n\t\t\t\ttextures: {},\n\t\t\t\timages: {}\n\t\t\t};\n\n\t\t}\n\n\t\tvar data = {\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Material',\n\t\t\t\tgenerator: 'Material.toJSON'\n\t\t\t}\n\t\t};\n\n\t\t// standard Material serialization\n\t\tdata.uuid = this.uuid;\n\t\tdata.type = this.type;\n\n\t\tif ( this.name !== '' ) data.name = this.name;\n\n\t\tif ( this.color && this.color.isColor ) data.color = this.color.getHex();\n\n\t\tif ( this.roughness !== undefined ) data.roughness = this.roughness;\n\t\tif ( this.metalness !== undefined ) data.metalness = this.metalness;\n\n\t\tif ( this.sheen && this.sheen.isColor ) data.sheen = this.sheen.getHex();\n\t\tif ( this.emissive && this.emissive.isColor ) data.emissive = this.emissive.getHex();\n\t\tif ( this.emissiveIntensity && this.emissiveIntensity !== 1 ) data.emissiveIntensity = this.emissiveIntensity;\n\n\t\tif ( this.specular && this.specular.isColor ) data.specular = this.specular.getHex();\n\t\tif ( this.shininess !== undefined ) data.shininess = this.shininess;\n\t\tif ( this.clearcoat !== undefined ) data.clearcoat = this.clearcoat;\n\t\tif ( this.clearcoatRoughness !== undefined ) data.clearcoatRoughness = this.clearcoatRoughness;\n\n\t\tif ( this.clearcoatMap && this.clearcoatMap.isTexture ) {\n\n\t\t\tdata.clearcoatMap = this.clearcoatMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.clearcoatRoughnessMap && this.clearcoatRoughnessMap.isTexture ) {\n\n\t\t\tdata.clearcoatRoughnessMap = this.clearcoatRoughnessMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.clearcoatNormalMap && this.clearcoatNormalMap.isTexture ) {\n\n\t\t\tdata.clearcoatNormalMap = this.clearcoatNormalMap.toJSON( meta ).uuid;\n\t\t\tdata.clearcoatNormalScale = this.clearcoatNormalScale.toArray();\n\n\t\t}\n\n\t\tif ( this.map && this.map.isTexture ) data.map = this.map.toJSON( meta ).uuid;\n\t\tif ( this.matcap && this.matcap.isTexture ) data.matcap = this.matcap.toJSON( meta ).uuid;\n\t\tif ( this.alphaMap && this.alphaMap.isTexture ) data.alphaMap = this.alphaMap.toJSON( meta ).uuid;\n\t\tif ( this.lightMap && this.lightMap.isTexture ) data.lightMap = this.lightMap.toJSON( meta ).uuid;\n\n\t\tif ( this.aoMap && this.aoMap.isTexture ) {\n\n\t\t\tdata.aoMap = this.aoMap.toJSON( meta ).uuid;\n\t\t\tdata.aoMapIntensity = this.aoMapIntensity;\n\n\t\t}\n\n\t\tif ( this.bumpMap && this.bumpMap.isTexture ) {\n\n\t\t\tdata.bumpMap = this.bumpMap.toJSON( meta ).uuid;\n\t\t\tdata.bumpScale = this.bumpScale;\n\n\t\t}\n\n\t\tif ( this.normalMap && this.normalMap.isTexture ) {\n\n\t\t\tdata.normalMap = this.normalMap.toJSON( meta ).uuid;\n\t\t\tdata.normalMapType = this.normalMapType;\n\t\t\tdata.normalScale = this.normalScale.toArray();\n\n\t\t}\n\n\t\tif ( this.displacementMap && this.displacementMap.isTexture ) {\n\n\t\t\tdata.displacementMap = this.displacementMap.toJSON( meta ).uuid;\n\t\t\tdata.displacementScale = this.displacementScale;\n\t\t\tdata.displacementBias = this.displacementBias;\n\n\t\t}\n\n\t\tif ( this.roughnessMap && this.roughnessMap.isTexture ) data.roughnessMap = this.roughnessMap.toJSON( meta ).uuid;\n\t\tif ( this.metalnessMap && this.metalnessMap.isTexture ) data.metalnessMap = this.metalnessMap.toJSON( meta ).uuid;\n\n\t\tif ( this.emissiveMap && this.emissiveMap.isTexture ) data.emissiveMap = this.emissiveMap.toJSON( meta ).uuid;\n\t\tif ( this.specularMap && this.specularMap.isTexture ) data.specularMap = this.specularMap.toJSON( meta ).uuid;\n\n\t\tif ( this.envMap && this.envMap.isTexture ) {\n\n\t\t\tdata.envMap = this.envMap.toJSON( meta ).uuid;\n\t\t\tdata.reflectivity = this.reflectivity; // Scale behind envMap\n\t\t\tdata.refractionRatio = this.refractionRatio;\n\n\t\t\tif ( this.combine !== undefined ) data.combine = this.combine;\n\t\t\tif ( this.envMapIntensity !== undefined ) data.envMapIntensity = this.envMapIntensity;\n\n\t\t}\n\n\t\tif ( this.gradientMap && this.gradientMap.isTexture ) {\n\n\t\t\tdata.gradientMap = this.gradientMap.toJSON( meta ).uuid;\n\n\t\t}\n\n\t\tif ( this.size !== undefined ) data.size = this.size;\n\t\tif ( this.sizeAttenuation !== undefined ) data.sizeAttenuation = this.sizeAttenuation;\n\n\t\tif ( this.blending !== NormalBlending ) data.blending = this.blending;\n\t\tif ( this.flatShading === true ) data.flatShading = this.flatShading;\n\t\tif ( this.side !== FrontSide ) data.side = this.side;\n\t\tif ( this.vertexColors ) data.vertexColors = true;\n\n\t\tif ( this.opacity < 1 ) data.opacity = this.opacity;\n\t\tif ( this.transparent === true ) data.transparent = this.transparent;\n\n\t\tdata.depthFunc = this.depthFunc;\n\t\tdata.depthTest = this.depthTest;\n\t\tdata.depthWrite = this.depthWrite;\n\n\t\tdata.stencilWrite = this.stencilWrite;\n\t\tdata.stencilWriteMask = this.stencilWriteMask;\n\t\tdata.stencilFunc = this.stencilFunc;\n\t\tdata.stencilRef = this.stencilRef;\n\t\tdata.stencilFuncMask = this.stencilFuncMask;\n\t\tdata.stencilFail = this.stencilFail;\n\t\tdata.stencilZFail = this.stencilZFail;\n\t\tdata.stencilZPass = this.stencilZPass;\n\n\t\t// rotation (SpriteMaterial)\n\t\tif ( this.rotation && this.rotation !== 0 ) data.rotation = this.rotation;\n\n\t\tif ( this.polygonOffset === true ) data.polygonOffset = true;\n\t\tif ( this.polygonOffsetFactor !== 0 ) data.polygonOffsetFactor = this.polygonOffsetFactor;\n\t\tif ( this.polygonOffsetUnits !== 0 ) data.polygonOffsetUnits = this.polygonOffsetUnits;\n\n\t\tif ( this.linewidth && this.linewidth !== 1 ) data.linewidth = this.linewidth;\n\t\tif ( this.dashSize !== undefined ) data.dashSize = this.dashSize;\n\t\tif ( this.gapSize !== undefined ) data.gapSize = this.gapSize;\n\t\tif ( this.scale !== undefined ) data.scale = this.scale;\n\n\t\tif ( this.dithering === true ) data.dithering = true;\n\n\t\tif ( this.alphaTest > 0 ) data.alphaTest = this.alphaTest;\n\t\tif ( this.premultipliedAlpha === true ) data.premultipliedAlpha = this.premultipliedAlpha;\n\n\t\tif ( this.wireframe === true ) data.wireframe = this.wireframe;\n\t\tif ( this.wireframeLinewidth > 1 ) data.wireframeLinewidth = this.wireframeLinewidth;\n\t\tif ( this.wireframeLinecap !== 'round' ) data.wireframeLinecap = this.wireframeLinecap;\n\t\tif ( this.wireframeLinejoin !== 'round' ) data.wireframeLinejoin = this.wireframeLinejoin;\n\n\t\tif ( this.morphTargets === true ) data.morphTargets = true;\n\t\tif ( this.morphNormals === true ) data.morphNormals = true;\n\t\tif ( this.skinning === true ) data.skinning = true;\n\n\t\tif ( this.visible === false ) data.visible = false;\n\n\t\tif ( this.toneMapped === false ) data.toneMapped = false;\n\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) data.userData = this.userData;\n\n\t\t// TODO: Copied from Object3D.toJSON\n\n\t\tfunction extractFromCache( cache ) {\n\n\t\t\tvar values = [];\n\n\t\t\tfor ( var key in cache ) {\n\n\t\t\t\tvar data = cache[ key ];\n\t\t\t\tdelete data.metadata;\n\t\t\t\tvalues.push( data );\n\n\t\t\t}\n\n\t\t\treturn values;\n\n\t\t}\n\n\t\tif ( isRoot ) {\n\n\t\t\tvar textures = extractFromCache( meta.textures );\n\t\t\tvar images = extractFromCache( meta.images );\n\n\t\t\tif ( textures.length > 0 ) data.textures = textures;\n\t\t\tif ( images.length > 0 ) data.images = images;\n\n\t\t}\n\n\t\treturn data;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.fog = source.fog;\n\n\t\tthis.blending = source.blending;\n\t\tthis.side = source.side;\n\t\tthis.flatShading = source.flatShading;\n\t\tthis.vertexColors = source.vertexColors;\n\n\t\tthis.opacity = source.opacity;\n\t\tthis.transparent = source.transparent;\n\n\t\tthis.blendSrc = source.blendSrc;\n\t\tthis.blendDst = source.blendDst;\n\t\tthis.blendEquation = source.blendEquation;\n\t\tthis.blendSrcAlpha = source.blendSrcAlpha;\n\t\tthis.blendDstAlpha = source.blendDstAlpha;\n\t\tthis.blendEquationAlpha = source.blendEquationAlpha;\n\n\t\tthis.depthFunc = source.depthFunc;\n\t\tthis.depthTest = source.depthTest;\n\t\tthis.depthWrite = source.depthWrite;\n\n\t\tthis.stencilWriteMask = source.stencilWriteMask;\n\t\tthis.stencilFunc = source.stencilFunc;\n\t\tthis.stencilRef = source.stencilRef;\n\t\tthis.stencilFuncMask = source.stencilFuncMask;\n\t\tthis.stencilFail = source.stencilFail;\n\t\tthis.stencilZFail = source.stencilZFail;\n\t\tthis.stencilZPass = source.stencilZPass;\n\t\tthis.stencilWrite = source.stencilWrite;\n\n\t\tvar srcPlanes = source.clippingPlanes,\n\t\t\tdstPlanes = null;\n\n\t\tif ( srcPlanes !== null ) {\n\n\t\t\tvar n = srcPlanes.length;\n\t\t\tdstPlanes = new Array( n );\n\n\t\t\tfor ( var i = 0; i !== n; ++ i )\n\t\t\t\tdstPlanes[ i ] = srcPlanes[ i ].clone();\n\n\t\t}\n\n\t\tthis.clippingPlanes = dstPlanes;\n\t\tthis.clipIntersection = source.clipIntersection;\n\t\tthis.clipShadows = source.clipShadows;\n\n\t\tthis.shadowSide = source.shadowSide;\n\n\t\tthis.colorWrite = source.colorWrite;\n\n\t\tthis.precision = source.precision;\n\n\t\tthis.polygonOffset = source.polygonOffset;\n\t\tthis.polygonOffsetFactor = source.polygonOffsetFactor;\n\t\tthis.polygonOffsetUnits = source.polygonOffsetUnits;\n\n\t\tthis.dithering = source.dithering;\n\n\t\tthis.alphaTest = source.alphaTest;\n\t\tthis.premultipliedAlpha = source.premultipliedAlpha;\n\n\t\tthis.visible = source.visible;\n\n\t\tthis.toneMapped = source.toneMapped;\n\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\treturn this;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\nObject.defineProperty( Material.prototype, 'needsUpdate', {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\nexport { Material };\n","import { Sphere } from '../math/Sphere.js';\nimport { Ray } from '../math/Ray.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { Object3D } from '../core/Object3D.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { PointsMaterial } from '../materials/PointsMaterial.js';\nimport { BufferGeometry } from '../core/BufferGeometry.js';\n\n/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nvar _inverseMatrix = new Matrix4();\nvar _ray = new Ray();\nvar _sphere = new Sphere();\nvar _position = new Vector3();\n\nfunction Points( geometry, material ) {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Points';\n\n\tthis.geometry = geometry !== undefined ? geometry : new BufferGeometry();\n\tthis.material = material !== undefined ? material : new PointsMaterial();\n\n\tthis.updateMorphTargets();\n\n}\n\nPoints.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Points,\n\n\tisPoints: true,\n\n\traycast: function ( raycaster, intersects ) {\n\n\t\tvar geometry = this.geometry;\n\t\tvar matrixWorld = this.matrixWorld;\n\t\tvar threshold = raycaster.params.Points.threshold;\n\n\t\t// Checking boundingSphere distance to ray\n\n\t\tif ( geometry.boundingSphere === null ) geometry.computeBoundingSphere();\n\n\t\t_sphere.copy( geometry.boundingSphere );\n\t\t_sphere.applyMatrix4( matrixWorld );\n\t\t_sphere.radius += threshold;\n\n\t\tif ( raycaster.ray.intersectsSphere( _sphere ) === false ) return;\n\n\t\t//\n\n\t\t_inverseMatrix.getInverse( matrixWorld );\n\t\t_ray.copy( raycaster.ray ).applyMatrix4( _inverseMatrix );\n\n\t\tvar localThreshold = threshold / ( ( this.scale.x + this.scale.y + this.scale.z ) / 3 );\n\t\tvar localThresholdSq = localThreshold * localThreshold;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tvar index = geometry.index;\n\t\t\tvar attributes = geometry.attributes;\n\t\t\tvar positions = attributes.position.array;\n\n\t\t\tif ( index !== null ) {\n\n\t\t\t\tvar indices = index.array;\n\n\t\t\t\tfor ( var i = 0, il = indices.length; i < il; i ++ ) {\n\n\t\t\t\t\tvar a = indices[ i ];\n\n\t\t\t\t\t_position.fromArray( positions, a * 3 );\n\n\t\t\t\t\ttestPoint( _position, a, localThresholdSq, matrixWorld, raycaster, intersects, this );\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\tfor ( var i = 0, l = positions.length / 3; i < l; i ++ ) {\n\n\t\t\t\t\t_position.fromArray( positions, i * 3 );\n\n\t\t\t\t\ttestPoint( _position, i, localThresholdSq, matrixWorld, raycaster, intersects, this );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tvar vertices = geometry.vertices;\n\n\t\t\tfor ( var i = 0, l = vertices.length; i < l; i ++ ) {\n\n\t\t\t\ttestPoint( vertices[ i ], i, localThresholdSq, matrixWorld, raycaster, intersects, this );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tupdateMorphTargets: function () {\n\n\t\tvar geometry = this.geometry;\n\t\tvar m, ml, name;\n\n\t\tif ( geometry.isBufferGeometry ) {\n\n\t\t\tvar morphAttributes = geometry.morphAttributes;\n\t\t\tvar keys = Object.keys( morphAttributes );\n\n\t\t\tif ( keys.length > 0 ) {\n\n\t\t\t\tvar morphAttribute = morphAttributes[ keys[ 0 ] ];\n\n\t\t\t\tif ( morphAttribute !== undefined ) {\n\n\t\t\t\t\tthis.morphTargetInfluences = [];\n\t\t\t\t\tthis.morphTargetDictionary = {};\n\n\t\t\t\t\tfor ( m = 0, ml = morphAttribute.length; m < ml; m ++ ) {\n\n\t\t\t\t\t\tname = morphAttribute[ m ].name || String( m );\n\n\t\t\t\t\t\tthis.morphTargetInfluences.push( 0 );\n\t\t\t\t\t\tthis.morphTargetDictionary[ name ] = m;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tvar morphTargets = geometry.morphTargets;\n\n\t\t\tif ( morphTargets !== undefined && morphTargets.length > 0 ) {\n\n\t\t\t\tconsole.error( 'THREE.Points.updateMorphTargets() does not support THREE.Geometry. Use THREE.BufferGeometry instead.' );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.geometry, this.material ).copy( this );\n\n\t}\n\n} );\n\nfunction testPoint( point, index, localThresholdSq, matrixWorld, raycaster, intersects, object ) {\n\n\tvar rayPointDistanceSq = _ray.distanceSqToPoint( point );\n\n\tif ( rayPointDistanceSq < localThresholdSq ) {\n\n\t\tvar intersectPoint = new Vector3();\n\n\t\t_ray.closestPointToPoint( point, intersectPoint );\n\t\tintersectPoint.applyMatrix4( matrixWorld );\n\n\t\tvar distance = raycaster.ray.origin.distanceTo( intersectPoint );\n\n\t\tif ( distance < raycaster.near || distance > raycaster.far ) return;\n\n\t\tintersects.push( {\n\n\t\t\tdistance: distance,\n\t\t\tdistanceToRay: Math.sqrt( rayPointDistanceSq ),\n\t\t\tpoint: intersectPoint,\n\t\t\tindex: index,\n\t\t\tface: null,\n\t\t\tobject: object\n\n\t\t} );\n\n\t}\n\n}\n\nexport { Points };\n","import { Vector3 } from '../math/Vector3.js';\n\n/**\n * @author benaadams / https://twitter.com/ben_a_adams\n */\n\nvar _vector = new Vector3();\n\nfunction InterleavedBufferAttribute( interleavedBuffer, itemSize, offset, normalized ) {\n\n\tthis.data = interleavedBuffer;\n\tthis.itemSize = itemSize;\n\tthis.offset = offset;\n\n\tthis.normalized = normalized === true;\n\n}\n\nObject.defineProperties( InterleavedBufferAttribute.prototype, {\n\n\tcount: {\n\n\t\tget: function () {\n\n\t\t\treturn this.data.count;\n\n\t\t}\n\n\t},\n\n\tarray: {\n\n\t\tget: function () {\n\n\t\t\treturn this.data.array;\n\n\t\t}\n\n\t}\n\n} );\n\nObject.assign( InterleavedBufferAttribute.prototype, {\n\n\tisInterleavedBufferAttribute: true,\n\n\tapplyMatrix4: function ( m ) {\n\n\t\tfor ( var i = 0, l = this.data.count; i < l; i ++ ) {\n\n\t\t\t_vector.x = this.getX( i );\n\t\t\t_vector.y = this.getY( i );\n\t\t\t_vector.z = this.getZ( i );\n\n\t\t\t_vector.applyMatrix4( m );\n\n\t\t\tthis.setXYZ( i, _vector.x, _vector.y, _vector.z );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( index, x ) {\n\n\t\tthis.data.array[ index * this.data.stride + this.offset ] = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( index, y ) {\n\n\t\tthis.data.array[ index * this.data.stride + this.offset + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetZ: function ( index, z ) {\n\n\t\tthis.data.array[ index * this.data.stride + this.offset + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetW: function ( index, w ) {\n\n\t\tthis.data.array[ index * this.data.stride + this.offset + 3 ] = w;\n\n\t\treturn this;\n\n\t},\n\n\tgetX: function ( index ) {\n\n\t\treturn this.data.array[ index * this.data.stride + this.offset ];\n\n\t},\n\n\tgetY: function ( index ) {\n\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 1 ];\n\n\t},\n\n\tgetZ: function ( index ) {\n\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 2 ];\n\n\t},\n\n\tgetW: function ( index ) {\n\n\t\treturn this.data.array[ index * this.data.stride + this.offset + 3 ];\n\n\t},\n\n\tsetXY: function ( index, x, y ) {\n\n\t\tindex = index * this.data.stride + this.offset;\n\n\t\tthis.data.array[ index + 0 ] = x;\n\t\tthis.data.array[ index + 1 ] = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZ: function ( index, x, y, z ) {\n\n\t\tindex = index * this.data.stride + this.offset;\n\n\t\tthis.data.array[ index + 0 ] = x;\n\t\tthis.data.array[ index + 1 ] = y;\n\t\tthis.data.array[ index + 2 ] = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetXYZW: function ( index, x, y, z, w ) {\n\n\t\tindex = index * this.data.stride + this.offset;\n\n\t\tthis.data.array[ index + 0 ] = x;\n\t\tthis.data.array[ index + 1 ] = y;\n\t\tthis.data.array[ index + 2 ] = z;\n\t\tthis.data.array[ index + 3 ] = w;\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { InterleavedBufferAttribute };\n","import { Vector3 } from './Vector3.js';\nimport { Plane } from './Plane.js';\n\n/**\n * @author bhouston / http://clara.io\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar _v0 = new Vector3();\nvar _v1 = new Vector3();\nvar _v2 = new Vector3();\nvar _v3 = new Vector3();\n\nvar _vab = new Vector3();\nvar _vac = new Vector3();\nvar _vbc = new Vector3();\nvar _vap = new Vector3();\nvar _vbp = new Vector3();\nvar _vcp = new Vector3();\n\nfunction Triangle( a, b, c ) {\n\n\tthis.a = ( a !== undefined ) ? a : new Vector3();\n\tthis.b = ( b !== undefined ) ? b : new Vector3();\n\tthis.c = ( c !== undefined ) ? c : new Vector3();\n\n}\n\nObject.assign( Triangle, {\n\n\tgetNormal: function ( a, b, c, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getNormal() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\ttarget.subVectors( c, b );\n\t\t_v0.subVectors( a, b );\n\t\ttarget.cross( _v0 );\n\n\t\tvar targetLengthSq = target.lengthSq();\n\t\tif ( targetLengthSq > 0 ) {\n\n\t\t\treturn target.multiplyScalar( 1 / Math.sqrt( targetLengthSq ) );\n\n\t\t}\n\n\t\treturn target.set( 0, 0, 0 );\n\n\t},\n\n\t// static/instance method to calculate barycentric coordinates\n\t// based on: http://www.blackpawn.com/texts/pointinpoly/default.html\n\tgetBarycoord: function ( point, a, b, c, target ) {\n\n\t\t_v0.subVectors( c, a );\n\t\t_v1.subVectors( b, a );\n\t\t_v2.subVectors( point, a );\n\n\t\tvar dot00 = _v0.dot( _v0 );\n\t\tvar dot01 = _v0.dot( _v1 );\n\t\tvar dot02 = _v0.dot( _v2 );\n\t\tvar dot11 = _v1.dot( _v1 );\n\t\tvar dot12 = _v1.dot( _v2 );\n\n\t\tvar denom = ( dot00 * dot11 - dot01 * dot01 );\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getBarycoord() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\t// collinear or singular triangle\n\t\tif ( denom === 0 ) {\n\n\t\t\t// arbitrary location outside of triangle?\n\t\t\t// not sure if this is the best idea, maybe should be returning undefined\n\t\t\treturn target.set( - 2, - 1, - 1 );\n\n\t\t}\n\n\t\tvar invDenom = 1 / denom;\n\t\tvar u = ( dot11 * dot02 - dot01 * dot12 ) * invDenom;\n\t\tvar v = ( dot00 * dot12 - dot01 * dot02 ) * invDenom;\n\n\t\t// barycentric coordinates must always sum to 1\n\t\treturn target.set( 1 - u - v, v, u );\n\n\t},\n\n\tcontainsPoint: function ( point, a, b, c ) {\n\n\t\tTriangle.getBarycoord( point, a, b, c, _v3 );\n\n\t\treturn ( _v3.x >= 0 ) && ( _v3.y >= 0 ) && ( ( _v3.x + _v3.y ) <= 1 );\n\n\t},\n\n\tgetUV: function ( point, p1, p2, p3, uv1, uv2, uv3, target ) {\n\n\t\tthis.getBarycoord( point, p1, p2, p3, _v3 );\n\n\t\ttarget.set( 0, 0 );\n\t\ttarget.addScaledVector( uv1, _v3.x );\n\t\ttarget.addScaledVector( uv2, _v3.y );\n\t\ttarget.addScaledVector( uv3, _v3.z );\n\n\t\treturn target;\n\n\t},\n\n\tisFrontFacing: function ( a, b, c, direction ) {\n\n\t\t_v0.subVectors( c, b );\n\t\t_v1.subVectors( a, b );\n\n\t\t// strictly front facing\n\t\treturn ( _v0.cross( _v1 ).dot( direction ) < 0 ) ? true : false;\n\n\t}\n\n} );\n\nObject.assign( Triangle.prototype, {\n\n\tset: function ( a, b, c ) {\n\n\t\tthis.a.copy( a );\n\t\tthis.b.copy( b );\n\t\tthis.c.copy( c );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPointsAndIndices: function ( points, i0, i1, i2 ) {\n\n\t\tthis.a.copy( points[ i0 ] );\n\t\tthis.b.copy( points[ i1 ] );\n\t\tthis.c.copy( points[ i2 ] );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( triangle ) {\n\n\t\tthis.a.copy( triangle.a );\n\t\tthis.b.copy( triangle.b );\n\t\tthis.c.copy( triangle.c );\n\n\t\treturn this;\n\n\t},\n\n\tgetArea: function () {\n\n\t\t_v0.subVectors( this.c, this.b );\n\t\t_v1.subVectors( this.a, this.b );\n\n\t\treturn _v0.cross( _v1 ).length() * 0.5;\n\n\t},\n\n\tgetMidpoint: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getMidpoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.addVectors( this.a, this.b ).add( this.c ).multiplyScalar( 1 / 3 );\n\n\t},\n\n\tgetNormal: function ( target ) {\n\n\t\treturn Triangle.getNormal( this.a, this.b, this.c, target );\n\n\t},\n\n\tgetPlane: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getPlane() target is now required' );\n\t\t\ttarget = new Plane();\n\n\t\t}\n\n\t\treturn target.setFromCoplanarPoints( this.a, this.b, this.c );\n\n\t},\n\n\tgetBarycoord: function ( point, target ) {\n\n\t\treturn Triangle.getBarycoord( point, this.a, this.b, this.c, target );\n\n\t},\n\n\tgetUV: function ( point, uv1, uv2, uv3, target ) {\n\n\t\treturn Triangle.getUV( point, this.a, this.b, this.c, uv1, uv2, uv3, target );\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\treturn Triangle.containsPoint( point, this.a, this.b, this.c );\n\n\t},\n\n\tisFrontFacing: function ( direction ) {\n\n\t\treturn Triangle.isFrontFacing( this.a, this.b, this.c, direction );\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\treturn box.intersectsTriangle( this );\n\n\t},\n\n\tclosestPointToPoint: function ( p, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .closestPointToPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tvar a = this.a, b = this.b, c = this.c;\n\t\tvar v, w;\n\n\t\t// algorithm thanks to Real-Time Collision Detection by Christer Ericson,\n\t\t// published by Morgan Kaufmann Publishers, (c) 2005 Elsevier Inc.,\n\t\t// under the accompanying license; see chapter 5.1.5 for detailed explanation.\n\t\t// basically, we're distinguishing which of the voronoi regions of the triangle\n\t\t// the point lies in with the minimum amount of redundant computation.\n\n\t\t_vab.subVectors( b, a );\n\t\t_vac.subVectors( c, a );\n\t\t_vap.subVectors( p, a );\n\t\tvar d1 = _vab.dot( _vap );\n\t\tvar d2 = _vac.dot( _vap );\n\t\tif ( d1 <= 0 && d2 <= 0 ) {\n\n\t\t\t// vertex region of A; barycentric coords (1, 0, 0)\n\t\t\treturn target.copy( a );\n\n\t\t}\n\n\t\t_vbp.subVectors( p, b );\n\t\tvar d3 = _vab.dot( _vbp );\n\t\tvar d4 = _vac.dot( _vbp );\n\t\tif ( d3 >= 0 && d4 <= d3 ) {\n\n\t\t\t// vertex region of B; barycentric coords (0, 1, 0)\n\t\t\treturn target.copy( b );\n\n\t\t}\n\n\t\tvar vc = d1 * d4 - d3 * d2;\n\t\tif ( vc <= 0 && d1 >= 0 && d3 <= 0 ) {\n\n\t\t\tv = d1 / ( d1 - d3 );\n\t\t\t// edge region of AB; barycentric coords (1-v, v, 0)\n\t\t\treturn target.copy( a ).addScaledVector( _vab, v );\n\n\t\t}\n\n\t\t_vcp.subVectors( p, c );\n\t\tvar d5 = _vab.dot( _vcp );\n\t\tvar d6 = _vac.dot( _vcp );\n\t\tif ( d6 >= 0 && d5 <= d6 ) {\n\n\t\t\t// vertex region of C; barycentric coords (0, 0, 1)\n\t\t\treturn target.copy( c );\n\n\t\t}\n\n\t\tvar vb = d5 * d2 - d1 * d6;\n\t\tif ( vb <= 0 && d2 >= 0 && d6 <= 0 ) {\n\n\t\t\tw = d2 / ( d2 - d6 );\n\t\t\t// edge region of AC; barycentric coords (1-w, 0, w)\n\t\t\treturn target.copy( a ).addScaledVector( _vac, w );\n\n\t\t}\n\n\t\tvar va = d3 * d6 - d5 * d4;\n\t\tif ( va <= 0 && ( d4 - d3 ) >= 0 && ( d5 - d6 ) >= 0 ) {\n\n\t\t\t_vbc.subVectors( c, b );\n\t\t\tw = ( d4 - d3 ) / ( ( d4 - d3 ) + ( d5 - d6 ) );\n\t\t\t// edge region of BC; barycentric coords (0, 1-w, w)\n\t\t\treturn target.copy( b ).addScaledVector( _vbc, w ); // edge region of BC\n\n\t\t}\n\n\t\t// face region\n\t\tvar denom = 1 / ( va + vb + vc );\n\t\t// u = va * denom\n\t\tv = vb * denom;\n\t\tw = vc * denom;\n\n\t\treturn target.copy( a ).addScaledVector( _vab, v ).addScaledVector( _vac, w );\n\n\t},\n\n\tequals: function ( triangle ) {\n\n\t\treturn triangle.a.equals( this.a ) && triangle.b.equals( this.b ) && triangle.c.equals( this.c );\n\n\t}\n\n} );\n\n\nexport { Triangle };\n"],"sourceRoot":""}