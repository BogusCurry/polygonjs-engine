{"version":3,"sources":["webpack://POLY/webpack/bootstrap","webpack://POLY/./src/engine/poly/ParamType.ts","webpack://POLY/./node_modules/tslib/tslib.es6.js","webpack://POLY/./node_modules/three/src/math/Vector3.js","webpack://POLY/./node_modules/lodash/isArray.js","webpack://POLY/./node_modules/three/src/constants.js","webpack://POLY/./node_modules/lodash/isString.js","webpack://POLY/./src/core/Walker.ts","webpack://POLY/./src/engine/poly/NodeEvent.ts","webpack://POLY/./src/engine/poly/ParamEvent.ts","webpack://POLY/./node_modules/lodash/isNumber.js","webpack://POLY/./node_modules/three/src/math/MathUtils.js","webpack://POLY/./src/engine/poly/RenderersController.ts","webpack://POLY/./src/engine/poly/NodesRegister.ts","webpack://POLY/./src/engine/Poly.ts","webpack://POLY/./node_modules/three/src/math/Vector2.js","webpack://POLY/./src/core/graph/DirtyController.ts","webpack://POLY/./src/core/graph/CoreGraphNode.ts","webpack://POLY/./src/engine/params/utils/EmitController.ts","webpack://POLY/./src/engine/params/utils/Serializer.ts","webpack://POLY/./src/engine/params/utils/states/TimeDependent.ts","webpack://POLY/./src/engine/params/utils/states/Error.ts","webpack://POLY/./src/engine/params/utils/StatesController.ts","webpack://POLY/./src/engine/params/_Base.ts","webpack://POLY/./src/core/String.ts","webpack://POLY/./node_modules/@dagrejs/graphlib/lib/lodash.js","webpack://POLY/./node_modules/lodash/isObject.js","webpack://POLY/./node_modules/lodash/isObjectLike.js","webpack://POLY/./node_modules/lodash/_root.js","webpack://POLY/./src/engine/params/_Multiple.ts","webpack://POLY/./node_modules/three/src/math/Quaternion.js","webpack://POLY/./node_modules/lodash/isArrayLike.js","webpack://POLY/./node_modules/lodash/keys.js","webpack://POLY/./node_modules/three/src/math/Color.js","webpack://POLY/./node_modules/three/src/core/Object3D.js","webpack://POLY/./node_modules/lodash/_baseGetTag.js","webpack://POLY/./node_modules/lodash/compact.js","webpack://POLY/./src/engine/params/ramp/RampValue.ts","webpack://POLY/./src/engine/params/Ramp.ts","webpack://POLY/./node_modules/three/src/math/Matrix4.js","webpack://POLY/./node_modules/lodash/uniq.js","webpack://POLY/./node_modules/lodash/sortBy.js","webpack://POLY/./node_modules/lodash/_getNative.js","webpack://POLY/./node_modules/lodash/toString.js","webpack://POLY/./src/engine/poly/InputCloneMode.ts","webpack://POLY/./src/engine/poly/NodeContext.ts","webpack://POLY/./node_modules/three/src/math/Vector4.js","webpack://POLY/./src/engine/nodes/utils/ContainerController.ts","webpack://POLY/./node_modules/three/src/math/Matrix3.js","webpack://POLY/./src/engine/containers/_Base.ts","webpack://POLY/./node_modules/lodash/_Symbol.js","webpack://POLY/./node_modules/lodash/_getTag.js","webpack://POLY/./node_modules/lodash/_baseIteratee.js","webpack://POLY/./src/engine/params/_Numeric.ts","webpack://POLY/./src/engine/nodes/utils/params/ParamsConfig.ts","webpack://POLY/./src/engine/nodes/utils/connections/ConnectionPointType.ts","webpack://POLY/./node_modules/lodash/_arrayMap.js","webpack://POLY/./node_modules/lodash/flatten.js","webpack://POLY/./node_modules/lodash/isBuffer.js","webpack://POLY/./node_modules/lodash/_baseUnary.js","webpack://POLY/./node_modules/lodash/identity.js","webpack://POLY/./node_modules/lodash/isSymbol.js","webpack://POLY/./node_modules/lodash/_baseEach.js","webpack://POLY/./node_modules/lodash/_baseFlatten.js","webpack://POLY/./node_modules/lodash/cloneDeep.js","webpack://POLY/./node_modules/lodash/isEqual.js","webpack://POLY/./src/engine/expressions/traversers/ParsedTree.ts","webpack://POLY/./node_modules/jsep/build/jsep.js","webpack://POLY/./src/engine/nodes/utils/UIData.ts","webpack://POLY/./src/engine/nodes/utils/states/Base.ts","webpack://POLY/./src/engine/nodes/utils/states/TimeDependent.ts","webpack://POLY/./src/engine/nodes/utils/states/Error.ts","webpack://POLY/./src/engine/nodes/utils/StatesController.ts","webpack://POLY/./src/engine/nodes/utils/NameController.ts","webpack://POLY/./src/engine/nodes/utils/hierarchy/ParentController.ts","webpack://POLY/./src/core/NodeSelection.ts","webpack://POLY/./src/engine/nodes/utils/hierarchy/ChildrenController.ts","webpack://POLY/./src/engine/nodes/utils/LifeCycleController.ts","webpack://POLY/./src/engine/nodes/utils/CookController.ts","webpack://POLY/./src/engine/nodes/utils/DependenciesController.ts","webpack://POLY/./src/engine/nodes/utils/params/ParamsController.ts","webpack://POLY/./src/engine/nodes/utils/params/ParamsValueAccessor.ts","webpack://POLY/./src/engine/nodes/utils/ProcessingContext.ts","webpack://POLY/./src/engine/nodes/utils/connections/ConnectionsController.ts","webpack://POLY/./src/engine/nodes/utils/connections/NodeConnection.ts","webpack://POLY/./src/engine/nodes/utils/connections/InputsController.ts","webpack://POLY/./src/engine/nodes/utils/connections/OutputsController.ts","webpack://POLY/./src/engine/nodes/utils/connections/IOController.ts","webpack://POLY/./src/engine/nodes/utils/params/ParamsAccessor.ts","webpack://POLY/./src/engine/nodes/_Base.ts","webpack://POLY/./node_modules/three/src/core/EventDispatcher.js","webpack://POLY/./node_modules/lodash/eq.js","webpack://POLY/./node_modules/lodash/isFunction.js","webpack://POLY/./node_modules/lodash/_copyObject.js","webpack://POLY/./node_modules/lodash/isArguments.js","webpack://POLY/./node_modules/lodash/isTypedArray.js","webpack://POLY/./node_modules/lodash/clone.js","webpack://POLY/./node_modules/lodash/isBoolean.js","webpack://POLY/./src/engine/params/String.ts","webpack://POLY/./node_modules/lodash/_ListCache.js","webpack://POLY/./node_modules/lodash/_assocIndexOf.js","webpack://POLY/./node_modules/lodash/_nativeCreate.js","webpack://POLY/./node_modules/lodash/_getMapData.js","webpack://POLY/./node_modules/lodash/_isPrototype.js","webpack://POLY/./node_modules/lodash/_arrayPush.js","webpack://POLY/./node_modules/lodash/_toKey.js","webpack://POLY/./node_modules/lodash/_hasUnicode.js","webpack://POLY/./node_modules/lodash/_baseIndexOf.js","webpack://POLY/./node_modules/lodash/values.js","webpack://POLY/./src/engine/nodes/utils/Serializer.ts","webpack://POLY/./src/core/math/Easing.ts","webpack://POLY/./src/engine/params/Float.ts","webpack://POLY/./src/core/DecomposedPath.ts","webpack://POLY/./src/engine/expressions/MethodDependency.ts","webpack://POLY/./src/engine/expressions/methods/_Base.ts","webpack://POLY/./src/engine/expressions/methods/bbox.ts","webpack://POLY/./src/engine/expressions/methods/_Module.ts","webpack://POLY/./src/engine/expressions/methods/ch.ts","webpack://POLY/./src/engine/expressions/methods/centroid.ts","webpack://POLY/./src/engine/expressions/methods/cop_res.ts","webpack://POLY/./src/engine/expressions/methods/local.ts","webpack://POLY/./src/engine/expressions/methods/opdigits.ts","webpack://POLY/./src/engine/expressions/methods/point.ts","webpack://POLY/./src/engine/expressions/methods/points_count.ts","webpack://POLY/./src/engine/expressions/methods/copy.ts","webpack://POLY/./src/engine/expressions/methods/str_chars_count.ts","webpack://POLY/./src/engine/expressions/methods/str_concat.ts","webpack://POLY/./src/engine/expressions/methods/str_index.ts","webpack://POLY/./src/engine/expressions/methods/str_sub.ts","webpack://POLY/./src/engine/expressions/traversers/_Base.ts","webpack://POLY/./src/engine/expressions/AttributeRequirementsController.ts","webpack://POLY/./src/engine/expressions/traversers/FunctionGenerator.ts","webpack://POLY/./src/engine/expressions/LiteralConstructsController.ts","webpack://POLY/./src/engine/expressions/traversers/ExpressionStringGenerator.ts","webpack://POLY/./src/engine/expressions/DependenciesController.ts","webpack://POLY/./src/engine/expressions/ExpressionManager.ts","webpack://POLY/./src/engine/params/utils/ExpressionController.ts","webpack://POLY/./src/engine/scene/utils/events/MouseEventsController.ts","webpack://POLY/./src/engine/scene/utils/events/_BaseEventsController.ts","webpack://POLY/./node_modules/three/src/extras/ImageUtils.js","webpack://POLY/./node_modules/three/src/textures/Texture.js","webpack://POLY/./node_modules/lodash/_baseRest.js","webpack://POLY/./node_modules/lodash/_Stack.js","webpack://POLY/./node_modules/lodash/_baseAssignValue.js","webpack://POLY/./node_modules/lodash/_getPrototype.js","webpack://POLY/./node_modules/lodash/_SetCache.js","webpack://POLY/./node_modules/lodash/_cacheHas.js","webpack://POLY/./node_modules/three/src/math/Interpolant.js","webpack://POLY/./node_modules/lodash/each.js","webpack://POLY/./node_modules/@dagrejs/graphlib/lib/graph.js","webpack://POLY/./node_modules/lodash/_Map.js","webpack://POLY/./node_modules/lodash/_MapCache.js","webpack://POLY/./node_modules/lodash/_arrayEach.js","webpack://POLY/(webpack)/buildin/module.js","webpack://POLY/./node_modules/lodash/_isIndex.js","webpack://POLY/./node_modules/lodash/isLength.js","webpack://POLY/./node_modules/lodash/_nodeUtil.js","webpack://POLY/./node_modules/lodash/_baseKeys.js","webpack://POLY/./node_modules/lodash/_getSymbols.js","webpack://POLY/./node_modules/lodash/_cloneArrayBuffer.js","webpack://POLY/./node_modules/lodash/_baseIsEqual.js","webpack://POLY/./node_modules/lodash/_setToArray.js","webpack://POLY/./node_modules/lodash/_isKey.js","webpack://POLY/./node_modules/lodash/_baseToString.js","webpack://POLY/./node_modules/lodash/_stringSize.js","webpack://POLY/./node_modules/lodash/_castSlice.js","webpack://POLY/./node_modules/lodash/_stringToArray.js","webpack://POLY/./src/engine/params/utils/OptionsController.ts","webpack://POLY/./node_modules/lodash/union.js","webpack://POLY/./node_modules/lodash/capitalize.js","webpack://POLY/./node_modules/lodash/upperFirst.js","webpack://POLY/./node_modules/lodash/includes.js","webpack://POLY/./node_modules/@dagrejs/graphlib/index.js","webpack://POLY/./node_modules/lodash/padEnd.js","webpack://POLY/./node_modules/lodash/camelCase.js","webpack://POLY/./src/engine/nodes/utils/connections/NamedConnectionPoint.ts","webpack://POLY/./src/core/MapUtils.ts","webpack://POLY/./node_modules/three/src/objects/Group.js","webpack://POLY/./node_modules/lodash/range.js","webpack://POLY/./node_modules/three/src/textures/DataTexture.js","webpack://POLY/./node_modules/lodash/keysIn.js","webpack://POLY/./node_modules/lodash/isArrayLikeObject.js","webpack://POLY/./src/core/math/_Module.ts","webpack://POLY/./node_modules/three/src/scenes/Scene.js","webpack://POLY/./src/core/geometry/Attribute.ts","webpack://POLY/./node_modules/lodash/_isIterateeCall.js","webpack://POLY/./node_modules/lodash/trim.js","webpack://POLY/./src/engine/poly/Assert.ts","webpack://POLY/./node_modules/lodash/_copyArray.js","webpack://POLY/./node_modules/lodash/_arrayIncludes.js","webpack://POLY/./node_modules/lodash/_arrayIncludesWith.js","webpack://POLY/./node_modules/lodash/isNaN.js","webpack://POLY/./src/engine/containers/Event.ts","webpack://POLY/./src/engine/nodes/event/_Base.ts","webpack://POLY/./node_modules/lodash/toInteger.js","webpack://POLY/./node_modules/lodash/difference.js","webpack://POLY/./node_modules/three/src/math/Triangle.js","webpack://POLY/./src/engine/params/OperatorPath.ts","webpack://POLY/./node_modules/three/src/math/Euler.js","webpack://POLY/./src/engine/params/Boolean.ts","webpack://POLY/./src/engine/params/Button.ts","webpack://POLY/./src/engine/params/Color.ts","webpack://POLY/./src/engine/params/Folder.ts","webpack://POLY/./src/engine/params/Integer.ts","webpack://POLY/./src/engine/params/Separator.ts","webpack://POLY/./src/engine/params/Vector2.ts","webpack://POLY/./src/engine/params/Vector3.ts","webpack://POLY/./src/engine/params/Vector4.ts","webpack://POLY/./src/engine/params/types/ParamConstructorByType.ts","webpack://POLY/./node_modules/three/src/math/Plane.js","webpack://POLY/./src/core/AsyncFunction.ts","webpack://POLY/./node_modules/three/src/core/Layers.js","webpack://POLY/./node_modules/lodash/_baseClone.js","webpack://POLY/./node_modules/lodash/_freeGlobal.js","webpack://POLY/./node_modules/lodash/_toSource.js","webpack://POLY/./node_modules/lodash/_assignValue.js","webpack://POLY/./node_modules/lodash/_defineProperty.js","webpack://POLY/./node_modules/lodash/_arrayLikeKeys.js","webpack://POLY/./node_modules/lodash/_overArg.js","webpack://POLY/./node_modules/lodash/_arrayFilter.js","webpack://POLY/./node_modules/lodash/stubArray.js","webpack://POLY/./node_modules/lodash/_getSymbolsIn.js","webpack://POLY/./node_modules/lodash/_getAllKeys.js","webpack://POLY/./node_modules/lodash/_baseGetAllKeys.js","webpack://POLY/./node_modules/lodash/_Set.js","webpack://POLY/./node_modules/lodash/_Uint8Array.js","webpack://POLY/./node_modules/lodash/_baseCreate.js","webpack://POLY/./node_modules/lodash/constant.js","webpack://POLY/./node_modules/lodash/_baseForOwn.js","webpack://POLY/./node_modules/lodash/_equalArrays.js","webpack://POLY/./node_modules/lodash/_isStrictComparable.js","webpack://POLY/./node_modules/lodash/_matchesStrictComparable.js","webpack://POLY/./node_modules/lodash/_baseGet.js","webpack://POLY/./node_modules/lodash/_castPath.js","webpack://POLY/./node_modules/lodash/_hasPath.js","webpack://POLY/./node_modules/lodash/_baseProperty.js","webpack://POLY/./node_modules/lodash/_baseMap.js","webpack://POLY/./node_modules/lodash/_arrayReduce.js","webpack://POLY/./node_modules/lodash/_baseUniq.js","webpack://POLY/./node_modules/@dagrejs/graphlib/lib/alg/dijkstra.js","webpack://POLY/./node_modules/@dagrejs/graphlib/lib/data/priority-queue.js","webpack://POLY/./node_modules/@dagrejs/graphlib/lib/alg/tarjan.js","webpack://POLY/./node_modules/@dagrejs/graphlib/lib/alg/topsort.js","webpack://POLY/./node_modules/@dagrejs/graphlib/lib/alg/dfs.js","webpack://POLY/./src/engine/nodes/event/MouseEvent.ts","webpack://POLY/./node_modules/lodash/toFinite.js","webpack://POLY/./node_modules/lodash/_createCompounder.js","webpack://POLY/./node_modules/three/src/math/interpolants/CubicInterpolant.js","webpack://POLY/./node_modules/lodash/concat.js","webpack://POLY/./node_modules/lodash/snakeCase.js","webpack://POLY/./node_modules/lodash/groupBy.js","webpack://POLY/./node_modules/lodash/_cloneBuffer.js","webpack://POLY/./node_modules/lodash/_cloneTypedArray.js","webpack://POLY/./node_modules/lodash/_initCloneObject.js","webpack://POLY/./node_modules/lodash/_baseFor.js","webpack://POLY/(webpack)/buildin/global.js","webpack://POLY/./node_modules/lodash/_baseTimes.js","webpack://POLY/./node_modules/lodash/_castFunction.js","webpack://POLY/./node_modules/lodash/map.js","webpack://POLY/./node_modules/lodash/_baseSlice.js","webpack://POLY/./node_modules/@dagrejs/graphlib/lib/index.js","webpack://POLY/./node_modules/lodash/_listCacheClear.js","webpack://POLY/./node_modules/lodash/_listCacheDelete.js","webpack://POLY/./node_modules/lodash/_listCacheGet.js","webpack://POLY/./node_modules/lodash/_listCacheHas.js","webpack://POLY/./node_modules/lodash/_listCacheSet.js","webpack://POLY/./node_modules/lodash/_stackClear.js","webpack://POLY/./node_modules/lodash/_stackDelete.js","webpack://POLY/./node_modules/lodash/_stackGet.js","webpack://POLY/./node_modules/lodash/_stackHas.js","webpack://POLY/./node_modules/lodash/_stackSet.js","webpack://POLY/./node_modules/lodash/_baseIsNative.js","webpack://POLY/./node_modules/lodash/_getRawTag.js","webpack://POLY/./node_modules/lodash/_objectToString.js","webpack://POLY/./node_modules/lodash/_isMasked.js","webpack://POLY/./node_modules/lodash/_coreJsData.js","webpack://POLY/./node_modules/lodash/_getValue.js","webpack://POLY/./node_modules/lodash/_mapCacheClear.js","webpack://POLY/./node_modules/lodash/_Hash.js","webpack://POLY/./node_modules/lodash/_hashClear.js","webpack://POLY/./node_modules/lodash/_hashDelete.js","webpack://POLY/./node_modules/lodash/_hashGet.js","webpack://POLY/./node_modules/lodash/_hashHas.js","webpack://POLY/./node_modules/lodash/_hashSet.js","webpack://POLY/./node_modules/lodash/_mapCacheDelete.js","webpack://POLY/./node_modules/lodash/_isKeyable.js","webpack://POLY/./node_modules/lodash/_mapCacheGet.js","webpack://POLY/./node_modules/lodash/_mapCacheHas.js","webpack://POLY/./node_modules/lodash/_mapCacheSet.js","webpack://POLY/./node_modules/lodash/_baseAssign.js","webpack://POLY/./node_modules/lodash/_baseIsArguments.js","webpack://POLY/./node_modules/lodash/stubFalse.js","webpack://POLY/./node_modules/lodash/_baseIsTypedArray.js","webpack://POLY/./node_modules/lodash/_nativeKeys.js","webpack://POLY/./node_modules/lodash/_baseAssignIn.js","webpack://POLY/./node_modules/lodash/_baseKeysIn.js","webpack://POLY/./node_modules/lodash/_nativeKeysIn.js","webpack://POLY/./node_modules/lodash/_copySymbols.js","webpack://POLY/./node_modules/lodash/_copySymbolsIn.js","webpack://POLY/./node_modules/lodash/_getAllKeysIn.js","webpack://POLY/./node_modules/lodash/_DataView.js","webpack://POLY/./node_modules/lodash/_Promise.js","webpack://POLY/./node_modules/lodash/_WeakMap.js","webpack://POLY/./node_modules/lodash/_initCloneArray.js","webpack://POLY/./node_modules/lodash/_initCloneByTag.js","webpack://POLY/./node_modules/lodash/_cloneDataView.js","webpack://POLY/./node_modules/lodash/_cloneRegExp.js","webpack://POLY/./node_modules/lodash/_cloneSymbol.js","webpack://POLY/./node_modules/lodash/isMap.js","webpack://POLY/./node_modules/lodash/_baseIsMap.js","webpack://POLY/./node_modules/lodash/isSet.js","webpack://POLY/./node_modules/lodash/_baseIsSet.js","webpack://POLY/./node_modules/lodash/forEach.js","webpack://POLY/./node_modules/lodash/_createBaseFor.js","webpack://POLY/./node_modules/lodash/_createBaseEach.js","webpack://POLY/./node_modules/lodash/filter.js","webpack://POLY/./node_modules/lodash/_baseFilter.js","webpack://POLY/./node_modules/lodash/_baseMatches.js","webpack://POLY/./node_modules/lodash/_baseIsMatch.js","webpack://POLY/./node_modules/lodash/_baseIsEqualDeep.js","webpack://POLY/./node_modules/lodash/_setCacheAdd.js","webpack://POLY/./node_modules/lodash/_setCacheHas.js","webpack://POLY/./node_modules/lodash/_arraySome.js","webpack://POLY/./node_modules/lodash/_equalByTag.js","webpack://POLY/./node_modules/lodash/_mapToArray.js","webpack://POLY/./node_modules/lodash/_equalObjects.js","webpack://POLY/./node_modules/lodash/_getMatchData.js","webpack://POLY/./node_modules/lodash/_baseMatchesProperty.js","webpack://POLY/./node_modules/lodash/get.js","webpack://POLY/./node_modules/lodash/_stringToPath.js","webpack://POLY/./node_modules/lodash/_memoizeCapped.js","webpack://POLY/./node_modules/lodash/memoize.js","webpack://POLY/./node_modules/lodash/hasIn.js","webpack://POLY/./node_modules/lodash/_baseHasIn.js","webpack://POLY/./node_modules/lodash/property.js","webpack://POLY/./node_modules/lodash/_basePropertyDeep.js","webpack://POLY/./node_modules/lodash/has.js","webpack://POLY/./node_modules/lodash/_baseHas.js","webpack://POLY/./node_modules/lodash/isEmpty.js","webpack://POLY/./node_modules/lodash/isUndefined.js","webpack://POLY/./node_modules/lodash/reduce.js","webpack://POLY/./node_modules/lodash/_baseReduce.js","webpack://POLY/./node_modules/lodash/size.js","webpack://POLY/./node_modules/lodash/_asciiSize.js","webpack://POLY/./node_modules/lodash/_unicodeSize.js","webpack://POLY/./node_modules/lodash/transform.js","webpack://POLY/./node_modules/lodash/_isFlattenable.js","webpack://POLY/./node_modules/lodash/_overRest.js","webpack://POLY/./node_modules/lodash/_apply.js","webpack://POLY/./node_modules/lodash/_setToString.js","webpack://POLY/./node_modules/lodash/_baseSetToString.js","webpack://POLY/./node_modules/lodash/_shortOut.js","webpack://POLY/./node_modules/lodash/_baseFindIndex.js","webpack://POLY/./node_modules/lodash/_baseIsNaN.js","webpack://POLY/./node_modules/lodash/_strictIndexOf.js","webpack://POLY/./node_modules/lodash/_createSet.js","webpack://POLY/./node_modules/lodash/noop.js","webpack://POLY/./node_modules/lodash/_baseValues.js","webpack://POLY/./node_modules/@dagrejs/graphlib/lib/version.js","webpack://POLY/./node_modules/@dagrejs/graphlib/lib/json.js","webpack://POLY/./node_modules/@dagrejs/graphlib/lib/alg/index.js","webpack://POLY/./node_modules/@dagrejs/graphlib/lib/alg/components.js","webpack://POLY/./node_modules/@dagrejs/graphlib/lib/alg/dijkstra-all.js","webpack://POLY/./node_modules/@dagrejs/graphlib/lib/alg/find-cycles.js","webpack://POLY/./node_modules/@dagrejs/graphlib/lib/alg/floyd-warshall.js","webpack://POLY/./node_modules/@dagrejs/graphlib/lib/alg/is-acyclic.js","webpack://POLY/./node_modules/@dagrejs/graphlib/lib/alg/postorder.js","webpack://POLY/./node_modules/@dagrejs/graphlib/lib/alg/preorder.js","webpack://POLY/./node_modules/@dagrejs/graphlib/lib/alg/prim.js","webpack://POLY/./node_modules/lodash/_createRange.js","webpack://POLY/./node_modules/lodash/_baseRange.js","webpack://POLY/./node_modules/lodash/toNumber.js","webpack://POLY/./node_modules/lodash/_charsEndIndex.js","webpack://POLY/./node_modules/lodash/_charsStartIndex.js","webpack://POLY/./node_modules/lodash/_asciiToArray.js","webpack://POLY/./node_modules/lodash/_unicodeToArray.js","webpack://POLY/./node_modules/lodash/_createPadding.js","webpack://POLY/./node_modules/lodash/_baseRepeat.js","webpack://POLY/./node_modules/lodash/_createCaseFirst.js","webpack://POLY/./node_modules/lodash/deburr.js","webpack://POLY/./node_modules/lodash/_deburrLetter.js","webpack://POLY/./node_modules/lodash/_basePropertyOf.js","webpack://POLY/./node_modules/lodash/words.js","webpack://POLY/./node_modules/lodash/_asciiWords.js","webpack://POLY/./node_modules/lodash/_hasUnicodeWord.js","webpack://POLY/./node_modules/lodash/_unicodeWords.js","webpack://POLY/./node_modules/lodash/_baseOrderBy.js","webpack://POLY/./node_modules/lodash/_baseSortBy.js","webpack://POLY/./node_modules/lodash/_compareMultiple.js","webpack://POLY/./node_modules/lodash/_compareAscending.js","webpack://POLY/./node_modules/lodash/_baseDifference.js","webpack://POLY/./node_modules/lodash/_createAggregator.js","webpack://POLY/./node_modules/lodash/_arrayAggregator.js","webpack://POLY/./node_modules/lodash/_baseAggregator.js","webpack://POLY/./src/engine/scene/utils/CamerasController.ts","webpack://POLY/./src/engine/scene/utils/Cooker.ts","webpack://POLY/./src/core/graph/CoreGraph.ts","webpack://POLY/./src/engine/scene/utils/CookController.ts","webpack://POLY/./src/engine/scene/utils/DispatchController.ts","webpack://POLY/./src/engine/scene/utils/events/EventsController.ts","webpack://POLY/./src/engine/scene/utils/LifeCycleController.ts","webpack://POLY/./src/engine/scene/utils/LoadingController.ts","webpack://POLY/./src/engine/scene/utils/ExpressionsController.ts","webpack://POLY/./src/engine/expressions/MissingReference.ts","webpack://POLY/./src/engine/scene/utils/MissingReferencesController.ts","webpack://POLY/./src/engine/containers/Manager.ts","webpack://POLY/./src/engine/nodes/manager/_Base.ts","webpack://POLY/./src/engine/nodes/manager/ObjectsManager.ts","webpack://POLY/./src/engine/scene/utils/NodesController.ts","webpack://POLY/./src/core/performance/PerformanceNode.ts","webpack://POLY/./src/core/performance/CorePerformance.ts","webpack://POLY/./src/engine/poly/SceneEvent.ts","webpack://POLY/./src/engine/scene/utils/TimeController.ts","webpack://POLY/./src/engine/scene/utils/Serializer.ts","webpack://POLY/./src/engine/scene/utils/UniformsController.ts","webpack://POLY/./src/engine/scene/utils/WebGLController.ts","webpack://POLY/./src/engine/scene/PolyScene.ts","webpack://POLY/./src/engine/io/json/import/Node.ts","webpack://POLY/./src/engine/io/json/import/Param.ts","webpack://POLY/./src/engine/io/json/import/param/Multiple.ts","webpack://POLY/./src/engine/io/json/import/param/String.ts","webpack://POLY/./src/engine/io/json/import/param/Ramp.ts","webpack://POLY/./src/engine/io/json/import/Dispatcher.ts","webpack://POLY/./src/engine/io/json/import/Scene.ts","webpack://POLY/./src/engine/poly/registers/All.ts","webpack://POLY/./src/engine/index.ts"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","installedModules","__webpack_require__","exports","module","l","e","promises","installedChunkData","promise","Promise","resolve","reject","onScriptComplete","script","document","createElement","charset","timeout","nc","setAttribute","src","p","jsonpScriptSrc","error","Error","event","onerror","onload","clearTimeout","chunk","errorType","type","realSrc","target","message","name","request","undefined","setTimeout","head","appendChild","all","m","c","d","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","oe","err","console","jsonpArray","window","oldJsonpFunction","slice","s","ParamType","__awaiter","thisArg","_arguments","P","generator","fulfilled","step","next","rejected","result","done","then","apply","_vector","Vector3","_quaternion","x","y","z","this","assign","isVector3","set","setScalar","scalar","setX","setY","setZ","setComponent","index","getComponent","clone","constructor","copy","v","add","w","warn","addVectors","addScalar","a","b","addScaledVector","sub","subVectors","subScalar","multiply","multiplyVectors","multiplyScalar","applyEuler","euler","isEuler","applyQuaternion","setFromEuler","applyAxisAngle","axis","angle","setFromAxisAngle","applyMatrix3","elements","applyNormalMatrix","normalize","applyMatrix4","q","qx","qy","qz","qw","ix","iy","iz","iw","project","camera","matrixWorldInverse","projectionMatrix","unproject","projectionMatrixInverse","matrixWorld","transformDirection","divide","divideScalar","min","Math","max","clamp","clampScalar","minVal","maxVal","clampLength","floor","ceil","round","roundToZero","negate","dot","lengthSq","sqrt","manhattanLength","abs","setLength","lerp","alpha","lerpVectors","v1","v2","cross","crossVectors","ax","ay","az","bx","by","bz","projectOnVector","denominator","projectOnPlane","planeNormal","reflect","normal","angleTo","PI","theta","acos","distanceTo","distanceToSquared","dx","dy","dz","manhattanDistanceTo","setFromSpherical","setFromSphericalCoords","radius","phi","sinPhiRadius","sin","cos","setFromCylindrical","setFromCylindricalCoords","setFromMatrixPosition","setFromMatrixScale","sx","setFromMatrixColumn","sy","sz","fromArray","setFromMatrix3Column","equals","array","offset","toArray","fromBufferAttribute","attribute","getX","getY","getZ","isArray","Array","MOUSE","LEFT","MIDDLE","RIGHT","ROTATE","DOLLY","PAN","TOUCH","DOLLY_PAN","DOLLY_ROTATE","CullFaceNone","CullFaceBack","CullFaceFront","PCFShadowMap","PCFSoftShadowMap","VSMShadowMap","FrontSide","BackSide","DoubleSide","FlatShading","NoBlending","NormalBlending","AdditiveBlending","SubtractiveBlending","MultiplyBlending","CustomBlending","AddEquation","SubtractEquation","ReverseSubtractEquation","MinEquation","MaxEquation","ZeroFactor","OneFactor","SrcColorFactor","OneMinusSrcColorFactor","SrcAlphaFactor","OneMinusSrcAlphaFactor","DstAlphaFactor","OneMinusDstAlphaFactor","DstColorFactor","OneMinusDstColorFactor","SrcAlphaSaturateFactor","NeverDepth","AlwaysDepth","LessDepth","LessEqualDepth","EqualDepth","GreaterEqualDepth","GreaterDepth","NotEqualDepth","MultiplyOperation","MixOperation","AddOperation","NoToneMapping","LinearToneMapping","ReinhardToneMapping","Uncharted2ToneMapping","CineonToneMapping","ACESFilmicToneMapping","UVMapping","CubeReflectionMapping","CubeRefractionMapping","EquirectangularReflectionMapping","EquirectangularRefractionMapping","SphericalReflectionMapping","CubeUVReflectionMapping","CubeUVRefractionMapping","RepeatWrapping","ClampToEdgeWrapping","MirroredRepeatWrapping","NearestFilter","NearestMipmapNearestFilter","NearestMipMapNearestFilter","NearestMipmapLinearFilter","NearestMipMapLinearFilter","LinearFilter","LinearMipmapNearestFilter","LinearMipMapNearestFilter","LinearMipmapLinearFilter","LinearMipMapLinearFilter","UnsignedByteType","ByteType","ShortType","UnsignedShortType","IntType","UnsignedIntType","FloatType","HalfFloatType","UnsignedShort4444Type","UnsignedShort5551Type","UnsignedShort565Type","UnsignedInt248Type","AlphaFormat","RGBFormat","RGBAFormat","LuminanceFormat","LuminanceAlphaFormat","RGBEFormat","DepthFormat","DepthStencilFormat","RedFormat","RedIntegerFormat","RGFormat","RGIntegerFormat","RGBIntegerFormat","RGBAIntegerFormat","RGB_S3TC_DXT1_Format","RGBA_S3TC_DXT1_Format","RGBA_S3TC_DXT3_Format","RGBA_S3TC_DXT5_Format","RGB_PVRTC_4BPPV1_Format","RGB_PVRTC_2BPPV1_Format","RGBA_PVRTC_4BPPV1_Format","RGBA_PVRTC_2BPPV1_Format","RGB_ETC1_Format","RGB_ETC2_Format","RGBA_ETC2_EAC_Format","RGBA_ASTC_4x4_Format","RGBA_ASTC_5x4_Format","RGBA_ASTC_5x5_Format","RGBA_ASTC_6x5_Format","RGBA_ASTC_6x6_Format","RGBA_ASTC_8x5_Format","RGBA_ASTC_8x6_Format","RGBA_ASTC_8x8_Format","RGBA_ASTC_10x5_Format","RGBA_ASTC_10x6_Format","RGBA_ASTC_10x8_Format","RGBA_ASTC_10x10_Format","RGBA_ASTC_12x10_Format","RGBA_ASTC_12x12_Format","RGBA_BPTC_Format","SRGB8_ALPHA8_ASTC_4x4_Format","SRGB8_ALPHA8_ASTC_5x4_Format","SRGB8_ALPHA8_ASTC_5x5_Format","SRGB8_ALPHA8_ASTC_6x5_Format","SRGB8_ALPHA8_ASTC_6x6_Format","SRGB8_ALPHA8_ASTC_8x5_Format","SRGB8_ALPHA8_ASTC_8x6_Format","SRGB8_ALPHA8_ASTC_8x8_Format","SRGB8_ALPHA8_ASTC_10x5_Format","SRGB8_ALPHA8_ASTC_10x6_Format","SRGB8_ALPHA8_ASTC_10x8_Format","SRGB8_ALPHA8_ASTC_10x10_Format","SRGB8_ALPHA8_ASTC_12x10_Format","SRGB8_ALPHA8_ASTC_12x12_Format","LoopOnce","LoopRepeat","LoopPingPong","InterpolateDiscrete","InterpolateLinear","InterpolateSmooth","ZeroCurvatureEnding","ZeroSlopeEnding","WrapAroundEnding","TrianglesDrawMode","TriangleStripDrawMode","TriangleFanDrawMode","LinearEncoding","sRGBEncoding","GammaEncoding","RGBEEncoding","LogLuvEncoding","RGBM7Encoding","RGBM16Encoding","RGBDEncoding","BasicDepthPacking","RGBADepthPacking","TangentSpaceNormalMap","ObjectSpaceNormalMap","KeepStencilOp","AlwaysStencilFunc","StaticDrawUsage","baseGetTag","isObjectLike","CoreWalker","node_src","path","decomposed_path","split","SEPARATOR","filter","first_element","next_node","PARENT","add_path_element","parent","CURRENT","node","add_node","remainder","join","find_node","path_from_root","substr","root","params","node_path","param_name","param","src_graph_node","dest_graph_node","closest_common_parent","distance","distance_to_parent","up","ups","parent_path_elements","full_path","dest_path_elements","remaining_elements","cmptr","dest_path_element","graph_node1","graph_node2","parents1","parents","reverse","parents2","min_depth","found_parent","graph_node_id","graph_node","dest","current","dest_id","path_elements","make_absolute_path","DOT","CURRENT_WITH_SLASH","PARENT_WITH_SLASH","NON_LETTER_PREFIXES","NodeEvent","ParamEvent","_lut","toString","MathUtils","DEG2RAD","RAD2DEG","generateUUID","d0","random","d1","d2","d3","toUpperCase","euclideanModulo","mapLinear","a1","a2","b1","b2","smoothstep","smootherstep","randInt","low","high","randFloat","randFloatSpread","range","degToRad","degrees","radToDeg","radians","isPowerOfTwo","ceilPowerOfTwo","pow","log","LN2","floorPowerOfTwo","setQuaternionFromProperEuler","order","c2","s2","c13","s13","c1_3","s1_3","c3_1","s3_1","CONTEXT_OPTIONS","antialias","_next_renderer_id","_next_env_map_id","_renderers","_env_maps","_require_webgl2","_resolves","canvas","gl","_rendering_context_webgl","webgl2","context_name","getContext","renderer","_polygon_id","keys","flush_callbacks_with_renderer","dispose","first_id","values","callback","pop","first_renderer","NodesRegister","_node_register","_node_register_categories","_node_register_options","tab_menu_category","options","context","node_context","node_type","parent_node_type","option_only","option_except","context_and_type","includes","nodes_by_type","nodes","registered_nodes_for_context_and_parent_type","renderers_controller","nodes_register","scenes_by_uuid","_instance","register_node","parent_context","registered_nodes","args","env","_env","Vector2","defineProperties","isVector2","atan2","rotateAround","center","DirtyController","_dirty_count","_dirty","_dirty_timestamp","method","_post_dirty_hook_names","_post_dirty_hooks","indexOf","splice","_forbidden_trigger_nodes","map","original_trigger_graph_node","propagate","performance","now","run_post_dirty_hooks","set_successors_dirty","cooker","scene","blocked","enqueue","hook","_cached_successors","graph_all_successors","successor","dirty_controller","set_dirty","clear_successors_cache","predecessor","graph_all_predecessors","_scene","_name","_dirty_controller","_graph_node_id","graph","next_id","setNode","_graph","trigger","remove_dirty_state","is_dirty","add_post_dirty_hook","removeNode","connect","disconnect","disconnect_predecessors","disconnect_successors","predecessor_ids","predecessors","successors","all_predecessors","all_successors","EmitController","_blocked_emit","_blocked_parent_emit","_count_by_event_name","loading_controller","is_loading","dispatch_controller","emit_allowed","is_multiple","components","forEach","emit_controller","block_emit","unblock_emit","event_name","emit","parent_param","ParamSerializer","raw_input","expression","error_message","is_visible","component","raw_input_serialized","value_serialized","has_expression","expression_controller","states","TimeDependentState","frame_graph_node_id","time_controller","graph_predecessor_ids","_message","ERROR_UPDATED","time_dependent","CoreGraphNode","super","_options","OptionsController","_emit_controller","_is_computing","initialize_param","_expression_controller","_serializer","_states","FLOAT","set_name","_value","raw_val","val1","val2","other_raw_input","are_raw_input_equal","_raw_input","other_val","are_values_equal","_clone_raw_input","_prefilter_invalid_raw_input","RAW_INPUT_UPDATED","process_raw_input","_default_value","_compute_resolves","process_computation","init_value","_node","makes_node_dirty_when_dirty","params_node","add_graph_input","remove_graph_input","set_node","_parent_param","relative_path","increment_count","dispatch","_components","component_names","active","serializer","to_json","BaseParamClass","ATTRIB_NAMES_SEPARATOR","TAIL_DIGIT_MATCH_REGEXP","INDICES_LIST_SEPARATOR","NUM_REGEXP","BooleanString","CoreString","word","TRUE","FALSE","test","match","parseInt","digits","substring","replace","upper_first","Date","parse","seconds","setTime","toISOString","val","decimals","frac","string_to_pad","pad","num","num_as_string","rule","RegExp","masks","matches_one_mask","mask","match_mask","trimed_elements","id","exp","element","charCodeAt","Number","MAX_SAFE_INTEGER","indices_string","indices","sort","range_separator","range_elements","parsed","lodash","constant","each","has","isEmpty","isFunction","isUndefined","reduce","size","transform","union","_","freeGlobal","freeSelf","self","Function","TypedMultipleParam","_components_contructor","is_default","component_name","default_val","set_init_value","set_parent_param","compute_components","set_value_from_components","compute","number_or_string","block","block_parent_emit","unblock","unblock_parent_emit","VALUE_UPDATED","Quaternion","_x","_y","_z","_w","slerp","qa","qb","qm","slerpFlat","dst","dstOffset","src0","srcOffset0","src1","srcOffset1","x0","y0","z0","w0","x1","y1","z1","w1","dir","sqrSin","EPSILON","len","tDir","f","_onChangeCallback","isQuaternion","quaternion","update","c1","c3","s1","s3","halfAngle","setFromRotationMatrix","te","m11","m12","m13","m21","m22","m23","m31","m32","m33","trace","setFromUnitVectors","vFrom","vTo","rotateTowards","inverse","conjugate","multiplyQuaternions","premultiply","qax","qay","qaz","qaw","qbx","qby","qbz","qbw","cosHalfTheta","sqrSinHalfTheta","sinHalfTheta","halfTheta","ratioA","ratioB","getW","_onChange","isLength","arrayLikeKeys","baseKeys","isArrayLike","_colorKeywords","_hslA","h","_hslB","Color","g","setRGB","hue2rgb","SRGBToLinear","LinearToSRGB","isColor","setHex","setStyle","hex","setHSL","style","handleAlpha","string","parseFloat","exec","color","charAt","setColorName","copyGammaToLinear","gammaFactor","copyLinearToGamma","safeInverse","convertGammaToLinear","convertLinearToGamma","copySRGBToLinear","copyLinearToSRGB","convertSRGBToLinear","convertLinearToSRGB","getHex","getHexString","getHSL","hue","saturation","lightness","delta","getStyle","offsetHSL","addColors","color1","color2","lerpHSL","toJSON","NAMES","_object3DId","_v1","_q1","_m1","_target","_position","_scale","_xAxis","_yAxis","_zAxis","_addedEvent","_removedEvent","Object3D","uuid","children","DefaultUp","position","rotation","scale","setFromQuaternion","configurable","modelViewMatrix","normalMatrix","matrix","matrixAutoUpdate","DefaultMatrixAutoUpdate","matrixWorldNeedsUpdate","layers","visible","castShadow","receiveShadow","frustumCulled","renderOrder","userData","isObject3D","onBeforeRender","onAfterRender","updateMatrix","decompose","setRotationFromAxisAngle","setRotationFromEuler","setRotationFromMatrix","setRotationFromQuaternion","rotateOnAxis","rotateOnWorldAxis","rotateX","rotateY","rotateZ","translateOnAxis","translateX","translateY","translateZ","localToWorld","vector","worldToLocal","getInverse","lookAt","updateWorldMatrix","isCamera","isLight","extractRotation","arguments","remove","dispatchEvent","attach","getObjectById","getObjectByProperty","getObjectByName","getWorldPosition","updateMatrixWorld","getWorldQuaternion","getWorldScale","getWorldDirection","raycast","traverse","traverseVisible","traverseAncestors","compose","force","multiplyMatrices","updateParents","updateChildren","meta","isRootObject","output","geometries","materials","textures","images","shapes","metadata","version","serialize","library","JSON","stringify","isInstancedMesh","count","instanceMatrix","isMesh","isLine","isPoints","geometry","parameters","shape","material","uuids","extractFromCache","cache","recursive","source","child","getRawTag","objectToString","symToStringTag","resIndex","RampInterpolation","RampPoint","point","other_point","json","json1","json2","_interpolation","LINEAR","_points","_uuid","points","json_point","from_json","interpolation","ramp","current_point","other_ramp_value","other_points","is_equal","is_equal_json","point1","point2","are_equal_json","_reset_ramp_interpolant_and_texture_bound","_reset_ramp_interpolant_and_texture","RAMP","default_value","raw_input1","raw_input2","are_json_equal","_ramp_interpolant","_ramp_texture","_create_ramp_texture","Uint8Array","stride","width","value_at_position","texture","DataTexture","needsUpdate","positions","interpolated_values","Float32Array","CubicInterpolant","_create_interpolant","sorted_points","sorted_point","create_interpolant","interpolant","evaluate","DEFAULT_VALUE","DEFAULT_VALUE_JSON","Matrix4","_zero","_one","isMatrix4","n11","n12","n13","n14","n21","n22","n23","n24","n31","n32","n33","n34","n41","n42","n43","n44","identity","me","copyPosition","extractBasis","xAxis","yAxis","zAxis","makeBasis","scaleX","scaleY","scaleZ","makeRotationFromEuler","ae","af","be","bf","ce","cf","de","df","ac","ad","bc","bd","makeRotationFromQuaternion","eye","a11","a12","a13","a14","a21","a22","a23","a24","a31","a32","a33","a34","a41","a42","a43","a44","b11","b12","b13","b14","b21","b22","b23","b24","b31","b32","b33","b34","b41","b42","b43","b44","determinant","transpose","tmp","setPosition","throwOnDegenerate","t11","t12","t13","t14","det","detInv","getMaxScaleOnAxis","scaleXSq","scaleYSq","scaleZSq","makeTranslation","makeRotationX","makeRotationY","makeRotationZ","makeRotationAxis","tx","ty","makeScale","makeShear","x2","y2","z2","xx","xy","xz","yy","yz","zz","wx","wy","wz","invSX","invSY","invSZ","makePerspective","left","right","top","bottom","near","far","makeOrthographic","baseUniq","baseFlatten","baseOrderBy","baseRest","isIterateeCall","sortBy","collection","iteratees","baseIsNative","getValue","baseToString","InputCloneMode","NodeContext","Vector4","isVector4","setW","setAxisAngleFromQuaternion","setAxisAngleFromRotationMatrix","TypedContainerController","container_class","_callbacks","_container","cook_controller","process_container_request","flags","bypass","input_index","request_input_container","container","notify_requesters","container_controller","reset_caches","cook_main","input_node","io","inputs","input","processing_context","request_container","callbacks","remove_node","Matrix3","isMatrix3","setFromMatrix4","getNormalMatrix","matrix4","transposeIntoArray","setUvTransform","cx","cy","rotate","translate","TypedContainer","content","cloned_container","set_content","_content","_post_set_content","BaseContainer","DataView","Map","Set","WeakMap","toSource","dataViewCtorString","mapCtorString","promiseCtorString","setCtorString","weakMapCtorString","getTag","ArrayBuffer","Ctor","ctorString","baseMatches","baseMatchesProperty","TypedNumericParam","clear","converted","convert","set_expression","EXPRESSION_UPDATED","_update_value","requires_entities","expression_result","compute_expression","is_errored","new_value","execute_callback","ParamTemplate","ParamConfig","BUTTON","BOOLEAN","COLOR","FOLDER","INTEGER","OPERATOR_PATH","STRING","VECTOR2","VECTOR3","VECTOR4","NodeParamsConfig","ConnectionPointType","ConnectionPointTypes","BOOL","INT","VEC2","VEC3","VEC4","ConnectionPointTypeToParamTypeMap","SAMPLER_2D","ParamTypeToConnectionPointTypeMap","ConnectionPointInitValueMap","ConnectionPointComponentsCountMap","iteratee","stubFalse","freeExports","nodeType","freeModule","Buffer","isBuffer","func","baseForOwn","baseEach","createBaseEach","arrayPush","isFlattenable","depth","predicate","isStrict","baseClone","CLONE_DEEP_FLAG","baseIsEqual","other","addUnaryOp","addBinaryOp","ParsedTree","reset","string_value_elements","raw","callee","throwError","description","unary_ops","binary_ops","getMaxKeyLen","obj","max_len","max_unop_len","max_binop_len","literals","binaryPrecedence","op_val","createBinaryExpression","operator","isDecimalDigit","ch","isIdentifierStart","String","fromCharCode","isIdentifierPart","jsep","expr","ch_i","charAtFunc","charCodeAtFunc","exprI","exprICode","gobbleSpaces","gobbleExpression","consequent","alternate","gobbleBinaryExpression","gobbleBinaryOp","to_check","tc_len","biop","prec","stack","biop_info","gobbleToken","gobbleNumericLiteral","gobbleStringLiteral","gobbleArray","argument","prefix","gobbleVariable","chCode","number","str","quote","closed","gobbleIdentifier","identifier","start","gobbleArguments","termination","gobbleGroup","computed","body","op_name","precedence","addLiteral","literal_name","literal_value","removeUnaryOp","removeAllUnaryOps","removeBinaryOp","removeAllBinaryOps","removeLiteral","removeAllLiterals","_width","_border_radius","_color","_layout_vertical","_json","comment","_comment","UI_DATA_COMMENT_UPDATED","ui_data","new_position","UI_DATA_POSITION_UPDATED","snap","BaseState","are_params_time_dependent","are_inputs_time_dependent","param_names","names","graph_predecessors","frame_node","on_update","set_container","_graph_node","base","last_char","new_name","children_allowed","children_controller","set_child_name","request_name_to_parent","_set_core_name","post_set_name","post_set_full_path","child_node","name_controller","lifecycle","creation_completed","missing_expression_references_controller","check_for_missing_references","expressions_controller","regenerate_referring_expressions","NAME_UPDATED","_on_set_name_hooks","_on_set_full_path_hooks","_parent","parent_controller","base_name","selection","contains","separator","parent_full_path","_on_set_parent_hooks","child_by_name","_node_ids","nodes_from_ids","node_ids","send_update_event","nodes_to_add","node_ids_to_add","nodes_to_remove","node_ids_to_remove","SELECTION_UPDATED","_context","_children","_children_by_type","_children_and_grandchildren_by_context","_is_dependent_on_children","_selection","dependent","_children_node","current_child_with_name","increment","current_name","update_name_from_parent","_add_to_nodes_by_type","nodes_controller","add_to_instanciated_node","Poly","instance","available_children_classes","node_class","initialize_base_and_node","set_creation_completed","set_parent","init","on_set_parent","CREATED","child_node_json","lifecycle_controller","on_create_hook_allowed","run_on_create_hooks","run_on_add_hooks","run_on_child_add_hooks","require_webgl2","webgl_controller","set_require_webgl2","first_connection","connections","first_input_connection","input_connections","input_connection","set_input","output_connections","output_connection","old_src","old_output_index","output_index","old_dest","node_dest","old_input_index","graph_disconnect_successors","_remove_from_nodes_by_type","remove_from_instanciated_node","run_on_child_remove_hooks","run_on_delete_hooks","DELETED","parent_id","node_id","add_to_children_and_grandchildren_by_context","remove_from_children_and_grandchildren_by_context","node_from_id","traverse_children","LifeCycleController","_creation_completed","loaded","_on_child_add_hooks","execute_hooks_with_child_node","_on_child_remove_hooks","_on_create_hooks","execute_hooks","_on_add_hooks","_on_delete_hooks","hooks","_cooking","_cooks_count","_max_cook_time","_cook_time_with_inputs","_cook_time","_cook_time_params","_inputs_evaluation_required","_cooking_dirty_timestamp","dirty_timestamp","perf_active","started","_cook_time_start","input_contents","end_cook","cook","is_cooking","_init_cooking_state","_cook_time_with_inputs_start","input_containers","evaluate_inputs_and_params","_init_cooking_start_time","input_container","input_clonable_state_with_override","core_content_cloned","core_content","_start_cook_if_no_errors","eval_all","_increment_cooks_count","_terminate_cook_process","_record_cook_time","cook_time_end","_cook_time_params_start","record_node_cook_data","eval_required_inputs_p","time","METHODS","_find_scene_node_scene_nodes","SUCCESSORS","PREDECESSORS","graph_nodes","start_nodes","base_nodes","start_node","_find_base_nodes_from_node","param_nodes_referree","scene_node","base_nodes_by_graph_node_id","uniq_base_nodes","next_nodes","className","BaseNodeClass","_params_referrees_by_graph_node_id","list","node_by_graph_node_id","params_referree","_param_create_mode","_params_by_name","_params_list","_param_names","_non_spare_params","_spare_params","_non_spare_param_names","_spare_param_names","_params_added_since_last_params_eval","_params_node","init_dependency_node","init_from_params_config","create_params","_post_create_params","_update_caches","init_param_accessors","run_post_create_params_hook","has_created_a_param","has_deleted_a_param","names_to_delete","delete_param","to_add","param_data","add_param","PARAMS_UPDATED","params_config","config","current_names_in_accessor","getOwnPropertyNames","pv","_remove_unneeded_accessors","is_spare","current_param_names","names_to_remove","current_name_in_accessor","name_to_remove","param_with_type","set_with_type","has_param","value_with_type","child_name","ParamConstructorByType","existing_param","init_components","_eval_param","eval_params","_post_create_params_hook","_on_scene_load_hook_names","_on_scene_load_hooks","ParamsValueAccessor","ProcessingContext","_frame","src_context","frame","_output_connections","max_inputs_count","_input_connections","connection","all_connections_after_are_undefined","connections_by_id","delete","NodeConnection","_node_src","_node_dest","_output_index","_input_index","_id","_next_id","add_output_connection","add_input_connection","remove_output_connection","remove_input_connection","_graph_node_inputs","_inputs","_has_named_inputs","_min_inputs_count","_max_inputs_count","_depends_on_inputs","_override_clonable_state","depends_on_inputs","min_inputs_count","init_graph_node_inputs","_named_input_connection_points","connection_point","connection_points","set_min_inputs_count","set_max_inputs_count","NAMED_INPUTS_UPDATED","_create_graph_node_input","graph_input_node","init_inputs_clonable_state","init_connections_controller_inputs","init_inputs","containers","existing_input_indices","eval_required_input","input_error_message","input_index_or_name","has_named_inputs","get_named_input_index","output_index_or_name","get_input_index","outputs","has_named_outputs","get_output_index","old_input_node","old_connection","_run_on_set_input_hooks","INPUTS_UPDATED","input_name","state","inputs_clonable_state","FROM_NODE","_inputs_clonable_states","ALWAYS","NEVER","unreachable","_user_inputs_clonable_states","_default_inputs_clonale_state_values","OVERRIDE_CLONABLE_STATE_UPDATE","_on_update_hooks","_on_update_hook_names","_has_outputs","_has_named_outputs","get_named_output_index","_named_output_connection_points","NAMED_OUTPUTS_UPDATED","output_indices","used_output_indices","named_output_connection_points","_connections","_outputs","ParamsAccessor","_initialized","_display_node_controller","_parent_controller","_children_controller_context","_children_controller","_create_children_controller","_ui_data","_dependencies_controller","_lifecycle","_cook_controller","_io","_name_controller","_params_controller","_processing_context","initialize_base_node","initialize_node","three_imports","required_three_imports","required_imports","create_node","include_param_components","EventDispatcher","addEventListener","listener","_listeners","listeners","hasEventListener","removeEventListener","listenerArray","isObject","tag","assignValue","baseAssignValue","props","customizer","isNew","newValue","baseIsArguments","objectProto","propertyIsEnumerable","isArguments","baseIsTypedArray","baseUnary","nodeUtil","nodeIsTypedArray","isTypedArray","StringParam","_value_elements","listCacheClear","listCacheDelete","listCacheGet","listCacheHas","listCacheSet","ListCache","entries","entry","eq","nativeCreate","getNative","isKeyable","__data__","isSymbol","reHasUnicode","baseFindIndex","baseIsNaN","strictIndexOf","fromIndex","baseValues","NodeSerializer","ui_data_json","children_ids","input_ids","input_connection_output_indices","connection_input_indices","named_input_connections","named_output_connections","param_ids","to_json_params","override_clonable_state","inputs_clonable_state_with_override","display","named_input_connection_points","include_components","to_json_params_from_names","ease_i","power","ease_o","ease_io","Easing","linear","ease_i2","ease_o2","ease_io2","ease_i3","ease_o3","ease_io3","ease_i4","ease_o4","ease_io4","ease_i_sin","ease_o_sin","ease_io_sin","ease_i_elastic","ease_o_elastic","ease_io_elastic","FloatParam","is_number","ensure_in_range","_named_nodes","graph_node_ids","node_element_by_graph_node_id","named_nodes","path_element","joined_path","first_char","path_argument","_update_from_name_change_bound","_update_from_name_change","update_from_name_change","new_path","to_path","literal","jsep_node","update_from_method_dependency_name_change","graph_disconnect_predecessors","node_in_path","resolved_graph_node","unresolved_path","index_or_path","is_index","set_resolved_graph_node","set_unresolved_path","required_arguments","min_allowed_arguments_count","optional_arguments","max_allowed_arguments_count","referenced_node","get_referenced_node","find_param","input_graph_node","find_referenced_graph_node","create_dependency","VECTOR_NAMES","COMPONENT_NAMES","MethodModule","bbox","create_dependency_from_index_or_path","vector_name","get_referenced_node_container","_get_value_from_container","bounding_box","getSize","getCenter","get_referenced_param","ref","centroid","cop_res","resolution","local","request_asset_url","url","desktop_controller","add_local_path","local_path_server_url","opdigits","name_node","tail_digits","attrib_name","point_index","core_group","attrib_value","points_count","stamp_node","attribute_name","stamp_value","str_chars_count","str_concat","arg","str_index","sub_string","str_sub","range_start","range_size","_set_error_from_error_bound","_set_error_from_error","_error_message","method_name","set_error","traverse_node","traversed_args","arg_node","AttributeRequirementsController","_attribute_names","lines","assign_attribute_line","assign_item_size_line","assign_array_line","var_names","var_name","var_attribute","var_attribute_size","var_array","NATIVE_MATH_METHODS_RENAMED","math_random","EASING_METHODS","DIRECT_EXPRESSION_FUNCTIONS","remaped","LITERAL_CONSTRUCT","if","GLOBAL_CONSTANTS","INDIRECT_EXPRESSION_METHODS","PROPERTY_OFFSETS","_attribute_requirements_controller","methods","method_index","method_dependencies","immutable_dependencies","parsed_tree","function_main_string","function","AsyncFunction","function_body","is_expression_for_entities","assign_attributes_lines","attribute_presence_check_line","assign_arrays_lines","clear_error","Core","method_arguments","literal_contruct","arguments_joined","direct_function_name","path_node","function_string","path_argument_function","_create_method_and_dependencies","argument_member_expression","attrib_node","property_node","remap_name","identifier_name_without_dollar_sign","direct_constant_name","_method_centroid","method_constructor","method_dependency","find_dependency","set_jsep_node","register","DependenciesController","cyclic_graph_detected","function_generator","connect_immutable_dependencies","handle_method_dependencies","listen_for_name_changes","dependency","handle_method_dependency","node_simple","parse_completed","parse_started","dependencies_controller","parse_expression_for_string_param","parse_expression","parse_tree","compute_allowed","eval_function","eval_allowed","expression_string_generator","new_expression_string","_expression","_manager","deregister_param","compute_function","entities","set_entities","reset_entities","compute_expression_for_entities","_entities","_entity_callback","MouseEventType","ACCEPTED_MOUSE_EVENT_TYPES","auxclick","click","contextmenu","dblclick","mousedown","mouseenter","mouseleave","mousemove","mouseover","mouseout","mouseup","pointerlockchange","pointerlockerror","select","wheel","_nodes_by_graph_node_id","camera_node","process_event","_canvas","ImageUtils","image","HTMLCanvasElement","createElementNS","height","ImageData","putImageData","drawImage","toDataURL","textureId","Texture","mapping","wrapS","wrapT","magFilter","minFilter","format","anisotropy","encoding","DEFAULT_IMAGE","mipmaps","DEFAULT_MAPPING","internalFormat","repeat","generateMipmaps","premultiplyAlpha","flipY","unpackAlignment","onUpdate","isTexture","wrap","transformUv","uv","overRest","setToString","stackClear","stackDelete","stackGet","stackHas","stackSet","Stack","getPrototype","overArg","getPrototypeOf","MapCache","setCacheAdd","setCacheHas","SetCache","Interpolant","parameterPositions","sampleValues","sampleSize","resultBuffer","_cachedIndex","valueSize","pp","i1","t1","t0","validate_interval","seek","linear_scan","forward_scan","giveUpAt","afterEnd_","t1global","beforeStart_","mid","intervalChanged_","interpolate_","settings","DefaultSettings_","getSettings_","copySampleValue_","Graph","opts","_isDirected","directed","_isMultigraph","multigraph","_isCompound","compound","_label","_defaultNodeLabelFn","_defaultEdgeLabelFn","_nodes","_in","_preds","_out","_sucs","_edgeObjs","_edgeLabels","incrementOrInitEntry","k","decrementOrRemoveEntry","edgeArgsToId","isDirected","v_","w_","edgeArgsToObj","edgeObj","edgeObjToId","_nodeCount","_edgeCount","isMultigraph","isCompound","setGraph","label","setDefaultNodeLabel","newDefault","nodeCount","sources","sinks","setNodes","vs","hasNode","removeEdge","_removeFromParentsChildList","setParent","ancestor","predsV","sucsV","neighbors","preds","isLeaf","filterNodes","setEdge","edge","findParent","setDefaultEdgeLabel","edgeCount","edges","setPath","valueSpecified","arg0","freeze","hasEdge","inEdges","u","inV","outEdges","outV","nodeEdges","concat","mapCacheClear","mapCacheDelete","mapCacheGet","mapCacheHas","mapCacheSet","webpackPolyfill","deprecate","paths","reIsUint","freeProcess","process","types","require","binding","isPrototype","nativeKeys","arrayFilter","stubArray","nativeGetSymbols","getOwnPropertySymbols","getSymbols","symbol","arrayBuffer","byteLength","baseIsEqualDeep","bitmask","reIsDeepProp","reIsPlainProp","arrayMap","symbolProto","symbolToString","asciiSize","hasUnicode","unicodeSize","baseSlice","end","asciiToArray","unicodeToArray","StringParamLanguage","_param","_programatic_visible_state","_update_visibility_and_remove_dirty_bound","update_visibility_and_remove_dirty","_ui_data_dependency_set","_default_options","options_controller","default","overriden","option_names","option_name","overridden_options","get_callback","has_callback","create_callback_from_string","callback_string","callback_function","cook_options","desktop_browse_option","expr_option","menu_options","has_menu","language","node_selection_options","range_locked","texture_options","is_hidden","VISIBLE_UPDATED","is_field_hidden","predecessor_names","visibility_predecessors","_visibility_graph_node","update_visibility","isArrayLikeObject","arrays","upperFirst","toLowerCase","createCaseFirst","baseIndexOf","isString","toInteger","nativeMax","guard","lib","alg","createPadding","stringSize","chars","strLength","capitalize","camelCase","createCompounder","TypedNamedConnectionPoint","_type","_init_value","_create_json","MapUtils","new_element","unshift","new_elements","Group","isGroup","createRange","isDataTexture","baseKeysIn","THREE","Triangle","RAD_DEG_RATIO","CoreMath","dest_min","dest_max","fit","src_min","src_max","deg","degrees_to_radians","rad","radians_to_degrees","rand_float","rand_vec2","step_size","steps_count","rounded_steps_count","vec","sn","fract","lnglat1","lnglat2","φ1","deg2rad","lat","φ2","Δφ","Δλ","lng","triangle","margin","mid_point","TriangleProp","getMidpoint","prop","delta_n","Scene","background","environment","fog","overrideMaterial","autoUpdate","__THREE_DEVTOOLS__","CustomEvent","detail","isScene","ATTRIB_NAME_MAP","N","Cd","CoreAttribute","index_by_value","current_index","isIndex","castSlice","charsEndIndex","charsStartIndex","stringToArray","reTrim","strSymbols","chrSymbols","TypeAssert","comparator","isNumber","_eval_all_params_on_dirty_bound","_eval_all_params_on_dirty","EVENT","set_layout_horizontal","node_sibbling","toFinite","baseDifference","difference","_v0","_v2","_v3","_vab","_vac","_vbc","_vap","_vbp","_vcp","getNormal","targetLengthSq","getBarycoord","dot00","dot01","dot02","dot11","dot12","denom","invDenom","containsPoint","getUV","p1","p2","p3","uv1","uv2","uv3","isFrontFacing","direction","setFromPointsAndIndices","i0","i2","getArea","getPlane","setFromCoplanarPoints","intersectsBox","box","intersectsTriangle","closestPointToPoint","d4","vc","d5","d6","vb","va","OperatorPathParam","_found_node","dependent_on_found_node","expected_context","node_selection_context","_matrix","Euler","_order","DefaultOrder","RotationOrders","asin","setFromVector3","reorder","newOrder","toVector3","optionalResult","is_boolean","to_boolean","COMPONENT_NAMES_COLOR","COMPONENT_NAMES_VECTOR2","COMPONENT_NAMES_VECTOR3","COMPONENT_NAMES_VECTOR4","Float","OperatorPath","Ramp","_vector1","_vector2","_normalMatrix","Plane","isPlane","setComponents","setFromNormalAndCoplanarPoint","plane","inverseNormalLength","distanceToPoint","distanceToSphere","sphere","projectPoint","intersectLine","line","intersectsLine","startSign","endSign","intersectsPlane","intersectsSphere","coplanarPoint","optionalNormalMatrix","referencePoint","Layers","channel","enable","enableAll","toggle","disable","disableAll","arrayEach","baseAssign","baseAssignIn","cloneBuffer","copyArray","copySymbols","copySymbolsIn","getAllKeys","getAllKeysIn","initCloneArray","initCloneByTag","initCloneObject","isMap","isSet","cloneableTags","isDeep","isFlat","isFull","isArr","isFunc","stacked","subValue","keysFunc","keysIn","global","funcToString","objValue","baseTimes","inherited","isArg","isBuff","isType","skipIndexes","getSymbolsIn","baseGetAllKeys","symbolsFunc","objectCreate","baseCreate","proto","baseFor","arraySome","cacheHas","equalFunc","isPartial","arrLength","othLength","seen","arrValue","othValue","compared","othIndex","srcValue","castPath","toKey","isKey","stringToPath","hasFunc","accumulator","initAccum","arrayIncludes","arrayIncludesWith","createSet","setToArray","isCommon","outer","seenIndex","PriorityQueue","weightFn","edgeFn","vEntry","results","pq","updateNeighbors","wEntry","weight","decrease","POSITIVE_INFINITY","removeMin","runDijkstra","DEFAULT_WEIGHT_FUNC","_arr","_keyIndices","priority","keyIndices","arr","_decrease","_swap","_heapify","largest","j","origArrI","origArrJ","visited","dfs","onStack","lowlink","cmpt","topsort","visit","CycleException","navigation","acc","doDfs","postorder","MouseEventParamsConfig","MouseEventNode","PARAM_CALLBACK_toggle_active","ParamsConfig","set_named_output_connection_points","event_type","add_on_add_hook","events_controller","register_event_node","add_delete_hook","unregister_event_node","_update_register","toNumber","arrayReduce","deburr","words","reApos","_weightPrev","_offsetPrev","_weightNext","_offsetNext","endingStart","endingEnd","iPrev","iNext","tPrev","tNext","halfDt","o1","o0","oP","oN","wP","wN","ppp","sP","s0","sN","snakeCase","createAggregator","groupBy","allocUnsafe","buffer","cloneArrayBuffer","typedArray","byteOffset","createBaseFor","baseIteratee","baseMap","assocIndexOf","pairs","LARGE_ARRAY_SIZE","isMasked","reIsHostCtor","funcProto","reIsNative","nativeObjectToString","isOwn","unmasked","uid","coreJsData","maskSrcKey","IE_PROTO","Hash","hashClear","hashDelete","hashGet","hashHas","hashSet","getMapData","copyObject","typedArrayTags","nativeKeysIn","isProto","cloneDataView","cloneRegExp","cloneSymbol","cloneTypedArray","dataView","reFlags","regexp","lastIndex","symbolValueOf","valueOf","baseIsMap","nodeIsMap","baseIsSet","nodeIsSet","castFunction","fromRight","iterable","eachFunc","baseFilter","baseIsMatch","getMatchData","matchesStrictComparable","matchData","noCustomizer","COMPARE_PARTIAL_FLAG","equalArrays","equalByTag","equalObjects","objectTag","objIsArr","othIsArr","objTag","othTag","objIsObj","othIsObj","isSameTag","objIsWrapped","othIsWrapped","objUnwrapped","othUnwrapped","mapToArray","objProps","objLength","skipCtor","objCtor","othCtor","isStrictComparable","hasIn","baseGet","defaultValue","memoizeCapped","rePropName","reEscapeChar","subString","memoize","resolver","TypeError","memoized","Cache","baseHasIn","hasPath","baseProperty","basePropertyDeep","baseHas","baseReduce","rsAstral","rsCombo","rsFitz","rsNonAstral","rsRegional","rsSurrPair","reOptMod","rsSeq","rsSymbol","reUnicode","isArrLike","spreadableSymbol","isConcatSpreadable","otherArgs","baseSetToString","shortOut","nativeNow","lastCalled","stamp","remaining","noop","writeNodes","nodeValue","writeEdges","edgeValue","write","read","dijkstra","dijkstraAll","findCycles","floydWarshall","isAcyclic","preorder","prim","tarjan","cmpts","weightFunc","edgeFunc","rowK","rowI","ik","kj","ij","altDistance","runFloydWarshall","pri","edgeWeight","baseRange","nativeCeil","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","isBinary","baseRepeat","charsLength","nativeFloor","methodName","chr","trailing","deburrLetter","reLatin","reComboMark","basePropertyOf","asciiWords","hasUnicodeWord","unicodeWords","pattern","reAsciiWord","reHasUnicodeWord","rsBreakRange","rsMathOpRange","rsBreak","rsDigits","rsDingbat","rsLower","rsMisc","rsUpper","rsMiscLower","rsMiscUpper","rsModifier","rsEmoji","reUnicodeWord","baseSortBy","compareMultiple","orders","comparer","compareAscending","objCriteria","criteria","othCriteria","ordersLength","valIsDefined","valIsNull","valIsReflexive","valIsSymbol","othIsDefined","othIsNull","othIsReflexive","othIsSymbol","valuesLength","valuesIndex","arrayAggregator","baseAggregator","setter","initializer","CamerasController","_master_camera_node_path","camera_node_path","master_camera_node_path","_find_any_camera","Cooker","_queue","_block_level","_process_item_bound","_process_item","process_queue","ids","src_id","graph_has_cycle","clear_successors_cache_with_predecessors","src_id_s","dest_id_s","successor_ids","next_ids","next_next_ids","next_next_id","all_next_ids","all_predecessor_ids","all_successor_ids","_cooking_nodes_by_id","flush","events_listener","_events_listener","emitter","process_events","auto_updating","player_mode","_mouse_events_controller","MouseEventsController","_controllers","controller","_get_controller_for_node","unregister_node","accepts_event","MouseEvent","_lifecycle_on_create_allowed","_loading_state","_auto_updating","_first_object_loaded","_set_loading_state","set_auto_update","new_state","loader","getElementById","parentElement","removeChild","ExpressionsController","_params_by_id","references","missing_expression_reference","push_on_array_at_entry","_check_for_missing_references_for_node","_check_for_missing_references_for_param","missing_references","match_found","matches_path","resolve_missing_dependencies","MANAGER","_object","_queued_nodes_by_id","_queued_nodes_by_path","_expected_geo_nodes","_process_queue_start","OBJ","add_on_child_add_hook","_on_child_add","add_on_child_remove_hook","_on_child_remove","default_scene","render_order","path_id","update_object","expected_loading_geo_nodes_by_id","add_to_scene","add_to_queue","attachable_to_hierarchy","node_input","children_group","parent_object","get_parent_for_node","used_in_scene","add_object_to_parent","remove_object_from_parent","is_display_node_cooking","geo_nodes","node_by_id","geo_node","is_displayed","remove_from_scene","_node_context_signatures","_instanciated_nodes_by_context_and_type","_root","init_default_scene","objects","geo","current_parents","current_parent","node_context_signature","nodes_by_ids","PerformanceNode","_cook_time_total","_cook_time_total_with_inputs","_cook_time_total_params","cook_time","cook_time_with_inputs","cook_time_params","cooks_count","cook_time_total","cook_time_per_iteration","cook_time_total_with_inputs","cook_time_total_with_inputs_per_iteration","cook_time_total_params","cook_time_total_params_per_iteration","_started","_start_time","_previous_timestamp","_nodes_cook_data","_durations_by_name","_durations_count_by_name","start_time","total_time","update_cook_data","current_timestamp","print_node_cook_data","print_recordings","performance_nodes","performance_node","print_objects","print_object","table_entries","sorted_print_objects","table","durations_by_name","durations_count_by_name","durations","names_by_duration","duration","sorted_durations","duration_per_iteration","SceneEvent","_time","_prev_performance_now","_frame_range","_frame_range_locked","_playing","start_frame","end_frame","FRAME_RANGE_UPDATED","start_locked","end_locked","update_frame","new_frame","FRAME_UPDATED","uniforms_controller","update_time_dependent_uniform_owners","update_time","_ensure_frame_within_bounds","set_time","are_children_cooking","increment_time","performance_now","new_time","PLAY_STATE_UPDATED","playing","pause","play","include_node_param_components","nodes_by_graph_node_id","params_by_graph_node_id","all_nodes","node_serializer","_time_dependent_uniform_owners","_time_dependent_uniform_owners_ids","_resolution","_resolution_dependent_uniform_owners","_resolution_dependent_uniform_owners_ids","uniforms","_update_time_dependent_uniform_owners_ids","_update_resolution_dependent_uniform_owners_ids","update_resolution_dependent_uniforms","devicePixelRatio","_default_scene","_cameras_controller","_cooker","_missing_expression_references_controller","_expressions_controller","_nodes_controller","_time_controller","set_scene","wait_for_cooks_completed","_dispatch_controller","_events_controller","_lifecycle_controller","_loading_controller","_performance","set_frame","frame_range","_uniforms_controller","_webgl_controller","create_nodes","set_selection","override_clonable_state_allowed","override","set_override_clonable_state","set_flags","set_params","from_data_custom","set_inputs","pos","set_position","set_comment","process_nodes_ui_data","node_names","node_name","importers","importer","dispatch_node","process_data","process_inputs_data","selected_nodes","inputs_data","input_data","input_node_name","has_named_input","node_data","process_ui_data","params_update_options","param_type","has_param_and_same_type","_is_param_data_complex","_process_param_data_complex","_process_param_data_simple","params_delete_required","params_add_required","update_params","spare_param","spare","run_on_scene_load_hooks","dispatch_param","ParamJsonImporter","add_main","LINE_BREAK_REGEXP","_data","mark_as_loading","properties","set_frame_range","frame_range_locked","set_frame_range_locked","cameras_controller","set_master_camera_node_path","mark_as_loaded","CopRegister","run","EventRegister","GlRegister","MatRegister","ObjRegister","SopRegister"],"mappings":"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","file":"polygonjs-engine.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t};\n\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"polygonjs-engine\": 0\n \t};\n\n\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"\" + ({\"Gl~Mat\":\"Gl~Mat\",\"Gl\":\"Gl\",\"vendors~Cop~Mat~Obj~Sop\":\"vendors~Cop~Mat~Obj~Sop\",\"Mat\":\"Mat\",\"vendors~Cop~Obj~Sop\":\"vendors~Cop~Obj~Sop\",\"vendors~Cop~Obj\":\"vendors~Cop~Obj\",\"vendors~Cop\":\"vendors~Cop\",\"Cop\":\"Cop\",\"vendors~Obj~Sop\":\"vendors~Obj~Sop\",\"Obj\":\"Obj\",\"vendors~Sop\":\"vendors~Sop\",\"Sop\":\"Sop\",\"vendors~Event\":\"vendors~Event\",\"Event\":\"Event\"}[chunkId]||chunkId) + \".bundle.js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// This file contains only the entry chunk.\n \t// The chunk loading function for additional chunks\n \t__webpack_require__.e = function requireEnsure(chunkId) {\n \t\tvar promises = [];\n\n\n \t\t// JSONP chunk loading for javascript\n\n \t\tvar installedChunkData = installedChunks[chunkId];\n \t\tif(installedChunkData !== 0) { // 0 means \"already installed\".\n\n \t\t\t// a Promise means \"currently loading\".\n \t\t\tif(installedChunkData) {\n \t\t\t\tpromises.push(installedChunkData[2]);\n \t\t\t} else {\n \t\t\t\t// setup Promise in chunk cache\n \t\t\t\tvar promise = new Promise(function(resolve, reject) {\n \t\t\t\t\tinstalledChunkData = installedChunks[chunkId] = [resolve, reject];\n \t\t\t\t});\n \t\t\t\tpromises.push(installedChunkData[2] = promise);\n\n \t\t\t\t// start chunk loading\n \t\t\t\tvar script = document.createElement('script');\n \t\t\t\tvar onScriptComplete;\n\n \t\t\t\tscript.charset = 'utf-8';\n \t\t\t\tscript.timeout = 120;\n \t\t\t\tif (__webpack_require__.nc) {\n \t\t\t\t\tscript.setAttribute(\"nonce\", __webpack_require__.nc);\n \t\t\t\t}\n \t\t\t\tscript.src = jsonpScriptSrc(chunkId);\n\n \t\t\t\t// create error before stack unwound to get useful stacktrace later\n \t\t\t\tvar error = new Error();\n \t\t\t\tonScriptComplete = function (event) {\n \t\t\t\t\t// avoid mem leaks in IE.\n \t\t\t\t\tscript.onerror = script.onload = null;\n \t\t\t\t\tclearTimeout(timeout);\n \t\t\t\t\tvar chunk = installedChunks[chunkId];\n \t\t\t\t\tif(chunk !== 0) {\n \t\t\t\t\t\tif(chunk) {\n \t\t\t\t\t\t\tvar errorType = event && (event.type === 'load' ? 'missing' : event.type);\n \t\t\t\t\t\t\tvar realSrc = event && event.target && event.target.src;\n \t\t\t\t\t\t\terror.message = 'Loading chunk ' + chunkId + ' failed.\\n(' + errorType + ': ' + realSrc + ')';\n \t\t\t\t\t\t\terror.name = 'ChunkLoadError';\n \t\t\t\t\t\t\terror.type = errorType;\n \t\t\t\t\t\t\terror.request = realSrc;\n \t\t\t\t\t\t\tchunk[1](error);\n \t\t\t\t\t\t}\n \t\t\t\t\t\tinstalledChunks[chunkId] = undefined;\n \t\t\t\t\t}\n \t\t\t\t};\n \t\t\t\tvar timeout = setTimeout(function(){\n \t\t\t\t\tonScriptComplete({ type: 'timeout', target: script });\n \t\t\t\t}, 120000);\n \t\t\t\tscript.onerror = script.onload = onScriptComplete;\n \t\t\t\tdocument.head.appendChild(script);\n \t\t\t}\n \t\t}\n \t\treturn Promise.all(promises);\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonpPOLY\"] = window[\"webpackJsonpPOLY\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 327);\n","export enum ParamType {\n\tBOOLEAN = 'boolean',\n\tBUTTON = 'button',\n\tCOLOR = 'color',\n\tFLOAT = 'float',\n\tFOLDER = 'folder',\n\tINTEGER = 'integer',\n\tOPERATOR_PATH = 'operator_path',\n\tRAMP = 'ramp',\n\tSEPARATOR = 'separator',\n\tSTRING = 'string',\n\tVECTOR2 = 'vector2',\n\tVECTOR3 = 'vector3',\n\tVECTOR4 = 'vector4',\n}\n// export type ParamTypeKey = ParamType\n// export type ParamTypeKeysArray = Array<ParamTypeKey>\n// const ParamTypeKeysArray: ParamTypeKeysArray = [ParamType.BOOLEAN]\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\r\n    if (m) return m.call(o);\r\n    if (o && typeof o.length === \"number\") return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n    throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __spreadArrays() {\r\n    for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\r\n    for (var r = Array(s), k = 0, i = 0; i < il; i++)\r\n        for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\r\n            r[k] = a[j];\r\n    return r;\r\n};\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n\r\nexport function __classPrivateFieldGet(receiver, privateMap) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to get private field on non-instance\");\r\n    }\r\n    return privateMap.get(receiver);\r\n}\r\n\r\nexport function __classPrivateFieldSet(receiver, privateMap, value) {\r\n    if (!privateMap.has(receiver)) {\r\n        throw new TypeError(\"attempted to set private field on non-instance\");\r\n    }\r\n    privateMap.set(receiver, value);\r\n    return value;\r\n}\r\n","import { MathUtils } from './MathUtils.js';\nimport { Quaternion } from './Quaternion.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author kile / http://kile.stravaganza.org/\n * @author philogb / http://blog.thejit.org/\n * @author mikael emtinger / http://gomo.se/\n * @author egraether / http://egraether.com/\n * @author WestLangley / http://github.com/WestLangley\n */\n\nvar _vector = new Vector3();\nvar _quaternion = new Quaternion();\n\nfunction Vector3( x, y, z ) {\n\n\tthis.x = x || 0;\n\tthis.y = y || 0;\n\tthis.z = z || 0;\n\n}\n\nObject.assign( Vector3.prototype, {\n\n\tisVector3: true,\n\n\tset: function ( x, y, z ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetZ: function ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponent: function ( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetComponent: function ( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.x, this.y, this.z );\n\n\t},\n\n\tcopy: function ( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\n\t\treturn this;\n\n\t},\n\n\taddVectors: function ( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\n\t\treturn this;\n\n\t},\n\n\taddScaledVector: function ( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tsubScalar: function ( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\n\t\treturn this;\n\n\t},\n\n\tsubVectors: function ( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .multiply() now only accepts one argument. Use .multiplyVectors( a, b ) instead.' );\n\t\t\treturn this.multiplyVectors( v, w );\n\n\t\t}\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\t\tthis.z *= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyVectors: function ( a, b ) {\n\n\t\tthis.x = a.x * b.x;\n\t\tthis.y = a.y * b.y;\n\t\tthis.z = a.z * b.z;\n\n\t\treturn this;\n\n\t},\n\n\tapplyEuler: function ( euler ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tconsole.error( 'THREE.Vector3: .applyEuler() now expects an Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\treturn this.applyQuaternion( _quaternion.setFromEuler( euler ) );\n\n\t},\n\n\tapplyAxisAngle: function ( axis, angle ) {\n\n\t\treturn this.applyQuaternion( _quaternion.setFromAxisAngle( axis, angle ) );\n\n\t},\n\n\tapplyMatrix3: function ( m ) {\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 5 ] * y + e[ 8 ] * z;\n\n\t\treturn this;\n\n\t},\n\n\tapplyNormalMatrix: function ( m ) {\n\n\t\treturn this.applyMatrix3( m ).normalize();\n\n\t},\n\n\tapplyMatrix4: function ( m ) {\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar e = m.elements;\n\n\t\tvar w = 1 / ( e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] );\n\n\t\tthis.x = ( e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] ) * w;\n\t\tthis.y = ( e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] ) * w;\n\t\tthis.z = ( e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] ) * w;\n\n\t\treturn this;\n\n\t},\n\n\tapplyQuaternion: function ( q ) {\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar qx = q.x, qy = q.y, qz = q.z, qw = q.w;\n\n\t\t// calculate quat * vector\n\n\t\tvar ix = qw * x + qy * z - qz * y;\n\t\tvar iy = qw * y + qz * x - qx * z;\n\t\tvar iz = qw * z + qx * y - qy * x;\n\t\tvar iw = - qx * x - qy * y - qz * z;\n\n\t\t// calculate result * inverse quat\n\n\t\tthis.x = ix * qw + iw * - qx + iy * - qz - iz * - qy;\n\t\tthis.y = iy * qw + iw * - qy + iz * - qx - ix * - qz;\n\t\tthis.z = iz * qw + iw * - qz + ix * - qy - iy * - qx;\n\n\t\treturn this;\n\n\t},\n\n\tproject: function ( camera ) {\n\n\t\treturn this.applyMatrix4( camera.matrixWorldInverse ).applyMatrix4( camera.projectionMatrix );\n\n\t},\n\n\tunproject: function ( camera ) {\n\n\t\treturn this.applyMatrix4( camera.projectionMatrixInverse ).applyMatrix4( camera.matrixWorld );\n\n\t},\n\n\ttransformDirection: function ( m ) {\n\n\t\t// input: THREE.Matrix4 affine matrix\n\t\t// vector interpreted as a direction\n\n\t\tvar x = this.x, y = this.y, z = this.z;\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z;\n\n\t\treturn this.normalize();\n\n\t},\n\n\tdivide: function ( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\t\tthis.z /= v.z;\n\n\t\treturn this;\n\n\t},\n\n\tdivideScalar: function ( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t},\n\n\tmin: function ( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\n\t\treturn this;\n\n\t},\n\n\tmax: function ( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\n\t\treturn this;\n\n\t},\n\n\tclamp: function ( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampScalar: function ( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\t\tthis.z = Math.max( minVal, Math.min( maxVal, this.z ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampLength: function ( min, max ) {\n\n\t\tvar length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t},\n\n\tfloor: function () {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tceil: function () {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tround: function () {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\n\t\treturn this;\n\n\t},\n\n\troundToZero: function () {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z;\n\n\t},\n\n\t// TODO lengthSquared?\n\n\tlengthSq: function () {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z );\n\n\t},\n\n\tmanhattanLength: function () {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z );\n\n\t},\n\n\tnormalize: function () {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t},\n\n\tsetLength: function ( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t},\n\n\tlerp: function ( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tlerpVectors: function ( v1, v2, alpha ) {\n\n\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\n\n\t},\n\n\tcross: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: .cross() now only accepts one argument. Use .crossVectors( a, b ) instead.' );\n\t\t\treturn this.crossVectors( v, w );\n\n\t\t}\n\n\t\treturn this.crossVectors( this, v );\n\n\t},\n\n\tcrossVectors: function ( a, b ) {\n\n\t\tvar ax = a.x, ay = a.y, az = a.z;\n\t\tvar bx = b.x, by = b.y, bz = b.z;\n\n\t\tthis.x = ay * bz - az * by;\n\t\tthis.y = az * bx - ax * bz;\n\t\tthis.z = ax * by - ay * bx;\n\n\t\treturn this;\n\n\t},\n\n\tprojectOnVector: function ( v ) {\n\n\t\tvar denominator = v.lengthSq();\n\n\t\tif ( denominator === 0 ) return this.set( 0, 0, 0 );\n\n\t\tvar scalar = v.dot( this ) / denominator;\n\n\t\treturn this.copy( v ).multiplyScalar( scalar );\n\n\t},\n\n\tprojectOnPlane: function ( planeNormal ) {\n\n\t\t_vector.copy( this ).projectOnVector( planeNormal );\n\n\t\treturn this.sub( _vector );\n\n\t},\n\n\treflect: function ( normal ) {\n\n\t\t// reflect incident vector off plane orthogonal to normal\n\t\t// normal is assumed to have unit length\n\n\t\treturn this.sub( _vector.copy( normal ).multiplyScalar( 2 * this.dot( normal ) ) );\n\n\t},\n\n\tangleTo: function ( v ) {\n\n\t\tvar denominator = Math.sqrt( this.lengthSq() * v.lengthSq() );\n\n\t\tif ( denominator === 0 ) return Math.PI / 2;\n\n\t\tvar theta = this.dot( v ) / denominator;\n\n\t\t// clamp, to handle numerical problems\n\n\t\treturn Math.acos( MathUtils.clamp( theta, - 1, 1 ) );\n\n\t},\n\n\tdistanceTo: function ( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t},\n\n\tdistanceToSquared: function ( v ) {\n\n\t\tvar dx = this.x - v.x, dy = this.y - v.y, dz = this.z - v.z;\n\n\t\treturn dx * dx + dy * dy + dz * dz;\n\n\t},\n\n\tmanhattanDistanceTo: function ( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y ) + Math.abs( this.z - v.z );\n\n\t},\n\n\tsetFromSpherical: function ( s ) {\n\n\t\treturn this.setFromSphericalCoords( s.radius, s.phi, s.theta );\n\n\t},\n\n\tsetFromSphericalCoords: function ( radius, phi, theta ) {\n\n\t\tvar sinPhiRadius = Math.sin( phi ) * radius;\n\n\t\tthis.x = sinPhiRadius * Math.sin( theta );\n\t\tthis.y = Math.cos( phi ) * radius;\n\t\tthis.z = sinPhiRadius * Math.cos( theta );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCylindrical: function ( c ) {\n\n\t\treturn this.setFromCylindricalCoords( c.radius, c.theta, c.y );\n\n\t},\n\n\tsetFromCylindricalCoords: function ( radius, theta, y ) {\n\n\t\tthis.x = radius * Math.sin( theta );\n\t\tthis.y = y;\n\t\tthis.z = radius * Math.cos( theta );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrixPosition: function ( m ) {\n\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 12 ];\n\t\tthis.y = e[ 13 ];\n\t\tthis.z = e[ 14 ];\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrixScale: function ( m ) {\n\n\t\tvar sx = this.setFromMatrixColumn( m, 0 ).length();\n\t\tvar sy = this.setFromMatrixColumn( m, 1 ).length();\n\t\tvar sz = this.setFromMatrixColumn( m, 2 ).length();\n\n\t\tthis.x = sx;\n\t\tthis.y = sy;\n\t\tthis.z = sz;\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrixColumn: function ( m, index ) {\n\n\t\treturn this.fromArray( m.elements, index * 4 );\n\n\t},\n\n\tsetFromMatrix3Column: function ( m, index ) {\n\n\t\treturn this.fromArray( m.elements, index * 3 );\n\n\t},\n\n\tequals: function ( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\n\t\treturn array;\n\n\t},\n\n\tfromBufferAttribute: function ( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector3: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Vector3 };\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nmodule.exports = isArray;\n","export var REVISION = '115';\nexport var MOUSE = { LEFT: 0, MIDDLE: 1, RIGHT: 2, ROTATE: 0, DOLLY: 1, PAN: 2 };\nexport var TOUCH = { ROTATE: 0, PAN: 1, DOLLY_PAN: 2, DOLLY_ROTATE: 3 };\nexport var CullFaceNone = 0;\nexport var CullFaceBack = 1;\nexport var CullFaceFront = 2;\nexport var CullFaceFrontBack = 3;\nexport var FrontFaceDirectionCW = 0;\nexport var FrontFaceDirectionCCW = 1;\nexport var BasicShadowMap = 0;\nexport var PCFShadowMap = 1;\nexport var PCFSoftShadowMap = 2;\nexport var VSMShadowMap = 3;\nexport var FrontSide = 0;\nexport var BackSide = 1;\nexport var DoubleSide = 2;\nexport var FlatShading = 1;\nexport var SmoothShading = 2;\nexport var NoBlending = 0;\nexport var NormalBlending = 1;\nexport var AdditiveBlending = 2;\nexport var SubtractiveBlending = 3;\nexport var MultiplyBlending = 4;\nexport var CustomBlending = 5;\nexport var AddEquation = 100;\nexport var SubtractEquation = 101;\nexport var ReverseSubtractEquation = 102;\nexport var MinEquation = 103;\nexport var MaxEquation = 104;\nexport var ZeroFactor = 200;\nexport var OneFactor = 201;\nexport var SrcColorFactor = 202;\nexport var OneMinusSrcColorFactor = 203;\nexport var SrcAlphaFactor = 204;\nexport var OneMinusSrcAlphaFactor = 205;\nexport var DstAlphaFactor = 206;\nexport var OneMinusDstAlphaFactor = 207;\nexport var DstColorFactor = 208;\nexport var OneMinusDstColorFactor = 209;\nexport var SrcAlphaSaturateFactor = 210;\nexport var NeverDepth = 0;\nexport var AlwaysDepth = 1;\nexport var LessDepth = 2;\nexport var LessEqualDepth = 3;\nexport var EqualDepth = 4;\nexport var GreaterEqualDepth = 5;\nexport var GreaterDepth = 6;\nexport var NotEqualDepth = 7;\nexport var MultiplyOperation = 0;\nexport var MixOperation = 1;\nexport var AddOperation = 2;\nexport var NoToneMapping = 0;\nexport var LinearToneMapping = 1;\nexport var ReinhardToneMapping = 2;\nexport var Uncharted2ToneMapping = 3;\nexport var CineonToneMapping = 4;\nexport var ACESFilmicToneMapping = 5;\n\nexport var UVMapping = 300;\nexport var CubeReflectionMapping = 301;\nexport var CubeRefractionMapping = 302;\nexport var EquirectangularReflectionMapping = 303;\nexport var EquirectangularRefractionMapping = 304;\nexport var SphericalReflectionMapping = 305;\nexport var CubeUVReflectionMapping = 306;\nexport var CubeUVRefractionMapping = 307;\nexport var RepeatWrapping = 1000;\nexport var ClampToEdgeWrapping = 1001;\nexport var MirroredRepeatWrapping = 1002;\nexport var NearestFilter = 1003;\nexport var NearestMipmapNearestFilter = 1004;\nexport var NearestMipMapNearestFilter = 1004;\nexport var NearestMipmapLinearFilter = 1005;\nexport var NearestMipMapLinearFilter = 1005;\nexport var LinearFilter = 1006;\nexport var LinearMipmapNearestFilter = 1007;\nexport var LinearMipMapNearestFilter = 1007;\nexport var LinearMipmapLinearFilter = 1008;\nexport var LinearMipMapLinearFilter = 1008;\nexport var UnsignedByteType = 1009;\nexport var ByteType = 1010;\nexport var ShortType = 1011;\nexport var UnsignedShortType = 1012;\nexport var IntType = 1013;\nexport var UnsignedIntType = 1014;\nexport var FloatType = 1015;\nexport var HalfFloatType = 1016;\nexport var UnsignedShort4444Type = 1017;\nexport var UnsignedShort5551Type = 1018;\nexport var UnsignedShort565Type = 1019;\nexport var UnsignedInt248Type = 1020;\nexport var AlphaFormat = 1021;\nexport var RGBFormat = 1022;\nexport var RGBAFormat = 1023;\nexport var LuminanceFormat = 1024;\nexport var LuminanceAlphaFormat = 1025;\nexport var RGBEFormat = RGBAFormat;\nexport var DepthFormat = 1026;\nexport var DepthStencilFormat = 1027;\nexport var RedFormat = 1028;\nexport var RedIntegerFormat = 1029;\nexport var RGFormat = 1030;\nexport var RGIntegerFormat = 1031;\nexport var RGBIntegerFormat = 1032;\nexport var RGBAIntegerFormat = 1033;\n\nexport var RGB_S3TC_DXT1_Format = 33776;\nexport var RGBA_S3TC_DXT1_Format = 33777;\nexport var RGBA_S3TC_DXT3_Format = 33778;\nexport var RGBA_S3TC_DXT5_Format = 33779;\nexport var RGB_PVRTC_4BPPV1_Format = 35840;\nexport var RGB_PVRTC_2BPPV1_Format = 35841;\nexport var RGBA_PVRTC_4BPPV1_Format = 35842;\nexport var RGBA_PVRTC_2BPPV1_Format = 35843;\nexport var RGB_ETC1_Format = 36196;\nexport var RGB_ETC2_Format = 37492;\nexport var RGBA_ETC2_EAC_Format = 37496;\nexport var RGBA_ASTC_4x4_Format = 37808;\nexport var RGBA_ASTC_5x4_Format = 37809;\nexport var RGBA_ASTC_5x5_Format = 37810;\nexport var RGBA_ASTC_6x5_Format = 37811;\nexport var RGBA_ASTC_6x6_Format = 37812;\nexport var RGBA_ASTC_8x5_Format = 37813;\nexport var RGBA_ASTC_8x6_Format = 37814;\nexport var RGBA_ASTC_8x8_Format = 37815;\nexport var RGBA_ASTC_10x5_Format = 37816;\nexport var RGBA_ASTC_10x6_Format = 37817;\nexport var RGBA_ASTC_10x8_Format = 37818;\nexport var RGBA_ASTC_10x10_Format = 37819;\nexport var RGBA_ASTC_12x10_Format = 37820;\nexport var RGBA_ASTC_12x12_Format = 37821;\nexport var RGBA_BPTC_Format = 36492;\nexport var SRGB8_ALPHA8_ASTC_4x4_Format = 37840;\nexport var SRGB8_ALPHA8_ASTC_5x4_Format = 37841;\nexport var SRGB8_ALPHA8_ASTC_5x5_Format = 37842;\nexport var SRGB8_ALPHA8_ASTC_6x5_Format = 37843;\nexport var SRGB8_ALPHA8_ASTC_6x6_Format = 37844;\nexport var SRGB8_ALPHA8_ASTC_8x5_Format = 37845;\nexport var SRGB8_ALPHA8_ASTC_8x6_Format = 37846;\nexport var SRGB8_ALPHA8_ASTC_8x8_Format = 37847;\nexport var SRGB8_ALPHA8_ASTC_10x5_Format = 37848;\nexport var SRGB8_ALPHA8_ASTC_10x6_Format = 37849;\nexport var SRGB8_ALPHA8_ASTC_10x8_Format = 37850;\nexport var SRGB8_ALPHA8_ASTC_10x10_Format = 37851;\nexport var SRGB8_ALPHA8_ASTC_12x10_Format = 37852;\nexport var SRGB8_ALPHA8_ASTC_12x12_Format = 37853;\nexport var LoopOnce = 2200;\nexport var LoopRepeat = 2201;\nexport var LoopPingPong = 2202;\nexport var InterpolateDiscrete = 2300;\nexport var InterpolateLinear = 2301;\nexport var InterpolateSmooth = 2302;\nexport var ZeroCurvatureEnding = 2400;\nexport var ZeroSlopeEnding = 2401;\nexport var WrapAroundEnding = 2402;\nexport var TrianglesDrawMode = 0;\nexport var TriangleStripDrawMode = 1;\nexport var TriangleFanDrawMode = 2;\nexport var LinearEncoding = 3000;\nexport var sRGBEncoding = 3001;\nexport var GammaEncoding = 3007;\nexport var RGBEEncoding = 3002;\nexport var LogLuvEncoding = 3003;\nexport var RGBM7Encoding = 3004;\nexport var RGBM16Encoding = 3005;\nexport var RGBDEncoding = 3006;\nexport var BasicDepthPacking = 3200;\nexport var RGBADepthPacking = 3201;\nexport var TangentSpaceNormalMap = 0;\nexport var ObjectSpaceNormalMap = 1;\n\nexport var ZeroStencilOp = 0;\nexport var KeepStencilOp = 7680;\nexport var ReplaceStencilOp = 7681;\nexport var IncrementStencilOp = 7682;\nexport var DecrementStencilOp = 7683;\nexport var IncrementWrapStencilOp = 34055;\nexport var DecrementWrapStencilOp = 34056;\nexport var InvertStencilOp = 5386;\n\nexport var NeverStencilFunc = 512;\nexport var LessStencilFunc = 513;\nexport var EqualStencilFunc = 514;\nexport var LessEqualStencilFunc = 515;\nexport var GreaterStencilFunc = 516;\nexport var NotEqualStencilFunc = 517;\nexport var GreaterEqualStencilFunc = 518;\nexport var AlwaysStencilFunc = 519;\n\nexport var StaticDrawUsage = 35044;\nexport var DynamicDrawUsage = 35048;\nexport var StreamDrawUsage = 35040;\nexport var StaticReadUsage = 35045;\nexport var DynamicReadUsage = 35049;\nexport var StreamReadUsage = 35041;\nexport var StaticCopyUsage = 35046;\nexport var DynamicCopyUsage = 35050;\nexport var StreamCopyUsage = 35042;\n","var baseGetTag = require('./_baseGetTag'),\n    isArray = require('./isArray'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar stringTag = '[object String]';\n\n/**\n * Checks if `value` is classified as a `String` primitive or object.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a string, else `false`.\n * @example\n *\n * _.isString('abc');\n * // => true\n *\n * _.isString(1);\n * // => false\n */\nfunction isString(value) {\n  return typeof value == 'string' ||\n    (!isArray(value) && isObjectLike(value) && baseGetTag(value) == stringTag);\n}\n\nmodule.exports = isString;\n","import {BaseNodeType} from '../engine/nodes/_Base';\nimport {BaseParamType} from '../engine/params/_Base';\nimport {DecomposedPath} from './DecomposedPath';\n// import {NodeSimple} from '/graph/NodeSimple'\n\ntype NodeOrParam = BaseNodeType | BaseParamType;\n\nexport class CoreWalker {\n\tpublic static readonly SEPARATOR = '/';\n\tpublic static readonly DOT = '.';\n\tpublic static readonly CURRENT = CoreWalker.DOT;\n\tpublic static readonly PARENT = '..';\n\tpublic static readonly CURRENT_WITH_SLASH = `${CoreWalker.CURRENT}/`;\n\tpublic static readonly PARENT_WITH_SLASH = `${CoreWalker.PARENT}/`;\n\tpublic static readonly NON_LETTER_PREFIXES = [CoreWalker.SEPARATOR, CoreWalker.DOT];\n\n\tstatic find_node(node_src: BaseNodeType, path: string, decomposed_path?: DecomposedPath): BaseNodeType | null {\n\t\tif (!node_src) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst elements: string[] = path.split(CoreWalker.SEPARATOR).filter((e) => e.length > 0);\n\t\tconst first_element = elements[0];\n\n\t\tlet next_node: BaseNodeType | null = null;\n\t\tif (path[0] === CoreWalker.SEPARATOR) {\n\t\t\tconst path_from_root = path.substr(1);\n\t\t\tnext_node = this.find_node(node_src.root, path_from_root, decomposed_path);\n\t\t} else {\n\t\t\tswitch (first_element) {\n\t\t\t\tcase CoreWalker.PARENT:\n\t\t\t\t\tdecomposed_path?.add_path_element(first_element);\n\t\t\t\t\tnext_node = node_src.parent;\n\t\t\t\t\tbreak;\n\t\t\t\tcase CoreWalker.CURRENT:\n\t\t\t\t\tdecomposed_path?.add_path_element(first_element);\n\t\t\t\t\tnext_node = node_src;\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\t// TODO: What does .node means?? in which case is this not a node? (it is for nodes which cannot have children - but I'd like to unify the api)\n\t\t\t\t\t// console.error(\"rethink this method Walker.find_node\")\n\t\t\t\t\t// if (node_src.node != null) {\n\t\t\t\t\tnext_node = node_src.node(first_element);\n\t\t\t\t\tif (next_node) {\n\t\t\t\t\t\tdecomposed_path?.add_node(first_element, next_node);\n\t\t\t\t\t}\n\n\t\t\t\t// if (next_node == null) { this.find_node_warning(node_src, first_element); }\n\t\t\t\t// return next_node;\n\t\t\t\t// break\n\t\t\t\t// }\n\t\t\t}\n\n\t\t\tif (next_node != null && elements.length > 1) {\n\t\t\t\tconst remainder = elements.slice(1).join(CoreWalker.SEPARATOR);\n\t\t\t\tnext_node = this.find_node(next_node, remainder, decomposed_path);\n\t\t\t}\n\t\t\treturn next_node;\n\t\t}\n\n\t\treturn next_node;\n\t}\n\n\tstatic find_param(node_src: BaseNodeType, path: string, decomposed_path?: DecomposedPath): BaseParamType | null {\n\t\tif (!node_src) {\n\t\t\treturn null;\n\t\t}\n\n\t\tconst elements = path.split(CoreWalker.SEPARATOR);\n\n\t\tif (elements.length === 1) {\n\t\t\treturn node_src.params.get(elements[0]);\n\t\t} else {\n\t\t\tconst node_path = elements.slice(0, +(elements.length - 2) + 1 || undefined).join(CoreWalker.SEPARATOR);\n\t\t\tconst node = this.find_node(node_src, node_path, decomposed_path);\n\t\t\tif (node != null) {\n\t\t\t\tconst param_name = elements[elements.length - 1];\n\t\t\t\tconst param = node.params.get(param_name);\n\t\t\t\tif (decomposed_path && param) {\n\t\t\t\t\tdecomposed_path.add_node(param_name, param);\n\t\t\t\t}\n\t\t\t\treturn param;\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t\t// throw `no node found for path ${node_path}`;\n\t\t\t}\n\t\t}\n\t}\n\tstatic relative_path(src_graph_node: Readonly<NodeOrParam>, dest_graph_node: Readonly<NodeOrParam>): string {\n\t\tconst parent = this.closest_common_parent(src_graph_node, dest_graph_node);\n\t\tif (!parent) {\n\t\t\treturn dest_graph_node.full_path();\n\t\t} else {\n\t\t\tconst distance = this.distance_to_parent(src_graph_node, parent);\n\t\t\t// const up = lodash_padStart(\"\", (distance-1)*3, \"../\")\n\t\t\tlet up = '';\n\t\t\tif (distance - 1 > 0) {\n\t\t\t\tlet i = 0;\n\t\t\t\tconst ups = [];\n\t\t\t\twhile (i++ < distance - 1) {\n\t\t\t\t\tups.push(CoreWalker.PARENT);\n\t\t\t\t}\n\t\t\t\tup = ups.join(CoreWalker.SEPARATOR) + CoreWalker.SEPARATOR;\n\t\t\t}\n\n\t\t\tconst parent_path_elements = parent\n\t\t\t\t.full_path()\n\t\t\t\t.split(CoreWalker.SEPARATOR)\n\t\t\t\t.filter((e) => e.length > 0);\n\t\t\tconst dest_path_elements = dest_graph_node\n\t\t\t\t.full_path()\n\t\t\t\t.split(CoreWalker.SEPARATOR)\n\t\t\t\t.filter((e) => e.length > 0);\n\t\t\tconst remaining_elements = [];\n\t\t\tlet cmptr = 0;\n\t\t\tfor (let dest_path_element of dest_path_elements) {\n\t\t\t\tif (!parent_path_elements[cmptr]) {\n\t\t\t\t\tremaining_elements.push(dest_path_element);\n\t\t\t\t}\n\t\t\t\tcmptr++;\n\t\t\t}\n\t\t\tconst down = remaining_elements.join(CoreWalker.SEPARATOR);\n\t\t\treturn `${up}${down}`;\n\t\t}\n\t}\n\n\tstatic closest_common_parent(\n\t\tgraph_node1: Readonly<NodeOrParam>,\n\t\tgraph_node2: Readonly<NodeOrParam>\n\t): BaseNodeType | null {\n\t\tconst parents1 = this.parents(graph_node1).reverse();\n\t\tconst parents2 = this.parents(graph_node2).reverse();\n\n\t\tconst min_depth = Math.min(parents1.length, parents2.length);\n\t\tlet found_parent = null;\n\n\t\tfor (let i = 0; i < min_depth; i++) {\n\t\t\tif (parents1[i].graph_node_id == parents2[i].graph_node_id) {\n\t\t\t\tfound_parent = parents1[i];\n\t\t\t}\n\t\t}\n\t\treturn found_parent;\n\t}\n\tstatic parents(graph_node: Readonly<NodeOrParam>): BaseNodeType[] {\n\t\tconst parents = [];\n\t\tlet parent = graph_node.parent;\n\t\twhile (parent) {\n\t\t\tparents.push(parent);\n\t\t\tparent = parent.parent;\n\t\t}\n\t\treturn parents;\n\t}\n\tstatic distance_to_parent(graph_node: Readonly<NodeOrParam>, dest: Readonly<BaseNodeType>): number {\n\t\tlet distance = 0;\n\t\tlet current: Readonly<NodeOrParam | null> = graph_node;\n\t\tconst dest_id = dest.graph_node_id;\n\t\twhile (current && current.graph_node_id != dest_id) {\n\t\t\tdistance += 1;\n\t\t\tcurrent = current.parent;\n\t\t}\n\t\tif (current && current.graph_node_id == dest_id) {\n\t\t\treturn distance;\n\t\t} else {\n\t\t\treturn -1;\n\t\t}\n\t}\n\n\tstatic make_absolute_path(node_src: BaseNodeType | BaseParamType, path: string): string | null {\n\t\tconst path_elements = path.split(CoreWalker.SEPARATOR);\n\t\tconst first_element = path_elements.shift();\n\n\t\tif (first_element) {\n\t\t\tswitch (first_element) {\n\t\t\t\tcase '..': {\n\t\t\t\t\tif (node_src.parent) {\n\t\t\t\t\t\treturn this.make_absolute_path(node_src.parent, path_elements.join(CoreWalker.SEPARATOR));\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tcase '.': {\n\t\t\t\t\treturn this.make_absolute_path(node_src, path_elements.join(CoreWalker.SEPARATOR));\n\t\t\t\t}\n\t\t\t\tdefault: {\n\t\t\t\t\treturn [node_src.full_path(), path].join(CoreWalker.SEPARATOR);\n\t\t\t\t}\n\t\t\t}\n\t\t} else {\n\t\t\treturn node_src.full_path();\n\t\t}\n\t}\n}\n","// events\nexport enum NodeEvent {\n\tCREATED = 'node_created',\n\tDELETED = 'node_deleted',\n\tNAME_UPDATED = 'node_name_update',\n\tOVERRIDE_CLONABLE_STATE_UPDATE = 'node_override_clonable_state_update',\n\tNAMED_OUTPUTS_UPDATED = 'node_named_outputs_updated',\n\tNAMED_INPUTS_UPDATED = 'node_named_inputs_updated',\n\tINPUTS_UPDATED = 'node_inputs_updated',\n\tPARAMS_UPDATED = 'node_params_updated',\n\tUI_DATA_POSITION_UPDATED = 'node_ui_data_position_updated',\n\tUI_DATA_COMMENT_UPDATED = 'node_ui_data_comment_updated',\n\tERROR_UPDATED = 'node_error_updated',\n\tFLAG_BYPASS_UPDATED = 'bypass_flag_updated',\n\tFLAG_DISPLAY_UPDATED = 'display_flag_updated',\n\tSELECTION_UPDATED = 'selection_updated',\n}\n","export enum ParamEvent {\n\tVISIBLE_UPDATED = 'param_visible_updated',\n\t// UPDATED = 'param_updated',\n\tRAW_INPUT_UPDATED = 'raw_input_updated',\n\tVALUE_UPDATED = 'param_value_updated',\n\tEXPRESSION_UPDATED = 'param_expression_update',\n\tERROR_UPDATED = 'param_error_updated',\n\tDELETED = 'param_deleted',\n}\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar numberTag = '[object Number]';\n\n/**\n * Checks if `value` is classified as a `Number` primitive or object.\n *\n * **Note:** To exclude `Infinity`, `-Infinity`, and `NaN`, which are\n * classified as numbers, use the `_.isFinite` method.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a number, else `false`.\n * @example\n *\n * _.isNumber(3);\n * // => true\n *\n * _.isNumber(Number.MIN_VALUE);\n * // => true\n *\n * _.isNumber(Infinity);\n * // => true\n *\n * _.isNumber('3');\n * // => false\n */\nfunction isNumber(value) {\n  return typeof value == 'number' ||\n    (isObjectLike(value) && baseGetTag(value) == numberTag);\n}\n\nmodule.exports = isNumber;\n","/**\n * @author alteredq / http://alteredqualia.com/\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author thezwap\n */\n\nvar _lut = [];\n\nfor ( var i = 0; i < 256; i ++ ) {\n\n\t_lut[ i ] = ( i < 16 ? '0' : '' ) + ( i ).toString( 16 );\n\n}\n\nvar MathUtils = {\n\n\tDEG2RAD: Math.PI / 180,\n\tRAD2DEG: 180 / Math.PI,\n\n\tgenerateUUID: function () {\n\n\t\t// http://stackoverflow.com/questions/105034/how-to-create-a-guid-uuid-in-javascript/21963136#21963136\n\n\t\tvar d0 = Math.random() * 0xffffffff | 0;\n\t\tvar d1 = Math.random() * 0xffffffff | 0;\n\t\tvar d2 = Math.random() * 0xffffffff | 0;\n\t\tvar d3 = Math.random() * 0xffffffff | 0;\n\t\tvar uuid = _lut[ d0 & 0xff ] + _lut[ d0 >> 8 & 0xff ] + _lut[ d0 >> 16 & 0xff ] + _lut[ d0 >> 24 & 0xff ] + '-' +\n\t\t\t_lut[ d1 & 0xff ] + _lut[ d1 >> 8 & 0xff ] + '-' + _lut[ d1 >> 16 & 0x0f | 0x40 ] + _lut[ d1 >> 24 & 0xff ] + '-' +\n\t\t\t_lut[ d2 & 0x3f | 0x80 ] + _lut[ d2 >> 8 & 0xff ] + '-' + _lut[ d2 >> 16 & 0xff ] + _lut[ d2 >> 24 & 0xff ] +\n\t\t\t_lut[ d3 & 0xff ] + _lut[ d3 >> 8 & 0xff ] + _lut[ d3 >> 16 & 0xff ] + _lut[ d3 >> 24 & 0xff ];\n\n\t\t// .toUpperCase() here flattens concatenated strings to save heap memory space.\n\t\treturn uuid.toUpperCase();\n\n\t},\n\n\tclamp: function ( value, min, max ) {\n\n\t\treturn Math.max( min, Math.min( max, value ) );\n\n\t},\n\n\t// compute euclidian modulo of m % n\n\t// https://en.wikipedia.org/wiki/Modulo_operation\n\n\teuclideanModulo: function ( n, m ) {\n\n\t\treturn ( ( n % m ) + m ) % m;\n\n\t},\n\n\t// Linear mapping from range <a1, a2> to range <b1, b2>\n\n\tmapLinear: function ( x, a1, a2, b1, b2 ) {\n\n\t\treturn b1 + ( x - a1 ) * ( b2 - b1 ) / ( a2 - a1 );\n\n\t},\n\n\t// https://en.wikipedia.org/wiki/Linear_interpolation\n\n\tlerp: function ( x, y, t ) {\n\n\t\treturn ( 1 - t ) * x + t * y;\n\n\t},\n\n\t// http://en.wikipedia.org/wiki/Smoothstep\n\n\tsmoothstep: function ( x, min, max ) {\n\n\t\tif ( x <= min ) return 0;\n\t\tif ( x >= max ) return 1;\n\n\t\tx = ( x - min ) / ( max - min );\n\n\t\treturn x * x * ( 3 - 2 * x );\n\n\t},\n\n\tsmootherstep: function ( x, min, max ) {\n\n\t\tif ( x <= min ) return 0;\n\t\tif ( x >= max ) return 1;\n\n\t\tx = ( x - min ) / ( max - min );\n\n\t\treturn x * x * x * ( x * ( x * 6 - 15 ) + 10 );\n\n\t},\n\n\t// Random integer from <low, high> interval\n\n\trandInt: function ( low, high ) {\n\n\t\treturn low + Math.floor( Math.random() * ( high - low + 1 ) );\n\n\t},\n\n\t// Random float from <low, high> interval\n\n\trandFloat: function ( low, high ) {\n\n\t\treturn low + Math.random() * ( high - low );\n\n\t},\n\n\t// Random float from <-range/2, range/2> interval\n\n\trandFloatSpread: function ( range ) {\n\n\t\treturn range * ( 0.5 - Math.random() );\n\n\t},\n\n\tdegToRad: function ( degrees ) {\n\n\t\treturn degrees * MathUtils.DEG2RAD;\n\n\t},\n\n\tradToDeg: function ( radians ) {\n\n\t\treturn radians * MathUtils.RAD2DEG;\n\n\t},\n\n\tisPowerOfTwo: function ( value ) {\n\n\t\treturn ( value & ( value - 1 ) ) === 0 && value !== 0;\n\n\t},\n\n\tceilPowerOfTwo: function ( value ) {\n\n\t\treturn Math.pow( 2, Math.ceil( Math.log( value ) / Math.LN2 ) );\n\n\t},\n\n\tfloorPowerOfTwo: function ( value ) {\n\n\t\treturn Math.pow( 2, Math.floor( Math.log( value ) / Math.LN2 ) );\n\n\t},\n\n\tsetQuaternionFromProperEuler: function ( q, a, b, c, order ) {\n\n\t\t// Intrinsic Proper Euler Angles - see https://en.wikipedia.org/wiki/Euler_angles\n\n\t\t// rotations are applied to the axes in the order specified by 'order'\n\t\t// rotation by angle 'a' is applied first, then by angle 'b', then by angle 'c'\n\t\t// angles are in radians\n\n\t\tvar cos = Math.cos;\n\t\tvar sin = Math.sin;\n\n\t\tvar c2 = cos( b / 2 );\n\t\tvar s2 = sin( b / 2 );\n\n\t\tvar c13 = cos( ( a + c ) / 2 );\n\t\tvar s13 = sin( ( a + c ) / 2 );\n\n\t\tvar c1_3 = cos( ( a - c ) / 2 );\n\t\tvar s1_3 = sin( ( a - c ) / 2 );\n\n\t\tvar c3_1 = cos( ( c - a ) / 2 );\n\t\tvar s3_1 = sin( ( c - a ) / 2 );\n\n\t\tif ( order === 'XYX' ) {\n\n\t\t\tq.set( c2 * s13, s2 * c1_3, s2 * s1_3, c2 * c13 );\n\n\t\t} else if ( order === 'YZY' ) {\n\n\t\t\tq.set( s2 * s1_3, c2 * s13, s2 * c1_3, c2 * c13 );\n\n\t\t} else if ( order === 'ZXZ' ) {\n\n\t\t\tq.set( s2 * c1_3, s2 * s1_3, c2 * s13, c2 * c13 );\n\n\t\t} else if ( order === 'XZX' ) {\n\n\t\t\tq.set( c2 * s13, s2 * s3_1, s2 * c3_1, c2 * c13 );\n\n\t\t} else if ( order === 'YXY' ) {\n\n\t\t\tq.set( s2 * c3_1, c2 * s13, s2 * s3_1, c2 * c13 );\n\n\t\t} else if ( order === 'ZYZ' ) {\n\n\t\t\tq.set( s2 * s3_1, s2 * c3_1, c2 * s13, c2 * c13 );\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order.' );\n\n\t\t}\n\n\t}\n\n};\n\n\nexport { MathUtils };\n","import {WebGLRenderer} from 'three/src/renderers/WebGLRenderer';\nimport {Texture} from 'three/src/textures/Texture';\n// import {NearestFilter, LinearEncoding, HalfFloatType} from 'three/src/constants'\n// import EquirectangularToCubeGenerator from 'src/core/Utils/EquirectangularToCubeGenerator';\n// import PMREMGenerator from 'src/core/Utils/PMREMGenerator';\n// import PMREMCubeUVPacker from 'src/core/Utils/PMREMCubeUVPacker';\n\ninterface RendererByString {\n\t[propName: string]: WebGLRenderer;\n}\ninterface TextureByString {\n\t[propName: string]: Texture;\n}\n\ninterface POLYWebGLRenderer extends WebGLRenderer {\n\t_polygon_id: number;\n}\n\nconst CONTEXT_OPTIONS = {\n\tantialias: true,\n\t// preserveDrawingBuffer: true, // this could only be useful to capture static images\n};\n\ntype Callback = (value: WebGLRenderer) => void;\n\nexport class RenderersController {\n\t_next_renderer_id: number = 0;\n\t_next_env_map_id: number = 0;\n\t_renderers: RendererByString = {};\n\t_env_maps: TextureByString = {};\n\tprivate _require_webgl2: boolean = false;\n\tprivate _resolves: Callback[] = [];\n\n\tconstructor() {}\n\n\tset_require_webgl2() {\n\t\tif (!this._require_webgl2) {\n\t\t\tthis._require_webgl2 = true;\n\t\t}\n\t}\n\trendering_context(canvas: HTMLCanvasElement): WebGLRenderingContext {\n\t\tlet gl: WebGLRenderingContext | null = null;\n\t\tif (this._require_webgl2) {\n\t\t\tgl = this._rendering_context_webgl(canvas, true);\n\t\t}\n\t\tif (!gl) {\n\t\t\tgl = this._rendering_context_webgl(canvas, false);\n\t\t}\n\n\t\t// gl.getExtension('OES_standard_derivatives') // for derivative normals, but it cannot work at the moment (see node Gl/DerivativeNormals)\n\t\t// to test data texture\n\t\t// gl.getExtension('OES_texture_float')\n\t\t// gl.getExtension('OES_texture_float_linear')\n\n\t\treturn gl;\n\t}\n\tprivate _rendering_context_webgl(canvas: HTMLCanvasElement, webgl2: boolean): WebGLRenderingContext {\n\t\tlet context_name = webgl2 ? 'webgl2' : 'webgl';\n\t\tlet gl = canvas.getContext(context_name, CONTEXT_OPTIONS);\n\t\tif (!gl) {\n\t\t\tcontext_name = webgl2 ? 'experimental-webgl2' : 'experimental-webgl';\n\t\t\tgl = canvas.getContext(context_name, CONTEXT_OPTIONS);\n\t\t}\n\t\treturn gl as WebGLRenderingContext;\n\t}\n\t// private _rendering_context_webgl(\n\t// \tcanvas: HTMLCanvasElement\n\t// ): WebGLRenderingContext {\n\t// \tlet gl = canvas.getContext('webgl', CONTEXT_OPTIONS)\n\t// \tif (!gl) {\n\t// \t\tgl = canvas.getContext('experimental-webgl', CONTEXT_OPTIONS)\n\t// \t}\n\t// \treturn gl as WebGLRenderingContext\n\t// }\n\n\tregister_renderer(renderer: WebGLRenderer) {\n\t\tif ((renderer as POLYWebGLRenderer)._polygon_id) {\n\t\t\tthrow new Error('render already registered');\n\t\t}\n\t\t(renderer as POLYWebGLRenderer)._polygon_id = this._next_renderer_id += 1;\n\n\t\t// there is a bug where 2 renderers are created from the beginning\n\t\t// because the from_json of the viewer_component is called after\n\t\t// the camera being set for the first time\n\t\t// console.log(\"register renderer\", renderer, renderer._polygon_id)\n\n\t\t// this is being tested in PostProcess\n\t\t// const canvas = renderer.domElement\n\t\t// const gl = canvas.getContext( 'webgl' ) || canvas.getContext( 'experimental-webgl' )\n\t\t// const extension_exist = gl.getExtension('OES_standard_derivatives')\n\t\t// if(!extension_exist){\n\t\t// \tconsole.warn(\"renderers controller: gl extension not available\")\n\t\t// }\n\n\t\tthis._renderers[(renderer as POLYWebGLRenderer)._polygon_id] = renderer;\n\n\t\tif (Object.keys(this._renderers).length == 1) {\n\t\t\tthis.flush_callbacks_with_renderer(renderer);\n\t\t}\n\t}\n\tderegister_renderer(renderer: WebGLRenderer) {\n\t\tdelete this._renderers[(renderer as POLYWebGLRenderer)._polygon_id];\n\t\trenderer.dispose();\n\t}\n\tprivate first_renderer(): WebGLRenderer | null {\n\t\tconst first_id = Object.keys(this._renderers)[0];\n\t\tif (first_id) {\n\t\t\treturn this._renderers[first_id];\n\t\t}\n\t\treturn null;\n\t}\n\trenderers(): WebGLRenderer[] {\n\t\treturn Object.values(this._renderers);\n\t}\n\n\tprivate flush_callbacks_with_renderer(renderer: WebGLRenderer) {\n\t\tlet callback: Callback | undefined;\n\t\twhile ((callback = this._resolves.pop())) {\n\t\t\tcallback(renderer);\n\t\t}\n\t}\n\n\tasync wait_for_renderer(): Promise<WebGLRenderer> {\n\t\tconst renderer = this.first_renderer();\n\t\tif (renderer) {\n\t\t\treturn renderer;\n\t\t} else {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tthis._resolves.push(resolve);\n\t\t\t});\n\t\t}\n\t}\n\n\t// async register_env_map(env_map: Texture){\n\t// \tconsole.log(\"register_env_map\", env_map)\n\t// \tif(env_map._polygon_id){\n\t// \t\tthrow new Error('cube_map already registered')\n\t// \t}\n\t// \tconst texture = await this.prepare_env_map(env_map)\n\t// \ttexture._polygon_id = (this._next_env_map_id += 1)\n\t// \tthis._env_maps[texture._polygon_id] = texture\n\t// \treturn texture\n\t// }\n\t// deregister_env_map(env_map: Texture){\n\t// \tconsole.log(\"deregister_env_map\", env_map)\n\t// \tdelete this._env_maps[env_map._polygon_id]\n\t// \tenv_map.dispose()\n\t// }\n\n\t// private async prepare_env_map(texture: Texture): Texture{\n\t// \ttexture.minFilter = NearestFilter;\n\t// \ttexture.magFilter = NearestFilter;\n\t// \ttexture.encoding = LinearEncoding;\n\n\t// \tawait CoreScriptLoader.load_three('loaders/EXRLoader')\n\t// \tawait CoreScriptLoader.load_three('loaders/EquirectangularToCubeGenerator')\n\t// \tconst EquirectangularToCubeGenerator_name = 'EquirectangularToCubeGenerator'\n\t// \tconst PMREMGenerator_name = 'PMREMGenerator'\n\t// \tconst PMREMCubeUVPacker_name = 'PMREMCubeUVPacker'\n\n\t// \tconst cubemapGenerator = new THREE[EquirectangularToCubeGenerator_name]( texture, { resolution: 512, type: HalfFloatType } );\n\n\t// \tconst renderer = this.first_renderer()\n\t// \tif(renderer){\n\t// \t\tconst cubeMapTexture = cubemapGenerator.update( renderer );\n\n\t// \t\tconst pmremGenerator = new THREE[PMREMGenerator_name]( cubeMapTexture );\n\t// \t\tpmremGenerator.update( renderer );\n\n\t// \t\tconst pmremCubeUVPacker = new THREE[PMREMCubeUVPacker_name]( pmremGenerator.cubeLods );\n\t// \t\tpmremCubeUVPacker.update( renderer );\n\n\t// \t\trenderer.gammaInput = false;\n\t// \t\trenderer.gammaOutput = true;\n\n\t// \t\tconst exrCubeRenderTarget = pmremCubeUVPacker.CubeUVRenderTarget;\n\n\t// \t\ttexture.dispose();\n\t// \t\tcubemapGenerator.dispose();\n\t// \t\tpmremGenerator.dispose();\n\t// \t\tpmremCubeUVPacker.dispose();\n\n\t// \t\treturn exrCubeRenderTarget.texture;\n\t// \t}\n\t// }\n}\n","import {BaseNodeClass} from '../nodes/_Base';\nimport {NodeContext} from './NodeContext';\n\nexport interface RegisterOptions {\n\tonly?: string[];\n\texcept?: string[];\n}\n\n// export interface BaseNodeConstructor {\n// \tnew (): BaseNode;\n// }\n\nexport type BaseNodeConstructor = typeof BaseNodeClass;\ntype NodeConstructorByType = Dictionary<BaseNodeConstructor>;\ntype NodeConstructorByTypeByContext = Dictionary<NodeConstructorByType>;\ntype TabMenuByTypeByContext = Dictionary<Dictionary<string>>;\ntype RegisterOptionsByTypeByContext = Dictionary<Dictionary<RegisterOptions>>;\n\nexport class NodesRegister {\n\tprivate _node_register: NodeConstructorByTypeByContext = {};\n\tprivate _node_register_categories: TabMenuByTypeByContext = {};\n\tprivate _node_register_options: RegisterOptionsByTypeByContext = {};\n\n\tregister_node(node: BaseNodeConstructor, tab_menu_category?: string, options?: RegisterOptions) {\n\t\tconst context = node.node_context();\n\t\tconst node_type = node.type();\n\t\tthis._node_register[context] = this._node_register[context] || {};\n\n\t\tconst already_registered_node = this._node_register[context][node_type];\n\t\tif (already_registered_node) {\n\t\t\tthrow new Error(`node ${context}/${node_type} already registered`);\n\t\t}\n\t\tthis._node_register[context][node_type] = node;\n\n\t\tif (tab_menu_category) {\n\t\t\tthis._node_register_categories[context] = this._node_register_categories[context] || {};\n\t\t\tthis._node_register_categories[context][node_type] = tab_menu_category;\n\t\t}\n\t\tthis._node_register_options[context] = this._node_register_options[context] || {};\n\t\tif (options) {\n\t\t\tthis._node_register_options[context][node_type] = options;\n\t\t}\n\t}\n\tderegister_node(context: string, node_type: string) {\n\t\tdelete this._node_register[context][node_type];\n\t\tdelete this._node_register_categories[context][node_type];\n\t\tdelete this._node_register_options[context][node_type];\n\t}\n\tregistered_nodes_for_context_and_parent_type(context: NodeContext, parent_node_type: string) {\n\t\tconst map = this._node_register[context];\n\t\tif (map) {\n\t\t\tconst nodes_for_context = Object.values(this._node_register[context]);\n\t\t\treturn nodes_for_context.filter((node) => {\n\t\t\t\tconst options = this._node_register_options[context][node.type()];\n\t\t\t\tif (!options) {\n\t\t\t\t\treturn true;\n\t\t\t\t} else {\n\t\t\t\t\tconst option_only = options['only'];\n\t\t\t\t\tconst option_except = options['except'];\n\t\t\t\t\tconst context_and_type = `${context}/${parent_node_type}`;\n\t\t\t\t\tif (option_only) {\n\t\t\t\t\t\treturn option_only.includes(context_and_type);\n\t\t\t\t\t}\n\t\t\t\t\tif (option_except) {\n\t\t\t\t\t\treturn !option_except.includes(context_and_type);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn !options || options['only']?.includes(parent_node_type);\n\t\t\t});\n\t\t} else {\n\t\t\treturn [];\n\t\t}\n\t}\n\tregistered_nodes(context: NodeContext, parent_node_type: string): Dictionary<BaseNodeConstructor> {\n\t\tconst nodes_by_type: Dictionary<BaseNodeConstructor> = {};\n\t\tconst nodes = this.registered_nodes_for_context_and_parent_type(context, parent_node_type);\n\t\tfor (let node of nodes) {\n\t\t\tconst type = node.type();\n\t\t\tnodes_by_type[type] = node;\n\t\t}\n\t\treturn nodes_by_type;\n\t}\n\tregistered_category(context: NodeContext, type: string) {\n\t\treturn this._node_register_categories[context][type];\n\t}\n}\n","import {BaseNodeClass} from './nodes/_Base';\nimport {PolyScene} from './scene/PolyScene';\nimport {RenderersController} from './poly/RenderersController';\nimport {NodesRegister, RegisterOptions, BaseNodeConstructor} from './poly/NodesRegister';\nimport {NodeContext} from './poly/NodeContext';\n// import {ViewerLoadersManager} from '/viewers/LoadersManager';\n\nexport class Poly {\n\tstatic _instance: Poly | undefined;\n\trenderers_controller: RenderersController = new RenderersController();\n\tnodes_register: NodesRegister = new NodesRegister();\n\n\tscenes_by_uuid: Dictionary<PolyScene> = {};\n\t_env: string | undefined;\n\t// public viewer_loaders_manager: ViewerLoadersManager = new ViewerLoadersManager();\n\n\tstatic instance() {\n\t\treturn (this._instance = this._instance || new Poly());\n\t}\n\tprivate constructor() {}\n\n\tregister_node(node: BaseNodeConstructor, tab_menu_category?: string, options?: RegisterOptions) {\n\t\tthis.nodes_register.register_node(node, tab_menu_category, options);\n\t}\n\tregistered_nodes(parent_context: NodeContext, type: string): Dictionary<typeof BaseNodeClass> {\n\t\treturn this.nodes_register.registered_nodes(parent_context, type);\n\t}\n\tin_worker_thread() {\n\t\treturn false;\n\t}\n\tdesktop_controller(): any {}\n\t// notify_scene_loaded(scene: PolyScene) {}\n\n\tplayer_mode(): boolean {\n\t\treturn false;\n\t}\n\n\tlog(...args: any[]) {\n\t\tconsole.log(...args);\n\t}\n\tset_env(env: string) {\n\t\tthis._env = env;\n\t}\n\tget env() {\n\t\treturn this._env;\n\t}\n}\n\n// declare global {\n// \tconst POLY: Poly;\n// }\n\n// declare global {\n// \tinterface Window {\n// \t\tPOLY: Poly;\n// \t}\n// }\n// make sure not to have library: 'POLY' in webpack for this to work\n// export const POLY = Poly.instance();\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author philogb / http://blog.thejit.org/\n * @author egraether / http://egraether.com/\n * @author zz85 / http://www.lab4games.net/zz85/blog\n */\n\nfunction Vector2( x, y ) {\n\n\tthis.x = x || 0;\n\tthis.y = y || 0;\n\n}\n\nObject.defineProperties( Vector2.prototype, {\n\n\t\"width\": {\n\n\t\tget: function () {\n\n\t\t\treturn this.x;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis.x = value;\n\n\t\t}\n\n\t},\n\n\t\"height\": {\n\n\t\tget: function () {\n\n\t\t\treturn this.y;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis.y = value;\n\n\t\t}\n\n\t}\n\n} );\n\nObject.assign( Vector2.prototype, {\n\n\tisVector2: true,\n\n\tset: function ( x, y ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponent: function ( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetComponent: function ( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.x, this.y );\n\n\t},\n\n\tcopy: function ( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\n\t\treturn this;\n\n\t},\n\n\taddVectors: function ( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\n\t\treturn this;\n\n\t},\n\n\taddScaledVector: function ( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\n\t\treturn this;\n\n\t},\n\n\tsubScalar: function ( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\n\t\treturn this;\n\n\t},\n\n\tsubVectors: function ( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( v ) {\n\n\t\tthis.x *= v.x;\n\t\tthis.y *= v.y;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\n\t\treturn this;\n\n\t},\n\n\tdivide: function ( v ) {\n\n\t\tthis.x /= v.x;\n\t\tthis.y /= v.y;\n\n\t\treturn this;\n\n\t},\n\n\tdivideScalar: function ( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t},\n\n\tapplyMatrix3: function ( m ) {\n\n\t\tvar x = this.x, y = this.y;\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 3 ] * y + e[ 6 ];\n\t\tthis.y = e[ 1 ] * x + e[ 4 ] * y + e[ 7 ];\n\n\t\treturn this;\n\n\t},\n\n\tmin: function ( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\n\t\treturn this;\n\n\t},\n\n\tmax: function ( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\n\t\treturn this;\n\n\t},\n\n\tclamp: function ( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampScalar: function ( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampLength: function ( min, max ) {\n\n\t\tvar length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t},\n\n\tfloor: function () {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\n\t\treturn this;\n\n\t},\n\n\tceil: function () {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\n\t\treturn this;\n\n\t},\n\n\tround: function () {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\n\t\treturn this;\n\n\t},\n\n\troundToZero: function () {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y;\n\n\t},\n\n\tcross: function ( v ) {\n\n\t\treturn this.x * v.y - this.y * v.x;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this.x * this.x + this.y * this.y;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y );\n\n\t},\n\n\tmanhattanLength: function () {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y );\n\n\t},\n\n\tnormalize: function () {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t},\n\n\tangle: function () {\n\n\t\t// computes the angle in radians with respect to the positive x-axis\n\n\t\tvar angle = Math.atan2( - this.y, - this.x ) + Math.PI;\n\n\t\treturn angle;\n\n\t},\n\n\tdistanceTo: function ( v ) {\n\n\t\treturn Math.sqrt( this.distanceToSquared( v ) );\n\n\t},\n\n\tdistanceToSquared: function ( v ) {\n\n\t\tvar dx = this.x - v.x, dy = this.y - v.y;\n\t\treturn dx * dx + dy * dy;\n\n\t},\n\n\tmanhattanDistanceTo: function ( v ) {\n\n\t\treturn Math.abs( this.x - v.x ) + Math.abs( this.y - v.y );\n\n\t},\n\n\tsetLength: function ( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t},\n\n\tlerp: function ( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tlerpVectors: function ( v1, v2, alpha ) {\n\n\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\n\n\t},\n\n\tequals: function ( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\n\t\treturn array;\n\n\t},\n\n\tfromBufferAttribute: function ( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector2: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\n\t\treturn this;\n\n\t},\n\n\trotateAround: function ( center, angle ) {\n\n\t\tvar c = Math.cos( angle ), s = Math.sin( angle );\n\n\t\tvar x = this.x - center.x;\n\t\tvar y = this.y - center.y;\n\n\t\tthis.x = x * c - y * s + center.x;\n\t\tthis.y = x * s + y * c + center.y;\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Vector2 };\n","// import lodash_filter from 'lodash/filter';\n// import lodash_uniq from 'lodash/uniq';\n// import lodash_flatten from 'lodash/flatten';\n// import {Cooker} from './Cooker';\nimport {CoreGraphNode} from './CoreGraphNode';\n\n// not sure how I can have caller: DirtyableMixin if DirtyableMixin is not yet defined\nexport type PostDirtyHook = (caller?: CoreGraphNode) => void;\n\n// type Constructor<T = {}> = new (...args: any[]) => T;\nexport class DirtyController {\n\t_dirty_count: number = 0;\n\t_dirty: boolean = true;\n\t_dirty_timestamp: number | undefined;\n\t_cached_successors: CoreGraphNode[] | undefined;\n\t_forbidden_trigger_nodes: string[] | undefined;\n\n\t// hooks\n\t_post_dirty_hooks: PostDirtyHook[] | undefined;\n\t_post_dirty_hook_names: string[] | undefined;\n\n\tconstructor(private node: CoreGraphNode) {}\n\n\t// _init_dirtyable(): void {\n\t// \tthis._dirty_count = 0;\n\t// \tthis._dirty = true;\n\t// }\n\tget is_dirty(): boolean {\n\t\treturn this._dirty === true;\n\t}\n\tget dirty_timestamp() {\n\t\treturn this._dirty_timestamp;\n\t}\n\tget dirty_count(): number {\n\t\treturn this._dirty_count;\n\t}\n\tadd_post_dirty_hook(name: string, method: PostDirtyHook) {\n\t\tthis._post_dirty_hook_names = this._post_dirty_hook_names || [];\n\t\tthis._post_dirty_hooks = this._post_dirty_hooks || [];\n\n\t\tif (!this._post_dirty_hook_names.includes(name)) {\n\t\t\tthis._post_dirty_hook_names.push(name);\n\t\t\tthis._post_dirty_hooks.push(method);\n\t\t} else {\n\t\t\tconsole.warn(`hook with name ${name} already exists`, this.node);\n\t\t}\n\t}\n\tremove_post_dirty_hook(name: string) {\n\t\tif (this._post_dirty_hook_names && this._post_dirty_hooks) {\n\t\t\tconst index = this._post_dirty_hook_names.indexOf(name);\n\t\t\tif (index >= 0) {\n\t\t\t\tthis._post_dirty_hook_names.splice(index, 1);\n\t\t\t\tthis._post_dirty_hooks.splice(index, 1);\n\t\t\t}\n\t\t}\n\t}\n\thas_hook(name: string): boolean {\n\t\tif (this._post_dirty_hook_names) {\n\t\t\treturn this._post_dirty_hook_names.includes(name);\n\t\t}\n\t\treturn false;\n\t}\n\t// using a dirty block doesn't quite work, as I would need to be able\n\t// to fetch the graph for all successors that haven't been blocked\n\t// block_dirty_propagation: ->\n\t// \t@_dirty_propagation_allowed = false\n\t// unblock_dirty_propagation: ->\n\t// \t@_dirty_propagation_allowed = true\n\tremove_dirty_state(): void {\n\t\tthis._dirty = false;\n\t}\n\tset_forbidden_trigger_nodes(nodes: CoreGraphNode[]) {\n\t\tthis._forbidden_trigger_nodes = nodes.map((n) => n.graph_node_id);\n\t}\n\t//@_clean_for_frame = this.context().frame()\n\t//this.post_remove_dirty_state(message)\n\n\tset_dirty(original_trigger_graph_node?: CoreGraphNode | null, propagate?: boolean): void {\n\t\tif (propagate == null) {\n\t\t\tpropagate = true;\n\t\t}\n\t\tif (\n\t\t\toriginal_trigger_graph_node &&\n\t\t\tthis._forbidden_trigger_nodes &&\n\t\t\tthis._forbidden_trigger_nodes.includes(original_trigger_graph_node.graph_node_id)\n\t\t) {\n\t\t\treturn;\n\t\t}\n\n\t\tif (original_trigger_graph_node == null) {\n\t\t\toriginal_trigger_graph_node = this.node;\n\t\t}\n\n\t\t//return if this.set_dirty_allowed? && !this.set_dirty_allowed(original_trigger_graph_node)\n\n\t\t// if (this.scene && this.scene() != null && this.scene().loaded()){\n\t\t// \tlet id = null\n\t\t// \tif (this.full_path){id = this.full_path()} else {id = this}\n\t\t// \tconsole.log(\"set dirty\", id)\n\t\t// }\n\n\t\t// TODO: why can't I not propagate if the node is already dirty?\n\t\t// one possible reason is that node might be cooking, and this would not update the dirty_timestamp correctly?\n\t\t//return if this.is_dirty()\n\t\t// if(!this.scene().is_loading()){\n\t\t// \tconsole.log(\"set dirty\", (this.full_path ? this.full_path() : this))\n\t\t// }\n\n\t\tthis._dirty = true;\n\t\tthis._dirty_timestamp = performance.now();\n\t\tthis._dirty_count += 1;\n\n\t\tthis.run_post_dirty_hooks(original_trigger_graph_node);\n\t\t// this.post_set_dirty(original_trigger_graph_node);\n\n\t\tif (propagate === true) {\n\t\t\t//&& @_dirty #&& window.scene.auto_updating()\n\t\t\tthis.set_successors_dirty(original_trigger_graph_node);\n\t\t}\n\t}\n\n\trun_post_dirty_hooks(original_trigger_graph_node?: CoreGraphNode) {\n\t\tif (this._post_dirty_hooks) {\n\t\t\tconst cooker = this.node.scene.cooker;\n\t\t\tif (cooker.blocked) {\n\t\t\t\tcooker.enqueue(this.node, original_trigger_graph_node);\n\t\t\t} else {\n\t\t\t\tfor (let hook of this._post_dirty_hooks) {\n\t\t\t\t\thook(original_trigger_graph_node);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\t// cooker(): Cooker {\n\t// \tthrow 'Dirtyable.cooker requires implementation';\n\t// }\n\tset_successors_dirty(original_trigger_graph_node?: CoreGraphNode): void {\n\t\t// const cooker = this.node.scene.cooker;\n\t\t// cooker.block();\n\n\t\tconst propagate = false;\n\t\tthis._cached_successors = this._cached_successors || this.node.graph_all_successors(); //this._dirtyable_all_successors(original_trigger_graph_node);\n\t\t// successors = successors.filter(n=>!n.is_dirty())\n\t\tfor (let successor of this._cached_successors) {\n\t\t\tsuccessor.dirty_controller.set_dirty(original_trigger_graph_node, propagate);\n\t\t\t// console.log(successor);\n\t\t}\n\n\t\t// cooker.unblock();\n\t}\n\n\t// _dirtyable_all_successors(original_trigger_graph_node: CoreGraphNode): CoreGraphNode[] {\n\t// \treturn this.graph_all_predecessors()\n\t// \t// const successors = [];\n\t// \t// let newly_added_successors = this._dirtyable_direct_successors(original_trigger_graph_node);\n\t// \t// successors.push(newly_added_successors);\n\n\t// \t// while (newly_added_successors.length > 0) {\n\t// \t// \tnewly_added_successors = lodash_flatten(\n\t// \t// \t\tnewly_added_successors.map((newly_added_successor) => {\n\t// \t// \t\t\treturn newly_added_successor._dirtyable_direct_successors(original_trigger_graph_node);\n\t// \t// \t\t})\n\t// \t// \t);\n\t// \t// \tsuccessors.push(newly_added_successors);\n\t// \t// }\n\n\t// \t// return lodash_uniq(lodash_flatten(successors));\n\t// }\n\n\tclear_successors_cache() {\n\t\tthis._cached_successors = undefined;\n\t}\n\tclear_successors_cache_with_predecessors() {\n\t\tthis.clear_successors_cache();\n\t\tfor (let predecessor of this.node.graph_all_predecessors()) {\n\t\t\tpredecessor.dirty_controller.clear_successors_cache();\n\t\t}\n\t}\n\t// graph_all_predecessors(): CoreGraphNode[] {\n\t// \treturn this.node.graph_all_predecessors()\n\t// \t// console.log('dirtyable graph_all_predecessors should be overwritten');\n\t// \t// return [];\n\t// }\n\n\t// dirty_successors(): Array<CoreGraphNode> {\n\t// \tthrow 'Dirtyable.dirty_successors requires implementation';\n\t// }\n\t// set_dirty_allowed(original_trigger_graph_node: CoreGraphNode): boolean {\n\t// \tthrow 'Dirtyable.set_dirty_allowed requires implementation';\n\t// }\n\t// _dirtyable_direct_successors(original_trigger_graph_node: CoreGraphNode): Array<CoreGraphNode> {\n\t// \treturn this.dirty_successors().filter((successor) => {\n\t// \t\treturn successor.set_dirty_allowed == null || successor.set_dirty_allowed(original_trigger_graph_node);\n\t// \t});\n\t// }\n\n\t// set_graph_successors_dirty_via_graph: (original_trigger_graph_node)->\n\t// \tcooker = this.scene().cooker()\n\t// \tcooker.block()\n\n\t// \tmake_successors_dirty = false\n\t// \tlodash_each lodash_flatten(this.graph_all_successors()), (successor)=>\n\t// \t\tsuccessor.set_dirty(original_trigger_graph_node, this, false)\n\n\t// \tcooker.unblock()\n\n\t// post_set_dirty(original_trigger_graph_node?: Dirtyable, direct_trigger_graph_node?: Dirtyable): void{}\n}\n","import {CoreGraph, CoreGraphNodeId} from './CoreGraph';\nimport {DirtyController, PostDirtyHook} from './DirtyController';\nimport {PolyScene} from '../../engine/scene/PolyScene';\n// import {SceneNodeDirtyable} from './SceneNodeDirtyable';\n\n// type Constructor<T = {}> = new (...args: any[]) => T;\nexport class CoreGraphNode {\n\t// protected _scene: PolyScene;\n\tprivate _graph: CoreGraph;\n\tprivate _graph_node_id: CoreGraphNodeId;\n\tprivate _dirty_controller: DirtyController = new DirtyController(this);\n\t// protected _name: string;\n\tconstructor(protected _scene: PolyScene, protected _name: string) {\n\t\t// super(...args);\n\t\tthis._graph_node_id = _scene.graph.next_id();\n\t\t_scene.graph.setNode(this);\n\t\tthis._graph = _scene.graph;\n\t}\n\tget name() {\n\t\treturn this._name;\n\t}\n\tset_name(name: string) {\n\t\tthis._name = name;\n\t}\n\t// set_scene(scene: PolyScene) {\n\t// \tthis._scene = scene;\n\t// \t// this._graph_node = new CoreGraphNode();\n\t// \t// this._graph_node.init(this._scene.graph);\n\t// \tthis._graph = scene.graph;\n\t// \tthis._graph_node_id = this.graph.next_id();\n\t// \tthis.graph.setNode(this);\n\t// }\n\t// init(graph: CoreGraph) {\n\t// \tthis._graph = graph;\n\t// \tthis._id = this.graph.next_id();\n\t// \tthis.graph.setNode(this);\n\t// }\n\t// full_path: ->\n\t// \t\"node with unknown path #{this.graph_node_id}\"\n\tget scene() {\n\t\treturn this._scene;\n\t}\n\tget graph() {\n\t\treturn this._graph;\n\t}\n\tget graph_node_id(): CoreGraphNodeId {\n\t\treturn this._graph_node_id;\n\t}\n\n\t//\n\t//\n\t// DIRTY CONTROLLER\n\t//\n\t//\n\tget dirty_controller() {\n\t\treturn this._dirty_controller;\n\t}\n\tset_dirty(trigger?: CoreGraphNode | null) {\n\t\ttrigger = trigger || this;\n\t\tthis._dirty_controller.set_dirty(trigger);\n\t}\n\tset_successors_dirty(trigger?: CoreGraphNode) {\n\t\tthis._dirty_controller.set_successors_dirty(trigger);\n\t}\n\tremove_dirty_state() {\n\t\tthis._dirty_controller.remove_dirty_state();\n\t}\n\tget is_dirty() {\n\t\treturn this._dirty_controller.is_dirty;\n\t}\n\tadd_post_dirty_hook(name: string, callback: PostDirtyHook) {\n\t\tthis._dirty_controller.add_post_dirty_hook(name, callback);\n\t}\n\n\t//\n\t//\n\t// GRAPH\n\t//\n\t//\n\n\t// private graph_add() {\n\t// }\n\tgraph_remove() {\n\t\tthis.graph.removeNode(this);\n\t}\n\n\t// _graph_connect: (src, dest)->\n\t// \tthis.graph().connect(src, dest)\n\tadd_graph_input(src: CoreGraphNode): boolean {\n\t\treturn this.graph.connect(src, this);\n\t}\n\tremove_graph_input(src: CoreGraphNode) {\n\t\tthis.graph.disconnect(src, this);\n\t}\n\n\t// graph_disconnect: (src, dest)->\n\t// \tthis.graph().disconnect(src, dest)\n\n\tgraph_disconnect_predecessors() {\n\t\tthis.graph.disconnect_predecessors(this);\n\t}\n\tgraph_disconnect_successors() {\n\t\tthis.graph.disconnect_successors(this);\n\t}\n\n\tgraph_predecessor_ids(): CoreGraphNodeId[] {\n\t\treturn this.graph.predecessor_ids(this._graph_node_id) || [];\n\t}\n\tgraph_predecessors(): CoreGraphNode[] {\n\t\treturn this.graph.predecessors(this);\n\t}\n\tgraph_successors(): CoreGraphNode[] {\n\t\treturn this.graph.successors(this);\n\t}\n\tgraph_all_predecessors(): CoreGraphNode[] {\n\t\treturn this.graph.all_predecessors(this);\n\t}\n\tgraph_all_successors(): CoreGraphNode[] {\n\t\treturn this.graph.all_successors(this);\n\t}\n}\n","import {BaseParamType} from '../_Base';\nimport {ParamEvent} from '../../poly/ParamEvent';\n\nexport class EmitController {\n\t_blocked_emit: boolean = false;\n\t_blocked_parent_emit: boolean = false;\n\t_count_by_event_name: Dictionary<number> = {};\n\tconstructor(protected param: BaseParamType) {}\n\n\tget emit_allowed(): boolean {\n\t\tif (this._blocked_emit === true) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (this.param.scene.loading_controller.is_loading) {\n\t\t\treturn false;\n\t\t}\n\t\t// TODO: should I also prevent nodes from updating\n\t\t// when they are being called in a loop such as from the Copy SOP?\n\t\t//node = this.node()\n\t\t//node? && !node.is_cooking() && this.scene().emit_allowed() # this prevents a camera from updating its param for instance\n\t\t// although maybe I should send a dirty to the store, and then that store queries the param?\n\t\treturn this.param.scene.dispatch_controller.emit_allowed;\n\t}\n\n\tblock_emit() {\n\t\tthis._blocked_emit = true;\n\t\tif (this.param.is_multiple && this.param.components) {\n\t\t\tthis.param.components.forEach((c) => c.emit_controller.block_emit());\n\t\t}\n\t\treturn true;\n\t}\n\tunblock_emit() {\n\t\tthis._blocked_emit = false;\n\t\tif (this.param.is_multiple && this.param.components) {\n\t\t\tthis.param.components.forEach((c) => c.emit_controller.unblock_emit());\n\t\t}\n\t\treturn true;\n\t}\n\tblock_parent_emit() {\n\t\tthis._blocked_parent_emit = true;\n\t\treturn true;\n\t}\n\tunblock_parent_emit() {\n\t\tthis._blocked_parent_emit = false;\n\t\treturn true;\n\t}\n\n\tincrement_count(event_name: ParamEvent) {\n\t\tthis._count_by_event_name[event_name] = this._count_by_event_name[event_name] || 0;\n\t\tthis._count_by_event_name[event_name] += 1;\n\t}\n\tevents_count(event_name: ParamEvent): number {\n\t\treturn this._count_by_event_name[event_name] || 0;\n\t}\n\n\temit(event: ParamEvent) {\n\t\tif (this.emit_allowed) {\n\t\t\tthis.param.emit(event);\n\n\t\t\tif (this.param.parent_param != null && this._blocked_parent_emit !== true) {\n\t\t\t\tthis.param.parent_param.emit(event);\n\t\t\t}\n\t\t}\n\t}\n\t// emit_param_updated() {\n\t// \tconsole.log('emit_param_updated', this.param.name, this.emit_allowed);\n\t// \tif (this.emit_allowed) {\n\t// \t\tthis.param.emit(ParamEvent.UPDATED);\n\n\t// \t\tif (this.param.parent_param != null && this._blocked_parent_emit !== true) {\n\t// \t\t\tthis.param.parent_param.emit(ParamEvent.UPDATED);\n\t// \t\t}\n\t// \t}\n\t// \t//else\n\t// \t//\tthis.emit('param_updated')\n\n\t// \t// return null\n\t// }\n}\n","import {BaseParamType} from '../_Base';\nimport {ParamValueSerializedTypeMap} from '../types/ParamValueSerializedTypeMap';\nimport {ParamType} from '../../poly/ParamType';\nimport {ParamInitValueSerializedTypeMap} from '../types/ParamInitValueSerializedTypeMap';\n\nexport interface ParamSerializerData {\n\tname: string;\n\ttype: string;\n\traw_input: ParamInitValueSerializedTypeMap[ParamType];\n\tvalue: ParamValueSerializedTypeMap[ParamType];\n\texpression?: string;\n\tgraph_node_id: string;\n\t// is_dirty: boolean;\n\terror_message?: string;\n\tis_visible: boolean;\n\tfolder_name?: string;\n\tcomponents?: string[];\n}\n\nexport class ParamSerializer {\n\tconstructor(protected param: BaseParamType) {}\n\n\tto_json(): ParamSerializerData {\n\t\tconst data: ParamSerializerData = {\n\t\t\tname: this.param.name,\n\t\t\ttype: this.param.type,\n\t\t\traw_input: this.raw_input(),\n\t\t\tvalue: this.value(),\n\t\t\texpression: this.expression(),\n\t\t\tgraph_node_id: this.param.graph_node_id,\n\t\t\t// is_dirty: this.param.is_dirty,\n\t\t\terror_message: this.error_message(),\n\t\t\tis_visible: this.is_visible(),\n\t\t\t// folder_name: this.param.ui_data.folder_name,\n\t\t\tcomponents: undefined,\n\t\t};\n\n\t\tif (this.param.is_multiple && this.param.components) {\n\t\t\tdata['components'] = this.param.components.map((component) => component.graph_node_id);\n\t\t}\n\n\t\treturn data;\n\t}\n\n\traw_input() {\n\t\treturn this.param.raw_input_serialized;\n\t}\n\tvalue() {\n\t\treturn this.param.value_serialized;\n\t}\n\texpression() {\n\t\treturn this.param.has_expression() ? this.param.expression_controller?.expression : undefined;\n\t}\n\terror_message() {\n\t\treturn this.param.states.error.message;\n\t}\n\tis_visible() {\n\t\treturn this.param.options.is_visible;\n\t}\n}\n","import {BaseParamType} from '../../_Base';\n\nexport class TimeDependentState {\n\tconstructor(protected param: BaseParamType) {}\n\n\tget active(): boolean {\n\t\tconst frame_graph_node_id = this.param.scene.time_controller.graph_node.graph_node_id;\n\n\t\treturn this.param.graph_predecessor_ids().includes(frame_graph_node_id);\n\t}\n}\n","import {BaseParamType} from '../../_Base';\nimport {ParamEvent} from '../../../poly/ParamEvent';\n// import lodash_includes from 'lodash/includes';\n// import lodash_values from 'lodash/values';\n\nexport class ErrorState {\n\tprivate _message: string | undefined;\n\tconstructor(private param: BaseParamType) {}\n\n\tset(message: string | undefined) {\n\t\tif (this._message != message) {\n\t\t\tthis._message = message;\n\t\t\tif (this._message) {\n\t\t\t\tconsole.log(this.param.full_path(), this._message);\n\t\t\t}\n\t\t\tthis.param.emit_controller.emit(ParamEvent.ERROR_UPDATED);\n\t\t}\n\t}\n\tget message() {\n\t\treturn this._message;\n\t}\n\tclear() {\n\t\tthis.set(undefined);\n\t}\n\tget active(): boolean {\n\t\treturn this._message != null;\n\t}\n}\n","import {BaseParamType} from '../_Base';\n\nimport {TimeDependentState} from './states/TimeDependent';\nimport {ErrorState} from './states/Error';\n\nexport class StatesController {\n\ttime_dependent = new TimeDependentState(this.param);\n\terror = new ErrorState(this.param);\n\tconstructor(protected param: BaseParamType) {}\n}\n","// import {Vector3} from 'three/src/math/Vector3'\n// import {Vector2} from 'three/src/math/Vector2'\n\nimport {CoreWalker} from '../../core/Walker';\nimport {CoreGraphNode} from '../../core/graph/CoreGraphNode';\n// import {NodeScene} from '../../core/graph/NodeScene';\n// import {NamedGraphNode} from '../../core/graph/NamedGraphNode';\nimport {BaseNodeType} from '../nodes/_Base';\n\n// import {CallbackOption} from './concerns/options/Callback'\n// import {ColorOption} from './concerns/options/Color'\n// import {CookOption} from './concerns/options/Cook'\n// import {DesktopOption} from './concerns/options/Desktop'\n// import {ExpressionOption} from './concerns/options/Expression'\n// import {MenuOption} from './concerns/options/Menu'\n// import {NodeSelectionOption} from './concerns/options/NodeSelection'\n// import {RangeOption} from './concerns/options/Range'\n// import {AssetReferenceOption} from './concerns/options/AssetReference'\n// import {SpareOption} from './concerns/options/Spare'\n// import {MultilineOption} from './concerns/options/Multiline'\n// import {TextureOption} from './concerns/options/Texture'\n// import {VisibleOption} from './concerns/options/Visible'\n\n// import {Emit} from './concerns/Emit';\n// import {Errored} from './concerns/Errored';\n// import {Eval} from './concerns/Eval';\n// import {Expression} from './concerns/Expression';\n// import {Hierarchy} from './concerns/Hierarchy';\n// import {Json} from './concerns/Json';\n// import {Named} from './concerns/Named';\n// import {Node} from './concerns/Node';\n// import {Options} from './concerns/Options';\n// import {TimeDependent} from './concerns/TimeDependent';\n// import {Type} from './concerns/Type';\n// import {UIDataOwner} from './concerns/UIDataOwner';\n// import {VisitorsBase} from './concerns/visitors/_Base';\n\nimport {OptionsController} from './utils/OptionsController';\nimport {ExpressionController} from './utils/ExpressionController';\nimport {EmitController} from './utils/EmitController';\nimport {ParamSerializer} from './utils/Serializer';\nimport {StatesController} from './utils/StatesController';\n// import {UIData} from './utils/UIData';\n\nimport {TypedMultipleParam} from './_Multiple';\nimport {FloatParam} from './Float';\nimport {ParamType} from '../poly/ParamType';\nimport {ParamEvent} from '../poly/ParamEvent';\nimport {PolyScene} from '../scene/PolyScene';\n\nimport {ParamInitValuesTypeMap} from '../params/types/ParamInitValuesTypeMap';\nimport {ParamValuesTypeMap} from '../params/types/ParamValuesTypeMap';\nimport {ParamValueSerializedTypeMap} from '../params/types/ParamValueSerializedTypeMap';\nimport {ParamInitValueSerializedTypeMap} from './types/ParamInitValueSerializedTypeMap';\n// import {TypedNumericParam} from './_Numeric';\n\n// export interface ParamVisitor {\n// \tvisit_param: (param: BaseParamType) => any;\n// \tvisit_multiple_param: (param: TypedMultipleParam<any>) => any;\n// \tvisit_numeric_param: (param: TypedNumericParam<any>) => any;\n// }\n\n// type ParamTypeElem = ParamType;\ntype ComputeCallback = (value: void) => void;\n\nexport abstract class TypedParam<T extends ParamType> extends CoreGraphNode {\n\t// protected _raw_input: ParamInitValuesTypeMap[T];\n\tprotected _default_value!: ParamInitValuesTypeMap[T];\n\tprotected _raw_input!: ParamInitValuesTypeMap[T];\n\tprotected _value!: ParamValuesTypeMap[T];\n\t// protected _expression: string;\n\tprotected _node!: BaseNodeType;\n\tprotected _parent_param: TypedMultipleParam<any> | undefined;\n\tprotected _components: FloatParam[] | undefined;\n\tprotected _compute_resolves: ComputeCallback[] | undefined;\n\n\tprivate _options: OptionsController = new OptionsController(this);\n\tget options(): OptionsController {\n\t\treturn (this._options = this._options || new OptionsController(this));\n\t}\n\tprivate _emit_controller: EmitController = new EmitController(this);\n\tget emit_controller(): EmitController {\n\t\treturn (this._emit_controller = this._emit_controller || new EmitController(this));\n\t}\n\tprotected _expression_controller: ExpressionController<T> | undefined;\n\tget expression_controller(): ExpressionController<T> | undefined {\n\t\treturn this._expression_controller; // =\n\t\t//this._expression_controller || new ExpressionController(this);\n\t}\n\tprivate _serializer: ParamSerializer | undefined;\n\tget serializer(): ParamSerializer {\n\t\treturn (this._serializer = this._serializer || new ParamSerializer(this));\n\t}\n\tprivate _states: StatesController | undefined;\n\tget states(): StatesController {\n\t\treturn (this._states = this._states || new StatesController(this));\n\t}\n\t// private _ui_data: UIData | undefined;\n\t// get ui_data(): UIData {\n\t// \treturn (this._ui_data = this._ui_data || new UIData(this.scene, this));\n\t// }\n\n\tconstructor(scene: PolyScene) {\n\t\tsuper(scene, 'BaseParam');\n\t\tthis.initialize_param();\n\t}\n\tinitialize_value() {}\n\tinitialize_param() {}\n\t// \t// this.add_post_dirty_hook(this._remove_node_param_cache.bind(this))\n\t// }\n\t// initialize() {\n\t// \tthis.init_components();\n\t// \t// this.init_expression()\n\t// \t// this._init_ui_data()\n\t// }\n\t// accepts_visitor<T extends ParamVisitor>(visitor: T): ReturnType<T['visit_param']> {\n\t// \treturn visitor.visit_param(this);\n\t// }\n\n\t//\n\t// init_expression() {}\n\n\t// type\n\tstatic type(): ParamType {\n\t\treturn ParamType.FLOAT; // adding a type here, but just to not have a compile error\n\t}\n\tget type(): T {\n\t\treturn (this.constructor as typeof BaseParamClass).type() as T;\n\t}\n\tget is_numeric(): boolean {\n\t\treturn false;\n\t}\n\n\t// name\n\tset_name(name: string) {\n\t\tsuper.set_name(name);\n\t}\n\n\tget value(): ParamValuesTypeMap[T] {\n\t\treturn this._value;\n\t}\n\tabstract get default_value_serialized(): ParamInitValueSerializedTypeMap[T];\n\tabstract get raw_input_serialized(): ParamInitValueSerializedTypeMap[T];\n\tabstract get value_serialized(): ParamValueSerializedTypeMap[T];\n\tconvert(raw_val: any): ParamValuesTypeMap[T] | null {\n\t\treturn null;\n\t}\n\tstatic are_raw_input_equal(val1: any, val2: any) {\n\t\treturn false;\n\t}\n\tis_raw_input_equal(other_raw_input: ParamInitValuesTypeMap[T]) {\n\t\treturn (this.constructor as any).are_raw_input_equal(this._raw_input, other_raw_input);\n\t}\n\tstatic are_values_equal(val1: any, val2: any) {\n\t\treturn false;\n\t}\n\tis_value_equal(other_val: ParamValuesTypeMap[T]) {\n\t\treturn (this.constructor as any).are_values_equal(this.value, other_val);\n\t}\n\tprotected _clone_raw_input(raw_input: ParamInitValuesTypeMap[T]): ParamInitValuesTypeMap[T] {\n\t\treturn raw_input;\n\t}\n\tset(raw_input: ParamInitValuesTypeMap[T]): void {\n\t\tthis._raw_input = this._clone_raw_input(this._prefilter_invalid_raw_input(raw_input));\n\t\tthis.emit_controller.emit(ParamEvent.RAW_INPUT_UPDATED);\n\t\tthis.process_raw_input();\n\t}\n\tprotected _prefilter_invalid_raw_input(raw_input: any): ParamInitValuesTypeMap[T] {\n\t\treturn raw_input as ParamInitValuesTypeMap[T];\n\t}\n\tget default_value() {\n\t\treturn this._default_value;\n\t}\n\tget is_default(): boolean {\n\t\treturn true;\n\t}\n\tget raw_input() {\n\t\treturn this._raw_input;\n\t}\n\n\tprotected process_raw_input() {}\n\tprivate _is_computing: boolean = false;\n\tasync compute(): Promise<void> {\n\t\tif (this.scene.loading_controller.is_loading) {\n\t\t\tconsole.warn(`param attempt to compute ${this.full_path()}`);\n\t\t}\n\n\t\tif (this.is_dirty) {\n\t\t\tif (!this._is_computing) {\n\t\t\t\tthis._is_computing = true;\n\t\t\t\tawait this.process_computation();\n\t\t\t\tthis._is_computing = false;\n\n\t\t\t\tif (this._compute_resolves) {\n\t\t\t\t\tlet callback: ComputeCallback | undefined;\n\t\t\t\t\twhile ((callback = this._compute_resolves.pop())) {\n\t\t\t\t\t\tcallback();\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\tthis._compute_resolves = this._compute_resolves || [];\n\t\t\t\t\tthis._compute_resolves.push(resolve);\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\tprotected async process_computation(): Promise<void> {}\n\t// set_default_value(default_value: ParamValuesTypeMap[T]) {\n\t// \tthis._default_value = default_value;\n\t// }\n\tset_init_value(init_value: ParamInitValuesTypeMap[T]) {\n\t\tthis._default_value = init_value; //this.convert(init_value);\n\t\t// this._raw_input = this._clone_raw_input(init_value);\n\n\t\t// if (this.is_multiple) {\n\t\t// \tthis.init_components();\n\t\t// }\n\n\t\t// this.set(init_value);\n\t}\n\t// eval_p(): Promise<ParamValuesTypeMap[T]> {\n\t// \treturn new Promise((resolve, reject) => {\n\t// \t\tresolve();\n\t// \t});\n\t// }\n\n\t// node\n\tset_node(node: BaseNodeType | null) {\n\t\tif (!node) {\n\t\t\tif (this._node) {\n\t\t\t\tthis._node.params.params_node?.remove_graph_input(this);\n\t\t\t}\n\t\t} else {\n\t\t\tthis._node = node;\n\t\t\tif (this.options.makes_node_dirty_when_dirty() && !this.parent_param) {\n\t\t\t\tnode.params.params_node?.add_graph_input(this);\n\t\t\t}\n\t\t}\n\n\t\tif (this.components) {\n\t\t\tfor (let c of this.components) {\n\t\t\t\tc.set_node(node);\n\t\t\t}\n\t\t}\n\t}\n\tget node() {\n\t\treturn this._node;\n\t}\n\tget parent() {\n\t\treturn this.node;\n\t}\n\n\t// hierarchy\n\tset_parent_param(param: TypedMultipleParam<any>) {\n\t\tparam.add_graph_input(this);\n\t\tthis._parent_param = param;\n\t}\n\tget parent_param(): TypedMultipleParam<any> | undefined {\n\t\treturn this._parent_param;\n\t}\n\thas_parent_param(): boolean {\n\t\treturn this._parent_param != null;\n\t}\n\tfull_path(): string {\n\t\treturn this.node?.full_path() + '/' + this.name;\n\t}\n\tpath_relative_to(node: BaseNodeType | BaseParamType): string {\n\t\treturn CoreWalker.relative_path(node, this);\n\t}\n\n\t// emit\n\temit(event_name: ParamEvent): void {\n\t\tif (this.emit_controller.emit_allowed) {\n\t\t\tthis.emit_controller.increment_count(event_name);\n\t\t\tthis.scene.dispatch_controller.dispatch(this, event_name);\n\t\t}\n\t}\n\n\t// multiple\n\tget components() {\n\t\treturn this._components;\n\t}\n\tstatic get component_names(): string[] {\n\t\treturn [];\n\t}\n\tget component_names(): string[] {\n\t\tconst c = (<unknown>this.constructor) as TypedParam<T>;\n\t\treturn c.component_names;\n\t}\n\tget is_multiple(): boolean {\n\t\treturn this.component_names.length > 0;\n\t}\n\t// create_components() {}\n\tinit_components() {}\n\n\t// expression\n\t// set_expression(expression: string | null) {\n\t// \tthis.expression_controller.set_expression(expression);\n\t// }\n\thas_expression(): boolean {\n\t\treturn this.expression_controller != null && this.expression_controller.active; // use this._expression_controller to avoid creating it\n\t}\n\n\t// serialize\n\tto_json() {\n\t\treturn this.serializer.to_json();\n\t}\n}\nexport type BaseParamType = TypedParam<ParamType>;\nexport class BaseParamClass extends TypedParam<ParamType> {\n\tget default_value_serialized() {\n\t\treturn 'BaseParamClass.default_value_serialized overriden';\n\t}\n\tget raw_input_serialized() {\n\t\treturn 'BaseParamClass.raw_input_serialized overriden';\n\t}\n\tget value_serialized() {\n\t\treturn 'BaseParamClass.value_serialized overriden';\n\t}\n}\n","import lodash_range from 'lodash/range';\nimport lodash_uniq from 'lodash/uniq';\nimport lodash_trim from 'lodash/trim';\nimport lodash_compact from 'lodash/compact';\nimport lodash_flatten from 'lodash/flatten';\nimport lodash_padEnd from 'lodash/padEnd';\nimport lodash_capitalize from 'lodash/capitalize';\nimport lodash_snakeCase from 'lodash/snakeCase';\nimport lodash_upperFirst from 'lodash/upperFirst';\nimport lodash_camelCase from 'lodash/camelCase';\nimport lodash_isNumber from 'lodash/isNumber';\n\nconst ATTRIB_NAMES_SEPARATOR = /[, ]/; //[',', ' ']\n\n// const LETTERS = 'abcdefghijklmnopqrstuvwxyz'\n// const LETTERS_UPPERCASE = LETTERS.toUpperCase()\n// const NUMBERS = '0123645789'\n// const ALL = LETTERS + LETTERS_UPPERCASE + NUMBERS\n\nconst TAIL_DIGIT_MATCH_REGEXP = /\\d+$/;\n// const DIGIT_PREDEDED_BY_UNDERSCOPE = /_\\d$/\nconst INDICES_LIST_SEPARATOR = /,| /;\n\n// https://stackoverflow.com/questions/41856126/regexp-optional-dot-in-a-decimal-number\nconst NUM_REGEXP = /^-?\\d+\\.?\\d*$/;\nenum BooleanString {\n\tTRUE = 'true',\n\tFALSE = 'false',\n}\n\nexport class CoreString {\n\t// static has_tail_digits(word: string): boolean {\n\t// \tconst match = word.match(TAIL_DIGIT_MATCH_REGEXP)\n\t// \treturn (match != null)\n\t// }\n\tstatic is_boolean(word: string): boolean {\n\t\treturn word == BooleanString.TRUE || word == BooleanString.FALSE;\n\t}\n\tstatic to_boolean(word: string): boolean {\n\t\treturn word == BooleanString.TRUE;\n\t}\n\tstatic is_number(word: string): boolean {\n\t\treturn NUM_REGEXP.test(word);\n\t}\n\n\tstatic tail_digits(word: string): number {\n\t\tconst match = word.match(TAIL_DIGIT_MATCH_REGEXP);\n\t\tif (match) {\n\t\t\treturn parseInt(match[0]);\n\t\t} else {\n\t\t\treturn 0;\n\t\t}\n\t}\n\n\tstatic increment(word: string): string {\n\t\tlet match;\n\t\tif ((match = word.match(TAIL_DIGIT_MATCH_REGEXP))) {\n\t\t\tconst digits = parseInt(match[0]);\n\t\t\tconst prefix = word.substring(0, word.length - match[0].length);\n\t\t\treturn `${prefix}${digits + 1}`;\n\t\t} else {\n\t\t\treturn `${word}1`;\n\t\t}\n\t}\n\n\tstatic pluralize(word: string): string {\n\t\tconst last_char = word[word.length - 1];\n\t\tif (last_char !== 's') {\n\t\t\treturn `${word}s`;\n\t\t} else {\n\t\t\treturn word;\n\t\t}\n\t}\n\n\tstatic camel_case(word: string): string {\n\t\treturn lodash_camelCase(word);\n\t}\n\tstatic upper_first(word: string): string {\n\t\treturn lodash_upperFirst(word);\n\t}\n\tstatic snake_case(word: string): string {\n\t\treturn lodash_snakeCase(word);\n\t}\n\tstatic titleize(word: string): string {\n\t\treturn lodash_capitalize(word.replace(/_/g, ' '));\n\t}\n\n\tstatic type_to_class_name(word: string): string {\n\t\treturn this.upper_first(lodash_camelCase(word));\n\t}\n\t// static class_name_to_type(word): string {\n\t// \t// if(this.has_tail_digits(word)){\n\t// \t// \tconst tail_digits = `${this.tail_digits(word)}`\n\t// \t// \tconst head = word.substr(0, word.length-tail_digits.length)\n\t// \t// \tconst head_snake_case = this.snake_case(head)\n\t// \t// \tconsole.log(word, tail_digits, head, head_snake_case)\n\t// \t// \treturn `${head_snake_case}${tail_digits}`;\n\t// \t// } else {\n\t// \t// \treturn this.snake_case(word)\n\t// \t// }\n\t// \tconst snake_case = this.snake_case(word)\n\t// \tconst match = snake_case.match(DIGIT_PREDEDED_BY_UNDERSCOPE)\n\t// \tconsole.log(\"-----\", snake_case, match)\n\t// \treturn snake_case\n\t// }\n\t// static class_name_to_human(word): string {\n\t// \tconst human_name = this.class_name_to_type(word).replace(/\\s/, ' ');\n\t// \treturn human_name.replace(/_/g, \" \");\n\t// }\n\n\tstatic timestamp_to_seconds(word: string): number {\n\t\treturn Date.parse(word) / 1000;\n\t}\n\tstatic seconds_to_timestamp(seconds: number): string {\n\t\tconst d = new Date();\n\t\td.setTime(seconds * 1000);\n\t\treturn d.toISOString().substr(11, 8);\n\t}\n\n\tstatic precision(val: number, decimals: number = 2): string {\n\t\t// if (decimals == null) { decimals = 2; }\n\t\t// const factor = Math.pow(10, decimals);\n\t\t// const num = Math.floor(factor * val) / factor;\n\t\t// let number_s = `${num}`;\n\n\t\t// let elements = number_s.split('.');\n\t\t// if (decimals <= 0){\n\t\t// \treturn elements[0];\n\t\t// }\n\n\t\t// if (elements.length === 1) {\n\t\t// \t// number_s = `${number_s}.00`;\n\t\t// \tconst string_to_pad = `${number_s}.`\n\t\t// \tconst pad = string_to_pad.length + decimals\n\t\t// \treturn lodash_padEnd(string_to_pad, pad, '0');\n\t\t// } else {\n\t\t// \tconst integer_element = elements[0];\n\t\t// \tlet fraction_element = elements[1];\n\t\t// \tif (fraction_element.length === 1) {\n\t\t// \t\tnumber_s = `${integer_element}.${fraction_element}0`;\n\t\t// \t} else if (fraction_element.length > 2) {\n\t\t// \t\tfraction_element = fraction_element.slice(0, 2);\n\t\t// \t\tnumber_s = `${integer_element}.${fraction_element}`;\n\t\t// \t}\n\t\t// }\n\n\t\t// elements = number_s.split('.');\n\t\t// console.log(\"decimals:\", decimals, elements[1].length, number_s)\n\t\t// if (elements[1].length < decimals){\n\t\t// \tconst string_to_pad = number_s\n\t\t// \tconst pad = string_to_pad.length + (decimals - elements[1].length)\n\t\t// \tnumber_s = lodash_padEnd(string_to_pad, pad, '0');\n\t\t// }\n\n\t\t// return number_s;\n\t\tdecimals = Math.max(decimals, 0);\n\t\tconst elements = `${val}`.split('.');\n\n\t\tif (decimals <= 0) {\n\t\t\treturn elements[0];\n\t\t}\n\n\t\tlet frac = elements[1];\n\t\tif (frac !== undefined) {\n\t\t\tif (frac.length > decimals) {\n\t\t\t\tfrac = frac.substring(0, decimals);\n\t\t\t}\n\n\t\t\tfrac = lodash_padEnd(frac, decimals, '0');\n\t\t\treturn `${elements[0]}.${frac}`;\n\t\t} else {\n\t\t\tconst string_to_pad = `${val}.`;\n\t\t\tconst pad = string_to_pad.length + decimals;\n\t\t\treturn lodash_padEnd(string_to_pad, pad, '0');\n\t\t}\n\t}\n\n\tstatic ensure_float(num: number): string {\n\t\t// const integer = Math.floor(num)\n\t\t// const delta = num - integer\n\t\t// if(delta)\n\t\tconst num_as_string = `${num}`;\n\t\tconst dot_pos = num_as_string.indexOf('.');\n\t\tif (dot_pos >= 0) {\n\t\t\treturn num_as_string;\n\t\t} else {\n\t\t\treturn `${num_as_string}.0`;\n\t\t}\n\t}\n\n\t// https://stackoverflow.com/questions/26246601/wildcard-string-comparison-in-javascript#32402438\n\tstatic match_mask(word: string, rule: string) {\n\t\tif (rule === '*') {\n\t\t\treturn true;\n\t\t}\n\t\t// \".\"  => Find a single character, except newline or line terminator\n\t\t// \".*\" => Matches any string that contains zero or more characters\n\t\trule = rule.split('*').join('.*');\n\n\t\t// \"^\"  => Matches any string with the following at the beginning of it\n\t\t// \"$\"  => Matches any string with that in front at the end of it\n\t\trule = `^${rule}$`;\n\n\t\t// Create a regular expression object for matching string\n\t\tconst regex = new RegExp(rule);\n\n\t\t// Returns true if it finds a match, otherwise it returns false\n\t\treturn regex.test(word);\n\t}\n\tstatic matches_one_mask(word: string, masks: string[]): boolean {\n\t\tlet matches_one_mask = false;\n\t\tfor (let mask of masks) {\n\t\t\tif (CoreString.match_mask(word, mask)) {\n\t\t\t\tmatches_one_mask = true;\n\t\t\t}\n\t\t}\n\t\treturn matches_one_mask;\n\t}\n\n\tstatic attrib_names(word: string): string[] {\n\t\t// let elements = [word];\n\t\t// lodash_each(ATTRIB_NAMES_SEPARATORS, separator => elements = lodash_flatten(lodash_map(elements, element => element.split(separator))));\n\t\tconst elements = word.split(ATTRIB_NAMES_SEPARATOR);\n\t\tconst trimed_elements = lodash_compact(\n\t\t\telements.map((e) => {\n\t\t\t\treturn lodash_trim(e);\n\t\t\t})\n\t\t);\n\t\tconst uniq = lodash_uniq(trimed_elements);\n\n\t\t// const names: string[] = []\n\t\t// ATTRIB_NAMES_SEPARATORS.forEach(separator=>{\n\t\t// \tword.split(separator).forEach( element=>{\n\t\t// \t\tnames.push(element.trim())\n\t\t// \t} )\n\t\t// })\n\n\t\t// // elements = lodash_filter(elements, element => (element != null) && (element.length > 0));\n\t\t// return lodash_uniq(names)\n\n\t\t// return lodash_map(elements, attr_name => lodash_trim(attr_name));\n\t\treturn uniq;\n\t}\n\tstatic to_id(val: string): number {\n\t\tif (val == null) {\n\t\t\treturn 0;\n\t\t}\n\n\t\tconst elements = val.split('').reverse();\n\t\tlet id = 0;\n\t\tlet exp = 0;\n\t\telements.forEach((element, i) => {\n\t\t\tlet index = element.charCodeAt(0);\n\n\t\t\tif (index >= 0) {\n\t\t\t\texp = i % 10;\n\t\t\t\tid += index * 10 ** exp;\n\t\t\t\tid = id % Number.MAX_SAFE_INTEGER;\n\t\t\t}\n\t\t});\n\t\treturn id;\n\t}\n\n\tstatic indices(indices_string: string): number[] {\n\t\tconst elements = indices_string.split(INDICES_LIST_SEPARATOR);\n\t\tif (elements.length > 1) {\n\t\t\treturn lodash_uniq(lodash_flatten(elements.map((element) => this.indices(element)))).sort((a, b) => a - b);\n\t\t} else {\n\t\t\tconst element = elements[0];\n\t\t\tif (element) {\n\t\t\t\tconst range_separator = '-';\n\t\t\t\tif (element.indexOf(range_separator) > 0) {\n\t\t\t\t\tconst range_elements = element.split(range_separator);\n\t\t\t\t\treturn lodash_range(parseInt(range_elements[0]), parseInt(range_elements[1]) + 1);\n\t\t\t\t} else {\n\t\t\t\t\tconst parsed = parseInt(element);\n\t\t\t\t\tif (lodash_isNumber(parsed)) {\n\t\t\t\t\t\treturn [parsed];\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn [];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t}\n\t}\n\n\tstatic escape_line_breaks(word: string): string {\n\t\treturn word.replace(/(\\r\\n|\\n|\\r)/gm, '\\\\n');\n\t}\n}\n","/* global window */\n\nvar lodash;\n\nif (typeof require === \"function\") {\n  try {\n    lodash = {\n      clone: require(\"lodash/clone\"),\n      constant: require(\"lodash/constant\"),\n      each: require(\"lodash/each\"),\n      filter: require(\"lodash/filter\"),\n      has:  require(\"lodash/has\"),\n      isArray: require(\"lodash/isArray\"),\n      isEmpty: require(\"lodash/isEmpty\"),\n      isFunction: require(\"lodash/isFunction\"),\n      isUndefined: require(\"lodash/isUndefined\"),\n      keys: require(\"lodash/keys\"),\n      map: require(\"lodash/map\"),\n      reduce: require(\"lodash/reduce\"),\n      size: require(\"lodash/size\"),\n      transform: require(\"lodash/transform\"),\n      union: require(\"lodash/union\"),\n      values: require(\"lodash/values\")\n    };\n  } catch (e) {\n    // continue regardless of error\n  }\n}\n\nif (!lodash) {\n  lodash = window._;\n}\n\nmodule.exports = lodash;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nmodule.exports = isObject;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nmodule.exports = isObjectLike;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nmodule.exports = root;\n","import lodash_isArray from 'lodash/isArray';\nimport {TypedParam} from './_Base';\nimport {FloatParam} from './Float';\nimport {ParamType} from '../poly/ParamType';\nimport {ParamEvent} from '../poly/ParamEvent';\nimport {ParamInitValueSerializedTypeMap} from './types/ParamInitValueSerializedTypeMap';\nimport {ParamInitValuesTypeMap} from './types/ParamInitValuesTypeMap';\n\nexport abstract class TypedMultipleParam<T extends ParamType> extends TypedParam<T> {\n\tprivate _components_contructor = FloatParam;\n\tprotected _components!: FloatParam[];\n\tget components() {\n\t\treturn this._components;\n\t}\n\tget is_numeric() {\n\t\treturn true;\n\t}\n\tget is_default() {\n\t\tfor (let c of this.components) {\n\t\t\tif (!c.is_default) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t}\n\t\treturn true;\n\t}\n\tget raw_input() {\n\t\treturn this._components.map((c) => c.raw_input) as ParamInitValueSerializedTypeMap[T];\n\t}\n\tget raw_input_serialized() {\n\t\treturn this.raw_input;\n\t}\n\n\tinit_components() {\n\t\tif (this._components != null) {\n\t\t\treturn;\n\t\t}\n\t\tlet index = 0;\n\t\tthis._components = new Array(this.component_names.length);\n\t\tfor (let component_name of this.component_names) {\n\t\t\tconst component = new this._components_contructor(this.scene); //, `${this.name}${name}`);\n\t\t\tlet default_val;\n\t\t\tif (lodash_isArray(this._default_value)) {\n\t\t\t\tdefault_val = this._default_value[index];\n\t\t\t} else {\n\t\t\t\tdefault_val = (this._default_value as any)[component_name];\n\t\t\t}\n\t\t\tcomponent.options.copy(this.options);\n\t\t\tcomponent.set_init_value(default_val);\n\n\t\t\t// component.set_scene(this.scene);\n\t\t\tcomponent.set_name(`${this.name}${component_name}`);\n\t\t\tcomponent.set_parent_param(this);\n\n\t\t\tthis.add_graph_input(component);\n\t\t\t// component.initialize();\n\t\t\tthis._components[index] = component;\n\t\t\tindex++;\n\t\t}\n\t\t// this.compute();\n\t}\n\n\tprotected async process_computation(): Promise<void> {\n\t\tawait this.compute_components();\n\t\tthis.set_value_from_components();\n\t}\n\tset_value_from_components() {}\n\t// set_raw_input_from_components() {}\n\n\thas_expression() {\n\t\tfor (let c of this.components) {\n\t\t\tif (c.expression_controller?.active) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tprivate async compute_components() {\n\t\tconst components = this.components;\n\t\t// const component_evaluation_states = lodash_map(components, ()=> false);\n\t\t// const expected_values_count = components.length;\n\t\t// const component_values = [];\n\t\t// let component;\n\t\t// return lodash_each(this.components(), (component, index)=> {\n\t\tconst promises = [];\n\t\tfor (let c of components) {\n\t\t\tif (c.is_dirty) {\n\t\t\t\tpromises.push(c.compute()); //component_value=> {\n\t\t\t}\n\t\t}\n\t\tawait Promise.all(promises);\n\t\t// component_values[index] = component_value;\n\t\t// component_evaluation_states[index] = true;\n\t\t// const evaluated_values_count = lodash_compact(component_evaluation_states).length;\n\t\t// check if all components have been evaluated succesfully\n\t\t// if (evaluated_values_count === expected_values_count) {\n\t\tthis.remove_dirty_state();\n\t\t// return component_values;\n\t\t// }\n\t\t// });\n\t\t// }\n\t}\n\tprotected _prefilter_invalid_raw_input(raw_input: any): ParamInitValuesTypeMap[T] {\n\t\tif (!lodash_isArray(raw_input)) {\n\t\t\tconst number_or_string = raw_input as number | string;\n\t\t\tconst raw_input_wrapped_in_array: StringOrNumber[] = this.components.map(() => number_or_string);\n\t\t\treturn raw_input_wrapped_in_array as ParamInitValuesTypeMap[T];\n\t\t} else {\n\t\t\treturn raw_input as ParamInitValuesTypeMap[T];\n\t\t}\n\t}\n\n\tprotected process_raw_input() {\n\t\tconst cooker = this.scene.cooker;\n\t\tcooker.block();\n\t\tconst components = this.components;\n\t\tfor (let c of components) {\n\t\t\tc.emit_controller.block_parent_emit();\n\t\t}\n\n\t\t// if (lodash_isArray(values)) {\n\t\tconst value = this._raw_input;\n\t\tif (lodash_isArray(value)) {\n\t\t\tfor (let i = 0; i < components.length; i++) {\n\t\t\t\tcomponents[i].set((value as any)[i]);\n\t\t\t}\n\t\t} else {\n\t\t\tfor (let i = 0; i < components.length; i++) {\n\t\t\t\tconst component_name = this.component_names[i];\n\t\t\t\tcomponents[i].set((value as any)[component_name]);\n\t\t\t}\n\t\t}\n\t\t// } else {\n\t\t// \tconst component_names = this.component_names()\n\t\t// \tfor (let i = 0; i < components.length; i++) {\n\t\t// \t\tcomponents[i].set(values[component_names[i]])\n\t\t// \t}\n\t\t// }\n\n\t\tcooker.unblock();\n\n\t\tfor (let i = 0; i < components.length; i++) {\n\t\t\tcomponents[i].emit_controller.unblock_parent_emit();\n\t\t}\n\t\t// this.emit(ParamEvent.UPDATED);\n\n\t\tthis.emit_controller.emit(ParamEvent.VALUE_UPDATED);\n\t}\n}\n\n// export class BaseMultipleParam extends TypedMultipleParam<Vector> {}\n","/**\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://clara.io\n */\n\nimport { MathUtils } from './MathUtils.js';\n\nfunction Quaternion( x, y, z, w ) {\n\n\tthis._x = x || 0;\n\tthis._y = y || 0;\n\tthis._z = z || 0;\n\tthis._w = ( w !== undefined ) ? w : 1;\n\n}\n\nObject.assign( Quaternion, {\n\n\tslerp: function ( qa, qb, qm, t ) {\n\n\t\treturn qm.copy( qa ).slerp( qb, t );\n\n\t},\n\n\tslerpFlat: function ( dst, dstOffset, src0, srcOffset0, src1, srcOffset1, t ) {\n\n\t\t// fuzz-free, array-based Quaternion SLERP operation\n\n\t\tvar x0 = src0[ srcOffset0 + 0 ],\n\t\t\ty0 = src0[ srcOffset0 + 1 ],\n\t\t\tz0 = src0[ srcOffset0 + 2 ],\n\t\t\tw0 = src0[ srcOffset0 + 3 ],\n\n\t\t\tx1 = src1[ srcOffset1 + 0 ],\n\t\t\ty1 = src1[ srcOffset1 + 1 ],\n\t\t\tz1 = src1[ srcOffset1 + 2 ],\n\t\t\tw1 = src1[ srcOffset1 + 3 ];\n\n\t\tif ( w0 !== w1 || x0 !== x1 || y0 !== y1 || z0 !== z1 ) {\n\n\t\t\tvar s = 1 - t,\n\n\t\t\t\tcos = x0 * x1 + y0 * y1 + z0 * z1 + w0 * w1,\n\n\t\t\t\tdir = ( cos >= 0 ? 1 : - 1 ),\n\t\t\t\tsqrSin = 1 - cos * cos;\n\n\t\t\t// Skip the Slerp for tiny steps to avoid numeric problems:\n\t\t\tif ( sqrSin > Number.EPSILON ) {\n\n\t\t\t\tvar sin = Math.sqrt( sqrSin ),\n\t\t\t\t\tlen = Math.atan2( sin, cos * dir );\n\n\t\t\t\ts = Math.sin( s * len ) / sin;\n\t\t\t\tt = Math.sin( t * len ) / sin;\n\n\t\t\t}\n\n\t\t\tvar tDir = t * dir;\n\n\t\t\tx0 = x0 * s + x1 * tDir;\n\t\t\ty0 = y0 * s + y1 * tDir;\n\t\t\tz0 = z0 * s + z1 * tDir;\n\t\t\tw0 = w0 * s + w1 * tDir;\n\n\t\t\t// Normalize in case we just did a lerp:\n\t\t\tif ( s === 1 - t ) {\n\n\t\t\t\tvar f = 1 / Math.sqrt( x0 * x0 + y0 * y0 + z0 * z0 + w0 * w0 );\n\n\t\t\t\tx0 *= f;\n\t\t\t\ty0 *= f;\n\t\t\t\tz0 *= f;\n\t\t\t\tw0 *= f;\n\n\t\t\t}\n\n\t\t}\n\n\t\tdst[ dstOffset ] = x0;\n\t\tdst[ dstOffset + 1 ] = y0;\n\t\tdst[ dstOffset + 2 ] = z0;\n\t\tdst[ dstOffset + 3 ] = w0;\n\n\t}\n\n} );\n\nObject.defineProperties( Quaternion.prototype, {\n\n\tx: {\n\n\t\tget: function () {\n\n\t\t\treturn this._x;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._x = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t},\n\n\ty: {\n\n\t\tget: function () {\n\n\t\t\treturn this._y;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._y = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t},\n\n\tz: {\n\n\t\tget: function () {\n\n\t\t\treturn this._z;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._z = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t},\n\n\tw: {\n\n\t\tget: function () {\n\n\t\t\treturn this._w;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._w = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t}\n\n} );\n\nObject.assign( Quaternion.prototype, {\n\n\tisQuaternion: true,\n\n\tset: function ( x, y, z, w ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._w = w;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._w );\n\n\t},\n\n\tcopy: function ( quaternion ) {\n\n\t\tthis._x = quaternion.x;\n\t\tthis._y = quaternion.y;\n\t\tthis._z = quaternion.z;\n\t\tthis._w = quaternion.w;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromEuler: function ( euler, update ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tthrow new Error( 'THREE.Quaternion: .setFromEuler() now expects an Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\tvar x = euler._x, y = euler._y, z = euler._z, order = euler.order;\n\n\t\t// http://www.mathworks.com/matlabcentral/fileexchange/\n\t\t// \t20696-function-to-convert-between-dcm-euler-angles-quaternions-and-euler-vectors/\n\t\t//\tcontent/SpinCalc.m\n\n\t\tvar cos = Math.cos;\n\t\tvar sin = Math.sin;\n\n\t\tvar c1 = cos( x / 2 );\n\t\tvar c2 = cos( y / 2 );\n\t\tvar c3 = cos( z / 2 );\n\n\t\tvar s1 = sin( x / 2 );\n\t\tvar s2 = sin( y / 2 );\n\t\tvar s3 = sin( z / 2 );\n\n\t\tif ( order === 'XYZ' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t} else if ( order === 'YXZ' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t} else if ( order === 'ZXY' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t} else if ( order === 'ZYX' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t} else if ( order === 'YZX' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 + c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 + s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 - s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 - s1 * s2 * s3;\n\n\t\t} else if ( order === 'XZY' ) {\n\n\t\t\tthis._x = s1 * c2 * c3 - c1 * s2 * s3;\n\t\t\tthis._y = c1 * s2 * c3 - s1 * c2 * s3;\n\t\t\tthis._z = c1 * c2 * s3 + s1 * s2 * c3;\n\t\t\tthis._w = c1 * c2 * c3 + s1 * s2 * s3;\n\n\t\t}\n\n\t\tif ( update !== false ) this._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromAxisAngle: function ( axis, angle ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/angleToQuaternion/index.htm\n\n\t\t// assumes axis is normalized\n\n\t\tvar halfAngle = angle / 2, s = Math.sin( halfAngle );\n\n\t\tthis._x = axis.x * s;\n\t\tthis._y = axis.y * s;\n\t\tthis._z = axis.z * s;\n\t\tthis._w = Math.cos( halfAngle );\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromRotationMatrix: function ( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToQuaternion/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tvar te = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ],\n\n\t\t\ttrace = m11 + m22 + m33,\n\t\t\ts;\n\n\t\tif ( trace > 0 ) {\n\n\t\t\ts = 0.5 / Math.sqrt( trace + 1.0 );\n\n\t\t\tthis._w = 0.25 / s;\n\t\t\tthis._x = ( m32 - m23 ) * s;\n\t\t\tthis._y = ( m13 - m31 ) * s;\n\t\t\tthis._z = ( m21 - m12 ) * s;\n\n\t\t} else if ( m11 > m22 && m11 > m33 ) {\n\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m11 - m22 - m33 );\n\n\t\t\tthis._w = ( m32 - m23 ) / s;\n\t\t\tthis._x = 0.25 * s;\n\t\t\tthis._y = ( m12 + m21 ) / s;\n\t\t\tthis._z = ( m13 + m31 ) / s;\n\n\t\t} else if ( m22 > m33 ) {\n\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m22 - m11 - m33 );\n\n\t\t\tthis._w = ( m13 - m31 ) / s;\n\t\t\tthis._x = ( m12 + m21 ) / s;\n\t\t\tthis._y = 0.25 * s;\n\t\t\tthis._z = ( m23 + m32 ) / s;\n\n\t\t} else {\n\n\t\t\ts = 2.0 * Math.sqrt( 1.0 + m33 - m11 - m22 );\n\n\t\t\tthis._w = ( m21 - m12 ) / s;\n\t\t\tthis._x = ( m13 + m31 ) / s;\n\t\t\tthis._y = ( m23 + m32 ) / s;\n\t\t\tthis._z = 0.25 * s;\n\n\t\t}\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromUnitVectors: function ( vFrom, vTo ) {\n\n\t\t// assumes direction vectors vFrom and vTo are normalized\n\n\t\tvar EPS = 0.000001;\n\n\t\tvar r = vFrom.dot( vTo ) + 1;\n\n\t\tif ( r < EPS ) {\n\n\t\t\tr = 0;\n\n\t\t\tif ( Math.abs( vFrom.x ) > Math.abs( vFrom.z ) ) {\n\n\t\t\t\tthis._x = - vFrom.y;\n\t\t\t\tthis._y = vFrom.x;\n\t\t\t\tthis._z = 0;\n\t\t\t\tthis._w = r;\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._y = - vFrom.z;\n\t\t\t\tthis._z = vFrom.y;\n\t\t\t\tthis._w = r;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\t// crossVectors( vFrom, vTo ); // inlined to avoid cyclic dependency on Vector3\n\n\t\t\tthis._x = vFrom.y * vTo.z - vFrom.z * vTo.y;\n\t\t\tthis._y = vFrom.z * vTo.x - vFrom.x * vTo.z;\n\t\t\tthis._z = vFrom.x * vTo.y - vFrom.y * vTo.x;\n\t\t\tthis._w = r;\n\n\t\t}\n\n\t\treturn this.normalize();\n\n\t},\n\n\tangleTo: function ( q ) {\n\n\t\treturn 2 * Math.acos( Math.abs( MathUtils.clamp( this.dot( q ), - 1, 1 ) ) );\n\n\t},\n\n\trotateTowards: function ( q, step ) {\n\n\t\tvar angle = this.angleTo( q );\n\n\t\tif ( angle === 0 ) return this;\n\n\t\tvar t = Math.min( 1, step / angle );\n\n\t\tthis.slerp( q, t );\n\n\t\treturn this;\n\n\t},\n\n\tinverse: function () {\n\n\t\t// quaternion is assumed to have unit length\n\n\t\treturn this.conjugate();\n\n\t},\n\n\tconjugate: function () {\n\n\t\tthis._x *= - 1;\n\t\tthis._y *= - 1;\n\t\tthis._z *= - 1;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this._x * v._x + this._y * v._y + this._z * v._z + this._w * v._w;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this._x * this._x + this._y * this._y + this._z * this._z + this._w * this._w );\n\n\t},\n\n\tnormalize: function () {\n\n\t\tvar l = this.length();\n\n\t\tif ( l === 0 ) {\n\n\t\t\tthis._x = 0;\n\t\t\tthis._y = 0;\n\t\t\tthis._z = 0;\n\t\t\tthis._w = 1;\n\n\t\t} else {\n\n\t\t\tl = 1 / l;\n\n\t\t\tthis._x = this._x * l;\n\t\t\tthis._y = this._y * l;\n\t\t\tthis._z = this._z * l;\n\t\t\tthis._w = this._w * l;\n\n\t\t}\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( q, p ) {\n\n\t\tif ( p !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Quaternion: .multiply() now only accepts one argument. Use .multiplyQuaternions( a, b ) instead.' );\n\t\t\treturn this.multiplyQuaternions( q, p );\n\n\t\t}\n\n\t\treturn this.multiplyQuaternions( this, q );\n\n\t},\n\n\tpremultiply: function ( q ) {\n\n\t\treturn this.multiplyQuaternions( q, this );\n\n\t},\n\n\tmultiplyQuaternions: function ( a, b ) {\n\n\t\t// from http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/code/index.htm\n\n\t\tvar qax = a._x, qay = a._y, qaz = a._z, qaw = a._w;\n\t\tvar qbx = b._x, qby = b._y, qbz = b._z, qbw = b._w;\n\n\t\tthis._x = qax * qbw + qaw * qbx + qay * qbz - qaz * qby;\n\t\tthis._y = qay * qbw + qaw * qby + qaz * qbx - qax * qbz;\n\t\tthis._z = qaz * qbw + qaw * qbz + qax * qby - qay * qbx;\n\t\tthis._w = qaw * qbw - qax * qbx - qay * qby - qaz * qbz;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tslerp: function ( qb, t ) {\n\n\t\tif ( t === 0 ) return this;\n\t\tif ( t === 1 ) return this.copy( qb );\n\n\t\tvar x = this._x, y = this._y, z = this._z, w = this._w;\n\n\t\t// http://www.euclideanspace.com/maths/algebra/realNormedAlgebra/quaternions/slerp/\n\n\t\tvar cosHalfTheta = w * qb._w + x * qb._x + y * qb._y + z * qb._z;\n\n\t\tif ( cosHalfTheta < 0 ) {\n\n\t\t\tthis._w = - qb._w;\n\t\t\tthis._x = - qb._x;\n\t\t\tthis._y = - qb._y;\n\t\t\tthis._z = - qb._z;\n\n\t\t\tcosHalfTheta = - cosHalfTheta;\n\n\t\t} else {\n\n\t\t\tthis.copy( qb );\n\n\t\t}\n\n\t\tif ( cosHalfTheta >= 1.0 ) {\n\n\t\t\tthis._w = w;\n\t\t\tthis._x = x;\n\t\t\tthis._y = y;\n\t\t\tthis._z = z;\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar sqrSinHalfTheta = 1.0 - cosHalfTheta * cosHalfTheta;\n\n\t\tif ( sqrSinHalfTheta <= Number.EPSILON ) {\n\n\t\t\tvar s = 1 - t;\n\t\t\tthis._w = s * w + t * this._w;\n\t\t\tthis._x = s * x + t * this._x;\n\t\t\tthis._y = s * y + t * this._y;\n\t\t\tthis._z = s * z + t * this._z;\n\n\t\t\tthis.normalize();\n\t\t\tthis._onChangeCallback();\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar sinHalfTheta = Math.sqrt( sqrSinHalfTheta );\n\t\tvar halfTheta = Math.atan2( sinHalfTheta, cosHalfTheta );\n\t\tvar ratioA = Math.sin( ( 1 - t ) * halfTheta ) / sinHalfTheta,\n\t\t\tratioB = Math.sin( t * halfTheta ) / sinHalfTheta;\n\n\t\tthis._w = ( w * ratioA + this._w * ratioB );\n\t\tthis._x = ( x * ratioA + this._x * ratioB );\n\t\tthis._y = ( y * ratioA + this._y * ratioB );\n\t\tthis._z = ( z * ratioA + this._z * ratioB );\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( quaternion ) {\n\n\t\treturn ( quaternion._x === this._x ) && ( quaternion._y === this._y ) && ( quaternion._z === this._z ) && ( quaternion._w === this._w );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis._x = array[ offset ];\n\t\tthis._y = array[ offset + 1 ];\n\t\tthis._z = array[ offset + 2 ];\n\t\tthis._w = array[ offset + 3 ];\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._w;\n\n\t\treturn array;\n\n\t},\n\n\tfromBufferAttribute: function ( attribute, index ) {\n\n\t\tthis._x = attribute.getX( index );\n\t\tthis._y = attribute.getY( index );\n\t\tthis._z = attribute.getZ( index );\n\t\tthis._w = attribute.getW( index );\n\n\t\treturn this;\n\n\t},\n\n\t_onChange: function ( callback ) {\n\n\t\tthis._onChangeCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\t_onChangeCallback: function () {}\n\n} );\n\n\nexport { Quaternion };\n","var isFunction = require('./isFunction'),\n    isLength = require('./isLength');\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nmodule.exports = isArrayLike;\n","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeys = require('./_baseKeys'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nmodule.exports = keys;\n","import { MathUtils } from './MathUtils.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar _colorKeywords = { 'aliceblue': 0xF0F8FF, 'antiquewhite': 0xFAEBD7, 'aqua': 0x00FFFF, 'aquamarine': 0x7FFFD4, 'azure': 0xF0FFFF,\n\t'beige': 0xF5F5DC, 'bisque': 0xFFE4C4, 'black': 0x000000, 'blanchedalmond': 0xFFEBCD, 'blue': 0x0000FF, 'blueviolet': 0x8A2BE2,\n\t'brown': 0xA52A2A, 'burlywood': 0xDEB887, 'cadetblue': 0x5F9EA0, 'chartreuse': 0x7FFF00, 'chocolate': 0xD2691E, 'coral': 0xFF7F50,\n\t'cornflowerblue': 0x6495ED, 'cornsilk': 0xFFF8DC, 'crimson': 0xDC143C, 'cyan': 0x00FFFF, 'darkblue': 0x00008B, 'darkcyan': 0x008B8B,\n\t'darkgoldenrod': 0xB8860B, 'darkgray': 0xA9A9A9, 'darkgreen': 0x006400, 'darkgrey': 0xA9A9A9, 'darkkhaki': 0xBDB76B, 'darkmagenta': 0x8B008B,\n\t'darkolivegreen': 0x556B2F, 'darkorange': 0xFF8C00, 'darkorchid': 0x9932CC, 'darkred': 0x8B0000, 'darksalmon': 0xE9967A, 'darkseagreen': 0x8FBC8F,\n\t'darkslateblue': 0x483D8B, 'darkslategray': 0x2F4F4F, 'darkslategrey': 0x2F4F4F, 'darkturquoise': 0x00CED1, 'darkviolet': 0x9400D3,\n\t'deeppink': 0xFF1493, 'deepskyblue': 0x00BFFF, 'dimgray': 0x696969, 'dimgrey': 0x696969, 'dodgerblue': 0x1E90FF, 'firebrick': 0xB22222,\n\t'floralwhite': 0xFFFAF0, 'forestgreen': 0x228B22, 'fuchsia': 0xFF00FF, 'gainsboro': 0xDCDCDC, 'ghostwhite': 0xF8F8FF, 'gold': 0xFFD700,\n\t'goldenrod': 0xDAA520, 'gray': 0x808080, 'green': 0x008000, 'greenyellow': 0xADFF2F, 'grey': 0x808080, 'honeydew': 0xF0FFF0, 'hotpink': 0xFF69B4,\n\t'indianred': 0xCD5C5C, 'indigo': 0x4B0082, 'ivory': 0xFFFFF0, 'khaki': 0xF0E68C, 'lavender': 0xE6E6FA, 'lavenderblush': 0xFFF0F5, 'lawngreen': 0x7CFC00,\n\t'lemonchiffon': 0xFFFACD, 'lightblue': 0xADD8E6, 'lightcoral': 0xF08080, 'lightcyan': 0xE0FFFF, 'lightgoldenrodyellow': 0xFAFAD2, 'lightgray': 0xD3D3D3,\n\t'lightgreen': 0x90EE90, 'lightgrey': 0xD3D3D3, 'lightpink': 0xFFB6C1, 'lightsalmon': 0xFFA07A, 'lightseagreen': 0x20B2AA, 'lightskyblue': 0x87CEFA,\n\t'lightslategray': 0x778899, 'lightslategrey': 0x778899, 'lightsteelblue': 0xB0C4DE, 'lightyellow': 0xFFFFE0, 'lime': 0x00FF00, 'limegreen': 0x32CD32,\n\t'linen': 0xFAF0E6, 'magenta': 0xFF00FF, 'maroon': 0x800000, 'mediumaquamarine': 0x66CDAA, 'mediumblue': 0x0000CD, 'mediumorchid': 0xBA55D3,\n\t'mediumpurple': 0x9370DB, 'mediumseagreen': 0x3CB371, 'mediumslateblue': 0x7B68EE, 'mediumspringgreen': 0x00FA9A, 'mediumturquoise': 0x48D1CC,\n\t'mediumvioletred': 0xC71585, 'midnightblue': 0x191970, 'mintcream': 0xF5FFFA, 'mistyrose': 0xFFE4E1, 'moccasin': 0xFFE4B5, 'navajowhite': 0xFFDEAD,\n\t'navy': 0x000080, 'oldlace': 0xFDF5E6, 'olive': 0x808000, 'olivedrab': 0x6B8E23, 'orange': 0xFFA500, 'orangered': 0xFF4500, 'orchid': 0xDA70D6,\n\t'palegoldenrod': 0xEEE8AA, 'palegreen': 0x98FB98, 'paleturquoise': 0xAFEEEE, 'palevioletred': 0xDB7093, 'papayawhip': 0xFFEFD5, 'peachpuff': 0xFFDAB9,\n\t'peru': 0xCD853F, 'pink': 0xFFC0CB, 'plum': 0xDDA0DD, 'powderblue': 0xB0E0E6, 'purple': 0x800080, 'rebeccapurple': 0x663399, 'red': 0xFF0000, 'rosybrown': 0xBC8F8F,\n\t'royalblue': 0x4169E1, 'saddlebrown': 0x8B4513, 'salmon': 0xFA8072, 'sandybrown': 0xF4A460, 'seagreen': 0x2E8B57, 'seashell': 0xFFF5EE,\n\t'sienna': 0xA0522D, 'silver': 0xC0C0C0, 'skyblue': 0x87CEEB, 'slateblue': 0x6A5ACD, 'slategray': 0x708090, 'slategrey': 0x708090, 'snow': 0xFFFAFA,\n\t'springgreen': 0x00FF7F, 'steelblue': 0x4682B4, 'tan': 0xD2B48C, 'teal': 0x008080, 'thistle': 0xD8BFD8, 'tomato': 0xFF6347, 'turquoise': 0x40E0D0,\n\t'violet': 0xEE82EE, 'wheat': 0xF5DEB3, 'white': 0xFFFFFF, 'whitesmoke': 0xF5F5F5, 'yellow': 0xFFFF00, 'yellowgreen': 0x9ACD32 };\n\nvar _hslA = { h: 0, s: 0, l: 0 };\nvar _hslB = { h: 0, s: 0, l: 0 };\n\nfunction Color( r, g, b ) {\n\n\tif ( g === undefined && b === undefined ) {\n\n\t\t// r is THREE.Color, hex or string\n\t\treturn this.set( r );\n\n\t}\n\n\treturn this.setRGB( r, g, b );\n\n}\n\nfunction hue2rgb( p, q, t ) {\n\n\tif ( t < 0 ) t += 1;\n\tif ( t > 1 ) t -= 1;\n\tif ( t < 1 / 6 ) return p + ( q - p ) * 6 * t;\n\tif ( t < 1 / 2 ) return q;\n\tif ( t < 2 / 3 ) return p + ( q - p ) * 6 * ( 2 / 3 - t );\n\treturn p;\n\n}\n\nfunction SRGBToLinear( c ) {\n\n\treturn ( c < 0.04045 ) ? c * 0.0773993808 : Math.pow( c * 0.9478672986 + 0.0521327014, 2.4 );\n\n}\n\nfunction LinearToSRGB( c ) {\n\n\treturn ( c < 0.0031308 ) ? c * 12.92 : 1.055 * ( Math.pow( c, 0.41666 ) ) - 0.055;\n\n}\n\nObject.assign( Color.prototype, {\n\n\tisColor: true,\n\n\tr: 1, g: 1, b: 1,\n\n\tset: function ( value ) {\n\n\t\tif ( value && value.isColor ) {\n\n\t\t\tthis.copy( value );\n\n\t\t} else if ( typeof value === 'number' ) {\n\n\t\t\tthis.setHex( value );\n\n\t\t} else if ( typeof value === 'string' ) {\n\n\t\t\tthis.setStyle( value );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.r = scalar;\n\t\tthis.g = scalar;\n\t\tthis.b = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetHex: function ( hex ) {\n\n\t\thex = Math.floor( hex );\n\n\t\tthis.r = ( hex >> 16 & 255 ) / 255;\n\t\tthis.g = ( hex >> 8 & 255 ) / 255;\n\t\tthis.b = ( hex & 255 ) / 255;\n\n\t\treturn this;\n\n\t},\n\n\tsetRGB: function ( r, g, b ) {\n\n\t\tthis.r = r;\n\t\tthis.g = g;\n\t\tthis.b = b;\n\n\t\treturn this;\n\n\t},\n\n\tsetHSL: function ( h, s, l ) {\n\n\t\t// h,s,l ranges are in 0.0 - 1.0\n\t\th = MathUtils.euclideanModulo( h, 1 );\n\t\ts = MathUtils.clamp( s, 0, 1 );\n\t\tl = MathUtils.clamp( l, 0, 1 );\n\n\t\tif ( s === 0 ) {\n\n\t\t\tthis.r = this.g = this.b = l;\n\n\t\t} else {\n\n\t\t\tvar p = l <= 0.5 ? l * ( 1 + s ) : l + s - ( l * s );\n\t\t\tvar q = ( 2 * l ) - p;\n\n\t\t\tthis.r = hue2rgb( q, p, h + 1 / 3 );\n\t\t\tthis.g = hue2rgb( q, p, h );\n\t\t\tthis.b = hue2rgb( q, p, h - 1 / 3 );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetStyle: function ( style ) {\n\n\t\tfunction handleAlpha( string ) {\n\n\t\t\tif ( string === undefined ) return;\n\n\t\t\tif ( parseFloat( string ) < 1 ) {\n\n\t\t\t\tconsole.warn( 'THREE.Color: Alpha component of ' + style + ' will be ignored.' );\n\n\t\t\t}\n\n\t\t}\n\n\n\t\tvar m;\n\n\t\tif ( m = /^((?:rgb|hsl)a?)\\(\\s*([^\\)]*)\\)/.exec( style ) ) {\n\n\t\t\t// rgb / hsl\n\n\t\t\tvar color;\n\t\t\tvar name = m[ 1 ];\n\t\t\tvar components = m[ 2 ];\n\n\t\t\tswitch ( name ) {\n\n\t\t\t\tcase 'rgb':\n\t\t\t\tcase 'rgba':\n\n\t\t\t\t\tif ( color = /^(\\d+)\\s*,\\s*(\\d+)\\s*,\\s*(\\d+)\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// rgb(255,0,0) rgba(255,0,0,0.5)\n\t\t\t\t\t\tthis.r = Math.min( 255, parseInt( color[ 1 ], 10 ) ) / 255;\n\t\t\t\t\t\tthis.g = Math.min( 255, parseInt( color[ 2 ], 10 ) ) / 255;\n\t\t\t\t\t\tthis.b = Math.min( 255, parseInt( color[ 3 ], 10 ) ) / 255;\n\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\n\n\t\t\t\t\t\treturn this;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tif ( color = /^(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// rgb(100%,0%,0%) rgba(100%,0%,0%,0.5)\n\t\t\t\t\t\tthis.r = Math.min( 100, parseInt( color[ 1 ], 10 ) ) / 100;\n\t\t\t\t\t\tthis.g = Math.min( 100, parseInt( color[ 2 ], 10 ) ) / 100;\n\t\t\t\t\t\tthis.b = Math.min( 100, parseInt( color[ 3 ], 10 ) ) / 100;\n\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\n\n\t\t\t\t\t\treturn this;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase 'hsl':\n\t\t\t\tcase 'hsla':\n\n\t\t\t\t\tif ( color = /^([0-9]*\\.?[0-9]+)\\s*,\\s*(\\d+)\\%\\s*,\\s*(\\d+)\\%\\s*(,\\s*([0-9]*\\.?[0-9]+)\\s*)?$/.exec( components ) ) {\n\n\t\t\t\t\t\t// hsl(120,50%,50%) hsla(120,50%,50%,0.5)\n\t\t\t\t\t\tvar h = parseFloat( color[ 1 ] ) / 360;\n\t\t\t\t\t\tvar s = parseInt( color[ 2 ], 10 ) / 100;\n\t\t\t\t\t\tvar l = parseInt( color[ 3 ], 10 ) / 100;\n\n\t\t\t\t\t\thandleAlpha( color[ 5 ] );\n\n\t\t\t\t\t\treturn this.setHSL( h, s, l );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t} else if ( m = /^\\#([A-Fa-f0-9]+)$/.exec( style ) ) {\n\n\t\t\t// hex color\n\n\t\t\tvar hex = m[ 1 ];\n\t\t\tvar size = hex.length;\n\n\t\t\tif ( size === 3 ) {\n\n\t\t\t\t// #ff0\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 0 ), 16 ) / 255;\n\t\t\t\tthis.g = parseInt( hex.charAt( 1 ) + hex.charAt( 1 ), 16 ) / 255;\n\t\t\t\tthis.b = parseInt( hex.charAt( 2 ) + hex.charAt( 2 ), 16 ) / 255;\n\n\t\t\t\treturn this;\n\n\t\t\t} else if ( size === 6 ) {\n\n\t\t\t\t// #ff0000\n\t\t\t\tthis.r = parseInt( hex.charAt( 0 ) + hex.charAt( 1 ), 16 ) / 255;\n\t\t\t\tthis.g = parseInt( hex.charAt( 2 ) + hex.charAt( 3 ), 16 ) / 255;\n\t\t\t\tthis.b = parseInt( hex.charAt( 4 ) + hex.charAt( 5 ), 16 ) / 255;\n\n\t\t\t\treturn this;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( style && style.length > 0 ) {\n\n\t\t\treturn this.setColorName( style );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetColorName: function ( style ) {\n\n\t\t// color keywords\n\t\tvar hex = _colorKeywords[ style ];\n\n\t\tif ( hex !== undefined ) {\n\n\t\t\t// red\n\t\t\tthis.setHex( hex );\n\n\t\t} else {\n\n\t\t\t// unknown color\n\t\t\tconsole.warn( 'THREE.Color: Unknown color ' + style );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.r, this.g, this.b );\n\n\t},\n\n\tcopy: function ( color ) {\n\n\t\tthis.r = color.r;\n\t\tthis.g = color.g;\n\t\tthis.b = color.b;\n\n\t\treturn this;\n\n\t},\n\n\tcopyGammaToLinear: function ( color, gammaFactor ) {\n\n\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\n\n\t\tthis.r = Math.pow( color.r, gammaFactor );\n\t\tthis.g = Math.pow( color.g, gammaFactor );\n\t\tthis.b = Math.pow( color.b, gammaFactor );\n\n\t\treturn this;\n\n\t},\n\n\tcopyLinearToGamma: function ( color, gammaFactor ) {\n\n\t\tif ( gammaFactor === undefined ) gammaFactor = 2.0;\n\n\t\tvar safeInverse = ( gammaFactor > 0 ) ? ( 1.0 / gammaFactor ) : 1.0;\n\n\t\tthis.r = Math.pow( color.r, safeInverse );\n\t\tthis.g = Math.pow( color.g, safeInverse );\n\t\tthis.b = Math.pow( color.b, safeInverse );\n\n\t\treturn this;\n\n\t},\n\n\tconvertGammaToLinear: function ( gammaFactor ) {\n\n\t\tthis.copyGammaToLinear( this, gammaFactor );\n\n\t\treturn this;\n\n\t},\n\n\tconvertLinearToGamma: function ( gammaFactor ) {\n\n\t\tthis.copyLinearToGamma( this, gammaFactor );\n\n\t\treturn this;\n\n\t},\n\n\tcopySRGBToLinear: function ( color ) {\n\n\t\tthis.r = SRGBToLinear( color.r );\n\t\tthis.g = SRGBToLinear( color.g );\n\t\tthis.b = SRGBToLinear( color.b );\n\n\t\treturn this;\n\n\t},\n\n\tcopyLinearToSRGB: function ( color ) {\n\n\t\tthis.r = LinearToSRGB( color.r );\n\t\tthis.g = LinearToSRGB( color.g );\n\t\tthis.b = LinearToSRGB( color.b );\n\n\t\treturn this;\n\n\t},\n\n\tconvertSRGBToLinear: function () {\n\n\t\tthis.copySRGBToLinear( this );\n\n\t\treturn this;\n\n\t},\n\n\tconvertLinearToSRGB: function () {\n\n\t\tthis.copyLinearToSRGB( this );\n\n\t\treturn this;\n\n\t},\n\n\tgetHex: function () {\n\n\t\treturn ( this.r * 255 ) << 16 ^ ( this.g * 255 ) << 8 ^ ( this.b * 255 ) << 0;\n\n\t},\n\n\tgetHexString: function () {\n\n\t\treturn ( '000000' + this.getHex().toString( 16 ) ).slice( - 6 );\n\n\t},\n\n\tgetHSL: function ( target ) {\n\n\t\t// h,s,l ranges are in 0.0 - 1.0\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Color: .getHSL() target is now required' );\n\t\t\ttarget = { h: 0, s: 0, l: 0 };\n\n\t\t}\n\n\t\tvar r = this.r, g = this.g, b = this.b;\n\n\t\tvar max = Math.max( r, g, b );\n\t\tvar min = Math.min( r, g, b );\n\n\t\tvar hue, saturation;\n\t\tvar lightness = ( min + max ) / 2.0;\n\n\t\tif ( min === max ) {\n\n\t\t\thue = 0;\n\t\t\tsaturation = 0;\n\n\t\t} else {\n\n\t\t\tvar delta = max - min;\n\n\t\t\tsaturation = lightness <= 0.5 ? delta / ( max + min ) : delta / ( 2 - max - min );\n\n\t\t\tswitch ( max ) {\n\n\t\t\t\tcase r: hue = ( g - b ) / delta + ( g < b ? 6 : 0 ); break;\n\t\t\t\tcase g: hue = ( b - r ) / delta + 2; break;\n\t\t\t\tcase b: hue = ( r - g ) / delta + 4; break;\n\n\t\t\t}\n\n\t\t\thue /= 6;\n\n\t\t}\n\n\t\ttarget.h = hue;\n\t\ttarget.s = saturation;\n\t\ttarget.l = lightness;\n\n\t\treturn target;\n\n\t},\n\n\tgetStyle: function () {\n\n\t\treturn 'rgb(' + ( ( this.r * 255 ) | 0 ) + ',' + ( ( this.g * 255 ) | 0 ) + ',' + ( ( this.b * 255 ) | 0 ) + ')';\n\n\t},\n\n\toffsetHSL: function ( h, s, l ) {\n\n\t\tthis.getHSL( _hslA );\n\n\t\t_hslA.h += h; _hslA.s += s; _hslA.l += l;\n\n\t\tthis.setHSL( _hslA.h, _hslA.s, _hslA.l );\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( color ) {\n\n\t\tthis.r += color.r;\n\t\tthis.g += color.g;\n\t\tthis.b += color.b;\n\n\t\treturn this;\n\n\t},\n\n\taddColors: function ( color1, color2 ) {\n\n\t\tthis.r = color1.r + color2.r;\n\t\tthis.g = color1.g + color2.g;\n\t\tthis.b = color1.b + color2.b;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.r += s;\n\t\tthis.g += s;\n\t\tthis.b += s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( color ) {\n\n\t\tthis.r = Math.max( 0, this.r - color.r );\n\t\tthis.g = Math.max( 0, this.g - color.g );\n\t\tthis.b = Math.max( 0, this.b - color.b );\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( color ) {\n\n\t\tthis.r *= color.r;\n\t\tthis.g *= color.g;\n\t\tthis.b *= color.b;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tthis.r *= s;\n\t\tthis.g *= s;\n\t\tthis.b *= s;\n\n\t\treturn this;\n\n\t},\n\n\tlerp: function ( color, alpha ) {\n\n\t\tthis.r += ( color.r - this.r ) * alpha;\n\t\tthis.g += ( color.g - this.g ) * alpha;\n\t\tthis.b += ( color.b - this.b ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tlerpHSL: function ( color, alpha ) {\n\n\t\tthis.getHSL( _hslA );\n\t\tcolor.getHSL( _hslB );\n\n\t\tvar h = MathUtils.lerp( _hslA.h, _hslB.h, alpha );\n\t\tvar s = MathUtils.lerp( _hslA.s, _hslB.s, alpha );\n\t\tvar l = MathUtils.lerp( _hslA.l, _hslB.l, alpha );\n\n\t\tthis.setHSL( h, s, l );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( c ) {\n\n\t\treturn ( c.r === this.r ) && ( c.g === this.g ) && ( c.b === this.b );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.r = array[ offset ];\n\t\tthis.g = array[ offset + 1 ];\n\t\tthis.b = array[ offset + 2 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.r;\n\t\tarray[ offset + 1 ] = this.g;\n\t\tarray[ offset + 2 ] = this.b;\n\n\t\treturn array;\n\n\t},\n\n\ttoJSON: function () {\n\n\t\treturn this.getHex();\n\n\t}\n\n} );\n\nColor.NAMES = _colorKeywords;\n\nexport { Color };\n","import { Quaternion } from '../math/Quaternion.js';\nimport { Vector3 } from '../math/Vector3.js';\nimport { Matrix4 } from '../math/Matrix4.js';\nimport { EventDispatcher } from './EventDispatcher.js';\nimport { Euler } from '../math/Euler.js';\nimport { Layers } from './Layers.js';\nimport { Matrix3 } from '../math/Matrix3.js';\nimport { MathUtils } from '../math/MathUtils.js';\n\nvar _object3DId = 0;\n\nvar _v1 = new Vector3();\nvar _q1 = new Quaternion();\nvar _m1 = new Matrix4();\nvar _target = new Vector3();\n\nvar _position = new Vector3();\nvar _scale = new Vector3();\nvar _quaternion = new Quaternion();\n\nvar _xAxis = new Vector3( 1, 0, 0 );\nvar _yAxis = new Vector3( 0, 1, 0 );\nvar _zAxis = new Vector3( 0, 0, 1 );\n\nvar _addedEvent = { type: 'added' };\nvar _removedEvent = { type: 'removed' };\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author mikael emtinger / http://gomo.se/\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author elephantatwork / www.elephantatwork.ch\n */\n\nfunction Object3D() {\n\n\tObject.defineProperty( this, 'id', { value: _object3DId ++ } );\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\tthis.name = '';\n\tthis.type = 'Object3D';\n\n\tthis.parent = null;\n\tthis.children = [];\n\n\tthis.up = Object3D.DefaultUp.clone();\n\n\tvar position = new Vector3();\n\tvar rotation = new Euler();\n\tvar quaternion = new Quaternion();\n\tvar scale = new Vector3( 1, 1, 1 );\n\n\tfunction onRotationChange() {\n\n\t\tquaternion.setFromEuler( rotation, false );\n\n\t}\n\n\tfunction onQuaternionChange() {\n\n\t\trotation.setFromQuaternion( quaternion, undefined, false );\n\n\t}\n\n\trotation._onChange( onRotationChange );\n\tquaternion._onChange( onQuaternionChange );\n\n\tObject.defineProperties( this, {\n\t\tposition: {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: position\n\t\t},\n\t\trotation: {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: rotation\n\t\t},\n\t\tquaternion: {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: quaternion\n\t\t},\n\t\tscale: {\n\t\t\tconfigurable: true,\n\t\t\tenumerable: true,\n\t\t\tvalue: scale\n\t\t},\n\t\tmodelViewMatrix: {\n\t\t\tvalue: new Matrix4()\n\t\t},\n\t\tnormalMatrix: {\n\t\t\tvalue: new Matrix3()\n\t\t}\n\t} );\n\n\tthis.matrix = new Matrix4();\n\tthis.matrixWorld = new Matrix4();\n\n\tthis.matrixAutoUpdate = Object3D.DefaultMatrixAutoUpdate;\n\tthis.matrixWorldNeedsUpdate = false;\n\n\tthis.layers = new Layers();\n\tthis.visible = true;\n\n\tthis.castShadow = false;\n\tthis.receiveShadow = false;\n\n\tthis.frustumCulled = true;\n\tthis.renderOrder = 0;\n\n\tthis.userData = {};\n\n}\n\nObject3D.DefaultUp = new Vector3( 0, 1, 0 );\nObject3D.DefaultMatrixAutoUpdate = true;\n\nObject3D.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Object3D,\n\n\tisObject3D: true,\n\n\tonBeforeRender: function () {},\n\tonAfterRender: function () {},\n\n\tapplyMatrix4: function ( matrix ) {\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tthis.matrix.premultiply( matrix );\n\n\t\tthis.matrix.decompose( this.position, this.quaternion, this.scale );\n\n\t},\n\n\tapplyQuaternion: function ( q ) {\n\n\t\tthis.quaternion.premultiply( q );\n\n\t\treturn this;\n\n\t},\n\n\tsetRotationFromAxisAngle: function ( axis, angle ) {\n\n\t\t// assumes axis is normalized\n\n\t\tthis.quaternion.setFromAxisAngle( axis, angle );\n\n\t},\n\n\tsetRotationFromEuler: function ( euler ) {\n\n\t\tthis.quaternion.setFromEuler( euler, true );\n\n\t},\n\n\tsetRotationFromMatrix: function ( m ) {\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tthis.quaternion.setFromRotationMatrix( m );\n\n\t},\n\n\tsetRotationFromQuaternion: function ( q ) {\n\n\t\t// assumes q is normalized\n\n\t\tthis.quaternion.copy( q );\n\n\t},\n\n\trotateOnAxis: function ( axis, angle ) {\n\n\t\t// rotate object on axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\t_q1.setFromAxisAngle( axis, angle );\n\n\t\tthis.quaternion.multiply( _q1 );\n\n\t\treturn this;\n\n\t},\n\n\trotateOnWorldAxis: function ( axis, angle ) {\n\n\t\t// rotate object on axis in world space\n\t\t// axis is assumed to be normalized\n\t\t// method assumes no rotated parent\n\n\t\t_q1.setFromAxisAngle( axis, angle );\n\n\t\tthis.quaternion.premultiply( _q1 );\n\n\t\treturn this;\n\n\t},\n\n\trotateX: function ( angle ) {\n\n\t\treturn this.rotateOnAxis( _xAxis, angle );\n\n\t},\n\n\trotateY: function ( angle ) {\n\n\t\treturn this.rotateOnAxis( _yAxis, angle );\n\n\t},\n\n\trotateZ: function ( angle ) {\n\n\t\treturn this.rotateOnAxis( _zAxis, angle );\n\n\t},\n\n\ttranslateOnAxis: function ( axis, distance ) {\n\n\t\t// translate object by distance along axis in object space\n\t\t// axis is assumed to be normalized\n\n\t\t_v1.copy( axis ).applyQuaternion( this.quaternion );\n\n\t\tthis.position.add( _v1.multiplyScalar( distance ) );\n\n\t\treturn this;\n\n\t},\n\n\ttranslateX: function ( distance ) {\n\n\t\treturn this.translateOnAxis( _xAxis, distance );\n\n\t},\n\n\ttranslateY: function ( distance ) {\n\n\t\treturn this.translateOnAxis( _yAxis, distance );\n\n\t},\n\n\ttranslateZ: function ( distance ) {\n\n\t\treturn this.translateOnAxis( _zAxis, distance );\n\n\t},\n\n\tlocalToWorld: function ( vector ) {\n\n\t\treturn vector.applyMatrix4( this.matrixWorld );\n\n\t},\n\n\tworldToLocal: function ( vector ) {\n\n\t\treturn vector.applyMatrix4( _m1.getInverse( this.matrixWorld ) );\n\n\t},\n\n\tlookAt: function ( x, y, z ) {\n\n\t\t// This method does not support objects having non-uniformly-scaled parent(s)\n\n\t\tif ( x.isVector3 ) {\n\n\t\t\t_target.copy( x );\n\n\t\t} else {\n\n\t\t\t_target.set( x, y, z );\n\n\t\t}\n\n\t\tvar parent = this.parent;\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\t_position.setFromMatrixPosition( this.matrixWorld );\n\n\t\tif ( this.isCamera || this.isLight ) {\n\n\t\t\t_m1.lookAt( _position, _target, this.up );\n\n\t\t} else {\n\n\t\t\t_m1.lookAt( _target, _position, this.up );\n\n\t\t}\n\n\t\tthis.quaternion.setFromRotationMatrix( _m1 );\n\n\t\tif ( parent ) {\n\n\t\t\t_m1.extractRotation( parent.matrixWorld );\n\t\t\t_q1.setFromRotationMatrix( _m1 );\n\t\t\tthis.quaternion.premultiply( _q1.inverse() );\n\n\t\t}\n\n\t},\n\n\tadd: function ( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( var i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.add( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( object === this ) {\n\n\t\t\tconsole.error( \"THREE.Object3D.add: object can't be added as a child of itself.\", object );\n\t\t\treturn this;\n\n\t\t}\n\n\t\tif ( ( object && object.isObject3D ) ) {\n\n\t\t\tif ( object.parent !== null ) {\n\n\t\t\t\tobject.parent.remove( object );\n\n\t\t\t}\n\n\t\t\tobject.parent = this;\n\t\t\tthis.children.push( object );\n\n\t\t\tobject.dispatchEvent( _addedEvent );\n\n\t\t} else {\n\n\t\t\tconsole.error( \"THREE.Object3D.add: object not an instance of THREE.Object3D.\", object );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tremove: function ( object ) {\n\n\t\tif ( arguments.length > 1 ) {\n\n\t\t\tfor ( var i = 0; i < arguments.length; i ++ ) {\n\n\t\t\t\tthis.remove( arguments[ i ] );\n\n\t\t\t}\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tvar index = this.children.indexOf( object );\n\n\t\tif ( index !== - 1 ) {\n\n\t\t\tobject.parent = null;\n\t\t\tthis.children.splice( index, 1 );\n\n\t\t\tobject.dispatchEvent( _removedEvent );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tattach: function ( object ) {\n\n\t\t// adds object as a child of this, while maintaining the object's world transform\n\n\t\tthis.updateWorldMatrix( true, false );\n\n\t\t_m1.getInverse( this.matrixWorld );\n\n\t\tif ( object.parent !== null ) {\n\n\t\t\tobject.parent.updateWorldMatrix( true, false );\n\n\t\t\t_m1.multiply( object.parent.matrixWorld );\n\n\t\t}\n\n\t\tobject.applyMatrix4( _m1 );\n\n\t\tobject.updateWorldMatrix( false, false );\n\n\t\tthis.add( object );\n\n\t\treturn this;\n\n\t},\n\n\tgetObjectById: function ( id ) {\n\n\t\treturn this.getObjectByProperty( 'id', id );\n\n\t},\n\n\tgetObjectByName: function ( name ) {\n\n\t\treturn this.getObjectByProperty( 'name', name );\n\n\t},\n\n\tgetObjectByProperty: function ( name, value ) {\n\n\t\tif ( this[ name ] === value ) return this;\n\n\t\tfor ( var i = 0, l = this.children.length; i < l; i ++ ) {\n\n\t\t\tvar child = this.children[ i ];\n\t\t\tvar object = child.getObjectByProperty( name, value );\n\n\t\t\tif ( object !== undefined ) {\n\n\t\t\t\treturn object;\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn undefined;\n\n\t},\n\n\tgetWorldPosition: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldPosition() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\treturn target.setFromMatrixPosition( this.matrixWorld );\n\n\t},\n\n\tgetWorldQuaternion: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldQuaternion() target is now required' );\n\t\t\ttarget = new Quaternion();\n\n\t\t}\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\tthis.matrixWorld.decompose( _position, target, _scale );\n\n\t\treturn target;\n\n\t},\n\n\tgetWorldScale: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldScale() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\tthis.matrixWorld.decompose( _position, _quaternion, target );\n\n\t\treturn target;\n\n\t},\n\n\tgetWorldDirection: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Object3D: .getWorldDirection() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tthis.updateMatrixWorld( true );\n\n\t\tvar e = this.matrixWorld.elements;\n\n\t\treturn target.set( e[ 8 ], e[ 9 ], e[ 10 ] ).normalize();\n\n\t},\n\n\traycast: function () {},\n\n\ttraverse: function ( callback ) {\n\n\t\tcallback( this );\n\n\t\tvar children = this.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].traverse( callback );\n\n\t\t}\n\n\t},\n\n\ttraverseVisible: function ( callback ) {\n\n\t\tif ( this.visible === false ) return;\n\n\t\tcallback( this );\n\n\t\tvar children = this.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].traverseVisible( callback );\n\n\t\t}\n\n\t},\n\n\ttraverseAncestors: function ( callback ) {\n\n\t\tvar parent = this.parent;\n\n\t\tif ( parent !== null ) {\n\n\t\t\tcallback( parent );\n\n\t\t\tparent.traverseAncestors( callback );\n\n\t\t}\n\n\t},\n\n\tupdateMatrix: function () {\n\n\t\tthis.matrix.compose( this.position, this.quaternion, this.scale );\n\n\t\tthis.matrixWorldNeedsUpdate = true;\n\n\t},\n\n\tupdateMatrixWorld: function ( force ) {\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tif ( this.matrixWorldNeedsUpdate || force ) {\n\n\t\t\tif ( this.parent === null ) {\n\n\t\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t\t} else {\n\n\t\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t\t}\n\n\t\t\tthis.matrixWorldNeedsUpdate = false;\n\n\t\t\tforce = true;\n\n\t\t}\n\n\t\t// update children\n\n\t\tvar children = this.children;\n\n\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\tchildren[ i ].updateMatrixWorld( force );\n\n\t\t}\n\n\t},\n\n\tupdateWorldMatrix: function ( updateParents, updateChildren ) {\n\n\t\tvar parent = this.parent;\n\n\t\tif ( updateParents === true && parent !== null ) {\n\n\t\t\tparent.updateWorldMatrix( true, false );\n\n\t\t}\n\n\t\tif ( this.matrixAutoUpdate ) this.updateMatrix();\n\n\t\tif ( this.parent === null ) {\n\n\t\t\tthis.matrixWorld.copy( this.matrix );\n\n\t\t} else {\n\n\t\t\tthis.matrixWorld.multiplyMatrices( this.parent.matrixWorld, this.matrix );\n\n\t\t}\n\n\t\t// update children\n\n\t\tif ( updateChildren === true ) {\n\n\t\t\tvar children = this.children;\n\n\t\t\tfor ( var i = 0, l = children.length; i < l; i ++ ) {\n\n\t\t\t\tchildren[ i ].updateWorldMatrix( false, true );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\t// meta is a string when called from JSON.stringify\n\t\tvar isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tvar output = {};\n\n\t\t// meta is a hash used to collect geometries, materials.\n\t\t// not providing it implies that this is the root object\n\t\t// being serialized.\n\t\tif ( isRootObject ) {\n\n\t\t\t// initialize meta obj\n\t\t\tmeta = {\n\t\t\t\tgeometries: {},\n\t\t\t\tmaterials: {},\n\t\t\t\ttextures: {},\n\t\t\t\timages: {},\n\t\t\t\tshapes: {}\n\t\t\t};\n\n\t\t\toutput.metadata = {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Object',\n\t\t\t\tgenerator: 'Object3D.toJSON'\n\t\t\t};\n\n\t\t}\n\n\t\t// standard Object3D serialization\n\n\t\tvar object = {};\n\n\t\tobject.uuid = this.uuid;\n\t\tobject.type = this.type;\n\n\t\tif ( this.name !== '' ) object.name = this.name;\n\t\tif ( this.castShadow === true ) object.castShadow = true;\n\t\tif ( this.receiveShadow === true ) object.receiveShadow = true;\n\t\tif ( this.visible === false ) object.visible = false;\n\t\tif ( this.frustumCulled === false ) object.frustumCulled = false;\n\t\tif ( this.renderOrder !== 0 ) object.renderOrder = this.renderOrder;\n\t\tif ( JSON.stringify( this.userData ) !== '{}' ) object.userData = this.userData;\n\n\t\tobject.layers = this.layers.mask;\n\t\tobject.matrix = this.matrix.toArray();\n\n\t\tif ( this.matrixAutoUpdate === false ) object.matrixAutoUpdate = false;\n\n\t\t// object specific properties\n\n\t\tif ( this.isInstancedMesh ) {\n\n\t\t\tobject.type = 'InstancedMesh';\n\t\t\tobject.count = this.count;\n\t\t\tobject.instanceMatrix = this.instanceMatrix.toJSON();\n\n\t\t}\n\n\t\t//\n\n\t\tfunction serialize( library, element ) {\n\n\t\t\tif ( library[ element.uuid ] === undefined ) {\n\n\t\t\t\tlibrary[ element.uuid ] = element.toJSON( meta );\n\n\t\t\t}\n\n\t\t\treturn element.uuid;\n\n\t\t}\n\n\t\tif ( this.isMesh || this.isLine || this.isPoints ) {\n\n\t\t\tobject.geometry = serialize( meta.geometries, this.geometry );\n\n\t\t\tvar parameters = this.geometry.parameters;\n\n\t\t\tif ( parameters !== undefined && parameters.shapes !== undefined ) {\n\n\t\t\t\tvar shapes = parameters.shapes;\n\n\t\t\t\tif ( Array.isArray( shapes ) ) {\n\n\t\t\t\t\tfor ( var i = 0, l = shapes.length; i < l; i ++ ) {\n\n\t\t\t\t\t\tvar shape = shapes[ i ];\n\n\t\t\t\t\t\tserialize( meta.shapes, shape );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\tserialize( meta.shapes, shapes );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.material !== undefined ) {\n\n\t\t\tif ( Array.isArray( this.material ) ) {\n\n\t\t\t\tvar uuids = [];\n\n\t\t\t\tfor ( var i = 0, l = this.material.length; i < l; i ++ ) {\n\n\t\t\t\t\tuuids.push( serialize( meta.materials, this.material[ i ] ) );\n\n\t\t\t\t}\n\n\t\t\t\tobject.material = uuids;\n\n\t\t\t} else {\n\n\t\t\t\tobject.material = serialize( meta.materials, this.material );\n\n\t\t\t}\n\n\t\t}\n\n\t\t//\n\n\t\tif ( this.children.length > 0 ) {\n\n\t\t\tobject.children = [];\n\n\t\t\tfor ( var i = 0; i < this.children.length; i ++ ) {\n\n\t\t\t\tobject.children.push( this.children[ i ].toJSON( meta ).object );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( isRootObject ) {\n\n\t\t\tvar geometries = extractFromCache( meta.geometries );\n\t\t\tvar materials = extractFromCache( meta.materials );\n\t\t\tvar textures = extractFromCache( meta.textures );\n\t\t\tvar images = extractFromCache( meta.images );\n\t\t\tvar shapes = extractFromCache( meta.shapes );\n\n\t\t\tif ( geometries.length > 0 ) output.geometries = geometries;\n\t\t\tif ( materials.length > 0 ) output.materials = materials;\n\t\t\tif ( textures.length > 0 ) output.textures = textures;\n\t\t\tif ( images.length > 0 ) output.images = images;\n\t\t\tif ( shapes.length > 0 ) output.shapes = shapes;\n\n\t\t}\n\n\t\toutput.object = object;\n\n\t\treturn output;\n\n\t\t// extract data from the cache hash\n\t\t// remove metadata on each item\n\t\t// and return as array\n\t\tfunction extractFromCache( cache ) {\n\n\t\t\tvar values = [];\n\t\t\tfor ( var key in cache ) {\n\n\t\t\t\tvar data = cache[ key ];\n\t\t\t\tdelete data.metadata;\n\t\t\t\tvalues.push( data );\n\n\t\t\t}\n\t\t\treturn values;\n\n\t\t}\n\n\t},\n\n\tclone: function ( recursive ) {\n\n\t\treturn new this.constructor().copy( this, recursive );\n\n\t},\n\n\tcopy: function ( source, recursive ) {\n\n\t\tif ( recursive === undefined ) recursive = true;\n\n\t\tthis.name = source.name;\n\n\t\tthis.up.copy( source.up );\n\n\t\tthis.position.copy( source.position );\n\t\tthis.quaternion.copy( source.quaternion );\n\t\tthis.scale.copy( source.scale );\n\n\t\tthis.matrix.copy( source.matrix );\n\t\tthis.matrixWorld.copy( source.matrixWorld );\n\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\t\tthis.matrixWorldNeedsUpdate = source.matrixWorldNeedsUpdate;\n\n\t\tthis.layers.mask = source.layers.mask;\n\t\tthis.visible = source.visible;\n\n\t\tthis.castShadow = source.castShadow;\n\t\tthis.receiveShadow = source.receiveShadow;\n\n\t\tthis.frustumCulled = source.frustumCulled;\n\t\tthis.renderOrder = source.renderOrder;\n\n\t\tthis.userData = JSON.parse( JSON.stringify( source.userData ) );\n\n\t\tif ( recursive === true ) {\n\n\t\t\tfor ( var i = 0; i < source.children.length; i ++ ) {\n\n\t\t\t\tvar child = source.children[ i ];\n\t\t\t\tthis.add( child.clone() );\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Object3D };\n","var Symbol = require('./_Symbol'),\n    getRawTag = require('./_getRawTag'),\n    objectToString = require('./_objectToString');\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nmodule.exports = baseGetTag;\n","/**\n * Creates an array with all falsey values removed. The values `false`, `null`,\n * `0`, `\"\"`, `undefined`, and `NaN` are falsey.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to compact.\n * @returns {Array} Returns the new array of filtered values.\n * @example\n *\n * _.compact([0, 1, false, 2, '', 3]);\n * // => [1, 2, 3]\n */\nfunction compact(array) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (value) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = compact;\n","import {MathUtils} from 'three/src/math/MathUtils';\n\nexport interface RampPointJson {\n\tposition: number;\n\tvalue: number;\n}\nexport interface RampValueJson {\n\tpoints: RampPointJson[];\n\tinterpolation: string;\n}\n\nexport class RampPoint {\n\tconstructor(private _position: number = 0, private _value: number = 0) {}\n\n\tto_json(): RampPointJson {\n\t\treturn {\n\t\t\tposition: this._position,\n\t\t\tvalue: this._value,\n\t\t};\n\t}\n\tget position() {\n\t\treturn this._position;\n\t}\n\tget value() {\n\t\treturn this._value;\n\t}\n\tcopy(point: RampPoint) {\n\t\tthis._position = point.position;\n\t\tthis._value = point.value;\n\t}\n\tclone() {\n\t\tconst point = new RampPoint();\n\t\tpoint.copy(this);\n\t\treturn point;\n\t}\n\tis_equal(other_point: RampPoint) {\n\t\treturn this._position == other_point.position && this._value == other_point.value;\n\t}\n\tis_equal_json(json: RampPointJson) {\n\t\treturn this._position == json.position && this._value == json.value;\n\t}\n\tfrom_json(json: RampPointJson) {\n\t\tthis._position = json.position;\n\t\tthis._value = json.value;\n\t}\n\tstatic are_equal_json(json1: RampPointJson, json2: RampPointJson) {\n\t\treturn json1.position == json2.position && json1.value == json2.value;\n\t}\n\tstatic from_json(json: RampPointJson) {\n\t\treturn new RampPoint(json.position, json.value);\n\t}\n}\n\nexport enum RampInterpolation {\n\tLINEAR = 'linear',\n}\nexport class RampValue {\n\tprivate _uuid: string;\n\n\tconstructor(private _interpolation: string = RampInterpolation.LINEAR, private _points: RampPoint[] = []) {\n\t\tthis._uuid = MathUtils.generateUUID();\n\t}\n\n\tget uuid() {\n\t\treturn this._uuid;\n\t}\n\tget interpolation() {\n\t\treturn this._interpolation;\n\t}\n\tget points() {\n\t\treturn this._points;\n\t}\n\tstatic from_json(json: RampValueJson): RampValue {\n\t\tconst points = [];\n\t\tfor (let json_point of json.points) {\n\t\t\tpoints.push(RampPoint.from_json(json_point));\n\t\t}\n\t\treturn new RampValue(json.interpolation, points);\n\t}\n\tto_json(): RampValueJson {\n\t\treturn {\n\t\t\tinterpolation: this._interpolation,\n\t\t\tpoints: this._points.map((p) => p.to_json()),\n\t\t};\n\t}\n\tclone(): RampValue {\n\t\tconst ramp = new RampValue();\n\t\tramp.copy(this);\n\t\treturn ramp;\n\t}\n\tcopy(ramp: RampValue) {\n\t\tthis._interpolation = ramp.interpolation;\n\t\tlet index = 0;\n\t\tfor (let point of ramp.points) {\n\t\t\tconst current_point = this._points[index];\n\t\t\tif (current_point) {\n\t\t\t\tcurrent_point.copy(point);\n\t\t\t} else {\n\t\t\t\tthis._points.push(point.clone());\n\t\t\t}\n\t\t\tindex += 1;\n\t\t}\n\t}\n\n\tis_equal(other_ramp_value: RampValue): boolean {\n\t\tif (this._interpolation != other_ramp_value.interpolation) {\n\t\t\treturn false;\n\t\t}\n\t\tconst other_points = other_ramp_value.points;\n\t\tif (this._points.length != other_points.length) {\n\t\t\treturn false;\n\t\t}\n\t\tlet index = 0;\n\t\tfor (let point of this._points) {\n\t\t\tconst other_point = other_points[index];\n\t\t\tif (!point.is_equal(other_point)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tindex += 1;\n\t\t}\n\n\t\treturn true;\n\t}\n\tis_equal_json(json: RampValueJson) {\n\t\tif (this._interpolation != json.interpolation) {\n\t\t\treturn false;\n\t\t}\n\t\tif (this._points.length != json.points.length) {\n\t\t\treturn false;\n\t\t}\n\t\tlet index = 0;\n\t\tfor (let point of this._points) {\n\t\t\tconst other_point = json.points[index];\n\t\t\tif (!point.is_equal_json(other_point)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tindex += 1;\n\t\t}\n\t\treturn true;\n\t}\n\tstatic are_json_equal(json1: RampValueJson, json2: RampValueJson) {\n\t\tif (json1.interpolation != json2.interpolation) {\n\t\t\treturn false;\n\t\t}\n\t\tif (json1.points.length != json2.points.length) {\n\t\t\treturn false;\n\t\t}\n\t\tlet index = 0;\n\t\tfor (let point1 of json1.points) {\n\t\t\tconst point2 = json2.points[index];\n\t\t\tif (!RampPoint.are_equal_json(point1, point2)) {\n\t\t\t\treturn false;\n\t\t\t}\n\t\t\tindex += 1;\n\t\t}\n\t\treturn true;\n\t}\n\tfrom_json(json: RampValueJson) {\n\t\tthis._interpolation = json.interpolation;\n\n\t\tlet index = 0;\n\t\tfor (let json_point of json.points) {\n\t\t\tconst current_point = this._points[index];\n\t\t\tif (current_point) {\n\t\t\t\tcurrent_point.from_json(json_point);\n\t\t\t} else {\n\t\t\t\tthis._points.push(RampPoint.from_json(json_point));\n\t\t\t}\n\t\t\tindex += 1;\n\t\t}\n\t}\n}\n","import lodash_sortBy from 'lodash/sortBy';\n// import lodash_isArray from 'lodash/isArray'\n// import lodash_isString from 'lodash/isString'\nimport {RGBFormat} from 'three/src/constants';\nimport {DataTexture} from 'three/src/textures/DataTexture';\nimport {CubicInterpolant} from 'three/src/math/interpolants/CubicInterpolant';\n// import {ClampToEdgeWrapping} from 'three/src/constants'\n// import {TypedParamVisitor} from './_Base';\nimport {TypedParam} from './_Base';\nimport {RampValue, RampPoint, RampValueJson, RampInterpolation} from './ramp/RampValue';\n\n// import {AsCodeRamp} from './concerns/visitors/Ramp';\nimport {ParamType} from '../poly/ParamType';\nimport {ParamInitValuesTypeMap} from './types/ParamInitValuesTypeMap';\nimport {ParamValuesTypeMap} from './types/ParamValuesTypeMap';\nimport {ParamEvent} from '../poly/ParamEvent';\n\n// interface RampParamVisitor extends TypedParamVisitor {\n// \tvisit_ramp_param: (param: RampParam) => any;\n// }\n\nexport class RampParam extends TypedParam<ParamType.RAMP> {\n\tstatic type() {\n\t\treturn ParamType.RAMP;\n\t}\n\n\tprivate _ramp_interpolant: CubicInterpolant | undefined;\n\tprivate _ramp_texture: DataTexture | undefined;\n\n\tstatic DEFAULT_VALUE = new RampValue(RampInterpolation.LINEAR, [new RampPoint(0, 0), new RampPoint(1, 1)]);\n\tstatic DEFAULT_VALUE_JSON: RampValueJson = RampParam.DEFAULT_VALUE.to_json();\n\n\tget default_value_serialized() {\n\t\tif (this.default_value instanceof RampValue) {\n\t\t\treturn this.default_value.to_json();\n\t\t} else {\n\t\t\treturn this.default_value;\n\t\t}\n\t}\n\tprotected _clone_raw_input(raw_input: ParamInitValuesTypeMap[ParamType.RAMP]) {\n\t\tif (raw_input instanceof RampValue) {\n\t\t\treturn raw_input.clone();\n\t\t} else {\n\t\t\treturn RampValue.from_json(raw_input).to_json();\n\t\t}\n\t}\n\tget raw_input_serialized() {\n\t\tif (this._raw_input instanceof RampValue) {\n\t\t\treturn this._raw_input.to_json();\n\t\t} else {\n\t\t\treturn RampValue.from_json(this._raw_input).to_json();\n\t\t}\n\t}\n\tget value_serialized() {\n\t\treturn this.value.to_json();\n\t}\n\tstatic are_raw_input_equal(\n\t\traw_input1: ParamInitValuesTypeMap[ParamType.RAMP],\n\t\traw_input2: ParamInitValuesTypeMap[ParamType.RAMP]\n\t) {\n\t\tif (raw_input1 instanceof RampValue) {\n\t\t\tif (raw_input2 instanceof RampValue) {\n\t\t\t\treturn raw_input1.is_equal(raw_input2);\n\t\t\t} else {\n\t\t\t\treturn raw_input1.is_equal_json(raw_input2);\n\t\t\t}\n\t\t} else {\n\t\t\tif (raw_input2 instanceof RampValue) {\n\t\t\t\treturn raw_input2.is_equal_json(raw_input1);\n\t\t\t} else {\n\t\t\t\treturn RampValue.are_json_equal(raw_input1, raw_input2);\n\t\t\t}\n\t\t}\n\t}\n\tstatic are_values_equal(val1: ParamValuesTypeMap[ParamType.RAMP], val2: ParamValuesTypeMap[ParamType.RAMP]) {\n\t\treturn val1.is_equal(val2);\n\t}\n\tprivate _reset_ramp_interpolant_and_texture_bound = this._reset_ramp_interpolant_and_texture.bind(this);\n\tinitialize_param() {\n\t\tthis.add_post_dirty_hook('_reset_ramp_interpolant_and_texture', this._reset_ramp_interpolant_and_texture_bound);\n\t}\n\t// accepts_visitor(visitor: RampParamVisitor) {\n\t// \treturn visitor.visit_ramp_param(this);\n\t// }\n\tget is_default(): boolean {\n\t\tif (this.default_value instanceof RampValue) {\n\t\t\treturn this.value.is_equal(this.default_value);\n\t\t} else {\n\t\t\treturn this.value.is_equal_json(this.default_value);\n\t\t}\n\t}\n\tprotected process_raw_input() {\n\t\tif (this._raw_input instanceof RampValue) {\n\t\t\tif (!this._value) {\n\t\t\t\tthis._value = this._raw_input;\n\t\t\t} else {\n\t\t\t\tthis._value.copy(this._raw_input);\n\t\t\t}\n\t\t} else {\n\t\t\tif (!this._value) {\n\t\t\t\tthis._value = RampValue.from_json(this._raw_input);\n\t\t\t} else {\n\t\t\t\tthis._value.from_json(this._raw_input);\n\t\t\t}\n\t\t}\n\n\t\tthis.emit_controller.emit(ParamEvent.VALUE_UPDATED);\n\t}\n\n\t// convert_value(v) {\n\t// \tlet is_json = false\n\n\t// \tif (lodash_isString(v)) {\n\t// \t\tv = JSON.parse(v)\n\t// \t\tis_json = true\n\t// \t}\n\n\t// \tif (!is_json) {\n\t// \t\tif (v.interpolation && v.points) {\n\t// \t\t\tif (lodash_isArray(v.points)) {\n\t// \t\t\t\tis_json = true\n\t// \t\t\t}\n\t// \t\t}\n\t// \t}\n\t// \tif (is_json) {\n\t// \t\tv = RampValue.from_json(v)\n\t// \t}\n\n\t// \treturn v\n\t// }\n\t// convert_default_value(v) {\n\t// \treturn this.convert_value(v)\n\t// }\n\n\thas_expression() {\n\t\treturn false;\n\t}\n\n\t_reset_ramp_interpolant_and_texture() {\n\t\tthis._ramp_interpolant = undefined;\n\t\tthis._ramp_texture = undefined;\n\t}\n\tramp_texture() {\n\t\treturn (this._ramp_texture = this._ramp_texture || this._create_ramp_texture());\n\t}\n\t_create_ramp_texture() {\n\t\tconst width = 1024;\n\t\tconst height = 1;\n\n\t\tconst size = width * height;\n\t\tconst data = new Uint8Array(3 * size);\n\n\t\tlet stride = 0;\n\t\tlet position = 0;\n\t\tlet value = 0;\n\t\tfor (var i = 0; i < size; i++) {\n\t\t\tstride = i * 3;\n\t\t\tposition = i / width;\n\t\t\tvalue = this.value_at_position(position);\n\t\t\tdata[stride] = value * 255; // if I set 256, a value of 1 will become 0\n\t\t\t// data[ stride+1 ] = 1\n\t\t\t// data[ stride+2 ] = 2\n\t\t}\n\n\t\tconst texture = new DataTexture(data, width, height, RGBFormat);\n\t\t// texture.wrapS = ClampToEdgeWrapping\n\t\t// texture.wrapT = ClampToEdgeWrapping\n\t\t// texture.wrapS = ClampToEdgeWrapping\n\t\t// texture.wrapT = ClampToEdgeWrapping\n\t\ttexture.needsUpdate = true;\n\t\treturn texture;\n\t}\n\n\tstatic create_interpolant(positions: Float32Array, values: Float32Array) {\n\t\tconst values_count = 1;\n\t\tconst interpolated_values = new Float32Array(values_count);\n\t\treturn new CubicInterpolant(positions, values, values_count, interpolated_values);\n\t}\n\tinterpolant() {\n\t\treturn (this._ramp_interpolant = this._ramp_interpolant || this._create_interpolant());\n\t}\n\t_create_interpolant() {\n\t\tconst points = this.value.points;\n\t\tconst sorted_points = lodash_sortBy(points, (point) => point.position);\n\t\tconst positions = new Float32Array(sorted_points.length);\n\t\tconst values = new Float32Array(sorted_points.length);\n\n\t\tlet i = 0;\n\t\tfor (let sorted_point of sorted_points) {\n\t\t\tpositions[i] = sorted_point.position;\n\t\t\tvalues[i] = sorted_point.value;\n\t\t\ti++;\n\t\t}\n\n\t\treturn RampParam.create_interpolant(positions, values);\n\t}\n\n\tvalue_at_position(position: number): number {\n\t\treturn (<unknown>this.interpolant().evaluate(position)[0]) as number;\n\t}\n}\n","import { Vector3 } from './Vector3.js';\n\nvar _v1 = new Vector3();\nvar _m1 = new Matrix4();\nvar _zero = new Vector3( 0, 0, 0 );\nvar _one = new Vector3( 1, 1, 1 );\nvar _x = new Vector3();\nvar _y = new Vector3();\nvar _z = new Vector3();\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author philogb / http://blog.thejit.org/\n * @author jordi_ros / http://plattsoft.com\n * @author D1plo1d / http://github.com/D1plo1d\n * @author alteredq / http://alteredqualia.com/\n * @author mikael emtinger / http://gomo.se/\n * @author timknip / http://www.floorplanner.com/\n * @author bhouston / http://clara.io\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction Matrix4() {\n\n\tthis.elements = [\n\n\t\t1, 0, 0, 0,\n\t\t0, 1, 0, 0,\n\t\t0, 0, 1, 0,\n\t\t0, 0, 0, 1\n\n\t];\n\n\tif ( arguments.length > 0 ) {\n\n\t\tconsole.error( 'THREE.Matrix4: the constructor no longer reads arguments. use .set() instead.' );\n\n\t}\n\n}\n\nObject.assign( Matrix4.prototype, {\n\n\tisMatrix4: true,\n\n\tset: function ( n11, n12, n13, n14, n21, n22, n23, n24, n31, n32, n33, n34, n41, n42, n43, n44 ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 4 ] = n12; te[ 8 ] = n13; te[ 12 ] = n14;\n\t\tte[ 1 ] = n21; te[ 5 ] = n22; te[ 9 ] = n23; te[ 13 ] = n24;\n\t\tte[ 2 ] = n31; te[ 6 ] = n32; te[ 10 ] = n33; te[ 14 ] = n34;\n\t\tte[ 3 ] = n41; te[ 7 ] = n42; te[ 11 ] = n43; te[ 15 ] = n44;\n\n\t\treturn this;\n\n\t},\n\n\tidentity: function () {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, 1, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new Matrix4().fromArray( this.elements );\n\n\t},\n\n\tcopy: function ( m ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ]; te[ 3 ] = me[ 3 ];\n\t\tte[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ]; te[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ];\n\t\tte[ 8 ] = me[ 8 ]; te[ 9 ] = me[ 9 ]; te[ 10 ] = me[ 10 ]; te[ 11 ] = me[ 11 ];\n\t\tte[ 12 ] = me[ 12 ]; te[ 13 ] = me[ 13 ]; te[ 14 ] = me[ 14 ]; te[ 15 ] = me[ 15 ];\n\n\t\treturn this;\n\n\t},\n\n\tcopyPosition: function ( m ) {\n\n\t\tvar te = this.elements, me = m.elements;\n\n\t\tte[ 12 ] = me[ 12 ];\n\t\tte[ 13 ] = me[ 13 ];\n\t\tte[ 14 ] = me[ 14 ];\n\n\t\treturn this;\n\n\t},\n\n\textractBasis: function ( xAxis, yAxis, zAxis ) {\n\n\t\txAxis.setFromMatrixColumn( this, 0 );\n\t\tyAxis.setFromMatrixColumn( this, 1 );\n\t\tzAxis.setFromMatrixColumn( this, 2 );\n\n\t\treturn this;\n\n\t},\n\n\tmakeBasis: function ( xAxis, yAxis, zAxis ) {\n\n\t\tthis.set(\n\t\t\txAxis.x, yAxis.x, zAxis.x, 0,\n\t\t\txAxis.y, yAxis.y, zAxis.y, 0,\n\t\t\txAxis.z, yAxis.z, zAxis.z, 0,\n\t\t\t0, 0, 0, 1\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\textractRotation: function ( m ) {\n\n\t\t// this method does not support reflection matrices\n\n\t\tvar te = this.elements;\n\t\tvar me = m.elements;\n\n\t\tvar scaleX = 1 / _v1.setFromMatrixColumn( m, 0 ).length();\n\t\tvar scaleY = 1 / _v1.setFromMatrixColumn( m, 1 ).length();\n\t\tvar scaleZ = 1 / _v1.setFromMatrixColumn( m, 2 ).length();\n\n\t\tte[ 0 ] = me[ 0 ] * scaleX;\n\t\tte[ 1 ] = me[ 1 ] * scaleX;\n\t\tte[ 2 ] = me[ 2 ] * scaleX;\n\t\tte[ 3 ] = 0;\n\n\t\tte[ 4 ] = me[ 4 ] * scaleY;\n\t\tte[ 5 ] = me[ 5 ] * scaleY;\n\t\tte[ 6 ] = me[ 6 ] * scaleY;\n\t\tte[ 7 ] = 0;\n\n\t\tte[ 8 ] = me[ 8 ] * scaleZ;\n\t\tte[ 9 ] = me[ 9 ] * scaleZ;\n\t\tte[ 10 ] = me[ 10 ] * scaleZ;\n\t\tte[ 11 ] = 0;\n\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationFromEuler: function ( euler ) {\n\n\t\tif ( ! ( euler && euler.isEuler ) ) {\n\n\t\t\tconsole.error( 'THREE.Matrix4: .makeRotationFromEuler() now expects a Euler rotation rather than a Vector3 and order.' );\n\n\t\t}\n\n\t\tvar te = this.elements;\n\n\t\tvar x = euler.x, y = euler.y, z = euler.z;\n\t\tvar a = Math.cos( x ), b = Math.sin( x );\n\t\tvar c = Math.cos( y ), d = Math.sin( y );\n\t\tvar e = Math.cos( z ), f = Math.sin( z );\n\n\t\tif ( euler.order === 'XYZ' ) {\n\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - c * f;\n\t\t\tte[ 8 ] = d;\n\n\t\t\tte[ 1 ] = af + be * d;\n\t\t\tte[ 5 ] = ae - bf * d;\n\t\t\tte[ 9 ] = - b * c;\n\n\t\t\tte[ 2 ] = bf - ae * d;\n\t\t\tte[ 6 ] = be + af * d;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YXZ' ) {\n\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce + df * b;\n\t\t\tte[ 4 ] = de * b - cf;\n\t\t\tte[ 8 ] = a * d;\n\n\t\t\tte[ 1 ] = a * f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b;\n\n\t\t\tte[ 2 ] = cf * b - de;\n\t\t\tte[ 6 ] = df + ce * b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZXY' ) {\n\n\t\t\tvar ce = c * e, cf = c * f, de = d * e, df = d * f;\n\n\t\t\tte[ 0 ] = ce - df * b;\n\t\t\tte[ 4 ] = - a * f;\n\t\t\tte[ 8 ] = de + cf * b;\n\n\t\t\tte[ 1 ] = cf + de * b;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = df - ce * b;\n\n\t\t\tte[ 2 ] = - a * d;\n\t\t\tte[ 6 ] = b;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'ZYX' ) {\n\n\t\t\tvar ae = a * e, af = a * f, be = b * e, bf = b * f;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = be * d - af;\n\t\t\tte[ 8 ] = ae * d + bf;\n\n\t\t\tte[ 1 ] = c * f;\n\t\t\tte[ 5 ] = bf * d + ae;\n\t\t\tte[ 9 ] = af * d - be;\n\n\t\t\tte[ 2 ] = - d;\n\t\t\tte[ 6 ] = b * c;\n\t\t\tte[ 10 ] = a * c;\n\n\t\t} else if ( euler.order === 'YZX' ) {\n\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = bd - ac * f;\n\t\t\tte[ 8 ] = bc * f + ad;\n\n\t\t\tte[ 1 ] = f;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = - b * e;\n\n\t\t\tte[ 2 ] = - d * e;\n\t\t\tte[ 6 ] = ad * f + bc;\n\t\t\tte[ 10 ] = ac - bd * f;\n\n\t\t} else if ( euler.order === 'XZY' ) {\n\n\t\t\tvar ac = a * c, ad = a * d, bc = b * c, bd = b * d;\n\n\t\t\tte[ 0 ] = c * e;\n\t\t\tte[ 4 ] = - f;\n\t\t\tte[ 8 ] = d * e;\n\n\t\t\tte[ 1 ] = ac * f + bd;\n\t\t\tte[ 5 ] = a * e;\n\t\t\tte[ 9 ] = ad * f - bc;\n\n\t\t\tte[ 2 ] = bc * f - ad;\n\t\t\tte[ 6 ] = b * e;\n\t\t\tte[ 10 ] = bd * f + ac;\n\n\t\t}\n\n\t\t// bottom row\n\t\tte[ 3 ] = 0;\n\t\tte[ 7 ] = 0;\n\t\tte[ 11 ] = 0;\n\n\t\t// last column\n\t\tte[ 12 ] = 0;\n\t\tte[ 13 ] = 0;\n\t\tte[ 14 ] = 0;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationFromQuaternion: function ( q ) {\n\n\t\treturn this.compose( _zero, q, _one );\n\n\t},\n\n\tlookAt: function ( eye, target, up ) {\n\n\t\tvar te = this.elements;\n\n\t\t_z.subVectors( eye, target );\n\n\t\tif ( _z.lengthSq() === 0 ) {\n\n\t\t\t// eye and target are in the same position\n\n\t\t\t_z.z = 1;\n\n\t\t}\n\n\t\t_z.normalize();\n\t\t_x.crossVectors( up, _z );\n\n\t\tif ( _x.lengthSq() === 0 ) {\n\n\t\t\t// up and z are parallel\n\n\t\t\tif ( Math.abs( up.z ) === 1 ) {\n\n\t\t\t\t_z.x += 0.0001;\n\n\t\t\t} else {\n\n\t\t\t\t_z.z += 0.0001;\n\n\t\t\t}\n\n\t\t\t_z.normalize();\n\t\t\t_x.crossVectors( up, _z );\n\n\t\t}\n\n\t\t_x.normalize();\n\t\t_y.crossVectors( _z, _x );\n\n\t\tte[ 0 ] = _x.x; te[ 4 ] = _y.x; te[ 8 ] = _z.x;\n\t\tte[ 1 ] = _x.y; te[ 5 ] = _y.y; te[ 9 ] = _z.y;\n\t\tte[ 2 ] = _x.z; te[ 6 ] = _y.z; te[ 10 ] = _z.z;\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( m, n ) {\n\n\t\tif ( n !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .multiply() now only accepts one argument. Use .multiplyMatrices( a, b ) instead.' );\n\t\t\treturn this.multiplyMatrices( m, n );\n\n\t\t}\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t},\n\n\tpremultiply: function ( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t},\n\n\tmultiplyMatrices: function ( a, b ) {\n\n\t\tvar ae = a.elements;\n\t\tvar be = b.elements;\n\t\tvar te = this.elements;\n\n\t\tvar a11 = ae[ 0 ], a12 = ae[ 4 ], a13 = ae[ 8 ], a14 = ae[ 12 ];\n\t\tvar a21 = ae[ 1 ], a22 = ae[ 5 ], a23 = ae[ 9 ], a24 = ae[ 13 ];\n\t\tvar a31 = ae[ 2 ], a32 = ae[ 6 ], a33 = ae[ 10 ], a34 = ae[ 14 ];\n\t\tvar a41 = ae[ 3 ], a42 = ae[ 7 ], a43 = ae[ 11 ], a44 = ae[ 15 ];\n\n\t\tvar b11 = be[ 0 ], b12 = be[ 4 ], b13 = be[ 8 ], b14 = be[ 12 ];\n\t\tvar b21 = be[ 1 ], b22 = be[ 5 ], b23 = be[ 9 ], b24 = be[ 13 ];\n\t\tvar b31 = be[ 2 ], b32 = be[ 6 ], b33 = be[ 10 ], b34 = be[ 14 ];\n\t\tvar b41 = be[ 3 ], b42 = be[ 7 ], b43 = be[ 11 ], b44 = be[ 15 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31 + a14 * b41;\n\t\tte[ 4 ] = a11 * b12 + a12 * b22 + a13 * b32 + a14 * b42;\n\t\tte[ 8 ] = a11 * b13 + a12 * b23 + a13 * b33 + a14 * b43;\n\t\tte[ 12 ] = a11 * b14 + a12 * b24 + a13 * b34 + a14 * b44;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31 + a24 * b41;\n\t\tte[ 5 ] = a21 * b12 + a22 * b22 + a23 * b32 + a24 * b42;\n\t\tte[ 9 ] = a21 * b13 + a22 * b23 + a23 * b33 + a24 * b43;\n\t\tte[ 13 ] = a21 * b14 + a22 * b24 + a23 * b34 + a24 * b44;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31 + a34 * b41;\n\t\tte[ 6 ] = a31 * b12 + a32 * b22 + a33 * b32 + a34 * b42;\n\t\tte[ 10 ] = a31 * b13 + a32 * b23 + a33 * b33 + a34 * b43;\n\t\tte[ 14 ] = a31 * b14 + a32 * b24 + a33 * b34 + a34 * b44;\n\n\t\tte[ 3 ] = a41 * b11 + a42 * b21 + a43 * b31 + a44 * b41;\n\t\tte[ 7 ] = a41 * b12 + a42 * b22 + a43 * b32 + a44 * b42;\n\t\tte[ 11 ] = a41 * b13 + a42 * b23 + a43 * b33 + a44 * b43;\n\t\tte[ 15 ] = a41 * b14 + a42 * b24 + a43 * b34 + a44 * b44;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 4 ] *= s; te[ 8 ] *= s; te[ 12 ] *= s;\n\t\tte[ 1 ] *= s; te[ 5 ] *= s; te[ 9 ] *= s; te[ 13 ] *= s;\n\t\tte[ 2 ] *= s; te[ 6 ] *= s; te[ 10 ] *= s; te[ 14 ] *= s;\n\t\tte[ 3 ] *= s; te[ 7 ] *= s; te[ 11 ] *= s; te[ 15 ] *= s;\n\n\t\treturn this;\n\n\t},\n\n\tdeterminant: function () {\n\n\t\tvar te = this.elements;\n\n\t\tvar n11 = te[ 0 ], n12 = te[ 4 ], n13 = te[ 8 ], n14 = te[ 12 ];\n\t\tvar n21 = te[ 1 ], n22 = te[ 5 ], n23 = te[ 9 ], n24 = te[ 13 ];\n\t\tvar n31 = te[ 2 ], n32 = te[ 6 ], n33 = te[ 10 ], n34 = te[ 14 ];\n\t\tvar n41 = te[ 3 ], n42 = te[ 7 ], n43 = te[ 11 ], n44 = te[ 15 ];\n\n\t\t//TODO: make this more efficient\n\t\t//( based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm )\n\n\t\treturn (\n\t\t\tn41 * (\n\t\t\t\t+ n14 * n23 * n32\n\t\t\t\t - n13 * n24 * n32\n\t\t\t\t - n14 * n22 * n33\n\t\t\t\t + n12 * n24 * n33\n\t\t\t\t + n13 * n22 * n34\n\t\t\t\t - n12 * n23 * n34\n\t\t\t) +\n\t\t\tn42 * (\n\t\t\t\t+ n11 * n23 * n34\n\t\t\t\t - n11 * n24 * n33\n\t\t\t\t + n14 * n21 * n33\n\t\t\t\t - n13 * n21 * n34\n\t\t\t\t + n13 * n24 * n31\n\t\t\t\t - n14 * n23 * n31\n\t\t\t) +\n\t\t\tn43 * (\n\t\t\t\t+ n11 * n24 * n32\n\t\t\t\t - n11 * n22 * n34\n\t\t\t\t - n14 * n21 * n32\n\t\t\t\t + n12 * n21 * n34\n\t\t\t\t + n14 * n22 * n31\n\t\t\t\t - n12 * n24 * n31\n\t\t\t) +\n\t\t\tn44 * (\n\t\t\t\t- n13 * n22 * n31\n\t\t\t\t - n11 * n23 * n32\n\t\t\t\t + n11 * n22 * n33\n\t\t\t\t + n13 * n21 * n32\n\t\t\t\t - n12 * n21 * n33\n\t\t\t\t + n12 * n23 * n31\n\t\t\t)\n\n\t\t);\n\n\t},\n\n\ttranspose: function () {\n\n\t\tvar te = this.elements;\n\t\tvar tmp;\n\n\t\ttmp = te[ 1 ]; te[ 1 ] = te[ 4 ]; te[ 4 ] = tmp;\n\t\ttmp = te[ 2 ]; te[ 2 ] = te[ 8 ]; te[ 8 ] = tmp;\n\t\ttmp = te[ 6 ]; te[ 6 ] = te[ 9 ]; te[ 9 ] = tmp;\n\n\t\ttmp = te[ 3 ]; te[ 3 ] = te[ 12 ]; te[ 12 ] = tmp;\n\t\ttmp = te[ 7 ]; te[ 7 ] = te[ 13 ]; te[ 13 ] = tmp;\n\t\ttmp = te[ 11 ]; te[ 11 ] = te[ 14 ]; te[ 14 ] = tmp;\n\n\t\treturn this;\n\n\t},\n\n\tsetPosition: function ( x, y, z ) {\n\n\t\tvar te = this.elements;\n\n\t\tif ( x.isVector3 ) {\n\n\t\t\tte[ 12 ] = x.x;\n\t\t\tte[ 13 ] = x.y;\n\t\t\tte[ 14 ] = x.z;\n\n\t\t} else {\n\n\t\t\tte[ 12 ] = x;\n\t\t\tte[ 13 ] = y;\n\t\t\tte[ 14 ] = z;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetInverse: function ( m, throwOnDegenerate ) {\n\n\t\tif ( throwOnDegenerate !== undefined ) {\n\n\t\t\tconsole.warn( \"THREE.Matrix4: .getInverse() can no longer be configured to throw on degenerate.\" );\n\n\t\t}\n\n\t\t// based on http://www.euclideanspace.com/maths/algebra/matrix/functions/inverse/fourD/index.htm\n\t\tvar te = this.elements,\n\t\t\tme = m.elements,\n\n\t\t\tn11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ], n41 = me[ 3 ],\n\t\t\tn12 = me[ 4 ], n22 = me[ 5 ], n32 = me[ 6 ], n42 = me[ 7 ],\n\t\t\tn13 = me[ 8 ], n23 = me[ 9 ], n33 = me[ 10 ], n43 = me[ 11 ],\n\t\t\tn14 = me[ 12 ], n24 = me[ 13 ], n34 = me[ 14 ], n44 = me[ 15 ],\n\n\t\t\tt11 = n23 * n34 * n42 - n24 * n33 * n42 + n24 * n32 * n43 - n22 * n34 * n43 - n23 * n32 * n44 + n22 * n33 * n44,\n\t\t\tt12 = n14 * n33 * n42 - n13 * n34 * n42 - n14 * n32 * n43 + n12 * n34 * n43 + n13 * n32 * n44 - n12 * n33 * n44,\n\t\t\tt13 = n13 * n24 * n42 - n14 * n23 * n42 + n14 * n22 * n43 - n12 * n24 * n43 - n13 * n22 * n44 + n12 * n23 * n44,\n\t\t\tt14 = n14 * n23 * n32 - n13 * n24 * n32 - n14 * n22 * n33 + n12 * n24 * n33 + n13 * n22 * n34 - n12 * n23 * n34;\n\n\t\tvar det = n11 * t11 + n21 * t12 + n31 * t13 + n41 * t14;\n\n\t\tif ( det === 0 ) return this.set( 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0 );\n\n\t\tvar detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n24 * n33 * n41 - n23 * n34 * n41 - n24 * n31 * n43 + n21 * n34 * n43 + n23 * n31 * n44 - n21 * n33 * n44 ) * detInv;\n\t\tte[ 2 ] = ( n22 * n34 * n41 - n24 * n32 * n41 + n24 * n31 * n42 - n21 * n34 * n42 - n22 * n31 * n44 + n21 * n32 * n44 ) * detInv;\n\t\tte[ 3 ] = ( n23 * n32 * n41 - n22 * n33 * n41 - n23 * n31 * n42 + n21 * n33 * n42 + n22 * n31 * n43 - n21 * n32 * n43 ) * detInv;\n\n\t\tte[ 4 ] = t12 * detInv;\n\t\tte[ 5 ] = ( n13 * n34 * n41 - n14 * n33 * n41 + n14 * n31 * n43 - n11 * n34 * n43 - n13 * n31 * n44 + n11 * n33 * n44 ) * detInv;\n\t\tte[ 6 ] = ( n14 * n32 * n41 - n12 * n34 * n41 - n14 * n31 * n42 + n11 * n34 * n42 + n12 * n31 * n44 - n11 * n32 * n44 ) * detInv;\n\t\tte[ 7 ] = ( n12 * n33 * n41 - n13 * n32 * n41 + n13 * n31 * n42 - n11 * n33 * n42 - n12 * n31 * n43 + n11 * n32 * n43 ) * detInv;\n\n\t\tte[ 8 ] = t13 * detInv;\n\t\tte[ 9 ] = ( n14 * n23 * n41 - n13 * n24 * n41 - n14 * n21 * n43 + n11 * n24 * n43 + n13 * n21 * n44 - n11 * n23 * n44 ) * detInv;\n\t\tte[ 10 ] = ( n12 * n24 * n41 - n14 * n22 * n41 + n14 * n21 * n42 - n11 * n24 * n42 - n12 * n21 * n44 + n11 * n22 * n44 ) * detInv;\n\t\tte[ 11 ] = ( n13 * n22 * n41 - n12 * n23 * n41 - n13 * n21 * n42 + n11 * n23 * n42 + n12 * n21 * n43 - n11 * n22 * n43 ) * detInv;\n\n\t\tte[ 12 ] = t14 * detInv;\n\t\tte[ 13 ] = ( n13 * n24 * n31 - n14 * n23 * n31 + n14 * n21 * n33 - n11 * n24 * n33 - n13 * n21 * n34 + n11 * n23 * n34 ) * detInv;\n\t\tte[ 14 ] = ( n14 * n22 * n31 - n12 * n24 * n31 - n14 * n21 * n32 + n11 * n24 * n32 + n12 * n21 * n34 - n11 * n22 * n34 ) * detInv;\n\t\tte[ 15 ] = ( n12 * n23 * n31 - n13 * n22 * n31 + n13 * n21 * n32 - n11 * n23 * n32 - n12 * n21 * n33 + n11 * n22 * n33 ) * detInv;\n\n\t\treturn this;\n\n\t},\n\n\tscale: function ( v ) {\n\n\t\tvar te = this.elements;\n\t\tvar x = v.x, y = v.y, z = v.z;\n\n\t\tte[ 0 ] *= x; te[ 4 ] *= y; te[ 8 ] *= z;\n\t\tte[ 1 ] *= x; te[ 5 ] *= y; te[ 9 ] *= z;\n\t\tte[ 2 ] *= x; te[ 6 ] *= y; te[ 10 ] *= z;\n\t\tte[ 3 ] *= x; te[ 7 ] *= y; te[ 11 ] *= z;\n\n\t\treturn this;\n\n\t},\n\n\tgetMaxScaleOnAxis: function () {\n\n\t\tvar te = this.elements;\n\n\t\tvar scaleXSq = te[ 0 ] * te[ 0 ] + te[ 1 ] * te[ 1 ] + te[ 2 ] * te[ 2 ];\n\t\tvar scaleYSq = te[ 4 ] * te[ 4 ] + te[ 5 ] * te[ 5 ] + te[ 6 ] * te[ 6 ];\n\t\tvar scaleZSq = te[ 8 ] * te[ 8 ] + te[ 9 ] * te[ 9 ] + te[ 10 ] * te[ 10 ];\n\n\t\treturn Math.sqrt( Math.max( scaleXSq, scaleYSq, scaleZSq ) );\n\n\t},\n\n\tmakeTranslation: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, x,\n\t\t\t0, 1, 0, y,\n\t\t\t0, 0, 1, z,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationX: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0, 0,\n\t\t\t0, c, - s, 0,\n\t\t\t0, s, c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationY: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\t c, 0, s, 0,\n\t\t\t 0, 1, 0, 0,\n\t\t\t- s, 0, c, 0,\n\t\t\t 0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationZ: function ( theta ) {\n\n\t\tvar c = Math.cos( theta ), s = Math.sin( theta );\n\n\t\tthis.set(\n\n\t\t\tc, - s, 0, 0,\n\t\t\ts, c, 0, 0,\n\t\t\t0, 0, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeRotationAxis: function ( axis, angle ) {\n\n\t\t// Based on http://www.gamedev.net/reference/articles/article1199.asp\n\n\t\tvar c = Math.cos( angle );\n\t\tvar s = Math.sin( angle );\n\t\tvar t = 1 - c;\n\t\tvar x = axis.x, y = axis.y, z = axis.z;\n\t\tvar tx = t * x, ty = t * y;\n\n\t\tthis.set(\n\n\t\t\ttx * x + c, tx * y - s * z, tx * z + s * y, 0,\n\t\t\ttx * y + s * z, ty * y + c, ty * z - s * x, 0,\n\t\t\ttx * z - s * y, ty * z + s * x, t * z * z + c, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\t return this;\n\n\t},\n\n\tmakeScale: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\tx, 0, 0, 0,\n\t\t\t0, y, 0, 0,\n\t\t\t0, 0, z, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmakeShear: function ( x, y, z ) {\n\n\t\tthis.set(\n\n\t\t\t1, y, z, 0,\n\t\t\tx, 1, z, 0,\n\t\t\tx, y, 1, 0,\n\t\t\t0, 0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tcompose: function ( position, quaternion, scale ) {\n\n\t\tvar te = this.elements;\n\n\t\tvar x = quaternion._x, y = quaternion._y, z = quaternion._z, w = quaternion._w;\n\t\tvar x2 = x + x,\ty2 = y + y, z2 = z + z;\n\t\tvar xx = x * x2, xy = x * y2, xz = x * z2;\n\t\tvar yy = y * y2, yz = y * z2, zz = z * z2;\n\t\tvar wx = w * x2, wy = w * y2, wz = w * z2;\n\n\t\tvar sx = scale.x, sy = scale.y, sz = scale.z;\n\n\t\tte[ 0 ] = ( 1 - ( yy + zz ) ) * sx;\n\t\tte[ 1 ] = ( xy + wz ) * sx;\n\t\tte[ 2 ] = ( xz - wy ) * sx;\n\t\tte[ 3 ] = 0;\n\n\t\tte[ 4 ] = ( xy - wz ) * sy;\n\t\tte[ 5 ] = ( 1 - ( xx + zz ) ) * sy;\n\t\tte[ 6 ] = ( yz + wx ) * sy;\n\t\tte[ 7 ] = 0;\n\n\t\tte[ 8 ] = ( xz + wy ) * sz;\n\t\tte[ 9 ] = ( yz - wx ) * sz;\n\t\tte[ 10 ] = ( 1 - ( xx + yy ) ) * sz;\n\t\tte[ 11 ] = 0;\n\n\t\tte[ 12 ] = position.x;\n\t\tte[ 13 ] = position.y;\n\t\tte[ 14 ] = position.z;\n\t\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tdecompose: function ( position, quaternion, scale ) {\n\n\t\tvar te = this.elements;\n\n\t\tvar sx = _v1.set( te[ 0 ], te[ 1 ], te[ 2 ] ).length();\n\t\tvar sy = _v1.set( te[ 4 ], te[ 5 ], te[ 6 ] ).length();\n\t\tvar sz = _v1.set( te[ 8 ], te[ 9 ], te[ 10 ] ).length();\n\n\t\t// if determine is negative, we need to invert one scale\n\t\tvar det = this.determinant();\n\t\tif ( det < 0 ) sx = - sx;\n\n\t\tposition.x = te[ 12 ];\n\t\tposition.y = te[ 13 ];\n\t\tposition.z = te[ 14 ];\n\n\t\t// scale the rotation part\n\t\t_m1.copy( this );\n\n\t\tvar invSX = 1 / sx;\n\t\tvar invSY = 1 / sy;\n\t\tvar invSZ = 1 / sz;\n\n\t\t_m1.elements[ 0 ] *= invSX;\n\t\t_m1.elements[ 1 ] *= invSX;\n\t\t_m1.elements[ 2 ] *= invSX;\n\n\t\t_m1.elements[ 4 ] *= invSY;\n\t\t_m1.elements[ 5 ] *= invSY;\n\t\t_m1.elements[ 6 ] *= invSY;\n\n\t\t_m1.elements[ 8 ] *= invSZ;\n\t\t_m1.elements[ 9 ] *= invSZ;\n\t\t_m1.elements[ 10 ] *= invSZ;\n\n\t\tquaternion.setFromRotationMatrix( _m1 );\n\n\t\tscale.x = sx;\n\t\tscale.y = sy;\n\t\tscale.z = sz;\n\n\t\treturn this;\n\n\t},\n\n\tmakePerspective: function ( left, right, top, bottom, near, far ) {\n\n\t\tif ( far === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Matrix4: .makePerspective() has been redefined and has a new signature. Please check the docs.' );\n\n\t\t}\n\n\t\tvar te = this.elements;\n\t\tvar x = 2 * near / ( right - left );\n\t\tvar y = 2 * near / ( top - bottom );\n\n\t\tvar a = ( right + left ) / ( right - left );\n\t\tvar b = ( top + bottom ) / ( top - bottom );\n\t\tvar c = - ( far + near ) / ( far - near );\n\t\tvar d = - 2 * far * near / ( far - near );\n\n\t\tte[ 0 ] = x;\tte[ 4 ] = 0;\tte[ 8 ] = a;\tte[ 12 ] = 0;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = y;\tte[ 9 ] = b;\tte[ 13 ] = 0;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = c;\tte[ 14 ] = d;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = - 1;\tte[ 15 ] = 0;\n\n\t\treturn this;\n\n\t},\n\n\tmakeOrthographic: function ( left, right, top, bottom, near, far ) {\n\n\t\tvar te = this.elements;\n\t\tvar w = 1.0 / ( right - left );\n\t\tvar h = 1.0 / ( top - bottom );\n\t\tvar p = 1.0 / ( far - near );\n\n\t\tvar x = ( right + left ) * w;\n\t\tvar y = ( top + bottom ) * h;\n\t\tvar z = ( far + near ) * p;\n\n\t\tte[ 0 ] = 2 * w;\tte[ 4 ] = 0;\tte[ 8 ] = 0;\tte[ 12 ] = - x;\n\t\tte[ 1 ] = 0;\tte[ 5 ] = 2 * h;\tte[ 9 ] = 0;\tte[ 13 ] = - y;\n\t\tte[ 2 ] = 0;\tte[ 6 ] = 0;\tte[ 10 ] = - 2 * p;\tte[ 14 ] = - z;\n\t\tte[ 3 ] = 0;\tte[ 7 ] = 0;\tte[ 11 ] = 0;\tte[ 15 ] = 1;\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( matrix ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = matrix.elements;\n\n\t\tfor ( var i = 0; i < 16; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tfor ( var i = 0; i < 16; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tvar te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\t\tarray[ offset + 9 ] = te[ 9 ];\n\t\tarray[ offset + 10 ] = te[ 10 ];\n\t\tarray[ offset + 11 ] = te[ 11 ];\n\n\t\tarray[ offset + 12 ] = te[ 12 ];\n\t\tarray[ offset + 13 ] = te[ 13 ];\n\t\tarray[ offset + 14 ] = te[ 14 ];\n\t\tarray[ offset + 15 ] = te[ 15 ];\n\n\t\treturn array;\n\n\t}\n\n} );\n\n\nexport { Matrix4 };\n","var baseUniq = require('./_baseUniq');\n\n/**\n * Creates a duplicate-free version of an array, using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons, in which only the first occurrence of each element\n * is kept. The order of result values is determined by the order they occur\n * in the array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @returns {Array} Returns the new duplicate free array.\n * @example\n *\n * _.uniq([2, 1, 2]);\n * // => [2, 1]\n */\nfunction uniq(array) {\n  return (array && array.length) ? baseUniq(array) : [];\n}\n\nmodule.exports = uniq;\n","var baseFlatten = require('./_baseFlatten'),\n    baseOrderBy = require('./_baseOrderBy'),\n    baseRest = require('./_baseRest'),\n    isIterateeCall = require('./_isIterateeCall');\n\n/**\n * Creates an array of elements, sorted in ascending order by the results of\n * running each element in a collection thru each iteratee. This method\n * performs a stable sort, that is, it preserves the original sort order of\n * equal elements. The iteratees are invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {...(Function|Function[])} [iteratees=[_.identity]]\n *  The iteratees to sort by.\n * @returns {Array} Returns the new sorted array.\n * @example\n *\n * var users = [\n *   { 'user': 'fred',   'age': 48 },\n *   { 'user': 'barney', 'age': 36 },\n *   { 'user': 'fred',   'age': 40 },\n *   { 'user': 'barney', 'age': 34 }\n * ];\n *\n * _.sortBy(users, [function(o) { return o.user; }]);\n * // => objects for [['barney', 36], ['barney', 34], ['fred', 48], ['fred', 40]]\n *\n * _.sortBy(users, ['user', 'age']);\n * // => objects for [['barney', 34], ['barney', 36], ['fred', 40], ['fred', 48]]\n */\nvar sortBy = baseRest(function(collection, iteratees) {\n  if (collection == null) {\n    return [];\n  }\n  var length = iteratees.length;\n  if (length > 1 && isIterateeCall(collection, iteratees[0], iteratees[1])) {\n    iteratees = [];\n  } else if (length > 2 && isIterateeCall(iteratees[0], iteratees[1], iteratees[2])) {\n    iteratees = [iteratees[0]];\n  }\n  return baseOrderBy(collection, baseFlatten(iteratees, 1), []);\n});\n\nmodule.exports = sortBy;\n","var baseIsNative = require('./_baseIsNative'),\n    getValue = require('./_getValue');\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nmodule.exports = getNative;\n","var baseToString = require('./_baseToString');\n\n/**\n * Converts `value` to a string. An empty string is returned for `null`\n * and `undefined` values. The sign of `-0` is preserved.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.toString(null);\n * // => ''\n *\n * _.toString(-0);\n * // => '-0'\n *\n * _.toString([1, 2, 3]);\n * // => '1,2,3'\n */\nfunction toString(value) {\n  return value == null ? '' : baseToString(value);\n}\n\nmodule.exports = toString;\n","export enum InputCloneMode {\n\tALWAYS = 'always',\n\tNEVER = 'never',\n\tFROM_NODE = 'from_node',\n}\n","export enum NodeContext {\n\tCOP = 'cop',\n\tEVENT = 'event',\n\tGL = 'gl',\n\tJS = 'js',\n\tMANAGER = 'managers',\n\tMAT = 'mat',\n\tOBJ = 'objects',\n\tSOP = 'sop',\n\tPOST = 'post',\n}\n\nexport interface NodeContextAndType {\n\tcontext: NodeContext;\n\ttype: string;\n}\n","/**\n * @author supereggbert / http://www.paulbrunt.co.uk/\n * @author philogb / http://blog.thejit.org/\n * @author mikael emtinger / http://gomo.se/\n * @author egraether / http://egraether.com/\n * @author WestLangley / http://github.com/WestLangley\n */\n\nfunction Vector4( x, y, z, w ) {\n\n\tthis.x = x || 0;\n\tthis.y = y || 0;\n\tthis.z = z || 0;\n\tthis.w = ( w !== undefined ) ? w : 1;\n\n}\n\nObject.defineProperties( Vector4.prototype, {\n\n\t\"width\": {\n\n\t\tget: function () {\n\n\t\t\treturn this.z;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis.z = value;\n\n\t\t}\n\n\t},\n\n\t\"height\": {\n\n\t\tget: function () {\n\n\t\t\treturn this.w;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis.w = value;\n\n\t\t}\n\n\t}\n\n} );\n\nObject.assign( Vector4.prototype, {\n\n\tisVector4: true,\n\n\tset: function ( x, y, z, w ) {\n\n\t\tthis.x = x;\n\t\tthis.y = y;\n\t\tthis.z = z;\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetScalar: function ( scalar ) {\n\n\t\tthis.x = scalar;\n\t\tthis.y = scalar;\n\t\tthis.z = scalar;\n\t\tthis.w = scalar;\n\n\t\treturn this;\n\n\t},\n\n\tsetX: function ( x ) {\n\n\t\tthis.x = x;\n\n\t\treturn this;\n\n\t},\n\n\tsetY: function ( y ) {\n\n\t\tthis.y = y;\n\n\t\treturn this;\n\n\t},\n\n\tsetZ: function ( z ) {\n\n\t\tthis.z = z;\n\n\t\treturn this;\n\n\t},\n\n\tsetW: function ( w ) {\n\n\t\tthis.w = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponent: function ( index, value ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: this.x = value; break;\n\t\t\tcase 1: this.y = value; break;\n\t\t\tcase 2: this.z = value; break;\n\t\t\tcase 3: this.w = value; break;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tgetComponent: function ( index ) {\n\n\t\tswitch ( index ) {\n\n\t\t\tcase 0: return this.x;\n\t\t\tcase 1: return this.y;\n\t\t\tcase 2: return this.z;\n\t\t\tcase 3: return this.w;\n\t\t\tdefault: throw new Error( 'index is out of range: ' + index );\n\n\t\t}\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this.x, this.y, this.z, this.w );\n\n\t},\n\n\tcopy: function ( v ) {\n\n\t\tthis.x = v.x;\n\t\tthis.y = v.y;\n\t\tthis.z = v.z;\n\t\tthis.w = ( v.w !== undefined ) ? v.w : 1;\n\n\t\treturn this;\n\n\t},\n\n\tadd: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: .add() now only accepts one argument. Use .addVectors( a, b ) instead.' );\n\t\t\treturn this.addVectors( v, w );\n\n\t\t}\n\n\t\tthis.x += v.x;\n\t\tthis.y += v.y;\n\t\tthis.z += v.z;\n\t\tthis.w += v.w;\n\n\t\treturn this;\n\n\t},\n\n\taddScalar: function ( s ) {\n\n\t\tthis.x += s;\n\t\tthis.y += s;\n\t\tthis.z += s;\n\t\tthis.w += s;\n\n\t\treturn this;\n\n\t},\n\n\taddVectors: function ( a, b ) {\n\n\t\tthis.x = a.x + b.x;\n\t\tthis.y = a.y + b.y;\n\t\tthis.z = a.z + b.z;\n\t\tthis.w = a.w + b.w;\n\n\t\treturn this;\n\n\t},\n\n\taddScaledVector: function ( v, s ) {\n\n\t\tthis.x += v.x * s;\n\t\tthis.y += v.y * s;\n\t\tthis.z += v.z * s;\n\t\tthis.w += v.w * s;\n\n\t\treturn this;\n\n\t},\n\n\tsub: function ( v, w ) {\n\n\t\tif ( w !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: .sub() now only accepts one argument. Use .subVectors( a, b ) instead.' );\n\t\t\treturn this.subVectors( v, w );\n\n\t\t}\n\n\t\tthis.x -= v.x;\n\t\tthis.y -= v.y;\n\t\tthis.z -= v.z;\n\t\tthis.w -= v.w;\n\n\t\treturn this;\n\n\t},\n\n\tsubScalar: function ( s ) {\n\n\t\tthis.x -= s;\n\t\tthis.y -= s;\n\t\tthis.z -= s;\n\t\tthis.w -= s;\n\n\t\treturn this;\n\n\t},\n\n\tsubVectors: function ( a, b ) {\n\n\t\tthis.x = a.x - b.x;\n\t\tthis.y = a.y - b.y;\n\t\tthis.z = a.z - b.z;\n\t\tthis.w = a.w - b.w;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( scalar ) {\n\n\t\tthis.x *= scalar;\n\t\tthis.y *= scalar;\n\t\tthis.z *= scalar;\n\t\tthis.w *= scalar;\n\n\t\treturn this;\n\n\t},\n\n\tapplyMatrix4: function ( m ) {\n\n\t\tvar x = this.x, y = this.y, z = this.z, w = this.w;\n\t\tvar e = m.elements;\n\n\t\tthis.x = e[ 0 ] * x + e[ 4 ] * y + e[ 8 ] * z + e[ 12 ] * w;\n\t\tthis.y = e[ 1 ] * x + e[ 5 ] * y + e[ 9 ] * z + e[ 13 ] * w;\n\t\tthis.z = e[ 2 ] * x + e[ 6 ] * y + e[ 10 ] * z + e[ 14 ] * w;\n\t\tthis.w = e[ 3 ] * x + e[ 7 ] * y + e[ 11 ] * z + e[ 15 ] * w;\n\n\t\treturn this;\n\n\t},\n\n\tdivideScalar: function ( scalar ) {\n\n\t\treturn this.multiplyScalar( 1 / scalar );\n\n\t},\n\n\tsetAxisAngleFromQuaternion: function ( q ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\n\n\t\t// q is assumed to be normalized\n\n\t\tthis.w = 2 * Math.acos( q.w );\n\n\t\tvar s = Math.sqrt( 1 - q.w * q.w );\n\n\t\tif ( s < 0.0001 ) {\n\n\t\t\tthis.x = 1;\n\t\t\tthis.y = 0;\n\t\t\tthis.z = 0;\n\n\t\t} else {\n\n\t\t\tthis.x = q.x / s;\n\t\t\tthis.y = q.y / s;\n\t\t\tthis.z = q.z / s;\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\tsetAxisAngleFromRotationMatrix: function ( m ) {\n\n\t\t// http://www.euclideanspace.com/maths/geometry/rotations/conversions/matrixToAngle/index.htm\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tvar angle, x, y, z,\t\t// variables for result\n\t\t\tepsilon = 0.01,\t\t// margin to allow for rounding errors\n\t\t\tepsilon2 = 0.1,\t\t// margin to distinguish between 0 and 180 degrees\n\n\t\t\tte = m.elements,\n\n\t\t\tm11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ],\n\t\t\tm21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ],\n\t\t\tm31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\tif ( ( Math.abs( m12 - m21 ) < epsilon ) &&\n\t\t     ( Math.abs( m13 - m31 ) < epsilon ) &&\n\t\t     ( Math.abs( m23 - m32 ) < epsilon ) ) {\n\n\t\t\t// singularity found\n\t\t\t// first check for identity matrix which must have +1 for all terms\n\t\t\t// in leading diagonal and zero in other terms\n\n\t\t\tif ( ( Math.abs( m12 + m21 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m13 + m31 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m23 + m32 ) < epsilon2 ) &&\n\t\t\t     ( Math.abs( m11 + m22 + m33 - 3 ) < epsilon2 ) ) {\n\n\t\t\t\t// this singularity is identity matrix so angle = 0\n\n\t\t\t\tthis.set( 1, 0, 0, 0 );\n\n\t\t\t\treturn this; // zero angle, arbitrary axis\n\n\t\t\t}\n\n\t\t\t// otherwise this singularity is angle = 180\n\n\t\t\tangle = Math.PI;\n\n\t\t\tvar xx = ( m11 + 1 ) / 2;\n\t\t\tvar yy = ( m22 + 1 ) / 2;\n\t\t\tvar zz = ( m33 + 1 ) / 2;\n\t\t\tvar xy = ( m12 + m21 ) / 4;\n\t\t\tvar xz = ( m13 + m31 ) / 4;\n\t\t\tvar yz = ( m23 + m32 ) / 4;\n\n\t\t\tif ( ( xx > yy ) && ( xx > zz ) ) {\n\n\t\t\t\t// m11 is the largest diagonal term\n\n\t\t\t\tif ( xx < epsilon ) {\n\n\t\t\t\t\tx = 0;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tx = Math.sqrt( xx );\n\t\t\t\t\ty = xy / x;\n\t\t\t\t\tz = xz / x;\n\n\t\t\t\t}\n\n\t\t\t} else if ( yy > zz ) {\n\n\t\t\t\t// m22 is the largest diagonal term\n\n\t\t\t\tif ( yy < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0;\n\t\t\t\t\tz = 0.707106781;\n\n\t\t\t\t} else {\n\n\t\t\t\t\ty = Math.sqrt( yy );\n\t\t\t\t\tx = xy / y;\n\t\t\t\t\tz = yz / y;\n\n\t\t\t\t}\n\n\t\t\t} else {\n\n\t\t\t\t// m33 is the largest diagonal term so base result on this\n\n\t\t\t\tif ( zz < epsilon ) {\n\n\t\t\t\t\tx = 0.707106781;\n\t\t\t\t\ty = 0.707106781;\n\t\t\t\t\tz = 0;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tz = Math.sqrt( zz );\n\t\t\t\t\tx = xz / z;\n\t\t\t\t\ty = yz / z;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.set( x, y, z, angle );\n\n\t\t\treturn this; // return 180 deg rotation\n\n\t\t}\n\n\t\t// as we have reached here there are no singularities so we can handle normally\n\n\t\tvar s = Math.sqrt( ( m32 - m23 ) * ( m32 - m23 ) +\n\t\t                   ( m13 - m31 ) * ( m13 - m31 ) +\n\t\t                   ( m21 - m12 ) * ( m21 - m12 ) ); // used to normalize\n\n\t\tif ( Math.abs( s ) < 0.001 ) s = 1;\n\n\t\t// prevent divide by zero, should not happen if matrix is orthogonal and should be\n\t\t// caught by singularity test above, but I've left it in just in case\n\n\t\tthis.x = ( m32 - m23 ) / s;\n\t\tthis.y = ( m13 - m31 ) / s;\n\t\tthis.z = ( m21 - m12 ) / s;\n\t\tthis.w = Math.acos( ( m11 + m22 + m33 - 1 ) / 2 );\n\n\t\treturn this;\n\n\t},\n\n\tmin: function ( v ) {\n\n\t\tthis.x = Math.min( this.x, v.x );\n\t\tthis.y = Math.min( this.y, v.y );\n\t\tthis.z = Math.min( this.z, v.z );\n\t\tthis.w = Math.min( this.w, v.w );\n\n\t\treturn this;\n\n\t},\n\n\tmax: function ( v ) {\n\n\t\tthis.x = Math.max( this.x, v.x );\n\t\tthis.y = Math.max( this.y, v.y );\n\t\tthis.z = Math.max( this.z, v.z );\n\t\tthis.w = Math.max( this.w, v.w );\n\n\t\treturn this;\n\n\t},\n\n\tclamp: function ( min, max ) {\n\n\t\t// assumes min < max, componentwise\n\n\t\tthis.x = Math.max( min.x, Math.min( max.x, this.x ) );\n\t\tthis.y = Math.max( min.y, Math.min( max.y, this.y ) );\n\t\tthis.z = Math.max( min.z, Math.min( max.z, this.z ) );\n\t\tthis.w = Math.max( min.w, Math.min( max.w, this.w ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampScalar: function ( minVal, maxVal ) {\n\n\t\tthis.x = Math.max( minVal, Math.min( maxVal, this.x ) );\n\t\tthis.y = Math.max( minVal, Math.min( maxVal, this.y ) );\n\t\tthis.z = Math.max( minVal, Math.min( maxVal, this.z ) );\n\t\tthis.w = Math.max( minVal, Math.min( maxVal, this.w ) );\n\n\t\treturn this;\n\n\t},\n\n\tclampLength: function ( min, max ) {\n\n\t\tvar length = this.length();\n\n\t\treturn this.divideScalar( length || 1 ).multiplyScalar( Math.max( min, Math.min( max, length ) ) );\n\n\t},\n\n\tfloor: function () {\n\n\t\tthis.x = Math.floor( this.x );\n\t\tthis.y = Math.floor( this.y );\n\t\tthis.z = Math.floor( this.z );\n\t\tthis.w = Math.floor( this.w );\n\n\t\treturn this;\n\n\t},\n\n\tceil: function () {\n\n\t\tthis.x = Math.ceil( this.x );\n\t\tthis.y = Math.ceil( this.y );\n\t\tthis.z = Math.ceil( this.z );\n\t\tthis.w = Math.ceil( this.w );\n\n\t\treturn this;\n\n\t},\n\n\tround: function () {\n\n\t\tthis.x = Math.round( this.x );\n\t\tthis.y = Math.round( this.y );\n\t\tthis.z = Math.round( this.z );\n\t\tthis.w = Math.round( this.w );\n\n\t\treturn this;\n\n\t},\n\n\troundToZero: function () {\n\n\t\tthis.x = ( this.x < 0 ) ? Math.ceil( this.x ) : Math.floor( this.x );\n\t\tthis.y = ( this.y < 0 ) ? Math.ceil( this.y ) : Math.floor( this.y );\n\t\tthis.z = ( this.z < 0 ) ? Math.ceil( this.z ) : Math.floor( this.z );\n\t\tthis.w = ( this.w < 0 ) ? Math.ceil( this.w ) : Math.floor( this.w );\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.x = - this.x;\n\t\tthis.y = - this.y;\n\t\tthis.z = - this.z;\n\t\tthis.w = - this.w;\n\n\t\treturn this;\n\n\t},\n\n\tdot: function ( v ) {\n\n\t\treturn this.x * v.x + this.y * v.y + this.z * v.z + this.w * v.w;\n\n\t},\n\n\tlengthSq: function () {\n\n\t\treturn this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w;\n\n\t},\n\n\tlength: function () {\n\n\t\treturn Math.sqrt( this.x * this.x + this.y * this.y + this.z * this.z + this.w * this.w );\n\n\t},\n\n\tmanhattanLength: function () {\n\n\t\treturn Math.abs( this.x ) + Math.abs( this.y ) + Math.abs( this.z ) + Math.abs( this.w );\n\n\t},\n\n\tnormalize: function () {\n\n\t\treturn this.divideScalar( this.length() || 1 );\n\n\t},\n\n\tsetLength: function ( length ) {\n\n\t\treturn this.normalize().multiplyScalar( length );\n\n\t},\n\n\tlerp: function ( v, alpha ) {\n\n\t\tthis.x += ( v.x - this.x ) * alpha;\n\t\tthis.y += ( v.y - this.y ) * alpha;\n\t\tthis.z += ( v.z - this.z ) * alpha;\n\t\tthis.w += ( v.w - this.w ) * alpha;\n\n\t\treturn this;\n\n\t},\n\n\tlerpVectors: function ( v1, v2, alpha ) {\n\n\t\treturn this.subVectors( v2, v1 ).multiplyScalar( alpha ).add( v1 );\n\n\t},\n\n\tequals: function ( v ) {\n\n\t\treturn ( ( v.x === this.x ) && ( v.y === this.y ) && ( v.z === this.z ) && ( v.w === this.w ) );\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tthis.x = array[ offset ];\n\t\tthis.y = array[ offset + 1 ];\n\t\tthis.z = array[ offset + 2 ];\n\t\tthis.w = array[ offset + 3 ];\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this.x;\n\t\tarray[ offset + 1 ] = this.y;\n\t\tarray[ offset + 2 ] = this.z;\n\t\tarray[ offset + 3 ] = this.w;\n\n\t\treturn array;\n\n\t},\n\n\tfromBufferAttribute: function ( attribute, index, offset ) {\n\n\t\tif ( offset !== undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Vector4: offset has been removed from .fromBufferAttribute().' );\n\n\t\t}\n\n\t\tthis.x = attribute.getX( index );\n\t\tthis.y = attribute.getY( index );\n\t\tthis.z = attribute.getZ( index );\n\t\tthis.w = attribute.getW( index );\n\n\t\treturn this;\n\n\t}\n\n} );\n\n\nexport { Vector4 };\n","import {BaseContainer, TypedContainer} from '../../containers/_Base';\nimport {BaseNodeType} from '../_Base';\n\ntype Callback<T extends TypedContainer<any>> = (container: T | undefined) => void;\n\nexport class TypedContainerController<T extends TypedContainer<any>> {\n\tprivate _callbacks: Callback<T>[] = [];\n\tprotected _container: T;\n\n\tconstructor(protected node: BaseNodeType, container_class: typeof BaseContainer) {\n\t\tthis._container = new container_class(this.node) as T;\n\t}\n\n\tget container() {\n\t\treturn this._container;\n\t}\n\n\trequest_container(): Promise<T> {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis._callbacks.push(resolve);\n\t\t\tthis.node.scene.cook_controller.add_node(this.node);\n\n\t\t\t// const cooker = this.node.scene.cooker;\n\t\t\t// if (cooker.blocked()) {\n\t\t\t// \tcooker.enqueue(this.node);\n\t\t\t// } else {\n\t\t\tsetTimeout(this.process_container_request.bind(this), 0);\n\t\t\t// }\n\t\t});\n\t}\n\n\tprocess_container_request() {\n\t\tif (this.node.flags?.bypass?.active) {\n\t\t\tconst input_index = 0;\n\t\t\tthis.request_input_container(input_index).then((container) => {\n\t\t\t\tthis.node.remove_dirty_state();\n\t\t\t\tif (container) {\n\t\t\t\t\tthis.notify_requesters(container);\n\t\t\t\t} else {\n\t\t\t\t\tthis.node.states.error.set('input invalid');\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\tif (this.node.is_dirty) {\n\t\t\t\tthis.node.container_controller.container.reset_caches();\n\t\t\t\tthis.node.cook_controller.cook_main();\n\t\t\t} else {\n\t\t\t\tthis.notify_requesters();\n\t\t\t}\n\t\t}\n\t}\n\n\tasync request_input_container(input_index: number) {\n\t\tconst input_node = this.node.io.inputs.input(input_index);\n\t\tif (input_node) {\n\t\t\tinput_node.processing_context.copy(this.node.processing_context);\n\t\t\tconst container = await input_node.container_controller.request_container();\n\t\t\treturn container;\n\t\t} else {\n\t\t\tthis.node.states.error.set(`input ${input_index} required`);\n\t\t\tthis.notify_requesters();\n\t\t\treturn null;\n\t\t}\n\t}\n\tnotify_requesters(container?: T) {\n\t\t// make a copy of the callbacks first,\n\t\t// to ensure that new ones are not added to this list\n\t\t// in side effects from those callbacks\n\t\t// (the test suite for the File SOP is a good test for this)\n\t\tlet callback;\n\t\tconst callbacks = [];\n\t\twhile ((callback = this._callbacks.pop())) {\n\t\t\tcallbacks.push(callback);\n\t\t}\n\n\t\tif (!container) {\n\t\t\tcontainer = this.node.container_controller.container.clone();\n\t\t}\n\t\t// removing the clone, as this seems to defeat the no cloning of inputs\n\t\t// container = container || this._container\n\t\twhile ((callback = callbacks.pop())) {\n\t\t\tcallback(container);\n\t\t}\n\t\tthis.node.scene.cook_controller.remove_node(this.node);\n\t}\n}\n\nexport class BaseContainerController extends TypedContainerController<any> {}\n","/**\n * @author alteredq / http://alteredqualia.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://clara.io\n * @author tschw\n */\n\nfunction Matrix3() {\n\n\tthis.elements = [\n\n\t\t1, 0, 0,\n\t\t0, 1, 0,\n\t\t0, 0, 1\n\n\t];\n\n\tif ( arguments.length > 0 ) {\n\n\t\tconsole.error( 'THREE.Matrix3: the constructor no longer reads arguments. use .set() instead.' );\n\n\t}\n\n}\n\nObject.assign( Matrix3.prototype, {\n\n\tisMatrix3: true,\n\n\tset: function ( n11, n12, n13, n21, n22, n23, n31, n32, n33 ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] = n11; te[ 1 ] = n21; te[ 2 ] = n31;\n\t\tte[ 3 ] = n12; te[ 4 ] = n22; te[ 5 ] = n32;\n\t\tte[ 6 ] = n13; te[ 7 ] = n23; te[ 8 ] = n33;\n\n\t\treturn this;\n\n\t},\n\n\tidentity: function () {\n\n\t\tthis.set(\n\n\t\t\t1, 0, 0,\n\t\t\t0, 1, 0,\n\t\t\t0, 0, 1\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().fromArray( this.elements );\n\n\t},\n\n\tcopy: function ( m ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = m.elements;\n\n\t\tte[ 0 ] = me[ 0 ]; te[ 1 ] = me[ 1 ]; te[ 2 ] = me[ 2 ];\n\t\tte[ 3 ] = me[ 3 ]; te[ 4 ] = me[ 4 ]; te[ 5 ] = me[ 5 ];\n\t\tte[ 6 ] = me[ 6 ]; te[ 7 ] = me[ 7 ]; te[ 8 ] = me[ 8 ];\n\n\t\treturn this;\n\n\t},\n\n\textractBasis: function ( xAxis, yAxis, zAxis ) {\n\n\t\txAxis.setFromMatrix3Column( this, 0 );\n\t\tyAxis.setFromMatrix3Column( this, 1 );\n\t\tzAxis.setFromMatrix3Column( this, 2 );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromMatrix4: function ( m ) {\n\n\t\tvar me = m.elements;\n\n\t\tthis.set(\n\n\t\t\tme[ 0 ], me[ 4 ], me[ 8 ],\n\t\t\tme[ 1 ], me[ 5 ], me[ 9 ],\n\t\t\tme[ 2 ], me[ 6 ], me[ 10 ]\n\n\t\t);\n\n\t\treturn this;\n\n\t},\n\n\tmultiply: function ( m ) {\n\n\t\treturn this.multiplyMatrices( this, m );\n\n\t},\n\n\tpremultiply: function ( m ) {\n\n\t\treturn this.multiplyMatrices( m, this );\n\n\t},\n\n\tmultiplyMatrices: function ( a, b ) {\n\n\t\tvar ae = a.elements;\n\t\tvar be = b.elements;\n\t\tvar te = this.elements;\n\n\t\tvar a11 = ae[ 0 ], a12 = ae[ 3 ], a13 = ae[ 6 ];\n\t\tvar a21 = ae[ 1 ], a22 = ae[ 4 ], a23 = ae[ 7 ];\n\t\tvar a31 = ae[ 2 ], a32 = ae[ 5 ], a33 = ae[ 8 ];\n\n\t\tvar b11 = be[ 0 ], b12 = be[ 3 ], b13 = be[ 6 ];\n\t\tvar b21 = be[ 1 ], b22 = be[ 4 ], b23 = be[ 7 ];\n\t\tvar b31 = be[ 2 ], b32 = be[ 5 ], b33 = be[ 8 ];\n\n\t\tte[ 0 ] = a11 * b11 + a12 * b21 + a13 * b31;\n\t\tte[ 3 ] = a11 * b12 + a12 * b22 + a13 * b32;\n\t\tte[ 6 ] = a11 * b13 + a12 * b23 + a13 * b33;\n\n\t\tte[ 1 ] = a21 * b11 + a22 * b21 + a23 * b31;\n\t\tte[ 4 ] = a21 * b12 + a22 * b22 + a23 * b32;\n\t\tte[ 7 ] = a21 * b13 + a22 * b23 + a23 * b33;\n\n\t\tte[ 2 ] = a31 * b11 + a32 * b21 + a33 * b31;\n\t\tte[ 5 ] = a31 * b12 + a32 * b22 + a33 * b32;\n\t\tte[ 8 ] = a31 * b13 + a32 * b23 + a33 * b33;\n\n\t\treturn this;\n\n\t},\n\n\tmultiplyScalar: function ( s ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] *= s; te[ 3 ] *= s; te[ 6 ] *= s;\n\t\tte[ 1 ] *= s; te[ 4 ] *= s; te[ 7 ] *= s;\n\t\tte[ 2 ] *= s; te[ 5 ] *= s; te[ 8 ] *= s;\n\n\t\treturn this;\n\n\t},\n\n\tdeterminant: function () {\n\n\t\tvar te = this.elements;\n\n\t\tvar a = te[ 0 ], b = te[ 1 ], c = te[ 2 ],\n\t\t\td = te[ 3 ], e = te[ 4 ], f = te[ 5 ],\n\t\t\tg = te[ 6 ], h = te[ 7 ], i = te[ 8 ];\n\n\t\treturn a * e * i - a * f * h - b * d * i + b * f * g + c * d * h - c * e * g;\n\n\t},\n\n\tgetInverse: function ( matrix, throwOnDegenerate ) {\n\n\t\tif ( throwOnDegenerate !== undefined ) {\n\n\t\t\tconsole.warn( \"THREE.Matrix3: .getInverse() can no longer be configured to throw on degenerate.\" );\n\n\t\t}\n\n\t\tvar me = matrix.elements,\n\t\t\tte = this.elements,\n\n\t\t\tn11 = me[ 0 ], n21 = me[ 1 ], n31 = me[ 2 ],\n\t\t\tn12 = me[ 3 ], n22 = me[ 4 ], n32 = me[ 5 ],\n\t\t\tn13 = me[ 6 ], n23 = me[ 7 ], n33 = me[ 8 ],\n\n\t\t\tt11 = n33 * n22 - n32 * n23,\n\t\t\tt12 = n32 * n13 - n33 * n12,\n\t\t\tt13 = n23 * n12 - n22 * n13,\n\n\t\t\tdet = n11 * t11 + n21 * t12 + n31 * t13;\n\n\t\tif ( det === 0 ) return this.set( 0, 0, 0, 0, 0, 0, 0, 0, 0 );\n\n\t\tvar detInv = 1 / det;\n\n\t\tte[ 0 ] = t11 * detInv;\n\t\tte[ 1 ] = ( n31 * n23 - n33 * n21 ) * detInv;\n\t\tte[ 2 ] = ( n32 * n21 - n31 * n22 ) * detInv;\n\n\t\tte[ 3 ] = t12 * detInv;\n\t\tte[ 4 ] = ( n33 * n11 - n31 * n13 ) * detInv;\n\t\tte[ 5 ] = ( n31 * n12 - n32 * n11 ) * detInv;\n\n\t\tte[ 6 ] = t13 * detInv;\n\t\tte[ 7 ] = ( n21 * n13 - n23 * n11 ) * detInv;\n\t\tte[ 8 ] = ( n22 * n11 - n21 * n12 ) * detInv;\n\n\t\treturn this;\n\n\t},\n\n\ttranspose: function () {\n\n\t\tvar tmp, m = this.elements;\n\n\t\ttmp = m[ 1 ]; m[ 1 ] = m[ 3 ]; m[ 3 ] = tmp;\n\t\ttmp = m[ 2 ]; m[ 2 ] = m[ 6 ]; m[ 6 ] = tmp;\n\t\ttmp = m[ 5 ]; m[ 5 ] = m[ 7 ]; m[ 7 ] = tmp;\n\n\t\treturn this;\n\n\t},\n\n\tgetNormalMatrix: function ( matrix4 ) {\n\n\t\treturn this.setFromMatrix4( matrix4 ).getInverse( this ).transpose();\n\n\t},\n\n\ttransposeIntoArray: function ( r ) {\n\n\t\tvar m = this.elements;\n\n\t\tr[ 0 ] = m[ 0 ];\n\t\tr[ 1 ] = m[ 3 ];\n\t\tr[ 2 ] = m[ 6 ];\n\t\tr[ 3 ] = m[ 1 ];\n\t\tr[ 4 ] = m[ 4 ];\n\t\tr[ 5 ] = m[ 7 ];\n\t\tr[ 6 ] = m[ 2 ];\n\t\tr[ 7 ] = m[ 5 ];\n\t\tr[ 8 ] = m[ 8 ];\n\n\t\treturn this;\n\n\t},\n\n\tsetUvTransform: function ( tx, ty, sx, sy, rotation, cx, cy ) {\n\n\t\tvar c = Math.cos( rotation );\n\t\tvar s = Math.sin( rotation );\n\n\t\tthis.set(\n\t\t\tsx * c, sx * s, - sx * ( c * cx + s * cy ) + cx + tx,\n\t\t\t- sy * s, sy * c, - sy * ( - s * cx + c * cy ) + cy + ty,\n\t\t\t0, 0, 1\n\t\t);\n\n\t},\n\n\tscale: function ( sx, sy ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] *= sx; te[ 3 ] *= sx; te[ 6 ] *= sx;\n\t\tte[ 1 ] *= sy; te[ 4 ] *= sy; te[ 7 ] *= sy;\n\n\t\treturn this;\n\n\t},\n\n\trotate: function ( theta ) {\n\n\t\tvar c = Math.cos( theta );\n\t\tvar s = Math.sin( theta );\n\n\t\tvar te = this.elements;\n\n\t\tvar a11 = te[ 0 ], a12 = te[ 3 ], a13 = te[ 6 ];\n\t\tvar a21 = te[ 1 ], a22 = te[ 4 ], a23 = te[ 7 ];\n\n\t\tte[ 0 ] = c * a11 + s * a21;\n\t\tte[ 3 ] = c * a12 + s * a22;\n\t\tte[ 6 ] = c * a13 + s * a23;\n\n\t\tte[ 1 ] = - s * a11 + c * a21;\n\t\tte[ 4 ] = - s * a12 + c * a22;\n\t\tte[ 7 ] = - s * a13 + c * a23;\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( tx, ty ) {\n\n\t\tvar te = this.elements;\n\n\t\tte[ 0 ] += tx * te[ 2 ]; te[ 3 ] += tx * te[ 5 ]; te[ 6 ] += tx * te[ 8 ];\n\t\tte[ 1 ] += ty * te[ 2 ]; te[ 4 ] += ty * te[ 5 ]; te[ 7 ] += ty * te[ 8 ];\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( matrix ) {\n\n\t\tvar te = this.elements;\n\t\tvar me = matrix.elements;\n\n\t\tfor ( var i = 0; i < 9; i ++ ) {\n\n\t\t\tif ( te[ i ] !== me[ i ] ) return false;\n\n\t\t}\n\n\t\treturn true;\n\n\t},\n\n\tfromArray: function ( array, offset ) {\n\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tfor ( var i = 0; i < 9; i ++ ) {\n\n\t\t\tthis.elements[ i ] = array[ i + offset ];\n\n\t\t}\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tvar te = this.elements;\n\n\t\tarray[ offset ] = te[ 0 ];\n\t\tarray[ offset + 1 ] = te[ 1 ];\n\t\tarray[ offset + 2 ] = te[ 2 ];\n\n\t\tarray[ offset + 3 ] = te[ 3 ];\n\t\tarray[ offset + 4 ] = te[ 4 ];\n\t\tarray[ offset + 5 ] = te[ 5 ];\n\n\t\tarray[ offset + 6 ] = te[ 6 ];\n\t\tarray[ offset + 7 ] = te[ 7 ];\n\t\tarray[ offset + 8 ] = te[ 8 ];\n\n\t\treturn array;\n\n\t}\n\n} );\n\n\nexport { Matrix3 };\n","import {BaseNodeType} from '../nodes/_Base';\n\n// interface ContentOption {\n// \tclone?: boolean\n// }\n\nimport {ContainableMap} from './utils/ContainableMap';\ntype K = keyof ContainableMap;\ntype Containable = ContainableMap[K];\n\nexport abstract class TypedContainer<T extends Containable> {\n\t// protected _node: BaseNode;\n\t// protected _eval_key: number\n\tprotected _content!: T;\n\n\tconstructor(protected _node: BaseNodeType) {\n\t\t// this.update_eval_key();\n\t\t// this.set_content(this._default_content());\n\t}\n\n\tset_node(node: BaseNodeType) {\n\t\tthis._node = node;\n\t}\n\tnode(): BaseNodeType {\n\t\treturn this._node;\n\t}\n\n\tclone() {\n\t\tlet content;\n\t\tconst cloned_container = new (<any>this.constructor)() as TypedContainer<T>;\n\t\tcloned_container.set_node(this.node());\n\t\tif ((content = this.content()) != null) {\n\t\t\tcloned_container.set_content(content); //, this.eval_key() );\n\t\t}\n\t\treturn cloned_container;\n\t}\n\treset_caches() {}\n\t// abstract _default_content(): T;\n\n\tset_content(content: T) {\n\t\t//, eval_key?: number){\n\t\tthis.reset_caches();\n\t\tthis._content = content; //|| this._default_content();\n\t\t// this.update_eval_key(eval_key);\n\t\tthis._post_set_content();\n\t}\n\thas_content(): boolean {\n\t\treturn this._content != null;\n\t}\n\t// content(options: ContentOption = {}) {\n\t// \tconst clone = options['clone'] || false\n\t// \tif (clone) {\n\t// \t\treturn this.clone_content()\n\t// \t} else {\n\t// \t\treturn this._content\n\t// \t}\n\t// }\n\tcontent() {\n\t\treturn this._content;\n\t}\n\tprotected _post_set_content() {}\n\tpublic core_content(): T | undefined {\n\t\treturn this._content;\n\t}\n\tpublic core_content_cloned(): T | undefined {\n\t\treturn this._content;\n\t}\n\t// abstract clone_content(): T\n\n\t// update_eval_key(eval_key?: number){\n\t// \tthis._eval_key = eval_key || performance.now();\n\t// }\n\t// eval_key(): number {\n\t// \treturn this._eval_key;\n\t// }\n\n\tinfos(): any {\n\t\treturn [];\n\t}\n}\n\nexport class BaseContainer extends TypedContainer<any> {}\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nmodule.exports = Symbol;\n","var DataView = require('./_DataView'),\n    Map = require('./_Map'),\n    Promise = require('./_Promise'),\n    Set = require('./_Set'),\n    WeakMap = require('./_WeakMap'),\n    baseGetTag = require('./_baseGetTag'),\n    toSource = require('./_toSource');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    setTag = '[object Set]',\n    weakMapTag = '[object WeakMap]';\n\nvar dataViewTag = '[object DataView]';\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11 and promises in Node.js < 6.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = baseGetTag(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : '';\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\nmodule.exports = getTag;\n","var baseMatches = require('./_baseMatches'),\n    baseMatchesProperty = require('./_baseMatchesProperty'),\n    identity = require('./identity'),\n    isArray = require('./isArray'),\n    property = require('./property');\n\n/**\n * The base implementation of `_.iteratee`.\n *\n * @private\n * @param {*} [value=_.identity] The value to convert to an iteratee.\n * @returns {Function} Returns the iteratee.\n */\nfunction baseIteratee(value) {\n  // Don't store the `typeof` result in a variable to avoid a JIT bug in Safari 9.\n  // See https://bugs.webkit.org/show_bug.cgi?id=156034 for more details.\n  if (typeof value == 'function') {\n    return value;\n  }\n  if (value == null) {\n    return identity;\n  }\n  if (typeof value == 'object') {\n    return isArray(value)\n      ? baseMatchesProperty(value[0], value[1])\n      : baseMatches(value);\n  }\n  return property(value);\n}\n\nmodule.exports = baseIteratee;\n","import lodash_isString from 'lodash/isString';\nimport lodash_isArray from 'lodash/isArray';\n// import lodash_isBoolean from 'lodash/isBoolean';\n// import {TypedParamVisitor} from './_Base';\nimport {TypedParam} from './_Base';\nimport {ParamType} from '../poly/ParamType';\n// import {ParamInitValuesTypeMap} from './types/ParamInitValuesTypeMap';\nimport {ExpressionController} from './utils/ExpressionController';\nimport {ParamEvent} from '../poly/ParamEvent';\nimport {ParamValuesTypeMap} from './types/ParamValuesTypeMap';\nimport {ParamInitValuesTypeMap} from './types/ParamInitValuesTypeMap';\n\n// import {ParamEvent} from '../poly/ParamEvent';\n// import {ParamInitValuesTypeMap} from '../nodes/utils/params/ParamsController';\n\n// interface NumericParamVisitor extends TypedParamVisitor {\n// \tvisit_numeric_param: (param: TypedNumericParam<any>) => any;\n// }\n\nexport abstract class TypedNumericParam<T extends ParamType> extends TypedParam<T> {\n\t// private _raw_input: ParamInitValuesTypeMap[T] | undefined;\n\tget is_numeric() {\n\t\treturn true;\n\t}\n\tget is_default(): boolean {\n\t\treturn this._raw_input == this.default_value;\n\t}\n\n\t// accepts_visitor(visitor: NumericParamVisitor): any {\n\t// \treturn visitor.visit_numeric_param(this);\n\t// }\n\t// init_expression() {\n\t// \tif (this.is_value_expression(this._default_value)) {\n\t// \t\treturn this.set_expression(this._default_value)\n\t// \t}\n\t// }\n\tprotected _prefilter_invalid_raw_input(raw_input: any): ParamInitValuesTypeMap[T] {\n\t\tif (lodash_isArray(raw_input)) {\n\t\t\treturn raw_input[0] as ParamInitValuesTypeMap[T];\n\t\t} else {\n\t\t\treturn raw_input;\n\t\t}\n\t}\n\n\tprotected process_raw_input() {\n\t\tthis.states.error.clear();\n\n\t\tconst converted = this.convert(this._raw_input);\n\t\tif (converted != null) {\n\t\t\tif (this._expression_controller) {\n\t\t\t\tthis._expression_controller.set_expression(undefined, false);\n\t\t\t\tthis.emit_controller.emit(ParamEvent.EXPRESSION_UPDATED); // ensure expression is considered removed\n\t\t\t}\n\t\t\tif (converted != this._value) {\n\t\t\t\tthis._update_value(converted);\n\t\t\t\tthis.set_successors_dirty(this);\n\t\t\t}\n\t\t} else {\n\t\t\tif (lodash_isString(this._raw_input)) {\n\t\t\t\tthis._expression_controller = this._expression_controller || new ExpressionController(this);\n\t\t\t\tif (this._raw_input != this._expression_controller.expression) {\n\t\t\t\t\tthis._expression_controller.set_expression(this._raw_input);\n\t\t\t\t\tthis.emit_controller.emit(ParamEvent.EXPRESSION_UPDATED);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.states.error.set(`param input is invalid (${this.full_path()})`);\n\t\t\t}\n\t\t}\n\t}\n\tprotected async process_computation(): Promise<void> {\n\t\tif (this.expression_controller?.active && !this.expression_controller.requires_entities) {\n\t\t\tconst expression_result = await this.expression_controller.compute_expression();\n\t\t\tif (this.expression_controller.is_errored) {\n\t\t\t\tthis.states.error.set(\n\t\t\t\t\t`expression error: \"${this.expression_controller.expression}\" (${this.expression_controller.error_message})`\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tconst converted = this.convert(expression_result);\n\t\t\t\tif (converted != null) {\n\t\t\t\t\tif (this.states.error.active) {\n\t\t\t\t\t\tthis.states.error.clear();\n\t\t\t\t\t}\n\t\t\t\t\tthis._update_value(converted);\n\t\t\t\t} else {\n\t\t\t\t\tthis.states.error.set(\n\t\t\t\t\t\t`expression returns an invalid type (${expression_result}) (${this.expression_controller.expression})`\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tprivate _update_value(new_value: ParamValuesTypeMap[T]) {\n\t\tthis._value = new_value;\n\t\tif (this.parent_param) {\n\t\t\tthis.parent_param.set_value_from_components();\n\t\t}\n\t\tthis.options.execute_callback();\n\t\tthis.emit_controller.emit(ParamEvent.VALUE_UPDATED);\n\t\tthis.remove_dirty_state();\n\t}\n}\n","// import {BaseNode} from '../../_Base';\nimport {ParamType} from '../../../poly/ParamType';\nimport {ParamOptions} from '../../../params/utils/OptionsController';\nimport {RampParam} from '../../../params/Ramp';\nimport {ParamValuesTypeMap} from '../../../params/types/ParamValuesTypeMap';\nimport {ParamInitValuesTypeMap} from '../../../params/types/ParamInitValuesTypeMap';\nimport {ParamConstructorMap} from '../../../params/types/ParamConstructorMap';\nimport {ParamOptionsByTypeMap} from '../../../params/types/ParamOptionsByTypeMap';\n\n// function _ParamCheckNameConsistency<T extends BaseNode>(name: string, target: T, key: keyof T, type: ParamType) {\n// \tconst key_s = key as string;\n// \tif (key_s != `_param_${name}`) {\n// \t\tconsole.warn('param name inconsistent');\n// \t}\n// \tconst param = target.params.get(name);\n// \tif (param && param.type != type) {\n// \t\tconsole.warn('param type inconsistent');\n// \t}\n// }\n// export const _ParamBoolean = function ParamF(name: string) {\n// \treturn <T extends BaseNode>(target: T, key: keyof T) => {\n// \t\t_ParamCheckNameConsistency(name, target, key, ParamType.BOOLEAN);\n// \t\tObject.defineProperty(target, key, {\n// \t\t\tget: () => target.params.boolean(name),\n// \t\t});\n// \t};\n// };\n// export const _ParamFloat = function ParamF(name: string) {\n// \treturn <T extends BaseNode>(target: T, key: keyof T) => {\n// \t\t_ParamCheckNameConsistency(name, target, key, ParamType.FLOAT);\n// \t\tObject.defineProperty(target, key, {\n// \t\t\tget: () => target.params.float(name),\n// \t\t});\n// \t};\n// };\n// export const _ParamFloat = function ParamF(default_value: number, options?: ParamOptions) {\n// \treturn <T extends NodeParamsConfig>(target: T, key: string) => {\n// \t\t// _ParamCheckNameConsistency(name, target, key, ParamType.FLOAT);\n// \t\t// const config = new ParamConfig(ParamType.FLOAT, default_value, options);\n// \t\t// target.add_config(key, config);\n// \t\t// target.set_default_value(key, default_value);\n// \t\t// target.set_options(key, options);\n// \t\t// Object.defineProperty(target.options, key, {\n// \t\t// \tget: () => target.params.float(name),\n// \t\t// });\n// \t};\n// };\n// export const _ParamString = function ParamF(name: string) {\n// \treturn <T extends BaseNode>(target: T, key: keyof T) => {\n// \t\t_ParamCheckNameConsistency(name, target, key, ParamType.STRING);\n// \t\tObject.defineProperty(target, key, {\n// \t\t\tget: () => target.params.string(name),\n// \t\t});\n// \t};\n// };\n// export const _ParamVector2 = function ParamF(name: string) {\n// \treturn <T extends BaseNode>(target: T, key: keyof T) => {\n// \t\t_ParamCheckNameConsistency(name, target, key, ParamType.VECTOR2);\n// \t\tObject.defineProperty(target, key, {\n// \t\t\tget: () => target.params.vector2(name),\n// \t\t});\n// \t};\n// };\n// export const _ParamVector3 = function ParamF(name: string) {\n// \treturn <T extends BaseNode>(target: T, key: keyof T) => {\n// \t\t_ParamCheckNameConsistency(name, target, key, ParamType.VECTOR3);\n// \t\tObject.defineProperty(target, key, {\n// \t\t\tget: () => target.params.vector3(name),\n// \t\t});\n// \t};\n// };\n// export const _ParamColor = function ParamF(name: string) {\n// \treturn <T extends BaseNode>(target: T, key: keyof T) => {\n// \t\t_ParamCheckNameConsistency(name, target, key, ParamType.COLOR);\n// \t\tObject.defineProperty(target, key, {\n// \t\t\tget: () => target.params.color(name),\n// \t\t});\n// \t};\n// };\n// declare global {\n// \tconst ParamB: typeof _ParamBoolean;\n// \tconst ParamF: typeof _ParamFloat;\n// \tconst ParamS: typeof _ParamString;\n// \tconst ParamV2: typeof _ParamVector2;\n// \tconst ParamV3: typeof _ParamVector3;\n// \tconst ParamC: typeof _ParamColor;\n// }\n// class ParamConfig<T extends ParamType> {\n// \tconstructor(readonly type: T, readonly default_value: ParamValuesTypeMap[T], readonly options: ParamOptions = {}) {}\n// }\nexport class ParamTemplate<T extends ParamType> {\n\treadonly value_type!: ParamValuesTypeMap[T];\n\treadonly param_class!: ParamConstructorMap[T];\n\t// readonly options?: ParamOptions;\n\n\tconstructor(public type: T, public init_value: ParamInitValuesTypeMap[T], public options?: ParamOptions) {}\n}\n\n// class Test1 {\n// \ta: number\n// \tb: string\n// }\n// type test = Extract<typeof Test1, string>;\n// type test2 = Pick<typeof Test1, 'b'>;\n// type test3 = Test1['b'];\n// type test2 = keyof BoxSopParamConfig;\nexport class ParamConfig {\n\t// static _GENERIC<T extends ParamType> (type: T, init_value: ParamInitValuesTypeMap[T], options?: ParamOptions) {\n\t// \treturn new ParamTemplate<T>(type, init_value, options);\n\t// }\n\t// static BUTTON(init_value: ParamInitValuesTypeMap[ParamType.BUTTON], options?: ParamOptions) {\n\t// \treturn this._GENERIC<ParamType.BUTTON>(ParamType.BUTTON, init_value, options)\n\t// }\n\tstatic BUTTON(\n\t\tinit_value: ParamInitValuesTypeMap[ParamType.BUTTON],\n\t\toptions?: ParamOptionsByTypeMap[ParamType.BUTTON]\n\t) {\n\t\treturn new ParamTemplate<ParamType.BUTTON>(ParamType.BUTTON, init_value, options);\n\t}\n\tstatic BOOLEAN(\n\t\tinit_value: ParamInitValuesTypeMap[ParamType.BOOLEAN],\n\t\toptions?: ParamOptionsByTypeMap[ParamType.BOOLEAN]\n\t) {\n\t\treturn new ParamTemplate<ParamType.BOOLEAN>(ParamType.BOOLEAN, init_value, options);\n\t}\n\tstatic COLOR(\n\t\tinit_value: ParamInitValuesTypeMap[ParamType.COLOR],\n\t\toptions?: ParamOptionsByTypeMap[ParamType.COLOR]\n\t) {\n\t\treturn new ParamTemplate<ParamType.COLOR>(ParamType.COLOR, init_value, options);\n\t}\n\tstatic FLOAT(\n\t\tinit_value: ParamInitValuesTypeMap[ParamType.FLOAT],\n\t\toptions?: ParamOptionsByTypeMap[ParamType.FLOAT]\n\t) {\n\t\treturn new ParamTemplate<ParamType.FLOAT>(ParamType.FLOAT, init_value, options);\n\t}\n\tstatic FOLDER(\n\t\tinit_value: ParamInitValuesTypeMap[ParamType.FOLDER] = null,\n\t\toptions?: ParamOptionsByTypeMap[ParamType.FOLDER]\n\t) {\n\t\treturn new ParamTemplate<ParamType.FOLDER>(ParamType.FOLDER, init_value, options);\n\t}\n\tstatic INTEGER(\n\t\tinit_value: ParamInitValuesTypeMap[ParamType.INTEGER],\n\t\toptions?: ParamOptionsByTypeMap[ParamType.INTEGER]\n\t) {\n\t\treturn new ParamTemplate<ParamType.INTEGER>(ParamType.INTEGER, init_value, options);\n\t}\n\tstatic OPERATOR_PATH(\n\t\tinit_value: ParamInitValuesTypeMap[ParamType.OPERATOR_PATH],\n\t\toptions?: ParamOptionsByTypeMap[ParamType.OPERATOR_PATH]\n\t) {\n\t\treturn new ParamTemplate<ParamType.OPERATOR_PATH>(ParamType.OPERATOR_PATH, init_value, options);\n\t}\n\tstatic RAMP(\n\t\tinit_value: ParamInitValuesTypeMap[ParamType.RAMP] = RampParam.DEFAULT_VALUE,\n\t\toptions?: ParamOptionsByTypeMap[ParamType.RAMP]\n\t) {\n\t\treturn new ParamTemplate<ParamType.RAMP>(ParamType.RAMP, init_value, options);\n\t}\n\tstatic SEPARATOR(\n\t\tinit_value: ParamInitValuesTypeMap[ParamType.SEPARATOR] = null,\n\t\toptions?: ParamOptionsByTypeMap[ParamType.SEPARATOR]\n\t) {\n\t\treturn new ParamTemplate<ParamType.SEPARATOR>(ParamType.SEPARATOR, init_value, options);\n\t}\n\tstatic STRING(\n\t\tinit_value: ParamInitValuesTypeMap[ParamType.STRING] = '',\n\t\toptions?: ParamOptionsByTypeMap[ParamType.STRING]\n\t) {\n\t\treturn new ParamTemplate<ParamType.STRING>(ParamType.STRING, init_value, options);\n\t}\n\tstatic VECTOR2(\n\t\tinit_value: ParamInitValuesTypeMap[ParamType.VECTOR2],\n\t\toptions?: ParamOptionsByTypeMap[ParamType.VECTOR2]\n\t) {\n\t\treturn new ParamTemplate<ParamType.VECTOR2>(ParamType.VECTOR2, init_value, options);\n\t}\n\tstatic VECTOR3(\n\t\tinit_value: ParamInitValuesTypeMap[ParamType.VECTOR3],\n\t\toptions?: ParamOptionsByTypeMap[ParamType.VECTOR3]\n\t) {\n\t\treturn new ParamTemplate<ParamType.VECTOR3>(ParamType.VECTOR3, init_value, options);\n\t}\n\tstatic VECTOR4(\n\t\tinit_value: ParamInitValuesTypeMap[ParamType.VECTOR4],\n\t\toptions?: ParamOptionsByTypeMap[ParamType.VECTOR4]\n\t) {\n\t\treturn new ParamTemplate<ParamType.VECTOR4>(ParamType.VECTOR4, init_value, options);\n\t}\n}\n\nexport class NodeParamsConfig implements Dictionary<ParamTemplate<ParamType>> {\n\t[name: string]: ParamTemplate<ParamType>;\n}\n// export class NodeParamsConfig {}\n\n// interface ParamConfig {\n// \ttype: ParamType;\n// \tvalue: any;\n// \toptions?: ParamOptions;\n// }\n// export type ParamConfigsArray = ParamConfig[];\n\n// declare global {\n// \tinterface Window {\n// \t\tParamB: typeof _ParamB;\n// \t\tParamC: typeof _ParamC;\n// \t}\n// }\n// window.ParamC = _ParamC;\n","import {ParamInitValuesTypeMap} from '../../../params/types/ParamInitValuesTypeMap';\n\nimport {ParamType} from '../../../poly/ParamType';\nimport {RampParam} from '../../../params/Ramp';\n\n// TODO: simplify GLDataType into one enum\n// http://learnwebgl.brown37.net/12_shader_language/glsl_data_types.html\n\n//\n//\n// GL Data types\n//\n//\nexport enum ConnectionPointType {\n\tBOOL = 'bool',\n\t// BVEC2 = 'bvec2',\n\t// BVEC3 = 'bvec3',\n\t// BVEC4 = 'bvec4',\n\tINT = 'int',\n\t// IVEC2 = 'ivec2',\n\t// IVEC3 = 'ivec3',\n\t// IVEC4 = 'ivec4',\n\tFLOAT = 'float',\n\tVEC2 = 'vec2',\n\tVEC3 = 'vec3',\n\tVEC4 = 'vec4',\n\t// matrices to be used later\n\t// MAT2 = 'mat2',\n\t// MAT3 = 'mat3',\n\t// MAT4 = 'mat4',\n\tSAMPLER_2D = 'sampler2D',\n}\n\n//\n//\n// ALL GL Data types in an array\n//\n//\nexport const ConnectionPointTypes: Array<ConnectionPointType> = [\n\tConnectionPointType.BOOL,\n\t// ConnectionPointType.BVEC2,\n\t// ConnectionPointType.BVEC3,\n\t// ConnectionPointType.BVEC4,\n\tConnectionPointType.INT,\n\t// ConnectionPointType.IVEC2,\n\t// ConnectionPointType.IVEC3,\n\t// ConnectionPointType.IVEC4,\n\tConnectionPointType.FLOAT,\n\tConnectionPointType.VEC2,\n\tConnectionPointType.VEC3,\n\tConnectionPointType.VEC4,\n];\n\n//\n//\n// Map to convert from a GL Data type to a ParamType\n//\n//\ntype ConnectionPointTypeToParamTypeMapGeneric = {[key in ConnectionPointType]: ParamType};\nexport interface IConnectionPointTypeToParamTypeMap extends ConnectionPointTypeToParamTypeMapGeneric {\n\t[ConnectionPointType.BOOL]: ParamType.BOOLEAN;\n\t// [ConnectionPointType.BVEC2]: [ParamType.BOOLEAN, ParamType.BOOLEAN]\n\t// [ConnectionPointType.BVEC3]: [ParamType.BOOLEAN, ParamType.BOOLEAN, ParamType.BOOLEAN]\n\t// [ConnectionPointType.BVEC4]: [ParamType.BOOLEAN, ParamType.BOOLEAN, ParamType.BOOLEAN, ParamType.BOOLEAN]\n\t[ConnectionPointType.INT]: ParamType.INTEGER;\n\t// [ConnectionPointType.IVEC2]: [ParamType.INTEGER, ParamType.INTEGER];\n\t// [ConnectionPointType.IVEC3]: [ParamType.INTEGER, ParamType.INTEGER, ParamType.INTEGER];\n\t// [ConnectionPointType.IVEC4]: [ParamType.INTEGER, ParamType.INTEGER, ParamType.INTEGER, ParamType.INTEGER];\n\t[ConnectionPointType.FLOAT]: ParamType.FLOAT;\n\t[ConnectionPointType.VEC2]: ParamType.VECTOR2;\n\t[ConnectionPointType.VEC3]: ParamType.VECTOR3;\n\t[ConnectionPointType.VEC4]: ParamType.VECTOR4;\n}\nexport const ConnectionPointTypeToParamTypeMap: IConnectionPointTypeToParamTypeMap = {\n\t[ConnectionPointType.BOOL]: ParamType.BOOLEAN,\n\t// [ConnectionPointType.BVEC2]: [ParamType.BOOLEAN, ParamType.BOOLEAN]\n\t// [ConnectionPointType.BVEC3]: [ParamType.BOOLEAN, ParamType.BOOLEAN, ParamType.BOOLEAN]\n\t// [ConnectionPointType.BVEC4]: [ParamType.BOOLEAN, ParamType.BOOLEAN, ParamType.BOOLEAN, ParamType.BOOLEAN]\n\t[ConnectionPointType.INT]: ParamType.INTEGER,\n\t// [ConnectionPointType.IVEC2]: [ParamType.INTEGER, ParamType.INTEGER];\n\t// [ConnectionPointType.IVEC3]: [ParamType.INTEGER, ParamType.INTEGER, ParamType.INTEGER];\n\t// [ConnectionPointType.IVEC4]: [ParamType.INTEGER, ParamType.INTEGER, ParamType.INTEGER, ParamType.INTEGER];\n\t[ConnectionPointType.FLOAT]: ParamType.FLOAT,\n\t[ConnectionPointType.VEC2]: ParamType.VECTOR2,\n\t[ConnectionPointType.VEC3]: ParamType.VECTOR3,\n\t[ConnectionPointType.VEC4]: ParamType.VECTOR4,\n\n\t[ConnectionPointType.SAMPLER_2D]: ParamType.RAMP,\n};\n\n//\n//\n// Map to convert from a ParamType to GL Data type\n//\n//\ntype ParamTypeToConnectionPointTypeMapGeneric = {[key in ParamType]: ConnectionPointType | undefined};\nexport interface IParamTypeToConnectionPointTypeMap extends ParamTypeToConnectionPointTypeMapGeneric {\n\t[ParamType.BOOLEAN]: ConnectionPointType.BOOL;\n\t[ParamType.COLOR]: ConnectionPointType.VEC3;\n\t// [ConnectionPointType.BVEC2]: [ParamType.BOOLEAN, ParamType.BOOLEAN]\n\t// [ConnectionPointType.BVEC3]: [ParamType.BOOLEAN, ParamType.BOOLEAN, ParamType.BOOLEAN]\n\t// [ConnectionPointType.BVEC4]: [ParamType.BOOLEAN, ParamType.BOOLEAN, ParamType.BOOLEAN, ParamType.BOOLEAN]\n\t[ParamType.INTEGER]: ConnectionPointType.INT;\n\t// [ConnectionPointType.IVEC2]: [ParamType.INTEGER, ParamType.INTEGER];\n\t// [ConnectionPointType.IVEC3]: [ParamType.INTEGER, ParamType.INTEGER, ParamType.INTEGER];\n\t// [ConnectionPointType.IVEC4]: [ParamType.INTEGER, ParamType.INTEGER, ParamType.INTEGER, ParamType.INTEGER];\n\t[ParamType.FLOAT]: ConnectionPointType.FLOAT;\n\t[ParamType.FOLDER]: undefined;\n\t[ParamType.VECTOR2]: ConnectionPointType.VEC2;\n\t[ParamType.VECTOR3]: ConnectionPointType.VEC3;\n\t[ParamType.VECTOR4]: ConnectionPointType.VEC4;\n\t[ParamType.BUTTON]: undefined;\n\t[ParamType.OPERATOR_PATH]: undefined;\n\t[ParamType.RAMP]: undefined;\n\t[ParamType.SEPARATOR]: undefined;\n\t[ParamType.STRING]: undefined;\n}\nexport const ParamTypeToConnectionPointTypeMap: IParamTypeToConnectionPointTypeMap = {\n\t[ParamType.BOOLEAN]: ConnectionPointType.BOOL,\n\t[ParamType.COLOR]: ConnectionPointType.VEC3,\n\t// [ConnectionPointType.BVEC2]: [ParamType.BOOLEAN, ParamType.BOOLEAN]\n\t// [ConnectionPointType.BVEC3]: [ParamType.BOOLEAN, ParamType.BOOLEAN, ParamType.BOOLEAN]\n\t// [ConnectionPointType.BVEC4]: [ParamType.BOOLEAN, ParamType.BOOLEAN, ParamType.BOOLEAN, ParamType.BOOLEAN]\n\t[ParamType.INTEGER]: ConnectionPointType.INT,\n\t// [ConnectionPointType.IVEC2]: [ParamType.INTEGER, ParamType.INTEGER];\n\t// [ConnectionPointType.IVEC3]: [ParamType.INTEGER, ParamType.INTEGER, ParamType.INTEGER];\n\t// [ConnectionPointType.IVEC4]: [ParamType.INTEGER, ParamType.INTEGER, ParamType.INTEGER, ParamType.INTEGER];\n\t[ParamType.FLOAT]: ConnectionPointType.FLOAT,\n\t[ParamType.FOLDER]: undefined,\n\t[ParamType.VECTOR2]: ConnectionPointType.VEC2,\n\t[ParamType.VECTOR3]: ConnectionPointType.VEC3,\n\t[ParamType.VECTOR4]: ConnectionPointType.VEC4,\n\t[ParamType.BUTTON]: undefined,\n\t[ParamType.OPERATOR_PATH]: undefined,\n\t[ParamType.RAMP]: undefined,\n\t[ParamType.SEPARATOR]: undefined,\n\t[ParamType.STRING]: undefined,\n};\n\n//\n//\n// Map of GL Data type default values\n//\n//\nexport type ConnectionPointInitValueMapGeneric = {\n\t[key in ConnectionPointType]: ParamInitValuesTypeMap[IConnectionPointTypeToParamTypeMap[key]];\n};\nexport const ConnectionPointInitValueMap: ConnectionPointInitValueMapGeneric = {\n\t[ConnectionPointType.BOOL]: false,\n\t// [ConnectionPointType.BVEC2]: [ParamType.BOOLEAN, ParamType.BOOLEAN]\n\t// [ConnectionPointType.BVEC3]: [ParamType.BOOLEAN, ParamType.BOOLEAN, ParamType.BOOLEAN]\n\t// [ConnectionPointType.BVEC4]: [ParamType.BOOLEAN, ParamType.BOOLEAN, ParamType.BOOLEAN, ParamType.BOOLEAN]\n\t[ConnectionPointType.INT]: 0,\n\t// [ConnectionPointType.IVEC2]: [ParamType.INTEGER, ParamType.INTEGER];\n\t// [ConnectionPointType.IVEC3]: [ParamType.INTEGER, ParamType.INTEGER, ParamType.INTEGER];\n\t// [ConnectionPointType.IVEC4]: [ParamType.INTEGER, ParamType.INTEGER, ParamType.INTEGER, ParamType.INTEGER];\n\t[ConnectionPointType.FLOAT]: 0,\n\t[ConnectionPointType.VEC2]: [0, 0],\n\t[ConnectionPointType.VEC3]: [0, 0, 0],\n\t[ConnectionPointType.VEC4]: [0, 0, 0, 0],\n\n\t[ConnectionPointType.SAMPLER_2D]: RampParam.DEFAULT_VALUE_JSON,\n};\n\n//\n//\n// Map of GL Data type component counts\n//\n//\nexport type ConnectionPointComponentsCountMapGeneric = {\n\t[key in ConnectionPointType]: number;\n};\nexport const ConnectionPointComponentsCountMap: ConnectionPointComponentsCountMapGeneric = {\n\t[ConnectionPointType.BOOL]: 1,\n\t// [ConnectionPointType.BVEC2]: [ParamType.BOOLEAN, ParamType.BOOLEAN]\n\t// [ConnectionPointType.BVEC3]: [ParamType.BOOLEAN, ParamType.BOOLEAN, ParamType.BOOLEAN]\n\t// [ConnectionPointType.BVEC4]: [ParamType.BOOLEAN, ParamType.BOOLEAN, ParamType.BOOLEAN, ParamType.BOOLEAN]\n\t[ConnectionPointType.INT]: 1,\n\t// [ConnectionPointType.IVEC2]: [ParamType.INTEGER, ParamType.INTEGER];\n\t// [ConnectionPointType.IVEC3]: [ParamType.INTEGER, ParamType.INTEGER, ParamType.INTEGER];\n\t// [ConnectionPointType.IVEC4]: [ParamType.INTEGER, ParamType.INTEGER, ParamType.INTEGER, ParamType.INTEGER];\n\t[ConnectionPointType.FLOAT]: 1,\n\t[ConnectionPointType.VEC2]: 2,\n\t[ConnectionPointType.VEC3]: 3,\n\t[ConnectionPointType.VEC4]: 4,\n\t[ConnectionPointType.SAMPLER_2D]: 1,\n};\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nmodule.exports = arrayMap;\n","var baseFlatten = require('./_baseFlatten');\n\n/**\n * Flattens `array` a single level deep.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to flatten.\n * @returns {Array} Returns the new flattened array.\n * @example\n *\n * _.flatten([1, [2, [3, [4]], 5]]);\n * // => [1, 2, [3, [4]], 5]\n */\nfunction flatten(array) {\n  var length = array == null ? 0 : array.length;\n  return length ? baseFlatten(array, 1) : [];\n}\n\nmodule.exports = flatten;\n","var root = require('./_root'),\n    stubFalse = require('./stubFalse');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nmodule.exports = isBuffer;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nmodule.exports = baseUnary;\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nmodule.exports = identity;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nmodule.exports = isSymbol;\n","var baseForOwn = require('./_baseForOwn'),\n    createBaseEach = require('./_createBaseEach');\n\n/**\n * The base implementation of `_.forEach` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n */\nvar baseEach = createBaseEach(baseForOwn);\n\nmodule.exports = baseEach;\n","var arrayPush = require('./_arrayPush'),\n    isFlattenable = require('./_isFlattenable');\n\n/**\n * The base implementation of `_.flatten` with support for restricting flattening.\n *\n * @private\n * @param {Array} array The array to flatten.\n * @param {number} depth The maximum recursion depth.\n * @param {boolean} [predicate=isFlattenable] The function invoked per iteration.\n * @param {boolean} [isStrict] Restrict to values that pass `predicate` checks.\n * @param {Array} [result=[]] The initial result value.\n * @returns {Array} Returns the new flattened array.\n */\nfunction baseFlatten(array, depth, predicate, isStrict, result) {\n  var index = -1,\n      length = array.length;\n\n  predicate || (predicate = isFlattenable);\n  result || (result = []);\n\n  while (++index < length) {\n    var value = array[index];\n    if (depth > 0 && predicate(value)) {\n      if (depth > 1) {\n        // Recursively flatten arrays (susceptible to call stack limits).\n        baseFlatten(value, depth - 1, predicate, isStrict, result);\n      } else {\n        arrayPush(result, value);\n      }\n    } else if (!isStrict) {\n      result[result.length] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseFlatten;\n","var baseClone = require('./_baseClone');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, CLONE_DEEP_FLAG | CLONE_SYMBOLS_FLAG);\n}\n\nmodule.exports = cloneDeep;\n","var baseIsEqual = require('./_baseIsEqual');\n\n/**\n * Performs a deep comparison between two values to determine if they are\n * equivalent.\n *\n * **Note:** This method supports comparing arrays, array buffers, booleans,\n * date objects, error objects, maps, numbers, `Object` objects, regexes,\n * sets, strings, symbols, and typed arrays. `Object` objects are compared\n * by their own, not inherited, enumerable properties. Functions and DOM\n * nodes are compared by strict equality, i.e. `===`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.isEqual(object, other);\n * // => true\n *\n * object === other;\n * // => false\n */\nfunction isEqual(value, other) {\n  return baseIsEqual(value, other);\n}\n\nmodule.exports = isEqual;\n","import lodash_isString from 'lodash/isString';\n\nimport jsep from 'jsep';\njsep.addUnaryOp('@');\n// self.jsep = jsep\nlet precedence = 10;\njsep.addBinaryOp('**', precedence);\n// precedence = 1\n// jsep.addBinaryOp('`', precedence)\n// const HOUDINI_QUOTE_CODE = 96; // houdini quote\n// const JSEP_COMPOUND = 'Compound'\nconst JSEP_IDENTIFIER = 'Identifier';\nconst JSEP_LITERAL = 'Literal';\n// const JSEP_BINARY_EXPRESSION = 'BynaryExpression'\nconst JSEP_CALL_EXPRESSION = 'CallExpression';\nconst STRING_EXPRESSION_SEPARATOR = '`';\n\nexport class ParsedTree {\n\tpublic node: jsep.Expression | undefined;\n\tpublic error_message: string | undefined;\n\n\tconstructor() {}\n\n\tparse_expression(string: string) {\n\t\ttry {\n\t\t\tthis.reset();\n\t\t\tthis.node = jsep(string);\n\t\t} catch (e) {\n\t\t\tconst message = `could not parse the expression '${string}' (error: ${e})`;\n\t\t\tthis.error_message = message;\n\t\t}\n\t}\n\tparse_expression_for_string_param(string: string) {\n\t\ttry {\n\t\t\tthis.reset();\n\n\t\t\tconst elements = ParsedTree.string_value_elements(string);\n\t\t\tconst nodes = [];\n\t\t\tfor (let i = 0; i < elements.length; i++) {\n\t\t\t\tconst element = elements[i];\n\t\t\t\tlet node;\n\t\t\t\tif (i % 2 == 1) {\n\t\t\t\t\tnode = jsep(element);\n\t\t\t\t} else {\n\t\t\t\t\tnode = {\n\t\t\t\t\t\ttype: JSEP_LITERAL,\n\t\t\t\t\t\tvalue: `'${element}'`,\n\t\t\t\t\t\traw: `'${element}'`,\n\t\t\t\t\t};\n\t\t\t\t}\n\t\t\t\tnodes.push(node);\n\t\t\t\t// nodes.push({\n\t\t\t\t// \ttype: JSEP_CALL_EXPRESSION,\n\t\t\t\t// \targuments: [node],\n\t\t\t\t// \tcallee: {\n\t\t\t\t// \t\ttype: JSEP_IDENTIFIER,\n\t\t\t\t// \t\tname: 'toString',\n\t\t\t\t// \t}\n\t\t\t\t// })\n\t\t\t}\n\t\t\t// let last_plus_node;\n\t\t\t// for(let i=0; i<(nodes.length-1); i++){\n\t\t\t// \tconst plus_node = {\n\t\t\t// \t\ttype: JSEP_BINARY_EXPRESSION,\n\t\t\t// \t\toperator: '+',\n\t\t\t// \t\tleft: last_plus_node || nodes[i],\n\t\t\t// \t\tright: nodes[i+1],\n\t\t\t// \t}\n\t\t\t// \tlast_plus_node = plus_node;\n\t\t\t// }\n\t\t\t// this.node = last_plus_node\n\t\t\tthis.node = (<unknown>{\n\t\t\t\ttype: JSEP_CALL_EXPRESSION,\n\t\t\t\targuments: nodes,\n\t\t\t\tcallee: {\n\t\t\t\t\ttype: JSEP_IDENTIFIER,\n\t\t\t\t\tname: 'str_concat',\n\t\t\t\t},\n\t\t\t}) as jsep.Compound;\n\t\t} catch (e) {\n\t\t\tconst message = `could not parse the expression '${string}' (error: ${e})`;\n\t\t\tthis.error_message = message;\n\t\t}\n\t}\n\n\tstatic string_value_elements(v: string): string[] {\n\t\tif (v != null) {\n\t\t\tif (lodash_isString(v)) {\n\t\t\t\treturn v.split(STRING_EXPRESSION_SEPARATOR);\n\t\t\t} else {\n\t\t\t\treturn [];\n\t\t\t}\n\t\t} else {\n\t\t\treturn [];\n\t\t}\n\t}\n\t// static string_value_contains_expression(v:string): boolean{\n\t// \treturn ((this.string_value_elements(v).length - 1) % 2) === 0;\n\t// }\n\n\t// deep_parse_for_string_expressions(){\n\t// \t// for string expressions which have more than a single `<expr>` element\n\t// \t// pt_`@ptnum`\n\t// \t// `@ptnum`_pt\n\t// \t// pt_`@ptnum`_`1+1`\n\t// \tif(this.node.type == JSEP_COMPOUND){\n\t// \t\tconst args = this.node.body\n\t// \t\tlet arg;\n\t// \t\tfor(let i=0; i<args.length; i++){\n\t// \t\t\targ = args[i]\n\t// \t\t\tif(arg.type == JSEP_LITERAL){\n\t// \t\t\t\tconst arg_node = jsep(arg.value)\n\t// \t\t\t\targs[i] = arg_node\n\t// \t\t\t}\n\t// \t\t}\n\t// \t} else {\n\t// \t\t// for string expressions which havea single `<expr>` element\n\t// \t\t// `@ptnum`\n\t// \t\tif(this.node.type == JSEP_LITERAL){\n\t// \t\t\tconst raw = this.node.raw\n\t// \t\t\tconst first_char_code = raw.charCodeAt(0)\n\t// \t\t\tconst last_char_code = raw.charCodeAt(raw.length-1)\n\t// \t\t\tif(first_char_code == HOUDINI_QUOTE_CODE && last_char_code == HOUDINI_QUOTE_CODE){\n\t// \t\t\t\tthis.node = jsep(\"''+\"+this.node.value) // add the prefix ''+ to ensure we have a string as a result, and not a number\n\t// \t\t\t}\n\t// \t\t}\n\t// \t}\n\t// }\n\n\tprivate reset() {\n\t\tthis.node = undefined;\n\t\tthis.error_message = undefined;\n\t}\n}\n","//     JavaScript Expression Parser (JSEP) 0.3.4\r\n//     JSEP may be freely distributed under the MIT License\r\n//     http://jsep.from.so/\r\n\r\n/*global module: true, exports: true, console: true */\r\n(function (root) {\r\n\t'use strict';\r\n\t// Node Types\r\n\t// ----------\r\n\r\n\t// This is the full set of types that any JSEP node can be.\r\n\t// Store them here to save space when minified\r\n\tvar COMPOUND = 'Compound',\r\n\t\tIDENTIFIER = 'Identifier',\r\n\t\tMEMBER_EXP = 'MemberExpression',\r\n\t\tLITERAL = 'Literal',\r\n\t\tTHIS_EXP = 'ThisExpression',\r\n\t\tCALL_EXP = 'CallExpression',\r\n\t\tUNARY_EXP = 'UnaryExpression',\r\n\t\tBINARY_EXP = 'BinaryExpression',\r\n\t\tLOGICAL_EXP = 'LogicalExpression',\r\n\t\tCONDITIONAL_EXP = 'ConditionalExpression',\r\n\t\tARRAY_EXP = 'ArrayExpression',\r\n\r\n\t\tPERIOD_CODE = 46, // '.'\r\n\t\tCOMMA_CODE  = 44, // ','\r\n\t\tSQUOTE_CODE = 39, // single quote\r\n\t\tDQUOTE_CODE = 34, // double quotes\r\n\t\tOPAREN_CODE = 40, // (\r\n\t\tCPAREN_CODE = 41, // )\r\n\t\tOBRACK_CODE = 91, // [\r\n\t\tCBRACK_CODE = 93, // ]\r\n\t\tQUMARK_CODE = 63, // ?\r\n\t\tSEMCOL_CODE = 59, // ;\r\n\t\tCOLON_CODE  = 58, // :\r\n\r\n\t\tthrowError = function(message, index) {\r\n\t\t\tvar error = new Error(message + ' at character ' + index);\r\n\t\t\terror.index = index;\r\n\t\t\terror.description = message;\r\n\t\t\tthrow error;\r\n\t\t},\r\n\r\n\t// Operations\r\n\t// ----------\r\n\r\n\t// Set `t` to `true` to save space (when minified, not gzipped)\r\n\t\tt = true,\r\n\t// Use a quickly-accessible map to store all of the unary operators\r\n\t// Values are set to `true` (it really doesn't matter)\r\n\t\tunary_ops = {'-': t, '!': t, '~': t, '+': t},\r\n\t// Also use a map for the binary operations but set their values to their\r\n\t// binary precedence for quick reference:\r\n\t// see [Order of operations](http://en.wikipedia.org/wiki/Order_of_operations#Programming_language)\r\n\t\tbinary_ops = {\r\n\t\t\t'||': 1, '&&': 2, '|': 3,  '^': 4,  '&': 5,\r\n\t\t\t'==': 6, '!=': 6, '===': 6, '!==': 6,\r\n\t\t\t'<': 7,  '>': 7,  '<=': 7,  '>=': 7,\r\n\t\t\t'<<':8,  '>>': 8, '>>>': 8,\r\n\t\t\t'+': 9, '-': 9,\r\n\t\t\t'*': 10, '/': 10, '%': 10\r\n\t\t},\r\n\t// Get return the longest key length of any object\r\n\t\tgetMaxKeyLen = function(obj) {\r\n\t\t\tvar max_len = 0, len;\r\n\t\t\tfor(var key in obj) {\r\n\t\t\t\tif((len = key.length) > max_len && obj.hasOwnProperty(key)) {\r\n\t\t\t\t\tmax_len = len;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\treturn max_len;\r\n\t\t},\r\n\t\tmax_unop_len = getMaxKeyLen(unary_ops),\r\n\t\tmax_binop_len = getMaxKeyLen(binary_ops),\r\n\t// Literals\r\n\t// ----------\r\n\t// Store the values to return for the various literals we may encounter\r\n\t\tliterals = {\r\n\t\t\t'true': true,\r\n\t\t\t'false': false,\r\n\t\t\t'null': null\r\n\t\t},\r\n\t// Except for `this`, which is special. This could be changed to something like `'self'` as well\r\n\t\tthis_str = 'this',\r\n\t// Returns the precedence of a binary operator or `0` if it isn't a binary operator\r\n\t\tbinaryPrecedence = function(op_val) {\r\n\t\t\treturn binary_ops[op_val] || 0;\r\n\t\t},\r\n\t// Utility function (gets called from multiple places)\r\n\t// Also note that `a && b` and `a || b` are *logical* expressions, not binary expressions\r\n\t\tcreateBinaryExpression = function (operator, left, right) {\r\n\t\t\tvar type = (operator === '||' || operator === '&&') ? LOGICAL_EXP : BINARY_EXP;\r\n\t\t\treturn {\r\n\t\t\t\ttype: type,\r\n\t\t\t\toperator: operator,\r\n\t\t\t\tleft: left,\r\n\t\t\t\tright: right\r\n\t\t\t};\r\n\t\t},\r\n\t\t// `ch` is a character code in the next three functions\r\n\t\tisDecimalDigit = function(ch) {\r\n\t\t\treturn (ch >= 48 && ch <= 57); // 0...9\r\n\t\t},\r\n\t\tisIdentifierStart = function(ch) {\r\n\t\t\treturn (ch === 36) || (ch === 95) || // `$` and `_`\r\n\t\t\t\t\t(ch >= 65 && ch <= 90) || // A...Z\r\n\t\t\t\t\t(ch >= 97 && ch <= 122) || // a...z\r\n                    (ch >= 128 && !binary_ops[String.fromCharCode(ch)]); // any non-ASCII that is not an operator\r\n\t\t},\r\n\t\tisIdentifierPart = function(ch) {\r\n\t\t\treturn (ch === 36) || (ch === 95) || // `$` and `_`\r\n\t\t\t\t\t(ch >= 65 && ch <= 90) || // A...Z\r\n\t\t\t\t\t(ch >= 97 && ch <= 122) || // a...z\r\n\t\t\t\t\t(ch >= 48 && ch <= 57) || // 0...9\r\n                    (ch >= 128 && !binary_ops[String.fromCharCode(ch)]); // any non-ASCII that is not an operator\r\n\t\t},\r\n\r\n\t\t// Parsing\r\n\t\t// -------\r\n\t\t// `expr` is a string with the passed in expression\r\n\t\tjsep = function(expr) {\r\n\t\t\t// `index` stores the character number we are currently at while `length` is a constant\r\n\t\t\t// All of the gobbles below will modify `index` as we move along\r\n\t\t\tvar index = 0,\r\n\t\t\t\tcharAtFunc = expr.charAt,\r\n\t\t\t\tcharCodeAtFunc = expr.charCodeAt,\r\n\t\t\t\texprI = function(i) { return charAtFunc.call(expr, i); },\r\n\t\t\t\texprICode = function(i) { return charCodeAtFunc.call(expr, i); },\r\n\t\t\t\tlength = expr.length,\r\n\r\n\t\t\t\t// Push `index` up to the next non-space character\r\n\t\t\t\tgobbleSpaces = function() {\r\n\t\t\t\t\tvar ch = exprICode(index);\r\n\t\t\t\t\t// space or tab\r\n\t\t\t\t\twhile(ch === 32 || ch === 9 || ch === 10 || ch === 13) {\r\n\t\t\t\t\t\tch = exprICode(++index);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// The main parsing function. Much of this code is dedicated to ternary expressions\r\n\t\t\t\tgobbleExpression = function() {\r\n\t\t\t\t\tvar test = gobbleBinaryExpression(),\r\n\t\t\t\t\t\tconsequent, alternate;\r\n\t\t\t\t\tgobbleSpaces();\r\n\t\t\t\t\tif(exprICode(index) === QUMARK_CODE) {\r\n\t\t\t\t\t\t// Ternary expression: test ? consequent : alternate\r\n\t\t\t\t\t\tindex++;\r\n\t\t\t\t\t\tconsequent = gobbleExpression();\r\n\t\t\t\t\t\tif(!consequent) {\r\n\t\t\t\t\t\t\tthrowError('Expected expression', index);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tgobbleSpaces();\r\n\t\t\t\t\t\tif(exprICode(index) === COLON_CODE) {\r\n\t\t\t\t\t\t\tindex++;\r\n\t\t\t\t\t\t\talternate = gobbleExpression();\r\n\t\t\t\t\t\t\tif(!alternate) {\r\n\t\t\t\t\t\t\t\tthrowError('Expected expression', index);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\ttype: CONDITIONAL_EXP,\r\n\t\t\t\t\t\t\t\ttest: test,\r\n\t\t\t\t\t\t\t\tconsequent: consequent,\r\n\t\t\t\t\t\t\t\talternate: alternate\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tthrowError('Expected :', index);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn test;\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// Search for the operation portion of the string (e.g. `+`, `===`)\r\n\t\t\t\t// Start by taking the longest possible binary operations (3 characters: `===`, `!==`, `>>>`)\r\n\t\t\t\t// and move down from 3 to 2 to 1 character until a matching binary operation is found\r\n\t\t\t\t// then, return that binary operation\r\n\t\t\t\tgobbleBinaryOp = function() {\r\n\t\t\t\t\tgobbleSpaces();\r\n\t\t\t\t\tvar biop, to_check = expr.substr(index, max_binop_len), tc_len = to_check.length;\r\n\t\t\t\t\twhile(tc_len > 0) {\r\n\t\t\t\t\t\t// Don't accept a binary op when it is an identifier.\r\n\t\t\t\t\t\t// Binary ops that start with a identifier-valid character must be followed\r\n\t\t\t\t\t\t// by a non identifier-part valid character\r\n\t\t\t\t\t\tif(binary_ops.hasOwnProperty(to_check) && (\r\n\t\t\t\t\t\t\t!isIdentifierStart(exprICode(index)) ||\r\n\t\t\t\t\t\t\t(index+to_check.length< expr.length && !isIdentifierPart(exprICode(index+to_check.length)))\r\n\t\t\t\t\t\t)) {\r\n\t\t\t\t\t\t\tindex += tc_len;\r\n\t\t\t\t\t\t\treturn to_check;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tto_check = to_check.substr(0, --tc_len);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// This function is responsible for gobbling an individual expression,\r\n\t\t\t\t// e.g. `1`, `1+2`, `a+(b*2)-Math.sqrt(2)`\r\n\t\t\t\tgobbleBinaryExpression = function() {\r\n\t\t\t\t\tvar ch_i, node, biop, prec, stack, biop_info, left, right, i;\r\n\r\n\t\t\t\t\t// First, try to get the leftmost thing\r\n\t\t\t\t\t// Then, check to see if there's a binary operator operating on that leftmost thing\r\n\t\t\t\t\tleft = gobbleToken();\r\n\t\t\t\t\tbiop = gobbleBinaryOp();\r\n\r\n\t\t\t\t\t// If there wasn't a binary operator, just return the leftmost node\r\n\t\t\t\t\tif(!biop) {\r\n\t\t\t\t\t\treturn left;\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\t// Otherwise, we need to start a stack to properly place the binary operations in their\r\n\t\t\t\t\t// precedence structure\r\n\t\t\t\t\tbiop_info = { value: biop, prec: binaryPrecedence(biop)};\r\n\r\n\t\t\t\t\tright = gobbleToken();\r\n\t\t\t\t\tif(!right) {\r\n\t\t\t\t\t\tthrowError(\"Expected expression after \" + biop, index);\r\n\t\t\t\t\t}\r\n\t\t\t\t\tstack = [left, biop_info, right];\r\n\r\n\t\t\t\t\t// Properly deal with precedence using [recursive descent](http://www.engr.mun.ca/~theo/Misc/exp_parsing.htm)\r\n\t\t\t\t\twhile((biop = gobbleBinaryOp())) {\r\n\t\t\t\t\t\tprec = binaryPrecedence(biop);\r\n\r\n\t\t\t\t\t\tif(prec === 0) {\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tbiop_info = { value: biop, prec: prec };\r\n\r\n\t\t\t\t\t\t// Reduce: make a binary expression from the three topmost entries.\r\n\t\t\t\t\t\twhile ((stack.length > 2) && (prec <= stack[stack.length - 2].prec)) {\r\n\t\t\t\t\t\t\tright = stack.pop();\r\n\t\t\t\t\t\t\tbiop = stack.pop().value;\r\n\t\t\t\t\t\t\tleft = stack.pop();\r\n\t\t\t\t\t\t\tnode = createBinaryExpression(biop, left, right);\r\n\t\t\t\t\t\t\tstack.push(node);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tnode = gobbleToken();\r\n\t\t\t\t\t\tif(!node) {\r\n\t\t\t\t\t\t\tthrowError(\"Expected expression after \" + biop, index);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tstack.push(biop_info, node);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\ti = stack.length - 1;\r\n\t\t\t\t\tnode = stack[i];\r\n\t\t\t\t\twhile(i > 1) {\r\n\t\t\t\t\t\tnode = createBinaryExpression(stack[i - 1].value, stack[i - 2], node);\r\n\t\t\t\t\t\ti -= 2;\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn node;\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// An individual part of a binary expression:\r\n\t\t\t\t// e.g. `foo.bar(baz)`, `1`, `\"abc\"`, `(a % 2)` (because it's in parenthesis)\r\n\t\t\t\tgobbleToken = function() {\r\n\t\t\t\t\tvar ch, to_check, tc_len;\r\n\r\n\t\t\t\t\tgobbleSpaces();\r\n\t\t\t\t\tch = exprICode(index);\r\n\r\n\t\t\t\t\tif(isDecimalDigit(ch) || ch === PERIOD_CODE) {\r\n\t\t\t\t\t\t// Char code 46 is a dot `.` which can start off a numeric literal\r\n\t\t\t\t\t\treturn gobbleNumericLiteral();\r\n\t\t\t\t\t} else if(ch === SQUOTE_CODE || ch === DQUOTE_CODE) {\r\n\t\t\t\t\t\t// Single or double quotes\r\n\t\t\t\t\t\treturn gobbleStringLiteral();\r\n\t\t\t\t\t} else if (ch === OBRACK_CODE) {\r\n\t\t\t\t\t\treturn gobbleArray();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tto_check = expr.substr(index, max_unop_len);\r\n\t\t\t\t\t\ttc_len = to_check.length;\r\n\t\t\t\t\t\twhile(tc_len > 0) {\r\n\t\t\t\t\t\t// Don't accept an unary op when it is an identifier.\r\n\t\t\t\t\t\t// Unary ops that start with a identifier-valid character must be followed\r\n\t\t\t\t\t\t// by a non identifier-part valid character\r\n\t\t\t\t\t\t\tif(unary_ops.hasOwnProperty(to_check) && (\r\n\t\t\t\t\t\t\t\t!isIdentifierStart(exprICode(index)) ||\r\n\t\t\t\t\t\t\t\t(index+to_check.length < expr.length && !isIdentifierPart(exprICode(index+to_check.length)))\r\n\t\t\t\t\t\t\t)) {\r\n\t\t\t\t\t\t\t\tindex += tc_len;\r\n\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\ttype: UNARY_EXP,\r\n\t\t\t\t\t\t\t\t\toperator: to_check,\r\n\t\t\t\t\t\t\t\t\targument: gobbleToken(),\r\n\t\t\t\t\t\t\t\t\tprefix: true\r\n\t\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tto_check = to_check.substr(0, --tc_len);\r\n\t\t\t\t\t\t}\r\n\r\n\t\t\t\t\t\tif (isIdentifierStart(ch) || ch === OPAREN_CODE) { // open parenthesis\r\n\t\t\t\t\t\t\t// `foo`, `bar.baz`\r\n\t\t\t\t\t\t\treturn gobbleVariable();\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t},\r\n\t\t\t\t// Parse simple numeric literals: `12`, `3.4`, `.5`. Do this by using a string to\r\n\t\t\t\t// keep track of everything in the numeric literal and then calling `parseFloat` on that string\r\n\t\t\t\tgobbleNumericLiteral = function() {\r\n\t\t\t\t\tvar number = '', ch, chCode;\r\n\t\t\t\t\twhile(isDecimalDigit(exprICode(index))) {\r\n\t\t\t\t\t\tnumber += exprI(index++);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(exprICode(index) === PERIOD_CODE) { // can start with a decimal marker\r\n\t\t\t\t\t\tnumber += exprI(index++);\r\n\r\n\t\t\t\t\t\twhile(isDecimalDigit(exprICode(index))) {\r\n\t\t\t\t\t\t\tnumber += exprI(index++);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tch = exprI(index);\r\n\t\t\t\t\tif(ch === 'e' || ch === 'E') { // exponent marker\r\n\t\t\t\t\t\tnumber += exprI(index++);\r\n\t\t\t\t\t\tch = exprI(index);\r\n\t\t\t\t\t\tif(ch === '+' || ch === '-') { // exponent sign\r\n\t\t\t\t\t\t\tnumber += exprI(index++);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\twhile(isDecimalDigit(exprICode(index))) { //exponent itself\r\n\t\t\t\t\t\t\tnumber += exprI(index++);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif(!isDecimalDigit(exprICode(index-1)) ) {\r\n\t\t\t\t\t\t\tthrowError('Expected exponent (' + number + exprI(index) + ')', index);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\r\n\t\t\t\t\tchCode = exprICode(index);\r\n\t\t\t\t\t// Check to make sure this isn't a variable name that start with a number (123abc)\r\n\t\t\t\t\tif(isIdentifierStart(chCode)) {\r\n\t\t\t\t\t\tthrowError('Variable names cannot start with a number (' +\r\n\t\t\t\t\t\t\t\t\tnumber + exprI(index) + ')', index);\r\n\t\t\t\t\t} else if(chCode === PERIOD_CODE) {\r\n\t\t\t\t\t\tthrowError('Unexpected period', index);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\ttype: LITERAL,\r\n\t\t\t\t\t\tvalue: parseFloat(number),\r\n\t\t\t\t\t\traw: number\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// Parses a string literal, staring with single or double quotes with basic support for escape codes\r\n\t\t\t\t// e.g. `\"hello world\"`, `'this is\\nJSEP'`\r\n\t\t\t\tgobbleStringLiteral = function() {\r\n\t\t\t\t\tvar str = '', quote = exprI(index++), closed = false, ch;\r\n\r\n\t\t\t\t\twhile(index < length) {\r\n\t\t\t\t\t\tch = exprI(index++);\r\n\t\t\t\t\t\tif(ch === quote) {\r\n\t\t\t\t\t\t\tclosed = true;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t} else if(ch === '\\\\') {\r\n\t\t\t\t\t\t\t// Check for all of the common escape codes\r\n\t\t\t\t\t\t\tch = exprI(index++);\r\n\t\t\t\t\t\t\tswitch(ch) {\r\n\t\t\t\t\t\t\t\tcase 'n': str += '\\n'; break;\r\n\t\t\t\t\t\t\t\tcase 'r': str += '\\r'; break;\r\n\t\t\t\t\t\t\t\tcase 't': str += '\\t'; break;\r\n\t\t\t\t\t\t\t\tcase 'b': str += '\\b'; break;\r\n\t\t\t\t\t\t\t\tcase 'f': str += '\\f'; break;\r\n\t\t\t\t\t\t\t\tcase 'v': str += '\\x0B'; break;\r\n\t\t\t\t\t\t\t\tdefault : str += ch;\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tstr += ch;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\tif(!closed) {\r\n\t\t\t\t\t\tthrowError('Unclosed quote after \"'+str+'\"', index);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\ttype: LITERAL,\r\n\t\t\t\t\t\tvalue: str,\r\n\t\t\t\t\t\traw: quote + str + quote\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// Gobbles only identifiers\r\n\t\t\t\t// e.g.: `foo`, `_value`, `$x1`\r\n\t\t\t\t// Also, this function checks if that identifier is a literal:\r\n\t\t\t\t// (e.g. `true`, `false`, `null`) or `this`\r\n\t\t\t\tgobbleIdentifier = function() {\r\n\t\t\t\t\tvar ch = exprICode(index), start = index, identifier;\r\n\r\n\t\t\t\t\tif(isIdentifierStart(ch)) {\r\n\t\t\t\t\t\tindex++;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthrowError('Unexpected ' + exprI(index), index);\r\n\t\t\t\t\t}\r\n\r\n\t\t\t\t\twhile(index < length) {\r\n\t\t\t\t\t\tch = exprICode(index);\r\n\t\t\t\t\t\tif(isIdentifierPart(ch)) {\r\n\t\t\t\t\t\t\tindex++;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tidentifier = expr.slice(start, index);\r\n\r\n\t\t\t\t\tif(literals.hasOwnProperty(identifier)) {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\ttype: LITERAL,\r\n\t\t\t\t\t\t\tvalue: literals[identifier],\r\n\t\t\t\t\t\t\traw: identifier\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t} else if(identifier === this_str) {\r\n\t\t\t\t\t\treturn { type: THIS_EXP };\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\ttype: IDENTIFIER,\r\n\t\t\t\t\t\t\tname: identifier\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// Gobbles a list of arguments within the context of a function call\r\n\t\t\t\t// or array literal. This function also assumes that the opening character\r\n\t\t\t\t// `(` or `[` has already been gobbled, and gobbles expressions and commas\r\n\t\t\t\t// until the terminator character `)` or `]` is encountered.\r\n\t\t\t\t// e.g. `foo(bar, baz)`, `my_func()`, or `[bar, baz]`\r\n\t\t\t\tgobbleArguments = function(termination) {\r\n\t\t\t\t\tvar ch_i, args = [], node, closed = false;\r\n\t\t\t\t\twhile(index < length) {\r\n\t\t\t\t\t\tgobbleSpaces();\r\n\t\t\t\t\t\tch_i = exprICode(index);\r\n\t\t\t\t\t\tif(ch_i === termination) { // done parsing\r\n\t\t\t\t\t\t\tclosed = true;\r\n\t\t\t\t\t\t\tindex++;\r\n\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t} else if (ch_i === COMMA_CODE) { // between expressions\r\n\t\t\t\t\t\t\tindex++;\r\n\t\t\t\t\t\t} else {\r\n\t\t\t\t\t\t\tnode = gobbleExpression();\r\n\t\t\t\t\t\t\tif(!node || node.type === COMPOUND) {\r\n\t\t\t\t\t\t\t\tthrowError('Expected comma', index);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\targs.push(node);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\tif (!closed) {\r\n\t\t\t\t\t\tthrowError('Expected ' + String.fromCharCode(termination), index);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn args;\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// Gobble a non-literal variable name. This variable name may include properties\r\n\t\t\t\t// e.g. `foo`, `bar.baz`, `foo['bar'].baz`\r\n\t\t\t\t// It also gobbles function calls:\r\n\t\t\t\t// e.g. `Math.acos(obj.angle)`\r\n\t\t\t\tgobbleVariable = function() {\r\n\t\t\t\t\tvar ch_i, node;\r\n\t\t\t\t\tch_i = exprICode(index);\r\n\r\n\t\t\t\t\tif(ch_i === OPAREN_CODE) {\r\n\t\t\t\t\t\tnode = gobbleGroup();\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tnode = gobbleIdentifier();\r\n\t\t\t\t\t}\r\n\t\t\t\t\tgobbleSpaces();\r\n\t\t\t\t\tch_i = exprICode(index);\r\n\t\t\t\t\twhile(ch_i === PERIOD_CODE || ch_i === OBRACK_CODE || ch_i === OPAREN_CODE) {\r\n\t\t\t\t\t\tindex++;\r\n\t\t\t\t\t\tif(ch_i === PERIOD_CODE) {\r\n\t\t\t\t\t\t\tgobbleSpaces();\r\n\t\t\t\t\t\t\tnode = {\r\n\t\t\t\t\t\t\t\ttype: MEMBER_EXP,\r\n\t\t\t\t\t\t\t\tcomputed: false,\r\n\t\t\t\t\t\t\t\tobject: node,\r\n\t\t\t\t\t\t\t\tproperty: gobbleIdentifier()\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t} else if(ch_i === OBRACK_CODE) {\r\n\t\t\t\t\t\t\tnode = {\r\n\t\t\t\t\t\t\t\ttype: MEMBER_EXP,\r\n\t\t\t\t\t\t\t\tcomputed: true,\r\n\t\t\t\t\t\t\t\tobject: node,\r\n\t\t\t\t\t\t\t\tproperty: gobbleExpression()\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t\tgobbleSpaces();\r\n\t\t\t\t\t\t\tch_i = exprICode(index);\r\n\t\t\t\t\t\t\tif(ch_i !== CBRACK_CODE) {\r\n\t\t\t\t\t\t\t\tthrowError('Unclosed [', index);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\tindex++;\r\n\t\t\t\t\t\t} else if(ch_i === OPAREN_CODE) {\r\n\t\t\t\t\t\t\t// A function call is being made; gobble all the arguments\r\n\t\t\t\t\t\t\tnode = {\r\n\t\t\t\t\t\t\t\ttype: CALL_EXP,\r\n\t\t\t\t\t\t\t\t'arguments': gobbleArguments(CPAREN_CODE),\r\n\t\t\t\t\t\t\t\tcallee: node\r\n\t\t\t\t\t\t\t};\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tgobbleSpaces();\r\n\t\t\t\t\t\tch_i = exprICode(index);\r\n\t\t\t\t\t}\r\n\t\t\t\t\treturn node;\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// Responsible for parsing a group of things within parentheses `()`\r\n\t\t\t\t// This function assumes that it needs to gobble the opening parenthesis\r\n\t\t\t\t// and then tries to gobble everything within that parenthesis, assuming\r\n\t\t\t\t// that the next thing it should see is the close parenthesis. If not,\r\n\t\t\t\t// then the expression probably doesn't have a `)`\r\n\t\t\t\tgobbleGroup = function() {\r\n\t\t\t\t\tindex++;\r\n\t\t\t\t\tvar node = gobbleExpression();\r\n\t\t\t\t\tgobbleSpaces();\r\n\t\t\t\t\tif(exprICode(index) === CPAREN_CODE) {\r\n\t\t\t\t\t\tindex++;\r\n\t\t\t\t\t\treturn node;\r\n\t\t\t\t\t} else {\r\n\t\t\t\t\t\tthrowError('Unclosed (', index);\r\n\t\t\t\t\t}\r\n\t\t\t\t},\r\n\r\n\t\t\t\t// Responsible for parsing Array literals `[1, 2, 3]`\r\n\t\t\t\t// This function assumes that it needs to gobble the opening bracket\r\n\t\t\t\t// and then tries to gobble the expressions as arguments.\r\n\t\t\t\tgobbleArray = function() {\r\n\t\t\t\t\tindex++;\r\n\t\t\t\t\treturn {\r\n\t\t\t\t\t\ttype: ARRAY_EXP,\r\n\t\t\t\t\t\telements: gobbleArguments(CBRACK_CODE)\r\n\t\t\t\t\t};\r\n\t\t\t\t},\r\n\r\n\t\t\t\tnodes = [], ch_i, node;\r\n\r\n\t\t\twhile(index < length) {\r\n\t\t\t\tch_i = exprICode(index);\r\n\r\n\t\t\t\t// Expressions can be separated by semicolons, commas, or just inferred without any\r\n\t\t\t\t// separators\r\n\t\t\t\tif(ch_i === SEMCOL_CODE || ch_i === COMMA_CODE) {\r\n\t\t\t\t\tindex++; // ignore separators\r\n\t\t\t\t} else {\r\n\t\t\t\t\t// Try to gobble each expression individually\r\n\t\t\t\t\tif((node = gobbleExpression())) {\r\n\t\t\t\t\t\tnodes.push(node);\r\n\t\t\t\t\t// If we weren't able to find a binary expression and are out of room, then\r\n\t\t\t\t\t// the expression passed in probably has too much\r\n\t\t\t\t\t} else if(index < length) {\r\n\t\t\t\t\t\tthrowError('Unexpected \"' + exprI(index) + '\"', index);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// If there's only one expression just try returning the expression\r\n\t\t\tif(nodes.length === 1) {\r\n\t\t\t\treturn nodes[0];\r\n\t\t\t} else {\r\n\t\t\t\treturn {\r\n\t\t\t\t\ttype: COMPOUND,\r\n\t\t\t\t\tbody: nodes\r\n\t\t\t\t};\r\n\t\t\t}\r\n\t\t};\r\n\r\n\t// To be filled in by the template\r\n\tjsep.version = '0.3.4';\r\n\tjsep.toString = function() { return 'JavaScript Expression Parser (JSEP) v' + jsep.version; };\r\n\r\n\t/**\r\n\t * @method jsep.addUnaryOp\r\n\t * @param {string} op_name The name of the unary op to add\r\n\t * @return jsep\r\n\t */\r\n\tjsep.addUnaryOp = function(op_name) {\r\n\t\tmax_unop_len = Math.max(op_name.length, max_unop_len);\r\n\t\tunary_ops[op_name] = t; return this;\r\n\t};\r\n\r\n\t/**\r\n\t * @method jsep.addBinaryOp\r\n\t * @param {string} op_name The name of the binary op to add\r\n\t * @param {number} precedence The precedence of the binary op (can be a float)\r\n\t * @return jsep\r\n\t */\r\n\tjsep.addBinaryOp = function(op_name, precedence) {\r\n\t\tmax_binop_len = Math.max(op_name.length, max_binop_len);\r\n\t\tbinary_ops[op_name] = precedence;\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * @method jsep.addLiteral\r\n\t * @param {string} literal_name The name of the literal to add\r\n\t * @param {*} literal_value The value of the literal\r\n\t * @return jsep\r\n\t */\r\n\tjsep.addLiteral = function(literal_name, literal_value) {\r\n\t\tliterals[literal_name] = literal_value;\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * @method jsep.removeUnaryOp\r\n\t * @param {string} op_name The name of the unary op to remove\r\n\t * @return jsep\r\n\t */\r\n\tjsep.removeUnaryOp = function(op_name) {\r\n\t\tdelete unary_ops[op_name];\r\n\t\tif(op_name.length === max_unop_len) {\r\n\t\t\tmax_unop_len = getMaxKeyLen(unary_ops);\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * @method jsep.removeAllUnaryOps\r\n\t * @return jsep\r\n\t */\r\n\tjsep.removeAllUnaryOps = function() {\r\n\t\tunary_ops = {};\r\n\t\tmax_unop_len = 0;\r\n\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * @method jsep.removeBinaryOp\r\n\t * @param {string} op_name The name of the binary op to remove\r\n\t * @return jsep\r\n\t */\r\n\tjsep.removeBinaryOp = function(op_name) {\r\n\t\tdelete binary_ops[op_name];\r\n\t\tif(op_name.length === max_binop_len) {\r\n\t\t\tmax_binop_len = getMaxKeyLen(binary_ops);\r\n\t\t}\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * @method jsep.removeAllBinaryOps\r\n\t * @return jsep\r\n\t */\r\n\tjsep.removeAllBinaryOps = function() {\r\n\t\tbinary_ops = {};\r\n\t\tmax_binop_len = 0;\r\n\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * @method jsep.removeLiteral\r\n\t * @param {string} literal_name The name of the literal to remove\r\n\t * @return jsep\r\n\t */\r\n\tjsep.removeLiteral = function(literal_name) {\r\n\t\tdelete literals[literal_name];\r\n\t\treturn this;\r\n\t};\r\n\r\n\t/**\r\n\t * @method jsep.removeAllLiterals\r\n\t * @return jsep\r\n\t */\r\n\tjsep.removeAllLiterals = function() {\r\n\t\tliterals = {};\r\n\r\n\t\treturn this;\r\n\t};\r\n\r\n\t// In desktop environments, have a way to restore the old value for `jsep`\r\n\tif (typeof exports === 'undefined') {\r\n\t\tvar old_jsep = root.jsep;\r\n\t\t// The star of the show! It's a function!\r\n\t\troot.jsep = jsep;\r\n\t\t// And a courteous function willing to move out of the way for other similarly-named objects!\r\n\t\tjsep.noConflict = function() {\r\n\t\t\tif(root.jsep === jsep) {\r\n\t\t\t\troot.jsep = old_jsep;\r\n\t\t\t}\r\n\t\t\treturn jsep;\r\n\t\t};\r\n\t} else {\r\n\t\t// In Node.JS environments\r\n\t\tif (typeof module !== 'undefined' && module.exports) {\r\n\t\t\texports = module.exports = jsep;\r\n\t\t} else {\r\n\t\t\texports.parse = jsep;\r\n\t\t}\r\n\t}\r\n}(this));\r\n","import {Vector2} from 'three/src/math/Vector2';\nimport {Color} from 'three/src/math/Color';\nimport {BaseNodeType} from '../_Base';\nimport {NodeEvent} from '../../poly/NodeEvent';\n\nexport interface NodeUIDataJson {\n\tx: number;\n\ty: number;\n\tcomment?: string;\n}\n\nexport class UIData {\n\tprivate _position: Vector2 = new Vector2();\n\tprivate _width: number = 50;\n\tprivate _border_radius: number = 3;\n\tprivate _color: Color = new Color(0.75, 0.75, 0.75);\n\t// private _icon: string | null = null;\n\tprivate _layout_vertical: boolean = true;\n\tprivate _comment: string | undefined;\n\tprivate _json: NodeUIDataJson = {\n\t\tx: 0,\n\t\ty: 0,\n\t};\n\n\tconstructor(private node: BaseNodeType, x: number = 0, y: number = 0) {\n\t\tthis._position.x = x;\n\t\tthis._position.y = y;\n\t}\n\n\tset_border_radius(radius: number) {\n\t\tthis._border_radius = radius;\n\t}\n\tborder_radius() {\n\t\treturn this._border_radius;\n\t}\n\tset_width(width: number) {\n\t\tthis._width = width;\n\t}\n\twidth() {\n\t\treturn this._width;\n\t}\n\tset_comment(comment: string | undefined) {\n\t\tthis._comment = comment;\n\t\tthis.node.emit(NodeEvent.UI_DATA_COMMENT_UPDATED);\n\t}\n\tget comment(): string | undefined {\n\t\treturn this._comment;\n\t}\n\tset_color(color: Color) {\n\t\tthis._color = color;\n\t}\n\tcolor() {\n\t\treturn this._color;\n\t}\n\t// set_icon(icon: string) {\n\t// \tthis._icon = icon;\n\t// }\n\t// icon() {\n\t// \treturn this._icon;\n\t// }\n\tset_layout_horizontal() {\n\t\tthis._layout_vertical = false;\n\t}\n\tis_layout_vertical() {\n\t\treturn this._layout_vertical;\n\t}\n\n\tcopy(ui_data: UIData) {\n\t\tthis._position.copy(ui_data.position);\n\t\tthis._color.copy(ui_data.color());\n\t}\n\n\tget position() {\n\t\treturn this._position;\n\t}\n\n\tset_position(new_position: Vector2 | number, y: number = 0) {\n\t\tif (new_position instanceof Vector2) {\n\t\t\tthis._position.copy(new_position);\n\t\t} else {\n\t\t\tconst x = new_position;\n\t\t\tthis._position.set(x, y);\n\t\t}\n\t\tthis.node.emit(NodeEvent.UI_DATA_POSITION_UPDATED);\n\t}\n\n\ttranslate(offset: Vector2, snap: boolean = false) {\n\t\tthis._position.add(offset);\n\n\t\tif (snap) {\n\t\t\tthis._position.x = Math.round(this._position.x);\n\t\t\tthis._position.y = Math.round(this._position.y);\n\t\t}\n\n\t\tthis.node.emit(NodeEvent.UI_DATA_POSITION_UPDATED);\n\t}\n\t// arguments_to_vector(x: number,y: number){\n\t// \tif (arguments.length === 2) {\n\t// \t\tthis._position.x = arguments[0];\n\t// \t\tthis._position.y = arguments[1];\n\t// \t} else {\n\t// \t\tthis._position.x = new_position.x;\n\t// \t\tthis._position.y = new_position.y;\n\t// \t}\n\t// }\n\tto_json(): NodeUIDataJson {\n\t\tthis._json.x = this._position.x;\n\t\tthis._json.y = this._position.y;\n\t\tthis._json.comment = this._comment;\n\t\treturn this._json;\n\t}\n}\n","import {BaseNodeType} from '../../_Base';\n\nexport class BaseState {\n\tconstructor(protected node: BaseNodeType) {}\n}\n","import {BaseState} from './Base';\n\nexport class TimeDependentState extends BaseState {\n\tget active() {\n\t\treturn this.are_params_time_dependent() || this.are_inputs_time_dependent();\n\t}\n\n\tare_params_time_dependent(): boolean {\n\t\tconst param_names = this.node.params.names;\n\t\tfor (let param_name of param_names) {\n\t\t\tconst param = this.node.params.get(param_name);\n\t\t\tif (param && param.states.time_dependent.active) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tare_inputs_time_dependent(): boolean {\n\t\tconst inputs = this.node.io.inputs.inputs();\n\t\tfor (let input of inputs) {\n\t\t\tif (input && input.states.time_dependent.active) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tforce_time_dependent() {\n\t\tconst predecessor_ids = this.node.graph_predecessors().map((n) => n.graph_node_id);\n\t\tconst frame_node = this.node.scene.time_controller.graph_node; // context();\n\t\tif (!predecessor_ids.includes(frame_node.graph_node_id)) {\n\t\t\tthis.node.add_graph_input(frame_node);\n\t\t}\n\t}\n\tunforce_time_dependent() {\n\t\tconst frame_node = this.node.scene.time_controller.graph_node;\n\t\tthis.node.remove_graph_input(frame_node);\n\t}\n}\n","import {NodeEvent} from '../../../poly/NodeEvent';\nimport {BaseState} from './Base';\n\nexport class ErrorState extends BaseState {\n\tprivate _message: string | undefined;\n\n\tset(message: string | undefined) {\n\t\tif (this._message != message) {\n\t\t\tconsole.warn('error', message, this.node.full_path());\n\t\t\tthis._message = message;\n\t\t\tthis.on_update();\n\t\t}\n\t}\n\tget message() {\n\t\treturn this._message;\n\t}\n\tclear() {\n\t\tthis.set(undefined);\n\t}\n\tget active(): boolean {\n\t\treturn this._message != null;\n\t}\n\n\tprotected on_update() {\n\t\tif (this._message != null) {\n\t\t\t// console.warn(\"new error\", message, this.self.full_path())\n\t\t\tthis.node.set_container(null, `from error '${this._message}'`);\n\t\t}\n\n\t\tthis.node.emit(NodeEvent.ERROR_UPDATED);\n\t}\n}\n","import {BaseNodeType} from '../_Base';\n\nimport {TimeDependentState} from './states/TimeDependent';\nimport {ErrorState} from './states/Error';\n\nexport class StatesController {\n\ttime_dependent = new TimeDependentState(this.node);\n\terror = new ErrorState(this.node);\n\tconstructor(protected node: BaseNodeType) {}\n}\n","import {BaseNodeType} from '../_Base';\nimport lodash_isNaN from 'lodash/isNaN';\nimport {CoreGraphNode} from '../../../core/graph/CoreGraphNode';\nimport {NodeEvent} from '../../poly/NodeEvent';\n\ntype Callback = () => void;\n\nexport class NameController {\n\tprivate _graph_node: CoreGraphNode;\n\tprivate _on_set_name_hooks: Callback[] | undefined;\n\tprivate _on_set_full_path_hooks: Callback[] | undefined;\n\n\tconstructor(protected node: BaseNodeType) {\n\t\tthis._graph_node = new CoreGraphNode(node.scene, 'node_name_controller');\n\t\t// this._graph_node.set_scene(this.node.scene);\n\t}\n\tget graph_node() {\n\t\treturn this._graph_node;\n\t}\n\n\tstatic base_name(node: BaseNodeType) {\n\t\tlet base = node.type; //CoreString.class_name_to_type(this.self.type())\n\t\tconst last_char = base[base.length - 1];\n\t\tif (!lodash_isNaN(parseInt(last_char))) {\n\t\t\tbase += '_';\n\t\t}\n\t\treturn `${base}1`;\n\t}\n\n\trequest_name_to_parent(new_name: string) {\n\t\tconst parent = this.node.parent;\n\t\tif (parent && parent.children_allowed() && parent.children_controller) {\n\t\t\tparent.children_controller.set_child_name(this.node, new_name);\n\t\t} else {\n\t\t\tconsole.warn('request_name_to_parent failed, no parent found');\n\t\t}\n\t}\n\tset_name(new_name: string) {\n\t\tif (new_name != this.node.name) {\n\t\t\tthis.request_name_to_parent(new_name);\n\t\t}\n\t}\n\tupdate_name_from_parent(new_name: string) {\n\t\tthis.node._set_core_name(new_name);\n\t\tthis.post_set_name();\n\t\tthis.post_set_full_path();\n\t\tif (this.node.children_allowed()) {\n\t\t\tthis.node.children_controller?.children().forEach((child_node) => {\n\t\t\t\tchild_node.name_controller.post_set_full_path(); // TODO: typescript: replace post_set_full_path with execute_on_update_full_path_hooks or on_update_full_path\n\t\t\t});\n\t\t}\n\n\t\tif (this.node.lifecycle.creation_completed) {\n\t\t\tthis.node.scene.missing_expression_references_controller.check_for_missing_references(this.node);\n\t\t\tthis.node.scene.expressions_controller.regenerate_referring_expressions(this.node);\n\t\t}\n\t\tthis.node.emit(NodeEvent.NAME_UPDATED);\n\t}\n\n\tadd_post_set_name_hook(hook: Callback) {\n\t\tthis._on_set_name_hooks = this._on_set_name_hooks || [];\n\t\tthis._on_set_name_hooks.push(hook);\n\t}\n\tadd_post_set_full_path_hook(hook: Callback) {\n\t\tthis._on_set_full_path_hooks = this._on_set_full_path_hooks || [];\n\t\tthis._on_set_full_path_hooks.push(hook);\n\t}\n\n\tpost_set_name() {\n\t\tif (this._on_set_name_hooks) {\n\t\t\tfor (let hook of this._on_set_name_hooks) {\n\t\t\t\thook();\n\t\t\t}\n\t\t}\n\t}\n\tpost_set_full_path() {\n\t\tif (this._on_set_full_path_hooks) {\n\t\t\tfor (let hook of this._on_set_full_path_hooks) {\n\t\t\t\thook();\n\t\t\t}\n\t\t}\n\t}\n}\n","import {BaseNodeType} from '../../_Base';\nimport {NameController} from '../NameController';\n\ntype Callback = () => void;\nimport {CoreWalker} from '../../../../core/Walker';\n\nexport class HierarchyParentController {\n\tprivate _parent: BaseNodeType | null = null;\n\tprivate _on_set_parent_hooks: Callback[] | undefined;\n\n\tconstructor(protected node: BaseNodeType) {}\n\n\tget parent() {\n\t\treturn this._parent;\n\t}\n\n\tset_parent(parent: BaseNodeType | null) {\n\t\tif (parent != this.node.parent_controller.parent) {\n\t\t\tthis._parent = parent;\n\t\t\tif (this._parent) {\n\t\t\t\t// this.node.set_scene(this._parent.scene);\n\t\t\t\tthis.node.name_controller.request_name_to_parent(NameController.base_name(this.node));\n\t\t\t}\n\t\t\t// this.on_set_parent();\n\t\t}\n\t}\n\tis_selected(): boolean {\n\t\treturn this.parent?.children_controller?.selection?.contains(this.node) || false;\n\t}\n\tfull_path(): string {\n\t\tconst separator = CoreWalker.SEPARATOR;\n\t\tif (this._parent != null) {\n\t\t\tconst parent_full_path = this._parent.full_path();\n\t\t\tif (parent_full_path === separator) {\n\t\t\t\treturn parent_full_path + this.node.name;\n\t\t\t} else {\n\t\t\t\treturn parent_full_path + separator + this.node.name;\n\t\t\t}\n\t\t} else {\n\t\t\treturn separator;\n\t\t}\n\t}\n\n\ton_set_parent() {\n\t\tif (this._on_set_parent_hooks) {\n\t\t\tfor (let hook of this._on_set_parent_hooks) {\n\t\t\t\thook();\n\t\t\t}\n\t\t}\n\t}\n\tfind_node(path: string): BaseNodeType | null {\n\t\t// if (!this._children_allowed) {\n\t\t// \treturn null;\n\t\t// }\n\t\tif (path == null) {\n\t\t\treturn null;\n\t\t}\n\t\tif (path === CoreWalker.CURRENT || path === CoreWalker.CURRENT_WITH_SLASH) {\n\t\t\treturn this.node;\n\t\t}\n\t\tif (path === CoreWalker.PARENT || path === CoreWalker.PARENT_WITH_SLASH) {\n\t\t\treturn this.node.parent;\n\t\t}\n\n\t\tconst separator = CoreWalker.SEPARATOR;\n\t\tif (path[0] === separator) {\n\t\t\tpath = path.substring(1, path.length);\n\t\t}\n\n\t\tconst elements = path.split(separator);\n\t\tif (elements.length === 1) {\n\t\t\tconst name = elements[0];\n\t\t\tif (this.node.children_controller) {\n\t\t\t\treturn this.node.children_controller.child_by_name(name);\n\t\t\t} else {\n\t\t\t\treturn null;\n\t\t\t}\n\t\t} else {\n\t\t\treturn CoreWalker.find_node(this.node, path);\n\t\t}\n\t}\n}\n","// import UIData from './UIData';\nimport {BaseNodeType} from '../engine/nodes/_Base';\nimport lodash_difference from 'lodash/difference';\nimport lodash_union from 'lodash/union';\n// import lodash_isArray from 'lodash/isArray'\nimport lodash_isEqual from 'lodash/isEqual';\nimport {NodeEvent} from '../engine/poly/NodeEvent';\n\nexport class CoreNodeSelection {\n\t_node_ids: string[] = [];\n\tconstructor(private _node: BaseNodeType) {\n\t\t// super();\n\t\t// this._node_ids = [];\n\t}\n\n\tnode() {\n\t\treturn this._node;\n\t}\n\n\tnodes(): BaseNodeType[] {\n\t\treturn this._node.scene.graph.nodes_from_ids(this._node_ids) as BaseNodeType[];\n\t}\n\n\tcontains(node: BaseNodeType): boolean {\n\t\treturn this._node_ids.includes(node.graph_node_id);\n\t}\n\tequals(nodes: BaseNodeType[]): boolean {\n\t\tconst node_ids = nodes.map((node) => node.graph_node_id).sort();\n\t\treturn lodash_isEqual(node_ids, this._node_ids);\n\t}\n\n\tclear() {\n\t\tthis._node_ids = [];\n\t\tthis.send_update_event();\n\t}\n\tset(nodes: BaseNodeType[]) {\n\t\t// this.remove(this.nodes());\n\t\tthis._node_ids = [];\n\t\tthis.add(nodes);\n\t}\n\n\tadd(nodes_to_add: BaseNodeType[]) {\n\t\t// if (!lodash_isArray(nodes_to_add)) { nodes_to_add = [nodes_to_add]; }\n\n\t\tconst node_ids_to_add = nodes_to_add.map((node) => node.graph_node_id);\n\t\tthis._node_ids = lodash_union(this._node_ids, node_ids_to_add);\n\n\t\tthis.send_update_event();\n\t}\n\n\tremove(nodes_to_remove: BaseNodeType[]) {\n\t\t// if (!lodash_isArray(nodes_to_remove)) { nodes_to_remove = [nodes_to_remove]; }\n\n\t\tconst node_ids_to_remove = nodes_to_remove.map((node) => node.graph_node_id);\n\t\tthis._node_ids = lodash_difference(this._node_ids, node_ids_to_remove);\n\n\t\tthis.send_update_event();\n\t}\n\n\tprivate send_update_event() {\n\t\tthis._node.emit(NodeEvent.SELECTION_UPDATED);\n\t}\n\n\tprivate _json: string[] = [];\n\tto_json() {\n\t\tthis._json = this._json || [];\n\t\tthis._json = this._node_ids.map((id) => id);\n\t\treturn this._json;\n\t}\n}\n","import {CoreString} from '../../../../core/String';\n\nimport {BaseNodeType} from '../../_Base';\nimport {CoreGraphNode} from '../../../../core/graph/CoreGraphNode';\n\nimport lodash_includes from 'lodash/includes';\nimport lodash_keys from 'lodash/keys';\nimport lodash_sortBy from 'lodash/sortBy';\nimport lodash_values from 'lodash/values';\nimport {NodeEvent} from '../../../poly/NodeEvent';\nimport {NodeContext} from '../../../poly/NodeContext';\nimport {NameController} from '../NameController';\nimport {CoreNodeSelection} from '../../../../core/NodeSelection';\n\nimport {Poly} from '../../../Poly';\n// import {NameController} from '../NameController';\n\n// interface HierarchyOptions {\n// \tcontext: NodeContext\n// \tdependent?: boolean;\n// }\nconst NODE_SIMPLE_NAME = 'children';\n\nexport class HierarchyChildrenController {\n\t// private _context: NodeContext | undefined;\n\t// private _children_allowed: boolean = false;\n\tprivate _children: Dictionary<BaseNodeType> = {};\n\tprivate _children_by_type: Dictionary<string[]> = {};\n\tprivate _children_and_grandchildren_by_context: Dictionary<string[]> = {};\n\n\tprivate _is_dependent_on_children: boolean = false;\n\tprivate _children_node: CoreGraphNode | undefined;\n\n\tprivate _selection: CoreNodeSelection | undefined;\n\tget selection(): CoreNodeSelection {\n\t\treturn (this._selection = this._selection || new CoreNodeSelection(this.node));\n\t}\n\tconstructor(protected node: BaseNodeType, private _context: NodeContext) {}\n\tget context() {\n\t\treturn this._context;\n\t}\n\tinit(dependent: boolean = false) {\n\t\t// const context = this.node.children_context();\n\t\t// if (context) {\n\t\t// this._available_children_classes = options['children'] || {};\n\t\t// this._available_children_classes = window.POLY.registered_nodes(context, this.self.type())\n\n\t\t// this._children_allowed = true;\n\t\tthis._children = {};\n\n\t\t// const is_dependent = options['dependent'];\n\t\tif (dependent) {\n\t\t\tthis._is_dependent_on_children = dependent;\n\t\t\tif (this._is_dependent_on_children) {\n\t\t\t\tthis._children_node = new CoreGraphNode(this.node.scene, NODE_SIMPLE_NAME);\n\t\t\t\t// this._children_node.set_scene(this.node.scene);\n\t\t\t\tthis.node.add_graph_input(this._children_node);\n\t\t\t}\n\t\t}\n\t\t// }\n\t}\n\n\t// TODO: when copy pasting a node called bla_11, the next one will be renamed bla_110 instead of 12\n\tset_child_name(node: BaseNodeType, new_name: string): void {\n\t\t//return if node.name() == new_name\n\t\tlet current_child_with_name;\n\t\tnew_name = new_name.replace(/[^A-Za-z0-9]/g, '_');\n\t\tnew_name = new_name.replace(/^[0-9]/, '_'); // replace first char if not a letter\n\n\t\tif ((current_child_with_name = this._children[new_name]) != null) {\n\t\t\t// only return if found node is same as argument node, and if new_name is same as current_name\n\t\t\tif (node.name === new_name && current_child_with_name.graph_node_id === node.graph_node_id) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t// increment new_name\n\t\t\tnew_name = CoreString.increment(new_name);\n\n\t\t\treturn this.set_child_name(node, new_name);\n\t\t} else {\n\t\t\t// let current_child;\n\t\t\tconst current_name = node.name;\n\n\t\t\t// delete old entry if node was in _children with old name\n\t\t\tconst current_child = this._children[current_name];\n\t\t\tif (current_child) {\n\t\t\t\tdelete this._children[current_name];\n\t\t\t}\n\n\t\t\t// add to new name\n\t\t\tthis._children[new_name] = node;\n\t\t\tnode.name_controller.update_name_from_parent(new_name);\n\t\t\tthis._add_to_nodes_by_type(node);\n\t\t\tthis.node.scene.nodes_controller.add_to_instanciated_node(node);\n\t\t}\n\t}\n\n\tnode_context_signature() {\n\t\treturn `${this.node.node_context()}/${this.node.type}`;\n\t}\n\n\tavailable_children_classes() {\n\t\treturn Poly.instance().registered_nodes(this._context, this.node.type);\n\t}\n\t// children_allowed(): boolean {\n\t// \t// return (this.self.available_children_classes != null) &&\n\t// \t// (Object.keys(this.self.available_children_classes()).length > 0);\n\t// \tconst available_classes = this.available_children_classes();\n\t// \treturn available_classes && Object.keys(available_classes).length > 0;\n\t// }\n\n\tis_valid_child_type(node_type: string): boolean {\n\t\tconst node_class = this.available_children_classes()[node_type];\n\t\treturn node_class != null;\n\t}\n\n\tcreate_node(node_type: string): BaseNodeType {\n\t\tconst node_class = this.available_children_classes()[node_type];\n\n\t\tif (node_class == null) {\n\t\t\tconst message = `child node type '${node_type}' not found for node '${this.node.full_path()}'. Available types are: ${Object.keys(\n\t\t\t\tthis.available_children_classes()\n\t\t\t).join(', ')}, ${this._context}, ${this.node.type}`;\n\t\t\tconsole.error(message);\n\t\t\tthrow message;\n\t\t} else {\n\t\t\tconst child_node = new node_class(this.node.scene, `child_node_${node_type}`);\n\t\t\tchild_node.initialize_base_and_node();\n\t\t\t// child_node.set_scene(this.node.scene);\n\t\t\tthis.add_node(child_node);\n\t\t\tchild_node.lifecycle.set_creation_completed();\n\t\t\treturn child_node;\n\t\t}\n\t}\n\n\tadd_node(child_node: BaseNodeType) {\n\t\t// if (!this._children_allowed) {\n\t\t// \tthrow `node ${this.node.full_path()} cannot have children`;\n\t\t// }\n\n\t\tchild_node.set_parent(this.node);\n\t\tchild_node.params.init();\n\t\tchild_node.parent_controller.on_set_parent();\n\t\tchild_node.name_controller.post_set_full_path();\n\t\tif (child_node.children_allowed() && child_node.children_controller) {\n\t\t\tfor (let child of child_node.children_controller.children()) {\n\t\t\t\tchild.name_controller.post_set_full_path();\n\t\t\t}\n\t\t}\n\t\tthis.node.emit(NodeEvent.CREATED, {child_node_json: child_node.to_json()});\n\t\tif (this.node.scene.lifecycle_controller.on_create_hook_allowed()) {\n\t\t\tchild_node.lifecycle.run_on_create_hooks();\n\t\t}\n\t\tchild_node.lifecycle.run_on_add_hooks();\n\t\tthis.set_child_name(child_node, NameController.base_name(child_node));\n\t\tthis.node.lifecycle.run_on_child_add_hooks(child_node);\n\t\t// this.post_add_node(child_node);\n\n\t\tif (this._is_dependent_on_children && this._children_node) {\n\t\t\tthis._children_node.add_graph_input(child_node);\n\t\t}\n\t\tif (child_node.require_webgl2()) {\n\t\t\tthis.node.scene.webgl_controller.set_require_webgl2();\n\t\t}\n\n\t\tthis.node.scene.missing_expression_references_controller.check_for_missing_references(child_node);\n\n\t\treturn child_node;\n\t}\n\t// that's redondant with the lifecycle on_child_add and on_child_remove\n\t// post_add_node(node: BaseNode) {}\n\t// post_remove_node(node: BaseNode) {}\n\n\tremove_node(child_node: BaseNodeType): void {\n\t\tif (child_node.parent != this.node) {\n\t\t\treturn console.warn(`node ${child_node.name} not under parent ${this.node.full_path()}`);\n\t\t} else {\n\t\t\t// set other dependencies dirty\n\t\t\tchild_node.set_successors_dirty(this.node);\n\n\t\t\tif (this._is_dependent_on_children && this._children_node) {\n\t\t\t\tthis._children_node.remove_graph_input(child_node);\n\t\t\t}\n\n\t\t\tif (this.selection.contains(child_node)) {\n\t\t\t\tthis.selection.remove([child_node]);\n\t\t\t}\n\n\t\t\tconst first_connection = child_node.io.connections.first_input_connection();\n\t\t\tchild_node.io.connections.input_connections()?.forEach((input_connection) => {\n\t\t\t\tif (input_connection) {\n\t\t\t\t\tinput_connection.disconnect({set_input: true});\n\t\t\t\t}\n\t\t\t});\n\t\t\tchild_node.io.connections.output_connections()?.forEach((output_connection) => {\n\t\t\t\tif (output_connection) {\n\t\t\t\t\toutput_connection.disconnect({set_input: true});\n\t\t\t\t\tif (first_connection) {\n\t\t\t\t\t\tconst old_src = first_connection.node_src;\n\t\t\t\t\t\tconst old_output_index = output_connection.output_index;\n\t\t\t\t\t\tconst old_dest = output_connection.node_dest;\n\t\t\t\t\t\tconst old_input_index = output_connection.input_index;\n\t\t\t\t\t\told_dest.io.inputs.set_input(old_input_index, old_src, old_output_index);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// disconnect successors\n\t\t\tchild_node.graph_disconnect_successors();\n\n\t\t\t// remove from children\n\t\t\tchild_node.set_parent(null);\n\t\t\tdelete this._children[child_node.name];\n\t\t\tthis._remove_from_nodes_by_type(child_node);\n\t\t\tthis.node.scene.nodes_controller.remove_from_instanciated_node(child_node);\n\n\t\t\tthis.node.lifecycle.run_on_child_remove_hooks(child_node);\n\t\t\tchild_node.lifecycle.run_on_delete_hooks();\n\t\t\tchild_node.emit(NodeEvent.DELETED, {parent_id: this.node.graph_node_id});\n\t\t}\n\t}\n\n\t_add_to_nodes_by_type(node: BaseNodeType) {\n\t\tconst node_id = node.graph_node_id;\n\t\tconst type = node.type;\n\t\tthis._children_by_type[type] = this._children_by_type[type] || [];\n\t\tif (!lodash_includes(this._children_by_type[type], node_id)) {\n\t\t\tthis._children_by_type[type].push(node_id);\n\t\t}\n\t\tthis.add_to_children_and_grandchildren_by_context(node);\n\t}\n\t_remove_from_nodes_by_type(node: BaseNodeType) {\n\t\tconst node_id = node.graph_node_id;\n\t\tconst type = node.type;\n\t\tif (this._children_by_type[type]) {\n\t\t\tconst index = this._children_by_type[type].indexOf(node_id);\n\t\t\tif (index >= 0) {\n\t\t\t\tthis._children_by_type[type].splice(index, 1);\n\t\t\t\tif (this._children_by_type[type].length == 0) {\n\t\t\t\t\tdelete this._children_by_type[type];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tthis.remove_from_children_and_grandchildren_by_context(node);\n\t}\n\tadd_to_children_and_grandchildren_by_context(node: BaseNodeType) {\n\t\tconst node_id = node.graph_node_id;\n\t\tconst type = node.node_context();\n\t\tthis._children_and_grandchildren_by_context[type] = this._children_and_grandchildren_by_context[type] || [];\n\t\tif (!lodash_includes(this._children_and_grandchildren_by_context[type], node_id)) {\n\t\t\tthis._children_and_grandchildren_by_context[type].push(node_id);\n\t\t}\n\t\tif (this.node.parent && this.node.parent.children_allowed()) {\n\t\t\tthis.node.parent.children_controller?.add_to_children_and_grandchildren_by_context(node);\n\t\t}\n\t}\n\tremove_from_children_and_grandchildren_by_context(node: BaseNodeType) {\n\t\tconst node_id = node.graph_node_id;\n\t\tconst type = node.node_context();\n\t\tif (this._children_and_grandchildren_by_context[type]) {\n\t\t\tconst index = this._children_and_grandchildren_by_context[type].indexOf(node_id);\n\t\t\tif (index >= 0) {\n\t\t\t\tthis._children_and_grandchildren_by_context[type].splice(index, 1);\n\t\t\t\tif (this._children_and_grandchildren_by_context[type].length == 0) {\n\t\t\t\t\tdelete this._children_and_grandchildren_by_context[type];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (this.node.parent && this.node.parent.children_allowed()) {\n\t\t\tthis.node.parent.children_controller?.remove_from_children_and_grandchildren_by_context(node);\n\t\t}\n\t}\n\n\tnodes_by_type(type: string): BaseNodeType[] {\n\t\tconst node_ids = this._children_by_type[type] || [];\n\t\tconst graph = this.node.scene.graph;\n\t\tconst nodes: BaseNodeType[] = [];\n\t\tnode_ids.forEach((node_id) => {\n\t\t\tconst node = graph.node_from_id(node_id) as BaseNodeType;\n\t\t\tif (node) {\n\t\t\t\tnodes.push(node);\n\t\t\t}\n\t\t});\n\t\treturn nodes;\n\t}\n\tchild_by_name(name: string) {\n\t\treturn this._children[name];\n\t}\n\t// children_and_grandchildren_by_context(context: NodeContext): BaseNode[]{\n\t// \tconst node_ids = this._children_and_grandchildren_by_context[context] || []\n\t// \tconst graph = this.self.scene().graph()\n\t// \treturn node_ids.map(node_id=>graph.node_from_id(node_id))\n\t// }\n\thas_children_and_grandchildren_with_context(context: NodeContext) {\n\t\treturn this._children_and_grandchildren_by_context[context] != null;\n\t}\n\t//lodash_filter this.children(), (child)=>\n\t//\tchild.type() == type\n\n\tchildren(): BaseNodeType[] {\n\t\treturn lodash_values(this._children);\n\t}\n\tchildren_names() {\n\t\treturn lodash_sortBy(lodash_keys(this._children));\n\t}\n\t// children_map: ->\n\t// \t@_children\n\n\ttraverse_children(callback: (arg0: BaseNodeType) => void) {\n\t\tfor (let child of this.children()) {\n\t\t\tcallback(child);\n\n\t\t\tchild.children_controller?.traverse_children(callback);\n\t\t}\n\t}\n}\n","import {BaseNodeType} from '../_Base';\n\ntype Callback = () => void;\ntype CallbackWithChildNode = (child_node: BaseNodeType) => void;\n\nexport class LifeCycleController {\n\tprotected _creation_completed = false;\n\tprotected _on_child_add_hooks: CallbackWithChildNode[] | undefined;\n\tprivate _on_child_remove_hooks: CallbackWithChildNode[] | undefined;\n\tprivate _on_create_hooks: Callback[] | undefined;\n\tprivate _on_add_hooks: Callback[] | undefined;\n\tprivate _on_delete_hooks: Callback[] | undefined;\n\tconstructor(protected node: BaseNodeType) {}\n\n\tset_creation_completed() {\n\t\tthis._creation_completed = true;\n\t}\n\tget creation_completed() {\n\t\treturn this.node.scene.loading_controller.loaded && this._creation_completed;\n\t}\n\t//\n\t//\n\t// ON CHILD ADD\n\t//\n\t//\n\tadd_on_child_add_hook(callback: CallbackWithChildNode) {\n\t\tthis._on_child_add_hooks = this._on_child_add_hooks || [];\n\t\tthis._on_child_add_hooks.push(callback);\n\t}\n\trun_on_child_add_hooks(node: BaseNodeType) {\n\t\tthis.execute_hooks_with_child_node(this._on_child_add_hooks, node);\n\t}\n\n\t//\n\t//\n\t// ON CHILD REMOVE\n\t//\n\t//\n\tadd_on_child_remove_hook(callback: CallbackWithChildNode) {\n\t\tthis._on_child_remove_hooks = this._on_child_remove_hooks || [];\n\t\tthis._on_child_remove_hooks.push(callback);\n\t}\n\trun_on_child_remove_hooks(node: BaseNodeType) {\n\t\tthis.execute_hooks_with_child_node(this._on_child_remove_hooks, node);\n\t}\n\n\t//\n\t//\n\t// ON CREATE\n\t//\n\t//\n\tadd_on_create_hook(callback: Callback) {\n\t\tthis._on_create_hooks = this._on_create_hooks || [];\n\t\tthis._on_create_hooks.push(callback);\n\t}\n\trun_on_create_hooks() {\n\t\tthis.execute_hooks(this._on_create_hooks);\n\t}\n\n\t//\n\t//\n\t// ON ADD\n\t//\n\t//\n\tadd_on_add_hook(callback: Callback) {\n\t\tthis._on_add_hooks = this._on_add_hooks || [];\n\t\tthis._on_add_hooks.push(callback);\n\t}\n\trun_on_add_hooks() {\n\t\tthis.execute_hooks(this._on_add_hooks);\n\t}\n\n\t//\n\t//\n\t// ON DELETE\n\t//\n\t//\n\tadd_delete_hook(callback: Callback) {\n\t\tthis._on_delete_hooks = this._on_delete_hooks || [];\n\t\tthis._on_delete_hooks.push(callback);\n\t}\n\trun_on_delete_hooks() {\n\t\tthis.execute_hooks(this._on_delete_hooks);\n\t}\n\n\t//\n\t//\n\t// UTILS\n\t//\n\t//\n\tprotected execute_hooks(hooks: Callback[] | undefined) {\n\t\tif (hooks) {\n\t\t\tfor (let hook of hooks) {\n\t\t\t\thook();\n\t\t\t}\n\t\t}\n\t}\n\tprotected execute_hooks_with_child_node(hooks: CallbackWithChildNode[] | undefined, child_node: BaseNodeType) {\n\t\tif (hooks) {\n\t\t\tfor (let hook of hooks) {\n\t\t\t\thook(child_node);\n\t\t\t}\n\t\t}\n\t}\n}\n","import {BaseNodeType} from '../_Base';\nimport {BaseContainer} from '../../containers/_Base';\nimport {Poly} from '../../Poly';\n\nexport class CookController {\n\t_cooking: boolean = false;\n\t_cooks_count: number = 0;\n\t_max_cook_time: number = -1;\n\t_cooking_dirty_timestamp: number | undefined;\n\t_cook_time_with_inputs: number = 0;\n\t_cook_time_with_inputs_start: number | undefined;\n\t_cook_time_start: number | undefined;\n\t_cook_time: number = 0;\n\t_cook_time_params_start: number | undefined;\n\t_cook_time_params: number = 0;\n\t_last_eval_key: string | undefined;\n\n\t_inputs_evaluation_required: boolean = true; //currently only for switch SOP\n\n\tconstructor(private node: BaseNodeType) {}\n\n\tdisallow_inputs_evaluation() {\n\t\tthis._inputs_evaluation_required = false;\n\t}\n\n\tget is_cooking(): boolean {\n\t\treturn this._cooking === true;\n\t}\n\tget cooks_count(): number {\n\t\treturn this._cooks_count;\n\t}\n\tget cook_time(): number {\n\t\treturn this._cook_time;\n\t}\n\t// post_set_dirty: (original_trigger_graph_node, direct_trigger_graph_node)->\n\t//this.emit 'node_dirty_updated'\n\t// this.node_post_set_dirty()\n\t// post_remove_dirty_state: (message)->\n\t// \tif !message?\n\t// \t\tthrow \"remove dirty state without message\"\n\n\t// node_post_set_dirty: ->\n\t// \t#\n\tprivate _init_cooking_state() {\n\t\tthis._cooking = true;\n\t\tthis._cooking_dirty_timestamp = this.node.dirty_controller.dirty_timestamp;\n\t}\n\tprivate _init_cooking_start_time(perf_active?: boolean) {\n\t\tif (perf_active == null) {\n\t\t\tperf_active = this.node.scene.performance.started;\n\t\t}\n\t\tif (perf_active) {\n\t\t\tthis._cook_time_start = performance.now();\n\t\t}\n\t}\n\n\tprivate async _start_cook_if_no_errors(input_contents: any[]) {\n\t\tif (this.node.states.error.active) {\n\t\t\tthis.end_cook();\n\t\t} else {\n\t\t\t// this.self.cook(input_containers);\n\t\t\ttry {\n\t\t\t\tawait this.node.cook(input_contents);\n\t\t\t} catch (e) {\n\t\t\t\tthis.node.states.error.set(`node internal error: '${e}'.`);\n\t\t\t\tconsole.error(this.node.full_path(), e);\n\t\t\t\tthis.end_cook();\n\t\t\t}\n\t\t}\n\t}\n\n\tasync cook_main() {\n\t\tif (this.is_cooking) {\n\t\t\treturn;\n\t\t}\n\t\tthis._init_cooking_state();\n\t\tconst perf_active = this.node.scene.performance.started;\n\t\tif (perf_active) {\n\t\t\tthis._cook_time_with_inputs_start = performance.now();\n\t\t}\n\t\tthis.node.states.error.clear();\n\n\t\t//this._block_params_dirty_propagation()\n\t\tconst input_containers = await this.evaluate_inputs_and_params();\n\n\t\tthis._init_cooking_start_time(perf_active);\n\n\t\tconst input_contents = [];\n\t\tif (input_containers) {\n\t\t\tlet input_container;\n\t\t\tfor (let i = 0; i < input_containers.length; i++) {\n\t\t\t\tinput_container = input_containers[i];\n\t\t\t\tif (input_container) {\n\t\t\t\t\tif (this.node.io.inputs.input_clonable_state_with_override(i)) {\n\t\t\t\t\t\tinput_contents.push(input_container.core_content_cloned());\n\t\t\t\t\t} else {\n\t\t\t\t\t\tinput_contents.push(input_container.core_content());\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tawait this._start_cook_if_no_errors(input_contents);\n\t}\n\tasync cook_main_without_inputs() {\n\t\tthis.node.scene.cook_controller.add_node(this.node);\n\t\tif (this.is_cooking) {\n\t\t\t// TODO:\n\t\t\t// this seems to happen because when we flush the cooker queue,\n\t\t\t// some graph nodes will trigger more updates, which will then make dependent nodes\n\t\t\t// dirty again\n\t\t\tconsole.warn('cook_main_without_inputs already cooking', this.node.full_path());\n\t\t\treturn;\n\t\t}\n\t\tthis._init_cooking_state();\n\t\tthis._init_cooking_start_time();\n\t\tthis.node.states.error.clear();\n\n\t\tawait this.node.params.eval_all();\n\t\tawait this._start_cook_if_no_errors([]);\n\t}\n\t// catch e\n\t// \tthis.set_error(\"failed to cook: #{e}\")\n\n\tend_cook(message?: string | null) {\n\t\tthis._increment_cooks_count();\n\n\t\tconst dirty_timestamp = this.node.dirty_controller.dirty_timestamp;\n\t\tif (dirty_timestamp == null || dirty_timestamp === this._cooking_dirty_timestamp) {\n\t\t\tthis.node.remove_dirty_state();\n\t\t\tthis._terminate_cook_process();\n\t\t} else {\n\t\t\tPoly.instance().log('COOK AGAIN', dirty_timestamp, this._cooking_dirty_timestamp, this.node.full_path());\n\t\t\tthis._cooking = false;\n\t\t\tthis.cook_main();\n\t\t}\n\t}\n\n\t_terminate_cook_process() {\n\t\tif (this.is_cooking) {\n\t\t\t//this._unblock_params_dirty_propagation()\n\t\t\tthis._cooking = false;\n\n\t\t\t// this._cook_eval_key = `${this.graph_node_id}/${performance.now()}@${this.context().frame()}`;\n\n\t\t\tthis._record_cook_time();\n\t\t\t//console.log(\"END COOK: #{this.full_path()} #{this.cook_time()} (with inputs:#{this.cook_time_with_inputs()}) (cook count: #{@_cooks_count}): #{message}\")\n\t\t\t//this.notify_requesters()\n\t\t\tsetTimeout(this.node.container_controller.notify_requesters.bind(this.node.container_controller), 0);\n\t\t}\n\t}\n\tprivate _increment_cooks_count() {\n\t\tif (this.is_cooking) {\n\t\t\tif (this._cook_time_start != null) {\n\t\t\t\tthis._cooks_count += 1;\n\t\t\t}\n\t\t}\n\t}\n\n\t// cook_eval_key() {\n\t// \tif (!this.is_dirty()) {\n\t// \t\treturn this._cook_eval_key;\n\t// \t} else {\n\t// \t\treturn performance.now();\n\t// \t}\n\t// }\n\n\t_record_cook_time() {\n\t\tif (this.node.scene.performance.started) {\n\t\t\tconst cook_time_end = performance.now();\n\n\t\t\tif (this._cook_time_with_inputs_start != null) {\n\t\t\t\tthis._cook_time_with_inputs = cook_time_end - this._cook_time_with_inputs_start;\n\t\t\t\tthis._cook_time_with_inputs_start = undefined;\n\t\t\t}\n\n\t\t\tif (this._cook_time_params_start != null && this._cook_time_start != null) {\n\t\t\t\tthis._cook_time_params = this._cook_time_start - this._cook_time_params_start;\n\t\t\t}\n\n\t\t\tif (this._cook_time_start != null) {\n\t\t\t\tthis._cook_time = cook_time_end - this._cook_time_start;\n\t\t\t\tthis._cook_time_start = undefined;\n\t\t\t}\n\n\t\t\tthis._max_cook_time = Math.max(this._max_cook_time, this._cook_time);\n\t\t}\n\n\t\tif (this.node.scene.performance.started) {\n\t\t\tthis.node.scene.performance.record_node_cook_data(this.node);\n\t\t}\n\t}\n\n\t// allow_eval_key_check() {\n\t// \treturn false;\n\t// }\n\n\tasync evaluate_inputs_and_params() {\n\t\t//t0 = performance.now()\n\n\t\tlet input_containers: (BaseContainer | null)[] = [];\n\t\tif (this._inputs_evaluation_required) {\n\t\t\tinput_containers = await this.node.io.inputs.eval_required_inputs_p();\n\t\t}\n\t\t// const inputs_eval_key = input_containers.map( c => c.eval_key()).join('-');\n\n\t\tif (this.node.scene.performance.started) {\n\t\t\tthis._cook_time_params_start = performance.now();\n\t\t}\n\n\t\t/*const params_eval_key = */ await this.node.params.eval_all();\n\t\t// const full_eval_key = [inputs_eval_key, params_eval_key].join('+');\n\t\t// if (this.allow_eval_key_check() && (this._last_eval_key != null) && (this._last_eval_key === full_eval_key)) {\n\t\t// \tthis._terminate_cook_process('no need to cook');\n\t\t// } else {\n\t\t// \tthis._last_eval_key = full_eval_key;\n\t\t// }\n\t\treturn input_containers;\n\t}\n\n\t//this._time_with_precision(@_cook_time)\n\tget cook_time_with_inputs() {\n\t\treturn this._cook_time_with_inputs;\n\t}\n\t//this._time_with_precision(@_cook_time_with_inputs)\n\tget cook_time_params() {\n\t\treturn this._cook_time_params;\n\t}\n\t_time_with_precision(time: number) {\n\t\tconst precision = 1000;\n\t\treturn Math.round(time * precision) / precision;\n\t}\n}\n","/// <reference path=\"../../../../custom_typings/guards.d.ts\" />\n// finally, guard ALL the types!\nfunction typeGuard<T extends PrimitiveOrConstructor>(o: any, className: T): o is GuardedType<T> {\n\tconst localPrimitiveOrConstructor: PrimitiveOrConstructor = className;\n\tif (typeof localPrimitiveOrConstructor === 'string') {\n\t\treturn typeof o === localPrimitiveOrConstructor;\n\t}\n\treturn o instanceof localPrimitiveOrConstructor;\n}\n\nimport lodash_groupBy from 'lodash/groupBy';\nimport {BaseNodeType, BaseNodeClass} from '../_Base';\n\nimport {BaseParamType, BaseParamClass} from '../../params/_Base';\nimport {CoreGraphNode} from '../../../core/graph/CoreGraphNode';\n\nenum METHODS {\n\tSUCCESSORS = 'graph_successors',\n\tPREDECESSORS = 'graph_predecessors',\n}\n\nexport class DependenciesController {\n\tprivate _params_referrees_by_graph_node_id: Dictionary<BaseParamType> | undefined;\n\n\tconstructor(protected node: BaseNodeType) {}\n\n\t// debug_dependencies() {\n\t// \tconst nodes = this.scene_successors();\n\t// \tconsole.log('--------------------');\n\t// \tnodes.forEach((n) => {\n\t// \t\tconsole.log(n.full_path());\n\t// \t});\n\t// }\n\n\tscene_successors() {\n\t\treturn this._find_scene_node_scene_nodes(METHODS.SUCCESSORS);\n\t}\n\n\tscene_predecessors() {\n\t\treturn this._find_scene_node_scene_nodes(METHODS.PREDECESSORS);\n\t}\n\tprivate _find_scene_node_scene_nodes(method: METHODS): BaseNodeType[] {\n\t\tconst params = this.node.params.all;\n\t\tconst graph_nodes: CoreGraphNode[] = [];\n\t\tfor (let param of params) {\n\t\t\tgraph_nodes.push(param);\n\t\t}\n\t\tgraph_nodes.push(this.node);\n\t\tconst start_nodes = graph_nodes;\n\t\tlet base_nodes: BaseNodeType[] = [];\n\t\tfor (let start_node of start_nodes) {\n\t\t\tthis._find_base_nodes_from_node(start_node, method, base_nodes);\n\t\t}\n\n\t\tif (method == METHODS.SUCCESSORS) {\n\t\t\tfor (let node of this.param_nodes_referree()) {\n\t\t\t\tbase_nodes.push(node);\n\t\t\t}\n\t\t}\n\n\t\t// ensure uniq and not current node\n\t\tbase_nodes = base_nodes.filter((scene_node) => {\n\t\t\treturn scene_node.graph_node_id != this.node.graph_node_id;\n\t\t});\n\t\tconst base_nodes_by_graph_node_id = lodash_groupBy(base_nodes, (n) => n.graph_node_id);\n\t\tconst uniq_base_nodes: BaseNodeType[] = [];\n\t\tObject.keys(base_nodes_by_graph_node_id).forEach((graph_node_id) => {\n\t\t\tuniq_base_nodes.push(base_nodes_by_graph_node_id[graph_node_id][0]);\n\t\t});\n\t\treturn uniq_base_nodes;\n\t}\n\n\tprivate _find_base_nodes_from_node(node: CoreGraphNode, method: METHODS, base_nodes: BaseNodeType[]) {\n\t\tconst next_nodes = node[method]();\n\t\tfor (let next_node of next_nodes) {\n\t\t\tif (next_node instanceof BaseParamClass) {\n\t\t\t\tbase_nodes.push(next_node.node);\n\t\t\t} else {\n\t\t\t\tif (typeGuard(next_node, BaseNodeClass)) {\n\t\t\t\t\tbase_nodes.push(next_node);\n\t\t\t\t} else {\n\t\t\t\t\tthis._find_base_nodes_from_node(next_node, method, base_nodes);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\treturn base_nodes;\n\t}\n\n\t//\n\t//\n\t// REFERRED BY\n\t// which is used for operator path referring nodes without creating a graph edge\n\t//\n\t//\n\tadd_param_referree(param: BaseParamType) {\n\t\tthis._params_referrees_by_graph_node_id = this._params_referrees_by_graph_node_id || {};\n\t\tthis._params_referrees_by_graph_node_id[param.graph_node_id] = param;\n\t}\n\tremove_param_referree(param: BaseParamType) {\n\t\tif (this._params_referrees_by_graph_node_id) {\n\t\t\tdelete this._params_referrees_by_graph_node_id[param.graph_node_id];\n\t\t}\n\t}\n\tparams_referree(): BaseParamType[] {\n\t\tconst list = [];\n\t\tif (this._params_referrees_by_graph_node_id) {\n\t\t\tfor (let graph_node_id of Object.keys(this._params_referrees_by_graph_node_id)) {\n\t\t\t\tlist.push(this._params_referrees_by_graph_node_id[graph_node_id]);\n\t\t\t}\n\t\t}\n\t\treturn list;\n\t}\n\tparam_nodes_referree(): BaseNodeType[] {\n\t\tconst node_by_graph_node_id: Dictionary<BaseNodeType> = {};\n\t\tlet node;\n\t\tfor (let param of this.params_referree()) {\n\t\t\tnode = param.node;\n\t\t\tnode_by_graph_node_id[node.graph_node_id] = node;\n\t\t}\n\t\tconst list = [];\n\t\tfor (let graph_node_id of Object.keys(node_by_graph_node_id)) {\n\t\t\tlist.push(node_by_graph_node_id[graph_node_id]);\n\t\t}\n\t\treturn list;\n\t}\n}\n","import {BaseNodeType} from '../../_Base';\nimport {BaseParamType} from '../../../params/_Base';\nimport {ParamOptions} from '../../../params/utils/OptionsController';\nimport {CoreGraphNode} from '../../../../core/graph/CoreGraphNode';\n\nimport {FloatParam} from '../../../params/Float';\nimport {OperatorPathParam} from '../../../params/OperatorPath';\n\nimport {ParamType} from '../../../poly/ParamType';\n// import {ParamEvent} from '../../../poly/ParamEvent';\nimport {NodeParamsConfig} from './ParamsConfig';\n\nimport {ParamConstructorMap} from '../../../params/types/ParamConstructorMap';\nimport {ParamConstructorByType} from '../../../params/types/ParamConstructorByType';\nimport {ParamInitValuesTypeMap} from '../../../params/types/ParamInitValuesTypeMap';\nimport {ParamValuesTypeMap} from '../../../params/types/ParamValuesTypeMap';\nimport {NodeEvent} from '../../../poly/NodeEvent';\nimport {ParamInitValueSerializedTypeMap} from '../../../params/types/ParamInitValueSerializedTypeMap';\n\nconst NODE_SIMPLE_NAME = 'params';\n\nexport type OnSceneLoadHook = () => void;\ntype PostCreateParamsHook = () => void;\n\nexport interface ParamOptionToAdd<T extends ParamType> {\n\tname: string;\n\ttype: T;\n\tinit_value: ParamInitValueSerializedTypeMap[T];\n\toptions?: ParamOptions;\n}\nexport interface ParamsUpdateOptions {\n\tnames_to_delete?: string[];\n\tto_add?: ParamOptionToAdd<ParamType>[];\n}\n\nexport class ParamsController {\n\tprivate _param_create_mode: boolean = false;\n\tprivate _params_by_name: Dictionary<BaseParamType> = {};\n\t// caches\n\tprivate _params_list: BaseParamType[] = [];\n\tprivate _param_names: string[] = [];\n\tprivate _non_spare_params: BaseParamType[] = [];\n\tprivate _spare_params: BaseParamType[] = [];\n\tprivate _non_spare_param_names: string[] = [];\n\tprivate _spare_param_names: string[] = [];\n\n\tprivate _params_node: CoreGraphNode | undefined;\n\t// private _params_eval_key: string;\n\tprivate _params_added_since_last_params_eval: boolean = false;\n\t// private _current_param_folder_name: string | undefined;\n\n\t// hooks\n\tprivate _post_create_params_hook: PostCreateParamsHook | undefined;\n\tprivate _on_scene_load_hooks: OnSceneLoadHook[] | undefined;\n\tprivate _on_scene_load_hook_names: string[] | undefined;\n\n\tconstructor(protected node: BaseNodeType) {}\n\n\tprivate init_dependency_node() {\n\t\tif (!this._params_node) {\n\t\t\t// TODO: consider not having a params_node for nodes which have no parameters\n\t\t\tthis._params_node = new CoreGraphNode(this.node.scene, NODE_SIMPLE_NAME);\n\t\t\t// this._params_node.set_scene(this.node.scene);\n\t\t\tthis.node.add_graph_input(this._params_node);\n\t\t}\n\t}\n\n\tinit() {\n\t\tthis.init_dependency_node();\n\t\t// this.reset_params()\n\t\tthis._param_create_mode = true;\n\n\t\tthis.init_from_params_config();\n\t\tthis.node.create_params();\n\t\tthis._post_create_params();\n\t}\n\tprivate _post_create_params() {\n\t\tthis._update_caches();\n\t\t// this._create_params_ui_data_dependencies();\n\t\tthis.init_param_accessors();\n\t\tthis._param_create_mode = false;\n\n\t\tthis.run_post_create_params_hook();\n\n\t\t// This was to debug a weird bug where I was adding nodes to the list\n\t\t// of params, from the DependenciesController\n\t\t// this._params_list.push = (...items: BaseParamType[]) => {\n\t\t// \tif (items[0] && !items[0].compute) {\n\t\t// \t\tconsole.warn('adding params', items);\n\t\t// \t}\n\t\t// \tfor (let i of items) {\n\t\t// \t\tthis._params_list[this._params_list.length] = i;\n\t\t// \t}\n\t\t// \treturn 0;\n\t\t// };\n\t}\n\tupdate_params(options: ParamsUpdateOptions) {\n\t\tlet has_created_a_param = false;\n\t\tlet has_deleted_a_param = false;\n\t\tif (options.names_to_delete) {\n\t\t\tfor (let name of options.names_to_delete) {\n\t\t\t\tif (this.has(name)) {\n\t\t\t\t\tthis.delete_param(name);\n\t\t\t\t\thas_deleted_a_param = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tif (options.to_add) {\n\t\t\tfor (let param_data of options.to_add) {\n\t\t\t\tconst param = this.add_param(\n\t\t\t\t\tparam_data.type,\n\t\t\t\t\tparam_data.name,\n\t\t\t\t\tparam_data.init_value,\n\t\t\t\t\tparam_data.options\n\t\t\t\t);\n\t\t\t\tif (param) {\n\t\t\t\t\thas_created_a_param = true;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tif (has_deleted_a_param || has_created_a_param) {\n\t\t\tthis._update_caches();\n\t\t\tthis.init_param_accessors();\n\t\t\t// param.emit(ParamEvent.DELETED);\n\t\t\tthis.node.emit(NodeEvent.PARAMS_UPDATED);\n\t\t}\n\t}\n\tpost_create_spare_params() {\n\t\tthis._update_caches();\n\t\tthis.init_param_accessors();\n\t}\n\n\tprivate init_from_params_config() {\n\t\tconst params_config = this.node.params_config as NodeParamsConfig;\n\t\tif (params_config) {\n\t\t\tfor (let name of Object.keys(params_config)) {\n\t\t\t\tconst config = params_config[name];\n\t\t\t\tthis.add_param(config.type, name, config.init_value, config.options);\n\t\t\t}\n\t\t}\n\t}\n\tprivate init_param_accessors() {\n\t\tlet current_names_in_accessor = Object.getOwnPropertyNames(this.node.pv);\n\t\tthis._remove_unneeded_accessors(current_names_in_accessor);\n\t\t// update var after having removed accessors\n\t\tcurrent_names_in_accessor = Object.getOwnPropertyNames(this.node.pv);\n\n\t\tfor (let param of this.all) {\n\t\t\tconst is_spare: boolean = param.options.is_spare;\n\n\t\t\tconst param_not_yet_in_accessors = !current_names_in_accessor.includes(param.name);\n\n\t\t\tif (param_not_yet_in_accessors || is_spare) {\n\t\t\t\tObject.defineProperty(this.node.pv, param.name, {\n\t\t\t\t\tget: () => {\n\t\t\t\t\t\treturn param.value;\n\t\t\t\t\t},\n\t\t\t\t\t// only spare parameters can be removed\n\t\t\t\t\tconfigurable: is_spare,\n\t\t\t\t});\n\t\t\t\tObject.defineProperty(this.node.p, param.name, {\n\t\t\t\t\tget: () => {\n\t\t\t\t\t\treturn param;\n\t\t\t\t\t},\n\t\t\t\t\tconfigurable: is_spare,\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\tprivate _remove_unneeded_accessors(current_names_in_accessor: string[]) {\n\t\tconst current_param_names = this._param_names;\n\t\tconst names_to_remove = [];\n\t\tfor (let current_name_in_accessor of current_names_in_accessor) {\n\t\t\tif (!current_param_names.includes(current_name_in_accessor)) {\n\t\t\t\tnames_to_remove.push(current_name_in_accessor);\n\t\t\t}\n\t\t}\n\n\t\tfor (let name_to_remove of names_to_remove) {\n\t\t\tObject.defineProperty(this.node.pv, name_to_remove, {\n\t\t\t\tget: () => {\n\t\t\t\t\treturn undefined;\n\t\t\t\t},\n\t\t\t\tconfigurable: true,\n\t\t\t});\n\t\t\tObject.defineProperty(this.node.p, name_to_remove, {\n\t\t\t\tget: () => {\n\t\t\t\t\treturn undefined;\n\t\t\t\t},\n\t\t\t\tconfigurable: true,\n\t\t\t});\n\t\t}\n\t}\n\n\tget params_node() {\n\t\treturn this._params_node;\n\t}\n\tget all() {\n\t\treturn this._params_list;\n\t}\n\tget non_spare() {\n\t\treturn this._non_spare_params;\n\t}\n\tget spare() {\n\t\treturn this._spare_params;\n\t}\n\tget names(): string[] {\n\t\treturn this._param_names;\n\t}\n\tget non_spare_names(): string[] {\n\t\treturn this._non_spare_param_names;\n\t}\n\tget spare_names(): string[] {\n\t\treturn this._spare_param_names;\n\t}\n\t// get params_by_name() {\n\t// \treturn this._params_by_name;\n\t// }\n\t// get all_params() {\n\t// \t// return lodash_concat(lodash_values(this._params), lodash_values(this._spare_params));\n\t// \treturn lodash_values(this._params);\n\t// }\n\n\tprivate set_with_type<T extends ParamType>(name: string, value: ParamInitValuesTypeMap[T], type: T) {\n\t\tconst param = this.param_with_type(name, type);\n\t\tif (param) {\n\t\t\tparam.set(value as never);\n\t\t} else {\n\t\t\tconsole.warn(`param ${name} not found with type ${type}`);\n\t\t}\n\t}\n\tset_float(name: string, value: ParamInitValuesTypeMap[ParamType.FLOAT]) {\n\t\tthis.set_with_type(name, value, ParamType.FLOAT);\n\t}\n\tset_vector3(name: string, value: ParamInitValuesTypeMap[ParamType.VECTOR3]) {\n\t\tthis.set_with_type(name, value, ParamType.VECTOR3);\n\t}\n\n\thas_param(name: string) {\n\t\treturn this._params_by_name[name] != null;\n\t}\n\thas(name: string) {\n\t\treturn this.has_param(name);\n\t}\n\tget(name: string) {\n\t\treturn this.param(name);\n\t}\n\tparam_with_type<T extends ParamType>(name: string, type: T): ParamConstructorMap[T] | undefined {\n\t\tconst param = this.param(name);\n\t\tif (param && param.type == type) {\n\t\t\treturn param as ParamConstructorMap[T];\n\t\t}\n\t}\n\tget_float(name: string): FloatParam {\n\t\treturn this.param_with_type(name, ParamType.FLOAT) as FloatParam;\n\t}\n\tget_operator_path(name: string): OperatorPathParam {\n\t\treturn this.param_with_type(name, ParamType.OPERATOR_PATH) as OperatorPathParam;\n\t}\n\tvalue(name: string) {\n\t\treturn this.param(name)?.value;\n\t}\n\tvalue_with_type<T extends ParamType>(name: string, type: T): ParamValuesTypeMap[T] {\n\t\treturn this.param_with_type(name, type)?.value as ParamValuesTypeMap[T];\n\t\t// const param = this.param(name);\n\t\t// if (param && param.type() == type) {\n\t\t// \treturn param.value();\n\t\t// }\n\t}\n\tboolean(name: string) {\n\t\treturn this.value_with_type(name, ParamType.BOOLEAN);\n\t}\n\tfloat(name: string) {\n\t\treturn this.value_with_type(name, ParamType.FLOAT);\n\t}\n\tinteger(name: string) {\n\t\treturn this.value_with_type(name, ParamType.INTEGER);\n\t}\n\tstring(name: string) {\n\t\treturn this.value_with_type(name, ParamType.STRING);\n\t}\n\tvector2(name: string) {\n\t\treturn this.value_with_type(name, ParamType.VECTOR2);\n\t}\n\tvector3(name: string) {\n\t\treturn this.value_with_type(name, ParamType.VECTOR3);\n\t}\n\tcolor(name: string) {\n\t\treturn this.value_with_type(name, ParamType.COLOR);\n\t}\n\n\tparam(name: string) {\n\t\tconst p = this._params_by_name[name];\n\t\tif (p != null) {\n\t\t\treturn p;\n\t\t} else {\n\t\t\tconsole.warn(\n\t\t\t\t`tried to access param '${name}' in node ${this.node.full_path()}, but existing params are: ${\n\t\t\t\t\tthis.names\n\t\t\t\t} on node ${this.node.full_path()}`\n\t\t\t);\n\t\t\treturn null;\n\t\t}\n\t}\n\t// param_cache_name(param_name: string) {\n\t// \treturn `_param_${param_name}`;\n\t// }\n\n\t// delete_params(param_names: string[]) {\n\t// \tfor (let param_name of param_names) {\n\t// \t\tthis.delete_param(param_name);\n\t// \t}\n\n\t// }\n\t// call update_params instead\n\tprivate delete_param(param_name: string) {\n\t\tconst param = this._params_by_name[param_name];\n\t\tif (param) {\n\t\t\tif (this._params_node) {\n\t\t\t\tthis._params_node.remove_graph_input(this._params_by_name[param_name]);\n\t\t\t}\n\t\t\tparam.set_node(null);\n\t\t\tdelete this._params_by_name[param_name];\n\t\t\tif (param.is_multiple && param.components) {\n\t\t\t\tfor (let component of param.components) {\n\t\t\t\t\tconst child_name = component.name;\n\t\t\t\t\tdelete this._params_by_name[child_name];\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// const name_index = this._param_names.indexOf(param_name)\n\t\t\t// if(name_index >= 0){\n\t\t\t// \tthis._param_names.splice(name_index, 1)\n\t\t\t// }\n\t\t\t// param.emit(ParamEvent.DELETED);\n\t\t} else {\n\t\t\tthrow new Error(`param '${param_name}' does not exist on node ${this.node.full_path()}`);\n\t\t}\n\t}\n\n\tadd_param<T extends ParamType>(\n\t\ttype: T,\n\t\tname: string,\n\t\tinit_value: ParamInitValuesTypeMap[T],\n\t\toptions: ParamOptions = {}\n\t): ParamConstructorMap[T] | undefined {\n\t\tconst is_spare = options['spare'] || false;\n\t\tif (this._param_create_mode === false && !is_spare) {\n\t\t\tconsole.warn(\n\t\t\t\t`node ${this.node.full_path()} (${\n\t\t\t\t\tthis.node.type\n\t\t\t\t}) param '${name}' cannot be created outside of create_params`\n\t\t\t);\n\t\t}\n\t\tif (this.node.scene == null) {\n\t\t\tconsole.warn(`node ${this.node.full_path()} (${this.node.type}) has no scene assigned`);\n\t\t}\n\n\t\tconst constructor = ParamConstructorByType[type];\n\t\tif (constructor != null) {\n\t\t\tconst existing_param = this._params_by_name[name];\n\t\t\tif (existing_param) {\n\t\t\t\tif (is_spare) {\n\t\t\t\t\t// delete the old one, otherwise the gl nodes when saved will attempt to set the value\n\t\t\t\t\t// of a param with the potentially wrong type\n\t\t\t\t\tif (existing_param.type != type) {\n\t\t\t\t\t\tthis.delete_param(existing_param.name);\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\t// check that the param is spare, so that the ones generated by gl nodes are not generating an exception\n\t\t\t\t\tconsole.warn(`a param named ${name} already exists`, this.node);\n\t\t\t\t}\n\t\t\t}\n\t\t\tconst param: ParamConstructorMap[T] = new constructor(this.node.scene);\n\t\t\tparam.options.set(options);\n\n\t\t\tparam.set_name(name);\n\t\t\tparam.set_init_value(init_value as never);\n\t\t\tparam.init_components();\n\t\t\tparam.set(init_value as never);\n\t\t\tparam.set_node(this.node);\n\n\t\t\tthis._params_by_name[param.name] = param as BaseParamType;\n\n\t\t\t// we add the components, so that we can access them with expressions like ch('ty')\n\t\t\tif (param.is_multiple && param.components) {\n\t\t\t\tfor (let component of param.components) {\n\t\t\t\t\tthis._params_by_name[component.name] = component as BaseParamType;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tthis._params_added_since_last_params_eval = true;\n\n\t\t\treturn param;\n\t\t}\n\t}\n\n\tprivate _update_caches() {\n\t\tthis._params_list = Object.values(this._params_by_name);\n\t\tthis._param_names = Object.keys(this._params_by_name);\n\t\tthis._non_spare_params = Object.values(this._params_by_name).filter((p) => !p.options.is_spare);\n\t\tthis._spare_params = Object.values(this._params_by_name).filter((p) => p.options.is_spare);\n\t\tthis._non_spare_param_names = Object.values(this._params_by_name)\n\t\t\t.filter((p) => !p.options.is_spare)\n\t\t\t.map((p) => p.name);\n\t\tthis._spare_param_names = Object.values(this._params_by_name)\n\t\t\t.filter((p) => p.options.is_spare)\n\t\t\t.map((p) => p.name);\n\t}\n\n\tasync _eval_param(param: BaseParamType) {\n\t\t// return new Promise((resolve, reject)=> {\n\t\t// const param_cache_name = this.param_cache_name(param.name());\n\t\t// const cached_value = this[param_cache_name] || null;\n\t\tif (/*cached_value == null ||*/ param.is_dirty /* || param.is_errored()*/) {\n\t\t\t/*const param_value =*/ await param.compute(); //.then(param_value=>{\n\t\t\t// this[param_cache_name] = param_value;\n\t\t\tif (param.states.error.active) {\n\t\t\t\tthis.node.states.error.set(`param '${param.name}' error: ${param.states.error.message}`);\n\t\t\t}\n\t\t\t// return param_value;\n\t\t} else {\n\t\t\t// return param.value;\n\t\t}\n\t\t// });\n\t}\n\n\tasync eval_params(params: BaseParamType[]) {\n\t\tconst promises = [];\n\t\tfor (let i = 0; i < params.length; i++) {\n\t\t\tif (params[i].is_dirty) {\n\t\t\t\tpromises.push(this._eval_param(params[i]));\n\t\t\t}\n\t\t}\n\t\tawait Promise.all(promises);\n\n\t\tif (this.node.states.error.active) {\n\t\t\tthis.node.set_container(null);\n\t\t}\n\t}\n\n\tasync eval_all() {\n\t\tif (this._params_node) {\n\t\t\tif (this._params_node.is_dirty || this._params_added_since_last_params_eval) {\n\t\t\t\tawait this.eval_params(this._params_list);\n\n\t\t\t\tthis._params_node.remove_dirty_state();\n\t\t\t\tthis._params_added_since_last_params_eval = false;\n\t\t\t}\n\t\t}\n\t}\n\n\t//\n\t//\n\t// HOOKS\n\t//\n\t//\n\tset_post_create_params_hook(hook: PostCreateParamsHook) {\n\t\tthis._post_create_params_hook = hook;\n\t}\n\tadd_on_scene_load_hook(name: string, method: OnSceneLoadHook) {\n\t\tthis._on_scene_load_hook_names = this._on_scene_load_hook_names || [];\n\t\tthis._on_scene_load_hooks = this._on_scene_load_hooks || [];\n\n\t\tif (!this._on_scene_load_hook_names.includes(name)) {\n\t\t\tthis._on_scene_load_hook_names.push(name);\n\t\t\tthis._on_scene_load_hooks.push(method);\n\t\t} else {\n\t\t\tconsole.warn(`hook with name ${name} already exists`, this.node);\n\t\t}\n\t}\n\trun_post_create_params_hook() {\n\t\tif (this._post_create_params_hook) {\n\t\t\tthis._post_create_params_hook();\n\t\t}\n\t}\n\trun_on_scene_load_hooks() {\n\t\tif (this._on_scene_load_hooks) {\n\t\t\tfor (let hook of this._on_scene_load_hooks) {\n\t\t\t\thook();\n\t\t\t}\n\t\t}\n\t}\n}\n","import {NodeParamsConfig} from './ParamsConfig';\n// import {ParamValuesTypeMap} from './ParamsController';\n// import {ParamType} from '../../../poly/ParamType';\n\n// function getProperty<T, K extends keyof T>(o: T, propertyName: K): T[K] {\n// \treturn o[propertyName]; // o[propertyName] is of type T[K]\n// }\n\n// let t: getProperty(ParamConfig, 'type')\n// function prop<T, K extends keyof T>(obj: T, key: K) {\n// \treturn typeof obj[key];\n// }\n// type test = Pick<ParamConfig<ParamType.FLOAT>, 'default_value'>;\n\nexport type ParamsValueAccessorType<T extends NodeParamsConfig> = {\n\treadonly [P in keyof T]: T[P]['value_type'];\n};\n\nexport class ParamsValueAccessor<T extends NodeParamsConfig> {\n\tconstructor() {\n\t\t// console.log('accessor', this);\n\t}\n}\n","import {BaseNodeType} from '../_Base';\n\nexport class ProcessingContext {\n\tprivate _frame: number = 0;\n\tconstructor(node: BaseNodeType) {}\n\tcopy(src_context: ProcessingContext) {\n\t\tthis._frame = src_context.frame;\n\t}\n\tget frame() {\n\t\treturn this._frame;\n\t}\n}\n","import {BaseNodeType} from '../../_Base';\nimport lodash_compact from 'lodash/compact';\nimport {NodeConnection} from './NodeConnection';\n\n// interface NodeConnectionByString {\n// \t[propName: string]: NodeConnection;\n// }\n// interface NodeConnectionByStringByString {\n// \t[propName: string]: NodeConnectionByString;\n// }\n\nexport class ConnectionsController {\n\tprivate _input_connections: Array<NodeConnection | undefined> | undefined;\n\tprivate _output_connections: Map<number, Map<number, NodeConnection>> = new Map();\n\n\tconstructor(protected _node: BaseNodeType) {}\n\n\tinit_inputs() {\n\t\tconst count = this._node.io.inputs.max_inputs_count;\n\t\tthis._input_connections = new Array(count);\n\t}\n\n\t//\n\t//\n\t// INPUT CONNECTIONS\n\t//\n\t//\n\tadd_input_connection(connection: NodeConnection) {\n\t\tif (this._input_connections) {\n\t\t\t// if (connection.input_index < this._input_connections.length) {\n\t\t\tthis._input_connections[connection.input_index] = connection;\n\t\t\t// } else {\n\t\t\t// \tconsole.warn(`attempt to add an input connection at index ${connection.input_index}`);\n\t\t\t// }\n\t\t} else {\n\t\t\tconsole.warn(`input connections array not initialized`);\n\t\t}\n\t}\n\tremove_input_connection(connection: NodeConnection) {\n\t\tif (this._input_connections) {\n\t\t\tif (connection.input_index < this._input_connections.length) {\n\t\t\t\tthis._input_connections[connection.input_index] = undefined;\n\t\t\t\t// if all connections after are also undefined, we can safely shrink the array\n\t\t\t\tlet all_connections_after_are_undefined = true;\n\t\t\t\tfor (let i = connection.input_index; i < this._input_connections.length; i++) {\n\t\t\t\t\tif (this._input_connections[i]) {\n\t\t\t\t\t\tall_connections_after_are_undefined = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\tif (all_connections_after_are_undefined) {\n\t\t\t\t\tthis._input_connections = this._input_connections.slice(0, connection.input_index);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconsole.warn(`attempt to remove an input connection at index ${connection.input_index}`);\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.warn(`input connections array not initialized`);\n\t\t}\n\t}\n\tinput_connection(index: number): NodeConnection | undefined {\n\t\tif (this._input_connections) {\n\t\t\treturn this._input_connections[index];\n\t\t}\n\t}\n\tfirst_input_connection(): NodeConnection {\n\t\treturn lodash_compact(this._input_connections)[0];\n\t}\n\t// last_input_connection(): NodeConnection {\n\t// \tconst connections = lodash_compact(this._input_connections);\n\t// \treturn connections[connections.length - 1];\n\t// }\n\tinput_connections() {\n\t\treturn this._input_connections;\n\t}\n\n\t//\n\t//\n\t// OUTPUT CONNECTIONS\n\t//\n\t//\n\tadd_output_connection(connection: NodeConnection) {\n\t\tconst output_index = connection.output_index;\n\t\tconst id = connection.id;\n\t\tlet connections_by_id = this._output_connections.get(output_index);\n\t\tif (!connections_by_id) {\n\t\t\tconnections_by_id = new Map<number, NodeConnection>();\n\t\t\tthis._output_connections.set(output_index, connections_by_id);\n\t\t}\n\t\tconnections_by_id.set(id, connection);\n\t\t// this._output_connections[output_index] = this._output_connections[output_index] || {};\n\t\t// this._output_connections[output_index][id] = connection;\n\t}\n\tremove_output_connection(connection: NodeConnection) {\n\t\tconst output_index = connection.output_index;\n\t\tconst id = connection.id;\n\t\tlet connections_by_id = this._output_connections.get(output_index);\n\t\tif (connections_by_id) {\n\t\t\tconnections_by_id.delete(id);\n\t\t}\n\t\t// delete this._output_connections[output_index][id];\n\t}\n\n\toutput_connections() {\n\t\tlet list: NodeConnection[] = [];\n\n\t\tthis._output_connections.forEach((connections_by_id, output_index) => {\n\t\t\tconnections_by_id.forEach((connection, id) => {\n\t\t\t\tif (connection) {\n\t\t\t\t\tlist.push(connection);\n\t\t\t\t}\n\t\t\t});\n\t\t});\n\t\t// Object.keys(this._output_connections).forEach((index) => {\n\t\t// \tconst connections_for_index = this._output_connections[index];\n\t\t// \tObject.keys(connections_for_index).forEach((id) => {\n\t\t// \t\tlist.push(connections_for_index[id]);\n\t\t// \t});\n\t\t// });\n\t\treturn list;\n\t}\n}\n","import {BaseNodeType} from '../../_Base';\n\ninterface DisconnectionOptions {\n\tset_input?: boolean;\n}\n\nexport class NodeConnection {\n\tprivate static _next_id: number = 0;\n\tprivate _id: number;\n\n\tconstructor(\n\t\tprivate _node_src: BaseNodeType,\n\t\tprivate _node_dest: BaseNodeType,\n\t\tprivate _output_index: number = 0,\n\t\tprivate _input_index: number = 0\n\t) {\n\t\tthis._id = NodeConnection._next_id++;\n\n\t\tif (this._node_src.io.connections && this._node_dest.io.connections) {\n\t\t\tthis._node_src.io.connections.add_output_connection(this);\n\t\t\tthis._node_dest.io.connections.add_input_connection(this);\n\t\t}\n\t}\n\tget id() {\n\t\treturn this._id;\n\t}\n\n\tget node_src() {\n\t\treturn this._node_src;\n\t}\n\tget node_dest() {\n\t\treturn this._node_dest;\n\t}\n\tget output_index() {\n\t\treturn this._output_index;\n\t}\n\tget input_index() {\n\t\treturn this._input_index;\n\t}\n\n\tdisconnect(options: DisconnectionOptions = {}) {\n\t\tif (this._node_src.io.connections && this._node_dest.io.connections) {\n\t\t\tthis._node_src.io.connections.remove_output_connection(this);\n\t\t\tthis._node_dest.io.connections.remove_input_connection(this);\n\t\t}\n\n\t\tif (options.set_input === true) {\n\t\t\tthis._node_dest.io.inputs.set_input(this._input_index, null);\n\t\t}\n\t}\n}\n","import {BaseNodeType} from '../../_Base';\nimport {BaseContainer} from '../../../containers/_Base';\n// import lodash_includes from 'lodash/includes'\n// import lodash_filter from 'lodash/filter'\nimport lodash_each from 'lodash/each';\nimport lodash_isString from 'lodash/isString';\n// import lodash_compact from 'lodash/compact'\nimport {BaseNamedConnectionPointType} from './NamedConnectionPoint';\nimport {NodeConnection} from './NodeConnection';\n\nimport {CoreGraphNode} from '../../../../core/graph/CoreGraphNode';\nimport {NodeEvent} from '../../../poly/NodeEvent';\nimport {InputCloneMode} from '../../../poly/InputCloneMode';\nimport {TypeAssert} from '../../../poly/Assert';\n\n// export class InputGraphNode extends NodeSimple {\n// \tconstructor(name: string) {\n// \t\tsuper(name);\n// \t}\n// }\n\n// export interface InputsControllerOptions {\n// \tmin_inputs?: number;\n// \tmax_inputs?: number;\n// \tdepends_on_inputs?: boolean;\n// }\ntype OnUpdateHook = () => void;\n\n// TODO: remove the \"throw\" statements, which seem less necessary now with typescript\nexport class InputsController<T extends BaseNodeType> {\n\tprivate _graph_node_inputs: CoreGraphNode[] = [];\n\tprivate _inputs: Array<T | null> = [];\n\tprivate _has_named_inputs: boolean = false;\n\t// _input_connections: NodeConnection[] = []\n\tprivate _named_input_connection_points: BaseNamedConnectionPointType[] | undefined;\n\tprivate _min_inputs_count: number = 0;\n\tprivate _max_inputs_count: number = 0;\n\tprivate _depends_on_inputs: boolean = true;\n\n\t// hooks\n\tprivate _on_update_hooks: OnUpdateHook[] | undefined;\n\tprivate _on_update_hook_names: string[] | undefined;\n\n\t// clonable\n\tprivate _user_inputs_clonable_states: InputCloneMode[] | undefined;\n\tprivate _inputs_clonable_states: InputCloneMode[] | undefined;\n\tprivate _override_clonable_state: boolean = false;\n\n\tconstructor(protected node: T) {\n\t\t//, options: InputsControllerOptions = {}) {\n\t\t// this.set_options(options);\n\t}\n\n\t// set_options(options: InputsControllerOptions) {\n\t// \tif (options['min_inputs']) {\n\t// \t\tthis.set_min_inputs_count(options['min_inputs']);\n\t// \t}\n\t// \tif (options['max_inputs']) {\n\t// \t\tthis.set_max_inputs_count(options['max_inputs']);\n\t// \t}\n\t// \tif (options['depends_on_inputs']) {\n\t// \t\tthis.set_depends_on_inputs(options['depends_on_inputs']);\n\t// \t}\n\t// }\n\n\t// _init_inputs() {\n\t// \tthis._inputs = [];\n\t// }\n\tset_depends_on_inputs(depends_on_inputs: boolean) {\n\t\tthis._depends_on_inputs = depends_on_inputs;\n\t}\n\tprivate set_min_inputs_count(min_inputs_count: number) {\n\t\tthis._min_inputs_count = min_inputs_count;\n\t}\n\t// min_inputs_count() {\n\t// \treturn this._min_inputs_count || 0;\n\t// }\n\tprivate set_max_inputs_count(max_inputs_count: number) {\n\t\tthis._max_inputs_count = max_inputs_count;\n\t\tthis.init_graph_node_inputs();\n\t}\n\n\tnamed_input_connection_points_by_name(name: string): BaseNamedConnectionPointType | undefined {\n\t\tif (this._named_input_connection_points) {\n\t\t\tfor (let connection_point of this._named_input_connection_points) {\n\t\t\t\tif (connection_point.name == name) {\n\t\t\t\t\treturn connection_point;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tset_named_input_connection_points(connection_points: BaseNamedConnectionPointType[]) {\n\t\tthis._has_named_inputs = true;\n\t\tthis._named_input_connection_points = connection_points;\n\t\tthis.set_min_inputs_count(0);\n\t\tthis.set_max_inputs_count(connection_points.length);\n\t\tthis.init_graph_node_inputs();\n\t\tthis.node.emit(NodeEvent.NAMED_INPUTS_UPDATED);\n\t}\n\tget has_named_inputs() {\n\t\treturn this._has_named_inputs;\n\t}\n\tget named_input_connection_points(): BaseNamedConnectionPointType[] {\n\t\treturn this._named_input_connection_points || [];\n\t}\n\tprivate init_graph_node_inputs() {\n\t\tfor (let i = 0; i < this._max_inputs_count; i++) {\n\t\t\tthis._graph_node_inputs[i] = this._graph_node_inputs[i] || this._create_graph_node_input(i);\n\t\t}\n\t}\n\tprivate _create_graph_node_input(index: number): CoreGraphNode {\n\t\tconst graph_input_node = new CoreGraphNode(this.node.scene, `input_${index}`);\n\t\t// graph_input_node.set_scene(this.node.scene);\n\t\tthis.node.add_graph_input(graph_input_node);\n\t\treturn graph_input_node;\n\t}\n\n\tget max_inputs_count(): number {\n\t\treturn this._max_inputs_count || 0;\n\t}\n\tinput_graph_node(input_index: number): CoreGraphNode {\n\t\treturn this._graph_node_inputs[input_index];\n\t}\n\n\t// set_count_to_zero() {\n\t// \tthis.set_min_inputs_count(0);\n\t// \tthis.set_max_inputs_count(0);\n\n\t// \tthis.init_inputs_clonable_state();\n\t// }\n\t// set_count_to_one_max() {\n\t// \tthis.set_min_inputs_count(0);\n\t// \tthis.set_max_inputs_count(1);\n\n\t// \tthis.init_inputs_clonable_state();\n\t// }\n\tset_count(min: number, max?: number) {\n\t\tif (max == null) {\n\t\t\tmax = min;\n\t\t}\n\t\tthis.set_min_inputs_count(min);\n\t\tthis.set_max_inputs_count(max);\n\n\t\tthis.init_inputs_clonable_state();\n\t\tthis.init_connections_controller_inputs();\n\t}\n\tprivate init_connections_controller_inputs() {\n\t\tthis.node.io.connections.init_inputs();\n\t}\n\t// requires_two_inputs: ->\n\t// \tthis.set_min_inputs_count(2)\n\t// \tthis.set_max_inputs_count(2)\n\n\t// requires_one_input() {\n\t// \treturn this._min_inputs_count > 0;\n\t// }\n\n\t// eval_required_inputs(callback){\n\t// \tconst containers = [];\n\t// \tif (this._max_inputs_count === 0) {\n\t// \t\treturn callback(containers);\n\t// \t} else {\n\t// \t\tconst existing_inputs = lodash_compact(this.inputs());\n\t// \t\tif (existing_inputs.length < this._min_inputs_count) {\n\t// \t\t\treturn this.self.set_error(\"inputs are missing\");\n\t// \t\t} else {\n\t// \t\t\t// const frame = this.self.context().frame();\n\t// \t\t\t// const full_path = this.self.full_path();\n\n\t// \t\t\tswitch (existing_inputs.length) {\n\t// \t\t\t\tcase 0:\n\t// \t\t\t\t\treturn callback(containers);\n\t// \t\t\t\tcase 1:\n\t// \t\t\t\t\treturn this.eval_required_input(0, container=> {\n\t// \t\t\t\t\t\tcontainers.push(container);\n\t// \t\t\t\t\t\treturn callback(containers);\n\t// \t\t\t\t\t});\n\t// \t\t\t\tcase 2:\n\t// \t\t\t\t\treturn this.eval_required_input(0, container0=> {\n\t// \t\t\t\t\t\treturn this.eval_required_input(1, container1=> {\n\t// \t\t\t\t\t\t\tcontainers.push(container0);\n\t// \t\t\t\t\t\t\tcontainers.push(container1);\n\t// \t\t\t\t\t\t\treturn callback(containers);\n\t// \t\t\t\t\t\t});\n\t// \t\t\t\t\t});\n\t// \t\t\t\t\t// TODO: I could also here check if the inputs are dirty\n\t// \t\t\t\t\t// instead of going through the callback chain\n\t// \t\t\t\t\t// input_node0 = this.input(0)\n\t// \t\t\t\t\t// input_node0.context().set_frame(frame, full_path)\n\t// \t\t\t\t\t// input_node0.request_container (container0)=>\n\t// \t\t\t\t\t// \tinput_node1 = this.input(1)\n\t// \t\t\t\t\t// \tinput_node1.context().set_frame(frame, full_path)\n\t// \t\t\t\t\t// \tinput_node1.request_container (container1)=>\n\t// \t\t\t\t\t// \t\tcontainers.push(container0)\n\t// \t\t\t\t\t// \t\tcontainers.push(container1)\n\t// \t\t\t\t\t// \t\tcallback([container0, container1])\n\t// \t\t\t\tdefault:\n\t// \t\t\t\t\tconsole.warn(`${this.self.full_path()} inputs not evaluated`);\n\t// \t\t\t\t\treturn callback();\n\t// \t\t\t}\n\t// \t\t}\n\t// \t}\n\t// }\n\tasync eval_required_inputs_p() {\n\t\tlet containers: Array<BaseContainer | null> = [];\n\t\tif (this._max_inputs_count > 0) {\n\t\t\tconst existing_input_indices: number[] = [];\n\t\t\tthis.inputs().forEach((input, i) => {\n\t\t\t\tif (input) {\n\t\t\t\t\texisting_input_indices.push(i);\n\t\t\t\t}\n\t\t\t});\n\t\t\t// const existing_inputs = lodash_compact(this.inputs());\n\t\t\tif (existing_input_indices.length < this._min_inputs_count) {\n\t\t\t\tthis.node.states.error.set('inputs are missing');\n\t\t\t} else {\n\t\t\t\tif (existing_input_indices.length > 0) {\n\t\t\t\t\tconst promises = existing_input_indices.map((input_index) => {\n\t\t\t\t\t\treturn this.node.io.inputs.eval_required_input(input_index);\n\t\t\t\t\t});\n\t\t\t\t\tcontainers = await Promise.all(promises);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn containers;\n\t}\n\t// eval_required_input(input_index: number, callback){\n\t// \treturn this.self.request_input_container(input_index, container=> {\n\t// \t\t// we do not clone here, as we just check if a group is present\n\t// \t\tlet group;\n\t// \t\tif ((container != null) && ((group = container.object({clone: false})) != null)) {\n\t// \t\t\treturn callback(container);\n\t// \t\t} else {\n\t// \t\t\tconst input_node = this.input(input_index);\n\t// \t\t\tif (input_node != null) {\n\t// \t\t\t\tconst input_error_message = input_node.error_message();\n\t// \t\t\t\treturn this.self.set_error(`input ${input_index} is invalid (error: ${input_error_message})`);\n\t// \t\t\t}\n\t// \t\t}\n\t// \t});\n\t// }\n\tasync eval_required_input(input_index: number) {\n\t\tconst container = await this.node.container_controller.request_input_container(input_index);\n\t\t// we do not clone here, as we just check if a group is present\n\t\tif (container && container.core_content()) {\n\t\t\t// return container;\n\t\t} else {\n\t\t\tconst input_node = this.input(input_index);\n\t\t\tif (input_node) {\n\t\t\t\tconst input_error_message = input_node.states.error.message;\n\t\t\t\tif (input_error_message) {\n\t\t\t\t\tthis.node.states.error.set(`input ${input_index} is invalid (error: ${input_error_message})`);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn container;\n\t}\n\t// protected _get_named_input_index_without_error(name: string): number {\n\t// \tconst connections = this.named_input_connections;\n\t// \tlet index = -1;\n\t// \tfor (let i = 0; i < connections.length; i++) {\n\t// \t\tconst connection = connections[i];\n\t// \t\tif (connection.name == name) {\n\t// \t\t\treturn i;\n\t// \t\t}\n\t// \t}\n\t// \treturn index;\n\t// }\n\tget_named_input_index(name: string): number {\n\t\tif (this._named_input_connection_points) {\n\t\t\tfor (let i = 0; i < this._named_input_connection_points.length; i++) {\n\t\t\t\tif (this._named_input_connection_points[i].name == name) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t\t// const index = this._get_named_input_index_without_error(name);\n\t\t// if (index == null) {\n\t\t// \tconst connections = this.named_input_connections;\n\t\t// \tconst available_names = connections.map((o) => o.name).join(', ');\n\t\t// \tconsole.log('named_input_connections', connections);\n\t\t// \tthrow new Error(\n\t\t// \t\t`${this.node.full_path()}: no inputs named '${name}'. available names are '${available_names}' (${\n\t\t// \t\t\tconnections.length\n\t\t// \t\t} inputs)`\n\t\t// \t);\n\t\t// }\n\t\t// return index;\n\t}\n\tget_input_index(input_index_or_name: number | string): number {\n\t\tif (lodash_isString(input_index_or_name)) {\n\t\t\tif (this.has_named_inputs) {\n\t\t\t\treturn this.get_named_input_index(input_index_or_name);\n\t\t\t} else {\n\t\t\t\tthrow new Error(`node ${this.node.full_path()} has no named inputs`);\n\t\t\t}\n\t\t} else {\n\t\t\treturn input_index_or_name;\n\t\t}\n\t}\n\n\tset_input(input_index_or_name: number | string, node: T | null, output_index_or_name: number | string = 0) {\n\t\tconst input_index = this.get_input_index(input_index_or_name) || 0;\n\t\tif (input_index < 0) {\n\t\t\tconst message = `invalid input (${input_index_or_name}) for node ${this.node.full_path()}`;\n\t\t\tconsole.warn(message);\n\t\t\tthrow new Error(message);\n\t\t}\n\n\t\tlet output_index = 0;\n\t\tif (node) {\n\t\t\tif (node.io.outputs.has_named_outputs) {\n\t\t\t\t// if(node.has_named_output(output_index_or_name)){\n\t\t\t\toutput_index = node.io.outputs.get_output_index(output_index_or_name);\n\t\t\t\tif (output_index == null || output_index < 0) {\n\t\t\t\t\tconsole.warn(`node ${node.full_path()} does not have an output named ${output_index_or_name}`);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\t// this seems to prevent connecting output 1 from a vec to float to something else\n\t\t\t\t// } else {\n\t\t\t\t// \tconsole.warn(`${node.full_path()} has no output '${output_index_or_name}'`)\n\t\t\t\t// }\n\t\t\t}\n\t\t}\n\n\t\tconst graph_input_node = this._graph_node_inputs[input_index];\n\t\tif (graph_input_node == null) {\n\t\t\tconst message = `graph_input_node not found at index ${input_index}`;\n\t\t\tconsole.warn(message);\n\t\t\tthrow new Error(message);\n\t\t}\n\n\t\tif (node && this.node.parent != node.parent) {\n\t\t\treturn;\n\t\t}\n\t\t// use the name if the node is either not defined or in another parent\n\t\t// const parent = this.self.parent()\n\t\t// if ((node == null) || (node.parent().graph_node_id !== parent.graph_node_id)) {\n\t\t// \tif (node_name != null) {\n\t\t// \t\tnode = parent.node(node_name);\n\t\t// \t}\n\t\t// }\n\n\t\tconst old_input_node = this._inputs[input_index];\n\t\tlet old_output_index: number | null = null;\n\t\tlet old_connection: NodeConnection | undefined = undefined;\n\t\tif (this.node.io.connections) {\n\t\t\told_connection = this.node.io.connections.input_connection(input_index);\n\t\t}\n\t\tif (old_connection) {\n\t\t\told_output_index = old_connection.output_index;\n\t\t}\n\n\t\tif (node !== old_input_node || output_index != old_output_index) {\n\t\t\t// TODO: test: add test to make sure this is necessary\n\t\t\tif (old_input_node != null) {\n\t\t\t\tif (this._depends_on_inputs) {\n\t\t\t\t\tgraph_input_node.remove_graph_input(old_input_node);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (node != null) {\n\t\t\t\tif (graph_input_node.add_graph_input(node)) {\n\t\t\t\t\t// we do test if we can create the graph connection\n\t\t\t\t\t// to ensure we are not in a cyclical graph,\n\t\t\t\t\t// but we delete it right after\n\t\t\t\t\tif (!this._depends_on_inputs) {\n\t\t\t\t\t\tgraph_input_node.remove_graph_input(node);\n\t\t\t\t\t}\n\n\t\t\t\t\t//this._input_connections[input_index] = new NodeConnection(node, this.self, output_index, input_index);\n\t\t\t\t\tif (old_connection) {\n\t\t\t\t\t\told_connection.disconnect({set_input: false});\n\t\t\t\t\t}\n\t\t\t\t\tthis._inputs[input_index] = node;\n\t\t\t\t\tnew NodeConnection(node, this.node, output_index, input_index);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(`cannot connect ${node.full_path()} to ${this.node.full_path()}`);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis._inputs[input_index] = null;\n\t\t\t\tif (old_connection) {\n\t\t\t\t\told_connection.disconnect({set_input: false});\n\t\t\t\t}\n\t\t\t\t// this._input_connections[input_index] = null;\n\t\t\t}\n\n\t\t\tthis._run_on_set_input_hooks();\n\t\t\tgraph_input_node.set_successors_dirty();\n\t\t\t// this.node.set_dirty(node);\n\t\t\tthis.node.emit(NodeEvent.INPUTS_UPDATED);\n\t\t}\n\t}\n\n\tremove_input(node: T) {\n\t\tlodash_each(this.inputs(), (input, index) => {\n\t\t\tif (input != null && node != null) {\n\t\t\t\tif (input.graph_node_id === node.graph_node_id) {\n\t\t\t\t\tthis.set_input(index, null);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tinput(input_index: number): T | null {\n\t\treturn this._inputs[input_index];\n\t}\n\t// TODO: the named_input and named_output API really needs to change\n\tnamed_input(input_name: string): T | null {\n\t\tif (this.has_named_inputs) {\n\t\t\tconst input_index = this.get_input_index(input_name);\n\t\t\treturn this._inputs[input_index];\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\tnamed_input_connection_point(input_name: string): BaseNamedConnectionPointType | undefined {\n\t\tif (this.has_named_inputs && this._named_input_connection_points) {\n\t\t\tconst input_index = this.get_input_index(input_name);\n\t\t\treturn this._named_input_connection_points[input_index];\n\t\t}\n\t}\n\thas_named_input(name: string): boolean {\n\t\treturn this.get_named_input_index(name) >= 0;\n\t}\n\thas_input(input_index: number): boolean {\n\t\treturn this._inputs[input_index] != null;\n\t}\n\tinputs() {\n\t\treturn this._inputs;\n\t}\n\n\t// outputs(): BaseNode[] {\n\t// \treturn lodash_filter(this.self.graph_successors(), successor=> {\n\t// \t\tif (successor.is_a(Node)) {\n\t// \t\t\treturn lodash_includes(successor.inputs(), this.self);\n\t// \t\t}\n\t// \t});\n\t// }\n\n\t// clonable states\n\toverride_clonable_state_allowed() {\n\t\tlet value = false;\n\t\tfor (let state of this.inputs_clonable_state()) {\n\t\t\tif (state == InputCloneMode.FROM_NODE) {\n\t\t\t\tvalue = true;\n\t\t\t}\n\t\t}\n\t\treturn value;\n\t}\n\n\tinputs_clonable_state(): InputCloneMode[] {\n\t\treturn (this._inputs_clonable_states = this._inputs_clonable_states || this.init_inputs_clonable_state());\n\t}\n\tinput_cloned(index: number): boolean {\n\t\treturn this.input_clonable_state_with_override(index);\n\t}\n\tinputs_clonable_state_with_override(): boolean[] {\n\t\tconst list = [];\n\t\tconst states = this.inputs_clonable_state();\n\t\tfor (let i = 0; i < states.length; i++) {\n\t\t\tlist.push(this.input_clonable_state_with_override(i));\n\t\t}\n\t\treturn list;\n\t}\n\tinput_clonable_state_with_override(index: number): boolean {\n\t\tconst states = this.inputs_clonable_state();\n\t\t// for (let i = 0; i < states.length; i++) {\n\t\t// TODO: typescript: not sure if this loop was justified\n\t\tconst state = states[index];\n\t\tswitch (state) {\n\t\t\tcase InputCloneMode.ALWAYS:\n\t\t\t\treturn true;\n\t\t\tcase InputCloneMode.NEVER:\n\t\t\t\treturn false;\n\t\t\tcase InputCloneMode.FROM_NODE:\n\t\t\t\treturn !this._override_clonable_state;\n\t\t\t// default:\n\t\t\t// \tthrow new Error('unsupported type');\n\t\t}\n\t\treturn TypeAssert.unreachable(state);\n\t\t// }\n\t}\n\n\tinit_inputs_clonable_state(values: InputCloneMode[] | null = null) {\n\t\tif (values) {\n\t\t\tthis._user_inputs_clonable_states = values;\n\t\t}\n\t\tthis._inputs_clonable_states = this._user_inputs_clonable_states || this._default_inputs_clonale_state_values();\n\n\t\treturn this._inputs_clonable_states;\n\t}\n\tprivate _default_inputs_clonale_state_values() {\n\t\tconst list = [];\n\t\tfor (let i = 0; i < this._max_inputs_count; i++) {\n\t\t\t// lodash_times(this.self._max_inputs_count, (i)=>{\n\t\t\tlist.push(InputCloneMode.ALWAYS);\n\t\t}\n\t\treturn list;\n\t}\n\n\tset_override_clonable_state(state: boolean) {\n\t\tthis._override_clonable_state = state;\n\t\tthis.node.emit(NodeEvent.OVERRIDE_CLONABLE_STATE_UPDATE);\n\t}\n\toverride_clonable_state() {\n\t\treturn this._override_clonable_state;\n\t}\n\n\t//\n\t//\n\t// HOOKS\n\t//\n\t//\n\tadd_on_set_input_hook(name: string, hook: OnUpdateHook) {\n\t\tthis._on_update_hooks = this._on_update_hooks || [];\n\t\tthis._on_update_hook_names = this._on_update_hook_names || [];\n\n\t\tif (!this._on_update_hook_names.includes(name)) {\n\t\t\tthis._on_update_hooks.push(hook);\n\t\t\tthis._on_update_hook_names.push(name);\n\t\t} else {\n\t\t\tconsole.warn(`hook with name ${name} already exists`, this.node);\n\t\t}\n\t}\n\tprivate _run_on_set_input_hooks() {\n\t\tif (this._on_update_hooks) {\n\t\t\tfor (let hook of this._on_update_hooks) {\n\t\t\t\thook();\n\t\t\t}\n\t\t}\n\t}\n}\n","import {BaseNodeType} from '../../_Base';\nimport {BaseNamedConnectionPointType} from './NamedConnectionPoint';\nimport lodash_isNumber from 'lodash/isNumber';\nimport lodash_uniq from 'lodash/uniq';\nimport lodash_isString from 'lodash/isString';\nimport {NodeEvent} from '../../../poly/NodeEvent';\n\n// interface OutputsOptions {\n// \thas_outputs?: boolean;\n// }\n// TODO: remove the \"throw\" statements, which seem less necessary now with typescript\nexport class OutputsController<T extends BaseNodeType> {\n\tprivate _has_outputs: boolean = false;\n\tprivate _named_output_connection_points: BaseNamedConnectionPointType[] | undefined;\n\tprivate _has_named_outputs: boolean = false;\n\n\tconstructor(private node: T) {}\n\n\t// init(options?: OutputsOptions) {\n\t// \tif (options == null) {\n\t// \t\toptions = {};\n\t// \t}\n\t// \tif (options['has_outputs'] == null) {\n\t// \t\toptions['has_outputs'] = true;\n\t// \t}\n\t// \tthis._has_outputs = options['has_outputs'];\n\t// }\n\tset_has_one_output() {\n\t\tthis._has_outputs = true;\n\t}\n\tset_has_no_output() {\n\t\tthis._has_outputs = false;\n\t}\n\n\tget has_outputs() {\n\t\treturn this._has_outputs;\n\t}\n\tget has_named_outputs() {\n\t\treturn this._has_named_outputs;\n\t}\n\thas_named_output(name: string): boolean {\n\t\t// return this._get_named_output_index_without_error(name) != null;\n\t\treturn this.get_named_output_index(name) >= 0;\n\t}\n\tget named_output_connection_points(): BaseNamedConnectionPointType[] {\n\t\treturn this._named_output_connection_points || [];\n\t}\n\tnamed_output_connection(index: number): BaseNamedConnectionPointType | undefined {\n\t\tif (this._named_output_connection_points) {\n\t\t\treturn this._named_output_connection_points[index];\n\t\t}\n\t}\n\t// protected _get_named_output_index_without_error(name: string): number {\n\t// \tconst connections = this.named_output_connection_points;\n\t// \tfor (let i = 0; i < connections.length; i++) {\n\t// \t\tconst connection = connections[i];\n\t// \t\tif (connection.name == name) {\n\t// \t\t\treturn i;\n\t// \t\t}\n\t// \t}\n\t// \treturn -1;\n\t// }\n\tget_named_output_index(name: string): number {\n\t\tif (this._named_output_connection_points) {\n\t\t\tfor (let i = 0; i < this._named_output_connection_points.length; i++) {\n\t\t\t\tif (this._named_output_connection_points[i].name == name) {\n\t\t\t\t\treturn i;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\n\t\t// const index = this._get_named_output_index_without_error(name);\n\t\t// if (index == null) {\n\t\t// \tconst connection_points = this.named_output_connection_points;\n\t\t// \tconst available_names = connection_points.map((o) => o.name).join(', ');\n\t\t// \tthrow new Error(`no outputs named '${name}'. available names are ${available_names}`);\n\t\t// }\n\t\t// return index;\n\t}\n\tget_output_index(output_index_or_name: number | string): number {\n\t\tif (output_index_or_name != null) {\n\t\t\tif (lodash_isString(output_index_or_name)) {\n\t\t\t\tif (this.has_named_outputs) {\n\t\t\t\t\treturn this.get_named_output_index(output_index_or_name);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn(`node ${this.node.full_path()} has no named outputs`);\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\treturn output_index_or_name;\n\t\t\t}\n\t\t}\n\t\treturn -1;\n\t}\n\n\tnamed_output_connection_points_by_name(name: string): BaseNamedConnectionPointType | undefined {\n\t\tif (this._named_output_connection_points) {\n\t\t\tfor (let connection_point of this._named_output_connection_points) {\n\t\t\t\tif (connection_point.name == name) {\n\t\t\t\t\treturn connection_point;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\n\tset_named_output_connection_points(connection_points: BaseNamedConnectionPointType[], set_dirty: boolean = true) {\n\t\tthis._has_named_outputs = true;\n\t\tthis._named_output_connection_points = connection_points;\n\t\tif (set_dirty && this.node.scene) {\n\t\t\t// why do I need this set dirty here?\n\t\t\t// I currently have to have a flag to optionally prevent this,\n\t\t\t// for instance from gl nodes which have their outputs updated in a post dirty hook\n\t\t\tthis.node.set_dirty(this.node);\n\t\t}\n\t\tthis.node.emit(NodeEvent.NAMED_OUTPUTS_UPDATED);\n\t}\n\tused_output_names(): string[] {\n\t\tif (this.node.io.connections) {\n\t\t\tconst output_indices = lodash_uniq(\n\t\t\t\tthis.node.io.connections\n\t\t\t\t\t.output_connections()\n\t\t\t\t\t.map((connection) => (connection ? connection.output_index : null))\n\t\t\t);\n\t\t\tconst used_output_indices: number[] = [];\n\t\t\toutput_indices.forEach((index) => {\n\t\t\t\tif (lodash_isNumber(index)) {\n\t\t\t\t\tused_output_indices.push(index);\n\t\t\t\t}\n\t\t\t});\n\t\t\tconst used_output_names: string[] = used_output_indices.map((index) => {\n\t\t\t\treturn this.named_output_connection_points[index].name;\n\t\t\t});\n\t\t\treturn used_output_names;\n\t\t} else {\n\t\t\treturn [];\n\t\t}\n\t}\n}\n","import {BaseNodeType} from '../../_Base';\n\nimport {ConnectionsController} from './ConnectionsController';\nimport {InputsController} from './InputsController';\nimport {OutputsController} from './OutputsController';\n\nexport class IOController<T extends BaseNodeType> {\n\tprotected _connections: ConnectionsController = new ConnectionsController(this.node);\n\tprotected _inputs: InputsController<T> | undefined;\n\tprotected _outputs: OutputsController<T> | undefined;\n\n\tconstructor(protected node: T) {}\n\n\t// add_connections_controller() {\n\t// \tthis._connections =\n\t// }\n\tget connections() {\n\t\treturn this._connections;\n\t}\n\n\t// inputs\n\t// init_inputs(options: InputsControllerOptions) {\n\t// \tthis.inputs.set_options(options);\n\t// }\n\tget inputs(): InputsController<T> {\n\t\treturn (this._inputs = this._inputs || new InputsController<T>(this.node));\n\t}\n\thas_inputs() {\n\t\treturn this._inputs != null;\n\t}\n\n\t// outputs\n\t// init_outputs() {\n\t// \tthis._outputs = this._outputs || new OutputsController(this.node);\n\t// }\n\tget outputs(): OutputsController<T> {\n\t\treturn (this._outputs = this._outputs || new OutputsController<T>(this.node));\n\t}\n\thas_outputs() {\n\t\treturn this._outputs != null;\n\t}\n}\n","import {NodeParamsConfig} from './ParamsConfig';\n// import {ParamValuesTypeMap} from './ParamsController';\n// import {ParamType} from '../../../poly/ParamType';\n\n// function getProperty<T, K extends keyof T>(o: T, propertyName: K): T[K] {\n// \treturn o[propertyName]; // o[propertyName] is of type T[K]\n// }\n\n// let t: getProperty(ParamConfig, 'type')\n// function prop<T, K extends keyof T>(obj: T, key: K) {\n// \treturn typeof obj[key];\n// }\n// type test = Pick<ParamConfig<ParamType.FLOAT>, 'default_value'>;\n\nexport type ParamsAccessorType<T extends NodeParamsConfig> = {\n\treadonly [P in keyof T]: T[P]['param_class'];\n};\n\nexport class ParamsAccessor<T extends NodeParamsConfig> {\n\tconstructor() {\n\t\t// console.log('accessor', this);\n\t}\n}\n","import {PolyScene} from '../scene/PolyScene';\nimport {CoreGraphNode} from '../../core/graph/CoreGraphNode';\n// import {NamedGraphNode} from '../../core/graph/NamedGraphNode';\n\n// import {BaseParam} from '../params/_Base';\n// import {GeometryContainer} from '../containers/Geometry';\n// import {UIData} from './UIData';\n\n// import {Bypass} from './concerns/Bypass';\n// import {ConnectionsOwner} from './concerns/ConnectionsOwner';\n// import {ContainerOwner} from './concerns/ContainerOwner';\n// import {Cook} from './concerns/Cook';\n// import {CustomNode} from './concerns/CustomNode';\n// import {Dependencies} from './concerns/old/Dependencies';\n// import {DisplayFlag} from './concerns/DisplayFlag';\n// import {Errored} from './concerns/Errored';\n// import {HierarchyChildrenOwner} from './concerns/HierarchyChildrenOwner';\n// import {HierarchyParentOwner} from './concerns/old/HierarchyParentOwner';\n// import {InputsClonable} from './concerns/InputsClonable';\n// import {InputsOwner} from './concerns/InputsOwner';\n// import {Json} from './concerns/Json';\n// import {LifeCycle} from './concerns/old/LifeCycle';\n// import {Named} from './concerns/Named';\n// import {OutputsOwner} from './concerns/OutputsOwner';\n// import {ParamsOwner} from './concerns/ParamsOwner';\n// import {Selectable} from './concerns/old/Selectable';\n// import {TimeDependent} from './concerns/TimeDependent';\n// import {UIDataOwner} from './concerns/UIDataOwner';\n// import {Visit} from './concerns/Visit';\n\nimport {UIData} from './utils/UIData';\nimport {FlagsController} from './utils/FlagsController';\nimport {StatesController} from './utils/StatesController';\nimport {HierarchyParentController} from './utils/hierarchy/ParentController';\nimport {HierarchyChildrenController} from './utils/hierarchy/ChildrenController';\nimport {LifeCycleController} from './utils/LifeCycleController';\nimport {TypedContainerController} from './utils/ContainerController';\nimport {CookController} from './utils/CookController';\nimport {DependenciesController} from './utils/DependenciesController';\nimport {NameController} from './utils/NameController';\nimport {NodeSerializer, NodeSerializerData} from './utils/Serializer';\nimport {ParamsController} from './utils/params/ParamsController';\nimport {ParamConstructorMap} from '../params/types/ParamConstructorMap';\nimport {ParamInitValuesTypeMap} from '../params/types/ParamInitValuesTypeMap';\n\nimport {NodeParamsConfig} from './utils/params/ParamsConfig';\nimport {ParamsValueAccessor, ParamsValueAccessorType} from './utils/params/ParamsValueAccessor';\nimport {ProcessingContext} from './utils/ProcessingContext';\nimport {IOController} from './utils/connections/IOController';\n\n// import {BaseContainer} from '../containers/_Base';\n\n// import {BaseParam} from '../params/_Base';\n// import {BooleanParam} from '../params/Boolean';\n// import {ButtonParam} from '../params/Button';\n// import {ColorParam} from '../params/Color';\n// import {FloatParam} from '../params/Float';\n// import {IntegerParam} from '../params/Integer';\n// import {OperatorPathParam} from '../params/OperatorPath';\n// import {RampParam} from '../params/Ramp';\n// import {SeparatorParam} from '../params/Separator';\n// import {StringParam} from '../params/String';\n// import {Vector2Param} from '../params/Vector2';\n// import {Vector3Param} from '../params/Vector3';\n// import {Vector4Param} from '../params/Vector4';\nimport {NodeEvent} from '../poly/NodeEvent';\nimport {NodeContext} from '../poly/NodeContext';\n\n// import {TypedContainer} from '../containers/_Base';\nimport {ParamsAccessorType, ParamsAccessor} from './utils/params/ParamsAccessor';\n\nexport interface NodeVisitor {\n\tvisit_node: (node: BaseNodeType) => any;\n\tvisit_node_obj: (node: BaseNodeType) => any;\n}\n\nexport interface NodeDeletedEmitData {\n\tparent_id: string;\n}\nexport interface NodeCreatedEmitData {\n\tchild_node_json: NodeSerializerData;\n}\ntype EmitDataByNodeEventMapGeneric = {[key in NodeEvent]: any};\nexport interface EmitDataByNodeEventMap extends EmitDataByNodeEventMapGeneric {\n\t[NodeEvent.CREATED]: NodeCreatedEmitData;\n\t[NodeEvent.DELETED]: NodeDeletedEmitData;\n\t[NodeEvent.ERROR_UPDATED]: undefined;\n}\n// emit(event_name: NodeEvent.CREATED, data: EmitDataByNodeEventMap[NodeEvent.CREATED]): void;\n// \temit(event_name: NodeEvent.DELETED, data: NodeDeletedEmitData): void;\n// \temit(event_name: NodeEvent.NAME_UPDATED): void;\n// \temit(event_name: NodeEvent.OVERRIDE_CLONABLE_STATE_UPDATE): void;\n// \temit(event_name: NodeEvent.NAMED_INPUTS_UPDATED): void;\n// \temit(event_name: NodeEvent.NAMED_OUTPUTS_UPDATED): void;\n// \temit(event_name: NodeEvent.INPUTS_UPDATED): void;\n// \temit(event_name: NodeEvent.PARAMS_UPDATED): void;\n// \temit(event_name: NodeEvent.UI_DATA_POSITION_UPDATED): void;\n// \temit(event_name: NodeEvent.UI_DATA_COMMENT_UPDATED): void;\n// \temit(event_name: NodeEvent.ERROR_UPDATED): void;\n// \temit(event_name: NodeEvent.FLAG_BYPASS_UPDATED): void;\n// \temit(event_name: NodeEvent.FLAG_DISPLAY_UPDATED): void;\n// \temit(event_name: NodeEvent.SELECTION_UPDATED): void;\n\nimport {ContainerMap} from '../containers/utils/ContainerMap';\nimport {ContainableMap} from '../containers/utils/ContainableMap';\nimport {BaseContainer} from '../containers/_Base';\nimport {ParamOptions} from '../params/utils/OptionsController';\nimport {ParamType} from '../poly/ParamType';\nimport {DisplayNodeController} from './utils/DisplayNodeController';\n\n// type Container = ContainerMap[KT];\ntype KT = keyof ContainerMap;\nexport class TypedNode<T extends KT, NT extends BaseNodeType, K extends NodeParamsConfig> extends CoreGraphNode {\n\tcontainer_controller: TypedContainerController<ContainerMap[T]> = new TypedContainerController<ContainerMap[T]>(\n\t\tthis,\n\t\tBaseContainer\n\t);\n\n\tprivate _parent_controller: HierarchyParentController | undefined;\n\n\tprivate _ui_data: UIData | undefined;\n\n\tprivate _dependencies_controller: DependenciesController | undefined;\n\tprivate _states: StatesController | undefined;\n\tprivate _lifecycle: LifeCycleController | undefined;\n\tprivate _serializer: NodeSerializer | undefined;\n\tprivate _cook_controller: CookController | undefined;\n\tpublic readonly flags: FlagsController | undefined;\n\tprotected _display_node_controller: DisplayNodeController | undefined;\n\tget display_node_controller() {\n\t\treturn this._display_node_controller;\n\t}\n\n\tprivate _params_controller: ParamsController | undefined;\n\treadonly params_config: K | undefined;\n\treadonly pv: ParamsValueAccessorType<K> = (<unknown>new ParamsValueAccessor<K>()) as ParamsValueAccessorType<K>;\n\t// readonly pv: ParamsValueAccessor<K> = new ParamsValueAccessor<K>(this);\n\treadonly p: ParamsAccessorType<K> = (<unknown>new ParamsAccessor<K>()) as ParamsAccessorType<K>;\n\t// readonly p: ParamsAccessor<K> = new ParamsAccessor<K>(this);\n\n\tprivate _processing_context: ProcessingContext | undefined;\n\tprivate _name_controller: NameController | undefined;\n\tprivate _io: IOController<NT> | undefined;\n\tget parent_controller(): HierarchyParentController {\n\t\treturn (this._parent_controller = this._parent_controller || new HierarchyParentController(this));\n\t}\n\tstatic displayed_input_names(): string[] {\n\t\treturn [];\n\t}\n\n\tprivate _children_controller: HierarchyChildrenController | undefined;\n\tprotected _children_controller_context: NodeContext | undefined;\n\tget children_controller_context() {\n\t\treturn this._children_controller_context;\n\t}\n\tprivate _create_children_controller(): HierarchyChildrenController | undefined {\n\t\tif (this._children_controller_context) {\n\t\t\treturn new HierarchyChildrenController(this, this._children_controller_context);\n\t\t}\n\t}\n\tget children_controller(): HierarchyChildrenController | undefined {\n\t\treturn (this._children_controller = this._children_controller || this._create_children_controller());\n\t}\n\tchildren_allowed(): boolean {\n\t\treturn this._children_controller_context != null;\n\t}\n\n\tget ui_data(): UIData {\n\t\treturn (this._ui_data = this._ui_data || new UIData(this));\n\t}\n\tget dependencies_controller(): DependenciesController {\n\t\treturn (this._dependencies_controller = this._dependencies_controller || new DependenciesController(this));\n\t}\n\tget states(): StatesController {\n\t\treturn (this._states = this._states || new StatesController(this));\n\t}\n\tget lifecycle(): LifeCycleController {\n\t\treturn (this._lifecycle = this._lifecycle || new LifeCycleController(this));\n\t}\n\tget serializer(): NodeSerializer {\n\t\treturn (this._serializer = this._serializer || new NodeSerializer(this));\n\t}\n\t// get container_controller(): TypedContainerController<T> {\n\t// \treturn (this._container_controller = this._container_controller || new TypedContainerController<T>(this));\n\t// }\n\tget cook_controller(): CookController {\n\t\treturn (this._cook_controller = this._cook_controller || new CookController(this));\n\t}\n\tget io(): IOController<NT> {\n\t\treturn (this._io = this._io || new IOController<NT>((<unknown>this) as NT));\n\t}\n\tget name_controller(): NameController {\n\t\treturn (this._name_controller = this._name_controller || new NameController(this));\n\t}\n\tset_name(name: string) {\n\t\tthis.name_controller.set_name(name);\n\t}\n\t_set_core_name(name: string) {\n\t\tthis._name = name;\n\t}\n\tget params(): ParamsController {\n\t\treturn (this._params_controller = this._params_controller || new ParamsController(this));\n\t}\n\tget processing_context(): ProcessingContext {\n\t\treturn (this._processing_context = this._processing_context || new ProcessingContext(this));\n\t}\n\n\tconstructor(scene: PolyScene, name: string = 'BaseNode') {\n\t\tsuper(scene, name);\n\t}\n\n\tprivate _initialized: boolean = false;\n\tpublic initialize_base_and_node() {\n\t\tif (!this._initialized) {\n\t\t\tthis.initialize_base_node(); // for base classes of Sop, Obj...\n\t\t\tthis.initialize_node(); // for Derivated node clases, like BoxSop, TransformSop...\n\t\t\tthis._initialized = true;\n\t\t} else {\n\t\t\tconsole.warn('node already initialized');\n\t\t}\n\t}\n\tprotected initialize_base_node() {}\n\tprotected initialize_node() {}\n\t// constructor() {\n\t// \tsuper('base_node');\n\n\t// \t// this._init_node_scene()\n\t// \t// this._init_context_owner()\n\t// \t// this._init_dirtyable()\n\t// \t// this._init_graph_node()\n\n\t// \t// this._init_bypass_flag();\n\t// \t// this._init_display_flag();\n\t// \t//this._init_context()\n\t// \t// this._init_cook();\n\t// \t// this._init_error();\n\t// \t// this._init_inputs();\n\t// \t// this._init_outputs();\n\t// \t// this._init_hierarchy_parent_owner();\n\t// \t//this._init_time_dependent()\n\t// \t// this._init_ui_data();\n\t// }\n\tstatic type(): string {\n\t\tthrow 'type to be overriden';\n\t}\n\tget type() {\n\t\tconst c = this.constructor as typeof BaseNodeClass;\n\t\treturn c.type();\n\t}\n\tstatic node_context(): NodeContext {\n\t\tthrow 'requires override';\n\t}\n\tnode_context(): NodeContext {\n\t\tconst c = this.constructor as typeof BaseNodeClass;\n\t\treturn c.node_context();\n\t}\n\n\tstatic required_three_imports(): string[] {\n\t\treturn [];\n\t}\n\tstatic required_imports() {\n\t\tlet three_imports = this.required_three_imports();\n\t\tif (three_imports) {\n\t\t\t// if (!lodash_isArray(three_imports)) {\n\t\t\t// \tthree_imports = [<unknown>three_imports as string];\n\t\t\t// }\n\t\t\treturn three_imports.map((e) => `three/examples/jsm/${e}`);\n\t\t} else {\n\t\t\treturn [];\n\t\t}\n\t}\n\trequired_imports() {\n\t\tconst c = this.constructor as typeof BaseNodeClass;\n\t\treturn c.required_imports();\n\t}\n\tstatic require_webgl2(): boolean {\n\t\treturn false;\n\t}\n\trequire_webgl2(): boolean {\n\t\tconst c = this.constructor as typeof BaseNodeClass;\n\t\treturn c.require_webgl2();\n\t}\n\n\t// set_scene(scene: PolyScene) {\n\t// \tsuper.set_scene(scene);\n\t// \t// this.io.inputs._init_graph_node_inputs();\n\t// }\n\n\t// accepts_visitor<T extends NodeVisitor>(visitor: T): ReturnType<T['visit_node']> {\n\t// \treturn visitor.visit_node(this);\n\t// }\n\tset_parent(parent: BaseNodeType | null) {\n\t\tthis.parent_controller.set_parent(parent);\n\t}\n\tget parent() {\n\t\treturn this.parent_controller.parent;\n\t}\n\tget root() {\n\t\treturn this._scene.root;\n\t}\n\tfull_path(): string {\n\t\treturn this.parent_controller.full_path();\n\t}\n\n\t// params\n\tcreate_params() {}\n\tadd_param<T extends ParamType>(\n\t\ttype: T,\n\t\tname: string,\n\t\tdefault_value: ParamInitValuesTypeMap[T],\n\t\toptions?: ParamOptions\n\t): ParamConstructorMap[T] | undefined {\n\t\treturn this._params_controller?.add_param(type, name, default_value, options);\n\t}\n\t// within_param_folder(folder_name: string, callback: () => void) {\n\t// \tthis._params_controller?.within_param_folder(folder_name, callback);\n\t// }\n\n\t// cook\n\tcook(input_contents: any[]): any {\n\t\treturn null;\n\t}\n\n\t// container\n\tasync request_container() {\n\t\treturn await this.container_controller.request_container();\n\t}\n\tset_container(content: ContainableMap[T], message: string | null = null) {\n\t\t// if message?\n\t\t// TODO: typescript: why is this a type of never\n\t\tthis.container_controller.container.set_content(content as never); //, this.self.cook_eval_key());\n\t\tif (content != null) {\n\t\t\tif (!(content as any).name) {\n\t\t\t\t(content as any).name = this.full_path();\n\t\t\t}\n\t\t\tif (!(content as any).node) {\n\t\t\t\t(content as any).node = this;\n\t\t\t}\n\t\t}\n\t\t//if @_container.has_content()?\n\t\tthis.cook_controller.end_cook(message);\n\t}\n\n\t// hierarchy\n\tcreate_node(type: string) {\n\t\treturn this.children_controller?.create_node(type);\n\t}\n\tremove_node(node: BaseNodeType) {\n\t\tthis.children_controller?.remove_node(node);\n\t}\n\tchildren() {\n\t\treturn this.children_controller?.children() || [];\n\t}\n\tnode(path: string) {\n\t\treturn this.parent_controller?.find_node(path) || null;\n\t}\n\tnode_sibbling(name: string): TypedNode<T, NT, any> | null {\n\t\tif (this.parent) {\n\t\t\tconst node = this.parent.children_controller?.child_by_name(name);\n\t\t\tif (node) {\n\t\t\t\treturn node as TypedNode<T, NT, any>;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\tnodes_by_type(type: string) {\n\t\treturn this.children_controller?.nodes_by_type(type) || [];\n\t}\n\n\t// inputs\n\tset_input(input_index_or_name: number | string, node: NT | null, output_index_or_name: number | string = 0) {\n\t\tthis.io.inputs.set_input(input_index_or_name, node, output_index_or_name);\n\t}\n\n\t// emit\n\n\temit(event_name: NodeEvent.CREATED, data: EmitDataByNodeEventMap[NodeEvent.CREATED]): void;\n\temit(event_name: NodeEvent.DELETED, data: EmitDataByNodeEventMap[NodeEvent.DELETED]): void;\n\temit(event_name: NodeEvent.NAME_UPDATED): void;\n\temit(event_name: NodeEvent.OVERRIDE_CLONABLE_STATE_UPDATE): void;\n\temit(event_name: NodeEvent.NAMED_INPUTS_UPDATED): void;\n\temit(event_name: NodeEvent.NAMED_OUTPUTS_UPDATED): void;\n\temit(event_name: NodeEvent.INPUTS_UPDATED): void;\n\temit(event_name: NodeEvent.PARAMS_UPDATED): void;\n\temit(event_name: NodeEvent.UI_DATA_POSITION_UPDATED): void;\n\temit(event_name: NodeEvent.UI_DATA_COMMENT_UPDATED): void;\n\temit(event_name: NodeEvent.ERROR_UPDATED): void;\n\temit(event_name: NodeEvent.FLAG_BYPASS_UPDATED): void;\n\temit(event_name: NodeEvent.FLAG_DISPLAY_UPDATED): void;\n\temit(event_name: NodeEvent.SELECTION_UPDATED): void;\n\temit(event_name: NodeEvent, data: object | null = null): void {\n\t\t// super.emit(event_name, data);\n\t\tthis.scene.dispatch_controller.dispatch(this, event_name, data);\n\t}\n\n\t// serializer\n\tto_json(include_param_components: boolean = false) {\n\t\treturn this.serializer.to_json(include_param_components);\n\t}\n}\n\nexport type BaseNodeType = TypedNode<any, BaseNodeType, any>;\nexport class BaseNodeClass extends TypedNode<any, BaseNodeType, any> {}\n","/**\n * https://github.com/mrdoob/eventdispatcher.js/\n */\n\nfunction EventDispatcher() {}\n\nObject.assign( EventDispatcher.prototype, {\n\n\taddEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) this._listeners = {};\n\n\t\tvar listeners = this._listeners;\n\n\t\tif ( listeners[ type ] === undefined ) {\n\n\t\t\tlisteners[ type ] = [];\n\n\t\t}\n\n\t\tif ( listeners[ type ].indexOf( listener ) === - 1 ) {\n\n\t\t\tlisteners[ type ].push( listener );\n\n\t\t}\n\n\t},\n\n\thasEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return false;\n\n\t\tvar listeners = this._listeners;\n\n\t\treturn listeners[ type ] !== undefined && listeners[ type ].indexOf( listener ) !== - 1;\n\n\t},\n\n\tremoveEventListener: function ( type, listener ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tvar listeners = this._listeners;\n\t\tvar listenerArray = listeners[ type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tvar index = listenerArray.indexOf( listener );\n\n\t\t\tif ( index !== - 1 ) {\n\n\t\t\t\tlistenerArray.splice( index, 1 );\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tdispatchEvent: function ( event ) {\n\n\t\tif ( this._listeners === undefined ) return;\n\n\t\tvar listeners = this._listeners;\n\t\tvar listenerArray = listeners[ event.type ];\n\n\t\tif ( listenerArray !== undefined ) {\n\n\t\t\tevent.target = this;\n\n\t\t\t// Make a copy, in case listeners are removed while iterating.\n\t\t\tvar array = listenerArray.slice( 0 );\n\n\t\t\tfor ( var i = 0, l = array.length; i < l; i ++ ) {\n\n\t\t\t\tarray[ i ].call( this, event );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n} );\n\n\nexport { EventDispatcher };\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nmodule.exports = eq;\n","var baseGetTag = require('./_baseGetTag'),\n    isObject = require('./isObject');\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nmodule.exports = isFunction;\n","var assignValue = require('./_assignValue'),\n    baseAssignValue = require('./_baseAssignValue');\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  var isNew = !object;\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    if (newValue === undefined) {\n      newValue = source[key];\n    }\n    if (isNew) {\n      baseAssignValue(object, key, newValue);\n    } else {\n      assignValue(object, key, newValue);\n    }\n  }\n  return object;\n}\n\nmodule.exports = copyObject;\n","var baseIsArguments = require('./_baseIsArguments'),\n    isObjectLike = require('./isObjectLike');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nmodule.exports = isArguments;\n","var baseIsTypedArray = require('./_baseIsTypedArray'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nmodule.exports = isTypedArray;\n","var baseClone = require('./_baseClone');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_SYMBOLS_FLAG = 4;\n\n/**\n * Creates a shallow clone of `value`.\n *\n * **Note:** This method is loosely based on the\n * [structured clone algorithm](https://mdn.io/Structured_clone_algorithm)\n * and supports cloning arrays, array buffers, booleans, date objects, maps,\n * numbers, `Object` objects, regexes, sets, strings, symbols, and typed\n * arrays. The own enumerable properties of `arguments` objects are cloned\n * as plain objects. An empty object is returned for uncloneable values such\n * as error objects, functions, DOM nodes, and WeakMaps.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to clone.\n * @returns {*} Returns the cloned value.\n * @see _.cloneDeep\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var shallow = _.clone(objects);\n * console.log(shallow[0] === objects[0]);\n * // => true\n */\nfunction clone(value) {\n  return baseClone(value, CLONE_SYMBOLS_FLAG);\n}\n\nmodule.exports = clone;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]';\n\n/**\n * Checks if `value` is classified as a boolean primitive or object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a boolean, else `false`.\n * @example\n *\n * _.isBoolean(false);\n * // => true\n *\n * _.isBoolean(null);\n * // => false\n */\nfunction isBoolean(value) {\n  return value === true || value === false ||\n    (isObjectLike(value) && baseGetTag(value) == boolTag);\n}\n\nmodule.exports = isBoolean;\n","// import lodash_each from 'lodash/each'\nimport lodash_isString from 'lodash/isString';\n// import lodash_isNumber from 'lodash/isNumber'\nimport {TypedParam} from './_Base';\n// import {TypedParamVisitor} from './_Base';\n// import {AsCodeString} from './concerns/visitors/String';\n// import {ExpressionController} from '../expressions/ExpressionController'\nimport {ParsedTree} from '../expressions/traversers/ParsedTree';\nimport {ParamType} from '../poly/ParamType';\nimport {ParamInitValuesTypeMap} from './types/ParamInitValuesTypeMap';\nimport {ParamValuesTypeMap} from './types/ParamValuesTypeMap';\nimport {ExpressionController} from './utils/ExpressionController';\nimport {ParamEvent} from '../poly/ParamEvent';\n\nexport class StringParam extends TypedParam<ParamType.STRING> {\n\tstatic type() {\n\t\treturn ParamType.STRING;\n\t}\n\tget default_value_serialized() {\n\t\treturn this.default_value;\n\t}\n\tprotected _clone_raw_input(raw_input: ParamInitValuesTypeMap[ParamType.STRING]) {\n\t\treturn `${raw_input}`;\n\t}\n\tget raw_input_serialized() {\n\t\treturn `${this._raw_input}`;\n\t}\n\tget value_serialized() {\n\t\treturn `${this.value}`;\n\t}\n\tstatic are_raw_input_equal(\n\t\traw_input1: ParamInitValuesTypeMap[ParamType.STRING],\n\t\traw_input2: ParamInitValuesTypeMap[ParamType.STRING]\n\t) {\n\t\treturn raw_input1 == raw_input2;\n\t}\n\tstatic are_values_equal(val1: ParamValuesTypeMap[ParamType.STRING], val2: ParamValuesTypeMap[ParamType.STRING]) {\n\t\treturn val1 == val2;\n\t}\n\tget is_default(): boolean {\n\t\treturn this._raw_input == this.default_value;\n\t}\n\n\tconvert(raw_val: any): string {\n\t\tif (lodash_isString(raw_val)) {\n\t\t\treturn raw_val;\n\t\t}\n\t\treturn `${raw_val}`;\n\t}\n\n\tget raw_input() {\n\t\treturn this._raw_input;\n\t}\n\tprotected process_raw_input() {\n\t\tthis.states.error.clear();\n\n\t\tif (this._value_elements(this._raw_input).length >= 3) {\n\t\t\tthis._expression_controller = this._expression_controller || new ExpressionController(this);\n\t\t\tif (this._raw_input != this._expression_controller.expression) {\n\t\t\t\tthis._expression_controller.set_expression(this._raw_input);\n\t\t\t\tthis.set_dirty();\n\t\t\t\tthis.emit_controller.emit(ParamEvent.EXPRESSION_UPDATED);\n\t\t\t}\n\t\t} else {\n\t\t\tif (this._raw_input != this._value) {\n\t\t\t\tthis._value = this._raw_input;\n\t\t\t\tthis.remove_dirty_state();\n\t\t\t\tthis.set_successors_dirty(this);\n\t\t\t\tthis.emit_controller.emit(ParamEvent.VALUE_UPDATED);\n\t\t\t\tif (this._expression_controller) {\n\t\t\t\t\tthis._expression_controller.set_expression(undefined, false);\n\t\t\t\t\tthis.emit_controller.emit(ParamEvent.EXPRESSION_UPDATED); // ensure expression is considered removed\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tprotected async process_computation(): Promise<void> {\n\t\tif (this.expression_controller?.active && !this.expression_controller.requires_entities) {\n\t\t\tconst expression_result = await this.expression_controller.compute_expression();\n\t\t\tif (this.expression_controller.is_errored) {\n\t\t\t\tthis.states.error.set(`expression error: ${this.expression_controller.error_message}`);\n\t\t\t} else {\n\t\t\t\tconst converted = this.convert(expression_result);\n\t\t\t\t// we need to check if equal nulls explicitely\n\t\t\t\t// as the empty string '' evals to false...\n\t\t\t\tif (converted != null) {\n\t\t\t\t\tthis._value = converted;\n\t\t\t\t\tthis.emit_controller.emit(ParamEvent.VALUE_UPDATED);\n\t\t\t\t} else {\n\t\t\t\t\tthis.states.error.set(`expression returns an invalid type (${expression_result})`);\n\t\t\t\t}\n\t\t\t\tthis.remove_dirty_state();\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate _value_elements(v: string): string[] {\n\t\treturn ParsedTree.string_value_elements(v);\n\t}\n}\n","var listCacheClear = require('./_listCacheClear'),\n    listCacheDelete = require('./_listCacheDelete'),\n    listCacheGet = require('./_listCacheGet'),\n    listCacheHas = require('./_listCacheHas'),\n    listCacheSet = require('./_listCacheSet');\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\nmodule.exports = ListCache;\n","var eq = require('./eq');\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = assocIndexOf;\n","var getNative = require('./_getNative');\n\n/* Built-in method references that are verified to be native. */\nvar nativeCreate = getNative(Object, 'create');\n\nmodule.exports = nativeCreate;\n","var isKeyable = require('./_isKeyable');\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\nmodule.exports = getMapData;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nmodule.exports = isPrototype;\n","/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\nmodule.exports = arrayPush;\n","var isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Converts `value` to a string key if it's not a string or symbol.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {string|symbol} Returns the key.\n */\nfunction toKey(value) {\n  if (typeof value == 'string' || isSymbol(value)) {\n    return value;\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = toKey;\n","/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsVarRange = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsZWJ = '\\\\u200d';\n\n/** Used to detect strings with [zero-width joiners or code points from the astral planes](http://eev.ee/blog/2015/09/12/dark-corners-of-unicode/). */\nvar reHasUnicode = RegExp('[' + rsZWJ + rsAstralRange  + rsComboRange + rsVarRange + ']');\n\n/**\n * Checks if `string` contains Unicode symbols.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {boolean} Returns `true` if a symbol is found, else `false`.\n */\nfunction hasUnicode(string) {\n  return reHasUnicode.test(string);\n}\n\nmodule.exports = hasUnicode;\n","var baseFindIndex = require('./_baseFindIndex'),\n    baseIsNaN = require('./_baseIsNaN'),\n    strictIndexOf = require('./_strictIndexOf');\n\n/**\n * The base implementation of `_.indexOf` without `fromIndex` bounds checks.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseIndexOf(array, value, fromIndex) {\n  return value === value\n    ? strictIndexOf(array, value, fromIndex)\n    : baseFindIndex(array, baseIsNaN, fromIndex);\n}\n\nmodule.exports = baseIndexOf;\n","var baseValues = require('./_baseValues'),\n    keys = require('./keys');\n\n/**\n * Creates an array of the own enumerable string keyed property values of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property values.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.values(new Foo);\n * // => [1, 2] (iteration order is not guaranteed)\n *\n * _.values('hi');\n * // => ['h', 'i']\n */\nfunction values(object) {\n  return object == null ? [] : baseValues(object, keys(object));\n}\n\nmodule.exports = values;\n","import {BaseNodeType} from '../_Base';\nimport {NodeUIDataJson} from './UIData';\nimport {TypedNamedConnectionPointData} from './connections/NamedConnectionPoint';\nimport {ConnectionPointType} from './connections/ConnectionPointType';\n\nexport interface NodeSerializerData {\n\tname: string;\n\ttype: string;\n\tgraph_node_id: string;\n\tis_dirty: boolean;\n\tui_data_json: NodeUIDataJson;\n\terror_message: string | undefined;\n\tchildren: string[];\n\tinputs: Array<string | undefined>;\n\tinput_connection_output_indices: Array<number | undefined> | undefined;\n\tnamed_input_connections: TypedNamedConnectionPointData<ConnectionPointType>[];\n\tnamed_output_connections: TypedNamedConnectionPointData<ConnectionPointType>[];\n\tparam_ids: string[];\n\t// spare_params: Dictionary<string>;\n\toverride_clonable_state: boolean;\n\tinputs_clonable_state_with_override: boolean[];\n\tflags?: {\n\t\t//has_display: this.has_display_flag()\n\t\tdisplay?: boolean;\n\t\tbypass?: boolean;\n\t};\n\tselection?: string[];\n}\n\nexport class NodeSerializer {\n\tconstructor(private node: BaseNodeType) {}\n\n\t// serialize() {\n\t// \treturn this.to_json();\n\t// }\n\n\t// TODO: find a way to not re-create a json everytime\n\tto_json(include_param_components: boolean = false): NodeSerializerData {\n\t\t// const spare_params_json_by_name = {};\n\t\t// lodash_each(this.node.spare_param_names(), param_name=> {\n\t\t// \tconst param = this.node.spare_param(param_name);\n\t\t// \tspare_params_json_by_name[param_name] = param.graph_node_id;\n\t\t// });\n\n\t\tconst data = {\n\t\t\tname: this.node.name,\n\t\t\ttype: this.node.type,\n\t\t\tgraph_node_id: this.node.graph_node_id,\n\t\t\tis_dirty: this.node.is_dirty,\n\t\t\tui_data_json: this.node.ui_data.to_json(),\n\t\t\terror_message: this.node.states.error.message,\n\t\t\tchildren: this.children_ids(),\n\t\t\tinputs: this.input_ids(),\n\t\t\tinput_connection_output_indices: this.connection_input_indices(),\n\t\t\tnamed_input_connections: this.named_input_connections(),\n\t\t\tnamed_output_connections: this.named_output_connections(),\n\t\t\tparam_ids: this.to_json_params(include_param_components),\n\t\t\t// spare_params: this.to_json_spare_params(include_param_components),\n\t\t\toverride_clonable_state: this.node.io.inputs.override_clonable_state(),\n\t\t\tinputs_clonable_state_with_override: this.node.io.inputs.inputs_clonable_state_with_override(),\n\t\t\tflags: {\n\t\t\t\t//has_display: this.has_display_flag()\n\t\t\t\tdisplay: this.node.flags?.display?.active,\n\t\t\t\tbypass: this.node.flags?.bypass?.active,\n\t\t\t},\n\t\t\tselection: undefined as string[] | undefined,\n\t\t};\n\n\t\tif (this.node.children_allowed() && this.node.children_controller) {\n\t\t\tdata['selection'] = this.node.children_controller.selection.to_json();\n\t\t}\n\n\t\treturn data;\n\t}\n\n\tchildren_ids(): string[] {\n\t\treturn this.node.children().map((node) => node.graph_node_id);\n\t}\n\n\tinput_ids(): (string | undefined)[] {\n\t\treturn this.node.io.inputs.inputs().map((node) => (node != null ? node.graph_node_id : undefined));\n\t}\n\n\tconnection_input_indices() {\n\t\treturn this.node.io.connections\n\t\t\t.input_connections()\n\t\t\t?.map((connection) => (connection != null ? connection.output_index : undefined));\n\t}\n\tnamed_input_connections() {\n\t\treturn this.node.io.inputs.named_input_connection_points.map((i) => i.to_json());\n\t}\n\tnamed_output_connections() {\n\t\treturn this.node.io.outputs.named_output_connection_points.map((o) => o.to_json());\n\t}\n\n\tto_json_params_from_names(param_names: string[], include_components: boolean = false) {\n\t\treturn param_names.map((param_name) => {\n\t\t\treturn this.node.params.get(param_name)!.graph_node_id;\n\t\t});\n\t\t// const params_json_by_name: Dictionary<string> = {};\n\t\t// for (let param_name of param_names) {\n\t\t// \tconst param = this.node.params.get(param_name);\n\t\t// \tif (param) {\n\t\t// \t\tparams_json_by_name[param_name] = param.graph_node_id;\n\n\t\t// \t\tif (include_components && param.is_multiple && param.components) {\n\t\t// \t\t\tfor (let component of param.components) {\n\t\t// \t\t\t\tparams_json_by_name[component.name] = component.graph_node_id;\n\t\t// \t\t\t}\n\t\t// \t\t}\n\t\t// \t}\n\t\t// }\n\t\t// return params_json_by_name;\n\t}\n\tto_json_params(include_components: boolean = false) {\n\t\treturn this.to_json_params_from_names(this.node.params.names, include_components);\n\t}\n\t// to_json_params_without_components(){\n\t// \treturn this.to_json_params(false)\n\t// }\n\t// to_json_params_with_components(){\n\t// \treturn this.to_json_params(true)\n\t// }\n\t// to_json_spare_params(include_components: boolean = false) {\n\t// \treturn this.to_json_params_from_names(this.node.params.spare_names, include_components);\n\t// }\n}\n","// https://gist.github.com/gre/1650294\n\n// const ease_in = function(t:number, power:number){return Math.pow(t, power)}\n// const ease_on = function(t:number, power:number){return 1 - Math.abs(Math.pow(t-1, power))}\n// const ease_ion = function(t:number, power:number){return t<.5 ? ease_i(power)(t*2)/2 : ease_o(power)(t*2 - 1)/2+0.5}\n\nconst ease_i = function(power:number){return function(t:number){return Math.pow(t, power)}};\nconst ease_o = function(power:number){return function(t:number){return 1 - Math.abs(Math.pow(t-1, power))}};\nconst ease_io = function(power:number){return function(t:number){return t<.5 ? ease_i(power)(t*2)/2 : ease_o(power)(t*2 - 1)/2+0.5}}\n\nexport const Easing = {\n  linear: ease_io(1),\n\n  ease_i: function(t:number, power:number){ return ease_i(power)(t) },\n  ease_o: function(t:number, power:number){ return ease_o(power)(t) },\n  ease_io: function(t:number, power:number){ return ease_io(power)(t) },\n\n  ease_i2: ease_i(2),\n  ease_o2: ease_o(2),\n  ease_io2: ease_io(2),\n\n  ease_i3: ease_io(3),\n  ease_o3: ease_io(3),\n  ease_io3: ease_io(3),\n\n  ease_i4: ease_io(4),\n  ease_o4: ease_io(4),\n  ease_io4: ease_io(4),\n  // easeInQuart: EaseIn(4),\n  // easeOutQuart: EaseOut(4),\n  // easeInOutQuart: EaseInOut(4),\n  // easeInQuint: EaseIn(5),\n  // easeOutQuint: EaseOut(5),\n  // easeInOutQuint: EaseInOut(5)\n\n  ease_i_sin: function(t:number){ return 1 + Math.sin(Math.PI / 2 * t - Math.PI / 2); },\n  ease_o_sin: function(t:number){ return Math.sin(Math.PI / 2 * t); },\n  ease_io_sin: function(t:number){ return (1 + Math.sin(Math.PI * t - Math.PI / 2)) / 2; },\n\n  ease_i_elastic: function (t:number) { return (.04 - .04 / t) * Math.sin(25 * t) + 1 },\n  ease_o_elastic: function (t:number) { return .04 * t / (--t) * Math.sin(25 * t) },\n  ease_io_elastic: function (t:number) { return (t -= .5) < 0 ? (.02 + .01 / t) * Math.sin(50 * t) : (.02 - .01 / t) * Math.sin(50 * t) + 1 }\n}\n\n// export class Easing {\n//   // no easing, no acceleration\n//   static linear(t:number):number{ return t }\n//   // accelerating from zero velocity\n//   static easeinquad (t:number):number{ return t*t }\n//   // decelerating to zero velocity\n//   static easeoutquad (t:number):number{ return t*(2-t) }\n//   // acceleration until halfway, then deceleration\n//   static easeinoutquad (t:number):number{ return t<.5 ? 2*t*t : -1+(4-2*t)*t }\n//   // accelerating from zero velocity\n//   static easeincubic (t:number):number{ return t*t*t }\n//   // decelerating to zero velocity\n//   static easeoutcubic (t:number):number{ return (--t)*t*t+1 }\n//   // acceleration until halfway, then deceleration\n//   static easeinoutcubic (t:number):number{ return t<.5 ? 4*t*t*t : (t-1)*(2*t-2)*(2*t-2)+1 }\n//   // accelerating from zero velocity\n//   static easeinquart (t:number):number{ return t*t*t*t }\n//   // decelerating to zero velocity\n//   static easeoutquart (t:number):number{ return 1-(--t)*t*t*t }\n//   // acceleration until halfway, then deceleration\n//   static easeinoutquart (t:number):number{ return t<.5 ? 8*t*t*t*t : 1-8*(--t)*t*t*t }\n//   // accelerating from zero velocity\n//   static easeinquint (t:number):number{ return t*t*t*t*t }\n//   // decelerating to zero velocity\n//   static easeoutquint (t:number):number{ return 1+(--t)*t*t*t*t }\n//   // acceleration until halfway, then deceleration\n//   static easeinoutquint (t:number):number{ return t<.5 ? 16*t*t*t*t*t : 1+16*(--t)*t*t*t*t }\n// }","// import lodash_isArray from 'lodash/isArray'\n// import lodash_isString from 'lodash/isString'\n// import lodash_isBoolean from 'lodash/isBoolean';\nimport lodash_isNumber from 'lodash/isNumber';\nimport {TypedNumericParam} from './_Numeric';\nimport {ParamType} from '../poly/ParamType';\nimport {CoreString} from '../../core/String';\nimport {ParamInitValuesTypeMap} from './types/ParamInitValuesTypeMap';\nimport {ParamValuesTypeMap} from './types/ParamValuesTypeMap';\n\nexport class FloatParam extends TypedNumericParam<ParamType.FLOAT> {\n\tstatic type() {\n\t\treturn ParamType.FLOAT;\n\t}\n\tget default_value_serialized() {\n\t\treturn this.default_value;\n\t}\n\tget raw_input_serialized() {\n\t\treturn this._raw_input;\n\t}\n\tget value_serialized() {\n\t\treturn this.value;\n\t}\n\tstatic are_raw_input_equal(\n\t\traw_input1: ParamInitValuesTypeMap[ParamType.FLOAT],\n\t\traw_input2: ParamInitValuesTypeMap[ParamType.FLOAT]\n\t) {\n\t\treturn raw_input1 == raw_input2;\n\t}\n\tstatic are_values_equal(val1: ParamValuesTypeMap[ParamType.FLOAT], val2: ParamValuesTypeMap[ParamType.FLOAT]) {\n\t\treturn val1 == val2;\n\t}\n\tstatic convert(raw_val: ParamInitValuesTypeMap[ParamType.FLOAT]): number | null {\n\t\tif (lodash_isNumber(raw_val)) {\n\t\t\treturn raw_val;\n\t\t} else {\n\t\t\tif (CoreString.is_number(raw_val)) {\n\t\t\t\tconst parsed = parseFloat(raw_val);\n\t\t\t\tif (lodash_isNumber(parsed)) {\n\t\t\t\t\treturn parsed;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t}\n\tconvert(raw_val: ParamInitValuesTypeMap[ParamType.FLOAT]): number | null {\n\t\tconst result = FloatParam.convert(raw_val);\n\t\tif (result) {\n\t\t\treturn this.options.ensure_in_range(result);\n\t\t} else {\n\t\t\treturn result;\n\t\t}\n\t}\n}\n","import {BaseNodeType} from '../engine/nodes/_Base';\nimport {BaseParamType} from '../engine/params/_Base';\nimport {CoreWalker} from './Walker';\n// import {NodeSimple} from '/Graph/NodeSimple'\n\n// import {NamedGraphNodeClass} from './graph/NamedGraphNode'\ntype NodeOrParam = BaseNodeType | BaseParamType;\n\nexport class DecomposedPath {\n\tprivate index = -1;\n\tprivate path_elements: (string | null)[] = [];\n\tprivate _named_nodes: (NodeOrParam | null)[] = [];\n\tprivate graph_node_ids: string[] = [];\n\tprivate node_element_by_graph_node_id: Dictionary<string> = {};\n\n\tconstructor() {\n\t\t// console.warn('create decomposed path');\n\t}\n\tadd_node(name: string, node: NodeOrParam) {\n\t\tthis.index += 1;\n\t\tif (name == node.name) {\n\t\t\tthis.named_nodes[this.index] = node;\n\t\t}\n\n\t\tthis.graph_node_ids[this.index] = node.graph_node_id;\n\t\tthis.node_element_by_graph_node_id[node.graph_node_id] = name;\n\t}\n\tadd_path_element(path_element: string) {\n\t\tthis.index += 1;\n\t\tthis.path_elements[this.index] = path_element;\n\t}\n\n\tget named_nodes() {\n\t\treturn this._named_nodes;\n\t}\n\n\tupdate_from_name_change(node: NodeOrParam) {\n\t\tconst named_graph_node_ids = this.named_nodes.map((n) => n?.graph_node_id);\n\n\t\tif (named_graph_node_ids.includes(node.graph_node_id)) {\n\t\t\tthis.node_element_by_graph_node_id[node.graph_node_id] = node.name;\n\t\t}\n\t}\n\n\tto_path(): string {\n\t\tconst elements = new Array<string>(this.index);\n\t\tfor (let i = 0; i <= this.index; i++) {\n\t\t\tconst node = this.named_nodes[i];\n\t\t\tif (node) {\n\t\t\t\telements[i] = this.node_element_by_graph_node_id[node.graph_node_id];\n\t\t\t} else {\n\t\t\t\tconst path_element = this.path_elements[i];\n\t\t\t\tif (path_element) {\n\t\t\t\t\telements[i] = path_element;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\tlet joined_path = elements.join(CoreWalker.SEPARATOR);\n\t\t// if the first character is a letter, we need to prefix with /\n\t\tconst first_char = joined_path[0];\n\t\tif (first_char) {\n\t\t\tif (!CoreWalker.NON_LETTER_PREFIXES.includes(first_char)) {\n\t\t\t\tjoined_path = `${CoreWalker.SEPARATOR}${joined_path}`;\n\t\t\t}\n\t\t}\n\n\t\treturn joined_path;\n\t}\n}\n","import lodash_isNumber from 'lodash/isNumber';\n// import BaseNode from 'src/engine/nodes/_Base'\nimport {DecomposedPath} from '../../core/DecomposedPath';\nimport {CoreGraphNode} from '../../core/graph/CoreGraphNode';\nimport {BaseParamType} from '../params/_Base';\n// import {CoreObject} from '../../core/Object';\nimport {BaseNodeType} from '../nodes/_Base';\nimport jsep from 'jsep';\n\nexport class MethodDependency extends CoreGraphNode {\n\tpublic jsep_node: jsep.Expression | undefined;\n\tpublic resolved_graph_node: CoreGraphNode | undefined;\n\tpublic unresolved_path: string | undefined;\n\tprivate _update_from_name_change_bound = this._update_from_name_change.bind(this);\n\n\tconstructor(\n\t\tpublic param: BaseParamType,\n\t\tpublic path_argument: number | string,\n\t\tpublic decomposed_path?: DecomposedPath\n\t) {\n\t\tsuper(param.scene, 'MethodDependency');\n\n\t\t// this.set_scene(this.param.scene);\n\n\t\tthis.add_post_dirty_hook('_update_from_name_change', this._update_from_name_change_bound);\n\t}\n\t_update_from_name_change(trigger?: CoreGraphNode) {\n\t\tif (trigger && this.decomposed_path) {\n\t\t\tconst node = trigger as BaseNodeType;\n\t\t\tthis.decomposed_path.update_from_name_change(node);\n\t\t\tconst new_path = this.decomposed_path.to_path();\n\n\t\t\tconst literal = this.jsep_node as jsep.Literal;\n\t\t\tif (literal) {\n\t\t\t\tliteral.value = `${literal.value}`.replace(`${this.path_argument}`, new_path);\n\t\t\t\tliteral.raw = literal.raw.replace(`${this.path_argument}`, new_path);\n\t\t\t}\n\t\t\tif (this.param.expression_controller) {\n\t\t\t\tthis.param.expression_controller.update_from_method_dependency_name_change();\n\t\t\t}\n\t\t}\n\t}\n\treset() {\n\t\tthis.graph_disconnect_predecessors();\n\t}\n\n\tlisten_for_name_changes() {\n\t\tif (this.jsep_node && this.decomposed_path) {\n\t\t\tthis.decomposed_path.named_nodes.forEach((node_in_path) => {\n\t\t\t\tif (node_in_path) {\n\t\t\t\t\tconst node = node_in_path as BaseNodeType;\n\t\t\t\t\tif (node.name_controller) {\n\t\t\t\t\t\tthis.add_graph_input(node.name_controller.graph_node);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n\tset_jsep_node(jsep_node: jsep.Expression) {\n\t\tthis.jsep_node = jsep_node;\n\t}\n\tset_resolved_graph_node(node: CoreGraphNode) {\n\t\tthis.resolved_graph_node = node;\n\t}\n\tset_unresolved_path(path: string) {\n\t\tthis.unresolved_path = path;\n\t}\n\n\tstatic create(\n\t\tparam: BaseParamType,\n\t\tindex_or_path: number | string,\n\t\tnode: CoreGraphNode,\n\t\tdecomposed_path?: DecomposedPath\n\t) {\n\t\tconst is_index = lodash_isNumber(index_or_path);\n\n\t\t// if(!decomposed_path){\n\t\t// \tconsole.log('nodes_in_path', decomposed_path.named_nodes);\n\t\t// \tfor (let node_in_path of decomposed_path.named_nodes) {\n\t\t// \t\tif (node_in_path) {\n\t\t// \t\t\tdecomposed_path.add_node(node_in_path.name, node_in_path);\n\t\t// \t\t}\n\t\t// \t}\n\t\t// }\n\n\t\tconst instance = new MethodDependency(param, index_or_path, decomposed_path);\n\t\tif (node) {\n\t\t\tinstance.set_resolved_graph_node(node);\n\t\t} else {\n\t\t\tif (!is_index) {\n\t\t\t\tconst path = index_or_path as string;\n\t\t\t\tinstance.set_unresolved_path(path);\n\t\t\t}\n\t\t}\n\t\treturn instance;\n\t}\n}\n","import {CoreWalker} from '../../../core/Walker';\nimport {DecomposedPath} from '../../../core/DecomposedPath';\n// import {NodeSimple} from '../../../core/graph/NodeSimple'\nimport {BaseParamType} from '../../params/_Base';\nimport {BaseNodeType} from '../../nodes/_Base';\nimport {MethodDependency} from '../MethodDependency';\nimport lodash_isString from 'lodash/isString';\nimport lodash_isNumber from 'lodash/isNumber';\nimport {CoreGraphNode} from '../../../core/graph/CoreGraphNode';\nimport {BaseContainer} from '../../containers/_Base';\n\n// type NodeOrParam = BaseNode | BaseParam;\n\nexport abstract class BaseMethod {\n\tpublic node: BaseNodeType;\n\n\tconstructor(public readonly param: BaseParamType) {\n\t\t// this._init_update_dependencies_mode();\n\t\tthis.node = this.param.node;\n\t}\n\n\tstatic required_arguments(): any[] {\n\t\tconsole.warn('Expression.Method._Base.required_arguments virtual method call. Please override');\n\t\treturn [];\n\t}\n\tstatic optional_arguments(): any[] {\n\t\treturn [];\n\t}\n\tstatic min_allowed_arguments_count() {\n\t\treturn this.required_arguments().length;\n\t}\n\tstatic max_allowed_arguments_count() {\n\t\treturn this.min_allowed_arguments_count() + this.optional_arguments().length;\n\t}\n\tstatic allowed_arguments_count(count: number) {\n\t\treturn count >= this.min_allowed_arguments_count() && count <= this.max_allowed_arguments_count();\n\t}\n\n\tprocess_arguments(args: any): Promise<any> {\n\t\tthrow 'Expression.Method._Base.process_arguments virtual method call. Please override';\n\t}\n\n\tasync get_referenced_node_container(index_or_path: number | string): Promise<BaseContainer> {\n\t\tconst referenced_node = this.get_referenced_node(index_or_path);\n\n\t\tif (referenced_node) {\n\t\t\tconst container = await referenced_node.request_container();\n\t\t\tif (container) {\n\t\t\t\tconst core_group = container.core_content();\n\t\t\t\tif (core_group) {\n\t\t\t\t\treturn container;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthrow `referenced node invalid: ${referenced_node.full_path()}`;\n\t\t} else {\n\t\t\tthrow `invalid input (${index_or_path})`;\n\t\t}\n\t}\n\n\tget_referenced_param(path: string, decomposed_path?: DecomposedPath): BaseParamType | null {\n\t\tconst referenced_param = CoreWalker.find_param(this.node, path, decomposed_path);\n\n\t\t// if (referenced_param != null) {\n\n\t\t// \tif (this.update_dependencies_mode()) {\n\n\t\t// \t\t//param_connect_result = this.param().add_graph_input(referenced_param)\n\t\t// \t\tconst expression_node_connect_result = this.jsep_node()._graph_node.add_graph_input(referenced_param);\n\t\t// \t\t//if !(param_connect_result && expression_node_connect_result)\n\t\t// \t\tif (!expression_node_connect_result) {\n\t\t// \t\t\tthrow \"cannot create infinite graph\";\n\t\t// \t\t}\n\t\t// \t}\n\n\t\t// } else {\n\t\t// \tthrow `no param found for argument ${path}`;\n\t\t// }\n\n\t\treturn referenced_param || null;\n\t}\n\n\tfind_referenced_graph_node(index_or_path: number | string, decomposed_path?: DecomposedPath): CoreGraphNode | null {\n\t\tconst is_index = lodash_isNumber(index_or_path);\n\t\t// let node\n\t\tif (is_index) {\n\t\t\tconst index = index_or_path as number;\n\t\t\tconst input_graph_node = this.node.io.inputs.input_graph_node(index);\n\t\t\treturn input_graph_node;\n\t\t} else {\n\t\t\tconst path = index_or_path as string;\n\t\t\treturn this.get_referenced_node(path, decomposed_path);\n\t\t}\n\t}\n\tget_referenced_node(index_or_path: string | number, decomposed_path?: DecomposedPath): BaseNodeType | null {\n\t\t// if ((index_or_path != null) && (index_or_path.is_a != null) && index_or_path.is_a(BaseNode)) {\n\t\t// \tindex_or_path = index_or_path.full_path();\n\t\t// }\n\t\tif (lodash_isString(index_or_path)) {\n\t\t\tconst path = index_or_path;\n\t\t\treturn CoreWalker.find_node(this.node, path, decomposed_path);\n\t\t} else {\n\t\t\tconst index = index_or_path;\n\t\t\tthis.node.io.inputs.input(index);\n\t\t\treturn this.node.io.inputs.input(index);\n\t\t}\n\n\t\t// if (referenced_node != null) {\n\n\t\t// \tif (this.update_dependencies_mode()) {\n\t\t// \t\t//node_connect_result = this.param().add_graph_input(referenced_node)\n\n\t\t// \t\tconst expression_node_connect_result = this.jsep_node()._graph_node.add_graph_input(referenced_node);\n\t\t// \t\t//if !(node_connect_result && expression_node_connect_result)\n\t\t// \t\tif (!expression_node_connect_result) {\n\t\t// \t\t\tthrow \"cannot create infinite graph\";\n\t\t// \t\t}\n\t\t// \t}\n\n\t\t// } else {\n\t\t// \tthrow `no node found for argument ${index_or_path}`;\n\t\t// }\n\n\t\t// return referenced_node;\n\t}\n\n\tfind_dependency(args: any): MethodDependency | null {\n\t\treturn null;\n\t}\n\n\tprotected create_dependency_from_index_or_path(index_or_path: number | string): MethodDependency | null {\n\t\t// console.log(\"is_index\", index_or_path)\n\t\tconst decomposed_path = new DecomposedPath();\n\t\tconst node = this.find_referenced_graph_node(index_or_path, decomposed_path);\n\t\tif (node) {\n\t\t\treturn this.create_dependency(node, index_or_path, decomposed_path);\n\t\t} else {\n\t\t\tconsole.warn('node not found for path', index_or_path);\n\t\t}\n\t\treturn null;\n\t}\n\tprotected create_dependency(\n\t\tnode: CoreGraphNode,\n\t\tindex_or_path: number | string,\n\t\tdecomposed_path?: DecomposedPath\n\t): MethodDependency | null {\n\t\t// if (CoreObject.is_a(node, TypedNode) || CoreObject.is_a(node, TypedParam)) {\n\t\t// \tconst node_or_param = node as BaseNodeType;\n\t\t// \treturn MethodDependency.create(this.param, index_or_path, node_or_param, decomposed_path?.named_nodes);\n\t\t// }\n\t\tconst dependency = MethodDependency.create(this.param, index_or_path, node, decomposed_path);\n\t\treturn dependency;\n\t}\n\n\t//\n\t//\n\t// UPDATE DEPENDENCIES\n\t//\n\t//\n\t// _init_update_dependencies_mode() {\n\t// \treturn this.set_update_dependencies_mode(false);\n\t// }\n\t// set_update_dependencies_mode(mode){\n\t// \treturn this._update_dependencies_mode = mode;\n\t// }\n\t// update_dependencies_mode() {\n\t// \treturn this._update_dependencies_mode;\n\t// }\n\t// update_dependencies() {}\n}\n//\n","import {BaseMethod} from './_Base';\nimport {MethodDependency} from '../MethodDependency';\nimport {Vector3} from 'three/src/math/Vector3';\nimport {GeometryContainer} from '../../containers/Geometry';\n\n// import Walker from 'src/core/Walker';\n\ninterface BoxComponents {\n\tmin: Vector3;\n\tmax: Vector3;\n\tsize: Vector3;\n\tcenter: Vector3;\n}\n\nconst VECTOR_NAMES: Array<keyof BoxComponents> = ['min', 'max', 'size', 'center'];\nconst COMPONENT_NAMES = ['x', 'y', 'z'];\n\nexport class Bbox extends BaseMethod {\n\t// bbox(0).min.x\n\t// bbox('../REF_bbox').min.x\n\tstatic required_arguments() {\n\t\treturn [\n\t\t\t['string', 'path to node'],\n\t\t\t['string', 'vector name, min, max, size or center'],\n\t\t\t['string', 'component_name, x,y or z'],\n\t\t];\n\t}\n\n\tfind_dependency(index_or_path: number | string): MethodDependency | null {\n\t\treturn this.create_dependency_from_index_or_path(index_or_path);\n\t}\n\n\tprocess_arguments(args: any[]): Promise<any> {\n\t\tlet value = 0;\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\tif (args.length == 3) {\n\t\t\t\tconst index_or_path = args[0];\n\t\t\t\tconst vector_name = args[1];\n\t\t\t\tconst component_name = args[2];\n\n\t\t\t\tlet container: GeometryContainer | null = null;\n\t\t\t\ttry {\n\t\t\t\t\tcontainer = (await this.get_referenced_node_container(index_or_path)) as GeometryContainer;\n\t\t\t\t} catch (e) {\n\t\t\t\t\treject(e);\n\t\t\t\t}\n\t\t\t\tif (container) {\n\t\t\t\t\tvalue = this._get_value_from_container(container, vector_name, component_name);\n\t\t\t\t\tresolve(value);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tresolve(0);\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate _get_value_from_container(\n\t\tcontainer: GeometryContainer,\n\t\tvector_name: keyof BoxComponents,\n\t\tcomponent_name: keyof Vector3Like\n\t) {\n\t\tif (VECTOR_NAMES.indexOf(vector_name) >= 0) {\n\t\t\tconst bbox = container.bounding_box();\n\n\t\t\tlet vector = new Vector3();\n\t\t\tswitch (vector_name) {\n\t\t\t\tcase 'size':\n\t\t\t\t\tbbox.getSize(vector);\n\t\t\t\t\tbreak;\n\t\t\t\tcase 'center':\n\t\t\t\t\tbbox.getCenter(vector);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tvector = bbox[vector_name];\n\t\t\t}\n\n\t\t\tif (COMPONENT_NAMES.indexOf(component_name) >= 0) {\n\t\t\t\t//(value = vector[component_name])?\n\t\t\t\treturn vector[component_name];\n\t\t\t} else {\n\t\t\t\treturn -1;\n\t\t\t}\n\t\t} else {\n\t\t\treturn -1;\n\t\t}\n\t}\n}\n","// TODO: create an expression object that knows how many args it can accept, their type\n// and can throw an error and give it to the param, and then to the node\n// TODO: the expression should know how to update the node dependencies\n\n// import abs from './abs'\n// import {Asset} from './asset'\nimport {Bbox} from './bbox';\n// import ceil from './ceil'\nimport {Centroid} from './centroid';\nimport {Ch} from './ch';\nimport {Copy} from './copy';\nimport {CopRes} from './cop_res';\n// import clamp from './clamp'\n// import {Easein} from './easein'\n// import {Easeinout} from './easeinout'\n// import floor from './floor'\n// import humanize from './humanize'\nimport {Local} from './local';\n// import if_ from './if'\n// import max from './max'\n// import min from './min'\nimport {Opdigits} from './opdigits';\n// import object from './object'\n// import objects_count from './objects_count'\n// import objects_visible_count from './objects_visible_count'\nimport {Point} from './point';\nimport {PointsCount} from './points_count';\n// import {Precision} from './precision'\n// import rand from './rand'\n// import round from './round'\n// import sign from './sign'\nimport {StrCharsCount} from './str_chars_count';\nimport {StrConcat} from './str_concat';\nimport {StrIndex} from './str_index';\nimport {StrSub} from './str_sub';\n\nexport const MethodModule = {\n\t// 'asset': Asset,\n\tbbox: Bbox,\n\tch: Ch,\n\tcentroid: Centroid,\n\tcop_res: CopRes,\n\tlocal: Local,\n\topdigits: Opdigits,\n\tpoint: Point,\n\tpoints_count: PointsCount,\n\t// 'precision': Precision,\n\tcopy: Copy,\n\tstr_chars_count: StrCharsCount,\n\tstr_concat: StrConcat,\n\tstr_index: StrIndex,\n\tstr_sub: StrSub,\n};\n\n// import cos from './cos'\n// import sin from './sin'\n","// import lodash_isNumber from 'lodash/isNumber';\n\nimport {BaseMethod} from './_Base';\nimport {DecomposedPath} from '../../../core/DecomposedPath';\nimport {MethodDependency} from '../MethodDependency';\n// import Walker from 'src/core/Walker';\n\nexport class Ch extends BaseMethod {\n\t// constructor() {\n\t// \tsuper();\n\t// }\n\n\tstatic required_arguments() {\n\t\treturn [['string', 'path to param']];\n\t}\n\n\t// dependencies(args: any[]): any[]{\n\t// \tconst path = args[0]\n\t// \treturn [this.get_referenced_param(path)]\n\t// }\n\tfind_dependency(index_or_path: number | string): MethodDependency | null {\n\t\tconst decomposed_path = new DecomposedPath();\n\t\tconst param = this.get_referenced_param(index_or_path as string, decomposed_path);\n\t\tif (param) {\n\t\t\treturn this.create_dependency(param, index_or_path, decomposed_path);\n\t\t} else {\n\t\t\tconsole.warn('could not find param');\n\t\t}\n\t\treturn null;\n\t\t// const reference_search_result = new ReferenceSearchResult()\n\t\t// const param = this.get_referenced_param(index_or_path)\n\t\t// if(param){\n\t\t// \treference_search_result.set_found_graph_nodes([param])\n\t\t// } else {\n\t\t// \treference_search_result.set_missing_paths([path])\n\t\t// }\n\n\t\t// return reference_search_result\n\t}\n\t// find_dependencies(index_or_path: number|string): MethodDependency{\n\t// }\n\n\tasync process_arguments(args: any[]): Promise<any> {\n\t\tlet val: any = 0;\n\t\tif (args.length == 1) {\n\t\t\tconst path = args[0];\n\t\t\tconst ref = this.get_referenced_param(path);\n\t\t\tif (ref) {\n\t\t\t\tawait ref.compute();\n\t\t\t\tconst result = ref.value;\n\t\t\t\tif (result != null) {\n\t\t\t\t\t// if (lodash_isNumber(result)) {\n\t\t\t\t\tval = result;\n\t\t\t\t\t// }\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn val;\n\t}\n\n\t// _get_param_value(path, callback){\n\t// \treturn this.get_referenced_param(path).eval(val=> {\n\t// \t\treturn callback(val);\n\t// \t});\n\t// }\n}\n","import {BaseMethod} from './_Base';\nimport {MethodDependency} from '../MethodDependency';\n// import Walker from 'src/core/Walker';\nimport {GeometryContainer} from '../../containers/Geometry';\n\nexport class Centroid extends BaseMethod {\n\t// bbox(0).min.x\n\t// bbox('../REF_bbox').min.x\n\tstatic required_arguments() {\n\t\treturn [\n\t\t\t['string', 'path to node'],\n\t\t\t['string', 'component_name, x,y or z'],\n\t\t];\n\t}\n\n\tfind_dependency(index_or_path: number | string): MethodDependency | null {\n\t\treturn this.create_dependency_from_index_or_path(index_or_path);\n\t}\n\n\tprocess_arguments(args: any[]): Promise<any> {\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\t// const path = args\n\t\t\t// this.get_referenced_param(path).eval_p().then(val=>{\n\t\t\t// \tresolve(val)\n\t\t\t// })\n\t\t\tif (args.length == 2) {\n\t\t\t\tconst index_or_path = args[0];\n\t\t\t\tconst component_name = args[1] as keyof Vector3Like;\n\t\t\t\tlet container: GeometryContainer | null = null;\n\t\t\t\ttry {\n\t\t\t\t\tcontainer = (await this.get_referenced_node_container(index_or_path)) as GeometryContainer;\n\t\t\t\t} catch (e) {\n\t\t\t\t\treject(e);\n\t\t\t\t}\n\n\t\t\t\tif (container) {\n\t\t\t\t\tconst bbox = container.bounding_box();\n\t\t\t\t\tconst center = bbox.min\n\t\t\t\t\t\t.clone()\n\t\t\t\t\t\t.add(bbox.max)\n\t\t\t\t\t\t.multiplyScalar(0.5);\n\n\t\t\t\t\tconst value = center[component_name];\n\t\t\t\t\tif (value != null) {\n\t\t\t\t\t\tresolve(value);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// throw \"only component names are x, y and z\";\n\t\t\t\t\t\tresolve(0);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tresolve(0);\n\t\t\t}\n\t\t});\n\t\t// return this._get_param_value(args[0], args[1], callback);\n\t}\n\n\t// _get_param_value(index_or_path, component_name, callback){\n\t// \treturn this.get_referenced_node_container(index_or_path, container=> {\n\t// \t\tlet value;\n\t// \t\tconst bbox = container.bounding_box();\n\t// \t\tconst size = bbox.min.clone().add(bbox.max).multiplyScalar(0.5);\n\n\t// \t\tif ((value = size[component_name]) != null) {\n\t// \t\t\treturn callback(value);\n\t// \t\t} else {\n\t// \t\t\tthrow \"only component names are x, y and z\";\n\t// \t\t}\n\t// \t});\n\t// }\n}\n","import {BaseMethod} from './_Base';\nimport {MethodDependency} from '../MethodDependency';\nimport {TextureContainer} from '../../containers/Texture';\n\nexport class CopRes extends BaseMethod {\n\t// cop_res(0, 'x')\n\t// cop_res('../REF_bbox', 'x')\n\tstatic required_arguments() {\n\t\treturn [\n\t\t\t['string', 'path to node'],\n\t\t\t['string', 'component_name: x or y'],\n\t\t];\n\t}\n\n\tfind_dependency(index_or_path: number | string): MethodDependency | null {\n\t\treturn this.create_dependency_from_index_or_path(index_or_path);\n\t}\n\n\tasync process_arguments(args: any[]): Promise<number> {\n\t\tlet value = 0;\n\t\tif (args.length == 2) {\n\t\t\tconst index_or_path = args[0];\n\t\t\tconst component_name = args[1];\n\t\t\tconst container = (await this.get_referenced_node_container(index_or_path)) as TextureContainer;\n\n\t\t\tif (container) {\n\t\t\t\tconst resolution = container.resolution();\n\t\t\t\tif ([0, '0', 'x'].includes(component_name)) {\n\t\t\t\t\tvalue = resolution[0];\n\t\t\t\t} else {\n\t\t\t\t\tif ([1, '1', 'y'].includes(component_name)) {\n\t\t\t\t\t\tvalue = resolution[1];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn value;\n\t}\n}\n","import {BaseMethod} from './_Base';\nimport {Poly} from '../../Poly';\n\nexport class Local extends BaseMethod {\n\t// constructor() {\n\t// \tsuper();\n\t// }\n\n\tstatic required_arguments() {\n\t\treturn [['string', 'path']];\n\t}\n\n\tprocess_arguments(args: any[]): Promise<string> {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tthis.request_asset_url(args[0]).then((url) => {\n\t\t\t\tresolve(url);\n\t\t\t});\n\t\t});\n\t}\n\t// find_dependency(index_or_path: number | string): MethodDependency {\n\t// \treturn null\n\t// }\n\n\t// TODO: add error management\n\trequest_asset_url(name: string): Promise<string> {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\t// const scene = this.node.scene()\n\t\t\t// const scene_uuid = scene.uuid();\n\n\t\t\tlet url;\n\n\t\t\tconst desktop_controller = Poly.instance().desktop_controller();\n\t\t\tif (desktop_controller.active()) {\n\t\t\t\tdesktop_controller.add_local_path(name, this.param);\n\t\t\t\turl = desktop_controller.local_path_server_url(name);\n\t\t\t\tresolve(url);\n\t\t\t} else {\n\t\t\t\treturn resolve('');\n\t\t\t}\n\t\t});\n\t}\n}\n","import {BaseMethod} from './_Base';\nimport {BaseNodeType} from '../../nodes/_Base';\nimport {MethodDependency} from '../MethodDependency';\n// import Walker from 'src/core/Walker';\nimport {CoreString} from '../../../core/String';\n// import {CoreGraphNode} from '../../../core/graph/CoreGraphNode';\n\nexport class Opdigits extends BaseMethod {\n\tstatic required_arguments() {\n\t\treturn [['string', 'path to node']];\n\t}\n\n\tfind_dependency(index_or_path: number | string): MethodDependency | null {\n\t\tconst graph_node = this.find_referenced_graph_node(index_or_path);\n\t\tif (graph_node) {\n\t\t\tconst node = graph_node as BaseNodeType;\n\t\t\tif (node.name_controller) {\n\t\t\t\tconst name_node = node.name_controller.graph_node;\n\t\t\t\treturn this.create_dependency(name_node, index_or_path);\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t\t// return [this.create_dependency_from_index_or_path(index_or_path)]\n\t}\n\t// find_dependencies(index_or_path: number|string): ReferenceSearchResult{\n\n\t// \t// TODO: ensure the dependency update works for space params when they get renamed\n\t// \tconsole.log(node)\n\t// \tconst name_node = node.name_graph_node()\n\t// \treturn this.create_search_result(name_node, index_or_path)\n\t// \t// return this.create_reference_search_result_from_index_or_path(index_or_path)\n\t// }\n\n\tprocess_arguments(args: any[]): Promise<any> {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif (args.length == 1) {\n\t\t\t\tconst index_or_path = args[0];\n\t\t\t\tconst node = this.get_referenced_node(index_or_path);\n\t\t\t\tif (node) {\n\t\t\t\t\tconst name = node.name;\n\t\t\t\t\tconst value = CoreString.tail_digits(name);\n\t\t\t\t\tresolve(value);\n\t\t\t\t} else {\n\t\t\t\t\tresolve(0);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tresolve(0);\n\t\t\t}\n\t\t});\n\t}\n}\n","import {BaseMethod} from './_Base';\nimport {MethodDependency} from '../MethodDependency';\nimport {GeometryContainer} from '../../containers/Geometry';\n// import {CoreGroup} from '../../../core/Geometry/Group'\n\nexport class Point extends BaseMethod {\n\tstatic required_arguments() {\n\t\treturn [\n\t\t\t['string', 'path to node'],\n\t\t\t['index', 'point index'],\n\t\t\t['string', 'attribute name'],\n\t\t];\n\t}\n\n\tfind_dependency(index_or_path: number | string): MethodDependency | null {\n\t\treturn this.create_dependency_from_index_or_path(index_or_path);\n\t}\n\n\tprocess_arguments(args: any[]): Promise<any> {\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\tif (args.length == 3) {\n\t\t\t\tconst index_or_path = args[0];\n\t\t\t\tconst attrib_name = args[1];\n\t\t\t\tconst point_index = args[2];\n\t\t\t\tlet container: GeometryContainer | null = null;\n\t\t\t\ttry {\n\t\t\t\t\tcontainer = (await this.get_referenced_node_container(index_or_path)) as GeometryContainer;\n\t\t\t\t} catch (e) {\n\t\t\t\t\treject(e);\n\t\t\t\t}\n\t\t\t\tif (container) {\n\t\t\t\t\tconst value = this._get_value_from_container(container, attrib_name, point_index);\n\t\t\t\t\tresolve(value);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tresolve(0);\n\t\t\t}\n\t\t});\n\t}\n\n\t_get_value_from_container(container: GeometryContainer, attrib_name: string, point_index: number) {\n\t\tconst core_group = container.core_content();\n\t\t// TODO: optimise and store the group_wrapper in the json_node\n\t\tif (core_group) {\n\t\t\tconst point = core_group.points()[point_index];\n\n\t\t\tif (point) {\n\t\t\t\treturn point.attrib_value(attrib_name);\n\t\t\t} else {\n\t\t\t\treturn 0;\n\t\t\t}\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t// _get_param_value(index_or_path, point_index, attrib_name, callback){\n\t// \treturn this.get_referenced_node_container(index_or_path, container=> {\n\t// \t\tconst group = container.group({clone: false});\n\t// \t\tconst group_wrapper = new Core.Geometry.Group(group);\n\t// \t\t// TODO: optimise and store the group_wrapper in the json_node\n\t// \t\tconst point = group_wrapper.points()[point_index];\n\n\t// \t\tif (point != null) {\n\t// \t\t\tconst value = point.attrib_value(attrib_name);\n\t// \t\t\tif (value != null) {\n\t// \t\t\t\treturn callback(value);\n\t// \t\t\t} else {\n\t// \t\t\t\t//throw \"no attribute #{attrib_name} found\"\n\t// \t\t\t\tconsole.error(`no attribute ${attrib_name} found`);\n\t// \t\t\t\treturn callback(0);\n\t// \t\t\t}\n\t// \t\t} else {\n\t// \t\t\tconsole.error(`no point found with index ${point_index}`);\n\t// \t\t\treturn callback(0);\n\t// \t\t}\n\t// \t});\n\t// }\n}\n","import {BaseMethod} from './_Base';\nimport {MethodDependency} from '../MethodDependency';\nimport {GeometryContainer} from '../../containers/Geometry';\n// import {CoreGroup} from '../../../core/Geometry/Group';\n\nexport class PointsCount extends BaseMethod {\n\t// npoints(0)\n\t// npoints('../REF_bbox')\n\tstatic required_arguments() {\n\t\treturn [['string', 'path to node']];\n\t}\n\n\tfind_dependency(index_or_path: number | string): MethodDependency | null {\n\t\treturn this.create_dependency_from_index_or_path(index_or_path);\n\t}\n\n\tprocess_arguments(args: any[]): Promise<any> {\n\t\treturn new Promise(async (resolve, reject) => {\n\t\t\tif (args.length == 1) {\n\t\t\t\tconst index_or_path = args[0];\n\t\t\t\tlet container: GeometryContainer;\n\t\t\t\ttry {\n\t\t\t\t\tcontainer = (await this.get_referenced_node_container(index_or_path)) as GeometryContainer;\n\t\t\t\t} catch (e) {\n\t\t\t\t\treject(e);\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (container) {\n\t\t\t\t\tconst value = container.points_count();\n\t\t\t\t\tresolve(value);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tresolve(0);\n\t\t\t}\n\t\t});\n\t}\n}\n","import {BaseMethod} from './_Base';\nimport {MethodDependency} from '../MethodDependency';\nimport {CoreWalker} from '../../../core/Walker';\nimport {CopySopNode} from '../../nodes/sop/Copy';\nimport {BaseNodeType} from '../../nodes/_Base';\n\nexport class Copy extends BaseMethod {\n\tstatic required_arguments() {\n\t\treturn [\n\t\t\t['string', 'path to copy'],\n\t\t\t['integer', 'default value'],\n\t\t];\n\t}\n\tstatic optional_arguments() {\n\t\treturn [['string', 'attribute name (optional)']];\n\t}\n\n\tfind_dependency(index_or_path: number | string): MethodDependency | null {\n\t\tconst node = this.find_referenced_graph_node(index_or_path) as BaseNodeType;\n\t\t// I'd prefer testing with if(node instanceof CopySopNode)\n\t\t// but tslib generates an error when doing so\n\t\tif (node && node.type == 'copy') {\n\t\t\tconst stamp_node = (node as CopySopNode).stamp_node;\n\t\t\treturn this.create_dependency(stamp_node, index_or_path);\n\t\t}\n\t\treturn null;\n\t}\n\t// find_dependencies(index_or_path: number|string): ReferenceSearchResult{\n\t// \t// return this.find_node_dependency_from_index_or_path(index_or_path)\n\t// \tconst node = this.find_dependency_from_index_or_path(index_or_path)\n\t// \treturn this.create_search_result(stamp_node, index_or_path)\n\t// }\n\n\tprocess_arguments(args: any[]): Promise<any> {\n\t\treturn new Promise((resolve, reject) => {\n\t\t\tif (args.length == 2 || args.length == 3) {\n\t\t\t\tconst path = args[0];\n\t\t\t\tconst default_value = args[1];\n\t\t\t\tconst attribute_name = args[2];\n\n\t\t\t\tconst node = CoreWalker.find_node(this.node, path);\n\n\t\t\t\tlet value;\n\t\t\t\tif (node && node.type == 'copy') {\n\t\t\t\t\tvalue = (node as CopySopNode).stamp_value(attribute_name);\n\t\t\t\t}\n\t\t\t\t// if (node && node instanceof CopySopNode) {\n\t\t\t\t// \tvalue = node.stamp_value(attribute_name);\n\t\t\t\t// }\n\n\t\t\t\tif (value == null) {\n\t\t\t\t\tvalue = default_value;\n\t\t\t\t}\n\t\t\t\tresolve(value);\n\t\t\t} else {\n\t\t\t\tresolve(0);\n\t\t\t}\n\t\t});\n\t}\n\t// update_dependencies() {\n\t// \treturn this.jsep_node()._graph_node.add_graph_input( this.copy_sop.stamp_node() );\n\t// }\n\n\t// process_arguments(args, callback){\n\t// \tconst path = args[0];\n\t// \tconst default_value = args[1];\n\t// \tconst attribute_name = args[2];\n\n\t// \tthis.copy_sop = Walker.find_node(this.node(), path);\n\t// \tlet value = (this.copy_sop != null) ?\n\t// \t\tthis.copy_sop.stamp_value(attribute_name) : undefined;\n\n\t// \tif (value == null) { value = default_value; }\n\n\t// \treturn callback(value);\n\t// }\n}\n","import {BaseMethod} from './_Base';\n// import {MethodDependency} from '../MethodDependency'\n\nexport class StrCharsCount extends BaseMethod {\n\t// str_chars_count('bla') => 3\n\tstatic required_arguments() {\n\t\treturn [['string', 'string to count characters of']];\n\t}\n\n\t// find_dependency(index_or_path: number | string): null {\n\t// \treturn null\n\t// \t// return this.create_dependency_from_index_or_path(index_or_path)\n\t// }\n\n\tasync process_arguments(args: any[]): Promise<number> {\n\t\tlet value = 0;\n\t\tif (args.length == 1) {\n\t\t\tconst string = args[0];\n\t\t\tvalue = string.length;\n\t\t}\n\t\treturn value;\n\t}\n}\n","import {BaseMethod} from './_Base';\n// import {MethodDependency} from '../MethodDependency'\n\nexport class StrConcat extends BaseMethod {\n\t// str_concat(1,2) => '12'\n\t// str_concat(1,\"a\") => '1a'\n\t// str_concat(\"a\",12, \"b\", \" \", 17) => 'a12b 17'\n\tstatic required_arguments(): any[] {\n\t\treturn [\n\t\t\t// ['string', 'string to get range from'],\n\t\t\t// ['integer', 'range start'],\n\t\t\t// ['integer', 'range size'],\n\t\t];\n\t}\n\n\t// find_dependency(index_or_path: number | string): null {\n\t// \treturn null\n\t// \t// return this.create_dependency_from_index_or_path(index_or_path)\n\t// }\n\n\tasync process_arguments(args: any[]): Promise<string> {\n\t\tlet value = '';\n\n\t\tfor (let arg of args) {\n\t\t\tif (arg == null) {\n\t\t\t\targ = '';\n\t\t\t}\n\t\t\tvalue += `${arg}`;\n\t\t}\n\n\t\treturn value;\n\t}\n}\n","import {BaseMethod} from './_Base';\n// import {MethodDependency} from '../MethodDependency'\n\nexport class StrIndex extends BaseMethod {\n\t// str_chars_count('bla') => 3\n\tstatic required_arguments() {\n\t\treturn [\n\t\t\t['string', 'string to get index from'],\n\t\t\t['string', 'char to find index of'],\n\t\t];\n\t}\n\n\t// find_dependency(index_or_path: number | string): null {\n\t// \treturn null\n\t// \t// return this.create_dependency_from_index_or_path(index_or_path)\n\t// }\n\n\tasync process_arguments(args: any[]): Promise<number> {\n\t\tlet value = -1;\n\t\tif (args.length == 2) {\n\t\t\tconst string = args[0];\n\t\t\tconst sub_string = args[1];\n\t\t\tvalue = string.indexOf(sub_string);\n\t\t}\n\t\treturn value;\n\t}\n}\n","import {BaseMethod} from './_Base';\n// import {MethodDependency} from '../MethodDependency'\n\nexport class StrSub extends BaseMethod {\n\t// str_chars_count('bla') => 3\n\tstatic required_arguments() {\n\t\treturn [\n\t\t\t['string', 'string to get range from'],\n\t\t\t['integer', 'range start'],\n\t\t\t['integer', 'range size'],\n\t\t];\n\t}\n\n\t// find_dependency(index_or_path: number | string): MethodDependency | null {\n\t// \treturn null;\n\t// \t// return this.create_dependency_from_index_or_path(index_or_path)\n\t// }\n\n\tasync process_arguments(args: any[]): Promise<string> {\n\t\tlet value = '';\n\t\tconst string = args[0];\n\t\tconst range_start = args[1] || 0;\n\t\tlet range_size = args[2] || 1;\n\t\tif (string) {\n\t\t\tvalue = string.substr(range_start, range_size);\n\t\t}\n\t\treturn value;\n\t}\n}\n","import {BaseParamType} from '../../params/_Base';\nimport lodash_isString from 'lodash/isString';\n// import {ParsedTree} from './ParsedTree'\n// import {LiteralConstructsController} from './LiteralConstructsController'\nimport jsep from 'jsep';\n// import {BaseMethod} from '../../../Engine/Expression/Method/_Base'\n// import {MissingReferencesController} from './MissingReferencesController'\nexport const VARIABLE_PREFIX = '$';\n\nexport abstract class BaseTraverser {\n\t// private _parsed_tree: ParsedTree\n\tpublic _error_message: string | undefined;\n\n\tconstructor(public param: BaseParamType) {}\n\n\tprotected clear_error() {\n\t\tthis._error_message = undefined;\n\t}\n\tprotected set_error(message: string) {\n\t\tthis._error_message = this._error_message || message;\n\t\t// throw this.error_message\n\t}\n\tprotected _set_error_from_error_bound = this._set_error_from_error.bind(this);\n\tprivate _set_error_from_error(error: Error | string) {\n\t\tif (lodash_isString(error)) {\n\t\t\tthis._error_message = error;\n\t\t} else {\n\t\t\tthis._error_message = error.message;\n\t\t}\n\t}\n\tget is_errored(): boolean {\n\t\treturn this._error_message != null;\n\t}\n\tget error_message() {\n\t\treturn this._error_message;\n\t}\n\treset() {\n\t\tthis._error_message = undefined;\n\t}\n\n\ttraverse_node(node: jsep.Expression): string | undefined {\n\t\tconst method_name = `traverse_${node.type}`;\n\t\tconst method = (this as any)[method_name];\n\t\tif (method) {\n\t\t\treturn (this as any)[method_name](node);\n\t\t} else {\n\t\t\tthis.set_error(`expression unknown node type: ${node.type}`);\n\t\t}\n\t}\n\n\tprotected abstract traverse_CallExpression(node: jsep.CallExpression): string | undefined; //{\n\n\t// const method_arguments = node.arguments.map((arg)=>{\n\t// \treturn this.traverse_node(arg)\n\t// })\n\t// const method_name = node.callee.name\n\n\t// // literal construct (if...)\n\t// const literal_contruct = this[`traverse_literal_construct_${node.type}`] //LITERAL_CONSTRUCT[method_name]\n\t// if(literal_contruct){\n\t// \treturn literal_contruct.bind(this)(method_arguments)\n\t// }\n\n\t// // direct expressions (Math.floor, Math.sin...)\n\t// const arguments_joined = `${method_arguments.join(ARGUMENTS_SEPARATOR)}`\n\t// const direct_function_name = DIRECT_EXPRESSION_FUNCTIONS[method_name]\n\t// if(direct_function_name){\n\t// \treturn `${direct_function_name}(${arguments_joined})`\n\t// }\n\n\t// // indirect methods (points_count, asset...)\n\t// const indirect_method = INDIRECT_EXPRESSION_METHODS[method_name]\n\t// if(indirect_method){\n\t// \tthis._create_method_and_dependencies(node, method_name, arguments_joined)\n\t// \treturn `await methods[${this.method_index}].process_arguments(${arguments_joined})`\n\t// }\n\n\t// this.set_error(`unknown method: ${method_name}`)\n\t//}\n\tprotected traverse_BinaryExpression(node: jsep.BinaryExpression): string {\n\t\treturn `${this.traverse_node(node.left)} ${node.operator} ${this.traverse_node(node.right)}`;\n\t}\n\tprotected traverse_LogicalExpression(node: jsep.LogicalExpression): string {\n\t\t// || or &&\n\t\treturn `${this.traverse_node(node.left)} ${node.operator} ${this.traverse_node(node.right)}`;\n\t}\n\tprotected traverse_MemberExpression(node: jsep.MemberExpression): string {\n\t\treturn `${this.traverse_node(node.object)}.${this.traverse_node(node.property)}`;\n\t}\n\tprotected traverse_ConditionalExpression(node: jsep.ConditionalExpression): string {\n\t\treturn `(${this.traverse_node(node.test)}) ? (${this.traverse_node(node.consequent)}) : (${this.traverse_node(\n\t\t\tnode.alternate\n\t\t)})`;\n\t}\n\n\t// currently only used for string expressions such as\n\t// pt_`@ptnum+1`\n\tprotected traverse_Compound(node: jsep.Compound): string {\n\t\tconst args = node.body;\n\t\tlet traversed_args = [];\n\t\tfor (let i = 0; i < args.length; i++) {\n\t\t\tconst arg_node = args[i];\n\t\t\tif (arg_node.type == 'Identifier') {\n\t\t\t\tif ((arg_node as jsep.Identifier).name[0] == VARIABLE_PREFIX) {\n\t\t\t\t\ttraversed_args.push('`${' + this.traverse_node(arg_node) + '}`');\n\t\t\t\t} else {\n\t\t\t\t\ttraversed_args.push(`'${(arg_node as jsep.Identifier).name}'`);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\ttraversed_args.push('`${' + this.traverse_node(arg_node) + '}`');\n\t\t\t}\n\t\t}\n\t\treturn traversed_args.join(' + ');\n\t\t// this may work for things like  [1,-2,3][$F%2]\n\t\t// but can be confusing for more operators like [1,-2,3][$F%2][2]\n\n\t\t// console.log(node)\n\t\t// return `(${this.traverse_node(node.test)}) ? (${this.traverse_node(node.consequent)}) : (${this.traverse_node(node.alternate)})`\n\t\t// this.set_error(\"unrecognised expression Compound\")\n\t\t// return \"\"\n\t}\n\tprotected abstract traverse_UnaryExpression(node: jsep.UnaryExpression): string; //{\n\n\t// if (node.operator === ATTRIBUTE_PREFIX) {\n\t// \tconst attrib_name = this.traverse_node(node.argument);\n\t// \treturn `param.entity_attrib_value(${QUOTE}${attrib_name}${QUOTE})`\n\t// } else {\n\t// \treturn `${node.operator}${this.traverse_node(node.argument)}`; // -5\n\t// }\n\t//}\n\n\tprotected traverse_Literal(node: jsep.Literal): string {\n\t\treturn `${node.raw}`; // 5 or 'string' (raw will include quotes)\n\t}\n\n\tprotected abstract traverse_Identifier(node: jsep.Identifier): string | undefined; //{\n\t// const identifier_first_char = node.name[0]\n\t// if(identifier_first_char == VARIABLE_PREFIX){\n\t// \tconst identifier_name_without_dollar_sign = node.name.substr(1)\n\n\t// \t// globals constants: Math.PI or Math.E\n\t// \tconst direct_constant_name = GLOBAL_CONSTANTS[identifier_name_without_dollar_sign]\n\t// \tif(direct_constant_name){\n\t// \t\treturn direct_constant_name\n\t// \t}\n\n\t// \t// scene or node globals: $F, $CH, $OS\n\t// \tconst method_name = `Identifier_${identifier_name_without_dollar_sign}_body`\n\t// \tconst method = this[method_name]\n\t// \tif(method){\n\t// \t\treturn this[method_name]()\n\t// \t}else{\n\t// \t\tthis.set_error(`identifier unknown: ${node.name}`);\n\t// \t}\n\n\t// } else {\n\t// \treturn node.name // @ptnum will call this method and return \"ptnum\"\n\t// }\n\t//}\n\n\t//\n\t//\n\t// Identifier methods (called from Identifier_body)\n\t//\n\t//\n\t// abstract Identifier_F_body(): string //{\n\t// this.dependencies.push(this.param.scene().context())\n\t// return `param.scene().frame()`\n\t//}\n\t// abstract Identifier_CH_body(): string //{\n\t// return `${QUOTE}${this.param.name()}${QUOTE}`\n\t//}\n\t// TODO:\n\t// '$CEX': '_eval_identifier_as_expression_centroid_x',\n\t// '$CEY': '_eval_identifier_as_expression_centroid_y',\n\t// '$CEZ': '_eval_identifier_as_expression_centroid_z',\n\t// '$CH': '_eval_identifier_as_param_name',\n\t// '$OS': '_eval_identifier_as_node_name',\n\n\t//\n\t//\n\t// Methods dependencies\n\t//\n\t//\n\t// protected _create_method_and_dependencies(node: jsep.CallExpression, method_name: string, arguments_joined: string) {\n\t// \tconst method_constructor = Method[method_name]\n\t// \tconst method = new method_constructor(this.param)\n\t// \tthis.method_index += 1\n\t// \tthis.methods[this.method_index] = method\n\n\t// \tconst dependency_arguments_function = new Function(`return [${arguments_joined}]`)\n\t// \tconst dependency_arguments = dependency_arguments_function()\n\n\t// \tconst reference_search_result = method.find_dependencies(dependency_arguments)\n\t// \treference_search_result.found_graph_nodes.forEach((graph_node)=>{\n\t// \t\tthis.dependencies.push(graph_node)\n\t// \t})\n\t// \treference_search_result.missing_paths.forEach((path)=>{\n\t// \t\tthis.jsep_nodes_by_missing_paths[path] = this.jsep_nodes_by_missing_paths[path] || []\n\t// \t\tthis.jsep_nodes_by_missing_paths[path].push(node)\n\t// \t})\n\t// }\n}\n","export class AttributeRequirementsController {\n\tprivate _attribute_names: Set<string> | undefined;\n\tconstructor() {}\n\n\treset() {\n\t\tif (this._attribute_names) {\n\t\t\tthis._attribute_names.clear();\n\t\t}\n\t}\n\tassign_attributes_lines(): string {\n\t\tif (this._attribute_names) {\n\t\t\tconst lines: string[] = [];\n\t\t\tthis._attribute_names?.forEach((attribute_name: string) => {\n\t\t\t\tlines.push(AttributeRequirementsController.assign_attribute_line(attribute_name));\n\t\t\t});\n\t\t\treturn lines.join(';\\n');\n\t\t} else {\n\t\t\treturn '';\n\t\t}\n\t}\n\tassign_arrays_lines(): string {\n\t\tif (this._attribute_names) {\n\t\t\tconst lines: string[] = [];\n\t\t\tthis._attribute_names?.forEach((attribute_name: string) => {\n\t\t\t\tlines.push(AttributeRequirementsController.assign_item_size_line(attribute_name));\n\t\t\t\tlines.push(AttributeRequirementsController.assign_array_line(attribute_name));\n\t\t\t});\n\t\t\treturn lines.join(';\\n');\n\t\t} else {\n\t\t\treturn '';\n\t\t}\n\t}\n\tattribute_presence_check_line(): string {\n\t\tif (this._attribute_names) {\n\t\t\tconst var_names: string[] = [];\n\t\t\tthis._attribute_names?.forEach((attribute_name: string) => {\n\t\t\t\tconst var_name = AttributeRequirementsController.var_attribute(attribute_name);\n\t\t\t\tvar_names.push(var_name);\n\t\t\t});\n\t\t\treturn var_names.join(' && ');\n\t\t} else {\n\t\t\treturn 'true';\n\t\t}\n\t}\n\n\tadd(attribute_name: string) {\n\t\tthis._attribute_names = this._attribute_names || new Set<string>();\n\t\tthis._attribute_names.add(attribute_name);\n\t}\n\n\tstatic assign_attribute_line(attribute_name: string) {\n\t\tconst var_attribute = this.var_attribute(attribute_name);\n\t\treturn `const ${var_attribute} = entities[0].geometry().attributes['${attribute_name}']`;\n\t}\n\tstatic assign_item_size_line(attribute_name: string) {\n\t\tconst var_attribute = this.var_attribute(attribute_name);\n\t\tconst var_attribute_size = this.var_attribute_size(attribute_name);\n\t\treturn `const ${var_attribute_size} = ${var_attribute}.itemSize`;\n\t}\n\tstatic assign_array_line(attribute_name: string) {\n\t\tconst var_attribute = this.var_attribute(attribute_name);\n\t\tconst var_array = this.var_array(attribute_name);\n\t\treturn `const ${var_array} = ${var_attribute}.array`;\n\t}\n\n\tstatic var_attribute(attribute_name: string) {\n\t\treturn `attrib_${attribute_name}`;\n\t}\n\tstatic var_attribute_size(attribute_name: string) {\n\t\treturn `attrib_size_${attribute_name}`;\n\t}\n\tstatic var_array(attribute_name: string) {\n\t\treturn `array_${attribute_name}`;\n\t}\n\tvar_attribute_size(attribute_name: string) {\n\t\treturn AttributeRequirementsController.var_attribute_size(attribute_name);\n\t}\n\tvar_array(attribute_name: string) {\n\t\treturn AttributeRequirementsController.var_array(attribute_name);\n\t}\n}\n","import {BaseParamType} from '../../params/_Base';\nimport {CoreGraphNode} from '../../../core/graph/CoreGraphNode';\nimport {ParsedTree} from './ParsedTree';\nimport {LiteralConstructsController, LiteralConstructMethod} from '../LiteralConstructsController';\nimport {BaseMethod} from '../methods/_Base';\nimport {MethodModule} from '../methods/_Module';\nimport {CoreAttribute} from '../../../core/geometry/Attribute';\nimport lodash_isString from 'lodash/isString';\n\n// import {JsepsByString} from '../DependenciesController'\nimport jsep from 'jsep';\n\n// import {Vector3} from 'three/src/math/Vector3'\ntype LiteralConstructDictionary = Dictionary<LiteralConstructMethod>;\ntype AnyDictionary = Dictionary<any>;\n\nconst NATIVE_MATH_METHODS = [\n\t'abs',\n\t'acos',\n\t'acosh',\n\t'asin',\n\t'asinh',\n\t'atan',\n\t'atan2',\n\t'atanh',\n\t'ceil',\n\t'cos',\n\t'cosh',\n\t'exp',\n\t'expm1',\n\t'floor',\n\t'log',\n\t'log1p',\n\t'log2',\n\t'log10',\n\t'max',\n\t'min',\n\t'pow',\n\t'round',\n\t'sign',\n\t'sin',\n\t'sinh',\n\t'sqrt',\n\t'tan',\n\t'tanh',\n];\nconst NATIVE_ES6_MATH_METHODS = ['cbrt', 'hypot', 'log10', 'trunc'];\nconst NATIVE_MATH_METHODS_RENAMED: AnyDictionary = {\n\tmath_random: 'random',\n};\nconst CORE_MATH_METHODS = ['fit', 'fit01', 'fract', 'deg2rad', 'rad2deg', 'rand', 'clamp'];\nimport {Easing} from '../../../core/math/Easing';\nconst EASING_METHODS = Object.keys(Easing);\n\nconst CORE_STRING_METHODS = ['precision'];\nconst NATIVE_MATH_CONSTANTS = ['E', 'LN2', 'LN10', 'LOG10E', 'LOG2E', 'PI', 'SQRT1_2', 'SQRT2'];\n\nconst DIRECT_EXPRESSION_FUNCTIONS: AnyDictionary = {};\nNATIVE_MATH_METHODS.forEach((name) => {\n\tDIRECT_EXPRESSION_FUNCTIONS[name] = `Math.${name}`;\n});\nNATIVE_ES6_MATH_METHODS.forEach((name) => {\n\tDIRECT_EXPRESSION_FUNCTIONS[name] = `Math.${name}`;\n});\nObject.keys(NATIVE_MATH_METHODS_RENAMED).forEach((name) => {\n\tconst remaped = NATIVE_MATH_METHODS_RENAMED[name];\n\tDIRECT_EXPRESSION_FUNCTIONS[name] = `Math.${remaped}`;\n});\nCORE_MATH_METHODS.forEach((name) => {\n\tDIRECT_EXPRESSION_FUNCTIONS[name] = `Core.Math.${name}`;\n});\nEASING_METHODS.forEach((name) => {\n\tDIRECT_EXPRESSION_FUNCTIONS[name] = `Core.Math.Easing.${name}`;\n});\nCORE_STRING_METHODS.forEach((name) => {\n\tDIRECT_EXPRESSION_FUNCTIONS[name] = `Core.String.${name}`;\n});\n\nconst LITERAL_CONSTRUCT: LiteralConstructDictionary = {\n\tif: LiteralConstructsController.if,\n};\n\nconst GLOBAL_CONSTANTS: Dictionary<string> = {};\nNATIVE_MATH_CONSTANTS.forEach((name) => {\n\tGLOBAL_CONSTANTS[name] = `Math.${name}`;\n});\n\nconst INDIRECT_EXPRESSION_METHODS: AnyDictionary = MethodModule;\n\n// const NODE_TYPE_METHODS = {\n// \tCallExpression: 'setup_graph_call_expression',\n// \tMemberExpression: 'setup_graph_member_expression',\n// \tBinaryExpression: 'setup_graph_binary_expression',\n// \tUnaryExpression: 'setup_graph_unary_expression',\n// \tLogicalExpression: 'setup_graph_logical_expression',\n// \tLiteral: 'setup_graph_literal',\n// \tIdentifier: 'setup_graph_identifier'\n// };\n//\n\n// const IDENTIFIER_METHODS = {\n// \t'$F': '_setup_graph_identifier_as_global_frame'\n// }\nconst QUOTE = \"'\";\nconst ARGUMENTS_SEPARATOR = ', ';\nconst ATTRIBUTE_PREFIX = '@';\nimport {VARIABLE_PREFIX} from './_Base';\n\nconst PROPERTY_OFFSETS: AnyDictionary = {\n\tx: 0,\n\ty: 1,\n\tz: 2,\n\tw: 3,\n\tr: 0,\n\tg: 1,\n\tb: 2,\n};\n\n// export interface MethodsByName {\n// \t[propName: string]: BaseMethod;\n// }\n\nimport {BaseTraverser} from './_Base';\nimport {MethodDependency} from '../MethodDependency';\nimport {AttributeRequirementsController} from '../AttributeRequirementsController';\nimport {CoreMath} from '../../../core/math/_Module';\nimport {CoreString} from '../../../core/String';\n\nimport {AsyncFunction} from '../../../core/AsyncFunction';\n\nexport class FunctionGenerator extends BaseTraverser {\n\tprivate function: Function | undefined;\n\t// private function_pre_entities_loop_lines: string[] = [];\n\tprivate _attribute_requirements_controller = new AttributeRequirementsController();\n\t// private function_pre_body:string\n\tprivate function_main_string: string | undefined;\n\tprivate methods: BaseMethod[] = [];\n\tprivate method_index: number = -1;\n\n\tpublic method_dependencies: MethodDependency[] = [];\n\tpublic immutable_dependencies: CoreGraphNode[] = [];\n\t// public jsep_dependencies: JsepDependency[] = []\n\t// public jsep_nodes_by_missing_paths: JsepsByString = {}\n\n\t// private string_generator: ExpressionStringGenerator = new ExpressionStringGenerator()\n\n\tconstructor(public param: BaseParamType) {\n\t\tsuper(param);\n\t}\n\n\tpublic parse_tree(parsed_tree: ParsedTree) {\n\t\tthis.reset();\n\n\t\tif (parsed_tree.error_message == null) {\n\t\t\ttry {\n\t\t\t\t// this.function_pre_entities_loop_lines = [];\n\t\t\t\tthis._attribute_requirements_controller.reset();\n\t\t\t\t// this.function_pre_body = ''\n\t\t\t\tif (parsed_tree.node) {\n\t\t\t\t\tconst function_main_string = this.traverse_node(parsed_tree.node);\n\t\t\t\t\tif (function_main_string && !this.is_errored) {\n\t\t\t\t\t\tthis.function_main_string = function_main_string;\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tconsole.warn('no parsed_tree.node');\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tconsole.warn(`error in expression for param ${this.param.full_path()}`);\n\t\t\t\tconsole.warn(e);\n\t\t\t}\n\n\t\t\tif (this.function_main_string) {\n\t\t\t\ttry {\n\t\t\t\t\tthis.function = new AsyncFunction(\n\t\t\t\t\t\t'Core',\n\t\t\t\t\t\t'param',\n\t\t\t\t\t\t'methods',\n\t\t\t\t\t\t'_set_error_from_error',\n\t\t\t\t\t\t`\n\t\t\t\t\ttry {\n\t\t\t\t\t\t${this.function_body()}\n\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\t_set_error_from_error(e)\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}`\n\t\t\t\t\t);\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.warn(e);\n\t\t\t\t\tthis.set_error('cannot generate function');\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tthis.set_error('cannot generate function body');\n\t\t\t}\n\t\t} else {\n\t\t\tthis.set_error('cannot parse expression');\n\t\t}\n\t}\n\n\treset() {\n\t\tsuper.reset();\n\t\tthis.function_main_string = undefined;\n\t\tthis.methods = [];\n\t\tthis.method_index = -1;\n\t\tthis.function = undefined;\n\t\tthis.method_dependencies = [];\n\t\tthis.immutable_dependencies = [];\n\t}\n\n\tfunction_body() {\n\t\tif (this.param.options.is_expression_for_entities) {\n\t\t\treturn `\n\t\t\tconst entities = param.expression_controller.entities;\n\t\t\tif(entities){\n\t\t\t\treturn new Promise( async (resolve, reject)=>{\n\t\t\t\t\tlet entity;\n\t\t\t\t\tconst entity_callback = param.expression_controller.entity_callback;\n\t\t\t\t\t${this._attribute_requirements_controller.assign_attributes_lines()}\n\t\t\t\t\tif( ${this._attribute_requirements_controller.attribute_presence_check_line()} ){\n\t\t\t\t\t\t${this._attribute_requirements_controller.assign_arrays_lines()}\n\t\t\t\t\t\tfor(let index=0; index < entities.length; index++){\n\t\t\t\t\t\t\tentity = entities[index];\n\t\t\t\t\t\t\tresult = ${this.function_main_string};\n\t\t\t\t\t\t\tentity_callback(entity, result);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresolve()\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst error = new Error('attribute not found')\n\t\t\t\t\t\t_set_error_from_error(error)\n\t\t\t\t\t\treject(error)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t\treturn []`;\n\t\t} else {\n\t\t\treturn `\n\t\t\treturn new Promise( async (resolve, reject)=>{\n\t\t\t\ttry {\n\t\t\t\t\tconst value = ${this.function_main_string}\n\t\t\t\t\tresolve(value)\n\t\t\t\t} catch(e) {\n\t\t\t\t\t_set_error_from_error(e)\n\t\t\t\t\treject()\n\t\t\t\t}\n\t\t\t})\n\t\t\t`;\n\t\t}\n\t}\n\n\teval_allowed(): boolean {\n\t\treturn this.function != null;\n\t}\n\teval_function() {\n\t\t// this.param.entity_attrib_values = this.param.entity_attrib_values || {}\n\t\t// this.param.entity_attrib_values.position =\n\t\t// \tthis.param.entity_attrib_values.position || new THREE.Vector3()\n\t\tif (this.function) {\n\t\t\tthis.clear_error();\n\n\t\t\tconst Core = {\n\t\t\t\tMath: CoreMath,\n\t\t\t\tString: CoreString,\n\t\t\t};\n\t\t\tconst result = this.function(Core, this.param, this.methods, this._set_error_from_error_bound);\n\t\t\treturn result;\n\t\t}\n\t}\n\n\t//\n\t//\n\t// TRAVERSE METHODS\n\t//\n\t//\n\tprotected traverse_CallExpression(node: jsep.CallExpression): string | undefined {\n\t\tconst method_arguments = node.arguments.map((arg) => {\n\t\t\treturn this.traverse_node(arg);\n\t\t});\n\t\tconst callee = node.callee as jsep.Identifier;\n\t\tconst method_name = callee.name;\n\t\tif (method_name) {\n\t\t\t// literal construct (if...)\n\t\t\tconst literal_contruct = LITERAL_CONSTRUCT[method_name];\n\t\t\tif (literal_contruct) {\n\t\t\t\treturn literal_contruct(method_arguments);\n\t\t\t}\n\n\t\t\t// direct expressions (Math.floor, Math.sin...)\n\t\t\tconst arguments_joined = `${method_arguments.join(ARGUMENTS_SEPARATOR)}`;\n\t\t\tconst direct_function_name = DIRECT_EXPRESSION_FUNCTIONS[method_name];\n\t\t\tif (direct_function_name) {\n\t\t\t\treturn `${direct_function_name}(${arguments_joined})`;\n\t\t\t}\n\n\t\t\t// indirect methods (points_count, asset...)\n\t\t\tconst indirect_method = INDIRECT_EXPRESSION_METHODS[method_name];\n\t\t\tif (indirect_method) {\n\t\t\t\tconst path_node = node.arguments[0];\n\t\t\t\t// const path_argument = this.string_generator.traverse_node(path_node)\n\t\t\t\tconst function_string = `return ${method_arguments[0]}`;\n\t\t\t\tlet path_argument_function;\n\t\t\t\tlet path_argument = [];\n\t\t\t\ttry {\n\t\t\t\t\tpath_argument_function = new Function(function_string);\n\t\t\t\t\tpath_argument = path_argument_function();\n\t\t\t\t} catch {\n\t\t\t\t\t// path_argument_function = new AsyncFunction(function_string)\n\t\t\t\t\t// it looks like if the input contains an await,\n\t\t\t\t\t// it is because it has been generated by another indirect function.\n\t\t\t\t\t// This means that the dependencies have been generated already\n\t\t\t\t\t// so we may not need to do it now\n\t\t\t\t}\n\n\t\t\t\tthis._create_method_and_dependencies(method_name, path_argument, path_node);\n\t\t\t\treturn `(await methods[${this.method_index}].process_arguments([${arguments_joined}]))`;\n\t\t\t}\n\t\t}\n\n\t\tthis.set_error(`unknown method: ${method_name}`);\n\t}\n\tprotected traverse_BinaryExpression(node: jsep.BinaryExpression): string {\n\t\t// if(node.right.type == 'Identifier'){\n\t\t// \tthis.set_error(`cannot have identifier after ${node.operator}`)\n\t\t// \treturn \"\"\n\t\t// }\n\t\treturn `(${this.traverse_node(node.left)} ${node.operator} ${this.traverse_node(node.right)})`;\n\t}\n\tprotected traverse_LogicalExpression(node: jsep.LogicalExpression): string {\n\t\t// || or &&\n\t\t// if(node.right.type == 'Identifier'){\n\t\t// \tthis.set_error(`cannot have identifier after ${node.operator}`)\n\t\t// \treturn \"\"\n\t\t// }\n\t\treturn `(${this.traverse_node(node.left)} ${node.operator} ${this.traverse_node(node.right)})`;\n\t}\n\tprotected traverse_MemberExpression(node: jsep.MemberExpression): string {\n\t\treturn `${this.traverse_node(node.object)}.${this.traverse_node(node.property)}`;\n\t}\n\tprotected traverse_UnaryExpression(node: jsep.UnaryExpression): string {\n\t\tif (node.operator === ATTRIBUTE_PREFIX) {\n\t\t\tlet argument = node.argument;\n\t\t\tlet attribute_name;\n\t\t\tlet property;\n\t\t\tswitch (argument.type) {\n\t\t\t\tcase 'Identifier': {\n\t\t\t\t\tconst argument_identifier = (<unknown>argument) as jsep.Identifier;\n\t\t\t\t\tattribute_name = argument_identifier.name;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tcase 'MemberExpression': {\n\t\t\t\t\tconst argument_member_expression = (<unknown>argument) as jsep.MemberExpression;\n\t\t\t\t\tconst attrib_node = argument_member_expression.object as jsep.Identifier;\n\t\t\t\t\tconst property_node = argument_member_expression.property as jsep.Identifier;\n\t\t\t\t\tattribute_name = attrib_node.name;\n\t\t\t\t\tproperty = property_node.name;\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t}\n\t\t\t// this.function_pre_body += `\n\t\t\t// param.entity_attrib_value(${QUOTE}${attrib_node.name}${QUOTE}, param.entity_attrib_values.position);\n\t\t\t// `\n\t\t\tif (attribute_name) {\n\t\t\t\tattribute_name = CoreAttribute.remap_name(attribute_name);\n\t\t\t\tif (attribute_name == 'ptnum') {\n\t\t\t\t\treturn '((entity != null) ? entity.index : 0)';\n\t\t\t\t} else {\n\t\t\t\t\tconst var_attribute_size = this._attribute_requirements_controller.var_attribute_size(\n\t\t\t\t\t\tattribute_name\n\t\t\t\t\t);\n\t\t\t\t\tconst var_array = this._attribute_requirements_controller.var_array(attribute_name);\n\t\t\t\t\tthis._attribute_requirements_controller.add(attribute_name);\n\t\t\t\t\tif (property) {\n\t\t\t\t\t\tconst property_offset = PROPERTY_OFFSETS[property];\n\t\t\t\t\t\treturn `${var_array}[entity.index*${var_attribute_size}+${property_offset}]`;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn `${var_array}[entity.index*${var_attribute_size}]`;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\tconsole.warn('attribute not found');\n\t\t\t\treturn '';\n\t\t\t}\n\t\t} else {\n\t\t\treturn `${node.operator}${this.traverse_node(node.argument)}`; // -5\n\t\t}\n\t}\n\n\tprotected traverse_Literal(node: jsep.Literal): string {\n\t\treturn `${node.raw}`; // 5 or 'string' (raw will include quotes)\n\t}\n\n\tprotected traverse_Identifier(node: jsep.Identifier): string | undefined {\n\t\tconst identifier_first_char = node.name[0];\n\t\tif (identifier_first_char == VARIABLE_PREFIX) {\n\t\t\tconst identifier_name_without_dollar_sign = node.name.substr(1);\n\n\t\t\t// globals constants: Math.PI or Math.E\n\t\t\tconst direct_constant_name = GLOBAL_CONSTANTS[identifier_name_without_dollar_sign];\n\t\t\tif (direct_constant_name) {\n\t\t\t\treturn direct_constant_name;\n\t\t\t}\n\n\t\t\t// scene or node globals: $F, $FPS, $T, $CH, $OS\n\t\t\tconst method_name = `traverse_Identifier_${identifier_name_without_dollar_sign}`;\n\t\t\tconst method = (this as any)[method_name];\n\t\t\tif (method) {\n\t\t\t\treturn (this as any)[method_name]();\n\t\t\t} else {\n\t\t\t\tthis.set_error(`identifier unknown: ${node.name}`);\n\t\t\t}\n\t\t} else {\n\t\t\treturn node.name; // @ptnum will call this method and return \"ptnum\"\n\t\t}\n\t}\n\n\t//\n\t//\n\t// Identifier methods (called from Identifier_body)\n\t//\n\t//\n\tprotected traverse_Identifier_F(): string {\n\t\tthis.immutable_dependencies.push(this.param.scene.time_controller.graph_node);\n\t\treturn `param.scene.time_controller.frame`;\n\t}\n\tprotected traverse_Identifier_FPS(): string {\n\t\tthis.immutable_dependencies.push(this.param.scene.time_controller.graph_node);\n\t\treturn `param.scene.time_controller.fps`;\n\t}\n\tprotected traverse_Identifier_T(): string {\n\t\tthis.immutable_dependencies.push(this.param.scene.time_controller.graph_node);\n\t\treturn `param.scene.time_controller.time`;\n\t}\n\tprotected traverse_Identifier_CH(): string {\n\t\treturn `${QUOTE}${this.param.name}${QUOTE}`;\n\t}\n\tprotected traverse_Identifier_CEX(): string {\n\t\treturn this._method_centroid('x');\n\t}\n\tprotected traverse_Identifier_CEY(): string {\n\t\treturn this._method_centroid('y');\n\t}\n\tprotected traverse_Identifier_CEZ(): string {\n\t\treturn this._method_centroid('z');\n\t}\n\t// TODO:\n\t// '$OS': '_eval_identifier_as_node_name',\n\t// '$BBX': '_eval_identifier_as_bounding_box_relative',\n\n\tprivate _method_centroid(component: string): string {\n\t\tconst method_arguments = [0, `${QUOTE}${component}${QUOTE}`];\n\t\tconst arguments_joined = method_arguments.join(ARGUMENTS_SEPARATOR);\n\t\tthis._create_method_and_dependencies('centroid', 0);\n\t\treturn `(await methods[${this.method_index}].process_arguments([${arguments_joined}]))`;\n\t}\n\n\t//\n\t//\n\t// Methods dependencies\n\t//\n\t//\n\tprivate _create_method_and_dependencies(\n\t\tmethod_name: string,\n\t\tpath_argument: number | string,\n\t\tpath_node?: jsep.Expression\n\t) {\n\t\tconst method_constructor = INDIRECT_EXPRESSION_METHODS[method_name];\n\t\tconst method = new method_constructor(this.param) as BaseMethod;\n\t\tthis.method_index += 1;\n\t\tthis.methods[this.method_index] = method;\n\n\t\tconst method_dependency = method.find_dependency(path_argument);\n\t\tif (method_dependency) {\n\t\t\tif (path_node) {\n\t\t\t\tmethod_dependency.set_jsep_node(path_node);\n\t\t\t}\n\t\t\tthis.method_dependencies.push(method_dependency);\n\t\t} else {\n\t\t\tif (path_node && lodash_isString(path_argument)) {\n\t\t\t\tthis.param.scene.missing_expression_references_controller.register(\n\t\t\t\t\tthis.param,\n\t\t\t\t\tpath_node,\n\t\t\t\t\tpath_argument\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t\t// method_dependencies.resolved_graph_nodes.forEach((graph_node)=>{\n\t\t// \tif(path_node){\n\t\t// \t\tconst jsep_dependency = new JsepDependency(graph_node, path_node)\n\t\t// \t\tthis.jsep_dependencies.push(jsep_dependency)\n\t\t// \t} else {\n\t\t// \t\tthis.immutable_dependencies.push(graph_node)\n\t\t// \t}\n\n\t\t// })\n\n\t\t// if(path_node){\n\t\t// \treference_search_result.missing_paths.forEach((path)=>{\n\t\t// \t\tthis.jsep_nodes_by_missing_paths[path] = this.jsep_nodes_by_missing_paths[path] || []\n\t\t// \t\tthis.jsep_nodes_by_missing_paths[path].push(path_node)\n\t\t// \t})\n\t\t// }\n\t}\n}\n","export type LiteralConstructMethod = (args: any[]) => string\n\nexport class LiteralConstructsController {\n\tstatic if(args: any[]): string {\n\t\tconst condition = args[0]\n\t\tconst val_true = args[1]\n\t\tconst val_false = args[2]\n\t\treturn `(${condition}) ? (${val_true}) : (${val_false})`\n\t}\n}\n","import {BaseParamType} from '../../params/_Base';\nimport {ParsedTree} from './ParsedTree';\n// import {LiteralConstructsController} from './LiteralConstructsController'\nimport jsep from 'jsep';\n// import {BaseMethod} from '../../../Engine/Expression/Method/_Base'\n// import {MissingReferencesControler} from './MissingReferencesController'\n\nconst ARGUMENTS_SEPARATOR = ', ';\n// const ATTRIBUTE_PREFIX = '@'\n// const VARIABLE_PREFIX = '$'\n\n// export interface MethodsByName {\n// \t[propName: string]: BaseMethod;\n// }\n// interface JsepsByString {\n// \t[propName: string]: jsep.Expression[];\n// }\nimport {BaseTraverser} from './_Base';\n\nexport class ExpressionStringGenerator extends BaseTraverser {\n\tconstructor(public param: BaseParamType) {\n\t\tsuper(param);\n\t}\n\n\tparse_tree(parsed_tree: ParsedTree) {\n\t\tif (parsed_tree.error_message == null && parsed_tree.node) {\n\t\t\ttry {\n\t\t\t\treturn this.traverse_node(parsed_tree.node);\n\t\t\t} catch (e) {\n\t\t\t\tthis.set_error('could not traverse tree');\n\t\t\t}\n\t\t} else {\n\t\t\tthis.set_error('cannot parse tree');\n\t\t}\n\t}\n\n\tprotected traverse_CallExpression(node: jsep.CallExpression): string {\n\t\tconst method_arguments = node.arguments.map((arg) => {\n\t\t\treturn this.traverse_node(arg);\n\t\t});\n\t\tconst arguments_joined = `${method_arguments.join(ARGUMENTS_SEPARATOR)}`;\n\n\t\tconst method_name = (node.callee as jsep.Identifier).name;\n\t\treturn `${method_name}(${arguments_joined})`;\n\t}\n\tprotected traverse_UnaryExpression(node: jsep.UnaryExpression): string {\n\t\treturn `${node.operator}${this.traverse_node(node.argument)}`; // -5\n\t}\n\n\tprotected traverse_Identifier(node: jsep.Identifier): string {\n\t\treturn `${node.name}`;\n\t}\n}\n","import {BaseParamType} from '../params/_Base';\n// import {ParsedTree} from './Traverser/ParsedTree'\nimport {FunctionGenerator} from './traversers/FunctionGenerator';\n// import {NodeSimple} from '../../core/graph/NodeSimple'\n// import {MissingReferencesController} from './MissingReferencesController'\n// import {NamesListener} from './NamesListener'\nimport {MethodDependency} from './MethodDependency';\nimport jsep from 'jsep';\n\nexport interface JsepsByString {\n\t[propName: string]: jsep.Expression[];\n}\n\nexport class DependenciesController {\n\terror_message: string | undefined;\n\t// private references_controller: MissingReferencesController\n\tprivate cyclic_graph_detected: boolean = false;\n\t// private jsep_nodes_by_missing_paths: JsepsByString = {}\n\tprivate method_dependencies: MethodDependency[] = [];\n\n\t// private names_listeners: NamesListener[] = []\n\n\tconstructor(public param: BaseParamType) {\n\t\t// this.references_controller = this.param.scene().missing_expression_references_controller\n\t}\n\n\tprotected set_error(message: string) {\n\t\tthis.error_message = this.error_message || message;\n\t}\n\n\treset() {\n\t\tthis.param.graph_disconnect_predecessors();\n\n\t\tthis.method_dependencies.forEach((method_dependency) => {\n\t\t\tmethod_dependency.reset();\n\t\t});\n\t\tthis.method_dependencies = [];\n\n\t\t// this.jsep_nodes_by_missing_paths = {}\n\t\t// const ref_ids = Object.keys(this.missing_expression_references_by_id)\n\t\t// ref_ids.forEach(ref_id=>{\n\t\t// \tconst ref = this.missing_expression_references_by_id[ref_id]\n\t\t// \tthis.references_controller.unregister(ref)\n\t\t// })\n\t\t// this.missing_expression_references_by_id = {}\n\n\t\t// this.names_listeners.forEach(names_listener=>{names_listener.reset()})\n\t}\n\n\tupdate(function_generator: FunctionGenerator) {\n\t\t// const immutable_dependencies = function_generator.immutable_dependencies\n\t\t// const jsep_dependencies = function_generator.jsep_dependencies\n\t\t// const jsep_nodes_by_missing_paths = function_generator.jsep_nodes_by_missing_paths\n\n\t\t// if(jsep_dependencies.length > 0){\n\t\t// \tconsole.log(\"connect_param_to_dependencies\", this.param.full_path())\n\t\t// }\n\n\t\tthis.cyclic_graph_detected = false;\n\n\t\tthis.connect_immutable_dependencies(function_generator);\n\t\tthis.method_dependencies = function_generator.method_dependencies;\n\t\tthis.handle_method_dependencies();\n\t\t// this.connect_missing_paths(function_generator)\n\n\t\tthis.listen_for_name_changes();\n\t}\n\n\tprivate connect_immutable_dependencies(function_generator: FunctionGenerator) {\n\t\tfunction_generator.immutable_dependencies.forEach((dependency) => {\n\t\t\tif (this.cyclic_graph_detected == false) {\n\t\t\t\tif (this.param.add_graph_input(dependency) == false) {\n\t\t\t\t\tthis.cyclic_graph_detected = true;\n\t\t\t\t\tthis.set_error('cannot create expression, infinite graph detected');\n\t\t\t\t\tthis.reset();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\tprivate handle_method_dependencies() {\n\t\tthis.method_dependencies.forEach((method_dependency) => {\n\t\t\tif (this.cyclic_graph_detected == false) {\n\t\t\t\tthis.handle_method_dependency(method_dependency);\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate handle_method_dependency(method_dependency: MethodDependency) {\n\t\tconst node_simple = method_dependency.resolved_graph_node;\n\n\t\tif (node_simple) {\n\t\t\t// this should update the jsep_node, and run the expression to string parser\n\t\t\t// when a name in the referenced nodes is updated\n\t\t\t// const names_listener = new NamesListener(this.param, node_simple, jsep_node)\n\t\t\t// TODO: test that it is no longer active if expression is updated\n\n\t\t\tif (!this.param.add_graph_input(node_simple)) {\n\t\t\t\tthis.cyclic_graph_detected = true;\n\t\t\t\tthis.set_error('cannot create expression, infinite graph detected');\n\t\t\t\tthis.reset();\n\t\t\t\treturn;\n\t\t\t}\n\t\t} // else {\n\t\t// const jsep_node = method_dependency.jsep_node\n\t\t//}\n\t}\n\n\tprivate listen_for_name_changes() {\n\t\tthis.method_dependencies.forEach((method_dependency) => {\n\t\t\tmethod_dependency.listen_for_name_changes();\n\t\t});\n\t}\n\n\t// private connect_missing_paths(function_generator: FunctionGenerator){\n\n\t// \tconst jsep_nodes_by_missing_paths = function_generator.jsep_nodes_by_missing_paths\n\t// \tconst missing_paths = Object.keys(jsep_nodes_by_missing_paths)\n\n\t// \tmissing_paths.forEach((missing_path)=>{\n\t// \t\tconst full_path = CoreWalker.make_absolute(this.param.node(), missing_path)\n\t// \t\tconst jsep_nodes = jsep_nodes_by_missing_paths[missing_path]\n\t// \t\tjsep_nodes.forEach(jsep_node=>{\n\t// \t\t\tconst missing_expression_reference = this.references_controller.register(this.param, jsep_node, full_path)\n\n\t// \t\t\tthis.missing_expression_references_by_id[missing_expression_reference.id] = missing_expression_reference\n\t// \t\t})\n\t// \t})\n\n\t// }\n}\n","import {BaseParamType} from '../params/_Base';\nimport {ParsedTree} from './traversers/ParsedTree';\n// import {MissingReferencesController} from './MissingReferencesController'\n// import CoreWalker from 'src/core/Walker'\n\nimport {FunctionGenerator} from './traversers/FunctionGenerator';\nimport {ExpressionStringGenerator} from './traversers/ExpressionStringGenerator';\nimport {DependenciesController} from './DependenciesController';\nimport {ParamType} from '../poly/ParamType';\n\nexport class ExpressionManager {\n\tpublic parse_completed: boolean = false;\n\tprivate parse_started: boolean = false;\n\tprivate function_generator: FunctionGenerator;\n\tprivate expression_string_generator: ExpressionStringGenerator | undefined;\n\tpublic dependencies_controller: DependenciesController;\n\t// private _error_message: string | undefined;\n\tprivate parsed_tree: ParsedTree = new ParsedTree();\n\n\tconstructor(\n\t\tpublic param: BaseParamType // public element_index: number=0\n\t) {\n\t\tthis.function_generator = new FunctionGenerator(this.param);\n\t\tthis.dependencies_controller = new DependenciesController(this.param);\n\t}\n\n\tparse_expression(expression: string) {\n\t\tif (this.parse_started) {\n\t\t\tthrow new Error(`parse in progress for param ${this.param.full_path()}`);\n\t\t}\n\t\tthis.parse_started = true;\n\t\tthis.parse_completed = false;\n\t\tthis.parsed_tree = this.parsed_tree || new ParsedTree();\n\n\t\tthis.reset();\n\t\tif (this.param.type == ParamType.STRING) {\n\t\t\tthis.parsed_tree.parse_expression_for_string_param(expression);\n\t\t} else {\n\t\t\tthis.parsed_tree.parse_expression(expression);\n\t\t}\n\t\tthis.function_generator.parse_tree(this.parsed_tree);\n\n\t\tif (this.function_generator.error_message == null) {\n\t\t\tthis.dependencies_controller.update(this.function_generator);\n\t\t\tif (this.dependencies_controller.error_message) {\n\t\t\t\tthis.param.states.error.set(this.dependencies_controller.error_message);\n\t\t\t} else {\n\t\t\t\tthis.parse_completed = true;\n\t\t\t\tthis.parse_started = false;\n\t\t\t}\n\t\t} //else {\n\t\t//this.set_error(this.function_generator.error_message);\n\t\t//}\n\t}\n\tasync compute_function(): Promise<any> {\n\t\t// this.parse_and_update_dependencies_if_not_done(expression);\n\t\tif (this.compute_allowed()) {\n\t\t\ttry {\n\t\t\t\tconst new_value = await this.function_generator.eval_function();\n\t\t\t\treturn new_value;\n\t\t\t} catch (e) {\n\t\t\t\t// if (this.function_generator.is_errored && this.function_generator.error_message) {\n\t\t\t\t// \tthis.set_error(this.function_generator.error_message);\n\t\t\t\t// }\n\t\t\t\treturn new Promise((resolve, reject) => resolve());\n\t\t\t}\n\t\t} else {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tresolve(null);\n\t\t\t});\n\t\t}\n\t}\n\n\treset() {\n\t\tthis.parse_completed = false;\n\t\tthis.parse_started = false;\n\t\t// this._error_message = undefined;\n\t\t// if(force){ // || this.element_index <= 1){\n\t\tthis.dependencies_controller.reset();\n\t\t// }\n\t\tthis.function_generator.reset();\n\t}\n\n\tget is_errored(): boolean {\n\t\treturn this.function_generator.is_errored;\n\t}\n\tget error_message() {\n\t\treturn this.function_generator.error_message;\n\t}\n\n\tprivate compute_allowed(): boolean {\n\t\treturn /*this._error_message == null &&*/ this.function_generator.eval_allowed();\n\t}\n\n\t// private parse_and_update_dependencies(expression: string) {\n\t// \tif (this.param.has_expression()) {\n\t// \t\tthis.parse_expression(expression);\n\n\t// \t\tif (this.error_message != null) {\n\t// \t\t\tthis.param.states.error.set(`expression error: \"${expression}\" (${this.error_message})`);\n\t// \t\t}\n\t// \t\t// this.parse_completed = true\n\t// \t}\n\t// }\n\t// private parse_and_update_dependencies_if_not_done(expression: string) {\n\t// \tif (!this.parse_completed) {\n\t// \t\tthis.parse_and_update_dependencies(expression);\n\t// \t}\n\t// }\n\n\tupdate_from_method_dependency_name_change() {\n\t\tthis.expression_string_generator =\n\t\t\tthis.expression_string_generator || new ExpressionStringGenerator(this.param);\n\n\t\tconst new_expression_string = this.expression_string_generator.parse_tree(this.parsed_tree);\n\n\t\tif (new_expression_string) {\n\t\t\tthis.param.set(new_expression_string);\n\t\t} else {\n\t\t\tconsole.warn('failed to regenerate expression');\n\t\t}\n\t\t// this.param.expression_controller?.set_expression(new_expression_string);\n\n\t\t// this.reset()\n\t\t// if (new_expression_string) {\n\t\t// this.parse_expression(new_expression_string);\n\t\t// }\n\t}\n}\n","import {BaseParamType} from '../_Base';\nimport {ExpressionManager} from '../../expressions/ExpressionManager';\nimport {CorePoint} from '../../../core/geometry/Point';\nimport {CoreEntity} from '../../../core/geometry/Entity';\nimport {ParamType} from '../../poly/ParamType';\nimport {ParamValuesTypeMap} from '../types/ParamValuesTypeMap';\nimport {CoreObject} from '../../../core/geometry/Object';\n\n// type ParamTypeElem = ParamType;\ntype EntityCallback<T extends ParamType> = (\n\tentity: CoreEntity,\n\tvalue: ParamValuesTypeMap[T] | any /*TODO: typescript: any is used here mostly to compile*/\n) => void;\ntype PointEntityCallback<T extends ParamType> = (\n\tentity: CorePoint,\n\tvalue: ParamValuesTypeMap[T] | any /*TODO: typescript: any is used here mostly to compile*/\n) => void;\ntype ObjectEntityCallback<T extends ParamType> = (\n\tentity: CoreObject,\n\tvalue: ParamValuesTypeMap[T] | any /*TODO: typescript: any is used here mostly to compile*/\n) => void;\n\nexport class ExpressionController<T extends ParamType> {\n\tprotected _expression: string | undefined;\n\tprotected _entities: CoreEntity[] | undefined;\n\tprotected _entity_callback: EntityCallback<T> | undefined;\n\tprotected _manager: ExpressionManager | undefined;\n\t// private _reset_bound = this.reset.bind(this);\n\tconstructor(protected param: BaseParamType) {\n\t\t// this.param.dirty_controller.add_post_dirty_hook('expression_controller_reset', this._reset_bound);\n\t}\n\t// remove_dirty_hook() {\n\t// \t// this.param.dirty_controller.remove_post_dirty_hook('expression_controller_reset');\n\t// }\n\n\tget active() {\n\t\treturn this._expression != null;\n\t}\n\tget expression() {\n\t\treturn this._expression;\n\t}\n\tget is_errored() {\n\t\tif (this._manager) {\n\t\t\treturn this._manager.is_errored;\n\t\t}\n\t\treturn false;\n\t}\n\tget error_message() {\n\t\tif (this._manager) {\n\t\t\treturn this._manager.error_message;\n\t\t}\n\t\treturn null;\n\t}\n\tget requires_entities() {\n\t\treturn this.param.options.is_expression_for_entities;\n\t}\n\t// private reset() {\n\t// \tthis._manager?.clear_error();\n\t// }\n\n\tset_expression(expression: string | undefined, set_dirty: boolean = true) {\n\t\tthis.param.scene.missing_expression_references_controller.deregister_param(this.param);\n\t\tthis.param.scene.expressions_controller.deregister_param(this.param);\n\n\t\tif (this._expression != expression) {\n\t\t\tthis._expression = expression;\n\n\t\t\tif (this._expression) {\n\t\t\t\tthis._manager = this._manager || new ExpressionManager(this.param);\n\t\t\t\tthis._manager.parse_expression(this._expression);\n\t\t\t} else {\n\t\t\t\tthis._manager?.reset();\n\t\t\t}\n\n\t\t\tif (set_dirty) {\n\t\t\t\tthis.param.set_dirty();\n\t\t\t}\n\t\t}\n\t}\n\n\tupdate_from_method_dependency_name_change() {\n\t\tif (this._manager && this.active) {\n\t\t\tthis._manager.update_from_method_dependency_name_change();\n\t\t}\n\t}\n\n\tasync compute_expression() {\n\t\tif (this._manager && this.active) {\n\t\t\tconst result = await this._manager.compute_function();\n\t\t\treturn result;\n\t\t}\n\t}\n\tprivate async compute_expression_for_entities(entities: CoreEntity[], callback: EntityCallback<T>) {\n\t\tthis.set_entities(entities, callback);\n\t\tawait this.compute_expression();\n\t\tif (this._manager?.error_message) {\n\t\t\tthis.param.node.states.error.set(`expression evalution error: ${this._manager?.error_message}`);\n\t\t}\n\n\t\tthis.reset_entities();\n\t}\n\tcompute_expression_for_points(entities: CorePoint[], callback: PointEntityCallback<T>) {\n\t\treturn this.compute_expression_for_entities(entities, callback as EntityCallback<T>);\n\t}\n\tcompute_expression_for_objects(entities: CoreObject[], callback: ObjectEntityCallback<T>) {\n\t\treturn this.compute_expression_for_entities(entities, callback as EntityCallback<T>);\n\t}\n\tget entities() {\n\t\treturn this._entities;\n\t}\n\tget entity_callback() {\n\t\treturn this._entity_callback;\n\t}\n\tset_entities(entities: CoreEntity[], callback: EntityCallback<T>) {\n\t\tthis._entities = entities;\n\t\tthis._entity_callback = callback;\n\t}\n\treset_entities() {\n\t\tthis._entities = undefined;\n\t\tthis._entity_callback = undefined;\n\t}\n}\n","import {BaseEventsController} from './_BaseEventsController';\nimport {MouseEventNode} from '../../../nodes/event/MouseEvent';\n\n// https://developer.mozilla.org/en-US/docs/Web/Events\nenum MouseEventType {\n\tauxclick = 'auxclick',\n\tclick = 'click',\n\tcontextmenu = 'contextmenu',\n\tdblclick = 'dblclick',\n\tmousedown = 'mousedown',\n\tmouseenter = 'mouseenter',\n\tmouseleave = 'mouseleave',\n\tmousemove = 'mousemove',\n\tmouseover = 'mouseover',\n\tmouseout = 'mouseout',\n\tmouseup = 'mouseup',\n\tpointerlockchange = 'pointerlockchange',\n\tpointerlockerror = 'pointerlockerror',\n\tselect = 'select',\n\twheel = 'wheel',\n}\nexport const ACCEPTED_MOUSE_EVENT_TYPES: MouseEventType[] = [\n\tMouseEventType.auxclick,\n\tMouseEventType.click,\n\tMouseEventType.contextmenu,\n\tMouseEventType.dblclick,\n\tMouseEventType.mousedown,\n\tMouseEventType.mouseenter,\n\tMouseEventType.mouseleave,\n\tMouseEventType.mousemove,\n\tMouseEventType.mouseover,\n\tMouseEventType.mouseout,\n\tMouseEventType.mouseup,\n\tMouseEventType.pointerlockchange,\n\tMouseEventType.pointerlockerror,\n\tMouseEventType.select,\n\tMouseEventType.wheel,\n];\n\nexport class MouseEventsController extends BaseEventsController<MouseEvent, MouseEventNode> {\n\taccepts_event(event: MouseEvent) {\n\t\treturn ACCEPTED_MOUSE_EVENT_TYPES.includes(event.type as MouseEventType);\n\t}\n}\n","import {BaseEventNodeType} from '../../../nodes/event/_Base';\nimport {BaseCameraObjNodeType} from '../../../nodes/obj/_BaseCamera';\nexport abstract class BaseEventsController<E extends Event, T extends BaseEventNodeType> {\n\tprotected _nodes_by_graph_node_id: Map<string, T> = new Map();\n\tregister_node(node: T) {\n\t\tthis._nodes_by_graph_node_id.set(node.graph_node_id, node);\n\t}\n\tunregister_node(node: T) {\n\t\tthis._nodes_by_graph_node_id.delete(node.graph_node_id);\n\t}\n\tabstract accepts_event(event: Event): boolean;\n\tprocess(event: E, canvas: HTMLCanvasElement, camera_node: BaseCameraObjNodeType) {\n\t\tthis._nodes_by_graph_node_id.forEach((node) => node.process_event(event, canvas, camera_node));\n\t}\n}\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author szimek / https://github.com/szimek/\n */\n\nvar _canvas;\n\nvar ImageUtils = {\n\n\tgetDataURL: function ( image ) {\n\n\t\tvar canvas;\n\n\t\tif ( typeof HTMLCanvasElement == 'undefined' ) {\n\n\t\t\treturn image.src;\n\n\t\t} else if ( image instanceof HTMLCanvasElement ) {\n\n\t\t\tcanvas = image;\n\n\t\t} else {\n\n\t\t\tif ( _canvas === undefined ) _canvas = document.createElementNS( 'http://www.w3.org/1999/xhtml', 'canvas' );\n\n\t\t\t_canvas.width = image.width;\n\t\t\t_canvas.height = image.height;\n\n\t\t\tvar context = _canvas.getContext( '2d' );\n\n\t\t\tif ( image instanceof ImageData ) {\n\n\t\t\t\tcontext.putImageData( image, 0, 0 );\n\n\t\t\t} else {\n\n\t\t\t\tcontext.drawImage( image, 0, 0, image.width, image.height );\n\n\t\t\t}\n\n\t\t\tcanvas = _canvas;\n\n\t\t}\n\n\t\tif ( canvas.width > 2048 || canvas.height > 2048 ) {\n\n\t\t\treturn canvas.toDataURL( 'image/jpeg', 0.6 );\n\n\t\t} else {\n\n\t\t\treturn canvas.toDataURL( 'image/png' );\n\n\t\t}\n\n\t}\n\n};\n\nexport { ImageUtils };\n","/**\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author szimek / https://github.com/szimek/\n */\n\nimport { EventDispatcher } from '../core/EventDispatcher.js';\nimport {\n\tMirroredRepeatWrapping,\n\tClampToEdgeWrapping,\n\tRepeatWrapping,\n\tLinearEncoding,\n\tUnsignedByteType,\n\tRGBAFormat,\n\tLinearMipmapLinearFilter,\n\tLinearFilter,\n\tUVMapping\n} from '../constants.js';\nimport { MathUtils } from '../math/MathUtils.js';\nimport { Vector2 } from '../math/Vector2.js';\nimport { Matrix3 } from '../math/Matrix3.js';\nimport { ImageUtils } from '../extras/ImageUtils.js';\n\nvar textureId = 0;\n\nfunction Texture( image, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding ) {\n\n\tObject.defineProperty( this, 'id', { value: textureId ++ } );\n\n\tthis.uuid = MathUtils.generateUUID();\n\n\tthis.name = '';\n\n\tthis.image = image !== undefined ? image : Texture.DEFAULT_IMAGE;\n\tthis.mipmaps = [];\n\n\tthis.mapping = mapping !== undefined ? mapping : Texture.DEFAULT_MAPPING;\n\n\tthis.wrapS = wrapS !== undefined ? wrapS : ClampToEdgeWrapping;\n\tthis.wrapT = wrapT !== undefined ? wrapT : ClampToEdgeWrapping;\n\n\tthis.magFilter = magFilter !== undefined ? magFilter : LinearFilter;\n\tthis.minFilter = minFilter !== undefined ? minFilter : LinearMipmapLinearFilter;\n\n\tthis.anisotropy = anisotropy !== undefined ? anisotropy : 1;\n\n\tthis.format = format !== undefined ? format : RGBAFormat;\n\tthis.internalFormat = null;\n\tthis.type = type !== undefined ? type : UnsignedByteType;\n\n\tthis.offset = new Vector2( 0, 0 );\n\tthis.repeat = new Vector2( 1, 1 );\n\tthis.center = new Vector2( 0, 0 );\n\tthis.rotation = 0;\n\n\tthis.matrixAutoUpdate = true;\n\tthis.matrix = new Matrix3();\n\n\tthis.generateMipmaps = true;\n\tthis.premultiplyAlpha = false;\n\tthis.flipY = true;\n\tthis.unpackAlignment = 4;\t// valid values: 1, 2, 4, 8 (see http://www.khronos.org/opengles/sdk/docs/man/xhtml/glPixelStorei.xml)\n\n\t// Values of encoding !== THREE.LinearEncoding only supported on map, envMap and emissiveMap.\n\t//\n\t// Also changing the encoding after already used by a Material will not automatically make the Material\n\t// update. You need to explicitly call Material.needsUpdate to trigger it to recompile.\n\tthis.encoding = encoding !== undefined ? encoding : LinearEncoding;\n\n\tthis.version = 0;\n\tthis.onUpdate = null;\n\n}\n\nTexture.DEFAULT_IMAGE = undefined;\nTexture.DEFAULT_MAPPING = UVMapping;\n\nTexture.prototype = Object.assign( Object.create( EventDispatcher.prototype ), {\n\n\tconstructor: Texture,\n\n\tisTexture: true,\n\n\tupdateMatrix: function () {\n\n\t\tthis.matrix.setUvTransform( this.offset.x, this.offset.y, this.repeat.x, this.repeat.y, this.rotation, this.center.x, this.center.y );\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( source ) {\n\n\t\tthis.name = source.name;\n\n\t\tthis.image = source.image;\n\t\tthis.mipmaps = source.mipmaps.slice( 0 );\n\n\t\tthis.mapping = source.mapping;\n\n\t\tthis.wrapS = source.wrapS;\n\t\tthis.wrapT = source.wrapT;\n\n\t\tthis.magFilter = source.magFilter;\n\t\tthis.minFilter = source.minFilter;\n\n\t\tthis.anisotropy = source.anisotropy;\n\n\t\tthis.format = source.format;\n\t\tthis.internalFormat = source.internalFormat;\n\t\tthis.type = source.type;\n\n\t\tthis.offset.copy( source.offset );\n\t\tthis.repeat.copy( source.repeat );\n\t\tthis.center.copy( source.center );\n\t\tthis.rotation = source.rotation;\n\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\t\tthis.matrix.copy( source.matrix );\n\n\t\tthis.generateMipmaps = source.generateMipmaps;\n\t\tthis.premultiplyAlpha = source.premultiplyAlpha;\n\t\tthis.flipY = source.flipY;\n\t\tthis.unpackAlignment = source.unpackAlignment;\n\t\tthis.encoding = source.encoding;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar isRootObject = ( meta === undefined || typeof meta === 'string' );\n\n\t\tif ( ! isRootObject && meta.textures[ this.uuid ] !== undefined ) {\n\n\t\t\treturn meta.textures[ this.uuid ];\n\n\t\t}\n\n\t\tvar output = {\n\n\t\t\tmetadata: {\n\t\t\t\tversion: 4.5,\n\t\t\t\ttype: 'Texture',\n\t\t\t\tgenerator: 'Texture.toJSON'\n\t\t\t},\n\n\t\t\tuuid: this.uuid,\n\t\t\tname: this.name,\n\n\t\t\tmapping: this.mapping,\n\n\t\t\trepeat: [ this.repeat.x, this.repeat.y ],\n\t\t\toffset: [ this.offset.x, this.offset.y ],\n\t\t\tcenter: [ this.center.x, this.center.y ],\n\t\t\trotation: this.rotation,\n\n\t\t\twrap: [ this.wrapS, this.wrapT ],\n\n\t\t\tformat: this.format,\n\t\t\ttype: this.type,\n\t\t\tencoding: this.encoding,\n\n\t\t\tminFilter: this.minFilter,\n\t\t\tmagFilter: this.magFilter,\n\t\t\tanisotropy: this.anisotropy,\n\n\t\t\tflipY: this.flipY,\n\n\t\t\tpremultiplyAlpha: this.premultiplyAlpha,\n\t\t\tunpackAlignment: this.unpackAlignment\n\n\t\t};\n\n\t\tif ( this.image !== undefined ) {\n\n\t\t\t// TODO: Move to THREE.Image\n\n\t\t\tvar image = this.image;\n\n\t\t\tif ( image.uuid === undefined ) {\n\n\t\t\t\timage.uuid = MathUtils.generateUUID(); // UGH\n\n\t\t\t}\n\n\t\t\tif ( ! isRootObject && meta.images[ image.uuid ] === undefined ) {\n\n\t\t\t\tvar url;\n\n\t\t\t\tif ( Array.isArray( image ) ) {\n\n\t\t\t\t\t// process array of images e.g. CubeTexture\n\n\t\t\t\t\turl = [];\n\n\t\t\t\t\tfor ( var i = 0, l = image.length; i < l; i ++ ) {\n\n\t\t\t\t\t\turl.push( ImageUtils.getDataURL( image[ i ] ) );\n\n\t\t\t\t\t}\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// process single image\n\n\t\t\t\t\turl = ImageUtils.getDataURL( image );\n\n\t\t\t\t}\n\n\t\t\t\tmeta.images[ image.uuid ] = {\n\t\t\t\t\tuuid: image.uuid,\n\t\t\t\t\turl: url\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\toutput.image = image.uuid;\n\n\t\t}\n\n\t\tif ( ! isRootObject ) {\n\n\t\t\tmeta.textures[ this.uuid ] = output;\n\n\t\t}\n\n\t\treturn output;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t},\n\n\ttransformUv: function ( uv ) {\n\n\t\tif ( this.mapping !== UVMapping ) return uv;\n\n\t\tuv.applyMatrix3( this.matrix );\n\n\t\tif ( uv.x < 0 || uv.x > 1 ) {\n\n\t\t\tswitch ( this.wrapS ) {\n\n\t\t\t\tcase RepeatWrapping:\n\n\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ClampToEdgeWrapping:\n\n\t\t\t\t\tuv.x = uv.x < 0 ? 0 : 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MirroredRepeatWrapping:\n\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.x ) % 2 ) === 1 ) {\n\n\t\t\t\t\t\tuv.x = Math.ceil( uv.x ) - uv.x;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tuv.x = uv.x - Math.floor( uv.x );\n\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( uv.y < 0 || uv.y > 1 ) {\n\n\t\t\tswitch ( this.wrapT ) {\n\n\t\t\t\tcase RepeatWrapping:\n\n\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase ClampToEdgeWrapping:\n\n\t\t\t\t\tuv.y = uv.y < 0 ? 0 : 1;\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase MirroredRepeatWrapping:\n\n\t\t\t\t\tif ( Math.abs( Math.floor( uv.y ) % 2 ) === 1 ) {\n\n\t\t\t\t\t\tuv.y = Math.ceil( uv.y ) - uv.y;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\tuv.y = uv.y - Math.floor( uv.y );\n\n\t\t\t\t\t}\n\t\t\t\t\tbreak;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.flipY ) {\n\n\t\t\tuv.y = 1 - uv.y;\n\n\t\t}\n\n\t\treturn uv;\n\n\t}\n\n} );\n\nObject.defineProperty( Texture.prototype, \"needsUpdate\", {\n\n\tset: function ( value ) {\n\n\t\tif ( value === true ) this.version ++;\n\n\t}\n\n} );\n\n\nexport { Texture };\n","var identity = require('./identity'),\n    overRest = require('./_overRest'),\n    setToString = require('./_setToString');\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\nmodule.exports = baseRest;\n","var ListCache = require('./_ListCache'),\n    stackClear = require('./_stackClear'),\n    stackDelete = require('./_stackDelete'),\n    stackGet = require('./_stackGet'),\n    stackHas = require('./_stackHas'),\n    stackSet = require('./_stackSet');\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  var data = this.__data__ = new ListCache(entries);\n  this.size = data.size;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\nmodule.exports = Stack;\n","var defineProperty = require('./_defineProperty');\n\n/**\n * The base implementation of `assignValue` and `assignMergeValue` without\n * value checks.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction baseAssignValue(object, key, value) {\n  if (key == '__proto__' && defineProperty) {\n    defineProperty(object, key, {\n      'configurable': true,\n      'enumerable': true,\n      'value': value,\n      'writable': true\n    });\n  } else {\n    object[key] = value;\n  }\n}\n\nmodule.exports = baseAssignValue;\n","var overArg = require('./_overArg');\n\n/** Built-in value references. */\nvar getPrototype = overArg(Object.getPrototypeOf, Object);\n\nmodule.exports = getPrototype;\n","var MapCache = require('./_MapCache'),\n    setCacheAdd = require('./_setCacheAdd'),\n    setCacheHas = require('./_setCacheHas');\n\n/**\n *\n * Creates an array cache object to store unique values.\n *\n * @private\n * @constructor\n * @param {Array} [values] The values to cache.\n */\nfunction SetCache(values) {\n  var index = -1,\n      length = values == null ? 0 : values.length;\n\n  this.__data__ = new MapCache;\n  while (++index < length) {\n    this.add(values[index]);\n  }\n}\n\n// Add methods to `SetCache`.\nSetCache.prototype.add = SetCache.prototype.push = setCacheAdd;\nSetCache.prototype.has = setCacheHas;\n\nmodule.exports = SetCache;\n","/**\n * Checks if a `cache` value for `key` exists.\n *\n * @private\n * @param {Object} cache The cache to query.\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction cacheHas(cache, key) {\n  return cache.has(key);\n}\n\nmodule.exports = cacheHas;\n","/**\n * Abstract base class of interpolants over parametric samples.\n *\n * The parameter domain is one dimensional, typically the time or a path\n * along a curve defined by the data.\n *\n * The sample values can have any dimensionality and derived classes may\n * apply special interpretations to the data.\n *\n * This class provides the interval seek in a Template Method, deferring\n * the actual interpolation to derived classes.\n *\n * Time complexity is O(1) for linear access crossing at most two points\n * and O(log N) for random access, where N is the number of positions.\n *\n * References:\n *\n * \t\thttp://www.oodesign.com/template-method-pattern.html\n *\n * @author tschw\n */\n\nfunction Interpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tthis.parameterPositions = parameterPositions;\n\tthis._cachedIndex = 0;\n\n\tthis.resultBuffer = resultBuffer !== undefined ?\n\t\tresultBuffer : new sampleValues.constructor( sampleSize );\n\tthis.sampleValues = sampleValues;\n\tthis.valueSize = sampleSize;\n\n}\n\nObject.assign( Interpolant.prototype, {\n\n\tevaluate: function ( t ) {\n\n\t\tvar pp = this.parameterPositions,\n\t\t\ti1 = this._cachedIndex,\n\n\t\t\tt1 = pp[ i1 ],\n\t\t\tt0 = pp[ i1 - 1 ];\n\n\t\tvalidate_interval: {\n\n\t\t\tseek: {\n\n\t\t\t\tvar right;\n\n\t\t\t\tlinear_scan: {\n\n\t\t\t\t\t//- See http://jsperf.com/comparison-to-undefined/3\n\t\t\t\t\t//- slower code:\n\t\t\t\t\t//-\n\t\t\t\t\t//- \t\t\t\tif ( t >= t1 || t1 === undefined ) {\n\t\t\t\t\tforward_scan: if ( ! ( t < t1 ) ) {\n\n\t\t\t\t\t\tfor ( var giveUpAt = i1 + 2; ; ) {\n\n\t\t\t\t\t\t\tif ( t1 === undefined ) {\n\n\t\t\t\t\t\t\t\tif ( t < t0 ) break forward_scan;\n\n\t\t\t\t\t\t\t\t// after end\n\n\t\t\t\t\t\t\t\ti1 = pp.length;\n\t\t\t\t\t\t\t\tthis._cachedIndex = i1;\n\t\t\t\t\t\t\t\treturn this.afterEnd_( i1 - 1, t, t0 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\n\n\t\t\t\t\t\t\tt0 = t1;\n\t\t\t\t\t\t\tt1 = pp[ ++ i1 ];\n\n\t\t\t\t\t\t\tif ( t < t1 ) {\n\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\n\t\t\t\t\t\t\t\tbreak seek;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// prepare binary search on the right side of the index\n\t\t\t\t\t\tright = pp.length;\n\t\t\t\t\t\tbreak linear_scan;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t//- slower code:\n\t\t\t\t\t//-\t\t\t\t\tif ( t < t0 || t0 === undefined ) {\n\t\t\t\t\tif ( ! ( t >= t0 ) ) {\n\n\t\t\t\t\t\t// looping?\n\n\t\t\t\t\t\tvar t1global = pp[ 1 ];\n\n\t\t\t\t\t\tif ( t < t1global ) {\n\n\t\t\t\t\t\t\ti1 = 2; // + 1, using the scan for the details\n\t\t\t\t\t\t\tt0 = t1global;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// linear reverse scan\n\n\t\t\t\t\t\tfor ( var giveUpAt = i1 - 2; ; ) {\n\n\t\t\t\t\t\t\tif ( t0 === undefined ) {\n\n\t\t\t\t\t\t\t\t// before start\n\n\t\t\t\t\t\t\t\tthis._cachedIndex = 0;\n\t\t\t\t\t\t\t\treturn this.beforeStart_( 0, t, t1 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif ( i1 === giveUpAt ) break; // this loop\n\n\t\t\t\t\t\t\tt1 = t0;\n\t\t\t\t\t\t\tt0 = pp[ -- i1 - 1 ];\n\n\t\t\t\t\t\t\tif ( t >= t0 ) {\n\n\t\t\t\t\t\t\t\t// we have arrived at the sought interval\n\t\t\t\t\t\t\t\tbreak seek;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// prepare binary search on the left side of the index\n\t\t\t\t\t\tright = i1;\n\t\t\t\t\t\ti1 = 0;\n\t\t\t\t\t\tbreak linear_scan;\n\n\t\t\t\t\t}\n\n\t\t\t\t\t// the interval is valid\n\n\t\t\t\t\tbreak validate_interval;\n\n\t\t\t\t} // linear scan\n\n\t\t\t\t// binary search\n\n\t\t\t\twhile ( i1 < right ) {\n\n\t\t\t\t\tvar mid = ( i1 + right ) >>> 1;\n\n\t\t\t\t\tif ( t < pp[ mid ] ) {\n\n\t\t\t\t\t\tright = mid;\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\ti1 = mid + 1;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tt1 = pp[ i1 ];\n\t\t\t\tt0 = pp[ i1 - 1 ];\n\n\t\t\t\t// check boundary cases, again\n\n\t\t\t\tif ( t0 === undefined ) {\n\n\t\t\t\t\tthis._cachedIndex = 0;\n\t\t\t\t\treturn this.beforeStart_( 0, t, t1 );\n\n\t\t\t\t}\n\n\t\t\t\tif ( t1 === undefined ) {\n\n\t\t\t\t\ti1 = pp.length;\n\t\t\t\t\tthis._cachedIndex = i1;\n\t\t\t\t\treturn this.afterEnd_( i1 - 1, t0, t );\n\n\t\t\t\t}\n\n\t\t\t} // seek\n\n\t\t\tthis._cachedIndex = i1;\n\n\t\t\tthis.intervalChanged_( i1, t0, t1 );\n\n\t\t} // validate_interval\n\n\t\treturn this.interpolate_( i1, t0, t, t1 );\n\n\t},\n\n\tsettings: null, // optional, subclass-specific settings structure\n\t// Note: The indirection allows central control of many interpolants.\n\n\t// --- Protected interface\n\n\tDefaultSettings_: {},\n\n\tgetSettings_: function () {\n\n\t\treturn this.settings || this.DefaultSettings_;\n\n\t},\n\n\tcopySampleValue_: function ( index ) {\n\n\t\t// copies a sample value to the result buffer\n\n\t\tvar result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\t\t\toffset = index * stride;\n\n\t\tfor ( var i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] = values[ offset + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t},\n\n\t// Template methods for derived classes:\n\n\tinterpolate_: function ( /* i1, t0, t, t1 */ ) {\n\n\t\tthrow new Error( 'call to abstract method' );\n\t\t// implementations shall return this.resultBuffer\n\n\t},\n\n\tintervalChanged_: function ( /* i1, t0, t1 */ ) {\n\n\t\t// empty\n\n\t}\n\n} );\n\n// DECLARE ALIAS AFTER assign prototype\nObject.assign( Interpolant.prototype, {\n\n\t//( 0, t, t0 ), returns this.resultBuffer\n\tbeforeStart_: Interpolant.prototype.copySampleValue_,\n\n\t//( N-1, tN-1, t ), returns this.resultBuffer\n\tafterEnd_: Interpolant.prototype.copySampleValue_,\n\n} );\n\n\nexport { Interpolant };\n","module.exports = require('./forEach');\n","\"use strict\";\n\nvar _ = require(\"./lodash\");\n\nmodule.exports = Graph;\n\nvar DEFAULT_EDGE_NAME = \"\\x00\";\nvar GRAPH_NODE = \"\\x00\";\nvar EDGE_KEY_DELIM = \"\\x01\";\n\n// Implementation notes:\n//\n//  * Node id query functions should return string ids for the nodes\n//  * Edge id query functions should return an \"edgeObj\", edge object, that is\n//    composed of enough information to uniquely identify an edge: {v, w, name}.\n//  * Internally we use an \"edgeId\", a stringified form of the edgeObj, to\n//    reference edges. This is because we need a performant way to look these\n//    edges up and, object properties, which have string keys, are the closest\n//    we're going to get to a performant hashtable in JavaScript.\n\nfunction Graph(opts) {\n  this._isDirected = _.has(opts, \"directed\") ? opts.directed : true;\n  this._isMultigraph = _.has(opts, \"multigraph\") ? opts.multigraph : false;\n  this._isCompound = _.has(opts, \"compound\") ? opts.compound : false;\n\n  // Label for the graph itself\n  this._label = undefined;\n\n  // Defaults to be set when creating a new node\n  this._defaultNodeLabelFn = _.constant(undefined);\n\n  // Defaults to be set when creating a new edge\n  this._defaultEdgeLabelFn = _.constant(undefined);\n\n  // v -> label\n  this._nodes = {};\n\n  if (this._isCompound) {\n    // v -> parent\n    this._parent = {};\n\n    // v -> children\n    this._children = {};\n    this._children[GRAPH_NODE] = {};\n  }\n\n  // v -> edgeObj\n  this._in = {};\n\n  // u -> v -> Number\n  this._preds = {};\n\n  // v -> edgeObj\n  this._out = {};\n\n  // v -> w -> Number\n  this._sucs = {};\n\n  // e -> edgeObj\n  this._edgeObjs = {};\n\n  // e -> label\n  this._edgeLabels = {};\n}\n\n/* Number of nodes in the graph. Should only be changed by the implementation. */\nGraph.prototype._nodeCount = 0;\n\n/* Number of edges in the graph. Should only be changed by the implementation. */\nGraph.prototype._edgeCount = 0;\n\n\n/* === Graph functions ========= */\n\nGraph.prototype.isDirected = function() {\n  return this._isDirected;\n};\n\nGraph.prototype.isMultigraph = function() {\n  return this._isMultigraph;\n};\n\nGraph.prototype.isCompound = function() {\n  return this._isCompound;\n};\n\nGraph.prototype.setGraph = function(label) {\n  this._label = label;\n  return this;\n};\n\nGraph.prototype.graph = function() {\n  return this._label;\n};\n\n\n/* === Node functions ========== */\n\nGraph.prototype.setDefaultNodeLabel = function(newDefault) {\n  if (!_.isFunction(newDefault)) {\n    newDefault = _.constant(newDefault);\n  }\n  this._defaultNodeLabelFn = newDefault;\n  return this;\n};\n\nGraph.prototype.nodeCount = function() {\n  return this._nodeCount;\n};\n\nGraph.prototype.nodes = function() {\n  return _.keys(this._nodes);\n};\n\nGraph.prototype.sources = function() {\n  var self = this;\n  return _.filter(this.nodes(), function(v) {\n    return _.isEmpty(self._in[v]);\n  });\n};\n\nGraph.prototype.sinks = function() {\n  var self = this;\n  return _.filter(this.nodes(), function(v) {\n    return _.isEmpty(self._out[v]);\n  });\n};\n\nGraph.prototype.setNodes = function(vs, value) {\n  var args = arguments;\n  var self = this;\n  _.each(vs, function(v) {\n    if (args.length > 1) {\n      self.setNode(v, value);\n    } else {\n      self.setNode(v);\n    }\n  });\n  return this;\n};\n\nGraph.prototype.setNode = function(v, value) {\n  if (_.has(this._nodes, v)) {\n    if (arguments.length > 1) {\n      this._nodes[v] = value;\n    }\n    return this;\n  }\n\n  this._nodes[v] = arguments.length > 1 ? value : this._defaultNodeLabelFn(v);\n  if (this._isCompound) {\n    this._parent[v] = GRAPH_NODE;\n    this._children[v] = {};\n    this._children[GRAPH_NODE][v] = true;\n  }\n  this._in[v] = {};\n  this._preds[v] = {};\n  this._out[v] = {};\n  this._sucs[v] = {};\n  ++this._nodeCount;\n  return this;\n};\n\nGraph.prototype.node = function(v) {\n  return this._nodes[v];\n};\n\nGraph.prototype.hasNode = function(v) {\n  return _.has(this._nodes, v);\n};\n\nGraph.prototype.removeNode =  function(v) {\n  var self = this;\n  if (_.has(this._nodes, v)) {\n    var removeEdge = function(e) { self.removeEdge(self._edgeObjs[e]); };\n    delete this._nodes[v];\n    if (this._isCompound) {\n      this._removeFromParentsChildList(v);\n      delete this._parent[v];\n      _.each(this.children(v), function(child) {\n        self.setParent(child);\n      });\n      delete this._children[v];\n    }\n    _.each(_.keys(this._in[v]), removeEdge);\n    delete this._in[v];\n    delete this._preds[v];\n    _.each(_.keys(this._out[v]), removeEdge);\n    delete this._out[v];\n    delete this._sucs[v];\n    --this._nodeCount;\n  }\n  return this;\n};\n\nGraph.prototype.setParent = function(v, parent) {\n  if (!this._isCompound) {\n    throw new Error(\"Cannot set parent in a non-compound graph\");\n  }\n\n  if (_.isUndefined(parent)) {\n    parent = GRAPH_NODE;\n  } else {\n    // Coerce parent to string\n    parent += \"\";\n    for (var ancestor = parent;\n      !_.isUndefined(ancestor);\n      ancestor = this.parent(ancestor)) {\n      if (ancestor === v) {\n        throw new Error(\"Setting \" + parent+ \" as parent of \" + v +\n                        \" would create a cycle\");\n      }\n    }\n\n    this.setNode(parent);\n  }\n\n  this.setNode(v);\n  this._removeFromParentsChildList(v);\n  this._parent[v] = parent;\n  this._children[parent][v] = true;\n  return this;\n};\n\nGraph.prototype._removeFromParentsChildList = function(v) {\n  delete this._children[this._parent[v]][v];\n};\n\nGraph.prototype.parent = function(v) {\n  if (this._isCompound) {\n    var parent = this._parent[v];\n    if (parent !== GRAPH_NODE) {\n      return parent;\n    }\n  }\n};\n\nGraph.prototype.children = function(v) {\n  if (_.isUndefined(v)) {\n    v = GRAPH_NODE;\n  }\n\n  if (this._isCompound) {\n    var children = this._children[v];\n    if (children) {\n      return _.keys(children);\n    }\n  } else if (v === GRAPH_NODE) {\n    return this.nodes();\n  } else if (this.hasNode(v)) {\n    return [];\n  }\n};\n\nGraph.prototype.predecessors = function(v) {\n  var predsV = this._preds[v];\n  if (predsV) {\n    return _.keys(predsV);\n  }\n};\n\nGraph.prototype.successors = function(v) {\n  var sucsV = this._sucs[v];\n  if (sucsV) {\n    return _.keys(sucsV);\n  }\n};\n\nGraph.prototype.neighbors = function(v) {\n  var preds = this.predecessors(v);\n  if (preds) {\n    return _.union(preds, this.successors(v));\n  }\n};\n\nGraph.prototype.isLeaf = function (v) {\n  var neighbors;\n  if (this.isDirected()) {\n    neighbors = this.successors(v);\n  } else {\n    neighbors = this.neighbors(v);\n  }\n  return neighbors.length === 0;\n};\n\nGraph.prototype.filterNodes = function(filter) {\n  var copy = new this.constructor({\n    directed: this._isDirected,\n    multigraph: this._isMultigraph,\n    compound: this._isCompound\n  });\n\n  copy.setGraph(this.graph());\n\n  var self = this;\n  _.each(this._nodes, function(value, v) {\n    if (filter(v)) {\n      copy.setNode(v, value);\n    }\n  });\n\n  _.each(this._edgeObjs, function(e) {\n    if (copy.hasNode(e.v) && copy.hasNode(e.w)) {\n      copy.setEdge(e, self.edge(e));\n    }\n  });\n\n  var parents = {};\n  function findParent(v) {\n    var parent = self.parent(v);\n    if (parent === undefined || copy.hasNode(parent)) {\n      parents[v] = parent;\n      return parent;\n    } else if (parent in parents) {\n      return parents[parent];\n    } else {\n      return findParent(parent);\n    }\n  }\n\n  if (this._isCompound) {\n    _.each(copy.nodes(), function(v) {\n      copy.setParent(v, findParent(v));\n    });\n  }\n\n  return copy;\n};\n\n/* === Edge functions ========== */\n\nGraph.prototype.setDefaultEdgeLabel = function(newDefault) {\n  if (!_.isFunction(newDefault)) {\n    newDefault = _.constant(newDefault);\n  }\n  this._defaultEdgeLabelFn = newDefault;\n  return this;\n};\n\nGraph.prototype.edgeCount = function() {\n  return this._edgeCount;\n};\n\nGraph.prototype.edges = function() {\n  return _.values(this._edgeObjs);\n};\n\nGraph.prototype.setPath = function(vs, value) {\n  var self = this;\n  var args = arguments;\n  _.reduce(vs, function(v, w) {\n    if (args.length > 1) {\n      self.setEdge(v, w, value);\n    } else {\n      self.setEdge(v, w);\n    }\n    return w;\n  });\n  return this;\n};\n\n/*\n * setEdge(v, w, [value, [name]])\n * setEdge({ v, w, [name] }, [value])\n */\nGraph.prototype.setEdge = function() {\n  var v, w, name, value;\n  var valueSpecified = false;\n  var arg0 = arguments[0];\n\n  if (typeof arg0 === \"object\" && arg0 !== null && \"v\" in arg0) {\n    v = arg0.v;\n    w = arg0.w;\n    name = arg0.name;\n    if (arguments.length === 2) {\n      value = arguments[1];\n      valueSpecified = true;\n    }\n  } else {\n    v = arg0;\n    w = arguments[1];\n    name = arguments[3];\n    if (arguments.length > 2) {\n      value = arguments[2];\n      valueSpecified = true;\n    }\n  }\n\n  v = \"\" + v;\n  w = \"\" + w;\n  if (!_.isUndefined(name)) {\n    name = \"\" + name;\n  }\n\n  var e = edgeArgsToId(this._isDirected, v, w, name);\n  if (_.has(this._edgeLabels, e)) {\n    if (valueSpecified) {\n      this._edgeLabels[e] = value;\n    }\n    return this;\n  }\n\n  if (!_.isUndefined(name) && !this._isMultigraph) {\n    throw new Error(\"Cannot set a named edge when isMultigraph = false\");\n  }\n\n  // It didn't exist, so we need to create it.\n  // First ensure the nodes exist.\n  this.setNode(v);\n  this.setNode(w);\n\n  this._edgeLabels[e] = valueSpecified ? value : this._defaultEdgeLabelFn(v, w, name);\n\n  var edgeObj = edgeArgsToObj(this._isDirected, v, w, name);\n  // Ensure we add undirected edges in a consistent way.\n  v = edgeObj.v;\n  w = edgeObj.w;\n\n  Object.freeze(edgeObj);\n  this._edgeObjs[e] = edgeObj;\n  incrementOrInitEntry(this._preds[w], v);\n  incrementOrInitEntry(this._sucs[v], w);\n  this._in[w][e] = edgeObj;\n  this._out[v][e] = edgeObj;\n  this._edgeCount++;\n  return this;\n};\n\nGraph.prototype.edge = function(v, w, name) {\n  var e = (arguments.length === 1\n    ? edgeObjToId(this._isDirected, arguments[0])\n    : edgeArgsToId(this._isDirected, v, w, name));\n  return this._edgeLabels[e];\n};\n\nGraph.prototype.hasEdge = function(v, w, name) {\n  var e = (arguments.length === 1\n    ? edgeObjToId(this._isDirected, arguments[0])\n    : edgeArgsToId(this._isDirected, v, w, name));\n  return _.has(this._edgeLabels, e);\n};\n\nGraph.prototype.removeEdge = function(v, w, name) {\n  var e = (arguments.length === 1\n    ? edgeObjToId(this._isDirected, arguments[0])\n    : edgeArgsToId(this._isDirected, v, w, name));\n  var edge = this._edgeObjs[e];\n  if (edge) {\n    v = edge.v;\n    w = edge.w;\n    delete this._edgeLabels[e];\n    delete this._edgeObjs[e];\n    decrementOrRemoveEntry(this._preds[w], v);\n    decrementOrRemoveEntry(this._sucs[v], w);\n    delete this._in[w][e];\n    delete this._out[v][e];\n    this._edgeCount--;\n  }\n  return this;\n};\n\nGraph.prototype.inEdges = function(v, u) {\n  var inV = this._in[v];\n  if (inV) {\n    var edges = _.values(inV);\n    if (!u) {\n      return edges;\n    }\n    return _.filter(edges, function(edge) { return edge.v === u; });\n  }\n};\n\nGraph.prototype.outEdges = function(v, w) {\n  var outV = this._out[v];\n  if (outV) {\n    var edges = _.values(outV);\n    if (!w) {\n      return edges;\n    }\n    return _.filter(edges, function(edge) { return edge.w === w; });\n  }\n};\n\nGraph.prototype.nodeEdges = function(v, w) {\n  var inEdges = this.inEdges(v, w);\n  if (inEdges) {\n    return inEdges.concat(this.outEdges(v, w));\n  }\n};\n\nfunction incrementOrInitEntry(map, k) {\n  if (map[k]) {\n    map[k]++;\n  } else {\n    map[k] = 1;\n  }\n}\n\nfunction decrementOrRemoveEntry(map, k) {\n  if (!--map[k]) { delete map[k]; }\n}\n\nfunction edgeArgsToId(isDirected, v_, w_, name) {\n  var v = \"\" + v_;\n  var w = \"\" + w_;\n  if (!isDirected && v > w) {\n    var tmp = v;\n    v = w;\n    w = tmp;\n  }\n  return v + EDGE_KEY_DELIM + w + EDGE_KEY_DELIM +\n             (_.isUndefined(name) ? DEFAULT_EDGE_NAME : name);\n}\n\nfunction edgeArgsToObj(isDirected, v_, w_, name) {\n  var v = \"\" + v_;\n  var w = \"\" + w_;\n  if (!isDirected && v > w) {\n    var tmp = v;\n    v = w;\n    w = tmp;\n  }\n  var edgeObj =  { v: v, w: w };\n  if (name) {\n    edgeObj.name = name;\n  }\n  return edgeObj;\n}\n\nfunction edgeObjToId(isDirected, edgeObj) {\n  return edgeArgsToId(isDirected, edgeObj.v, edgeObj.w, edgeObj.name);\n}\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Map = getNative(root, 'Map');\n\nmodule.exports = Map;\n","var mapCacheClear = require('./_mapCacheClear'),\n    mapCacheDelete = require('./_mapCacheDelete'),\n    mapCacheGet = require('./_mapCacheGet'),\n    mapCacheHas = require('./_mapCacheHas'),\n    mapCacheSet = require('./_mapCacheSet');\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\nmodule.exports = MapCache;\n","/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\nmodule.exports = arrayEach;\n","module.exports = function(module) {\n\tif (!module.webpackPolyfill) {\n\t\tmodule.deprecate = function() {};\n\t\tmodule.paths = [];\n\t\t// module.parent = undefined by default\n\t\tif (!module.children) module.children = [];\n\t\tObject.defineProperty(module, \"loaded\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.l;\n\t\t\t}\n\t\t});\n\t\tObject.defineProperty(module, \"id\", {\n\t\t\tenumerable: true,\n\t\t\tget: function() {\n\t\t\t\treturn module.i;\n\t\t\t}\n\t\t});\n\t\tmodule.webpackPolyfill = 1;\n\t}\n\treturn module;\n};\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nmodule.exports = isIndex;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nmodule.exports = isLength;\n","var freeGlobal = require('./_freeGlobal');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nmodule.exports = nodeUtil;\n","var isPrototype = require('./_isPrototype'),\n    nativeKeys = require('./_nativeKeys');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeys;\n","var arrayFilter = require('./_arrayFilter'),\n    stubArray = require('./stubArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = !nativeGetSymbols ? stubArray : function(object) {\n  if (object == null) {\n    return [];\n  }\n  object = Object(object);\n  return arrayFilter(nativeGetSymbols(object), function(symbol) {\n    return propertyIsEnumerable.call(object, symbol);\n  });\n};\n\nmodule.exports = getSymbols;\n","var Uint8Array = require('./_Uint8Array');\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\nmodule.exports = cloneArrayBuffer;\n","var baseIsEqualDeep = require('./_baseIsEqualDeep'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * The base implementation of `_.isEqual` which supports partial comparisons\n * and tracks traversed objects.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Unordered comparison\n *  2 - Partial comparison\n * @param {Function} [customizer] The function to customize comparisons.\n * @param {Object} [stack] Tracks traversed `value` and `other` objects.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n */\nfunction baseIsEqual(value, other, bitmask, customizer, stack) {\n  if (value === other) {\n    return true;\n  }\n  if (value == null || other == null || (!isObjectLike(value) && !isObjectLike(other))) {\n    return value !== value && other !== other;\n  }\n  return baseIsEqualDeep(value, other, bitmask, customizer, baseIsEqual, stack);\n}\n\nmodule.exports = baseIsEqual;\n","/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\nmodule.exports = setToArray;\n","var isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used to match property names within property paths. */\nvar reIsDeepProp = /\\.|\\[(?:[^[\\]]*|([\"'])(?:(?!\\1)[^\\\\]|\\\\.)*?\\1)\\]/,\n    reIsPlainProp = /^\\w*$/;\n\n/**\n * Checks if `value` is a property name and not a property path.\n *\n * @private\n * @param {*} value The value to check.\n * @param {Object} [object] The object to query keys on.\n * @returns {boolean} Returns `true` if `value` is a property name, else `false`.\n */\nfunction isKey(value, object) {\n  if (isArray(value)) {\n    return false;\n  }\n  var type = typeof value;\n  if (type == 'number' || type == 'symbol' || type == 'boolean' ||\n      value == null || isSymbol(value)) {\n    return true;\n  }\n  return reIsPlainProp.test(value) || !reIsDeepProp.test(value) ||\n    (object != null && value in Object(object));\n}\n\nmodule.exports = isKey;\n","var Symbol = require('./_Symbol'),\n    arrayMap = require('./_arrayMap'),\n    isArray = require('./isArray'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolToString = symbolProto ? symbolProto.toString : undefined;\n\n/**\n * The base implementation of `_.toString` which doesn't convert nullish\n * values to empty strings.\n *\n * @private\n * @param {*} value The value to process.\n * @returns {string} Returns the string.\n */\nfunction baseToString(value) {\n  // Exit early for strings to avoid a performance hit in some environments.\n  if (typeof value == 'string') {\n    return value;\n  }\n  if (isArray(value)) {\n    // Recursively convert values (susceptible to call stack limits).\n    return arrayMap(value, baseToString) + '';\n  }\n  if (isSymbol(value)) {\n    return symbolToString ? symbolToString.call(value) : '';\n  }\n  var result = (value + '');\n  return (result == '0' && (1 / value) == -INFINITY) ? '-0' : result;\n}\n\nmodule.exports = baseToString;\n","var asciiSize = require('./_asciiSize'),\n    hasUnicode = require('./_hasUnicode'),\n    unicodeSize = require('./_unicodeSize');\n\n/**\n * Gets the number of symbols in `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the string size.\n */\nfunction stringSize(string) {\n  return hasUnicode(string)\n    ? unicodeSize(string)\n    : asciiSize(string);\n}\n\nmodule.exports = stringSize;\n","var baseSlice = require('./_baseSlice');\n\n/**\n * Casts `array` to a slice if it's needed.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {number} start The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the cast slice.\n */\nfunction castSlice(array, start, end) {\n  var length = array.length;\n  end = end === undefined ? length : end;\n  return (!start && end >= length) ? array : baseSlice(array, start, end);\n}\n\nmodule.exports = castSlice;\n","var asciiToArray = require('./_asciiToArray'),\n    hasUnicode = require('./_hasUnicode'),\n    unicodeToArray = require('./_unicodeToArray');\n\n/**\n * Converts `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction stringToArray(string) {\n  return hasUnicode(string)\n    ? unicodeToArray(string)\n    : asciiToArray(string);\n}\n\nmodule.exports = stringToArray;\n","import {BaseParamType} from '../_Base';\nimport {BaseNodeType} from '../../nodes/_Base';\nimport lodash_compact from 'lodash/compact';\nimport lodash_cloneDeep from 'lodash/cloneDeep';\nimport lodash_isEqual from 'lodash/isEqual';\nimport {ParamType} from '../../poly/ParamType';\nimport {ParamEvent} from '../../poly/ParamEvent';\nimport {NodeContext} from '../../poly/NodeContext';\nimport {CoreGraphNode} from '../../../core/graph/CoreGraphNode';\n\nconst ALWAYS_REFERENCE_ASSET_OPTION = 'always_reference_asset';\nconst CALLBACK_OPTION = 'callback';\nconst CALLBACK_STRING_OPTION = 'callback_string';\n// const COLOR_OPTION = 'color';\nconst COOK_OPTION = 'cook';\nconst DESKTOP_BROWSE_OPTION = 'desktop_browse';\nconst FILE_TYPE_OPTION = 'file_type';\n// const EXPRESSION_ONLY_OPTION = 'expression_only';\nconst EXPRESSION = 'expression';\nconst FOR_ENTITIES = 'for_entities';\nconst LEVEL = 'level';\nconst MENU = 'menu';\nconst ENTRIES = 'entries';\n// const TYPE = 'type';\n// const RADIO = 'radio';\nconst MULTILINE_OPTION = 'multiline';\nconst LANGUAGE_OPTION = 'language';\nconst NODE_SELECTION = 'node_selection';\nconst NODE_SELECTION_CONTEXT = 'context';\nconst DEPENDENT_ON_FOUND_NODE = 'dependent_on_found_node';\nconst RANGE_OPTION = 'range';\nconst RANGE_LOCKED_OPTION = 'range_locked';\nconst STEP_OPTION = 'step';\nconst SPARE_OPTION = 'spare';\nconst TEXTURE_OPTION = 'texture';\nconst ENV_OPTION = 'env';\nconst HIDDEN_OPTION = 'hidden';\nconst LABEL_OPTION = 'label';\nconst FIELD_OPTION = 'field';\nconst VISIBLE_IF_OPTION = 'visible_if';\n\nexport interface ParamOptionsMenuEntry {\n\tname: string;\n\tvalue: number;\n}\nexport enum StringParamLanguage {\n\t// JAVASCRIPT = 'javascript',\n\tTYPESCRIPT = 'typescript',\n\t// GLSL = 'glsl',\n}\n\ninterface BaseParamOptions {\n\t// cook\n\tcook?: boolean;\n\t// spare\n\tspare?: boolean;\n\t// visible\n\thidden?: boolean;\n\tlabel?: boolean;\n\tfield?: boolean;\n\tvisible_if?: Dictionary<number | boolean>;\n}\ninterface MenuParamOptions {\n\tmenu?: {\n\t\t// type: 'radio';\n\t\tentries: ParamOptionsMenuEntry[];\n\t};\n}\ninterface ExpressionParamOptions {\n\texpression?: {\n\t\tfor_entities?: boolean;\n\t};\n}\n\ninterface NumberParamOptions extends BaseParamOptions {\n\trange?: Number2;\n\trange_locked?: Boolean2;\n\tstep?: number;\n}\ninterface AssetParamOptions {\n\talways_reference_asset?: boolean;\n}\ninterface DesktopParamOptions {\n\tdesktop_browse?: Dictionary<string>;\n}\ninterface CallbackParamOptions {\n\tcallback?: (node: BaseNodeType, param: BaseParamType) => any;\n\tcallback_string?: string;\n}\n\n// actual param options\nexport interface BooleanParamOptions\n\textends BaseParamOptions,\n\t\tMenuParamOptions,\n\t\tExpressionParamOptions,\n\t\tCallbackParamOptions {}\nexport interface ButtonParamOptions extends BaseParamOptions, CallbackParamOptions {}\nexport interface ColorParamOptions extends BaseParamOptions, ExpressionParamOptions {}\nexport interface FloatParamOptions\n\textends NumberParamOptions,\n\t\tMenuParamOptions,\n\t\tExpressionParamOptions,\n\t\tCallbackParamOptions {}\nexport interface FolderParamOptions extends BaseParamOptions {\n\tlevel?: number;\n}\nexport interface IntegerParamOptions extends NumberParamOptions, MenuParamOptions, CallbackParamOptions {}\nexport interface OperatorPathParamOptions extends BaseParamOptions, DesktopParamOptions, CallbackParamOptions {\n\tnode_selection?: {\n\t\tcontext?: NodeContext;\n\t};\n\tdependent_on_found_node?: boolean;\n}\nexport interface RampParamOptions extends BaseParamOptions {}\nexport interface SeparatorParamOptions extends BaseParamOptions {}\nexport interface StringParamOptions\n\textends BaseParamOptions,\n\t\tAssetParamOptions,\n\t\tDesktopParamOptions,\n\t\tExpressionParamOptions {\n\tmultiline?: boolean;\n\tlanguage?: StringParamLanguage;\n}\nexport interface Vector2ParamOptions extends BaseParamOptions, ExpressionParamOptions {}\nexport interface Vector3ParamOptions extends BaseParamOptions, ExpressionParamOptions {}\nexport interface Vector4ParamOptions extends BaseParamOptions, ExpressionParamOptions {}\n\nexport interface ParamOptions\n\textends NumberParamOptions,\n\t\tFolderParamOptions,\n\t\tExpressionParamOptions,\n\t\tButtonParamOptions,\n\t\tDesktopParamOptions,\n\t\tMenuParamOptions,\n\t\tStringParamOptions,\n\t\tOperatorPathParamOptions {\n\t// asset refererences\n\t// always_reference_asset?: boolean;\n\t// callback\n\t// callback?: (node: BaseNodeType, param: BaseParamType) => any;\n\t// callback_string?: string;\n\t// color\n\t// color?: [number, number, number] | string;\n\t// cook\n\t// cook?: boolean;\n\t// desktop\n\t// desktop_browse?: Dictionary<string>;\n\t// expression\n\t// expression_only?: boolean;\n\t// expression?: {\n\t// \tfor_entities?: boolean;\n\t// };\n\t// folder\n\t// level?:number\n\t// menu\n\t// menu?: {\n\t// \t// type: 'radio';\n\t// \tentries: ParamOptionsMenuEntry[];\n\t// };\n\t// multiline\n\t// multiline?: boolean;\n\t// node selection\n\t// node_selection?: {\n\t// \tcontext?: NodeContext;\n\t// };\n\t// dependent_on_found_node?: boolean;\n\t// spare\n\t// spare?: boolean;\n\t// texture\n\ttexture?: {\n\t\tenv?: boolean;\n\t};\n\t// visible\n\t// hidden?: boolean;\n\t// label?: boolean;\n\t// field?: boolean;\n\t// visible_if?: Dictionary<number | boolean>;\n}\n\nexport class OptionsController {\n\tprivate _programatic_visible_state: boolean = true;\n\tprivate _options!: ParamOptions;\n\tprivate _default_options!: ParamOptions;\n\tconstructor(private _param: BaseParamType) {\n\t\t// this._options = lodash_cloneDeep(this._default_options);\n\t}\n\n\tset(options: ParamOptions) {\n\t\tthis._default_options = options;\n\t\tthis._options = lodash_cloneDeep(this._default_options);\n\t}\n\tcopy(options_controller: OptionsController) {\n\t\tthis._default_options = lodash_cloneDeep(options_controller.default);\n\t\tthis._options = lodash_cloneDeep(options_controller.current);\n\t}\n\tset_option(name: keyof ParamOptions, value: any) {\n\t\treturn Object.assign(this._options, name, value);\n\t}\n\tget param() {\n\t\treturn this._param;\n\t}\n\tget node(): BaseNodeType {\n\t\treturn this._param.node;\n\t}\n\tget default() {\n\t\treturn this._default_options;\n\t}\n\tget current() {\n\t\treturn this._options;\n\t}\n\n\t// utils\n\tget has_options_overridden(): boolean {\n\t\treturn !lodash_isEqual(this._options, this._default_options);\n\t}\n\tget overridden_options(): ParamOptions {\n\t\tconst overriden: ParamOptions = {};\n\t\tconst option_names = Object.keys(this._options) as Array<keyof ParamOptions>;\n\t\tfor (let option_name of option_names) {\n\t\t\tif (!lodash_isEqual(this._options[option_name], this._default_options[option_name])) {\n\t\t\t\tObject.assign(overriden, option_name, lodash_cloneDeep(this._options[option_name]));\n\t\t\t}\n\t\t}\n\t\treturn overriden;\n\t}\n\tget overridden_option_names(): Array<keyof ParamOptions> {\n\t\treturn Object.keys(this.overridden_options) as Array<keyof ParamOptions>;\n\t}\n\n\t// referenced assets\n\tget always_reference_asset(): boolean {\n\t\treturn this._options[ALWAYS_REFERENCE_ASSET_OPTION] || false;\n\t}\n\n\t// callback\n\thas_callback() {\n\t\treturn this._options[CALLBACK_OPTION] != null || this._options[CALLBACK_STRING_OPTION] != null;\n\t}\n\n\texecute_callback() {\n\t\t// we only allow execution when scene is loaded\n\t\t// to avoid errors such as an operator_path param\n\t\t// executing its callback before the node it points to is created\n\t\tif (!(this.node && this.node.scene.loading_controller.loaded)) {\n\t\t\treturn;\n\t\t}\n\t\tconst callback = this.get_callback();\n\t\tif (callback != null) {\n\t\t\tif (this.node && !this.node.cook_controller.is_cooking) {\n\t\t\t\tcallback(this.node, this.param);\n\t\t\t}\n\t\t}\n\t}\n\tprivate get_callback() {\n\t\tif (this.has_callback()) {\n\t\t\treturn (this._options[CALLBACK_OPTION] =\n\t\t\t\tthis._options[CALLBACK_OPTION] || this.create_callback_from_string());\n\t\t}\n\t}\n\tprivate create_callback_from_string() {\n\t\tconst callback_string = this._options[CALLBACK_STRING_OPTION];\n\t\tif (callback_string) {\n\t\t\tconst callback_function = new Function('node', 'scene', 'window', 'location', callback_string);\n\t\t\treturn () => {\n\t\t\t\tcallback_function(this.node, this.node.scene, null, null);\n\t\t\t};\n\t\t}\n\t}\n\n\t// color\n\t// color() {\n\t// \treturn this._options[COLOR_OPTION];\n\t// }\n\n\t// cook\n\tmakes_node_dirty_when_dirty() {\n\t\tlet cook_options;\n\n\t\t// false as the dirty state will go through the parent param\n\t\tif (this.param.parent_param != null) {\n\t\t\treturn false;\n\t\t}\n\n\t\tlet value = true;\n\t\tif ((cook_options = this._options[COOK_OPTION]) != null) {\n\t\t\tvalue = cook_options;\n\t\t}\n\t\treturn value;\n\t}\n\n\t// desktop\n\tget desktop_browse_option() {\n\t\treturn this._options[DESKTOP_BROWSE_OPTION];\n\t}\n\tget desktop_browse_allowed(): boolean {\n\t\treturn this.desktop_browse_option != null;\n\t}\n\tdesktop_browse_file_type(): string | null {\n\t\tif (this.desktop_browse_option) {\n\t\t\treturn this.desktop_browse_option[FILE_TYPE_OPTION];\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t// expression\n\t// get displays_expression_only() {\n\t// \treturn this._options[EXPRESSION_ONLY_OPTION] === true;\n\t// }\n\tget is_expression_for_entities(): boolean {\n\t\tconst expr_option = this._options[EXPRESSION];\n\t\tif (expr_option) {\n\t\t\treturn expr_option[FOR_ENTITIES] || false;\n\t\t}\n\t\treturn false;\n\t}\n\n\t// folder\n\tget level() {\n\t\treturn this._options[LEVEL] || 0;\n\t}\n\n\t// menu\n\tget has_menu() {\n\t\treturn this.menu_options != null;\n\t}\n\n\tprivate get menu_options() {\n\t\treturn this._options[MENU];\n\t}\n\t// private get menu_type() {\n\t// \tif(this.menu_options){\n\t// \t\treturn this.menu_options[TYPE];\n\t// \t}\n\t// }\n\n\tget menu_entries() {\n\t\tif (this.menu_options) {\n\t\t\treturn this.menu_options[ENTRIES];\n\t\t} else {\n\t\t\treturn [];\n\t\t}\n\t}\n\n\tget has_menu_radio() {\n\t\treturn this.has_menu; //&& this.menu_options[TYPE] === RADIO;\n\t}\n\n\t// multiline\n\tget is_multiline(): boolean {\n\t\treturn this._options[MULTILINE_OPTION] === true;\n\t}\n\tget language(): StringParamLanguage | undefined {\n\t\treturn this._options[LANGUAGE_OPTION];\n\t}\n\tget is_code(): boolean {\n\t\treturn this.language != null;\n\t}\n\n\t// node selection\n\tget node_selection_options() {\n\t\treturn this._options[NODE_SELECTION];\n\t}\n\tget node_selection_context() {\n\t\tif (this.node_selection_options) {\n\t\t\treturn this.node_selection_options[NODE_SELECTION_CONTEXT];\n\t\t}\n\t}\n\n\tdependent_on_found_node() {\n\t\tif (DEPENDENT_ON_FOUND_NODE in this._options) {\n\t\t\treturn this._options[DEPENDENT_ON_FOUND_NODE];\n\t\t} else {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\t// range\n\tget range(): Number2 {\n\t\t// cannot force range easily, as values are not necessarily from 0 to N\n\t\t// if(this.self.has_menu() && this.self.menu_entries()){\n\t\t// \treturn [0, this.self.menu_entries().length-1 ]\n\t\t// } else {\n\t\treturn this._options[RANGE_OPTION] || [0, 1];\n\t\t// }\n\t}\n\tget step(): number {\n\t\treturn this._options[STEP_OPTION] || 0.01;\n\t}\n\n\tprivate range_locked(): Boolean2 {\n\t\t// if(this.self.has_menu() && this.self.menu_entries()){\n\t\t// \treturn [true, true]\n\t\t// } else {\n\t\treturn this._options[RANGE_LOCKED_OPTION] || [false, false];\n\t\t// }\n\t}\n\n\tensure_in_range(value: number): number {\n\t\tconst range = this.range;\n\n\t\tif (value >= range[0] && value <= range[1]) {\n\t\t\treturn value;\n\t\t} else {\n\t\t\tif (value < range[0]) {\n\t\t\t\treturn this.range_locked()[0] === true ? range[0] : value;\n\t\t\t} else {\n\t\t\t\treturn this.range_locked()[1] === true ? range[1] : value;\n\t\t\t}\n\t\t}\n\t}\n\n\t// spare\n\tget is_spare(): boolean {\n\t\treturn this._options[SPARE_OPTION] || false;\n\t}\n\n\t// texture\n\tget texture_options() {\n\t\treturn this._options[TEXTURE_OPTION];\n\t}\n\ttexture_as_env(): boolean {\n\t\tconst texture_options = this.texture_options;\n\t\tif (texture_options != null) {\n\t\t\treturn texture_options[ENV_OPTION] === true;\n\t\t}\n\t\treturn false;\n\t}\n\n\t// visible\n\tget is_hidden(): boolean {\n\t\treturn this._options[HIDDEN_OPTION] === true || this._programatic_visible_state === false;\n\t}\n\tget is_visible(): boolean {\n\t\treturn !this.is_hidden;\n\t}\n\tset_visible_state(state: boolean) {\n\t\tthis._options[HIDDEN_OPTION] = !state;\n\t\tthis.param.emit(ParamEvent.VISIBLE_UPDATED);\n\t}\n\n\tget is_label_hidden(): boolean {\n\t\tconst type = this.param.type;\n\t\treturn (\n\t\t\tthis._options[LABEL_OPTION] === false ||\n\t\t\ttype === ParamType.BUTTON ||\n\t\t\ttype === ParamType.SEPARATOR ||\n\t\t\t(type === ParamType.BOOLEAN && this.is_field_hidden())\n\t\t);\n\t}\n\tis_field_hidden(): boolean {\n\t\treturn this._options[FIELD_OPTION] === false;\n\t}\n\n\t// programatic visibility\n\tui_data_depends_on_other_params(): boolean {\n\t\treturn VISIBLE_IF_OPTION in this._options;\n\t}\n\tvisibility_predecessors() {\n\t\tconst predecessor_names = Object.keys(this._options[VISIBLE_IF_OPTION] || {});\n\t\tconst node = this.param.node;\n\t\treturn lodash_compact(\n\t\t\tpredecessor_names.map((name) => {\n\t\t\t\tconst param = node.params.get(name);\n\t\t\t\tif (param) {\n\t\t\t\t\treturn param;\n\t\t\t\t} else {\n\t\t\t\t\tconsole.error(\n\t\t\t\t\t\t`param ${name} not found as visibility condition for ${this.param.name} in node ${this.param.node.type}`\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t}\n\n\tprivate _update_visibility_and_remove_dirty_bound = this.update_visibility_and_remove_dirty.bind(this);\n\tprivate _visibility_graph_node: CoreGraphNode | undefined;\n\tprivate _ui_data_dependency_set: boolean = false;\n\tset_ui_data_dependency() {\n\t\tif (this._ui_data_dependency_set) {\n\t\t\treturn;\n\t\t}\n\t\tthis._ui_data_dependency_set = true;\n\t\tconst predecessors = this.visibility_predecessors();\n\t\tif (predecessors.length > 0) {\n\t\t\tthis._visibility_graph_node = new CoreGraphNode(this.param.scene, 'param_visibility');\n\t\t\tfor (let predecessor of predecessors) {\n\t\t\t\tthis._visibility_graph_node.add_graph_input(predecessor);\n\t\t\t}\n\t\t\tthis._visibility_graph_node.add_post_dirty_hook(\n\t\t\t\t'_update_visibility_and_remove_dirty',\n\t\t\t\tthis._update_visibility_and_remove_dirty_bound\n\t\t\t);\n\t\t}\n\t}\n\tprivate update_visibility_and_remove_dirty() {\n\t\tthis.update_visibility();\n\t\tthis.param.remove_dirty_state();\n\t}\n\n\tasync update_visibility() {\n\t\tconst options = this._options[VISIBLE_IF_OPTION];\n\t\tif (options) {\n\t\t\tconst params = this.visibility_predecessors();\n\t\t\tconst promises = params.map((p) => p.compute());\n\t\t\tthis._programatic_visible_state = true;\n\t\t\tawait Promise.all(promises);\n\t\t\tfor (let param of params) {\n\t\t\t\tconst expected_val = options[param.name];\n\t\t\t\tconst val = param.value;\n\t\t\t\tif (expected_val != val) {\n\t\t\t\t\tthis._programatic_visible_state = false;\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis.param.emit(ParamEvent.VISIBLE_UPDATED);\n\t\t}\n\t}\n}\n","var baseFlatten = require('./_baseFlatten'),\n    baseRest = require('./_baseRest'),\n    baseUniq = require('./_baseUniq'),\n    isArrayLikeObject = require('./isArrayLikeObject');\n\n/**\n * Creates an array of unique values, in order, from all given arrays using\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {...Array} [arrays] The arrays to inspect.\n * @returns {Array} Returns the new array of combined values.\n * @example\n *\n * _.union([2], [1, 2]);\n * // => [2, 1]\n */\nvar union = baseRest(function(arrays) {\n  return baseUniq(baseFlatten(arrays, 1, isArrayLikeObject, true));\n});\n\nmodule.exports = union;\n","var toString = require('./toString'),\n    upperFirst = require('./upperFirst');\n\n/**\n * Converts the first character of `string` to upper case and the remaining\n * to lower case.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to capitalize.\n * @returns {string} Returns the capitalized string.\n * @example\n *\n * _.capitalize('FRED');\n * // => 'Fred'\n */\nfunction capitalize(string) {\n  return upperFirst(toString(string).toLowerCase());\n}\n\nmodule.exports = capitalize;\n","var createCaseFirst = require('./_createCaseFirst');\n\n/**\n * Converts the first character of `string` to upper case.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the converted string.\n * @example\n *\n * _.upperFirst('fred');\n * // => 'Fred'\n *\n * _.upperFirst('FRED');\n * // => 'FRED'\n */\nvar upperFirst = createCaseFirst('toUpperCase');\n\nmodule.exports = upperFirst;\n","var baseIndexOf = require('./_baseIndexOf'),\n    isArrayLike = require('./isArrayLike'),\n    isString = require('./isString'),\n    toInteger = require('./toInteger'),\n    values = require('./values');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * Checks if `value` is in `collection`. If `collection` is a string, it's\n * checked for a substring of `value`, otherwise\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * is used for equality comparisons. If `fromIndex` is negative, it's used as\n * the offset from the end of `collection`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object|string} collection The collection to inspect.\n * @param {*} value The value to search for.\n * @param {number} [fromIndex=0] The index to search from.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.reduce`.\n * @returns {boolean} Returns `true` if `value` is found, else `false`.\n * @example\n *\n * _.includes([1, 2, 3], 1);\n * // => true\n *\n * _.includes([1, 2, 3], 1, 2);\n * // => false\n *\n * _.includes({ 'a': 1, 'b': 2 }, 1);\n * // => true\n *\n * _.includes('abcd', 'bc');\n * // => true\n */\nfunction includes(collection, value, fromIndex, guard) {\n  collection = isArrayLike(collection) ? collection : values(collection);\n  fromIndex = (fromIndex && !guard) ? toInteger(fromIndex) : 0;\n\n  var length = collection.length;\n  if (fromIndex < 0) {\n    fromIndex = nativeMax(length + fromIndex, 0);\n  }\n  return isString(collection)\n    ? (fromIndex <= length && collection.indexOf(value, fromIndex) > -1)\n    : (!!length && baseIndexOf(collection, value, fromIndex) > -1);\n}\n\nmodule.exports = includes;\n","/**\n * Copyright (c) 2014, Chris Pettitt\n * All rights reserved.\n *\n * Redistribution and use in source and binary forms, with or without\n * modification, are permitted provided that the following conditions are met:\n *\n * 1. Redistributions of source code must retain the above copyright notice, this\n * list of conditions and the following disclaimer.\n *\n * 2. Redistributions in binary form must reproduce the above copyright notice,\n * this list of conditions and the following disclaimer in the documentation\n * and/or other materials provided with the distribution.\n *\n * 3. Neither the name of the copyright holder nor the names of its contributors\n * may be used to endorse or promote products derived from this software without\n * specific prior written permission.\n *\n * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS \"AS IS\" AND\n * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED\n * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n * DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT HOLDER OR CONTRIBUTORS BE LIABLE\n * FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL\n * DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR\n * SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER\n * CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n * OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\nvar lib = require(\"./lib\");\n\nmodule.exports = {\n  Graph: lib.Graph,\n  json: require(\"./lib/json\"),\n  alg: require(\"./lib/alg\"),\n  version: lib.version\n};\n","var createPadding = require('./_createPadding'),\n    stringSize = require('./_stringSize'),\n    toInteger = require('./toInteger'),\n    toString = require('./toString');\n\n/**\n * Pads `string` on the right side if it's shorter than `length`. Padding\n * characters are truncated if they exceed `length`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category String\n * @param {string} [string=''] The string to pad.\n * @param {number} [length=0] The padding length.\n * @param {string} [chars=' '] The string used as padding.\n * @returns {string} Returns the padded string.\n * @example\n *\n * _.padEnd('abc', 6);\n * // => 'abc   '\n *\n * _.padEnd('abc', 6, '_-');\n * // => 'abc_-_'\n *\n * _.padEnd('abc', 3);\n * // => 'abc'\n */\nfunction padEnd(string, length, chars) {\n  string = toString(string);\n  length = toInteger(length);\n\n  var strLength = length ? stringSize(string) : 0;\n  return (length && strLength < length)\n    ? (string + createPadding(length - strLength, chars))\n    : string;\n}\n\nmodule.exports = padEnd;\n","var capitalize = require('./capitalize'),\n    createCompounder = require('./_createCompounder');\n\n/**\n * Converts `string` to [camel case](https://en.wikipedia.org/wiki/CamelCase).\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the camel cased string.\n * @example\n *\n * _.camelCase('Foo Bar');\n * // => 'fooBar'\n *\n * _.camelCase('--foo-bar--');\n * // => 'fooBar'\n *\n * _.camelCase('__FOO_BAR__');\n * // => 'fooBar'\n */\nvar camelCase = createCompounder(function(result, word, index) {\n  word = word.toLowerCase();\n  return result + (index ? capitalize(word) : word);\n});\n\nmodule.exports = camelCase;\n","import {\n\tConnectionPointType,\n\tConnectionPointInitValueMapGeneric,\n\tConnectionPointInitValueMap,\n\tConnectionPointTypeToParamTypeMap,\n\tIConnectionPointTypeToParamTypeMap,\n} from './ConnectionPointType';\n// import {ParamInitValuesTypeMap} from '../params/ParamsController';\n\nexport interface TypedNamedConnectionPointData<T extends ConnectionPointType> {\n\tname: string;\n\ttype: T;\n}\n\nexport class TypedNamedConnectionPoint<T extends ConnectionPointType> {\n\tprivate _json: TypedNamedConnectionPointData<T> | undefined;\n\n\tconstructor(\n\t\tprotected _name: string,\n\t\tprotected _type: T,\n\t\tprotected _init_value?: ConnectionPointInitValueMapGeneric[T]\n\t) {\n\t\tif (this._init_value === undefined) {\n\t\t\tthis._init_value = ConnectionPointInitValueMap[this._type];\n\t\t}\n\t}\n\tget name() {\n\t\treturn this._name;\n\t}\n\tget type() {\n\t\treturn this._type;\n\t}\n\tget param_type(): IConnectionPointTypeToParamTypeMap[T] {\n\t\treturn ConnectionPointTypeToParamTypeMap[this._type];\n\t}\n\tget init_value() {\n\t\treturn this._init_value;\n\t}\n\n\tto_json(): TypedNamedConnectionPointData<T> {\n\t\treturn (this._json = this._json || this._create_json());\n\t}\n\tprivate _create_json(): TypedNamedConnectionPointData<T> {\n\t\treturn {\n\t\t\tname: this._name,\n\t\t\ttype: this._type,\n\t\t};\n\t}\n}\n\nexport type BaseNamedConnectionPointType = TypedNamedConnectionPoint<ConnectionPointType>;\n","export class MapUtils {\n\tstatic push_on_array_at_entry<K, V>(map: Map<K, V[]>, key: K, new_element: V) {\n\t\tlet has_entry = map.has(key);\n\t\tif (has_entry) {\n\t\t\tmap.get(key)!.push(new_element);\n\t\t} else {\n\t\t\tmap.set(key, [new_element]);\n\t\t}\n\t}\n\tstatic unshift_on_array_at_entry<K, V>(map: Map<K, V[]>, key: K, new_element: V) {\n\t\tlet has_entry = map.has(key);\n\t\tif (has_entry) {\n\t\t\tmap.get(key)!.unshift(new_element);\n\t\t} else {\n\t\t\tmap.set(key, [new_element]);\n\t\t}\n\t}\n\tstatic concat_on_array_at_entry<K, V>(map: Map<K, V[]>, key: K, new_elements: V[]) {\n\t\tlet has_entry = map.has(key);\n\t\tif (has_entry) {\n\t\t\tlet array: V[] = map.get(key)!;\n\t\t\tfor (let element of new_elements) {\n\t\t\t\tarray.push(element);\n\t\t\t}\n\t\t} else {\n\t\t\tmap.set(key, new_elements);\n\t\t}\n\t}\n}\n","import { Object3D } from '../core/Object3D.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Group() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Group';\n\n}\n\nGroup.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Group,\n\n\tisGroup: true\n\n} );\n\n\nexport { Group };\n","var createRange = require('./_createRange');\n\n/**\n * Creates an array of numbers (positive and/or negative) progressing from\n * `start` up to, but not including, `end`. A step of `-1` is used if a negative\n * `start` is specified without an `end` or `step`. If `end` is not specified,\n * it's set to `start` with `start` then set to `0`.\n *\n * **Note:** JavaScript follows the IEEE-754 standard for resolving\n * floating-point values which can produce unexpected results.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {number} [start=0] The start of the range.\n * @param {number} end The end of the range.\n * @param {number} [step=1] The value to increment or decrement by.\n * @returns {Array} Returns the range of numbers.\n * @see _.inRange, _.rangeRight\n * @example\n *\n * _.range(4);\n * // => [0, 1, 2, 3]\n *\n * _.range(-4);\n * // => [0, -1, -2, -3]\n *\n * _.range(1, 5);\n * // => [1, 2, 3, 4]\n *\n * _.range(0, 20, 5);\n * // => [0, 5, 10, 15]\n *\n * _.range(0, -4, -1);\n * // => [0, -1, -2, -3]\n *\n * _.range(1, 4, 0);\n * // => [1, 1, 1]\n *\n * _.range(0);\n * // => []\n */\nvar range = createRange();\n\nmodule.exports = range;\n","/**\n * @author alteredq / http://alteredqualia.com/\n */\n\nimport { Texture } from './Texture.js';\nimport { NearestFilter } from '../constants.js';\n\nfunction DataTexture( data, width, height, format, type, mapping, wrapS, wrapT, magFilter, minFilter, anisotropy, encoding ) {\n\n\tTexture.call( this, null, mapping, wrapS, wrapT, magFilter, minFilter, format, type, anisotropy, encoding );\n\n\tthis.image = { data: data || null, width: width || 1, height: height || 1 };\n\n\tthis.magFilter = magFilter !== undefined ? magFilter : NearestFilter;\n\tthis.minFilter = minFilter !== undefined ? minFilter : NearestFilter;\n\n\tthis.generateMipmaps = false;\n\tthis.flipY = false;\n\tthis.unpackAlignment = 1;\n\n\tthis.needsUpdate = true;\n\n}\n\nDataTexture.prototype = Object.create( Texture.prototype );\nDataTexture.prototype.constructor = DataTexture;\n\nDataTexture.prototype.isDataTexture = true;\n\n\nexport { DataTexture };\n","var arrayLikeKeys = require('./_arrayLikeKeys'),\n    baseKeysIn = require('./_baseKeysIn'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nmodule.exports = keysIn;\n","var isArrayLike = require('./isArrayLike'),\n    isObjectLike = require('./isObjectLike');\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\nmodule.exports = isArrayLikeObject;\n","import {Vector3} from 'three/src/math/Vector3';\nimport {Triangle} from 'three/src/math/Triangle';\nconst THREE = {Triangle, Vector3};\nimport lodash_isNumber from 'lodash/isNumber';\n// import {Octree} from './Octree'\n// import Interpolate from './Interpolate'\nimport {Easing} from './Easing';\n\nconst RAD_DEG_RATIO = Math.PI / 180;\n\nexport class CoreMath {\n\t// static Octree = Octree\n\t// static Interpolate = Interpolate\n\tstatic Easing = Easing; // used in expressins\n\n\tstatic clamp(val: number, min: number, max: number): number {\n\t\tif (val < min) {\n\t\t\treturn min;\n\t\t} else if (val > max) {\n\t\t\treturn max;\n\t\t} else {\n\t\t\treturn val;\n\t\t}\n\t}\n\n\tstatic fit01(val: number, dest_min: number, dest_max: number): number {\n\t\t// const size = max - min;\n\t\t// return (val - min) / size;\n\t\treturn this.fit(val, 0, 1, dest_min, dest_max);\n\t}\n\n\tstatic fit(val: number, src_min: number, src_max: number, dest_min: number, dest_max: number): number {\n\t\tconst src_range = src_max - src_min;\n\t\tconst dest_range = dest_max - dest_min;\n\n\t\tconst r = (val - src_min) / src_range;\n\t\treturn r * dest_range + dest_min;\n\t}\n\n\tstatic degrees_to_radians(degrees: number): number {\n\t\treturn degrees * RAD_DEG_RATIO;\n\t}\n\tstatic radians_to_degrees(radians: number): number {\n\t\treturn radians / RAD_DEG_RATIO;\n\t}\n\tstatic deg2rad(deg: number): number {\n\t\treturn this.degrees_to_radians(deg);\n\t}\n\tstatic rad2deg(rad: number): number {\n\t\treturn this.radians_to_degrees(rad);\n\t}\n\n\tstatic fract = (number: number) => number - Math.floor(number);\n\n\t// from threejs glsl rand\n\tstatic rand(number: number): number {\n\t\tif (lodash_isNumber(number)) {\n\t\t\treturn this.rand_float(number);\n\t\t} else {\n\t\t\treturn this.rand_vec2(number);\n\t\t}\n\t}\n\n\tstatic round(number: number, step_size: number): number {\n\t\tconst steps_count = number / step_size;\n\t\tconst rounded_steps_count = number < 0 ? Math.ceil(steps_count) : Math.floor(steps_count);\n\t\tconsole.log('round', step_size, number, steps_count, rounded_steps_count, rounded_steps_count * step_size);\n\t\treturn rounded_steps_count * step_size;\n\t}\n\n\tstatic highest_even(number: number): number {\n\t\treturn 2 * Math.ceil(number * 0.5);\n\t}\n\n\tstatic rand_float(number: number): number {\n\t\tconst vec = {\n\t\t\tx: number,\n\t\t\ty: 136574,\n\t\t};\n\t\treturn this.rand_vec2(vec);\n\t}\n\n\tstatic rand_vec2(uv: Vector2Like) {\n\t\tconst a = 12.9898;\n\t\tconst b = 78.233;\n\t\tconst c = 43758.5453;\n\t\tconst dt = uv.x * a + uv.y * b; //dot( uv.xy, vec2( a,b ) )\n\t\tconst sn = dt % Math.PI;\n\t\treturn this.fract(Math.sin(sn) * c);\n\t}\n\n\t// https://www.movable-type.co.uk/scripts/latlong.html\n\tstatic geodesic_distance(lnglat1: LngLatLike, lnglat2: LngLatLike): number {\n\t\tvar R = 6371e3; // metres\n\t\tvar φ1 = this.deg2rad(lnglat1.lat);\n\t\tvar φ2 = this.deg2rad(lnglat2.lat);\n\t\tvar Δφ = this.deg2rad(lnglat2.lat - lnglat1.lat);\n\t\tvar Δλ = this.deg2rad(lnglat2.lng - lnglat1.lng);\n\n\t\tvar a = Math.sin(Δφ / 2) * Math.sin(Δφ / 2) + Math.cos(φ1) * Math.cos(φ2) * Math.sin(Δλ / 2) * Math.sin(Δλ / 2);\n\t\tvar c = 2 * Math.atan2(Math.sqrt(a), Math.sqrt(1 - a));\n\n\t\tvar d = R * c;\n\t\treturn d;\n\t}\n\n\tstatic expand_triangle(triangle: Triangle, margin: number): Triangle {\n\t\tconst mid_point = new THREE.Vector3();\n\t\ttriangle.getMidpoint(mid_point);\n\n\t\tenum TriangleProp {\n\t\t\ta = 'a',\n\t\t\tb = 'b',\n\t\t\tc = 'c',\n\t\t}\n\t\tfor (let prop of ['a', 'b', 'c']) {\n\t\t\tconst delta = triangle[prop as TriangleProp].clone().sub(mid_point);\n\t\t\tconst delta_n = delta.clone().normalize();\n\t\t\tconst length = delta.length() + margin;\n\n\t\t\ttriangle[prop as TriangleProp] = mid_point.clone().add(delta_n.multiplyScalar(length));\n\t\t}\n\t\treturn triangle;\n\t}\n\n\tstatic nearestPower2(num: number) {\n\t\treturn Math.pow(2, Math.ceil(Math.log(num) / Math.log(2)));\n\t}\n}\n","import { Object3D } from '../core/Object3D.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Scene() {\n\n\tObject3D.call( this );\n\n\tthis.type = 'Scene';\n\n\tthis.background = null;\n\tthis.environment = null;\n\tthis.fog = null;\n\n\tthis.overrideMaterial = null;\n\n\tthis.autoUpdate = true; // checked by the renderer\n\n\tif ( typeof __THREE_DEVTOOLS__ !== 'undefined' ) {\n\n\t\t__THREE_DEVTOOLS__.dispatchEvent( new CustomEvent( 'observe', { detail: this } ) ); // eslint-disable-line no-undef\n\n\t}\n\n}\n\nScene.prototype = Object.assign( Object.create( Object3D.prototype ), {\n\n\tconstructor: Scene,\n\n\tisScene: true,\n\n\tcopy: function ( source, recursive ) {\n\n\t\tObject3D.prototype.copy.call( this, source, recursive );\n\n\t\tif ( source.background !== null ) this.background = source.background.clone();\n\t\tif ( source.environment !== null ) this.environment = source.environment.clone();\n\t\tif ( source.fog !== null ) this.fog = source.fog.clone();\n\n\t\tif ( source.overrideMaterial !== null ) this.overrideMaterial = source.overrideMaterial.clone();\n\n\t\tthis.autoUpdate = source.autoUpdate;\n\t\tthis.matrixAutoUpdate = source.matrixAutoUpdate;\n\n\t\treturn this;\n\n\t},\n\n\ttoJSON: function ( meta ) {\n\n\t\tvar data = Object3D.prototype.toJSON.call( this, meta );\n\n\t\tif ( this.background !== null ) data.object.background = this.background.toJSON( meta );\n\t\tif ( this.environment !== null ) data.object.environment = this.environment.toJSON( meta );\n\t\tif ( this.fog !== null ) data.object.fog = this.fog.toJSON();\n\n\t\treturn data;\n\n\t},\n\n\tdispose: function () {\n\n\t\tthis.dispatchEvent( { type: 'dispose' } );\n\n\t}\n\n} );\n\n\n\nexport { Scene };\n","import {Vector3} from 'three/src/math/Vector3';\nimport {Vector2} from 'three/src/math/Vector2';\nconst THREE = {Vector2, Vector3};\n\nconst ATTRIB_NAME_MAP: Dictionary<string> = {\n\tP: 'position',\n\tN: 'normal',\n\tCd: 'color',\n};\n\nexport class CoreAttribute {\n\t// constructor: (@_size, @_value)->\n\t// \t#\n\n\t// size: ->\n\t// \t@_size\n\n\t// value: ->\n\t// \t@_value\n\n\t// set_value: (value)->\n\t// \t@_value = value\n\n\tstatic remap_name(name: string): string {\n\t\treturn ATTRIB_NAME_MAP[name] || name;\n\t}\n\n\tstatic array_to_indexed_arrays(array: string[]) {\n\t\tconst index_by_value: Dictionary<number> = {};\n\t\tlet current_index = 0;\n\t\tconst indices = [];\n\t\tconst values = [];\n\n\t\tlet i = 0;\n\t\twhile (i < array.length) {\n\t\t\t//(value = array[i++])?\n\t\t\tconst value = array[i];\n\t\t\tconst index = index_by_value[value];\n\t\t\tif (index != null) {\n\t\t\t\tindices.push(index);\n\t\t\t} else {\n\t\t\t\tvalues.push(value);\n\t\t\t\tindices.push(current_index);\n\t\t\t\tindex_by_value[value] = current_index;\n\t\t\t\tcurrent_index += 1;\n\t\t\t}\n\n\t\t\ti++;\n\t\t}\n\n\t\treturn {\n\t\t\tindices,\n\t\t\tvalues,\n\t\t};\n\t}\n\n\tstatic default_value(size: number) {\n\t\tswitch (size) {\n\t\t\tcase 1:\n\t\t\t\treturn 0;\n\t\t\tcase 2:\n\t\t\t\treturn new THREE.Vector2(0, 0);\n\t\t\tcase 3:\n\t\t\t\treturn new THREE.Vector3(0, 0, 0);\n\t\t\tdefault:\n\t\t\t\tthrow `size ${size} not yet implemented`;\n\t\t}\n\t}\n}\n","var eq = require('./eq'),\n    isArrayLike = require('./isArrayLike'),\n    isIndex = require('./_isIndex'),\n    isObject = require('./isObject');\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nmodule.exports = isIterateeCall;\n","var baseToString = require('./_baseToString'),\n    castSlice = require('./_castSlice'),\n    charsEndIndex = require('./_charsEndIndex'),\n    charsStartIndex = require('./_charsStartIndex'),\n    stringToArray = require('./_stringToArray'),\n    toString = require('./toString');\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/**\n * Removes leading and trailing whitespace or specified characters from `string`.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to trim.\n * @param {string} [chars=whitespace] The characters to trim.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {string} Returns the trimmed string.\n * @example\n *\n * _.trim('  abc  ');\n * // => 'abc'\n *\n * _.trim('-_-abc-_-', '_-');\n * // => 'abc'\n *\n * _.map(['  foo  ', '  bar  '], _.trim);\n * // => ['foo', 'bar']\n */\nfunction trim(string, chars, guard) {\n  string = toString(string);\n  if (string && (guard || chars === undefined)) {\n    return string.replace(reTrim, '');\n  }\n  if (!string || !(chars = baseToString(chars))) {\n    return string;\n  }\n  var strSymbols = stringToArray(string),\n      chrSymbols = stringToArray(chars),\n      start = charsStartIndex(strSymbols, chrSymbols),\n      end = charsEndIndex(strSymbols, chrSymbols) + 1;\n\n  return castSlice(strSymbols, start, end).join('');\n}\n\nmodule.exports = trim;\n","export class TypeAssert {\n\tstatic unreachable(x: never): never {\n\t\tthrow new Error(\"Didn't expect to get here\");\n\t}\n}\n","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nmodule.exports = copyArray;\n","var baseIndexOf = require('./_baseIndexOf');\n\n/**\n * A specialized version of `_.includes` for arrays without support for\n * specifying an index to search from.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludes(array, value) {\n  var length = array == null ? 0 : array.length;\n  return !!length && baseIndexOf(array, value, 0) > -1;\n}\n\nmodule.exports = arrayIncludes;\n","/**\n * This function is like `arrayIncludes` except that it accepts a comparator.\n *\n * @private\n * @param {Array} [array] The array to inspect.\n * @param {*} target The value to search for.\n * @param {Function} comparator The comparator invoked per element.\n * @returns {boolean} Returns `true` if `target` is found, else `false`.\n */\nfunction arrayIncludesWith(array, value, comparator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (comparator(value, array[index])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arrayIncludesWith;\n","var isNumber = require('./isNumber');\n\n/**\n * Checks if `value` is `NaN`.\n *\n * **Note:** This method is based on\n * [`Number.isNaN`](https://mdn.io/Number/isNaN) and is not the same as\n * global [`isNaN`](https://mdn.io/isNaN) which returns `true` for\n * `undefined` and other non-number values.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n * @example\n *\n * _.isNaN(NaN);\n * // => true\n *\n * _.isNaN(new Number(NaN));\n * // => true\n *\n * isNaN(undefined);\n * // => true\n *\n * _.isNaN(undefined);\n * // => false\n */\nfunction isNaN(value) {\n  // An `NaN` primitive is the only value that is not equal to itself.\n  // Perform the `toStringTag` check first to avoid errors with some\n  // ActiveX objects in IE.\n  return isNumber(value) && value != +value;\n}\n\nmodule.exports = isNaN;\n","import {TypedContainer} from './_Base';\nimport {ContainableMap} from './utils/ContainableMap';\n\nexport class EventContainer extends TypedContainer<ContainableMap['EVENT']> {\n\tset_content(content: ContainableMap['EVENT']) {\n\t\tsuper.set_content(content);\n\t}\n}\n","import {TypedNode} from '../_Base';\nimport {EventContainer} from '../../containers/Event';\nimport {NodeContext} from '../../poly/NodeContext';\nimport {TypedContainerController} from '../utils/ContainerController';\nimport {NodeParamsConfig} from '../utils/params/ParamsConfig';\nimport {BaseCameraObjNodeType} from '../obj/_BaseCamera';\n\nexport class TypedEventNode<K extends NodeParamsConfig> extends TypedNode<'EVENT', BaseEventNodeType, K> {\n\tcontainer_controller: TypedContainerController<EventContainer> = new TypedContainerController<EventContainer>(\n\t\tthis,\n\t\tEventContainer\n\t);\n\tstatic node_context(): NodeContext {\n\t\treturn NodeContext.EVENT;\n\t}\n\n\tprivate _eval_all_params_on_dirty_bound = this._eval_all_params_on_dirty.bind(this);\n\tinitialize_base_node() {\n\t\t// this._init_display_flag({\n\t\t// \thas_display_flag: false\n\t\t// });\n\t\tthis.io.connections.init_inputs();\n\t\tthis.ui_data.set_layout_horizontal();\n\t\tthis.add_post_dirty_hook('_eval_all_params_on_dirty', this._eval_all_params_on_dirty_bound);\n\t}\n\tnode_sibbling(name: string): BaseEventNodeType | null {\n\t\treturn super.node_sibbling(name) as BaseEventNodeType | null;\n\t}\n\n\t// ensures that event nodes are cooked when scene is loaded\n\t_eval_all_params_on_dirty() {\n\t\tthis.params.eval_all();\n\t}\n\tprocess_event(event: Event, canvas: HTMLCanvasElement, camera_node: BaseCameraObjNodeType) {}\n}\n\nexport type BaseEventNodeType = TypedEventNode<any>;\nexport class BaseEventNodeClass extends TypedEventNode<any> {}\n","var toFinite = require('./toFinite');\n\n/**\n * Converts `value` to an integer.\n *\n * **Note:** This method is loosely based on\n * [`ToInteger`](http://www.ecma-international.org/ecma-262/7.0/#sec-tointeger).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted integer.\n * @example\n *\n * _.toInteger(3.2);\n * // => 3\n *\n * _.toInteger(Number.MIN_VALUE);\n * // => 0\n *\n * _.toInteger(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toInteger('3.2');\n * // => 3\n */\nfunction toInteger(value) {\n  var result = toFinite(value),\n      remainder = result % 1;\n\n  return result === result ? (remainder ? result - remainder : result) : 0;\n}\n\nmodule.exports = toInteger;\n","var baseDifference = require('./_baseDifference'),\n    baseFlatten = require('./_baseFlatten'),\n    baseRest = require('./_baseRest'),\n    isArrayLikeObject = require('./isArrayLikeObject');\n\n/**\n * Creates an array of `array` values not included in the other given arrays\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons. The order and references of result values are\n * determined by the first array.\n *\n * **Note:** Unlike `_.pullAll`, this method returns a new array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Array\n * @param {Array} array The array to inspect.\n * @param {...Array} [values] The values to exclude.\n * @returns {Array} Returns the new array of filtered values.\n * @see _.without, _.xor\n * @example\n *\n * _.difference([2, 1], [2, 3]);\n * // => [1]\n */\nvar difference = baseRest(function(array, values) {\n  return isArrayLikeObject(array)\n    ? baseDifference(array, baseFlatten(values, 1, isArrayLikeObject, true))\n    : [];\n});\n\nmodule.exports = difference;\n","import { Vector3 } from './Vector3.js';\nimport { Plane } from './Plane.js';\n\n/**\n * @author bhouston / http://clara.io\n * @author mrdoob / http://mrdoob.com/\n */\n\nvar _v0 = new Vector3();\nvar _v1 = new Vector3();\nvar _v2 = new Vector3();\nvar _v3 = new Vector3();\n\nvar _vab = new Vector3();\nvar _vac = new Vector3();\nvar _vbc = new Vector3();\nvar _vap = new Vector3();\nvar _vbp = new Vector3();\nvar _vcp = new Vector3();\n\nfunction Triangle( a, b, c ) {\n\n\tthis.a = ( a !== undefined ) ? a : new Vector3();\n\tthis.b = ( b !== undefined ) ? b : new Vector3();\n\tthis.c = ( c !== undefined ) ? c : new Vector3();\n\n}\n\nObject.assign( Triangle, {\n\n\tgetNormal: function ( a, b, c, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getNormal() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\ttarget.subVectors( c, b );\n\t\t_v0.subVectors( a, b );\n\t\ttarget.cross( _v0 );\n\n\t\tvar targetLengthSq = target.lengthSq();\n\t\tif ( targetLengthSq > 0 ) {\n\n\t\t\treturn target.multiplyScalar( 1 / Math.sqrt( targetLengthSq ) );\n\n\t\t}\n\n\t\treturn target.set( 0, 0, 0 );\n\n\t},\n\n\t// static/instance method to calculate barycentric coordinates\n\t// based on: http://www.blackpawn.com/texts/pointinpoly/default.html\n\tgetBarycoord: function ( point, a, b, c, target ) {\n\n\t\t_v0.subVectors( c, a );\n\t\t_v1.subVectors( b, a );\n\t\t_v2.subVectors( point, a );\n\n\t\tvar dot00 = _v0.dot( _v0 );\n\t\tvar dot01 = _v0.dot( _v1 );\n\t\tvar dot02 = _v0.dot( _v2 );\n\t\tvar dot11 = _v1.dot( _v1 );\n\t\tvar dot12 = _v1.dot( _v2 );\n\n\t\tvar denom = ( dot00 * dot11 - dot01 * dot01 );\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getBarycoord() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\t// collinear or singular triangle\n\t\tif ( denom === 0 ) {\n\n\t\t\t// arbitrary location outside of triangle?\n\t\t\t// not sure if this is the best idea, maybe should be returning undefined\n\t\t\treturn target.set( - 2, - 1, - 1 );\n\n\t\t}\n\n\t\tvar invDenom = 1 / denom;\n\t\tvar u = ( dot11 * dot02 - dot01 * dot12 ) * invDenom;\n\t\tvar v = ( dot00 * dot12 - dot01 * dot02 ) * invDenom;\n\n\t\t// barycentric coordinates must always sum to 1\n\t\treturn target.set( 1 - u - v, v, u );\n\n\t},\n\n\tcontainsPoint: function ( point, a, b, c ) {\n\n\t\tTriangle.getBarycoord( point, a, b, c, _v3 );\n\n\t\treturn ( _v3.x >= 0 ) && ( _v3.y >= 0 ) && ( ( _v3.x + _v3.y ) <= 1 );\n\n\t},\n\n\tgetUV: function ( point, p1, p2, p3, uv1, uv2, uv3, target ) {\n\n\t\tthis.getBarycoord( point, p1, p2, p3, _v3 );\n\n\t\ttarget.set( 0, 0 );\n\t\ttarget.addScaledVector( uv1, _v3.x );\n\t\ttarget.addScaledVector( uv2, _v3.y );\n\t\ttarget.addScaledVector( uv3, _v3.z );\n\n\t\treturn target;\n\n\t},\n\n\tisFrontFacing: function ( a, b, c, direction ) {\n\n\t\t_v0.subVectors( c, b );\n\t\t_v1.subVectors( a, b );\n\n\t\t// strictly front facing\n\t\treturn ( _v0.cross( _v1 ).dot( direction ) < 0 ) ? true : false;\n\n\t}\n\n} );\n\nObject.assign( Triangle.prototype, {\n\n\tset: function ( a, b, c ) {\n\n\t\tthis.a.copy( a );\n\t\tthis.b.copy( b );\n\t\tthis.c.copy( c );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromPointsAndIndices: function ( points, i0, i1, i2 ) {\n\n\t\tthis.a.copy( points[ i0 ] );\n\t\tthis.b.copy( points[ i1 ] );\n\t\tthis.c.copy( points[ i2 ] );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( triangle ) {\n\n\t\tthis.a.copy( triangle.a );\n\t\tthis.b.copy( triangle.b );\n\t\tthis.c.copy( triangle.c );\n\n\t\treturn this;\n\n\t},\n\n\tgetArea: function () {\n\n\t\t_v0.subVectors( this.c, this.b );\n\t\t_v1.subVectors( this.a, this.b );\n\n\t\treturn _v0.cross( _v1 ).length() * 0.5;\n\n\t},\n\n\tgetMidpoint: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getMidpoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.addVectors( this.a, this.b ).add( this.c ).multiplyScalar( 1 / 3 );\n\n\t},\n\n\tgetNormal: function ( target ) {\n\n\t\treturn Triangle.getNormal( this.a, this.b, this.c, target );\n\n\t},\n\n\tgetPlane: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .getPlane() target is now required' );\n\t\t\ttarget = new Plane();\n\n\t\t}\n\n\t\treturn target.setFromCoplanarPoints( this.a, this.b, this.c );\n\n\t},\n\n\tgetBarycoord: function ( point, target ) {\n\n\t\treturn Triangle.getBarycoord( point, this.a, this.b, this.c, target );\n\n\t},\n\n\tgetUV: function ( point, uv1, uv2, uv3, target ) {\n\n\t\treturn Triangle.getUV( point, this.a, this.b, this.c, uv1, uv2, uv3, target );\n\n\t},\n\n\tcontainsPoint: function ( point ) {\n\n\t\treturn Triangle.containsPoint( point, this.a, this.b, this.c );\n\n\t},\n\n\tisFrontFacing: function ( direction ) {\n\n\t\treturn Triangle.isFrontFacing( this.a, this.b, this.c, direction );\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\treturn box.intersectsTriangle( this );\n\n\t},\n\n\tclosestPointToPoint: function ( p, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Triangle: .closestPointToPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tvar a = this.a, b = this.b, c = this.c;\n\t\tvar v, w;\n\n\t\t// algorithm thanks to Real-Time Collision Detection by Christer Ericson,\n\t\t// published by Morgan Kaufmann Publishers, (c) 2005 Elsevier Inc.,\n\t\t// under the accompanying license; see chapter 5.1.5 for detailed explanation.\n\t\t// basically, we're distinguishing which of the voronoi regions of the triangle\n\t\t// the point lies in with the minimum amount of redundant computation.\n\n\t\t_vab.subVectors( b, a );\n\t\t_vac.subVectors( c, a );\n\t\t_vap.subVectors( p, a );\n\t\tvar d1 = _vab.dot( _vap );\n\t\tvar d2 = _vac.dot( _vap );\n\t\tif ( d1 <= 0 && d2 <= 0 ) {\n\n\t\t\t// vertex region of A; barycentric coords (1, 0, 0)\n\t\t\treturn target.copy( a );\n\n\t\t}\n\n\t\t_vbp.subVectors( p, b );\n\t\tvar d3 = _vab.dot( _vbp );\n\t\tvar d4 = _vac.dot( _vbp );\n\t\tif ( d3 >= 0 && d4 <= d3 ) {\n\n\t\t\t// vertex region of B; barycentric coords (0, 1, 0)\n\t\t\treturn target.copy( b );\n\n\t\t}\n\n\t\tvar vc = d1 * d4 - d3 * d2;\n\t\tif ( vc <= 0 && d1 >= 0 && d3 <= 0 ) {\n\n\t\t\tv = d1 / ( d1 - d3 );\n\t\t\t// edge region of AB; barycentric coords (1-v, v, 0)\n\t\t\treturn target.copy( a ).addScaledVector( _vab, v );\n\n\t\t}\n\n\t\t_vcp.subVectors( p, c );\n\t\tvar d5 = _vab.dot( _vcp );\n\t\tvar d6 = _vac.dot( _vcp );\n\t\tif ( d6 >= 0 && d5 <= d6 ) {\n\n\t\t\t// vertex region of C; barycentric coords (0, 0, 1)\n\t\t\treturn target.copy( c );\n\n\t\t}\n\n\t\tvar vb = d5 * d2 - d1 * d6;\n\t\tif ( vb <= 0 && d2 >= 0 && d6 <= 0 ) {\n\n\t\t\tw = d2 / ( d2 - d6 );\n\t\t\t// edge region of AC; barycentric coords (1-w, 0, w)\n\t\t\treturn target.copy( a ).addScaledVector( _vac, w );\n\n\t\t}\n\n\t\tvar va = d3 * d6 - d5 * d4;\n\t\tif ( va <= 0 && ( d4 - d3 ) >= 0 && ( d5 - d6 ) >= 0 ) {\n\n\t\t\t_vbc.subVectors( c, b );\n\t\t\tw = ( d4 - d3 ) / ( ( d4 - d3 ) + ( d5 - d6 ) );\n\t\t\t// edge region of BC; barycentric coords (0, 1-w, w)\n\t\t\treturn target.copy( b ).addScaledVector( _vbc, w ); // edge region of BC\n\n\t\t}\n\n\t\t// face region\n\t\tvar denom = 1 / ( va + vb + vc );\n\t\t// u = va * denom\n\t\tv = vb * denom;\n\t\tw = vc * denom;\n\n\t\treturn target.copy( a ).addScaledVector( _vab, v ).addScaledVector( _vac, w );\n\n\t},\n\n\tequals: function ( triangle ) {\n\n\t\treturn triangle.a.equals( this.a ) && triangle.b.equals( this.b ) && triangle.c.equals( this.c );\n\n\t}\n\n} );\n\n\nexport { Triangle };\n","// import {TypedParamVisitor} from './_Base';\nimport {TypedParam} from './_Base';\nimport {CoreWalker} from '../../core/Walker';\n\n// import {AsCodeOperatorPath} from './concerns/visitors/OperatorPath';\nimport {BaseNodeType} from '../nodes/_Base';\nimport {ParamType} from '../poly/ParamType';\n// import {ParamInitValuesTypeMap} from './types/ParamInitValuesTypeMap';\nimport {ParamValuesTypeMap} from './types/ParamValuesTypeMap';\nimport {ParamEvent} from '../poly/ParamEvent';\nimport {ParamInitValuesTypeMap} from './types/ParamInitValuesTypeMap';\n\nexport class OperatorPathParam extends TypedParam<ParamType.OPERATOR_PATH> {\n\tprivate _found_node: BaseNodeType | null = null;\n\n\tstatic type() {\n\t\treturn ParamType.OPERATOR_PATH;\n\t}\n\tget default_value_serialized() {\n\t\treturn this.default_value;\n\t}\n\tget raw_input_serialized() {\n\t\treturn `${this._raw_input}`;\n\t}\n\tget value_serialized() {\n\t\treturn `${this.value}`;\n\t}\n\tstatic are_raw_input_equal(\n\t\traw_input1: ParamInitValuesTypeMap[ParamType.OPERATOR_PATH],\n\t\traw_input2: ParamInitValuesTypeMap[ParamType.OPERATOR_PATH]\n\t) {\n\t\treturn raw_input1 == raw_input2;\n\t}\n\tstatic are_values_equal(\n\t\tval1: ParamValuesTypeMap[ParamType.OPERATOR_PATH],\n\t\tval2: ParamValuesTypeMap[ParamType.OPERATOR_PATH]\n\t) {\n\t\treturn val1 == val2;\n\t}\n\tget is_default(): boolean {\n\t\treturn this._value == this.default_value;\n\t}\n\tprotected process_raw_input() {\n\t\tthis._value = this._raw_input;\n\t\tthis.set_dirty();\n\t\tthis.emit_controller.emit(ParamEvent.VALUE_UPDATED);\n\t}\n\n\tprotected async process_computation() {\n\t\tconst path = this._value;\n\t\tlet node = null;\n\t\tconst path_non_empty = path != null && path !== '';\n\n\t\tif (path_non_empty) {\n\t\t\tnode = CoreWalker.find_node(this.node, path);\n\t\t\t// not sure I want the param to be errored,\n\t\t\t// as it may block the node, even if the param is not necessary\n\t\t\t// if (!node) {\n\t\t\t// \tthis.states.error.set('node not found');\n\t\t\t// }\n\t\t}\n\n\t\tif (this._found_node !== node) {\n\t\t\tconst dependent_on_found_node = this.options.dependent_on_found_node();\n\n\t\t\tif (this._found_node) {\n\t\t\t\tif (dependent_on_found_node) {\n\t\t\t\t\tthis.remove_graph_input(this._found_node);\n\t\t\t\t} else {\n\t\t\t\t\t// this._found_node.remove_param_referree(this) // TODO: typescript\n\t\t\t\t}\n\t\t\t}\n\t\t\tthis._found_node = node;\n\t\t\tif (node) {\n\t\t\t\tconst expected_context = this.options.node_selection_context;\n\t\t\t\tconst node_context = node.parent?.children_controller?.context;\n\t\t\t\tif (expected_context == node_context || expected_context == null) {\n\t\t\t\t\tif (dependent_on_found_node) {\n\t\t\t\t\t\tthis.add_graph_input(node);\n\t\t\t\t\t} else {\n\t\t\t\t\t\t// this._found_node.add_param_referree(this) // TODO: typescript\n\t\t\t\t\t}\n\t\t\t\t} else {\n\t\t\t\t\tthis.states.error.set(\n\t\t\t\t\t\t`node context is ${expected_context} but the params expects a ${node_context}`\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t} // else {\n\t\t\t// \tif (path_non_empty) {\n\t\t\t// \t\tthis.states.error.set('node not found');\n\t\t\t// \t}\n\t\t\t// }\n\t\t\tthis.options.execute_callback();\n\t\t}\n\t\tthis.remove_dirty_state();\n\t}\n\n\tfound_node() {\n\t\treturn this._found_node;\n\t}\n}\n","import { Quaternion } from './Quaternion.js';\nimport { Vector3 } from './Vector3.js';\nimport { Matrix4 } from './Matrix4.js';\nimport { MathUtils } from './MathUtils.js';\n\n/**\n * @author mrdoob / http://mrdoob.com/\n * @author WestLangley / http://github.com/WestLangley\n * @author bhouston / http://clara.io\n */\n\nvar _matrix = new Matrix4();\nvar _quaternion = new Quaternion();\n\nfunction Euler( x, y, z, order ) {\n\n\tthis._x = x || 0;\n\tthis._y = y || 0;\n\tthis._z = z || 0;\n\tthis._order = order || Euler.DefaultOrder;\n\n}\n\nEuler.RotationOrders = [ 'XYZ', 'YZX', 'ZXY', 'XZY', 'YXZ', 'ZYX' ];\n\nEuler.DefaultOrder = 'XYZ';\n\nObject.defineProperties( Euler.prototype, {\n\n\tx: {\n\n\t\tget: function () {\n\n\t\t\treturn this._x;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._x = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t},\n\n\ty: {\n\n\t\tget: function () {\n\n\t\t\treturn this._y;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._y = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t},\n\n\tz: {\n\n\t\tget: function () {\n\n\t\t\treturn this._z;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._z = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t},\n\n\torder: {\n\n\t\tget: function () {\n\n\t\t\treturn this._order;\n\n\t\t},\n\n\t\tset: function ( value ) {\n\n\t\t\tthis._order = value;\n\t\t\tthis._onChangeCallback();\n\n\t\t}\n\n\t}\n\n} );\n\nObject.assign( Euler.prototype, {\n\n\tisEuler: true,\n\n\tset: function ( x, y, z, order ) {\n\n\t\tthis._x = x;\n\t\tthis._y = y;\n\t\tthis._z = z;\n\t\tthis._order = order || this._order;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor( this._x, this._y, this._z, this._order );\n\n\t},\n\n\tcopy: function ( euler ) {\n\n\t\tthis._x = euler._x;\n\t\tthis._y = euler._y;\n\t\tthis._z = euler._z;\n\t\tthis._order = euler._order;\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromRotationMatrix: function ( m, order, update ) {\n\n\t\tvar clamp = MathUtils.clamp;\n\n\t\t// assumes the upper 3x3 of m is a pure rotation matrix (i.e, unscaled)\n\n\t\tvar te = m.elements;\n\t\tvar m11 = te[ 0 ], m12 = te[ 4 ], m13 = te[ 8 ];\n\t\tvar m21 = te[ 1 ], m22 = te[ 5 ], m23 = te[ 9 ];\n\t\tvar m31 = te[ 2 ], m32 = te[ 6 ], m33 = te[ 10 ];\n\n\t\torder = order || this._order;\n\n\t\tif ( order === 'XYZ' ) {\n\n\t\t\tthis._y = Math.asin( clamp( m13, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m13 ) < 0.9999999 ) {\n\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\tthis._z = Math.atan2( - m12, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\tthis._z = 0;\n\n\t\t\t}\n\n\t\t} else if ( order === 'YXZ' ) {\n\n\t\t\tthis._x = Math.asin( - clamp( m23, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m23 ) < 0.9999999 ) {\n\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\t\t\t\tthis._z = Math.atan2( m21, m22 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\t\t\t\tthis._z = 0;\n\n\t\t\t}\n\n\t\t} else if ( order === 'ZXY' ) {\n\n\t\t\tthis._x = Math.asin( clamp( m32, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m32 ) < 0.9999999 ) {\n\n\t\t\t\tthis._y = Math.atan2( - m31, m33 );\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._y = 0;\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t}\n\n\t\t} else if ( order === 'ZYX' ) {\n\n\t\t\tthis._y = Math.asin( - clamp( m31, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m31 ) < 0.9999999 ) {\n\n\t\t\t\tthis._x = Math.atan2( m32, m33 );\n\t\t\t\tthis._z = Math.atan2( m21, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._z = Math.atan2( - m12, m22 );\n\n\t\t\t}\n\n\t\t} else if ( order === 'YZX' ) {\n\n\t\t\tthis._z = Math.asin( clamp( m21, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m21 ) < 0.9999999 ) {\n\n\t\t\t\tthis._x = Math.atan2( - m23, m22 );\n\t\t\t\tthis._y = Math.atan2( - m31, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = 0;\n\t\t\t\tthis._y = Math.atan2( m13, m33 );\n\n\t\t\t}\n\n\t\t} else if ( order === 'XZY' ) {\n\n\t\t\tthis._z = Math.asin( - clamp( m12, - 1, 1 ) );\n\n\t\t\tif ( Math.abs( m12 ) < 0.9999999 ) {\n\n\t\t\t\tthis._x = Math.atan2( m32, m22 );\n\t\t\t\tthis._y = Math.atan2( m13, m11 );\n\n\t\t\t} else {\n\n\t\t\t\tthis._x = Math.atan2( - m23, m33 );\n\t\t\t\tthis._y = 0;\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tconsole.warn( 'THREE.Euler: .setFromRotationMatrix() given unsupported order: ' + order );\n\n\t\t}\n\n\t\tthis._order = order;\n\n\t\tif ( update !== false ) this._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\tsetFromQuaternion: function ( q, order, update ) {\n\n\t\t_matrix.makeRotationFromQuaternion( q );\n\n\t\treturn this.setFromRotationMatrix( _matrix, order, update );\n\n\t},\n\n\tsetFromVector3: function ( v, order ) {\n\n\t\treturn this.set( v.x, v.y, v.z, order || this._order );\n\n\t},\n\n\treorder: function ( newOrder ) {\n\n\t\t// WARNING: this discards revolution information -bhouston\n\n\t\t_quaternion.setFromEuler( this );\n\n\t\treturn this.setFromQuaternion( _quaternion, newOrder );\n\n\t},\n\n\tequals: function ( euler ) {\n\n\t\treturn ( euler._x === this._x ) && ( euler._y === this._y ) && ( euler._z === this._z ) && ( euler._order === this._order );\n\n\t},\n\n\tfromArray: function ( array ) {\n\n\t\tthis._x = array[ 0 ];\n\t\tthis._y = array[ 1 ];\n\t\tthis._z = array[ 2 ];\n\t\tif ( array[ 3 ] !== undefined ) this._order = array[ 3 ];\n\n\t\tthis._onChangeCallback();\n\n\t\treturn this;\n\n\t},\n\n\ttoArray: function ( array, offset ) {\n\n\t\tif ( array === undefined ) array = [];\n\t\tif ( offset === undefined ) offset = 0;\n\n\t\tarray[ offset ] = this._x;\n\t\tarray[ offset + 1 ] = this._y;\n\t\tarray[ offset + 2 ] = this._z;\n\t\tarray[ offset + 3 ] = this._order;\n\n\t\treturn array;\n\n\t},\n\n\ttoVector3: function ( optionalResult ) {\n\n\t\tif ( optionalResult ) {\n\n\t\t\treturn optionalResult.set( this._x, this._y, this._z );\n\n\t\t} else {\n\n\t\t\treturn new Vector3( this._x, this._y, this._z );\n\n\t\t}\n\n\t},\n\n\t_onChange: function ( callback ) {\n\n\t\tthis._onChangeCallback = callback;\n\n\t\treturn this;\n\n\t},\n\n\t_onChangeCallback: function () {}\n\n} );\n\n\nexport { Euler };\n","import lodash_isNumber from 'lodash/isNumber';\nimport lodash_isBoolean from 'lodash/isBoolean';\n// import lodash_includes from 'lodash/includes'\nimport lodash_isString from 'lodash/isString';\nimport {TypedNumericParam} from './_Numeric';\nimport {ParamType} from '../poly/ParamType';\nimport {CoreString} from '../../core/String';\nimport {ParamValuesTypeMap} from './types/ParamValuesTypeMap';\nimport {ParamInitValuesTypeMap} from './types/ParamInitValuesTypeMap';\n\nexport class BooleanParam extends TypedNumericParam<ParamType.BOOLEAN> {\n\tstatic type() {\n\t\treturn ParamType.BOOLEAN;\n\t}\n\t// TODO: be careful as this does not allow serialization of expressions as default value\n\tget default_value_serialized() {\n\t\tif (lodash_isString(this.default_value)) {\n\t\t\treturn this.default_value;\n\t\t} else {\n\t\t\treturn this.convert(this.default_value) || false;\n\t\t}\n\t}\n\tget raw_input_serialized() {\n\t\treturn this._raw_input;\n\t}\n\tget value_serialized() {\n\t\treturn this.value;\n\t}\n\tstatic are_raw_input_equal(\n\t\traw_input1: ParamInitValuesTypeMap[ParamType.BOOLEAN],\n\t\traw_input2: ParamInitValuesTypeMap[ParamType.BOOLEAN]\n\t) {\n\t\treturn raw_input1 == raw_input2;\n\t}\n\tstatic are_values_equal(val1: ParamValuesTypeMap[ParamType.BOOLEAN], val2: ParamValuesTypeMap[ParamType.BOOLEAN]) {\n\t\treturn val1 == val2;\n\t}\n\tconvert(raw_val: ParamInitValuesTypeMap[ParamType.BOOLEAN]): boolean | null {\n\t\tif (lodash_isBoolean(raw_val)) {\n\t\t\treturn raw_val;\n\t\t} else {\n\t\t\tif (lodash_isNumber(raw_val)) {\n\t\t\t\treturn raw_val >= 1;\n\t\t\t} else {\n\t\t\t\tif (lodash_isString(raw_val)) {\n\t\t\t\t\tif (CoreString.is_boolean(raw_val)) {\n\t\t\t\t\t\treturn CoreString.to_boolean(raw_val);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tif (CoreString.is_number(raw_val)) {\n\t\t\t\t\t\t\tconst parsed = parseFloat(raw_val);\n\t\t\t\t\t\t\treturn parsed >= 1;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\t// convert_value(v: ParamInputValue): boolean {\n\t// \treturn this.value_to_boolean(v)\n\t// }\n\t// convert_default_value(v: ParamInputValue): number {\n\t// \tif (lodash_isString(v)) {\n\t// \t\treturn v\n\t// \t} else {\n\t// \t\treturn this.value_to_boolean(v) // ? 1 : 0\n\t// \t}\n\t// }\n\t// is_value_expression(v: ParamInputValue): boolean {\n\t// \treturn !lodash_includes([true, false, 0, 1, '0', '1'], v)\n\t// }\n\n\t// value_to_boolean(v: ParamInputValue): boolean {\n\t// \tif (lodash_isBoolean(v)) {\n\t// \t\treturn v\n\t// \t} else {\n\t// \t\tif (lodash_isNumber(v)) {\n\t// \t\t\treturn v > 0\n\t// \t\t} else {\n\t// \t\t\treturn parseInt(v) > 0\n\t// \t\t}\n\t// \t}\n\t// }\n\n\t// eval(callback) {\n\t// \treturn this.eval_raw((val) => {\n\t// \t\tconst boolean_result = this.value_to_boolean(val)\n\t// \t\treturn callback(boolean_result)\n\t// \t})\n\t// }\n}\n","import {TypedParam} from './_Base';\nimport {ParamType} from '../poly/ParamType';\nimport {ParamValuesTypeMap} from './types/ParamValuesTypeMap';\nimport {ParamInitValuesTypeMap} from './types/ParamInitValuesTypeMap';\n\nexport class ButtonParam extends TypedParam<ParamType.BUTTON> {\n\tstatic type() {\n\t\treturn ParamType.BUTTON;\n\t}\n\tget default_value_serialized() {\n\t\treturn this.default_value;\n\t}\n\tget raw_input_serialized() {\n\t\treturn this._raw_input;\n\t}\n\tget value_serialized() {\n\t\treturn this.value;\n\t}\n\tstatic are_raw_input_equal(\n\t\traw_input1: ParamInitValuesTypeMap[ParamType.BUTTON],\n\t\traw_input2: ParamInitValuesTypeMap[ParamType.BUTTON]\n\t) {\n\t\treturn true;\n\t}\n\tstatic are_values_equal(val1: ParamValuesTypeMap[ParamType.BUTTON], val2: ParamValuesTypeMap[ParamType.BUTTON]) {\n\t\treturn true;\n\t}\n\tpress_button() {\n\t\tthis.options.execute_callback();\n\t}\n}\n","import {TypedMultipleParam} from './_Multiple';\nimport lodash_isArray from 'lodash/isArray';\n// import lodash_isNumber from 'lodash/isNumber';\nimport {Color} from 'three/src/math/Color';\nimport {ParamType} from '../poly/ParamType';\nimport {FloatParam} from './Float';\nimport {ParamValuesTypeMap} from './types/ParamValuesTypeMap';\nimport {ParamInitValuesTypeMap} from './types/ParamInitValuesTypeMap';\n\n// import {ParamInitValuesTypeMap} from '../nodes/utils/params/ParamsController';\n\nconst COMPONENT_NAMES_COLOR = ['r', 'g', 'b'];\nexport class ColorParam extends TypedMultipleParam<ParamType.COLOR> {\n\tprotected _value = new Color();\n\tr!: FloatParam;\n\tg!: FloatParam;\n\tb!: FloatParam;\n\tstatic type() {\n\t\treturn ParamType.COLOR;\n\t}\n\tstatic get component_names() {\n\t\treturn COMPONENT_NAMES_COLOR;\n\t}\n\tget default_value_serialized() {\n\t\tif (lodash_isArray(this.default_value)) {\n\t\t\treturn this.default_value;\n\t\t} else {\n\t\t\treturn this.default_value.toArray() as Number3;\n\t\t}\n\t}\n\t// get raw_input_serialized() {\n\t// \tif (this._raw_input instanceof Color) {\n\t// \t\treturn this._raw_input.toArray() as Number3;\n\t// \t} else {\n\t// \t\tconst new_array: StringOrNumber3 = [this._raw_input[0], this._raw_input[1], this._raw_input[2]];\n\t// \t\treturn new_array;\n\t// \t}\n\t// }\n\tget value_serialized() {\n\t\treturn this.value.toArray() as Number3;\n\t}\n\tprotected _clone_raw_input(raw_input: ParamInitValuesTypeMap[ParamType.COLOR]) {\n\t\tif (raw_input instanceof Color) {\n\t\t\treturn raw_input.clone();\n\t\t} else {\n\t\t\tconst new_array: StringOrNumber3 = [raw_input[0], raw_input[1], raw_input[2]];\n\t\t\treturn new_array;\n\t\t}\n\t}\n\tstatic are_raw_input_equal(\n\t\traw_input1: ParamInitValuesTypeMap[ParamType.COLOR],\n\t\traw_input2: ParamInitValuesTypeMap[ParamType.COLOR]\n\t) {\n\t\tif (raw_input1 instanceof Color) {\n\t\t\tif (raw_input2 instanceof Color) {\n\t\t\t\treturn raw_input1.equals(raw_input2);\n\t\t\t} else {\n\t\t\t\treturn raw_input1.r == raw_input2[0] && raw_input1.g == raw_input2[1] && raw_input1.b == raw_input2[2];\n\t\t\t}\n\t\t} else {\n\t\t\tif (raw_input2 instanceof Color) {\n\t\t\t\treturn raw_input1[0] == raw_input2.r && raw_input1[1] == raw_input2.g && raw_input1[2] == raw_input2.b;\n\t\t\t} else {\n\t\t\t\treturn (\n\t\t\t\t\traw_input1[0] == raw_input2[0] && raw_input1[1] == raw_input2[1] && raw_input1[2] == raw_input2[2]\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\tstatic are_values_equal(val1: ParamValuesTypeMap[ParamType.COLOR], val2: ParamValuesTypeMap[ParamType.COLOR]) {\n\t\treturn val1.equals(val2);\n\t}\n\tinit_components() {\n\t\tsuper.init_components();\n\t\tthis.r = this.components[0];\n\t\tthis.g = this.components[1];\n\t\tthis.b = this.components[2];\n\t}\n\t// set_raw_input_from_components() {\n\t// \tif (this._raw_input instanceof Color) {\n\t// \t\tif (\n\t// \t\t\tlodash_isNumber(this.r.raw_input) &&\n\t// \t\t\tlodash_isNumber(this.g.raw_input) &&\n\t// \t\t\tlodash_isNumber(this.b.raw_input)\n\t// \t\t) {\n\t// \t\t\tthis._raw_input.r = this.r.raw_input;\n\t// \t\t\tthis._raw_input.g = this.g.raw_input;\n\t// \t\t\tthis._raw_input.b = this.b.raw_input;\n\t// \t\t} else {\n\t// \t\t\tthis._raw_input = [this.r.raw_input, this.g.raw_input, this.b.raw_input];\n\t// \t\t}\n\t// \t} else {\n\t// \t\tthis._raw_input[0] = this.r.raw_input;\n\t// \t\tthis._raw_input[1] = this.g.raw_input;\n\t// \t\tthis._raw_input[2] = this.b.raw_input;\n\t// \t}\n\t// }\n\tset_value_from_components() {\n\t\tthis._value.r = this.r.value;\n\t\tthis._value.g = this.g.value;\n\t\tthis._value.b = this.b.value;\n\t}\n\t// convert(input: ParamInitValuesTypeMap[ParamType.COLOR]): Color | null {\n\t// \tif (lodash_isArray(input)) {\n\t// \t\tif(input.length == 3){\n\t// \t\t\tif( input.filter(lodash_isNumber).length > 0 ){\n\t// \t\t\t\treturn new Color().fromArray(input);\n\t// \t\t\t}\n\t// \t\t\tif(first){\n\t// \t\t\t\tif(lodash_isNumber(first)){\n\t// \t\t\t\t\treturn new Color().fromArray(input);\n\t// \t\t\t\t}\n\t// \t\t\t}\n\t// \t\t}\n\t// \t}\n\t// \treturn new Color();\n\t// }\n}\n","import {TypedParam} from './_Base';\nimport {ParamType} from '../poly/ParamType';\nimport {ParamValuesTypeMap} from './types/ParamValuesTypeMap';\nimport {ParamInitValuesTypeMap} from './types/ParamInitValuesTypeMap';\n\nexport class FolderParam extends TypedParam<ParamType.FOLDER> {\n\tstatic type() {\n\t\treturn ParamType.FOLDER;\n\t}\n\tget default_value_serialized() {\n\t\treturn this.default_value;\n\t}\n\tget raw_input_serialized() {\n\t\treturn this._raw_input;\n\t}\n\tget value_serialized() {\n\t\treturn this.value;\n\t}\n\tstatic are_raw_input_equal(\n\t\traw_input1: ParamInitValuesTypeMap[ParamType.FOLDER],\n\t\traw_input2: ParamInitValuesTypeMap[ParamType.FOLDER]\n\t) {\n\t\treturn true;\n\t}\n\tstatic are_values_equal(val1: ParamValuesTypeMap[ParamType.FOLDER], val2: ParamValuesTypeMap[ParamType.FOLDER]) {\n\t\treturn true;\n\t}\n}\n","import lodash_isNumber from 'lodash/isNumber';\n// import lodash_isBoolean from 'lodash/isBoolean'\n\nimport {TypedNumericParam} from './_Numeric';\nimport {ParamType} from '../poly/ParamType';\nimport {CoreString} from '../../core/String';\nimport {ParamInitValuesTypeMap} from './types/ParamInitValuesTypeMap';\nimport {ParamValuesTypeMap} from './types/ParamValuesTypeMap';\n\nexport class IntegerParam extends TypedNumericParam<ParamType.INTEGER> {\n\tstatic type() {\n\t\treturn ParamType.INTEGER;\n\t}\n\tget default_value_serialized() {\n\t\treturn this.default_value;\n\t}\n\tget raw_input_serialized() {\n\t\treturn this.raw_input;\n\t}\n\tget value_serialized() {\n\t\treturn this.value;\n\t}\n\n\tstatic are_raw_input_equal(\n\t\traw_input1: ParamInitValuesTypeMap[ParamType.INTEGER],\n\t\traw_input2: ParamInitValuesTypeMap[ParamType.INTEGER]\n\t) {\n\t\treturn raw_input1 == raw_input2;\n\t}\n\tstatic are_values_equal(val1: ParamValuesTypeMap[ParamType.INTEGER], val2: ParamValuesTypeMap[ParamType.INTEGER]) {\n\t\treturn val1 == val2;\n\t}\n\tstatic convert(raw_val: ParamInitValuesTypeMap[ParamType.INTEGER]): number | null {\n\t\tif (lodash_isNumber(raw_val)) {\n\t\t\treturn Math.round(raw_val);\n\t\t} else {\n\t\t\tif (CoreString.is_number(raw_val)) {\n\t\t\t\tconst parsed = parseInt(raw_val);\n\t\t\t\tif (lodash_isNumber(parsed)) {\n\t\t\t\t\treturn parsed;\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn null;\n\t\t}\n\t}\n\tconvert(raw_val: ParamInitValuesTypeMap[ParamType.INTEGER]): number | null {\n\t\tconst result = IntegerParam.convert(raw_val);\n\t\tif (result) {\n\t\t\treturn this.options.ensure_in_range(result);\n\t\t} else {\n\t\t\treturn result;\n\t\t}\n\t}\n}\n","import {TypedParam} from './_Base';\nimport {ParamType} from '../poly/ParamType';\nimport {ParamValuesTypeMap} from './types/ParamValuesTypeMap';\nimport {ParamInitValuesTypeMap} from './types/ParamInitValuesTypeMap';\n\nexport class SeparatorParam extends TypedParam<ParamType.SEPARATOR> {\n\tstatic type() {\n\t\treturn ParamType.SEPARATOR;\n\t}\n\tget default_value_serialized() {\n\t\treturn this.default_value;\n\t}\n\tget raw_input_serialized() {\n\t\treturn this._raw_input;\n\t}\n\tget value_serialized() {\n\t\treturn this.value;\n\t}\n\tstatic are_raw_input_equal(\n\t\traw_input1: ParamInitValuesTypeMap[ParamType.SEPARATOR],\n\t\traw_input2: ParamInitValuesTypeMap[ParamType.SEPARATOR]\n\t) {\n\t\treturn true;\n\t}\n\tstatic are_values_equal(\n\t\tval1: ParamValuesTypeMap[ParamType.SEPARATOR],\n\t\tval2: ParamValuesTypeMap[ParamType.SEPARATOR]\n\t) {\n\t\treturn true;\n\t}\n}\n","import {TypedMultipleParam} from './_Multiple';\n\nimport lodash_isArray from 'lodash/isArray';\nimport {Vector2} from 'three/src/math/Vector2';\nimport {ParamType} from '../poly/ParamType';\nimport {FloatParam} from './Float';\nimport {ParamValuesTypeMap} from './types/ParamValuesTypeMap';\nimport {ParamInitValuesTypeMap} from './types/ParamInitValuesTypeMap';\n\nconst COMPONENT_NAMES_VECTOR2 = ['x', 'y'];\nexport class Vector2Param extends TypedMultipleParam<ParamType.VECTOR2> {\n\tprotected _value = new Vector2();\n\tx!: FloatParam;\n\ty!: FloatParam;\n\tstatic type() {\n\t\treturn ParamType.VECTOR2;\n\t}\n\n\tstatic get component_names() {\n\t\treturn COMPONENT_NAMES_VECTOR2;\n\t}\n\tget default_value_serialized() {\n\t\tif (lodash_isArray(this.default_value)) {\n\t\t\treturn this.default_value;\n\t\t} else {\n\t\t\treturn this.default_value.toArray() as Number2;\n\t\t}\n\t}\n\t// get raw_input_serialized() {\n\t// \tif (this._raw_input instanceof Vector2) {\n\t// \t\treturn this._raw_input.toArray() as Number2;\n\t// \t} else {\n\t// \t\tconst new_array: StringOrNumber2 = [this._raw_input[0], this._raw_input[1]];\n\t// \t\treturn new_array;\n\t// \t}\n\t// }\n\tget value_serialized() {\n\t\treturn this.value.toArray() as Number2;\n\t}\n\tprotected _clone_raw_input(raw_input: ParamInitValuesTypeMap[ParamType.VECTOR2]) {\n\t\tif (raw_input instanceof Vector2) {\n\t\t\treturn raw_input.clone();\n\t\t} else {\n\t\t\tconst new_array: StringOrNumber2 = [raw_input[0], raw_input[1]];\n\t\t\treturn new_array;\n\t\t}\n\t}\n\tstatic are_raw_input_equal(\n\t\traw_input1: ParamInitValuesTypeMap[ParamType.VECTOR2],\n\t\traw_input2: ParamInitValuesTypeMap[ParamType.VECTOR2]\n\t) {\n\t\tif (raw_input1 instanceof Vector2) {\n\t\t\tif (raw_input2 instanceof Vector2) {\n\t\t\t\treturn raw_input1.equals(raw_input2);\n\t\t\t} else {\n\t\t\t\treturn raw_input1.x == raw_input2[0] && raw_input1.y == raw_input2[1];\n\t\t\t}\n\t\t} else {\n\t\t\tif (raw_input2 instanceof Vector2) {\n\t\t\t\treturn raw_input1[0] == raw_input2.x && raw_input1[1] == raw_input2.y;\n\t\t\t} else {\n\t\t\t\treturn raw_input1[0] == raw_input2[0] && raw_input1[1] == raw_input2[1];\n\t\t\t}\n\t\t}\n\t}\n\tstatic are_values_equal(val1: ParamValuesTypeMap[ParamType.VECTOR2], val2: ParamValuesTypeMap[ParamType.VECTOR2]) {\n\t\treturn val1.equals(val2);\n\t}\n\tinit_components() {\n\t\tsuper.init_components();\n\t\tthis.x = this.components[0];\n\t\tthis.y = this.components[1];\n\t}\n\n\tset_value_from_components() {\n\t\tthis._value.x = this.x.value;\n\t\tthis._value.y = this.y.value;\n\t}\n\t// convert(input: any) {\n\t// \tif (lodash_isArray(input)) {\n\t// \t\treturn new Vector2().fromArray(input);\n\t// \t}\n\t// \treturn new Vector2();\n\t// }\n}\n","import {TypedMultipleParam} from './_Multiple';\nimport lodash_isArray from 'lodash/isArray';\n// import lodash_isNumber from 'lodash/isNumber';\nimport {FloatParam} from './Float';\nimport {Vector3} from 'three/src/math/Vector3';\nimport {ParamType} from '../poly/ParamType';\nimport {ParamValuesTypeMap} from './types/ParamValuesTypeMap';\nimport {ParamInitValuesTypeMap} from './types/ParamInitValuesTypeMap';\n// import {ParamInitValuesTypeMap} from '../nodes/utils/params/ParamsController';\n\nconst COMPONENT_NAMES_VECTOR3 = ['x', 'y', 'z'];\nexport class Vector3Param extends TypedMultipleParam<ParamType.VECTOR3> {\n\tprotected _value = new Vector3();\n\tx!: FloatParam;\n\ty!: FloatParam;\n\tz!: FloatParam;\n\tstatic type() {\n\t\treturn ParamType.VECTOR3;\n\t}\n\tstatic get component_names() {\n\t\treturn COMPONENT_NAMES_VECTOR3;\n\t}\n\tget default_value_serialized() {\n\t\tif (lodash_isArray(this.default_value)) {\n\t\t\treturn this.default_value;\n\t\t} else {\n\t\t\treturn this.default_value.toArray() as Number3;\n\t\t}\n\t}\n\t// get raw_input_serialized() {\n\t// \tif (this._raw_input instanceof Vector3) {\n\t// \t\treturn this._raw_input.toArray() as Number3;\n\t// \t} else {\n\t// \t\tconst new_array: StringOrNumber3 = [this._raw_input[0], this._raw_input[1], this._raw_input[2]];\n\t// \t\treturn new_array;\n\t// \t}\n\t// }\n\tget value_serialized() {\n\t\treturn this.value.toArray() as Number3;\n\t}\n\tprotected _clone_raw_input(raw_input: ParamInitValuesTypeMap[ParamType.VECTOR3]) {\n\t\tif (raw_input instanceof Vector3) {\n\t\t\treturn raw_input.clone();\n\t\t} else {\n\t\t\tconst new_array: StringOrNumber3 = [raw_input[0], raw_input[1], raw_input[2]];\n\t\t\treturn new_array;\n\t\t}\n\t}\n\n\tstatic are_raw_input_equal(\n\t\traw_input1: ParamInitValuesTypeMap[ParamType.VECTOR3],\n\t\traw_input2: ParamInitValuesTypeMap[ParamType.VECTOR3]\n\t) {\n\t\tif (raw_input1 instanceof Vector3) {\n\t\t\tif (raw_input2 instanceof Vector3) {\n\t\t\t\treturn raw_input1.equals(raw_input2);\n\t\t\t} else {\n\t\t\t\treturn raw_input1.x == raw_input2[0] && raw_input1.y == raw_input2[1] && raw_input1.z == raw_input2[2];\n\t\t\t}\n\t\t} else {\n\t\t\tif (raw_input2 instanceof Vector3) {\n\t\t\t\treturn raw_input1[0] == raw_input2.x && raw_input1[1] == raw_input2.y && raw_input1[2] == raw_input2.z;\n\t\t\t} else {\n\t\t\t\treturn (\n\t\t\t\t\traw_input1[0] == raw_input2[0] && raw_input1[1] == raw_input2[1] && raw_input1[2] == raw_input2[2]\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\tstatic are_values_equal(val1: ParamValuesTypeMap[ParamType.VECTOR3], val2: ParamValuesTypeMap[ParamType.VECTOR3]) {\n\t\treturn val1.equals(val2);\n\t}\n\tinit_components() {\n\t\tsuper.init_components();\n\t\tthis.x = this.components[0];\n\t\tthis.y = this.components[1];\n\t\tthis.z = this.components[2];\n\t}\n\n\t// set_raw_input_from_components() {\n\t// \tif (this._raw_input instanceof Vector3) {\n\t// \t\tif (\n\t// \t\t\tlodash_isNumber(this.x.raw_input) &&\n\t// \t\t\tlodash_isNumber(this.y.raw_input) &&\n\t// \t\t\tlodash_isNumber(this.z.raw_input)\n\t// \t\t) {\n\t// \t\t\tthis._raw_input.x = this.x.raw_input;\n\t// \t\t\tthis._raw_input.y = this.y.raw_input;\n\t// \t\t\tthis._raw_input.z = this.z.raw_input;\n\t// \t\t} else {\n\t// \t\t\tthis._raw_input = [this.x.raw_input, this.y.raw_input, this.z.raw_input];\n\t// \t\t}\n\t// \t} else {\n\t// \t\tthis._raw_input[0] = this.x.raw_input;\n\t// \t\tthis._raw_input[1] = this.y.raw_input;\n\t// \t\tthis._raw_input[2] = this.z.raw_input;\n\t// \t}\n\t// }\n\tset_value_from_components() {\n\t\tthis._value.x = this.x.value;\n\t\tthis._value.y = this.y.value;\n\t\tthis._value.z = this.z.value;\n\t}\n\t// convert(input: ParamInitValuesTypeMap[ParamType.VECTOR3]) {\n\t// \tif (lodash_isArray(input)) {\n\t// \t\treturn new Vector3().fromArray(input);\n\t// \t}\n\t// \treturn new Vector3();\n\t// }\n}\n","import {TypedMultipleParam} from './_Multiple';\n\nimport lodash_isArray from 'lodash/isArray';\nimport {Vector4} from 'three/src/math/Vector4';\nimport {ParamType} from '../poly/ParamType';\nimport {FloatParam} from './Float';\nimport {ParamValuesTypeMap} from './types/ParamValuesTypeMap';\nimport {ParamInitValuesTypeMap} from './types/ParamInitValuesTypeMap';\n\nconst COMPONENT_NAMES_VECTOR4 = ['x', 'y', 'z', 'w'];\nexport class Vector4Param extends TypedMultipleParam<ParamType.VECTOR4> {\n\tprotected _value = new Vector4();\n\tx!: FloatParam;\n\ty!: FloatParam;\n\tz!: FloatParam;\n\tw!: FloatParam;\n\tstatic type() {\n\t\treturn ParamType.VECTOR4;\n\t}\n\tstatic get component_names() {\n\t\treturn COMPONENT_NAMES_VECTOR4;\n\t}\n\tget default_value_serialized() {\n\t\tif (lodash_isArray(this.default_value)) {\n\t\t\treturn this.default_value;\n\t\t} else {\n\t\t\treturn this.default_value.toArray() as Number4;\n\t\t}\n\t}\n\t// get raw_input_serialized() {\n\t// \tif (this._raw_input instanceof Vector4) {\n\t// \t\treturn this._raw_input.toArray() as Number4;\n\t// \t} else {\n\t// \t\tconst new_array: StringOrNumber4 = [\n\t// \t\t\tthis._raw_input[0],\n\t// \t\t\tthis._raw_input[1],\n\t// \t\t\tthis._raw_input[2],\n\t// \t\t\tthis._raw_input[3],\n\t// \t\t];\n\t// \t\treturn new_array;\n\t// \t}\n\t// }\n\tget value_serialized() {\n\t\treturn this.value.toArray() as Number4;\n\t}\n\n\tprotected _clone_raw_input(raw_input: ParamInitValuesTypeMap[ParamType.VECTOR4]) {\n\t\tif (raw_input instanceof Vector4) {\n\t\t\treturn raw_input.clone();\n\t\t} else {\n\t\t\tconst new_array: StringOrNumber4 = [raw_input[0], raw_input[1], raw_input[2], raw_input[3]];\n\t\t\treturn new_array;\n\t\t}\n\t}\n\tstatic are_raw_input_equal(\n\t\traw_input1: ParamInitValuesTypeMap[ParamType.VECTOR4],\n\t\traw_input2: ParamInitValuesTypeMap[ParamType.VECTOR4]\n\t) {\n\t\tif (raw_input1 instanceof Vector4) {\n\t\t\tif (raw_input2 instanceof Vector4) {\n\t\t\t\treturn raw_input1.equals(raw_input2);\n\t\t\t} else {\n\t\t\t\treturn (\n\t\t\t\t\traw_input1.x == raw_input2[0] &&\n\t\t\t\t\traw_input1.y == raw_input2[1] &&\n\t\t\t\t\traw_input1.z == raw_input2[2] &&\n\t\t\t\t\traw_input1.w == raw_input2[3]\n\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\tif (raw_input2 instanceof Vector4) {\n\t\t\t\treturn (\n\t\t\t\t\traw_input1[0] == raw_input2.x &&\n\t\t\t\t\traw_input1[1] == raw_input2.y &&\n\t\t\t\t\traw_input1[2] == raw_input2.z &&\n\t\t\t\t\traw_input1[3] == raw_input2.w\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\treturn (\n\t\t\t\t\traw_input1[0] == raw_input2[0] &&\n\t\t\t\t\traw_input1[1] == raw_input2[1] &&\n\t\t\t\t\traw_input1[2] == raw_input2[2] &&\n\t\t\t\t\traw_input1[3] == raw_input2[3]\n\t\t\t\t);\n\t\t\t}\n\t\t}\n\t}\n\tstatic are_values_equal(val1: ParamValuesTypeMap[ParamType.VECTOR4], val2: ParamValuesTypeMap[ParamType.VECTOR4]) {\n\t\treturn val1.equals(val2);\n\t}\n\tinit_components() {\n\t\tsuper.init_components();\n\t\tthis.x = this.components[0];\n\t\tthis.y = this.components[1];\n\t\tthis.z = this.components[2];\n\t\tthis.w = this.components[3];\n\t}\n\n\tset_value_from_components() {\n\t\tthis._value.x = this.x.value;\n\t\tthis._value.y = this.y.value;\n\t\tthis._value.z = this.z.value;\n\t\tthis._value.w = this.w.value;\n\t}\n\t// convert(input: any) {\n\t// \tif (lodash_isArray(input)) {\n\t// \t\treturn new Vector4().fromArray(input);\n\t// \t}\n\t// \treturn new Vector4();\n\t// }\n}\n","import {BooleanParam} from '../Boolean';\nimport {ButtonParam} from '../Button';\nimport {ColorParam} from '../Color';\nimport {FloatParam} from '../Float';\nimport {FolderParam} from '../Folder';\nimport {IntegerParam} from '../Integer';\nimport {OperatorPathParam} from '../OperatorPath';\nimport {RampParam} from '../Ramp';\nimport {SeparatorParam} from '../Separator';\nimport {StringParam} from '../String';\nimport {Vector2Param} from '../Vector2';\nimport {Vector3Param} from '../Vector3';\nimport {Vector4Param} from '../Vector4';\n\nimport {ParamType} from '../../poly/ParamType';\n\ntype ParamClassMapType = {[key in ParamType]: any};\nexport const ParamConstructorByType: ParamClassMapType = {\n\t[ParamType.BOOLEAN]: BooleanParam,\n\t[ParamType.BUTTON]: ButtonParam,\n\t[ParamType.COLOR]: ColorParam,\n\t[ParamType.FLOAT]: FloatParam,\n\t[ParamType.FOLDER]: FolderParam,\n\t[ParamType.INTEGER]: IntegerParam,\n\t[ParamType.OPERATOR_PATH]: OperatorPathParam,\n\t[ParamType.RAMP]: RampParam,\n\t[ParamType.SEPARATOR]: SeparatorParam,\n\t[ParamType.STRING]: StringParam,\n\t[ParamType.VECTOR2]: Vector2Param,\n\t[ParamType.VECTOR3]: Vector3Param,\n\t[ParamType.VECTOR4]: Vector4Param,\n};\n","import { Matrix3 } from './Matrix3.js';\nimport { Vector3 } from './Vector3.js';\n\n/**\n * @author bhouston / http://clara.io\n */\n\nvar _vector1 = new Vector3();\nvar _vector2 = new Vector3();\nvar _normalMatrix = new Matrix3();\n\nfunction Plane( normal, constant ) {\n\n\t// normal is assumed to be normalized\n\n\tthis.normal = ( normal !== undefined ) ? normal : new Vector3( 1, 0, 0 );\n\tthis.constant = ( constant !== undefined ) ? constant : 0;\n\n}\n\nObject.assign( Plane.prototype, {\n\n\tisPlane: true,\n\n\tset: function ( normal, constant ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = constant;\n\n\t\treturn this;\n\n\t},\n\n\tsetComponents: function ( x, y, z, w ) {\n\n\t\tthis.normal.set( x, y, z );\n\t\tthis.constant = w;\n\n\t\treturn this;\n\n\t},\n\n\tsetFromNormalAndCoplanarPoint: function ( normal, point ) {\n\n\t\tthis.normal.copy( normal );\n\t\tthis.constant = - point.dot( this.normal );\n\n\t\treturn this;\n\n\t},\n\n\tsetFromCoplanarPoints: function ( a, b, c ) {\n\n\t\tvar normal = _vector1.subVectors( c, b ).cross( _vector2.subVectors( a, b ) ).normalize();\n\n\t\t// Q: should an error be thrown if normal is zero (e.g. degenerate plane)?\n\n\t\tthis.setFromNormalAndCoplanarPoint( normal, a );\n\n\t\treturn this;\n\n\t},\n\n\tclone: function () {\n\n\t\treturn new this.constructor().copy( this );\n\n\t},\n\n\tcopy: function ( plane ) {\n\n\t\tthis.normal.copy( plane.normal );\n\t\tthis.constant = plane.constant;\n\n\t\treturn this;\n\n\t},\n\n\tnormalize: function () {\n\n\t\t// Note: will lead to a divide by zero if the plane is invalid.\n\n\t\tvar inverseNormalLength = 1.0 / this.normal.length();\n\t\tthis.normal.multiplyScalar( inverseNormalLength );\n\t\tthis.constant *= inverseNormalLength;\n\n\t\treturn this;\n\n\t},\n\n\tnegate: function () {\n\n\t\tthis.constant *= - 1;\n\t\tthis.normal.negate();\n\n\t\treturn this;\n\n\t},\n\n\tdistanceToPoint: function ( point ) {\n\n\t\treturn this.normal.dot( point ) + this.constant;\n\n\t},\n\n\tdistanceToSphere: function ( sphere ) {\n\n\t\treturn this.distanceToPoint( sphere.center ) - sphere.radius;\n\n\t},\n\n\tprojectPoint: function ( point, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Plane: .projectPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( this.normal ).multiplyScalar( - this.distanceToPoint( point ) ).add( point );\n\n\t},\n\n\tintersectLine: function ( line, target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Plane: .intersectLine() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\tvar direction = line.delta( _vector1 );\n\n\t\tvar denominator = this.normal.dot( direction );\n\n\t\tif ( denominator === 0 ) {\n\n\t\t\t// line is coplanar, return origin\n\t\t\tif ( this.distanceToPoint( line.start ) === 0 ) {\n\n\t\t\t\treturn target.copy( line.start );\n\n\t\t\t}\n\n\t\t\t// Unsure if this is the correct method to handle this case.\n\t\t\treturn undefined;\n\n\t\t}\n\n\t\tvar t = - ( line.start.dot( this.normal ) + this.constant ) / denominator;\n\n\t\tif ( t < 0 || t > 1 ) {\n\n\t\t\treturn undefined;\n\n\t\t}\n\n\t\treturn target.copy( direction ).multiplyScalar( t ).add( line.start );\n\n\t},\n\n\tintersectsLine: function ( line ) {\n\n\t\t// Note: this tests if a line intersects the plane, not whether it (or its end-points) are coplanar with it.\n\n\t\tvar startSign = this.distanceToPoint( line.start );\n\t\tvar endSign = this.distanceToPoint( line.end );\n\n\t\treturn ( startSign < 0 && endSign > 0 ) || ( endSign < 0 && startSign > 0 );\n\n\t},\n\n\tintersectsBox: function ( box ) {\n\n\t\treturn box.intersectsPlane( this );\n\n\t},\n\n\tintersectsSphere: function ( sphere ) {\n\n\t\treturn sphere.intersectsPlane( this );\n\n\t},\n\n\tcoplanarPoint: function ( target ) {\n\n\t\tif ( target === undefined ) {\n\n\t\t\tconsole.warn( 'THREE.Plane: .coplanarPoint() target is now required' );\n\t\t\ttarget = new Vector3();\n\n\t\t}\n\n\t\treturn target.copy( this.normal ).multiplyScalar( - this.constant );\n\n\t},\n\n\tapplyMatrix4: function ( matrix, optionalNormalMatrix ) {\n\n\t\tvar normalMatrix = optionalNormalMatrix || _normalMatrix.getNormalMatrix( matrix );\n\n\t\tvar referencePoint = this.coplanarPoint( _vector1 ).applyMatrix4( matrix );\n\n\t\tvar normal = this.normal.applyMatrix3( normalMatrix ).normalize();\n\n\t\tthis.constant = - referencePoint.dot( normal );\n\n\t\treturn this;\n\n\t},\n\n\ttranslate: function ( offset ) {\n\n\t\tthis.constant -= offset.dot( this.normal );\n\n\t\treturn this;\n\n\t},\n\n\tequals: function ( plane ) {\n\n\t\treturn plane.normal.equals( this.normal ) && ( plane.constant === this.constant );\n\n\t}\n\n} );\n\n\nexport { Plane };\n","// https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/AsyncFunction\nexport const AsyncFunction = Object.getPrototypeOf(async function () {}).constructor;\n","/**\n * @author mrdoob / http://mrdoob.com/\n */\n\nfunction Layers() {\n\n\tthis.mask = 1 | 0;\n\n}\n\nObject.assign( Layers.prototype, {\n\n\tset: function ( channel ) {\n\n\t\tthis.mask = 1 << channel | 0;\n\n\t},\n\n\tenable: function ( channel ) {\n\n\t\tthis.mask |= 1 << channel | 0;\n\n\t},\n\n\tenableAll: function () {\n\n\t\tthis.mask = 0xffffffff | 0;\n\n\t},\n\n\ttoggle: function ( channel ) {\n\n\t\tthis.mask ^= 1 << channel | 0;\n\n\t},\n\n\tdisable: function ( channel ) {\n\n\t\tthis.mask &= ~ ( 1 << channel | 0 );\n\n\t},\n\n\tdisableAll: function () {\n\n\t\tthis.mask = 0;\n\n\t},\n\n\ttest: function ( layers ) {\n\n\t\treturn ( this.mask & layers.mask ) !== 0;\n\n\t}\n\n} );\n\n\nexport { Layers };\n","var Stack = require('./_Stack'),\n    arrayEach = require('./_arrayEach'),\n    assignValue = require('./_assignValue'),\n    baseAssign = require('./_baseAssign'),\n    baseAssignIn = require('./_baseAssignIn'),\n    cloneBuffer = require('./_cloneBuffer'),\n    copyArray = require('./_copyArray'),\n    copySymbols = require('./_copySymbols'),\n    copySymbolsIn = require('./_copySymbolsIn'),\n    getAllKeys = require('./_getAllKeys'),\n    getAllKeysIn = require('./_getAllKeysIn'),\n    getTag = require('./_getTag'),\n    initCloneArray = require('./_initCloneArray'),\n    initCloneByTag = require('./_initCloneByTag'),\n    initCloneObject = require('./_initCloneObject'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isMap = require('./isMap'),\n    isObject = require('./isObject'),\n    isSet = require('./isSet'),\n    keys = require('./keys');\n\n/** Used to compose bitmasks for cloning. */\nvar CLONE_DEEP_FLAG = 1,\n    CLONE_FLAT_FLAG = 2,\n    CLONE_SYMBOLS_FLAG = 4;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} bitmask The bitmask flags.\n *  1 - Deep clone\n *  2 - Flatten inherited properties\n *  4 - Clone symbols\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, bitmask, customizer, key, object, stack) {\n  var result,\n      isDeep = bitmask & CLONE_DEEP_FLAG,\n      isFlat = bitmask & CLONE_FLAT_FLAG,\n      isFull = bitmask & CLONE_SYMBOLS_FLAG;\n\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      result = (isFlat || isFunc) ? {} : initCloneObject(value);\n      if (!isDeep) {\n        return isFlat\n          ? copySymbolsIn(value, baseAssignIn(result, value))\n          : copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (isSet(value)) {\n    value.forEach(function(subValue) {\n      result.add(baseClone(subValue, bitmask, customizer, subValue, value, stack));\n    });\n  } else if (isMap(value)) {\n    value.forEach(function(subValue, key) {\n      result.set(key, baseClone(subValue, bitmask, customizer, key, value, stack));\n    });\n  }\n\n  var keysFunc = isFull\n    ? (isFlat ? getAllKeysIn : getAllKeys)\n    : (isFlat ? keysIn : keys);\n\n  var props = isArr ? undefined : keysFunc(value);\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, bitmask, customizer, key, value, stack));\n  });\n  return result;\n}\n\nmodule.exports = baseClone;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nmodule.exports = freeGlobal;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nmodule.exports = toSource;\n","var baseAssignValue = require('./_baseAssignValue'),\n    eq = require('./eq');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    baseAssignValue(object, key, value);\n  }\n}\n\nmodule.exports = assignValue;\n","var getNative = require('./_getNative');\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nmodule.exports = defineProperty;\n","var baseTimes = require('./_baseTimes'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isIndex = require('./_isIndex'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayLikeKeys;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nmodule.exports = overArg;\n","/**\n * A specialized version of `_.filter` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction arrayFilter(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      resIndex = 0,\n      result = [];\n\n  while (++index < length) {\n    var value = array[index];\n    if (predicate(value, index, array)) {\n      result[resIndex++] = value;\n    }\n  }\n  return result;\n}\n\nmodule.exports = arrayFilter;\n","/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\nmodule.exports = stubArray;\n","var arrayPush = require('./_arrayPush'),\n    getPrototype = require('./_getPrototype'),\n    getSymbols = require('./_getSymbols'),\n    stubArray = require('./stubArray');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols;\n\n/**\n * Creates an array of the own and inherited enumerable symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbolsIn = !nativeGetSymbols ? stubArray : function(object) {\n  var result = [];\n  while (object) {\n    arrayPush(result, getSymbols(object));\n    object = getPrototype(object);\n  }\n  return result;\n};\n\nmodule.exports = getSymbolsIn;\n","var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbols = require('./_getSymbols'),\n    keys = require('./keys');\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\nmodule.exports = getAllKeys;\n","var arrayPush = require('./_arrayPush'),\n    isArray = require('./isArray');\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\nmodule.exports = baseGetAllKeys;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Set = getNative(root, 'Set');\n\nmodule.exports = Set;\n","var root = require('./_root');\n\n/** Built-in value references. */\nvar Uint8Array = root.Uint8Array;\n\nmodule.exports = Uint8Array;\n","var isObject = require('./isObject');\n\n/** Built-in value references. */\nvar objectCreate = Object.create;\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} proto The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nvar baseCreate = (function() {\n  function object() {}\n  return function(proto) {\n    if (!isObject(proto)) {\n      return {};\n    }\n    if (objectCreate) {\n      return objectCreate(proto);\n    }\n    object.prototype = proto;\n    var result = new object;\n    object.prototype = undefined;\n    return result;\n  };\n}());\n\nmodule.exports = baseCreate;\n","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nmodule.exports = constant;\n","var baseFor = require('./_baseFor'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.forOwn` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Object} Returns `object`.\n */\nfunction baseForOwn(object, iteratee) {\n  return object && baseFor(object, iteratee, keys);\n}\n\nmodule.exports = baseForOwn;\n","var SetCache = require('./_SetCache'),\n    arraySome = require('./_arraySome'),\n    cacheHas = require('./_cacheHas');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * A specialized version of `baseIsEqualDeep` for arrays with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Array} array The array to compare.\n * @param {Array} other The other array to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `array` and `other` objects.\n * @returns {boolean} Returns `true` if the arrays are equivalent, else `false`.\n */\nfunction equalArrays(array, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      arrLength = array.length,\n      othLength = other.length;\n\n  if (arrLength != othLength && !(isPartial && othLength > arrLength)) {\n    return false;\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(array);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var index = -1,\n      result = true,\n      seen = (bitmask & COMPARE_UNORDERED_FLAG) ? new SetCache : undefined;\n\n  stack.set(array, other);\n  stack.set(other, array);\n\n  // Ignore non-index properties.\n  while (++index < arrLength) {\n    var arrValue = array[index],\n        othValue = other[index];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, arrValue, index, other, array, stack)\n        : customizer(arrValue, othValue, index, array, other, stack);\n    }\n    if (compared !== undefined) {\n      if (compared) {\n        continue;\n      }\n      result = false;\n      break;\n    }\n    // Recursively compare arrays (susceptible to call stack limits).\n    if (seen) {\n      if (!arraySome(other, function(othValue, othIndex) {\n            if (!cacheHas(seen, othIndex) &&\n                (arrValue === othValue || equalFunc(arrValue, othValue, bitmask, customizer, stack))) {\n              return seen.push(othIndex);\n            }\n          })) {\n        result = false;\n        break;\n      }\n    } else if (!(\n          arrValue === othValue ||\n            equalFunc(arrValue, othValue, bitmask, customizer, stack)\n        )) {\n      result = false;\n      break;\n    }\n  }\n  stack['delete'](array);\n  stack['delete'](other);\n  return result;\n}\n\nmodule.exports = equalArrays;\n","var isObject = require('./isObject');\n\n/**\n * Checks if `value` is suitable for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` if suitable for strict\n *  equality comparisons, else `false`.\n */\nfunction isStrictComparable(value) {\n  return value === value && !isObject(value);\n}\n\nmodule.exports = isStrictComparable;\n","/**\n * A specialized version of `matchesProperty` for source values suitable\n * for strict equality comparisons, i.e. `===`.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction matchesStrictComparable(key, srcValue) {\n  return function(object) {\n    if (object == null) {\n      return false;\n    }\n    return object[key] === srcValue &&\n      (srcValue !== undefined || (key in Object(object)));\n  };\n}\n\nmodule.exports = matchesStrictComparable;\n","var castPath = require('./_castPath'),\n    toKey = require('./_toKey');\n\n/**\n * The base implementation of `_.get` without support for default values.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @returns {*} Returns the resolved value.\n */\nfunction baseGet(object, path) {\n  path = castPath(path, object);\n\n  var index = 0,\n      length = path.length;\n\n  while (object != null && index < length) {\n    object = object[toKey(path[index++])];\n  }\n  return (index && index == length) ? object : undefined;\n}\n\nmodule.exports = baseGet;\n","var isArray = require('./isArray'),\n    isKey = require('./_isKey'),\n    stringToPath = require('./_stringToPath'),\n    toString = require('./toString');\n\n/**\n * Casts `value` to a path array if it's not one.\n *\n * @private\n * @param {*} value The value to inspect.\n * @param {Object} [object] The object to query keys on.\n * @returns {Array} Returns the cast property path array.\n */\nfunction castPath(value, object) {\n  if (isArray(value)) {\n    return value;\n  }\n  return isKey(value, object) ? [value] : stringToPath(toString(value));\n}\n\nmodule.exports = castPath;\n","var castPath = require('./_castPath'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isIndex = require('./_isIndex'),\n    isLength = require('./isLength'),\n    toKey = require('./_toKey');\n\n/**\n * Checks if `path` exists on `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @param {Function} hasFunc The function to check properties.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n */\nfunction hasPath(object, path, hasFunc) {\n  path = castPath(path, object);\n\n  var index = -1,\n      length = path.length,\n      result = false;\n\n  while (++index < length) {\n    var key = toKey(path[index]);\n    if (!(result = object != null && hasFunc(object, key))) {\n      break;\n    }\n    object = object[key];\n  }\n  if (result || ++index != length) {\n    return result;\n  }\n  length = object == null ? 0 : object.length;\n  return !!length && isLength(length) && isIndex(key, length) &&\n    (isArray(object) || isArguments(object));\n}\n\nmodule.exports = hasPath;\n","/**\n * The base implementation of `_.property` without support for deep paths.\n *\n * @private\n * @param {string} key The key of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction baseProperty(key) {\n  return function(object) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nmodule.exports = baseProperty;\n","var baseEach = require('./_baseEach'),\n    isArrayLike = require('./isArrayLike');\n\n/**\n * The base implementation of `_.map` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction baseMap(collection, iteratee) {\n  var index = -1,\n      result = isArrayLike(collection) ? Array(collection.length) : [];\n\n  baseEach(collection, function(value, key, collection) {\n    result[++index] = iteratee(value, key, collection);\n  });\n  return result;\n}\n\nmodule.exports = baseMap;\n","/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as\n *  the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\nmodule.exports = arrayReduce;\n","var SetCache = require('./_SetCache'),\n    arrayIncludes = require('./_arrayIncludes'),\n    arrayIncludesWith = require('./_arrayIncludesWith'),\n    cacheHas = require('./_cacheHas'),\n    createSet = require('./_createSet'),\n    setToArray = require('./_setToArray');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of `_.uniqBy` without support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new duplicate free array.\n */\nfunction baseUniq(array, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      length = array.length,\n      isCommon = true,\n      result = [],\n      seen = result;\n\n  if (comparator) {\n    isCommon = false;\n    includes = arrayIncludesWith;\n  }\n  else if (length >= LARGE_ARRAY_SIZE) {\n    var set = iteratee ? null : createSet(array);\n    if (set) {\n      return setToArray(set);\n    }\n    isCommon = false;\n    includes = cacheHas;\n    seen = new SetCache;\n  }\n  else {\n    seen = iteratee ? [] : result;\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee ? iteratee(value) : value;\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var seenIndex = seen.length;\n      while (seenIndex--) {\n        if (seen[seenIndex] === computed) {\n          continue outer;\n        }\n      }\n      if (iteratee) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n    else if (!includes(seen, computed, comparator)) {\n      if (seen !== result) {\n        seen.push(computed);\n      }\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseUniq;\n","var _ = require(\"../lodash\");\nvar PriorityQueue = require(\"../data/priority-queue\");\n\nmodule.exports = dijkstra;\n\nvar DEFAULT_WEIGHT_FUNC = _.constant(1);\n\nfunction dijkstra(g, source, weightFn, edgeFn) {\n  return runDijkstra(g, String(source),\n    weightFn || DEFAULT_WEIGHT_FUNC,\n    edgeFn || function(v) { return g.outEdges(v); });\n}\n\nfunction runDijkstra(g, source, weightFn, edgeFn) {\n  var results = {};\n  var pq = new PriorityQueue();\n  var v, vEntry;\n\n  var updateNeighbors = function(edge) {\n    var w = edge.v !== v ? edge.v : edge.w;\n    var wEntry = results[w];\n    var weight = weightFn(edge);\n    var distance = vEntry.distance + weight;\n\n    if (weight < 0) {\n      throw new Error(\"dijkstra does not allow negative edge weights. \" +\n                      \"Bad edge: \" + edge + \" Weight: \" + weight);\n    }\n\n    if (distance < wEntry.distance) {\n      wEntry.distance = distance;\n      wEntry.predecessor = v;\n      pq.decrease(w, distance);\n    }\n  };\n\n  g.nodes().forEach(function(v) {\n    var distance = v === source ? 0 : Number.POSITIVE_INFINITY;\n    results[v] = { distance: distance };\n    pq.add(v, distance);\n  });\n\n  while (pq.size() > 0) {\n    v = pq.removeMin();\n    vEntry = results[v];\n    if (vEntry.distance === Number.POSITIVE_INFINITY) {\n      break;\n    }\n\n    edgeFn(v).forEach(updateNeighbors);\n  }\n\n  return results;\n}\n","var _ = require(\"../lodash\");\n\nmodule.exports = PriorityQueue;\n\n/**\n * A min-priority queue data structure. This algorithm is derived from Cormen,\n * et al., \"Introduction to Algorithms\". The basic idea of a min-priority\n * queue is that you can efficiently (in O(1) time) get the smallest key in\n * the queue. Adding and removing elements takes O(log n) time. A key can\n * have its priority decreased in O(log n) time.\n */\nfunction PriorityQueue() {\n  this._arr = [];\n  this._keyIndices = {};\n}\n\n/**\n * Returns the number of elements in the queue. Takes `O(1)` time.\n */\nPriorityQueue.prototype.size = function() {\n  return this._arr.length;\n};\n\n/**\n * Returns the keys that are in the queue. Takes `O(n)` time.\n */\nPriorityQueue.prototype.keys = function() {\n  return this._arr.map(function(x) { return x.key; });\n};\n\n/**\n * Returns `true` if **key** is in the queue and `false` if not.\n */\nPriorityQueue.prototype.has = function(key) {\n  return _.has(this._keyIndices, key);\n};\n\n/**\n * Returns the priority for **key**. If **key** is not present in the queue\n * then this function returns `undefined`. Takes `O(1)` time.\n *\n * @param {Object} key\n */\nPriorityQueue.prototype.priority = function(key) {\n  var index = this._keyIndices[key];\n  if (index !== undefined) {\n    return this._arr[index].priority;\n  }\n};\n\n/**\n * Returns the key for the minimum element in this queue. If the queue is\n * empty this function throws an Error. Takes `O(1)` time.\n */\nPriorityQueue.prototype.min = function() {\n  if (this.size() === 0) {\n    throw new Error(\"Queue underflow\");\n  }\n  return this._arr[0].key;\n};\n\n/**\n * Inserts a new key into the priority queue. If the key already exists in\n * the queue this function returns `false`; otherwise it will return `true`.\n * Takes `O(n)` time.\n *\n * @param {Object} key the key to add\n * @param {Number} priority the initial priority for the key\n */\nPriorityQueue.prototype.add = function(key, priority) {\n  var keyIndices = this._keyIndices;\n  key = String(key);\n  if (!_.has(keyIndices, key)) {\n    var arr = this._arr;\n    var index = arr.length;\n    keyIndices[key] = index;\n    arr.push({key: key, priority: priority});\n    this._decrease(index);\n    return true;\n  }\n  return false;\n};\n\n/**\n * Removes and returns the smallest key in the queue. Takes `O(log n)` time.\n */\nPriorityQueue.prototype.removeMin = function() {\n  this._swap(0, this._arr.length - 1);\n  var min = this._arr.pop();\n  delete this._keyIndices[min.key];\n  this._heapify(0);\n  return min.key;\n};\n\n/**\n * Decreases the priority for **key** to **priority**. If the new priority is\n * greater than the previous priority, this function will throw an Error.\n *\n * @param {Object} key the key for which to raise priority\n * @param {Number} priority the new priority for the key\n */\nPriorityQueue.prototype.decrease = function(key, priority) {\n  var index = this._keyIndices[key];\n  if (priority > this._arr[index].priority) {\n    throw new Error(\"New priority is greater than current priority. \" +\n        \"Key: \" + key + \" Old: \" + this._arr[index].priority + \" New: \" + priority);\n  }\n  this._arr[index].priority = priority;\n  this._decrease(index);\n};\n\nPriorityQueue.prototype._heapify = function(i) {\n  var arr = this._arr;\n  var l = 2 * i;\n  var r = l + 1;\n  var largest = i;\n  if (l < arr.length) {\n    largest = arr[l].priority < arr[largest].priority ? l : largest;\n    if (r < arr.length) {\n      largest = arr[r].priority < arr[largest].priority ? r : largest;\n    }\n    if (largest !== i) {\n      this._swap(i, largest);\n      this._heapify(largest);\n    }\n  }\n};\n\nPriorityQueue.prototype._decrease = function(index) {\n  var arr = this._arr;\n  var priority = arr[index].priority;\n  var parent;\n  while (index !== 0) {\n    parent = index >> 1;\n    if (arr[parent].priority < priority) {\n      break;\n    }\n    this._swap(index, parent);\n    index = parent;\n  }\n};\n\nPriorityQueue.prototype._swap = function(i, j) {\n  var arr = this._arr;\n  var keyIndices = this._keyIndices;\n  var origArrI = arr[i];\n  var origArrJ = arr[j];\n  arr[i] = origArrJ;\n  arr[j] = origArrI;\n  keyIndices[origArrJ.key] = i;\n  keyIndices[origArrI.key] = j;\n};\n","var _ = require(\"../lodash\");\n\nmodule.exports = tarjan;\n\nfunction tarjan(g) {\n  var index = 0;\n  var stack = [];\n  var visited = {}; // node id -> { onStack, lowlink, index }\n  var results = [];\n\n  function dfs(v) {\n    var entry = visited[v] = {\n      onStack: true,\n      lowlink: index,\n      index: index++\n    };\n    stack.push(v);\n\n    g.successors(v).forEach(function(w) {\n      if (!_.has(visited, w)) {\n        dfs(w);\n        entry.lowlink = Math.min(entry.lowlink, visited[w].lowlink);\n      } else if (visited[w].onStack) {\n        entry.lowlink = Math.min(entry.lowlink, visited[w].index);\n      }\n    });\n\n    if (entry.lowlink === entry.index) {\n      var cmpt = [];\n      var w;\n      do {\n        w = stack.pop();\n        visited[w].onStack = false;\n        cmpt.push(w);\n      } while (v !== w);\n      results.push(cmpt);\n    }\n  }\n\n  g.nodes().forEach(function(v) {\n    if (!_.has(visited, v)) {\n      dfs(v);\n    }\n  });\n\n  return results;\n}\n","var _ = require(\"../lodash\");\n\nmodule.exports = topsort;\ntopsort.CycleException = CycleException;\n\nfunction topsort(g) {\n  var visited = {};\n  var stack = {};\n  var results = [];\n\n  function visit(node) {\n    if (_.has(stack, node)) {\n      throw new CycleException();\n    }\n\n    if (!_.has(visited, node)) {\n      stack[node] = true;\n      visited[node] = true;\n      _.each(g.predecessors(node), visit);\n      delete stack[node];\n      results.push(node);\n    }\n  }\n\n  _.each(g.sinks(), visit);\n\n  if (_.size(visited) !== g.nodeCount()) {\n    throw new CycleException();\n  }\n\n  return results;\n}\n\nfunction CycleException() {}\nCycleException.prototype = new Error(); // must be an instance of Error to pass testing","var _ = require(\"../lodash\");\n\nmodule.exports = dfs;\n\n/*\n * A helper that preforms a pre- or post-order traversal on the input graph\n * and returns the nodes in the order they were visited. If the graph is\n * undirected then this algorithm will navigate using neighbors. If the graph\n * is directed then this algorithm will navigate using successors.\n *\n * Order must be one of \"pre\" or \"post\".\n */\nfunction dfs(g, vs, order) {\n  if (!_.isArray(vs)) {\n    vs = [vs];\n  }\n\n  var navigation = (g.isDirected() ? g.successors : g.neighbors).bind(g);\n\n  var acc = [];\n  var visited = {};\n  _.each(vs, function(v) {\n    if (!g.hasNode(v)) {\n      throw new Error(\"Graph does not have node: \" + v);\n    }\n\n    doDfs(g, v, order === \"post\", visited, navigation, acc);\n  });\n  return acc;\n}\n\nfunction doDfs(g, v, postorder, visited, navigation, acc) {\n  if (!_.has(visited, v)) {\n    visited[v] = true;\n\n    if (!postorder) { acc.push(v); }\n    _.each(navigation(v), function(w) {\n      doDfs(g, w, postorder, visited, navigation, acc);\n    });\n    if (postorder) { acc.push(v); }\n  }\n}\n","import {TypedEventNode, BaseEventNodeType} from './_Base';\nimport {TypedNamedConnectionPoint} from '../utils/connections/NamedConnectionPoint';\nimport {ConnectionPointType} from '../utils/connections/ConnectionPointType';\nimport {ACCEPTED_MOUSE_EVENT_TYPES} from '../../scene/utils/events/MouseEventsController';\nimport {BaseCameraObjNodeType} from '../obj/_BaseCamera';\nimport {BaseNodeType} from '../_Base';\nimport {BaseParamType} from '../../params/_Base';\n\nimport {NodeParamsConfig, ParamConfig} from '../utils/params/ParamsConfig';\nclass MouseEventParamsConfig extends NodeParamsConfig {\n\tactive = ParamConfig.BOOLEAN(true, {\n\t\tcallback: (node: BaseNodeType, param: BaseParamType) => {\n\t\t\tMouseEventNode.PARAM_CALLBACK_toggle_active(node as MouseEventNode);\n\t\t},\n\t});\n}\nconst ParamsConfig = new MouseEventParamsConfig();\n\nexport class MouseEventNode extends TypedEventNode<MouseEventParamsConfig> {\n\tparams_config = ParamsConfig;\n\tstatic type() {\n\t\treturn 'mouse_event';\n\t}\n\tinitialize_node() {\n\t\t// TODO: do not use GL connection Types here\n\t\tthis.io.outputs.set_named_output_connection_points(\n\t\t\tACCEPTED_MOUSE_EVENT_TYPES.map((event_type) => {\n\t\t\t\treturn new TypedNamedConnectionPoint(event_type, ConnectionPointType.BOOL);\n\t\t\t})\n\t\t);\n\n\t\tthis.lifecycle.add_on_add_hook(() => {\n\t\t\tthis.scene.events_controller.register_event_node(this);\n\t\t});\n\t\tthis.lifecycle.add_delete_hook(() => {\n\t\t\tthis.scene.events_controller.unregister_event_node(this);\n\t\t});\n\t}\n\n\tprocess_event(event: MouseEvent, canvas: HTMLCanvasElement, camera_node: BaseCameraObjNodeType) {\n\t\tif (!this.pv.active) {\n\t\t\treturn;\n\t\t}\n\t\tconst index = this.io.outputs.get_output_index(event.type);\n\t\tif (index >= 0) {\n\t\t\tconst connections = this.io.connections.output_connections();\n\t\t\tconst current_connections = connections.filter((connection) => connection.output_index == index);\n\t\t\tconst nodes: BaseEventNodeType[] = current_connections.map(\n\t\t\t\t(connection) => connection.node_dest\n\t\t\t) as BaseEventNodeType[];\n\t\t\tfor (let node of nodes) {\n\t\t\t\tnode.process_event(event, canvas, camera_node);\n\t\t\t}\n\t\t}\n\t}\n\n\t_update_register() {\n\t\tif (this.pv.active) {\n\t\t\tthis.scene.events_controller.register_event_node(this);\n\t\t} else {\n\t\t\tthis.scene.events_controller.unregister_event_node(this);\n\t\t}\n\t}\n\tstatic PARAM_CALLBACK_toggle_active(node: MouseEventNode) {\n\t\tnode._update_register();\n\t}\n}\n","var toNumber = require('./toNumber');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0,\n    MAX_INTEGER = 1.7976931348623157e+308;\n\n/**\n * Converts `value` to a finite number.\n *\n * @static\n * @memberOf _\n * @since 4.12.0\n * @category Lang\n * @param {*} value The value to convert.\n * @returns {number} Returns the converted number.\n * @example\n *\n * _.toFinite(3.2);\n * // => 3.2\n *\n * _.toFinite(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toFinite(Infinity);\n * // => 1.7976931348623157e+308\n *\n * _.toFinite('3.2');\n * // => 3.2\n */\nfunction toFinite(value) {\n  if (!value) {\n    return value === 0 ? value : 0;\n  }\n  value = toNumber(value);\n  if (value === INFINITY || value === -INFINITY) {\n    var sign = (value < 0 ? -1 : 1);\n    return sign * MAX_INTEGER;\n  }\n  return value === value ? value : 0;\n}\n\nmodule.exports = toFinite;\n","var arrayReduce = require('./_arrayReduce'),\n    deburr = require('./deburr'),\n    words = require('./words');\n\n/** Used to compose unicode capture groups. */\nvar rsApos = \"['\\u2019]\";\n\n/** Used to match apostrophes. */\nvar reApos = RegExp(rsApos, 'g');\n\n/**\n * Creates a function like `_.camelCase`.\n *\n * @private\n * @param {Function} callback The function to combine each word.\n * @returns {Function} Returns the new compounder function.\n */\nfunction createCompounder(callback) {\n  return function(string) {\n    return arrayReduce(words(deburr(string).replace(reApos, '')), callback, '');\n  };\n}\n\nmodule.exports = createCompounder;\n","import { ZeroCurvatureEnding } from '../../constants.js';\nimport { Interpolant } from '../Interpolant.js';\nimport { WrapAroundEnding, ZeroSlopeEnding } from '../../constants.js';\n\n/**\n * Fast and simple cubic spline interpolant.\n *\n * It was derived from a Hermitian construction setting the first derivative\n * at each sample position to the linear slope between neighboring positions\n * over their parameter interval.\n *\n * @author tschw\n */\n\nfunction CubicInterpolant( parameterPositions, sampleValues, sampleSize, resultBuffer ) {\n\n\tInterpolant.call( this, parameterPositions, sampleValues, sampleSize, resultBuffer );\n\n\tthis._weightPrev = - 0;\n\tthis._offsetPrev = - 0;\n\tthis._weightNext = - 0;\n\tthis._offsetNext = - 0;\n\n}\n\nCubicInterpolant.prototype = Object.assign( Object.create( Interpolant.prototype ), {\n\n\tconstructor: CubicInterpolant,\n\n\tDefaultSettings_: {\n\n\t\tendingStart: ZeroCurvatureEnding,\n\t\tendingEnd: ZeroCurvatureEnding\n\n\t},\n\n\tintervalChanged_: function ( i1, t0, t1 ) {\n\n\t\tvar pp = this.parameterPositions,\n\t\t\tiPrev = i1 - 2,\n\t\t\tiNext = i1 + 1,\n\n\t\t\ttPrev = pp[ iPrev ],\n\t\t\ttNext = pp[ iNext ];\n\n\t\tif ( tPrev === undefined ) {\n\n\t\t\tswitch ( this.getSettings_().endingStart ) {\n\n\t\t\t\tcase ZeroSlopeEnding:\n\n\t\t\t\t\t// f'(t0) = 0\n\t\t\t\t\tiPrev = i1;\n\t\t\t\t\ttPrev = 2 * t0 - t1;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase WrapAroundEnding:\n\n\t\t\t\t\t// use the other end of the curve\n\t\t\t\t\tiPrev = pp.length - 2;\n\t\t\t\t\ttPrev = t0 + pp[ iPrev ] - pp[ iPrev + 1 ];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault: // ZeroCurvatureEnding\n\n\t\t\t\t\t// f''(t0) = 0 a.k.a. Natural Spline\n\t\t\t\t\tiPrev = i1;\n\t\t\t\t\ttPrev = t1;\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( tNext === undefined ) {\n\n\t\t\tswitch ( this.getSettings_().endingEnd ) {\n\n\t\t\t\tcase ZeroSlopeEnding:\n\n\t\t\t\t\t// f'(tN) = 0\n\t\t\t\t\tiNext = i1;\n\t\t\t\t\ttNext = 2 * t1 - t0;\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase WrapAroundEnding:\n\n\t\t\t\t\t// use the other end of the curve\n\t\t\t\t\tiNext = 1;\n\t\t\t\t\ttNext = t1 + pp[ 1 ] - pp[ 0 ];\n\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault: // ZeroCurvatureEnding\n\n\t\t\t\t\t// f''(tN) = 0, a.k.a. Natural Spline\n\t\t\t\t\tiNext = i1 - 1;\n\t\t\t\t\ttNext = t0;\n\n\t\t\t}\n\n\t\t}\n\n\t\tvar halfDt = ( t1 - t0 ) * 0.5,\n\t\t\tstride = this.valueSize;\n\n\t\tthis._weightPrev = halfDt / ( t0 - tPrev );\n\t\tthis._weightNext = halfDt / ( tNext - t1 );\n\t\tthis._offsetPrev = iPrev * stride;\n\t\tthis._offsetNext = iNext * stride;\n\n\t},\n\n\tinterpolate_: function ( i1, t0, t, t1 ) {\n\n\t\tvar result = this.resultBuffer,\n\t\t\tvalues = this.sampleValues,\n\t\t\tstride = this.valueSize,\n\n\t\t\to1 = i1 * stride,\t\to0 = o1 - stride,\n\t\t\toP = this._offsetPrev, \toN = this._offsetNext,\n\t\t\twP = this._weightPrev,\twN = this._weightNext,\n\n\t\t\tp = ( t - t0 ) / ( t1 - t0 ),\n\t\t\tpp = p * p,\n\t\t\tppp = pp * p;\n\n\t\t// evaluate polynomials\n\n\t\tvar sP = - wP * ppp + 2 * wP * pp - wP * p;\n\t\tvar s0 = ( 1 + wP ) * ppp + ( - 1.5 - 2 * wP ) * pp + ( - 0.5 + wP ) * p + 1;\n\t\tvar s1 = ( - 1 - wN ) * ppp + ( 1.5 + wN ) * pp + 0.5 * p;\n\t\tvar sN = wN * ppp - wN * pp;\n\n\t\t// combine data linearly\n\n\t\tfor ( var i = 0; i !== stride; ++ i ) {\n\n\t\t\tresult[ i ] =\n\t\t\t\t\tsP * values[ oP + i ] +\n\t\t\t\t\ts0 * values[ o0 + i ] +\n\t\t\t\t\ts1 * values[ o1 + i ] +\n\t\t\t\t\tsN * values[ oN + i ];\n\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n} );\n\n\nexport { CubicInterpolant };\n","var arrayPush = require('./_arrayPush'),\n    baseFlatten = require('./_baseFlatten'),\n    copyArray = require('./_copyArray'),\n    isArray = require('./isArray');\n\n/**\n * Creates a new array concatenating `array` with any additional arrays\n * and/or values.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Array\n * @param {Array} array The array to concatenate.\n * @param {...*} [values] The values to concatenate.\n * @returns {Array} Returns the new concatenated array.\n * @example\n *\n * var array = [1];\n * var other = _.concat(array, 2, [3], [[4]]);\n *\n * console.log(other);\n * // => [1, 2, 3, [4]]\n *\n * console.log(array);\n * // => [1]\n */\nfunction concat() {\n  var length = arguments.length;\n  if (!length) {\n    return [];\n  }\n  var args = Array(length - 1),\n      array = arguments[0],\n      index = length;\n\n  while (index--) {\n    args[index - 1] = arguments[index];\n  }\n  return arrayPush(isArray(array) ? copyArray(array) : [array], baseFlatten(args, 1));\n}\n\nmodule.exports = concat;\n","var createCompounder = require('./_createCompounder');\n\n/**\n * Converts `string` to\n * [snake case](https://en.wikipedia.org/wiki/Snake_case).\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to convert.\n * @returns {string} Returns the snake cased string.\n * @example\n *\n * _.snakeCase('Foo Bar');\n * // => 'foo_bar'\n *\n * _.snakeCase('fooBar');\n * // => 'foo_bar'\n *\n * _.snakeCase('--FOO-BAR--');\n * // => 'foo_bar'\n */\nvar snakeCase = createCompounder(function(result, word, index) {\n  return result + (index ? '_' : '') + word.toLowerCase();\n});\n\nmodule.exports = snakeCase;\n","var baseAssignValue = require('./_baseAssignValue'),\n    createAggregator = require('./_createAggregator');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an object composed of keys generated from the results of running\n * each element of `collection` thru `iteratee`. The order of grouped values\n * is determined by the order they occur in `collection`. The corresponding\n * value of each key is an array of elements responsible for generating the\n * key. The iteratee is invoked with one argument: (value).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The iteratee to transform keys.\n * @returns {Object} Returns the composed aggregate object.\n * @example\n *\n * _.groupBy([6.1, 4.2, 6.3], Math.floor);\n * // => { '4': [4.2], '6': [6.1, 6.3] }\n *\n * // The `_.property` iteratee shorthand.\n * _.groupBy(['one', 'two', 'three'], 'length');\n * // => { '3': ['one', 'two'], '5': ['three'] }\n */\nvar groupBy = createAggregator(function(result, value, key) {\n  if (hasOwnProperty.call(result, key)) {\n    result[key].push(value);\n  } else {\n    baseAssignValue(result, key, [value]);\n  }\n});\n\nmodule.exports = groupBy;\n","var root = require('./_root');\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    allocUnsafe = Buffer ? Buffer.allocUnsafe : undefined;\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var length = buffer.length,\n      result = allocUnsafe ? allocUnsafe(length) : new buffer.constructor(length);\n\n  buffer.copy(result);\n  return result;\n}\n\nmodule.exports = cloneBuffer;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer');\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\nmodule.exports = cloneTypedArray;\n","var baseCreate = require('./_baseCreate'),\n    getPrototype = require('./_getPrototype'),\n    isPrototype = require('./_isPrototype');\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\nmodule.exports = initCloneObject;\n","var createBaseFor = require('./_createBaseFor');\n\n/**\n * The base implementation of `baseForOwn` which iterates over `object`\n * properties returned by `keysFunc` and invokes `iteratee` for each property.\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @private\n * @param {Object} object The object to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @returns {Object} Returns `object`.\n */\nvar baseFor = createBaseFor();\n\nmodule.exports = baseFor;\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nmodule.exports = baseTimes;\n","var identity = require('./identity');\n\n/**\n * Casts `value` to `identity` if it's not a function.\n *\n * @private\n * @param {*} value The value to inspect.\n * @returns {Function} Returns cast function.\n */\nfunction castFunction(value) {\n  return typeof value == 'function' ? value : identity;\n}\n\nmodule.exports = castFunction;\n","var arrayMap = require('./_arrayMap'),\n    baseIteratee = require('./_baseIteratee'),\n    baseMap = require('./_baseMap'),\n    isArray = require('./isArray');\n\n/**\n * Creates an array of values by running each element in `collection` thru\n * `iteratee`. The iteratee is invoked with three arguments:\n * (value, index|key, collection).\n *\n * Many lodash methods are guarded to work as iteratees for methods like\n * `_.every`, `_.filter`, `_.map`, `_.mapValues`, `_.reject`, and `_.some`.\n *\n * The guarded methods are:\n * `ary`, `chunk`, `curry`, `curryRight`, `drop`, `dropRight`, `every`,\n * `fill`, `invert`, `parseInt`, `random`, `range`, `rangeRight`, `repeat`,\n * `sampleSize`, `slice`, `some`, `sortBy`, `split`, `take`, `takeRight`,\n * `template`, `trim`, `trimEnd`, `trimStart`, and `words`\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n * @example\n *\n * function square(n) {\n *   return n * n;\n * }\n *\n * _.map([4, 8], square);\n * // => [16, 64]\n *\n * _.map({ 'a': 4, 'b': 8 }, square);\n * // => [16, 64] (iteration order is not guaranteed)\n *\n * var users = [\n *   { 'user': 'barney' },\n *   { 'user': 'fred' }\n * ];\n *\n * // The `_.property` iteratee shorthand.\n * _.map(users, 'user');\n * // => ['barney', 'fred']\n */\nfunction map(collection, iteratee) {\n  var func = isArray(collection) ? arrayMap : baseMap;\n  return func(collection, baseIteratee(iteratee, 3));\n}\n\nmodule.exports = map;\n","/**\n * The base implementation of `_.slice` without an iteratee call guard.\n *\n * @private\n * @param {Array} array The array to slice.\n * @param {number} [start=0] The start position.\n * @param {number} [end=array.length] The end position.\n * @returns {Array} Returns the slice of `array`.\n */\nfunction baseSlice(array, start, end) {\n  var index = -1,\n      length = array.length;\n\n  if (start < 0) {\n    start = -start > length ? 0 : (length + start);\n  }\n  end = end > length ? length : end;\n  if (end < 0) {\n    end += length;\n  }\n  length = start > end ? 0 : ((end - start) >>> 0);\n  start >>>= 0;\n\n  var result = Array(length);\n  while (++index < length) {\n    result[index] = array[index + start];\n  }\n  return result;\n}\n\nmodule.exports = baseSlice;\n","// Includes only the \"core\" of graphlib\nmodule.exports = {\n  Graph: require(\"./graph\"),\n  version: require(\"./version\")\n};\n","/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n  this.size = 0;\n}\n\nmodule.exports = listCacheClear;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype;\n\n/** Built-in value references. */\nvar splice = arrayProto.splice;\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  --this.size;\n  return true;\n}\n\nmodule.exports = listCacheDelete;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\nmodule.exports = listCacheGet;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\nmodule.exports = listCacheHas;\n","var assocIndexOf = require('./_assocIndexOf');\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    ++this.size;\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\nmodule.exports = listCacheSet;\n","var ListCache = require('./_ListCache');\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n  this.size = 0;\n}\n\nmodule.exports = stackClear;\n","/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  var data = this.__data__,\n      result = data['delete'](key);\n\n  this.size = data.size;\n  return result;\n}\n\nmodule.exports = stackDelete;\n","/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\nmodule.exports = stackGet;\n","/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\nmodule.exports = stackHas;\n","var ListCache = require('./_ListCache'),\n    Map = require('./_Map'),\n    MapCache = require('./_MapCache');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var data = this.__data__;\n  if (data instanceof ListCache) {\n    var pairs = data.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      this.size = ++data.size;\n      return this;\n    }\n    data = this.__data__ = new MapCache(pairs);\n  }\n  data.set(key, value);\n  this.size = data.size;\n  return this;\n}\n\nmodule.exports = stackSet;\n","var isFunction = require('./isFunction'),\n    isMasked = require('./_isMasked'),\n    isObject = require('./isObject'),\n    toSource = require('./_toSource');\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nmodule.exports = baseIsNative;\n","var Symbol = require('./_Symbol');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nmodule.exports = getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nmodule.exports = objectToString;\n","var coreJsData = require('./_coreJsData');\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nmodule.exports = isMasked;\n","var root = require('./_root');\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nmodule.exports = coreJsData;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nmodule.exports = getValue;\n","var Hash = require('./_Hash'),\n    ListCache = require('./_ListCache'),\n    Map = require('./_Map');\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.size = 0;\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\nmodule.exports = mapCacheClear;\n","var hashClear = require('./_hashClear'),\n    hashDelete = require('./_hashDelete'),\n    hashGet = require('./_hashGet'),\n    hashHas = require('./_hashHas'),\n    hashSet = require('./_hashSet');\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries == null ? 0 : entries.length;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\nmodule.exports = Hash;\n","var nativeCreate = require('./_nativeCreate');\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n  this.size = 0;\n}\n\nmodule.exports = hashClear;\n","/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  var result = this.has(key) && delete this.__data__[key];\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = hashDelete;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\nmodule.exports = hashGet;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? (data[key] !== undefined) : hasOwnProperty.call(data, key);\n}\n\nmodule.exports = hashHas;\n","var nativeCreate = require('./_nativeCreate');\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  this.size += this.has(key) ? 0 : 1;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\nmodule.exports = hashSet;\n","var getMapData = require('./_getMapData');\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  var result = getMapData(this, key)['delete'](key);\n  this.size -= result ? 1 : 0;\n  return result;\n}\n\nmodule.exports = mapCacheDelete;\n","/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\nmodule.exports = isKeyable;\n","var getMapData = require('./_getMapData');\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\nmodule.exports = mapCacheGet;\n","var getMapData = require('./_getMapData');\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\nmodule.exports = mapCacheHas;\n","var getMapData = require('./_getMapData');\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  var data = getMapData(this, key),\n      size = data.size;\n\n  data.set(key, value);\n  this.size += data.size == size ? 0 : 1;\n  return this;\n}\n\nmodule.exports = mapCacheSet;\n","var copyObject = require('./_copyObject'),\n    keys = require('./keys');\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\nmodule.exports = baseAssign;\n","var baseGetTag = require('./_baseGetTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nmodule.exports = baseIsArguments;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = stubFalse;\n","var baseGetTag = require('./_baseGetTag'),\n    isLength = require('./isLength'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nmodule.exports = baseIsTypedArray;\n","var overArg = require('./_overArg');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nmodule.exports = nativeKeys;\n","var copyObject = require('./_copyObject'),\n    keysIn = require('./keysIn');\n\n/**\n * The base implementation of `_.assignIn` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssignIn(object, source) {\n  return object && copyObject(source, keysIn(source), object);\n}\n\nmodule.exports = baseAssignIn;\n","var isObject = require('./isObject'),\n    isPrototype = require('./_isPrototype'),\n    nativeKeysIn = require('./_nativeKeysIn');\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseKeysIn;\n","/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nmodule.exports = nativeKeysIn;\n","var copyObject = require('./_copyObject'),\n    getSymbols = require('./_getSymbols');\n\n/**\n * Copies own symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\nmodule.exports = copySymbols;\n","var copyObject = require('./_copyObject'),\n    getSymbolsIn = require('./_getSymbolsIn');\n\n/**\n * Copies own and inherited symbols of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbolsIn(source, object) {\n  return copyObject(source, getSymbolsIn(source), object);\n}\n\nmodule.exports = copySymbolsIn;\n","var baseGetAllKeys = require('./_baseGetAllKeys'),\n    getSymbolsIn = require('./_getSymbolsIn'),\n    keysIn = require('./keysIn');\n\n/**\n * Creates an array of own and inherited enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeysIn(object) {\n  return baseGetAllKeys(object, keysIn, getSymbolsIn);\n}\n\nmodule.exports = getAllKeysIn;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView');\n\nmodule.exports = DataView;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar Promise = getNative(root, 'Promise');\n\nmodule.exports = Promise;\n","var getNative = require('./_getNative'),\n    root = require('./_root');\n\n/* Built-in method references that are verified to be native. */\nvar WeakMap = getNative(root, 'WeakMap');\n\nmodule.exports = WeakMap;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = new array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\nmodule.exports = initCloneArray;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer'),\n    cloneDataView = require('./_cloneDataView'),\n    cloneRegExp = require('./_cloneRegExp'),\n    cloneSymbol = require('./_cloneSymbol'),\n    cloneTypedArray = require('./_cloneTypedArray');\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Map`, `Number`, `RegExp`, `Set`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return new Ctor;\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return new Ctor;\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\nmodule.exports = initCloneByTag;\n","var cloneArrayBuffer = require('./_cloneArrayBuffer');\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\nmodule.exports = cloneDataView;\n","/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\nmodule.exports = cloneRegExp;\n","var Symbol = require('./_Symbol');\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\nmodule.exports = cloneSymbol;\n","var baseIsMap = require('./_baseIsMap'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsMap = nodeUtil && nodeUtil.isMap;\n\n/**\n * Checks if `value` is classified as a `Map` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n * @example\n *\n * _.isMap(new Map);\n * // => true\n *\n * _.isMap(new WeakMap);\n * // => false\n */\nvar isMap = nodeIsMap ? baseUnary(nodeIsMap) : baseIsMap;\n\nmodule.exports = isMap;\n","var getTag = require('./_getTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]';\n\n/**\n * The base implementation of `_.isMap` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a map, else `false`.\n */\nfunction baseIsMap(value) {\n  return isObjectLike(value) && getTag(value) == mapTag;\n}\n\nmodule.exports = baseIsMap;\n","var baseIsSet = require('./_baseIsSet'),\n    baseUnary = require('./_baseUnary'),\n    nodeUtil = require('./_nodeUtil');\n\n/* Node.js helper references. */\nvar nodeIsSet = nodeUtil && nodeUtil.isSet;\n\n/**\n * Checks if `value` is classified as a `Set` object.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n * @example\n *\n * _.isSet(new Set);\n * // => true\n *\n * _.isSet(new WeakSet);\n * // => false\n */\nvar isSet = nodeIsSet ? baseUnary(nodeIsSet) : baseIsSet;\n\nmodule.exports = isSet;\n","var getTag = require('./_getTag'),\n    isObjectLike = require('./isObjectLike');\n\n/** `Object#toString` result references. */\nvar setTag = '[object Set]';\n\n/**\n * The base implementation of `_.isSet` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a set, else `false`.\n */\nfunction baseIsSet(value) {\n  return isObjectLike(value) && getTag(value) == setTag;\n}\n\nmodule.exports = baseIsSet;\n","var arrayEach = require('./_arrayEach'),\n    baseEach = require('./_baseEach'),\n    castFunction = require('./_castFunction'),\n    isArray = require('./isArray');\n\n/**\n * Iterates over elements of `collection` and invokes `iteratee` for each element.\n * The iteratee is invoked with three arguments: (value, index|key, collection).\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * **Note:** As with other \"Collections\" methods, objects with a \"length\"\n * property are iterated like arrays. To avoid this behavior use `_.forIn`\n * or `_.forOwn` for object iteration.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @alias each\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @returns {Array|Object} Returns `collection`.\n * @see _.forEachRight\n * @example\n *\n * _.forEach([1, 2], function(value) {\n *   console.log(value);\n * });\n * // => Logs `1` then `2`.\n *\n * _.forEach({ 'a': 1, 'b': 2 }, function(value, key) {\n *   console.log(key);\n * });\n * // => Logs 'a' then 'b' (iteration order is not guaranteed).\n */\nfunction forEach(collection, iteratee) {\n  var func = isArray(collection) ? arrayEach : baseEach;\n  return func(collection, castFunction(iteratee));\n}\n\nmodule.exports = forEach;\n","/**\n * Creates a base function for methods like `_.forIn` and `_.forOwn`.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseFor(fromRight) {\n  return function(object, iteratee, keysFunc) {\n    var index = -1,\n        iterable = Object(object),\n        props = keysFunc(object),\n        length = props.length;\n\n    while (length--) {\n      var key = props[fromRight ? length : ++index];\n      if (iteratee(iterable[key], key, iterable) === false) {\n        break;\n      }\n    }\n    return object;\n  };\n}\n\nmodule.exports = createBaseFor;\n","var isArrayLike = require('./isArrayLike');\n\n/**\n * Creates a `baseEach` or `baseEachRight` function.\n *\n * @private\n * @param {Function} eachFunc The function to iterate over a collection.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new base function.\n */\nfunction createBaseEach(eachFunc, fromRight) {\n  return function(collection, iteratee) {\n    if (collection == null) {\n      return collection;\n    }\n    if (!isArrayLike(collection)) {\n      return eachFunc(collection, iteratee);\n    }\n    var length = collection.length,\n        index = fromRight ? length : -1,\n        iterable = Object(collection);\n\n    while ((fromRight ? index-- : ++index < length)) {\n      if (iteratee(iterable[index], index, iterable) === false) {\n        break;\n      }\n    }\n    return collection;\n  };\n}\n\nmodule.exports = createBaseEach;\n","var arrayFilter = require('./_arrayFilter'),\n    baseFilter = require('./_baseFilter'),\n    baseIteratee = require('./_baseIteratee'),\n    isArray = require('./isArray');\n\n/**\n * Iterates over elements of `collection`, returning an array of all elements\n * `predicate` returns truthy for. The predicate is invoked with three\n * arguments: (value, index|key, collection).\n *\n * **Note:** Unlike `_.remove`, this method returns a new array.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [predicate=_.identity] The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n * @see _.reject\n * @example\n *\n * var users = [\n *   { 'user': 'barney', 'age': 36, 'active': true },\n *   { 'user': 'fred',   'age': 40, 'active': false }\n * ];\n *\n * _.filter(users, function(o) { return !o.active; });\n * // => objects for ['fred']\n *\n * // The `_.matches` iteratee shorthand.\n * _.filter(users, { 'age': 36, 'active': true });\n * // => objects for ['barney']\n *\n * // The `_.matchesProperty` iteratee shorthand.\n * _.filter(users, ['active', false]);\n * // => objects for ['fred']\n *\n * // The `_.property` iteratee shorthand.\n * _.filter(users, 'active');\n * // => objects for ['barney']\n */\nfunction filter(collection, predicate) {\n  var func = isArray(collection) ? arrayFilter : baseFilter;\n  return func(collection, baseIteratee(predicate, 3));\n}\n\nmodule.exports = filter;\n","var baseEach = require('./_baseEach');\n\n/**\n * The base implementation of `_.filter` without support for iteratee shorthands.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {Array} Returns the new filtered array.\n */\nfunction baseFilter(collection, predicate) {\n  var result = [];\n  baseEach(collection, function(value, index, collection) {\n    if (predicate(value, index, collection)) {\n      result.push(value);\n    }\n  });\n  return result;\n}\n\nmodule.exports = baseFilter;\n","var baseIsMatch = require('./_baseIsMatch'),\n    getMatchData = require('./_getMatchData'),\n    matchesStrictComparable = require('./_matchesStrictComparable');\n\n/**\n * The base implementation of `_.matches` which doesn't clone `source`.\n *\n * @private\n * @param {Object} source The object of property values to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatches(source) {\n  var matchData = getMatchData(source);\n  if (matchData.length == 1 && matchData[0][2]) {\n    return matchesStrictComparable(matchData[0][0], matchData[0][1]);\n  }\n  return function(object) {\n    return object === source || baseIsMatch(object, source, matchData);\n  };\n}\n\nmodule.exports = baseMatches;\n","var Stack = require('./_Stack'),\n    baseIsEqual = require('./_baseIsEqual');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.isMatch` without support for iteratee shorthands.\n *\n * @private\n * @param {Object} object The object to inspect.\n * @param {Object} source The object of property values to match.\n * @param {Array} matchData The property names, values, and compare flags to match.\n * @param {Function} [customizer] The function to customize comparisons.\n * @returns {boolean} Returns `true` if `object` is a match, else `false`.\n */\nfunction baseIsMatch(object, source, matchData, customizer) {\n  var index = matchData.length,\n      length = index,\n      noCustomizer = !customizer;\n\n  if (object == null) {\n    return !length;\n  }\n  object = Object(object);\n  while (index--) {\n    var data = matchData[index];\n    if ((noCustomizer && data[2])\n          ? data[1] !== object[data[0]]\n          : !(data[0] in object)\n        ) {\n      return false;\n    }\n  }\n  while (++index < length) {\n    data = matchData[index];\n    var key = data[0],\n        objValue = object[key],\n        srcValue = data[1];\n\n    if (noCustomizer && data[2]) {\n      if (objValue === undefined && !(key in object)) {\n        return false;\n      }\n    } else {\n      var stack = new Stack;\n      if (customizer) {\n        var result = customizer(objValue, srcValue, key, object, source, stack);\n      }\n      if (!(result === undefined\n            ? baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG, customizer, stack)\n            : result\n          )) {\n        return false;\n      }\n    }\n  }\n  return true;\n}\n\nmodule.exports = baseIsMatch;\n","var Stack = require('./_Stack'),\n    equalArrays = require('./_equalArrays'),\n    equalByTag = require('./_equalByTag'),\n    equalObjects = require('./_equalObjects'),\n    getTag = require('./_getTag'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isTypedArray = require('./isTypedArray');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    objectTag = '[object Object]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqual` for arrays and objects which performs\n * deep comparisons and tracks traversed objects enabling objects with circular\n * references to be compared.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} [stack] Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction baseIsEqualDeep(object, other, bitmask, customizer, equalFunc, stack) {\n  var objIsArr = isArray(object),\n      othIsArr = isArray(other),\n      objTag = objIsArr ? arrayTag : getTag(object),\n      othTag = othIsArr ? arrayTag : getTag(other);\n\n  objTag = objTag == argsTag ? objectTag : objTag;\n  othTag = othTag == argsTag ? objectTag : othTag;\n\n  var objIsObj = objTag == objectTag,\n      othIsObj = othTag == objectTag,\n      isSameTag = objTag == othTag;\n\n  if (isSameTag && isBuffer(object)) {\n    if (!isBuffer(other)) {\n      return false;\n    }\n    objIsArr = true;\n    objIsObj = false;\n  }\n  if (isSameTag && !objIsObj) {\n    stack || (stack = new Stack);\n    return (objIsArr || isTypedArray(object))\n      ? equalArrays(object, other, bitmask, customizer, equalFunc, stack)\n      : equalByTag(object, other, objTag, bitmask, customizer, equalFunc, stack);\n  }\n  if (!(bitmask & COMPARE_PARTIAL_FLAG)) {\n    var objIsWrapped = objIsObj && hasOwnProperty.call(object, '__wrapped__'),\n        othIsWrapped = othIsObj && hasOwnProperty.call(other, '__wrapped__');\n\n    if (objIsWrapped || othIsWrapped) {\n      var objUnwrapped = objIsWrapped ? object.value() : object,\n          othUnwrapped = othIsWrapped ? other.value() : other;\n\n      stack || (stack = new Stack);\n      return equalFunc(objUnwrapped, othUnwrapped, bitmask, customizer, stack);\n    }\n  }\n  if (!isSameTag) {\n    return false;\n  }\n  stack || (stack = new Stack);\n  return equalObjects(object, other, bitmask, customizer, equalFunc, stack);\n}\n\nmodule.exports = baseIsEqualDeep;\n","/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/**\n * Adds `value` to the array cache.\n *\n * @private\n * @name add\n * @memberOf SetCache\n * @alias push\n * @param {*} value The value to cache.\n * @returns {Object} Returns the cache instance.\n */\nfunction setCacheAdd(value) {\n  this.__data__.set(value, HASH_UNDEFINED);\n  return this;\n}\n\nmodule.exports = setCacheAdd;\n","/**\n * Checks if `value` is in the array cache.\n *\n * @private\n * @name has\n * @memberOf SetCache\n * @param {*} value The value to search for.\n * @returns {number} Returns `true` if `value` is found, else `false`.\n */\nfunction setCacheHas(value) {\n  return this.__data__.has(value);\n}\n\nmodule.exports = setCacheHas;\n","/**\n * A specialized version of `_.some` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} predicate The function invoked per iteration.\n * @returns {boolean} Returns `true` if any element passes the predicate check,\n *  else `false`.\n */\nfunction arraySome(array, predicate) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    if (predicate(array[index], index, array)) {\n      return true;\n    }\n  }\n  return false;\n}\n\nmodule.exports = arraySome;\n","var Symbol = require('./_Symbol'),\n    Uint8Array = require('./_Uint8Array'),\n    eq = require('./eq'),\n    equalArrays = require('./_equalArrays'),\n    mapToArray = require('./_mapToArray'),\n    setToArray = require('./_setToArray');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/** `Object#toString` result references. */\nvar boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]';\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * A specialized version of `baseIsEqualDeep` for comparing objects of\n * the same `toStringTag`.\n *\n * **Note:** This function only supports comparing values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {string} tag The `toStringTag` of the objects to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalByTag(object, other, tag, bitmask, customizer, equalFunc, stack) {\n  switch (tag) {\n    case dataViewTag:\n      if ((object.byteLength != other.byteLength) ||\n          (object.byteOffset != other.byteOffset)) {\n        return false;\n      }\n      object = object.buffer;\n      other = other.buffer;\n\n    case arrayBufferTag:\n      if ((object.byteLength != other.byteLength) ||\n          !equalFunc(new Uint8Array(object), new Uint8Array(other))) {\n        return false;\n      }\n      return true;\n\n    case boolTag:\n    case dateTag:\n    case numberTag:\n      // Coerce booleans to `1` or `0` and dates to milliseconds.\n      // Invalid dates are coerced to `NaN`.\n      return eq(+object, +other);\n\n    case errorTag:\n      return object.name == other.name && object.message == other.message;\n\n    case regexpTag:\n    case stringTag:\n      // Coerce regexes to strings and treat strings, primitives and objects,\n      // as equal. See http://www.ecma-international.org/ecma-262/7.0/#sec-regexp.prototype.tostring\n      // for more details.\n      return object == (other + '');\n\n    case mapTag:\n      var convert = mapToArray;\n\n    case setTag:\n      var isPartial = bitmask & COMPARE_PARTIAL_FLAG;\n      convert || (convert = setToArray);\n\n      if (object.size != other.size && !isPartial) {\n        return false;\n      }\n      // Assume cyclic values are equal.\n      var stacked = stack.get(object);\n      if (stacked) {\n        return stacked == other;\n      }\n      bitmask |= COMPARE_UNORDERED_FLAG;\n\n      // Recursively compare objects (susceptible to call stack limits).\n      stack.set(object, other);\n      var result = equalArrays(convert(object), convert(other), bitmask, customizer, equalFunc, stack);\n      stack['delete'](object);\n      return result;\n\n    case symbolTag:\n      if (symbolValueOf) {\n        return symbolValueOf.call(object) == symbolValueOf.call(other);\n      }\n  }\n  return false;\n}\n\nmodule.exports = equalByTag;\n","/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\nmodule.exports = mapToArray;\n","var getAllKeys = require('./_getAllKeys');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1;\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * A specialized version of `baseIsEqualDeep` for objects with support for\n * partial deep comparisons.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {number} bitmask The bitmask flags. See `baseIsEqual` for more details.\n * @param {Function} customizer The function to customize comparisons.\n * @param {Function} equalFunc The function to determine equivalents of values.\n * @param {Object} stack Tracks traversed `object` and `other` objects.\n * @returns {boolean} Returns `true` if the objects are equivalent, else `false`.\n */\nfunction equalObjects(object, other, bitmask, customizer, equalFunc, stack) {\n  var isPartial = bitmask & COMPARE_PARTIAL_FLAG,\n      objProps = getAllKeys(object),\n      objLength = objProps.length,\n      othProps = getAllKeys(other),\n      othLength = othProps.length;\n\n  if (objLength != othLength && !isPartial) {\n    return false;\n  }\n  var index = objLength;\n  while (index--) {\n    var key = objProps[index];\n    if (!(isPartial ? key in other : hasOwnProperty.call(other, key))) {\n      return false;\n    }\n  }\n  // Assume cyclic values are equal.\n  var stacked = stack.get(object);\n  if (stacked && stack.get(other)) {\n    return stacked == other;\n  }\n  var result = true;\n  stack.set(object, other);\n  stack.set(other, object);\n\n  var skipCtor = isPartial;\n  while (++index < objLength) {\n    key = objProps[index];\n    var objValue = object[key],\n        othValue = other[key];\n\n    if (customizer) {\n      var compared = isPartial\n        ? customizer(othValue, objValue, key, other, object, stack)\n        : customizer(objValue, othValue, key, object, other, stack);\n    }\n    // Recursively compare objects (susceptible to call stack limits).\n    if (!(compared === undefined\n          ? (objValue === othValue || equalFunc(objValue, othValue, bitmask, customizer, stack))\n          : compared\n        )) {\n      result = false;\n      break;\n    }\n    skipCtor || (skipCtor = key == 'constructor');\n  }\n  if (result && !skipCtor) {\n    var objCtor = object.constructor,\n        othCtor = other.constructor;\n\n    // Non `Object` object instances with different constructors are not equal.\n    if (objCtor != othCtor &&\n        ('constructor' in object && 'constructor' in other) &&\n        !(typeof objCtor == 'function' && objCtor instanceof objCtor &&\n          typeof othCtor == 'function' && othCtor instanceof othCtor)) {\n      result = false;\n    }\n  }\n  stack['delete'](object);\n  stack['delete'](other);\n  return result;\n}\n\nmodule.exports = equalObjects;\n","var isStrictComparable = require('./_isStrictComparable'),\n    keys = require('./keys');\n\n/**\n * Gets the property names, values, and compare flags of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the match data of `object`.\n */\nfunction getMatchData(object) {\n  var result = keys(object),\n      length = result.length;\n\n  while (length--) {\n    var key = result[length],\n        value = object[key];\n\n    result[length] = [key, value, isStrictComparable(value)];\n  }\n  return result;\n}\n\nmodule.exports = getMatchData;\n","var baseIsEqual = require('./_baseIsEqual'),\n    get = require('./get'),\n    hasIn = require('./hasIn'),\n    isKey = require('./_isKey'),\n    isStrictComparable = require('./_isStrictComparable'),\n    matchesStrictComparable = require('./_matchesStrictComparable'),\n    toKey = require('./_toKey');\n\n/** Used to compose bitmasks for value comparisons. */\nvar COMPARE_PARTIAL_FLAG = 1,\n    COMPARE_UNORDERED_FLAG = 2;\n\n/**\n * The base implementation of `_.matchesProperty` which doesn't clone `srcValue`.\n *\n * @private\n * @param {string} path The path of the property to get.\n * @param {*} srcValue The value to match.\n * @returns {Function} Returns the new spec function.\n */\nfunction baseMatchesProperty(path, srcValue) {\n  if (isKey(path) && isStrictComparable(srcValue)) {\n    return matchesStrictComparable(toKey(path), srcValue);\n  }\n  return function(object) {\n    var objValue = get(object, path);\n    return (objValue === undefined && objValue === srcValue)\n      ? hasIn(object, path)\n      : baseIsEqual(srcValue, objValue, COMPARE_PARTIAL_FLAG | COMPARE_UNORDERED_FLAG);\n  };\n}\n\nmodule.exports = baseMatchesProperty;\n","var baseGet = require('./_baseGet');\n\n/**\n * Gets the value at `path` of `object`. If the resolved value is\n * `undefined`, the `defaultValue` is returned in its place.\n *\n * @static\n * @memberOf _\n * @since 3.7.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path of the property to get.\n * @param {*} [defaultValue] The value returned for `undefined` resolved values.\n * @returns {*} Returns the resolved value.\n * @example\n *\n * var object = { 'a': [{ 'b': { 'c': 3 } }] };\n *\n * _.get(object, 'a[0].b.c');\n * // => 3\n *\n * _.get(object, ['a', '0', 'b', 'c']);\n * // => 3\n *\n * _.get(object, 'a.b.c', 'default');\n * // => 'default'\n */\nfunction get(object, path, defaultValue) {\n  var result = object == null ? undefined : baseGet(object, path);\n  return result === undefined ? defaultValue : result;\n}\n\nmodule.exports = get;\n","var memoizeCapped = require('./_memoizeCapped');\n\n/** Used to match property names within property paths. */\nvar rePropName = /[^.[\\]]+|\\[(?:(-?\\d+(?:\\.\\d+)?)|([\"'])((?:(?!\\2)[^\\\\]|\\\\.)*?)\\2)\\]|(?=(?:\\.|\\[\\])(?:\\.|\\[\\]|$))/g;\n\n/** Used to match backslashes in property paths. */\nvar reEscapeChar = /\\\\(\\\\)?/g;\n\n/**\n * Converts `string` to a property path array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the property path array.\n */\nvar stringToPath = memoizeCapped(function(string) {\n  var result = [];\n  if (string.charCodeAt(0) === 46 /* . */) {\n    result.push('');\n  }\n  string.replace(rePropName, function(match, number, quote, subString) {\n    result.push(quote ? subString.replace(reEscapeChar, '$1') : (number || match));\n  });\n  return result;\n});\n\nmodule.exports = stringToPath;\n","var memoize = require('./memoize');\n\n/** Used as the maximum memoize cache size. */\nvar MAX_MEMOIZE_SIZE = 500;\n\n/**\n * A specialized version of `_.memoize` which clears the memoized function's\n * cache when it exceeds `MAX_MEMOIZE_SIZE`.\n *\n * @private\n * @param {Function} func The function to have its output memoized.\n * @returns {Function} Returns the new memoized function.\n */\nfunction memoizeCapped(func) {\n  var result = memoize(func, function(key) {\n    if (cache.size === MAX_MEMOIZE_SIZE) {\n      cache.clear();\n    }\n    return key;\n  });\n\n  var cache = result.cache;\n  return result;\n}\n\nmodule.exports = memoizeCapped;\n","var MapCache = require('./_MapCache');\n\n/** Error message constants. */\nvar FUNC_ERROR_TEXT = 'Expected a function';\n\n/**\n * Creates a function that memoizes the result of `func`. If `resolver` is\n * provided, it determines the cache key for storing the result based on the\n * arguments provided to the memoized function. By default, the first argument\n * provided to the memoized function is used as the map cache key. The `func`\n * is invoked with the `this` binding of the memoized function.\n *\n * **Note:** The cache is exposed as the `cache` property on the memoized\n * function. Its creation may be customized by replacing the `_.memoize.Cache`\n * constructor with one whose instances implement the\n * [`Map`](http://ecma-international.org/ecma-262/7.0/#sec-properties-of-the-map-prototype-object)\n * method interface of `clear`, `delete`, `get`, `has`, and `set`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Function\n * @param {Function} func The function to have its output memoized.\n * @param {Function} [resolver] The function to resolve the cache key.\n * @returns {Function} Returns the new memoized function.\n * @example\n *\n * var object = { 'a': 1, 'b': 2 };\n * var other = { 'c': 3, 'd': 4 };\n *\n * var values = _.memoize(_.values);\n * values(object);\n * // => [1, 2]\n *\n * values(other);\n * // => [3, 4]\n *\n * object.a = 2;\n * values(object);\n * // => [1, 2]\n *\n * // Modify the result cache.\n * values.cache.set(object, ['a', 'b']);\n * values(object);\n * // => ['a', 'b']\n *\n * // Replace `_.memoize.Cache`.\n * _.memoize.Cache = WeakMap;\n */\nfunction memoize(func, resolver) {\n  if (typeof func != 'function' || (resolver != null && typeof resolver != 'function')) {\n    throw new TypeError(FUNC_ERROR_TEXT);\n  }\n  var memoized = function() {\n    var args = arguments,\n        key = resolver ? resolver.apply(this, args) : args[0],\n        cache = memoized.cache;\n\n    if (cache.has(key)) {\n      return cache.get(key);\n    }\n    var result = func.apply(this, args);\n    memoized.cache = cache.set(key, result) || cache;\n    return result;\n  };\n  memoized.cache = new (memoize.Cache || MapCache);\n  return memoized;\n}\n\n// Expose `MapCache`.\nmemoize.Cache = MapCache;\n\nmodule.exports = memoize;\n","var baseHasIn = require('./_baseHasIn'),\n    hasPath = require('./_hasPath');\n\n/**\n * Checks if `path` is a direct or inherited property of `object`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.hasIn(object, 'a');\n * // => true\n *\n * _.hasIn(object, 'a.b');\n * // => true\n *\n * _.hasIn(object, ['a', 'b']);\n * // => true\n *\n * _.hasIn(object, 'b');\n * // => false\n */\nfunction hasIn(object, path) {\n  return object != null && hasPath(object, path, baseHasIn);\n}\n\nmodule.exports = hasIn;\n","/**\n * The base implementation of `_.hasIn` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHasIn(object, key) {\n  return object != null && key in Object(object);\n}\n\nmodule.exports = baseHasIn;\n","var baseProperty = require('./_baseProperty'),\n    basePropertyDeep = require('./_basePropertyDeep'),\n    isKey = require('./_isKey'),\n    toKey = require('./_toKey');\n\n/**\n * Creates a function that returns the value at `path` of a given object.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n * @example\n *\n * var objects = [\n *   { 'a': { 'b': 2 } },\n *   { 'a': { 'b': 1 } }\n * ];\n *\n * _.map(objects, _.property('a.b'));\n * // => [2, 1]\n *\n * _.map(_.sortBy(objects, _.property(['a', 'b'])), 'a.b');\n * // => [1, 2]\n */\nfunction property(path) {\n  return isKey(path) ? baseProperty(toKey(path)) : basePropertyDeep(path);\n}\n\nmodule.exports = property;\n","var baseGet = require('./_baseGet');\n\n/**\n * A specialized version of `baseProperty` which supports deep paths.\n *\n * @private\n * @param {Array|string} path The path of the property to get.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyDeep(path) {\n  return function(object) {\n    return baseGet(object, path);\n  };\n}\n\nmodule.exports = basePropertyDeep;\n","var baseHas = require('./_baseHas'),\n    hasPath = require('./_hasPath');\n\n/**\n * Checks if `path` is a direct property of `object`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @param {Array|string} path The path to check.\n * @returns {boolean} Returns `true` if `path` exists, else `false`.\n * @example\n *\n * var object = { 'a': { 'b': 2 } };\n * var other = _.create({ 'a': _.create({ 'b': 2 }) });\n *\n * _.has(object, 'a');\n * // => true\n *\n * _.has(object, 'a.b');\n * // => true\n *\n * _.has(object, ['a', 'b']);\n * // => true\n *\n * _.has(other, 'a');\n * // => false\n */\nfunction has(object, path) {\n  return object != null && hasPath(object, path, baseHas);\n}\n\nmodule.exports = has;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.has` without support for deep paths.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {Array|string} key The key to check.\n * @returns {boolean} Returns `true` if `key` exists, else `false`.\n */\nfunction baseHas(object, key) {\n  return object != null && hasOwnProperty.call(object, key);\n}\n\nmodule.exports = baseHas;\n","var baseKeys = require('./_baseKeys'),\n    getTag = require('./_getTag'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray'),\n    isArrayLike = require('./isArrayLike'),\n    isBuffer = require('./isBuffer'),\n    isPrototype = require('./_isPrototype'),\n    isTypedArray = require('./isTypedArray');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    setTag = '[object Set]';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Checks if `value` is an empty object, collection, map, or set.\n *\n * Objects are considered empty if they have no own enumerable string keyed\n * properties.\n *\n * Array-like values such as `arguments` objects, arrays, buffers, strings, or\n * jQuery-like collections are considered empty if they have a `length` of `0`.\n * Similarly, maps and sets are considered empty if they have a `size` of `0`.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is empty, else `false`.\n * @example\n *\n * _.isEmpty(null);\n * // => true\n *\n * _.isEmpty(true);\n * // => true\n *\n * _.isEmpty(1);\n * // => true\n *\n * _.isEmpty([1, 2, 3]);\n * // => false\n *\n * _.isEmpty({ 'a': 1 });\n * // => false\n */\nfunction isEmpty(value) {\n  if (value == null) {\n    return true;\n  }\n  if (isArrayLike(value) &&\n      (isArray(value) || typeof value == 'string' || typeof value.splice == 'function' ||\n        isBuffer(value) || isTypedArray(value) || isArguments(value))) {\n    return !value.length;\n  }\n  var tag = getTag(value);\n  if (tag == mapTag || tag == setTag) {\n    return !value.size;\n  }\n  if (isPrototype(value)) {\n    return !baseKeys(value).length;\n  }\n  for (var key in value) {\n    if (hasOwnProperty.call(value, key)) {\n      return false;\n    }\n  }\n  return true;\n}\n\nmodule.exports = isEmpty;\n","/**\n * Checks if `value` is `undefined`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `undefined`, else `false`.\n * @example\n *\n * _.isUndefined(void 0);\n * // => true\n *\n * _.isUndefined(null);\n * // => false\n */\nfunction isUndefined(value) {\n  return value === undefined;\n}\n\nmodule.exports = isUndefined;\n","var arrayReduce = require('./_arrayReduce'),\n    baseEach = require('./_baseEach'),\n    baseIteratee = require('./_baseIteratee'),\n    baseReduce = require('./_baseReduce'),\n    isArray = require('./isArray');\n\n/**\n * Reduces `collection` to a value which is the accumulated result of running\n * each element in `collection` thru `iteratee`, where each successive\n * invocation is supplied the return value of the previous. If `accumulator`\n * is not given, the first element of `collection` is used as the initial\n * value. The iteratee is invoked with four arguments:\n * (accumulator, value, index|key, collection).\n *\n * Many lodash methods are guarded to work as iteratees for methods like\n * `_.reduce`, `_.reduceRight`, and `_.transform`.\n *\n * The guarded methods are:\n * `assign`, `defaults`, `defaultsDeep`, `includes`, `merge`, `orderBy`,\n * and `sortBy`\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @returns {*} Returns the accumulated value.\n * @see _.reduceRight\n * @example\n *\n * _.reduce([1, 2], function(sum, n) {\n *   return sum + n;\n * }, 0);\n * // => 3\n *\n * _.reduce({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {\n *   (result[value] || (result[value] = [])).push(key);\n *   return result;\n * }, {});\n * // => { '1': ['a', 'c'], '2': ['b'] } (iteration order is not guaranteed)\n */\nfunction reduce(collection, iteratee, accumulator) {\n  var func = isArray(collection) ? arrayReduce : baseReduce,\n      initAccum = arguments.length < 3;\n\n  return func(collection, baseIteratee(iteratee, 4), accumulator, initAccum, baseEach);\n}\n\nmodule.exports = reduce;\n","/**\n * The base implementation of `_.reduce` and `_.reduceRight`, without support\n * for iteratee shorthands, which iterates over `collection` using `eachFunc`.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} accumulator The initial value.\n * @param {boolean} initAccum Specify using the first or last element of\n *  `collection` as the initial value.\n * @param {Function} eachFunc The function to iterate over `collection`.\n * @returns {*} Returns the accumulated value.\n */\nfunction baseReduce(collection, iteratee, accumulator, initAccum, eachFunc) {\n  eachFunc(collection, function(value, index, collection) {\n    accumulator = initAccum\n      ? (initAccum = false, value)\n      : iteratee(accumulator, value, index, collection);\n  });\n  return accumulator;\n}\n\nmodule.exports = baseReduce;\n","var baseKeys = require('./_baseKeys'),\n    getTag = require('./_getTag'),\n    isArrayLike = require('./isArrayLike'),\n    isString = require('./isString'),\n    stringSize = require('./_stringSize');\n\n/** `Object#toString` result references. */\nvar mapTag = '[object Map]',\n    setTag = '[object Set]';\n\n/**\n * Gets the size of `collection` by returning its length for array-like\n * values or the number of own enumerable string keyed properties for objects.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object|string} collection The collection to inspect.\n * @returns {number} Returns the collection size.\n * @example\n *\n * _.size([1, 2, 3]);\n * // => 3\n *\n * _.size({ 'a': 1, 'b': 2 });\n * // => 2\n *\n * _.size('pebbles');\n * // => 7\n */\nfunction size(collection) {\n  if (collection == null) {\n    return 0;\n  }\n  if (isArrayLike(collection)) {\n    return isString(collection) ? stringSize(collection) : collection.length;\n  }\n  var tag = getTag(collection);\n  if (tag == mapTag || tag == setTag) {\n    return collection.size;\n  }\n  return baseKeys(collection).length;\n}\n\nmodule.exports = size;\n","var baseProperty = require('./_baseProperty');\n\n/**\n * Gets the size of an ASCII `string`.\n *\n * @private\n * @param {string} string The string inspect.\n * @returns {number} Returns the string size.\n */\nvar asciiSize = baseProperty('length');\n\nmodule.exports = asciiSize;\n","/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsVarRange = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsAstral = '[' + rsAstralRange + ']',\n    rsCombo = '[' + rsComboRange + ']',\n    rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]',\n    rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',\n    rsNonAstral = '[^' + rsAstralRange + ']',\n    rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\n    rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\n    rsZWJ = '\\\\u200d';\n\n/** Used to compose unicode regexes. */\nvar reOptMod = rsModifier + '?',\n    rsOptVar = '[' + rsVarRange + ']?',\n    rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',\n    rsSeq = rsOptVar + reOptMod + rsOptJoin,\n    rsSymbol = '(?:' + [rsNonAstral + rsCombo + '?', rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + ')';\n\n/** Used to match [string symbols](https://mathiasbynens.be/notes/javascript-unicode). */\nvar reUnicode = RegExp(rsFitz + '(?=' + rsFitz + ')|' + rsSymbol + rsSeq, 'g');\n\n/**\n * Gets the size of a Unicode `string`.\n *\n * @private\n * @param {string} string The string inspect.\n * @returns {number} Returns the string size.\n */\nfunction unicodeSize(string) {\n  var result = reUnicode.lastIndex = 0;\n  while (reUnicode.test(string)) {\n    ++result;\n  }\n  return result;\n}\n\nmodule.exports = unicodeSize;\n","var arrayEach = require('./_arrayEach'),\n    baseCreate = require('./_baseCreate'),\n    baseForOwn = require('./_baseForOwn'),\n    baseIteratee = require('./_baseIteratee'),\n    getPrototype = require('./_getPrototype'),\n    isArray = require('./isArray'),\n    isBuffer = require('./isBuffer'),\n    isFunction = require('./isFunction'),\n    isObject = require('./isObject'),\n    isTypedArray = require('./isTypedArray');\n\n/**\n * An alternative to `_.reduce`; this method transforms `object` to a new\n * `accumulator` object which is the result of running each of its own\n * enumerable string keyed properties thru `iteratee`, with each invocation\n * potentially mutating the `accumulator` object. If `accumulator` is not\n * provided, a new object with the same `[[Prototype]]` will be used. The\n * iteratee is invoked with four arguments: (accumulator, value, key, object).\n * Iteratee functions may exit iteration early by explicitly returning `false`.\n *\n * @static\n * @memberOf _\n * @since 1.3.0\n * @category Object\n * @param {Object} object The object to iterate over.\n * @param {Function} [iteratee=_.identity] The function invoked per iteration.\n * @param {*} [accumulator] The custom accumulator value.\n * @returns {*} Returns the accumulated value.\n * @example\n *\n * _.transform([2, 3, 4], function(result, n) {\n *   result.push(n *= n);\n *   return n % 2 == 0;\n * }, []);\n * // => [4, 9]\n *\n * _.transform({ 'a': 1, 'b': 2, 'c': 1 }, function(result, value, key) {\n *   (result[value] || (result[value] = [])).push(key);\n * }, {});\n * // => { '1': ['a', 'c'], '2': ['b'] }\n */\nfunction transform(object, iteratee, accumulator) {\n  var isArr = isArray(object),\n      isArrLike = isArr || isBuffer(object) || isTypedArray(object);\n\n  iteratee = baseIteratee(iteratee, 4);\n  if (accumulator == null) {\n    var Ctor = object && object.constructor;\n    if (isArrLike) {\n      accumulator = isArr ? new Ctor : [];\n    }\n    else if (isObject(object)) {\n      accumulator = isFunction(Ctor) ? baseCreate(getPrototype(object)) : {};\n    }\n    else {\n      accumulator = {};\n    }\n  }\n  (isArrLike ? arrayEach : baseForOwn)(object, function(value, index, object) {\n    return iteratee(accumulator, value, index, object);\n  });\n  return accumulator;\n}\n\nmodule.exports = transform;\n","var Symbol = require('./_Symbol'),\n    isArguments = require('./isArguments'),\n    isArray = require('./isArray');\n\n/** Built-in value references. */\nvar spreadableSymbol = Symbol ? Symbol.isConcatSpreadable : undefined;\n\n/**\n * Checks if `value` is a flattenable `arguments` object or array.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is flattenable, else `false`.\n */\nfunction isFlattenable(value) {\n  return isArray(value) || isArguments(value) ||\n    !!(spreadableSymbol && value && value[spreadableSymbol]);\n}\n\nmodule.exports = isFlattenable;\n","var apply = require('./_apply');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nmodule.exports = overRest;\n","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nmodule.exports = apply;\n","var baseSetToString = require('./_baseSetToString'),\n    shortOut = require('./_shortOut');\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\nmodule.exports = setToString;\n","var constant = require('./constant'),\n    defineProperty = require('./_defineProperty'),\n    identity = require('./identity');\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\nmodule.exports = baseSetToString;\n","/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\nmodule.exports = shortOut;\n","/**\n * The base implementation of `_.findIndex` and `_.findLastIndex` without\n * support for iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Function} predicate The function invoked per iteration.\n * @param {number} fromIndex The index to search from.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction baseFindIndex(array, predicate, fromIndex, fromRight) {\n  var length = array.length,\n      index = fromIndex + (fromRight ? 1 : -1);\n\n  while ((fromRight ? index-- : ++index < length)) {\n    if (predicate(array[index], index, array)) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = baseFindIndex;\n","/**\n * The base implementation of `_.isNaN` without support for number objects.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is `NaN`, else `false`.\n */\nfunction baseIsNaN(value) {\n  return value !== value;\n}\n\nmodule.exports = baseIsNaN;\n","/**\n * A specialized version of `_.indexOf` which performs strict equality\n * comparisons of values, i.e. `===`.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} value The value to search for.\n * @param {number} fromIndex The index to search from.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction strictIndexOf(array, value, fromIndex) {\n  var index = fromIndex - 1,\n      length = array.length;\n\n  while (++index < length) {\n    if (array[index] === value) {\n      return index;\n    }\n  }\n  return -1;\n}\n\nmodule.exports = strictIndexOf;\n","var Set = require('./_Set'),\n    noop = require('./noop'),\n    setToArray = require('./_setToArray');\n\n/** Used as references for various `Number` constants. */\nvar INFINITY = 1 / 0;\n\n/**\n * Creates a set object of `values`.\n *\n * @private\n * @param {Array} values The values to add to the set.\n * @returns {Object} Returns the new set.\n */\nvar createSet = !(Set && (1 / setToArray(new Set([,-0]))[1]) == INFINITY) ? noop : function(values) {\n  return new Set(values);\n};\n\nmodule.exports = createSet;\n","/**\n * This method returns `undefined`.\n *\n * @static\n * @memberOf _\n * @since 2.3.0\n * @category Util\n * @example\n *\n * _.times(2, _.noop);\n * // => [undefined, undefined]\n */\nfunction noop() {\n  // No operation performed.\n}\n\nmodule.exports = noop;\n","var arrayMap = require('./_arrayMap');\n\n/**\n * The base implementation of `_.values` and `_.valuesIn` which creates an\n * array of `object` property values corresponding to the property names\n * of `props`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} props The property names to get values for.\n * @returns {Object} Returns the array of property values.\n */\nfunction baseValues(object, props) {\n  return arrayMap(props, function(key) {\n    return object[key];\n  });\n}\n\nmodule.exports = baseValues;\n","module.exports = '2.1.9-pre';\n","var _ = require(\"./lodash\");\nvar Graph = require(\"./graph\");\n\nmodule.exports = {\n  write: write,\n  read: read\n};\n\nfunction write(g) {\n  var json = {\n    options: {\n      directed: g.isDirected(),\n      multigraph: g.isMultigraph(),\n      compound: g.isCompound()\n    },\n    nodes: writeNodes(g),\n    edges: writeEdges(g)\n  };\n  if (!_.isUndefined(g.graph())) {\n    json.value = _.clone(g.graph());\n  }\n  return json;\n}\n\nfunction writeNodes(g) {\n  return _.map(g.nodes(), function(v) {\n    var nodeValue = g.node(v);\n    var parent = g.parent(v);\n    var node = { v: v };\n    if (!_.isUndefined(nodeValue)) {\n      node.value = nodeValue;\n    }\n    if (!_.isUndefined(parent)) {\n      node.parent = parent;\n    }\n    return node;\n  });\n}\n\nfunction writeEdges(g) {\n  return _.map(g.edges(), function(e) {\n    var edgeValue = g.edge(e);\n    var edge = { v: e.v, w: e.w };\n    if (!_.isUndefined(e.name)) {\n      edge.name = e.name;\n    }\n    if (!_.isUndefined(edgeValue)) {\n      edge.value = edgeValue;\n    }\n    return edge;\n  });\n}\n\nfunction read(json) {\n  var g = new Graph(json.options).setGraph(json.value);\n  _.each(json.nodes, function(entry) {\n    g.setNode(entry.v, entry.value);\n    if (entry.parent) {\n      g.setParent(entry.v, entry.parent);\n    }\n  });\n  _.each(json.edges, function(entry) {\n    g.setEdge({ v: entry.v, w: entry.w, name: entry.name }, entry.value);\n  });\n  return g;\n}\n","module.exports = {\n  components: require(\"./components\"),\n  dijkstra: require(\"./dijkstra\"),\n  dijkstraAll: require(\"./dijkstra-all\"),\n  findCycles: require(\"./find-cycles\"),\n  floydWarshall: require(\"./floyd-warshall\"),\n  isAcyclic: require(\"./is-acyclic\"),\n  postorder: require(\"./postorder\"),\n  preorder: require(\"./preorder\"),\n  prim: require(\"./prim\"),\n  tarjan: require(\"./tarjan\"),\n  topsort: require(\"./topsort\")\n};\n","var _ = require(\"../lodash\");\n\nmodule.exports = components;\n\nfunction components(g) {\n  var visited = {};\n  var cmpts = [];\n  var cmpt;\n\n  function dfs(v) {\n    if (_.has(visited, v)) return;\n    visited[v] = true;\n    cmpt.push(v);\n    _.each(g.successors(v), dfs);\n    _.each(g.predecessors(v), dfs);\n  }\n\n  _.each(g.nodes(), function(v) {\n    cmpt = [];\n    dfs(v);\n    if (cmpt.length) {\n      cmpts.push(cmpt);\n    }\n  });\n\n  return cmpts;\n}\n","var dijkstra = require(\"./dijkstra\");\nvar _ = require(\"../lodash\");\n\nmodule.exports = dijkstraAll;\n\nfunction dijkstraAll(g, weightFunc, edgeFunc) {\n  return _.transform(g.nodes(), function(acc, v) {\n    acc[v] = dijkstra(g, v, weightFunc, edgeFunc);\n  }, {});\n}\n","var _ = require(\"../lodash\");\nvar tarjan = require(\"./tarjan\");\n\nmodule.exports = findCycles;\n\nfunction findCycles(g) {\n  return _.filter(tarjan(g), function(cmpt) {\n    return cmpt.length > 1 || (cmpt.length === 1 && g.hasEdge(cmpt[0], cmpt[0]));\n  });\n}\n","var _ = require(\"../lodash\");\n\nmodule.exports = floydWarshall;\n\nvar DEFAULT_WEIGHT_FUNC = _.constant(1);\n\nfunction floydWarshall(g, weightFn, edgeFn) {\n  return runFloydWarshall(g,\n    weightFn || DEFAULT_WEIGHT_FUNC,\n    edgeFn || function(v) { return g.outEdges(v); });\n}\n\nfunction runFloydWarshall(g, weightFn, edgeFn) {\n  var results = {};\n  var nodes = g.nodes();\n\n  nodes.forEach(function(v) {\n    results[v] = {};\n    results[v][v] = { distance: 0 };\n    nodes.forEach(function(w) {\n      if (v !== w) {\n        results[v][w] = { distance: Number.POSITIVE_INFINITY };\n      }\n    });\n    edgeFn(v).forEach(function(edge) {\n      var w = edge.v === v ? edge.w : edge.v;\n      var d = weightFn(edge);\n      results[v][w] = { distance: d, predecessor: v };\n    });\n  });\n\n  nodes.forEach(function(k) {\n    var rowK = results[k];\n    nodes.forEach(function(i) {\n      var rowI = results[i];\n      nodes.forEach(function(j) {\n        var ik = rowI[k];\n        var kj = rowK[j];\n        var ij = rowI[j];\n        var altDistance = ik.distance + kj.distance;\n        if (altDistance < ij.distance) {\n          ij.distance = altDistance;\n          ij.predecessor = kj.predecessor;\n        }\n      });\n    });\n  });\n\n  return results;\n}\n","var topsort = require(\"./topsort\");\n\nmodule.exports = isAcyclic;\n\nfunction isAcyclic(g) {\n  try {\n    topsort(g);\n  } catch (e) {\n    if (e instanceof topsort.CycleException) {\n      return false;\n    }\n    throw e;\n  }\n  return true;\n}\n","var dfs = require(\"./dfs\");\n\nmodule.exports = postorder;\n\nfunction postorder(g, vs) {\n  return dfs(g, vs, \"post\");\n}\n","var dfs = require(\"./dfs\");\n\nmodule.exports = preorder;\n\nfunction preorder(g, vs) {\n  return dfs(g, vs, \"pre\");\n}\n","var _ = require(\"../lodash\");\nvar Graph = require(\"../graph\");\nvar PriorityQueue = require(\"../data/priority-queue\");\n\nmodule.exports = prim;\n\nfunction prim(g, weightFunc) {\n  var result = new Graph();\n  var parents = {};\n  var pq = new PriorityQueue();\n  var v;\n\n  function updateNeighbors(edge) {\n    var w = edge.v === v ? edge.w : edge.v;\n    var pri = pq.priority(w);\n    if (pri !== undefined) {\n      var edgeWeight = weightFunc(edge);\n      if (edgeWeight < pri) {\n        parents[w] = v;\n        pq.decrease(w, edgeWeight);\n      }\n    }\n  }\n\n  if (g.nodeCount() === 0) {\n    return result;\n  }\n\n  _.each(g.nodes(), function(v) {\n    pq.add(v, Number.POSITIVE_INFINITY);\n    result.setNode(v);\n  });\n\n  // Start from an arbitrary node\n  pq.decrease(g.nodes()[0], 0);\n\n  var init = false;\n  while (pq.size() > 0) {\n    v = pq.removeMin();\n    if (_.has(parents, v)) {\n      result.setEdge(v, parents[v]);\n    } else if (init) {\n      throw new Error(\"Input graph is not connected: \" + g);\n    } else {\n      init = true;\n    }\n\n    g.nodeEdges(v).forEach(updateNeighbors);\n  }\n\n  return result;\n}\n","var baseRange = require('./_baseRange'),\n    isIterateeCall = require('./_isIterateeCall'),\n    toFinite = require('./toFinite');\n\n/**\n * Creates a `_.range` or `_.rangeRight` function.\n *\n * @private\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Function} Returns the new range function.\n */\nfunction createRange(fromRight) {\n  return function(start, end, step) {\n    if (step && typeof step != 'number' && isIterateeCall(start, end, step)) {\n      end = step = undefined;\n    }\n    // Ensure the sign of `-0` is preserved.\n    start = toFinite(start);\n    if (end === undefined) {\n      end = start;\n      start = 0;\n    } else {\n      end = toFinite(end);\n    }\n    step = step === undefined ? (start < end ? 1 : -1) : toFinite(step);\n    return baseRange(start, end, step, fromRight);\n  };\n}\n\nmodule.exports = createRange;\n","/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeCeil = Math.ceil,\n    nativeMax = Math.max;\n\n/**\n * The base implementation of `_.range` and `_.rangeRight` which doesn't\n * coerce arguments.\n *\n * @private\n * @param {number} start The start of the range.\n * @param {number} end The end of the range.\n * @param {number} step The value to increment or decrement by.\n * @param {boolean} [fromRight] Specify iterating from right to left.\n * @returns {Array} Returns the range of numbers.\n */\nfunction baseRange(start, end, step, fromRight) {\n  var index = -1,\n      length = nativeMax(nativeCeil((end - start) / (step || 1)), 0),\n      result = Array(length);\n\n  while (length--) {\n    result[fromRight ? length : ++index] = start;\n    start += step;\n  }\n  return result;\n}\n\nmodule.exports = baseRange;\n","var isObject = require('./isObject'),\n    isSymbol = require('./isSymbol');\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to match leading and trailing whitespace. */\nvar reTrim = /^\\s+|\\s+$/g;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = value.replace(reTrim, '');\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nmodule.exports = toNumber;\n","var baseIndexOf = require('./_baseIndexOf');\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last string symbol\n * that is not found in the character symbols.\n *\n * @private\n * @param {Array} strSymbols The string symbols to inspect.\n * @param {Array} chrSymbols The character symbols to find.\n * @returns {number} Returns the index of the last unmatched string symbol.\n */\nfunction charsEndIndex(strSymbols, chrSymbols) {\n  var index = strSymbols.length;\n\n  while (index-- && baseIndexOf(chrSymbols, strSymbols[index], 0) > -1) {}\n  return index;\n}\n\nmodule.exports = charsEndIndex;\n","var baseIndexOf = require('./_baseIndexOf');\n\n/**\n * Used by `_.trim` and `_.trimStart` to get the index of the first string symbol\n * that is not found in the character symbols.\n *\n * @private\n * @param {Array} strSymbols The string symbols to inspect.\n * @param {Array} chrSymbols The character symbols to find.\n * @returns {number} Returns the index of the first unmatched string symbol.\n */\nfunction charsStartIndex(strSymbols, chrSymbols) {\n  var index = -1,\n      length = strSymbols.length;\n\n  while (++index < length && baseIndexOf(chrSymbols, strSymbols[index], 0) > -1) {}\n  return index;\n}\n\nmodule.exports = charsStartIndex;\n","/**\n * Converts an ASCII `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction asciiToArray(string) {\n  return string.split('');\n}\n\nmodule.exports = asciiToArray;\n","/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsVarRange = '\\\\ufe0e\\\\ufe0f';\n\n/** Used to compose unicode capture groups. */\nvar rsAstral = '[' + rsAstralRange + ']',\n    rsCombo = '[' + rsComboRange + ']',\n    rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]',\n    rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',\n    rsNonAstral = '[^' + rsAstralRange + ']',\n    rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\n    rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\n    rsZWJ = '\\\\u200d';\n\n/** Used to compose unicode regexes. */\nvar reOptMod = rsModifier + '?',\n    rsOptVar = '[' + rsVarRange + ']?',\n    rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',\n    rsSeq = rsOptVar + reOptMod + rsOptJoin,\n    rsSymbol = '(?:' + [rsNonAstral + rsCombo + '?', rsCombo, rsRegional, rsSurrPair, rsAstral].join('|') + ')';\n\n/** Used to match [string symbols](https://mathiasbynens.be/notes/javascript-unicode). */\nvar reUnicode = RegExp(rsFitz + '(?=' + rsFitz + ')|' + rsSymbol + rsSeq, 'g');\n\n/**\n * Converts a Unicode `string` to an array.\n *\n * @private\n * @param {string} string The string to convert.\n * @returns {Array} Returns the converted array.\n */\nfunction unicodeToArray(string) {\n  return string.match(reUnicode) || [];\n}\n\nmodule.exports = unicodeToArray;\n","var baseRepeat = require('./_baseRepeat'),\n    baseToString = require('./_baseToString'),\n    castSlice = require('./_castSlice'),\n    hasUnicode = require('./_hasUnicode'),\n    stringSize = require('./_stringSize'),\n    stringToArray = require('./_stringToArray');\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeCeil = Math.ceil;\n\n/**\n * Creates the padding for `string` based on `length`. The `chars` string\n * is truncated if the number of characters exceeds `length`.\n *\n * @private\n * @param {number} length The padding length.\n * @param {string} [chars=' '] The string used as padding.\n * @returns {string} Returns the padding for `string`.\n */\nfunction createPadding(length, chars) {\n  chars = chars === undefined ? ' ' : baseToString(chars);\n\n  var charsLength = chars.length;\n  if (charsLength < 2) {\n    return charsLength ? baseRepeat(chars, length) : chars;\n  }\n  var result = baseRepeat(chars, nativeCeil(length / stringSize(chars)));\n  return hasUnicode(chars)\n    ? castSlice(stringToArray(result), 0, length).join('')\n    : result.slice(0, length);\n}\n\nmodule.exports = createPadding;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeFloor = Math.floor;\n\n/**\n * The base implementation of `_.repeat` which doesn't coerce arguments.\n *\n * @private\n * @param {string} string The string to repeat.\n * @param {number} n The number of times to repeat the string.\n * @returns {string} Returns the repeated string.\n */\nfunction baseRepeat(string, n) {\n  var result = '';\n  if (!string || n < 1 || n > MAX_SAFE_INTEGER) {\n    return result;\n  }\n  // Leverage the exponentiation by squaring algorithm for a faster repeat.\n  // See https://en.wikipedia.org/wiki/Exponentiation_by_squaring for more details.\n  do {\n    if (n % 2) {\n      result += string;\n    }\n    n = nativeFloor(n / 2);\n    if (n) {\n      string += string;\n    }\n  } while (n);\n\n  return result;\n}\n\nmodule.exports = baseRepeat;\n","var castSlice = require('./_castSlice'),\n    hasUnicode = require('./_hasUnicode'),\n    stringToArray = require('./_stringToArray'),\n    toString = require('./toString');\n\n/**\n * Creates a function like `_.lowerFirst`.\n *\n * @private\n * @param {string} methodName The name of the `String` case method to use.\n * @returns {Function} Returns the new case function.\n */\nfunction createCaseFirst(methodName) {\n  return function(string) {\n    string = toString(string);\n\n    var strSymbols = hasUnicode(string)\n      ? stringToArray(string)\n      : undefined;\n\n    var chr = strSymbols\n      ? strSymbols[0]\n      : string.charAt(0);\n\n    var trailing = strSymbols\n      ? castSlice(strSymbols, 1).join('')\n      : string.slice(1);\n\n    return chr[methodName]() + trailing;\n  };\n}\n\nmodule.exports = createCaseFirst;\n","var deburrLetter = require('./_deburrLetter'),\n    toString = require('./toString');\n\n/** Used to match Latin Unicode letters (excluding mathematical operators). */\nvar reLatin = /[\\xc0-\\xd6\\xd8-\\xf6\\xf8-\\xff\\u0100-\\u017f]/g;\n\n/** Used to compose unicode character classes. */\nvar rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange;\n\n/** Used to compose unicode capture groups. */\nvar rsCombo = '[' + rsComboRange + ']';\n\n/**\n * Used to match [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks) and\n * [combining diacritical marks for symbols](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks_for_Symbols).\n */\nvar reComboMark = RegExp(rsCombo, 'g');\n\n/**\n * Deburrs `string` by converting\n * [Latin-1 Supplement](https://en.wikipedia.org/wiki/Latin-1_Supplement_(Unicode_block)#Character_table)\n * and [Latin Extended-A](https://en.wikipedia.org/wiki/Latin_Extended-A)\n * letters to basic Latin letters and removing\n * [combining diacritical marks](https://en.wikipedia.org/wiki/Combining_Diacritical_Marks).\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to deburr.\n * @returns {string} Returns the deburred string.\n * @example\n *\n * _.deburr('déjà vu');\n * // => 'deja vu'\n */\nfunction deburr(string) {\n  string = toString(string);\n  return string && string.replace(reLatin, deburrLetter).replace(reComboMark, '');\n}\n\nmodule.exports = deburr;\n","var basePropertyOf = require('./_basePropertyOf');\n\n/** Used to map Latin Unicode letters to basic Latin letters. */\nvar deburredLetters = {\n  // Latin-1 Supplement block.\n  '\\xc0': 'A',  '\\xc1': 'A', '\\xc2': 'A', '\\xc3': 'A', '\\xc4': 'A', '\\xc5': 'A',\n  '\\xe0': 'a',  '\\xe1': 'a', '\\xe2': 'a', '\\xe3': 'a', '\\xe4': 'a', '\\xe5': 'a',\n  '\\xc7': 'C',  '\\xe7': 'c',\n  '\\xd0': 'D',  '\\xf0': 'd',\n  '\\xc8': 'E',  '\\xc9': 'E', '\\xca': 'E', '\\xcb': 'E',\n  '\\xe8': 'e',  '\\xe9': 'e', '\\xea': 'e', '\\xeb': 'e',\n  '\\xcc': 'I',  '\\xcd': 'I', '\\xce': 'I', '\\xcf': 'I',\n  '\\xec': 'i',  '\\xed': 'i', '\\xee': 'i', '\\xef': 'i',\n  '\\xd1': 'N',  '\\xf1': 'n',\n  '\\xd2': 'O',  '\\xd3': 'O', '\\xd4': 'O', '\\xd5': 'O', '\\xd6': 'O', '\\xd8': 'O',\n  '\\xf2': 'o',  '\\xf3': 'o', '\\xf4': 'o', '\\xf5': 'o', '\\xf6': 'o', '\\xf8': 'o',\n  '\\xd9': 'U',  '\\xda': 'U', '\\xdb': 'U', '\\xdc': 'U',\n  '\\xf9': 'u',  '\\xfa': 'u', '\\xfb': 'u', '\\xfc': 'u',\n  '\\xdd': 'Y',  '\\xfd': 'y', '\\xff': 'y',\n  '\\xc6': 'Ae', '\\xe6': 'ae',\n  '\\xde': 'Th', '\\xfe': 'th',\n  '\\xdf': 'ss',\n  // Latin Extended-A block.\n  '\\u0100': 'A',  '\\u0102': 'A', '\\u0104': 'A',\n  '\\u0101': 'a',  '\\u0103': 'a', '\\u0105': 'a',\n  '\\u0106': 'C',  '\\u0108': 'C', '\\u010a': 'C', '\\u010c': 'C',\n  '\\u0107': 'c',  '\\u0109': 'c', '\\u010b': 'c', '\\u010d': 'c',\n  '\\u010e': 'D',  '\\u0110': 'D', '\\u010f': 'd', '\\u0111': 'd',\n  '\\u0112': 'E',  '\\u0114': 'E', '\\u0116': 'E', '\\u0118': 'E', '\\u011a': 'E',\n  '\\u0113': 'e',  '\\u0115': 'e', '\\u0117': 'e', '\\u0119': 'e', '\\u011b': 'e',\n  '\\u011c': 'G',  '\\u011e': 'G', '\\u0120': 'G', '\\u0122': 'G',\n  '\\u011d': 'g',  '\\u011f': 'g', '\\u0121': 'g', '\\u0123': 'g',\n  '\\u0124': 'H',  '\\u0126': 'H', '\\u0125': 'h', '\\u0127': 'h',\n  '\\u0128': 'I',  '\\u012a': 'I', '\\u012c': 'I', '\\u012e': 'I', '\\u0130': 'I',\n  '\\u0129': 'i',  '\\u012b': 'i', '\\u012d': 'i', '\\u012f': 'i', '\\u0131': 'i',\n  '\\u0134': 'J',  '\\u0135': 'j',\n  '\\u0136': 'K',  '\\u0137': 'k', '\\u0138': 'k',\n  '\\u0139': 'L',  '\\u013b': 'L', '\\u013d': 'L', '\\u013f': 'L', '\\u0141': 'L',\n  '\\u013a': 'l',  '\\u013c': 'l', '\\u013e': 'l', '\\u0140': 'l', '\\u0142': 'l',\n  '\\u0143': 'N',  '\\u0145': 'N', '\\u0147': 'N', '\\u014a': 'N',\n  '\\u0144': 'n',  '\\u0146': 'n', '\\u0148': 'n', '\\u014b': 'n',\n  '\\u014c': 'O',  '\\u014e': 'O', '\\u0150': 'O',\n  '\\u014d': 'o',  '\\u014f': 'o', '\\u0151': 'o',\n  '\\u0154': 'R',  '\\u0156': 'R', '\\u0158': 'R',\n  '\\u0155': 'r',  '\\u0157': 'r', '\\u0159': 'r',\n  '\\u015a': 'S',  '\\u015c': 'S', '\\u015e': 'S', '\\u0160': 'S',\n  '\\u015b': 's',  '\\u015d': 's', '\\u015f': 's', '\\u0161': 's',\n  '\\u0162': 'T',  '\\u0164': 'T', '\\u0166': 'T',\n  '\\u0163': 't',  '\\u0165': 't', '\\u0167': 't',\n  '\\u0168': 'U',  '\\u016a': 'U', '\\u016c': 'U', '\\u016e': 'U', '\\u0170': 'U', '\\u0172': 'U',\n  '\\u0169': 'u',  '\\u016b': 'u', '\\u016d': 'u', '\\u016f': 'u', '\\u0171': 'u', '\\u0173': 'u',\n  '\\u0174': 'W',  '\\u0175': 'w',\n  '\\u0176': 'Y',  '\\u0177': 'y', '\\u0178': 'Y',\n  '\\u0179': 'Z',  '\\u017b': 'Z', '\\u017d': 'Z',\n  '\\u017a': 'z',  '\\u017c': 'z', '\\u017e': 'z',\n  '\\u0132': 'IJ', '\\u0133': 'ij',\n  '\\u0152': 'Oe', '\\u0153': 'oe',\n  '\\u0149': \"'n\", '\\u017f': 's'\n};\n\n/**\n * Used by `_.deburr` to convert Latin-1 Supplement and Latin Extended-A\n * letters to basic Latin letters.\n *\n * @private\n * @param {string} letter The matched letter to deburr.\n * @returns {string} Returns the deburred letter.\n */\nvar deburrLetter = basePropertyOf(deburredLetters);\n\nmodule.exports = deburrLetter;\n","/**\n * The base implementation of `_.propertyOf` without support for deep paths.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Function} Returns the new accessor function.\n */\nfunction basePropertyOf(object) {\n  return function(key) {\n    return object == null ? undefined : object[key];\n  };\n}\n\nmodule.exports = basePropertyOf;\n","var asciiWords = require('./_asciiWords'),\n    hasUnicodeWord = require('./_hasUnicodeWord'),\n    toString = require('./toString'),\n    unicodeWords = require('./_unicodeWords');\n\n/**\n * Splits `string` into an array of its words.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category String\n * @param {string} [string=''] The string to inspect.\n * @param {RegExp|string} [pattern] The pattern to match words.\n * @param- {Object} [guard] Enables use as an iteratee for methods like `_.map`.\n * @returns {Array} Returns the words of `string`.\n * @example\n *\n * _.words('fred, barney, & pebbles');\n * // => ['fred', 'barney', 'pebbles']\n *\n * _.words('fred, barney, & pebbles', /[^, ]+/g);\n * // => ['fred', 'barney', '&', 'pebbles']\n */\nfunction words(string, pattern, guard) {\n  string = toString(string);\n  pattern = guard ? undefined : pattern;\n\n  if (pattern === undefined) {\n    return hasUnicodeWord(string) ? unicodeWords(string) : asciiWords(string);\n  }\n  return string.match(pattern) || [];\n}\n\nmodule.exports = words;\n","/** Used to match words composed of alphanumeric characters. */\nvar reAsciiWord = /[^\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\x7f]+/g;\n\n/**\n * Splits an ASCII `string` into an array of its words.\n *\n * @private\n * @param {string} The string to inspect.\n * @returns {Array} Returns the words of `string`.\n */\nfunction asciiWords(string) {\n  return string.match(reAsciiWord) || [];\n}\n\nmodule.exports = asciiWords;\n","/** Used to detect strings that need a more robust regexp to match words. */\nvar reHasUnicodeWord = /[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/;\n\n/**\n * Checks if `string` contains a word composed of Unicode symbols.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {boolean} Returns `true` if a word is found, else `false`.\n */\nfunction hasUnicodeWord(string) {\n  return reHasUnicodeWord.test(string);\n}\n\nmodule.exports = hasUnicodeWord;\n","/** Used to compose unicode character classes. */\nvar rsAstralRange = '\\\\ud800-\\\\udfff',\n    rsComboMarksRange = '\\\\u0300-\\\\u036f',\n    reComboHalfMarksRange = '\\\\ufe20-\\\\ufe2f',\n    rsComboSymbolsRange = '\\\\u20d0-\\\\u20ff',\n    rsComboRange = rsComboMarksRange + reComboHalfMarksRange + rsComboSymbolsRange,\n    rsDingbatRange = '\\\\u2700-\\\\u27bf',\n    rsLowerRange = 'a-z\\\\xdf-\\\\xf6\\\\xf8-\\\\xff',\n    rsMathOpRange = '\\\\xac\\\\xb1\\\\xd7\\\\xf7',\n    rsNonCharRange = '\\\\x00-\\\\x2f\\\\x3a-\\\\x40\\\\x5b-\\\\x60\\\\x7b-\\\\xbf',\n    rsPunctuationRange = '\\\\u2000-\\\\u206f',\n    rsSpaceRange = ' \\\\t\\\\x0b\\\\f\\\\xa0\\\\ufeff\\\\n\\\\r\\\\u2028\\\\u2029\\\\u1680\\\\u180e\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200a\\\\u202f\\\\u205f\\\\u3000',\n    rsUpperRange = 'A-Z\\\\xc0-\\\\xd6\\\\xd8-\\\\xde',\n    rsVarRange = '\\\\ufe0e\\\\ufe0f',\n    rsBreakRange = rsMathOpRange + rsNonCharRange + rsPunctuationRange + rsSpaceRange;\n\n/** Used to compose unicode capture groups. */\nvar rsApos = \"['\\u2019]\",\n    rsBreak = '[' + rsBreakRange + ']',\n    rsCombo = '[' + rsComboRange + ']',\n    rsDigits = '\\\\d+',\n    rsDingbat = '[' + rsDingbatRange + ']',\n    rsLower = '[' + rsLowerRange + ']',\n    rsMisc = '[^' + rsAstralRange + rsBreakRange + rsDigits + rsDingbatRange + rsLowerRange + rsUpperRange + ']',\n    rsFitz = '\\\\ud83c[\\\\udffb-\\\\udfff]',\n    rsModifier = '(?:' + rsCombo + '|' + rsFitz + ')',\n    rsNonAstral = '[^' + rsAstralRange + ']',\n    rsRegional = '(?:\\\\ud83c[\\\\udde6-\\\\uddff]){2}',\n    rsSurrPair = '[\\\\ud800-\\\\udbff][\\\\udc00-\\\\udfff]',\n    rsUpper = '[' + rsUpperRange + ']',\n    rsZWJ = '\\\\u200d';\n\n/** Used to compose unicode regexes. */\nvar rsMiscLower = '(?:' + rsLower + '|' + rsMisc + ')',\n    rsMiscUpper = '(?:' + rsUpper + '|' + rsMisc + ')',\n    rsOptContrLower = '(?:' + rsApos + '(?:d|ll|m|re|s|t|ve))?',\n    rsOptContrUpper = '(?:' + rsApos + '(?:D|LL|M|RE|S|T|VE))?',\n    reOptMod = rsModifier + '?',\n    rsOptVar = '[' + rsVarRange + ']?',\n    rsOptJoin = '(?:' + rsZWJ + '(?:' + [rsNonAstral, rsRegional, rsSurrPair].join('|') + ')' + rsOptVar + reOptMod + ')*',\n    rsOrdLower = '\\\\d*(?:1st|2nd|3rd|(?![123])\\\\dth)(?=\\\\b|[A-Z_])',\n    rsOrdUpper = '\\\\d*(?:1ST|2ND|3RD|(?![123])\\\\dTH)(?=\\\\b|[a-z_])',\n    rsSeq = rsOptVar + reOptMod + rsOptJoin,\n    rsEmoji = '(?:' + [rsDingbat, rsRegional, rsSurrPair].join('|') + ')' + rsSeq;\n\n/** Used to match complex or compound words. */\nvar reUnicodeWord = RegExp([\n  rsUpper + '?' + rsLower + '+' + rsOptContrLower + '(?=' + [rsBreak, rsUpper, '$'].join('|') + ')',\n  rsMiscUpper + '+' + rsOptContrUpper + '(?=' + [rsBreak, rsUpper + rsMiscLower, '$'].join('|') + ')',\n  rsUpper + '?' + rsMiscLower + '+' + rsOptContrLower,\n  rsUpper + '+' + rsOptContrUpper,\n  rsOrdUpper,\n  rsOrdLower,\n  rsDigits,\n  rsEmoji\n].join('|'), 'g');\n\n/**\n * Splits a Unicode `string` into an array of its words.\n *\n * @private\n * @param {string} The string to inspect.\n * @returns {Array} Returns the words of `string`.\n */\nfunction unicodeWords(string) {\n  return string.match(reUnicodeWord) || [];\n}\n\nmodule.exports = unicodeWords;\n","var arrayMap = require('./_arrayMap'),\n    baseIteratee = require('./_baseIteratee'),\n    baseMap = require('./_baseMap'),\n    baseSortBy = require('./_baseSortBy'),\n    baseUnary = require('./_baseUnary'),\n    compareMultiple = require('./_compareMultiple'),\n    identity = require('./identity');\n\n/**\n * The base implementation of `_.orderBy` without param guards.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function[]|Object[]|string[]} iteratees The iteratees to sort by.\n * @param {string[]} orders The sort orders of `iteratees`.\n * @returns {Array} Returns the new sorted array.\n */\nfunction baseOrderBy(collection, iteratees, orders) {\n  var index = -1;\n  iteratees = arrayMap(iteratees.length ? iteratees : [identity], baseUnary(baseIteratee));\n\n  var result = baseMap(collection, function(value, key, collection) {\n    var criteria = arrayMap(iteratees, function(iteratee) {\n      return iteratee(value);\n    });\n    return { 'criteria': criteria, 'index': ++index, 'value': value };\n  });\n\n  return baseSortBy(result, function(object, other) {\n    return compareMultiple(object, other, orders);\n  });\n}\n\nmodule.exports = baseOrderBy;\n","/**\n * The base implementation of `_.sortBy` which uses `comparer` to define the\n * sort order of `array` and replaces criteria objects with their corresponding\n * values.\n *\n * @private\n * @param {Array} array The array to sort.\n * @param {Function} comparer The function to define sort order.\n * @returns {Array} Returns `array`.\n */\nfunction baseSortBy(array, comparer) {\n  var length = array.length;\n\n  array.sort(comparer);\n  while (length--) {\n    array[length] = array[length].value;\n  }\n  return array;\n}\n\nmodule.exports = baseSortBy;\n","var compareAscending = require('./_compareAscending');\n\n/**\n * Used by `_.orderBy` to compare multiple properties of a value to another\n * and stable sort them.\n *\n * If `orders` is unspecified, all values are sorted in ascending order. Otherwise,\n * specify an order of \"desc\" for descending or \"asc\" for ascending sort order\n * of corresponding values.\n *\n * @private\n * @param {Object} object The object to compare.\n * @param {Object} other The other object to compare.\n * @param {boolean[]|string[]} orders The order to sort by for each property.\n * @returns {number} Returns the sort order indicator for `object`.\n */\nfunction compareMultiple(object, other, orders) {\n  var index = -1,\n      objCriteria = object.criteria,\n      othCriteria = other.criteria,\n      length = objCriteria.length,\n      ordersLength = orders.length;\n\n  while (++index < length) {\n    var result = compareAscending(objCriteria[index], othCriteria[index]);\n    if (result) {\n      if (index >= ordersLength) {\n        return result;\n      }\n      var order = orders[index];\n      return result * (order == 'desc' ? -1 : 1);\n    }\n  }\n  // Fixes an `Array#sort` bug in the JS engine embedded in Adobe applications\n  // that causes it, under certain circumstances, to provide the same value for\n  // `object` and `other`. See https://github.com/jashkenas/underscore/pull/1247\n  // for more details.\n  //\n  // This also ensures a stable sort in V8 and other engines.\n  // See https://bugs.chromium.org/p/v8/issues/detail?id=90 for more details.\n  return object.index - other.index;\n}\n\nmodule.exports = compareMultiple;\n","var isSymbol = require('./isSymbol');\n\n/**\n * Compares values to sort them in ascending order.\n *\n * @private\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {number} Returns the sort order indicator for `value`.\n */\nfunction compareAscending(value, other) {\n  if (value !== other) {\n    var valIsDefined = value !== undefined,\n        valIsNull = value === null,\n        valIsReflexive = value === value,\n        valIsSymbol = isSymbol(value);\n\n    var othIsDefined = other !== undefined,\n        othIsNull = other === null,\n        othIsReflexive = other === other,\n        othIsSymbol = isSymbol(other);\n\n    if ((!othIsNull && !othIsSymbol && !valIsSymbol && value > other) ||\n        (valIsSymbol && othIsDefined && othIsReflexive && !othIsNull && !othIsSymbol) ||\n        (valIsNull && othIsDefined && othIsReflexive) ||\n        (!valIsDefined && othIsReflexive) ||\n        !valIsReflexive) {\n      return 1;\n    }\n    if ((!valIsNull && !valIsSymbol && !othIsSymbol && value < other) ||\n        (othIsSymbol && valIsDefined && valIsReflexive && !valIsNull && !valIsSymbol) ||\n        (othIsNull && valIsDefined && valIsReflexive) ||\n        (!othIsDefined && valIsReflexive) ||\n        !othIsReflexive) {\n      return -1;\n    }\n  }\n  return 0;\n}\n\nmodule.exports = compareAscending;\n","var SetCache = require('./_SetCache'),\n    arrayIncludes = require('./_arrayIncludes'),\n    arrayIncludesWith = require('./_arrayIncludesWith'),\n    arrayMap = require('./_arrayMap'),\n    baseUnary = require('./_baseUnary'),\n    cacheHas = require('./_cacheHas');\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/**\n * The base implementation of methods like `_.difference` without support\n * for excluding multiple arrays or iteratee shorthands.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {Array} values The values to exclude.\n * @param {Function} [iteratee] The iteratee invoked per element.\n * @param {Function} [comparator] The comparator invoked per element.\n * @returns {Array} Returns the new array of filtered values.\n */\nfunction baseDifference(array, values, iteratee, comparator) {\n  var index = -1,\n      includes = arrayIncludes,\n      isCommon = true,\n      length = array.length,\n      result = [],\n      valuesLength = values.length;\n\n  if (!length) {\n    return result;\n  }\n  if (iteratee) {\n    values = arrayMap(values, baseUnary(iteratee));\n  }\n  if (comparator) {\n    includes = arrayIncludesWith;\n    isCommon = false;\n  }\n  else if (values.length >= LARGE_ARRAY_SIZE) {\n    includes = cacheHas;\n    isCommon = false;\n    values = new SetCache(values);\n  }\n  outer:\n  while (++index < length) {\n    var value = array[index],\n        computed = iteratee == null ? value : iteratee(value);\n\n    value = (comparator || value !== 0) ? value : 0;\n    if (isCommon && computed === computed) {\n      var valuesIndex = valuesLength;\n      while (valuesIndex--) {\n        if (values[valuesIndex] === computed) {\n          continue outer;\n        }\n      }\n      result.push(value);\n    }\n    else if (!includes(values, computed, comparator)) {\n      result.push(value);\n    }\n  }\n  return result;\n}\n\nmodule.exports = baseDifference;\n","var arrayAggregator = require('./_arrayAggregator'),\n    baseAggregator = require('./_baseAggregator'),\n    baseIteratee = require('./_baseIteratee'),\n    isArray = require('./isArray');\n\n/**\n * Creates a function like `_.groupBy`.\n *\n * @private\n * @param {Function} setter The function to set accumulator values.\n * @param {Function} [initializer] The accumulator object initializer.\n * @returns {Function} Returns the new aggregator function.\n */\nfunction createAggregator(setter, initializer) {\n  return function(collection, iteratee) {\n    var func = isArray(collection) ? arrayAggregator : baseAggregator,\n        accumulator = initializer ? initializer() : {};\n\n    return func(collection, setter, baseIteratee(iteratee, 2), accumulator);\n  };\n}\n\nmodule.exports = createAggregator;\n","/**\n * A specialized version of `baseAggregator` for arrays.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction arrayAggregator(array, setter, iteratee, accumulator) {\n  var index = -1,\n      length = array == null ? 0 : array.length;\n\n  while (++index < length) {\n    var value = array[index];\n    setter(accumulator, value, iteratee(value), array);\n  }\n  return accumulator;\n}\n\nmodule.exports = arrayAggregator;\n","var baseEach = require('./_baseEach');\n\n/**\n * Aggregates elements of `collection` on `accumulator` with keys transformed\n * by `iteratee` and values set by `setter`.\n *\n * @private\n * @param {Array|Object} collection The collection to iterate over.\n * @param {Function} setter The function to set `accumulator` values.\n * @param {Function} iteratee The iteratee to transform keys.\n * @param {Object} accumulator The initial aggregated object.\n * @returns {Function} Returns `accumulator`.\n */\nfunction baseAggregator(collection, setter, iteratee, accumulator) {\n  baseEach(collection, function(value, key, collection) {\n    setter(accumulator, value, iteratee(value), collection);\n  });\n  return accumulator;\n}\n\nmodule.exports = baseAggregator;\n","import {PolyScene} from '../PolyScene';\nimport {BaseCameraObjNodeType} from '../../nodes/obj/_BaseCamera';\n\nexport class CamerasController {\n\tconstructor(private scene: PolyScene) {}\n\n\t_master_camera_node_path: string | null = null;\n\n\tset_master_camera_node_path(camera_node_path: string) {\n\t\tthis._master_camera_node_path = camera_node_path;\n\t}\n\tget master_camera_node_path() {\n\t\treturn this._master_camera_node_path;\n\t}\n\tget master_camera_node(): BaseCameraObjNodeType | null {\n\t\tif (this.master_camera_node_path) {\n\t\t\tconst camera_node = this.scene.node(this.master_camera_node_path) as BaseCameraObjNodeType | null;\n\t\t\treturn camera_node;\n\t\t} else {\n\t\t\tconsole.warn('master camera node not found');\n\t\t\treturn this._find_any_camera();\n\t\t}\n\t}\n\n\tprivate _find_any_camera(): BaseCameraObjNodeType | null {\n\t\tconst root = this.scene.root;\n\t\treturn root.nodes_by_type('perspective_camera')[0] || root.nodes_by_type('orthographic_camera')[0];\n\t}\n}\n","// import {CoreGraphNode} from './CoreGraphNode';\n// import { CoreGraphNodeScene } from './CoreGraphNodeScene';\nimport {CoreGraphNode} from '../../../core/graph/CoreGraphNode';\nimport {PolyScene} from '../PolyScene';\n\n// interface CookerQueue {\n// \t[propName: string]: CoreGraphNodeSceneNamed;\n// }\n\nexport class Cooker {\n\tprivate _queue: Map<string, CoreGraphNode | undefined> = new Map<string, CoreGraphNode | undefined>();\n\tprivate _block_level: number = 0;\n\tprivate _process_item_bound = this._process_item.bind(this);\n\n\tconstructor(private _scene: PolyScene) {\n\t\tthis._block_level = 0;\n\t}\n\n\tblock() {\n\t\tthis._block_level += 1;\n\t}\n\tunblock() {\n\t\tthis._block_level -= 1;\n\t\tif (this._block_level < 0) {\n\t\t\tthis._block_level = 0;\n\t\t}\n\n\t\tthis.process_queue();\n\t}\n\t// unblock_later: ->\n\t// \tsetTimeout( this.unblock.bind(this), 0 )\n\tget blocked() {\n\t\treturn this._block_level > 0;\n\t}\n\n\tenqueue(node: CoreGraphNode, original_trigger_graph_node?: CoreGraphNode) {\n\t\tthis._queue.set(node.graph_node_id, original_trigger_graph_node);\n\t}\n\n\tprocess_queue() {\n\t\tif (this.blocked) {\n\t\t\treturn;\n\t\t}\n\t\t// let node: CoreGraphNode;\n\t\t// console.warn('FLUSH', Object.keys(this._queue).length);\n\n\t\tthis._queue.forEach(this._process_item_bound);\n\t\t// for (let id of Object.keys(this._queue)) {\n\t\t// \tnode = this._queue[id];\n\t\t// \tif (node) {\n\t\t// \t\tdelete this._queue[id];\n\t\t// \t\tnode.dirty_controller.run_post_dirty_hooks();\n\t\t// \t}\n\t\t// }\n\t}\n\tprivate _process_item(original_trigger_graph_node: CoreGraphNode | undefined, id: string) {\n\t\tconst node = this._scene.graph.node_from_id(id);\n\t\tif (node) {\n\t\t\tthis._queue.delete(id);\n\t\t\tnode.dirty_controller.run_post_dirty_hooks(original_trigger_graph_node);\n\t\t}\n\t}\n}\n","/// <reference path=\"./dagre.d.ts\" />\nimport {Graph, alg} from '@dagrejs/graphlib';\n// import lodash_uniq from 'lodash/uniq';\n// import lodash_flatten from 'lodash/flatten';\nimport {PolyScene} from '../../engine/scene/PolyScene';\n// import {NodeSimple} from './NodeSimple'\n// import {GraphNode} from './concerns/GraphNode'\n// import {SceneNodeDirtyable} from './SceneNodeDirtyable';\n\n// class DummyClass {}\n// class GraphNodeDummy extends Dirtyable(DummyClass) {}\n\n// TODO: typescript, using ids with a specific type (https://basarat.gitbook.io/typescript/main-1/nominaltyping)\n// export interface CoreGraphNodeId extends String {\n// \t// _CoreGraphNodeIdBrand: string;\n// }\nexport type CoreGraphNodeId = string;\nimport {CoreGraphNode} from './CoreGraphNode';\n\nexport class CoreGraph {\n\t_graph: Graph;\n\t_next_id: number = 0;\n\t_scene: PolyScene | undefined;\n\n\tconstructor() {\n\t\tthis._graph = new Graph({\n\t\t\tdirected: true,\n\t\t\tcompound: false,\n\t\t\tmultigraph: true,\n\t\t});\n\t}\n\n\tgraph() {\n\t\treturn this._graph;\n\t}\n\tset_scene(scene: PolyScene) {\n\t\tthis._scene = scene;\n\t}\n\tscene() {\n\t\treturn this._scene;\n\t}\n\n\tnext_id(): CoreGraphNodeId {\n\t\treturn (<unknown>`${(this._next_id += 1)}`) as CoreGraphNodeId;\n\t}\n\n\tsetNode(node: CoreGraphNode) {\n\t\tthis._graph.setNode(node.graph_node_id, node);\n\t}\n\n\tremoveNode(node: CoreGraphNode) {\n\t\tthis._graph.removeNode(node.graph_node_id);\n\t}\n\n\tnodes_from_ids(ids: string[]) {\n\t\tconst nodes: CoreGraphNode[] = [];\n\t\tfor (let id of ids) {\n\t\t\tconst node = this.node_from_id(id);\n\t\t\tif (node) {\n\t\t\t\tnodes.push(node);\n\t\t\t}\n\t\t}\n\t\treturn nodes;\n\t\t// if (ids) {\n\t\t// \tlet node: any;\n\t\t// \treturn ids.map((id) => {\n\t\t// \t\tif ((node = this.node_from_id(id)) != null) {\n\t\t// \t\t\treturn node;\n\t\t// \t\t} else {\n\t\t// \t\t\treturn console.warn(`could not find node with id ${id}`);\n\t\t// \t\t}\n\t\t// \t});\n\t\t// } else {\n\t\t// \treturn [];\n\t\t// }\n\t}\n\t// TODO: typescript: this should return CoreGraphNodeId|null\n\tnode_from_id(id: string): CoreGraphNode {\n\t\treturn this._graph.node(id);\n\t}\n\n\tconnect(src: CoreGraphNode, dest: CoreGraphNode): boolean {\n\t\tconst src_id = src.graph_node_id;\n\t\tconst dest_id = dest.graph_node_id;\n\n\t\tif (this._graph.hasNode(src_id) && this._graph.hasNode(dest_id)) {\n\t\t\tthis._graph.setEdge(src_id, dest_id);\n\n\t\t\t// const scene_auto_updating = this.scene().auto_updating();\n\t\t\tconst scene_loading = this._scene ? this._scene.loading_controller.is_loading : true;\n\t\t\tconst check_if_graph_has_cycle = !scene_loading;\n\t\t\tlet graph_has_cycle = false;\n\t\t\tif (check_if_graph_has_cycle) {\n\t\t\t\tgraph_has_cycle = !alg.isAcyclic(this._graph);\n\t\t\t}\n\n\t\t\tif (graph_has_cycle) {\n\t\t\t\tthis._graph.removeEdge(src_id, dest_id);\n\t\t\t\treturn false;\n\t\t\t} else {\n\t\t\t\tsrc.dirty_controller.clear_successors_cache_with_predecessors();\n\n\t\t\t\treturn true;\n\t\t\t}\n\t\t} else {\n\t\t\tconsole.warn(`attempt to connect non existing node ${src_id} or ${dest_id}`);\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tdisconnect(src: CoreGraphNode, dest: CoreGraphNode) {\n\t\tif (src && dest) {\n\t\t\tconst src_id_s = src.graph_node_id;\n\t\t\tconst dest_id_s = dest.graph_node_id;\n\t\t\tthis._graph.removeEdge(src_id_s, dest_id_s);\n\n\t\t\tsrc.dirty_controller.clear_successors_cache_with_predecessors();\n\t\t}\n\t}\n\tdisconnect_predecessors(node: CoreGraphNode) {\n\t\tconst predecessors = this.predecessors(node);\n\t\tfor (let predecessor of predecessors) {\n\t\t\tthis.disconnect(predecessor, node);\n\t\t}\n\t}\n\tdisconnect_successors(node: CoreGraphNode) {\n\t\tconst successors = this.successors(node);\n\t\tfor (let successor of successors) {\n\t\t\tthis.disconnect(node, successor);\n\t\t}\n\t}\n\t// disconnect_predecessors(node){\n\t// \tconst node_id = node.graph_node_id;\n\t// \tconst predecessor_ids = this._graph.predecessors(node_id);\n\t// \tif( predecessor_ids ){\n\t// \t\tfor(let predecessor_id of predecessor_ids){\n\t// \t\t\tthis._graph.removeEdge(predecessor_id, node_id);\n\t// \t\t}\n\t// \t}\n\t// }\n\t// disconnect_successors(node){\n\t// \tconst node_id = node.graph_node_id;\n\t// \tconst successor_ids = this._graph.successors(node_id);\n\t// \tif (successor_ids) {\n\t// \t\tfor(let successor_id of successor_ids){\n\t// \t\t\tthis._graph.removeEdge(node_id, successor_id);\n\t// \t\t}\n\t// \t}\n\t// }\n\n\tpredecessor_ids(id: CoreGraphNodeId) {\n\t\treturn this._graph.predecessors(id) || [];\n\t}\n\tpredecessors(node: CoreGraphNode) {\n\t\tconst ids = this.predecessor_ids(node.graph_node_id);\n\t\treturn this.nodes_from_ids(ids);\n\t}\n\tsuccessor_ids(id: string): CoreGraphNodeId[] {\n\t\treturn this._graph.successors(id) || [];\n\t}\n\tsuccessors(node: CoreGraphNode): CoreGraphNode[] {\n\t\tconst ids = this.successor_ids(node.graph_node_id) || [];\n\t\treturn this.nodes_from_ids(ids);\n\t}\n\n\tprivate all_next_ids(node: CoreGraphNode, method: 'successor_ids' | 'predecessor_ids'): CoreGraphNodeId[] {\n\t\tconst ids: CoreGraphNodeId[] = [];\n\t\tlet next_ids = this[method](node.graph_node_id);\n\n\t\twhile (next_ids.length > 0) {\n\t\t\tconst next_next_ids = [];\n\t\t\tfor (let next_id of next_ids) {\n\t\t\t\tfor (let next_next_id of this[method](next_id)) {\n\t\t\t\t\tnext_next_ids.push(next_next_id);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfor (let id of next_ids) {\n\t\t\t\tids.push(id);\n\t\t\t}\n\t\t\tfor (let id of next_next_ids) {\n\t\t\t\tnext_ids.push(id);\n\t\t\t}\n\t\t\tnext_ids = next_next_ids;\n\t\t}\n\t\treturn ids;\n\t}\n\tall_predecessor_ids(node: CoreGraphNode): CoreGraphNodeId[] {\n\t\treturn this.all_next_ids(node, 'predecessor_ids');\n\t}\n\tall_successor_ids(node: CoreGraphNode): CoreGraphNodeId[] {\n\t\treturn this.all_next_ids(node, 'successor_ids');\n\t}\n\tall_predecessors(node: CoreGraphNode): CoreGraphNode[] {\n\t\tconst ids = this.all_predecessor_ids(node);\n\t\treturn this.nodes_from_ids(ids);\n\t}\n\tall_successors(node: CoreGraphNode): CoreGraphNode[] {\n\t\tconst ids = this.all_successor_ids(node);\n\t\treturn this.nodes_from_ids(ids);\n\t}\n}\n","import {BaseNodeType} from '../../nodes/_Base';\n\ntype Callback = (value: void) => void;\n\nexport class CookController {\n\tprivate _cooking_nodes_by_id: Map<string, BaseNodeType> = new Map();\n\tprivate _resolves: Callback[] = [];\n\tconstructor() {}\n\n\tadd_node(node: BaseNodeType) {\n\t\tthis._cooking_nodes_by_id.set(node.graph_node_id, node);\n\t}\n\tremove_node(node: BaseNodeType) {\n\t\tthis._cooking_nodes_by_id.delete(node.graph_node_id);\n\n\t\tif (this._cooking_nodes_by_id.size == 0) {\n\t\t\tthis.flush();\n\t\t}\n\t}\n\n\tprivate flush() {\n\t\tlet callback: Callback | undefined;\n\t\twhile ((callback = this._resolves.pop())) {\n\t\t\tcallback();\n\t\t}\n\t}\n\n\tasync wait_for_cooks_completed(): Promise<void> {\n\t\tif (this._cooking_nodes_by_id.size == 0) {\n\t\t\treturn;\n\t\t} else {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tthis._resolves.push(resolve);\n\t\t\t});\n\t\t}\n\t}\n}\n","import {PolyScene} from '../PolyScene';\n\nimport {CoreGraphNode} from '../../../core/graph/CoreGraphNode';\nimport '../../Poly';\nimport {Poly} from '../../Poly';\nimport {SceneEvent} from '../../poly/SceneEvent';\nimport {NodeEvent} from '../../poly/NodeEvent';\nimport {ParamEvent} from '../../poly/ParamEvent';\n\n// type Callback = (emitter: CoreGraphNodeScene) => void; // TODO: typescript: maybe arg should be an event instead of the emitter\ninterface EventsListener {\n\tprocess_events: (emitter: CoreGraphNode, event_name: SceneEvent | NodeEvent | ParamEvent, data?: any) => void;\n}\n\nexport class DispatchController {\n\tconstructor(private scene: PolyScene) {}\n\n\tprivate _events_listener: EventsListener | undefined;\n\n\tset_listener(events_listener: EventsListener) {\n\t\tthis._events_listener = events_listener;\n\t\t// this._store.scene = this;\n\t}\n\tget events_listener() {\n\t\treturn this._events_listener;\n\t}\n\tdispatch(emitter: CoreGraphNode, event_name: SceneEvent | NodeEvent | ParamEvent, data?: any) {\n\t\tthis._events_listener?.process_events(emitter, event_name, data);\n\t}\n\tget emit_allowed(): boolean {\n\t\treturn (\n\t\t\tthis.scene.loading_controller.loaded &&\n\t\t\tthis._events_listener != null &&\n\t\t\tthis.scene.loading_controller.auto_updating &&\n\t\t\t!Poly.instance().player_mode() // TODO: typecript: maybe I should still be able to emit events in player mode? - check how the Event Sop works\n\t\t);\n\t}\n\t// store_commit(event_name: string, payload: any = this) {\n\t// \tif (this._store) {\n\t// \t\tthis._store.commit(`engine/${event_name}`, payload);\n\t// \t}\n\t// }\n}\n","import {PolyScene} from '../../PolyScene';\nimport {BaseEventNodeType} from '../../../nodes/event/_Base';\nimport {MouseEventNode} from '../../../nodes/event/MouseEvent';\nimport {MouseEventsController} from './MouseEventsController';\nimport {BaseEventsController} from './_BaseEventsController';\nimport {BaseCameraObjNodeType} from '../../../nodes/obj/_BaseCamera';\n\nexport class SceneEventsController {\n\tprivate _mouse_events_controller: BaseEventsController<MouseEvent, MouseEventNode> = new MouseEventsController();\n\tprivate _controllers: BaseEventsController<Event, BaseEventNodeType>[] = [this._mouse_events_controller];\n\tconstructor(scene: PolyScene) {}\n\n\tregister_event_node(node: BaseEventNodeType) {\n\t\tconst controller = this._get_controller_for_node(node);\n\t\tif (controller) {\n\t\t\tcontroller.register_node(node);\n\t\t}\n\t}\n\tunregister_event_node(node: BaseEventNodeType) {\n\t\tconst controller = this._get_controller_for_node(node);\n\t\tif (controller) {\n\t\t\tcontroller.unregister_node(node);\n\t\t}\n\t}\n\n\tprocess_event(event: Event, canvas: HTMLCanvasElement, camera_node: BaseCameraObjNodeType) {\n\t\tfor (let controller of this._controllers) {\n\t\t\tif (controller.accepts_event(event)) {\n\t\t\t\tcontroller.process(event, canvas, camera_node);\n\t\t\t\treturn;\n\t\t\t}\n\t\t}\n\t}\n\n\tprivate _get_controller_for_node<T extends BaseEventNodeType>(\n\t\tnode: T\n\t): BaseEventsController<Event, BaseEventNodeType> | undefined {\n\t\tswitch (node.type) {\n\t\t\tcase MouseEventNode.type():\n\t\t\t\treturn this._mouse_events_controller;\n\t\t}\n\t}\n}\n","import {PolyScene} from '../PolyScene';\n\nexport class LifeCycleController {\n\tconstructor(private scene: PolyScene) {}\n\n\tprivate _lifecycle_on_create_allowed: boolean = true;\n\n\ton_create_hook_allowed(): boolean {\n\t\treturn this.scene.loading_controller.loaded && this._lifecycle_on_create_allowed;\n\t}\n\n\ton_create_prevent(callback: () => void) {\n\t\tthis._lifecycle_on_create_allowed = false;\n\t\tcallback();\n\t\tthis._lifecycle_on_create_allowed = true;\n\t}\n}\n","import {PolyScene} from '../PolyScene';\n\nexport class LoadingController {\n\tconstructor(private scene: PolyScene) {}\n\n\t_loading_state: boolean = true;\n\t_auto_updating: boolean = true;\n\t_first_object_loaded: boolean = false;\n\n\tmark_as_loading() {\n\t\tthis._set_loading_state(true);\n\t}\n\tasync mark_as_loaded() {\n\t\tawait this._set_loading_state(false);\n\t\t// POLY.notify_scene_loaded(this.scene);\n\t\t// this.cooker().block()\n\t\t// this.root().set_children_dirty_without_propagation()\n\t\t// this.cooker().unblock()\n\t}\n\tprivate async _set_loading_state(state: boolean) {\n\t\tthis._loading_state = state;\n\t\tawait this.set_auto_update(!this._loading_state);\n\t}\n\tget is_loading() {\n\t\treturn this._loading_state;\n\t}\n\tget loaded() {\n\t\treturn !this._loading_state;\n\t}\n\tget auto_updating() {\n\t\treturn this._auto_updating;\n\t} // _init_auto_update: ->\n\t// \tthis.set_auto_update(true)\n\tasync set_auto_update(new_state: boolean) {\n\t\tif (this._auto_updating !== new_state) {\n\t\t\tthis._auto_updating = new_state;\n\t\t\tif (this._auto_updating) {\n\t\t\t\t// if this.env_is_development()\n\t\t\t\t// \tthis.performance().start()\n\n\t\t\t\tconst root = this.scene.root;\n\t\t\t\tif (root) {\n\t\t\t\t\tawait root.process_queue();\n\t\t\t\t\t// const c = async () => {\n\t\t\t\t\t// \tawait root.process_queue();\n\t\t\t\t\t// };\n\t\t\t\t\t// setTimeout(c, 50);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// if (callback != null) { callback(); }\n\t\t\t}\n\t\t} else {\n\t\t\t// if (callback != null) { callback(); }\n\t\t}\n\t}\n\n\ton_first_object_loaded() {\n\t\tif (!this._first_object_loaded) {\n\t\t\tthis._first_object_loaded = true;\n\n\t\t\tconst loader = document.getElementById('scene_loading_container');\n\t\t\tif (loader) {\n\t\t\t\tloader.parentElement?.removeChild(loader);\n\t\t\t}\n\t\t}\n\t}\n\n\t// on_all_objects_loaded() {\n\t// \t// POLY.viewer_loaders_manager().dipose_loaders()\n\t// }\n}\n","import {BaseParamType} from '../../params/_Base';\nimport {BaseNodeType} from '../../nodes/_Base';\n\nexport class ExpressionsController {\n\tprivate _params_by_id: Map<string, BaseParamType> = new Map();\n\tconstructor() {}\n\n\tregister_param(param: BaseParamType) {\n\t\tthis._params_by_id.set(param.graph_node_id, param);\n\t}\n\tderegister_param(param: BaseParamType) {\n\t\tthis._params_by_id.delete(param.graph_node_id);\n\t}\n\n\t//\n\t//\n\t//\n\t//\n\tregenerate_referring_expressions(node: BaseNodeType) {\n\t\tnode.name_controller.graph_node.set_successors_dirty(node);\n\t}\n}\n","import {BaseParamType} from '../params/_Base';\n// import jsep from 'jsep';\nimport {CoreWalker} from '../../core/Walker';\n\nexport class MissingExpressionReference {\n\tconstructor(private param: BaseParamType /*, private jsep_node: jsep.Expression*/, public path: string) {\n\t\t// console.log(this.jsep_node, this.param); // TODO: typescript, to not have the missing ref\n\t}\n\n\tmatches_path(path: string): boolean {\n\t\tconst absolute = CoreWalker.make_absolute_path(this.param.node, this.path);\n\t\treturn absolute == path;\n\t}\n\n\tupdate_from_method_dependency_name_change() {\n\t\tthis.param.expression_controller?.update_from_method_dependency_name_change();\n\t}\n\n\tresolve_missing_dependencies() {\n\t\tconst input = this.param.raw_input_serialized;\n\t\tthis.param.set(this.param.default_value);\n\t\tthis.param.set(input);\n\t\t// parse_expression_and_update_dependencies()\n\t}\n}\n\n// export class ReferenceSearchResult {\n// \tpublic found_graph_nodes: CoreGraphNode[] = [];\n// \tpublic missing_paths: string[] = [];\n\n// \tconstructor() {}\n// \tset_found_graph_nodes(graph_nodes: CoreGraphNode[]) {\n// \t\tthis.found_graph_nodes = graph_nodes;\n// \t}\n// \tset_missing_paths(paths: string[]) {\n// \t\tthis.missing_paths = paths;\n// \t}\n// }\n","import {BaseNodeType} from '../../nodes/_Base';\nimport {BaseParamType} from '../../params/_Base';\nimport {MissingExpressionReference} from '../../expressions/MissingReference';\nimport jsep from 'jsep';\nimport {MapUtils} from '../../../core/MapUtils';\n\n// type MissingExpressionReferenceById = Map<number, MissingExpressionReference>;\n// type MissingExpressionReferenceByIdByPath = Map<string, MissingExpressionReferenceById>;\n\nexport class MissingReferencesController {\n\tprivate references: Map<string, MissingExpressionReference[]> = new Map<string, MissingExpressionReference[]>();\n\n\tregister(param: BaseParamType, jsep_node: jsep.Expression, path_argument: string): MissingExpressionReference {\n\t\tconst missing_expression_reference = new MissingExpressionReference(param, path_argument);\n\n\t\tMapUtils.push_on_array_at_entry(this.references, param.graph_node_id, missing_expression_reference);\n\n\t\treturn missing_expression_reference;\n\t}\n\tderegister_param(param: BaseParamType) {\n\t\tthis.references.delete(param.graph_node_id);\n\t}\n\n\t//\n\t//\n\t// MISSING REFERENCES\n\t//\n\t//\n\t// call this from node.create and node.rename\n\tcheck_for_missing_references(node: BaseNodeType) {\n\t\tthis._check_for_missing_references_for_node(node);\n\t\tfor (let param of node.params.all) {\n\t\t\tthis._check_for_missing_references_for_param(param);\n\t\t}\n\t}\n\tprivate _check_for_missing_references_for_node(node: BaseNodeType) {\n\t\tconst id = node.graph_node_id;\n\n\t\tthis.references.forEach((missing_references, node_id) => {\n\t\t\tlet match_found = false;\n\t\t\tfor (let ref of missing_references) {\n\t\t\t\tif (ref.matches_path(node.full_path())) {\n\t\t\t\t\tmatch_found = true;\n\t\t\t\t\tref.resolve_missing_dependencies();\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (match_found) {\n\t\t\t\tthis.references.delete(id);\n\t\t\t}\n\t\t});\n\t}\n\tprivate _check_for_missing_references_for_param(param: BaseParamType) {\n\t\tconst id = param.graph_node_id;\n\n\t\tthis.references.forEach((missing_references, node_id) => {\n\t\t\tlet match_found = false;\n\t\t\tfor (let ref of missing_references) {\n\t\t\t\tif (ref.matches_path(param.full_path())) {\n\t\t\t\t\tmatch_found = true;\n\t\t\t\t\tref.resolve_missing_dependencies();\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (match_found) {\n\t\t\t\tthis.references.delete(id);\n\t\t\t}\n\t\t});\n\t}\n}\n","import {TypedContainer} from './_Base';\nimport {ContainableMap} from './utils/ContainableMap';\n\nexport class ManagerContainer extends TypedContainer<ContainableMap['MANAGER']> {\n\tset_content(content: ContainableMap['MANAGER']) {\n\t\tsuper.set_content(content);\n\t}\n}\n","import {TypedNode} from '../_Base';\nimport {NodeContext} from '../../poly/NodeContext';\nimport {TypedContainerController} from '../utils/ContainerController';\nimport {NodeParamsConfig} from '../utils/params/ParamsConfig';\nimport {ManagerContainer} from '../../containers/Manager';\n\nexport class TypedBaseManagerNode<K extends NodeParamsConfig> extends TypedNode<'MANAGER', BaseManagerNodeType, K> {\n\tcontainer_controller: TypedContainerController<ManagerContainer> = new TypedContainerController<ManagerContainer>(\n\t\tthis,\n\t\tManagerContainer\n\t);\n\n\tstatic node_context(): NodeContext {\n\t\treturn NodeContext.MANAGER;\n\t}\n\tnode_sibbling(name: string): BaseManagerNodeType | null {\n\t\treturn super.node_sibbling(name) as BaseManagerNodeType | null;\n\t}\n}\n\nexport type BaseManagerNodeType = TypedBaseManagerNode<any>;\nexport class BaseManagerNodeClass extends TypedBaseManagerNode<any> {}\n","import {Group} from 'three/src/objects/Group';\n// import lodash_isEqual from 'lodash/isEqual';\n// import lodash_map from 'lodash/map';\n\nimport {TypedBaseManagerNode} from './_Base';\n// import {CoreObject} from '../../../core/Object';\n// import {BaseNode} from '../_Base';\nimport {BaseObjNodeType} from '../obj/_Base';\n\n// import {BaseManagerObjNode} from '../obj/_BaseManager';\n// import {BaseCameraObjNodeClass} from '../obj/_BaseCamera';\n// import {BaseLightObjNodeClass} from '../obj/_BaseLight';\n\n// obj nodes\n// import {EventsObjNode} from '../obj/Events';\n// import {MaterialsObjNode} from '../obj/Materials';\n// import {FogObjNode} from '../obj/Fog';\nimport {GeoObjNode} from '../obj/Geo';\n\nimport {Poly} from '../../Poly';\nimport {NodeContext} from '../../poly/NodeContext';\n// import {PolyScene} from '../../scene/PolyScene';\n// TODO:\n// ensure removing a node removes its content from the scene (spotlight?)\n\nimport {ObjNodeChildrenMap} from '../../poly/registers/Obj';\n\nimport {NodeParamsConfig} from '../utils/params/ParamsConfig';\nimport {BaseNodeType} from '../_Base';\nclass ObjectsManagerParamsConfig extends NodeParamsConfig {}\nconst ParamsConfig = new ObjectsManagerParamsConfig();\n\nexport class ObjectsManagerNode extends TypedBaseManagerNode<ObjectsManagerParamsConfig> {\n\tparams_config = ParamsConfig;\n\tstatic type() {\n\t\treturn 'obj';\n\t}\n\t// children_context() {\n\t// \treturn NodeContext.OBJ;\n\t// }\n\n\tprivate _object: Group = new Group();\n\tprivate _queued_nodes_by_id: Dictionary<BaseObjNodeType> = {};\n\tprivate _queued_nodes_by_path: Dictionary<BaseObjNodeType> = {};\n\tprivate _expected_geo_nodes: Dictionary<GeoObjNode> = {};\n\t// private _loaded_geo_node_by_id: Dictionary<boolean> = {};\n\tprivate _process_queue_start: number = -1;\n\n\tprotected _children_controller_context = NodeContext.OBJ;\n\tinitialize_node() {\n\t\tthis.children_controller?.init();\n\n\t\t// this.flags.add_display();\n\n\t\tthis.lifecycle.add_on_child_add_hook(this._on_child_add.bind(this));\n\t\tthis.lifecycle.add_on_child_remove_hook(this._on_child_remove.bind(this));\n\t\t// this.flags.add_bypass({has_bypass_flag: false});\n\n\t\t// this.set_min_inputs_count(0);\n\t\t// this.set_max_inputs_count(0);\n\t}\n\t//@_object_uuid_by_node_graph_id = {}\n\n\tinit_default_scene() {\n\t\tthis._object.name = '_WORLD_';\n\t\tthis._scene.default_scene.add(this._object);\n\t}\n\n\t// TODO: is this method still used?\n\t// available_children_classes() {\n\t// \treturn POLY.Engine.Node.Obj;\n\t// }\n\n\tobject() {\n\t\treturn this._object;\n\t}\n\tcreate_node<K extends keyof ObjNodeChildrenMap>(type: K): ObjNodeChildrenMap[K] {\n\t\treturn super.create_node(type) as ObjNodeChildrenMap[K];\n\t}\n\tchildren() {\n\t\treturn super.children() as BaseObjNodeType[];\n\t}\n\tnodes_by_type<K extends keyof ObjNodeChildrenMap>(type: K): ObjNodeChildrenMap[K][] {\n\t\treturn super.nodes_by_type(type) as ObjNodeChildrenMap[K][];\n\t}\n\n\tmultiple_display_flags_allowed() {\n\t\treturn true;\n\t}\n\n\tadd_to_queue(node: BaseObjNodeType) {\n\t\tconst id = node.graph_node_id;\n\t\tif (this._queued_nodes_by_id[id] == null) {\n\t\t\treturn (this._queued_nodes_by_id[id] = node);\n\t\t}\n\t}\n\n\tasync process_queue() {\n\t\tthis._queued_nodes_by_path = {};\n\t\tconst ids = Object.keys(this._queued_nodes_by_id);\n\t\tfor (let id of ids) {\n\t\t\tconst node = this._queued_nodes_by_id[id];\n\t\t\tdelete this._queued_nodes_by_id[id];\n\n\t\t\tconst full_path = `_____${node.render_order}__${node.full_path()}`;\n\t\t\t// we want to process managers, cameras, then lights, then everything else\n\t\t\t// so we add a prefix for those\n\t\t\t// if (this._is_node_manager(node)) {\n\t\t\t// \tfull_path = `/_____005_${full_path}`;\n\t\t\t// } else if (this._is_node_fog(node)) {\n\t\t\t// \tfull_path = `/_____002_${full_path}`;\n\t\t\t// } else if (this._is_node_camera(node)) {\n\t\t\t// \tfull_path = `/_____003_${full_path}`;\n\t\t\t// } else if (this._is_node_light(node)) {\n\t\t\t// \tfull_path = `/_____004_${full_path}`;\n\t\t\t// }\n\n\t\t\tthis._queued_nodes_by_path[full_path] = node;\n\t\t}\n\n\t\tconst promises = Object.keys(this._queued_nodes_by_path)\n\t\t\t.sort()\n\t\t\t.map((path_id) => {\n\t\t\t\tconst node = this._queued_nodes_by_path[path_id];\n\t\t\t\treturn this.update_object(node);\n\t\t\t});\n\n\t\tthis._expected_geo_nodes = this._expected_geo_nodes || (await this.expected_loading_geo_nodes_by_id());\n\n\t\tthis._process_queue_start = performance.now();\n\t\tPromise.all(promises).then(() => {\n\t\t\tPoly.instance().log(\n\t\t\t\t`SCENE LOADED '${this.scene.name}' in ${performance.now() - this._process_queue_start}`\n\t\t\t);\n\t\t\t// this.scene().performance().print()\n\n\t\t\t// do the update here if there are no objects to load\n\t\t\t// otherwise an empty scene will have a loader that never gets removed\n\t\t\t// if (Object.keys(this._expected_geo_nodes).length == 0) {\n\t\t\t// \tthis.update_on_all_objects_loaded();\n\t\t\t// }\n\t\t});\n\t}\n\n\tupdate_object(node: BaseObjNodeType) {\n\t\tif (!this.scene.loading_controller.auto_updating) {\n\t\t\tthis.add_to_queue(node);\n\t\t} else {\n\t\t\t// if (node.object) {\n\t\t\tthis.add_to_scene(node);\n\t\t\t// } else {\n\t\t\t// \t//if POLY.env != 'test'\n\t\t\t// \t// console.warn(`no object from ${node.full_path()} (error:${node.error_message()}) (${POLY.env})`);\n\t\t\t// }\n\t\t}\n\t}\n\n\t// _is_node_fog(node: BaseObjNodeType) {\n\t// \treturn CoreObject.is_a(node, FogObjNode);\n\t// }\n\t// _is_node_camera(node: BaseObjNodeType) {\n\t// \treturn CoreObject.is_a(node, BaseCameraObjNodeClass);\n\t// }\n\n\t// _is_node_event(node: BaseObjNodeType) {\n\t// \treturn CoreObject.is_a(node, EventsObjNode);\n\t// }\n\t// _is_node_mat(node: BaseObjNodeType) {\n\t// \treturn CoreObject.is_a(node, MaterialsObjNode);\n\t// }\n\n\t//\n\t//\n\t// OBJ PARENTING\n\t//\n\t//\n\n\t// TODO:\n\t// a OBJ node should be able to submit its group for transform\n\t// apart from the geometry. This would allow parenting to function\n\t// regardless if the underlying geo is valid or not\n\tget_parent_for_node(node: BaseObjNodeType) {\n\t\t// if (this._is_node_event(node) || this._is_node_mat(node)) {\n\t\t// \treturn null;\n\t\tif (node.attachable_to_hierarchy) {\n\t\t\t// if (this._is_node_camera(node)) {\n\t\t\t// \treturn this.scene.display_scene;\n\t\t\t// } else {\n\t\t\tconst node_input = node.io.inputs.input(0);\n\t\t\tif (node_input) {\n\t\t\t\t//node_input.request_container (container)=>\n\t\t\t\t//\tcallback(container.object() || @_object)\n\t\t\t\treturn node_input.children_group;\n\t\t\t} else {\n\t\t\t\treturn this._object;\n\t\t\t}\n\t\t\t// }\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tadd_to_scene(node: BaseObjNodeType): void {\n\t\t// if (this._is_node_fog(node)) {\n\t\t// console.log(\"fog\")\n\t\t// # TODO: ensure fog is removed if we set display or bypass flag\n\t\t// # TODO: ensure we get a warning if more than 1 fog\n\t\t// # TODO: why does it get added twice when its parameters are changed?\n\t\t// node.get_fog (fog)=>\n\t\t// \t@_scene.display_scene().fog = fog\n\t\t// #console.log(\"added fog\", node.object())\n\t\tif (node.attachable_to_hierarchy) {\n\t\t\tconst parent_object = this.get_parent_for_node(node);\n\t\t\tif (parent_object) {\n\t\t\t\t// await node.params.eval_all().then((params_eval_key) => {\n\t\t\t\t// \tnode.request_container();\n\t\t\t\t// });\n\n\t\t\t\tif (node.used_in_scene) {\n\t\t\t\t\t// parent_object.add(node.object);\n\t\t\t\t\tnode.add_object_to_parent(parent_object);\n\t\t\t\t\t// await node.cook_controller.cook_main_without_inputs();\n\t\t\t\t} else {\n\t\t\t\t\tnode.remove_object_from_parent();\n\t\t\t\t\t// parent_object.remove(node.object);\n\t\t\t\t}\n\n\t\t\t\t// node.request_display_node();\n\t\t\t} else {\n\t\t\t\t// node.request_container().then(() => {\n\t\t\t\t// \t// force events and mat to cook and remove the dirty state\n\t\t\t\t// \t// ensure that pickers are cooked\n\t\t\t\t// \t// TODO: although there has been cases with two picker and\n\t\t\t\t// \t// one referencing the other with an expression, and that\n\t\t\t\t// \t// expression be evaluated before the second was created\n\t\t\t\t// \t// which led to an error. This should not happen\n\t\t\t\t// \tnode.children_controller.traverse_children((child) => child.set_dirty());\n\t\t\t\t// });\n\t\t\t}\n\t\t}\n\t}\n\n\tremove_from_scene(node: BaseObjNodeType) {\n\t\tnode.remove_object_from_parent();\n\t}\n\tare_children_cooking(): boolean {\n\t\tconst children = this.children();\n\t\tfor (let child of children) {\n\t\t\tif (child.is_display_node_cooking()) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\tasync expected_loading_geo_nodes_by_id() {\n\t\tconst geo_nodes = this.nodes_by_type('geo');\n\t\tconst node_by_id: Dictionary<GeoObjNode> = {};\n\t\tfor (let geo_node of geo_nodes) {\n\t\t\tconst is_displayed = await geo_node.is_displayed();\n\t\t\tif (is_displayed) {\n\t\t\t\tnode_by_id[geo_node.graph_node_id] = geo_node;\n\t\t\t}\n\t\t}\n\t\treturn node_by_id;\n\t}\n\n\t// async notify_geo_loaded(geo_node: GeoObjNode) {\n\t// \tthis._loaded_geo_node_by_id = this._loaded_geo_node_by_id || {};\n\t// \tthis._loaded_geo_node_by_id[geo_node.graph_node_id] = true;\n\n\t// \tthis._expected_geo_nodes = this._expected_geo_nodes || (await this.expected_loading_geo_nodes_by_id());\n\n\t// \tif (this.scene) {\n\t// \t\tthis.scene.loading_controller.on_first_object_loaded();\n\n\t// \t\tif (lodash_isEqual(Object.keys(this._loaded_geo_node_by_id), Object.keys(this._expected_geo_nodes))) {\n\t// \t\t\tthis.update_on_all_objects_loaded();\n\t// \t\t}\n\t// \t}\n\t// }\n\n\t// update_on_all_objects_loaded() {\n\t// \tthis.scene.loading_controller.on_all_objects_loaded();\n\t// \t// this.scene.cube_cameras_controller.on_all_objects_loaded(); // TODO: typescript\n\t// }\n\n\tadd_to_parent_transform(node: BaseObjNodeType) {\n\t\tthis.update_object(node);\n\t}\n\t// return if !this.scene().loaded()\n\n\t// transformed_node.request_container (input_container)->\n\t// \tobject = input_container.object()\n\n\t// \ttransformed_node.request_input_container 0, (parent_input_container)->\n\t// \t\tparent = parent_input_container.object()\n\t// \t\tparent.add(object)\n\n\tremove_from_parent_transform(node: BaseObjNodeType) {\n\t\tthis.update_object(node);\n\t}\n\t// return if !this.scene().loaded()\n\n\t// transformed_node.request_container (input_container)=>\n\t// \tobject = input_container.object()\n\n\t// \tthis.get_parent_for_node transformed_node, (parent_object)=>\n\t// \t\tparent_object.add(object)\n\n\tprivate _on_child_add(node?: BaseNodeType) {\n\t\tif (node) {\n\t\t\tthis.update_object(node as BaseObjNodeType);\n\t\t}\n\t}\n\tprivate _on_child_remove(node?: BaseNodeType) {\n\t\tif (node) {\n\t\t\tthis.remove_from_scene(node as BaseObjNodeType);\n\t\t}\n\t}\n}\n","import {PolyScene} from '../PolyScene';\n\nimport {Object3D} from 'three/src/core/Object3D';\nimport lodash_concat from 'lodash/concat';\nimport lodash_flatten from 'lodash/flatten';\nimport lodash_compact from 'lodash/compact';\nimport {ObjectsManagerNode} from '../../nodes/manager/ObjectsManager';\nimport {CoreString} from '../../../core/String';\nimport {BaseNodeType} from '../../nodes/_Base';\nimport {BaseObjNodeType} from '../../nodes/obj/_Base';\nimport {NodeContext} from '../../poly/NodeContext';\n\nexport class NodesController {\n\tconstructor(private scene: PolyScene) {}\n\n\t_root!: ObjectsManagerNode;\n\t_node_context_signatures: Dictionary<boolean> = {};\n\t_instanciated_nodes_by_context_and_type: Dictionary<Dictionary<Dictionary<BaseNodeType>>> = {};\n\n\tinit() {\n\t\tthis._root = new ObjectsManagerNode(this.scene);\n\t\tthis._root.initialize_base_and_node();\n\t\t// this._root.set_scene(this.scene);\n\t\tthis._root.init_default_scene();\n\t}\n\n\tget root() {\n\t\treturn this._root;\n\t}\n\tobjects_from_mask(mask: string): Object3D[] {\n\t\tconst masks = mask.split(' ');\n\t\t// let geos = this.root().nodes_by_type('geo') as BaseNodeObj[];\n\t\tlet nodes = this.root.children() as BaseObjNodeType[];\n\t\tnodes = nodes.filter((node) => CoreString.matches_one_mask(node.name, masks));\n\t\tconst objects = nodes.map((geo) => geo.object);\n\t\treturn lodash_compact(objects);\n\t}\n\tclear() {\n\t\tconst children = this.root.children();\n\t\tfor (let child of children) {\n\t\t\tthis.root.children_controller?.remove_node(child);\n\t\t}\n\t\t// return children.forEach(child=> {\n\t\t// \treturn this.root().remove_node(child);\n\t\t// });\n\t}\n\n\tnode(path: string) {\n\t\tif (path === '/') {\n\t\t\treturn this.root;\n\t\t} else {\n\t\t\treturn this.root.node(path);\n\t\t}\n\t}\n\tall_nodes() {\n\t\tlet nodes: BaseNodeType[] = [this.root];\n\t\tlet current_parents: BaseNodeType[] = [this.root];\n\t\tlet cmptr = 0;\n\t\twhile (current_parents.length > 0 && cmptr < 10) {\n\t\t\tconst children = lodash_flatten(\n\t\t\t\tcurrent_parents.map((current_parent) => {\n\t\t\t\t\tif (current_parent.children_allowed()) {\n\t\t\t\t\t\treturn current_parent.children();\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn [];\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\t\t\tnodes = lodash_concat(nodes, children);\n\t\t\tcurrent_parents = children;\n\t\t\tcmptr += 1;\n\t\t}\n\t\treturn lodash_flatten(nodes);\n\t}\n\n\treset_node_context_signatures() {\n\t\tthis._node_context_signatures = {};\n\t}\n\tregister_node_context_signature(node: BaseNodeType) {\n\t\tif (node.children_allowed() && node.children_controller) {\n\t\t\tthis._node_context_signatures[node.children_controller.node_context_signature()] = true;\n\t\t}\n\t}\n\tnode_context_signatures() {\n\t\treturn Object.keys(this._node_context_signatures)\n\t\t\t.sort()\n\t\t\t.map((s) => s.toLowerCase());\n\t}\n\n\tadd_to_instanciated_node(node: BaseNodeType) {\n\t\tconst context = node.node_context();\n\t\tconst node_type = node.type;\n\t\tthis._instanciated_nodes_by_context_and_type[context] =\n\t\t\tthis._instanciated_nodes_by_context_and_type[context] || {};\n\t\tthis._instanciated_nodes_by_context_and_type[context][node_type] =\n\t\t\tthis._instanciated_nodes_by_context_and_type[context][node_type] || {};\n\t\tthis._instanciated_nodes_by_context_and_type[context][node_type][node.graph_node_id] = node;\n\t}\n\n\tremove_from_instanciated_node(node: BaseNodeType) {\n\t\tconst context = node.node_context();\n\t\tconst node_type = node.type;\n\t\tdelete this._instanciated_nodes_by_context_and_type[context][node_type][node.graph_node_id];\n\t}\n\n\tinstanciated_nodes(context: NodeContext, node_type: string) {\n\t\tconst nodes = [];\n\t\tif (this._instanciated_nodes_by_context_and_type[context]) {\n\t\t\tconst nodes_by_ids = this._instanciated_nodes_by_context_and_type[context][node_type];\n\t\t\tif (nodes_by_ids) {\n\t\t\t\tfor (let id of Object.keys(nodes_by_ids)) {\n\t\t\t\t\tnodes.push(nodes_by_ids[id]);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn nodes;\n\t}\n}\n","import {BaseNodeType} from '../../engine/nodes/_Base';\n\nexport interface PerformancePrintObject {\n\tfull_path: string;\n\tcooks_count: number;\n\tcook_time_total: number;\n\tcook_time_per_iteration: number;\n\tcook_time_total_with_inputs: number;\n\tcook_time_total_with_inputs_per_iteration: number;\n\tcook_time_total_params: number;\n\tcook_time_total_params_per_iteration: number;\n}\n\nexport class PerformanceNode {\n\t_cooks_count: number = 0;\n\t_cook_time_total: number = 0;\n\t_cook_time_total_with_inputs: number = 0;\n\t_cook_time_total_params: number = 0;\n\tconstructor(private _node: BaseNodeType) {}\n\n\tupdate_cook_data(): void {\n\t\tthis._cooks_count += 1;\n\t\tthis._cook_time_total += this._node.cook_controller.cook_time;\n\t\tthis._cook_time_total_with_inputs += this._node.cook_controller.cook_time_with_inputs;\n\t\tthis._cook_time_total_params += this._node.cook_controller.cook_time_params;\n\t}\n\n\tget cook_time_total(): number {\n\t\treturn this._cook_time_total;\n\t}\n\tget cook_time_per_iteration(): number {\n\t\tif (this._cooks_count > 0) {\n\t\t\treturn this._cook_time_total / this._cooks_count;\n\t\t} else {\n\t\t\treturn 0;\n\t\t}\n\t}\n\tget cook_time_total_with_inputs(): number {\n\t\treturn this._cook_time_total_with_inputs;\n\t}\n\tget cook_time_total_with_inputs_per_iteration(): number {\n\t\tif (this._cooks_count > 0) {\n\t\t\treturn this._cook_time_total_with_inputs / this._cooks_count;\n\t\t} else {\n\t\t\treturn 0;\n\t\t}\n\t}\n\n\tget cook_time_total_params(): number {\n\t\treturn this._cook_time_total_params;\n\t}\n\tget cook_time_total_params_per_iteration(): number {\n\t\tif (this._cooks_count > 0) {\n\t\t\treturn this._cook_time_total_params / this._cooks_count;\n\t\t} else {\n\t\t\treturn 0;\n\t\t}\n\t}\n\n\tget cooks_count(): number {\n\t\treturn this._cooks_count;\n\t}\n\n\tprint_object(): PerformancePrintObject {\n\t\treturn {\n\t\t\tfull_path: this._node.full_path(),\n\t\t\tcooks_count: this.cooks_count,\n\t\t\tcook_time_total: this.cook_time_total,\n\t\t\tcook_time_per_iteration: this.cook_time_per_iteration,\n\t\t\tcook_time_total_with_inputs: this.cook_time_total_with_inputs,\n\t\t\tcook_time_total_with_inputs_per_iteration: this.cook_time_total_with_inputs_per_iteration,\n\t\t\tcook_time_total_params: this.cook_time_total_params,\n\t\t\tcook_time_total_params_per_iteration: this.cook_time_total_params_per_iteration,\n\t\t};\n\t}\n}\n","import lodash_uniq from 'lodash/uniq';\nimport lodash_clone from 'lodash/clone';\nimport lodash_sortBy from 'lodash/sortBy';\nimport {PerformanceNode} from './PerformanceNode';\nimport {BaseNodeType} from '../../engine/nodes/_Base';\n\nexport class CorePerformance {\n\tprivate _started: boolean = false;\n\t_start_time: number | null = 0;\n\t_previous_timestamp: number = 0;\n\t_nodes_cook_data: Dictionary<PerformanceNode> = {};\n\t_durations_by_name: Dictionary<number> = {};\n\t_durations_count_by_name: Dictionary<number> = {};\n\t// _performance_id: number;\n\n\t// constructor(){\n\t// \tconsole.log(\"creating perf\")\n\t// \tthis._performance_id = Math.random()\n\t// }\n\n\tprofile(name: string, method: (args?: any) => any) {\n\t\tconst start_time = performance.now();\n\t\tmethod();\n\t\tconst total_time = performance.now() - start_time;\n\t\tconsole.log(`${name}: ${total_time}`);\n\t}\n\n\tstart() {\n\t\tif (!this._started) {\n\t\t\tthis.reset();\n\t\t\tthis._started = true;\n\t\t\tthis._start_time = performance.now();\n\t\t\tthis._nodes_cook_data = {};\n\t\t\tthis._previous_timestamp = this._start_time;\n\t\t}\n\t}\n\t// else\n\t// \tthrow \"performance already started\"\n\tstop() {\n\t\tthis.reset();\n\t}\n\treset() {\n\t\tthis._started = false;\n\t\tthis._start_time = null;\n\t\tthis._durations_by_name = {};\n\t\tthis._durations_count_by_name = {};\n\t\tthis._nodes_cook_data = {};\n\t}\n\n\tget started(): boolean {\n\t\treturn this._started;\n\t}\n\n\trecord_node_cook_data(node: BaseNodeType) {\n\t\tconst id = node.graph_node_id;\n\t\tif (this._nodes_cook_data[id] == null) {\n\t\t\tthis._nodes_cook_data[id] = new PerformanceNode(node);\n\t\t}\n\t\tthis._nodes_cook_data[id].update_cook_data();\n\t}\n\n\trecord(name: string) {\n\t\tif (!this.started) {\n\t\t\tthis.start();\n\t\t}\n\n\t\tconst current_timestamp = performance.now();\n\n\t\tif (this._durations_by_name[name] == null) {\n\t\t\tthis._durations_by_name[name] = 0;\n\t\t}\n\t\tthis._durations_by_name[name] += current_timestamp - this._previous_timestamp;\n\t\tif (this._durations_count_by_name[name] == null) {\n\t\t\tthis._durations_count_by_name[name] = 0;\n\t\t}\n\t\tthis._durations_count_by_name[name] += 1;\n\n\t\treturn (this._previous_timestamp = current_timestamp);\n\t}\n\n\tprint() {\n\t\tthis.print_node_cook_data();\n\t\tthis.print_recordings();\n\t}\n\n\tprint_node_cook_data() {\n\t\tlet performance_nodes = Object.values(this._nodes_cook_data);\n\t\tperformance_nodes = lodash_sortBy(performance_nodes, (performance_node) => -performance_node.cook_time_total);\n\n\t\tconst print_objects = performance_nodes.map((performance_node) => performance_node.print_object());\n\n\t\tconsole.log('--------------- NODES COOK TIME -----------');\n\n\t\tconst table_entries = [];\n\t\tconst sorted_print_objects = lodash_sortBy(print_objects, (print_object) => -print_object['cook_time_total']);\n\t\tfor (let print_object of sorted_print_objects) {\n\t\t\ttable_entries.push(print_object);\n\t\t}\n\n\t\tconsole.table(table_entries);\n\n\t\treturn print_objects;\n\t}\n\n\tprint_recordings() {\n\t\t// const start_time = this._start_time\n\t\tconst durations_by_name = lodash_clone(this._durations_by_name);\n\t\tconst durations_count_by_name = lodash_clone(this._durations_count_by_name);\n\t\t//this.reset()\n\n\t\tconst durations = [];\n\t\t//durations_by_name = {}\n\t\tconst names_by_duration: Dictionary<string[]> = {};\n\n\t\tfor (let name of Object.keys(durations_by_name)) {\n\t\t\tconst duration = durations_by_name[name];\n\n\t\t\t//durations_by_name[name] = duration\n\t\t\tdurations.push(duration);\n\t\t\tif (names_by_duration[duration] == null) {\n\t\t\t\tnames_by_duration[duration] = [];\n\t\t\t}\n\t\t\tnames_by_duration[duration].push(name);\n\t\t}\n\n\t\tdurations.sort((a, b) => a - b);\n\t\tconst sorted_durations = lodash_uniq(durations);\n\n\t\tconsole.log('--------------- PERF RECORDINGS -----------');\n\t\t//console.log(\"sorted_durations\", sorted_durations)\n\t\t// let previous_duration = start_time\n\t\tconst table_entries = [];\n\t\tfor (let duration of sorted_durations) {\n\t\t\tconst names = names_by_duration[duration];\n\t\t\tfor (let name of names) {\n\t\t\t\tconst count = durations_count_by_name[name];\n\t\t\t\tconst duration_per_iteration = duration / count;\n\n\t\t\t\tconst entry = {duration, name, count, duration_per_iteration};\n\t\t\t\ttable_entries.push(entry);\n\t\t\t}\n\n\t\t\t// previous_duration = duration\n\t\t}\n\n\t\tconsole.table(table_entries);\n\t\treturn table_entries;\n\t}\n}\n","export enum SceneEvent {\n\tFRAME_RANGE_UPDATED = 'scene_frame_range_updated',\n\tFRAME_UPDATED = 'scene_frame_updated',\n\tPLAY_STATE_UPDATED = 'scene_play_state_updated',\n}\n","import {PolyScene} from '../PolyScene';\nimport {CoreGraphNode} from '../../../core/graph/CoreGraphNode';\nimport {SceneEvent} from '../../poly/SceneEvent';\n\ntype FrameRange = Number2;\n\n// ensure that FPS remains a float\n// to have divisions and multiplications also give a float\nconst FPS = 60.0;\n\nexport class TimeController {\n\tprotected self: PolyScene = (<unknown>this) as PolyScene;\n\tprivate _frame: number = 1;\n\tprivate _time: number = 0;\n\tprivate _prev_performance_now: number = 0;\n\tprivate _graph_node: CoreGraphNode;\n\tprivate _frame_range: FrameRange = [1, 600];\n\tprivate _frame_range_locked: [boolean, boolean] = [true, true];\n\tprivate _playing: boolean = false;\n\n\tconstructor(private scene: PolyScene) {\n\t\tthis._graph_node = new CoreGraphNode(scene, 'time controller');\n\t\t// this._graph_node.set_scene(this.scene);\n\t}\n\tget graph_node() {\n\t\treturn this._graph_node;\n\t}\n\n\tget frame(): number {\n\t\treturn this._frame;\n\t}\n\tget time(): number {\n\t\treturn this._time;\n\t}\n\tget frame_range(): FrameRange {\n\t\treturn this._frame_range;\n\t}\n\tget frame_range_locked(): [boolean, boolean] {\n\t\treturn this._frame_range_locked;\n\t}\n\tset_frame_range(start_frame: number, end_frame: number) {\n\t\tthis._frame_range[0] = Math.floor(start_frame);\n\t\tthis._frame_range[1] = Math.floor(end_frame);\n\t\tthis.scene.dispatch_controller.dispatch(this._graph_node, SceneEvent.FRAME_RANGE_UPDATED);\n\t}\n\tset_frame_range_locked(start_locked: boolean, end_locked: boolean) {\n\t\tthis._frame_range_locked[0] = start_locked;\n\t\tthis._frame_range_locked[1] = end_locked;\n\t\tthis.scene.dispatch_controller.dispatch(this._graph_node, SceneEvent.FRAME_RANGE_UPDATED);\n\t}\n\t// set_fps(fps: number) {\n\t// \tthis._fps = Math.floor(fps);\n\t// \tthis._frame_interval = 1000 / this._fps;\n\t// \tthis.scene.events_controller.dispatch(this._graph_node, SceneEvent.FRAME_RANGE_UPDATED);\n\t// }\n\tset_time(time: number, update_frame = true) {\n\t\tif (time != this._time) {\n\t\t\tthis._time = time;\n\n\t\t\tif (update_frame) {\n\t\t\t\tconst new_frame = Math.floor(this._time * FPS);\n\t\t\t\tthis._frame = new_frame;\n\t\t\t}\n\n\t\t\t// update time dependents\n\t\t\tthis.scene.dispatch_controller.dispatch(this._graph_node, SceneEvent.FRAME_UPDATED);\n\t\t\tthis.scene.uniforms_controller.update_time_dependent_uniform_owners();\n\n\t\t\t// we block updates here, so that dependent nodes only cook once\n\t\t\tthis.scene.cooker.block();\n\t\t\tthis.graph_node.set_successors_dirty();\n\t\t\tthis.scene.cooker.unblock();\n\t\t}\n\t}\n\n\tset_frame(frame: number, update_time = true) {\n\t\tif (frame != this._frame) {\n\t\t\tframe = this._ensure_frame_within_bounds(frame);\n\t\t\tif (frame != this._frame) {\n\t\t\t\tthis._frame = frame;\n\t\t\t\tif (update_time) {\n\t\t\t\t\tthis.set_time(this._frame / FPS, false);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t}\n\tincrement_time_if_playing() {\n\t\tif (this._playing) {\n\t\t\tif (!this.scene.root.are_children_cooking()) {\n\t\t\t\tthis.increment_time();\n\t\t\t}\n\t\t}\n\t}\n\tincrement_time() {\n\t\tconst performance_now = performance.now();\n\t\tconst delta = (performance_now - this._prev_performance_now) / 1000.0;\n\t\tconst new_time = this._time + delta;\n\t\tthis._prev_performance_now = performance_now;\n\t\tthis.set_time(new_time);\n\t}\n\n\t_ensure_frame_within_bounds(frame: number): number {\n\t\tif (this._frame_range_locked[0] && frame < this._frame_range[0]) {\n\t\t\treturn this._frame_range[1];\n\t\t}\n\t\tif (this._frame_range_locked[1] && frame > this._frame_range[1]) {\n\t\t\treturn this._frame_range[0];\n\t\t}\n\t\treturn frame;\n\t}\n\tget playing() {\n\t\treturn this._playing === true;\n\t}\n\tpause() {\n\t\tif (this._playing == true) {\n\t\t\tthis._playing = false;\n\t\t\tthis.scene.dispatch_controller.dispatch(this._graph_node, SceneEvent.PLAY_STATE_UPDATED);\n\t\t}\n\t}\n\tplay() {\n\t\tif (this._playing !== true) {\n\t\t\tthis._playing = true;\n\t\t\tthis._prev_performance_now = performance.now();\n\t\t\tthis.scene.dispatch_controller.dispatch(this._graph_node, SceneEvent.PLAY_STATE_UPDATED);\n\t\t}\n\t}\n\ttoggle_play_pause() {\n\t\tif (this.playing) {\n\t\t\tthis.pause();\n\t\t} else {\n\t\t\tthis.play();\n\t\t}\n\t}\n}\n","import {PolyScene} from '../PolyScene';\nimport {NodeSerializer} from '../../../engine/nodes/utils/Serializer';\n\nexport class PolySceneSerializer {\n\tconstructor(private scene: PolyScene) {}\n\n\tto_json(include_node_param_components: boolean = false) {\n\t\tconst nodes_by_graph_node_id: Dictionary<object> = {};\n\t\tconst params_by_graph_node_id: Dictionary<object> = {};\n\n\t\tfor (let node of this.scene.nodes_controller.all_nodes()) {\n\t\t\tconst node_serializer = new NodeSerializer(node);\n\t\t\tnodes_by_graph_node_id[node.graph_node_id] = node_serializer.to_json(include_node_param_components);\n\n\t\t\tconst params = node.params.all; //lodash_compact(lodash_concat( lodash_values(node.params()), lodash_values(node.spare_params()) ));\n\t\t\tfor (let param of params) {\n\t\t\t\tparams_by_graph_node_id[param.graph_node_id] = param.to_json();\n\t\t\t}\n\t\t}\n\n\t\treturn {\n\t\t\tnodes_by_graph_node_id,\n\t\t\tparams_by_graph_node_id,\n\t\t};\n\t}\n}\n","import {PolyScene} from '../PolyScene';\nimport {Vector2} from 'three/src/math/Vector2';\nimport {IUniform} from 'three/src/renderers/shaders/UniformsLib';\n\ntype IUniforms = Dictionary<IUniform>;\nexport interface IUniformsWithTime extends IUniforms {\n\ttime: IUniform;\n}\nexport interface IUniformsWithResolution extends IUniforms {\n\tresolution: {\n\t\tvalue: Vector2Like;\n\t};\n}\n\nexport class UniformsController {\n\tconstructor(private scene: PolyScene) {}\n\n\tprivate _time_dependent_uniform_owners: Dictionary<IUniformsWithTime> = {}; //new Map()\n\tprivate _time_dependent_uniform_owners_ids: string[] | null = null;\n\n\tprivate _resolution: Vector2 = new Vector2(1, 1);\n\tprivate _resolution_dependent_uniform_owners: Dictionary<IUniformsWithResolution> = {};\n\tprivate _resolution_dependent_uniform_owners_ids: string[] = [];\n\n\t// time\n\tadd_time_dependent_uniform_owner(id: string, uniforms: IUniformsWithTime) {\n\t\tthis._time_dependent_uniform_owners[id] = uniforms;\n\t\tthis._update_time_dependent_uniform_owners_ids();\n\t}\n\tremove_time_dependent_uniform_owner(id: string) {\n\t\tdelete this._time_dependent_uniform_owners[id];\n\t\tthis._update_time_dependent_uniform_owners_ids();\n\t}\n\tprotected _update_time_dependent_uniform_owners_ids() {\n\t\tthis._time_dependent_uniform_owners_ids = Object.keys(this._time_dependent_uniform_owners);\n\t}\n\tpublic update_time_dependent_uniform_owners() {\n\t\tconst time = this.scene.time;\n\t\tif (this._time_dependent_uniform_owners_ids) {\n\t\t\tfor (let id of this._time_dependent_uniform_owners_ids) {\n\t\t\t\tconst uniforms = this._time_dependent_uniform_owners[id];\n\t\t\t\tuniforms.time.value = time;\n\t\t\t}\n\t\t}\n\t}\n\n\t// resolution\n\tadd_resolution_dependent_uniform_owner(id: string, uniforms: IUniformsWithResolution) {\n\t\tthis._resolution_dependent_uniform_owners[id] = uniforms;\n\t\tthis._update_resolution_dependent_uniform_owners_ids();\n\t\tif (this._resolution) {\n\t\t\tthis.update_resolution_dependent_uniforms(uniforms);\n\t\t}\n\t}\n\tremove_resolution_dependent_uniform_owner(id: string) {\n\t\tdelete this._resolution_dependent_uniform_owners[id];\n\t\tthis._update_resolution_dependent_uniform_owners_ids();\n\t}\n\tprotected _update_resolution_dependent_uniform_owners_ids() {\n\t\tthis._resolution_dependent_uniform_owners_ids = Object.keys(this._resolution_dependent_uniform_owners);\n\t}\n\tupdate_resolution_dependent_uniform_owners(resolution: Vector2) {\n\t\tthis._resolution.copy(resolution);\n\t\tfor (let id of this._resolution_dependent_uniform_owners_ids) {\n\t\t\tconst uniforms = this._resolution_dependent_uniform_owners[id];\n\t\t\tthis.update_resolution_dependent_uniforms(uniforms);\n\t\t}\n\t}\n\tupdate_resolution_dependent_uniforms(uniforms: IUniformsWithResolution) {\n\t\tuniforms.resolution.value.x = this._resolution.x * window.devicePixelRatio;\n\t\tuniforms.resolution.value.y = this._resolution.y * window.devicePixelRatio;\n\t}\n}\n","import {Poly} from '../../Poly';\n\n// import {PolyScene} from '../PolyScene';\n\nexport class WebGLController {\n\tconstructor() {}\n\n\t_require_webgl2: boolean = false;\n\n\trequire_webgl2() {\n\t\treturn this._require_webgl2;\n\t}\n\tset_require_webgl2() {\n\t\tif (!this._require_webgl2) {\n\t\t\tthis._require_webgl2 = true;\n\t\t\tPoly.instance().renderers_controller.set_require_webgl2();\n\t\t}\n\t}\n}\n","// import {Scene} from 'three/src/scenes/Scene'\n// import {CoreGraph} from '../../core/graph/CoreGraph'\n// import {CorePerformance} from '../../core/performance/CorePerformance'\n// import {Cooker} from '../../core/graph/Cooker'\n// import {EmitPayload} from '../../core/graph/NodeScene'\n// import {BaseNode} from '../nodes/_Base'\n\n// import {CoreObject} from '../../core/Object';\n// import {Debug} from './concerns/Debug';\n// import {Env} from './concerns/Env'\n// import {ExpressionRegister} from './concerns/ExpressionRegister';\n// import {Frame} from './concerns/Frame';\n// import {GraphMixin} from './concerns/Graph';\n// import {Js} from './concerns/Js';\n// import {Json} from './concerns/Json';\n// import {LifeCycle} from './concerns/LifeCycle';\n// import {Loading} from './concerns/Loading';\n// import {Name} from './concerns/Name';\n// import {Nodes} from './concerns/Nodes';\n// import {ObjectMixin} from './concerns/Object';\n// import {PickerNodes} from './concerns/PickerNodes';\n// import {PerformanceMixin} from './concerns/Performance';\n// import {Renderer} from './concerns/Renderer';\n// import {Store} from './concerns/Store';\n// import {Uniforms} from './concerns/Uniforms';\n\n// import {CubeCamerasController} from './utils/CubeCamerasController';\nimport {CamerasController} from './utils/CamerasController';\nimport {Cooker} from './utils/Cooker';\nimport {CoreGraph} from '../../core/graph/CoreGraph';\nimport {CookController} from './utils/CookController';\nimport {DispatchController} from './utils/DispatchController';\nimport {SceneEventsController} from './utils/events/EventsController';\nimport {LifeCycleController} from './utils/LifeCycleController';\nimport {LoadingController} from './utils/LoadingController';\nimport {ExpressionsController} from './utils/ExpressionsController';\nimport {MissingReferencesController} from './utils/MissingReferencesController';\nimport {NodesController} from './utils/NodesController';\nimport {CorePerformance} from '../../core/performance/CorePerformance';\nimport {TimeController} from './utils/TimeController';\nimport {PolySceneSerializer} from './utils/Serializer';\nimport {UniformsController} from './utils/UniformsController';\nimport {WebGLController} from './utils/WebGLController';\n\nimport {Scene} from 'three/src/scenes/Scene';\n\nexport class PolyScene {\n\tprotected _default_scene = new Scene();\n\tget default_scene() {\n\t\treturn this._default_scene;\n\t}\n\t_uuid!: string;\n\tset_uuid(uuid: string) {\n\t\treturn (this._uuid = uuid);\n\t}\n\tget uuid() {\n\t\treturn this._uuid;\n\t}\n\t_name: string | undefined;\n\tset_name(name: string) {\n\t\treturn (this._name = name);\n\t}\n\tget name() {\n\t\treturn this._name;\n\t}\n\n\tprotected _cameras_controller = new CamerasController(this);\n\tget cameras_controller() {\n\t\treturn this._cameras_controller;\n\t}\n\n\tprivate _cooker = new Cooker(this);\n\tget cooker() {\n\t\treturn this._cooker;\n\t}\n\n\t// private _cube_cameras_controller: CubeCamerasController;\n\t// get cube_cameras_controller() {\n\t// \treturn (this._cube_cameras_controller = this._cube_cameras_controller || new CubeCamerasController(this));\n\t// }\n\tpublic readonly cook_controller = new CookController();\n\tasync wait_for_cooks_completed() {\n\t\treturn this.cook_controller.wait_for_cooks_completed();\n\t}\n\n\tprivate _dispatch_controller: DispatchController | undefined;\n\tget dispatch_controller() {\n\t\treturn (this._dispatch_controller = this._dispatch_controller || new DispatchController(this));\n\t}\n\tprivate _events_controller: SceneEventsController | undefined;\n\tget events_controller() {\n\t\treturn (this._events_controller = this._events_controller || new SceneEventsController(this));\n\t}\n\n\tprivate _graph = new CoreGraph();\n\tget graph() {\n\t\treturn this._graph;\n\t}\n\n\tprivate _lifecycle_controller: LifeCycleController | undefined;\n\tget lifecycle_controller() {\n\t\treturn (this._lifecycle_controller = this._lifecycle_controller || new LifeCycleController(this));\n\t}\n\tprivate _loading_controller: LoadingController | undefined;\n\tget loading_controller() {\n\t\treturn (this._loading_controller = this._loading_controller || new LoadingController(this));\n\t}\n\n\tprivate _missing_expression_references_controller: MissingReferencesController = new MissingReferencesController();\n\tget missing_expression_references_controller() {\n\t\treturn this._missing_expression_references_controller;\n\t}\n\tprivate _expressions_controller: ExpressionsController = new ExpressionsController();\n\tget expressions_controller() {\n\t\treturn this._expressions_controller;\n\t}\n\n\tprotected _nodes_controller = new NodesController(this);\n\tget nodes_controller() {\n\t\treturn this._nodes_controller;\n\t}\n\n\tprotected _performance: CorePerformance | undefined;\n\tget performance() {\n\t\treturn (this._performance = this._performance || new CorePerformance());\n\t}\n\n\t//\n\t//\n\t// time\n\t//\n\t//\n\tprotected _time_controller = new TimeController(this);\n\tget time_controller() {\n\t\treturn this._time_controller;\n\t}\n\tset_frame(frame: number) {\n\t\tthis.time_controller.set_frame(frame);\n\t}\n\tget frame() {\n\t\treturn this.time_controller.frame;\n\t}\n\tget time() {\n\t\treturn this.time_controller.time;\n\t}\n\tget frame_range() {\n\t\treturn this.time_controller.frame_range;\n\t}\n\tplay() {\n\t\tthis.time_controller.play();\n\t}\n\tpause() {\n\t\tthis.time_controller.pause();\n\t}\n\n\t//\n\t//\n\t// serializer\n\t//\n\t//\n\tprivate _serializer: PolySceneSerializer | undefined;\n\tprivate get serializer() {\n\t\treturn (this._serializer = this._serializer || new PolySceneSerializer(this));\n\t}\n\tto_json() {\n\t\treturn this.serializer.to_json();\n\t}\n\n\t//\n\t//\n\t// uniforms\n\t//\n\t//\n\tprivate _uniforms_controller: UniformsController | undefined;\n\tget uniforms_controller() {\n\t\treturn (this._uniforms_controller = this._uniforms_controller || new UniformsController(this));\n\t}\n\n\t//\n\t//\n\t// webgl\n\t//\n\t//\n\tprivate _webgl_controller: WebGLController | undefined;\n\tget webgl_controller() {\n\t\treturn (this._webgl_controller = this._webgl_controller || new WebGLController());\n\t}\n\n\t//\n\t//\n\t// constructor\n\t//\n\t//\n\tconstructor() {\n\t\t// this.mark_as_loaded()\n\t\tthis._graph.set_scene(this);\n\t\t// this.time_controller.init();\n\t\tthis.nodes_controller.init();\n\t}\n\n\t//\n\t//\n\t// cooker\n\t//\n\t//\n\tbatch_update(callback: () => void) {\n\t\tthis._cooker.block();\n\n\t\tcallback();\n\n\t\tthis._cooker.unblock();\n\t}\n\n\t//\n\t//\n\t// nodes\n\t//\n\t//\n\tnode(path: string) {\n\t\treturn this.nodes_controller.node(path);\n\t}\n\tget root() {\n\t\treturn this.nodes_controller.root;\n\t}\n}\n","import {BaseNodeType} from '../../../nodes/_Base';\nimport lodash_isString from 'lodash/isString';\nimport lodash_isBoolean from 'lodash/isBoolean';\nimport lodash_isObject from 'lodash/isObject';\nimport lodash_isNumber from 'lodash/isNumber';\nimport lodash_isArray from 'lodash/isArray';\n\nimport {NodeJsonExporterData, NodeJsonExporterUIData, InputData} from '../export/Node';\nimport {ParamJsonExporterData, SimpleParamJsonExporterData, ComplexParamJsonExporterData} from '../export/Param';\nimport {Vector2} from 'three/src/math/Vector2';\nimport {JsonImportDispatcher} from './Dispatcher';\nimport {ParamType} from '../../../poly/ParamType';\nimport {ParamsUpdateOptions} from '../../../nodes/utils/params/ParamsController';\n// import {ParamInitValueSerializedTypeMap} from '../../../params/types/ParamInitValueSerializedTypeMap';\n\nexport class NodeJsonImporter<T extends BaseNodeType> {\n\tconstructor(protected _node: T) {}\n\n\tprocess_data(data: NodeJsonExporterData) {\n\t\tthis.create_nodes(data['nodes']);\n\t\tthis.set_selection(data['selection']);\n\n\t\t// inputs clone\n\t\tif (this._node.io.inputs.override_clonable_state_allowed()) {\n\t\t\tconst override = data['override_clonable_state'];\n\t\t\tif (override) {\n\t\t\t\tthis._node.io.inputs.set_override_clonable_state(override);\n\t\t\t}\n\t\t}\n\n\t\tthis.set_flags(data);\n\t\tthis.set_params(data['params']);\n\n\t\tthis.from_data_custom(data);\n\n\t\tthis._node.lifecycle.set_creation_completed();\n\t}\n\tprocess_inputs_data(data: NodeJsonExporterData) {\n\t\tthis.set_inputs(data['inputs']);\n\t}\n\n\tprocess_ui_data(data: NodeJsonExporterUIData) {\n\t\tif (!data) {\n\t\t\treturn;\n\t\t}\n\t\tconst ui_data = this._node.ui_data;\n\t\tconst pos = data['pos'];\n\t\tif (pos) {\n\t\t\tconst vector = new Vector2().fromArray(pos);\n\t\t\tui_data.set_position(vector);\n\t\t}\n\t\tconst comment = data['comment'];\n\t\tif (comment) {\n\t\t\tui_data.set_comment(comment);\n\t\t}\n\t\tthis.process_nodes_ui_data(data['nodes']);\n\t}\n\n\tcreate_nodes(data?: Dictionary<NodeJsonExporterData>) {\n\t\tif (!data) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst node_names = Object.keys(data);\n\t\tconst nodes: BaseNodeType[] = [];\n\t\tfor (let node_name of node_names) {\n\t\t\tconst node_data = data[node_name];\n\t\t\tconst node_type = node_data['type'];\n\t\t\tif (this._node.children_allowed() && this._node.children_controller) {\n\t\t\t\tconst node = this._node.create_node(node_type);\n\t\t\t\tif (node) {\n\t\t\t\t\tnode.set_name(node_name);\n\t\t\t\t\tnodes.push(node);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tconst importers = [];\n\t\tlet index = 0;\n\t\tfor (let node of nodes) {\n\t\t\tconst importer = JsonImportDispatcher.dispatch_node(node); //.visit(JsonImporterVisitor)\n\t\t\timporters.push(importer);\n\t\t\timporter.process_data(data[node.name]);\n\t\t\tindex++;\n\t\t}\n\t\tindex = 0;\n\t\tfor (let node of nodes) {\n\t\t\tconst importer = importers[index];\n\t\t\timporter.process_inputs_data(data[node.name]);\n\t\t\tindex++;\n\t\t}\n\t}\n\tset_selection(data?: string[]) {\n\t\tif (this._node.children_allowed() && this._node.children_controller) {\n\t\t\tif (data && data.length > 0) {\n\t\t\t\tconst selected_nodes: BaseNodeType[] = [];\n\t\t\t\tdata.forEach((node_name) => {\n\t\t\t\t\tconst node = this._node.node(node_name);\n\t\t\t\t\tif (node) {\n\t\t\t\t\t\tselected_nodes.push(node);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tthis._node.children_controller.selection.set(selected_nodes);\n\t\t\t}\n\t\t}\n\t}\n\n\tset_flags(data: NodeJsonExporterData) {\n\t\tconst flags = data['flags'];\n\t\tif (flags) {\n\t\t\tconst bypass = flags['bypass'];\n\t\t\tif (bypass != null) {\n\t\t\t\tthis._node.flags?.bypass?.set(bypass);\n\t\t\t}\n\t\t\tconst display = flags['display'];\n\t\t\tif (display != null) {\n\t\t\t\tthis._node.flags?.display?.set(display);\n\t\t\t}\n\t\t}\n\t}\n\n\tset_inputs(inputs_data?: InputData[]) {\n\t\tif (!inputs_data) {\n\t\t\treturn;\n\t\t}\n\n\t\tinputs_data.forEach((input_data, i) => {\n\t\t\tif (input_data && this._node.parent) {\n\t\t\t\tif (lodash_isString(input_data)) {\n\t\t\t\t\tconst input_node_name = input_data;\n\t\t\t\t\tconst input_node = this._node.parent.node(input_node_name);\n\t\t\t\t\tthis._node.set_input(i, input_node);\n\t\t\t\t} else {\n\t\t\t\t\tconst input_node = this._node.parent.node(input_data['node']);\n\t\t\t\t\tconst input_name = input_data['name'];\n\t\t\t\t\tif (this._node.io.inputs.has_named_input(input_name)) {\n\t\t\t\t\t\tthis._node.set_input(input_data['name'], input_node, input_data['output']);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconsole.warn(`${this._node.full_path()} has no input named ${input_name}`);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tprocess_nodes_ui_data(data: Dictionary<NodeJsonExporterUIData>) {\n\t\tif (!data) {\n\t\t\treturn;\n\t\t}\n\n\t\tconst node_names = Object.keys(data);\n\t\tnode_names.forEach((node_name) => {\n\t\t\tconst node = this._node.node(node_name);\n\t\t\tif (node) {\n\t\t\t\tconst node_data = data[node_name];\n\t\t\t\tJsonImportDispatcher.dispatch_node(node).process_ui_data(node_data);\n\t\t\t\t// node.visit(JsonImporterVisitor).process_ui_data(node_data);\n\t\t\t}\n\t\t});\n\t}\n\n\t//\n\t//\n\t// PARAMS\n\t//\n\t//\n\tset_params(data?: Dictionary<ParamJsonExporterData<ParamType>>) {\n\t\tif (!data) {\n\t\t\treturn;\n\t\t}\n\t\tconst param_names = Object.keys(data);\n\n\t\tconst params_update_options: ParamsUpdateOptions = {};\n\t\tfor (let param_name of param_names) {\n\t\t\tconst param_data = data[param_name] as ComplexParamJsonExporterData<ParamType>;\n\t\t\tconst options = param_data['options'];\n\t\t\t// const is_spare = options && options['spare'] === true;\n\n\t\t\tconst param_type = param_data['type']!;\n\t\t\tconst has_param = this._node.params.has_param(param_name);\n\t\t\tlet has_param_and_same_type = false;\n\t\t\tlet param;\n\t\t\tif (has_param) {\n\t\t\t\tparam = this._node.params.get(param_name);\n\t\t\t\t// we can safely consider same type if param_type is not mentioned\n\t\t\t\tif ((param && param.type == param_type) || param_type == null) {\n\t\t\t\t\thas_param_and_same_type = true;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (has_param_and_same_type) {\n\t\t\t\tif (this._is_param_data_complex(param_data)) {\n\t\t\t\t\tthis._process_param_data_complex(param_name, param_data);\n\t\t\t\t} else {\n\t\t\t\t\tthis._process_param_data_simple(param_name, param_data as SimpleParamJsonExporterData<ParamType>);\n\t\t\t\t}\n\t\t\t} else {\n\t\t\t\t// it the param is a spare one,\n\t\t\t\t// we check if it is currently exists with same type first.\n\t\t\t\t// - if it is, we only update the value\n\t\t\t\t// - if it's not, we delete it and add it again\n\t\t\t\tparams_update_options.names_to_delete = params_update_options.names_to_delete || [];\n\t\t\t\tparams_update_options.names_to_delete.push(param_name);\n\t\t\t\tparams_update_options.to_add = params_update_options.to_add || [];\n\t\t\t\tparams_update_options.to_add.push({\n\t\t\t\t\tname: param_name,\n\t\t\t\t\ttype: param_type,\n\t\t\t\t\tinit_value: param_data['default_value'] as any,\n\t\t\t\t\toptions: options,\n\t\t\t\t});\n\n\t\t\t\t// if (options && param_type) {\n\t\t\t\t// \tif (param_data['default_value']) {\n\t\t\t\t// \t\tif (has_param) {\n\t\t\t\t// \t\t\tthis._node.params.delete_param(param_name);\n\t\t\t\t// \t\t}\n\t\t\t\t// \t\tparam = this._node.add_param(param_type, param_name, param_data['default_value'], options);\n\t\t\t\t// \t\tif (param) {\n\t\t\t\t// \t\t\tJsonImportDispatcher.dispatch_param(param).process_data(param_data);\n\t\t\t\t// \t\t}\n\t\t\t\t// \t}\n\t\t\t\t// }\n\t\t\t}\n\t\t}\n\n\t\t// delete and create the spare params we need to\n\t\tconst params_delete_required =\n\t\t\tparams_update_options.names_to_delete && params_update_options.names_to_delete.length > 0;\n\t\tconst params_add_required = params_update_options.to_add && params_update_options.to_add.length > 0;\n\n\t\tif (params_delete_required || params_add_required) {\n\t\t\tthis._node.params.update_params(params_update_options);\n\t\t\t// update them based on the imported data\n\t\t\tfor (let spare_param of this._node.params.spare) {\n\t\t\t\tconst param_data = data[spare_param.name] as ComplexParamJsonExporterData<ParamType>;\n\t\t\t\t// JsonImportDispatcher.dispatch_param(spare_param).process_data(param_data);\n\t\t\t\tif (!spare_param.parent_param && param_data) {\n\t\t\t\t\tif (this._is_param_data_complex(param_data)) {\n\t\t\t\t\t\tthis._process_param_data_complex(spare_param.name, param_data);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tthis._process_param_data_simple(\n\t\t\t\t\t\t\tspare_param.name,\n\t\t\t\t\t\t\tparam_data as SimpleParamJsonExporterData<ParamType>\n\t\t\t\t\t\t);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// those hooks are useful for some gl nodes,\n\t\t// such as the constant, which needs to update its connections\n\t\t// based on another parameter, which will be set just before\n\t\tthis._node.params.run_on_scene_load_hooks();\n\t}\n\n\tprivate _process_param_data_simple(param_name: string, param_data: SimpleParamJsonExporterData<ParamType>) {\n\t\tthis._node.params.get(param_name)?.set(param_data);\n\t}\n\n\tprivate _process_param_data_complex(param_name: string, param_data: ComplexParamJsonExporterData<ParamType>) {\n\t\tconst param = this._node.params.get(param_name);\n\t\tif (param) {\n\t\t\tJsonImportDispatcher.dispatch_param(param).process_data(param_data);\n\t\t}\n\t\t// return\n\t\t// const has_param = this._node.params.has_param(param_name);\n\t\t// const param_type = param_data['type']!;\n\n\t\t// let has_param_and_same_type = false;\n\t\t// let param;\n\t\t// if (has_param) {\n\t\t// \tparam = this._node.params.get(param_name);\n\t\t// \t// we can safely consider same type if param_type is not mentioned\n\t\t// \tif ((param && param.type == param_type) || param_type == null) {\n\t\t// \t\thas_param_and_same_type = true;\n\t\t// \t}\n\t\t// }\n\t\t// if (has_param_and_same_type) {\n\t\t// \tparam = this._node.params.get(param_name);\n\t\t// \tif (param) {\n\t\t// \t\tJsonImportDispatcher.dispatch_param(param).process_data(param_data);\n\t\t// \t\t// param.visit(JsonImporterVisitor).process_data(param_data);\n\t\t// \t}\n\t\t// } else {\n\t\t// \tconst options = param_data['options'];\n\t\t// \tif (options && param_type) {\n\t\t// \t\tconst is_spare = options['spare'] === true;\n\t\t// \t\tif (is_spare && param_data['default_value']) {\n\t\t// \t\t\tif (has_param) {\n\t\t// \t\t\t\tthis._node.params.delete_param(param_name);\n\t\t// \t\t\t}\n\t\t// \t\t\tparam = this._node.add_param(param_type, param_name, param_data['default_value'], options);\n\t\t// \t\t\tif (param) {\n\t\t// \t\t\t\tJsonImportDispatcher.dispatch_param(param).process_data(param_data);\n\t\t// \t\t\t}\n\t\t// \t\t}\n\t\t// \t}\n\t\t// }\n\t}\n\n\tprivate _is_param_data_complex(param_data: ParamJsonExporterData<ParamType>): boolean {\n\t\t// we can test here most param value serialized, except for ramp\n\t\tif (\n\t\t\tlodash_isString(param_data) ||\n\t\t\tlodash_isNumber(param_data) ||\n\t\t\tlodash_isArray(param_data) ||\n\t\t\tlodash_isBoolean(param_data)\n\t\t) {\n\t\t\treturn false;\n\t\t}\n\n\t\tif (lodash_isObject(param_data)) {\n\t\t\tif (Object.keys(param_data).includes('type')) {\n\t\t\t\treturn true;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t}\n\n\tfrom_data_custom(data: NodeJsonExporterData) {}\n}\n","import {BaseParamType} from '../../../params/_Base';\nimport {ComplexParamJsonExporterData} from '../export/Param';\nimport {ParamType} from '../../../poly/ParamType';\n\nexport class ParamJsonImporter<T extends BaseParamType> {\n\tconstructor(protected _param: T) {}\n\n\tprocess_data(data: ComplexParamJsonExporterData<ParamType>) {\n\t\tconst raw_input = data['raw_input'];\n\t\t// const expression = data['expression'];\n\t\t// const components = data['components'];\n\t\t// if (expression !== undefined) {\n\t\t// \tthis._param.set(expression);\n\t\t// }\n\t\tif (raw_input !== undefined) {\n\t\t\tthis._param.set(raw_input);\n\t\t}\n\n\t\t// const referenced_asset = data['referenced_asset']\n\t\t// if(referenced_asset){\n\t\t// \tthis._param.mark_as_referencing_asset(referenced_asset)\n\t\t// }\n\n\t\tthis.add_main(data);\n\t}\n\n\tadd_main(data: ComplexParamJsonExporterData<ParamType>) {}\n}\n","import {ParamJsonImporter} from '../Param';\nimport {ComplexParamJsonExporterData} from '../../export/Param';\nimport {TypedMultipleParam} from '../../../../params/_Multiple';\nimport {ParamType} from '../../../../poly/ParamType';\n\nexport class ParamMultipleJsonImporter extends ParamJsonImporter<TypedMultipleParam<ParamType>> {\n\tadd_main(data: ComplexParamJsonExporterData<ParamType>) {\n\t\t// const components = data['components'];\n\t\t// if (components) {\n\t\t// \tObject.keys(components).forEach((component_name) => {\n\t\t// \t\tconst param_name = `${this._param.name}${component_name}`;\n\t\t// \t\tconst component_param = this._param.node.params\n\t\t// \t\t\t.get(this._param.name)\n\t\t// \t\t\t?.components?.filter((c) => c.name == param_name)[0];\n\t\t// \t\tif (component_param) {\n\t\t// \t\t\tconst component_data = components[component_name];\n\t\t// \t\t\tJsonImportDispatcher.dispatch_param(component_param as FloatParam).process_data(component_data);\n\t\t// \t\t}\n\t\t// \t});\n\t\t// }\n\t}\n}\n","// import lodash_isString from 'lodash/isString';\nimport {ParamJsonImporter} from '../Param';\nimport {ComplexParamJsonExporterData} from '../../export/Param';\nimport {StringParam} from '../../../../params/String';\nimport {ParamType} from '../../../../poly/ParamType';\n\nconst LINE_BREAK_REGEXP = /\\\\n+/g;\n\nexport class ParamStringJsonImporter extends ParamJsonImporter<StringParam> {\n\tadd_main(data: ComplexParamJsonExporterData<ParamType.STRING>) {\n\t\tlet raw_input = data['raw_input'];\n\t\tif (raw_input !== undefined) {\n\t\t\t// if (lodash_isString(value)) {\n\t\t\traw_input = raw_input.replace(LINE_BREAK_REGEXP, '\\n');\n\t\t\tthis._param.set(raw_input);\n\t\t\t// }\n\t\t}\n\t}\n}\n","import {ParamJsonImporter} from '../Param';\n// import {RampValueJson} from '../../../../params/ramp/RampValue';\nimport {ComplexParamJsonExporterData} from '../../export/Param';\nimport {RampParam} from '../../../../params/Ramp';\nimport {ParamType} from '../../../../poly/ParamType';\n\nexport class ParamRampJsonImporter extends ParamJsonImporter<RampParam> {\n\tadd_main(data: ComplexParamJsonExporterData<ParamType.RAMP>) {\n\t\tconst raw_input = data['raw_input']; // as RampValueJson;\n\t\tif (raw_input) {\n\t\t\t// const ramp_value = RampValue.from_json(value);\n\t\t\tthis._param.set(raw_input);\n\t\t}\n\t}\n}\n","import {BaseNodeType} from '../../../nodes/_Base';\nimport {BaseParamType} from '../../../params/_Base';\n\nimport {NodeJsonImporter} from './Node';\n// import {BaseNodeObjJsonImporter} from './node/Obj';\n// import {BaseNodeSopSubnetworkJsonImporter} from './node/Subnetwork';\n\nimport {ParamJsonImporter} from './Param';\nimport {ParamMultipleJsonImporter} from './param/Multiple';\nimport {ParamStringJsonImporter} from './param/String';\nimport {ParamRampJsonImporter} from './param/Ramp';\n// import {TypedObjNode} from '../../../nodes/obj/_Base';\nimport {TypedMultipleParam} from '../../../params/_Multiple';\nimport {StringParam} from '../../../params/String';\nimport {RampParam} from '../../../params/Ramp';\n\nexport class JsonImportDispatcher {\n\tstatic dispatch_node(node: BaseNodeType) {\n\t\t// if (node instanceof TypedObjNode) {\n\t\t// \treturn new BaseNodeObjJsonImporter(node);\n\t\t// }\n\t\treturn new NodeJsonImporter(node);\n\t}\n\n\tstatic dispatch_param(param: BaseParamType) {\n\t\tif (param instanceof TypedMultipleParam) {\n\t\t\treturn new ParamMultipleJsonImporter(param);\n\t\t}\n\t\tif (param instanceof StringParam) {\n\t\t\treturn new ParamStringJsonImporter(param);\n\t\t}\n\t\tif (param instanceof RampParam) {\n\t\t\treturn new ParamRampJsonImporter(param);\n\t\t}\n\t\treturn new ParamJsonImporter(param);\n\t}\n}\n\n// export class CodeImporterVisitor {\n// \tstatic node(node: BaseNode): NodeCodeImporter {\n// \t\treturn new NodeCodeImporter(node);\n// \t}\n// \tstatic node_obj(node: BaseNode) {\n// \t\treturn new BaseNodeObjCodeImporter(node);\n// \t}\n// \tstatic node_sop_subnetwork(node: BaseNode) {\n// \t\treturn new BaseNodeSopSubnetworkCodeImporter(node);\n// \t}\n\n// \tstatic visit_param(param: BaseParam) {\n// \t\treturn new ParamCodeImporter(param);\n// \t}\n// \tstatic param_multiple(param: BaseParam) {\n// \t\treturn new ParamMultipleCodeImporter(param);\n// \t}\n// \tstatic param_numeric(param: BaseParam) {\n// \t\treturn new ParamNumericCodeImporter(param);\n// \t}\n// \tstatic param_operator_path(param: BaseParam) {\n// \t\treturn new ParamOperatorPathCodeImporter(param);\n// \t}\n// \tstatic param_string(param: BaseParam) {\n// \t\treturn new ParamStringCodeImporter(param);\n// \t}\n// \tstatic param_ramp(param: BaseParam) {\n// \t\treturn new ParamRampCodeImporter(param);\n// \t}\n// }\n","import {PolyScene} from '../../../scene/PolyScene';\n// import {JsonImporterVisitor} from './Visitor'\nimport {SceneJsonExporterData} from '../export/Scene';\nimport {JsonImportDispatcher} from './Dispatcher';\n\nexport class SceneJsonImporter {\n\tconstructor(private _data: SceneJsonExporterData) {}\n\n\tstatic load_data(data: SceneJsonExporterData) {\n\t\tconst importer = new SceneJsonImporter(data);\n\t\treturn importer.scene();\n\t}\n\n\tasync scene(): Promise<PolyScene> {\n\t\tconst scene = new PolyScene();\n\t\tscene.loading_controller.mark_as_loading();\n\n\t\t// scene.set_js_version(this._data['__js_version'])\n\t\tconst properties = this._data['properties'];\n\t\tif (properties) {\n\t\t\t// scene.set_name(properties['name'])\n\t\t\tscene.set_frame(properties['frame'] || 1);\n\t\t\tconst frame_range = properties['frame_range'] || [];\n\t\t\tscene.time_controller.set_frame_range(frame_range[0] || 1, frame_range[1] || 100);\n\t\t\tconst frame_range_locked = properties['frame_range_locked'];\n\t\t\tif (frame_range_locked) {\n\t\t\t\tscene.time_controller.set_frame_range_locked(frame_range_locked[0], frame_range_locked[1]);\n\t\t\t}\n\t\t\t// scene.time_controller.set_fps(properties['fps'] || 30);\n\t\t\tif (properties['master_camera_node_path']) {\n\t\t\t\tscene.cameras_controller.set_master_camera_node_path(properties['master_camera_node_path']);\n\t\t\t}\n\t\t}\n\n\t\t// we block to ensure that nodes will not run their dirty_hooks\n\t\t// which would trigger operator_path params to search for nodes that\n\t\t// may not exist yet\n\t\tscene.cooker.block();\n\n\t\tconst importer = JsonImportDispatcher.dispatch_node(scene.root);\n\t\tif (this._data['root']) {\n\t\t\timporter.process_data(this._data['root']);\n\t\t}\n\t\tif (this._data['ui']) {\n\t\t\timporter.process_ui_data(this._data['ui']);\n\t\t}\n\n\t\tawait scene.loading_controller.mark_as_loaded();\n\t\tscene.cooker.unblock();\n\t\t// DO NOT wait for cooks here,\n\t\t// as a viewer will only be created once everything has cooked\n\t\t// which would be a problem for env_map or other nodes relying on the renderer being created\n\t\t// await scene.wait_for_cooks_completed();\n\n\t\treturn scene;\n\t}\n}\n","import {Poly} from '../../Poly';\n\nexport class AllRegister {\n\tstatic async run() {\n\t\tconst {CopRegister} = await import(/* webpackChunkName: \"Cop\" */ './Cop');\n\t\tCopRegister.run(Poly.instance());\n\n\t\tconst {EventRegister} = await import(/* webpackChunkName: \"Event\" */ './Event');\n\t\tEventRegister.run(Poly.instance());\n\n\t\tconst {GlRegister} = await import(/* webpackChunkName: \"Gl\" */ './Gl');\n\t\tGlRegister.run(Poly.instance());\n\n\t\tconst {MatRegister} = await import(/* webpackChunkName: \"Mat\" */ './Mat');\n\t\tMatRegister.run(Poly.instance());\n\n\t\tconst {ObjRegister} = await import(/* webpackChunkName: \"Obj\" */ './Obj');\n\t\tObjRegister.run(Poly.instance());\n\n\t\tconst {SopRegister} = await import(/* webpackChunkName: \"Sop\" */ './Sop');\n\t\tSopRegister.run(Poly.instance());\n\t}\n}\n","import {SceneJsonImporter} from './io/json/import/Scene';\nimport {PolyScene} from './scene/PolyScene';\n\n// setTimeout(async () => {\n// \t// import {AllRegister} from './poly/registers/All';\n// \tconst {AllRegister} = await import('./poly/registers/All');\n// \tAllRegister.run();\n// }, 1000);\n\nimport {AllRegister} from './poly/registers/All';\nAllRegister.run();\n\nexport {PolyScene, SceneJsonImporter};\n\n// console.log('adding POLY to window', PolyScene);\n// (window as any).POLYGON = {PolyScene};\n// console.log((window as any).POLYGON);\n\n// import default_scene_data from '../../public/examples/scenes/default_simple.json';\n\n// export class Tester {\n// \tstatic async load_scene() {\n// \t\tconst scene = await SceneJsonImporter.load_data(default_scene_data as SceneJsonExporterData);\n\n// \t\treturn scene;\n// \t}\n// \tstatic create_scene() {\n// \t\tconst scene = new PolyScene();\n// \t\tscene.root.create_node('ambient_light');\n\n// \t\tscene.loading_controller.mark_as_loaded();\n\n// \t\tconst perspective_camera1 = scene.root.create_node('perspective_camera');\n// \t\tscene.cameras_controller.set_master_camera_node_path(perspective_camera1.full_path());\n// \t\tperspective_camera1.p.t.z.set(10);\n\n// \t\tconst geo1 = scene.root.create_node('geo');\n// \t\tgeo1.flags.display.set(true);\n// \t\tconst box1 = geo1.create_node('box');\n// \t\tbox1.flags.display.set(true);\n// \t\tgeo1.p.r.y.set('$F+20');\n\n// \t\treturn scene;\n// \t}\n\n// \tstatic async test_save_and_load(scene: PolyScene) {\n// \t\tconst data = new SceneJsonExporter(scene).data();\n// \t\tconsole.log(JSON.stringify(data));\n// \t\tconst scene2 = await SceneJsonImporter.load_data(data);\n// \t\tconst data2 = new SceneJsonExporter(scene2).data();\n// \t\tconsole.log(JSON.stringify(data2));\n// \t}\n// }\n\n// const stylesheet = document.createElement('style');\n// stylesheet.innerText = 'html, body, canvas, .canvas_container {height: 100%; margin: 0px;} canvas {display: block;}';\n// document.body.appendChild(stylesheet);\n// const container = document.createElement('div');\n// container.classList.add('canvas_container');\n// document.body.appendChild(container);\n\n// Tester.load_scene().then((scene) => {\n// \t(window as any).scene = scene;\n// \tscene.cameras_controller.master_camera_node?.create_viewer(container);\n// \tscene.play();\n// });\n\n// Tester.test_save_and_load(scene);\n"],"sourceRoot":""}