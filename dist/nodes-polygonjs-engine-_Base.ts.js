(window.webpackJsonp=window.webpackJsonp||[]).push([[3],{100:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=n(55),i=n(9),a=n(638),s=n(31),_=n(97),u=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.container_controller=new _.TypedContainerController(t,a.MaterialContainer),t}return o.__extends(t,e),t.node_context=function(){return s.NodeContext.MAT},t.prototype.initialize_node=function(){this.name_controller.add_post_set_full_path_hook(this.set_material_name.bind(this))},t.prototype.set_material_name=function(){this._material&&(this._material.name=this.full_path())},Object.defineProperty(t.prototype,"material",{get:function(){return this._material},enumerable:!0,configurable:!0}),t.prototype.set_material=function(e){this.set_container(e)},t.prototype.add_render_hook=function(e){},t}(r.TypedNode);t.TypedMatNode=u;var l=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t.prototype.create_material=function(){return new i.Material},t}(u);t.BaseMatNodeClass=l},137:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=o.__importDefault(n(304)),i=n(55),a=n(236),s=n(627),_=n(171),u=n(31),l=n(48),c=n(113),p=n(89),d=n(628),f=n(135),h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t._definitions=new Map,t._lines=new Map,t._param_configs=[],t}return o.__extends(t,e),t.node_context=function(){return u.NodeContext.GL},t.prototype.initialize_base_node=function(){this.io.inputs.set_depends_on_inputs(!1),this.ui_data.set_layout_horizontal(),this.io.outputs.set_named_output_connection_points([]),this.add_post_dirty_hook(this._set_mat_to_recompile.bind(this))},t.prototype._set_mat_to_recompile=function(){var e;null===(e=this.material_node)||void 0===e||e.set_dirty(this)},t.prototype.post_create_params=function(){this.create_inputs_from_params()},t.prototype.create_inputs_from_params=function(){var e=this,t=[],n=this.inputless_params_names();this.params.names.forEach((function(o){var i=!0;if(n.length>0&&r.default(n,o)&&(i=!1),i){var a=e.params.get(o);if(a){var s=p.ParamTypeToConnectionPointTypeMap[a.type];if(s){var _=new c.TypedNamedConnectionPoint(a.name,s);t.push(_)}}}})),this.io.inputs.set_named_input_connection_points(t)},t.prototype.inputless_params_names=function(){return[]},t.prototype.gl_var_name=function(e){return"v_POLYGON_"+this.name+"_"+e},t.prototype.variable_for_input=function(e){var t,n=this.io.inputs.get_input_index(e),o=this.io.connections.input_connection(n);if(o){var r=o.node_src,i=r.io.outputs.named_output_connection_points[o.output_index].name;return r.gl_var_name(i)}return _.ThreeToGl.any(null===(t=this.params.get(e))||void 0===t?void 0:t.value)},t.prototype.set_lines=function(){},t.prototype.set_param_configs=function(){},t.prototype.reset_param_configs=function(){this._param_configs=[]},t.prototype.add_param_config=function(e,t,n,o){var r=new s.ParamConfig(e,t,n,o);this._param_configs.push(r)},t.prototype.param_configs=function(){return this._param_configs},t.prototype.reset_code=function(){this.reset_param_configs(),this.reset_lines()},t.prototype.shader_configs=function(){var e;return(null===(e=this.assembler)||void 0===e?void 0:e.shader_configs)||[]},t.prototype.shader_config=function(e){var t;return null===(t=this.assembler)||void 0===t?void 0:t.shader_config(e)},t.prototype.shader_names=function(){var e;return(null===(e=this.assembler)||void 0===e?void 0:e.shader_names)||[]},t.prototype.reset_lines=function(){this._definitions=new Map,this._lines=new Map},t.prototype.set_shader_name=function(e){this._shader_name=e},Object.defineProperty(t.prototype,"shader_name",{get:function(){return this._shader_name},enumerable:!0,configurable:!0}),t.prototype.set_definitions=function(e,t){(t=t||this._shader_name)&&this._definitions.set(t,e)},t.prototype.add_definitions=function(e,t){(t=t||this._shader_name)&&f.MapUtils.concat_on_array_at_entry(this._definitions,t,e)},t.prototype.set_body_lines=function(e,t){if(t=t||this._shader_name){var n=this._lines.get(t),o=null!=n;(n=n||new Map).set(a.LineType.BODY,e),o||this._lines.set(t,n)}},t.prototype.add_body_lines=function(e,t){if(t=t||this._shader_name){var n=this._lines.get(t),o=null!=n;(n=n||new Map).set(a.LineType.BODY,e),f.MapUtils.concat_on_array_at_entry(n,a.LineType.BODY,e),o||this._lines.set(t,n)}},t.prototype.lines=function(e,t){var n=this._lines.get(e);if(n)return n.get(t)},t.prototype.all_lines=function(){return this._lines},t.prototype.definitions=function(e){return this._definitions.get(e)},t.prototype.make_output_nodes_dirty=function(){var e=this;this.io.connections.output_connections().map((function(e){return e.node_dest})).forEach((function(t){t.set_dirty(e)}))},t.prototype.create_spare_parameters=function(){var e=this,t=new Map;this.params.spare_names.forEach((function(n){var o=e.params.get(n);o&&(t.set(n,o.value),e.params.delete_param(n))})),this.io.inputs.named_input_connection_points.forEach((function(n){var o=n.name,r=t.get(o);if(null!=r){var i=n.param_type,a=d.ParamValueToDefaultConverter.from_value(i,r);if(null==a){var s=e.gl_input_default_value(o);null!=s&&(a=s)}null==a&&n.init_value&&(a=n.init_value),e.add_param(i,o,a,{spare:!0,cook:!0})}})),this.scene.loading_controller.is_loading||this.emit(l.NodeEvent.PARAMS_UPDATED)},t.prototype.gl_input_default_value=function(e){return null},t.prototype.set_assembler=function(e){this._assembler=e},Object.defineProperty(t.prototype,"assembler",{get:function(){return this._assembler},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"material_node",{get:function(){var e;if(this.parent)return this.parent.type==u.NodeContext.GL?null===(e=this.parent)||void 0===e?void 0:e.material_node:this.parent},enumerable:!0,configurable:!0}),t}(i.TypedNode);t.TypedGlNode=h;var m=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t}(h);t.BaseGlNodeClass=m},14:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(2),i=r.__importDefault(n(87)),a=r.__importDefault(n(134)),s=n(55),_=n(27),u=n(333),l=n(337),c=n(680),p=n(97),d=n(31),f=n(140);!function(e){e.FROM_SET_CORE_GROUP="from set_core_group",e.FROM_SET_GROUP="from set_group",e.FROM_SET_OBJECTS="from set_objects",e.FROM_SET_OBJECT="from set_object",e.FROM_SET_GEOMETRIES="from set_geometries",e.FROM_SET_GEOMETRY="from set_geometry"}(o||(o={}));var h=["input geometry","input geometry","input geometry","input geometry"],m=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.container_controller=new p.TypedContainerController(t,c.GeometryContainer),t.flags=new f.FlagsControllerDB(t),t}return r.__extends(t,e),t.node_context=function(){return d.NodeContext.SOP},t.displayed_input_names=function(){return h},t.prototype.initialize_base_node=function(){var e=this;this.flags.display&&(this.flags.display.set(!1),this.flags.display.add_hook((function(){if(e.flags.display.active){var t=e.parent;t&&t.display_node_controller.set_display_node(e)}})))},t.prototype.set_core_group=function(e){for(var t=0,n=e.objects();t<n.length;t++){var r=n[t];this._set_object_attributes(r)}this.set_container(e,o.FROM_SET_CORE_GROUP)},t.prototype.set_object=function(e){this._set_object_attributes(e),this.set_container_objects([e],o.FROM_SET_OBJECT)},t.prototype.set_objects=function(e){for(var t=0,n=e;t<n.length;t++){var r=n[t];this._set_object_attributes(r)}this.set_container_objects(e,o.FROM_SET_OBJECTS)},t.prototype.set_geometry=function(e,t){var n=this.create_object(e,t);this.set_container_objects([n],o.FROM_SET_GEOMETRY)},t.prototype.set_geometries=function(e,t){var n,r=this,i=[];e.forEach((function(e){n=r.create_object(e,t),r._set_object_attributes(n),i.push(n)})),this.set_container_objects(i,o.FROM_SET_GEOMETRIES)},t.prototype.set_container_objects=function(e,t){var n=this.container_controller.container.core_content()||new u.CoreGroup;n.set_objects(e),n.touch(),this.set_container(n)},t.prototype.create_object=function(e,t){if(!e.index){var n=e.getAttribute("position").array;e.setIndex(i.default(n.length/3))}null==t&&(t=_.CoreConstant.OBJECT_TYPE.MESH);var o=new(0,_.CoreConstant.CONSTRUCTORS_BY_NAME[t])(e,_.CoreConstant.MATERIALS[t].clone());return o.castShadow=!0,o.receiveShadow=!0,o.frustumCulled=!1,o},t.prototype._set_object_attributes=function(e){var t=e.material;if(t){if(!this.scene)throw console.log("no scene"),"no scene";var n=l.CoreMaterial.node(this.scene,t);n&&n.add_render_hook(e)}},t.prototype._add_index=function(e){var t=e.getAttribute("position").array.length/3,n=[];a.default(t,(function(e){return n.push(e)})),e.setIndex(n)},t}(s.TypedNode);t.TypedSopNode=m;var y=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(m);t.BaseSopNodeClass=y},233:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=n(55),i=n(600),a=n(97),s=n(31),_=function(e){function t(t){var n=e.call(this,t,"BaseCopNode")||this;return n.container_controller=new a.TypedContainerController(n,i.TextureContainer),n}return o.__extends(t,e),t.node_context=function(){return s.NodeContext.COP},t.prototype.set_texture=function(e){this.set_container(e)},t}(r.TypedNode);t.TypedCopNode=_;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t}(_);t.BaseCopNodeClass=u},503:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=n(55),i=n(31),a=n(97),s=n(590),_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.container_controller=new a.TypedContainerController(t,s.ManagerContainer),t}return o.__extends(t,e),t.node_context=function(){return i.NodeContext.MANAGER},t}(r.TypedNode);t.TypedBaseManagerNode=_;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t}(_);t.BaseManagerNodeClass=u},55:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=n(61),i=n(505),a=n(506),s=n(509),_=n(511),u=n(535),l=n(97),c=n(536),p=n(537),d=n(223),f=n(549),h=n(306),m=n(580),y=n(581),b=n(582),g=o.__importDefault(n(587)),v=n(589),T=n(99),C=function(e){function t(t,n){void 0===n&&(n="BaseNode");var o=e.call(this,t,n)||this;return o.container_controller=new l.TypedContainerController(o,T.BaseContainer),o.pv=new m.ParamsValueAccessor(o),o.p=new v.ParamsAccessor(o),o._initialized=!1,o}return o.__extends(t,e),Object.defineProperty(t.prototype,"parent_controller",{get:function(){return this._parent_controller=this._parent_controller||new s.HierarchyParentController(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"children_controller",{get:function(){return this._children_controller=this._children_controller||new _.HierarchyChildrenController(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"selection",{get:function(){return this._selection=this._selection||new g.default(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"ui_data",{get:function(){return this._ui_data=this._ui_data||new i.UIData(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"dependencies_controller",{get:function(){return this._dependencies_controller=this._dependencies_controller||new p.DependenciesController(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"states",{get:function(){return this._states=this._states||new a.StatesController(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"lifecycle",{get:function(){return this._lifecycle=this._lifecycle||new u.LifeCycleController(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"serializer",{get:function(){return this._serializer=this._serializer||new f.NodeSerializer(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"cook_controller",{get:function(){return this._cook_controller=this._cook_controller||new c.CookController(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"io",{get:function(){return this._io=this._io||new b.IOController(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"name_controller",{get:function(){return this._name_controller=this._name_controller||new d.NameController(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"params",{get:function(){return this._params_controller=this._params_controller||new h.ParamsController(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"processing_context",{get:function(){return this._processing_context=this._processing_context||new y.ProcessingContext(this)},enumerable:!0,configurable:!0}),t.prototype.initialize_base_and_node=function(){this._initialized?console.warn("node already initialized"):(this.initialize_base_node(),this.initialize_node(),this._initialized=!0)},t.prototype.initialize_base_node=function(){},t.prototype.initialize_node=function(){},t.type=function(){throw"type to be overriden"},Object.defineProperty(t.prototype,"type",{get:function(){return this.constructor.type()},enumerable:!0,configurable:!0}),t.node_context=function(){throw"requires override"},t.prototype.node_context=function(){return this.constructor.node_context()},t.required_three_imports=function(){return[]},t.required_imports=function(){var e=this.required_three_imports();return e?e.map((function(e){return"three/examples/jsm/"+e})):[]},t.prototype.required_imports=function(){return this.constructor.required_imports()},t.require_webgl2=function(){return!1},t.prototype.require_webgl2=function(){return this.constructor.require_webgl2()},t.prototype.set_parent=function(e){this.parent_controller.set_parent(e)},Object.defineProperty(t.prototype,"parent",{get:function(){return this.parent_controller.parent},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"root",{get:function(){return this._scene.root},enumerable:!0,configurable:!0}),t.prototype.full_path=function(){return this.parent_controller.full_path()},t.prototype.create_params=function(){},t.prototype.add_param=function(e,t,n,o){var r;return null===(r=this._params_controller)||void 0===r?void 0:r.add_param(e,t,n,o)},t.prototype.cook=function(e){return null},t.prototype.request_container=function(){return this.container_controller.request_container()},t.prototype.set_container=function(e,t){void 0===t&&(t=null),this.container_controller.container.set_content(e),null!=e&&(e.name||(e.name=this.full_path()),e.node||(e.node=this)),this.cook_controller.end_cook(t)},t.prototype.create_node=function(e){return this.children_controller.create_node(e)},t.prototype.remove_node=function(e){return this.children_controller.remove_node(e)},t.prototype.children=function(){return this.children_controller.children()},t.prototype.node=function(e){return this.children_controller.find_node(e)},t.prototype.nodes_by_type=function(e){return this.children_controller.nodes_by_type(e)},t.prototype.set_input=function(e,t,n){void 0===n&&(n=0),this.io.inputs.set_input(e,t,n)},t.prototype.emit=function(e,t){void 0===t&&(t=null),this.scene.events_controller.dispatch(this,e,t)},t.prototype.to_json=function(e){return void 0===e&&(e=!1),this.serializer.to_json(e)},t}(r.CoreGraphNode);t.TypedNode=C;var w=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t}(C);t.BaseNodeClass=w},624:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=n(24),i=n(3),a=o.__importDefault(n(134)),s=n(236),_=n(318),u=n(319),l=n(171),c=n(236),p=n(320),d=n(629),f=n(136),h=n(21),m=n(113),y=n(89),b=new Map([[f.ShaderName.VERTEX,"#include <common>"],[f.ShaderName.FRAGMENT,"#include <common>"]]),g=new Map([[f.ShaderName.VERTEX,"#include <color_vertex>"],[f.ShaderName.FRAGMENT,"vec4 diffuseColor = vec4( diffuse, opacity );"]]),v=new Map([[f.ShaderName.VERTEX,["#include <begin_vertex>","#include <beginnormal_vertex>"]],[f.ShaderName.FRAGMENT,[]]]),T=function(e){function t(t){var n=e.call(this)||this;return n._gl_parent_node=t,n._shaders_by_name=new Map,n._lines=new Map,n._root_nodes=[],n._leaf_nodes=[],n._frame_dependent=!1,n._resolution_dependent=!1,n}return o.__extends(t,e),t.prototype.compile=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){return[2]}))}))},Object.defineProperty(t.prototype,"material",{get:function(){return this._material=this._material||this._create_material()},enumerable:!0,configurable:!0}),t.prototype.get_material=function(){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(e){switch(e.label){case 0:return this._material=this._material||this._create_material(),[4,this._update_material()];case 1:return e.sent(),[2,this._material]}}))}))},t.prototype._template_shader_for_shader_name=function(e){var t,n;switch(e){case f.ShaderName.VERTEX:return null===(t=this._template_shader)||void 0===t?void 0:t.vertexShader;case f.ShaderName.FRAGMENT:return null===(n=this._template_shader)||void 0===n?void 0:n.fragmentShader}},Object.defineProperty(t.prototype,"globals_handler",{get:function(){return this._gl_parent_node.assembler_controller.globals_handler},enumerable:!0,configurable:!0}),t.prototype.shaders_by_name=function(){return this._shaders_by_name},t.prototype._create_material=function(){},t.prototype._build_lines=function(){for(var e=0,t=this.shader_names;e<t.length;e++){var n=t[e],o=this._template_shader_for_shader_name(n);o&&this._replace_template(o,n)}},t.prototype.set_root_nodes=function(e){this._root_nodes=e},Object.defineProperty(t.prototype,"_template_shader",{get:function(){},enumerable:!0,configurable:!0}),t.prototype._update_material=function(){return o.__awaiter(this,void 0,void 0,(function(){var e,t,n,r,i,a,s,_,u,l,c,p,d,h;return o.__generator(this,(function(o){switch(o.label){case 0:if(!this.material||!this._material)return[2];if(!(e=this._template_shader))return[2];for(this._lines=new Map,t=0,n=this.shader_names;t<n.length;t++)c=n[t],(r=this._template_shader_for_shader_name(c))&&this._lines.set(c,r.split("\n"));return this._root_nodes.length>0?[4,this.build_code_from_nodes(this._root_nodes)]:[3,2];case 1:o.sent(),this._material.extensions={derivatives:!0},this._build_lines(),o.label=2;case 2:for(i=this.build_uniforms(e.uniforms),this.material.uniforms=this.material.uniforms||{},a=0,s=Object.keys(i);a<s.length;a++)_=s[a],this.material.uniforms[_]=i[_];for(u=0,l=this.shader_names;u<l.length;u++)if(c=l[u],p=this._lines.get(c))switch(d=p.join("\n"),c){case f.ShaderName.VERTEX:this._material.vertexShader=d;break;case f.ShaderName.FRAGMENT:this._material.fragmentShader=d}return h=this._gl_parent_node.scene,this.frame_dependent()?h.uniforms_controller.add_frame_dependent_uniform_owner(this._material.uuid,this._material.uniforms):h.uniforms_controller.remove_frame_dependent_uniform_owner(this._material.uuid),this.resolution_dependent()?h.uniforms_controller.add_resolution_dependent_uniform_owner(this._material.uuid,this._material.uniforms):h.uniforms_controller.remove_resolution_dependent_uniform_owner(this._material.uuid),[2]}}))}))},t.prototype.build_uniforms=function(e){for(var t=e?r.UniformsUtils.clone(e):{},n=0,o=this.param_configs();n<o.length;n++){var a=o[n];t[a.uniform_name]=a.uniform}return this.frame_dependent()&&(t.frame={value:this._gl_parent_node.scene.frame}),this.resolution_dependent()&&(t.resolution={value:new i.Vector2(1e3,1e3)}),t},t.prototype.root_nodes_by_shader_name=function(e){for(var t=[],n=0,o=this._root_nodes;n<o.length;n++){var r=o[n];switch(r.type){case"output":t.push(r)}}return t},t.prototype.leaf_nodes_by_shader_name=function(e){for(var t=[],n=0,o=this._leaf_nodes;n<o.length;n++){var r=o[n];switch(r.type){case"globals":t.push(r)}}return t},t.prototype.set_node_lines_globals=function(e,t){},t.prototype.set_node_lines_output=function(e,t){},t.prototype.set_node_lines_attribute=function(e,t){},Object.defineProperty(t.prototype,"code_builder",{get:function(){return this._code_builder=this._code_builder||new c.CodeBuilder(this,this._gl_parent_node)},enumerable:!0,configurable:!0}),t.prototype.build_code_from_nodes=function(e){return o.__awaiter(this,void 0,void 0,(function(){return o.__generator(this,(function(t){switch(t.label){case 0:return[4,this.code_builder.build_from_nodes(e)];case 1:return t.sent(),[2]}}))}))},t.prototype.allow_new_param_configs=function(){this.code_builder.allow_new_param_configs()},t.prototype.disallow_new_param_configs=function(){this.code_builder.disallow_new_param_configs()},t.prototype.builder_param_configs=function(){return this.code_builder.param_configs()},t.prototype.builder_lines=function(e,t){return this.code_builder.lines(e,t)},t.prototype.all_builder_lines=function(){return this.code_builder.all_lines()},t.prototype.param_configs=function(){return(this._param_config_owner||this.code_builder).param_configs()},t.prototype.set_param_configs_owner=function(e){this._param_config_owner=e,this._param_config_owner?this.code_builder.disallow_new_param_configs():this.code_builder.allow_new_param_configs()},t.add_output_params=function(e){e.params.add_param(h.ParamType.VECTOR3,"position",[0,0,0],{hidden:!0}),e.params.add_param(h.ParamType.VECTOR3,"normal",[0,0,0],{hidden:!0}),e.params.add_param(h.ParamType.COLOR,"color",[1,1,1],{hidden:!0}),e.params.add_param(h.ParamType.FLOAT,"alpha",1,{hidden:!0}),e.params.add_param(h.ParamType.VECTOR2,"uv",[0,0],{hidden:!0})},t.prototype.add_output_params=function(e){t.add_output_params(e)},t.create_globals_node_output_connections=function(){return[new m.TypedNamedConnectionPoint("position",y.ConnectionPointType.VEC3),new m.TypedNamedConnectionPoint("normal",y.ConnectionPointType.VEC3),new m.TypedNamedConnectionPoint("color",y.ConnectionPointType.VEC3),new m.TypedNamedConnectionPoint("uv",y.ConnectionPointType.VEC2),new m.TypedNamedConnectionPoint("gl_FragCoord",y.ConnectionPointType.VEC4),new m.TypedNamedConnectionPoint("resolution",y.ConnectionPointType.VEC2),new m.TypedNamedConnectionPoint("frame",y.ConnectionPointType.FLOAT)]},t.prototype.create_globals_node_output_connections=function(){return t.create_globals_node_output_connections()},t.prototype.add_globals_params=function(e){e.io.outputs.set_named_output_connection_points(this.create_globals_node_output_connections())},t.prototype.allow_attribute_exports=function(){return!1},t.prototype.reset_configs=function(){this._reset_shader_configs(),this._reset_variable_configs(),this._reset_frame_dependency(),this._reset_resolution_dependency()},Object.defineProperty(t.prototype,"shader_configs",{get:function(){return this._shader_configs=this._shader_configs||this.create_shader_configs()},enumerable:!0,configurable:!0}),t.prototype.set_shader_configs=function(e){this._shader_configs=e},Object.defineProperty(t.prototype,"shader_names",{get:function(){var e;return(null===(e=this.shader_configs)||void 0===e?void 0:e.map((function(e){return e.name()})))||[]},enumerable:!0,configurable:!0}),t.prototype._reset_shader_configs=function(){this._shader_configs=void 0},t.prototype.create_shader_configs=function(){return[new _.ShaderConfig(f.ShaderName.VERTEX,["position","normal","uv"],[]),new _.ShaderConfig(f.ShaderName.FRAGMENT,["color","alpha"],[f.ShaderName.VERTEX])]},t.prototype.shader_config=function(e){var t;return null===(t=this.shader_configs)||void 0===t?void 0:t.filter((function(t){return t.name()==e}))[0]},t.prototype.variable_configs=function(){return this._variable_configs=this._variable_configs||this.create_variable_configs()},t.prototype.set_variable_configs=function(e){this._variable_configs=e},t.prototype.variable_config=function(e){return this.variable_configs().filter((function(t){return t.name()==e}))[0]},t.create_variable_configs=function(){return[new u.VariableConfig("position",{default_from_attribute:!0,prefix:"vec3 transformed = "}),new u.VariableConfig("normal",{default_from_attribute:!0,prefix:"vec3 objectNormal = "}),new u.VariableConfig("color",{prefix:"diffuseColor.xyz = "}),new u.VariableConfig("alpha",{prefix:"diffuseColor.a = "}),new u.VariableConfig("uv",{prefix:"vUv = ",if:p.GlobalsGeometryHandler.IF_RULE.uv})]},t.prototype.create_variable_configs=function(){return t.create_variable_configs()},t.prototype._reset_variable_configs=function(){this._variable_configs=void 0,this.variable_configs()},t.prototype.input_names_for_shader_name=function(e,t){var n;return(null===(n=this.shader_config(t))||void 0===n?void 0:n.input_names())||[]},t.prototype._reset_frame_dependency=function(){this._frame_dependent=!1},t.prototype.set_frame_dependent=function(){this._frame_dependent=!0},t.prototype.frame_dependent=function(){return this._frame_dependent},t.prototype._reset_resolution_dependency=function(){this._resolution_dependent=!1},t.prototype.set_resolution_dependent=function(){this._resolution_dependent=!0},t.prototype.resolution_dependent=function(){return this._resolution_dependent},t.prototype.insert_define_after=function(e){return b.get(e)},t.prototype.insert_body_after=function(e){return g.get(e)},t.prototype.lines_to_remove=function(e){return v.get(e)},t.prototype._replace_template=function(e,t){for(var n=this.builder_lines(t,s.LineType.FUNCTION_DECLARATION),o=this.builder_lines(t,s.LineType.DEFINE),r=n.concat(o),i=this.builder_lines(t,s.LineType.BODY),a=e.split("\n"),_=this._gl_parent_node.scene,u=["#define FPS "+l.ThreeToGl.float(_.time_controller.fps),"#define TIME_INCREMENT (1.0/"+l.ThreeToGl.float(_.time_controller.fps)+")","#define FRAME_RANGE_START "+l.ThreeToGl.float(_.time_controller.frame_range[0]),"#define FRAME_RANGE_END "+l.ThreeToGl.float(_.time_controller.frame_range[1])],c=this.insert_define_after(t),p=this.insert_body_after(t),d=this.lines_to_remove(t),f=!1,h=!1,m=0,y=a;m<y.length;m++){var b=y[m];1==f&&(this._insert_lines(u,r),f=!1),1==h&&(this._insert_lines(u,i),h=!1);var g=!1;if(d)for(var v=0,T=d;v<T.length;v++){var C=T[v];b.indexOf(C)>=0&&(g=!0)}g||u.push(b),c&&b.indexOf(c)>=0&&(f=!0),p&&b.indexOf(p)>=0&&(h=!0)}this._lines.set(t,u)},t.prototype._insert_lines=function(e,t){t.length>0&&(a.default(3,(function(){return e.push("")})),t.forEach((function(t){e.push(t)})),a.default(3,(function(){return e.push("")})))},t}(d.TypedAssembler);t.BaseGlShaderAssembler=T},626:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=function(){function e(){this._id=e.__next_id++}return e.prototype.id=function(){return this._id},e.prototype.handle_globals_node=function(e,t,n,o,r,i,a){},e.prototype.read_attribute=function(e,t,n,o){},e.__next_id=0,e}();t.GlobalsBaseController=o},661:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=n(2),r=n(55),i=n(662),a=n(31),s=n(97),_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.container_controller=new s.TypedContainerController(t,i.EventContainer),t}return o.__extends(t,e),t.node_context=function(){return a.NodeContext.EVENT},t.prototype.initialize_base_node=function(){this.add_post_dirty_hook(this._eval_all_params_on_dirty.bind(this))},t.prototype._eval_all_params_on_dirty=function(){this.params.eval_all()},t}(r.TypedNode);t.TypedEventNode=_;var u=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return o.__extends(t,e),t}(_);t.BaseEventNodeClass=u},90:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o,r=n(2),i=n(10),a=n(55),s=n(643),_=n(644),u=n(645),l=n(31),c=n(97),p=["parent object","parent object","parent object","parent object"];!function(e){e[e.MANAGER=0]="MANAGER",e[e.FOG=1]="FOG",e[e.CAMERA=2]="CAMERA",e[e.LIGHT=3]="LIGHT",e[e.EVENT=4]="EVENT",e[e.MAT=5]="MAT"}(o=t.ObjNodeRenderOrder||(t.ObjNodeRenderOrder={}));var d=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.container_controller=new c.TypedContainerController(t,s.ObjectContainer),t.render_order=o.MANAGER,t.add_to_hierarchy=!0,t._used_in_scene=!1,t}return r.__extends(t,e),t.node_context=function(){return l.NodeContext.OBJ},t.displayed_input_names=function(){return p},Object.defineProperty(t.prototype,"look_at_controller",{get:function(){return this._look_at_controller=this._look_at_controller||new _.LookAtController(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"transform_controller",{get:function(){return this._transform_controller=this._transform_controller||new u.TransformController(this)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"used_in_scene",{get:function(){return this._used_in_scene},enumerable:!0,configurable:!0}),t.prototype.set_used_in_scene=function(e){if(this._used_in_scene=e,!this.scene.loading_controller.is_loading){var t=this.parent;t&&t.update_object(this)}},t.prototype.initialize_base_node=function(){this._object=this._create_object_with_attributes(),this.name_controller.add_post_set_full_path_hook(this.set_group_name.bind(this))},Object.defineProperty(t.prototype,"object",{get:function(){return this._object},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"group",{get:function(){return this.object},enumerable:!0,configurable:!0}),t.prototype._create_object_with_attributes=function(){var e=this.create_object();return null!=e&&(e.name=this.name,e.node=this),e},t.prototype.set_group_name=function(){var e=this.group;e&&(e.name=this.full_path())},t.prototype.create_object=function(){return new i.Object3D},t.prototype.request_display_node=function(){},t.prototype.is_display_node_cooking=function(){return!1},t.prototype.is_displayed=function(){var e,t;return(null===(t=null===(e=this.flags)||void 0===e?void 0:e.display)||void 0===t?void 0:t.active)||!1},t}(a.TypedNode);t.TypedObjNode=d;var f=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return r.__extends(t,e),t}(d);t.BaseObjNodeclass=f}}]);