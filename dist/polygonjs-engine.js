window.POLY=function(e){function t(t){for(var r,i,a=t[0],_=t[1],c=t[2],u=0,d=[];u<a.length;u++)i=a[u],Object.prototype.hasOwnProperty.call(s,i)&&s[i]&&d.push(s[i][0]),s[i]=0;for(r in _)Object.prototype.hasOwnProperty.call(_,r)&&(e[r]=_[r]);for(l&&l(t);d.length;)d.shift()();return o.push.apply(o,c||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,a=1;a<n.length;a++){var _=n[a];0!==s[_]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},s={1:0},o=[];function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var a=window.webpackJsonpPOLY=window.webpackJsonpPOLY||[],_=a.push.bind(a);a.push=t,a=a.slice();for(var c=0;c<a.length;c++)t(a[c]);var l=_;return o.push([414,2,0,3]),n()}([,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(24),s=n(128);class o{constructor(e,t,n){this.type=e,this.init_value=t,this.options=n}}t.ParamTemplate=o;t.ParamConfig=class{static BUTTON(e,t){return new o(r.ParamType.BUTTON,e,t)}static BOOLEAN(e,t){return new o(r.ParamType.BOOLEAN,e,t)}static COLOR(e,t){return new o(r.ParamType.COLOR,e,t)}static FLOAT(e,t){return new o(r.ParamType.FLOAT,e,t)}static FOLDER(e=null,t){return new o(r.ParamType.FOLDER,e,t)}static INTEGER(e,t){return new o(r.ParamType.INTEGER,e,t)}static OPERATOR_PATH(e,t){return new o(r.ParamType.OPERATOR_PATH,e,t)}static RAMP(e=s.RampParam.DEFAULT_VALUE,t){return new o(r.ParamType.RAMP,e,t)}static SEPARATOR(e=null,t){return new o(r.ParamType.SEPARATOR,e,t)}static STRING(e="",t){return new o(r.ParamType.STRING,e,t)}static VECTOR2(e,t){return new o(r.ParamType.VECTOR2,e,t)}static VECTOR3(e,t){return new o(r.ParamType.VECTOR3,e,t)}static VECTOR4(e,t){return new o(r.ParamType.VECTOR4,e,t)}};t.NodeParamsConfig=class{}},,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=r.__importDefault(n(81)),o=r.__importDefault(n(208)),i=n(90),a=n(35),_=n(378),c=n(162),l=n(833),u=n(113),d=n(27),h=n(94);var p;!function(e){e.FROM_SET_CORE_GROUP="from set_core_group",e.FROM_SET_GROUP="from set_group",e.FROM_SET_OBJECTS="from set_objects",e.FROM_SET_OBJECT="from set_object",e.FROM_SET_GEOMETRIES="from set_geometries",e.FROM_SET_GEOMETRY="from set_geometry"}(p||(p={}));const m=["input geometry","input geometry","input geometry","input geometry"];class f extends i.TypedNode{constructor(){super(...arguments),this.container_controller=new u.TypedContainerController(this,l.GeometryContainer),this.flags=new h.FlagsControllerDB(this)}static node_context(){return d.NodeContext.SOP}static displayed_input_names(){return m}initialize_base_node(){this.flags.display&&(this.flags.display.set(!1),this.flags.display.add_hook(()=>{if(this.flags.display.active){const e=this.parent;e&&e.display_node_controller&&e.display_node_controller.set_display_node(this)}})),this.io.outputs.set_has_one_output()}set_core_group(e){const t=e.objects();for(let e of t)this._set_object_attributes(e);this.set_container(e,p.FROM_SET_CORE_GROUP)}set_object(e){this._set_object_attributes(e),this.set_container_objects([e],p.FROM_SET_OBJECT)}set_objects(e){for(let t of e)this._set_object_attributes(t);this.set_container_objects(e,p.FROM_SET_OBJECTS)}set_geometry(e,t){const n=this.create_object(e,t);this.set_container_objects([n],p.FROM_SET_GEOMETRY)}set_geometries(e,t){const n=[];let r;e.forEach(e=>{r=this.create_object(e,t),this._set_object_attributes(r),n.push(r)}),this.set_container_objects(n,p.FROM_SET_GEOMETRIES)}set_container_objects(e,t){const n=this.container_controller.container.core_content()||new _.CoreGroup;n.set_objects(e),n.touch(),this.set_container(n)}create_object(e,t){if(!e.index){const t=e.getAttribute("position").array;e.setIndex(s.default(t.length/3))}null==t&&(t=a.CoreConstant.OBJECT_TYPE.MESH);const n=new(0,a.CoreConstant.CONSTRUCTORS_BY_NAME[t])(e,a.CoreConstant.MATERIALS[t].clone());return n.castShadow=!0,n.receiveShadow=!0,n.frustumCulled=!1,n}_set_object_attributes(e){const t=e.material;if(t){if(!this.scene)throw console.log("no scene"),"no scene";const n=c.CoreMaterial.node(this.scene,t);n&&n.add_render_hook(e)}}_add_index(e){const t=e.getAttribute("position").array.length/3,n=[];o.default(t,e=>n.push(e)),e.setIndex(n)}}t.TypedSopNode=f;t.BaseSopNodeClass=class extends f{}},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(24),s=n(128);var o;!function(e){e.BOOL="bool",e.INT="int",e.FLOAT="float",e.VEC2="vec2",e.VEC3="vec3",e.VEC4="vec4",e.SAMPLER_2D="sampler2D"}(o=t.ConnectionPointType||(t.ConnectionPointType={})),t.ConnectionPointTypes=[o.BOOL,o.INT,o.FLOAT,o.VEC2,o.VEC3,o.VEC4],t.ConnectionPointTypeToParamTypeMap={[o.BOOL]:r.ParamType.BOOLEAN,[o.INT]:r.ParamType.INTEGER,[o.FLOAT]:r.ParamType.FLOAT,[o.VEC2]:r.ParamType.VECTOR2,[o.VEC3]:r.ParamType.VECTOR3,[o.VEC4]:r.ParamType.VECTOR4,[o.SAMPLER_2D]:r.ParamType.RAMP},t.ParamTypeToConnectionPointTypeMap={[r.ParamType.BOOLEAN]:o.BOOL,[r.ParamType.COLOR]:o.VEC3,[r.ParamType.INTEGER]:o.INT,[r.ParamType.FLOAT]:o.FLOAT,[r.ParamType.FOLDER]:void 0,[r.ParamType.VECTOR2]:o.VEC2,[r.ParamType.VECTOR3]:o.VEC3,[r.ParamType.VECTOR4]:o.VEC4,[r.ParamType.BUTTON]:void 0,[r.ParamType.OPERATOR_PATH]:void 0,[r.ParamType.RAMP]:void 0,[r.ParamType.SEPARATOR]:void 0,[r.ParamType.STRING]:void 0},t.ConnectionPointInitValueMap={[o.BOOL]:!1,[o.INT]:0,[o.FLOAT]:0,[o.VEC2]:[0,0],[o.VEC3]:[0,0,0],[o.VEC4]:[0,0,0,0],[o.SAMPLER_2D]:s.RampParam.DEFAULT_VALUE_JSON},t.ConnectionPointComponentsCountMap={[o.BOOL]:1,[o.INT]:1,[o.FLOAT]:1,[o.VEC2]:2,[o.VEC3]:3,[o.VEC4]:4,[o.SAMPLER_2D]:1}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.ALWAYS="always",e.NEVER="never",e.FROM_NODE="from_node"}(t.InputCloneMode||(t.InputCloneMode={}))},,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.BOOLEAN="boolean",e.BUTTON="button",e.COLOR="color",e.FLOAT="float",e.FOLDER="folder",e.INTEGER="integer",e.OPERATOR_PATH="operator_path",e.RAMP="ramp",e.SEPARATOR="separator",e.STRING="string",e.VECTOR2="vector2",e.VECTOR3="vector3",e.VECTOR4="vector4"}(t.ParamType||(t.ParamType={}))},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.COP="cop",e.EVENT="event",e.GL="gl",e.JS="js",e.MANAGER="managers",e.MAT="mat",e.OBJ="objects",e.SOP="sop",e.POST="post"}(t.NodeContext||(t.NodeContext={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(49),o=r.__importDefault(n(44)),i=r.__importDefault(n(260)),a=r.__importDefault(n(45));t.ThreeToGl=class{static any(e){if(a.default(e))return e;if(i.default(e))return`${e}`;if(o.default(e))return`${s.CoreString.ensure_float(e)}`;{const t=e.toArray().map(e=>`${s.CoreString.ensure_float(e)}`);return`${`vec${t.length}`}(${t.join(", ")})`}}static vector3(e){if(a.default(e))return e;return`vec3(${e.toArray().map(e=>`${s.CoreString.ensure_float(e)}`).join(", ")})`}static vector2(e){if(a.default(e))return e;return`vec2(${e.toArray().map(e=>`${s.CoreString.ensure_float(e)}`).join(", ")})`}static vector3_float(e,t){return a.default(t)||(t=s.CoreString.ensure_float(t)),`vec4(${this.vector3(e)}, ${t})`}static float4(e,t,n,r){return a.default(e)||(e=s.CoreString.ensure_float(e)),a.default(t)||(t=s.CoreString.ensure_float(t)),a.default(n)||(n=s.CoreString.ensure_float(n)),a.default(r)||(r=s.CoreString.ensure_float(r)),`vec4(${e}, ${t}, ${n}, ${r})`}static float3(e,t,n){return a.default(e)||(e=s.CoreString.ensure_float(e)),a.default(t)||(t=s.CoreString.ensure_float(t)),a.default(n)||(n=s.CoreString.ensure_float(n)),`vec3(${e}, ${t}, ${n})`}static float2(e,t){return a.default(e)||(e=s.CoreString.ensure_float(e)),a.default(t)||(t=s.CoreString.ensure_float(t)),`vec2(${e}, ${t})`}static float(e){return a.default(e)||(e=s.CoreString.ensure_float(e)),`${e}`}static int(e){return`${e}`}static bool(e){return`${e}`}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(363);var s;!function(e){e.ATTRIBUTE="attribute",e.FUNCTION="function",e.UNIFORM="uniform",e.VARYING="varying"}(s=t.GLDefinitionType||(t.GLDefinitionType={}));class o{constructor(e,t,n,r){this._definition_type=e,this._data_type=t,this._node=n,this._name=r}get definition_type(){return this._definition_type}get data_type(){return this._data_type}get node(){return this._node}get name(){return this._name}collection_instance(){return new r.TypedGLDefinitionCollection}}t.TypedGLDefinition=o;t.AttributeGLDefinition=class extends o{constructor(e,t,n){super(s.ATTRIBUTE,t,e,n),this._node=e,this._data_type=t,this._name=n}get line(){return`attribute ${this.data_type} ${this.name}`}};t.FunctionGLDefinition=class extends o{constructor(e,t,n){super(s.FUNCTION,t,e,n),this._node=e,this._data_type=t,this._name=n}get line(){return this.name}};t.UniformGLDefinition=class extends o{constructor(e,t,n){super(s.UNIFORM,t,e,n),this._node=e,this._data_type=t,this._name=n}get line(){return`uniform ${this.data_type} ${this.name}`}};t.VaryingGLDefinition=class extends o{constructor(e,t,n){super(s.VARYING,t,e,n),this._node=e,this._data_type=t,this._name=n}get line(){return`varying ${this.data_type} ${this.name}`}}},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(16);t.TypedNamedConnectionPoint=class{constructor(e,t,n){this._name=e,this._type=t,this._init_value=n,void 0===this._init_value&&(this._init_value=r.ConnectionPointInitValueMap[this._type])}get name(){return this._name}get type(){return this._type}get param_type(){return r.ConnectionPointTypeToParamTypeMap[this._type]}get init_value(){return this._init_value}to_json(){return this._json=this._json||this._create_json()}_create_json(){return{name:this._name,type:this._type}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(90),s=n(28),o=n(27),i=n(5),a=n(656);class _ extends r.TypedNode{constructor(){super(...arguments),this.spare_params_controller=new a.GlNodeSpareParamsController(this)}static node_context(){return o.NodeContext.GL}initialize_base_node(){this.io.connections.init_inputs(),this.ui_data.set_layout_horizontal(),this.io.outputs.set_named_output_connection_points([]),this.spare_params_controller.initialize_node()}node_sibbling(e){return super.node_sibbling(e)}cook(){console.warn("gl nodes should never cook")}_set_mat_to_recompile(){var e;null===(e=this.material_node)||void 0===e||e.assembler_controller.set_compilation_required_and_dirty(this)}get material_node(){var e;if(this.parent)return this.parent.type==this.type?null===(e=this.parent)||void 0===e?void 0:e.material_node:this.parent}gl_var_name(e){return`v_POLY_${this.name}_${e}`}variable_for_input(e){var t;const n=this.io.inputs.get_input_index(e),r=this.io.connections.input_connection(n);if(r){const t=r.node_src,n=t.io.outputs.named_output_connection_points[r.output_index];if(n){const e=n.name;return t.gl_var_name(e)}throw console.warn(`no output called '${e}' for gl node ${t.full_path()}`),"variable_for_input ERROR"}return s.ThreeToGl.any(null===(t=this.params.get(e))||void 0===t?void 0:t.value)}set_lines(e){}reset_code(){var e;null===(e=this._param_configs_controller)||void 0===e||e.reset()}set_param_configs(){}param_configs(){var e;return null===(e=this._param_configs_controller)||void 0===e?void 0:e.list}gl_input_default_value(e){return null}}t.TypedGlNode=_;t.BaseGlNodeClass=class extends _{};class c extends i.NodeParamsConfig{}const l=new c;t.ParamlessTypedGlNode=class extends _{constructor(){super(...arguments),this.params_config=l}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(291),s=n(55),o=n(96),i=n(10),a=n(22),_=n(57),c=n(40),l=n(0),u=n(7),d=n(292),h=n(71),p=n(59),m=n(160),f=n(41);var g;!function(e){e.MESH="MESH",e.POINTS="POINTS",e.LINE_SEGMENTS="LINE_SEGMENTS"}(g=t.ObjectType||(t.ObjectType={})),t.ObjectTypes=[g.MESH,g.POINTS,g.LINE_SEGMENTS],t.ObjectTypeMenuEntries=[{name:"Mesh",value:t.ObjectTypes.indexOf(g.MESH)},{name:"Points",value:t.ObjectTypes.indexOf(g.POINTS)},{name:"LineSegments",value:t.ObjectTypes.indexOf(g.LINE_SEGMENTS)}],t.ObjectTypeByObject=function(e){return e instanceof a.Mesh?g.MESH:e instanceof _.LineSegments?g.LINE_SEGMENTS:e instanceof o.Points?g.POINTS:void console.warn("ObjectTypeByObject received an unknown object type",e)};const v={MeshStandard:new p.MeshStandardMaterial({color:16777215,side:l.FrontSide,metalness:.5,roughness:.9}),[g.MESH]:new m.MeshLambertMaterial({color:new u.Color(.5,.5,1),side:l.FrontSide,vertexColors:!1,transparent:!0,depthTest:!0}),[g.POINTS]:new h.PointsMaterial({color:16777215,size:.1,depthTest:!0}),[g.LINE_SEGMENTS]:new f.LineBasicMaterial({color:16777215,linewidth:1})};var y,b;!function(e){e[e.VERTEX=0]="VERTEX",e[e.OBJECT=1]="OBJECT"}(y=t.AttribClass||(t.AttribClass={})),t.AttribClassMenuEntries=[{name:"vertex",value:y.VERTEX},{name:"object",value:y.OBJECT}],function(e){e[e.NUMERIC=0]="NUMERIC",e[e.STRING=1]="STRING"}(b=t.AttribType||(t.AttribType={})),t.AttribTypeMenuEntries=[{name:"numeric",value:b.NUMERIC},{name:"string",value:b.STRING}],t.CoreConstant={ATTRIB_CLASS:{VERTEX:y.VERTEX,OBJECT:y.OBJECT},ATTRIB_TYPE:{NUMERIC:0,STRING:1},OBJECT_TYPE:{MESH:g.MESH,POINTS:g.POINTS,LINE_SEGMENTS:g.LINE_SEGMENTS},OBJECT_TYPES:t.ObjectTypes,CONSTRUCTOR_NAMES_BY_CONSTRUCTOR_NAME:{[s.Scene.name]:"Scene",[c.Group.name]:"Group",[i.Object3D.name]:"Object3D",[a.Mesh.name]:"Mesh",[o.Points.name]:"Points",[_.LineSegments.name]:"LineSegments",[d.Bone.name]:"Bone",[r.SkinnedMesh.name]:"SkinnedMesh"},CONSTRUCTORS_BY_NAME:{[g.MESH]:a.Mesh,[g.POINTS]:o.Points,[g.LINE_SEGMENTS]:_.LineSegments},MATERIALS:v}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=r.__importDefault(n(81)),o=r.__importDefault(n(92)),i=n(368),a=n(28),_=n(16),c=n(5);class l extends c.NodeParamsConfig{}t.BaseGlMathFunctionParamsConfig=l;const u=new l;class d extends i.BaseAdaptiveGlNode{constructor(){super(...arguments),this.params_config=u}gl_method_name(){return""}gl_function_definitions(){return[]}initialize_node(){super.initialize_node(),this.gl_connections_controller.set_expected_input_types_function(this._expected_input_types.bind(this)),this.gl_connections_controller.set_expected_output_types_function(this._expected_output_types.bind(this)),this.gl_connections_controller.set_input_name_function(this._gl_input_name.bind(this))}_expected_input_types(){const e=this.gl_connections_controller.first_input_connection_type()||_.ConnectionPointType.FLOAT;if(this.io.connections.first_input_connection()){let t=Math.max(o.default(this.io.connections.input_connections()).length+1,2);return s.default(t).map(t=>e)}return s.default(2).map(t=>e)}_expected_output_types(){return[this._expected_input_types()[0]]}_gl_input_name(e){return"in"}set_lines(e){const t=this.io.outputs.named_output_connection_points[0].type,n=this.io.inputs.named_input_connection_points.map((e,t)=>{const n=e.name;return a.ThreeToGl.any(this.variable_for_input(n))}).join(", "),r=`${t} ${this.gl_var_name(this.gl_connections_controller.output_name(0))} = ${this.gl_method_name()}(${n})`;e.add_body_lines(this,[r]),e.add_definitions(this,this.gl_function_definitions())}}t.BaseGlMathFunctionGlNode=d;t.BaseNodeGlMathFunctionArg1GlNode=class extends d{_gl_input_name(e){return"in"}_expected_input_types(){return[this.gl_connections_controller.first_input_connection_type()||_.ConnectionPointType.FLOAT]}};t.BaseNodeGlMathFunctionArg2GlNode=class extends d{_expected_input_types(){const e=this.gl_connections_controller.first_input_connection_type()||_.ConnectionPointType.FLOAT;return[e,e]}};t.BaseNodeGlMathFunctionArg3GlNode=class extends d{_expected_input_types(){const e=this.gl_connections_controller.first_input_connection_type()||_.ConnectionPointType.FLOAT;return[e,e,e]}};t.BaseNodeGlMathFunctionArg4GlNode=class extends d{_expected_input_types(){const e=this.gl_connections_controller.first_input_connection_type()||_.ConnectionPointType.FLOAT;return[e,e,e,e]}};t.BaseNodeGlMathFunctionArg5GlNode=class extends d{_expected_input_types(){const e=this.gl_connections_controller.first_input_connection_type()||_.ConnectionPointType.FLOAT;return[e,e,e,e,e]}}},,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=r.__importDefault(n(81)),o=r.__importDefault(n(91)),i=r.__importDefault(n(188)),a=r.__importDefault(n(92)),_=r.__importDefault(n(82)),c=r.__importDefault(n(548)),l=r.__importDefault(n(341)),u=r.__importDefault(n(552)),d=r.__importDefault(n(342)),h=r.__importDefault(n(560)),p=r.__importDefault(n(44)),m=/[, ]/,f=/\d+$/,g=/,| /,v=/^-?\d+\.?\d*$/;var y;!function(e){e.TRUE="true",e.FALSE="false"}(y||(y={}));class b{static is_boolean(e){return e==y.TRUE||e==y.FALSE}static to_boolean(e){return e==y.TRUE}static is_number(e){return v.test(e)}static tail_digits(e){const t=e.match(f);return t?parseInt(t[0]):0}static increment(e){let t;if(t=e.match(f)){const n=parseInt(t[0]);return`${e.substring(0,e.length-t[0].length)}${n+1}`}return`${e}1`}static pluralize(e){return"s"!==e[e.length-1]?`${e}s`:e}static camel_case(e){return h.default(e)}static upper_first(e){return d.default(e)}static snake_case(e){return u.default(e)}static titleize(e){return l.default(e.replace(/_/g," "))}static type_to_class_name(e){return this.upper_first(h.default(e))}static timestamp_to_seconds(e){return Date.parse(e)/1e3}static seconds_to_timestamp(e){const t=new Date;return t.setTime(1e3*e),t.toISOString().substr(11,8)}static precision(e,t=2){t=Math.max(t,0);const n=`${e}`.split(".");if(t<=0)return n[0];let r=n[1];if(void 0!==r)return r.length>t&&(r=r.substring(0,t)),r=c.default(r,t,"0"),`${n[0]}.${r}`;{const n=`${e}.`,r=n.length+t;return c.default(n,r,"0")}}static ensure_float(e){const t=`${e}`;return t.indexOf(".")>=0?t:`${t}.0`}static match_mask(e,t){if("*"===t)return!0;return t=`^${t=t.split("*").join(".*")}$`,new RegExp(t).test(e)}static matches_one_mask(e,t){let n=!1;for(let r of t)b.match_mask(e,r)&&(n=!0);return n}static attrib_names(e){const t=e.split(m),n=a.default(t.map(e=>i.default(e)));return o.default(n)}static to_id(e){if(null==e)return 0;const t=e.split("").reverse();let n=0,r=0;return t.forEach((e,t)=>{let s=e.charCodeAt(0);s>=0&&(r=t%10,n+=s*Math.pow(10,r),n%=Number.MAX_SAFE_INTEGER)}),n}static indices(e){const t=e.split(g);if(t.length>1)return o.default(_.default(t.map(e=>this.indices(e)))).sort((e,t)=>e-t);{const e=t[0];if(e){const t="-";if(e.indexOf(t)>0){const n=e.split(t);return s.default(parseInt(n[0]),parseInt(n[1])+1)}{const t=parseInt(e);return p.default(t)?[t]:[]}}return[]}}static escape_line_breaks(e){return e.replace(/(\r\n|\n|\r)/gm,"\\n")}}t.CoreString=b},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.VERTEX="vertex",e.FRAGMENT="fragment",e.LEAVES_FROM_NODES_SHADER="leaves_from_nodes_shader",e.PARTICLES_0="particles_0",e.PARTICLES_1="particles_1",e.PARTICLES_2="particles_2",e.PARTICLES_3="particles_3",e.PARTICLES_4="particles_4",e.PARTICLES_5="particles_5",e.PARTICLES_6="particles_6",e.PARTICLES_7="particles_7",e.PARTICLES_8="particles_8",e.PARTICLES_9="particles_9"}(r=t.ShaderName||(t.ShaderName={})),t.ParticleShaderNames=[r.PARTICLES_0,r.PARTICLES_1,r.PARTICLES_2,r.PARTICLES_3,r.PARTICLES_4,r.PARTICLES_5,r.PARTICLES_6,r.PARTICLES_7,r.PARTICLES_8,r.PARTICLES_9]},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(1),o=n(4),i=n(4),a=n(6),_=n(97),c=r.__importDefault(n(81)),l=r.__importDefault(n(91)),u=r.__importDefault(n(179)),d=r.__importDefault(n(379)),h=r.__importDefault(n(190)),p=r.__importDefault(n(168)),m=r.__importDefault(n(21)),f=r.__importDefault(n(44)),g=n(380),v=n(831),y=n(35),b=n(114),x=n(832),T=n(276);class w{constructor(e){this._geometry=e}geometry(){return this._geometry}uuid(){return this._geometry.uuid}bounding_box(){return this._bounding_box=this._bounding_box||this._create_bounding_box()}_create_bounding_box(){if(this._geometry.computeBoundingBox(),this._geometry.boundingBox)return this._geometry.boundingBox}mark_as_instance(){this._geometry.userData.is_instance=!0}static marked_as_instance(e){return!0===e.userData.is_instance}marked_as_instance(){return w.marked_as_instance(this._geometry)}position_attrib_name(){let e="position";return this.marked_as_instance()&&(e="instancePosition"),e}compute_vertex_normals(){this._geometry.computeVertexNormals()}user_data_attribs(){const e="indexed_attrib_values";return this._geometry.userData[e]=this._geometry.userData[e]||{}}indexed_attribute_names(){return Object.keys(this.user_data_attribs()||{})}user_data_attrib(e){return e=b.CoreAttribute.remap_name(e),this.user_data_attribs()[e]}is_attrib_indexed(e){return e=b.CoreAttribute.remap_name(e),null!=this.user_data_attrib(e)}has_attrib(e){return"ptnum"===e||(e=b.CoreAttribute.remap_name(e),null!=this._geometry.attributes[e])}attrib_type(e){return this.is_attrib_indexed(e)?y.CoreConstant.ATTRIB_TYPE.STRING:y.CoreConstant.ATTRIB_TYPE.NUMERIC}attrib_names(){return Object.keys(this._geometry.attributes)}attrib_sizes(){const e={};for(let t of this.attrib_names())e[t]=this._geometry.attributes[t].itemSize;return e}attrib_size(e){let t;return e=b.CoreAttribute.remap_name(e),null!=(t=this._geometry.attributes[e])?t.itemSize:"ptnum"===e?1:0}set_indexed_attribute_values(e,t){this.user_data_attribs()[e]=t}set_indexed_attribute(e,t,n){this.set_indexed_attribute_values(e,t),this._geometry.setAttribute(e,new o.Int32BufferAttribute(n,1))}add_numeric_attrib(e,t=1,n=0){const r=[];let s=!1;if(f.default(n)){for(let e=0;e<this.points_count();e++)for(let e=0;e<t;e++)r.push(n);s=!0}else if(t>1)if(m.default(n)){for(let e=0;e<this.points_count();e++)for(let e=0;e<t;e++)r.push(n[e]);s=!0}else{const e=n;if(2==t&&null!=e.x&&null!=e.y){for(let t=0;t<this.points_count();t++)r.push(e.x),r.push(e.y);s=!0}const o=n;if(3==t&&null!=o.x&&null!=o.y&&null!=o.z){for(let e=0;e<this.points_count();e++)r.push(o.x),r.push(o.y),r.push(o.z);s=!0}const i=n;if(3==t&&null!=i.r&&null!=i.g&&null!=i.b){for(let e=0;e<this.points_count();e++)r.push(i.r),r.push(i.g),r.push(i.b);s=!0}const a=n;if(4==t&&null!=a.x&&null!=a.y&&null!=a.z&&null!=a.w){for(let e=0;e<this.points_count();e++)r.push(a.x),r.push(a.y),r.push(a.z),r.push(a.w);s=!0}}if(!s)throw"no other default value allowed for now in add_numeric_attrib";this._geometry.setAttribute(e,new i.Float32BufferAttribute(r,t))}init_position_attribute(e,t){const n=[];null==t&&(t=new s.Vector3);for(let r=0;r<e;r++)n.push(t.x),n.push(t.y),n.push(t.z);return this._geometry.setAttribute("position",new i.Float32BufferAttribute(n,3))}add_attribute(e,t){switch(t.type()){case y.CoreConstant.ATTRIB_TYPE.STRING:return console.log("TODO: to implement");case y.CoreConstant.ATTRIB_TYPE.NUMERIC:return this.add_numeric_attrib(e,t.size())}}rename_attribute(e,t){this.is_attrib_indexed(e)&&(this.user_data_attribs()[t]=p.default(this.user_data_attribs()[e]),delete this.user_data_attribs()[e]);const n=this._geometry.getAttribute(e);return this._geometry.setAttribute(t,new i.Float32BufferAttribute(n.array,n.itemSize)),this._geometry.deleteAttribute(e)}delete_attribute(e){return this.is_attrib_indexed(e)&&delete this.user_data_attribs()[e],this._geometry.deleteAttribute(e)}clone(){return w.clone(this._geometry)}static clone(e){let t;for(let t of Object.keys(e.attributes)){const n=e.getAttribute(t);n.constructor.name==_.InterleavedBufferAttribute.name&&x.MonkeyPatcher.patch(n)}const n=e.clone();return null!=(t=e.userData)&&(n.userData=h.default(t)),n}points_count(){return w.points_count(this._geometry)}static points_count(e){let t,n=0;let r="position";if(new this(e).marked_as_instance()&&(r="instancePosition"),null!=(t=e.getAttribute(r))){let e;null!=(e=t.array)&&(n=e.length/3)}return n}points(){return this._points=this._points||this.points_from_geometry()}reset_points(){this._points=void 0}points_from_geometry(){const e=[],t=this._geometry.getAttribute(this.position_attrib_name());if(null!=t){const n=t.array.length/3;for(let t=0;t<n;t++){const n=new g.CorePoint(this,t);e.push(n)}}return e}static geometry_from_points(e,t){const n=new a.BufferGeometry,r=new this(n),s=e[0];if(null!=s){const o=s.geometry(),a=s.geometry_wrapper(),_={};u.default(e,(e,t)=>_[e.index]=t);const c=this._indices_from_points(_,o,t);null!=c&&0!==c.length&&n.setIndex(c);const{attributes:d}=o;for(let t of Object.keys(d)){if(null!=a.user_data_attribs()[t]){const s=l.default(e.map(e=>e.attrib_value(t))),o={};u.default(s,(e,t)=>o[e]=t),r.user_data_attribs()[t]=s;const a=[];for(let n of e){const e=o[n.attrib_value(t)];a.push(e)}n.setAttribute(t,new i.Float32BufferAttribute(a,1))}else{const r=[],s=d[t].itemSize;for(let n of e){const e=n.attrib_value(t);switch(s){case 1:r.push(e);case 3:r.push(e.x),r.push(e.y),r.push(e.z)}}n.setAttribute(t,new i.Float32BufferAttribute(r,s))}}}return n}static _indices_from_points(e,t,n){const r=t.index;if(null!=r){const t=r.array,s=[];switch(n){case y.CoreConstant.OBJECT_TYPE.POINTS:u.default(t,(function(t,n){const r=e[t];null!=r&&s.push(r)}));break;case y.CoreConstant.OBJECT_TYPE.MESH:u.default(t,(function(n,r){if(r%3==0){const n=t[r],o=t[r+1],i=t[r+2],a=e[n],_=e[o],c=e[i];null!=a&&null!=_&&null!=c&&(s.push(a),s.push(_),s.push(c))}}));break;case y.CoreConstant.OBJECT_TYPE.LINE_SEGMENTS:u.default(t,(function(n,r){if(r%2==0){const n=t[r],o=t[r+1],i=e[n],a=e[o];null!=i&&null!=a&&(s.push(i),s.push(a))}}))}return s}}static merge_geometries(e){if(0===e.length)return;const t=e.map(e=>new w(e)),n=t[0].indexed_attribute_names(),r={};for(let e of n){const n={},s=[];for(let r of t){const t=r.points();for(let r of t){s.push(r);const t=r.attrib_value(e);null!=n[t]?n[t]:n[t]=Object.keys(n).length}}const o=Object.keys(n);for(let t of s){const r=n[t.attrib_value(e)];t.set_attrib_index(e,r)}r[e]=o}const s=T.BufferGeometryUtils.mergeBufferGeometries(e),o=new this(s);return Object.keys(r).forEach(e=>{const t=r[e];o.set_indexed_attribute_values(e,t)}),s&&delete s.userData.mergedUserData,s}segments(){var e;const t=(null===(e=this.geometry().index)||void 0===e?void 0:e.array)||[];return d.default(t,2)}faces(){return this.faces_from_geometry()}faces_from_geometry(){var e;const t=((null===(e=this.geometry().index)||void 0===e?void 0:e.array)||[]).length/3;return c.default(t).map(e=>new v.CoreFace(this,e))}}t.CoreGeometry=w},,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.CREATED="node_created",e.DELETED="node_deleted",e.NAME_UPDATED="node_name_update",e.OVERRIDE_CLONABLE_STATE_UPDATE="node_override_clonable_state_update",e.NAMED_OUTPUTS_UPDATED="node_named_outputs_updated",e.NAMED_INPUTS_UPDATED="node_named_inputs_updated",e.INPUTS_UPDATED="node_inputs_updated",e.PARAMS_UPDATED="node_params_updated",e.UI_DATA_POSITION_UPDATED="node_ui_data_position_updated",e.UI_DATA_COMMENT_UPDATED="node_ui_data_comment_updated",e.ERROR_UPDATED="node_error_updated",e.FLAG_BYPASS_UPDATED="bypass_flag_updated",e.FLAG_DISPLAY_UPDATED="display_flag_updated",e.SELECTION_UPDATED="selection_updated"}(t.NodeEvent||(t.NodeEvent={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(101),o=n(351),i=n(587),a=r.__importDefault(n(45)),_=r.__importDefault(n(44));t.BaseMethod=class{constructor(e){this.param=e,this.node=this.param.node}static required_arguments(){return console.warn("Expression.Method._Base.required_arguments virtual method call. Please override"),[]}static optional_arguments(){return[]}static min_allowed_arguments_count(){return this.required_arguments().length}static max_allowed_arguments_count(){return this.min_allowed_arguments_count()+this.optional_arguments().length}static allowed_arguments_count(e){return e>=this.min_allowed_arguments_count()&&e<=this.max_allowed_arguments_count()}process_arguments(e){throw"Expression.Method._Base.process_arguments virtual method call. Please override"}get_referenced_node_container(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=this.get_referenced_node(e);if(t){const e=yield t.request_container();if(e){if(e.core_content())return e}throw`referenced node invalid: ${t.full_path()}`}throw`invalid input (${e})`}))}get_referenced_param(e,t){return s.CoreWalker.find_param(this.node,e,t)||null}find_referenced_graph_node(e,t){if(_.default(e)){const t=e;return this.node.io.inputs.input_graph_node(t)}{const n=e;return this.get_referenced_node(n,t)}}get_referenced_node(e,t){if(a.default(e)){const n=e;return s.CoreWalker.find_node(this.node,n,t)}{const t=e;return this.node.io.inputs.input(t),this.node.io.inputs.input(t)}}find_dependency(e){return null}create_dependency_from_index_or_path(e){const t=new o.DecomposedPath,n=this.find_referenced_graph_node(e,t);return n?this.create_dependency(n,e,t):(console.warn("node not found for path",e),null)}create_dependency(e,t,n){return i.MethodDependency.create(this.param,t,e,n)}}},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(531),s=n(532);class o{constructor(){this.renderers_controller=new r.RenderersController,this.nodes_register=new s.NodesRegister,this.scenes_by_uuid={}}static instance(){return this._instance=this._instance||new o}register_node(e,t,n){this.nodes_register.register_node(e,t,n)}registered_nodes(e,t){return this.nodes_register.registered_nodes(e,t)}in_worker_thread(){return!1}desktop_controller(){}player_mode(){return!1}log(...e){console.log(...e)}set_env(e){this._env=e}get env(){return this._env}}t.Poly=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(534);t.CoreGraphNode=class{constructor(e,t){this._scene=e,this._name=t,this._dirty_controller=new r.DirtyController(this),this._graph_node_id=e.graph.next_id(),e.graph.setNode(this),this._graph=e.graph}get name(){return this._name}set_name(e){this._name=e}get scene(){return this._scene}get graph(){return this._graph}get graph_node_id(){return this._graph_node_id}get dirty_controller(){return this._dirty_controller}set_dirty(e){e=e||this,this._dirty_controller.set_dirty(e)}set_successors_dirty(e){this._dirty_controller.set_successors_dirty(e)}remove_dirty_state(){this._dirty_controller.remove_dirty_state()}get is_dirty(){return this._dirty_controller.is_dirty}add_post_dirty_hook(e,t){this._dirty_controller.add_post_dirty_hook(e,t)}graph_remove(){this.graph.removeNode(this)}add_graph_input(e){return this.graph.connect(e,this)}remove_graph_input(e){this.graph.disconnect(e,this)}graph_disconnect_predecessors(){this.graph.disconnect_predecessors(this)}graph_disconnect_successors(){this.graph.disconnect_successors(this)}graph_predecessor_ids(){return this.graph.predecessor_ids(this._graph_node_id)||[]}graph_predecessors(){return this.graph.predecessors(this)}graph_successors(){return this.graph.successors(this)}graph_all_predecessors(){return this.graph.all_predecessors(this)}graph_all_successors(){return this.graph.all_successors(this)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(90),o=n(9),i=n(770),a=n(27),_=n(113);class c extends s.TypedNode{constructor(){super(...arguments),this.container_controller=new _.TypedContainerController(this,i.MaterialContainer),this._cook_main_without_inputs_when_dirty_bound=this._cook_main_without_inputs_when_dirty.bind(this)}static node_context(){return a.NodeContext.MAT}initialize_base_node(){super.initialize_base_node(),this.name_controller.add_post_set_full_path_hook(this.set_material_name.bind(this)),this.add_post_dirty_hook("_cook_main_without_inputs_when_dirty",this._cook_main_without_inputs_when_dirty_bound)}node_sibbling(e){return super.node_sibbling(e)}_cook_main_without_inputs_when_dirty(){return r.__awaiter(this,void 0,void 0,(function*(){yield this.cook_controller.cook_main_without_inputs()}))}set_material_name(){this._material&&(this._material.name=this.full_path())}get material(){return this._material=this._material||this.create_material()}set_material(e){this.set_container(e)}add_render_hook(e){}}t.TypedMatNode=c;t.BaseMatNodeClass=class extends c{create_material(){return new o.Material}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(10),s=n(90),o=n(794),i=n(27),a=n(113),_=n(40),c=["parent object","parent object","parent object","parent object"];var l;!function(e){e[e.MANAGER=0]="MANAGER",e[e.FOG=1]="FOG",e[e.CAMERA=2]="CAMERA",e[e.LIGHT=3]="LIGHT",e[e.EVENT=4]="EVENT",e[e.MAT=5]="MAT"}(l=t.ObjNodeRenderOrder||(t.ObjNodeRenderOrder={}));class u extends s.TypedNode{constructor(){super(...arguments),this.container_controller=new a.TypedContainerController(this,o.ObjectContainer),this.render_order=l.MANAGER,this._children_group=new _.Group,this._attachable_to_hierarchy=!0,this._used_in_scene=!0}static node_context(){return i.NodeContext.OBJ}static displayed_input_names(){return c}get attachable_to_hierarchy(){return this._attachable_to_hierarchy}get used_in_scene(){return this._used_in_scene}set_used_in_scene(e){if(this._used_in_scene=e,!this.scene.loading_controller.is_loading){const e=this.parent;e&&e.update_object(this)}}add_object_to_parent(e){this.attachable_to_hierarchy&&e.add(this.object)}remove_object_from_parent(){if(this.attachable_to_hierarchy){const e=this.object.parent;e&&e.remove(this.object)}}initialize_base_node(){this._object=this._create_object_with_attributes(),this.name_controller.add_post_set_full_path_hook(this.set_object_name.bind(this)),this.set_object_name()}node_sibbling(e){return super.node_sibbling(e)}get children_group(){return this._children_group}get object(){return this._object}_create_object_with_attributes(){const e=this.create_object();return e.node=this,e.add(this._children_group),e}set_object_name(){this._object&&(this._object.name=this.full_path(),this._children_group.name=`${this.full_path()}:parented_outputs`)}create_object(){return new r.Object3D}is_display_node_cooking(){return!1}is_displayed(){var e,t;return(null===(t=null===(e=this.flags)||void 0===e?void 0:e.display)||void 0===t?void 0:t.active)||!1}}t.TypedObjNode=u;t.BaseObjNodeClass=class extends u{}},,,function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var r,s,o,i=n(22),a=n(63),_=n(54);function c(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1}Object.assign(c.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),c.FullScreenQuad=(r=new a.OrthographicCamera(-1,1,1,-1,0,1),s=new _.PlaneBufferGeometry(2,2),o=function(e){this._mesh=new i.Mesh(s,e)},Object.defineProperty(o.prototype,"material",{get:function(){return this._mesh.material},set:function(e){this._mesh.material=e}}),Object.assign(o.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(e){e.render(this._mesh,r)}}),o)},,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(218),o=n(1),i=n(104),a=n(84),_=n(5),c=n(69);function l(e){return class extends e{constructor(){super(...arguments),this.transform=_.ParamConfig.FOLDER(),this.t=_.ParamConfig.VECTOR3([0,0,0]),this.r=_.ParamConfig.VECTOR3([0,0,0]),this.s=_.ParamConfig.VECTOR3([1,1,1]),this.scale=_.ParamConfig.FLOAT(1)}}}t.TransformedParamConfig=l;l(_.NodeParamsConfig);class u extends c.TypedObjNode{constructor(){super(...arguments),this.transform_controller=new d(this)}}t.TransformedObjNode=u;class d{constructor(e){this.node=e,this._cook_main_without_inputs_when_dirty_bound=this._cook_main_without_inputs_when_dirty.bind(this),this._update_transform_from_params_scale=new o.Vector3}initialize_node(){this.node.io.inputs.set_count(0,1),this.node.io.inputs.set_depends_on_inputs(!1),this.node.io.outputs.set_has_one_output(),this.node.io.inputs.add_on_set_input_hook("on_input_updated",()=>{this.on_input_updated()});const e="_cook_main_without_inputs_when_dirty";this.node.dirty_controller.has_hook(e)||this.node.dirty_controller.add_post_dirty_hook(e,this._cook_main_without_inputs_when_dirty_bound)}_cook_main_without_inputs_when_dirty(){return r.__awaiter(this,void 0,void 0,(function*(){yield this.node.cook_controller.cook_main_without_inputs()}))}static on_input_updated(e){null!=e.io.inputs.input(0)?e.root.add_to_parent_transform(e):e.root.remove_from_parent_transform(e)}on_input_updated(){d.on_input_updated(this.node)}update(e){this.update_transform_with_matrix(e)}update_transform_with_matrix(e){const t=this.node.object;return null==e||e.equals(t.matrix)?this.update_transform_from_params():(t.matrixAutoUpdate=!1,t.matrix=e,t.dispatchEvent({type:"change"}))}update_transform_from_params(){const e=this.node.object;if(e){const t=this.node.pv.t,n=this.node.pv.r;this._update_transform_from_params_scale.copy(this.node.pv.s).multiplyScalar(this.node.pv.scale),e.matrixAutoUpdate=!1,e.position.copy(t);const r=[i.CoreMath.degrees_to_radians(n.x),i.CoreMath.degrees_to_radians(n.y),i.CoreMath.degrees_to_radians(n.z)],o=new s.Euler(r[0],r[1],r[2]);e.rotation.copy(o),e.scale.copy(this._update_transform_from_params_scale),e.matrixAutoUpdate=!0,e.updateMatrix(),e.dispatchEvent({type:"change"})}}set_params_from_matrix(e,t={}){a.CoreTransform.set_params_from_matrix(e,this.node,t)}}t.TransformController=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),s=n(42),o=n(15),i=n(218),a=n(14);t.CoreTransform=class{constructor(){this._translation_matrix=new o.Matrix4,this._translation_matrix_q=new s.Quaternion,this._translation_matrix_s=new r.Vector3(1,1,1),this._matrix=(new o.Matrix4).identity(),this._matrix_q=new s.Quaternion,this._matrix_e=new i.Euler,this._matrix_s=new r.Vector3,this._rotate_geometry_m=new o.Matrix4,this._rotate_geometry_q=new s.Quaternion,this._rotate_geometry_vec_dest=new r.Vector3}static set_params_from_matrix(e,t,n={}){let o=n.scale;null==o&&(o=!0);const a=new r.Vector3,_=new s.Quaternion,c=new r.Vector3;e.decompose(a,_,c);const l=(new i.Euler).setFromQuaternion(_).toVector3();l.divideScalar(Math.PI/180),t.scene.batch_update(()=>{t.params.set_vector3("r",l.toArray()),t.params.set_vector3("t",a.toArray()),t.params.set_vector3("s",c.toArray()),o&&t.params.set_float("scale",1)})}static set_params_from_object(e,t){const n=e.position.toArray(),r=e.rotation.toArray().map(e=>e*(180/Math.PI));t.scene.batch_update(()=>{t.params.set_vector3("t",n),t.params.set_vector3("r",r)})}translation_matrix(e){return this._translation_matrix.compose(e,this._translation_matrix_q,this._translation_matrix_s),this._translation_matrix}static matrix_quaternion(e){const t=new r.Vector3,n=new s.Quaternion,o=new r.Vector3;return e.decompose(t,n,o),n}matrix(e,t,n,r){return this._matrix_e.set(a.MathUtils.degToRad(t.x),a.MathUtils.degToRad(t.y),a.MathUtils.degToRad(t.z),"XYZ"),this._matrix_q.setFromEuler(this._matrix_e),this._matrix_s.copy(n).multiplyScalar(r),this._matrix.compose(e,this._matrix_q,this._matrix_s),this._matrix}rotate_geometry(e,t,n){this._rotate_geometry_vec_dest.copy(n),this._rotate_geometry_vec_dest.normalize(),this._rotate_geometry_q.setFromUnitVectors(t,this._rotate_geometry_vec_dest),this._rotate_geometry_m.makeRotationFromQuaternion(this._rotate_geometry_q),e.applyMatrix4(this._rotate_geometry_m)}}},,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(67),o=n(535),i=n(536),a=n(539),_=n(540),c=n(567),l=n(113),u=n(568),d=n(569),h=n(256),p=n(347),m=n(579),f=n(612),g=n(613),v=n(614),y=(n(61),n(619)),b=n(115);class x extends s.CoreGraphNode{constructor(e,t="BaseNode"){super(e,t),this.container_controller=new l.TypedContainerController(this,b.BaseContainer),this.pv=new f.ParamsValueAccessor,this.p=new y.ParamsAccessor,this._initialized=!1}get display_node_controller(){return this._display_node_controller}get parent_controller(){return this._parent_controller=this._parent_controller||new a.HierarchyParentController(this)}static displayed_input_names(){return[]}get children_controller_context(){return this._children_controller_context}_create_children_controller(){if(this._children_controller_context)return new _.HierarchyChildrenController(this,this._children_controller_context)}get children_controller(){return this._children_controller=this._children_controller||this._create_children_controller()}children_allowed(){return null!=this._children_controller_context}get ui_data(){return this._ui_data=this._ui_data||new o.UIData(this)}get dependencies_controller(){return this._dependencies_controller=this._dependencies_controller||new d.DependenciesController(this)}get states(){return this._states=this._states||new i.StatesController(this)}get lifecycle(){return this._lifecycle=this._lifecycle||new c.LifeCycleController(this)}get serializer(){return this._serializer=this._serializer||new p.NodeSerializer(this)}get cook_controller(){return this._cook_controller=this._cook_controller||new u.CookController(this)}get io(){return this._io=this._io||new v.IOController(this)}get name_controller(){return this._name_controller=this._name_controller||new h.NameController(this)}set_name(e){this.name_controller.set_name(e)}_set_core_name(e){this._name=e}get params(){return this._params_controller=this._params_controller||new m.ParamsController(this)}get processing_context(){return this._processing_context=this._processing_context||new g.ProcessingContext(this)}initialize_base_and_node(){this._initialized?console.warn("node already initialized"):(this.initialize_base_node(),this.initialize_node(),this._initialized=!0)}initialize_base_node(){}initialize_node(){}static type(){throw"type to be overriden"}get type(){return this.constructor.type()}static node_context(){throw"requires override"}node_context(){return this.constructor.node_context()}static required_three_imports(){return[]}static required_imports(){let e=this.required_three_imports();return e?e.map(e=>`three/examples/jsm/${e}`):[]}required_imports(){return this.constructor.required_imports()}static require_webgl2(){return!1}require_webgl2(){return this.constructor.require_webgl2()}set_parent(e){this.parent_controller.set_parent(e)}get parent(){return this.parent_controller.parent}get root(){return this._scene.root}full_path(){return this.parent_controller.full_path()}create_params(){}add_param(e,t,n,r){var s;return null===(s=this._params_controller)||void 0===s?void 0:s.add_param(e,t,n,r)}cook(e){return null}request_container(){return r.__awaiter(this,void 0,void 0,(function*(){return yield this.container_controller.request_container()}))}set_container(e,t=null){this.container_controller.container.set_content(e),null!=e&&(e.name||(e.name=this.full_path()),e.node||(e.node=this)),this.cook_controller.end_cook(t)}create_node(e){var t;return null===(t=this.children_controller)||void 0===t?void 0:t.create_node(e)}remove_node(e){var t;null===(t=this.children_controller)||void 0===t||t.remove_node(e)}children(){var e;return(null===(e=this.children_controller)||void 0===e?void 0:e.children())||[]}node(e){var t;return(null===(t=this.parent_controller)||void 0===t?void 0:t.find_node(e))||null}node_sibbling(e){var t;if(this.parent){const n=null===(t=this.parent.children_controller)||void 0===t?void 0:t.child_by_name(e);if(n)return n}return null}nodes_by_type(e){var t;return(null===(t=this.children_controller)||void 0===t?void 0:t.nodes_by_type(e))||[]}set_input(e,t,n=0){this.io.inputs.set_input(e,t,n)}emit(e,t=null){this.scene.dispatch_controller.dispatch(this,e,t)}to_json(e=!1){return this.serializer.to_json(e)}}t.TypedNode=x;t.BaseNodeClass=class extends x{}},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(101),o=n(67),i=n(259),a=n(574),_=n(575),c=n(576),l=n(24),u=n(103);class d extends o.CoreGraphNode{constructor(e){super(e,"BaseParam"),this._options=new i.OptionsController(this),this._emit_controller=new a.EmitController(this),this._is_computing=!1,this.initialize_param()}get options(){return this._options=this._options||new i.OptionsController(this)}get emit_controller(){return this._emit_controller=this._emit_controller||new a.EmitController(this)}get expression_controller(){return this._expression_controller}get serializer(){return this._serializer=this._serializer||new _.ParamSerializer(this)}get states(){return this._states=this._states||new c.StatesController(this)}initialize_value(){}initialize_param(){}static type(){return l.ParamType.FLOAT}get type(){return this.constructor.type()}get is_numeric(){return!1}set_name(e){super.set_name(e)}get value(){return this._value}convert(e){return null}static are_raw_input_equal(e,t){return!1}is_raw_input_equal(e){return this.constructor.are_raw_input_equal(this._raw_input,e)}static are_values_equal(e,t){return!1}is_value_equal(e){return this.constructor.are_values_equal(this.value,e)}_clone_raw_input(e){return e}set(e){this._raw_input=this._clone_raw_input(this._prefilter_invalid_raw_input(e)),this.emit_controller.emit(u.ParamEvent.RAW_INPUT_UPDATED),this.process_raw_input()}_prefilter_invalid_raw_input(e){return e}get default_value(){return this._default_value}get is_default(){return!0}get raw_input(){return this._raw_input}process_raw_input(){}compute(){return r.__awaiter(this,void 0,void 0,(function*(){if(this.scene.loading_controller.is_loading&&console.warn(`param attempt to compute ${this.full_path()}`),this.is_dirty){if(this._is_computing)return new Promise((e,t)=>{this._compute_resolves=this._compute_resolves||[],this._compute_resolves.push(e)});if(this._is_computing=!0,yield this.process_computation(),this._is_computing=!1,this._compute_resolves){let e;for(;e=this._compute_resolves.pop();)e()}}}))}process_computation(){return r.__awaiter(this,void 0,void 0,(function*(){}))}set_init_value(e){this._default_value=e}set_node(e){var t,n;if(e?(this._node=e,this.options.makes_node_dirty_when_dirty()&&!this.parent_param&&(null===(n=e.params.params_node)||void 0===n||n.add_graph_input(this))):this._node&&(null===(t=this._node.params.params_node)||void 0===t||t.remove_graph_input(this)),this.components)for(let t of this.components)t.set_node(e)}get node(){return this._node}get parent(){return this.node}set_parent_param(e){e.add_graph_input(this),this._parent_param=e}get parent_param(){return this._parent_param}has_parent_param(){return null!=this._parent_param}full_path(){var e;return(null===(e=this.node)||void 0===e?void 0:e.full_path())+"/"+this.name}path_relative_to(e){return s.CoreWalker.relative_path(e,this)}emit(e){this.emit_controller.emit_allowed&&(this.emit_controller.increment_count(e),this.scene.dispatch_controller.dispatch(this,e))}get components(){return this._components}static get component_names(){return[]}get component_names(){return this.constructor.component_names}get is_multiple(){return this.component_names.length>0}init_components(){}has_expression(){return null!=this.expression_controller&&this.expression_controller.active}to_json(){return this.serializer.to_json()}}t.TypedParam=d;t.BaseParamClass=class extends d{get default_value_serialized(){return"BaseParamClass.default_value_serialized overriden"}get raw_input_serialized(){return"BaseParamClass.raw_input_serialized overriden"}get value_serialized(){return"BaseParamClass.value_serialized overriden"}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(646),s=n(647);class o{constructor(e){this.node=e}has_display(){return!1}has_bypass(){return!1}}function i(e){return class extends e{constructor(){super(...arguments),this.display=new s.DisplayFlag(this.node)}has_display(){return!0}}}function a(e){return class extends e{constructor(){super(...arguments),this.bypass=new r.BypassFlag(this.node)}has_bypass(){return!0}}}t.FlagsController=o;class _ extends(i(o)){}t.FlagsControllerD=_;class c extends(a(o)){}t.FlagsControllerB=c;class l extends(a(i(o))){}t.FlagsControllerDB=l},function(e,t,n){"use strict";n.r(t),t.default='\n\n// https://github.com/mattatz/ShibuyaCrowd/blob/master/source/shaders/common/quaternion.glsl\nvec4 quat_mult(vec4 q1, vec4 q2)\n{\n\treturn vec4(\n\tq1.w * q2.x + q1.x * q2.w + q1.z * q2.y - q1.y * q2.z,\n\tq1.w * q2.y + q1.y * q2.w + q1.x * q2.z - q1.z * q2.x,\n\tq1.w * q2.z + q1.z * q2.w + q1.y * q2.x - q1.x * q2.y,\n\tq1.w * q2.w - q1.x * q2.x - q1.y * q2.y - q1.z * q2.z\n\t);\n}\n// http://glmatrix.net/docs/quat.js.html#line97\n//   let ax = a[0], ay = a[1], az = a[2], aw = a[3];\n\n//   let bx = b[0], by = b[1], bz = b[2], bw = b[3];\n\n//   out[0] = ax * bw + aw * bx + ay * bz - az * by;\n\n//   out[1] = ay * bw + aw * by + az * bx - ax * bz;\n\n//   out[2] = az * bw + aw * bz + ax * by - ay * bx;\n\n//   out[3] = aw * bw - ax * bx - ay * by - az * bz;\n\n//   return out\n\n\n\n// http://www.neilmendoza.com/glsl-rotation-about-an-arbitrary-axis/\nmat4 rotationMatrix(vec3 axis, float angle)\n{\n\taxis = normalize(axis);\n\tfloat s = sin(angle);\n\tfloat c = cos(angle);\n\tfloat oc = 1.0 - c;\n\n \treturn mat4(oc * axis.x * axis.x + c, oc * axis.x * axis.y - axis.z * s,  oc * axis.z * axis.x + axis.y * s, 0.0, oc * axis.x * axis.y + axis.z * s,  oc * axis.y * axis.y + c, oc * axis.y * axis.z - axis.x * s,  0.0, oc * axis.z * axis.x - axis.y * s,  oc * axis.y * axis.z + axis.x * s,  oc * axis.z * axis.z + c, 0.0, 0.0, 0.0, 0.0, 1.0);\n}\n\n// https://www.geeks3d.com/20141201/how-to-rotate-a-vertex-by-a-quaternion-in-glsl/\nvec4 quat_from_axis_angle(vec3 axis, float angle)\n{\n\tvec4 qr;\n\tfloat half_angle = (angle * 0.5); // * 3.14159 / 180.0;\n\tfloat sin_half_angle = sin(half_angle);\n\tqr.x = axis.x * sin_half_angle;\n\tqr.y = axis.y * sin_half_angle;\n\tqr.z = axis.z * sin_half_angle;\n\tqr.w = cos(half_angle);\n\treturn qr;\n}\nvec3 rotate_with_axis_angle(vec3 position, vec3 axis, float angle)\n{\n\tvec4 q = quat_from_axis_angle(axis, angle);\n\tvec3 v = position.xyz;\n\treturn v + 2.0 * cross(q.xyz, cross(q.xyz, v) + q.w * v);\n}\n// vec3 applyQuaternionToVector( vec4 q, vec3 v ){\n// \treturn v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );\n// }\nvec3 rotate_with_quat( vec3 v, vec4 q )\n{\n\t// vec4 qv = multQuat( quat, vec4(vec, 0.0) );\n\t// return multQuat( qv, vec4(-quat.x, -quat.y, -quat.z, quat.w) ).xyz;\n\treturn v + 2.0 * cross( q.xyz, cross( q.xyz, v ) + q.w * v );\n}\n// https://github.com/glslify/glsl-look-at/blob/gh-pages/index.glsl\n// mat3 rotation_matrix(vec3 origin, vec3 target, float roll) {\n// \tvec3 rr = vec3(sin(roll), cos(roll), 0.0);\n// \tvec3 ww = normalize(target - origin);\n// \tvec3 uu = normalize(cross(ww, rr));\n// \tvec3 vv = normalize(cross(uu, ww));\n\n// \treturn mat3(uu, vv, ww);\n// }\n// mat3 rotation_matrix(vec3 target, float roll) {\n// \tvec3 rr = vec3(sin(roll), cos(roll), 0.0);\n// \tvec3 ww = normalize(target);\n// \tvec3 uu = normalize(cross(ww, rr));\n// \tvec3 vv = normalize(cross(uu, ww));\n\n// \treturn mat3(uu, vv, ww);\n// }\n\nfloat vector_angle(vec3 start, vec3 dest){\n\tstart = normalize(start);\n\tdest = normalize(dest);\n\n\tfloat cosTheta = dot(start, dest);\n\tvec3 c1 = cross(start, dest);\n\t// We use the dot product of the cross with the Y axis.\n\t// This is a little arbitrary, but can still give a good sense of direction\n\tvec3 y_axis = vec3(0.0, 1.0, 0.0);\n\tfloat d1 = dot(c1, y_axis);\n\tfloat angle = acos(cosTheta) * sign(d1);\n\treturn angle;\n}\n\n// http://www.opengl-tutorial.org/intermediate-tutorials/tutorial-17-quaternions/#i-need-an-equivalent-of-glulookat-how-do-i-orient-an-object-towards-a-point-\nvec4 vector_align(vec3 start, vec3 dest){\n\tstart = normalize(start);\n\tdest = normalize(dest);\n\n\tfloat cosTheta = dot(start, dest);\n\tvec3 axis;\n\n\t// if (cosTheta < -1 + 0.001f){\n\t// \t// special case when vectors in opposite directions:\n\t// \t// there is no "ideal" rotation axis\n\t// \t// So guess one; any will do as long as it\'s perpendicular to start\n\t// \taxis = cross(vec3(0.0f, 0.0f, 1.0f), start);\n\t// \tif (length2(axis) < 0.01 ) // bad luck, they were parallel, try again!\n\t// \t\taxis = cross(vec3(1.0f, 0.0f, 0.0f), start);\n\n\t// \taxis = normalize(axis);\n\t// \treturn gtx::quaternion::angleAxis(glm::radians(180.0f), axis);\n\t// }\n\tif(cosTheta > (1.0 - 0.0001) || cosTheta < (-1.0 + 0.0001) ){\n\t\taxis = normalize(cross(start, vec3(0.0, 1.0, 0.0)));\n\t\tif (length(axis) < 0.001 ){ // bad luck, they were parallel, try again!\n\t\t\taxis = normalize(cross(start, vec3(1.0, 0.0, 0.0)));\n\t\t}\n\t} else {\n\t\taxis = normalize(cross(start, dest));\n\t}\n\n\tfloat angle = acos(cosTheta);\n\n\treturn quat_from_axis_angle(axis, angle);\n}\nvec4 vector_align_with_up(vec3 start, vec3 dest, vec3 up){\n\tvec4 rot1 = vector_align(start, dest);\n\tup = normalize(up);\n\n\t// Recompute desiredUp so that it\'s perpendicular to the direction\n\t// You can skip that part if you really want to force desiredUp\n\t// vec3 right = normalize(cross(dest, up));\n\t// up = normalize(cross(right, dest));\n\n\t// Because of the 1rst rotation, the up is probably completely screwed up.\n\t// Find the rotation between the "up" of the rotated object, and the desired up\n\tvec3 newUp = rotate_with_quat(vec3(0.0, 1.0, 0.0), rot1);//rot1 * vec3(0.0, 1.0, 0.0);\n\tvec4 rot2 = vector_align(up, newUp);\n\n\t// return rot1;\n\treturn rot2;\n\t// return multQuat(rot1, rot2);\n\t// return rot2 * rot1;\n\n}\n\n// https://www.euclideanspace.com/maths/geometry/rotations/conversions/quaternionToAngle/index.htm\nfloat quat_to_angle(vec4 q){\n\treturn 2.0 * acos(q.w);\n}\nvec3 quat_to_axis(vec4 q){\n\treturn vec3(\n\t\tq.x / sqrt(1.0-q.w*q.w),\n\t\tq.y / sqrt(1.0-q.w*q.w),\n\t\tq.z / sqrt(1.0-q.w*q.w)\n\t);\n}\n\nvec4 align(vec3 dir, vec3 up){\n\tvec3 start_dir = vec3(0.0, 0.0, 1.0);\n\tvec3 start_up = vec3(0.0, 1.0, 0.0);\n\tvec4 rot1 = vector_align(start_dir, dir);\n\tup = normalize(up);\n\n\t// Recompute desiredUp so that it\'s perpendicular to the direction\n\t// You can skip that part if you really want to force desiredUp\n\tvec3 right = normalize(cross(dir, up));\n\tif(length(right)<0.001){\n\t\tright = vec3(1.0, 0.0, 0.0);\n\t}\n\tup = normalize(cross(right, dir));\n\n\t// Because of the 1rst rotation, the up is probably completely screwed up.\n\t// Find the rotation between the "up" of the rotated object, and the desired up\n\tvec3 newUp = rotate_with_quat(start_up, rot1);//rot1 * vec3(0.0, 1.0, 0.0);\n\tvec4 rot2 = vector_align(normalize(newUp), up);\n\n\t// return rot1;\n\treturn quat_mult(rot1, rot2);\n\t// return rot2 * rot1;\n\n}'},,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{static find_node(e,t,n){if(!e)return null;const s=t.split(r.SEPARATOR).filter(e=>e.length>0),o=s[0];let i=null;if(t[0]!==r.SEPARATOR){switch(o){case r.PARENT:null==n||n.add_path_element(o),i=e.parent;break;case r.CURRENT:null==n||n.add_path_element(o),i=e;break;default:i=e.node(o),i&&(null==n||n.add_node(o,i))}if(null!=i&&s.length>1){const e=s.slice(1).join(r.SEPARATOR);i=this.find_node(i,e,n)}return i}{const r=t.substr(1);i=this.find_node(e.root,r,n)}return i}static find_param(e,t,n){if(!e)return null;const s=t.split(r.SEPARATOR);if(1===s.length)return e.params.get(s[0]);{const t=s.slice(0,+(s.length-2)+1||void 0).join(r.SEPARATOR),o=this.find_node(e,t,n);if(null!=o){const e=s[s.length-1],t=o.params.get(e);return n&&t&&n.add_node(e,t),t}return null}}static relative_path(e,t){const n=this.closest_common_parent(e,t);if(n){const s=this.distance_to_parent(e,n);let o="";if(s-1>0){let e=0;const t=[];for(;e++<s-1;)t.push(r.PARENT);o=t.join(r.SEPARATOR)+r.SEPARATOR}const i=n.full_path().split(r.SEPARATOR).filter(e=>e.length>0),a=t.full_path().split(r.SEPARATOR).filter(e=>e.length>0),_=[];let c=0;for(let e of a)i[c]||_.push(e),c++;return`${o}${_.join(r.SEPARATOR)}`}return t.full_path()}static closest_common_parent(e,t){const n=this.parents(e).reverse(),r=this.parents(t).reverse(),s=Math.min(n.length,r.length);let o=null;for(let e=0;e<s;e++)n[e].graph_node_id==r[e].graph_node_id&&(o=n[e]);return o}static parents(e){const t=[];let n=e.parent;for(;n;)t.push(n),n=n.parent;return t}static distance_to_parent(e,t){let n=0,r=e;const s=t.graph_node_id;for(;r&&r.graph_node_id!=s;)n+=1,r=r.parent;return r&&r.graph_node_id==s?n:-1}static make_absolute_path(e,t){const n=t.split(r.SEPARATOR),s=n.shift();if(!s)return e.full_path();switch(s){case"..":return e.parent?this.make_absolute_path(e.parent,n.join(r.SEPARATOR)):null;case".":return this.make_absolute_path(e,n.join(r.SEPARATOR));default:return[e.full_path(),t].join(r.SEPARATOR)}}}t.CoreWalker=r,r.SEPARATOR="/",r.DOT=".",r.CURRENT=r.DOT,r.PARENT="..",r.CURRENT_WITH_SLASH=`${r.CURRENT}/`,r.PARENT_WITH_SLASH=`${r.PARENT}/`,r.NON_LETTER_PREFIXES=[r.SEPARATOR,r.DOT]},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.VISIBLE_UPDATED="param_visible_updated",e.RAW_INPUT_UPDATED="raw_input_updated",e.VALUE_UPDATED="param_value_updated",e.EXPRESSION_UPDATED="param_expression_update",e.ERROR_UPDATED="param_error_updated",e.DELETED="param_deleted"}(t.ParamEvent||(t.ParamEvent={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(1),o={Triangle:n(98).Triangle,Vector3:s.Vector3},i=r.__importDefault(n(44)),a=n(352),_=Math.PI/180;class c{static clamp(e,t,n){return e<t?t:e>n?n:e}static fit01(e,t,n){return this.fit(e,0,1,t,n)}static fit(e,t,n,r,s){return(e-t)/(n-t)*(s-r)+r}static degrees_to_radians(e){return e*_}static radians_to_degrees(e){return e/_}static deg2rad(e){return this.degrees_to_radians(e)}static rad2deg(e){return this.radians_to_degrees(e)}static rand(e){return i.default(e)?this.rand_float(e):this.rand_vec2(e)}static round(e,t){const n=e/t,r=e<0?Math.ceil(n):Math.floor(n);return console.log("round",t,e,n,r,r*t),r*t}static highest_even(e){return 2*Math.ceil(.5*e)}static rand_float(e){const t={x:e,y:136574};return this.rand_vec2(t)}static rand_vec2(e){const t=(12.9898*e.x+78.233*e.y)%Math.PI;return this.fract(43758.5453*Math.sin(t))}static geodesic_distance(e,t){var n=this.deg2rad(e.lat),r=this.deg2rad(t.lat),s=this.deg2rad(t.lat-e.lat),o=this.deg2rad(t.lng-e.lng),i=Math.sin(s/2)*Math.sin(s/2)+Math.cos(n)*Math.cos(r)*Math.sin(o/2)*Math.sin(o/2);return 6371e3*(2*Math.atan2(Math.sqrt(i),Math.sqrt(1-i)))}static expand_triangle(e,t){const n=new o.Vector3;let r;e.getMidpoint(n),function(e){e.a="a",e.b="b",e.c="c"}(r||(r={}));for(let r of["a","b","c"]){const s=e[r].clone().sub(n),o=s.clone().normalize(),i=s.length()+t;e[r]=n.clone().add(o.multiplyScalar(i))}return e}static nearestPower2(e){return Math.pow(2,Math.ceil(Math.log(e)/Math.log(2)))}}t.CoreMath=c,c.Easing=a.Easing,c.fract=e=>e-Math.floor(e)},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(159),s=n(0),o=n(0),i=n(0),a=n(9),_=n(68),c=n(5);function l(e){return class extends e{constructor(){super(...arguments),this.double_sided=c.ParamConfig.BOOLEAN(0),this.front=c.ParamConfig.BOOLEAN(1,{visible_if:{double_sided:!1}})}}}t.SideParamConfig=l;a.Material;l(c.NodeParamsConfig);_.TypedMatNode;class u extends r.BaseController{static update(e){const t=e.pv.front?s.FrontSide:i.BackSide,n=e.pv.double_sided?o.DoubleSide:t;n!=e.material.side&&(e.material.side=n,e.material.needsUpdate=!0)}}t.SideController=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(158),o=n(28),i=n(50),a=n(29),_=n(16),c=n(129),l=n(26),u=n(269);!function(e){e.DISTANCE="customDistanceMaterial",e.DEPTH="customDepthMaterial",e.DEPTH_DOF="customDepthDOFMaterial"}(t.CustomMaterialName||(t.CustomMaterialName={}));class d extends s.BaseGlShaderAssembler{constructor(){super(...arguments),this._assemblers_by_custom_name=new Map}create_material(){return new l.ShaderMaterial}custom_assembler_class_by_custom_name(){}_add_custom_materials(e){const t=this.custom_assembler_class_by_custom_name();t&&t.forEach((t,n)=>{this._add_custom_material(e,n,t)})}_add_custom_material(e,t,n){let r=this._assemblers_by_custom_name.get(t);r||(r=new n(this._gl_parent_node),this._assemblers_by_custom_name.set(t,r)),e.custom_materials=e.custom_materials||{},e.custom_materials[t]=r.create_material()}compile_custom_materials(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=this.custom_assembler_class_by_custom_name();t&&t.forEach((t,n)=>r.__awaiter(this,void 0,void 0,(function*(){if(this._code_builder){let r=this._assemblers_by_custom_name.get(n);r||(r=new t(this._gl_parent_node),this._assemblers_by_custom_name.set(n,r)),r.set_root_nodes(this._root_nodes),r.set_param_configs_owner(this._code_builder),r.set_shader_configs(this.shader_configs),r.set_variable_configs(this.variable_configs());const s=e.custom_materials[n];s&&(yield r.compile_material(s))}})))}))}compile_material(e){return r.__awaiter(this,void 0,void 0,(function*(){if(!this.compile_allowed())return;const t=u.GlNodeFinder.find_output_nodes(this._gl_parent_node);t.length>1&&this._gl_parent_node.states.error.set("only one output node allowed"),this.set_root_nodes(t),yield this._update_shaders();const n=this._shaders_by_name.get(i.ShaderName.VERTEX),r=this._shaders_by_name.get(i.ShaderName.FRAGMENT);n&&r&&(e.vertexShader=n,e.fragmentShader=r,this.add_uniforms(e.uniforms),e.needsUpdate=!0);const s=this._gl_parent_node.scene;this.uniforms_time_dependent()?s.uniforms_controller.add_time_dependent_uniform_owner(e.uuid,e.uniforms):s.uniforms_controller.remove_time_dependent_uniform_owner(e.uuid),e.custom_materials&&(yield this.compile_custom_materials(e))}))}_update_shaders(){return r.__awaiter(this,void 0,void 0,(function*(){this._shaders_by_name=new Map,this._lines=new Map;for(let e of this.shader_names){const t=this._template_shader_for_shader_name(e);t&&this._lines.set(e,t.split("\n"))}this._root_nodes.length>0&&(yield this.build_code_from_nodes(this._root_nodes),this._build_lines());for(let e of this.shader_names){const t=this._lines.get(e);t&&this._shaders_by_name.set(e,t.join("\n"))}}))}shadow_assembler_class_by_custom_name(){return{}}add_output_body_line(e,t,n){var r;const s=e.io.inputs.named_input(n),i=e.variable_for_input(n),a=this.variable_config(n);let _=null;if(s)_=o.ThreeToGl.vector3(i);else if(a.default_from_attribute()){const s=e.io.inputs.named_input_connection_points_by_name(n);if(s){const o=s.type,i=null===(r=this.globals_handler)||void 0===r?void 0:r.read_attribute(e,o,n,t);i&&(_=i)}}else{const e=a.default();e&&(_=e)}if(_){const n=a.prefix(),r=a.suffix(),s=a.if_condition();s&&t.add_body_lines(e,[`#if ${s}`]),t.add_body_lines(e,[`${n}${_}${r}`]),s&&t.add_body_lines(e,["#endif"])}}set_node_lines_output(e,t){var n;const r=t.current_shader_name,s=null===(n=this.shader_config(r))||void 0===n?void 0:n.input_names();if(s)for(let n of s)this.add_output_body_line(e,t,n)}set_node_lines_attribute(e,t){var n;const r=e.gl_type(),s=null===(n=this.globals_handler)||void 0===n?void 0:n.read_attribute(e,r,e.attribute_name,t),o=e.gl_var_name(e.output_name);t.add_body_lines(e,[`${r} ${o} = ${s}`])}handle_gl_FragCoord(e,t,n){t==i.ShaderName.FRAGMENT&&e.push(`vec4 ${n} = gl_FragCoord`)}handle_resolution(e,t,n){t==i.ShaderName.FRAGMENT&&e.push(`vec2 ${n} = resolution`)}set_node_lines_globals(e,t){var n;const r=[],s=t.current_shader_name,o=this.shader_config(s);if(!o)return;const l=o.dependencies(),u=new Map,d=new Map;let h,p;for(let o of e.io.outputs.used_output_names()){const m=e.gl_var_name(o),f=t.current_shader_name;switch(o){case"time":h=new a.UniformGLDefinition(e,_.ConnectionPointType.FLOAT,o),f&&c.MapUtils.push_on_array_at_entry(u,f,h),p=`float ${m} = ${o}`;for(let e of l)c.MapUtils.push_on_array_at_entry(u,e,h),c.MapUtils.push_on_array_at_entry(d,e,p);r.push(p),this.set_uniforms_time_dependent();break;case"gl_FragCoord":this.handle_gl_FragCoord(r,s,m);break;case"resolution":this.handle_resolution(r,s,m),h=new a.UniformGLDefinition(e,_.ConnectionPointType.VEC2,o),f&&c.MapUtils.push_on_array_at_entry(u,f,h);for(let e of l)c.MapUtils.push_on_array_at_entry(u,e,h);this.set_resolution_dependent();break;case"gl_PointCoord":s==i.ShaderName.FRAGMENT&&r.push(`vec2 ${m} = gl_PointCoord`);break;default:null===(n=this.globals_handler)||void 0===n||n.handle_globals_node(e,o,t)}}u.forEach((n,r)=>{t.add_definitions(e,n,r)}),d.forEach((n,r)=>{t.add_body_lines(e,n,r)}),t.add_body_lines(e,r)}}t.ShaderAssemblerMaterial=d},,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3);class s{constructor(e,t){this.node=e,this._callbacks=[],this._container=new t(this.node)}get container(){return this._container}request_container(){return new Promise((e,t)=>{this._callbacks.push(e),this.node.scene.cook_controller.add_node(this.node),setTimeout(this.process_container_request.bind(this),0)})}process_container_request(){var e,t;if(null===(t=null===(e=this.node.flags)||void 0===e?void 0:e.bypass)||void 0===t?void 0:t.active){const e=0;this.request_input_container(e).then(e=>{this.node.remove_dirty_state(),e?this.notify_requesters(e):this.node.states.error.set("input invalid")})}else this.node.is_dirty?(this.node.container_controller.container.reset_caches(),this.node.cook_controller.cook_main()):this.notify_requesters()}request_input_container(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=this.node.io.inputs.input(e);if(t){return t.processing_context.copy(this.node.processing_context),yield t.container_controller.request_container()}return this.node.states.error.set(`input ${e} required`),this.notify_requesters(),null}))}notify_requesters(e){let t;const n=[];for(;t=this._callbacks.pop();)n.push(t);for(e||(e=this.node.container_controller.container.clone());t=n.pop();)t(e);this.node.scene.cook_controller.remove_node(this.node)}}t.TypedContainerController=s;t.BaseContainerController=class extends s{}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),s={Vector2:n(2).Vector2,Vector3:r.Vector3},o={P:"position",N:"normal",Cd:"color"};t.CoreAttribute=class{static remap_name(e){return o[e]||e}static array_to_indexed_arrays(e){const t={};let n=0;const r=[],s=[];let o=0;for(;o<e.length;){const i=e[o],a=t[i];null!=a?r.push(a):(s.push(i),r.push(n),t[i]=n,n+=1),o++}return{indices:r,values:s}}static default_value(e){switch(e){case 1:return 0;case 2:return new s.Vector2(0,0);case 3:return new s.Vector3(0,0,0);default:throw`size ${e} not yet implemented`}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e){this._node=e}set_node(e){this._node=e}node(){return this._node}clone(){let e;const t=new this.constructor;return t.set_node(this.node()),null!=(e=this.content())&&t.set_content(e),t}reset_caches(){}set_content(e){this.reset_caches(),this._content=e,this._post_set_content()}has_content(){return null!=this._content}content(){return this._content}_post_set_content(){}core_content(){return this._content}core_content_cloned(){return this._content}infos(){return[]}}t.TypedContainer=r;t.BaseContainer=class extends r{}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(159),s=n(9),o=n(5),i=n(68);function a(e){return class extends e{constructor(){super(...arguments),this.skinning=o.ParamConfig.BOOLEAN(0)}}}t.SkinningParamConfig=a;s.Material;a(o.NodeParamsConfig);i.TypedMatNode;class _ extends r.BaseController{static update(e){const t=e.pv.skinning;t!=e.material.skinning&&(e.material.skinning=t,e.material.needsUpdate=!0)}}t.SkinningController=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(9),o=n(135),i=n(68),a=n(272),_=n(5);function c(e){return class extends e{constructor(){super(...arguments),this.use_map=_.ParamConfig.BOOLEAN(0,a.BooleanParamOptions(l)),this.map=_.ParamConfig.OPERATOR_PATH(o.FileCopNode.DEFAULT_NODE_PATH.UV,a.OperatorPathOptions(l,"use_map"))}}}t.TextureMapParamConfig=c;s.Material;c(_.NodeParamsConfig);i.TypedMatNode;class l extends a.BaseTextureMapController{constructor(e,t){super(e,t)}initialize_node(){this.add_hooks(this.node.p.use_map,this.node.p.map)}update(){return r.__awaiter(this,void 0,void 0,(function*(){this._update(this.node.material,"map",this.node.p.use_map,this.node.p.map)}))}static update(e){return r.__awaiter(this,void 0,void 0,(function*(){e.texture_map_controller.update()}))}}t.TextureMapController=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(9),o=n(135),i=n(68),a=n(272),_=n(5);function c(e){return class extends e{constructor(){super(...arguments),this.use_alpha_map=_.ParamConfig.BOOLEAN(0,a.BooleanParamOptions(l)),this.alpha_map=_.ParamConfig.OPERATOR_PATH(o.FileCopNode.DEFAULT_NODE_PATH.UV,a.OperatorPathOptions(l,"use_alpha_map"))}}}t.TextureAlphaMapParamConfig=c;s.Material;c(_.NodeParamsConfig);i.TypedMatNode;class l extends a.BaseTextureMapController{constructor(e,t){super(e,t)}initialize_node(){this.add_hooks(this.node.p.use_alpha_map,this.node.p.alpha_map)}update(){return r.__awaiter(this,void 0,void 0,(function*(){this._update(this.node.material,"alphaMap",this.node.p.use_alpha_map,this.node.p.alpha_map)}))}static update(e){return r.__awaiter(this,void 0,void 0,(function*(){e.texture_alpha_map_controller.update()}))}}t.TextureAlphaMapController=l},,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3).__importDefault(n(102)),s=n(0),o=n(70),i=n(284),a=n(93),_=n(607),c=n(24),l=n(103);class u extends a.TypedParam{constructor(){super(...arguments),this._reset_ramp_interpolant_and_texture_bound=this._reset_ramp_interpolant_and_texture.bind(this)}static type(){return c.ParamType.RAMP}get default_value_serialized(){return this.default_value instanceof _.RampValue?this.default_value.to_json():this.default_value}_clone_raw_input(e){return e instanceof _.RampValue?e.clone():_.RampValue.from_json(e).to_json()}get raw_input_serialized(){return this._raw_input instanceof _.RampValue?this._raw_input.to_json():_.RampValue.from_json(this._raw_input).to_json()}get value_serialized(){return this.value.to_json()}static are_raw_input_equal(e,t){return e instanceof _.RampValue?t instanceof _.RampValue?e.is_equal(t):e.is_equal_json(t):t instanceof _.RampValue?t.is_equal_json(e):_.RampValue.are_json_equal(e,t)}static are_values_equal(e,t){return e.is_equal(t)}initialize_param(){this.add_post_dirty_hook("_reset_ramp_interpolant_and_texture",this._reset_ramp_interpolant_and_texture_bound)}get is_default(){return this.default_value instanceof _.RampValue?this.value.is_equal(this.default_value):this.value.is_equal_json(this.default_value)}process_raw_input(){this._raw_input instanceof _.RampValue?this._value?this._value.copy(this._raw_input):this._value=this._raw_input:this._value?this._value.from_json(this._raw_input):this._value=_.RampValue.from_json(this._raw_input),this.emit_controller.emit(l.ParamEvent.VALUE_UPDATED)}has_expression(){return!1}_reset_ramp_interpolant_and_texture(){this._ramp_interpolant=void 0,this._ramp_texture=void 0}ramp_texture(){return this._ramp_texture=this._ramp_texture||this._create_ramp_texture()}_create_ramp_texture(){const e=new Uint8Array(3072);let t=0,n=0,r=0;for(var i=0;i<1024;i++)t=3*i,n=i/1024,r=this.value_at_position(n),e[t]=255*r;const a=new o.DataTexture(e,1024,1,s.RGBFormat);return a.needsUpdate=!0,a}static create_interpolant(e,t){const n=new Float32Array(1);return new i.CubicInterpolant(e,t,1,n)}interpolant(){return this._ramp_interpolant=this._ramp_interpolant||this._create_interpolant()}_create_interpolant(){const e=this.value.points,t=r.default(e,e=>e.position),n=new Float32Array(t.length),s=new Float32Array(t.length);let o=0;for(let e of t)n[o]=e.position,s[o]=e.value,o++;return u.create_interpolant(n,s)}value_at_position(e){return this.interpolant().evaluate(e)[0]}}t.RampParam=u,u.DEFAULT_VALUE=new _.RampValue(_.RampInterpolation.LINEAR,[new _.RampPoint(0,0),new _.RampPoint(1,1)]),u.DEFAULT_VALUE_JSON=u.DEFAULT_VALUE.to_json()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.MapUtils=class{static push_on_array_at_entry(e,t,n){e.has(t)?e.get(t).push(n):e.set(t,[n])}static unshift_on_array_at_entry(e,t,n){e.has(t)?e.get(t).unshift(n):e.set(t,[n])}static concat_on_array_at_entry(e,t,n){if(e.has(t)){let r=e.get(t);for(let e of n)r.push(e)}else e.set(t,n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.CATEGORY_OBJ={LIGHT:"lights",MANAGER:"managers",GEOMETRY:"geometries",CAMERA:"cameras",MISC:"misc"},t.CATEGORY_COP={INPUT:"inputs",ADVANCED:"advanced",MISC:"misc"},t.CATEGORY_EVENT={CAMERA:"cameras",MISC:"misc"},t.CATEGORY_GL={COLOR:"color",CONVERSION:"conversion",DYNAMICS:"dynamics",GEOMETRY:"geometry",GLOBALS:"globals",LOGIC:"logic",MATH:"math",QUAT:"quat",TRIGO:"trigo",UTIL:"util",INSTANCE:"instance"},t.CATEGORY_MAT={ADVANCED:"advanced",MESH:"meshes",POINTS:"points",LINE:"lines",VOLUME:"volumes",INSTANCE:"instances"},t.CATEGORY_SOP={ADVANCED:"advanced",ANIMATION:"animation",ATTRIBUTE:"attributes",DYNAMICS:"dynamics",INPUT:"inputs",MISC:"misc",MODIFIER:"modifiers",PRIMITIVES:"primitives",RENDER:"render"},t.CATEGORY_POST={PASS:"passes"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(90),s=n(645),o=n(113),i=n(27),a=n(94),_=n(70),c=n(0),l=["input texture","input texture","input texture","input texture"];for(var u=new Uint16Array(32),d=0;d<32;d++)u[d]=28898;const h=new _.DataTexture(u,32,1,c.LuminanceFormat,c.HalfFloatType);class p extends r.TypedNode{constructor(e){super(e,"BaseCopNode"),this.container_controller=new o.TypedContainerController(this,s.TextureContainer),this.flags=new a.FlagsControllerB(this)}static node_context(){return i.NodeContext.COP}static displayed_input_names(){return l}initialize_base_node(){this.io.outputs.set_has_one_output()}node_sibbling(e){return super.node_sibbling(e)}set_texture(e){e.name=this.full_path(),this.set_container(e)}clear_texture(){this.set_container(h)}}t.TypedCopNode=p;t.BaseCopNodeClass=class extends p{}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=r.__importDefault(n(648)),o=r.__importDefault(n(361)),i=r.__importDefault(n(345)),a=n(2),_=n(90),c=n(133),l=n(265);class u extends _.TypedNode{create_node(e){return super.create_node(e)}children(){return super.children()}nodes_by_type(e){return super.nodes_by_type(e)}}t.AssemblerControllerNode=u;t.GlAssemblerController=class{constructor(e,t){this.node=e,this._globals_handler=new c.GlobalsGeometryHandler,this._compile_required=!0,this._deleted_params_data=new Map,this._assembler=new t(this.node)}set_assembler_globals_handler(e){(this._globals_handler?this._globals_handler.id():null)!=(e?e.id():null)&&(this._globals_handler=e,this.set_compilation_required_and_dirty(),this._assembler.reset_configs())}get assembler(){return this._assembler}get globals_handler(){return this._globals_handler}add_output_params(e){this._assembler.add_output_params(e)}add_globals_params(e){this._assembler.add_globals_params(e)}allow_attribute_exports(){return this._assembler.allow_attribute_exports()}on_create(){const e=this.node.create_node("globals"),t=this.node.create_node("output");e.ui_data.set_position(new a.Vector2(-200,0)),t.ui_data.set_position(new a.Vector2(200,0))}set_compilation_required(e=!0){this._compile_required=e}set_compilation_required_and_dirty(e){this.set_compilation_required(),this.node.set_dirty(e)}compile_required(){return this._compile_required}post_compile(){return r.__awaiter(this,void 0,void 0,(function*(){this.create_spare_parameters(),this.set_compilation_required(!1)}))}assign_uniform_values(){return r.__awaiter(this,void 0,void 0,(function*(){if(this._assembler)for(let e of this._assembler.param_configs())yield e.set_uniform_value(this.node)}))}create_spare_parameters(){const e=this.node.params.spare_names,t=this._assembler.param_configs(),n=t.map(e=>e.name),r=i.default(n,e),a=i.default(e,n),_={},c=this.node.params.names,u=o.default(r,c);if(u.length>0){const e=`${this.node.full_path()} attempts to create spare params called '${u.join(", ")}' with same name as params`;console.warn(e),this.node.states.error.set(e)}a.forEach(e=>{const t=this.node.params.get(e);if(t){const e=l.JsonExportDispatcher.dispatch_param(t);if(e.required){const n=e.data();this._deleted_params_data.set(t.name,n)}}_.names_to_delete=_.names_to_delete||[],_.names_to_delete.push(e)});for(let e of t)if(r.indexOf(e.name)>=0){const t=s.default(e.param_options,{spare:!0,cook:!0});_.to_add=_.to_add||[],_.to_add.push({name:e.name,type:e.type,init_value:e.default_value,options:t})}this.node.params.update_params(_)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(362),s=n(264),o=n(29),i=n(129),a=n(50),_={position:"vec3( position )"};class c extends r.GlobalsBaseController{handle_globals_node(e,t,n){var r;const s=e.io.outputs.named_output_connection_points_by_name(t);if(!s)return;const i=e.gl_var_name(t),a=s.type,_=new o.VaryingGLDefinition(e,a,i);n.add_definitions(e,[_]);const c=null===(r=e.material_node)||void 0===r?void 0:r.assembler_controller.assembler;if(!c)return;const l=c.shader_config(n.current_shader_name);if(!l)return;const u=l.dependencies(),d=`${i} = ${a}(${t})`;for(let t of u)n.add_definitions(e,[_],t),n.add_body_lines(e,[d],t);0==u.length&&n.add_body_lines(e,[d])}static variable_config_default(e){return _[e]}variable_config_default(e){return c.variable_config_default(e)}read_attribute(e,t,n,r){return c.read_attribute(e,t,n,r)}static read_attribute(e,t,n,r){var _;c.PRE_DEFINED_ATTRIBUTES.indexOf(n)<0&&r.add_definitions(e,[new o.AttributeGLDefinition(e,t,n)],a.ShaderName.VERTEX);const l=r.current_shader_name;switch(l){case a.ShaderName.VERTEX:return n;case a.ShaderName.FRAGMENT:{if(!(e instanceof s.AttributeGlNode))return;const c="varying_"+e.gl_var_name(e.output_name),u=new o.VaryingGLDefinition(e,t,c),d=new Map;d.set(a.ShaderName.FRAGMENT,[]);const h=new Map;h.set(a.ShaderName.FRAGMENT,[]),i.MapUtils.push_on_array_at_entry(d,l,u);const p=`${c} = ${t}(${n})`,m=null===(_=e.material_node)||void 0===_?void 0:_.assembler_controller.assembler.shader_config(l);if(m){const t=m.dependencies();for(let e of t)i.MapUtils.push_on_array_at_entry(d,e,u),i.MapUtils.push_on_array_at_entry(h,e,p);d.forEach((t,n)=>{r.add_definitions(e,t,n)}),h.forEach((t,n)=>{r.add_body_lines(e,t,n)})}return c}}}handle_attribute_node(e,t,n,r){return c.read_attribute(e,t,n,r)}}t.GlobalsGeometryHandler=c,c.PRE_DEFINED_ATTRIBUTES=["position","color","normal","uv","uv2","morphTarget0","morphTarget1","morphTarget2","morphTarget3","skinIndex","skinWeight"],c.IF_RULE={uv:"defined( USE_MAP ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( USE_SPECULARMAP ) || defined( USE_ALPHAMAP ) || defined( USE_EMISSIVEMAP ) || defined( USE_ROUGHNESSMAP ) || defined( USE_METALNESSMAP )"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(16),s=n(33);t.GlConnectionsController=class{constructor(e){this.node=e,this._input_name_function=e=>`in${e}`,this._output_name_function=e=>0==e?"val":`val${e}`,this._expected_input_types_function=()=>{const e=this.first_input_connection_type()||r.ConnectionPointType.FLOAT;return[e,e]},this._expected_output_types_function=()=>[this._expected_input_types_function()[0]],this._update_signature_if_required_bound=this.update_signature_if_required.bind(this),this._initialized=!1}set_input_name_function(e){this._input_name_function=e}set_output_name_function(e){this._output_name_function=e}set_expected_input_types_function(e){this._expected_input_types_function=e}set_expected_output_types_function(e){this._expected_output_types_function=e}output_name(e){return this._output_name_function(e)}initialize_node(){this._initialized?console.warn("already initialized",this.node):(this._initialized=!0,this.node.io.inputs.add_on_set_input_hook("_update_signature_if_required",this._update_signature_if_required_bound),this.node.params.add_on_scene_load_hook("_update_signature_if_required",this._update_signature_if_required_bound),this.node.params.set_post_create_params_hook(this._update_signature_if_required_bound),this.node.add_post_dirty_hook("_update_signature_if_required",this._update_signature_if_required_bound))}update_signature_if_required(e){this.node.lifecycle.creation_completed&&this._connections_match_inputs()||(this.update_connection_types(),this.node.remove_dirty_state(),this.make_successors_update_signatures())}make_successors_update_signatures(){for(let e of this.node.graph_all_successors()){const t=e;t.gl_connections_controller&&t.gl_connections_controller.update_signature_if_required(this.node)}}update_connection_types(){const e=this._expected_input_types_function(),t=this._expected_output_types_function(),n=e.map((e,t)=>new s.TypedNamedConnectionPoint(this._input_name_function(t),e)),r=t.map((e,t)=>new s.TypedNamedConnectionPoint(this._output_name_function(t),e));this.node.io.inputs.set_named_input_connection_points(n),this.node.io.outputs.set_named_output_connection_points(r,!1),this.node.spare_params_controller.create_spare_parameters()}_connections_match_inputs(){const e=this.node.io.inputs.named_input_connection_points.map(e=>e.type),t=this.node.io.outputs.named_output_connection_points.map(e=>e.type),n=this._expected_input_types_function(),r=this._expected_output_types_function();if(n.length!=e.length)return!1;if(r.length!=t.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!=n[t])return!1;for(let e=0;e<t.length;e++)if(t[e]!=r[e])return!1;return!0}first_input_connection_type(){const e=this.node.io.connections.input_connections();if(e){const t=e[0];if(t)return this.connection_type_from_connection(t)}}connection_type_from_connection(e){const t=e.node_src,n=e.output_index;return t.io.outputs.named_output_connection_points[n].type}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(268),o=n(0),i=n(131),a=n(673),_=n(24),c=n(61),l=[{UVMapping:o.UVMapping},{CubeReflectionMapping:o.CubeReflectionMapping},{CubeRefractionMapping:o.CubeRefractionMapping},{EquirectangularReflectionMapping:o.EquirectangularReflectionMapping},{EquirectangularRefractionMapping:o.EquirectangularRefractionMapping},{SphericalReflectionMapping:o.SphericalReflectionMapping},{CubeUVReflectionMapping:o.CubeUVReflectionMapping},{CubeUVRefractionMapping:o.CubeUVRefractionMapping}],u=[{ClampToEdgeWrapping:o.ClampToEdgeWrapping},{RepeatWrapping:o.RepeatWrapping},{MirroredRepeatWrapping:o.MirroredRepeatWrapping}],d=[{LinearFilter:o.LinearFilter},{NearestFilter:o.NearestFilter}],h=[{NearestFilter:o.NearestFilter},{NearestMipMapNearestFilter:o.NearestMipMapNearestFilter},{NearestMipMapLinearFilter:o.NearestMipMapLinearFilter},{LinearFilter:o.LinearFilter},{LinearMipMapNearestFilter:o.LinearMipMapNearestFilter},{LinearMipMapLinearFilter:o.LinearMipMapLinearFilter}],p=["mapping","wrapS","wrapT","minFilter","magFilter"],m={mapping:"mapping",wrapS:"wrap_s",wrapT:"wrap_t",minFilter:"min_filter",magFilter:"mag_filter"},f=n(5);class g extends f.NodeParamsConfig{constructor(){super(...arguments),this.url=f.ParamConfig.STRING(a.CoreTextureLoader.PARAM_DEFAULT,{desktop_browse:{file_type:"texture"}}),this.reload=f.ParamConfig.BUTTON(null,{callback:(e,t)=>{y.PARAM_CALLBACK_reload(e,t)}}),this.mapping=f.ParamConfig.INTEGER(o.UVMapping,{menu:{entries:l.map(e=>({name:Object.keys(e)[0],value:Object.values(e)[0]}))}}),this.wrap_s=f.ParamConfig.INTEGER(Object.values(u[0])[0],{menu:{entries:u.map(e=>({name:Object.keys(e)[0],value:Object.values(e)[0]}))}}),this.wrap_t=f.ParamConfig.INTEGER(Object.values(u[0])[0],{menu:{entries:u.map(e=>({name:Object.keys(e)[0],value:Object.values(e)[0]}))}}),this.mag_filter=f.ParamConfig.INTEGER(Object.values(d[0])[0],{menu:{entries:d.map(e=>({name:Object.keys(e)[0],value:Object.values(e)[0]}))}}),this.min_filter=f.ParamConfig.INTEGER(Object.values(h[0])[0],{menu:{entries:h.map(e=>({name:Object.keys(e)[0],value:Object.values(e)[0]}))}})}}const v=new g;class y extends i.TypedCopNode{constructor(){super(...arguments),this.params_config=v}static type(){return"file"}cook(){return r.__awaiter(this,void 0,void 0,(function*(){this._is_static_image_url(this.pv.url)?yield this.cook_for_image():yield this.cook_for_video()}))}_is_static_image_url(e){return!0}cook_for_image(){return r.__awaiter(this,void 0,void 0,(function*(){const e=yield this._load_texture(this.pv.url);e?(this._update_texture_params(e),this.set_texture(e)):this.clear_texture()}))}cook_for_video(){return r.__awaiter(this,void 0,void 0,(function*(){if(this._param_url_changed()){const e=yield this._load_texture(this.pv.url);e&&this._add_video_spare_params_if_required(e),this._previous_param_url=this.pv.url,this._set_video_current_time(),e?(this._update_texture_params(e),this.set_texture(e)):this.cook_controller.end_cook()}}))}resolved_url(){return this.pv.url}_update_texture_params(e){for(let t of p){const n=m[t],r=this.params.float(n);null!=r&&e&&e[t]!=r&&(e[t]=r,e.needsUpdate=!0)}}static PARAM_CALLBACK_reload(e,t){e.param_callback_reload()}param_callback_reload(){this._previous_param_url=void 0,this.p.url.set_successors_dirty()}_set_video_current_time(){this._video&&this.params.has("video_time")&&(this._video.currentTime=this.params.float("video_time"))}_add_video_spare_params_if_required(e){if(e){if(e.constructor==s.VideoTexture){if(this._video=e.image,this._video&&!this.params.has_param(y.VIDEO_TIME_PARAM_NAME)){const e=this._video.duration;this.add_param(_.ParamType.FLOAT,y.VIDEO_TIME_PARAM_NAME,"$T",{spare:!0,cook:!0,range:[0,e],range_locked:[!0,!0]}),this.emit(c.NodeEvent.PARAMS_UPDATED)}}else this._remove_spare_params()}else this._remove_spare_params()}_remove_spare_params(){this.params.has_param(y.VIDEO_TIME_PARAM_NAME)&&this.params.update_params({names_to_delete:[y.VIDEO_TIME_PARAM_NAME]})}_param_url_changed(){return this._previous_param_url!=this.pv.url}_load_texture(e){return r.__awaiter(this,void 0,void 0,(function*(){let t=null;const n=this.params.get("url");if(e&&n){this._texture_loader=this._texture_loader||new a.CoreTextureLoader(this,n);try{t=yield this._texture_loader.load_texture_from_url_or_op(e)}catch(e){}t||this.states.error.set(`could not load texture '${e}'`)}else this.states.error.set("not url given to Mat/Base._load_texture");return t}))}}t.FileCopNode=y,y.VIDEO_TIME_PARAM_NAME="video_time",y.DEFAULT_NODE_PATH={UV:"/COP/file_uv",ENV_MAP:"/COP/env_map"}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(271),o=n(54),i=n(22),a=n(56),_=n(27),c=n(5);t.CameraBackgroundParamConfig=function(e){return class extends e{constructor(){super(...arguments),this.background=c.ParamConfig.FOLDER(),this.use_background=c.ParamConfig.BOOLEAN(0),this.use_material=c.ParamConfig.BOOLEAN(0,{visible_if:{use_background:!0}}),this.background_color=c.ParamConfig.COLOR([0,0,0],{visible_if:{use_background:!0,use_material:!1}}),this.background_material=c.ParamConfig.OPERATOR_PATH("",{visible_if:{use_background:!0,use_material:!0},node_selection:{context:_.NodeContext.MAT},dependent_on_found_node:!1}),this.background_ratio=c.ParamConfig.FLOAT(1,{visible_if:{use_background:!0,use_material:!0}})}}};t.BaseBackgroundController=class{constructor(e){this.node=e,this._bg_raycaster=new s.Raycaster}get screen_quad(){return this._screen_quad=this._screen_quad||this._create_screen_quad()}_create_screen_quad(){const e=new o.PlaneBufferGeometry(2,2,1,1),t=new i.Mesh(e);return this.node.object.add(t),t}screen_quad_flat_material(){return this._screen_quad_flat_material=this._screen_quad_flat_material||new a.MeshBasicMaterial}add_params(){}get use_background(){return this.node.params.boolean("use_background")}get use_background_material(){return this.use_background&&this.node.params.boolean("use_material")}get use_background_color(){return this.use_background&&!this.node.params.boolean("use_material")}get background_color(){return this.use_background_color?this.node.params.color("background_color"):null}update_screen_quad(){}update(){return r.__awaiter(this,void 0,void 0,(function*(){this.use_background?(this.update_screen_quad(),yield this.update_background_color(),this.use_background_material&&(yield this.update_background_material())):this._screen_quad&&this.node.object.remove(this._screen_quad)}))}update_background_color(){return r.__awaiter(this,void 0,void 0,(function*(){const e=this.screen_quad_flat_material();e.color=this.node.pv.background_color,this.screen_quad.material=e}))}update_background_material(){return r.__awaiter(this,void 0,void 0,(function*(){const e=this.node.p.background_material.found_node();if(e){yield e.request_container();const t=e.material;this.screen_quad.material=t}else this.node.states.error.set("bg node not found")}))}}},,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=r.__importDefault(n(21)),o=n(93),i=n(353),a=n(103);class _ extends o.TypedParam{constructor(){super(...arguments),this._components_contructor=i.FloatParam}get components(){return this._components}get is_numeric(){return!0}get is_default(){for(let e of this.components)if(!e.is_default)return!1;return!0}get raw_input(){return this._components.map(e=>e.raw_input)}get raw_input_serialized(){return this.raw_input}init_components(){if(null!=this._components)return;let e=0;this._components=new Array(this.component_names.length);for(let t of this.component_names){const n=new this._components_contructor(this.scene);let r;r=s.default(this._default_value)?this._default_value[e]:this._default_value[t],n.options.copy(this.options),n.set_init_value(r),n.set_name(`${this.name}${t}`),n.set_parent_param(this),this.add_graph_input(n),this._components[e]=n,e++}}process_computation(){return r.__awaiter(this,void 0,void 0,(function*(){yield this.compute_components(),this.set_value_from_components()}))}set_value_from_components(){}has_expression(){var e;for(let t of this.components)if(null===(e=t.expression_controller)||void 0===e?void 0:e.active)return!0;return!1}compute_components(){return r.__awaiter(this,void 0,void 0,(function*(){const e=this.components,t=[];for(let n of e)n.is_dirty&&t.push(n.compute());yield Promise.all(t),this.remove_dirty_state()}))}_prefilter_invalid_raw_input(e){if(s.default(e))return e;{const t=e;return this.components.map(()=>t)}}process_raw_input(){const e=this.scene.cooker;e.block();const t=this.components;for(let e of t)e.emit_controller.block_parent_emit();const n=this._raw_input;if(s.default(n))for(let e=0;e<t.length;e++)t[e].set(n[e]);else for(let e=0;e<t.length;e++){const r=this.component_names[e];t[e].set(n[r])}e.unblock();for(let e=0;e<t.length;e++)t[e].emit_controller.unblock_parent_emit();this.emit_controller.emit(a.ParamEvent.VALUE_UPDATED)}}t.TypedMultipleParam=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ParamJsonExporter=class{constructor(e){this._param=e,this._complex_data={}}get required(){const e=this._param.options.is_spare&&!this._param.parent_param,t=!this._param.is_default;return e||t}data(){if(this._param.parent_param)throw console.warn("no component should be saved"),"no component should be saved";return this._require_data_complex()?this._data_complex():this._data_simple()}_data_simple(){return this._param.raw_input_serialized}_data_complex(){if(this._complex_data={},this._param.options.is_spare&&!this._param.parent_param&&(this._complex_data.type=this._param.type,this._complex_data.default_value=this._param.default_value_serialized,this._complex_data.raw_input=this._param.raw_input_serialized,this._complex_data.options=this._param.options.current),this._param.is_default||this.add_main(),this._param.options.has_options_overridden){const e={},t=this._param.options.overridden_options;for(let n of Object.keys(t)){const r=t[n];e[n]=JSON.stringify(r)}this._complex_data.overriden_options=e}return this._complex_data}_require_data_complex(){return!!this._param.options.is_spare||!!this._param.options.has_options_overridden}add_main(){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(2),o=n(267),i=n(194),a=n(195),_=n(663),c=n(133),l=n(668),u=n(50),d=n(24),h=n(33),p=n(16),m=n(365),f=n(264),g=new Map([[u.ShaderName.VERTEX,"#include <common>"],[u.ShaderName.FRAGMENT,"#include <common>"]]),v=new Map([[u.ShaderName.VERTEX,"#include <color_vertex>"],[u.ShaderName.FRAGMENT,"vec4 diffuseColor = vec4( diffuse, opacity );"]]),y=new Map([[u.ShaderName.VERTEX,["#include <begin_vertex>","#include <beginnormal_vertex>"]],[u.ShaderName.FRAGMENT,[]]]);class b extends l.TypedAssembler{constructor(e){super(),this._gl_parent_node=e,this._shaders_by_name=new Map,this._lines=new Map,this._root_nodes=[],this._leaf_nodes=[],this._uniforms_time_dependent=!1,this._resolution_dependent=!1}compile(){return r.__awaiter(this,void 0,void 0,(function*(){}))}_template_shader_for_shader_name(e){var t,n;switch(e){case u.ShaderName.VERTEX:return null===(t=this._template_shader)||void 0===t?void 0:t.vertexShader;case u.ShaderName.FRAGMENT:return null===(n=this._template_shader)||void 0===n?void 0:n.fragmentShader}}get globals_handler(){return this._gl_parent_node.assembler_controller.globals_handler}compile_allowed(){return null!=this._gl_parent_node.assembler_controller.globals_handler}shaders_by_name(){return this._shaders_by_name}_build_lines(){for(let e of this.shader_names){const t=this._template_shader_for_shader_name(e);t&&this._replace_template(t,e)}}set_root_nodes(e){this._root_nodes=e}get _template_shader(){}add_uniforms(e){for(let t of this.param_configs())e[t.uniform_name]=t.uniform;this.uniforms_time_dependent()&&(e.time={value:this._gl_parent_node.scene.time}),this.resolution_dependent()&&(e.resolution={value:new s.Vector2(1e3,1e3)})}root_nodes_by_shader_name(e){const t=[];for(let e of this._root_nodes)switch(e.type){case"output":t.push(e)}return t}leaf_nodes_by_shader_name(e){const t=[];for(let e of this._leaf_nodes)switch(e.type){case m.GlobalsGlNode.type():t.push(e);break;case f.AttributeGlNode.type():}return t}set_node_lines_globals(e,t){}set_node_lines_output(e,t){}set_node_lines_attribute(e,t){}get code_builder(){return this._code_builder=this._code_builder||new _.CodeBuilder(this,this._gl_parent_node)}build_code_from_nodes(e){return r.__awaiter(this,void 0,void 0,(function*(){yield this.code_builder.build_from_nodes(e)}))}allow_new_param_configs(){this.code_builder.allow_new_param_configs()}disallow_new_param_configs(){this.code_builder.disallow_new_param_configs()}builder_param_configs(){return this.code_builder.param_configs()}builder_lines(e,t){return this.code_builder.lines(e,t)}all_builder_lines(){return this.code_builder.all_lines()}param_configs(){return(this._param_config_owner||this.code_builder).param_configs()}set_param_configs_owner(e){this._param_config_owner=e,this._param_config_owner?this.code_builder.disallow_new_param_configs():this.code_builder.allow_new_param_configs()}static add_output_params(e){e.params.add_param(d.ParamType.VECTOR3,"position",[0,0,0],{hidden:!0}),e.params.add_param(d.ParamType.VECTOR3,"normal",[0,0,0],{hidden:!0}),e.params.add_param(d.ParamType.COLOR,"color",[1,1,1],{hidden:!0}),e.params.add_param(d.ParamType.FLOAT,"alpha",1,{hidden:!0}),e.params.add_param(d.ParamType.VECTOR2,"uv",[0,0],{hidden:!0})}add_output_params(e){b.add_output_params(e)}static create_globals_node_output_connections(){return[new h.TypedNamedConnectionPoint("position",p.ConnectionPointType.VEC3),new h.TypedNamedConnectionPoint("normal",p.ConnectionPointType.VEC3),new h.TypedNamedConnectionPoint("color",p.ConnectionPointType.VEC3),new h.TypedNamedConnectionPoint("uv",p.ConnectionPointType.VEC2),new h.TypedNamedConnectionPoint("gl_FragCoord",p.ConnectionPointType.VEC4),new h.TypedNamedConnectionPoint("resolution",p.ConnectionPointType.VEC2),new h.TypedNamedConnectionPoint("time",p.ConnectionPointType.FLOAT)]}create_globals_node_output_connections(){return b.create_globals_node_output_connections()}add_globals_params(e){e.io.outputs.set_named_output_connection_points(this.create_globals_node_output_connections())}allow_attribute_exports(){return!1}reset_configs(){this._reset_shader_configs(),this._reset_variable_configs(),this._reset_uniforms_time_dependency(),this._reset_resolution_dependency()}get shader_configs(){return this._shader_configs=this._shader_configs||this.create_shader_configs()}set_shader_configs(e){this._shader_configs=e}get shader_names(){var e;return(null===(e=this.shader_configs)||void 0===e?void 0:e.map(e=>e.name()))||[]}_reset_shader_configs(){this._shader_configs=void 0}create_shader_configs(){return[new i.ShaderConfig(u.ShaderName.VERTEX,["position","normal","uv"],[]),new i.ShaderConfig(u.ShaderName.FRAGMENT,["color","alpha"],[u.ShaderName.VERTEX])]}shader_config(e){var t;return null===(t=this.shader_configs)||void 0===t?void 0:t.filter(t=>t.name()==e)[0]}variable_configs(){return this._variable_configs=this._variable_configs||this.create_variable_configs()}set_variable_configs(e){this._variable_configs=e}variable_config(e){return this.variable_configs().filter(t=>t.name()==e)[0]}static create_variable_configs(){return[new a.VariableConfig("position",{default_from_attribute:!0,prefix:"vec3 transformed = "}),new a.VariableConfig("normal",{default_from_attribute:!0,prefix:"vec3 objectNormal = "}),new a.VariableConfig("color",{prefix:"diffuseColor.xyz = "}),new a.VariableConfig("alpha",{prefix:"diffuseColor.a = "}),new a.VariableConfig("uv",{prefix:"vUv = ",if:c.GlobalsGeometryHandler.IF_RULE.uv})]}create_variable_configs(){return b.create_variable_configs()}_reset_variable_configs(){this._variable_configs=void 0,this.variable_configs()}input_names_for_shader_name(e,t){var n;return(null===(n=this.shader_config(t))||void 0===n?void 0:n.input_names())||[]}_reset_uniforms_time_dependency(){this._uniforms_time_dependent=!1}set_uniforms_time_dependent(){this._uniforms_time_dependent=!0}uniforms_time_dependent(){return this._uniforms_time_dependent}_reset_resolution_dependency(){this._resolution_dependent=!1}set_resolution_dependent(){this._resolution_dependent=!0}resolution_dependent(){return this._resolution_dependent}insert_define_after(e){return g.get(e)}insert_body_after(e){return v.get(e)}lines_to_remove(e){return y.get(e)}_replace_template(e,t){const n=this.builder_lines(t,o.LineType.FUNCTION_DECLARATION),r=this.builder_lines(t,o.LineType.DEFINE),s=this.builder_lines(t,o.LineType.BODY);let i=e.split("\n");const a=[],_=this.insert_define_after(t),c=this.insert_body_after(t),l=this.lines_to_remove(t);let u=!1,d=!1;for(let e of i){1==u&&(n&&this._insert_lines(a,n),r&&this._insert_lines(a,r),u=!1),1==d&&(s&&this._insert_lines(a,s),d=!1);let t=!1;if(l)for(let n of l)e.indexOf(n)>=0&&(t=!0);t?(a.push("// removed:"),a.push(`//${e}`)):a.push(e),_&&e.indexOf(_)>=0&&(u=!0),c&&e.indexOf(c)>=0&&(d=!0)}this._lines.set(t,a)}_insert_lines(e,t){if(t.length>0){for(let t=0;t<3;t++)e.push("");for(let n of t)e.push(n);for(let t=0;t<3;t++)e.push("")}}get_custom_materials(){return r.__awaiter(this,void 0,void 0,(function*(){return new Map}))}}t.BaseGlShaderAssembler=b},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BaseController=class{constructor(e){this.node=e}add_params(){}update(){}get material(){return this.node.material}}},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3).__importDefault(n(21));var s;!function(e){e.customDistanceMaterial="customDistanceMaterial",e.customDepthMaterial="customDepthMaterial",e.customDepthDOFMaterial="customDepthDOFMaterial"}(s||(s={}));t.CoreMaterial=class{static node(e,t){return e.node(t.name)}static clone(e){return r.default(e)?e.map(e=>this.clone_single(e)):this.clone_single(e)}static clone_single(e){const t=e.clone();return t.linewidth=e.linewidth,t}static apply_custom_materials(e,t){const n=t;if(n.custom_materials)for(let t of Object.keys(n.custom_materials)){const r=t,s=n.custom_materials[r];s&&(e[r]=s,s.needsUpdate=!0)}}static assign_custom_uniforms(e,t,n){const r=e;if(r.custom_materials)for(let e of Object.keys(r.custom_materials)){const s=e,o=r.custom_materials[s];o&&(o.uniforms[t].value=n)}}static init_custom_material_uniforms(e,t,n){const r=e;if(r.custom_materials)for(let e of Object.keys(r.custom_materials)){const s=e,o=r.custom_materials[s];o&&(o.uniforms[t]=o.uniforms[t]||n)}}}},,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(90),s=n(620),o=n(27),i=n(113);class a extends r.TypedNode{constructor(){super(...arguments),this.container_controller=new i.TypedContainerController(this,s.EventContainer),this._eval_all_params_on_dirty_bound=this._eval_all_params_on_dirty.bind(this)}static node_context(){return o.NodeContext.EVENT}initialize_base_node(){this.io.connections.init_inputs(),this.ui_data.set_layout_horizontal(),this.add_post_dirty_hook("_eval_all_params_on_dirty",this._eval_all_params_on_dirty_bound)}node_sibbling(e){return super.node_sibbling(e)}_eval_all_params_on_dirty(){this.params.eval_all()}process_event(e,t,n){}}t.TypedEventNode=a;t.BaseEventNodeClass=class extends a{}},,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=r.__importDefault(n(45)),o=r.__importDefault(n(21)),i=n(93),a=n(349),_=n(103);class c extends i.TypedParam{get is_numeric(){return!0}get is_default(){return this._raw_input==this.default_value}_prefilter_invalid_raw_input(e){return o.default(e)?e[0]:e}process_raw_input(){this.states.error.clear();const e=this.convert(this._raw_input);null!=e?(this._expression_controller&&(this._expression_controller.set_expression(void 0,!1),this.emit_controller.emit(_.ParamEvent.EXPRESSION_UPDATED)),e!=this._value&&(this._update_value(e),this.set_successors_dirty(this))):s.default(this._raw_input)?(this._expression_controller=this._expression_controller||new a.ExpressionController(this),this._raw_input!=this._expression_controller.expression&&(this._expression_controller.set_expression(this._raw_input),this.emit_controller.emit(_.ParamEvent.EXPRESSION_UPDATED))):this.states.error.set(`param input is invalid (${this.full_path()})`)}process_computation(){var e;return r.__awaiter(this,void 0,void 0,(function*(){if((null===(e=this.expression_controller)||void 0===e?void 0:e.active)&&!this.expression_controller.requires_entities){const e=yield this.expression_controller.compute_expression();if(this.expression_controller.is_errored)this.states.error.set(`expression error: "${this.expression_controller.expression}" (${this.expression_controller.error_message})`);else{const t=this.convert(e);null!=t?(this.states.error.active&&this.states.error.clear(),this._update_value(t)):this.states.error.set(`expression returns an invalid type (${e}) (${this.expression_controller.expression})`)}}}))}_update_value(e){this._value=e,this.parent_param&&this.parent_param.set_value_from_components(),this.options.execute_callback(),this.emit_controller.emit(_.ParamEvent.VALUE_UPDATED),this.remove_dirty_state()}}t.TypedNumericParam=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TypeAssert=class{static unreachable(e){throw new Error("Didn't expect to get here")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ParamJsonImporter=class{constructor(e){this._param=e}process_data(e){const t=e.raw_input;void 0!==t&&this._param.set(t),this.add_main(e)}add_main(e){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ShaderConfig=class{constructor(e,t,n){this._name=e,this._input_names=t,this._dependencies=n}name(){return this._name}input_names(){return this._input_names}dependencies(){return this._dependencies}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.VariableConfig=class{constructor(e,t={}){this._name=e,this._options=t}name(){return this._name}default_from_attribute(){return this._options.default_from_attribute||!1}default(){return this._options.default}if_condition(){return this._options.if}prefix(){return this._options.prefix||""}suffix(){return this._options.suffix||""}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(664);t.ParamConfigsController=class{constructor(){this._param_configs=[]}reset(){this._param_configs=[]}push(e){this._param_configs.push(e)}create_and_push(e,t,n,s){const o=new r.ParamConfig(e,t,n,s);this._param_configs.push(o)}get list(){return this._param_configs}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(159),s=n(68),o=n(9),i=n(5);function a(e){return class extends e{constructor(){super(...arguments),this.color=i.ParamConfig.COLOR([1,1,1]),this.use_vertex_colors=i.ParamConfig.BOOLEAN(0),this.transparent=i.ParamConfig.BOOLEAN(0),this.opacity=i.ParamConfig.FLOAT(1),this.alpha_test=i.ParamConfig.FLOAT(0),this.use_fog=i.ParamConfig.BOOLEAN(0)}}}t.ColorParamConfig=a;o.Material;a(i.NodeParamsConfig);s.TypedMatNode;class _ extends r.BaseController{static update(e){const t=e.material,n=e.pv;t.color.copy(n.color);const r=n.use_vertex_colors;r!=t.vertexColors&&(t.vertexColors=r,t.needsUpdate=!0),t.opacity=n.opacity,t.transparent=n.transparent||n.opacity<1,t.depthTest=!0,t.alphaTest=n.alpha_test,t.fog=n.use_fog}}t.ColorsController=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(159),s=n(68),o=n(9),i=n(5);function a(e){return class extends e{constructor(){super(...arguments),this.transparent=i.ParamConfig.BOOLEAN(0),this.opacity=i.ParamConfig.FLOAT(1),this.alpha_test=i.ParamConfig.FLOAT(0),this.use_fog=i.ParamConfig.BOOLEAN(0)}}}t.ColorParamConfig=a;o.Material;a(i.NodeParamsConfig);s.TypedMatNode;class _ extends r.BaseController{static update(e){const t=e.material,n=e.pv;t.uniforms.opacity&&(t.uniforms.opacity.value=n.opacity),t.transparent=n.transparent||n.opacity<1,t.depthTest=!0,t.alphaTest=n.alpha_test,t.fog=n.use_fog}}t.ColorsController=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(68),o=n(27);class i extends s.TypedMatNode{constructor(){super(...arguments),this._children_controller_context=o.NodeContext.GL}initialize_base_node(){var e;super.initialize_base_node(),this.lifecycle.add_on_create_hook(this.assembler_controller.on_create.bind(this.assembler_controller)),null===(e=this.children_controller)||void 0===e||e.init()}create_material(){return this.assembler_controller.assembler.create_material()}get assembler_controller(){return this._assembler_controller=this._assembler_controller||this._create_assembler_controller()}create_node(e){return super.create_node(e)}children(){return super.children()}nodes_by_type(e){return super.nodes_by_type(e)}compile_if_required(){return r.__awaiter(this,void 0,void 0,(function*(){this.assembler_controller.compile_required()&&this._compile()}))}_compile(){return r.__awaiter(this,void 0,void 0,(function*(){this.material&&(yield this.assembler_controller.assembler.compile_material(this.material),yield this.assembler_controller.post_compile())}))}}t.TypedBuilderMatNode=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(274),s=n(5),o=n(83),i=n(94);o.TransformedParamConfig(s.NodeParamsConfig);class a extends r.TypedLightObjNode{constructor(){super(...arguments),this.flags=new i.FlagsControllerD(this),this.transform_controller=new o.TransformController(this)}initialize_base_node(){super.initialize_base_node(),this.transform_controller.initialize_node()}cook(){this.transform_controller.update(),this.update_light_params(),this.update_shadow_params(),this.cook_controller.end_cook()}}t.BaseLightTransformedObjNode=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(22),s=n(56),o=n(5),i=n(69),a=n(94);function _(e){return class extends e{constructor(){super(...arguments),this.show_helper=o.ParamConfig.BOOLEAN(1),this.helper_size=o.ParamConfig.FLOAT(1,{visible_if:{show_helper:1}})}}}t.BaseLightHelperParamConfig=_;_(o.NodeParamsConfig);class c extends i.TypedObjNode{constructor(){super(...arguments),this.flags=new a.FlagsControllerD(this)}}t.BaseLightHelperObjNode=c;t.BaseLightHelper=class{constructor(e,t){this.node=e,this._name=t,this._object=new r.Mesh,this._material=new s.MeshBasicMaterial({wireframe:!0,fog:!1})}build(){this._object.name=this._name,this.build_helper()}get object(){return this._object}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.HelperController=class{constructor(e,t,n){this.node=e,this._helper_constructor=t,this._name=n}initialize_node(){this.node.flags.display.add_hook(()=>{this.update_helper_attachment()})}update_helper_attachment(){var e,t,n;if(this.node.flags.display.active){const n=null===(e=this.helper)||void 0===e?void 0:e.object;n&&(this.node.object.add(n),null===(t=this._helper)||void 0===t||t.update())}else{const e=null===(n=this._helper)||void 0===n?void 0:n.object;e&&this.node.object.remove(e)}}get helper(){if(this.node.flags.display.active)return this._helper=this._helper||this._create_helper()}get visible(){return this.node.flags.display.active&&this.node.pv.show_helper}_create_helper(){const e=new this._helper_constructor(this.node,this._name);return e.build(),this.node.light.add(e.object),e}update(){this.visible?(this._helper||(this._helper=this._create_helper()),this._helper&&(this._helper.object.visible=!0,this._helper.update())):this._helper&&(this._helper.object.visible=!1)}}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(69),s=n(40),o=n(5);o.NodeParamsConfig;class i extends r.TypedObjNode{constructor(){super(...arguments),this._attachable_to_hierarchy=!1}create_object(){return new s.Group}cook(){this.cook_controller.end_cook()}}t.BaseManagerObjNode=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(5);t.LayerParamConfig=function(e){return class extends e{constructor(){super(...arguments),this.layer=r.ParamConfig.INTEGER(0,{range:[0,31],range_locked:[!0,!0]})}}};t.LayersController=class{constructor(e){this.node=e}update(){const e=this.node.object;e.layers.set(0),e.layers.enable(this.node.params.integer("layer"))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(409),o=n(0),i=n(2),a=r.__importDefault(n(81)),_=n(1011),c=n(818),l=n(27),u=n(66);function d(e){return{node_selection:{context:l.NodeContext.POST},visible_if:{do_post_process:1,[`use_post_process_node${e}`]:1}}}const h=n(5);t.CameraPostProcessParamConfig=function(e){return class extends e{constructor(){super(...arguments),this.post_process=h.ParamConfig.FOLDER(),this.do_post_process=h.ParamConfig.BOOLEAN(0),this.use_post_process_node0=h.ParamConfig.BOOLEAN(0,{visible_if:{do_post_process:1}}),this.post_process_node0=h.ParamConfig.OPERATOR_PATH("",d(0)),this.use_post_process_node1=h.ParamConfig.BOOLEAN(0,{visible_if:{do_post_process:1}}),this.post_process_node1=h.ParamConfig.OPERATOR_PATH("",d(1)),this.use_post_process_node2=h.ParamConfig.BOOLEAN(0,{visible_if:{do_post_process:1}}),this.post_process_node2=h.ParamConfig.OPERATOR_PATH("",d(2)),this.use_post_process_node3=h.ParamConfig.BOOLEAN(0,{visible_if:{do_post_process:1}}),this.post_process_node3=h.ParamConfig.OPERATOR_PATH("",d(3))}}};t.PostProcessController=class{constructor(e){this.node=e,this._renderers_by_canvas_id={},this._composers_by_canvas_id={},this._resolution_by_canvas_id={},this._composers_set_in_progress_by_canvas_id={},this._fetch_post_process_nodes_in_progress=!1,this._post_process_nodes=[],this._post_process_use_node_path_params=[],this._post_process_node_path_params=[]}render(e,t,n){const r=this.renderer(e);if(r)if(this.node.pv.do_post_process){const n=this.composer(e);n&&(n.setSize(t.x,t.y),n.render())}else this.node.setup_for_aspect_ratio(n),r.render(this.node.scene.default_scene,this.node.object)}renderer(e){return this._renderers_by_canvas_id[e.id]}create_renderer(e,t){const n=u.Poly.instance().renderers_controller.rendering_context(e),r=new s.WebGLRenderer({canvas:e,antialias:!0,alpha:!0,context:n});return r.shadowMap.enabled=!0,r.physicallyCorrectLights=!0,r.toneMapping=o.ACESFilmicToneMapping,r.toneMappingExposure=1,r.outputEncoding=o.sRGBEncoding,u.Poly.instance().renderers_controller.register_renderer(r),this._renderers_by_canvas_id[e.id]=r,this.set_renderer_size(e,t),r.setPixelRatio(window.devicePixelRatio),r}delete_renderer(e){const t=this.renderer(e);t&&u.Poly.instance().renderers_controller.deregister_renderer(t)}set_renderer_size(e,t){this._resolution_by_canvas_id[e.id]=this._resolution_by_canvas_id[e.id]||new i.Vector2,this._resolution_by_canvas_id[e.id].copy(t);const n=this.renderer(e);n&&n.setSize(t.x,t.y);const r=this.composer(e);r&&r.setSize(t.x,t.y)}composer(e){return this._composers_by_canvas_id[e.id]=this._composers_by_canvas_id[e.id]||this._create_composer(e)}_create_composer(e){const t=this.renderer(e);if(t){const n=new _.EffectComposer(t);return n.setPixelRatio(2*window.devicePixelRatio),this.set_composer_passes(e.id,n,t),n}}update_composer_passes(){return r.__awaiter(this,void 0,void 0,(function*(){if(this.node.pv.do_post_process){if(this._post_process_nodes=[],this._fetch_post_process_nodes_in_progress)return;if(this._fetch_post_process_nodes_in_progress=!0,this.composer_passes_nodes_changed()){this._post_process_nodes=[];for(let e of a.default(4)){if(this._post_process_use_node_path_params[e].value){const t=this._post_process_node_path_params[e].found_node();t&&(yield t.request_container(),this._post_process_nodes.push(t))}}this.set_composers_passes()}this._fetch_post_process_nodes_in_progress=!1}else this._post_process_nodes=[]}))}set_composers_passes(){const e=Object.keys(this._composers_by_canvas_id);for(let t of e){const e=this._composers_by_canvas_id[t],n=this._renderers_by_canvas_id[t];e&&this.set_composer_passes(t,e,n)}}set_composer_passes(e,t,n){if(this._composers_set_in_progress_by_canvas_id[e])return;this._composers_set_in_progress_by_canvas_id[e]=!0,this.clear_render_passes(t);const r=new c.RenderPass(this.node.scene.default_scene,this.node.object);r.clearAlpha=0,t.addPass(r);for(let n of this._post_process_nodes)n.apply_to_composer(t,this.node.object,this._resolution_by_canvas_id[e],this.node);delete this._composers_set_in_progress_by_canvas_id[e]}clear_render_passes(e){let t;for(;t=e.passes.pop();)if(t){const e=t;if("function"==typeof e.dispose)try{e.dispose()}catch(e){console.warn(e)}}e.passes=[]}composer_passes_nodes_changed(){return!0}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3).__importDefault(n(155)),s=n(67),o=n(61);t.NameController=class{constructor(e){this.node=e,this._graph_node=new s.CoreGraphNode(e.scene,"node_name_controller")}get graph_node(){return this._graph_node}static base_name(e){let t=e.type;const n=t[t.length-1];return r.default(parseInt(n))||(t+="_"),`${t}1`}request_name_to_parent(e){const t=this.node.parent;t&&t.children_allowed()&&t.children_controller?t.children_controller.set_child_name(this.node,e):console.warn("request_name_to_parent failed, no parent found")}set_name(e){e!=this.node.name&&this.request_name_to_parent(e)}update_name_from_parent(e){var t;this.node._set_core_name(e),this.post_set_name(),this.post_set_full_path(),this.node.children_allowed()&&(null===(t=this.node.children_controller)||void 0===t||t.children().forEach(e=>{e.name_controller.post_set_full_path()})),this.node.lifecycle.creation_completed&&(this.node.scene.missing_expression_references_controller.check_for_missing_references(this.node),this.node.scene.expressions_controller.regenerate_referring_expressions(this.node)),this.node.emit(o.NodeEvent.NAME_UPDATED)}add_post_set_name_hook(e){this._on_set_name_hooks=this._on_set_name_hooks||[],this._on_set_name_hooks.push(e)}add_post_set_full_path_hook(e){this._on_set_full_path_hooks=this._on_set_full_path_hooks||[],this._on_set_full_path_hooks.push(e)}post_set_name(){if(this._on_set_name_hooks)for(let e of this._on_set_name_hooks)e()}post_set_full_path(){if(this._on_set_full_path_hooks)for(let e of this._on_set_full_path_hooks)e()}}},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=r.__importDefault(n(92)),o=r.__importDefault(n(190)),i=r.__importDefault(n(346)),a=n(24),_=n(103),c=n(67);!function(e){e.TYPESCRIPT="typescript"}(t.StringParamLanguage||(t.StringParamLanguage={}));t.OptionsController=class{constructor(e){this._param=e,this._programatic_visible_state=!0,this._update_visibility_and_remove_dirty_bound=this.update_visibility_and_remove_dirty.bind(this),this._ui_data_dependency_set=!1}set(e){this._default_options=e,this._options=o.default(this._default_options)}copy(e){this._default_options=o.default(e.default),this._options=o.default(e.current)}set_option(e,t){return Object.assign(this._options,e,t)}get param(){return this._param}get node(){return this._param.node}get default(){return this._default_options}get current(){return this._options}get has_options_overridden(){return!i.default(this._options,this._default_options)}get overridden_options(){const e={},t=Object.keys(this._options);for(let n of t)i.default(this._options[n],this._default_options[n])||Object.assign(e,n,o.default(this._options[n]));return e}get overridden_option_names(){return Object.keys(this.overridden_options)}get always_reference_asset(){return this._options.always_reference_asset||!1}has_callback(){return null!=this._options.callback||null!=this._options.callback_string}execute_callback(){if(!this.node||!this.node.scene.loading_controller.loaded)return;const e=this.get_callback();null!=e&&this.node&&!this.node.cook_controller.is_cooking&&e(this.node,this.param)}get_callback(){if(this.has_callback())return this._options.callback=this._options.callback||this.create_callback_from_string()}create_callback_from_string(){const e=this._options.callback_string;if(e){const t=new Function("node","scene","window","location",e);return()=>{t(this.node,this.node.scene,null,null)}}}makes_node_dirty_when_dirty(){let e;if(null!=this.param.parent_param)return!1;let t=!0;return null!=(e=this._options.cook)&&(t=e),t}get desktop_browse_option(){return this._options.desktop_browse}get desktop_browse_allowed(){return null!=this.desktop_browse_option}desktop_browse_file_type(){return this.desktop_browse_option?this.desktop_browse_option.file_type:null}get is_expression_for_entities(){const e=this._options.expression;return e&&e.for_entities||!1}get level(){return this._options.level||0}get has_menu(){return null!=this.menu_options}get menu_options(){return this._options.menu}get menu_entries(){return this.menu_options?this.menu_options.entries:[]}get has_menu_radio(){return this.has_menu}get is_multiline(){return!0===this._options.multiline}get language(){return this._options.language}get is_code(){return null!=this.language}get node_selection_options(){return this._options.node_selection}get node_selection_context(){if(this.node_selection_options)return this.node_selection_options.context}dependent_on_found_node(){return!("dependent_on_found_node"in this._options)||this._options.dependent_on_found_node}get range(){return this._options.range||[0,1]}get step(){return this._options.step||.01}range_locked(){return this._options.range_locked||[!1,!1]}ensure_in_range(e){const t=this.range;return e>=t[0]&&e<=t[1]?e:e<t[0]?!0===this.range_locked()[0]?t[0]:e:!0===this.range_locked()[1]?t[1]:e}get is_spare(){return this._options.spare||!1}get texture_options(){return this._options.texture}texture_as_env(){const e=this.texture_options;return null!=e&&!0===e.env}get is_hidden(){return!0===this._options.hidden||!1===this._programatic_visible_state}get is_visible(){return!this.is_hidden}set_visible_state(e){this._options.hidden=!e,this.param.emit(_.ParamEvent.VISIBLE_UPDATED)}get is_label_hidden(){const e=this.param.type;return!1===this._options.label||e===a.ParamType.BUTTON||e===a.ParamType.SEPARATOR||e===a.ParamType.BOOLEAN&&this.is_field_hidden()}is_field_hidden(){return!1===this._options.field}ui_data_depends_on_other_params(){return"visible_if"in this._options}visibility_predecessors(){const e=Object.keys(this._options.visible_if||{}),t=this.param.node;return s.default(e.map(e=>{const n=t.params.get(e);if(n)return n;console.error(`param ${e} not found as visibility condition for ${this.param.name} in node ${this.param.node.type}`)}))}set_ui_data_dependency(){if(this._ui_data_dependency_set)return;this._ui_data_dependency_set=!0;const e=this.visibility_predecessors();if(e.length>0){this._visibility_graph_node=new c.CoreGraphNode(this.param.scene,"param_visibility");for(let t of e)this._visibility_graph_node.add_graph_input(t);this._visibility_graph_node.add_post_dirty_hook("_update_visibility_and_remove_dirty",this._update_visibility_and_remove_dirty_bound)}}update_visibility_and_remove_dirty(){this.update_visibility(),this.param.remove_dirty_state()}update_visibility(){return r.__awaiter(this,void 0,void 0,(function*(){const e=this._options.visible_if;if(e){const t=this.visibility_predecessors(),n=t.map(e=>e.compute());this._programatic_visible_state=!0,yield Promise.all(n);for(let n of t){e[n.name]!=n.value&&(this._programatic_visible_state=!1)}this.param.emit(_.ParamEvent.VISIBLE_UPDATED)}}))}}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3).__importDefault(n(45));t.VARIABLE_PREFIX="$";t.BaseTraverser=class{constructor(e){this.param=e,this._set_error_from_error_bound=this._set_error_from_error.bind(this)}clear_error(){this._error_message=void 0}set_error(e){this._error_message=this._error_message||e}_set_error_from_error(e){r.default(e)?this._error_message=e:this._error_message=e.message}get is_errored(){return null!=this._error_message}get error_message(){return this._error_message}reset(){this._error_message=void 0}traverse_node(e){const t=`traverse_${e.type}`;if(this[t])return this[t](e);this.set_error(`expression unknown node type: ${e.type}`)}traverse_BinaryExpression(e){return`${this.traverse_node(e.left)} ${e.operator} ${this.traverse_node(e.right)}`}traverse_LogicalExpression(e){return`${this.traverse_node(e.left)} ${e.operator} ${this.traverse_node(e.right)}`}traverse_MemberExpression(e){return`${this.traverse_node(e.object)}.${this.traverse_node(e.property)}`}traverse_ConditionalExpression(e){return`(${this.traverse_node(e.test)}) ? (${this.traverse_node(e.consequent)}) : (${this.traverse_node(e.alternate)})`}traverse_Compound(e){const n=e.body;let r=[];for(let e=0;e<n.length;e++){const s=n[e];"Identifier"==s.type?s.name[0]==t.VARIABLE_PREFIX?r.push("`${"+this.traverse_node(s)+"}`"):r.push(`'${s.name}'`):r.push("`${"+this.traverse_node(s)+"}`")}return r.join(" + ")}traverse_Literal(e){return`${e.raw}`}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3);t.AsyncFunction=Object.getPrototypeOf((function(){return r.__awaiter(this,void 0,void 0,(function*(){}))})).constructor},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=r.__importDefault(n(45)),o=n(93),i=n(350),a=n(24),_=n(349),c=n(103);class l extends o.TypedParam{static type(){return a.ParamType.STRING}get default_value_serialized(){return this.default_value}_clone_raw_input(e){return`${e}`}get raw_input_serialized(){return`${this._raw_input}`}get value_serialized(){return`${this.value}`}static are_raw_input_equal(e,t){return e==t}static are_values_equal(e,t){return e==t}get is_default(){return this._raw_input==this.default_value}convert(e){return s.default(e)?e:`${e}`}get raw_input(){return this._raw_input}process_raw_input(){this.states.error.clear(),this._value_elements(this._raw_input).length>=3?(this._expression_controller=this._expression_controller||new _.ExpressionController(this),this._raw_input!=this._expression_controller.expression&&(this._expression_controller.set_expression(this._raw_input),this.set_dirty(),this.emit_controller.emit(c.ParamEvent.EXPRESSION_UPDATED))):this._raw_input!=this._value&&(this._value=this._raw_input,this.remove_dirty_state(),this.set_successors_dirty(this),this.emit_controller.emit(c.ParamEvent.VALUE_UPDATED),this._expression_controller&&(this._expression_controller.set_expression(void 0,!1),this.emit_controller.emit(c.ParamEvent.EXPRESSION_UPDATED)))}process_computation(){var e;return r.__awaiter(this,void 0,void 0,(function*(){if((null===(e=this.expression_controller)||void 0===e?void 0:e.active)&&!this.expression_controller.requires_entities){const e=yield this.expression_controller.compute_expression();if(this.expression_controller.is_errored)this.states.error.set(`expression error: ${this.expression_controller.error_message}`);else{const t=this.convert(e);null!=t?(this._value=t,this.emit_controller.emit(c.ParamEvent.VALUE_UPDATED)):this.states.error.set(`expression returns an invalid type (${e})`),this.remove_dirty_state()}}}))}_value_elements(e){return i.ParsedTree.string_value_elements(e)}}t.StringParam=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3).__importDefault(n(188)),s=n(34),o=n(16),i=n(24),a=n(134);t.ConnectionPointTypesAvailableForAttribute=[o.ConnectionPointType.FLOAT,o.ConnectionPointType.VEC2,o.ConnectionPointType.VEC3,o.ConnectionPointType.VEC4];const _=n(5);class c extends _.NodeParamsConfig{constructor(){super(...arguments),this.name=_.ParamConfig.STRING(""),this.type=_.ParamConfig.INTEGER(0,{menu:{entries:t.ConnectionPointTypesAvailableForAttribute.map((e,t)=>({name:e,value:t}))}})}}const l=new c;class u extends s.TypedGlNode{constructor(){super(...arguments),this.params_config=l,this._on_create_set_name_if_none_bound=this._on_create_set_name_if_none.bind(this),this.gl_connections_controller=new a.GlConnectionsController(this)}static type(){return"attribute"}initialize_node(){this.add_post_dirty_hook("_set_mat_to_recompile",this._set_mat_to_recompile_if_is_exporting.bind(this)),this.lifecycle.add_on_create_hook(this._on_create_set_name_if_none_bound),this.gl_connections_controller.initialize_node(),this.gl_connections_controller.set_expected_input_types_function(()=>[]),this.gl_connections_controller.set_expected_output_types_function(()=>[t.ConnectionPointTypesAvailableForAttribute[this.pv.type]])}create_params(){var e;(null===(e=this.material_node)||void 0===e?void 0:e.assembler_controller.allow_attribute_exports())&&this.add_param(i.ParamType.BOOLEAN,"export_when_connected",0)}get input_name(){return u.INPUT_NAME}get output_name(){return u.OUTPUT_NAME}set_lines(e){var t;null===(t=this.material_node)||void 0===t||t.assembler_controller.assembler.set_node_lines_attribute(this,e)}get attribute_name(){return r.default(this.pv.name)}gl_type(){return this.io.outputs.named_output_connection_points[0].type}connected_input_node(){return this.io.inputs.named_input(u.INPUT_NAME)}connected_input_connection_point(){return this.io.inputs.named_input_connection_point(u.INPUT_NAME)}output_connection_point(){return this.io.outputs.named_output_connection_points_by_name(this.input_name)}get is_importing(){return this.io.outputs.used_output_names().length>0}get is_exporting(){if(this.pv.export_when_connected){return null!=this.io.inputs.named_input(u.INPUT_NAME)}return!1}_set_mat_to_recompile_if_is_exporting(){this.is_exporting&&this._set_mat_to_recompile()}_on_create_set_name_if_none(){""==this.pv.name&&this.p.name.set(this.name)}}t.AttributeGlNode=u,u.INPUT_NAME="export",u.OUTPUT_NAME="val"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(657),s=n(157),o=n(658),i=n(659),a=n(660),_=n(661),c=n(191),l=n(354),u=n(263),d=n(128);t.JsonExportDispatcher=class{static dispatch_node(e){return new r.NodeJsonExporter(e)}static dispatch_param(e){return e instanceof c.TypedNumericParam?new o.ParamNumericJsonExporter(e):e instanceof l.OperatorPathParam?new i.ParamOperatorPathJsonExporter(e):e instanceof u.StringParam?new a.ParamStringJsonExporter(e):e instanceof d.RampParam?new _.ParamRampJsonExporter(e):new s.ParamJsonExporter(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(49),s=n(265);t.SceneJsonExporter=class{constructor(e){this._scene=e,this._data={}}data(){this._scene.nodes_controller.reset_node_context_signatures();const e=s.JsonExportDispatcher.dispatch_node(this._scene.root),t=e.data(),n=e.ui_data();return this._data={properties:{frame:this._scene.frame||1,frame_range:this._scene.frame_range,frame_range_locked:this._scene.time_controller.frame_range_locked,master_camera_node_path:this._scene.cameras_controller.master_camera_node_path},root:t,ui:n},this._data}static sanitize_string(e){return e=e.replace(/'/g,"'"),e=r.CoreString.escape_line_breaks(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.FUNCTION_DECLARATION="function_declaration",e.DEFINE="define",e.BODY="body"}(t.LineType||(t.LineType={}))},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.GlNodeFinder=class{static find_output_nodes(e){return e.nodes_by_type("output")}static find_attribute_export_nodes(e){return e.nodes_by_type("attribute").filter(e=>e.is_exporting)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(680),o=n(366),i=n(5);class a extends i.NodeParamsConfig{constructor(){super(...arguments),this.allow_pan=i.ParamConfig.BOOLEAN(1),this.allow_rotate=i.ParamConfig.BOOLEAN(1),this.allow_zoom=i.ParamConfig.BOOLEAN(1),this.tdamping=i.ParamConfig.BOOLEAN(1),this.damping=i.ParamConfig.FLOAT(.1,{visible_if:{tdamping:!0}}),this.screen_space_panning=i.ParamConfig.BOOLEAN(1),this.rotate_speed=i.ParamConfig.FLOAT(.5),this.min_distance=i.ParamConfig.FLOAT(1,{range:[0,100],range_locked:[!0,!1]}),this.max_distance=i.ParamConfig.FLOAT(50,{range:[0,100],range_locked:[!0,!1]}),this.polar_angle_range=i.ParamConfig.VECTOR2([0,"$PI"])}}const _=new a;class c extends s.TypedCameraControlsEventNode{constructor(){super(...arguments),this.params_config=_}static type(){return"camera_orbit_controls"}create_controls_instance(e,t){return r.__awaiter(this,void 0,void 0,(function*(){return new o.OrbitControls(e,t)}))}setup_controls(e){e.enablePan=this.pv.allow_pan,e.enableRotate=this.pv.allow_rotate,e.enableZoom=this.pv.allow_zoom,e.enableDamping=this.pv.tdamping,e.dampingFactor=this.pv.damping,e.rotateSpeed=this.pv.rotate_speed,e.screenSpacePanning=this.pv.screen_space_panning,e.minDistance=this.pv.min_distance,e.maxDistance=this.pv.max_distance,e.minPolarAngle=this.pv.polar_angle_range.x,e.maxPolarAngle=this.pv.polar_angle_range.y,e.enableKeys=!1}set_from_camera_node(e,t){const n=t.params.vector3("target");e.target.copy(n)}}t.CameraOrbitControlsEventNode=c},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(159),o=n(135),i=n(5),a=n(27);t.TextureMapParamConfig=function(e){return class extends e{constructor(){super(...arguments),this.use_map=i.ParamConfig.BOOLEAN(0),this.map=i.ParamConfig.OPERATOR_PATH(o.FileCopNode.DEFAULT_NODE_PATH.UV,{visible_if:{use_map:1}})}}},t.BooleanParamOptions=function(e){return{cook:!1,callback:(t,n)=>{e.update(t)}}},t.OperatorPathOptions=function(e,t){return{visible_if:{[t]:1},node_selection:{context:a.NodeContext.COP},cook:!1,callback:(t,n)=>{e.update(t)}}};class _ extends s.BaseController{constructor(e,t){super(e),this.node=e,this._update_options=t,null==this._update_options.define&&(this._update_options.define=!0)}add_hooks(e,t){e.add_post_dirty_hook("TextureController",()=>{this.update()}),t.add_post_dirty_hook("TextureController",()=>{this.update()})}static update(e){}_update(e,t,n,s){return r.__awaiter(this,void 0,void 0,(function*(){if(this._update_options.uniforms){const r=e,o=t;yield this._update_texture_on_uniforms(r,o,n,s)}if(this._update_options.direct_params){const r=e,o=t;yield this._update_texture_on_material(r,o,n,s)}}))}_update_texture_on_uniforms(e,t,n,s){return r.__awaiter(this,void 0,void 0,(function*(){this._update_required_attribute(e,e.uniforms,t,n,s,this._apply_texture_on_uniforms.bind(this),this._remove_texture_from_uniforms.bind(this))}))}_apply_texture_on_uniforms(e,t,n,r){const s=null!=t[n]&&null!=t[n].value;let o=!1;if(s){t[n].value.uuid!=r.uuid&&(o=!0)}if(!s||o){if(t[n].value=r,this._do_update_define()){const t=this._define_name(`${n}`);e.defines[t]=1}e.defines.USE_UV=1,e.needsUpdate=!0}}_remove_texture_from_uniforms(e,t,n){if(t[n].value){if(t[n].value=null,this._do_update_define()){const t=this._define_name(`${n}`);delete e.defines[t]}e.needsUpdate=!0}}_define_name(e){return"USE_"+e.replace("_","").toUpperCase()}_update_texture_on_material(e,t,n,s){return r.__awaiter(this,void 0,void 0,(function*(){this._update_required_attribute(e,e,t,n,s,this._apply_texture_on_material.bind(this),this._remove_texture_from_material.bind(this))}))}_apply_texture_on_material(e,t,n,r){const s=null!=t[n];let o=!1;if(s){t[n].uuid!=r.uuid&&(o=!0)}s&&!o||(t[n]=r,e.needsUpdate=!0)}_remove_texture_from_material(e,t,n){t[n]&&(t[n]=null,e.needsUpdate=!0)}_update_required_attribute(e,t,n,s,o,i,_){return r.__awaiter(this,void 0,void 0,(function*(){if(s.is_dirty&&(yield s.compute()),s.value){o.is_dirty&&(yield o.compute());const r=o.found_node();if(r)if(r.node_context()==a.NodeContext.COP){const s=r,o=(yield s.request_container()).texture();if(o)return void i(e,t,n,o);this.node.states.error.set("found node has no texture")}else this.node.states.error.set("found map node is not a COP node");else this.node.states.error.set(`could not find map node ${o.name} with path ${o.value}`)}_(e,t,n)}))}_do_update_define(){return null==this._update_options.define||this._update_options.define}}t.BaseTextureMapController=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(106),s=n(773),o=n(774),i=n(775),a=new Map([]);a.set(r.CustomMaterialName.DISTANCE,s.ShaderAssemblerCustomMeshDistance),a.set(r.CustomMaterialName.DEPTH,o.ShaderAssemblerCustomMeshDepth),a.set(r.CustomMaterialName.DEPTH_DOF,i.ShaderAssemblerCustomMeshDepthDOF);class _ extends r.ShaderAssemblerMaterial{custom_assembler_class_by_custom_name(){return a}}t.ShaderAssemblerMesh=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(69),o=n(7),i=n(94);class a extends s.TypedObjNode{constructor(){super(...arguments),this.flags=new i.FlagsControllerD(this),this.render_order=s.ObjNodeRenderOrder.LIGHT,this._color_with_intensity=new o.Color(0),this._used_in_scene=!0,this._cook_main_without_inputs_when_dirty_bound=this._cook_main_without_inputs_when_dirty.bind(this)}get light(){return this._light}initialize_base_node(){super.initialize_base_node(),this._light=this.create_light(),this.object.add(this._light),this.flags.display.add_hook(()=>{this.update_light_attachment()}),this.dirty_controller.add_post_dirty_hook("_cook_main_without_inputs_when_dirty",this._cook_main_without_inputs_when_dirty_bound)}_cook_main_without_inputs_when_dirty(){return r.__awaiter(this,void 0,void 0,(function*(){yield this.cook_controller.cook_main_without_inputs()}))}update_light_attachment(){this.flags.display.active?(this.object.add(this.light),this._cook_main_without_inputs_when_dirty()):this.object.remove(this.light)}create_shadow_params_main(){if(null!=this._light.shadow)return this.create_shadow_params()}create_light_params(){}update_light_params(){}create_shadow_params(){}cook(){this.update_light_params(),this.update_shadow_params(),this.cook_controller.end_cook()}update_shadow_params(){}get color_with_intensity(){const e=this.params.color("color"),t=this.params.float("intensity");return this._color_with_intensity.copy(e).multiplyScalar(t),this._color_with_intensity}get active(){return this.flags.display.active}}t.TypedLightObjNode=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(1),o=n(2),i=n(7),a=n(53),_=n(114),c=n(35),l=n(162),u=n(49),d=r.__importDefault(n(190)),h=r.__importDefault(n(45)),p=r.__importDefault(n(21)),m=r.__importDefault(n(44)),f=n(381);class g extends f.CoreEntity{constructor(e,t){super(t),this._object=e,null==this._object.userData.attributes&&(this._object.userData.attributes={})}object(){return this._object}geometry(){return this._object.geometry}core_geometry(){const e=this.geometry();return e?new a.CoreGeometry(e):null}points(){var e;return(null===(e=this.core_geometry())||void 0===e?void 0:e.points())||[]}points_from_group(e){if(e){const t=u.CoreString.indices(e);if(t){const e=this.points();return t.map(t=>e[t])}return[]}return this.points()}compute_vertex_normals(){var e;null===(e=this.core_geometry())||void 0===e||e.compute_vertex_normals()}add_attribute(e,t){let n;n=m.default(t)||p.default(t)||h.default(t)?t:t.toArray(),this._object.userData.attributes[e]=n}add_numeric_attrib(e,t){this.add_attribute(e,t)}set_attrib_value(e,t){this.add_attribute(e,t)}add_numeric_vertex_attrib(e,t,n){var r;null==n&&(n=_.CoreAttribute.default_value(t)),null===(r=this.core_geometry())||void 0===r||r.add_numeric_attrib(e,t,n)}attribute_names(){return Object.keys(this._object.userData.attributes)}attrib_names(){return this.attribute_names()}has_attrib(e){return this.attribute_names().includes(e)}rename_attribute(e,t){this.add_attribute(t,this.attrib_value(e)),this.delete_attribute(e)}delete_attribute(e){delete this._object.userData.attributes[e]}attrib_value(e){if("ptnum"===e)return this.index;{let t=this._object.userData.attributes[e];return null==t&&"name"==e&&(t=this._object.name),t}}name(){return this.attrib_value("name")}human_type(){return c.CoreConstant.CONSTRUCTOR_NAMES_BY_CONSTRUCTOR_NAME[this._object.constructor.name]}attrib_type(e){const t=this.attrib_value(e);return h.default(t)?c.CoreConstant.ATTRIB_TYPE.STRING:c.CoreConstant.ATTRIB_TYPE.NUMERIC}attrib_size(e){const t=this.attrib_value(e);if(null==t)return 0;if(h.default(t)||m.default(t))return 1;switch(t.constructor){case o.Vector2:return 2;case s.Vector3:return 3;default:return 0}}clone(){return g.clone(this._object)}static clone(e){const t=e.clone();var n=new Map,r=new Map;return g.parallelTraverse(e,t,(function(e,t){n.set(t,e),r.set(e,t)})),t.traverse((function(t){const s=n.get(t),o=t;if(o.geometry){const e=s.geometry;o.geometry=a.CoreGeometry.clone(e);const t=o.geometry;t.userData&&(t.userData=d.default(e.userData))}if(o.material){o.material=s.material,l.CoreMaterial.apply_custom_materials(t,o.material);const e=o.material;null==e.color&&(e.color=new i.Color(1,1,1))}e.userData&&(t.userData=d.default(s.userData));const _=s;_.animations&&(t.animations=_.animations.map(e=>e.clone()));const c=t;if(c.isSkinnedMesh){var u=c,h=s,p=h.skeleton.bones;u.skeleton=h.skeleton.clone(),u.bindMatrix.copy(h.bindMatrix);const e=p.map((function(e){return r.get(e)}));u.skeleton.bones=e,u.bind(u.skeleton,u.bindMatrix)}})),t}static parallelTraverse(e,t,n){n(e,t);for(var r=0;r<e.children.length;r++)this.parallelTraverse(e.children[r],t.children[r],n)}}t.CoreObject=g},function(e,t,n){"use strict";n.r(t),n.d(t,"BufferGeometryUtils",(function(){return l}));var r=n(4),s=n(6),o=n(141),i=n(97),a=n(0),_=n(2),c=n(1),l={computeTangents:function(e){var t=e.index,n=e.attributes;if(null!==t&&void 0!==n.position&&void 0!==n.normal&&void 0!==n.uv){var s=t.array,o=n.position.array,i=n.normal.array,a=n.uv.array,l=o.length/3;void 0===n.tangent&&e.setAttribute("tangent",new r.BufferAttribute(new Float32Array(4*l),4));for(var u=n.tangent.array,d=[],h=[],p=0;p<l;p++)d[p]=new c.Vector3,h[p]=new c.Vector3;var m=new c.Vector3,f=new c.Vector3,g=new c.Vector3,v=new _.Vector2,y=new _.Vector2,b=new _.Vector2,x=new c.Vector3,T=new c.Vector3,w=e.groups;0===w.length&&(w=[{start:0,count:s.length}]);p=0;for(var C=w.length;p<C;++p)for(var P=k=(j=w[p]).start,E=k+j.count;P<E;P+=3)I(s[P+0],s[P+1],s[P+2]);var O,A,M,N=new c.Vector3,S=new c.Vector3,R=new c.Vector3,L=new c.Vector3;for(p=0,C=w.length;p<C;++p){var j,k;for(P=k=(j=w[p]).start,E=k+j.count;P<E;P+=3)G(s[P+0]),G(s[P+1]),G(s[P+2])}}else console.warn("THREE.BufferGeometry: Missing required attributes (index, position, normal or uv) in BufferGeometry.computeTangents()");function I(e,t,n){m.fromArray(o,3*e),f.fromArray(o,3*t),g.fromArray(o,3*n),v.fromArray(a,2*e),y.fromArray(a,2*t),b.fromArray(a,2*n),f.sub(m),g.sub(m),y.sub(v),b.sub(v);var r=1/(y.x*b.y-b.x*y.y);isFinite(r)&&(x.copy(f).multiplyScalar(b.y).addScaledVector(g,-y.y).multiplyScalar(r),T.copy(g).multiplyScalar(y.x).addScaledVector(f,-b.x).multiplyScalar(r),d[e].add(x),d[t].add(x),d[n].add(x),h[e].add(T),h[t].add(T),h[n].add(T))}function G(e){R.fromArray(i,3*e),L.copy(R),A=d[e],N.copy(A),N.sub(R.multiplyScalar(R.dot(A))).normalize(),S.crossVectors(L,A),M=S.dot(h[e]),O=M<0?-1:1,u[4*e]=N.x,u[4*e+1]=N.y,u[4*e+2]=N.z,u[4*e+3]=O}},mergeBufferGeometries:function(e,t){for(var n=null!==e[0].index,r=new Set(Object.keys(e[0].attributes)),o=new Set(Object.keys(e[0].morphAttributes)),i={},a={},_=e[0].morphTargetsRelative,c=new s.BufferGeometry,l=0,u=0;u<e.length;++u){var d=e[u];if(n!==(null!==d.index))return null;for(var h in d.attributes){if(!r.has(h))return null;void 0===i[h]&&(i[h]=[]),i[h].push(d.attributes[h])}if(_!==d.morphTargetsRelative)return null;for(var h in d.morphAttributes){if(!o.has(h))return null;void 0===a[h]&&(a[h]=[]),a[h].push(d.morphAttributes[h])}if(c.userData.mergedUserData=c.userData.mergedUserData||[],c.userData.mergedUserData.push(d.userData),t){var p;if(n)p=d.index.count;else{if(void 0===d.attributes.position)return null;p=d.attributes.position.count}c.addGroup(l,p,u),l+=p}}if(n){var m=0,f=[];for(u=0;u<e.length;++u){for(var g=e[u].index,v=0;v<g.count;++v)f.push(g.getX(v)+m);m+=e[u].attributes.position.count}c.setIndex(f)}for(var h in i){var y=this.mergeBufferAttributes(i[h]);if(!y)return null;c.setAttribute(h,y)}for(var h in a){var b=a[h][0].length;if(0===b)break;c.morphAttributes=c.morphAttributes||{},c.morphAttributes[h]=[];for(u=0;u<b;++u){var x=[];for(v=0;v<a[h].length;++v)x.push(a[h][v][u]);var T=this.mergeBufferAttributes(x);if(!T)return null;c.morphAttributes[h].push(T)}}return c},mergeBufferAttributes:function(e){for(var t,n,s,o=0,i=0;i<e.length;++i){var a=e[i];if(a.isInterleavedBufferAttribute)return null;if(void 0===t&&(t=a.array.constructor),t!==a.array.constructor)return null;if(void 0===n&&(n=a.itemSize),n!==a.itemSize)return null;if(void 0===s&&(s=a.normalized),s!==a.normalized)return null;o+=a.array.length}var _=new t(o),c=0;for(i=0;i<e.length;++i)_.set(e[i].array,c),c+=e[i].array.length;return new r.BufferAttribute(_,n,s)},interleaveAttributes:function(e){for(var t,n=0,r=0,s=0,a=e.length;s<a;++s){var _=e[s];if(void 0===t&&(t=_.array.constructor),t!==_.array.constructor)return console.warn("AttributeBuffers of different types cannot be interleaved"),null;n+=_.array.length,r+=_.itemSize}var c=new o.a(new t(n),r),l=0,u=[],d=["getX","getY","getZ","getW"],h=["setX","setY","setZ","setW"],p=0;for(a=e.length;p<a;p++){var m=(_=e[p]).itemSize,f=_.count,g=new i.InterleavedBufferAttribute(c,m,l,_.normalized);u.push(g),l+=m;for(var v=0;v<f;v++)for(var y=0;y<m;y++)g[h[y]](v,_[d[y]](v))}return u},estimateBytesUsed:function(e){var t=0;for(var n in e.attributes){var r=e.getAttribute(n);t+=r.count*r.itemSize*r.array.BYTES_PER_ELEMENT}var s=e.getIndex();return t+=s?s.count*s.itemSize*s.array.BYTES_PER_ELEMENT:0},mergeVertices:function(e,t=1e-4){t=Math.max(t,Number.EPSILON);for(var n={},s=e.getIndex(),o=e.getAttribute("position"),i=s?s.count:o.count,a=0,_=Object.keys(e.attributes),c={},l={},u=[],d=["getX","getY","getZ","getW"],h=0,p=_.length;h<p;h++){c[b=_[h]]=[],(C=e.morphAttributes[b])&&(l[b]=new Array(C.length).fill().map(()=>[]))}var m=Math.log10(1/t),f=Math.pow(10,m);for(h=0;h<i;h++){var g=s?s.getX(h):h,v="",y=0;for(p=_.length;y<p;y++)for(var b=_[y],x=(w=e.getAttribute(b)).itemSize,T=0;T<x;T++)v+=`${~~(w[d[T]](g)*f)},`;if(v in n)u.push(n[v]);else{for(y=0,p=_.length;y<p;y++){b=_[y];var w=e.getAttribute(b),C=e.morphAttributes[b],P=(x=w.itemSize,c[b]),E=l[b];for(T=0;T<x;T++){var O=d[T];if(P.push(w[O](g)),C)for(var A=0,M=C.length;A<M;A++)E[A].push(C[A][O](g))}}n[v]=a,u.push(a),a++}}const N=e.clone();for(h=0,p=_.length;h<p;h++){b=_[h];var S=e.getAttribute(b),R=new S.array.constructor(c[b]);w=new r.BufferAttribute(R,S.itemSize,S.normalized);if(N.setAttribute(b,w),b in l)for(y=0;y<l[b].length;y++){var L=e.morphAttributes[b][y],j=(R=new L.array.constructor(l[b][y]),new r.BufferAttribute(R,L.itemSize,L.normalized));N.morphAttributes[b][y]=j}}return N.setIndex(u),N},toTrianglesDrawMode:function(e,t){if(t===a.TrianglesDrawMode)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),e;if(t===a.TriangleFanDrawMode||t===a.TriangleStripDrawMode){var n=e.getIndex();if(null===n){var r=[],s=e.getAttribute("position");if(void 0===s)return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var o=0;o<s.count;o++)r.push(o);e.setIndex(r),n=e.getIndex()}var i=n.count-2,_=[];if(t===a.TriangleFanDrawMode)for(o=1;o<=i;o++)_.push(n.getX(0)),_.push(n.getX(o)),_.push(n.getX(o+1));else for(o=0;o<i;o++)o%2==0?(_.push(n.getX(o)),_.push(n.getX(o+1)),_.push(n.getX(o+2))):(_.push(n.getX(o+2)),_.push(n.getX(o+1)),_.push(n.getX(o)));_.length/3!==i&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var c=e.clone();return c.setIndex(_),c.clearGroups(),c}return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",t),e}}},,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(362),s=n(133),o=n(50),i=n(29),a=n(16);class _ extends r.GlobalsBaseController{constructor(e){super(),this._uv_name=e}set_texture_allocations_controller(e){this._texture_allocations_controller=e}handle_globals_node(e,t,n){if(!this._texture_allocations_controller)return;const r=e.io.outputs.named_output_connection_points_by_name(t),o=e.gl_var_name(t);if(this._texture_allocations_controller.variable(t)&&r){const s=r.type,i=`${s} ${o} = ${this.read_attribute(e,s,t,n)}`;n.add_body_lines(e,[i])}else this.globals_geometry_handler=this.globals_geometry_handler||new s.GlobalsGeometryHandler,this.globals_geometry_handler.handle_globals_node(e,t,n)}read_attribute(e,t,n,r){if(!this._texture_allocations_controller)return;const o=this._texture_allocations_controller.variable(n);if(!o)return s.GlobalsGeometryHandler.read_attribute(e,t,n,r);{this.add_particles_sim_uv_attribute(e,r);const t=o.component,n=o.allocation;if(n){const s=n.texture_name,o=new i.UniformGLDefinition(e,a.ConnectionPointType.SAMPLER_2D,s);return r.add_definitions(e,[o]),`texture2D( ${s}, ${this._uv_name} ).${t}`}}}add_particles_sim_uv_attribute(e,t){const n=new i.AttributeGLDefinition(e,a.ConnectionPointType.VEC2,_.UV_ATTRIB),r=new i.VaryingGLDefinition(e,a.ConnectionPointType.VEC2,_.UV_VARYING);t.add_definitions(e,[n,r],o.ShaderName.VERTEX),t.add_definitions(e,[r],o.ShaderName.FRAGMENT),t.add_body_lines(e,[`${_.UV_VARYING} = ${_.UV_ATTRIB}`],o.ShaderName.VERTEX)}}t.GlobalsTextureHandler=_,_.UV_ATTRIB="particles_sim_uv_attrib",_.UV_VARYING="particles_sim_uv_varying",_.PARTICLE_SIM_UV="particleUV"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(53),s=n(4),o=n(6);t.CoreGeometryUtilCurve=class{static accumulated_curve_point_indices(e){let t=[];const n=[];let r,s=null;for(let o=0;o<e.length;o++)if(o%2==1){r=e[o];const i=e[o-1];null==s||i===s?(0===t.length&&t.push(i),t.push(r),s=r):(n.push(t),t=[i,r],s=r)}return n.push(t),n}static create_line_segment_geometry(e,t,n,r){const i=[],a={};n.forEach(e=>{a[e]=[]}),t.forEach((t,s)=>{const o=e[t];n.forEach(e=>{let t=o.attrib_value(e);t=r[e]>1?t.toArray():[t],t.forEach(t=>{a[e].push(t)})}),s>0&&(i.push(s-1),i.push(s))});const _=new o.BufferGeometry;return n.forEach(e=>{const t=r[e],n=a[e];_.setAttribute(e,new s.Float32BufferAttribute(n,t))}),_.setIndex(i),_}static line_segment_to_geometries(e){var t;const n=[],s=new r.CoreGeometry(e),o=s.attrib_names(),i=s.points(),a=(null===(t=e.getIndex())||void 0===t?void 0:t.array)||[],_=this.accumulated_curve_point_indices(a);if(console.log(a,_),_.length>0){const t=s.attrib_sizes();_.forEach((r,s)=>{e=this.create_line_segment_geometry(i,r,o,t),n.push(e)})}return n}}},function(e,t){},,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(416),o=n(417),i=n(418),a=n(529),_=n(530),c=n(533),l=n(622),u=n(623),d=n(624),h=n(625),p=n(627),m=n(631),f=n(633),g=n(635),v=n(636),y=n(637),b=n(55);t.PolyScene=class{constructor(){this._default_scene=new b.Scene,this._cameras_controller=new s.CamerasController(this),this._cooker=new o.Cooker(this),this.cook_controller=new a.CookController,this._graph=new i.CoreGraph,this._missing_expression_references_controller=new h.MissingReferencesController,this._expressions_controller=new d.ExpressionsController,this._nodes_controller=new p.NodesController(this),this._time_controller=new f.TimeController(this),this._graph.set_scene(this),this.nodes_controller.init()}get default_scene(){return this._default_scene}set_uuid(e){return this._uuid=e}get uuid(){return this._uuid}set_name(e){return this._name=e}get name(){return this._name}get cameras_controller(){return this._cameras_controller}get cooker(){return this._cooker}wait_for_cooks_completed(){return r.__awaiter(this,void 0,void 0,(function*(){return this.cook_controller.wait_for_cooks_completed()}))}get dispatch_controller(){return this._dispatch_controller=this._dispatch_controller||new _.DispatchController(this)}get events_controller(){return this._events_controller=this._events_controller||new c.SceneEventsController(this)}get graph(){return this._graph}get lifecycle_controller(){return this._lifecycle_controller=this._lifecycle_controller||new l.LifeCycleController(this)}get loading_controller(){return this._loading_controller=this._loading_controller||new u.LoadingController(this)}get missing_expression_references_controller(){return this._missing_expression_references_controller}get expressions_controller(){return this._expressions_controller}get nodes_controller(){return this._nodes_controller}get performance(){return this._performance=this._performance||new m.CorePerformance}get time_controller(){return this._time_controller}set_frame(e){this.time_controller.set_frame(e)}get frame(){return this.time_controller.frame}get time(){return this.time_controller.time}get frame_range(){return this.time_controller.frame_range}play(){this.time_controller.play()}pause(){this.time_controller.pause()}get serializer(){return this._serializer=this._serializer||new g.PolySceneSerializer(this)}to_json(){return this.serializer.to_json()}get uniforms_controller(){return this._uniforms_controller=this._uniforms_controller||new v.UniformsController(this)}get webgl_controller(){return this._webgl_controller=this._webgl_controller||new y.WebGLController}batch_update(e){this._cooker.block(),e(),this._cooker.unblock()}node(e){return this.nodes_controller.node(e)}get root(){return this.nodes_controller.root}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(186),s=n(33),o=n(16),i=n(355),a=n(5);class _ extends a.NodeParamsConfig{constructor(){super(...arguments),this.active=a.ParamConfig.BOOLEAN(!0,{callback:(e,t)=>{l.PARAM_CALLBACK_toggle_active(e)}})}}const c=new _;class l extends r.TypedEventNode{constructor(){super(...arguments),this.params_config=c}static type(){return"mouse_event"}initialize_node(){this.io.outputs.set_named_output_connection_points(i.ACCEPTED_MOUSE_EVENT_TYPES.map(e=>new s.TypedNamedConnectionPoint(e,o.ConnectionPointType.BOOL))),this.lifecycle.add_on_add_hook(()=>{this.scene.events_controller.register_event_node(this)}),this.lifecycle.add_delete_hook(()=>{this.scene.events_controller.unregister_event_node(this)})}process_event(e,t,n){if(!this.pv.active)return;const r=this.io.outputs.get_output_index(e.type);if(r>=0){const s=this.io.connections.output_connections().filter(e=>e.output_index==r).map(e=>e.node_dest);for(let r of s)r.process_event(e,t,n)}}_update_register(){this.pv.active?this.scene.events_controller.register_event_node(this):this.scene.events_controller.unregister_event_node(this)}static PARAM_CALLBACK_toggle_active(e){e._update_register()}}t.MouseEventNode=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BaseState=class{constructor(e){this.node=e}}},,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.NodeSerializer=class{constructor(e){this.node=e}to_json(e=!1){var t,n,r,s;const o={name:this.node.name,type:this.node.type,graph_node_id:this.node.graph_node_id,is_dirty:this.node.is_dirty,ui_data_json:this.node.ui_data.to_json(),error_message:this.node.states.error.message,children:this.children_ids(),inputs:this.input_ids(),input_connection_output_indices:this.connection_input_indices(),named_input_connections:this.named_input_connections(),named_output_connections:this.named_output_connections(),param_ids:this.to_json_params(e),override_clonable_state:this.node.io.inputs.override_clonable_state(),inputs_clonable_state_with_override:this.node.io.inputs.inputs_clonable_state_with_override(),flags:{display:null===(n=null===(t=this.node.flags)||void 0===t?void 0:t.display)||void 0===n?void 0:n.active,bypass:null===(s=null===(r=this.node.flags)||void 0===r?void 0:r.bypass)||void 0===s?void 0:s.active},selection:void 0};return this.node.children_allowed()&&this.node.children_controller&&(o.selection=this.node.children_controller.selection.to_json()),o}children_ids(){return this.node.children().map(e=>e.graph_node_id)}input_ids(){return this.node.io.inputs.inputs().map(e=>null!=e?e.graph_node_id:void 0)}connection_input_indices(){var e;return null===(e=this.node.io.connections.input_connections())||void 0===e?void 0:e.map(e=>null!=e?e.output_index:void 0)}named_input_connections(){return this.node.io.inputs.named_input_connection_points.map(e=>e.to_json())}named_output_connections(){return this.node.io.outputs.named_output_connection_points.map(e=>e.to_json())}to_json_params_from_names(e,t=!1){return e.map(e=>this.node.params.get(e).graph_node_id)}to_json_params(e=!1){return this.to_json_params_from_names(this.node.params.names,e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(580),s=n(603),o=n(604),i=n(353),a=n(605),_=n(606),c=n(354),l=n(128),u=n(608),d=n(263),h=n(609),p=n(610),m=n(611),f=n(24);t.ParamConstructorByType={[f.ParamType.BOOLEAN]:r.BooleanParam,[f.ParamType.BUTTON]:s.ButtonParam,[f.ParamType.COLOR]:o.ColorParam,[f.ParamType.FLOAT]:i.FloatParam,[f.ParamType.FOLDER]:a.FolderParam,[f.ParamType.INTEGER]:_.IntegerParam,[f.ParamType.OPERATOR_PATH]:c.OperatorPathParam,[f.ParamType.RAMP]:l.RampParam,[f.ParamType.SEPARATOR]:u.SeparatorParam,[f.ParamType.STRING]:d.StringParam,[f.ParamType.VECTOR2]:h.Vector2Param,[f.ParamType.VECTOR3]:p.Vector3Param,[f.ParamType.VECTOR4]:m.Vector4Param}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(581);t.ExpressionController=class{constructor(e){this.param=e}get active(){return null!=this._expression}get expression(){return this._expression}get is_errored(){return!!this._manager&&this._manager.is_errored}get error_message(){return this._manager?this._manager.error_message:null}get requires_entities(){return this.param.options.is_expression_for_entities}set_expression(e,t=!0){var n;this.param.scene.missing_expression_references_controller.deregister_param(this.param),this.param.scene.expressions_controller.deregister_param(this.param),this._expression!=e&&(this._expression=e,this._expression?(this._manager=this._manager||new s.ExpressionManager(this.param),this._manager.parse_expression(this._expression)):null===(n=this._manager)||void 0===n||n.reset(),t&&this.param.set_dirty())}update_from_method_dependency_name_change(){this._manager&&this.active&&this._manager.update_from_method_dependency_name_change()}compute_expression(){return r.__awaiter(this,void 0,void 0,(function*(){if(this._manager&&this.active){return yield this._manager.compute_function()}}))}compute_expression_for_entities(e,t){var n,s;return r.__awaiter(this,void 0,void 0,(function*(){this.set_entities(e,t),yield this.compute_expression(),(null===(n=this._manager)||void 0===n?void 0:n.error_message)&&this.param.node.states.error.set(`expression evalution error: ${null===(s=this._manager)||void 0===s?void 0:s.error_message}`),this.reset_entities()}))}compute_expression_for_points(e,t){return this.compute_expression_for_entities(e,t)}compute_expression_for_objects(e,t){return this.compute_expression_for_entities(e,t)}get entities(){return this._entities}get entity_callback(){return this._entity_callback}set_entities(e,t){this._entities=e,this._entity_callback=t}reset_entities(){this._entities=void 0,this._entity_callback=void 0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=r.__importDefault(n(45)),o=r.__importDefault(n(582));o.default.addUnaryOp("@");o.default.addBinaryOp("**",10);class i{constructor(){}parse_expression(e){try{this.reset(),this.node=o.default(e)}catch(t){const n=`could not parse the expression '${e}' (error: ${t})`;this.error_message=n}}parse_expression_for_string_param(e){try{this.reset();const t=i.string_value_elements(e),n=[];for(let e=0;e<t.length;e++){const r=t[e];let s;s=e%2==1?o.default(r):{type:"Literal",value:`'${r}'`,raw:`'${r}'`},n.push(s)}this.node={type:"CallExpression",arguments:n,callee:{type:"Identifier",name:"str_concat"}}}catch(t){const n=`could not parse the expression '${e}' (error: ${t})`;this.error_message=n}}static string_value_elements(e){return null!=e&&s.default(e)?e.split("`"):[]}reset(){this.node=void 0,this.error_message=void 0}}t.ParsedTree=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(101);t.DecomposedPath=class{constructor(){this.index=-1,this.path_elements=[],this._named_nodes=[],this.graph_node_ids=[],this.node_element_by_graph_node_id={}}add_node(e,t){this.index+=1,e==t.name&&(this.named_nodes[this.index]=t),this.graph_node_ids[this.index]=t.graph_node_id,this.node_element_by_graph_node_id[t.graph_node_id]=e}add_path_element(e){this.index+=1,this.path_elements[this.index]=e}get named_nodes(){return this._named_nodes}update_from_name_change(e){this.named_nodes.map(e=>null==e?void 0:e.graph_node_id).includes(e.graph_node_id)&&(this.node_element_by_graph_node_id[e.graph_node_id]=e.name)}to_path(){const e=new Array(this.index);for(let t=0;t<=this.index;t++){const n=this.named_nodes[t];if(n)e[t]=this.node_element_by_graph_node_id[n.graph_node_id];else{const n=this.path_elements[t];n&&(e[t]=n)}}let t=e.join(r.CoreWalker.SEPARATOR);const n=t[0];return n&&(r.CoreWalker.NON_LETTER_PREFIXES.includes(n)||(t=`${r.CoreWalker.SEPARATOR}${t}`)),t}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=function(e){return function(t){return Math.pow(t,e)}},s=function(e){return function(t){return 1-Math.abs(Math.pow(t-1,e))}},o=function(e){return function(t){return t<.5?r(e)(2*t)/2:s(e)(2*t-1)/2+.5}};t.Easing={linear:o(1),ease_i:function(e,t){return r(t)(e)},ease_o:function(e,t){return s(t)(e)},ease_io:function(e,t){return o(t)(e)},ease_i2:r(2),ease_o2:s(2),ease_io2:o(2),ease_i3:o(3),ease_o3:o(3),ease_io3:o(3),ease_i4:o(4),ease_o4:o(4),ease_io4:o(4),ease_i_sin:function(e){return 1+Math.sin(Math.PI/2*e-Math.PI/2)},ease_o_sin:function(e){return Math.sin(Math.PI/2*e)},ease_io_sin:function(e){return(1+Math.sin(Math.PI*e-Math.PI/2))/2},ease_i_elastic:function(e){return(.04-.04/e)*Math.sin(25*e)+1},ease_o_elastic:function(e){return.04*e/--e*Math.sin(25*e)},ease_io_elastic:function(e){return(e-=.5)<0?(.02+.01/e)*Math.sin(50*e):(.02-.01/e)*Math.sin(50*e)+1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3).__importDefault(n(44)),s=n(191),o=n(24),i=n(49);class a extends s.TypedNumericParam{static type(){return o.ParamType.FLOAT}get default_value_serialized(){return this.default_value}get raw_input_serialized(){return this._raw_input}get value_serialized(){return this.value}static are_raw_input_equal(e,t){return e==t}static are_values_equal(e,t){return e==t}static convert(e){if(r.default(e))return e;if(i.CoreString.is_number(e)){const t=parseFloat(e);if(r.default(t))return t}return null}convert(e){const t=a.convert(e);return t?this.options.ensure_in_range(t):t}}t.FloatParam=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(93),o=n(101),i=n(24),a=n(103);class _ extends s.TypedParam{constructor(){super(...arguments),this._found_node=null}static type(){return i.ParamType.OPERATOR_PATH}get default_value_serialized(){return this.default_value}get raw_input_serialized(){return`${this._raw_input}`}get value_serialized(){return`${this.value}`}static are_raw_input_equal(e,t){return e==t}static are_values_equal(e,t){return e==t}get is_default(){return this._value==this.default_value}process_raw_input(){this._value=this._raw_input,this.set_dirty(),this.emit_controller.emit(a.ParamEvent.VALUE_UPDATED)}process_computation(){var e,t;return r.__awaiter(this,void 0,void 0,(function*(){const n=this._value;let r=null;if(null!=n&&""!==n&&(r=o.CoreWalker.find_node(this.node,n)),this._found_node!==r){const n=this.options.dependent_on_found_node();if(this._found_node&&n&&this.remove_graph_input(this._found_node),this._found_node=r,r){const s=this.options.node_selection_context,o=null===(t=null===(e=r.parent)||void 0===e?void 0:e.children_controller)||void 0===t?void 0:t.context;s==o||null==s?n&&this.add_graph_input(r):this.states.error.set(`node context is ${s} but the params expects a ${o}`)}this.options.execute_callback()}this.remove_dirty_state()}))}found_node(){return this._found_node}}t.OperatorPathParam=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(621);var s;!function(e){e.auxclick="auxclick",e.click="click",e.contextmenu="contextmenu",e.dblclick="dblclick",e.mousedown="mousedown",e.mouseenter="mouseenter",e.mouseleave="mouseleave",e.mousemove="mousemove",e.mouseover="mouseover",e.mouseout="mouseout",e.mouseup="mouseup",e.pointerlockchange="pointerlockchange",e.pointerlockerror="pointerlockerror",e.select="select",e.wheel="wheel"}(s||(s={})),t.ACCEPTED_MOUSE_EVENT_TYPES=[s.auxclick,s.click,s.contextmenu,s.dblclick,s.mousedown,s.mouseenter,s.mouseleave,s.mousemove,s.mouseover,s.mouseout,s.mouseup,s.pointerlockchange,s.pointerlockerror,s.select,s.wheel];class o extends r.BaseEventsController{accepts_event(e){return t.ACCEPTED_MOUSE_EVENT_TYPES.includes(e.type)}}t.MouseEventsController=o},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(638),s=n(193),o=n(639),i=n(640),a=n(641),_=n(156),c=n(263),l=n(128);t.JsonImportDispatcher=class{static dispatch_node(e){return new r.NodeJsonImporter(e)}static dispatch_param(e){return e instanceof _.TypedMultipleParam?new o.ParamMultipleJsonImporter(e):e instanceof c.StringParam?new i.ParamStringJsonImporter(e):e instanceof l.RampParam?new a.ParamRampJsonImporter(e):new s.ParamJsonImporter(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BaseFlag=class{constructor(e){this.node=e,this._state=!0,this._hooks=null}add_hook(e){this._hooks=this._hooks||[],this._hooks.push(e)}on_update(){}set(e){this._state!=e&&(this._state=e,this.on_update(),this.run_hooks())}get active(){return this._state}toggle(){this.set(!this._state)}run_hooks(){if(this._hooks)for(let e of this._hooks)e()}}},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(){this._id=r.__next_id++}id(){return this._id}handle_globals_node(e,t,n){}}t.GlobalsBaseController=r,r.__next_id=0},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TypedGLDefinitionCollection=class{constructor(e=[]){this._definitions=e,this._errored=!1}get errored(){return this._errored}get error_message(){return this._error_message}uniq(){const e=new Map,t=[];for(let n of this._definitions)if(!this._errored){const r=n.name,s=e.get(r);s?s.data_type!=n.data_type&&(this._errored=!0,this._error_message=`attempt to create ${n.name} with types ${n.data_type}`,console.warn("emitting error message",this._error_message)):(e.set(r,n),t.push(r))}const n=[];for(let r of t){const t=e.get(r);t&&n.push(t)}return n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=r.__importDefault(n(92)),o=r.__importDefault(n(91)),i=n(129),a=n(50);t.TypedNodeTraverser=class{constructor(e,t){this._assembler=e,this._gl_parent_node=t,this._leaves_graph_id=new Map,this._graph_ids_by_shader_name=new Map,this._outputs_by_graph_id=new Map,this._depth_by_graph_id=new Map,this._graph_id_by_depth=new Map,this._graph=this._gl_parent_node.scene.graph}reset(){this._leaves_graph_id.clear(),this._outputs_by_graph_id.clear(),this._depth_by_graph_id.clear(),this._graph_id_by_depth.clear(),this.shader_names().forEach(e=>{this._graph_ids_by_shader_name.set(e,new Map)})}shader_names(){return this._assembler.shader_names}input_names_for_shader_name(e,t){return this._assembler.input_names_for_shader_name(e,t)}traverse(e){this.reset();for(let e of this.shader_names())this._leaves_graph_id.set(e,new Map);for(let t of this.shader_names()){this._shader_name=t;for(let t of e)this.find_leaves_from_root_node(t),this.set_nodes_depth()}this._depth_by_graph_id.forEach((e,t)=>{null!=e&&i.MapUtils.push_on_array_at_entry(this._graph_id_by_depth,e,t)})}leaves_from_nodes(e){var t;this._shader_name=a.ShaderName.LEAVES_FROM_NODES_SHADER,this._graph_ids_by_shader_name.set(this._shader_name,new Map),this._leaves_graph_id.set(this._shader_name,new Map);for(let t of e)this.find_leaves(t);const n=[];return null===(t=this._leaves_graph_id.get(this._shader_name))||void 0===t||t.forEach((e,t)=>{n.push(t)}),this._graph.nodes_from_ids(n)}nodes_for_shader_name(e){const t=[];this._graph_id_by_depth.forEach((e,n)=>{t.push(n)}),t.sort((e,t)=>e-t);const n=[];return t.forEach(t=>{const r=this._graph_id_by_depth.get(t);r&&r.forEach(t=>{var r;if(null===(r=this._graph_ids_by_shader_name.get(e))||void 0===r?void 0:r.get(t)){const e=this._graph.node_from_id(t);n.push(e)}})}),n}sorted_nodes(){const e=[];this._graph_id_by_depth.forEach((t,n)=>{e.push(n)}),e.sort((e,t)=>e-t);const t=[];return e.forEach(e=>{const n=this._graph_id_by_depth.get(e);if(n)for(let e of n){const n=this._graph.node_from_id(e);n&&t.push(n)}}),t}find_leaves_from_root_node(e){var t;null===(t=this._graph_ids_by_shader_name.get(this._shader_name))||void 0===t||t.set(e.graph_node_id,!0);const n=this.input_names_for_shader_name(e,this._shader_name);if(n)for(let t of n){const n=e.io.inputs.named_input(t);n&&(i.MapUtils.push_on_array_at_entry(this._outputs_by_graph_id,n.graph_node_id,e.graph_node_id),this.find_leaves(n))}this._outputs_by_graph_id.forEach((e,t)=>{this._outputs_by_graph_id.set(t,o.default(e))})}find_leaves(e){var t;null===(t=this._graph_ids_by_shader_name.get(this._shader_name))||void 0===t||t.set(e.graph_node_id,!0);const n=s.default(e.io.inputs.inputs()),r=o.default(n.map(e=>e.graph_node_id)).map(e=>this._graph.node_from_id(e));if(r.length>0)for(let t of r)i.MapUtils.push_on_array_at_entry(this._outputs_by_graph_id,t.graph_node_id,e.graph_node_id),this.find_leaves(t);else this._leaves_graph_id.get(this._shader_name).set(e.graph_node_id,!0)}set_nodes_depth(){this._leaves_graph_id.forEach((e,t)=>{e.forEach((e,t)=>{this.set_node_depth(t)})})}set_node_depth(e,t=0){const n=this._depth_by_graph_id.get(e);null!=n?this._depth_by_graph_id.set(e,Math.max(n,t)):this._depth_by_graph_id.set(e,t);const r=this._outputs_by_graph_id.get(e);r&&r.forEach(e=>{this.set_node_depth(e,t+1)})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(34),s=n(5);class o extends s.NodeParamsConfig{}const i=new o;class a extends r.TypedGlNode{constructor(){super(...arguments),this.params_config=i}static type(){return"globals"}create_params(){var e;null===(e=this.material_node)||void 0===e||e.assembler_controller.add_globals_params(this)}set_lines(e){var t,n;null===(n=null===(t=this.material_node)||void 0===t?void 0:t.assembler_controller)||void 0===n||n.assembler.set_node_lines_globals(this,e)}}t.GlobalsGlNode=a},function(e,t,n){"use strict";n.r(t),n.d(t,"OrbitControls",(function(){return c})),n.d(t,"MapControls",(function(){return l}));var r=n(43),s=n(0),o=n(42),i=n(294),a=n(2),_=n(1),c=function(e,t){var n,r,c,l,u;void 0===t&&console.warn('THREE.OrbitControls: The second parameter "domElement" is now mandatory.'),t===document&&console.error('THREE.OrbitControls: "document" should not be used as the target "domElement". Please use "renderer.domElement" instead.'),this.object=e,this.domElement=t,this.enabled=!0,this.target=new _.Vector3,this.minDistance=0,this.maxDistance=1/0,this.minZoom=0,this.maxZoom=1/0,this.minPolarAngle=0,this.maxPolarAngle=Math.PI,this.minAzimuthAngle=-1/0,this.maxAzimuthAngle=1/0,this.enableDamping=!1,this.dampingFactor=.05,this.enableZoom=!0,this.zoomSpeed=1,this.enableRotate=!0,this.rotateSpeed=1,this.enablePan=!0,this.panSpeed=1,this.screenSpacePanning=!1,this.keyPanSpeed=7,this.autoRotate=!1,this.autoRotateSpeed=2,this.enableKeys=!0,this.keys={LEFT:37,UP:38,RIGHT:39,BOTTOM:40},this.mouseButtons={LEFT:s.MOUSE.ROTATE,MIDDLE:s.MOUSE.DOLLY,RIGHT:s.MOUSE.PAN},this.touches={ONE:s.TOUCH.ROTATE,TWO:s.TOUCH.DOLLY_PAN},this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=function(){return y.phi},this.getAzimuthalAngle=function(){return y.theta},this.saveState=function(){d.target0.copy(d.target),d.position0.copy(d.object.position),d.zoom0=d.object.zoom},this.reset=function(){d.target.copy(d.target0),d.object.position.copy(d.position0),d.object.zoom=d.zoom0,d.object.updateProjectionMatrix(),d.dispatchEvent(h),d.update(),g=f.NONE},this.update=(n=new _.Vector3,r=(new o.Quaternion).setFromUnitVectors(e.up,new _.Vector3(0,1,0)),c=r.clone().inverse(),l=new _.Vector3,u=new o.Quaternion,function(){var e=d.object.position;return n.copy(e).sub(d.target),n.applyQuaternion(r),y.setFromVector3(n),d.autoRotate&&g===f.NONE&&j(2*Math.PI/60/60*d.autoRotateSpeed),d.enableDamping?(y.theta+=b.theta*d.dampingFactor,y.phi+=b.phi*d.dampingFactor):(y.theta+=b.theta,y.phi+=b.phi),y.theta=Math.max(d.minAzimuthAngle,Math.min(d.maxAzimuthAngle,y.theta)),y.phi=Math.max(d.minPolarAngle,Math.min(d.maxPolarAngle,y.phi)),y.makeSafe(),y.radius*=x,y.radius=Math.max(d.minDistance,Math.min(d.maxDistance,y.radius)),!0===d.enableDamping?d.target.addScaledVector(T,d.dampingFactor):d.target.add(T),n.setFromSpherical(y),n.applyQuaternion(c),e.copy(d.target).add(n),d.object.lookAt(d.target),!0===d.enableDamping?(b.theta*=1-d.dampingFactor,b.phi*=1-d.dampingFactor,T.multiplyScalar(1-d.dampingFactor)):(b.set(0,0,0),T.set(0,0,0)),x=1,!!(w||l.distanceToSquared(d.object.position)>v||8*(1-u.dot(d.object.quaternion))>v)&&(d.dispatchEvent(h),l.copy(d.object.position),u.copy(d.object.quaternion),w=!1,!0)}),this.dispose=function(){d.domElement.removeEventListener("contextmenu",se,!1),d.domElement.removeEventListener("mousedown",J,!1),d.domElement.removeEventListener("wheel",Q,!1),d.domElement.removeEventListener("touchstart",te,!1),d.domElement.removeEventListener("touchend",re,!1),d.domElement.removeEventListener("touchmove",ne,!1),document.removeEventListener("mousemove",K,!1),document.removeEventListener("mouseup",Z,!1),d.domElement.removeEventListener("keydown",ee,!1)};var d=this,h={type:"change"},p={type:"start"},m={type:"end"},f={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6},g=f.NONE,v=1e-6,y=new i.a,b=new i.a,x=1,T=new _.Vector3,w=!1,C=new a.Vector2,P=new a.Vector2,E=new a.Vector2,O=new a.Vector2,A=new a.Vector2,M=new a.Vector2,N=new a.Vector2,S=new a.Vector2,R=new a.Vector2;function L(){return Math.pow(.95,d.zoomSpeed)}function j(e){b.theta-=e}function k(e){b.phi-=e}var I,G=(I=new _.Vector3,function(e,t){I.setFromMatrixColumn(t,0),I.multiplyScalar(-e),T.add(I)}),z=function(){var e=new _.Vector3;return function(t,n){!0===d.screenSpacePanning?e.setFromMatrixColumn(n,1):(e.setFromMatrixColumn(n,0),e.crossVectors(d.object.up,e)),e.multiplyScalar(t),T.add(e)}}(),D=function(){var e=new _.Vector3;return function(t,n){var r=d.domElement;if(d.object.isPerspectiveCamera){var s=d.object.position;e.copy(s).sub(d.target);var o=e.length();o*=Math.tan(d.object.fov/2*Math.PI/180),G(2*t*o/r.clientHeight,d.object.matrix),z(2*n*o/r.clientHeight,d.object.matrix)}else d.object.isOrthographicCamera?(G(t*(d.object.right-d.object.left)/d.object.zoom/r.clientWidth,d.object.matrix),z(n*(d.object.top-d.object.bottom)/d.object.zoom/r.clientHeight,d.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),d.enablePan=!1)}}();function F(e){d.object.isPerspectiveCamera?x/=e:d.object.isOrthographicCamera?(d.object.zoom=Math.max(d.minZoom,Math.min(d.maxZoom,d.object.zoom*e)),d.object.updateProjectionMatrix(),w=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),d.enableZoom=!1)}function B(e){d.object.isPerspectiveCamera?x*=e:d.object.isOrthographicCamera?(d.object.zoom=Math.max(d.minZoom,Math.min(d.maxZoom,d.object.zoom/e)),d.object.updateProjectionMatrix(),w=!0):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),d.enableZoom=!1)}function V(e){C.set(e.clientX,e.clientY)}function U(e){O.set(e.clientX,e.clientY)}function q(e){if(1==e.touches.length)C.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);C.set(t,n)}}function $(e){if(1==e.touches.length)O.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);O.set(t,n)}}function H(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);N.set(0,r)}function Y(e){if(1==e.touches.length)P.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);P.set(t,n)}E.subVectors(P,C).multiplyScalar(d.rotateSpeed);var r=d.domElement;j(2*Math.PI*E.x/r.clientHeight),k(2*Math.PI*E.y/r.clientHeight),C.copy(P)}function X(e){if(1==e.touches.length)A.set(e.touches[0].pageX,e.touches[0].pageY);else{var t=.5*(e.touches[0].pageX+e.touches[1].pageX),n=.5*(e.touches[0].pageY+e.touches[1].pageY);A.set(t,n)}M.subVectors(A,O).multiplyScalar(d.panSpeed),D(M.x,M.y),O.copy(A)}function W(e){var t=e.touches[0].pageX-e.touches[1].pageX,n=e.touches[0].pageY-e.touches[1].pageY,r=Math.sqrt(t*t+n*n);S.set(0,r),R.set(0,Math.pow(S.y/N.y,d.zoomSpeed)),F(R.y),N.copy(S)}function J(e){if(!1!==d.enabled){var t;switch(e.preventDefault(),d.domElement.focus?d.domElement.focus():window.focus(),e.button){case 0:t=d.mouseButtons.LEFT;break;case 1:t=d.mouseButtons.MIDDLE;break;case 2:t=d.mouseButtons.RIGHT;break;default:t=-1}switch(t){case s.MOUSE.DOLLY:if(!1===d.enableZoom)return;!function(e){N.set(e.clientX,e.clientY)}(e),g=f.DOLLY;break;case s.MOUSE.ROTATE:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===d.enablePan)return;U(e),g=f.PAN}else{if(!1===d.enableRotate)return;V(e),g=f.ROTATE}break;case s.MOUSE.PAN:if(e.ctrlKey||e.metaKey||e.shiftKey){if(!1===d.enableRotate)return;V(e),g=f.ROTATE}else{if(!1===d.enablePan)return;U(e),g=f.PAN}break;default:g=f.NONE}g!==f.NONE&&(document.addEventListener("mousemove",K,!1),document.addEventListener("mouseup",Z,!1),d.dispatchEvent(p))}}function K(e){if(!1!==d.enabled)switch(e.preventDefault(),g){case f.ROTATE:if(!1===d.enableRotate)return;!function(e){P.set(e.clientX,e.clientY),E.subVectors(P,C).multiplyScalar(d.rotateSpeed);var t=d.domElement;j(2*Math.PI*E.x/t.clientHeight),k(2*Math.PI*E.y/t.clientHeight),C.copy(P),d.update()}(e);break;case f.DOLLY:if(!1===d.enableZoom)return;!function(e){S.set(e.clientX,e.clientY),R.subVectors(S,N),R.y>0?F(L()):R.y<0&&B(L()),N.copy(S),d.update()}(e);break;case f.PAN:if(!1===d.enablePan)return;!function(e){A.set(e.clientX,e.clientY),M.subVectors(A,O).multiplyScalar(d.panSpeed),D(M.x,M.y),O.copy(A),d.update()}(e)}}function Z(e){!1!==d.enabled&&(document.removeEventListener("mousemove",K,!1),document.removeEventListener("mouseup",Z,!1),d.dispatchEvent(m),g=f.NONE)}function Q(e){!1===d.enabled||!1===d.enableZoom||g!==f.NONE&&g!==f.ROTATE||(e.preventDefault(),e.stopPropagation(),d.dispatchEvent(p),function(e){e.deltaY<0?B(L()):e.deltaY>0&&F(L()),d.update()}(e),d.dispatchEvent(m))}function ee(e){!1!==d.enabled&&!1!==d.enableKeys&&!1!==d.enablePan&&function(e){var t=!1;switch(e.keyCode){case d.keys.UP:D(0,d.keyPanSpeed),t=!0;break;case d.keys.BOTTOM:D(0,-d.keyPanSpeed),t=!0;break;case d.keys.LEFT:D(d.keyPanSpeed,0),t=!0;break;case d.keys.RIGHT:D(-d.keyPanSpeed,0),t=!0}t&&(e.preventDefault(),d.update())}(e)}function te(e){if(!1!==d.enabled){switch(e.preventDefault(),e.touches.length){case 1:switch(d.touches.ONE){case s.TOUCH.ROTATE:if(!1===d.enableRotate)return;q(e),g=f.TOUCH_ROTATE;break;case s.TOUCH.PAN:if(!1===d.enablePan)return;$(e),g=f.TOUCH_PAN;break;default:g=f.NONE}break;case 2:switch(d.touches.TWO){case s.TOUCH.DOLLY_PAN:if(!1===d.enableZoom&&!1===d.enablePan)return;!function(e){d.enableZoom&&H(e),d.enablePan&&$(e)}(e),g=f.TOUCH_DOLLY_PAN;break;case s.TOUCH.DOLLY_ROTATE:if(!1===d.enableZoom&&!1===d.enableRotate)return;!function(e){d.enableZoom&&H(e),d.enableRotate&&q(e)}(e),g=f.TOUCH_DOLLY_ROTATE;break;default:g=f.NONE}break;default:g=f.NONE}g!==f.NONE&&d.dispatchEvent(p)}}function ne(e){if(!1!==d.enabled)switch(e.preventDefault(),e.stopPropagation(),g){case f.TOUCH_ROTATE:if(!1===d.enableRotate)return;Y(e),d.update();break;case f.TOUCH_PAN:if(!1===d.enablePan)return;X(e),d.update();break;case f.TOUCH_DOLLY_PAN:if(!1===d.enableZoom&&!1===d.enablePan)return;!function(e){d.enableZoom&&W(e),d.enablePan&&X(e)}(e),d.update();break;case f.TOUCH_DOLLY_ROTATE:if(!1===d.enableZoom&&!1===d.enableRotate)return;!function(e){d.enableZoom&&W(e),d.enableRotate&&Y(e)}(e),d.update();break;default:g=f.NONE}}function re(e){!1!==d.enabled&&(d.dispatchEvent(m),g=f.NONE)}function se(e){!1!==d.enabled&&e.preventDefault()}d.domElement.addEventListener("contextmenu",se,!1),d.domElement.addEventListener("mousedown",J,!1),d.domElement.addEventListener("wheel",Q,!1),d.domElement.addEventListener("touchstart",te,!1),d.domElement.addEventListener("touchend",re,!1),d.domElement.addEventListener("touchmove",ne,!1),d.domElement.addEventListener("keydown",ee,!1),-1===d.domElement.tabIndex&&(d.domElement.tabIndex=0),this.update()};c.prototype=Object.create(r.a.prototype),c.prototype.constructor=c;var l=function(e,t){c.call(this,e,t),this.mouseButtons.LEFT=s.MOUSE.PAN,this.mouseButtons.RIGHT=s.MOUSE.ROTATE,this.touches.ONE=s.TOUCH.PAN,this.touches.TWO=s.TOUCH.DOLLY_ROTATE};l.prototype=Object.create(r.a.prototype),l.prototype.constructor=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TranspiledFilter=class{static filter(e){const t=e.split("\n"),n=[];for(let e of t)e.match(/import {.*} from '.*'/)||(e=e.replace("export ","return "),n.push(e));return n.join("\n")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(34),s=n(5),o=n(134);s.NodeParamsConfig;class i extends r.TypedGlNode{constructor(){super(...arguments),this.gl_connections_controller=new o.GlConnectionsController(this)}initialize_node(){super.initialize_node(),this.gl_connections_controller.initialize_node()}}t.BaseAdaptiveGlNode=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(36),s=n(16),o=n(29);function i(e,t={}){const n=t.method||e,i=t.out||"val",a=t.in||["in0","in1"],_=t.default_in_type,c=t.allowed_in_types,l=t.out_type,u=t.functions||[];return class extends r.BaseNodeGlMathFunctionArg2GlNode{static type(){return e}initialize_node(){super.initialize_node(),this.gl_connections_controller.set_input_name_function(this._gl_input_name.bind(this)),this.gl_connections_controller.set_output_name_function(this._gl_output_name.bind(this)),this.gl_connections_controller.set_expected_input_types_function(this._expected_input_types.bind(this)),l&&this.gl_connections_controller.set_expected_output_types_function(()=>[l])}_gl_input_name(e){return a[e]}_gl_output_name(e){return i}gl_method_name(){return n}gl_function_definitions(){return l?u.map(e=>new o.FunctionGLDefinition(this,l,e)):[]}_expected_input_types(){let e=this.gl_connections_controller.first_input_connection_type();if(e&&c&&!c.includes(e)){const t=this.io.inputs.named_input_connection_points[0];e=t?t.type:_}const t=e||_||s.ConnectionPointType.FLOAT;return[t,t]}}}t.MathFunctionArg2Factory=i;class a extends(i("distance",{in:["p0","p1"],default_in_type:s.ConnectionPointType.VEC3,allowed_in_types:[s.ConnectionPointType.VEC2,s.ConnectionPointType.VEC3,s.ConnectionPointType.VEC4],out_type:s.ConnectionPointType.FLOAT})){}t.DistanceGlNode=a;class _ extends(i("dot",{in:["vec0","vec1"],default_in_type:s.ConnectionPointType.VEC3,allowed_in_types:[s.ConnectionPointType.VEC2,s.ConnectionPointType.VEC3,s.ConnectionPointType.VEC4],out_type:s.ConnectionPointType.FLOAT})){}t.DotGlNode=_;class c extends(i("max")){}t.MaxGlNode=c;class l extends(i("min")){}t.MinGlNode=l;class u extends(i("mod")){}t.ModGlNode=u;class d extends(i("pow",{in:["x","y"]})){}t.PowGlNode=d;class h extends(i("reflect",{in:["I","N"],default_in_type:s.ConnectionPointType.VEC3})){}t.ReflectGlNode=h;class p extends(i("step",{in:["edge","x"]})){}t.StepGlNode=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(34),s=n(28),o=n(16);function i(e){return{visible_if:{type:o.ConnectionPointTypes.indexOf(e)}}}const a=n(5),_=n(134);class c extends a.NodeParamsConfig{constructor(){super(...arguments),this.type=a.ParamConfig.INTEGER(o.ConnectionPointTypes.indexOf(o.ConnectionPointType.FLOAT),{menu:{entries:o.ConnectionPointTypes.map((e,t)=>({name:e,value:t}))}}),this.bool=a.ParamConfig.BOOLEAN(0,i(o.ConnectionPointType.BOOL)),this.int=a.ParamConfig.INTEGER(0,i(o.ConnectionPointType.INT)),this.float=a.ParamConfig.FLOAT(0,i(o.ConnectionPointType.FLOAT)),this.vec2=a.ParamConfig.VECTOR2([0,0],i(o.ConnectionPointType.VEC2)),this.vec3=a.ParamConfig.VECTOR3([0,0,0],i(o.ConnectionPointType.VEC3)),this.vec4=a.ParamConfig.VECTOR4([0,0,0,0],i(o.ConnectionPointType.VEC4))}}const l=new c;class u extends r.TypedGlNode{constructor(){super(...arguments),this.params_config=l,this.gl_connections_controller=new _.GlConnectionsController(this),this._allow_inputs_created_from_params=!1}static type(){return"constant"}initialize_node(){this.gl_connections_controller.initialize_node(),this.gl_connections_controller.set_output_name_function(e=>u.OUTPUT_NAME),this.gl_connections_controller.set_expected_input_types_function(()=>[]),this.gl_connections_controller.set_expected_output_types_function(()=>[this._current_connection_type])}set_lines(e){const t=this._current_param;if(t){const n=this._current_connection_type,r=s.ThreeToGl.any(t.value),o=`${n} ${this._current_var_name} = ${r}`;e.add_body_lines(this,[o])}else console.warn(`no param found for constant node for type '${this.pv.type}'`)}get _current_connection_type(){null==this.pv.type&&console.warn("constant gl node type if not valid");const e=o.ConnectionPointTypes[this.pv.type];return null==e&&console.warn("constant gl node type if not valid"),e}get _current_param(){this._params_by_type=this._params_by_type||new Map([[o.ConnectionPointType.BOOL,this.p.bool],[o.ConnectionPointType.INT,this.p.int],[o.ConnectionPointType.FLOAT,this.p.float],[o.ConnectionPointType.VEC2,this.p.vec2],[o.ConnectionPointType.VEC3,this.p.vec3],[o.ConnectionPointType.VEC4,this.p.vec4]]);const e=o.ConnectionPointTypes[this.pv.type];return this._params_by_type.get(e)}get _current_var_name(){return this.gl_var_name(u.OUTPUT_NAME)}}t.ConstantGlNode=u,u.OUTPUT_NAME="val"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(36),s=n(16),o=n(29);function i(e,t={}){const n=t.method||e,i=t.out||"val",a=t.in||["in0","in1","in2"],_=t.default||{},c=t.out_type||s.ConnectionPointType.FLOAT,l=t.functions||[];return class extends r.BaseNodeGlMathFunctionArg3GlNode{static type(){return e}initialize_node(){super.initialize_node(),this.gl_connections_controller.set_input_name_function(this._gl_input_name.bind(this)),this.gl_connections_controller.set_output_name_function(this._gl_output_name.bind(this)),this.gl_connections_controller.set_expected_output_types_function(this._expected_output_types.bind(this))}_gl_input_name(e){return a[e]}_gl_output_name(e){return i}gl_method_name(){return n}_expected_output_types(){return[c]}gl_input_default_value(e){return _[e]}gl_function_definitions(){return l.map(e=>new o.FunctionGLDefinition(this,c,e))}}}t.MathFunctionArg3Factory=i;class a extends(i("clamp",{in:["value","min","max"],default:{max:1}})){}t.ClampGlNode=a;class _ extends(i("face_forward",{in:["N","I","Nref"]})){}t.FaceforwardGlNode=_;class c extends(i("smoothstep",{in:["edge0","edge1","x"]})){}t.SmoothStepGlNode=c},function(e,t,n){"use strict";n.r(t),t.default="\nfloat fit01(float val, float src_min, float src_max){\n\tfloat size = src_max - src_min;\n\treturn (val - src_min) / size;\n}\nvec2 fit01(vec2 val, vec2 src_min, vec2 src_max){\n\treturn vec2(\n\t\tfit01(val.x, src_min.x, src_max.x),\n\t\tfit01(val.y, src_min.y, src_max.y)\n\t);\n}\nvec3 fit01(vec3 val, vec3 src_min, vec3 src_max){\n\treturn vec3(\n\t\tfit01(val.x, src_min.x, src_max.x),\n\t\tfit01(val.y, src_min.y, src_max.y),\n\t\tfit01(val.z, src_min.z, src_max.z)\n\t);\n}\nvec4 fit01(vec4 val, vec4 src_min, vec4 src_max){\n\treturn vec4(\n\t\tfit01(val.x, src_min.x, src_max.x),\n\t\tfit01(val.y, src_min.y, src_max.y),\n\t\tfit01(val.z, src_min.z, src_max.z),\n\t\tfit01(val.w, src_min.w, src_max.w)\n\t);\n}\n\nfloat fit(float val, float src_min, float src_max, float dest_min, float dest_max){\n\tfloat  src_range = src_max - src_min;\n\tfloat dest_range = dest_max - dest_min;\n\n\tfloat r = (val - src_min) / src_range;\n\treturn (r * dest_range) + dest_min;\n}\nvec2 fit(vec2 val, vec2 src_min, vec2 src_max, vec2 dest_min, vec2 dest_max){\n\treturn vec2(\n\t\tfit(val.x, src_min.x, src_max.x, dest_min.x, dest_max.x),\n\t\tfit(val.y, src_min.y, src_max.y, dest_min.y, dest_max.y)\n\t);\n}\nvec3 fit(vec3 val, vec3 src_min, vec3 src_max, vec3 dest_min, vec3 dest_max){\n\treturn vec3(\n\t\tfit(val.x, src_min.x, src_max.x, dest_min.x, dest_max.x),\n\t\tfit(val.y, src_min.y, src_max.y, dest_min.y, dest_max.y),\n\t\tfit(val.z, src_min.z, src_max.z, dest_min.z, dest_max.z)\n\t);\n}\nvec4 fit(vec4 val, vec4 src_min, vec4 src_max, vec4 dest_min, vec4 dest_max){\n\treturn vec4(\n\t\tfit(val.x, src_min.x, src_max.x, dest_min.x, dest_max.x),\n\t\tfit(val.y, src_min.y, src_max.y, dest_min.y, dest_max.y),\n\t\tfit(val.z, src_min.z, src_max.z, dest_min.z, dest_max.z),\n\t\tfit(val.w, src_min.w, src_max.w, dest_min.w, dest_max.w)\n\t);\n}\n"},function(e,t,n){"use strict";n.r(t),t.default="uniform float mNear;\nuniform float mFar;\n\nvarying float vViewZDepth;\n\nvoid main() {\n\n\tfloat color = 1.0 - smoothstep( mNear, mFar, vViewZDepth );\n\tgl_FragColor = vec4( vec3( color ), 1.0 );\n\n}\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(59),o=n(0),i=n(68),a=n(5),_=n(197),c=n(105),l=n(116),u=n(117),d=n(118),h=n(375);t.SHADER_DEFAULTS={metalness:1,roughness:.5};class p extends(h.TextureEnvMapParamConfig(d.TextureAlphaMapParamConfig(u.TextureMapParamConfig(l.SkinningParamConfig(c.SideParamConfig(_.ColorParamConfig(a.NodeParamsConfig))))))){constructor(){super(...arguments),this.metalness=a.ParamConfig.FLOAT(t.SHADER_DEFAULTS.metalness),this.roughness=a.ParamConfig.FLOAT(t.SHADER_DEFAULTS.roughness)}}const m=new p;class f extends i.TypedMatNode{constructor(){super(...arguments),this.params_config=m,this.texture_map_controller=new u.TextureMapController(this,{direct_params:!0}),this.texture_alpha_map_controller=new d.TextureAlphaMapController(this,{direct_params:!0}),this.texture_env_map_controller=new h.TextureEnvMapController(this,{direct_params:!0})}static type(){return"mesh_standard"}create_material(){return new s.MeshStandardMaterial({vertexColors:!1,side:o.FrontSide,color:16777215,opacity:1,metalness:1,roughness:0})}initialize_node(){this.params.set_post_create_params_hook(()=>{this.texture_map_controller.initialize_node(),this.texture_alpha_map_controller.initialize_node(),this.texture_env_map_controller.initialize_node()})}cook(){return r.__awaiter(this,void 0,void 0,(function*(){_.ColorsController.update(this),c.SideController.update(this),l.SkinningController.update(this),this.texture_map_controller.update(),this.texture_alpha_map_controller.update(),this.texture_env_map_controller.update(),this._material&&(this._material.envMapIntensity=this.pv.env_map_intensity,this._material.roughness=this.pv.roughness,this._material.metalness=this.pv.metalness),this.set_material(this.material)}))}}t.MeshStandardMatNode=f},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(9),o=n(135),i=n(68),a=n(272),_=n(5);function c(e){return class extends e{constructor(){super(...arguments),this.use_env_map=_.ParamConfig.BOOLEAN(0,a.BooleanParamOptions(l)),this.env_map=_.ParamConfig.OPERATOR_PATH(o.FileCopNode.DEFAULT_NODE_PATH.ENV_MAP,a.OperatorPathOptions(l,"use_env_map")),this.env_map_intensity=_.ParamConfig.FLOAT(1,{visible_if:{use_env_map:1}})}}}t.TextureEnvMapParamConfig=c;s.Material;c(_.NodeParamsConfig);i.TypedMatNode;class l extends a.BaseTextureMapController{constructor(e,t){super(e,t)}initialize_node(){this.add_hooks(this.node.p.use_env_map,this.node.p.env_map)}update(){return r.__awaiter(this,void 0,void 0,(function*(){this._update(this.node.material,"envMap",this.node.p.use_env_map,this.node.p.env_map)}))}static update(e){return r.__awaiter(this,void 0,void 0,(function*(){e.texture_env_map_controller.update()}))}}t.TextureEnvMapController=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(5),o=n(198),i=n(105),a=n(116),_=n(117),c=n(118),l=n(785),u=n(199),d=n(132);class h extends(c.TextureAlphaMapParamConfig(_.TextureMapParamConfig(a.SkinningParamConfig(i.SideParamConfig(o.ColorParamConfig(s.NodeParamsConfig)))))){}const p=new h;class m extends u.TypedBuilderMatNode{constructor(){super(...arguments),this.params_config=p}static type(){return"points_builder"}initialize_node(){}_create_assembler_controller(){return new d.GlAssemblerController(this,l.ShaderAssemblerPoints)}cook(){return r.__awaiter(this,void 0,void 0,(function*(){yield this.compile_if_required(),o.ColorsController.update(this),i.SideController.update(this),a.SkinningController.update(this),this.set_material(this.material)}))}}t.PointsBuilderMatNode=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=r.__importDefault(n(155)),o=n(84),i=n(69),a=n(816),_=n(205),c=n(206),l=n(819),u=n(136),d=n(27),h={type:"change"};t.BASE_CAMERA_DEFAULT={near:1,far:100};const p=n(94),m=n(206),f=n(136),g=n(205),v=n(5),y=n(83),b=n(69);function x(e){return class extends e{constructor(){super(...arguments),this.camera=v.ParamConfig.FOLDER(),this.controls=v.ParamConfig.OPERATOR_PATH("",{node_selection:{context:d.NodeContext.EVENT}}),this.target=v.ParamConfig.VECTOR3([0,0,0],{cook:!1}),this.near=v.ParamConfig.FLOAT(t.BASE_CAMERA_DEFAULT.near,{range:[0,100]}),this.far=v.ParamConfig.FLOAT(t.BASE_CAMERA_DEFAULT.far,{range:[0,100]}),this.set_master_camera=v.ParamConfig.BUTTON(null,{callback:(e,t)=>{C.PARAM_CALLBACK_set_master_camera(e)}})}}}t.CameraTransformParamConfig=x;class T extends(m.CameraPostProcessParamConfig(f.CameraBackgroundParamConfig(y.TransformedParamConfig(g.LayerParamConfig(x(v.NodeParamsConfig)))))){}t.BaseCameraObjParamsConfig=T;class w extends b.TypedObjNode{constructor(){super(...arguments),this.render_order=i.ObjNodeRenderOrder.CAMERA,this._aspect=-1,this.transform_controller=new y.TransformController(this),this.flags=new p.FlagsControllerD(this)}get object(){return this._object}get background_controller(){return this._background_controller=this._background_controller||new this.background_controller_constructor(this)}get background_controller_constructor(){return u.BaseBackgroundController}get controls_controller(){return this._controls_controller=this._controls_controller||new a.ControlsController(this)}get layers_controller(){return this._layers_controller=this._layers_controller||new _.LayersController(this)}get post_process_controller(){return this._post_process_controller=this._post_process_controller||new c.PostProcessController(this)}initialize_base_node(){super.initialize_base_node(),this.io.outputs.set_has_one_output(),this.transform_controller.initialize_node()}cook(){return r.__awaiter(this,void 0,void 0,(function*(){this.transform_controller.update(),this.layers_controller.update(),yield this.background_controller.update(),this._object.near==this.pv.near&&this._object.far==this.pv.far||(this._object.near=this.pv.near,this._object.far=this.pv.far,this._object.updateProjectionMatrix()),yield this.post_process_controller.update_composer_passes(),this.update_camera(),this.controls_controller.update_controls(),this._object.dispatchEvent(h),this.cook_controller.end_cook()}))}on_create(){}on_delete(){}camera(){return this._object}update_camera(){}static PARAM_CALLBACK_set_master_camera(e){e.set_as_master_camera()}set_as_master_camera(){this.scene.cameras_controller.set_master_camera_node_path(this.full_path())}setup_for_aspect_ratio(e){s.default(e)||e&&this._aspect!=e&&(this._aspect=e,this._update_for_aspect_ratio())}_update_for_aspect_ratio(){}update_transform_params_from_object(){o.CoreTransform.set_params_from_object(this._object,this)}create_viewer(e){return new l.ThreejsViewer(e,this.scene,this)}}t.TypedCameraObjNode=w;class C extends w{}t.BaseCameraObjNodeClass=C},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=r.__importDefault(n(91)),o=r.__importDefault(n(92)),i=r.__importDefault(n(155)),a=r.__importDefault(n(188)),_=r.__importDefault(n(82)),c=r.__importDefault(n(207)),l=n(1),u=n(40),d=n(58),h=n(275),p=n(53),m=n(114),f=n(49),g=n(35);class v{constructor(){this.touch()}timestamp(){return this._timestamp}touch(){this._timestamp=performance.now(),this.reset()}reset(){this._bounding_box=void 0,this._core_geometries=void 0,this._core_objects=void 0}clone(){const e=new v;if(this._objects){const t=[];for(let e of this._objects)t.push(h.CoreObject.clone(e));e.set_objects(t)}return e}set_objects(e){this._objects=e,this.touch()}objects(){return this._objects}core_objects(){return this._core_objects=this._core_objects||this._create_core_objects()}_create_core_objects(){const e=[];if(this._objects)for(let t=0;t<this._objects.length;t++)this._objects[t].traverse(n=>{const r=new h.CoreObject(n,t);e.push(r)});return e}geometries(){const e=[];for(let t of this.core_objects()){const n=t.object().geometry;n&&e.push(n)}return e}core_geometries(){return this._core_geometries=this._core_geometries||this.create_core_geometries()}create_core_geometries(){const e=[];for(let t of this.geometries())e.push(new p.CoreGeometry(t));return e}__geometry_from_object(e,t){if(t.geometry)return e.push(t.geometry)}static geometry_from_object(e){return e.isMesh||e.isLine||e.isPoints?e.geometry:null}faces(){return _.default(this.core_geometries().map(e=>e.faces()))}points(){return _.default(this.core_geometries().map(e=>e.points()))}points_count(){return c.default(this.core_geometries().map(e=>e.points_count()))}points_from_group(e){if(e){const t=f.CoreString.indices(e),n=this.points();return o.default(t.map(e=>n[e]))}return this.points()}static from_objects(e){const t=new v;return t.set_objects(e),t}objects_from_group(e){return this.core_objects_from_group(e).map(e=>e.object())}core_objects_from_group(e){if(""!==(e=a.default(e))){const t=parseInt(e);return i.default(t)?this.core_objects().filter(t=>f.CoreString.match_mask(e,t.name())):o.default([this.core_objects()[t]])}return this.core_objects()}bounding_box(){return this._bounding_box=this._bounding_box||this._compute_bounding_box()}center(){const e=new l.Vector3;return this.bounding_box().getCenter(e),e}size(){const e=new l.Vector3;return this.bounding_box().getSize(e),e}_compute_bounding_box(){let e;if(this._objects)for(let t of this._objects){const n=t.geometry;n&&(n.computeBoundingBox(),e?e.expandByObject(t):n.boundingBox&&(e=n.boundingBox.clone()))}return e=e||new d.Box3(new l.Vector3(-1,-1,-1),new l.Vector3(1,1,1)),e}compute_vertex_normals(){for(let e of this.core_objects())e.compute_vertex_normals()}has_attrib(e){let t;return null!=(t=this.core_geometries()[0])&&t.has_attrib(e)}attrib_type(e){const t=this.core_geometries()[0];return null!=t?t.attrib_type(e):null}rename_attrib(e,t,n){switch(n){case g.CoreConstant.ATTRIB_CLASS.VERTEX:if(this.has_attrib(e)&&this._objects)for(let n of this._objects)n.traverse(n=>{const r=v.geometry_from_object(n);if(r){new p.CoreGeometry(r).rename_attribute(e,t)}});break;case g.CoreConstant.ATTRIB_CLASS.OBJECT:if(this.has_attrib(e)&&this._objects)for(let n of this._objects)n.traverse(n=>{new h.CoreObject(n,0).rename_attribute(e,t)})}}attrib_names(){let e;return null!=(e=this.core_geometries()[0])?e.attrib_names():[]}object_attrib_names(){let e;return null!=(e=this.core_objects()[0])?e.attrib_names():[]}attrib_names_matching_mask(e){const t=f.CoreString.attrib_names(e),n=[];for(let e of this.attrib_names())for(let r of t)f.CoreString.match_mask(e,r)&&n.push(e);return s.default(n)}attrib_sizes(){let e;return null!=(e=this.core_geometries()[0])?e.attrib_sizes():{}}attrib_size(e){let t;return null!=(t=this.core_geometries()[0])?t.attrib_size(e):0}add_numeric_vertex_attrib(e,t,n){null==n&&(n=m.CoreAttribute.default_value(t));for(let r of this.core_geometries())r.add_numeric_attrib(e,t,n)}add_numeric_object_attrib(e,t,n){null==n&&(n=m.CoreAttribute.default_value(t));for(let t of this.core_objects())t.add_numeric_attrib(e,n)}static clone(e){const t=new u.Group;return e.children.forEach(e=>{const n=h.CoreObject.clone(e);t.add(n)}),t}}t.CoreGroup=v},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(20),s=n(1),o=n(2),i=n(114),a=n(381),_="position",c="normal";var l;!function(e){e.x="x",e.y="y",e.z="z",e.w="w",e.r="r",e.g="g",e.b="b"}(l||(l={}));const u={x:0,y:1,z:2,w:3,r:0,g:1,b:2};class d extends a.CoreEntity{constructor(e,t){super(t),this._core_geometry=e,this._geometry=this._core_geometry.geometry()}geometry_wrapper(){return this._core_geometry}geometry(){return this._geometry=this._geometry||this._core_geometry.geometry()}attrib_size(e){return e=i.CoreAttribute.remap_name(e),this._geometry.getAttribute(e).itemSize}has_attrib(e){const t=i.CoreAttribute.remap_name(e);return this._core_geometry.has_attrib(t)}attrib_value(e){if("ptnum"===e)return this.index;{let t=null,n=null;"."===e[e.length-2]&&(t=e[e.length-1],n=u[t],e=e.substring(0,e.length-2));const a=i.CoreAttribute.remap_name(e),_=this._geometry.getAttribute(a);if(!_){const t=`attrib ${e} not found. availables are: ${Object.keys(this._geometry.attributes||{}).join(",")}`;throw console.warn(t),t}{const{array:e}=_;if(this._core_geometry.is_attrib_indexed(a)){const e=this.attrib_value_index(a);return this._core_geometry.user_data_attrib(a)[e]}{const t=_.itemSize,i=this._index*t;if(null==n)switch(t){case 1:return e[i];case 2:return new o.Vector2(e[i+0],e[i+1]);case 3:return new s.Vector3(e[i+0],e[i+1],e[i+2]);case 4:return new r.Vector4(e[i+0],e[i+1],e[i+2],e[i+3]);default:throw`size not valid (${t})`}else switch(t){case 1:return e[i];default:return e[i+n]}}}}}attrib_value_index(e){return this._core_geometry.is_attrib_indexed(e)?this._geometry.getAttribute(e).array[this._index]:-1}position(){const{array:e}=this._geometry.getAttribute(_);return this._position=this._position||new s.Vector3,this._position.fromArray(e,3*this._index)}set_position(e){this.set_attrib_value_vector3(_,e)}normal(){const{array:e}=this._geometry.getAttribute(c);return this._normal=this._normal||new s.Vector3,this._normal.fromArray(e,3*this._index)}set_normal(e){return this.set_attrib_value_vector3(c,e)}set_attrib_value(e,t){if(null==t)return;if(null==e)throw"Point.set_attrib_value requires a name";const n=this._geometry.getAttribute(e),r=n.array,s=n.itemSize;switch(s){case 1:r[this._index]=t;break;case 2:const e=t;r[2*this._index+0]=e.x,r[2*this._index+1]=e.y;break;case 3:if(null!=t.r){const e=t;r[3*this._index+0]=e.r,r[3*this._index+1]=e.g,r[3*this._index+2]=e.b}else{const e=t;r[3*this._index+0]=e.x,r[3*this._index+1]=e.y,r[3*this._index+2]=e.z}break;default:throw console.warn(`Point.set_attrib_value does not yet allow attrib size ${s}`),`attrib size ${s} not implemented`}}set_attrib_value_vector3(e,t){if(null==t)return;if(null==e)throw"Point.set_attrib_value requires a name";const n=this._geometry.getAttribute(e).array,r=3*this._index;n[r]=t.x,n[r+1]=t.y,n[r+2]=t.z}set_attrib_index(e,t){return this._geometry.getAttribute(e).array[this._index]=t}}t.CorePoint=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.CoreEntity=class{constructor(e){this._index=e}get index(){return this._index}}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3);t.CoreIterator=class{constructor(e={}){this._array_index=0,this._count=0,this._current_count_index=0,this._resolve=null,this._max_time_per_chunk=e.max_time_per_chunk||10,this._check_every_interations=e.check_every_interations||100}start_with_count(e,t){return r.__awaiter(this,void 0,void 0,(function*(){if(this._count=e,this._current_count_index=0,this._iteratee_method_count=t,this._bound_next_with_count=this.next_with_count.bind(this),this._resolve)throw"an iterator cannot be started twice";return new Promise((e,t)=>{this._resolve=e,this.next_with_count()})}))}next_with_count(){const e=performance.now();if(this._iteratee_method_count&&this._bound_next_with_count)for(;this._current_count_index<this._count;)if(this._iteratee_method_count(this._current_count_index),this._current_count_index++,this._current_count_index%this._check_every_interations==0&&performance.now()-e>this._max_time_per_chunk){setTimeout(this._bound_next_with_count,1);break}this._current_count_index>=this._count&&this._resolve&&this._resolve()}start_with_array(e,t){return r.__awaiter(this,void 0,void 0,(function*(){if(this._array=e,this._array_index=0,this._iteratee_method_array=t,this._bound_next_with_array=this.next_with_array.bind(this),this._resolve)throw"an iterator cannot be started twice";return new Promise((e,t)=>{this._resolve=e,this.next_with_array()})}))}next_with_array(){const e=performance.now();if(this._iteratee_method_array&&this._bound_next_with_array&&this._array)for(;this._current_array_element=this._array[this._array_index];)if(this._iteratee_method_array(this._current_array_element,this._array_index),this._array_index++,this._array_index%this._check_every_interations==0&&performance.now()-e>this._max_time_per_chunk){setTimeout(this._bound_next_with_array,1);break}void 0===this._current_array_element&&this._resolve&&this._resolve()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(104),s=n(2),o=n(4),i=n(6);t.CoreGeometryUtilCircle=class{static positions(e,t,n=360){const o=r.CoreMath.degrees_to_radians(n)/t,i=[];for(let n=0;n<t;n++){const t=o*n,r=e*Math.cos(t),a=e*Math.sin(t);i.push(new s.Vector2(r,a))}return i}static create(e,t,n=360){const r=this.positions(e,t,n),s=[],a=[];let _;for(let e=0;e<r.length;e++)_=r[e],s.push(_.x),s.push(_.y),s.push(0),e>0&&(a.push(e-1),a.push(e));a.push(t-1),a.push(0);const c=new i.BufferGeometry;return c.setAttribute("position",new o.Float32BufferAttribute(s,3)),c.setIndex(a),c}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3).__importDefault(n(44)),s=n(1),o=n(2),i=n(42),a=n(15),_=n(293),c=n(227),l=n(53),u={SCALE:new s.Vector3(1,1,1),PSCALE:1,EYE:new s.Vector3(0,0,0),UP:new s.Vector3(0,1,0)},d=new s.Vector3(1,1,1),h=new o.Vector2(0,0);class p{constructor(e){this._group_wrapper=e,this._matrices={},this._is_pscale_present=this._group_wrapper.has_attrib("pscale"),this._is_scale_present=this._group_wrapper.has_attrib("scale"),this._is_normal_present=this._group_wrapper.has_attrib("normal"),this._is_up_present=this._group_wrapper.has_attrib("up"),this._do_rotate_matrices=this._is_normal_present}matrices(){return this._matrices={},this._matrices.translate=new a.Matrix4,this._matrices.rotate=new a.Matrix4,this._matrices.scale=new a.Matrix4,this._group_wrapper.points().map(e=>this._matrix_from_point(e))}_matrix_from_point(e){const t=e.position();let n=this._is_scale_present?e.attrib_value("scale"):u.SCALE;const r=this._is_pscale_present?e.attrib_value("pscale"):u.PSCALE;n=n.clone().multiplyScalar(r);const s=new a.Matrix4;s.identity();const o=this._matrices.scale;o.makeScale(n.x,n.y,n.z);const i=this._matrices.translate;if(i.makeTranslation(t.x,t.y,t.z),s.multiply(i),this._do_rotate_matrices){const t=this._matrices.rotate,n=u.EYE,r=e.attrib_value("normal").multiplyScalar(-1),o=this._is_up_present?e.attrib_value("up"):u.UP;o.normalize(),t.lookAt(n,r,o),s.multiply(t)}return s.multiply(o),s}static create_instance_buffer_geo(e,t,n){const o=t.points(),a=new _.InstancedBufferGeometry;a.copy(e);const u=o.length,m=new Float32Array(3*u),f=new Float32Array(3*u),g=new Float32Array(3*u),v=new Float32Array(4*u),y=t.has_attrib("color"),b=new s.Vector3(0,0,0),x=new i.Quaternion,T=new s.Vector3(1,1,1),w=new p(t).matrices();o.forEach((e,t)=>{const n=3*t,r=4*t;w[t].decompose(b,x,T),b.toArray(m,n),x.toArray(v,r),T.toArray(g,n),(y?e.attrib_value("color"):d).toArray(f,n)});const C=t.has_attrib("uv");if(C){const e=new Float32Array(2*u);o.forEach((t,n)=>{const r=2*n;(C?t.attrib_value("uv"):h).toArray(e,r)}),a.setAttribute("instanceUv",new c.InstancedBufferAttribute(e,2))}return a.setAttribute("instancePosition",new c.InstancedBufferAttribute(m,3)),a.setAttribute("instanceScale",new c.InstancedBufferAttribute(g,3)),a.setAttribute("instanceOrientation",new c.InstancedBufferAttribute(v,4)),a.setAttribute("instanceColor",new c.InstancedBufferAttribute(f,3)),t.attrib_names_matching_mask(n).forEach(e=>{const n=t.attrib_size(e),s=new Float32Array(u*n);o.forEach((t,o)=>{const i=t.attrib_value(e);r.default(i)?s[o]=i:i.toArray(s,o*n)}),a.setAttribute(e,new c.InstancedBufferAttribute(s,n))}),new l.CoreGeometry(a).mark_as_instance(),a}}t.CoreInstancer=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=r.__importDefault(n(21)),o=r.__importDefault(n(60)),i=r.__importDefault(n(45)),a=r.__importDefault(n(82)),_=n(96),c=n(4),l={BufferGeometry:n(6).BufferGeometry,Float32BufferAttribute:c.Float32BufferAttribute,Points:_.Points},u=n(49),d=n(53),h=n(35),p=n(862),m=n(114);t.JsonDataLoader=class{constructor(e={}){this._attribute_datas_by_name={},this._options={},this._options.data_keys_prefix=e.data_keys_prefix,this._options.skip_entries=e.skip_entries,this._options.do_convert=e.do_convert||!1,this._options.convert_to_numeric=e.convert_to_numeric}load(e,t,n,s){fetch(e).then(e=>r.__awaiter(this,void 0,void 0,(function*(){this._json=yield e.json(),null!=this._options.data_keys_prefix&&""!=this._options.data_keys_prefix&&(this._json=this.get_prefixed_json(this._json,this._options.data_keys_prefix.split(".")));const n=this.create_object();t(n)}))).catch(e=>{console.log("error",e),s(e)})}get_prefixed_json(e,t){if(0==t.length)return e;{const n=t.shift();if(n)return this.get_prefixed_json(e[n],t)}return[]}set_json(e){return this._json=e}create_object(){const e=new l.BufferGeometry,t=new d.CoreGeometry(e);if(null!=this._json){const n=this._json.length;t.init_position_attribute(n),this._find_attributes();const r=u.CoreString.attrib_names(this._options.convert_to_numeric||"");for(let n of Object.keys(this._attribute_datas_by_name)){let s=a.default(this._attribute_values_for_name(n));const o=this._attribute_datas_by_name[n],_=o.size();if(o.type()===h.CoreConstant.ATTRIB_TYPE.STRING)if(this._options.do_convert&&u.CoreString.matches_one_mask(n,r)){const t=s.map(e=>i.default(e)?parseFloat(e)||0:e);e.setAttribute(n,new l.Float32BufferAttribute(t,_))}else{const e=m.CoreAttribute.array_to_indexed_arrays(s);t.set_indexed_attribute(n,e.values,e.indices)}else{const t=s;e.setAttribute(n,new l.Float32BufferAttribute(t,_))}}}return new l.Points(e,h.CoreConstant.MATERIALS[l.Points.name])}_find_attributes(){let e;const t=u.CoreString.attrib_names(this._options.skip_entries||"");if(this._json&&null!=(e=this._json[0]))for(let n of Object.keys(e)){const r=e[n];if(this._value_has_subentries(r))for(let e of Object.keys(r)){const s=[n,e].join(":"),o=r[n];u.CoreString.matches_one_mask(s,t)||(this._attribute_datas_by_name[s]=p.CoreAttributeData.from_value(o))}else u.CoreString.matches_one_mask(n,t)||(this._attribute_datas_by_name[n]=p.CoreAttributeData.from_value(r))}}_attribute_values_for_name(e){return this._json?this._json.map(t=>{const n=e.split(":")[0],r=t[n];if(this._value_has_subentries(r)){return r[e.substring(n.length+1)]||0}return r||0}):[]}_value_has_subentries(e){return o.default(e)&&!s.default(e)}}},function(e,t,n){"use strict";n.r(t),n.d(t,"GLTFLoader",(function(){return H}));var r=n(120),s=n(292),o=n(58),i=n(4),a=n(6),_=n(0),c=n(7),l=n(163),u=n(30),d=n(40),h=n(141),p=n(97),m=n(52),f=n(76),g=n(41),v=n(235),y=n(57),b=n(18),x=n(109),T=n(9),w=n(14),C=n(15),P=n(22),E=n(56),O=n(225),A=n(59),M=n(143),N=n(10),S=n(63),R=n(47),L=n(164),j=n(96),k=n(71),I=n(234),G=n(167),z=n(412),D=n(291),F=n(46),B=n(165),V=n(285),U=n(2),q=n(1),$=n(144),H=function(){function e(e){b.a.call(this,e),this.dracoLoader=null,this.ddsLoader=null}function t(){var e={};return{get:function(t){return e[t]},add:function(t,n){e[t]=n},remove:function(t){delete e[t]},removeAll:function(){e={}}}}e.prototype=Object.assign(Object.create(b.a.prototype),{constructor:e,load:function(e,t,n,r){var s,o=this;s=""!==this.resourcePath?this.resourcePath:""!==this.path?this.path:x.a.extractUrlBase(e),o.manager.itemStart(e);var i=function(t){r?r(t):console.error(t),o.manager.itemError(e),o.manager.itemEnd(e)},a=new u.a(o.manager);a.setPath(this.path),a.setResponseType("arraybuffer"),"use-credentials"===o.crossOrigin&&a.setWithCredentials(!0),a.load(e,(function(n){try{o.parse(n,s,(function(n){t(n),o.manager.itemEnd(e)}),i)}catch(e){i(e)}}),n,i)},setDRACOLoader:function(e){return this.dracoLoader=e,this},setDDSLoader:function(e){return this.ddsLoader=e,this},parse:function(e,t,r,s){var o,i={};if("string"==typeof e)o=e;else if(x.a.decodeText(new Uint8Array(e,0,4))===J){try{i[n.KHR_BINARY_GLTF]=new Q(e)}catch(e){return void(s&&s(e))}o=i[n.KHR_BINARY_GLTF].content}else o=x.a.decodeText(new Uint8Array(e));var a=JSON.parse(o);if(void 0===a.asset||a.asset.version[0]<2)s&&s(new Error("THREE.GLTFLoader: Unsupported asset. glTF versions >=2.0 are supported."));else{if(a.extensionsUsed)for(var _=0;_<a.extensionsUsed.length;++_){var c=a.extensionsUsed[_],l=a.extensionsRequired||[];switch(c){case n.KHR_LIGHTS_PUNCTUAL:i[c]=new Y(a);break;case n.KHR_MATERIALS_CLEARCOAT:i[c]=new W;break;case n.KHR_MATERIALS_UNLIT:i[c]=new X;break;case n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:i[c]=new re;break;case n.KHR_DRACO_MESH_COMPRESSION:i[c]=new ee(a,this.dracoLoader);break;case n.MSFT_TEXTURE_DDS:i[c]=new H(this.ddsLoader);break;case n.KHR_TEXTURE_TRANSFORM:i[c]=new te;break;case n.KHR_MESH_QUANTIZATION:i[c]=new se;break;default:l.indexOf(c)>=0&&console.warn('THREE.GLTFLoader: Unknown extension "'+c+'".')}}new Me(a,i,{path:t||this.resourcePath||"",crossOrigin:this.crossOrigin,manager:this.manager}).parse(r,s)}}});var n={KHR_BINARY_GLTF:"KHR_binary_glTF",KHR_DRACO_MESH_COMPRESSION:"KHR_draco_mesh_compression",KHR_LIGHTS_PUNCTUAL:"KHR_lights_punctual",KHR_MATERIALS_CLEARCOAT:"KHR_materials_clearcoat",KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS:"KHR_materials_pbrSpecularGlossiness",KHR_MATERIALS_UNLIT:"KHR_materials_unlit",KHR_TEXTURE_TRANSFORM:"KHR_texture_transform",KHR_MESH_QUANTIZATION:"KHR_mesh_quantization",MSFT_TEXTURE_DDS:"MSFT_texture_dds"};function H(e){if(!e)throw new Error("THREE.GLTFLoader: Attempting to load .dds texture without importing DDSLoader");this.name=n.MSFT_TEXTURE_DDS,this.ddsLoader=e}function Y(e){this.name=n.KHR_LIGHTS_PUNCTUAL;var t=e.extensions&&e.extensions[n.KHR_LIGHTS_PUNCTUAL]||{};this.lightDefs=t.lights||[]}function X(){this.name=n.KHR_MATERIALS_UNLIT}function W(){this.name=n.KHR_MATERIALS_CLEARCOAT}Y.prototype.loadLight=function(e){var t,n=this.lightDefs[e],r=new c.Color(16777215);void 0!==n.color&&r.fromArray(n.color);var s=void 0!==n.range?n.range:0;switch(n.type){case"directional":(t=new l.DirectionalLight(r)).target.position.set(0,0,-1),t.add(t.target);break;case"point":(t=new L.PointLight(r)).distance=s;break;case"spot":(t=new B.SpotLight(r)).distance=s,n.spot=n.spot||{},n.spot.innerConeAngle=void 0!==n.spot.innerConeAngle?n.spot.innerConeAngle:0,n.spot.outerConeAngle=void 0!==n.spot.outerConeAngle?n.spot.outerConeAngle:Math.PI/4,t.angle=n.spot.outerConeAngle,t.penumbra=1-n.spot.innerConeAngle/n.spot.outerConeAngle,t.target.position.set(0,0,-1),t.add(t.target);break;default:throw new Error('THREE.GLTFLoader: Unexpected light type, "'+n.type+'".')}return t.position.set(0,0,0),t.decay=2,void 0!==n.intensity&&(t.intensity=n.intensity),t.name=n.name||"light_"+e,Promise.resolve(t)},X.prototype.getMaterialType=function(){return E.MeshBasicMaterial},X.prototype.extendParams=function(e,t,n){var r=[];e.color=new c.Color(1,1,1),e.opacity=1;var s=t.pbrMetallicRoughness;if(s){if(Array.isArray(s.baseColorFactor)){var o=s.baseColorFactor;e.color.fromArray(o),e.opacity=o[3]}void 0!==s.baseColorTexture&&r.push(n.assignTexture(e,"map",s.baseColorTexture))}return Promise.all(r)},W.prototype.getMaterialType=function(){return O.a},W.prototype.extendParams=function(e,t,n){var r=[],s=t.extensions[this.name];if(void 0!==s.clearcoatFactor&&(e.clearcoat=s.clearcoatFactor),void 0!==s.clearcoatTexture&&r.push(n.assignTexture(e,"clearcoatMap",s.clearcoatTexture)),void 0!==s.clearcoatRoughnessFactor&&(e.clearcoatRoughness=s.clearcoatRoughnessFactor),void 0!==s.clearcoatRoughnessTexture&&r.push(n.assignTexture(e,"clearcoatRoughnessMap",s.clearcoatRoughnessTexture)),void 0!==s.clearcoatNormalTexture&&(r.push(n.assignTexture(e,"clearcoatNormalMap",s.clearcoatNormalTexture)),void 0!==s.clearcoatNormalTexture.scale)){var o=s.clearcoatNormalTexture.scale;e.clearcoatNormalScale=new U.Vector2(o,o)}return Promise.all(r)};var J="glTF",K=1313821514,Z=5130562;function Q(e){this.name=n.KHR_BINARY_GLTF,this.content=null,this.body=null;var t=new DataView(e,0,12);if(this.header={magic:x.a.decodeText(new Uint8Array(e.slice(0,4))),version:t.getUint32(4,!0),length:t.getUint32(8,!0)},this.header.magic!==J)throw new Error("THREE.GLTFLoader: Unsupported glTF-Binary header.");if(this.header.version<2)throw new Error("THREE.GLTFLoader: Legacy binary file detected.");for(var r=new DataView(e,12),s=0;s<r.byteLength;){var o=r.getUint32(s,!0);s+=4;var i=r.getUint32(s,!0);if(s+=4,i===K){var a=new Uint8Array(e,12+s,o);this.content=x.a.decodeText(a)}else if(i===Z){var _=12+s;this.body=e.slice(_,_+o)}s+=o}if(null===this.content)throw new Error("THREE.GLTFLoader: JSON content not found.")}function ee(e,t){if(!t)throw new Error("THREE.GLTFLoader: No DRACOLoader instance provided.");this.name=n.KHR_DRACO_MESH_COMPRESSION,this.json=e,this.dracoLoader=t,this.dracoLoader.preload()}function te(){this.name=n.KHR_TEXTURE_TRANSFORM}function ne(e){A.MeshStandardMaterial.call(this),this.isGLTFSpecularGlossinessMaterial=!0;var t=["#ifdef USE_SPECULARMAP","\tuniform sampler2D specularMap;","#endif"].join("\n"),n=["#ifdef USE_GLOSSINESSMAP","\tuniform sampler2D glossinessMap;","#endif"].join("\n"),r=["vec3 specularFactor = specular;","#ifdef USE_SPECULARMAP","\tvec4 texelSpecular = texture2D( specularMap, vUv );","\ttexelSpecular = sRGBToLinear( texelSpecular );","\t// reads channel RGB, compatible with a glTF Specular-Glossiness (RGBA) texture","\tspecularFactor *= texelSpecular.rgb;","#endif"].join("\n"),s=["float glossinessFactor = glossiness;","#ifdef USE_GLOSSINESSMAP","\tvec4 texelGlossiness = texture2D( glossinessMap, vUv );","\t// reads channel A, compatible with a glTF Specular-Glossiness (RGBA) texture","\tglossinessFactor *= texelGlossiness.a;","#endif"].join("\n"),o=["PhysicalMaterial material;","material.diffuseColor = diffuseColor.rgb;","vec3 dxy = max( abs( dFdx( geometryNormal ) ), abs( dFdy( geometryNormal ) ) );","float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );","material.specularRoughness = max( 1.0 - glossinessFactor, 0.0525 );// 0.0525 corresponds to the base mip of a 256 cubemap.","material.specularRoughness += geometryRoughness;","material.specularRoughness = min( material.specularRoughness, 1.0 );","material.specularColor = specularFactor.rgb;"].join("\n"),i={specular:{value:(new c.Color).setHex(16777215)},glossiness:{value:1},specularMap:{value:null},glossinessMap:{value:null}};this._extraUniforms=i,this.onBeforeCompile=function(e){for(var a in i)e.uniforms[a]=i[a];e.fragmentShader=e.fragmentShader.replace("uniform float roughness;","uniform vec3 specular;"),e.fragmentShader=e.fragmentShader.replace("uniform float metalness;","uniform float glossiness;"),e.fragmentShader=e.fragmentShader.replace("#include <roughnessmap_pars_fragment>",t),e.fragmentShader=e.fragmentShader.replace("#include <metalnessmap_pars_fragment>",n),e.fragmentShader=e.fragmentShader.replace("#include <roughnessmap_fragment>",r),e.fragmentShader=e.fragmentShader.replace("#include <metalnessmap_fragment>",s),e.fragmentShader=e.fragmentShader.replace("#include <lights_physical_fragment>",o)},Object.defineProperties(this,{specular:{get:function(){return i.specular.value},set:function(e){i.specular.value=e}},specularMap:{get:function(){return i.specularMap.value},set:function(e){i.specularMap.value=e}},glossiness:{get:function(){return i.glossiness.value},set:function(e){i.glossiness.value=e}},glossinessMap:{get:function(){return i.glossinessMap.value},set:function(e){i.glossinessMap.value=e,e?(this.defines.USE_GLOSSINESSMAP="",this.defines.USE_ROUGHNESSMAP=""):(delete this.defines.USE_ROUGHNESSMAP,delete this.defines.USE_GLOSSINESSMAP)}}}),delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this.setValues(e)}function re(){return{name:n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS,specularGlossinessParams:["color","map","lightMap","lightMapIntensity","aoMap","aoMapIntensity","emissive","emissiveIntensity","emissiveMap","bumpMap","bumpScale","normalMap","normalMapType","displacementMap","displacementScale","displacementBias","specularMap","specular","glossinessMap","glossiness","alphaMap","envMap","envMapIntensity","refractionRatio"],getMaterialType:function(){return ne},extendParams:function(e,t,n){var r=t.extensions[this.name];e.color=new c.Color(1,1,1),e.opacity=1;var s=[];if(Array.isArray(r.diffuseFactor)){var o=r.diffuseFactor;e.color.fromArray(o),e.opacity=o[3]}if(void 0!==r.diffuseTexture&&s.push(n.assignTexture(e,"map",r.diffuseTexture)),e.emissive=new c.Color(0,0,0),e.glossiness=void 0!==r.glossinessFactor?r.glossinessFactor:1,e.specular=new c.Color(1,1,1),Array.isArray(r.specularFactor)&&e.specular.fromArray(r.specularFactor),void 0!==r.specularGlossinessTexture){var i=r.specularGlossinessTexture;s.push(n.assignTexture(e,"glossinessMap",i)),s.push(n.assignTexture(e,"specularMap",i))}return Promise.all(s)},createMaterial:function(e){var t=new ne(e);return t.fog=!0,t.color=e.color,t.map=void 0===e.map?null:e.map,t.lightMap=null,t.lightMapIntensity=1,t.aoMap=void 0===e.aoMap?null:e.aoMap,t.aoMapIntensity=1,t.emissive=e.emissive,t.emissiveIntensity=1,t.emissiveMap=void 0===e.emissiveMap?null:e.emissiveMap,t.bumpMap=void 0===e.bumpMap?null:e.bumpMap,t.bumpScale=1,t.normalMap=void 0===e.normalMap?null:e.normalMap,t.normalMapType=_.TangentSpaceNormalMap,e.normalScale&&(t.normalScale=e.normalScale),t.displacementMap=null,t.displacementScale=1,t.displacementBias=0,t.specularMap=void 0===e.specularMap?null:e.specularMap,t.specular=e.specular,t.glossinessMap=void 0===e.glossinessMap?null:e.glossinessMap,t.glossiness=e.glossiness,t.alphaMap=null,t.envMap=void 0===e.envMap?null:e.envMap,t.envMapIntensity=1,t.refractionRatio=.98,t}}}function se(){this.name=n.KHR_MESH_QUANTIZATION}function oe(e,t,n,r){m.a.call(this,e,t,n,r)}ee.prototype.decodePrimitive=function(e,t){var n=this.json,r=this.dracoLoader,s=e.extensions[this.name].bufferView,o=e.extensions[this.name].attributes,i={},a={},_={};for(var c in o){var l=ge[c]||c.toLowerCase();i[l]=o[c]}for(c in e.attributes){l=ge[c]||c.toLowerCase();if(void 0!==o[c]){var u=n.accessors[e.attributes[c]],d=he[u.componentType];_[l]=d,a[l]=!0===u.normalized}}return t.getDependency("bufferView",s).then((function(e){return new Promise((function(t){r.decodeDracoFile(e,(function(e){for(var n in e.attributes){var r=e.attributes[n],s=a[n];void 0!==s&&(r.normalized=s)}t(e)}),i,_)}))}))},te.prototype.extendTexture=function(e,t){return e=e.clone(),void 0!==t.offset&&e.offset.fromArray(t.offset),void 0!==t.rotation&&(e.rotation=t.rotation),void 0!==t.scale&&e.repeat.fromArray(t.scale),void 0!==t.texCoord&&console.warn('THREE.GLTFLoader: Custom UV sets in "'+this.name+'" extension not yet supported.'),e.needsUpdate=!0,e},ne.prototype=Object.create(A.MeshStandardMaterial.prototype),ne.prototype.constructor=ne,ne.prototype.copy=function(e){return A.MeshStandardMaterial.prototype.copy.call(this,e),this.specularMap=e.specularMap,this.specular.copy(e.specular),this.glossinessMap=e.glossinessMap,this.glossiness=e.glossiness,delete this.metalness,delete this.roughness,delete this.metalnessMap,delete this.roughnessMap,this},oe.prototype=Object.create(m.a.prototype),oe.prototype.constructor=oe,oe.prototype.copySampleValue_=function(e){for(var t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r*3+r,o=0;o!==r;o++)t[o]=n[s+o];return t},oe.prototype.beforeStart_=oe.prototype.copySampleValue_,oe.prototype.afterEnd_=oe.prototype.copySampleValue_,oe.prototype.interpolate_=function(e,t,n,r){for(var s=this.resultBuffer,o=this.sampleValues,i=this.valueSize,a=2*i,_=3*i,c=r-t,l=(n-t)/c,u=l*l,d=u*l,h=e*_,p=h-_,m=-2*d+3*u,f=d-u,g=1-m,v=f-u+l,y=0;y!==i;y++){var b=o[p+y+i],x=o[p+y+a]*c,T=o[h+y+i],w=o[h+y]*c;s[y]=g*b+v*x+m*T+f*w}return s};var ie=0,ae=1,_e=2,ce=3,le=4,ue=5,de=6,he={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},pe={9728:_.NearestFilter,9729:_.LinearFilter,9984:_.NearestMipmapNearestFilter,9985:_.LinearMipmapNearestFilter,9986:_.NearestMipmapLinearFilter,9987:_.LinearMipmapLinearFilter},me={33071:_.ClampToEdgeWrapping,33648:_.MirroredRepeatWrapping,10497:_.RepeatWrapping},fe={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16},ge={POSITION:"position",NORMAL:"normal",TANGENT:"tangent",TEXCOORD_0:"uv",TEXCOORD_1:"uv2",COLOR_0:"color",WEIGHTS_0:"skinWeight",JOINTS_0:"skinIndex"},ve={scale:"scale",translation:"position",rotation:"quaternion",weights:"morphTargetInfluences"},ye={CUBICSPLINE:void 0,LINEAR:_.InterpolateLinear,STEP:_.InterpolateDiscrete},be="OPAQUE",xe="MASK",Te="BLEND",we={"image/png":_.RGBAFormat,"image/jpeg":_.RGBFormat};function Ce(e,t){return"string"!=typeof e||""===e?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}function Pe(e,t,n){for(var r in n.extensions)void 0===e[r]&&(t.userData.gltfExtensions=t.userData.gltfExtensions||{},t.userData.gltfExtensions[r]=n.extensions[r])}function Ee(e,t){void 0!==t.extras&&("object"==typeof t.extras?Object.assign(e.userData,t.extras):console.warn("THREE.GLTFLoader: Ignoring primitive type .extras, "+t.extras))}function Oe(e,t){if(e.updateMorphTargets(),void 0!==t.weights)for(var n=0,r=t.weights.length;n<r;n++)e.morphTargetInfluences[n]=t.weights[n];if(t.extras&&Array.isArray(t.extras.targetNames)){var s=t.extras.targetNames;if(e.morphTargetInfluences.length===s.length){e.morphTargetDictionary={};for(n=0,r=s.length;n<r;n++)e.morphTargetDictionary[s[n]]=n}else console.warn("THREE.GLTFLoader: Invalid extras.targetNames length. Ignoring names.")}}function Ae(e){for(var t="",n=Object.keys(e).sort(),r=0,s=n.length;r<s;r++)t+=n[r]+":"+e[n[r]]+";";return t}function Me(e,n,r){this.json=e||{},this.extensions=n||{},this.options=r||{},this.cache=new t,this.primitiveCache={},this.textureLoader=new V.TextureLoader(this.options.manager),this.textureLoader.setCrossOrigin(this.options.crossOrigin),this.fileLoader=new u.a(this.options.manager),this.fileLoader.setResponseType("arraybuffer"),"use-credentials"===this.options.crossOrigin&&this.fileLoader.setWithCredentials(!0)}function Ne(e,t,n){var r=t.attributes,s=[];function i(t,r){return n.getDependency("accessor",t).then((function(t){e.setAttribute(r,t)}))}for(var a in r){var _=ge[a]||a.toLowerCase();_ in e.attributes||s.push(i(r[a],_))}if(void 0!==t.indices&&!e.index){var c=n.getDependency("accessor",t.indices).then((function(t){e.setIndex(t)}));s.push(c)}return Ee(e,t),function(e,t,n){var r=t.attributes,s=new o.Box3;if(void 0!==r.POSITION){var i=(p=n.json.accessors[r.POSITION]).min,a=p.max;if(void 0!==i&&void 0!==a){s.set(new q.Vector3(i[0],i[1],i[2]),new q.Vector3(a[0],a[1],a[2]));var _=t.targets;if(void 0!==_){for(var c=new q.Vector3,l=new q.Vector3,u=0,d=_.length;u<d;u++){var h=_[u];if(void 0!==h.POSITION){var p;i=(p=n.json.accessors[h.POSITION]).min,a=p.max;void 0!==i&&void 0!==a?(l.setX(Math.max(Math.abs(i[0]),Math.abs(a[0]))),l.setY(Math.max(Math.abs(i[1]),Math.abs(a[1]))),l.setZ(Math.max(Math.abs(i[2]),Math.abs(a[2]))),c.max(l)):console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}s.expandByVector(c)}e.boundingBox=s;var m=new F.Sphere;s.getCenter(m.center),m.radius=s.min.distanceTo(s.max)/2,e.boundingSphere=m}else console.warn("THREE.GLTFLoader: Missing min/max properties for accessor POSITION.")}}(e,t,n),Promise.all(s).then((function(){return void 0!==t.targets?function(e,t,n){for(var r=!1,s=!1,o=0,i=t.length;o<i;o++){if(void 0!==(c=t[o]).POSITION&&(r=!0),void 0!==c.NORMAL&&(s=!0),r&&s)break}if(!r&&!s)return Promise.resolve(e);var a=[],_=[];for(o=0,i=t.length;o<i;o++){var c=t[o];if(r){var l=void 0!==c.POSITION?n.getDependency("accessor",c.POSITION):e.attributes.position;a.push(l)}if(s){l=void 0!==c.NORMAL?n.getDependency("accessor",c.NORMAL):e.attributes.normal;_.push(l)}}return Promise.all([Promise.all(a),Promise.all(_)]).then((function(t){var n=t[0],o=t[1];return r&&(e.morphAttributes.position=n),s&&(e.morphAttributes.normal=o),e.morphTargetsRelative=!0,e}))}(e,t.targets,n):e}))}function Se(e,t){var n=e.getIndex();if(null===n){var r=[],s=e.getAttribute("position");if(void 0===s)return console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),e;for(var o=0;o<s.count;o++)r.push(o);e.setIndex(r),n=e.getIndex()}var i=n.count-2,a=[];if(t===_.TriangleFanDrawMode)for(o=1;o<=i;o++)a.push(n.getX(0)),a.push(n.getX(o)),a.push(n.getX(o+1));else for(o=0;o<i;o++)o%2==0?(a.push(n.getX(o)),a.push(n.getX(o+1)),a.push(n.getX(o+2))):(a.push(n.getX(o+2)),a.push(n.getX(o+1)),a.push(n.getX(o)));a.length/3!==i&&console.error("THREE.GLTFLoader.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");var c=e.clone();return c.setIndex(a),c}return Me.prototype.parse=function(e,t){var n=this,r=this.json,s=this.extensions;this.cache.removeAll(),this.markDefs(),Promise.all([this.getDependencies("scene"),this.getDependencies("animation"),this.getDependencies("camera")]).then((function(t){var o={scene:t[0][r.scene||0],scenes:t[0],animations:t[1],cameras:t[2],asset:r.asset,parser:n,userData:{}};Pe(s,o,r),Ee(o,r),e(o)})).catch(t)},Me.prototype.markDefs=function(){for(var e=this.json.nodes||[],t=this.json.skins||[],n=this.json.meshes||[],r={},s={},o=0,i=t.length;o<i;o++)for(var a=t[o].joints,_=0,c=a.length;_<c;_++)e[a[_]].isBone=!0;for(var l=0,u=e.length;l<u;l++){var d=e[l];void 0!==d.mesh&&(void 0===r[d.mesh]&&(r[d.mesh]=s[d.mesh]=0),r[d.mesh]++,void 0!==d.skin&&(n[d.mesh].isSkinnedMesh=!0))}this.json.meshReferences=r,this.json.meshUses=s},Me.prototype.getDependency=function(e,t){var r=e+":"+t,s=this.cache.get(r);if(!s){switch(e){case"scene":s=this.loadScene(t);break;case"node":s=this.loadNode(t);break;case"mesh":s=this.loadMesh(t);break;case"accessor":s=this.loadAccessor(t);break;case"bufferView":s=this.loadBufferView(t);break;case"buffer":s=this.loadBuffer(t);break;case"material":s=this.loadMaterial(t);break;case"texture":s=this.loadTexture(t);break;case"skin":s=this.loadSkin(t);break;case"animation":s=this.loadAnimation(t);break;case"camera":s=this.loadCamera(t);break;case"light":s=this.extensions[n.KHR_LIGHTS_PUNCTUAL].loadLight(t);break;default:throw new Error("Unknown type: "+e)}this.cache.add(r,s)}return s},Me.prototype.getDependencies=function(e){var t=this.cache.get(e);if(!t){var n=this,r=this.json[e+("mesh"===e?"es":"s")]||[];t=Promise.all(r.map((function(t,r){return n.getDependency(e,r)}))),this.cache.add(e,t)}return t},Me.prototype.loadBuffer=function(e){var t=this.json.buffers[e],r=this.fileLoader;if(t.type&&"arraybuffer"!==t.type)throw new Error("THREE.GLTFLoader: "+t.type+" buffer type is not supported.");if(void 0===t.uri&&0===e)return Promise.resolve(this.extensions[n.KHR_BINARY_GLTF].body);var s=this.options;return new Promise((function(e,n){r.load(Ce(t.uri,s.path),e,void 0,(function(){n(new Error('THREE.GLTFLoader: Failed to load buffer "'+t.uri+'".'))}))}))},Me.prototype.loadBufferView=function(e){var t=this.json.bufferViews[e];return this.getDependency("buffer",t.buffer).then((function(e){var n=t.byteLength||0,r=t.byteOffset||0;return e.slice(r,r+n)}))},Me.prototype.loadAccessor=function(e){var t=this,n=this.json,r=this.json.accessors[e];if(void 0===r.bufferView&&void 0===r.sparse)return Promise.resolve(null);var s=[];return void 0!==r.bufferView?s.push(this.getDependency("bufferView",r.bufferView)):s.push(null),void 0!==r.sparse&&(s.push(this.getDependency("bufferView",r.sparse.indices.bufferView)),s.push(this.getDependency("bufferView",r.sparse.values.bufferView))),Promise.all(s).then((function(e){var s,o,a=e[0],_=fe[r.type],c=he[r.componentType],l=c.BYTES_PER_ELEMENT,u=l*_,d=r.byteOffset||0,m=void 0!==r.bufferView?n.bufferViews[r.bufferView].byteStride:void 0,f=!0===r.normalized;if(m&&m!==u){var g=Math.floor(d/m),v="InterleavedBuffer:"+r.bufferView+":"+r.componentType+":"+g+":"+r.count,y=t.cache.get(v);y||(s=new c(a,g*m,r.count*m/l),y=new h.a(s,m/l),t.cache.add(v,y)),o=new p.InterleavedBufferAttribute(y,_,d%m/l,f)}else s=null===a?new c(r.count*_):new c(a,d,r.count*_),o=new i.BufferAttribute(s,_,f);if(void 0!==r.sparse){var b=fe.SCALAR,x=he[r.sparse.indices.componentType],T=r.sparse.indices.byteOffset||0,w=r.sparse.values.byteOffset||0,C=new x(e[1],T,r.sparse.count*b),P=new c(e[2],w,r.sparse.count*_);null!==a&&(o=new i.BufferAttribute(o.array.slice(),o.itemSize,o.normalized));for(var E=0,O=C.length;E<O;E++){var A=C[E];if(o.setX(A,P[E*_]),_>=2&&o.setY(A,P[E*_+1]),_>=3&&o.setZ(A,P[E*_+2]),_>=4&&o.setW(A,P[E*_+3]),_>=5)throw new Error("THREE.GLTFLoader: Unsupported itemSize in sparse BufferAttribute.")}}return o}))},Me.prototype.loadTexture=function(e){var t,r=this,s=this.json,o=this.options,i=this.textureLoader,a=self.URL||self.webkitURL,c=s.textures[e],l=c.extensions||{},u=(t=l[n.MSFT_TEXTURE_DDS]?s.images[l[n.MSFT_TEXTURE_DDS].source]:s.images[c.source]).uri,d=!1;return void 0!==t.bufferView&&(u=r.getDependency("bufferView",t.bufferView).then((function(e){d=!0;var n=new Blob([e],{type:t.mimeType});return u=a.createObjectURL(n)}))),Promise.resolve(u).then((function(e){var t=o.manager.getHandler(e);return t||(t=l[n.MSFT_TEXTURE_DDS]?r.extensions[n.MSFT_TEXTURE_DDS].ddsLoader:i),new Promise((function(n,r){t.load(Ce(e,o.path),n,void 0,r)}))})).then((function(e){!0===d&&a.revokeObjectURL(u),e.flipY=!1,c.name&&(e.name=c.name),t.mimeType in we&&(e.format=we[t.mimeType]);var n=(s.samplers||{})[c.sampler]||{};return e.magFilter=pe[n.magFilter]||_.LinearFilter,e.minFilter=pe[n.minFilter]||_.LinearMipmapLinearFilter,e.wrapS=me[n.wrapS]||_.RepeatWrapping,e.wrapT=me[n.wrapT]||_.RepeatWrapping,e}))},Me.prototype.assignTexture=function(e,t,r){var s=this;return this.getDependency("texture",r.index).then((function(o){if(!o.isCompressedTexture)switch(t){case"aoMap":case"emissiveMap":case"metalnessMap":case"normalMap":case"roughnessMap":o.format=_.RGBFormat}if(void 0===r.texCoord||0==r.texCoord||"aoMap"===t&&1==r.texCoord||console.warn("THREE.GLTFLoader: Custom UV set "+r.texCoord+" for texture "+t+" not yet supported."),s.extensions[n.KHR_TEXTURE_TRANSFORM]){var i=void 0!==r.extensions?r.extensions[n.KHR_TEXTURE_TRANSFORM]:void 0;i&&(o=s.extensions[n.KHR_TEXTURE_TRANSFORM].extendTexture(o,i))}e[t]=o}))},Me.prototype.assignFinalMaterial=function(e){var t=e.geometry,n=e.material,r=void 0!==t.attributes.tangent,s=void 0!==t.attributes.color,o=void 0===t.attributes.normal,a=!0===e.isSkinnedMesh,_=Object.keys(t.morphAttributes).length>0,c=_&&void 0!==t.morphAttributes.normal;if(e.isPoints){var l="PointsMaterial:"+n.uuid,u=this.cache.get(l);u||(u=new k.PointsMaterial,T.Material.prototype.copy.call(u,n),u.color.copy(n.color),u.map=n.map,u.sizeAttenuation=!1,this.cache.add(l,u)),n=u}else if(e.isLine){l="LineBasicMaterial:"+n.uuid;var d=this.cache.get(l);d||(d=new g.LineBasicMaterial,T.Material.prototype.copy.call(d,n),d.color.copy(n.color),this.cache.add(l,d)),n=d}if(r||s||o||a||_){l="ClonedMaterial:"+n.uuid+":";n.isGLTFSpecularGlossinessMaterial&&(l+="specular-glossiness:"),a&&(l+="skinning:"),r&&(l+="vertex-tangents:"),s&&(l+="vertex-colors:"),o&&(l+="flat-shading:"),_&&(l+="morph-targets:"),c&&(l+="morph-normals:");var h=this.cache.get(l);h||(h=n.clone(),a&&(h.skinning=!0),r&&(h.vertexTangents=!0),s&&(h.vertexColors=!0),o&&(h.flatShading=!0),_&&(h.morphTargets=!0),c&&(h.morphNormals=!0),this.cache.add(l,h)),n=h}n.aoMap&&void 0===t.attributes.uv2&&void 0!==t.attributes.uv&&t.setAttribute("uv2",new i.BufferAttribute(t.attributes.uv.array,2)),n.normalScale&&!r&&(n.normalScale.y=-n.normalScale.y),n.clearcoatNormalScale&&!r&&(n.clearcoatNormalScale.y=-n.clearcoatNormalScale.y),e.material=n},Me.prototype.loadMaterial=function(e){var t,r=this.json,s=this.extensions,o=r.materials[e],i={},a=o.extensions||{},l=[];if(a[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS]){var u=s[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS];t=u.getMaterialType(),l.push(u.extendParams(i,o,this))}else if(a[n.KHR_MATERIALS_UNLIT]){var d=s[n.KHR_MATERIALS_UNLIT];t=d.getMaterialType(),l.push(d.extendParams(i,o,this))}else{t=A.MeshStandardMaterial;var h=o.pbrMetallicRoughness||{};if(i.color=new c.Color(1,1,1),i.opacity=1,Array.isArray(h.baseColorFactor)){var p=h.baseColorFactor;i.color.fromArray(p),i.opacity=p[3]}void 0!==h.baseColorTexture&&l.push(this.assignTexture(i,"map",h.baseColorTexture)),i.metalness=void 0!==h.metallicFactor?h.metallicFactor:1,i.roughness=void 0!==h.roughnessFactor?h.roughnessFactor:1,void 0!==h.metallicRoughnessTexture&&(l.push(this.assignTexture(i,"metalnessMap",h.metallicRoughnessTexture)),l.push(this.assignTexture(i,"roughnessMap",h.metallicRoughnessTexture)))}!0===o.doubleSided&&(i.side=_.DoubleSide);var m=o.alphaMode||be;if(m===Te?(i.transparent=!0,i.depthWrite=!1):(i.transparent=!1,m===xe&&(i.alphaTest=void 0!==o.alphaCutoff?o.alphaCutoff:.5)),void 0!==o.normalTexture&&t!==E.MeshBasicMaterial&&(l.push(this.assignTexture(i,"normalMap",o.normalTexture)),i.normalScale=new U.Vector2(1,1),void 0!==o.normalTexture.scale&&i.normalScale.set(o.normalTexture.scale,o.normalTexture.scale)),void 0!==o.occlusionTexture&&t!==E.MeshBasicMaterial&&(l.push(this.assignTexture(i,"aoMap",o.occlusionTexture)),void 0!==o.occlusionTexture.strength&&(i.aoMapIntensity=o.occlusionTexture.strength)),void 0!==o.emissiveFactor&&t!==E.MeshBasicMaterial&&(i.emissive=(new c.Color).fromArray(o.emissiveFactor)),void 0!==o.emissiveTexture&&t!==E.MeshBasicMaterial&&l.push(this.assignTexture(i,"emissiveMap",o.emissiveTexture)),a[n.KHR_MATERIALS_CLEARCOAT]){var f=s[n.KHR_MATERIALS_CLEARCOAT];t=f.getMaterialType(),l.push(f.extendParams(i,{extensions:a},this))}return Promise.all(l).then((function(){var e;return e=t===ne?s[n.KHR_MATERIALS_PBR_SPECULAR_GLOSSINESS].createMaterial(i):new t(i),o.name&&(e.name=o.name),e.map&&(e.map.encoding=_.sRGBEncoding),e.emissiveMap&&(e.emissiveMap.encoding=_.sRGBEncoding),Ee(e,o),o.extensions&&Pe(s,e,o),e}))},Me.prototype.loadGeometries=function(e){var t=this,r=this.extensions,s=this.primitiveCache;function o(e){return r[n.KHR_DRACO_MESH_COMPRESSION].decodePrimitive(e,t).then((function(n){return Ne(n,e,t)}))}for(var i,_,c=[],l=0,u=e.length;l<u;l++){var d,h=e[l],p=(_=void 0,(_=(i=h).extensions&&i.extensions[n.KHR_DRACO_MESH_COMPRESSION])?"draco:"+_.bufferView+":"+_.indices+":"+Ae(_.attributes):i.indices+":"+Ae(i.attributes)+":"+i.mode),m=s[p];if(m)c.push(m.promise);else d=h.extensions&&h.extensions[n.KHR_DRACO_MESH_COMPRESSION]?o(h):Ne(new a.BufferGeometry,h,t),s[p]={primitive:h,promise:d},c.push(d)}return Promise.all(c)},Me.prototype.loadMesh=function(e){for(var t,n=this,r=this.json.meshes[e],s=r.primitives,o=[],i=0,a=s.length;i<a;i++){var c=void 0===s[i].material?(void 0===(t=this.cache).DefaultMaterial&&(t.DefaultMaterial=new A.MeshStandardMaterial({color:16777215,emissive:0,metalness:1,roughness:1,transparent:!1,depthTest:!0,side:_.FrontSide})),t.DefaultMaterial):this.getDependency("material",s[i].material);o.push(c)}return o.push(n.loadGeometries(s)),Promise.all(o).then((function(t){for(var o=t.slice(0,t.length-1),i=t[t.length-1],a=[],c=0,l=i.length;c<l;c++){var u,h=i[c],p=s[c],m=o[c];if(p.mode===le||p.mode===ue||p.mode===de||void 0===p.mode)!0!==(u=!0===r.isSkinnedMesh?new D.SkinnedMesh(h,m):new P.Mesh(h,m)).isSkinnedMesh||u.geometry.attributes.skinWeight.normalized||u.normalizeSkinWeights(),p.mode===ue?u.geometry=Se(u.geometry,_.TriangleStripDrawMode):p.mode===de&&(u.geometry=Se(u.geometry,_.TriangleFanDrawMode));else if(p.mode===ae)u=new y.LineSegments(h,m);else if(p.mode===ce)u=new f.Line(h,m);else if(p.mode===_e)u=new v.a(h,m);else{if(p.mode!==ie)throw new Error("THREE.GLTFLoader: Primitive mode unsupported: "+p.mode);u=new j.Points(h,m)}Object.keys(u.geometry.morphAttributes).length>0&&Oe(u,r),u.name=r.name||"mesh_"+e,i.length>1&&(u.name+="_"+c),Ee(u,r),n.assignFinalMaterial(u),a.push(u)}if(1===a.length)return a[0];var g=new d.Group;for(c=0,l=a.length;c<l;c++)g.add(a[c]);return g}))},Me.prototype.loadCamera=function(e){var t,n=this.json.cameras[e],r=n[n.type];if(r)return"perspective"===n.type?t=new R.PerspectiveCamera(w.MathUtils.radToDeg(r.yfov),r.aspectRatio||1,r.znear||1,r.zfar||2e6):"orthographic"===n.type&&(t=new S.OrthographicCamera(r.xmag/-2,r.xmag/2,r.ymag/2,r.ymag/-2,r.znear,r.zfar)),n.name&&(t.name=n.name),Ee(t,n),Promise.resolve(t);console.warn("THREE.GLTFLoader: Missing camera parameters.")},Me.prototype.loadSkin=function(e){var t=this.json.skins[e],n={joints:t.joints};return void 0===t.inverseBindMatrices?Promise.resolve(n):this.getDependency("accessor",t.inverseBindMatrices).then((function(e){return n.inverseBindMatrices=e,n}))},Me.prototype.loadAnimation=function(e){for(var t=this.json.animations[e],n=[],s=[],o=[],i=[],a=[],c=0,l=t.channels.length;c<l;c++){var u=t.channels[c],d=t.samplers[u.sampler],h=u.target,p=void 0!==h.node?h.node:h.id,m=void 0!==t.parameters?t.parameters[d.input]:d.input,f=void 0!==t.parameters?t.parameters[d.output]:d.output;n.push(this.getDependency("node",p)),s.push(this.getDependency("accessor",m)),o.push(this.getDependency("accessor",f)),i.push(d),a.push(h)}return Promise.all([Promise.all(n),Promise.all(s),Promise.all(o),Promise.all(i),Promise.all(a)]).then((function(n){for(var s=n[0],o=n[1],i=n[2],a=n[3],c=n[4],l=[],u=0,d=s.length;u<d;u++){var h=s[u],p=o[u],m=i[u],f=a[u],g=c[u];if(void 0!==h){var v;switch(h.updateMatrix(),h.matrixAutoUpdate=!0,ve[g.path]){case ve.weights:v=M.a;break;case ve.rotation:v=G.a;break;case ve.position:case ve.scale:default:v=$.a}var y=h.name?h.name:h.uuid,b=void 0!==f.interpolation?ye[f.interpolation]:_.InterpolateLinear,x=[];ve[g.path]===ve.weights?h.traverse((function(e){!0===e.isMesh&&e.morphTargetInfluences&&x.push(e.name?e.name:e.uuid)})):x.push(y);var T=m.array;if(m.normalized){var w;if(T.constructor===Int8Array)w=1/127;else if(T.constructor===Uint8Array)w=1/255;else if(T.constructor==Int16Array)w=1/32767;else{if(T.constructor!==Uint16Array)throw new Error("THREE.GLTFLoader: Unsupported output accessor component type.");w=1/65535}for(var C=new Float32Array(T.length),P=0,E=T.length;P<E;P++)C[P]=T[P]*w;T=C}for(P=0,E=x.length;P<E;P++){var O=new v(x[P]+"."+ve[g.path],p.array,T,b);"CUBICSPLINE"===f.interpolation&&(O.createInterpolant=function(e){return new oe(this.times,this.values,this.getValueSize()/3,e)},O.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline=!0),l.push(O)}}}var A=t.name?t.name:"animation_"+e;return new r.a(A,void 0,l)}))},Me.prototype.loadNode=function(e){var t,r=this.json,o=this.extensions,i=this,a=r.meshReferences,_=r.meshUses,c=r.nodes[e];return(t=[],void 0!==c.mesh&&t.push(i.getDependency("mesh",c.mesh).then((function(e){var t;if(a[c.mesh]>1){var n=_[c.mesh]++;(t=e.clone()).name+="_instance_"+n}else t=e;return void 0!==c.weights&&t.traverse((function(e){if(e.isMesh)for(var t=0,n=c.weights.length;t<n;t++)e.morphTargetInfluences[t]=c.weights[t]})),t}))),void 0!==c.camera&&t.push(i.getDependency("camera",c.camera)),c.extensions&&c.extensions[n.KHR_LIGHTS_PUNCTUAL]&&void 0!==c.extensions[n.KHR_LIGHTS_PUNCTUAL].light&&t.push(i.getDependency("light",c.extensions[n.KHR_LIGHTS_PUNCTUAL].light)),Promise.all(t)).then((function(e){var t;if((t=!0===c.isBone?new s.Bone:e.length>1?new d.Group:1===e.length?e[0]:new N.Object3D)!==e[0])for(var n=0,r=e.length;n<r;n++)t.add(e[n]);if(c.name&&(t.userData.name=c.name,t.name=I.a.sanitizeNodeName(c.name)),Ee(t,c),c.extensions&&Pe(o,t,c),void 0!==c.matrix){var i=new C.Matrix4;i.fromArray(c.matrix),t.applyMatrix4(i)}else void 0!==c.translation&&t.position.fromArray(c.translation),void 0!==c.rotation&&t.quaternion.fromArray(c.rotation),void 0!==c.scale&&t.scale.fromArray(c.scale);return t}))},Me.prototype.loadScene=function(){function e(t,n,r,s){var o=r.nodes[t];return s.getDependency("node",t).then((function(e){return void 0===o.skin?e:s.getDependency("skin",o.skin).then((function(e){for(var n=[],r=0,o=(t=e).joints.length;r<o;r++)n.push(s.getDependency("node",t.joints[r]));return Promise.all(n)})).then((function(n){return e.traverse((function(e){if(e.isMesh){for(var r=[],s=[],o=0,i=n.length;o<i;o++){var a=n[o];if(a){r.push(a);var _=new C.Matrix4;void 0!==t.inverseBindMatrices&&_.fromArray(t.inverseBindMatrices.array,16*o),s.push(_)}else console.warn('THREE.GLTFLoader: Joint "%s" could not be found.',t.joints[o])}e.bind(new z.a(r,s),e.matrixWorld)}})),e}));var t})).then((function(t){n.add(t);var i=[];if(o.children)for(var a=o.children,_=0,c=a.length;_<c;_++){var l=a[_];i.push(e(l,t,r,s))}return Promise.all(i)}))}return function(t){var n=this.json,r=this.extensions,s=this.json.scenes[t],o=new d.Group;s.name&&(o.name=s.name),Ee(o,s),s.extensions&&Pe(r,o,s);for(var i=s.nodes||[],a=[],_=0,c=i.length;_<c;_++)a.push(e(i[_],o,n,this));return Promise.all(a).then((function(){return o}))}}(),e}()},function(e,t,n){"use strict";n.r(t),n.d(t,"DRACOLoader",(function(){return a}));var r=n(4),s=n(6),o=n(30),i=n(18),a=function(e){i.a.call(this,e),this.decoderPath="",this.decoderConfig={},this.decoderBinary=null,this.decoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.defaultAttributeIDs={position:"POSITION",normal:"NORMAL",color:"COLOR",uv:"TEX_COORD"},this.defaultAttributeTypes={position:"Float32Array",normal:"Float32Array",color:"Float32Array",uv:"Float32Array"}};a.prototype=Object.assign(Object.create(i.a.prototype),{constructor:a,setDecoderPath:function(e){return this.decoderPath=e,this},setDecoderConfig:function(e){return this.decoderConfig=e,this},setWorkerLimit:function(e){return this.workerLimit=e,this},setVerbosity:function(){console.warn("THREE.DRACOLoader: The .setVerbosity() method has been removed.")},setDrawMode:function(){console.warn("THREE.DRACOLoader: The .setDrawMode() method has been removed.")},setSkipDequantization:function(){console.warn("THREE.DRACOLoader: The .setSkipDequantization() method has been removed.")},load:function(e,t,n,r){var s=new o.a(this.manager);s.setPath(this.path),s.setResponseType("arraybuffer"),"use-credentials"===this.crossOrigin&&s.setWithCredentials(!0),s.load(e,e=>{var n={attributeIDs:this.defaultAttributeIDs,attributeTypes:this.defaultAttributeTypes,useUniqueIDs:!1};this.decodeGeometry(e,n).then(t).catch(r)},n,r)},decodeDracoFile:function(e,t,n,r){var s={attributeIDs:n||this.defaultAttributeIDs,attributeTypes:r||this.defaultAttributeTypes,useUniqueIDs:!!n};this.decodeGeometry(e,s).then(t)},decodeGeometry:function(e,t){for(var n in t.attributeTypes){var r=t.attributeTypes[n];void 0!==r.BYTES_PER_ELEMENT&&(t.attributeTypes[n]=r.name)}var s,o=JSON.stringify(t);if(a.taskCache.has(e)){var i=a.taskCache.get(e);if(i.key===o)return i.promise;if(0===e.byteLength)throw new Error("THREE.DRACOLoader: Unable to re-decode a buffer with different settings. Buffer has already been transferred.")}var _=this.workerNextTaskID++,c=e.byteLength,l=this._getWorker(_,c).then(n=>(s=n,new Promise((n,r)=>{s._callbacks[_]={resolve:n,reject:r},s.postMessage({type:"decode",id:_,taskConfig:t,buffer:e},[e])}))).then(e=>this._createGeometry(e.geometry));return l.finally(()=>{s&&_&&this._releaseTask(s,_)}),a.taskCache.set(e,{key:o,promise:l}),l},_createGeometry:function(e){var t=new s.BufferGeometry;e.index&&t.setIndex(new r.BufferAttribute(e.index.array,1));for(var n=0;n<e.attributes.length;n++){var o=e.attributes[n],i=o.name,a=o.array,_=o.itemSize;t.setAttribute(i,new r.BufferAttribute(a,_))}return t},_loadLibrary:function(e,t){var n=new o.a(this.manager);return n.setPath(this.decoderPath),n.setResponseType(t),new Promise((t,r)=>{n.load(e,t,void 0,r)})},preload:function(){return this._initDecoder(),this},_initDecoder:function(){if(this.decoderPending)return this.decoderPending;var e="object"!=typeof WebAssembly||"js"===this.decoderConfig.type,t=[];return e?t.push(this._loadLibrary("draco_decoder.js","text")):(t.push(this._loadLibrary("draco_wasm_wrapper.js","text")),t.push(this._loadLibrary("draco_decoder.wasm","arraybuffer"))),this.decoderPending=Promise.all(t).then(t=>{var n=t[0];e||(this.decoderConfig.wasmBinary=t[1]);var r=a.DRACOWorker.toString(),s=["/* draco decoder */",n,"","/* worker */",r.substring(r.indexOf("{")+1,r.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([s]))}),this.decoderPending},_getWorker:function(e,t){return this._initDecoder().then(()=>{var n;this.workerPool.length<this.workerLimit?((n=new Worker(this.workerSourceURL))._callbacks={},n._taskCosts={},n._taskLoad=0,n.postMessage({type:"init",decoderConfig:this.decoderConfig}),n.onmessage=function(e){var t=e.data;switch(t.type){case"decode":n._callbacks[t.id].resolve(t);break;case"error":n._callbacks[t.id].reject(t);break;default:console.error('THREE.DRACOLoader: Unexpected message, "'+t.type+'"')}},this.workerPool.push(n)):this.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));return(n=this.workerPool[this.workerPool.length-1])._taskCosts[e]=t,n._taskLoad+=t,n})},_releaseTask:function(e,t){e._taskLoad-=e._taskCosts[t],delete e._callbacks[t],delete e._taskCosts[t]},debug:function(){console.log("Task load: ",this.workerPool.map(e=>e._taskLoad))},dispose:function(){for(var e=0;e<this.workerPool.length;++e)this.workerPool[e].terminate();return this.workerPool.length=0,this}}),a.DRACOWorker=function(){var e,t;function n(e,t,n,r,s,o){var i,a,_=o.num_components(),c=n.num_points()*_;switch(s){case Float32Array:i=new e.DracoFloat32Array,t.GetAttributeFloatForAllPoints(n,o,i),a=new Float32Array(c);break;case Int8Array:i=new e.DracoInt8Array,t.GetAttributeInt8ForAllPoints(n,o,i),a=new Int8Array(c);break;case Int16Array:i=new e.DracoInt16Array,t.GetAttributeInt16ForAllPoints(n,o,i),a=new Int16Array(c);break;case Int32Array:i=new e.DracoInt32Array,t.GetAttributeInt32ForAllPoints(n,o,i),a=new Int32Array(c);break;case Uint8Array:i=new e.DracoUInt8Array,t.GetAttributeUInt8ForAllPoints(n,o,i),a=new Uint8Array(c);break;case Uint16Array:i=new e.DracoUInt16Array,t.GetAttributeUInt16ForAllPoints(n,o,i),a=new Uint16Array(c);break;case Uint32Array:i=new e.DracoUInt32Array,t.GetAttributeUInt32ForAllPoints(n,o,i),a=new Uint32Array(c);break;default:throw new Error("THREE.DRACOLoader: Unexpected attribute type.")}for(var l=0;l<c;l++)a[l]=i.GetValue(l);return e.destroy(i),{name:r,array:a,itemSize:_}}onmessage=function(r){var s=r.data;switch(s.type){case"init":e=s.decoderConfig,t=new Promise((function(t){e.onModuleLoaded=function(e){t({draco:e})},DracoDecoderModule(e)}));break;case"decode":var o=s.buffer,i=s.taskConfig;t.then(e=>{var t=e.draco,r=new t.Decoder,a=new t.DecoderBuffer;a.Init(new Int8Array(o),o.byteLength);try{var _=function(e,t,r,s){var o,i,a=s.attributeIDs,_=s.attributeTypes,c=t.GetEncodedGeometryType(r);if(c===e.TRIANGULAR_MESH)o=new e.Mesh,i=t.DecodeBufferToMesh(r,o);else{if(c!==e.POINT_CLOUD)throw new Error("THREE.DRACOLoader: Unexpected geometry type.");o=new e.PointCloud,i=t.DecodeBufferToPointCloud(r,o)}if(!i.ok()||0===o.ptr)throw new Error("THREE.DRACOLoader: Decoding failed: "+i.error_msg());var l={index:null,attributes:[]};for(var u in a){var d,h,p=self[_[u]];if(s.useUniqueIDs)h=a[u],d=t.GetAttributeByUniqueId(o,h);else{if(-1===(h=t.GetAttributeId(o,e[a[u]])))continue;d=t.GetAttribute(o,h)}l.attributes.push(n(e,t,o,u,p,d))}if(c===e.TRIANGULAR_MESH){for(var m=o.num_faces(),f=new Uint32Array(3*m),g=new e.DracoInt32Array,v=0;v<m;++v){t.GetFaceFromMesh(o,v,g);for(var y=0;y<3;++y)f[3*v+y]=g.GetValue(y)}l.index={array:f,itemSize:1},e.destroy(g)}return e.destroy(o),l}(t,r,a,i),c=_.attributes.map(e=>e.array.buffer);_.index&&c.push(_.index.array.buffer),self.postMessage({type:"decode",id:s.id,geometry:_},c)}catch(e){console.error(e),self.postMessage({type:"error",id:s.id,error:e.message})}finally{t.destroy(a),t.destroy(r)}})}}},a.taskCache=new WeakMap,a.setDecoderPath=function(){console.warn("THREE.DRACOLoader: The .setDecoderPath() method has been removed. Use instance methods.")},a.setDecoderConfig=function(){console.warn("THREE.DRACOLoader: The .setDecoderConfig() method has been removed. Use instance methods.")},a.releaseDecoderModule=function(){console.warn("THREE.DRACOLoader: The .releaseDecoderModule() method has been removed. Use instance methods.")},a.getDecoderModule=function(){console.warn("THREE.DRACOLoader: The .getDecoderModule() method has been removed. Use instance methods.")}},,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(4),o=n(53),i=r.__importDefault(n(82)),a=r.__importDefault(n(361)),_=r.__importDefault(n(356));t.CoreGeometryOperationSkin=class{constructor(e,t,n){this.geometry=e,this.geometry1=t,this.geometry0=n}process(){const e=new o.CoreGeometry(this.geometry0),t=new o.CoreGeometry(this.geometry1),n=e.segments(),r=t.segments();if(0===n.length||0===r.length)return;const c=n.length<r.length?[e,t]:[t,e],l=c[0],u=c[1],d=l.segments(),h=u.segments(),p=l.points(),m=u.points(),f=p.length,g=_.default(p,m),v=[];d.forEach((e,t)=>{const n=h[t];v.push(e[0]),v.push(e[1]),v.push(n[0]+f),v.push(e[1]),v.push(n[1]+f),v.push(n[0]+f)}),a.default(l.attrib_names(),u.attrib_names()).forEach(e=>{const t=l.attrib_size(e);let n=g.map(t=>t.attrib_value(e));t>1&&(n=i.default(n.map(e=>e.toArray()))),this.geometry.setAttribute(e,new s.Float32BufferAttribute(n,t))}),this.geometry.setIndex(v),this.geometry.computeVertexNormals()}}},,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(415);t.SceneJsonImporter=r.SceneJsonImporter;const s=n(295);t.PolyScene=s.PolyScene,n(642).AllRegister.run()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(295),o=n(357);class i{constructor(e){this._data=e}static load_data(e){return new i(e).scene()}scene(){return r.__awaiter(this,void 0,void 0,(function*(){const e=new s.PolyScene;e.loading_controller.mark_as_loading();const t=this._data.properties;if(t){e.set_frame(t.frame||1);const n=t.frame_range||[];e.time_controller.set_frame_range(n[0]||1,n[1]||100);const r=t.frame_range_locked;r&&e.time_controller.set_frame_range_locked(r[0],r[1]),t.master_camera_node_path&&e.cameras_controller.set_master_camera_node_path(t.master_camera_node_path)}e.cooker.block();const n=o.JsonImportDispatcher.dispatch_node(e.root);return this._data.root&&n.process_data(this._data.root),this._data.ui&&n.process_ui_data(this._data.ui),yield e.loading_controller.mark_as_loaded(),e.cooker.unblock(),e}))}}t.SceneJsonImporter=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.CamerasController=class{constructor(e){this.scene=e,this._master_camera_node_path=null}set_master_camera_node_path(e){this._master_camera_node_path=e}get master_camera_node_path(){return this._master_camera_node_path}get master_camera_node(){if(this.master_camera_node_path){return this.scene.node(this.master_camera_node_path)}return console.warn("master camera node not found"),this._find_any_camera()}_find_any_camera(){const e=this.scene.root;return e.nodes_by_type("perspective_camera")[0]||e.nodes_by_type("orthographic_camera")[0]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.Cooker=class{constructor(e){this._scene=e,this._queue=new Map,this._block_level=0,this._process_item_bound=this._process_item.bind(this),this._block_level=0}block(){this._block_level+=1}unblock(){this._block_level-=1,this._block_level<0&&(this._block_level=0),this.process_queue()}get blocked(){return this._block_level>0}enqueue(e,t){this._queue.set(e.graph_node_id,t)}process_queue(){this.blocked||this._queue.forEach(this._process_item_bound)}_process_item(e,t){const n=this._scene.graph.node_from_id(t);n&&(this._queue.delete(t),n.dirty_controller.run_post_dirty_hooks(e))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(419);t.CoreGraph=class{constructor(){this._next_id=0,this._graph=new r.Graph({directed:!0,compound:!1,multigraph:!0})}graph(){return this._graph}set_scene(e){this._scene=e}scene(){return this._scene}next_id(){return`${this._next_id+=1}`}setNode(e){this._graph.setNode(e.graph_node_id,e)}removeNode(e){this._graph.removeNode(e.graph_node_id)}nodes_from_ids(e){const t=[];for(let n of e){const e=this.node_from_id(n);e&&t.push(e)}return t}node_from_id(e){return this._graph.node(e)}connect(e,t){const n=e.graph_node_id,s=t.graph_node_id;if(this._graph.hasNode(n)&&this._graph.hasNode(s)){this._graph.setEdge(n,s);let t=!1;return!(!this._scene||this._scene.loading_controller.is_loading)&&(t=!r.alg.isAcyclic(this._graph)),t?(this._graph.removeEdge(n,s),!1):(e.dirty_controller.clear_successors_cache_with_predecessors(),!0)}return console.warn(`attempt to connect non existing node ${n} or ${s}`),!1}disconnect(e,t){if(e&&t){const n=e.graph_node_id,r=t.graph_node_id;this._graph.removeEdge(n,r),e.dirty_controller.clear_successors_cache_with_predecessors()}}disconnect_predecessors(e){const t=this.predecessors(e);for(let n of t)this.disconnect(n,e)}disconnect_successors(e){const t=this.successors(e);for(let n of t)this.disconnect(e,n)}predecessor_ids(e){return this._graph.predecessors(e)||[]}predecessors(e){const t=this.predecessor_ids(e.graph_node_id);return this.nodes_from_ids(t)}successor_ids(e){return this._graph.successors(e)||[]}successors(e){const t=this.successor_ids(e.graph_node_id)||[];return this.nodes_from_ids(t)}all_next_ids(e,t){const n=[];let r=this[t](e.graph_node_id);for(;r.length>0;){const e=[];for(let n of r)for(let r of this[t](n))e.push(r);for(let e of r)n.push(e);for(let t of e)r.push(t);r=e}return n}all_predecessor_ids(e){return this.all_next_ids(e,"predecessor_ids")}all_successor_ids(e){return this.all_next_ids(e,"successor_ids")}all_predecessors(e){const t=this.all_predecessor_ids(e);return this.nodes_from_ids(t)}all_successors(e){const t=this.all_successor_ids(e);return this.nodes_from_ids(t)}}},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3);t.CookController=class{constructor(){this._cooking_nodes_by_id=new Map,this._resolves=[]}add_node(e){this._cooking_nodes_by_id.set(e.graph_node_id,e)}remove_node(e){this._cooking_nodes_by_id.delete(e.graph_node_id),0==this._cooking_nodes_by_id.size&&this.flush()}flush(){let e;for(;e=this._resolves.pop();)e()}wait_for_cooks_completed(){return r.__awaiter(this,void 0,void 0,(function*(){return 0==this._cooking_nodes_by_id.size?void 0:new Promise((e,t)=>{this._resolves.push(e)})}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n(66);const r=n(66);t.DispatchController=class{constructor(e){this.scene=e}set_listener(e){this._events_listener=e}get events_listener(){return this._events_listener}dispatch(e,t,n){var r;null===(r=this._events_listener)||void 0===r||r.process_events(e,t,n)}get emit_allowed(){return this.scene.loading_controller.loaded&&null!=this._events_listener&&this.scene.loading_controller.auto_updating&&!r.Poly.instance().player_mode()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s={antialias:!0};t.RenderersController=class{constructor(){this._next_renderer_id=0,this._next_env_map_id=0,this._renderers={},this._env_maps={},this._require_webgl2=!1,this._resolves=[]}set_require_webgl2(){this._require_webgl2||(this._require_webgl2=!0)}rendering_context(e){let t=null;return this._require_webgl2&&(t=this._rendering_context_webgl(e,!0)),t||(t=this._rendering_context_webgl(e,!1)),t}_rendering_context_webgl(e,t){let n=t?"webgl2":"webgl",r=e.getContext(n,s);return r||(n=t?"experimental-webgl2":"experimental-webgl",r=e.getContext(n,s)),r}register_renderer(e){if(e._polygon_id)throw new Error("render already registered");e._polygon_id=this._next_renderer_id+=1,this._renderers[e._polygon_id]=e,1==Object.keys(this._renderers).length&&this.flush_callbacks_with_renderer(e)}deregister_renderer(e){delete this._renderers[e._polygon_id],e.dispose()}first_renderer(){const e=Object.keys(this._renderers)[0];return e?this._renderers[e]:null}renderers(){return Object.values(this._renderers)}flush_callbacks_with_renderer(e){let t;for(;t=this._resolves.pop();)t(e)}wait_for_renderer(){return r.__awaiter(this,void 0,void 0,(function*(){const e=this.first_renderer();return e||new Promise((e,t)=>{this._resolves.push(e)})}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.NodesRegister=class{constructor(){this._node_register={},this._node_register_categories={},this._node_register_options={}}register_node(e,t,n){const r=e.node_context(),s=e.type();if(this._node_register[r]=this._node_register[r]||{},this._node_register[r][s])throw new Error(`node ${r}/${s} already registered`);this._node_register[r][s]=e,t&&(this._node_register_categories[r]=this._node_register_categories[r]||{},this._node_register_categories[r][s]=t),this._node_register_options[r]=this._node_register_options[r]||{},n&&(this._node_register_options[r][s]=n)}deregister_node(e,t){delete this._node_register[e][t],delete this._node_register_categories[e][t],delete this._node_register_options[e][t]}registered_nodes_for_context_and_parent_type(e,t){if(this._node_register[e]){return Object.values(this._node_register[e]).filter(n=>{var r;const s=this._node_register_options[e][n.type()];if(!s)return!0;{const n=s.only,r=s.except,o=`${e}/${t}`;if(n)return n.includes(o);if(r)return!r.includes(o)}return!s||(null===(r=s.only)||void 0===r?void 0:r.includes(t))})}return[]}registered_nodes(e,t){const n={},r=this.registered_nodes_for_context_and_parent_type(e,t);for(let e of r){n[e.type()]=e}return n}registered_category(e,t){return this._node_register_categories[e][t]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(337),s=n(355);t.SceneEventsController=class{constructor(e){this._mouse_events_controller=new s.MouseEventsController,this._controllers=[this._mouse_events_controller]}register_event_node(e){const t=this._get_controller_for_node(e);t&&t.register_node(e)}unregister_event_node(e){const t=this._get_controller_for_node(e);t&&t.unregister_node(e)}process_event(e,t,n){for(let r of this._controllers)if(r.accepts_event(e))return void r.process(e,t,n)}_get_controller_for_node(e){switch(e.type){case r.MouseEventNode.type():return this._mouse_events_controller}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DirtyController=class{constructor(e){this.node=e,this._dirty_count=0,this._dirty=!0}get is_dirty(){return!0===this._dirty}get dirty_timestamp(){return this._dirty_timestamp}get dirty_count(){return this._dirty_count}add_post_dirty_hook(e,t){this._post_dirty_hook_names=this._post_dirty_hook_names||[],this._post_dirty_hooks=this._post_dirty_hooks||[],this._post_dirty_hook_names.includes(e)?console.warn(`hook with name ${e} already exists`,this.node):(this._post_dirty_hook_names.push(e),this._post_dirty_hooks.push(t))}remove_post_dirty_hook(e){if(this._post_dirty_hook_names&&this._post_dirty_hooks){const t=this._post_dirty_hook_names.indexOf(e);t>=0&&(this._post_dirty_hook_names.splice(t,1),this._post_dirty_hooks.splice(t,1))}}has_hook(e){return!!this._post_dirty_hook_names&&this._post_dirty_hook_names.includes(e)}remove_dirty_state(){this._dirty=!1}set_forbidden_trigger_nodes(e){this._forbidden_trigger_nodes=e.map(e=>e.graph_node_id)}set_dirty(e,t){null==t&&(t=!0),e&&this._forbidden_trigger_nodes&&this._forbidden_trigger_nodes.includes(e.graph_node_id)||(null==e&&(e=this.node),this._dirty=!0,this._dirty_timestamp=performance.now(),this._dirty_count+=1,this.run_post_dirty_hooks(e),!0===t&&this.set_successors_dirty(e))}run_post_dirty_hooks(e){if(this._post_dirty_hooks){const t=this.node.scene.cooker;if(t.blocked)t.enqueue(this.node,e);else for(let t of this._post_dirty_hooks)t(e)}}set_successors_dirty(e){this._cached_successors=this._cached_successors||this.node.graph_all_successors();for(let t of this._cached_successors)t.dirty_controller.set_dirty(e,!1)}clear_successors_cache(){this._cached_successors=void 0}clear_successors_cache_with_predecessors(){this.clear_successors_cache();for(let e of this.node.graph_all_predecessors())e.dirty_controller.clear_successors_cache()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2),s=n(7),o=n(61);t.UIData=class{constructor(e,t=0,n=0){this.node=e,this._position=new r.Vector2,this._width=50,this._border_radius=3,this._color=new s.Color(.75,.75,.75),this._layout_vertical=!0,this._json={x:0,y:0},this._position.x=t,this._position.y=n}set_border_radius(e){this._border_radius=e}border_radius(){return this._border_radius}set_width(e){this._width=e}width(){return this._width}set_comment(e){this._comment=e,this.node.emit(o.NodeEvent.UI_DATA_COMMENT_UPDATED)}get comment(){return this._comment}set_color(e){this._color=e}color(){return this._color}set_layout_horizontal(){this._layout_vertical=!1}is_layout_vertical(){return this._layout_vertical}copy(e){this._position.copy(e.position),this._color.copy(e.color())}get position(){return this._position}set_position(e,t=0){if(e instanceof r.Vector2)this._position.copy(e);else{const n=e;this._position.set(n,t)}this.node.emit(o.NodeEvent.UI_DATA_POSITION_UPDATED)}translate(e,t=!1){this._position.add(e),t&&(this._position.x=Math.round(this._position.x),this._position.y=Math.round(this._position.y)),this.node.emit(o.NodeEvent.UI_DATA_POSITION_UPDATED)}to_json(){return this._json.x=this._position.x,this._json.y=this._position.y,this._json.comment=this._comment,this._json}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(537),s=n(538);t.StatesController=class{constructor(e){this.node=e,this.time_dependent=new r.TimeDependentState(this.node),this.error=new s.ErrorState(this.node)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(338);class s extends r.BaseState{get active(){return this.are_params_time_dependent()||this.are_inputs_time_dependent()}are_params_time_dependent(){const e=this.node.params.names;for(let t of e){const e=this.node.params.get(t);if(e&&e.states.time_dependent.active)return!0}return!1}are_inputs_time_dependent(){const e=this.node.io.inputs.inputs();for(let t of e)if(t&&t.states.time_dependent.active)return!0;return!1}force_time_dependent(){const e=this.node.graph_predecessors().map(e=>e.graph_node_id),t=this.node.scene.time_controller.graph_node;e.includes(t.graph_node_id)||this.node.add_graph_input(t)}unforce_time_dependent(){const e=this.node.scene.time_controller.graph_node;this.node.remove_graph_input(e)}}t.TimeDependentState=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(61),s=n(338);class o extends s.BaseState{set(e){this._message!=e&&(console.warn("error",e,this.node.full_path()),this._message=e,this.on_update())}get message(){return this._message}clear(){this.set(void 0)}get active(){return null!=this._message}on_update(){null!=this._message&&this.node.set_container(null,`from error '${this._message}'`),this.node.emit(r.NodeEvent.ERROR_UPDATED)}}t.ErrorState=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(256),s=n(101);t.HierarchyParentController=class{constructor(e){this.node=e,this._parent=null}get parent(){return this._parent}set_parent(e){e!=this.node.parent_controller.parent&&(this._parent=e,this._parent&&this.node.name_controller.request_name_to_parent(r.NameController.base_name(this.node)))}is_selected(){var e,t,n;return(null===(n=null===(t=null===(e=this.parent)||void 0===e?void 0:e.children_controller)||void 0===t?void 0:t.selection)||void 0===n?void 0:n.contains(this.node))||!1}full_path(){const e=s.CoreWalker.SEPARATOR;if(null!=this._parent){const t=this._parent.full_path();return t===e?t+this.node.name:t+e+this.node.name}return e}on_set_parent(){if(this._on_set_parent_hooks)for(let e of this._on_set_parent_hooks)e()}find_node(e){if(null==e)return null;if(e===s.CoreWalker.CURRENT||e===s.CoreWalker.CURRENT_WITH_SLASH)return this.node;if(e===s.CoreWalker.PARENT||e===s.CoreWalker.PARENT_WITH_SLASH)return this.node.parent;const t=s.CoreWalker.SEPARATOR;e[0]===t&&(e=e.substring(1,e.length));const n=e.split(t);if(1===n.length){const e=n[0];return this.node.children_controller?this.node.children_controller.child_by_name(e):null}return s.CoreWalker.find_node(this.node,e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(49),o=n(67),i=r.__importDefault(n(344)),a=r.__importDefault(n(99)),_=r.__importDefault(n(102)),c=r.__importDefault(n(255)),l=n(61),u=n(256),d=n(565),h=n(66);t.HierarchyChildrenController=class{constructor(e,t){this.node=e,this._context=t,this._children={},this._children_by_type={},this._children_and_grandchildren_by_context={},this._is_dependent_on_children=!1}get selection(){return this._selection=this._selection||new d.CoreNodeSelection(this.node)}get context(){return this._context}init(e=!1){this._children={},e&&(this._is_dependent_on_children=e,this._is_dependent_on_children&&(this._children_node=new o.CoreGraphNode(this.node.scene,"children"),this.node.add_graph_input(this._children_node)))}set_child_name(e,t){let n;if(t=(t=t.replace(/[^A-Za-z0-9]/g,"_")).replace(/^[0-9]/,"_"),null!=(n=this._children[t])){if(e.name===t&&n.graph_node_id===e.graph_node_id)return;return t=s.CoreString.increment(t),this.set_child_name(e,t)}{const n=e.name;this._children[n]&&delete this._children[n],this._children[t]=e,e.name_controller.update_name_from_parent(t),this._add_to_nodes_by_type(e),this.node.scene.nodes_controller.add_to_instanciated_node(e)}}node_context_signature(){return`${this.node.node_context()}/${this.node.type}`}available_children_classes(){return h.Poly.instance().registered_nodes(this._context,this.node.type)}is_valid_child_type(e){return null!=this.available_children_classes()[e]}create_node(e){const t=this.available_children_classes()[e];if(null==t){const t=`child node type '${e}' not found for node '${this.node.full_path()}'. Available types are: ${Object.keys(this.available_children_classes()).join(", ")}, ${this._context}, ${this.node.type}`;throw console.error(t),t}{const n=new t(this.node.scene,`child_node_${e}`);return n.initialize_base_and_node(),this.add_node(n),n.lifecycle.set_creation_completed(),n}}add_node(e){if(e.set_parent(this.node),e.params.init(),e.parent_controller.on_set_parent(),e.name_controller.post_set_full_path(),e.children_allowed()&&e.children_controller)for(let t of e.children_controller.children())t.name_controller.post_set_full_path();return this.node.emit(l.NodeEvent.CREATED,{child_node_json:e.to_json()}),this.node.scene.lifecycle_controller.on_create_hook_allowed()&&e.lifecycle.run_on_create_hooks(),e.lifecycle.run_on_add_hooks(),this.set_child_name(e,u.NameController.base_name(e)),this.node.lifecycle.run_on_child_add_hooks(e),this._is_dependent_on_children&&this._children_node&&this._children_node.add_graph_input(e),e.require_webgl2()&&this.node.scene.webgl_controller.set_require_webgl2(),this.node.scene.missing_expression_references_controller.check_for_missing_references(e),e}remove_node(e){var t,n;if(e.parent!=this.node)return console.warn(`node ${e.name} not under parent ${this.node.full_path()}`);{e.set_successors_dirty(this.node),this._is_dependent_on_children&&this._children_node&&this._children_node.remove_graph_input(e),this.selection.contains(e)&&this.selection.remove([e]);const r=e.io.connections.first_input_connection();null===(t=e.io.connections.input_connections())||void 0===t||t.forEach(e=>{e&&e.disconnect({set_input:!0})}),null===(n=e.io.connections.output_connections())||void 0===n||n.forEach(e=>{if(e&&(e.disconnect({set_input:!0}),r)){const t=r.node_src,n=e.output_index,s=e.node_dest,o=e.input_index;s.io.inputs.set_input(o,t,n)}}),e.graph_disconnect_successors(),e.set_parent(null),delete this._children[e.name],this._remove_from_nodes_by_type(e),this.node.scene.nodes_controller.remove_from_instanciated_node(e),this.node.lifecycle.run_on_child_remove_hooks(e),e.lifecycle.run_on_delete_hooks(),e.emit(l.NodeEvent.DELETED,{parent_id:this.node.graph_node_id})}}_add_to_nodes_by_type(e){const t=e.graph_node_id,n=e.type;this._children_by_type[n]=this._children_by_type[n]||[],i.default(this._children_by_type[n],t)||this._children_by_type[n].push(t),this.add_to_children_and_grandchildren_by_context(e)}_remove_from_nodes_by_type(e){const t=e.graph_node_id,n=e.type;if(this._children_by_type[n]){const e=this._children_by_type[n].indexOf(t);e>=0&&(this._children_by_type[n].splice(e,1),0==this._children_by_type[n].length&&delete this._children_by_type[n])}this.remove_from_children_and_grandchildren_by_context(e)}add_to_children_and_grandchildren_by_context(e){var t;const n=e.graph_node_id,r=e.node_context();this._children_and_grandchildren_by_context[r]=this._children_and_grandchildren_by_context[r]||[],i.default(this._children_and_grandchildren_by_context[r],n)||this._children_and_grandchildren_by_context[r].push(n),this.node.parent&&this.node.parent.children_allowed()&&(null===(t=this.node.parent.children_controller)||void 0===t||t.add_to_children_and_grandchildren_by_context(e))}remove_from_children_and_grandchildren_by_context(e){var t;const n=e.graph_node_id,r=e.node_context();if(this._children_and_grandchildren_by_context[r]){const e=this._children_and_grandchildren_by_context[r].indexOf(n);e>=0&&(this._children_and_grandchildren_by_context[r].splice(e,1),0==this._children_and_grandchildren_by_context[r].length&&delete this._children_and_grandchildren_by_context[r])}this.node.parent&&this.node.parent.children_allowed()&&(null===(t=this.node.parent.children_controller)||void 0===t||t.remove_from_children_and_grandchildren_by_context(e))}nodes_by_type(e){const t=this._children_by_type[e]||[],n=this.node.scene.graph,r=[];return t.forEach(e=>{const t=n.node_from_id(e);t&&r.push(t)}),r}child_by_name(e){return this._children[e]}has_children_and_grandchildren_with_context(e){return null!=this._children_and_grandchildren_by_context[e]}children(){return c.default(this._children)}children_names(){return _.default(a.default(this._children))}traverse_children(e){var t;for(let n of this.children())e(n),null===(t=n.children_controller)||void 0===t||t.traverse_children(e)}}},,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=r.__importDefault(n(345)),o=r.__importDefault(n(330)),i=r.__importDefault(n(346)),a=n(61);t.CoreNodeSelection=class{constructor(e){this._node=e,this._node_ids=[],this._json=[]}node(){return this._node}nodes(){return this._node.scene.graph.nodes_from_ids(this._node_ids)}contains(e){return this._node_ids.includes(e.graph_node_id)}equals(e){const t=e.map(e=>e.graph_node_id).sort();return i.default(t,this._node_ids)}clear(){this._node_ids=[],this.send_update_event()}set(e){this._node_ids=[],this.add(e)}add(e){const t=e.map(e=>e.graph_node_id);this._node_ids=o.default(this._node_ids,t),this.send_update_event()}remove(e){const t=e.map(e=>e.graph_node_id);this._node_ids=s.default(this._node_ids,t),this.send_update_event()}send_update_event(){this._node.emit(a.NodeEvent.SELECTION_UPDATED)}to_json(){return this._json=this._json||[],this._json=this._node_ids.map(e=>e),this._json}}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.LifeCycleController=class{constructor(e){this.node=e,this._creation_completed=!1}set_creation_completed(){this._creation_completed=!0}get creation_completed(){return this.node.scene.loading_controller.loaded&&this._creation_completed}add_on_child_add_hook(e){this._on_child_add_hooks=this._on_child_add_hooks||[],this._on_child_add_hooks.push(e)}run_on_child_add_hooks(e){this.execute_hooks_with_child_node(this._on_child_add_hooks,e)}add_on_child_remove_hook(e){this._on_child_remove_hooks=this._on_child_remove_hooks||[],this._on_child_remove_hooks.push(e)}run_on_child_remove_hooks(e){this.execute_hooks_with_child_node(this._on_child_remove_hooks,e)}add_on_create_hook(e){this._on_create_hooks=this._on_create_hooks||[],this._on_create_hooks.push(e)}run_on_create_hooks(){this.execute_hooks(this._on_create_hooks)}add_on_add_hook(e){this._on_add_hooks=this._on_add_hooks||[],this._on_add_hooks.push(e)}run_on_add_hooks(){this.execute_hooks(this._on_add_hooks)}add_delete_hook(e){this._on_delete_hooks=this._on_delete_hooks||[],this._on_delete_hooks.push(e)}run_on_delete_hooks(){this.execute_hooks(this._on_delete_hooks)}execute_hooks(e){if(e)for(let t of e)t()}execute_hooks_with_child_node(e,t){if(e)for(let n of e)n(t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(66);t.CookController=class{constructor(e){this.node=e,this._cooking=!1,this._cooks_count=0,this._max_cook_time=-1,this._cook_time_with_inputs=0,this._cook_time=0,this._cook_time_params=0,this._inputs_evaluation_required=!0}disallow_inputs_evaluation(){this._inputs_evaluation_required=!1}get is_cooking(){return!0===this._cooking}get cooks_count(){return this._cooks_count}get cook_time(){return this._cook_time}_init_cooking_state(){this._cooking=!0,this._cooking_dirty_timestamp=this.node.dirty_controller.dirty_timestamp}_init_cooking_start_time(e){null==e&&(e=this.node.scene.performance.started),e&&(this._cook_time_start=performance.now())}_start_cook_if_no_errors(e){return r.__awaiter(this,void 0,void 0,(function*(){if(this.node.states.error.active)this.end_cook();else try{yield this.node.cook(e)}catch(e){this.node.states.error.set(`node internal error: '${e}'.`),console.error(this.node.full_path(),e),this.end_cook()}}))}cook_main(){return r.__awaiter(this,void 0,void 0,(function*(){if(this.is_cooking)return;this._init_cooking_state();const e=this.node.scene.performance.started;e&&(this._cook_time_with_inputs_start=performance.now()),this.node.states.error.clear();const t=yield this.evaluate_inputs_and_params();this._init_cooking_start_time(e);const n=[];if(t){let e;for(let r=0;r<t.length;r++)e=t[r],e&&(this.node.io.inputs.input_clonable_state_with_override(r)?n.push(e.core_content_cloned()):n.push(e.core_content()))}yield this._start_cook_if_no_errors(n)}))}cook_main_without_inputs(){return r.__awaiter(this,void 0,void 0,(function*(){this.node.scene.cook_controller.add_node(this.node),this.is_cooking?console.warn("cook_main_without_inputs already cooking",this.node.full_path()):(this._init_cooking_state(),this._init_cooking_start_time(),this.node.states.error.clear(),yield this.node.params.eval_all(),yield this._start_cook_if_no_errors([]))}))}end_cook(e){this._increment_cooks_count();const t=this.node.dirty_controller.dirty_timestamp;null==t||t===this._cooking_dirty_timestamp?(this.node.remove_dirty_state(),this._terminate_cook_process()):(s.Poly.instance().log("COOK AGAIN",t,this._cooking_dirty_timestamp,this.node.full_path()),this._cooking=!1,this.cook_main())}_terminate_cook_process(){this.is_cooking&&(this._cooking=!1,this._record_cook_time(),setTimeout(this.node.container_controller.notify_requesters.bind(this.node.container_controller),0))}_increment_cooks_count(){this.is_cooking&&null!=this._cook_time_start&&(this._cooks_count+=1)}_record_cook_time(){if(this.node.scene.performance.started){const e=performance.now();null!=this._cook_time_with_inputs_start&&(this._cook_time_with_inputs=e-this._cook_time_with_inputs_start,this._cook_time_with_inputs_start=void 0),null!=this._cook_time_params_start&&null!=this._cook_time_start&&(this._cook_time_params=this._cook_time_start-this._cook_time_params_start),null!=this._cook_time_start&&(this._cook_time=e-this._cook_time_start,this._cook_time_start=void 0),this._max_cook_time=Math.max(this._max_cook_time,this._cook_time)}this.node.scene.performance.started&&this.node.scene.performance.record_node_cook_data(this.node)}evaluate_inputs_and_params(){return r.__awaiter(this,void 0,void 0,(function*(){let e=[];return this._inputs_evaluation_required&&(e=yield this.node.io.inputs.eval_required_inputs_p()),this.node.scene.performance.started&&(this._cook_time_params_start=performance.now()),yield this.node.params.eval_all(),e}))}get cook_time_with_inputs(){return this._cook_time_with_inputs}get cook_time_params(){return this._cook_time_params}_time_with_precision(e){return Math.round(1e3*e)/1e3}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3).__importDefault(n(570)),s=n(90),o=n(93);var i;!function(e){e.SUCCESSORS="graph_successors",e.PREDECESSORS="graph_predecessors"}(i||(i={}));t.DependenciesController=class{constructor(e){this.node=e}scene_successors(){return this._find_scene_node_scene_nodes(i.SUCCESSORS)}scene_predecessors(){return this._find_scene_node_scene_nodes(i.PREDECESSORS)}_find_scene_node_scene_nodes(e){const t=this.node.params.all,n=[];for(let e of t)n.push(e);n.push(this.node);const s=n;let o=[];for(let t of s)this._find_base_nodes_from_node(t,e,o);if(e==i.SUCCESSORS)for(let e of this.param_nodes_referree())o.push(e);o=o.filter(e=>e.graph_node_id!=this.node.graph_node_id);const a=r.default(o,e=>e.graph_node_id),_=[];return Object.keys(a).forEach(e=>{_.push(a[e][0])}),_}_find_base_nodes_from_node(e,t,n){const r=e[t]();for(let e of r)e instanceof o.BaseParamClass?n.push(e.node):(i=e,("string"==typeof(a=s.BaseNodeClass)?typeof i===a:i instanceof a)?n.push(e):this._find_base_nodes_from_node(e,t,n));var i,a;return n}add_param_referree(e){this._params_referrees_by_graph_node_id=this._params_referrees_by_graph_node_id||{},this._params_referrees_by_graph_node_id[e.graph_node_id]=e}remove_param_referree(e){this._params_referrees_by_graph_node_id&&delete this._params_referrees_by_graph_node_id[e.graph_node_id]}params_referree(){const e=[];if(this._params_referrees_by_graph_node_id)for(let t of Object.keys(this._params_referrees_by_graph_node_id))e.push(this._params_referrees_by_graph_node_id[t]);return e}param_nodes_referree(){const e={};let t;for(let n of this.params_referree())t=n.node,e[t.graph_node_id]=t;const n=[];for(let t of Object.keys(e))n.push(e[t]);return n}}},,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.EmitController=class{constructor(e){this.param=e,this._blocked_emit=!1,this._blocked_parent_emit=!1,this._count_by_event_name={}}get emit_allowed(){return!0!==this._blocked_emit&&(!this.param.scene.loading_controller.is_loading&&this.param.scene.dispatch_controller.emit_allowed)}block_emit(){return this._blocked_emit=!0,this.param.is_multiple&&this.param.components&&this.param.components.forEach(e=>e.emit_controller.block_emit()),!0}unblock_emit(){return this._blocked_emit=!1,this.param.is_multiple&&this.param.components&&this.param.components.forEach(e=>e.emit_controller.unblock_emit()),!0}block_parent_emit(){return this._blocked_parent_emit=!0,!0}unblock_parent_emit(){return this._blocked_parent_emit=!1,!0}increment_count(e){this._count_by_event_name[e]=this._count_by_event_name[e]||0,this._count_by_event_name[e]+=1}events_count(e){return this._count_by_event_name[e]||0}emit(e){this.emit_allowed&&(this.param.emit(e),null!=this.param.parent_param&&!0!==this._blocked_parent_emit&&this.param.parent_param.emit(e))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ParamSerializer=class{constructor(e){this.param=e}to_json(){const e={name:this.param.name,type:this.param.type,raw_input:this.raw_input(),value:this.value(),expression:this.expression(),graph_node_id:this.param.graph_node_id,error_message:this.error_message(),is_visible:this.is_visible(),components:void 0};return this.param.is_multiple&&this.param.components&&(e.components=this.param.components.map(e=>e.graph_node_id)),e}raw_input(){return this.param.raw_input_serialized}value(){return this.param.value_serialized}expression(){var e;return this.param.has_expression()?null===(e=this.param.expression_controller)||void 0===e?void 0:e.expression:void 0}error_message(){return this.param.states.error.message}is_visible(){return this.param.options.is_visible}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(577),s=n(578);t.StatesController=class{constructor(e){this.param=e,this.time_dependent=new r.TimeDependentState(this.param),this.error=new s.ErrorState(this.param)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TimeDependentState=class{constructor(e){this.param=e}get active(){const e=this.param.scene.time_controller.graph_node.graph_node_id;return this.param.graph_predecessor_ids().includes(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(103);t.ErrorState=class{constructor(e){this.param=e}set(e){this._message!=e&&(this._message=e,this._message&&console.log(this.param.full_path(),this._message),this.param.emit_controller.emit(r.ParamEvent.ERROR_UPDATED))}get message(){return this._message}clear(){this.set(void 0)}get active(){return null!=this._message}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(67),o=n(24),i=n(348),a=n(61);t.ParamsController=class{constructor(e){this.node=e,this._param_create_mode=!1,this._params_by_name={},this._params_list=[],this._param_names=[],this._non_spare_params=[],this._spare_params=[],this._non_spare_param_names=[],this._spare_param_names=[],this._params_added_since_last_params_eval=!1}init_dependency_node(){this._params_node||(this._params_node=new s.CoreGraphNode(this.node.scene,"params"),this.node.add_graph_input(this._params_node))}init(){this.init_dependency_node(),this._param_create_mode=!0,this.init_from_params_config(),this.node.create_params(),this._post_create_params()}_post_create_params(){this._update_caches(),this.init_param_accessors(),this._param_create_mode=!1,this.run_post_create_params_hook()}update_params(e){let t=!1,n=!1;if(e.names_to_delete)for(let t of e.names_to_delete)this.has(t)&&(this.delete_param(t),n=!0);if(e.to_add)for(let n of e.to_add){this.add_param(n.type,n.name,n.init_value,n.options)&&(t=!0)}(n||t)&&(this._update_caches(),this.init_param_accessors(),this.node.emit(a.NodeEvent.PARAMS_UPDATED))}post_create_spare_params(){this._update_caches(),this.init_param_accessors()}init_from_params_config(){const e=this.node.params_config;if(e)for(let t of Object.keys(e)){const n=e[t];this.add_param(n.type,t,n.init_value,n.options)}}init_param_accessors(){let e=Object.getOwnPropertyNames(this.node.pv);this._remove_unneeded_accessors(e),e=Object.getOwnPropertyNames(this.node.pv);for(let t of this.all){const n=t.options.is_spare;(!e.includes(t.name)||n)&&(Object.defineProperty(this.node.pv,t.name,{get:()=>t.value,configurable:n}),Object.defineProperty(this.node.p,t.name,{get:()=>t,configurable:n}))}}_remove_unneeded_accessors(e){const t=this._param_names,n=[];for(let r of e)t.includes(r)||n.push(r);for(let e of n)Object.defineProperty(this.node.pv,e,{get:()=>{},configurable:!0}),Object.defineProperty(this.node.p,e,{get:()=>{},configurable:!0})}get params_node(){return this._params_node}get all(){return this._params_list}get non_spare(){return this._non_spare_params}get spare(){return this._spare_params}get names(){return this._param_names}get non_spare_names(){return this._non_spare_param_names}get spare_names(){return this._spare_param_names}set_with_type(e,t,n){const r=this.param_with_type(e,n);r?r.set(t):console.warn(`param ${e} not found with type ${n}`)}set_float(e,t){this.set_with_type(e,t,o.ParamType.FLOAT)}set_vector3(e,t){this.set_with_type(e,t,o.ParamType.VECTOR3)}has_param(e){return null!=this._params_by_name[e]}has(e){return this.has_param(e)}get(e){return this.param(e)}param_with_type(e,t){const n=this.param(e);if(n&&n.type==t)return n}get_float(e){return this.param_with_type(e,o.ParamType.FLOAT)}get_operator_path(e){return this.param_with_type(e,o.ParamType.OPERATOR_PATH)}value(e){var t;return null===(t=this.param(e))||void 0===t?void 0:t.value}value_with_type(e,t){var n;return null===(n=this.param_with_type(e,t))||void 0===n?void 0:n.value}boolean(e){return this.value_with_type(e,o.ParamType.BOOLEAN)}float(e){return this.value_with_type(e,o.ParamType.FLOAT)}integer(e){return this.value_with_type(e,o.ParamType.INTEGER)}string(e){return this.value_with_type(e,o.ParamType.STRING)}vector2(e){return this.value_with_type(e,o.ParamType.VECTOR2)}vector3(e){return this.value_with_type(e,o.ParamType.VECTOR3)}color(e){return this.value_with_type(e,o.ParamType.COLOR)}param(e){const t=this._params_by_name[e];return null!=t?t:(console.warn(`tried to access param '${e}' in node ${this.node.full_path()}, but existing params are: ${this.names} on node ${this.node.full_path()}`),null)}delete_param(e){const t=this._params_by_name[e];if(!t)throw new Error(`param '${e}' does not exist on node ${this.node.full_path()}`);if(this._params_node&&this._params_node.remove_graph_input(this._params_by_name[e]),t.set_node(null),delete this._params_by_name[e],t.is_multiple&&t.components)for(let e of t.components){const t=e.name;delete this._params_by_name[t]}}add_param(e,t,n,r={}){const s=r.spare||!1;!1!==this._param_create_mode||s||console.warn(`node ${this.node.full_path()} (${this.node.type}) param '${t}' cannot be created outside of create_params`),null==this.node.scene&&console.warn(`node ${this.node.full_path()} (${this.node.type}) has no scene assigned`);const o=i.ParamConstructorByType[e];if(null!=o){const i=this._params_by_name[t];i&&(s?i.type!=e&&this.delete_param(i.name):console.warn(`a param named ${t} already exists`,this.node));const a=new o(this.node.scene);if(a.options.set(r),a.set_name(t),a.set_init_value(n),a.init_components(),a.set(n),a.set_node(this.node),this._params_by_name[a.name]=a,a.is_multiple&&a.components)for(let e of a.components)this._params_by_name[e.name]=e;return this._params_added_since_last_params_eval=!0,a}}_update_caches(){this._params_list=Object.values(this._params_by_name),this._param_names=Object.keys(this._params_by_name),this._non_spare_params=Object.values(this._params_by_name).filter(e=>!e.options.is_spare),this._spare_params=Object.values(this._params_by_name).filter(e=>e.options.is_spare),this._non_spare_param_names=Object.values(this._params_by_name).filter(e=>!e.options.is_spare).map(e=>e.name),this._spare_param_names=Object.values(this._params_by_name).filter(e=>e.options.is_spare).map(e=>e.name)}_eval_param(e){return r.__awaiter(this,void 0,void 0,(function*(){e.is_dirty&&(yield e.compute(),e.states.error.active&&this.node.states.error.set(`param '${e.name}' error: ${e.states.error.message}`))}))}eval_params(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=[];for(let n=0;n<e.length;n++)e[n].is_dirty&&t.push(this._eval_param(e[n]));yield Promise.all(t),this.node.states.error.active&&this.node.set_container(null)}))}eval_all(){return r.__awaiter(this,void 0,void 0,(function*(){this._params_node&&(this._params_node.is_dirty||this._params_added_since_last_params_eval)&&(yield this.eval_params(this._params_list),this._params_node.remove_dirty_state(),this._params_added_since_last_params_eval=!1)}))}set_post_create_params_hook(e){this._post_create_params_hook=e}add_on_scene_load_hook(e,t){this._on_scene_load_hook_names=this._on_scene_load_hook_names||[],this._on_scene_load_hooks=this._on_scene_load_hooks||[],this._on_scene_load_hook_names.includes(e)?console.warn(`hook with name ${e} already exists`,this.node):(this._on_scene_load_hook_names.push(e),this._on_scene_load_hooks.push(t))}run_post_create_params_hook(){this._post_create_params_hook&&this._post_create_params_hook()}run_on_scene_load_hooks(){if(this._on_scene_load_hooks)for(let e of this._on_scene_load_hooks)e()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=r.__importDefault(n(44)),o=r.__importDefault(n(260)),i=r.__importDefault(n(45)),a=n(191),_=n(24),c=n(49);class l extends a.TypedNumericParam{static type(){return _.ParamType.BOOLEAN}get default_value_serialized(){return i.default(this.default_value)?this.default_value:this.convert(this.default_value)||!1}get raw_input_serialized(){return this._raw_input}get value_serialized(){return this.value}static are_raw_input_equal(e,t){return e==t}static are_values_equal(e,t){return e==t}convert(e){if(o.default(e))return e;if(s.default(e))return e>=1;if(i.default(e)){if(c.CoreString.is_boolean(e))return c.CoreString.to_boolean(e);if(c.CoreString.is_number(e)){return parseFloat(e)>=1}}return null}}t.BooleanParam=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(350),o=n(583),i=n(601),a=n(602),_=n(24);t.ExpressionManager=class{constructor(e){this.param=e,this.parse_completed=!1,this.parse_started=!1,this.parsed_tree=new s.ParsedTree,this.function_generator=new o.FunctionGenerator(this.param),this.dependencies_controller=new a.DependenciesController(this.param)}parse_expression(e){if(this.parse_started)throw new Error(`parse in progress for param ${this.param.full_path()}`);this.parse_started=!0,this.parse_completed=!1,this.parsed_tree=this.parsed_tree||new s.ParsedTree,this.reset(),this.param.type==_.ParamType.STRING?this.parsed_tree.parse_expression_for_string_param(e):this.parsed_tree.parse_expression(e),this.function_generator.parse_tree(this.parsed_tree),null==this.function_generator.error_message&&(this.dependencies_controller.update(this.function_generator),this.dependencies_controller.error_message?this.param.states.error.set(this.dependencies_controller.error_message):(this.parse_completed=!0,this.parse_started=!1))}compute_function(){return r.__awaiter(this,void 0,void 0,(function*(){if(!this.compute_allowed())return new Promise((e,t)=>{e(null)});try{return yield this.function_generator.eval_function()}catch(e){return new Promise((e,t)=>e())}}))}reset(){this.parse_completed=!1,this.parse_started=!1,this.dependencies_controller.reset(),this.function_generator.reset()}get is_errored(){return this.function_generator.is_errored}get error_message(){return this.function_generator.error_message}compute_allowed(){return this.function_generator.eval_allowed()}update_from_method_dependency_name_change(){this.expression_string_generator=this.expression_string_generator||new i.ExpressionStringGenerator(this.param);const e=this.expression_string_generator.parse_tree(this.parsed_tree);e?this.param.set(e):console.warn("failed to regenerate expression")}}},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(584),o=n(585),i=n(114),a=r.__importDefault(n(45)),_={math_random:"random"},c=n(352),l=Object.keys(c.Easing),u={};["abs","acos","acosh","asin","asinh","atan","atan2","atanh","ceil","cos","cosh","exp","expm1","floor","log","log1p","log2","log10","max","min","pow","round","sign","sin","sinh","sqrt","tan","tanh"].forEach(e=>{u[e]=`Math.${e}`}),["cbrt","hypot","log10","trunc"].forEach(e=>{u[e]=`Math.${e}`}),Object.keys(_).forEach(e=>{const t=_[e];u[e]=`Math.${t}`}),["fit","fit01","fract","deg2rad","rad2deg","rand","clamp"].forEach(e=>{u[e]=`Core.Math.${e}`}),l.forEach(e=>{u[e]=`Core.Math.Easing.${e}`}),["precision"].forEach(e=>{u[e]=`Core.String.${e}`});const d={if:s.LiteralConstructsController.if},h={};["E","LN2","LN10","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"].forEach(e=>{h[e]=`Math.${e}`});const p=o.MethodModule,m=n(261),f={x:0,y:1,z:2,w:3,r:0,g:1,b:2},g=n(261),v=n(600),y=n(104),b=n(49),x=n(262);class T extends g.BaseTraverser{constructor(e){super(e),this.param=e,this._attribute_requirements_controller=new v.AttributeRequirementsController,this.methods=[],this.method_index=-1,this.method_dependencies=[],this.immutable_dependencies=[]}parse_tree(e){if(this.reset(),null==e.error_message){try{if(this._attribute_requirements_controller.reset(),e.node){const t=this.traverse_node(e.node);t&&!this.is_errored&&(this.function_main_string=t)}else console.warn("no parsed_tree.node")}catch(e){console.warn(`error in expression for param ${this.param.full_path()}`),console.warn(e)}if(this.function_main_string)try{this.function=new x.AsyncFunction("Core","param","methods","_set_error_from_error",`\n\t\t\t\t\ttry {\n\t\t\t\t\t\t${this.function_body()}\n\t\t\t\t\t} catch(e) {\n\t\t\t\t\t\t_set_error_from_error(e)\n\t\t\t\t\t\treturn null;\n\t\t\t\t\t}`)}catch(e){console.warn(e),this.set_error("cannot generate function")}else this.set_error("cannot generate function body")}else this.set_error("cannot parse expression")}reset(){super.reset(),this.function_main_string=void 0,this.methods=[],this.method_index=-1,this.function=void 0,this.method_dependencies=[],this.immutable_dependencies=[]}function_body(){return this.param.options.is_expression_for_entities?`\n\t\t\tconst entities = param.expression_controller.entities;\n\t\t\tif(entities){\n\t\t\t\treturn new Promise( async (resolve, reject)=>{\n\t\t\t\t\tlet entity;\n\t\t\t\t\tconst entity_callback = param.expression_controller.entity_callback;\n\t\t\t\t\t${this._attribute_requirements_controller.assign_attributes_lines()}\n\t\t\t\t\tif( ${this._attribute_requirements_controller.attribute_presence_check_line()} ){\n\t\t\t\t\t\t${this._attribute_requirements_controller.assign_arrays_lines()}\n\t\t\t\t\t\tfor(let index=0; index < entities.length; index++){\n\t\t\t\t\t\t\tentity = entities[index];\n\t\t\t\t\t\t\tresult = ${this.function_main_string};\n\t\t\t\t\t\t\tentity_callback(entity, result);\n\t\t\t\t\t\t}\n\t\t\t\t\t\tresolve()\n\t\t\t\t\t} else {\n\t\t\t\t\t\tconst error = new Error('attribute not found')\n\t\t\t\t\t\t_set_error_from_error(error)\n\t\t\t\t\t\treject(error)\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t}\n\t\t\treturn []`:`\n\t\t\treturn new Promise( async (resolve, reject)=>{\n\t\t\t\ttry {\n\t\t\t\t\tconst value = ${this.function_main_string}\n\t\t\t\t\tresolve(value)\n\t\t\t\t} catch(e) {\n\t\t\t\t\t_set_error_from_error(e)\n\t\t\t\t\treject()\n\t\t\t\t}\n\t\t\t})\n\t\t\t`}eval_allowed(){return null!=this.function}eval_function(){if(this.function){this.clear_error();const e={Math:y.CoreMath,String:b.CoreString};return this.function(e,this.param,this.methods,this._set_error_from_error_bound)}}traverse_CallExpression(e){const t=e.arguments.map(e=>this.traverse_node(e)),n=e.callee.name;if(n){const r=d[n];if(r)return r(t);const s=`${t.join(", ")}`,o=u[n];if(o)return`${o}(${s})`;if(p[n]){const r=e.arguments[0],o=`return ${t[0]}`;let i,a=[];try{i=new Function(o),a=i()}catch(e){}return this._create_method_and_dependencies(n,a,r),`(await methods[${this.method_index}].process_arguments([${s}]))`}}this.set_error(`unknown method: ${n}`)}traverse_BinaryExpression(e){return`(${this.traverse_node(e.left)} ${e.operator} ${this.traverse_node(e.right)})`}traverse_LogicalExpression(e){return`(${this.traverse_node(e.left)} ${e.operator} ${this.traverse_node(e.right)})`}traverse_MemberExpression(e){return`${this.traverse_node(e.object)}.${this.traverse_node(e.property)}`}traverse_UnaryExpression(e){if("@"===e.operator){let t,n,r=e.argument;switch(r.type){case"Identifier":t=r.name;break;case"MemberExpression":{const e=r,s=e.object,o=e.property;t=s.name,n=o.name;break}}if(t){if(t=i.CoreAttribute.remap_name(t),"ptnum"==t)return"((entity != null) ? entity.index : 0)";{const e=this._attribute_requirements_controller.var_attribute_size(t),r=this._attribute_requirements_controller.var_array(t);if(this._attribute_requirements_controller.add(t),n){return`${r}[entity.index*${e}+${f[n]}]`}return`${r}[entity.index*${e}]`}}return console.warn("attribute not found"),""}return`${e.operator}${this.traverse_node(e.argument)}`}traverse_Literal(e){return`${e.raw}`}traverse_Identifier(e){if(e.name[0]!=m.VARIABLE_PREFIX)return e.name;{const t=e.name.substr(1),n=h[t];if(n)return n;const r=`traverse_Identifier_${t}`;if(this[r])return this[r]();this.set_error(`identifier unknown: ${e.name}`)}}traverse_Identifier_F(){return this.immutable_dependencies.push(this.param.scene.time_controller.graph_node),"param.scene.time_controller.frame"}traverse_Identifier_FPS(){return this.immutable_dependencies.push(this.param.scene.time_controller.graph_node),"param.scene.time_controller.fps"}traverse_Identifier_T(){return this.immutable_dependencies.push(this.param.scene.time_controller.graph_node),"param.scene.time_controller.time"}traverse_Identifier_CH(){return`'${this.param.name}'`}traverse_Identifier_CEX(){return this._method_centroid("x")}traverse_Identifier_CEY(){return this._method_centroid("y")}traverse_Identifier_CEZ(){return this._method_centroid("z")}_method_centroid(e){const t=[0,`'${e}'`].join(", ");return this._create_method_and_dependencies("centroid",0),`(await methods[${this.method_index}].process_arguments([${t}]))`}_create_method_and_dependencies(e,t,n){const r=new(0,p[e])(this.param);this.method_index+=1,this.methods[this.method_index]=r;const s=r.find_dependency(t);s?(n&&s.set_jsep_node(n),this.method_dependencies.push(s)):n&&a.default(t)&&this.param.scene.missing_expression_references_controller.register(this.param,n,t)}}t.FunctionGenerator=T},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.LiteralConstructsController=class{static if(e){return`(${e[0]}) ? (${e[1]}) : (${e[2]})`}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(586),s=n(588),o=n(589),i=n(590),a=n(591),_=n(592),c=n(593),l=n(594),u=n(595),d=n(596),h=n(597),p=n(598),m=n(599);t.MethodModule={bbox:r.Bbox,ch:o.Ch,centroid:s.Centroid,cop_res:a.CopRes,local:_.Local,opdigits:c.Opdigits,point:l.Point,points_count:u.PointsCount,copy:i.Copy,str_chars_count:d.StrCharsCount,str_concat:h.StrConcat,str_index:p.StrIndex,str_sub:m.StrSub}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(62),o=n(1),i=["min","max","size","center"],a=["x","y","z"];class _ extends s.BaseMethod{static required_arguments(){return[["string","path to node"],["string","vector name, min, max, size or center"],["string","component_name, x,y or z"]]}find_dependency(e){return this.create_dependency_from_index_or_path(e)}process_arguments(e){let t=0;return new Promise((n,s)=>r.__awaiter(this,void 0,void 0,(function*(){if(3==e.length){const r=e[0],o=e[1],i=e[2];let a=null;try{a=yield this.get_referenced_node_container(r)}catch(e){s(e)}a&&(t=this._get_value_from_container(a,o,i),n(t))}else n(0)})))}_get_value_from_container(e,t,n){if(i.indexOf(t)>=0){const r=e.bounding_box();let s=new o.Vector3;switch(t){case"size":r.getSize(s);break;case"center":r.getCenter(s);break;default:s=r[t]}return a.indexOf(n)>=0?s[n]:-1}return-1}}t.Bbox=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3).__importDefault(n(44)),s=n(67);class o extends s.CoreGraphNode{constructor(e,t,n){super(e.scene,"MethodDependency"),this.param=e,this.path_argument=t,this.decomposed_path=n,this._update_from_name_change_bound=this._update_from_name_change.bind(this),this.add_post_dirty_hook("_update_from_name_change",this._update_from_name_change_bound)}_update_from_name_change(e){if(e&&this.decomposed_path){const t=e;this.decomposed_path.update_from_name_change(t);const n=this.decomposed_path.to_path(),r=this.jsep_node;r&&(r.value=`${r.value}`.replace(`${this.path_argument}`,n),r.raw=r.raw.replace(`${this.path_argument}`,n)),this.param.expression_controller&&this.param.expression_controller.update_from_method_dependency_name_change()}}reset(){this.graph_disconnect_predecessors()}listen_for_name_changes(){this.jsep_node&&this.decomposed_path&&this.decomposed_path.named_nodes.forEach(e=>{if(e){const t=e;t.name_controller&&this.add_graph_input(t.name_controller.graph_node)}})}set_jsep_node(e){this.jsep_node=e}set_resolved_graph_node(e){this.resolved_graph_node=e}set_unresolved_path(e){this.unresolved_path=e}static create(e,t,n,s){const i=r.default(t),a=new o(e,t,s);if(n)a.set_resolved_graph_node(n);else if(!i){const e=t;a.set_unresolved_path(e)}return a}}t.MethodDependency=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(62);class o extends s.BaseMethod{static required_arguments(){return[["string","path to node"],["string","component_name, x,y or z"]]}find_dependency(e){return this.create_dependency_from_index_or_path(e)}process_arguments(e){return new Promise((t,n)=>r.__awaiter(this,void 0,void 0,(function*(){if(2==e.length){const r=e[0],s=e[1];let o=null;try{o=yield this.get_referenced_node_container(r)}catch(e){n(e)}if(o){const e=o.bounding_box(),n=e.min.clone().add(e.max).multiplyScalar(.5)[s];t(null!=n?n:0)}}else t(0)})))}}t.Centroid=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(62),o=n(351);class i extends s.BaseMethod{static required_arguments(){return[["string","path to param"]]}find_dependency(e){const t=new o.DecomposedPath,n=this.get_referenced_param(e,t);return n?this.create_dependency(n,e,t):(console.warn("could not find param"),null)}process_arguments(e){return r.__awaiter(this,void 0,void 0,(function*(){let t=0;if(1==e.length){const n=e[0],r=this.get_referenced_param(n);if(r){yield r.compute();const e=r.value;null!=e&&(t=e)}}return t}))}}t.Ch=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(62),s=n(101);class o extends r.BaseMethod{static required_arguments(){return[["string","path to copy"],["integer","default value"]]}static optional_arguments(){return[["string","attribute name (optional)"]]}find_dependency(e){const t=this.find_referenced_graph_node(e);if(t&&"copy"==t.type){const n=t.stamp_node;return this.create_dependency(n,e)}return null}process_arguments(e){return new Promise((t,n)=>{if(2==e.length||3==e.length){const n=e[0],r=e[1],o=e[2],i=s.CoreWalker.find_node(this.node,n);let a;i&&"copy"==i.type&&(a=i.stamp_value(o)),null==a&&(a=r),t(a)}else t(0)})}}t.Copy=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(62);class o extends s.BaseMethod{static required_arguments(){return[["string","path to node"],["string","component_name: x or y"]]}find_dependency(e){return this.create_dependency_from_index_or_path(e)}process_arguments(e){return r.__awaiter(this,void 0,void 0,(function*(){let t=0;if(2==e.length){const n=e[0],r=e[1],s=yield this.get_referenced_node_container(n);if(s){const e=s.resolution();[0,"0","x"].includes(r)?t=e[0]:[1,"1","y"].includes(r)&&(t=e[1])}}return t}))}}t.CopRes=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(62),s=n(66);class o extends r.BaseMethod{static required_arguments(){return[["string","path"]]}process_arguments(e){return new Promise((t,n)=>{this.request_asset_url(e[0]).then(e=>{t(e)})})}request_asset_url(e){return new Promise((t,n)=>{let r;const o=s.Poly.instance().desktop_controller();if(!o.active())return t("");o.add_local_path(e,this.param),r=o.local_path_server_url(e),t(r)})}}t.Local=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(62),s=n(49);class o extends r.BaseMethod{static required_arguments(){return[["string","path to node"]]}find_dependency(e){const t=this.find_referenced_graph_node(e);if(t){const n=t;if(n.name_controller){const t=n.name_controller.graph_node;return this.create_dependency(t,e)}}return null}process_arguments(e){return new Promise((t,n)=>{if(1==e.length){const n=e[0],r=this.get_referenced_node(n);if(r){const e=r.name;t(s.CoreString.tail_digits(e))}else t(0)}else t(0)})}}t.Opdigits=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(62);class o extends s.BaseMethod{static required_arguments(){return[["string","path to node"],["index","point index"],["string","attribute name"]]}find_dependency(e){return this.create_dependency_from_index_or_path(e)}process_arguments(e){return new Promise((t,n)=>r.__awaiter(this,void 0,void 0,(function*(){if(3==e.length){const r=e[0],s=e[1],o=e[2];let i=null;try{i=yield this.get_referenced_node_container(r)}catch(e){n(e)}if(i){const e=this._get_value_from_container(i,s,o);t(e)}}else t(0)})))}_get_value_from_container(e,t,n){const r=e.core_content();if(r){const e=r.points()[n];return e?e.attrib_value(t):0}return null}}t.Point=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(62);class o extends s.BaseMethod{static required_arguments(){return[["string","path to node"]]}find_dependency(e){return this.create_dependency_from_index_or_path(e)}process_arguments(e){return new Promise((t,n)=>r.__awaiter(this,void 0,void 0,(function*(){if(1==e.length){const r=e[0];let s;try{s=yield this.get_referenced_node_container(r)}catch(e){return void n(e)}if(s){const e=s.points_count();t(e)}}else t(0)})))}}t.PointsCount=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(62);class o extends s.BaseMethod{static required_arguments(){return[["string","string to count characters of"]]}process_arguments(e){return r.__awaiter(this,void 0,void 0,(function*(){let t=0;if(1==e.length){t=e[0].length}return t}))}}t.StrCharsCount=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(62);class o extends s.BaseMethod{static required_arguments(){return[]}process_arguments(e){return r.__awaiter(this,void 0,void 0,(function*(){let t="";for(let n of e)null==n&&(n=""),t+=`${n}`;return t}))}}t.StrConcat=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(62);class o extends s.BaseMethod{static required_arguments(){return[["string","string to get index from"],["string","char to find index of"]]}process_arguments(e){return r.__awaiter(this,void 0,void 0,(function*(){let t=-1;if(2==e.length){const n=e[0],r=e[1];t=n.indexOf(r)}return t}))}}t.StrIndex=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(62);class o extends s.BaseMethod{static required_arguments(){return[["string","string to get range from"],["integer","range start"],["integer","range size"]]}process_arguments(e){return r.__awaiter(this,void 0,void 0,(function*(){let t="";const n=e[0],r=e[1]||0;let s=e[2]||1;return n&&(t=n.substr(r,s)),t}))}}t.StrSub=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(){}reset(){this._attribute_names&&this._attribute_names.clear()}assign_attributes_lines(){var e;if(this._attribute_names){const t=[];return null===(e=this._attribute_names)||void 0===e||e.forEach(e=>{t.push(r.assign_attribute_line(e))}),t.join(";\n")}return""}assign_arrays_lines(){var e;if(this._attribute_names){const t=[];return null===(e=this._attribute_names)||void 0===e||e.forEach(e=>{t.push(r.assign_item_size_line(e)),t.push(r.assign_array_line(e))}),t.join(";\n")}return""}attribute_presence_check_line(){var e;if(this._attribute_names){const t=[];return null===(e=this._attribute_names)||void 0===e||e.forEach(e=>{const n=r.var_attribute(e);t.push(n)}),t.join(" && ")}return"true"}add(e){this._attribute_names=this._attribute_names||new Set,this._attribute_names.add(e)}static assign_attribute_line(e){return`const ${this.var_attribute(e)} = entities[0].geometry().attributes['${e}']`}static assign_item_size_line(e){const t=this.var_attribute(e);return`const ${this.var_attribute_size(e)} = ${t}.itemSize`}static assign_array_line(e){const t=this.var_attribute(e);return`const ${this.var_array(e)} = ${t}.array`}static var_attribute(e){return`attrib_${e}`}static var_attribute_size(e){return`attrib_size_${e}`}static var_array(e){return`array_${e}`}var_attribute_size(e){return r.var_attribute_size(e)}var_array(e){return r.var_array(e)}}t.AttributeRequirementsController=r},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(261);class s extends r.BaseTraverser{constructor(e){super(e),this.param=e}parse_tree(e){if(null==e.error_message&&e.node)try{return this.traverse_node(e.node)}catch(e){this.set_error("could not traverse tree")}else this.set_error("cannot parse tree")}traverse_CallExpression(e){const t=`${e.arguments.map(e=>this.traverse_node(e)).join(", ")}`;return`${e.callee.name}(${t})`}traverse_UnaryExpression(e){return`${e.operator}${this.traverse_node(e.argument)}`}traverse_Identifier(e){return`${e.name}`}}t.ExpressionStringGenerator=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DependenciesController=class{constructor(e){this.param=e,this.cyclic_graph_detected=!1,this.method_dependencies=[]}set_error(e){this.error_message=this.error_message||e}reset(){this.param.graph_disconnect_predecessors(),this.method_dependencies.forEach(e=>{e.reset()}),this.method_dependencies=[]}update(e){this.cyclic_graph_detected=!1,this.connect_immutable_dependencies(e),this.method_dependencies=e.method_dependencies,this.handle_method_dependencies(),this.listen_for_name_changes()}connect_immutable_dependencies(e){e.immutable_dependencies.forEach(e=>{if(0==this.cyclic_graph_detected&&0==this.param.add_graph_input(e))return this.cyclic_graph_detected=!0,this.set_error("cannot create expression, infinite graph detected"),void this.reset()})}handle_method_dependencies(){this.method_dependencies.forEach(e=>{0==this.cyclic_graph_detected&&this.handle_method_dependency(e)})}handle_method_dependency(e){const t=e.resolved_graph_node;if(t&&!this.param.add_graph_input(t))return this.cyclic_graph_detected=!0,this.set_error("cannot create expression, infinite graph detected"),void this.reset()}listen_for_name_changes(){this.method_dependencies.forEach(e=>{e.listen_for_name_changes()})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(93),s=n(24);class o extends r.TypedParam{static type(){return s.ParamType.BUTTON}get default_value_serialized(){return this.default_value}get raw_input_serialized(){return this._raw_input}get value_serialized(){return this.value}static are_raw_input_equal(e,t){return!0}static are_values_equal(e,t){return!0}press_button(){this.options.execute_callback()}}t.ButtonParam=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(156),o=r.__importDefault(n(21)),i=n(7),a=n(24),_=["r","g","b"];class c extends s.TypedMultipleParam{constructor(){super(...arguments),this._value=new i.Color}static type(){return a.ParamType.COLOR}static get component_names(){return _}get default_value_serialized(){return o.default(this.default_value)?this.default_value:this.default_value.toArray()}get value_serialized(){return this.value.toArray()}_clone_raw_input(e){if(e instanceof i.Color)return e.clone();return[e[0],e[1],e[2]]}static are_raw_input_equal(e,t){return e instanceof i.Color?t instanceof i.Color?e.equals(t):e.r==t[0]&&e.g==t[1]&&e.b==t[2]:t instanceof i.Color?e[0]==t.r&&e[1]==t.g&&e[2]==t.b:e[0]==t[0]&&e[1]==t[1]&&e[2]==t[2]}static are_values_equal(e,t){return e.equals(t)}init_components(){super.init_components(),this.r=this.components[0],this.g=this.components[1],this.b=this.components[2]}set_value_from_components(){this._value.r=this.r.value,this._value.g=this.g.value,this._value.b=this.b.value}}t.ColorParam=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(93),s=n(24);class o extends r.TypedParam{static type(){return s.ParamType.FOLDER}get default_value_serialized(){return this.default_value}get raw_input_serialized(){return this._raw_input}get value_serialized(){return this.value}static are_raw_input_equal(e,t){return!0}static are_values_equal(e,t){return!0}}t.FolderParam=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3).__importDefault(n(44)),s=n(191),o=n(24),i=n(49);class a extends s.TypedNumericParam{static type(){return o.ParamType.INTEGER}get default_value_serialized(){return this.default_value}get raw_input_serialized(){return this.raw_input}get value_serialized(){return this.value}static are_raw_input_equal(e,t){return e==t}static are_values_equal(e,t){return e==t}static convert(e){if(r.default(e))return Math.round(e);if(i.CoreString.is_number(e)){const t=parseInt(e);if(r.default(t))return t}return null}convert(e){const t=a.convert(e);return t?this.options.ensure_in_range(t):t}}t.IntegerParam=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(14);class s{constructor(e=0,t=0){this._position=e,this._value=t}to_json(){return{position:this._position,value:this._value}}get position(){return this._position}get value(){return this._value}copy(e){this._position=e.position,this._value=e.value}clone(){const e=new s;return e.copy(this),e}is_equal(e){return this._position==e.position&&this._value==e.value}is_equal_json(e){return this._position==e.position&&this._value==e.value}from_json(e){this._position=e.position,this._value=e.value}static are_equal_json(e,t){return e.position==t.position&&e.value==t.value}static from_json(e){return new s(e.position,e.value)}}var o;t.RampPoint=s,function(e){e.LINEAR="linear"}(o=t.RampInterpolation||(t.RampInterpolation={}));class i{constructor(e=o.LINEAR,t=[]){this._interpolation=e,this._points=t,this._uuid=r.MathUtils.generateUUID()}get uuid(){return this._uuid}get interpolation(){return this._interpolation}get points(){return this._points}static from_json(e){const t=[];for(let n of e.points)t.push(s.from_json(n));return new i(e.interpolation,t)}to_json(){return{interpolation:this._interpolation,points:this._points.map(e=>e.to_json())}}clone(){const e=new i;return e.copy(this),e}copy(e){this._interpolation=e.interpolation;let t=0;for(let n of e.points){const e=this._points[t];e?e.copy(n):this._points.push(n.clone()),t+=1}}is_equal(e){if(this._interpolation!=e.interpolation)return!1;const t=e.points;if(this._points.length!=t.length)return!1;let n=0;for(let e of this._points){const r=t[n];if(!e.is_equal(r))return!1;n+=1}return!0}is_equal_json(e){if(this._interpolation!=e.interpolation)return!1;if(this._points.length!=e.points.length)return!1;let t=0;for(let n of this._points){const r=e.points[t];if(!n.is_equal_json(r))return!1;t+=1}return!0}static are_json_equal(e,t){if(e.interpolation!=t.interpolation)return!1;if(e.points.length!=t.points.length)return!1;let n=0;for(let r of e.points){const e=t.points[n];if(!s.are_equal_json(r,e))return!1;n+=1}return!0}from_json(e){this._interpolation=e.interpolation;let t=0;for(let n of e.points){const e=this._points[t];e?e.from_json(n):this._points.push(s.from_json(n)),t+=1}}}t.RampValue=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(93),s=n(24);class o extends r.TypedParam{static type(){return s.ParamType.SEPARATOR}get default_value_serialized(){return this.default_value}get raw_input_serialized(){return this._raw_input}get value_serialized(){return this.value}static are_raw_input_equal(e,t){return!0}static are_values_equal(e,t){return!0}}t.SeparatorParam=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(156),o=r.__importDefault(n(21)),i=n(2),a=n(24),_=["x","y"];class c extends s.TypedMultipleParam{constructor(){super(...arguments),this._value=new i.Vector2}static type(){return a.ParamType.VECTOR2}static get component_names(){return _}get default_value_serialized(){return o.default(this.default_value)?this.default_value:this.default_value.toArray()}get value_serialized(){return this.value.toArray()}_clone_raw_input(e){if(e instanceof i.Vector2)return e.clone();return[e[0],e[1]]}static are_raw_input_equal(e,t){return e instanceof i.Vector2?t instanceof i.Vector2?e.equals(t):e.x==t[0]&&e.y==t[1]:t instanceof i.Vector2?e[0]==t.x&&e[1]==t.y:e[0]==t[0]&&e[1]==t[1]}static are_values_equal(e,t){return e.equals(t)}init_components(){super.init_components(),this.x=this.components[0],this.y=this.components[1]}set_value_from_components(){this._value.x=this.x.value,this._value.y=this.y.value}}t.Vector2Param=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(156),o=r.__importDefault(n(21)),i=n(1),a=n(24),_=["x","y","z"];class c extends s.TypedMultipleParam{constructor(){super(...arguments),this._value=new i.Vector3}static type(){return a.ParamType.VECTOR3}static get component_names(){return _}get default_value_serialized(){return o.default(this.default_value)?this.default_value:this.default_value.toArray()}get value_serialized(){return this.value.toArray()}_clone_raw_input(e){if(e instanceof i.Vector3)return e.clone();return[e[0],e[1],e[2]]}static are_raw_input_equal(e,t){return e instanceof i.Vector3?t instanceof i.Vector3?e.equals(t):e.x==t[0]&&e.y==t[1]&&e.z==t[2]:t instanceof i.Vector3?e[0]==t.x&&e[1]==t.y&&e[2]==t.z:e[0]==t[0]&&e[1]==t[1]&&e[2]==t[2]}static are_values_equal(e,t){return e.equals(t)}init_components(){super.init_components(),this.x=this.components[0],this.y=this.components[1],this.z=this.components[2]}set_value_from_components(){this._value.x=this.x.value,this._value.y=this.y.value,this._value.z=this.z.value}}t.Vector3Param=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(156),o=r.__importDefault(n(21)),i=n(20),a=n(24),_=["x","y","z","w"];class c extends s.TypedMultipleParam{constructor(){super(...arguments),this._value=new i.Vector4}static type(){return a.ParamType.VECTOR4}static get component_names(){return _}get default_value_serialized(){return o.default(this.default_value)?this.default_value:this.default_value.toArray()}get value_serialized(){return this.value.toArray()}_clone_raw_input(e){if(e instanceof i.Vector4)return e.clone();return[e[0],e[1],e[2],e[3]]}static are_raw_input_equal(e,t){return e instanceof i.Vector4?t instanceof i.Vector4?e.equals(t):e.x==t[0]&&e.y==t[1]&&e.z==t[2]&&e.w==t[3]:t instanceof i.Vector4?e[0]==t.x&&e[1]==t.y&&e[2]==t.z&&e[3]==t.w:e[0]==t[0]&&e[1]==t[1]&&e[2]==t[2]&&e[3]==t[3]}static are_values_equal(e,t){return e.equals(t)}init_components(){super.init_components(),this.x=this.components[0],this.y=this.components[1],this.z=this.components[2],this.w=this.components[3]}set_value_from_components(){this._value.x=this.x.value,this._value.y=this.y.value,this._value.z=this.z.value,this._value.w=this.w.value}}t.Vector4Param=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ParamsValueAccessor=class{constructor(){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ProcessingContext=class{constructor(e){this._frame=0}copy(e){this._frame=e.frame}get frame(){return this._frame}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(615),s=n(616),o=n(618);t.IOController=class{constructor(e){this.node=e,this._connections=new r.ConnectionsController(this.node)}get connections(){return this._connections}get inputs(){return this._inputs=this._inputs||new s.InputsController(this.node)}has_inputs(){return null!=this._inputs}get outputs(){return this._outputs=this._outputs||new o.OutputsController(this.node)}has_outputs(){return null!=this._outputs}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3).__importDefault(n(92));t.ConnectionsController=class{constructor(e){this._node=e,this._output_connections=new Map}init_inputs(){const e=this._node.io.inputs.max_inputs_count;this._input_connections=new Array(e)}add_input_connection(e){this._input_connections?this._input_connections[e.input_index]=e:console.warn("input connections array not initialized")}remove_input_connection(e){if(this._input_connections)if(e.input_index<this._input_connections.length){this._input_connections[e.input_index]=void 0;let t=!0;for(let n=e.input_index;n<this._input_connections.length;n++)this._input_connections[n]&&(t=!1);t&&(this._input_connections=this._input_connections.slice(0,e.input_index))}else console.warn(`attempt to remove an input connection at index ${e.input_index}`);else console.warn("input connections array not initialized")}input_connection(e){if(this._input_connections)return this._input_connections[e]}first_input_connection(){return r.default(this._input_connections)[0]}input_connections(){return this._input_connections}add_output_connection(e){const t=e.output_index,n=e.id;let r=this._output_connections.get(t);r||(r=new Map,this._output_connections.set(t,r)),r.set(n,e)}remove_output_connection(e){const t=e.output_index,n=e.id;let r=this._output_connections.get(t);r&&r.delete(n)}output_connections(){let e=[];return this._output_connections.forEach((t,n)=>{t.forEach((t,n)=>{t&&e.push(t)})}),e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=r.__importDefault(n(179)),o=r.__importDefault(n(45)),i=n(617),a=n(67),_=n(61),c=n(17),l=n(192);t.InputsController=class{constructor(e){this.node=e,this._graph_node_inputs=[],this._inputs=[],this._has_named_inputs=!1,this._min_inputs_count=0,this._max_inputs_count=0,this._depends_on_inputs=!0,this._override_clonable_state=!1}set_depends_on_inputs(e){this._depends_on_inputs=e}set_min_inputs_count(e){this._min_inputs_count=e}set_max_inputs_count(e){this._max_inputs_count=e,this.init_graph_node_inputs()}named_input_connection_points_by_name(e){if(this._named_input_connection_points)for(let t of this._named_input_connection_points)if(t.name==e)return t}set_named_input_connection_points(e){this._has_named_inputs=!0,this._named_input_connection_points=e,this.set_min_inputs_count(0),this.set_max_inputs_count(e.length),this.init_graph_node_inputs(),this.node.emit(_.NodeEvent.NAMED_INPUTS_UPDATED)}get has_named_inputs(){return this._has_named_inputs}get named_input_connection_points(){return this._named_input_connection_points||[]}init_graph_node_inputs(){for(let e=0;e<this._max_inputs_count;e++)this._graph_node_inputs[e]=this._graph_node_inputs[e]||this._create_graph_node_input(e)}_create_graph_node_input(e){const t=new a.CoreGraphNode(this.node.scene,`input_${e}`);return this.node.add_graph_input(t),t}get max_inputs_count(){return this._max_inputs_count||0}input_graph_node(e){return this._graph_node_inputs[e]}set_count(e,t){null==t&&(t=e),this.set_min_inputs_count(e),this.set_max_inputs_count(t),this.init_inputs_clonable_state(),this.init_connections_controller_inputs()}init_connections_controller_inputs(){this.node.io.connections.init_inputs()}eval_required_inputs_p(){return r.__awaiter(this,void 0,void 0,(function*(){let e=[];if(this._max_inputs_count>0){const t=[];if(this.inputs().forEach((e,n)=>{e&&t.push(n)}),t.length<this._min_inputs_count)this.node.states.error.set("inputs are missing");else if(t.length>0){const n=t.map(e=>this.node.io.inputs.eval_required_input(e));e=yield Promise.all(n)}}return e}))}eval_required_input(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=yield this.node.container_controller.request_input_container(e);if(t&&t.core_content());else{const t=this.input(e);if(t){const n=t.states.error.message;n&&this.node.states.error.set(`input ${e} is invalid (error: ${n})`)}}return t}))}get_named_input_index(e){if(this._named_input_connection_points)for(let t=0;t<this._named_input_connection_points.length;t++)if(this._named_input_connection_points[t].name==e)return t;return-1}get_input_index(e){if(o.default(e)){if(this.has_named_inputs)return this.get_named_input_index(e);throw new Error(`node ${this.node.full_path()} has no named inputs`)}return e}set_input(e,t,n=0){const r=this.get_input_index(e)||0;if(r<0){const t=`invalid input (${e}) for node ${this.node.full_path()}`;throw console.warn(t),new Error(t)}let s=0;if(t&&t.io.outputs.has_named_outputs&&(s=t.io.outputs.get_output_index(n),null==s||s<0))return void console.warn(`node ${t.full_path()} does not have an output named ${n}`);const o=this._graph_node_inputs[r];if(null==o){const e=`graph_input_node not found at index ${r}`;throw console.warn(e),new Error(e)}if(t&&this.node.parent!=t.parent)return;const a=this._inputs[r];let c=null,l=void 0;this.node.io.connections&&(l=this.node.io.connections.input_connection(r)),l&&(c=l.output_index),t===a&&s==c||(null!=a&&this._depends_on_inputs&&o.remove_graph_input(a),null!=t?o.add_graph_input(t)?(this._depends_on_inputs||o.remove_graph_input(t),l&&l.disconnect({set_input:!1}),this._inputs[r]=t,new i.NodeConnection(t,this.node,s,r)):console.warn(`cannot connect ${t.full_path()} to ${this.node.full_path()}`):(this._inputs[r]=null,l&&l.disconnect({set_input:!1})),this._run_on_set_input_hooks(),o.set_successors_dirty(),this.node.emit(_.NodeEvent.INPUTS_UPDATED))}remove_input(e){s.default(this.inputs(),(t,n)=>{null!=t&&null!=e&&t.graph_node_id===e.graph_node_id&&this.set_input(n,null)})}input(e){return this._inputs[e]}named_input(e){if(this.has_named_inputs){const t=this.get_input_index(e);return this._inputs[t]}return null}named_input_connection_point(e){if(this.has_named_inputs&&this._named_input_connection_points){const t=this.get_input_index(e);return this._named_input_connection_points[t]}}has_named_input(e){return this.get_named_input_index(e)>=0}has_input(e){return null!=this._inputs[e]}inputs(){return this._inputs}override_clonable_state_allowed(){let e=!1;for(let t of this.inputs_clonable_state())t==c.InputCloneMode.FROM_NODE&&(e=!0);return e}inputs_clonable_state(){return this._inputs_clonable_states=this._inputs_clonable_states||this.init_inputs_clonable_state()}input_cloned(e){return this.input_clonable_state_with_override(e)}inputs_clonable_state_with_override(){const e=[],t=this.inputs_clonable_state();for(let n=0;n<t.length;n++)e.push(this.input_clonable_state_with_override(n));return e}input_clonable_state_with_override(e){const t=this.inputs_clonable_state()[e];switch(t){case c.InputCloneMode.ALWAYS:return!0;case c.InputCloneMode.NEVER:return!1;case c.InputCloneMode.FROM_NODE:return!this._override_clonable_state}return l.TypeAssert.unreachable(t)}init_inputs_clonable_state(e=null){return e&&(this._user_inputs_clonable_states=e),this._inputs_clonable_states=this._user_inputs_clonable_states||this._default_inputs_clonale_state_values(),this._inputs_clonable_states}_default_inputs_clonale_state_values(){const e=[];for(let t=0;t<this._max_inputs_count;t++)e.push(c.InputCloneMode.ALWAYS);return e}set_override_clonable_state(e){this._override_clonable_state=e,this.node.emit(_.NodeEvent.OVERRIDE_CLONABLE_STATE_UPDATE)}override_clonable_state(){return this._override_clonable_state}add_on_set_input_hook(e,t){this._on_update_hooks=this._on_update_hooks||[],this._on_update_hook_names=this._on_update_hook_names||[],this._on_update_hook_names.includes(e)?console.warn(`hook with name ${e} already exists`,this.node):(this._on_update_hooks.push(t),this._on_update_hook_names.push(e))}_run_on_set_input_hooks(){if(this._on_update_hooks)for(let e of this._on_update_hooks)e()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});class r{constructor(e,t,n=0,s=0){this._node_src=e,this._node_dest=t,this._output_index=n,this._input_index=s,this._id=r._next_id++,this._node_src.io.connections&&this._node_dest.io.connections&&(this._node_src.io.connections.add_output_connection(this),this._node_dest.io.connections.add_input_connection(this))}get id(){return this._id}get node_src(){return this._node_src}get node_dest(){return this._node_dest}get output_index(){return this._output_index}get input_index(){return this._input_index}disconnect(e={}){this._node_src.io.connections&&this._node_dest.io.connections&&(this._node_src.io.connections.remove_output_connection(this),this._node_dest.io.connections.remove_input_connection(this)),!0===e.set_input&&this._node_dest.io.inputs.set_input(this._input_index,null)}}t.NodeConnection=r,r._next_id=0},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=r.__importDefault(n(44)),o=r.__importDefault(n(91)),i=r.__importDefault(n(45)),a=n(61);t.OutputsController=class{constructor(e){this.node=e,this._has_outputs=!1,this._has_named_outputs=!1}set_has_one_output(){this._has_outputs=!0}set_has_no_output(){this._has_outputs=!1}get has_outputs(){return this._has_outputs}get has_named_outputs(){return this._has_named_outputs}has_named_output(e){return this.get_named_output_index(e)>=0}get named_output_connection_points(){return this._named_output_connection_points||[]}named_output_connection(e){if(this._named_output_connection_points)return this._named_output_connection_points[e]}get_named_output_index(e){if(this._named_output_connection_points)for(let t=0;t<this._named_output_connection_points.length;t++)if(this._named_output_connection_points[t].name==e)return t;return-1}get_output_index(e){return null!=e?i.default(e)?this.has_named_outputs?this.get_named_output_index(e):(console.warn(`node ${this.node.full_path()} has no named outputs`),-1):e:-1}named_output_connection_points_by_name(e){if(this._named_output_connection_points)for(let t of this._named_output_connection_points)if(t.name==e)return t}set_named_output_connection_points(e,t=!0){this._has_named_outputs=!0,this._named_output_connection_points=e,t&&this.node.scene&&this.node.set_dirty(this.node),this.node.emit(a.NodeEvent.NAMED_OUTPUTS_UPDATED)}used_output_names(){if(this.node.io.connections){const e=o.default(this.node.io.connections.output_connections().map(e=>e?e.output_index:null)),t=[];return e.forEach(e=>{s.default(e)&&t.push(e)}),t.map(e=>this.named_output_connection_points[e].name)}return[]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ParamsAccessor=class{constructor(){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(115);class s extends r.TypedContainer{set_content(e){super.set_content(e)}}t.EventContainer=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BaseEventsController=class{constructor(){this._nodes_by_graph_node_id=new Map}register_node(e){this._nodes_by_graph_node_id.set(e.graph_node_id,e)}unregister_node(e){this._nodes_by_graph_node_id.delete(e.graph_node_id)}process(e,t,n){this._nodes_by_graph_node_id.forEach(r=>r.process_event(e,t,n))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.LifeCycleController=class{constructor(e){this.scene=e,this._lifecycle_on_create_allowed=!0}on_create_hook_allowed(){return this.scene.loading_controller.loaded&&this._lifecycle_on_create_allowed}on_create_prevent(e){this._lifecycle_on_create_allowed=!1,e(),this._lifecycle_on_create_allowed=!0}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3);t.LoadingController=class{constructor(e){this.scene=e,this._loading_state=!0,this._auto_updating=!0,this._first_object_loaded=!1}mark_as_loading(){this._set_loading_state(!0)}mark_as_loaded(){return r.__awaiter(this,void 0,void 0,(function*(){yield this._set_loading_state(!1)}))}_set_loading_state(e){return r.__awaiter(this,void 0,void 0,(function*(){this._loading_state=e,yield this.set_auto_update(!this._loading_state)}))}get is_loading(){return this._loading_state}get loaded(){return!this._loading_state}get auto_updating(){return this._auto_updating}set_auto_update(e){return r.__awaiter(this,void 0,void 0,(function*(){if(this._auto_updating!==e&&(this._auto_updating=e,this._auto_updating)){const e=this.scene.root;e&&(yield e.process_queue())}}))}on_first_object_loaded(){var e;if(!this._first_object_loaded){this._first_object_loaded=!0;const t=document.getElementById("scene_loading_container");t&&(null===(e=t.parentElement)||void 0===e||e.removeChild(t))}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ExpressionsController=class{constructor(){this._params_by_id=new Map}register_param(e){this._params_by_id.set(e.graph_node_id,e)}deregister_param(e){this._params_by_id.delete(e.graph_node_id)}regenerate_referring_expressions(e){e.name_controller.graph_node.set_successors_dirty(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(626),s=n(129);t.MissingReferencesController=class{constructor(){this.references=new Map}register(e,t,n){const o=new r.MissingExpressionReference(e,n);return s.MapUtils.push_on_array_at_entry(this.references,e.graph_node_id,o),o}deregister_param(e){this.references.delete(e.graph_node_id)}check_for_missing_references(e){this._check_for_missing_references_for_node(e);for(let t of e.params.all)this._check_for_missing_references_for_param(t)}_check_for_missing_references_for_node(e){const t=e.graph_node_id;this.references.forEach((n,r)=>{let s=!1;for(let t of n)t.matches_path(e.full_path())&&(s=!0,t.resolve_missing_dependencies());s&&this.references.delete(t)})}_check_for_missing_references_for_param(e){const t=e.graph_node_id;this.references.forEach((n,r)=>{let s=!1;for(let t of n)t.matches_path(e.full_path())&&(s=!0,t.resolve_missing_dependencies());s&&this.references.delete(t)})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(101);t.MissingExpressionReference=class{constructor(e,t){this.param=e,this.path=t}matches_path(e){return r.CoreWalker.make_absolute_path(this.param.node,this.path)==e}update_from_method_dependency_name_change(){var e;null===(e=this.param.expression_controller)||void 0===e||e.update_from_method_dependency_name_change()}resolve_missing_dependencies(){const e=this.param.raw_input_serialized;this.param.set(this.param.default_value),this.param.set(e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=r.__importDefault(n(356)),o=r.__importDefault(n(82)),i=r.__importDefault(n(92)),a=n(628),_=n(49);t.NodesController=class{constructor(e){this.scene=e,this._node_context_signatures={},this._instanciated_nodes_by_context_and_type={}}init(){this._root=new a.ObjectsManagerNode(this.scene),this._root.initialize_base_and_node(),this._root.init_default_scene()}get root(){return this._root}objects_from_mask(e){const t=e.split(" ");let n=this.root.children();n=n.filter(e=>_.CoreString.matches_one_mask(e.name,t));const r=n.map(e=>e.object);return i.default(r)}clear(){var e;const t=this.root.children();for(let n of t)null===(e=this.root.children_controller)||void 0===e||e.remove_node(n)}node(e){return"/"===e?this.root:this.root.node(e)}all_nodes(){let e=[this.root],t=[this.root],n=0;for(;t.length>0&&n<10;){const r=o.default(t.map(e=>e.children_allowed()?e.children():[]));e=s.default(e,r),t=r,n+=1}return o.default(e)}reset_node_context_signatures(){this._node_context_signatures={}}register_node_context_signature(e){e.children_allowed()&&e.children_controller&&(this._node_context_signatures[e.children_controller.node_context_signature()]=!0)}node_context_signatures(){return Object.keys(this._node_context_signatures).sort().map(e=>e.toLowerCase())}add_to_instanciated_node(e){const t=e.node_context(),n=e.type;this._instanciated_nodes_by_context_and_type[t]=this._instanciated_nodes_by_context_and_type[t]||{},this._instanciated_nodes_by_context_and_type[t][n]=this._instanciated_nodes_by_context_and_type[t][n]||{},this._instanciated_nodes_by_context_and_type[t][n][e.graph_node_id]=e}remove_from_instanciated_node(e){const t=e.node_context(),n=e.type;delete this._instanciated_nodes_by_context_and_type[t][n][e.graph_node_id]}instanciated_nodes(e,t){const n=[];if(this._instanciated_nodes_by_context_and_type[e]){const r=this._instanciated_nodes_by_context_and_type[e][t];if(r)for(let e of Object.keys(r))n.push(r[e])}return n}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(40),o=n(629),i=n(66),a=n(27),_=n(5);class c extends _.NodeParamsConfig{}const l=new c;class u extends o.TypedBaseManagerNode{constructor(){super(...arguments),this.params_config=l,this._object=new s.Group,this._queued_nodes_by_id={},this._queued_nodes_by_path={},this._expected_geo_nodes={},this._process_queue_start=-1,this._children_controller_context=a.NodeContext.OBJ}static type(){return"obj"}initialize_node(){var e;null===(e=this.children_controller)||void 0===e||e.init(),this.lifecycle.add_on_child_add_hook(this._on_child_add.bind(this)),this.lifecycle.add_on_child_remove_hook(this._on_child_remove.bind(this))}init_default_scene(){this._object.name="_WORLD_",this._scene.default_scene.add(this._object)}object(){return this._object}create_node(e){return super.create_node(e)}children(){return super.children()}nodes_by_type(e){return super.nodes_by_type(e)}multiple_display_flags_allowed(){return!0}add_to_queue(e){const t=e.graph_node_id;if(null==this._queued_nodes_by_id[t])return this._queued_nodes_by_id[t]=e}process_queue(){return r.__awaiter(this,void 0,void 0,(function*(){this._queued_nodes_by_path={};const e=Object.keys(this._queued_nodes_by_id);for(let t of e){const e=this._queued_nodes_by_id[t];delete this._queued_nodes_by_id[t];const n=`_____${e.render_order}__${e.full_path()}`;this._queued_nodes_by_path[n]=e}const t=Object.keys(this._queued_nodes_by_path).sort().map(e=>{const t=this._queued_nodes_by_path[e];return this.update_object(t)});this._expected_geo_nodes=this._expected_geo_nodes||(yield this.expected_loading_geo_nodes_by_id()),this._process_queue_start=performance.now(),Promise.all(t).then(()=>{i.Poly.instance().log(`SCENE LOADED '${this.scene.name}' in ${performance.now()-this._process_queue_start}`)})}))}update_object(e){this.scene.loading_controller.auto_updating?this.add_to_scene(e):this.add_to_queue(e)}get_parent_for_node(e){if(e.attachable_to_hierarchy){const t=e.io.inputs.input(0);return t?t.children_group:this._object}return null}add_to_scene(e){if(e.attachable_to_hierarchy){const t=this.get_parent_for_node(e);t&&(e.used_in_scene?e.add_object_to_parent(t):e.remove_object_from_parent())}}remove_from_scene(e){e.remove_object_from_parent()}are_children_cooking(){const e=this.children();for(let t of e)if(t.is_display_node_cooking())return!0;return!1}expected_loading_geo_nodes_by_id(){return r.__awaiter(this,void 0,void 0,(function*(){const e=this.nodes_by_type("geo"),t={};for(let n of e){(yield n.is_displayed())&&(t[n.graph_node_id]=n)}return t}))}add_to_parent_transform(e){this.update_object(e)}remove_from_parent_transform(e){this.update_object(e)}_on_child_add(e){e&&this.update_object(e)}_on_child_remove(e){e&&this.remove_from_scene(e)}}t.ObjectsManagerNode=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(90),s=n(27),o=n(113),i=n(630);class a extends r.TypedNode{constructor(){super(...arguments),this.container_controller=new o.TypedContainerController(this,i.ManagerContainer)}static node_context(){return s.NodeContext.MANAGER}node_sibbling(e){return super.node_sibbling(e)}}t.TypedBaseManagerNode=a;t.BaseManagerNodeClass=class extends a{}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(115);class s extends r.TypedContainer{set_content(e){super.set_content(e)}}t.ManagerContainer=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=r.__importDefault(n(91)),o=r.__importDefault(n(168)),i=r.__importDefault(n(102)),a=n(632);t.CorePerformance=class{constructor(){this._started=!1,this._start_time=0,this._previous_timestamp=0,this._nodes_cook_data={},this._durations_by_name={},this._durations_count_by_name={}}profile(e,t){const n=performance.now();t();const r=performance.now()-n;console.log(`${e}: ${r}`)}start(){this._started||(this.reset(),this._started=!0,this._start_time=performance.now(),this._nodes_cook_data={},this._previous_timestamp=this._start_time)}stop(){this.reset()}reset(){this._started=!1,this._start_time=null,this._durations_by_name={},this._durations_count_by_name={},this._nodes_cook_data={}}get started(){return this._started}record_node_cook_data(e){const t=e.graph_node_id;null==this._nodes_cook_data[t]&&(this._nodes_cook_data[t]=new a.PerformanceNode(e)),this._nodes_cook_data[t].update_cook_data()}record(e){this.started||this.start();const t=performance.now();return null==this._durations_by_name[e]&&(this._durations_by_name[e]=0),this._durations_by_name[e]+=t-this._previous_timestamp,null==this._durations_count_by_name[e]&&(this._durations_count_by_name[e]=0),this._durations_count_by_name[e]+=1,this._previous_timestamp=t}print(){this.print_node_cook_data(),this.print_recordings()}print_node_cook_data(){let e=Object.values(this._nodes_cook_data);e=i.default(e,e=>-e.cook_time_total);const t=e.map(e=>e.print_object());console.log("--------------- NODES COOK TIME -----------");const n=[],r=i.default(t,e=>-e.cook_time_total);for(let e of r)n.push(e);return console.table(n),t}print_recordings(){const e=o.default(this._durations_by_name),t=o.default(this._durations_count_by_name),n=[],r={};for(let t of Object.keys(e)){const s=e[t];n.push(s),null==r[s]&&(r[s]=[]),r[s].push(t)}n.sort((e,t)=>e-t);const i=s.default(n);console.log("--------------- PERF RECORDINGS -----------");const a=[];for(let e of i){const n=r[e];for(let r of n){const n=t[r],s={duration:e,name:r,count:n,duration_per_iteration:e/n};a.push(s)}}return console.table(a),a}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.PerformanceNode=class{constructor(e){this._node=e,this._cooks_count=0,this._cook_time_total=0,this._cook_time_total_with_inputs=0,this._cook_time_total_params=0}update_cook_data(){this._cooks_count+=1,this._cook_time_total+=this._node.cook_controller.cook_time,this._cook_time_total_with_inputs+=this._node.cook_controller.cook_time_with_inputs,this._cook_time_total_params+=this._node.cook_controller.cook_time_params}get cook_time_total(){return this._cook_time_total}get cook_time_per_iteration(){return this._cooks_count>0?this._cook_time_total/this._cooks_count:0}get cook_time_total_with_inputs(){return this._cook_time_total_with_inputs}get cook_time_total_with_inputs_per_iteration(){return this._cooks_count>0?this._cook_time_total_with_inputs/this._cooks_count:0}get cook_time_total_params(){return this._cook_time_total_params}get cook_time_total_params_per_iteration(){return this._cooks_count>0?this._cook_time_total_params/this._cooks_count:0}get cooks_count(){return this._cooks_count}print_object(){return{full_path:this._node.full_path(),cooks_count:this.cooks_count,cook_time_total:this.cook_time_total,cook_time_per_iteration:this.cook_time_per_iteration,cook_time_total_with_inputs:this.cook_time_total_with_inputs,cook_time_total_with_inputs_per_iteration:this.cook_time_total_with_inputs_per_iteration,cook_time_total_params:this.cook_time_total_params,cook_time_total_params_per_iteration:this.cook_time_total_params_per_iteration}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(67),s=n(634);t.TimeController=class{constructor(e){this.scene=e,this.self=this,this._frame=1,this._time=0,this._prev_performance_now=0,this._frame_range=[1,600],this._frame_range_locked=[!0,!0],this._playing=!1,this._graph_node=new r.CoreGraphNode(e,"time controller")}get graph_node(){return this._graph_node}get frame(){return this._frame}get time(){return this._time}get frame_range(){return this._frame_range}get frame_range_locked(){return this._frame_range_locked}set_frame_range(e,t){this._frame_range[0]=Math.floor(e),this._frame_range[1]=Math.floor(t),this.scene.dispatch_controller.dispatch(this._graph_node,s.SceneEvent.FRAME_RANGE_UPDATED)}set_frame_range_locked(e,t){this._frame_range_locked[0]=e,this._frame_range_locked[1]=t,this.scene.dispatch_controller.dispatch(this._graph_node,s.SceneEvent.FRAME_RANGE_UPDATED)}set_time(e,t=!0){if(e!=this._time){if(this._time=e,t){const e=Math.floor(60*this._time);this._frame=e}this.scene.dispatch_controller.dispatch(this._graph_node,s.SceneEvent.FRAME_UPDATED),this.scene.uniforms_controller.update_time_dependent_uniform_owners(),this.scene.cooker.block(),this.graph_node.set_successors_dirty(),this.scene.cooker.unblock()}}set_frame(e,t=!0){e!=this._frame&&(e=this._ensure_frame_within_bounds(e))!=this._frame&&(this._frame=e,t&&this.set_time(this._frame/60,!1))}increment_time_if_playing(){this._playing&&(this.scene.root.are_children_cooking()||this.increment_time())}increment_time(){const e=performance.now(),t=(e-this._prev_performance_now)/1e3,n=this._time+t;this._prev_performance_now=e,this.set_time(n)}_ensure_frame_within_bounds(e){return this._frame_range_locked[0]&&e<this._frame_range[0]?this._frame_range[1]:this._frame_range_locked[1]&&e>this._frame_range[1]?this._frame_range[0]:e}get playing(){return!0===this._playing}pause(){1==this._playing&&(this._playing=!1,this.scene.dispatch_controller.dispatch(this._graph_node,s.SceneEvent.PLAY_STATE_UPDATED))}play(){!0!==this._playing&&(this._playing=!0,this._prev_performance_now=performance.now(),this.scene.dispatch_controller.dispatch(this._graph_node,s.SceneEvent.PLAY_STATE_UPDATED))}toggle_play_pause(){this.playing?this.pause():this.play()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.FRAME_RANGE_UPDATED="scene_frame_range_updated",e.FRAME_UPDATED="scene_frame_updated",e.PLAY_STATE_UPDATED="scene_play_state_updated"}(t.SceneEvent||(t.SceneEvent={}))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(347);t.PolySceneSerializer=class{constructor(e){this.scene=e}to_json(e=!1){const t={},n={};for(let s of this.scene.nodes_controller.all_nodes()){const o=new r.NodeSerializer(s);t[s.graph_node_id]=o.to_json(e);const i=s.params.all;for(let e of i)n[e.graph_node_id]=e.to_json()}return{nodes_by_graph_node_id:t,params_by_graph_node_id:n}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(2);t.UniformsController=class{constructor(e){this.scene=e,this._time_dependent_uniform_owners={},this._time_dependent_uniform_owners_ids=null,this._resolution=new r.Vector2(1,1),this._resolution_dependent_uniform_owners={},this._resolution_dependent_uniform_owners_ids=[]}add_time_dependent_uniform_owner(e,t){this._time_dependent_uniform_owners[e]=t,this._update_time_dependent_uniform_owners_ids()}remove_time_dependent_uniform_owner(e){delete this._time_dependent_uniform_owners[e],this._update_time_dependent_uniform_owners_ids()}_update_time_dependent_uniform_owners_ids(){this._time_dependent_uniform_owners_ids=Object.keys(this._time_dependent_uniform_owners)}update_time_dependent_uniform_owners(){const e=this.scene.time;if(this._time_dependent_uniform_owners_ids)for(let t of this._time_dependent_uniform_owners_ids){this._time_dependent_uniform_owners[t].time.value=e}}add_resolution_dependent_uniform_owner(e,t){this._resolution_dependent_uniform_owners[e]=t,this._update_resolution_dependent_uniform_owners_ids(),this._resolution&&this.update_resolution_dependent_uniforms(t)}remove_resolution_dependent_uniform_owner(e){delete this._resolution_dependent_uniform_owners[e],this._update_resolution_dependent_uniform_owners_ids()}_update_resolution_dependent_uniform_owners_ids(){this._resolution_dependent_uniform_owners_ids=Object.keys(this._resolution_dependent_uniform_owners)}update_resolution_dependent_uniform_owners(e){this._resolution.copy(e);for(let e of this._resolution_dependent_uniform_owners_ids){const t=this._resolution_dependent_uniform_owners[e];this.update_resolution_dependent_uniforms(t)}}update_resolution_dependent_uniforms(e){e.resolution.value.x=this._resolution.x*window.devicePixelRatio,e.resolution.value.y=this._resolution.y*window.devicePixelRatio}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(66);t.WebGLController=class{constructor(){this._require_webgl2=!1}require_webgl2(){return this._require_webgl2}set_require_webgl2(){this._require_webgl2||(this._require_webgl2=!0,r.Poly.instance().renderers_controller.set_require_webgl2())}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=r.__importDefault(n(45)),o=r.__importDefault(n(260)),i=r.__importDefault(n(60)),a=r.__importDefault(n(44)),_=r.__importDefault(n(21)),c=n(2),l=n(357);t.NodeJsonImporter=class{constructor(e){this._node=e}process_data(e){if(this.create_nodes(e.nodes),this.set_selection(e.selection),this._node.io.inputs.override_clonable_state_allowed()){const t=e.override_clonable_state;t&&this._node.io.inputs.set_override_clonable_state(t)}this.set_flags(e),this.set_params(e.params),this.from_data_custom(e),this._node.lifecycle.set_creation_completed()}process_inputs_data(e){this.set_inputs(e.inputs)}process_ui_data(e){if(!e)return;const t=this._node.ui_data,n=e.pos;if(n){const e=(new c.Vector2).fromArray(n);t.set_position(e)}const r=e.comment;r&&t.set_comment(r),this.process_nodes_ui_data(e.nodes)}create_nodes(e){if(!e)return;const t=Object.keys(e),n=[];for(let r of t){const t=e[r].type;if(this._node.children_allowed()&&this._node.children_controller){const e=this._node.create_node(t);e&&(e.set_name(r),n.push(e))}}const r=[];let s=0;for(let t of n){const n=l.JsonImportDispatcher.dispatch_node(t);r.push(n),n.process_data(e[t.name]),s++}s=0;for(let t of n){r[s].process_inputs_data(e[t.name]),s++}}set_selection(e){if(this._node.children_allowed()&&this._node.children_controller&&e&&e.length>0){const t=[];e.forEach(e=>{const n=this._node.node(e);n&&t.push(n)}),this._node.children_controller.selection.set(t)}}set_flags(e){var t,n,r,s;const o=e.flags;if(o){const e=o.bypass;null!=e&&(null===(n=null===(t=this._node.flags)||void 0===t?void 0:t.bypass)||void 0===n||n.set(e));const i=o.display;null!=i&&(null===(s=null===(r=this._node.flags)||void 0===r?void 0:r.display)||void 0===s||s.set(i))}}set_inputs(e){e&&e.forEach((e,t)=>{if(e&&this._node.parent)if(s.default(e)){const n=e,r=this._node.parent.node(n);this._node.set_input(t,r)}else{const t=this._node.parent.node(e.node),n=e.name;this._node.io.inputs.has_named_input(n)?this._node.set_input(e.name,t,e.output):console.warn(`${this._node.full_path()} has no input named ${n}`)}})}process_nodes_ui_data(e){if(!e)return;Object.keys(e).forEach(t=>{const n=this._node.node(t);if(n){const r=e[t];l.JsonImportDispatcher.dispatch_node(n).process_ui_data(r)}})}set_params(e){if(!e)return;const t=Object.keys(e),n={};for(let r of t){const t=e[r],s=t.options,o=t.type;let i,a=!1;this._node.params.has_param(r)&&(i=this._node.params.get(r),(i&&i.type==o||null==o)&&(a=!0)),a?this._is_param_data_complex(t)?this._process_param_data_complex(r,t):this._process_param_data_simple(r,t):(n.names_to_delete=n.names_to_delete||[],n.names_to_delete.push(r),n.to_add=n.to_add||[],n.to_add.push({name:r,type:o,init_value:t.default_value,options:s}))}const r=n.names_to_delete&&n.names_to_delete.length>0,s=n.to_add&&n.to_add.length>0;if(r||s){this._node.params.update_params(n);for(let t of this._node.params.spare){const n=e[t.name];!t.parent_param&&n&&(this._is_param_data_complex(n)?this._process_param_data_complex(t.name,n):this._process_param_data_simple(t.name,n))}}this._node.params.run_on_scene_load_hooks()}_process_param_data_simple(e,t){var n;null===(n=this._node.params.get(e))||void 0===n||n.set(t)}_process_param_data_complex(e,t){const n=this._node.params.get(e);n&&l.JsonImportDispatcher.dispatch_param(n).process_data(t)}_is_param_data_complex(e){return!(s.default(e)||a.default(e)||_.default(e)||o.default(e))&&!(!i.default(e)||!Object.keys(e).includes("type"))}from_data_custom(e){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(193);class s extends r.ParamJsonImporter{add_main(e){}}t.ParamMultipleJsonImporter=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(193),s=/\\n+/g;class o extends r.ParamJsonImporter{add_main(e){let t=e.raw_input;void 0!==t&&(t=t.replace(s,"\n"),this._param.set(t))}}t.ParamStringJsonImporter=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(193);class s extends r.ParamJsonImporter{add_main(e){const t=e.raw_input;t&&this._param.set(t)}}t.ParamRampJsonImporter=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(643),s=n(678),o=n(684),i=n(768),a=n(792),_=n(829),c=n(66);t.AllRegister=class{static run(){r.CopRegister.run(c.Poly.instance()),s.EventRegister.run(c.Poly.instance()),o.GlRegister.run(c.Poly.instance()),i.MatRegister.run(c.Poly.instance()),a.ObjRegister.run(c.Poly.instance()),_.SopRegister.run(c.Poly.instance())}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(130),s=n(644),o=n(671),i=n(135),a=n(676),_=n(677);t.CopRegister=class{static run(e){e.register_node(s.BuilderCopNode,r.CATEGORY_COP.ADVANCED),e.register_node(o.EnvMapCopNode,r.CATEGORY_COP.INPUT),e.register_node(i.FileCopNode,r.CATEGORY_COP.INPUT),e.register_node(a.NullCopNode,r.CATEGORY_COP.MISC),e.register_node(_.SwitchCopNode,r.CATEGORY_COP.MISC)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(409),o=n(75),i=n(26),a=n(55),_=n(0),c=n(54),l=n(0),u=n(22),d=n(0),h=n(0),p=n(70),m=n(0),f=n(77),g=n(131),v=n(132),y=n(662),b=n(5),x=n(133),T=n(269),w=n(27),C=n(670);class P extends b.NodeParamsConfig{constructor(){super(...arguments),this.resolution=b.ParamConfig.VECTOR2([256,256])}}const E=new P;class O extends g.TypedCopNode{constructor(){super(...arguments),this.params_config=E,this._assembler_controller=this._create_assembler_controller(),this._texture_mesh=new u.Mesh(new c.PlaneBufferGeometry(2,2)),this._texture_material=new i.ShaderMaterial({uniforms:{},vertexShader:"\nvoid main()\t{\n\tgl_Position = vec4( position, 1.0 );\n}\n",fragmentShader:""}),this._texture_scene=new a.Scene,this._texture_camera=new f.Camera,this._children_controller_context=w.NodeContext.GL}static type(){return"builder"}_create_assembler_controller(){const e=new x.GlobalsGeometryHandler,t=new v.GlAssemblerController(this,y.ShaderAssemblerTexture);return t.set_assembler_globals_handler(e),t}get assembler_controller(){return this._assembler_controller}initialize_node(){var e;this.lifecycle.add_on_create_hook(this.assembler_controller.on_create.bind(this.assembler_controller)),null===(e=this.children_controller)||void 0===e||e.init(),this._texture_mesh.material=this._texture_material,this._texture_scene.add(this._texture_mesh),this._texture_camera.position.z=1,this.dirty_controller.add_post_dirty_hook("_reset_if_resolution_changed",this._reset_if_resolution_changed.bind(this)),this.params.set_post_create_params_hook(()=>{this._render_target=this._create_render_target(),this._renderer=this._create_renderer(this._render_target)})}create_node(e){return super.create_node(e)}children(){return super.children()}nodes_by_type(e){return super.nodes_by_type(e)}_reset_if_resolution_changed(e){e&&e.graph_node_id==this.p.resolution.graph_node_id&&this._reset()}_reset(){this._render_target=this._create_render_target(),this._renderer=this._create_renderer(this._render_target),this._pixelBuffer=this._create_pixel_buffer()}_create_pixel_buffer(){const e=this.pv.resolution.x,t=this.pv.resolution.y;return new Float32Array(e*t*4)}cook(){return r.__awaiter(this,void 0,void 0,(function*(){yield this.compile_if_required(),this.render_on_target()}))}shaders_by_name(){return{fragment:this._fragment_shader}}compile_if_required(){return r.__awaiter(this,void 0,void 0,(function*(){this.assembler_controller.compile_required()&&(yield this.run_assembler(),this.assembler_controller.post_compile())}))}run_assembler(){return r.__awaiter(this,void 0,void 0,(function*(){const e=T.GlNodeFinder.find_output_nodes(this);if(e.length>1)return void this.states.error.set("only one output node allowed");const t=e[0];if(t){this.assembler_controller.assembler.set_root_nodes([t]),yield this.assembler_controller.assembler.update_fragment_shader();const e=this.assembler_controller.assembler.fragment_shader(),n=this.assembler_controller.assembler.uniforms();e&&n&&(this._fragment_shader=e,this._uniforms=n),this.assembler_controller.assembler.uniforms_time_dependent()?this.states.time_dependent.force_time_dependent():this.states.time_dependent.unforce_time_dependent()}this._fragment_shader&&this._uniforms&&(this._texture_material.fragmentShader=this._fragment_shader,this._texture_material.uniforms=this._uniforms,this._texture_material.needsUpdate=!0,this._texture_material.uniforms.resolution={value:this.pv.resolution})}))}_create_renderer(e){const t=new s.WebGLRenderer({antialias:!0});return t.setPixelRatio(window.devicePixelRatio),t.autoClear=!1,t.setRenderTarget(e),t}render_on_target(){return r.__awaiter(this,void 0,void 0,(function*(){const e=this.pv.resolution.x,t=this.pv.resolution.y;if(!this._renderer||!this._render_target)return;this._renderer.clear(),this._renderer.render(this._texture_scene,this._texture_camera),this._pixelBuffer=this._pixelBuffer||this._create_pixel_buffer(),this._renderer.readRenderTargetPixels(this._render_target,0,0,e,t,this._pixelBuffer);const n=new p.DataTexture(this._pixelBuffer,e,t,_.RGBAFormat,h.FloatType);yield C.CoreSleep.sleep(2e3),n?this.set_texture(n):this.cook_controller.end_cook()}))}_create_render_target(){const e=m.ClampToEdgeWrapping,t=m.ClampToEdgeWrapping,n=l.NearestFilter,r=l.NearestFilter;return new o.WebGLRenderTarget(this.pv.resolution.x,this.pv.resolution.y,{wrapS:e,wrapT:t,minFilter:n,magFilter:r,format:_.RGBAFormat,type:/(iPad|iPhone|iPod)/g.test(navigator.userAgent)?d.HalfFloatType:h.FloatType,stencilBuffer:!1,depthBuffer:!1})}}t.BuilderCopNode=O},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(115);class s extends r.TypedContainer{set_content(e){super.set_content(e)}texture(){return this._content}core_content(){return this._content}core_content_cloned(){var e;console.log("clone",this._content);const t=null===(e=this._content)||void 0===e?void 0:e.clone();return t&&(t.needsUpdate=!0),t}object(){return this.texture()}infos(){if(null!=this._content)return[this._content]}resolution(){return this._content&&this._content.image?[this._content.image.width,this._content.image.height]:[-1,-1]}}t.TextureContainer=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(358),s=n(61);class o extends r.BaseFlag{constructor(){super(...arguments),this._state=!1}on_update(){this.node.emit(s.NodeEvent.FLAG_BYPASS_UPDATED),this.node.set_dirty()}}t.BypassFlag=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(358),s=n(61);class o extends r.BaseFlag{on_update(){this.node.emit(s.NodeEvent.FLAG_DISPLAY_UPDATED)}}t.DisplayFlag=o},,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(16),o=n(33),i=r.__importDefault(n(168)),a=r.__importDefault(n(21)),_=r.__importDefault(n(44));t.GlNodeSpareParamsController=class{constructor(e){this.node=e,this._allow_inputs_created_from_params=!0}disallow_inputs_created_from_params(){this._allow_inputs_created_from_params=!1}initialize_node(){this.node.params.set_post_create_params_hook(this.create_inputs_from_params.bind(this))}create_inputs_from_params(){if(!this._allow_inputs_created_from_params)return;const e=[];for(let t of this.node.params.names){let n=!0;if(this._inputless_param_names&&this._inputless_param_names.length>0&&this._inputless_param_names.includes(t)&&(n=!1),n&&this.node.params.has(t)){const n=this.node.params.get(t);if(n&&!n.parent_param){const t=s.ParamTypeToConnectionPointTypeMap[n.type];if(t){const r=new o.TypedNamedConnectionPoint(n.name,t);e.push(r)}}}}this.node.io.inputs.set_named_input_connection_points(e)}set_inputless_param_names(e){return this._inputless_param_names=e}create_spare_parameters(){const e=new Map,t=new Map,n=this.node.params.spare_names,r={};for(let s of n)if(this.node.params.has(s)){const n=this.node.params.get(s);n&&(e.set(s,n.raw_input_serialized),t.set(s,n.default_value_serialized),r.names_to_delete=r.names_to_delete||[],r.names_to_delete.push(s))}for(let e of this.node.io.inputs.named_input_connection_points){const n=e.name,s=e.param_type;let o=e.init_value;const c=t.get(n),l=this.node.gl_input_default_value(n);if(o=null!=l?l:null!=c?c:e.init_value,a.default(e.init_value)&&_.default(o)){const t=new Array(e.init_value.length);for(let e=0;e<t.length;e++)t[e]=o;o=t}null!=o&&(r.to_add=r.to_add||[],r.to_add.push({name:n,type:s,init_value:i.default(o),options:{spare:!0}}))}if(!this.node.scene.loading_controller.is_loading){this.node.params.update_params(r);for(let t of this.node.params.spare)if(!t.parent_param){const n=e.get(t.name);n&&t.set(n)}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(266),s=n(265);t.NodeJsonExporter=class{constructor(e){this._node=e}data(){var e,t,n,r;this.is_root()||this._node.scene.nodes_controller.register_node_context_signature(this._node),this._data={type:this._node.type};const s=this.nodes_data();if(Object.keys(s).length>0){this._data.nodes=s;const t=null===(e=this._node.children_controller)||void 0===e?void 0:e.context;t&&(this._data.children_context=t)}if(this.is_root()||(this._data.params=this.params_data(),this._data.inputs=this.inputs_data()),this._node.flags&&(this._data.flags={},this._node.flags.has_bypass()&&(null===(t=this._node.flags.bypass)||void 0===t?void 0:t.active)&&(this._data.flags.bypass=this._node.flags.bypass.active),this._node.flags.has_display()&&(this._data.flags.display=null===(n=this._node.flags.display)||void 0===n?void 0:n.active)),this._node.children_allowed()){const e=null===(r=this._node.children_controller)||void 0===r?void 0:r.selection;if(e&&this._node.children().length>0){const t=[],n={};for(let t of e.nodes())n[t.graph_node_id]=!0;for(let e of this._node.children())e.graph_node_id in n&&t.push(e);this._data.selection=t.map(e=>e.name)}}if(this._node.io.inputs.override_clonable_state_allowed()){const e=this._node.io.inputs.override_clonable_state();e&&(this._data.override_clonable_state=e)}return this.add_custom(),this._data}ui_data(){const e={};if(!this.is_root()){const t=this._node.ui_data;e.pos=t.position.toArray();const n=t.comment;n&&(e.comment=r.SceneJsonExporter.sanitize_string(n))}const t=this._node.children();return t.length>0&&(e.nodes={},t.forEach(t=>{const n=s.JsonExportDispatcher.dispatch_node(t);e.nodes[t.name]=n.ui_data()})),e}is_root(){return null===this._node.parent&&this._node.graph_node_id==this._node.root.graph_node_id}inputs_data(){const e=[];return this._node.io.inputs.inputs().forEach((t,n)=>{if(t){const r=this._node.io.connections.input_connection(n);if(this._node.io.inputs.has_named_inputs){const s=this._node.io.inputs.named_input_connection_points[n].name,o=r.output_index,i=t.io.outputs.named_output_connection_points[o].name;e.push({name:s,node:t.name,output:i})}else e.push(t.name)}}),e}params_data(){const e={};for(let t of this._node.params.names){const n=this._node.params.get(t);if(n&&!n.parent_param){const t=s.JsonExportDispatcher.dispatch_param(n);if(t.required){const r=t.data();e[n.name]=r}}}return e}nodes_data(){const e={};for(let t of this._node.children()){const n=s.JsonExportDispatcher.dispatch_node(t);e[t.name]=n.data()}return e}add_custom(){}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(157);class s extends r.ParamJsonExporter{add_main(){if(!this._require_data_complex())return this._param.raw_input_serialized;this._complex_data.raw_input=this._param.raw_input_serialized}}t.ParamNumericJsonExporter=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(157),s=n(266);class o extends r.ParamJsonExporter{add_main(){let e=this._param.raw_input;if(e=s.SceneJsonExporter.sanitize_string(e),!this._require_data_complex())return e;this._complex_data.raw_input=e}}t.ParamOperatorPathJsonExporter=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(157),s=n(266);class o extends r.ParamJsonExporter{add_main(){let e=this._param.raw_input;if(e=s.SceneJsonExporter.sanitize_string(e),!this._require_data_complex())return e;this._complex_data.raw_input=e}}t.ParamStringJsonExporter=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(157);class s extends r.ParamJsonExporter{add_main(){if(!this._require_data_complex())return this._param.raw_input_serialized;this._complex_data.raw_input=this._param.raw_input_serialized}}t.ParamRampJsonExporter=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(158),o=n(28),i=r.__importDefault(n(669)),a=n(194),_=n(195),c=n(50),l=n(24),u=n(33),d=n(16),h=n(29);class p extends s.BaseGlShaderAssembler{get _template_shader(){return{fragmentShader:i.default,vertexShader:void 0,uniforms:void 0}}fragment_shader(){return this._shaders_by_name.get(c.ShaderName.FRAGMENT)}uniforms(){return this._uniforms}update_fragment_shader(){return r.__awaiter(this,void 0,void 0,(function*(){this._lines=new Map,this._shaders_by_name=new Map;for(let e of this.shader_names)if(e==c.ShaderName.FRAGMENT){const t=this._template_shader.fragmentShader;this._lines.set(e,t.split("\n"))}this._root_nodes.length>0&&(yield this.build_code_from_nodes(this._root_nodes),this._build_lines()),this._uniforms=this._uniforms||{},this.add_uniforms(this._uniforms);for(let e of this.shader_names){const t=this._lines.get(e);t&&this._shaders_by_name.set(e,t.join("\n"))}const e=this._gl_parent_node.scene,t=this._gl_parent_node.graph_node_id;this.uniforms_time_dependent()?this._uniforms&&e.uniforms_controller.add_time_dependent_uniform_owner(t,this._uniforms):e.uniforms_controller.remove_time_dependent_uniform_owner(t)}))}add_output_params(e){e.add_param(l.ParamType.COLOR,"color",[1,1,1],{hidden:!0}),e.add_param(l.ParamType.FLOAT,"alpha",1,{hidden:!0})}add_globals_params(e){e.io.outputs.set_named_output_connection_points([new u.TypedNamedConnectionPoint("gl_FragCoord",d.ConnectionPointType.VEC2),new u.TypedNamedConnectionPoint("time",d.ConnectionPointType.FLOAT)])}create_shader_configs(){return[new a.ShaderConfig(c.ShaderName.FRAGMENT,["color","alpha"],[])]}create_variable_configs(){return[new _.VariableConfig("color",{prefix:"diffuseColor.xyz = "}),new _.VariableConfig("alpha",{prefix:"diffuseColor.a = ",default:"1.0"})]}insert_define_after(e){return"// INSERT DEFINE"}insert_body_after(e){return"// INSERT BODY"}lines_to_remove(e){return["// INSERT DEFINE","// INSERT BODY"]}handle_gl_FragCoord(e,t,n){"fragment"==t&&e.push(`vec2 ${n} = vec2(gl_FragCoord.x / resolution.x, gl_FragCoord.y / resolution.y)`)}set_node_lines_output(e,t){const n=this.input_names_for_shader_name(e,t.current_shader_name);if(n)for(let r of n){if(e.io.inputs.named_input(r)){const n=e.variable_for_input(r);let s;"color"==r&&(s=`diffuseColor.xyz = ${o.ThreeToGl.any(n)}`),"alpha"==r&&(s=`diffuseColor.a = ${o.ThreeToGl.any(n)}`),s&&t.add_body_lines(e,[s])}}}set_node_lines_globals(e,t){const n=t.current_shader_name;if(!this.shader_config(n))return;const r=[],s=[];for(let t of e.io.outputs.used_output_names()){const o=e.gl_var_name(t);switch(t){case"time":s.push(new h.UniformGLDefinition(e,d.ConnectionPointType.FLOAT,t)),r.push(`float ${o} = ${t}`),this.set_uniforms_time_dependent();break;case"gl_FragCoord":this.handle_gl_FragCoord(r,n,o)}}t.add_definitions(e,s,n),t.add_body_lines(e,r)}}t.ShaderAssemblerTexture=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=r.__importDefault(n(91)),o=n(364),i=n(129),a=n(29),_=n(363),c=n(196),l=n(665),u=n(667),d=n(267);t.CodeBuilder=class{constructor(e,t){this._assembler=e,this._gl_parent_node=t,this._param_configs_controller=new c.ParamConfigsController,this._param_configs_set_allowed=!0,this._lines=new Map,this._function_declared=new Map}build_from_nodes(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=new o.TypedNodeTraverser(this._assembler,this._gl_parent_node);t.traverse(e);const n=new Map;for(let e of this.shader_names())n.set(e,t.nodes_for_shader_name(e));const r=t.sorted_nodes();for(let e of this.shader_names()){const t=this._assembler.root_nodes_by_shader_name(e);for(let r of t)i.MapUtils.push_on_array_at_entry(n,e,r)}const a=new Map;for(let e of r)a.set(e.graph_node_id,!0);for(let t of e)a.get(t.graph_node_id)||(r.push(t),a.set(t.graph_node_id,!0));for(let e of r)e.reset_code();for(let e of r)yield e.params.eval_all();this._shaders_collection_controller=new l.ShadersCollectionController(this.shader_names(),this.shader_names()[0]),this.reset();for(let e of this.shader_names()){const t=s.default(n.get(e));if(this._shaders_collection_controller.set_current_shader_name(e),t)for(let e of t)this._param_configs_set_allowed&&e.set_param_configs(),e.set_lines(this._shaders_collection_controller)}this._param_configs_set_allowed&&this.set_param_configs(r),this.set_code_lines(r)}))}disallow_new_param_configs(){this._param_configs_set_allowed=!1}allow_new_param_configs(){this._param_configs_set_allowed=!0}shader_names(){return this._assembler.shader_names}reset(){for(let e of this.shader_names()){const t=new Map;this._lines.set(e,t),this._function_declared.set(e,new Map)}}param_configs(){return this._param_configs_controller.list||[]}lines(e,t){return this._lines.get(e).get(t)}all_lines(){return this._lines}set_param_configs(e){this._param_configs_controller.reset();for(let t of e){const e=t.param_configs();if(e)for(let t of e)this._param_configs_controller.push(t)}}set_code_lines(e){for(let t of this.shader_names())this.add_code_lines(e,t)}add_code_lines(e,t){this.add_definitions(e,t,a.GLDefinitionType.FUNCTION,d.LineType.FUNCTION_DECLARATION),this.add_definitions(e,t,a.GLDefinitionType.UNIFORM,d.LineType.DEFINE),this.add_definitions(e,t,a.GLDefinitionType.VARYING,d.LineType.DEFINE),this.add_definitions(e,t,a.GLDefinitionType.ATTRIBUTE,d.LineType.DEFINE),this.add_code_line_for_nodes_and_line_type(e,t,d.LineType.BODY)}add_definitions(e,t,n,r){if(!this._shaders_collection_controller)return;const s=[];for(let r of e){let e=this._shaders_collection_controller.definitions(t,r);if(e){e=e.filter(e=>e.definition_type==n);for(let t of e)s.push(t)}}if(s.length>0){const e=new _.TypedGLDefinitionCollection(s),n=e.uniq();if(e.errored)throw`code builder error: ${e.error_message}`;const o=new Map,a=new Map;for(let e of n){const t=e.node.graph_node_id;a.has(t)||a.set(t,!0),i.MapUtils.push_on_array_at_entry(o,t,e)}const c=this._lines.get(t);a.forEach((e,t)=>{const n=o.get(t);if(n){const e=n[0];if(e){const t=u.CodeFormatter.node_comment(e.node,r);i.MapUtils.push_on_array_at_entry(c,r,t);for(let e of n){const t=u.CodeFormatter.line_wrap(e.line,r);i.MapUtils.push_on_array_at_entry(c,r,t)}const s=u.CodeFormatter.post_line_separator(r);i.MapUtils.push_on_array_at_entry(c,r,s)}}})}}add_code_line_for_nodes_and_line_type(e,t,n){var r=(e=e.filter(e=>{if(this._shaders_collection_controller){const n=this._shaders_collection_controller.body_lines(t,e);return n&&n.length>0}})).length;for(let s=0;s<r;s++){const r=s==e.length-1;this.add_code_line_for_node_and_line_type(e[s],t,n,r)}}add_code_line_for_node_and_line_type(e,t,n,r){if(!this._shaders_collection_controller)return;const o=this._shaders_collection_controller.body_lines(t,e);if(o&&o.length>0){const a=this._lines.get(t),_=u.CodeFormatter.node_comment(e,n);if(i.MapUtils.push_on_array_at_entry(a,n,_),s.default(o).forEach(e=>{e=u.CodeFormatter.line_wrap(e,n),i.MapUtils.push_on_array_at_entry(a,n,e)}),n!=d.LineType.BODY||!r){const e=u.CodeFormatter.post_line_separator(n);i.MapUtils.push_on_array_at_entry(a,n,e)}}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(268),o=n(20),i=n(1),a=n(2),_=n(24),c=n(348),l=n(27),u=n(192);class d{constructor(e,t,n,r){this._type=e,this._name=t,this._default_value=n,this._uniform_name=r}static from_param(e,t){return new d(e.type,e.name,e.default_value,t)}get type(){return this._type}get name(){return this._name}get default_value(){return this._default_value}get uniform_name(){return this._uniform_name}get uniform(){return this._uniform=this._uniform||this._create_uniform()}_create_uniform(){return d.uniform_by_type(this._type)}get param_options(){const e=this._callback.bind(this);switch(this._type){case _.ParamType.OPERATOR_PATH:return{callback:e,node_selection:{context:l.NodeContext.COP}};default:return{callback:e}}}_callback(e,t){this.uniform.value=t.value}static uniform_by_type(e){switch(e){case _.ParamType.BOOLEAN:case _.ParamType.BUTTON:return{value:0};case _.ParamType.COLOR:return{value:new i.Vector3(0,0,0)};case _.ParamType.FLOAT:case _.ParamType.FOLDER:case _.ParamType.INTEGER:case _.ParamType.OPERATOR_PATH:return{value:0};case _.ParamType.RAMP:return{value:null};case _.ParamType.SEPARATOR:return{value:0};case _.ParamType.STRING:return{value:null};case _.ParamType.VECTOR2:return{value:new a.Vector2(0,0)};case _.ParamType.VECTOR3:return{value:new i.Vector3(0,0,0)};case _.ParamType.VECTOR4:return{value:new o.Vector4(0,0,0,0)}}u.TypeAssert.unreachable(e)}set_uniform_value(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=this.uniform,n=e.params.get(this._name);if(n){yield n.compute();const e=n.value;if(null!=e&&this.has_value_changed(e)||this.is_video_texture())switch(this._type){case _.ParamType.OPERATOR_PATH:yield this.set_uniform_value_from_texture(n,t);break;case _.ParamType.RAMP:this.set_uniform_value_from_ramp(n,t);break;default:t.value=n.value}}}))}set_uniform_value_from_texture(e,t){return r.__awaiter(this,void 0,void 0,(function*(){const n=e.found_node();if(n){const e=(yield n.request_container()).texture();t.value=e}else t.value=null}))}set_uniform_value_from_ramp(e,t){t.value=e.ramp_texture()}has_value_changed(e){const t=c.ParamConstructorByType[this._type];if(this._cached_param_value){const n=!t.are_values_equal(e,this._cached_param_value);return n&&(this._cached_param_value=t.clone_value(e)),n}return this._cached_param_value=t.clone_value(e),!1}is_video_texture(){let e=!1;const t=this.uniform;if(t){const n=t.value;n&&(e=n.constructor==s.VideoTexture)}return e}}t.ParamConfig=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(666);t.ShadersCollectionController=class{constructor(e,t){this._shader_names=e,this._current_shader_name=t,this._lines_controller_by_shader_name=new Map;for(let e of this._shader_names)this._lines_controller_by_shader_name.set(e,new r.LinesController(e))}get shader_names(){return this._shader_names}set_current_shader_name(e){this._current_shader_name=e}get current_shader_name(){return this._current_shader_name}add_definitions(e,t,n){if(0==t.length)return;n=n||this._current_shader_name;const r=this._lines_controller_by_shader_name.get(n);r&&r.add_definitions(e,t)}definitions(e,t){const n=this._lines_controller_by_shader_name.get(e);if(n)return n.definitions(t)}add_body_lines(e,t,n){if(0==t.length)return;n=n||this._current_shader_name;const r=this._lines_controller_by_shader_name.get(n);r&&r.add_body_lines(e,t)}body_lines(e,t){const n=this._lines_controller_by_shader_name.get(e);if(n)return n.body_lines(t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(129);t.LinesController=class{constructor(e){this._shader_name=e,this._definitions_by_node_id=new Map,this._body_lines_by_node_id=new Map}get shader_name(){return this._shader_name}add_definitions(e,t){for(let n of t)r.MapUtils.push_on_array_at_entry(this._definitions_by_node_id,e.graph_node_id,n)}definitions(e){return this._definitions_by_node_id.get(e.graph_node_id)}add_body_lines(e,t){for(let n of t)r.MapUtils.push_on_array_at_entry(this._body_lines_by_node_id,e.graph_node_id,n)}body_lines(e){return this._body_lines_by_node_id.get(e.graph_node_id)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(267),s={[r.LineType.FUNCTION_DECLARATION]:"",[r.LineType.DEFINE]:";",[r.LineType.BODY]:";"},o={[r.LineType.FUNCTION_DECLARATION]:"",[r.LineType.DEFINE]:"",[r.LineType.BODY]:"\t"};t.CodeFormatter=class{static node_comment(e,t){let n=`// ${e.full_path()}`;return t==r.LineType.BODY&&(n=`\t${n}`),n}static line_wrap(e,t){let n=!0;return 0!=e.indexOf("#if")&&0!=e.indexOf("#endif")||(n=!1),n?`${o[t]}${e}${s[t]}`:`${o[t]}${e}`}static post_line_separator(e){return e==r.LineType.BODY?"\t":""}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TypedAssembler=class{}},function(e,t,n){"use strict";n.r(t),t.default="#include <common>\n\nuniform vec2 resolution;\n\n// INSERT DEFINE\n\nvoid main() {\n\n\tvec4 diffuseColor = vec4(1.0,0.0,1.0,1.0);\n\n\n\t// INSERT BODY\n\n\tgl_FragColor = vec4( diffuseColor );\n}"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.CoreSleep=class{static sleep(e){return new Promise((t,n)=>{setTimeout(()=>{t()},e)})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(672),o=n(131),i=n(5),a=n(17),_=n(66);class c extends i.NodeParamsConfig{}const l=new c;class u extends o.TypedCopNode{constructor(){super(...arguments),this.params_config=l}static type(){return"env_map"}initialize_node(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([a.InputCloneMode.NEVER])}cook(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=e[0],n=yield this.convert_texture_to_env_map(t);n?this.set_texture(n):this.cook_controller.end_cook()}))}convert_texture_to_env_map(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=yield _.Poly.instance().renderers_controller.wait_for_renderer();if(t){return new s.PMREMGenerator(t).fromEquirectangular(e).texture}this.states.error.set("no renderer found to convert the texture to an env map")}))}}t.EnvMapCopNode=u},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(268),o=n(285),i=n(0),a=n(101),_=n(131),c=n(66);var l;!function(e){e.EXR="exr",e.BASIS="basis",e.HDR="hdr"}(l||(l={}));class u{constructor(e,t){this._node=e,this._param=t}load_texture_from_url_or_op(e){return r.__awaiter(this,void 0,void 0,(function*(){let t,n=null;if("op:"==e.substring(0,3)){const r=e.substring(3);if(t=a.CoreWalker.find_node(this._node,r),t)if(t instanceof _.BaseCopNodeClass){n=(yield t.request_container()).texture()}else this._node.states.error.set("found node is not a texture node");else this._node.states.error.set(`no node found in path '${r}'`)}else n=yield this.load_url(e),n?this._param.options.texture_as_env()||(n=u.set_texture_for_mapping(n)):this._node.states.error.set(`could not load texture ${e}`);return t&&this._param.graph_predecessors()[0]!=t&&(this._param.graph_disconnect_predecessors(),this._param.add_graph_input(t)),n}))}load_url(e){return r.__awaiter(this,void 0,void 0,(function*(){return new Promise((t,n)=>r.__awaiter(this,void 0,void 0,(function*(){const r=u._ext(e);if(u.VIDEO_EXTENSIONS.includes(r)){return yield this._load_as_video(e)}this.loader_for_ext(r).then(r=>{r.load(e,t,void 0,e=>{console.warn("error",e),n()})})})))}))}loader_for_ext(e){return r.__awaiter(this,void 0,void 0,(function*(){switch(e.toLowerCase()){case l.EXR:{const{EXRLoader:e}=yield Promise.resolve().then(()=>r.__importStar(n(1014)));return new e}case l.HDR:{const{RGBELoader:e}=yield Promise.resolve().then(()=>r.__importStar(n(674))),t=new e;return t.setDataType(i.UnsignedByteType),t}case l.BASIS:{const{BasisTextureLoader:e}=yield Promise.resolve().then(()=>r.__importStar(n(675))),t=new e;t.setTranscoderPath("/three/js/libs/basis/");const s=yield c.Poly.instance().renderers_controller.wait_for_renderer();return s?t.detectSupport(s):console.warn("texture loader found no renderer for basis texture loader"),t}}return new o.TextureLoader}))}_load_as_video(e){return new Promise((t,n)=>{const r=document.createElement("video");r.setAttribute("crossOrigin","anonymous"),r.setAttribute("autoplay","true"),r.setAttribute("loop","true"),r.onloadedmetadata=function(){r.pause();const e=new s.VideoTexture(r);t(e)};const o=document.createElement("source"),i=u._ext(e);let a=u.VIDEO_SOURCE_TYPE_BY_EXT[i];a=a||u._default_video_source_type(e),o.setAttribute("type",a),o.setAttribute("src",e),r.appendChild(o)})}static _default_video_source_type(e){return`video/${this._ext(e)}`}static pixel_data(e){const t=e.image,n=document.createElement("canvas");n.width=t.width,n.height=t.height;const r=n.getContext("2d");if(r)return r.drawImage(t,0,0,t.width,t.height),r.getImageData(0,0,t.width,t.height)}static _ext(e){const t=e.split(".");return t[t.length-1].toLowerCase()}static set_texture_for_mapping(e){return e}}t.CoreTextureLoader=u,u.PARAM_DEFAULT="/examples/textures/uv.jpg",u.PARAM_ENV_DEFAULT="/examples/textures/piz_compressed.exr",u.VIDEO_EXTENSIONS=["mp4","webm","ogv"],u.VIDEO_SOURCE_TYPE_BY_EXT={ogg:'video/ogg; codecs="theora, vorbis"',ogv:'video/ogg; codecs="theora, vorbis"',mp4:'video/mp4; codecs="avc1.42E01E, mp4a.40.2"'}},function(e,t,n){"use strict";n.r(t),n.d(t,"RGBELoader",(function(){return o}));var r=n(108),s=n(0),o=function(e){r.a.call(this,e),this.type=s.UnsignedByteType};o.prototype=Object.assign(Object.create(r.a.prototype),{constructor:o,parse:function(e){var t=function(e,t){switch(e){case 1:console.error("RGBELoader Read Error: "+(t||""));break;case 2:console.error("RGBELoader Write Error: "+(t||""));break;case 3:console.error("RGBELoader Bad File Format: "+(t||""));break;default:case 4:console.error("RGBELoader: Error: "+(t||""))}return-1},n=function(e,t,n){t=t||1024;for(var r=e.pos,s=-1,o=0,i="",a=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));0>(s=a.indexOf("\n"))&&o<t&&r<e.byteLength;)i+=a,o+=a.length,r+=128,a+=String.fromCharCode.apply(null,new Uint16Array(e.subarray(r,r+128)));return-1<s&&(!1!==n&&(e.pos+=o+s+1),i+a.slice(0,s))},r=function(){var e=new Float32Array(1),t=new Int32Array(e.buffer);function n(n){e[0]=n;var r=t[0],s=r>>16&32768,o=r>>12&2047,i=r>>23&255;return i<103?s:i>142?(s|=31744,s|=(255==i?0:1)&&8388607&r):i<113?s|=((o|=2048)>>114-i)+(o>>113-i&1):(s|=i-112<<10|o>>1,s+=1&o)}return function(e,t,r,s){var o=e[t+3],i=Math.pow(2,o-128)/255;r[s+0]=n(e[t+0]*i),r[s+1]=n(e[t+1]*i),r[s+2]=n(e[t+2]*i)}}(),o=new Uint8Array(e);o.pos=0;var i,a,_,c,l,u,d=function(e){var r,s,o=/^\s*GAMMA\s*=\s*(\d+(\.\d+)?)\s*$/,i=/^\s*EXPOSURE\s*=\s*(\d+(\.\d+)?)\s*$/,a=/^\s*FORMAT=(\S+)\s*$/,_=/^\s*\-Y\s+(\d+)\s+\+X\s+(\d+)\s*$/,c={valid:0,string:"",comments:"",programtype:"RGBE",format:"",gamma:1,exposure:1,width:0,height:0};if(e.pos>=e.byteLength||!(r=n(e)))return t(1,"no header found");if(!(s=r.match(/^#\?(\S+)$/)))return t(3,"bad initial token");for(c.valid|=1,c.programtype=s[1],c.string+=r+"\n";!1!==(r=n(e));)if(c.string+=r+"\n","#"!==r.charAt(0)){if((s=r.match(o))&&(c.gamma=parseFloat(s[1],10)),(s=r.match(i))&&(c.exposure=parseFloat(s[1],10)),(s=r.match(a))&&(c.valid|=2,c.format=s[1]),(s=r.match(_))&&(c.valid|=4,c.height=parseInt(s[1],10),c.width=parseInt(s[2],10)),2&c.valid&&4&c.valid)break}else c.comments+=r+"\n";return 2&c.valid?4&c.valid?c:t(3,"missing image size specifier"):t(3,"missing format specifier")}(o);if(-1!==d){var h=d.width,p=d.height,m=function(e,n,r){var s,o,i,a,_,c,l,u,d,h,p,m,f,g=n,v=r;if(g<8||g>32767||2!==e[0]||2!==e[1]||128&e[2])return new Uint8Array(e);if(g!==(e[2]<<8|e[3]))return t(3,"wrong scanline width");if(!(s=new Uint8Array(4*n*r))||!s.length)return t(4,"unable to allocate buffer space");for(o=0,i=0,u=4*g,f=new Uint8Array(4),c=new Uint8Array(u);v>0&&i<e.byteLength;){if(i+4>e.byteLength)return t(1);if(f[0]=e[i++],f[1]=e[i++],f[2]=e[i++],f[3]=e[i++],2!=f[0]||2!=f[1]||(f[2]<<8|f[3])!=g)return t(3,"bad rgbe scanline format");for(l=0;l<u&&i<e.byteLength;){if((m=(a=e[i++])>128)&&(a-=128),0===a||l+a>u)return t(3,"bad scanline data");if(m)for(_=e[i++],d=0;d<a;d++)c[l++]=_;else c.set(e.subarray(i,i+a),l),l+=a,i+=a}for(h=g,d=0;d<h;d++)p=0,s[o]=c[d+p],p+=g,s[o+1]=c[d+p],p+=g,s[o+2]=c[d+p],p+=g,s[o+3]=c[d+p],o+=4;v--}return s}(o.subarray(o.pos),h,p);if(-1!==m){switch(this.type){case s.UnsignedByteType:var f=m,g=s.RGBEFormat,v=s.UnsignedByteType;break;case s.FloatType:for(var y=m.length/4*3,b=new Float32Array(y),x=0;x<y;x++)_=b,c=3*x,l=void 0,u=void 0,l=(i=m)[(a=4*x)+3],u=Math.pow(2,l-128)/255,_[c+0]=i[a+0]*u,_[c+1]=i[a+1]*u,_[c+2]=i[a+2]*u;f=b,g=s.RGBFormat,v=s.FloatType;break;case s.HalfFloatType:y=m.length/4*3;var T=new Uint16Array(y);for(x=0;x<y;x++)r(m,4*x,T,3*x);f=T,g=s.RGBFormat,v=s.HalfFloatType;break;default:console.error("THREE.RGBELoader: unsupported type: ",this.type)}return{width:h,height:p,data:f,header:d.string,gamma:d.gamma,exposure:d.exposure,format:g,type:v}}}return null},setDataType:function(e){return this.type=e,this},load:function(e,t,n,o){return r.a.prototype.load.call(this,e,(function(e,n){switch(e.type){case s.UnsignedByteType:e.encoding=s.RGBEEncoding,e.minFilter=s.NearestFilter,e.magFilter=s.NearestFilter,e.generateMipmaps=!1,e.flipY=!0;break;case s.FloatType:case s.HalfFloatType:e.encoding=s.LinearEncoding,e.minFilter=s.LinearFilter,e.magFilter=s.LinearFilter,e.generateMipmaps=!1,e.flipY=!0}t&&t(e,n)}),n,o)}})},function(e,t,n){"use strict";n.r(t),n.d(t,"BasisTextureLoader",(function(){return a}));var r=n(121),s=n(30),o=n(0),i=n(18),a=function(e){i.a.call(this,e),this.transcoderPath="",this.transcoderBinary=null,this.transcoderPending=null,this.workerLimit=4,this.workerPool=[],this.workerNextTaskID=1,this.workerSourceURL="",this.workerConfig={format:null,astcSupported:!1,bptcSupported:!1,etcSupported:!1,dxtSupported:!1,pvrtcSupported:!1}};a.prototype=Object.assign(Object.create(i.a.prototype),{constructor:a,setTranscoderPath:function(e){return this.transcoderPath=e,this},setWorkerLimit:function(e){return this.workerLimit=e,this},detectSupport:function(e){var t=this.workerConfig;if(t.astcSupported=!!e.extensions.get("WEBGL_compressed_texture_astc"),t.bptcSupported=!!e.extensions.get("EXT_texture_compression_bptc"),t.etcSupported=!!e.extensions.get("WEBGL_compressed_texture_etc1"),t.dxtSupported=!!e.extensions.get("WEBGL_compressed_texture_s3tc"),t.pvrtcSupported=!!e.extensions.get("WEBGL_compressed_texture_pvrtc")||!!e.extensions.get("WEBKIT_WEBGL_compressed_texture_pvrtc"),t.astcSupported)t.format=a.BASIS_FORMAT.cTFASTC_4x4;else if(t.bptcSupported)t.format=a.BASIS_FORMAT.cTFBC7_M5;else if(t.dxtSupported)t.format=a.BASIS_FORMAT.cTFBC3;else if(t.pvrtcSupported)t.format=a.BASIS_FORMAT.cTFPVRTC1_4_RGBA;else{if(!t.etcSupported)throw new Error("THREE.BasisTextureLoader: No suitable compressed texture format found.");t.format=a.BASIS_FORMAT.cTFETC1}return this},load:function(e,t,n,r){var o=new s.a(this.manager);o.setResponseType("arraybuffer"),o.load(e,e=>{this._createTexture(e).then(t).catch(r)},n,r)},_createTexture:function(e){var t,n,s=e.byteLength,i=this._allocateWorker(s).then(r=>(t=r,n=this.workerNextTaskID++,new Promise((r,s)=>{t._callbacks[n]={resolve:r,reject:s},t.postMessage({type:"transcode",id:n,buffer:e},[e])}))).then(e=>{var t,n=this.workerConfig,{width:s,height:i,mipmaps:_,format:c}=e;switch(c){case a.BASIS_FORMAT.cTFASTC_4x4:t=new r.a(_,s,i,o.RGBA_ASTC_4x4_Format);break;case a.BASIS_FORMAT.cTFBC7_M5:t=new r.a(_,s,i,o.RGBA_BPTC_Format);break;case a.BASIS_FORMAT.cTFBC1:case a.BASIS_FORMAT.cTFBC3:t=new r.a(_,s,i,a.DXT_FORMAT_MAP[n.format],o.UnsignedByteType);break;case a.BASIS_FORMAT.cTFETC1:t=new r.a(_,s,i,o.RGB_ETC1_Format);break;case a.BASIS_FORMAT.cTFPVRTC1_4_RGB:t=new r.a(_,s,i,o.RGB_PVRTC_4BPPV1_Format);break;case a.BASIS_FORMAT.cTFPVRTC1_4_RGBA:t=new r.a(_,s,i,o.RGBA_PVRTC_4BPPV1_Format);break;default:throw new Error("THREE.BasisTextureLoader: No supported format available.")}return t.minFilter=1===_.length?o.LinearFilter:o.LinearMipmapLinearFilter,t.magFilter=o.LinearFilter,t.generateMipmaps=!1,t.needsUpdate=!0,t});return i.finally(()=>{t&&n&&(t._taskLoad-=s,delete t._callbacks[n])}),i},_initTranscoder:function(){if(!this.transcoderPending){var e=new s.a(this.manager);e.setPath(this.transcoderPath);var t=new Promise((t,n)=>{e.load("basis_transcoder.js",t,void 0,n)}),n=new s.a(this.manager);n.setPath(this.transcoderPath),n.setResponseType("arraybuffer");var r=new Promise((e,t)=>{n.load("basis_transcoder.wasm",e,void 0,t)});this.transcoderPending=Promise.all([t,r]).then(([e,t])=>{var n=a.BasisWorker.toString(),r=["/* basis_transcoder.js */",e,"/* worker */",n.substring(n.indexOf("{")+1,n.lastIndexOf("}"))].join("\n");this.workerSourceURL=URL.createObjectURL(new Blob([r])),this.transcoderBinary=t})}return this.transcoderPending},_allocateWorker:function(e){return this._initTranscoder().then(()=>{var t;this.workerPool.length<this.workerLimit?((t=new Worker(this.workerSourceURL))._callbacks={},t._taskLoad=0,t.postMessage({type:"init",config:this.workerConfig,transcoderBinary:this.transcoderBinary}),t.onmessage=function(e){var n=e.data;switch(n.type){case"transcode":t._callbacks[n.id].resolve(n);break;case"error":t._callbacks[n.id].reject(n);break;default:console.error('THREE.BasisTextureLoader: Unexpected message, "'+n.type+'"')}},this.workerPool.push(t)):this.workerPool.sort((function(e,t){return e._taskLoad>t._taskLoad?-1:1}));return(t=this.workerPool[this.workerPool.length-1])._taskLoad+=e,t})},dispose:function(){for(var e=0;e<this.workerPool.length;e++)this.workerPool[e].terminate();return this.workerPool.length=0,this}}),a.BASIS_FORMAT={cTFETC1:0,cTFETC2:1,cTFBC1:2,cTFBC3:3,cTFBC4:4,cTFBC5:5,cTFBC7_M6_OPAQUE_ONLY:6,cTFBC7_M5:7,cTFPVRTC1_4_RGB:8,cTFPVRTC1_4_RGBA:9,cTFASTC_4x4:10,cTFATC_RGB:11,cTFATC_RGBA_INTERPOLATED_ALPHA:12,cTFRGBA32:13,cTFRGB565:14,cTFBGR565:15,cTFRGBA4444:16},a.DXT_FORMAT={COMPRESSED_RGB_S3TC_DXT1_EXT:33776,COMPRESSED_RGBA_S3TC_DXT1_EXT:33777,COMPRESSED_RGBA_S3TC_DXT3_EXT:33778,COMPRESSED_RGBA_S3TC_DXT5_EXT:33779},a.DXT_FORMAT_MAP={},a.DXT_FORMAT_MAP[a.BASIS_FORMAT.cTFBC1]=a.DXT_FORMAT.COMPRESSED_RGB_S3TC_DXT1_EXT,a.DXT_FORMAT_MAP[a.BASIS_FORMAT.cTFBC3]=a.DXT_FORMAT.COMPRESSED_RGBA_S3TC_DXT5_EXT,a.BasisWorker=function(){var e,t,n;onmessage=function(r){var s,o,i=r.data;switch(i.type){case"init":e=i.config,s=i.transcoderBinary,t=new Promise(e=>{o={wasmBinary:s,onRuntimeInitialized:e},BASIS(o)}).then(()=>{var{BasisFile:e,initializeBasis:t}=o;n=e,t()});break;case"transcode":t.then(()=>{try{for(var{width:t,height:r,hasAlpha:s,mipmaps:o,format:a}=function(t){var r=new n(new Uint8Array(t)),s=r.getImageWidth(0,0),o=r.getImageHeight(0,0),i=r.getNumLevels(0),a=r.getHasAlpha();function _(){r.close(),r.delete()}if(!a)switch(e.format){case 9:e.format=8}if(!s||!o||!i)throw _(),new Error("THREE.BasisTextureLoader:  Invalid .basis file");if(!r.startTranscoding())throw _(),new Error("THREE.BasisTextureLoader: .startTranscoding failed");for(var c=[],l=0;l<i;l++){var u=r.getImageWidth(0,l),d=r.getImageHeight(0,l),h=new Uint8Array(r.getImageTranscodedSizeInBytes(0,l,e.format));if(!r.transcodeImage(h,0,l,e.format,0,a))throw _(),new Error("THREE.BasisTextureLoader: .transcodeImage failed.");c.push({data:h,width:u,height:d})}return _(),{width:s,height:o,hasAlpha:a,mipmaps:c,format:e.format}}(i.buffer),_=[],c=0;c<o.length;++c)_.push(o[c].data.buffer);self.postMessage({type:"transcode",id:i.id,width:t,height:r,hasAlpha:s,mipmaps:o,format:a},_)}catch(e){console.error(e),self.postMessage({type:"error",id:i.id,error:e.message})}})}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(131),o=n(5),i=n(17),a=new o.NodeParamsConfig;class _ extends s.TypedCopNode{constructor(){super(...arguments),this.params_config=a}static type(){return"null"}initialize_node(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([i.InputCloneMode.NEVER])}cook(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=e[0];this.set_texture(t)}))}}t.NullCopNode=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(131),o=n(5),i=n(17);class a extends o.NodeParamsConfig{constructor(){super(...arguments),this.input=o.ParamConfig.INTEGER(0,{range:[0,3],range_locked:[!0,!0]})}}const _=new a;class c extends s.TypedCopNode{constructor(){super(...arguments),this.params_config=_}static type(){return"switch"}initialize_node(){this.io.inputs.set_count(0,4),this.io.inputs.init_inputs_clonable_state([i.InputCloneMode.NEVER,i.InputCloneMode.NEVER,i.InputCloneMode.NEVER,i.InputCloneMode.NEVER]),this.ui_data.set_width(100),this.cook_controller.disallow_inputs_evaluation()}cook(){return r.__awaiter(this,void 0,void 0,(function*(){const e=this.pv.input;if(this.io.inputs.has_input(e)){const t=yield this.container_controller.request_input_container(e);this.set_texture(t.texture())}else this.states.error.set(`no input ${e}`)}))}}t.SwitchCopNode=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(130),s=n(679),o=n(270),i=n(681),a=n(337),_=n(683);t.EventRegister=class{static run(e){e.register_node(s.CameraMapControlsEventNode,r.CATEGORY_EVENT.CAMERA),e.register_node(o.CameraOrbitControlsEventNode,r.CATEGORY_EVENT.CAMERA),e.register_node(i.CodeEventNode,r.CATEGORY_EVENT.MISC),e.register_node(a.MouseEventNode,r.CATEGORY_EVENT.MISC),e.register_node(_.PassEventNode,r.CATEGORY_EVENT.MISC)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(366),o=n(270);class i extends o.CameraOrbitControlsEventNode{static type(){return"camera_map_controls"}create_controls_instance(e,t){return r.__awaiter(this,void 0,void 0,(function*(){return new s.MapControls(e,t)}))}}t.CameraMapControlsEventNode=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(186);class o extends s.TypedEventNode{apply_controls(e,t){return r.__awaiter(this,void 0,void 0,(function*(){const n=yield this.create_controls_instance(e,t),r=performance.now();return n.name=`${this.full_path()}:${e.name}:${r}:${this.controls_id()}`,yield this.params.eval_all(),this.setup_controls(n),n}))}controls_id(){return JSON.stringify(this.params.all.map(e=>e.value_serialized))}}t.TypedCameraControlsEventNode=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(186),o=n(33),i=n(16),a=n(262),_=n(259),c=n(5),l=n(367),u=n(2),d=n(271),h=r.__importStar(n(682));class p{constructor(e){this.node=e,this.raycaster=new d.Raycaster,this.mouse=new u.Vector2,this.initialize_processor()}process_event(e,t,n){e instanceof MouseEvent?this.process_mouse_event(e,t,n):e instanceof KeyboardEvent&&this.process_keyboard_event(e,t,n)}process_mouse_event(e,t,n){}process_keyboard_event(e,t,n){}set_node(e){this.node=e}initialize_processor(){}_set_mouse_from_event_and_canvas(e,t){this.mouse.x=e.offsetX/t.offsetWidth*2-1,this.mouse.y=-e.offsetY/t.offsetHeight*2+1}}t.BaseMouseEventProcessor=p;class m extends c.NodeParamsConfig{constructor(){super(...arguments),this.code_typescript=c.ParamConfig.STRING("\nimport {BaseMouseEventProcessor, BaseCameraObjNodeType} from 'polygonjs-engine'\nexport class EventProcessor extends BaseMouseEventProcessor {\n\tinitialize_processor(){\n\t}\n\tprocess_mouse_event(event: MouseEvent, canvas: HTMLCanvasElement, camera_node: BaseCameraObjNodeType){\n\t\tthis._set_mouse_from_event_and_canvas(event, canvas);\n\t\tconsole.log(this.node.scene.time);\n\t\tconsole.log(\"processing event\", this.mouse.x, this.mouse.y);\n\t}\n}\n\n\n\n\n",{label:!1,language:_.StringParamLanguage.TYPESCRIPT}),this.code_javascript=c.ParamConfig.STRING("",{hidden:!0})}}const f=new m;class g extends s.TypedEventNode{constructor(){super(...arguments),this.params_config=f}static type(){return"code"}initialize_node(){this.io.inputs.set_named_input_connection_points([new o.TypedNamedConnectionPoint("trigger",i.ConnectionPointType.BOOL)])}process_event(e,t,n){this._compile_if_required(),this._processor&&this._processor.process_event(e,t,n)}_compile_if_required(){this._processor&&this._last_compiled_code==this.pv.code_javascript||this._compile()}_compile(){try{const e=`try {\n\t\t\t\t${l.TranspiledFilter.filter(this.pv.code_javascript)}\n\t\t\t} catch(e) {\n\t\t\t\tthis.states.error.set(e)\n\t\t\t}`;console.log("function_body"),console.log(e);const t=new a.AsyncFunction("BaseMouseEventProcessor","THREE",e)(p,h);t?(this._processor=new t(this),this._last_compiled_code=this.pv.code_javascript):(this.states.error.set("cannot generate function"),this._processor=void 0)}catch(e){console.warn(e),this.states.error.set(`cannot generate function (${e})`),this._processor=void 0}}}t.CodeEventNode=g},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(186),s=n(33),o=n(16),i=n(5);class a extends i.NodeParamsConfig{}const _=new a;class c extends r.TypedEventNode{constructor(){super(...arguments),this.params_config=_}static type(){return"pass"}initialize_node(){this.io.inputs.set_named_input_connection_points([0,1,2,3].map(e=>new s.TypedNamedConnectionPoint(`trigger${e}`,o.ConnectionPointType.BOOL))),this.io.outputs.set_named_output_connection_points([new s.TypedNamedConnectionPoint("event",o.ConnectionPointType.BOOL)])}process_event(e,t,n){const r=this.io.connections.output_connections().map(e=>e.node_dest);for(let s of r)s.process_event(e,t,n)}}t.PassEventNode=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(130),s=n(685),o=n(686),i=n(687),a=n(688),_=n(369),c=n(689),l=n(690),u=n(692),d=n(264),h=n(370),p=n(693),m=n(695),f=n(696),g=n(698),v=n(700),y=n(732),b=n(733),x=n(365),T=n(734),w=n(736),C=n(737),P=n(738),E=n(739),O=n(740),A=n(741),M=n(742),N=n(750),S=n(751),R=n(752),L=n(753),j=n(754),k=n(755),I=n(756),G=n(757),z=n(758),D=n(759),F=n(760),B=n(762),V=n(763),U=n(764),q=n(765),$=n(766),H=n(767),Y=n(27);t.GlRegister=class{static run(e){e.register_node(a.AbsGlNode,r.CATEGORY_GL.MATH),e.register_node(a.AcosGlNode,r.CATEGORY_GL.TRIGO),e.register_node(c.AddGlNode,r.CATEGORY_GL.MATH),e.register_node(u.AlignGlNode,r.CATEGORY_GL.TRIGO),e.register_node(l.AndGlNode,r.CATEGORY_GL.LOGIC),e.register_node(a.AsinGlNode,r.CATEGORY_GL.TRIGO),e.register_node(a.AtanGlNode,r.CATEGORY_GL.TRIGO),e.register_node(d.AttributeGlNode,r.CATEGORY_GL.GLOBALS,{except:[`${Y.NodeContext.COP}/builder`]}),e.register_node(a.CeilGlNode,r.CATEGORY_GL.MATH),e.register_node(a.CosGlNode,r.CATEGORY_GL.TRIGO),e.register_node(h.ConstantGlNode,r.CATEGORY_GL.GLOBALS),e.register_node(p.ComplementGlNode,r.CATEGORY_GL.MATH),e.register_node(m.CrossGlNode,r.CATEGORY_GL.GEOMETRY),e.register_node(f.CycleGlNode,r.CATEGORY_GL.MATH),e.register_node(a.DegreesGlNode,r.CATEGORY_GL.CONVERSION),e.register_node(g.DiskGlNode,r.CATEGORY_GL.GEOMETRY),e.register_node(_.DistanceGlNode,r.CATEGORY_GL.GEOMETRY),e.register_node(c.DivideGlNode,r.CATEGORY_GL.MATH),e.register_node(_.DotGlNode,r.CATEGORY_GL.GEOMETRY),e.register_node(v.EasingGlNode,r.CATEGORY_GL.MATH),e.register_node(a.ExpGlNode,r.CATEGORY_GL.MATH),e.register_node(a.Exp2GlNode,r.CATEGORY_GL.MATH),e.register_node(y.FitGlNode,r.CATEGORY_GL.MATH),e.register_node(b.Fit01GlNode,r.CATEGORY_GL.MATH),e.register_node(s.FloatToIntGlNode,r.CATEGORY_GL.CONVERSION),e.register_node(o.FloatToVec2GlNode,r.CATEGORY_GL.CONVERSION),e.register_node(o.FloatToVec3GlNode,r.CATEGORY_GL.CONVERSION),e.register_node(o.FloatToVec4GlNode,r.CATEGORY_GL.CONVERSION),e.register_node(a.FloorGlNode,r.CATEGORY_GL.MATH),e.register_node(a.FractGlNode,r.CATEGORY_GL.MATH),e.register_node(x.GlobalsGlNode,r.CATEGORY_GL.GLOBALS),e.register_node(T.HsvToRgbGlNode,r.CATEGORY_GL.COLOR),e.register_node(s.IntToFloatGlNode,r.CATEGORY_GL.CONVERSION),e.register_node(a.InverseSqrtGlNode,r.CATEGORY_GL.MATH),e.register_node(w.InstanceTransformGlNode,r.CATEGORY_GL.GEOMETRY),e.register_node(C.LengthGlNode,r.CATEGORY_GL.GEOMETRY),e.register_node(P.LuminanceGlNode,r.CATEGORY_GL.COLOR),e.register_node(A.NegateGlNode,r.CATEGORY_GL.MATH),e.register_node(a.LogGlNode,r.CATEGORY_GL.MATH),e.register_node(a.Log2GlNode,r.CATEGORY_GL.MATH),e.register_node(_.MaxGlNode,r.CATEGORY_GL.MATH),e.register_node(_.MinGlNode,r.CATEGORY_GL.MATH),e.register_node(_.ModGlNode,r.CATEGORY_GL.MATH),e.register_node(E.MixGlNode,r.CATEGORY_GL.MATH),e.register_node(c.MultGlNode,r.CATEGORY_GL.MATH),e.register_node(O.MultAddGlNode,r.CATEGORY_GL.MATH),e.register_node(N.NullGlNode,r.CATEGORY_GL.UTIL),e.register_node(M.NoiseGlNode,r.CATEGORY_GL.GEOMETRY),e.register_node(a.NormalizeGlNode,r.CATEGORY_GL.MATH),e.register_node(l.OrGlNode,r.CATEGORY_GL.LOGIC),e.register_node(S.OutputGlNode,r.CATEGORY_GL.GLOBALS),e.register_node(R.ParamGlNode,r.CATEGORY_GL.GLOBALS),e.register_node(_.PowGlNode,r.CATEGORY_GL.MATH),e.register_node(j.QuatMultGlNode,r.CATEGORY_GL.QUAT),e.register_node(k.QuatFromAxisAngleGlNode,r.CATEGORY_GL.QUAT),e.register_node(I.QuatToAngleGlNode,r.CATEGORY_GL.QUAT),e.register_node(G.QuatToAxisGlNode,r.CATEGORY_GL.QUAT),e.register_node(z.RampGlNode,r.CATEGORY_GL.GLOBALS),e.register_node(D.RandomGlNode,r.CATEGORY_GL.GLOBALS),e.register_node(a.RadiansGlNode,r.CATEGORY_GL.CONVERSION),e.register_node(_.ReflectGlNode,r.CATEGORY_GL.GEOMETRY),e.register_node(L.RefractGlNode,r.CATEGORY_GL.GEOMETRY),e.register_node(F.RgbToHsvGlNode,r.CATEGORY_GL.COLOR),e.register_node(B.RotateGlNode,r.CATEGORY_GL.GEOMETRY),e.register_node(V.RoundGlNode,r.CATEGORY_GL.MATH),e.register_node(a.SignGlNode,r.CATEGORY_GL.MATH),e.register_node(a.SinGlNode,r.CATEGORY_GL.TRIGO),e.register_node(a.SqrtGlNode,r.CATEGORY_GL.MATH),e.register_node(_.StepGlNode,r.CATEGORY_GL.GEOMETRY),e.register_node(c.SubstractGlNode,r.CATEGORY_GL.MATH),e.register_node(a.TanGlNode,r.CATEGORY_GL.TRIGO),e.register_node(U.TextureGlNode,r.CATEGORY_GL.COLOR),e.register_node(q.TwoWaySwitchGlNode,r.CATEGORY_GL.TRIGO),e.register_node(i.Vec2ToFloatGlNode,r.CATEGORY_GL.CONVERSION),e.register_node(i.Vec3ToFloatGlNode,r.CATEGORY_GL.CONVERSION),e.register_node(i.Vec4ToFloatGlNode,r.CATEGORY_GL.CONVERSION),e.register_node(i.Vec4ToVectorGlNode,r.CATEGORY_GL.CONVERSION),e.register_node($.VectorAlignGlNode,r.CATEGORY_GL.GEOMETRY),e.register_node(H.VectorAngleGlNode,r.CATEGORY_GL.GEOMETRY)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(34),s=n(28),o=n(33),i=n(16),a=n(5);class _ extends a.NodeParamsConfig{constructor(){super(...arguments),this.float=a.ParamConfig.FLOAT(0)}}const c=new _;class l extends r.TypedGlNode{constructor(){super(...arguments),this.params_config=c}static type(){return"float_to_int"}initialize_node(){this.io.outputs.set_named_output_connection_points([new o.TypedNamedConnectionPoint("int",i.ConnectionPointType.INT)])}set_lines(e){const t=this.variable_for_input("float"),n=`int ${this.gl_var_name("int")} = int(${s.ThreeToGl.float(t)})`;e.add_body_lines(this,[n])}}t.FloatToIntGlNode=l;class u extends a.NodeParamsConfig{constructor(){super(...arguments),this.int=a.ParamConfig.INTEGER(0)}}const d=new u;class h extends r.TypedGlNode{constructor(){super(...arguments),this.params_config=d}static type(){return"int_to_float"}initialize_node(){this.io.outputs.set_named_output_connection_points([new o.TypedNamedConnectionPoint("float",i.ConnectionPointType.FLOAT)])}set_lines(e){const t=this.variable_for_input("int"),n=`float ${this.gl_var_name("float")} = float(${s.ThreeToGl.int(t)})`;e.add_body_lines(this,[n])}}t.IntToFloatGlNode=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(34),s=n(28),o=n(33),i=n(16),a=n(5);class _ extends a.NodeParamsConfig{constructor(){super(...arguments),this.x=a.ParamConfig.FLOAT(0),this.y=a.ParamConfig.FLOAT(0)}}const c=new _;class l extends r.TypedGlNode{constructor(){super(...arguments),this.params_config=c}static type(){return"float_to_vec2"}initialize_node(){this.io.outputs.set_named_output_connection_points([new o.TypedNamedConnectionPoint(l.OUTPUT_NAME,i.ConnectionPointType.VEC2)])}set_lines(e){const t=this.variable_for_input("x"),n=this.variable_for_input("y"),r=`vec2 ${this.gl_var_name(l.OUTPUT_NAME)} = ${s.ThreeToGl.float2(t,n)}`;e.add_body_lines(this,[r])}}t.FloatToVec2GlNode=l,l.OUTPUT_NAME="vec2";class u extends a.NodeParamsConfig{constructor(){super(...arguments),this.x=a.ParamConfig.FLOAT(0),this.y=a.ParamConfig.FLOAT(0),this.z=a.ParamConfig.FLOAT(0)}}const d=new u;class h extends r.TypedGlNode{constructor(){super(...arguments),this.params_config=d}static type(){return"float_to_vec3"}initialize_node(){this.io.outputs.set_named_output_connection_points([new o.TypedNamedConnectionPoint(h.OUTPUT_NAME,i.ConnectionPointType.VEC3)])}set_lines(e){const t=this.variable_for_input("x"),n=this.variable_for_input("y"),r=this.variable_for_input("z"),o=`vec3 ${this.gl_var_name(h.OUTPUT_NAME)} = ${s.ThreeToGl.float3(t,n,r)}`;e.add_body_lines(this,[o])}}t.FloatToVec3GlNode=h,h.OUTPUT_NAME="vec3";class p extends a.NodeParamsConfig{constructor(){super(...arguments),this.x=a.ParamConfig.FLOAT(0),this.y=a.ParamConfig.FLOAT(0),this.z=a.ParamConfig.FLOAT(0),this.w=a.ParamConfig.FLOAT(0)}}const m=new p;class f extends r.TypedGlNode{constructor(){super(...arguments),this.params_config=m}static type(){return"float_to_vec4"}initialize_node(){this.io.outputs.set_named_output_connection_points([new o.TypedNamedConnectionPoint(f.OUTPUT_NAME,i.ConnectionPointType.VEC4)])}set_lines(e){const t=this.variable_for_input("x"),n=this.variable_for_input("y"),r=this.variable_for_input("z"),o=this.variable_for_input("w"),i=`vec4 ${this.gl_var_name(f.OUTPUT_NAME)} = ${s.ThreeToGl.float4(t,n,r,o)}`;e.add_body_lines(this,[i])}}t.FloatToVec4GlNode=f,f.OUTPUT_NAME="vec4"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(34),s=n(24),o=n(5),i=n(16),a=n(33);class _ extends o.NodeParamsConfig{}const c=new _;class l extends r.TypedGlNode{constructor(){super(...arguments),this.params_config=c}}function u(e,t){const n=t.components,r=t.param_type;return class extends l{static type(){return e}initialize_node(){this.io.outputs.set_named_output_connection_points(n.map(e=>new a.TypedNamedConnectionPoint(e,i.ConnectionPointType.FLOAT)))}create_params(){this.add_param(r,"vec",n.map(e=>0))}set_lines(e){const t=[],n=this.variable_for_input("vec");this.io.outputs.used_output_names().forEach(e=>{const r=this.gl_var_name(e);t.push(`float ${r} = ${n}.${e}`)}),e.add_body_lines(this,t)}}}const d=["x","y","z","w"];class h extends(u("vec2_to_float",{components:["x","y"],param_type:s.ParamType.VECTOR2})){}t.Vec2ToFloatGlNode=h;class p extends(u("vec3_to_float",{components:["x","y","z"],param_type:s.ParamType.VECTOR3})){}t.Vec3ToFloatGlNode=p;class m extends(u("vec4_to_float",{components:d,param_type:s.ParamType.VECTOR4})){}t.Vec4ToFloatGlNode=m;class f extends l{static type(){return"vec4_to_vector"}initialize_node(){this.io.outputs.set_named_output_connection_points([new a.TypedNamedConnectionPoint(f.OUTPUT_NAME_VEC3,i.ConnectionPointType.VEC3),new a.TypedNamedConnectionPoint(f.OUTPUT_NAME_W,i.ConnectionPointType.FLOAT)])}create_params(){this.add_param(s.ParamType.VECTOR4,f.INPUT_NAME_VEC4,d.map(e=>0))}set_lines(e){const t=[],n=f.INPUT_NAME_VEC4,r=f.OUTPUT_NAME_VEC3,s=f.OUTPUT_NAME_W,o=this.variable_for_input(n),i=this.io.outputs.used_output_names();if(i.indexOf(r)>=0){const e=this.gl_var_name(r);t.push(`vec3 ${e} = ${o}.xyz`)}if(i.indexOf(s)>=0){const e=this.gl_var_name(s);t.push(`float ${e} = ${o}.w`)}e.add_body_lines(this,t)}}t.Vec4ToVectorGlNode=f,f.INPUT_NAME_VEC4="vec4",f.OUTPUT_NAME_VEC3="vec3",f.OUTPUT_NAME_W="w"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(36);function s(e,t={}){const n=t.method||e,s=t.out||"val",o=t.in||"in";return class extends r.BaseNodeGlMathFunctionArg1GlNode{static type(){return e}initialize_node(){super.initialize_node(),this.gl_connections_controller.set_input_name_function(this._gl_input_name.bind(this)),this.gl_connections_controller.set_output_name_function(this._gl_output_name.bind(this))}_gl_input_name(e){return o}_gl_output_name(e){return s}gl_method_name(){return n}}}class o extends(s("abs")){}t.AbsGlNode=o;class i extends(s("acos",{out:"radians"})){}t.AcosGlNode=i;class a extends(s("asin",{out:"radians"})){}t.AsinGlNode=a;class _ extends(s("atan",{out:"radians"})){}t.AtanGlNode=_;class c extends(s("ceil")){}t.CeilGlNode=c;class l extends(s("cos",{in:"radians"})){}t.CosGlNode=l;class u extends(s("degrees",{in:"radians",out:"degrees"})){}t.DegreesGlNode=u;class d extends(s("exp")){}t.ExpGlNode=d;class h extends(s("exp2")){}t.Exp2GlNode=h;class p extends(s("floor")){}t.FloorGlNode=p;class m extends(s("fract")){}t.FractGlNode=m;class f extends(s("inverse_sqrt",{method:"inversesqrt"})){}t.InverseSqrtGlNode=f;class g extends(s("log")){}t.LogGlNode=g;class v extends(s("log2")){}t.Log2GlNode=v;class y extends(s("normalize",{out:"normalized"})){}t.NormalizeGlNode=y;class b extends(s("radians",{in:"degrees",out:"radians"})){}t.RadiansGlNode=b;class x extends(s("sign")){}t.SignGlNode=x;class T extends(s("sin",{in:"radians"})){}t.SinGlNode=T;class w extends(s("sqrt")){}t.SqrtGlNode=w;class C extends(s("tan")){}t.TanGlNode=C},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(36),s=n(16),o=n(28);function i(e,t){const n=t.in_prefix||e,i=t.out||"val",a=t.operation,_=t.allowed_in_types;return class extends r.BaseNodeGlMathFunctionArg2GlNode{static type(){return e}initialize_node(){super.initialize_node(),this.gl_connections_controller.set_input_name_function(this._gl_input_name.bind(this)),this.gl_connections_controller.set_output_name_function(this._gl_output_name.bind(this)),this.gl_connections_controller.set_expected_input_types_function(this._expected_input_types.bind(this)),this.gl_connections_controller.set_expected_output_types_function(this._expected_output_types.bind(this))}set_lines(e){const t=this.io.outputs.named_output_connection_points[0].type,n=this.io.inputs.named_input_connection_points.map((e,t)=>{const n=e.name,r=this.variable_for_input(n);if(r)return o.ThreeToGl.any(r)}).join(` ${this.gl_operation()} `),r=`${t} ${this.gl_var_name(this.gl_connections_controller.output_name(0))} = ${this.gl_method_name()}(${n})`;e.add_body_lines(this,[r])}_gl_input_name(e){return`${n}${e}`}_gl_output_name(e){return i}gl_operation(){return a}_expected_input_types(){let e=this.gl_connections_controller.first_input_connection_type();if(e&&_&&!_.includes(e)){const t=this.io.inputs.named_input_connection_points[0];t&&(e=t.type)}const t=e||s.ConnectionPointType.FLOAT,n=this.io.connections.input_connections(),r=n?Math.max(n.length+1,2):2,o=[];for(let e=0;e<r;e++)o.push(t);return o}_expected_output_types(){return[this._expected_input_types()[0]]}}}class a extends(i("add",{in_prefix:"add",out:"sum",operation:"+"})){}t.AddGlNode=a;class _ extends(i("divide",{in_prefix:"div",out:"divide",operation:"/"})){}t.DivideGlNode=_;class c extends(i("substract",{in_prefix:"sub",out:"substract",operation:"-"})){}t.SubstractGlNode=c;class l extends(i("mult",{in_prefix:"mult",out:"product",operation:"*"})){static type(){return"mult"}gl_input_default_value(e){return 1}initialize_node(){super.initialize_node(),this.gl_connections_controller.set_expected_input_types_function(this._expected_input_types.bind(this)),this.gl_connections_controller.set_expected_output_types_function(this._expected_output_types.bind(this))}_expected_output_type(){const e=this._expected_input_types();return[e[e.length-1]]}_expected_input_types(){const e=this.io.connections.input_connections();if(e){const t=e[0];if(t){const n=this.io.inputs.named_input_connection_points[t.input_index].type,r=e?e.length+1:2,o=new Array(r);if(n==s.ConnectionPointType.FLOAT){const t=e?e[1]:null;if(t){const e=this.io.inputs.named_input_connection_points[t.input_index].type;return e==s.ConnectionPointType.FLOAT?o.map(e=>n):[n,e]}return[n,n]}return o.map(()=>n)}}return[s.ConnectionPointType.FLOAT,s.ConnectionPointType.FLOAT]}}t.MultGlNode=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(691);function s(e,t){return class extends r.BaseNodeGlMathFunctionArgBoolean2GlNode{static type(){return e}initialize_node(){super.initialize_node(),this.gl_connections_controller.set_input_name_function(this._gl_input_name.bind(this)),this.gl_connections_controller.set_output_name_function(this._gl_output_name.bind(this))}boolean_operation(){return t.op}_gl_output_name(t){return e}_gl_input_name(t=0){return`${e}${t}`}}}class o extends(s("and",{op:"&&"})){}t.AndGlNode=o;class i extends(s("or",{op:"||"})){}t.OrGlNode=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(36),s=n(28),o=n(16);class i extends r.BaseNodeGlMathFunctionArg2GlNode{initialize_node(){super.initialize_node(),this.gl_connections_controller.set_expected_input_types_function(this._expected_input_types.bind(this)),this.gl_connections_controller.set_expected_output_types_function(this._expected_output_types.bind(this))}_expected_input_types(){return[o.ConnectionPointType.BOOL,o.ConnectionPointType.BOOL]}_expected_output_types(){return[o.ConnectionPointType.BOOL]}set_lines(e){const t=this.io.inputs.named_input_connection_points.map((e,t)=>{const n=e.name;return s.ThreeToGl.any(this.variable_for_input(n))}).join(` ${this.boolean_operation()} `),n=`bool ${this.gl_var_name(this.gl_connections_controller.output_name(0))} = ${t}`;e.add_body_lines(this,[n])}}t.BaseNodeGlMathFunctionArgBoolean2GlNode=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(36),o=r.__importDefault(n(95)),i=n(16),a=n(29);var _;!function(e){e.DIR="dir",e.UP="up"}(_||(_={}));const c=[_.DIR,_.UP],l={[_.DIR]:[0,0,1],[_.UP]:[0,1,0]};class u extends s.BaseNodeGlMathFunctionArg2GlNode{static type(){return"align"}initialize_node(){super.initialize_node(),this.gl_connections_controller.set_input_name_function(e=>c[e]),this.gl_connections_controller.set_expected_input_types_function(()=>[i.ConnectionPointType.VEC3,i.ConnectionPointType.VEC3]),this.gl_connections_controller.set_expected_output_types_function(()=>[i.ConnectionPointType.VEC4])}gl_input_default_value(e){return l[e]}gl_method_name(){return"align"}gl_function_definitions(){return[new a.FunctionGLDefinition(this,i.ConnectionPointType.VEC4,o.default)]}}t.AlignGlNode=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(36),o=r.__importDefault(n(694)),i=n(29),a=n(16);class _ extends s.BaseNodeGlMathFunctionArg1GlNode{static type(){return"complement"}gl_method_name(){return"complement"}gl_function_definitions(){return[new i.FunctionGLDefinition(this,this.gl_connections_controller.first_input_connection_type()||a.ConnectionPointType.FLOAT,o.default)]}}t.ComplementGlNode=_},function(e,t,n){"use strict";n.r(t),t.default="float complement(float x){return 1.0-x;}\nvec2 complement(vec2 x){return vec2(1.0-x.x, 1.0-x.y);}\nvec3 complement(vec3 x){return vec3(1.0-x.x, 1.0-x.y, 1.0-x.z);}\nvec4 complement(vec4 x){return vec4(1.0-x.x, 1.0-x.y, 1.0-x.z, 1.0-x.w);}\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(34),s=n(28),o=n(5),i=n(33),a=n(16);class _ extends o.NodeParamsConfig{constructor(){super(...arguments),this.x=o.ParamConfig.VECTOR3([0,0,1]),this.y=o.ParamConfig.VECTOR3([0,1,0])}}const c=new _;class l extends r.TypedGlNode{constructor(){super(...arguments),this.params_config=c}static type(){return"cross"}initialize_node(){super.initialize_node(),this.io.outputs.set_named_output_connection_points([new i.TypedNamedConnectionPoint("cross",a.ConnectionPointType.VEC3)])}set_lines(e){const t=s.ThreeToGl.float(this.variable_for_input("x")),n=s.ThreeToGl.float(this.variable_for_input("y")),r=`vec3 ${this.gl_var_name("cross")} = cross(${t}, ${n})`;e.add_body_lines(this,[r])}}t.CrossGlNode=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3).__importDefault(n(697)),s=n(371);class o extends(s.MathFunctionArg3Factory("cycle",{in:["in","min","max"],default:{max:1},functions:[r.default]})){}t.CycleGlNode=o},function(e,t,n){"use strict";n.r(t),t.default="float cycle(float val, float val_min, float val_max){\n\tif(val >= val_min && val < val_max){\n\t\treturn val;\n\t} else {\n\t\tfloat range = val_max - val_min;\n\t\tif(val >= val_max){\n\t\t\tfloat delta = (val - val_max);\n\t\t\treturn val_min + mod(delta, range);\n\t\t} else {\n\t\t\tfloat delta = (val_min - val);\n\t\t\treturn val_max - mod(delta, range);\n\t\t}\n\t}\n}"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(34),o=n(28),i=r.__importDefault(n(699)),a=n(5),_=n(16),c=n(29),l=n(33);class u extends a.NodeParamsConfig{constructor(){super(...arguments),this.position=a.ParamConfig.VECTOR2([0,0]),this.center=a.ParamConfig.VECTOR2([0,0]),this.radius=a.ParamConfig.FLOAT(1),this.feather=a.ParamConfig.FLOAT(.1)}}const d=new u;class h extends s.TypedGlNode{constructor(){super(...arguments),this.params_config=d}static type(){return"disk"}initialize_node(){super.initialize_node(),this.io.outputs.set_named_output_connection_points([new l.TypedNamedConnectionPoint("float",_.ConnectionPointType.FLOAT)])}set_lines(e){const t=o.ThreeToGl.vector2(this.variable_for_input("position")),n=o.ThreeToGl.vector2(this.variable_for_input("center")),r=o.ThreeToGl.float(this.variable_for_input("radius")),s=o.ThreeToGl.float(this.variable_for_input("feather")),a=`float ${this.gl_var_name("float")} = disk(${t}, ${n}, ${r}, ${s})`;e.add_body_lines(this,[a]),e.add_definitions(this,[new c.FunctionGLDefinition(this,_.ConnectionPointType.FLOAT,i.default)])}}t.DiskGlNode=h},function(e,t,n){"use strict";n.r(t),t.default="float disk(vec2 pos, vec2 center, float radius, float feather){\n\tfloat dist = distance(pos, center);\n\tif(feather <= 0.0){\n\t\tif(dist < radius){return 1.0;}else{return 0.0;}\n\t} else {\n\t\tfloat half_feather = feather * 0.5;\n\t\tif(dist < (radius - half_feather)){\n\t\t\treturn 1.0;\n\t\t} else {\n\t\t\tif(dist > (radius + half_feather)){\n\t\t\t\treturn 0.0;\n\t\t\t} else {\n\t\t\t\tfloat feather_start = (radius - half_feather);\n\t\t\t\tfloat blend = 1.0 - (dist - feather_start) / feather;\n\t\t\t\treturn blend;\n\t\t\t}\n\t\t}\n\t}\n}"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(34),o=n(28),i=r.__importDefault(n(701)),a=r.__importDefault(n(702)),_=r.__importDefault(n(703)),c=r.__importDefault(n(704)),l=r.__importDefault(n(705)),u=r.__importDefault(n(706)),d=r.__importDefault(n(707)),h=r.__importDefault(n(708)),p=r.__importDefault(n(709)),m=r.__importDefault(n(710)),f=r.__importDefault(n(711)),g=r.__importDefault(n(712)),v=r.__importDefault(n(713)),y=r.__importDefault(n(714)),b=r.__importDefault(n(715)),x=r.__importDefault(n(716)),T=r.__importDefault(n(717)),w=r.__importDefault(n(718)),C=r.__importDefault(n(719)),P=r.__importDefault(n(720)),E=r.__importDefault(n(721)),O=r.__importDefault(n(722)),A=r.__importDefault(n(723)),M=r.__importDefault(n(724)),N=r.__importDefault(n(725)),S=r.__importDefault(n(726)),R=r.__importDefault(n(727)),L=r.__importDefault(n(728)),j=r.__importDefault(n(729)),k=r.__importDefault(n(730)),I=r.__importDefault(n(731)),G=n(5),z=n(16),D=n(33),F=n(29),B=["back-in-out","back-in","back-out","bounce-in-out","bounce-in","bounce-out","circular-in-out","circular-in","circular-out","cubic-in-out","cubic-in","cubic-out","elastic-in-out","elastic-in","elastic-out","exponential-in-out","exponential-in","exponential-out","linear","quadratic-in-out","quadratic-in","quadratic-out","sine-in-out","sine-in","sine-out"],V={"circular-in-out":i.default,"exponential-in-out":a.default,"circular-in":_.default,"elastic-out":c.default,"cubic-in":l.default,"exponential-out":u.default,"quintic-out":d.default,"elastic-in-out":h.default,linear:p.default,"circular-out":m.default,"back-in-out":f.default,"back-in":g.default,"sine-in":v.default,"back-out":y.default,"quartic-in-out":b.default,"quadratic-in":x.default,"cubic-in-out":T.default,"elastic-in":w.default,"bounce-out":C.default,"quadratic-in-out":P.default,"exponential-in":E.default,"quintic-in-out":O.default,"sine-in-out":A.default,"cubic-out":M.default,"quadratic-out":N.default,"bounce-in-out":S.default,"quintic-in":R.default,"quartic-in":L.default,"quartic-out":j.default,"bounce-in":k.default,"sine-out":I.default},U={"bounce-in":[C.default],"bounce-in-out":[C.default]},q={"circular-in-out":"circularInOut","exponential-in-out":"exponentialInOut","circular-in":"circularIn","elastic-out":"elasticOut","cubic-in":"cubicIn","exponential-out":"exponentialOut","quintic-out":"quinticOut","elastic-in-out":"elasticInOut",linear:"linear","circular-out":"circularOut","back-in-out":"backInOut","back-in":"backIn","sine-in":"sineIn","back-out":"backOut","quartic-in-out":"quarticInOut","quadratic-in":"quadraticIn","cubic-in-out":"cubicInOut","elastic-in":"elasticIn","bounce-out":"bounceOut","quadratic-in-out":"quadraticInOut","exponential-in":"exponentialIn","quintic-in-out":"quinticInOut","sine-in-out":"sineInOut","cubic-out":"cubicOut","quadratic-out":"quadraticOut","bounce-in-out":"bounceInOut","quintic-in":"quinticIn","quartic-in":"quarticIn","quartic-out":"quarticOut","bounce-in":"bounceIn","sine-out":"sineOut"},$=B.indexOf("sine-in-out");class H extends G.NodeParamsConfig{constructor(){super(...arguments),this.type=G.ParamConfig.INTEGER($,{menu:{entries:B.map((e,t)=>({name:e,value:t}))}}),this.input=G.ParamConfig.FLOAT(0)}}const Y=new H;class X extends s.TypedGlNode{constructor(){super(...arguments),this.params_config=Y}static type(){return"easing"}initialize_node(){super.initialize_node(),this.spare_params_controller.set_inputless_param_names(["type"]),this.io.outputs.set_named_output_connection_points([new D.TypedNamedConnectionPoint("out",z.ConnectionPointType.FLOAT)])}set_lines(e){const t=B[this.pv.type],n=q[t],r=V[t];let s=[new F.FunctionGLDefinition(this,z.ConnectionPointType.FLOAT,r)];const i=(U[t]||[]).map(e=>new F.FunctionGLDefinition(this,z.ConnectionPointType.FLOAT,e));i&&(s=i.concat(s));const a=o.ThreeToGl.float(this.variable_for_input("input")),_=`float ${this.gl_var_name("out")} = ${n}(${a})`;e.add_definitions(this,s),e.add_body_lines(this,[_])}}t.EasingGlNode=X},function(e,t,n){"use strict";n.r(t),t.default="float circularInOut(float t) {\n  return t < 0.5\n    ? 0.5 * (1.0 - sqrt(1.0 - 4.0 * t * t))\n    : 0.5 * (sqrt((3.0 - 2.0 * t) * (2.0 * t - 1.0)) + 1.0);\n}\n\n"},function(e,t,n){"use strict";n.r(t),t.default="float exponentialInOut(float t) {\n  return t == 0.0 || t == 1.0\n    ? t\n    : t < 0.5\n      ? +0.5 * pow(2.0, (20.0 * t) - 10.0)\n      : -0.5 * pow(2.0, 10.0 - (t * 20.0)) + 1.0;\n}\n\n"},function(e,t,n){"use strict";n.r(t),t.default="float circularIn(float t) {\n  return 1.0 - sqrt(1.0 - t * t);\n}\n\n"},function(e,t,n){"use strict";n.r(t),t.default="#ifndef HALF_PI\n#define HALF_PI 1.5707963267948966\n#endif\n\nfloat elasticOut(float t) {\n  return sin(-13.0 * (t + 1.0) * HALF_PI) * pow(2.0, -10.0 * t) + 1.0;\n}\n\n"},function(e,t,n){"use strict";n.r(t),t.default="float cubicIn(float t) {\n  return t * t * t;\n}\n\n"},function(e,t,n){"use strict";n.r(t),t.default="float exponentialOut(float t) {\n  return t == 1.0 ? t : 1.0 - pow(2.0, -10.0 * t);\n}\n\n"},function(e,t,n){"use strict";n.r(t),t.default="float quinticOut(float t) {\n  return 1.0 - (pow(t - 1.0, 5.0));\n}\n\n"},function(e,t,n){"use strict";n.r(t),t.default="#ifndef HALF_PI\n#define HALF_PI 1.5707963267948966\n#endif\n\nfloat elasticInOut(float t) {\n  return t < 0.5\n    ? 0.5 * sin(+13.0 * HALF_PI * 2.0 * t) * pow(2.0, 10.0 * (2.0 * t - 1.0))\n    : 0.5 * sin(-13.0 * HALF_PI * ((2.0 * t - 1.0) + 1.0)) * pow(2.0, -10.0 * (2.0 * t - 1.0)) + 1.0;\n}\n\n"},function(e,t,n){"use strict";n.r(t),t.default="float linear(float t) {\n  return t;\n}\n\n"},function(e,t,n){"use strict";n.r(t),t.default="float circularOut(float t) {\n  return sqrt((2.0 - t) * t);\n}\n\n"},function(e,t,n){"use strict";n.r(t),t.default="\nfloat backInOut(float t) {\n  float f = t < 0.5\n    ? 2.0 * t\n    : 1.0 - (2.0 * t - 1.0);\n\n  float g = pow(f, 3.0) - f * sin(f * PI);\n\n  return t < 0.5\n    ? 0.5 * g\n    : 0.5 * (1.0 - g) + 0.5;\n}\n\n"},function(e,t,n){"use strict";n.r(t),t.default="\nfloat backIn(float t) {\n  return pow(t, 3.0) - t * sin(t * PI);\n}\n\n"},function(e,t,n){"use strict";n.r(t),t.default="#ifndef HALF_PI\n#define HALF_PI 1.5707963267948966\n#endif\n\nfloat sineIn(float t) {\n  return sin((t - 1.0) * HALF_PI) + 1.0;\n}\n\n"},function(e,t,n){"use strict";n.r(t),t.default="\nfloat backOut(float t) {\n  float f = 1.0 - t;\n  return 1.0 - (pow(f, 3.0) - f * sin(f * PI));\n}\n\n"},function(e,t,n){"use strict";n.r(t),t.default="float quarticInOut(float t) {\n  return t < 0.5\n    ? +8.0 * pow(t, 4.0)\n    : -8.0 * pow(t - 1.0, 4.0) + 1.0;\n}\n\n"},function(e,t,n){"use strict";n.r(t),t.default="float quadraticIn(float t) {\n  return t * t;\n}\n\n"},function(e,t,n){"use strict";n.r(t),t.default="float cubicInOut(float t) {\n  return t < 0.5\n    ? 4.0 * t * t * t\n    : 0.5 * pow(2.0 * t - 2.0, 3.0) + 1.0;\n}\n\n"},function(e,t,n){"use strict";n.r(t),t.default="#ifndef HALF_PI\n#define HALF_PI 1.5707963267948966\n#endif\n\nfloat elasticIn(float t) {\n  return sin(13.0 * t * HALF_PI) * pow(2.0, 10.0 * (t - 1.0));\n}\n\n"},function(e,t,n){"use strict";n.r(t),t.default="\nfloat bounceOut(float t) {\n  const float a = 4.0 / 11.0;\n  const float b = 8.0 / 11.0;\n  const float c = 9.0 / 10.0;\n\n  const float ca = 4356.0 / 361.0;\n  const float cb = 35442.0 / 1805.0;\n  const float cc = 16061.0 / 1805.0;\n\n  float t2 = t * t;\n\n  return t < a\n    ? 7.5625 * t2\n    : t < b\n      ? 9.075 * t2 - 9.9 * t + 3.4\n      : t < c\n        ? ca * t2 - cb * t + cc\n        : 10.8 * t * t - 20.52 * t + 10.72;\n}\n\n"},function(e,t,n){"use strict";n.r(t),t.default="float quadraticInOut(float t) {\n  float p = 2.0 * t * t;\n  return t < 0.5 ? p : -p + (4.0 * t) - 1.0;\n}\n\n"},function(e,t,n){"use strict";n.r(t),t.default="float exponentialIn(float t) {\n  return t == 0.0 ? t : pow(2.0, 10.0 * (t - 1.0));\n}\n\n"},function(e,t,n){"use strict";n.r(t),t.default="float quinticInOut(float t) {\n  return t < 0.5\n    ? +16.0 * pow(t, 5.0)\n    : -0.5 * pow(2.0 * t - 2.0, 5.0) + 1.0;\n}\n\n"},function(e,t,n){"use strict";n.r(t),t.default="\nfloat sineInOut(float t) {\n  return -0.5 * (cos(PI * t) - 1.0);\n}\n\n"},function(e,t,n){"use strict";n.r(t),t.default="float cubicOut(float t) {\n  float f = t - 1.0;\n  return f * f * f + 1.0;\n}\n\n"},function(e,t,n){"use strict";n.r(t),t.default="float quadraticOut(float t) {\n  return -t * (t - 2.0);\n}\n\n"},function(e,t,n){"use strict";n.r(t),t.default="\nfloat bounceInOut(float t) {\n  return t < 0.5\n    ? 0.5 * (1.0 - bounceOut(1.0 - t * 2.0))\n    : 0.5 * bounceOut(t * 2.0 - 1.0) + 0.5;\n}\n\n\n\n"},function(e,t,n){"use strict";n.r(t),t.default="float quinticIn(float t) {\n  return pow(t, 5.0);\n}\n\n"},function(e,t,n){"use strict";n.r(t),t.default="float quarticIn(float t) {\n  return pow(t, 4.0);\n}\n\n"},function(e,t,n){"use strict";n.r(t),t.default="float quarticOut(float t) {\n  return pow(t - 1.0, 3.0) * (1.0 - t) + 1.0;\n}\n\n"},function(e,t,n){"use strict";n.r(t),t.default="\nfloat bounceIn(float t) {\n  return 1.0 - bounceOut(1.0 - t);\n}\n\n"},function(e,t,n){"use strict";n.r(t),t.default="#ifndef HALF_PI\n#define HALF_PI 1.5707963267948966\n#endif\n\nfloat sineOut(float t) {\n  return sin(t * HALF_PI);\n}\n\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(36),o=r.__importDefault(n(372)),i=n(29),a=n(16),_={src_min:0,src_max:1};class c extends s.BaseNodeGlMathFunctionArg5GlNode{static type(){return"fit"}_gl_input_name(e){return["val","src_min","src_max","dest_min","dest_max"][e]}gl_input_default_value(e){return _[e]}gl_method_name(){return"fit"}gl_function_definitions(){return[new i.FunctionGLDefinition(this,a.ConnectionPointType.FLOAT,o.default)]}}t.FitGlNode=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(36),o=r.__importDefault(n(372)),i=n(29),a=n(16),_={src_min:0,src_max:1};class c extends s.BaseNodeGlMathFunctionArg3GlNode{static type(){return"fit01"}gl_input_name(e){return["val","src_min","src_max"][e]}gl_input_default_value(e){return _[e]}gl_method_name(){return"fit01"}gl_function_definitions(){return[new i.FunctionGLDefinition(this,a.ConnectionPointType.FLOAT,o.default)]}}t.Fit01GlNode=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(34),o=n(28),i=r.__importDefault(n(735)),a=n(16),_=n(33),c=n(29),l=n(5);class u extends l.NodeParamsConfig{constructor(){super(...arguments),this.hsv=l.ParamConfig.VECTOR3([1,1,1])}}const d=new u;class h extends s.TypedGlNode{constructor(){super(...arguments),this.params_config=d}static type(){return"hsv_to_rgb"}initialize_node(){super.initialize_node(),this.io.outputs.set_named_output_connection_points([new _.TypedNamedConnectionPoint("rgb",a.ConnectionPointType.VEC3)])}set_lines(e){const t=[],n=[];t.push(new c.FunctionGLDefinition(this,a.ConnectionPointType.VEC3,i.default));const r=o.ThreeToGl.vector3(this.variable_for_input(this.p.hsv.name)),s=this.gl_var_name("rgb");n.push(`vec3 ${s} = hsv2rgb(${r})`),e.add_definitions(this,t),e.add_body_lines(this,n)}}t.HsvToRgbGlNode=h},function(e,t,n){"use strict";n.r(t),t.default="// https://github.com/hughsk/glsl-hsv2rgb\n// https://stackoverflow.com/questions/15095909/from-rgb-to-hsv-in-opengl-glsl\nvec3 hsv2rgb(vec3 c) {\n\tvec4 K = vec4(1.0, 2.0 / 3.0, 1.0 / 3.0, 3.0);\n\tvec3 p = abs(fract(c.xxx + K.xyz) * 6.0 - K.www);\n\treturn c.z * mix(K.xxx, clamp(p - K.xxx, 0.0, 1.0), c.y);\n}"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(34),o=n(28),i=r.__importDefault(n(95)),a=n(5),_=n(16),c=n(33),l=n(29),u="position",d="normal",h="instancePosition",p="instanceOrientation",m="instanceScale";class f extends a.NodeParamsConfig{constructor(){super(...arguments),this.position=a.ParamConfig.VECTOR3([0,0,0]),this.normal=a.ParamConfig.VECTOR3([0,0,1]),this.instance_position=a.ParamConfig.VECTOR3([0,0,0]),this.instance_orientation=a.ParamConfig.VECTOR4([0,0,0,0]),this.instance_scale=a.ParamConfig.VECTOR3([1,1,1])}}const g=new f;class v extends s.TypedGlNode{constructor(){super(...arguments),this.params_config=g}static type(){return"instance_transform"}initialize_node(){super.initialize_node(),this.io.outputs.set_named_output_connection_points([new c.TypedNamedConnectionPoint(this.gl_output_name_position(),_.ConnectionPointType.VEC3),new c.TypedNamedConnectionPoint(this.gl_output_name_normal(),_.ConnectionPointType.VEC3)])}set_lines(e){const t=[],n=[];n.push(new l.FunctionGLDefinition(this,_.ConnectionPointType.VEC4,i.default));const r=this.io.inputs.named_input(this.p.position.name)?o.ThreeToGl.float(this.variable_for_input(this.p.position.name)):this._default_position(),s=this.io.inputs.named_input(this.p.normal.name)?o.ThreeToGl.float(this.variable_for_input(this.p.normal.name)):this._default_normal(),a=this.io.inputs.named_input(this.p.instance_position.name)?o.ThreeToGl.float(this.variable_for_input(this.p.instance_position.name)):this._default_instance_position(e),c=this.io.inputs.named_input(this.p.instance_orientation.name)?o.ThreeToGl.float(this.variable_for_input(this.p.instance_orientation.name)):this._default_input_instance_orientation(e),u=this.io.inputs.named_input(this.p.instance_scale.name)?o.ThreeToGl.float(this.variable_for_input(this.p.instance_scale.name)):this._default_input_instance_scale(e),d=this.gl_var_name(this.gl_output_name_position()),h=this.gl_var_name(this.gl_output_name_normal());t.push(`vec3 ${d} = vec3(${r})`),t.push(`${d} *= ${u}`),t.push(`${d} = rotate_with_quat( ${d}, ${c} )`),t.push(`${d} += ${a}`),t.push(`vec3 ${h} = vec3(${s})`),t.push(`${h} = rotate_with_quat( ${h}, ${c} )`),e.add_body_lines(this,t),e.add_definitions(this,n)}gl_output_name_position(){return"position"}gl_output_name_normal(){return"normal"}_default_position(){return u}_default_normal(){return d}_default_instance_position(e){var t,n;return null===(n=null===(t=this.material_node)||void 0===t?void 0:t.assembler_controller.assembler.globals_handler)||void 0===n?void 0:n.read_attribute(this,_.ConnectionPointType.VEC3,h,e)}_default_input_instance_orientation(e){var t,n;return null===(n=null===(t=this.material_node)||void 0===t?void 0:t.assembler_controller.assembler.globals_handler)||void 0===n?void 0:n.read_attribute(this,_.ConnectionPointType.VEC4,p,e)}_default_input_instance_scale(e){var t,n;return null===(n=null===(t=this.material_node)||void 0===t?void 0:t.assembler_controller.assembler.globals_handler)||void 0===n?void 0:n.read_attribute(this,_.ConnectionPointType.VEC3,m,e)}}t.InstanceTransformGlNode=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(36),s=n(16);class o extends r.BaseNodeGlMathFunctionArg1GlNode{static type(){return"length"}initialize_node(){super.initialize_node(),this.gl_connections_controller.set_input_name_function(this._gl_input_name.bind(this)),this.gl_connections_controller.set_expected_output_types_function(this._expected_output_types.bind(this))}_gl_input_name(e){return["x"][e]}gl_method_name(){return"length"}_expected_output_types(){return[s.ConnectionPointType.FLOAT]}}t.LengthGlNode=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(34),s=n(16),o=n(33),i=n(28),a=n(5);class _ extends a.NodeParamsConfig{constructor(){super(...arguments),this.hsv=a.ParamConfig.VECTOR3([1,1,1])}}const c=new _;class l extends r.TypedGlNode{constructor(){super(...arguments),this.params_config=c}static type(){return"luminance"}initialize_node(){super.initialize_node(),this.io.outputs.set_named_output_connection_points([new o.TypedNamedConnectionPoint("lum",s.ConnectionPointType.FLOAT)])}set_lines(e){const t=i.ThreeToGl.vector3(this.variable_for_input("color")),n=`float ${this.gl_var_name("lum")} = linearToRelativeLuminance(${t})`;e.add_body_lines(this,[n])}}t.LuminanceGlNode=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(36),s=n(16);class o extends r.BaseGlMathFunctionGlNode{static type(){return"mix"}initialize_node(){super.initialize_node(),this.gl_connections_controller.set_input_name_function(e=>["value0","value1","blend"][e]),this.gl_connections_controller.set_output_name_function(this._gl_output_name.bind(this)),this.gl_connections_controller.set_expected_input_types_function(this._expected_input_types.bind(this)),this.gl_connections_controller.set_expected_output_types_function(this._expected_output_types.bind(this))}_gl_output_name(){return"mix"}_expected_input_types(){const e=this.gl_connections_controller.first_input_connection_type()||s.ConnectionPointType.FLOAT;return[e,e,s.ConnectionPointType.FLOAT]}_expected_output_types(){return[this._expected_input_types()[0]]}}t.MixGlNode=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(36),s=n(28),o={mult:1};var i;!function(e){e.VALUE="value",e.PRE_ADD="pre_add",e.MULT="mult",e.POST_ADD="post_add"}(i||(i={}));class a extends r.BaseNodeGlMathFunctionArg4GlNode{static type(){return"mult_add"}_gl_input_name(e){return[i.VALUE,i.PRE_ADD,i.MULT,i.POST_ADD][e]}gl_input_default_value(e){return o[e]}set_lines(e){const t=s.ThreeToGl.any(this.variable_for_input(i.VALUE)),n=s.ThreeToGl.any(this.variable_for_input(i.PRE_ADD)),r=s.ThreeToGl.any(this.variable_for_input(i.MULT)),o=s.ThreeToGl.any(this.variable_for_input(i.POST_ADD)),a=this._expected_output_types()[0],_=this.io.outputs.named_output_connection_points[0].name,c=`${a} ${this.gl_var_name(_)} = (${r}*(${t} + ${n})) + ${o}`;e.add_body_lines(this,[c])}}t.MultAddGlNode=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(36),s=n(28);class o extends r.BaseNodeGlMathFunctionArg1GlNode{static type(){return"negate"}initialize_node(){super.initialize_node(),this.gl_connections_controller.set_input_name_function(e=>["in"][e])}_gl_input_name(e){return["in"][e]}set_lines(e){const t=s.ThreeToGl.any(this.variable_for_input(this._gl_input_name(0))),n=`${this.io.inputs.named_input_connection_points[0].type} ${this.gl_var_name(this.gl_connections_controller.output_name(0))} = -1.0 * ${t}`;e.add_body_lines(this,[n])}}t.NegateGlNode=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=r.__importDefault(n(81)),o=n(34),i=n(33),a=n(134),_=r.__importDefault(n(743)),c=r.__importDefault(n(744)),l=r.__importDefault(n(745)),u=r.__importDefault(n(746)),d=r.__importDefault(n(747)),h=r.__importDefault(n(748)),p=r.__importDefault(n(749)),m=n(16);var f;!function(e){e.CLASSIC_PERLIN_2D="Classic Perlin 2D",e.CLASSIC_PERLIN_3D="Classic Perlin 3D",e.CLASSIC_PERLIN_4D="Classic Perlin 4D",e.NOISE_2D="noise2D",e.NOISE_3D="noise3D",e.NOISE_4D="noise4D"}(f||(f={}));const g=[f.CLASSIC_PERLIN_2D,f.CLASSIC_PERLIN_3D,f.CLASSIC_PERLIN_4D,f.NOISE_2D,f.NOISE_3D,f.NOISE_4D],v={[f.CLASSIC_PERLIN_2D]:c.default,[f.CLASSIC_PERLIN_3D]:l.default,[f.CLASSIC_PERLIN_4D]:u.default,[f.NOISE_2D]:d.default,[f.NOISE_3D]:h.default,[f.NOISE_4D]:p.default},y={[f.CLASSIC_PERLIN_2D]:m.ConnectionPointType.VEC2,[f.CLASSIC_PERLIN_3D]:m.ConnectionPointType.VEC3,[f.CLASSIC_PERLIN_4D]:m.ConnectionPointType.VEC4,[f.NOISE_2D]:m.ConnectionPointType.VEC2,[f.NOISE_3D]:m.ConnectionPointType.VEC3,[f.NOISE_4D]:m.ConnectionPointType.VEC4},b={[f.CLASSIC_PERLIN_2D]:m.ConnectionPointType.FLOAT,[f.CLASSIC_PERLIN_3D]:m.ConnectionPointType.FLOAT,[f.CLASSIC_PERLIN_4D]:m.ConnectionPointType.FLOAT,[f.NOISE_2D]:m.ConnectionPointType.FLOAT,[f.NOISE_3D]:m.ConnectionPointType.FLOAT,[f.NOISE_4D]:m.ConnectionPointType.FLOAT},x={[f.CLASSIC_PERLIN_2D]:"cnoise",[f.CLASSIC_PERLIN_3D]:"cnoise",[f.CLASSIC_PERLIN_4D]:"cnoise",[f.NOISE_2D]:"snoise",[f.NOISE_3D]:"snoise",[f.NOISE_4D]:"snoise"};var T;!function(e){e[e.NoChange=0]="NoChange",e[e.Float=1]="Float",e[e.Vec2=2]="Vec2",e[e.Vec3=3]="Vec3",e[e.Vec4=4]="Vec4"}(T||(T={}));const w=[T.NoChange,T.Float,T.Vec2,T.Vec3,T.Vec4],C={[T.NoChange]:"Same as noise",[T.Float]:"Float",[T.Vec2]:"Vec2",[T.Vec3]:"Vec3",[T.Vec4]:"Vec4"},P={[T.NoChange]:m.ConnectionPointType.FLOAT,[T.Float]:m.ConnectionPointType.FLOAT,[T.Vec2]:m.ConnectionPointType.VEC2,[T.Vec3]:m.ConnectionPointType.VEC3,[T.Vec4]:m.ConnectionPointType.VEC4},E=["x","y","z","w"],O=g.indexOf(f.NOISE_3D),A=T.NoChange,M={amp:1,freq:1};var N;!function(e){e.AMP="amp",e.POSITION="position",e.FREQ="freq",e.OFFSET="offset"}(N||(N={}));const S=n(5),R=n(28),L=n(29);class j extends S.NodeParamsConfig{constructor(){super(...arguments),this.type=S.ParamConfig.INTEGER(O,{menu:{entries:g.map((e,t)=>({name:`${e} (output: ${b[e]})`,value:t}))}}),this.output_type=S.ParamConfig.INTEGER(A,{menu:{entries:w.map(e=>{const t=w[e];return{name:C[t],value:t}})}}),this.octaves=S.ParamConfig.INTEGER(3,{range:[1,10],range_locked:[!0,!1]}),this.amp_attenuation=S.ParamConfig.FLOAT(.5,{range:[0,1]}),this.freq_increase=S.ParamConfig.FLOAT(2,{range:[0,10]}),this.separator=S.ParamConfig.SEPARATOR()}}const k=new j;class I extends o.TypedGlNode{constructor(){super(...arguments),this.params_config=k,this.gl_connections_controller=new a.GlConnectionsController(this)}static type(){return"noise"}initialize_node(){super.initialize_node(),this.gl_connections_controller.initialize_node(),this.spare_params_controller.set_inputless_param_names(["octaves","amp_attenuation","freq_increase"]),this.io.outputs.set_named_output_connection_points([new i.TypedNamedConnectionPoint("noise",m.ConnectionPointType.FLOAT)]),this.gl_connections_controller.set_expected_input_types_function(this._expected_input_types.bind(this)),this.gl_connections_controller.set_expected_output_types_function(this._expected_output_types.bind(this))}_gl_input_name(e){return[N.AMP,N.POSITION,N.FREQ,N.OFFSET][e]}gl_input_default_value(e){return M[e]}_expected_input_types(){const e=g[this.pv.type],t=y[e];return[t,t,t,t]}_expected_output_types(){const e=g[this.pv.type],t=w[this.pv.output_type];return t==T.NoChange?[b[e]]:[P[t]]}set_lines(e){const t=[],n=[],r=g[this.pv.type],o=v[r],i=b[r];t.push(new L.FunctionGLDefinition(this,i,_.default)),t.push(new L.FunctionGLDefinition(this,i,o)),t.push(new L.FunctionGLDefinition(this,i,this.fbm_function()));const a=this._expected_output_types()[0];if(a==i){const e=this.single_noise_line();n.push(e)}else{const e=m.ConnectionPointComponentsCountMap[a],t=[],o=this.gl_var_name("noise");for(let i=0;i<e;i++){const e=E[i];t.push(`${o}${e}`);const a=y[r],_=m.ConnectionPointComponentsCountMap[a],c=`${a}(${s.default(_).map(e=>R.ThreeToGl.float(1e3*i)).join(", ")})`,l=this.single_noise_line(e,e,c);n.push(l)}const i=`vec${e} ${o} = vec${e}(${t.join(", ")})`;n.push(i)}e.add_definitions(this,t),e.add_body_lines(this,n)}fbm_method_name(){const e=g[this.pv.type];return`fbm_${x[e]}_${this.name}`}fbm_function(){const e=g[this.pv.type],t=x[e],n=y[e];return`\nfloat ${this.fbm_method_name()} (in ${n} st) {\n\tfloat value = 0.0;\n\tfloat amplitude = 1.0;\n\tfor (int i = 0; i < ${R.ThreeToGl.int(this.pv.octaves)}; i++) {\n\t\tvalue += amplitude * ${t}(st);\n\t\tst *= ${R.ThreeToGl.float(this.pv.freq_increase)};\n\t\tamplitude *= ${R.ThreeToGl.float(this.pv.amp_attenuation)};\n\t}\n\treturn value;\n}\n`}single_noise_line(e,t,n){const r=g[this.pv.type],s=this.fbm_method_name(),o=R.ThreeToGl.any(this.variable_for_input(N.AMP)),i=R.ThreeToGl.any(this.variable_for_input(N.POSITION)),a=R.ThreeToGl.any(this.variable_for_input(N.FREQ));let _=R.ThreeToGl.any(this.variable_for_input(N.OFFSET));n&&(_=`(${_}+${n})`);const c=[`(${i}*${a})+${_}`].join(", "),l=this.gl_var_name("noise"),u=`${o}*${s}(${c})`;if(t)return`float ${l}${e} = (${u}).${t}`;return`${b[r]} ${l} = ${u}`}}t.NoiseGlNode=I},function(e,t,n){"use strict";n.r(t),t.default="// Modulo 289 without a division (only multiplications)\nfloat mod289(float x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\nvec2 mod289(vec2 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\nvec3 mod289(vec3 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\nvec4 mod289(vec4 x) {\n  return x - floor(x * (1.0 / 289.0)) * 289.0;\n}\n// Modulo 7 without a division\nvec3 mod7(vec3 x) {\n  return x - floor(x * (1.0 / 7.0)) * 7.0;\n}\n\n// Permutation polynomial: (34x^2 + x) mod 289\nfloat permute(float x) {\n     return mod289(((x*34.0)+1.0)*x);\n}\nvec3 permute(vec3 x) {\n  return mod289((34.0 * x + 1.0) * x);\n}\nvec4 permute(vec4 x) {\n     return mod289(((x*34.0)+1.0)*x);\n}\n\nfloat taylorInvSqrt(float r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\nvec4 taylorInvSqrt(vec4 r)\n{\n  return 1.79284291400159 - 0.85373472095314 * r;\n}\n\nvec2 fade(vec2 t) {\n  return t*t*t*(t*(t*6.0-15.0)+10.0);\n}\nvec3 fade(vec3 t) {\n  return t*t*t*(t*(t*6.0-15.0)+10.0);\n}\nvec4 fade(vec4 t) {\n  return t*t*t*(t*(t*6.0-15.0)+10.0);\n}"},function(e,t,n){"use strict";n.r(t),t.default='//\n// GLSL textureless classic 2D noise "cnoise",\n// with an RSL-style periodic variant "pnoise".\n// Author:  Stefan Gustavson (stefan.gustavson@liu.se)\n// Version: 2011-08-22\n//\n// Many thanks to Ian McEwan of Ashima Arts for the\n// ideas for permutation and gradient selection.\n//\n// Copyright (c) 2011 Stefan Gustavson. All rights reserved.\n// Distributed under the MIT license. See LICENSE file.\n// https://github.com/stegu/webgl-noise\n//\n\n\n// Classic Perlin noise\nfloat cnoise(vec2 P)\n{\n  vec4 Pi = floor(P.xyxy) + vec4(0.0, 0.0, 1.0, 1.0);\n  vec4 Pf = fract(P.xyxy) - vec4(0.0, 0.0, 1.0, 1.0);\n  Pi = mod289(Pi); // To avoid truncation effects in permutation\n  vec4 ix = Pi.xzxz;\n  vec4 iy = Pi.yyww;\n  vec4 fx = Pf.xzxz;\n  vec4 fy = Pf.yyww;\n\n  vec4 i = permute(permute(ix) + iy);\n\n  vec4 gx = fract(i * (1.0 / 41.0)) * 2.0 - 1.0 ;\n  vec4 gy = abs(gx) - 0.5 ;\n  vec4 tx = floor(gx + 0.5);\n  gx = gx - tx;\n\n  vec2 g00 = vec2(gx.x,gy.x);\n  vec2 g10 = vec2(gx.y,gy.y);\n  vec2 g01 = vec2(gx.z,gy.z);\n  vec2 g11 = vec2(gx.w,gy.w);\n\n  vec4 norm = taylorInvSqrt(vec4(dot(g00, g00), dot(g01, g01), dot(g10, g10), dot(g11, g11)));\n  g00 *= norm.x;  \n  g01 *= norm.y;  \n  g10 *= norm.z;  \n  g11 *= norm.w;  \n\n  float n00 = dot(g00, vec2(fx.x, fy.x));\n  float n10 = dot(g10, vec2(fx.y, fy.y));\n  float n01 = dot(g01, vec2(fx.z, fy.z));\n  float n11 = dot(g11, vec2(fx.w, fy.w));\n\n  vec2 fade_xy = fade(Pf.xy);\n  vec2 n_x = mix(vec2(n00, n01), vec2(n10, n11), fade_xy.x);\n  float n_xy = mix(n_x.x, n_x.y, fade_xy.y);\n  return 2.3 * n_xy;\n}\n\n// Classic Perlin noise, periodic variant\nfloat pnoise(vec2 P, vec2 rep)\n{\n  vec4 Pi = floor(P.xyxy) + vec4(0.0, 0.0, 1.0, 1.0);\n  vec4 Pf = fract(P.xyxy) - vec4(0.0, 0.0, 1.0, 1.0);\n  Pi = mod(Pi, rep.xyxy); // To create noise with explicit period\n  Pi = mod289(Pi);        // To avoid truncation effects in permutation\n  vec4 ix = Pi.xzxz;\n  vec4 iy = Pi.yyww;\n  vec4 fx = Pf.xzxz;\n  vec4 fy = Pf.yyww;\n\n  vec4 i = permute(permute(ix) + iy);\n\n  vec4 gx = fract(i * (1.0 / 41.0)) * 2.0 - 1.0 ;\n  vec4 gy = abs(gx) - 0.5 ;\n  vec4 tx = floor(gx + 0.5);\n  gx = gx - tx;\n\n  vec2 g00 = vec2(gx.x,gy.x);\n  vec2 g10 = vec2(gx.y,gy.y);\n  vec2 g01 = vec2(gx.z,gy.z);\n  vec2 g11 = vec2(gx.w,gy.w);\n\n  vec4 norm = taylorInvSqrt(vec4(dot(g00, g00), dot(g01, g01), dot(g10, g10), dot(g11, g11)));\n  g00 *= norm.x;  \n  g01 *= norm.y;  \n  g10 *= norm.z;  \n  g11 *= norm.w;  \n\n  float n00 = dot(g00, vec2(fx.x, fy.x));\n  float n10 = dot(g10, vec2(fx.y, fy.y));\n  float n01 = dot(g01, vec2(fx.z, fy.z));\n  float n11 = dot(g11, vec2(fx.w, fy.w));\n\n  vec2 fade_xy = fade(Pf.xy);\n  vec2 n_x = mix(vec2(n00, n01), vec2(n10, n11), fade_xy.x);\n  float n_xy = mix(n_x.x, n_x.y, fade_xy.y);\n  return 2.3 * n_xy;\n}\n'},function(e,t,n){"use strict";n.r(t),t.default='//\n// GLSL textureless classic 3D noise "cnoise",\n// with an RSL-style periodic variant "pnoise".\n// Author:  Stefan Gustavson (stefan.gustavson@liu.se)\n// Version: 2011-10-11\n//\n// Many thanks to Ian McEwan of Ashima Arts for the\n// ideas for permutation and gradient selection.\n//\n// Copyright (c) 2011 Stefan Gustavson. All rights reserved.\n// Distributed under the MIT license. See LICENSE file.\n// https://github.com/stegu/webgl-noise\n//\n\n// Classic Perlin noise\nfloat cnoise(vec3 P)\n{\n  vec3 Pi0 = floor(P); // Integer part for indexing\n  vec3 Pi1 = Pi0 + vec3(1.0); // Integer part + 1\n  Pi0 = mod289(Pi0);\n  Pi1 = mod289(Pi1);\n  vec3 Pf0 = fract(P); // Fractional part for interpolation\n  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 * (1.0 / 7.0);\n  vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 * (1.0 / 7.0);\n  vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); \n  return 2.2 * n_xyz;\n}\n\n// Classic Perlin noise, periodic variant\nfloat pnoise(vec3 P, vec3 rep)\n{\n  vec3 Pi0 = mod(floor(P), rep); // Integer part, modulo period\n  vec3 Pi1 = mod(Pi0 + vec3(1.0), rep); // Integer part + 1, mod period\n  Pi0 = mod289(Pi0);\n  Pi1 = mod289(Pi1);\n  vec3 Pf0 = fract(P); // Fractional part for interpolation\n  vec3 Pf1 = Pf0 - vec3(1.0); // Fractional part - 1.0\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = Pi0.zzzz;\n  vec4 iz1 = Pi1.zzzz;\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n\n  vec4 gx0 = ixy0 * (1.0 / 7.0);\n  vec4 gy0 = fract(floor(gx0) * (1.0 / 7.0)) - 0.5;\n  gx0 = fract(gx0);\n  vec4 gz0 = vec4(0.5) - abs(gx0) - abs(gy0);\n  vec4 sz0 = step(gz0, vec4(0.0));\n  gx0 -= sz0 * (step(0.0, gx0) - 0.5);\n  gy0 -= sz0 * (step(0.0, gy0) - 0.5);\n\n  vec4 gx1 = ixy1 * (1.0 / 7.0);\n  vec4 gy1 = fract(floor(gx1) * (1.0 / 7.0)) - 0.5;\n  gx1 = fract(gx1);\n  vec4 gz1 = vec4(0.5) - abs(gx1) - abs(gy1);\n  vec4 sz1 = step(gz1, vec4(0.0));\n  gx1 -= sz1 * (step(0.0, gx1) - 0.5);\n  gy1 -= sz1 * (step(0.0, gy1) - 0.5);\n\n  vec3 g000 = vec3(gx0.x,gy0.x,gz0.x);\n  vec3 g100 = vec3(gx0.y,gy0.y,gz0.y);\n  vec3 g010 = vec3(gx0.z,gy0.z,gz0.z);\n  vec3 g110 = vec3(gx0.w,gy0.w,gz0.w);\n  vec3 g001 = vec3(gx1.x,gy1.x,gz1.x);\n  vec3 g101 = vec3(gx1.y,gy1.y,gz1.y);\n  vec3 g011 = vec3(gx1.z,gy1.z,gz1.z);\n  vec3 g111 = vec3(gx1.w,gy1.w,gz1.w);\n\n  vec4 norm0 = taylorInvSqrt(vec4(dot(g000, g000), dot(g010, g010), dot(g100, g100), dot(g110, g110)));\n  g000 *= norm0.x;\n  g010 *= norm0.y;\n  g100 *= norm0.z;\n  g110 *= norm0.w;\n  vec4 norm1 = taylorInvSqrt(vec4(dot(g001, g001), dot(g011, g011), dot(g101, g101), dot(g111, g111)));\n  g001 *= norm1.x;\n  g011 *= norm1.y;\n  g101 *= norm1.z;\n  g111 *= norm1.w;\n\n  float n000 = dot(g000, Pf0);\n  float n100 = dot(g100, vec3(Pf1.x, Pf0.yz));\n  float n010 = dot(g010, vec3(Pf0.x, Pf1.y, Pf0.z));\n  float n110 = dot(g110, vec3(Pf1.xy, Pf0.z));\n  float n001 = dot(g001, vec3(Pf0.xy, Pf1.z));\n  float n101 = dot(g101, vec3(Pf1.x, Pf0.y, Pf1.z));\n  float n011 = dot(g011, vec3(Pf0.x, Pf1.yz));\n  float n111 = dot(g111, Pf1);\n\n  vec3 fade_xyz = fade(Pf0);\n  vec4 n_z = mix(vec4(n000, n100, n010, n110), vec4(n001, n101, n011, n111), fade_xyz.z);\n  vec2 n_yz = mix(n_z.xy, n_z.zw, fade_xyz.y);\n  float n_xyz = mix(n_yz.x, n_yz.y, fade_xyz.x); \n  return 2.2 * n_xyz;\n}\n'},function(e,t,n){"use strict";n.r(t),t.default='//\n// GLSL textureless classic 4D noise "cnoise",\n// with an RSL-style periodic variant "pnoise".\n// Author:  Stefan Gustavson (stefan.gustavson@liu.se)\n// Version: 2011-08-22\n//\n// Many thanks to Ian McEwan of Ashima Arts for the\n// ideas for permutation and gradient selection.\n//\n// Copyright (c) 2011 Stefan Gustavson. All rights reserved.\n// Distributed under the MIT license. See LICENSE file.\n// https://github.com/stegu/webgl-noise\n//\n\n\n\n// Classic Perlin noise\nfloat cnoise(vec4 P)\n{\n  vec4 Pi0 = floor(P); // Integer part for indexing\n  vec4 Pi1 = Pi0 + 1.0; // Integer part + 1\n  Pi0 = mod289(Pi0);\n  Pi1 = mod289(Pi1);\n  vec4 Pf0 = fract(P); // Fractional part for interpolation\n  vec4 Pf1 = Pf0 - 1.0; // Fractional part - 1.0\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = vec4(Pi0.zzzz);\n  vec4 iz1 = vec4(Pi1.zzzz);\n  vec4 iw0 = vec4(Pi0.wwww);\n  vec4 iw1 = vec4(Pi1.wwww);\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n  vec4 ixy00 = permute(ixy0 + iw0);\n  vec4 ixy01 = permute(ixy0 + iw1);\n  vec4 ixy10 = permute(ixy1 + iw0);\n  vec4 ixy11 = permute(ixy1 + iw1);\n\n  vec4 gx00 = ixy00 * (1.0 / 7.0);\n  vec4 gy00 = floor(gx00) * (1.0 / 7.0);\n  vec4 gz00 = floor(gy00) * (1.0 / 6.0);\n  gx00 = fract(gx00) - 0.5;\n  gy00 = fract(gy00) - 0.5;\n  gz00 = fract(gz00) - 0.5;\n  vec4 gw00 = vec4(0.75) - abs(gx00) - abs(gy00) - abs(gz00);\n  vec4 sw00 = step(gw00, vec4(0.0));\n  gx00 -= sw00 * (step(0.0, gx00) - 0.5);\n  gy00 -= sw00 * (step(0.0, gy00) - 0.5);\n\n  vec4 gx01 = ixy01 * (1.0 / 7.0);\n  vec4 gy01 = floor(gx01) * (1.0 / 7.0);\n  vec4 gz01 = floor(gy01) * (1.0 / 6.0);\n  gx01 = fract(gx01) - 0.5;\n  gy01 = fract(gy01) - 0.5;\n  gz01 = fract(gz01) - 0.5;\n  vec4 gw01 = vec4(0.75) - abs(gx01) - abs(gy01) - abs(gz01);\n  vec4 sw01 = step(gw01, vec4(0.0));\n  gx01 -= sw01 * (step(0.0, gx01) - 0.5);\n  gy01 -= sw01 * (step(0.0, gy01) - 0.5);\n\n  vec4 gx10 = ixy10 * (1.0 / 7.0);\n  vec4 gy10 = floor(gx10) * (1.0 / 7.0);\n  vec4 gz10 = floor(gy10) * (1.0 / 6.0);\n  gx10 = fract(gx10) - 0.5;\n  gy10 = fract(gy10) - 0.5;\n  gz10 = fract(gz10) - 0.5;\n  vec4 gw10 = vec4(0.75) - abs(gx10) - abs(gy10) - abs(gz10);\n  vec4 sw10 = step(gw10, vec4(0.0));\n  gx10 -= sw10 * (step(0.0, gx10) - 0.5);\n  gy10 -= sw10 * (step(0.0, gy10) - 0.5);\n\n  vec4 gx11 = ixy11 * (1.0 / 7.0);\n  vec4 gy11 = floor(gx11) * (1.0 / 7.0);\n  vec4 gz11 = floor(gy11) * (1.0 / 6.0);\n  gx11 = fract(gx11) - 0.5;\n  gy11 = fract(gy11) - 0.5;\n  gz11 = fract(gz11) - 0.5;\n  vec4 gw11 = vec4(0.75) - abs(gx11) - abs(gy11) - abs(gz11);\n  vec4 sw11 = step(gw11, vec4(0.0));\n  gx11 -= sw11 * (step(0.0, gx11) - 0.5);\n  gy11 -= sw11 * (step(0.0, gy11) - 0.5);\n\n  vec4 g0000 = vec4(gx00.x,gy00.x,gz00.x,gw00.x);\n  vec4 g1000 = vec4(gx00.y,gy00.y,gz00.y,gw00.y);\n  vec4 g0100 = vec4(gx00.z,gy00.z,gz00.z,gw00.z);\n  vec4 g1100 = vec4(gx00.w,gy00.w,gz00.w,gw00.w);\n  vec4 g0010 = vec4(gx10.x,gy10.x,gz10.x,gw10.x);\n  vec4 g1010 = vec4(gx10.y,gy10.y,gz10.y,gw10.y);\n  vec4 g0110 = vec4(gx10.z,gy10.z,gz10.z,gw10.z);\n  vec4 g1110 = vec4(gx10.w,gy10.w,gz10.w,gw10.w);\n  vec4 g0001 = vec4(gx01.x,gy01.x,gz01.x,gw01.x);\n  vec4 g1001 = vec4(gx01.y,gy01.y,gz01.y,gw01.y);\n  vec4 g0101 = vec4(gx01.z,gy01.z,gz01.z,gw01.z);\n  vec4 g1101 = vec4(gx01.w,gy01.w,gz01.w,gw01.w);\n  vec4 g0011 = vec4(gx11.x,gy11.x,gz11.x,gw11.x);\n  vec4 g1011 = vec4(gx11.y,gy11.y,gz11.y,gw11.y);\n  vec4 g0111 = vec4(gx11.z,gy11.z,gz11.z,gw11.z);\n  vec4 g1111 = vec4(gx11.w,gy11.w,gz11.w,gw11.w);\n\n  vec4 norm00 = taylorInvSqrt(vec4(dot(g0000, g0000), dot(g0100, g0100), dot(g1000, g1000), dot(g1100, g1100)));\n  g0000 *= norm00.x;\n  g0100 *= norm00.y;\n  g1000 *= norm00.z;\n  g1100 *= norm00.w;\n\n  vec4 norm01 = taylorInvSqrt(vec4(dot(g0001, g0001), dot(g0101, g0101), dot(g1001, g1001), dot(g1101, g1101)));\n  g0001 *= norm01.x;\n  g0101 *= norm01.y;\n  g1001 *= norm01.z;\n  g1101 *= norm01.w;\n\n  vec4 norm10 = taylorInvSqrt(vec4(dot(g0010, g0010), dot(g0110, g0110), dot(g1010, g1010), dot(g1110, g1110)));\n  g0010 *= norm10.x;\n  g0110 *= norm10.y;\n  g1010 *= norm10.z;\n  g1110 *= norm10.w;\n\n  vec4 norm11 = taylorInvSqrt(vec4(dot(g0011, g0011), dot(g0111, g0111), dot(g1011, g1011), dot(g1111, g1111)));\n  g0011 *= norm11.x;\n  g0111 *= norm11.y;\n  g1011 *= norm11.z;\n  g1111 *= norm11.w;\n\n  float n0000 = dot(g0000, Pf0);\n  float n1000 = dot(g1000, vec4(Pf1.x, Pf0.yzw));\n  float n0100 = dot(g0100, vec4(Pf0.x, Pf1.y, Pf0.zw));\n  float n1100 = dot(g1100, vec4(Pf1.xy, Pf0.zw));\n  float n0010 = dot(g0010, vec4(Pf0.xy, Pf1.z, Pf0.w));\n  float n1010 = dot(g1010, vec4(Pf1.x, Pf0.y, Pf1.z, Pf0.w));\n  float n0110 = dot(g0110, vec4(Pf0.x, Pf1.yz, Pf0.w));\n  float n1110 = dot(g1110, vec4(Pf1.xyz, Pf0.w));\n  float n0001 = dot(g0001, vec4(Pf0.xyz, Pf1.w));\n  float n1001 = dot(g1001, vec4(Pf1.x, Pf0.yz, Pf1.w));\n  float n0101 = dot(g0101, vec4(Pf0.x, Pf1.y, Pf0.z, Pf1.w));\n  float n1101 = dot(g1101, vec4(Pf1.xy, Pf0.z, Pf1.w));\n  float n0011 = dot(g0011, vec4(Pf0.xy, Pf1.zw));\n  float n1011 = dot(g1011, vec4(Pf1.x, Pf0.y, Pf1.zw));\n  float n0111 = dot(g0111, vec4(Pf0.x, Pf1.yzw));\n  float n1111 = dot(g1111, Pf1);\n\n  vec4 fade_xyzw = fade(Pf0);\n  vec4 n_0w = mix(vec4(n0000, n1000, n0100, n1100), vec4(n0001, n1001, n0101, n1101), fade_xyzw.w);\n  vec4 n_1w = mix(vec4(n0010, n1010, n0110, n1110), vec4(n0011, n1011, n0111, n1111), fade_xyzw.w);\n  vec4 n_zw = mix(n_0w, n_1w, fade_xyzw.z);\n  vec2 n_yzw = mix(n_zw.xy, n_zw.zw, fade_xyzw.y);\n  float n_xyzw = mix(n_yzw.x, n_yzw.y, fade_xyzw.x);\n  return 2.2 * n_xyzw;\n}\n\n// Classic Perlin noise, periodic version\nfloat pnoise(vec4 P, vec4 rep)\n{\n  vec4 Pi0 = mod(floor(P), rep); // Integer part modulo rep\n  vec4 Pi1 = mod(Pi0 + 1.0, rep); // Integer part + 1 mod rep\n  Pi0 = mod289(Pi0);\n  Pi1 = mod289(Pi1);\n  vec4 Pf0 = fract(P); // Fractional part for interpolation\n  vec4 Pf1 = Pf0 - 1.0; // Fractional part - 1.0\n  vec4 ix = vec4(Pi0.x, Pi1.x, Pi0.x, Pi1.x);\n  vec4 iy = vec4(Pi0.yy, Pi1.yy);\n  vec4 iz0 = vec4(Pi0.zzzz);\n  vec4 iz1 = vec4(Pi1.zzzz);\n  vec4 iw0 = vec4(Pi0.wwww);\n  vec4 iw1 = vec4(Pi1.wwww);\n\n  vec4 ixy = permute(permute(ix) + iy);\n  vec4 ixy0 = permute(ixy + iz0);\n  vec4 ixy1 = permute(ixy + iz1);\n  vec4 ixy00 = permute(ixy0 + iw0);\n  vec4 ixy01 = permute(ixy0 + iw1);\n  vec4 ixy10 = permute(ixy1 + iw0);\n  vec4 ixy11 = permute(ixy1 + iw1);\n\n  vec4 gx00 = ixy00 * (1.0 / 7.0);\n  vec4 gy00 = floor(gx00) * (1.0 / 7.0);\n  vec4 gz00 = floor(gy00) * (1.0 / 6.0);\n  gx00 = fract(gx00) - 0.5;\n  gy00 = fract(gy00) - 0.5;\n  gz00 = fract(gz00) - 0.5;\n  vec4 gw00 = vec4(0.75) - abs(gx00) - abs(gy00) - abs(gz00);\n  vec4 sw00 = step(gw00, vec4(0.0));\n  gx00 -= sw00 * (step(0.0, gx00) - 0.5);\n  gy00 -= sw00 * (step(0.0, gy00) - 0.5);\n\n  vec4 gx01 = ixy01 * (1.0 / 7.0);\n  vec4 gy01 = floor(gx01) * (1.0 / 7.0);\n  vec4 gz01 = floor(gy01) * (1.0 / 6.0);\n  gx01 = fract(gx01) - 0.5;\n  gy01 = fract(gy01) - 0.5;\n  gz01 = fract(gz01) - 0.5;\n  vec4 gw01 = vec4(0.75) - abs(gx01) - abs(gy01) - abs(gz01);\n  vec4 sw01 = step(gw01, vec4(0.0));\n  gx01 -= sw01 * (step(0.0, gx01) - 0.5);\n  gy01 -= sw01 * (step(0.0, gy01) - 0.5);\n\n  vec4 gx10 = ixy10 * (1.0 / 7.0);\n  vec4 gy10 = floor(gx10) * (1.0 / 7.0);\n  vec4 gz10 = floor(gy10) * (1.0 / 6.0);\n  gx10 = fract(gx10) - 0.5;\n  gy10 = fract(gy10) - 0.5;\n  gz10 = fract(gz10) - 0.5;\n  vec4 gw10 = vec4(0.75) - abs(gx10) - abs(gy10) - abs(gz10);\n  vec4 sw10 = step(gw10, vec4(0.0));\n  gx10 -= sw10 * (step(0.0, gx10) - 0.5);\n  gy10 -= sw10 * (step(0.0, gy10) - 0.5);\n\n  vec4 gx11 = ixy11 * (1.0 / 7.0);\n  vec4 gy11 = floor(gx11) * (1.0 / 7.0);\n  vec4 gz11 = floor(gy11) * (1.0 / 6.0);\n  gx11 = fract(gx11) - 0.5;\n  gy11 = fract(gy11) - 0.5;\n  gz11 = fract(gz11) - 0.5;\n  vec4 gw11 = vec4(0.75) - abs(gx11) - abs(gy11) - abs(gz11);\n  vec4 sw11 = step(gw11, vec4(0.0));\n  gx11 -= sw11 * (step(0.0, gx11) - 0.5);\n  gy11 -= sw11 * (step(0.0, gy11) - 0.5);\n\n  vec4 g0000 = vec4(gx00.x,gy00.x,gz00.x,gw00.x);\n  vec4 g1000 = vec4(gx00.y,gy00.y,gz00.y,gw00.y);\n  vec4 g0100 = vec4(gx00.z,gy00.z,gz00.z,gw00.z);\n  vec4 g1100 = vec4(gx00.w,gy00.w,gz00.w,gw00.w);\n  vec4 g0010 = vec4(gx10.x,gy10.x,gz10.x,gw10.x);\n  vec4 g1010 = vec4(gx10.y,gy10.y,gz10.y,gw10.y);\n  vec4 g0110 = vec4(gx10.z,gy10.z,gz10.z,gw10.z);\n  vec4 g1110 = vec4(gx10.w,gy10.w,gz10.w,gw10.w);\n  vec4 g0001 = vec4(gx01.x,gy01.x,gz01.x,gw01.x);\n  vec4 g1001 = vec4(gx01.y,gy01.y,gz01.y,gw01.y);\n  vec4 g0101 = vec4(gx01.z,gy01.z,gz01.z,gw01.z);\n  vec4 g1101 = vec4(gx01.w,gy01.w,gz01.w,gw01.w);\n  vec4 g0011 = vec4(gx11.x,gy11.x,gz11.x,gw11.x);\n  vec4 g1011 = vec4(gx11.y,gy11.y,gz11.y,gw11.y);\n  vec4 g0111 = vec4(gx11.z,gy11.z,gz11.z,gw11.z);\n  vec4 g1111 = vec4(gx11.w,gy11.w,gz11.w,gw11.w);\n\n  vec4 norm00 = taylorInvSqrt(vec4(dot(g0000, g0000), dot(g0100, g0100), dot(g1000, g1000), dot(g1100, g1100)));\n  g0000 *= norm00.x;\n  g0100 *= norm00.y;\n  g1000 *= norm00.z;\n  g1100 *= norm00.w;\n\n  vec4 norm01 = taylorInvSqrt(vec4(dot(g0001, g0001), dot(g0101, g0101), dot(g1001, g1001), dot(g1101, g1101)));\n  g0001 *= norm01.x;\n  g0101 *= norm01.y;\n  g1001 *= norm01.z;\n  g1101 *= norm01.w;\n\n  vec4 norm10 = taylorInvSqrt(vec4(dot(g0010, g0010), dot(g0110, g0110), dot(g1010, g1010), dot(g1110, g1110)));\n  g0010 *= norm10.x;\n  g0110 *= norm10.y;\n  g1010 *= norm10.z;\n  g1110 *= norm10.w;\n\n  vec4 norm11 = taylorInvSqrt(vec4(dot(g0011, g0011), dot(g0111, g0111), dot(g1011, g1011), dot(g1111, g1111)));\n  g0011 *= norm11.x;\n  g0111 *= norm11.y;\n  g1011 *= norm11.z;\n  g1111 *= norm11.w;\n\n  float n0000 = dot(g0000, Pf0);\n  float n1000 = dot(g1000, vec4(Pf1.x, Pf0.yzw));\n  float n0100 = dot(g0100, vec4(Pf0.x, Pf1.y, Pf0.zw));\n  float n1100 = dot(g1100, vec4(Pf1.xy, Pf0.zw));\n  float n0010 = dot(g0010, vec4(Pf0.xy, Pf1.z, Pf0.w));\n  float n1010 = dot(g1010, vec4(Pf1.x, Pf0.y, Pf1.z, Pf0.w));\n  float n0110 = dot(g0110, vec4(Pf0.x, Pf1.yz, Pf0.w));\n  float n1110 = dot(g1110, vec4(Pf1.xyz, Pf0.w));\n  float n0001 = dot(g0001, vec4(Pf0.xyz, Pf1.w));\n  float n1001 = dot(g1001, vec4(Pf1.x, Pf0.yz, Pf1.w));\n  float n0101 = dot(g0101, vec4(Pf0.x, Pf1.y, Pf0.z, Pf1.w));\n  float n1101 = dot(g1101, vec4(Pf1.xy, Pf0.z, Pf1.w));\n  float n0011 = dot(g0011, vec4(Pf0.xy, Pf1.zw));\n  float n1011 = dot(g1011, vec4(Pf1.x, Pf0.y, Pf1.zw));\n  float n0111 = dot(g0111, vec4(Pf0.x, Pf1.yzw));\n  float n1111 = dot(g1111, Pf1);\n\n  vec4 fade_xyzw = fade(Pf0);\n  vec4 n_0w = mix(vec4(n0000, n1000, n0100, n1100), vec4(n0001, n1001, n0101, n1101), fade_xyzw.w);\n  vec4 n_1w = mix(vec4(n0010, n1010, n0110, n1110), vec4(n0011, n1011, n0111, n1111), fade_xyzw.w);\n  vec4 n_zw = mix(n_0w, n_1w, fade_xyzw.z);\n  vec2 n_yzw = mix(n_zw.xy, n_zw.zw, fade_xyzw.y);\n  float n_xyzw = mix(n_yzw.x, n_yzw.y, fade_xyzw.x);\n  return 2.2 * n_xyzw;\n}\n'},function(e,t,n){"use strict";n.r(t),t.default="//\n// Description : Array and textureless GLSL 2D simplex noise function.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : stegu\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//               https://github.com/stegu/webgl-noise\n// \n\n\nfloat snoise(vec2 v)\n  {\n  const vec4 C = vec4(0.211324865405187,  // (3.0-sqrt(3.0))/6.0\n                      0.366025403784439,  // 0.5*(sqrt(3.0)-1.0)\n                     -0.577350269189626,  // -1.0 + 2.0 * C.x\n                      0.024390243902439); // 1.0 / 41.0\n// First corner\n  vec2 i  = floor(v + dot(v, C.yy) );\n  vec2 x0 = v -   i + dot(i, C.xx);\n\n// Other corners\n  vec2 i1;\n  //i1.x = step( x0.y, x0.x ); // x0.x > x0.y ? 1.0 : 0.0\n  //i1.y = 1.0 - i1.x;\n  i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0);\n  // x0 = x0 - 0.0 + 0.0 * C.xx ;\n  // x1 = x0 - i1 + 1.0 * C.xx ;\n  // x2 = x0 - 1.0 + 2.0 * C.xx ;\n  vec4 x12 = x0.xyxy + C.xxzz;\n  x12.xy -= i1;\n\n// Permutations\n  i = mod289(i); // Avoid truncation effects in permutation\n  vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 ))\n\t\t+ i.x + vec3(0.0, i1.x, 1.0 ));\n\n  vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0);\n  m = m*m ;\n  m = m*m ;\n\n// Gradients: 41 points uniformly over a line, mapped onto a diamond.\n// The ring size 17*17 = 289 is close to a multiple of 41 (41*7 = 287)\n\n  vec3 x = 2.0 * fract(p * C.www) - 1.0;\n  vec3 h = abs(x) - 0.5;\n  vec3 ox = floor(x + 0.5);\n  vec3 a0 = x - ox;\n\n// Normalise gradients implicitly by scaling m\n// Approximation of: m *= inversesqrt( a0*a0 + h*h );\n  m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h );\n\n// Compute final noise value at P\n  vec3 g;\n  g.x  = a0.x  * x0.x  + h.x  * x0.y;\n  g.yz = a0.yz * x12.xz + h.yz * x12.yw;\n  return 130.0 * dot(m, g);\n}\n"},function(e,t,n){"use strict";n.r(t),t.default="//\n// Description : Array and textureless GLSL 2D/3D/4D simplex \n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : stegu\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//               https://github.com/stegu/webgl-noise\n// \n\n\n\nfloat snoise(vec3 v)\n  { \n  const vec2  C = vec2(1.0/6.0, 1.0/3.0) ;\n  const vec4  D = vec4(0.0, 0.5, 1.0, 2.0);\n\n// First corner\n  vec3 i  = floor(v + dot(v, C.yyy) );\n  vec3 x0 =   v - i + dot(i, C.xxx) ;\n\n// Other corners\n  vec3 g = step(x0.yzx, x0.xyz);\n  vec3 l = 1.0 - g;\n  vec3 i1 = min( g.xyz, l.zxy );\n  vec3 i2 = max( g.xyz, l.zxy );\n\n  //   x0 = x0 - 0.0 + 0.0 * C.xxx;\n  //   x1 = x0 - i1  + 1.0 * C.xxx;\n  //   x2 = x0 - i2  + 2.0 * C.xxx;\n  //   x3 = x0 - 1.0 + 3.0 * C.xxx;\n  vec3 x1 = x0 - i1 + C.xxx;\n  vec3 x2 = x0 - i2 + C.yyy; // 2.0*C.x = 1/3 = C.y\n  vec3 x3 = x0 - D.yyy;      // -1.0+3.0*C.x = -0.5 = -D.y\n\n// Permutations\n  i = mod289(i); \n  vec4 p = permute( permute( permute( \n             i.z + vec4(0.0, i1.z, i2.z, 1.0 ))\n           + i.y + vec4(0.0, i1.y, i2.y, 1.0 )) \n           + i.x + vec4(0.0, i1.x, i2.x, 1.0 ));\n\n// Gradients: 7x7 points over a square, mapped onto an octahedron.\n// The ring size 17*17 = 289 is close to a multiple of 49 (49*6 = 294)\n  float n_ = 0.142857142857; // 1.0/7.0\n  vec3  ns = n_ * D.wyz - D.xzx;\n\n  vec4 j = p - 49.0 * floor(p * ns.z * ns.z);  //  mod(p,7*7)\n\n  vec4 x_ = floor(j * ns.z);\n  vec4 y_ = floor(j - 7.0 * x_ );    // mod(j,N)\n\n  vec4 x = x_ *ns.x + ns.yyyy;\n  vec4 y = y_ *ns.x + ns.yyyy;\n  vec4 h = 1.0 - abs(x) - abs(y);\n\n  vec4 b0 = vec4( x.xy, y.xy );\n  vec4 b1 = vec4( x.zw, y.zw );\n\n  //vec4 s0 = vec4(lessThan(b0,0.0))*2.0 - 1.0;\n  //vec4 s1 = vec4(lessThan(b1,0.0))*2.0 - 1.0;\n  vec4 s0 = floor(b0)*2.0 + 1.0;\n  vec4 s1 = floor(b1)*2.0 + 1.0;\n  vec4 sh = -step(h, vec4(0.0));\n\n  vec4 a0 = b0.xzyw + s0.xzyw*sh.xxyy ;\n  vec4 a1 = b1.xzyw + s1.xzyw*sh.zzww ;\n\n  vec3 p0 = vec3(a0.xy,h.x);\n  vec3 p1 = vec3(a0.zw,h.y);\n  vec3 p2 = vec3(a1.xy,h.z);\n  vec3 p3 = vec3(a1.zw,h.w);\n\n//Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n\n// Mix final noise value\n  vec4 m = max(0.6 - vec4(dot(x0,x0), dot(x1,x1), dot(x2,x2), dot(x3,x3)), 0.0);\n  m = m * m;\n  return 42.0 * dot( m*m, vec4( dot(p0,x0), dot(p1,x1), \n                                dot(p2,x2), dot(p3,x3) ) );\n  }\n"},function(e,t,n){"use strict";n.r(t),t.default="//\n// Description : Array and textureless GLSL 2D/3D/4D simplex \n//               noise functions.\n//      Author : Ian McEwan, Ashima Arts.\n//  Maintainer : stegu\n//     Lastmod : 20110822 (ijm)\n//     License : Copyright (C) 2011 Ashima Arts. All rights reserved.\n//               Distributed under the MIT License. See LICENSE file.\n//               https://github.com/ashima/webgl-noise\n//               https://github.com/stegu/webgl-noise\n// \n\n\n\n\n\n\n\nvec4 grad4(float j, vec4 ip)\n  {\n  const vec4 ones = vec4(1.0, 1.0, 1.0, -1.0);\n  vec4 p,s;\n\n  p.xyz = floor( fract (vec3(j) * ip.xyz) * 7.0) * ip.z - 1.0;\n  p.w = 1.5 - dot(abs(p.xyz), ones.xyz);\n  s = vec4(lessThan(p, vec4(0.0)));\n  p.xyz = p.xyz + (s.xyz*2.0 - 1.0) * s.www; \n\n  return p;\n  }\n\t\t\t\t\t\t\n// (sqrt(5) - 1)/4 = F4, used once below\n#define F4 0.309016994374947451\n\nfloat snoise(vec4 v)\n  {\n  const vec4  C = vec4( 0.138196601125011,  // (5 - sqrt(5))/20  G4\n                        0.276393202250021,  // 2 * G4\n                        0.414589803375032,  // 3 * G4\n                       -0.447213595499958); // -1 + 4 * G4\n\n// First corner\n  vec4 i  = floor(v + dot(v, vec4(F4)) );\n  vec4 x0 = v -   i + dot(i, C.xxxx);\n\n// Other corners\n\n// Rank sorting originally contributed by Bill Licea-Kane, AMD (formerly ATI)\n  vec4 i0;\n  vec3 isX = step( x0.yzw, x0.xxx );\n  vec3 isYZ = step( x0.zww, x0.yyz );\n//  i0.x = dot( isX, vec3( 1.0 ) );\n  i0.x = isX.x + isX.y + isX.z;\n  i0.yzw = 1.0 - isX;\n//  i0.y += dot( isYZ.xy, vec2( 1.0 ) );\n  i0.y += isYZ.x + isYZ.y;\n  i0.zw += 1.0 - isYZ.xy;\n  i0.z += isYZ.z;\n  i0.w += 1.0 - isYZ.z;\n\n  // i0 now contains the unique values 0,1,2,3 in each channel\n  vec4 i3 = clamp( i0, 0.0, 1.0 );\n  vec4 i2 = clamp( i0-1.0, 0.0, 1.0 );\n  vec4 i1 = clamp( i0-2.0, 0.0, 1.0 );\n\n  //  x0 = x0 - 0.0 + 0.0 * C.xxxx\n  //  x1 = x0 - i1  + 1.0 * C.xxxx\n  //  x2 = x0 - i2  + 2.0 * C.xxxx\n  //  x3 = x0 - i3  + 3.0 * C.xxxx\n  //  x4 = x0 - 1.0 + 4.0 * C.xxxx\n  vec4 x1 = x0 - i1 + C.xxxx;\n  vec4 x2 = x0 - i2 + C.yyyy;\n  vec4 x3 = x0 - i3 + C.zzzz;\n  vec4 x4 = x0 + C.wwww;\n\n// Permutations\n  i = mod289(i); \n  float j0 = permute( permute( permute( permute(i.w) + i.z) + i.y) + i.x);\n  vec4 j1 = permute( permute( permute( permute (\n             i.w + vec4(i1.w, i2.w, i3.w, 1.0 ))\n           + i.z + vec4(i1.z, i2.z, i3.z, 1.0 ))\n           + i.y + vec4(i1.y, i2.y, i3.y, 1.0 ))\n           + i.x + vec4(i1.x, i2.x, i3.x, 1.0 ));\n\n// Gradients: 7x7x6 points over a cube, mapped onto a 4-cross polytope\n// 7*7*6 = 294, which is close to the ring size 17*17 = 289.\n  vec4 ip = vec4(1.0/294.0, 1.0/49.0, 1.0/7.0, 0.0) ;\n\n  vec4 p0 = grad4(j0,   ip);\n  vec4 p1 = grad4(j1.x, ip);\n  vec4 p2 = grad4(j1.y, ip);\n  vec4 p3 = grad4(j1.z, ip);\n  vec4 p4 = grad4(j1.w, ip);\n\n// Normalise gradients\n  vec4 norm = taylorInvSqrt(vec4(dot(p0,p0), dot(p1,p1), dot(p2, p2), dot(p3,p3)));\n  p0 *= norm.x;\n  p1 *= norm.y;\n  p2 *= norm.z;\n  p3 *= norm.w;\n  p4 *= taylorInvSqrt(dot(p4,p4));\n\n// Mix contributions from the five corners\n  vec3 m0 = max(0.6 - vec3(dot(x0,x0), dot(x1,x1), dot(x2,x2)), 0.0);\n  vec2 m1 = max(0.6 - vec2(dot(x3,x3), dot(x4,x4)            ), 0.0);\n  m0 = m0 * m0;\n  m1 = m1 * m1;\n  return 49.0 * ( dot(m0*m0, vec3( dot( p0, x0 ), dot( p1, x1 ), dot( p2, x2 )))\n               + dot(m1*m1, vec2( dot( p3, x3 ), dot( p4, x4 ) ) ) ) ;\n\n  }\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(36),s=n(28);class o extends r.BaseNodeGlMathFunctionArg1GlNode{static type(){return"null"}set_lines(e){const t=s.ThreeToGl.any(this.variable_for_input("in")),n=`${this.io.inputs.named_input_connection_points[0].type} ${this.gl_var_name("value")} = ${t}`;e.add_body_lines(this,[n])}}t.NullGlNode=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(34),s=n(5);class o extends s.NodeParamsConfig{}const i=new o;class a extends r.TypedGlNode{constructor(){super(...arguments),this.params_config=i}static type(){return"output"}initialize_node(){super.initialize_node(),this.add_post_dirty_hook("_set_mat_to_recompile",this._set_mat_to_recompile.bind(this))}create_params(){var e;null===(e=this.material_node)||void 0===e||e.assembler_controller.add_output_params(this)}set_lines(e){var t;null===(t=this.material_node)||void 0===t||t.assembler_controller.assembler.set_node_lines_output(this,e)}}t.OutputGlNode=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(34),o=n(16),i=r.__importDefault(n(21)),a=n(5),_=n(24),c=n(29),l=n(196),u=n(134);class d extends a.NodeParamsConfig{constructor(){super(...arguments),this.name=a.ParamConfig.STRING(""),this.type=a.ParamConfig.INTEGER(o.ConnectionPointTypes.indexOf(o.ConnectionPointType.FLOAT),{menu:{entries:o.ConnectionPointTypes.map((e,t)=>({name:e,value:t}))}}),this.as_color=a.ParamConfig.BOOLEAN(0,{visible_if:{type:o.ConnectionPointTypes.indexOf(o.ConnectionPointType.VEC3)}})}}const h=new d;class p extends s.TypedGlNode{constructor(){super(...arguments),this.params_config=h,this._allow_inputs_created_from_params=!1,this._on_create_set_name_if_none_bound=this._on_create_set_name_if_none.bind(this),this.gl_connections_controller=new u.GlConnectionsController(this)}static type(){return"param"}initialize_node(){this.add_post_dirty_hook("_set_mat_to_recompile",this._set_mat_to_recompile.bind(this)),this.lifecycle.add_on_create_hook(this._on_create_set_name_if_none_bound),this.gl_connections_controller.initialize_node(),this.gl_connections_controller.set_expected_input_types_function(()=>[]),this.gl_connections_controller.set_expected_output_types_function(()=>[o.ConnectionPointTypes[this.pv.type]])}set_lines(e){const t=[],n=o.ConnectionPointTypes[this.pv.type],r=this.uniform_name();t.push(new c.UniformGLDefinition(this,n,r)),e.add_definitions(this,t)}set_param_configs(){const e=o.ConnectionPointTypes[this.pv.type],t=o.ConnectionPointInitValueMap[e];let n=o.ConnectionPointTypeToParamTypeMap[e];this._param_configs_controller=this._param_configs_controller||new l.ParamConfigsController,this._param_configs_controller.reset(),n==_.ParamType.VECTOR3&&this.p.as_color.value&&i.default(t)&&3==t.length?this._param_configs_controller.create_and_push(_.ParamType.COLOR,this.pv.name,t,this.uniform_name()):this._param_configs_controller.create_and_push(n,this.pv.name,t,this.uniform_name())}uniform_name(){const e=this.io.outputs.named_output_connection_points[0];return this.gl_var_name(e.name)}_on_create_set_name_if_none(){""==this.pv.name&&this.p.name.set(this.name)}}t.ParamGlNode=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(36),s=n(16);class o extends r.BaseGlMathFunctionGlNode{static type(){return"refract"}initialize_node(){super.initialize_node(),this.gl_connections_controller.set_input_name_function(e=>["I","N","eta"][e]),this.gl_connections_controller.set_output_name_function(e=>"refract"),this.gl_connections_controller.set_expected_input_types_function(this._expected_input_types.bind(this)),this.gl_connections_controller.set_expected_output_types_function(this._expected_output_types.bind(this))}gl_method_name(){return"refract"}_expected_input_types(){const e=this.gl_connections_controller.first_input_connection_type()||s.ConnectionPointType.VEC3;return[e,e,s.ConnectionPointType.FLOAT]}_expected_output_types(){return[this._expected_input_types()[0]]}}t.RefractGlNode=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(36),o=r.__importDefault(n(95)),i=n(16),a=n(29);class _ extends s.BaseNodeGlMathFunctionArg1GlNode{static type(){return"quat_mult"}initialize_node(){super.initialize_node(),this.gl_connections_controller.set_input_name_function(e=>["quat0","quat1"][e]),this.gl_connections_controller.set_expected_input_types_function(()=>[i.ConnectionPointType.VEC4,i.ConnectionPointType.VEC4]),this.gl_connections_controller.set_expected_output_types_function(()=>[i.ConnectionPointType.VEC4])}gl_method_name(){return"quat_mult"}gl_function_definitions(){return[new a.FunctionGLDefinition(this,i.ConnectionPointType.VEC4,o.default)]}}t.QuatMultGlNode=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(36),o=r.__importDefault(n(95)),i=n(16),a=n(29);var _;!function(e){e.AXIS="axis",e.ANGLE="angle"}(_||(_={}));const c=[_.AXIS,_.ANGLE],l={[_.AXIS]:[0,0,1],[_.ANGLE]:0};class u extends s.BaseNodeGlMathFunctionArg2GlNode{static type(){return"quat_from_axis_angle"}initialize_node(){super.initialize_node(),this.gl_connections_controller.set_input_name_function(e=>c[e]),this.gl_connections_controller.set_expected_input_types_function(()=>[i.ConnectionPointType.VEC3,i.ConnectionPointType.FLOAT]),this.gl_connections_controller.set_expected_output_types_function(()=>[i.ConnectionPointType.VEC4])}gl_input_default_value(e){return l[e]}gl_method_name(){return"quat_from_axis_angle"}gl_function_definitions(){return[new a.FunctionGLDefinition(this,i.ConnectionPointType.VEC4,o.default)]}}t.QuatFromAxisAngleGlNode=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(36),o=r.__importDefault(n(95)),i=n(16),a=n(29);class _ extends s.BaseNodeGlMathFunctionArg1GlNode{static type(){return"quat_to_angle"}initialize_node(){super.initialize_node(),this.gl_connections_controller.set_input_name_function(e=>["quat"][e]),this.gl_connections_controller.set_expected_input_types_function(()=>[i.ConnectionPointType.VEC4]),this.gl_connections_controller.set_expected_output_types_function(()=>[i.ConnectionPointType.FLOAT])}gl_method_name(){return"quat_to_angle"}gl_function_definitions(){return[new a.FunctionGLDefinition(this,i.ConnectionPointType.FLOAT,o.default)]}}t.QuatToAngleGlNode=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(36),o=r.__importDefault(n(95)),i=n(16),a=n(29);class _ extends s.BaseNodeGlMathFunctionArg1GlNode{static type(){return"quat_to_axis"}initialize_node(){super.initialize_node(),this.gl_connections_controller.set_input_name_function(e=>["quat"][e]),this.gl_connections_controller.set_expected_input_types_function(()=>[i.ConnectionPointType.VEC4]),this.gl_connections_controller.set_expected_output_types_function(()=>[i.ConnectionPointType.VEC3])}gl_method_name(){return"quat_to_axis"}gl_function_definitions(){return[new a.FunctionGLDefinition(this,i.ConnectionPointType.VEC3,o.default)]}}t.QuatToAxisGlNode=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(34),s=n(16),o=n(33),i=n(29),a=n(128),_=n(196),c=n(24),l=n(5);class u extends l.NodeParamsConfig{constructor(){super(...arguments),this.name=l.ParamConfig.STRING("ramp"),this.input=l.ParamConfig.FLOAT(0)}}const d=new u;class h extends r.TypedGlNode{constructor(){super(...arguments),this.params_config=d}static type(){return"ramp"}initialize(){super.initialize_node(),this.io.outputs.set_named_output_connection_points([new o.TypedNamedConnectionPoint("val",s.ConnectionPointType.FLOAT)])}set_lines(e){const t=s.ConnectionPointType.FLOAT,n=this._uniform_name(),r=this.gl_var_name("val"),o=new i.UniformGLDefinition(this,s.ConnectionPointType.SAMPLER_2D,n);e.add_definitions(this,[o]);const a=this.variable_for_input(this.p.input.name),_=`${t} ${r} = texture2D(${this._uniform_name()}, vec2(${a}, 0.0)).x`;e.add_body_lines(this,[_])}set_param_configs(){this._param_configs_controller=this._param_configs_controller||new _.ParamConfigsController,this._param_configs_controller.reset(),this._param_configs_controller.create_and_push(c.ParamType.RAMP,this.pv.name,a.RampParam.DEFAULT_VALUE,this._uniform_name())}_uniform_name(){return"ramp_texture_"+this.gl_var_name("val")}}t.RampGlNode=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(34),s=n(28),o=n(5),i=n(16),a=n(33);class _ extends o.NodeParamsConfig{constructor(){super(...arguments),this.seed=o.ParamConfig.VECTOR2([1,1])}}const c=new _;class l extends r.TypedGlNode{constructor(){super(...arguments),this.params_config=c}static type(){return"random"}initialize_node(){super.initialize_node(),this.io.outputs.set_named_output_connection_points([new a.TypedNamedConnectionPoint("rand",i.ConnectionPointType.FLOAT)])}set_lines(e){const t=this.io.inputs.named_input_connection_points[0].name,n=s.ThreeToGl.vector2(this.variable_for_input(t)),r=`float ${this.gl_var_name("rand")} = rand(${n})`;e.add_body_lines(this,[r])}}t.RandomGlNode=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(34),o=n(28),i=r.__importDefault(n(761)),a=n(5),_=n(16),c=n(29),l=n(33);class u extends a.NodeParamsConfig{constructor(){super(...arguments),this.rgb=a.ParamConfig.VECTOR3([1,1,1])}}const d=new u;class h extends s.TypedGlNode{constructor(){super(...arguments),this.params_config=d}static type(){return"rgb_to_hsv"}initialize_node(){super.initialize_node(),this.io.outputs.set_named_output_connection_points([new l.TypedNamedConnectionPoint("hsv",_.ConnectionPointType.VEC3)])}set_lines(e){const t=[],n=[];t.push(new c.FunctionGLDefinition(this,_.ConnectionPointType.VEC3,i.default));const r=o.ThreeToGl.vector3(this.variable_for_input("rgb")),s=this.gl_var_name("hsv");n.push(`vec3 ${s} = rgb2hsv(${r})`),e.add_definitions(this,t),e.add_body_lines(this,n)}}t.RgbToHsvGlNode=h},function(e,t,n){"use strict";n.r(t),t.default="// https://stackoverflow.com/questions/15095909/from-rgb-to-hsv-in-opengl-glsl\nvec3 rgb2hsv(vec3 c)\n{\n\tvec4 K = vec4(0.0, -1.0 / 3.0, 2.0 / 3.0, -1.0);\n\tvec4 p = mix(vec4(c.bg, K.wz), vec4(c.gb, K.xy), step(c.b, c.g));\n\tvec4 q = mix(vec4(p.xyw, c.r), vec4(c.r, p.yzx), step(p.x, c.r));\n\n\tfloat d = q.x - min(q.w, q.y);\n\tfloat e = 1.0e-10;\n\treturn vec3(abs(q.z + (q.w - q.y) / (6.0 * d + e)), d / (q.x + e), q.x);\n}"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(368),o=r.__importDefault(n(95)),i=n(29),a=n(16);var _;!function(e){e[e.AXIS=0]="AXIS",e[e.QUAT=1]="QUAT"}(_||(_={}));const c=[_.AXIS,_.QUAT],l={[_.AXIS]:"from axis + angle",[_.QUAT]:"from quaternion"},u={[_.AXIS]:["vector","axis","angle"],[_.QUAT]:["vector","quat"]},d={[_.AXIS]:"rotate_with_axis_angle",[_.QUAT]:"rotate_with_quat"},h={[_.AXIS]:[a.ConnectionPointType.VEC3,a.ConnectionPointType.VEC3,a.ConnectionPointType.FLOAT],[_.QUAT]:[a.ConnectionPointType.VEC3,a.ConnectionPointType.VEC4]},p={vector:[0,0,1],axis:[0,1,0]},m=n(5),f=n(28);class g extends m.NodeParamsConfig{constructor(){super(...arguments),this.signature=m.ParamConfig.INTEGER(_.AXIS,{menu:{entries:c.map((e,t)=>({name:l[e],value:t}))}})}}const v=new g;class y extends s.BaseAdaptiveGlNode{constructor(){super(...arguments),this.params_config=v}static type(){return"rotate"}initialize_node(){super.initialize_node(),this.gl_connections_controller.set_expected_input_types_function(this._expected_input_types.bind(this)),this.gl_connections_controller.set_expected_output_types_function(this._expected_output_types.bind(this)),this.gl_connections_controller.set_input_name_function(this._gl_input_name.bind(this))}_gl_input_name(e){const t=c[this.pv.signature];return u[t][e]}gl_input_default_value(e){return p[e]}gl_method_name(){const e=c[this.pv.signature];return d[e]}_expected_input_types(){const e=c[this.pv.signature];return h[e]}_expected_output_types(){return[a.ConnectionPointType.VEC3]}gl_function_definitions(){const e=this._expected_output_types()[0];return[new i.FunctionGLDefinition(this,e,o.default)]}set_lines(e){const t=this.io.outputs.named_output_connection_points[0].type,n=this.io.inputs.named_input_connection_points.map((e,t)=>{const n=e.name;return f.ThreeToGl.any(this.variable_for_input(n))}).join(", "),r=`${t} ${this.gl_var_name(this.gl_connections_controller.output_name(0))} = ${this.gl_method_name()}(${n})`;e.add_body_lines(this,[r]),e.add_definitions(this,this.gl_function_definitions())}}t.RotateGlNode=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(36),s=n(28),o=n(16),i=["x","y","z","w"];class a extends r.BaseNodeGlMathFunctionArg1GlNode{static type(){return"round"}set_lines(e){const t=this.io.inputs.named_input_connection_points[0],n=s.ThreeToGl.vector2(this.variable_for_input(t.name)),r=this.io.outputs.named_output_connection_points[0],a=this.gl_var_name(r.name),_=[];if(1==o.ConnectionPointComponentsCountMap[r.type])_.push(`${r.type} ${a} = ${this._simple_line(n)}`);else{const e=i.map(e=>this._simple_line(`${n}.${e}`));_.push(`${r.type} ${a} = ${r.type}(${e.join(",")})`)}e.add_body_lines(this,_)}_simple_line(e){return`sign(${e})*floor(abs(${e})+0.5)`}}t.RoundGlNode=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(34),s=n(135),o=n(33),i=n(16),a=n(28),_=n(29),c=n(196),l=n(24),u=n(5);class d extends u.NodeParamsConfig{constructor(){super(...arguments),this.param_name=u.ParamConfig.STRING("texture_map"),this.default_value=u.ParamConfig.STRING(s.FileCopNode.DEFAULT_NODE_PATH.UV),this.uv=u.ParamConfig.VECTOR2([0,0])}}const h=new d;class p extends r.TypedGlNode{constructor(){super(...arguments),this.params_config=h}static type(){return"texture"}initialize_node(){super.initialize_node(),this.io.outputs.set_named_output_connection_points([new o.TypedNamedConnectionPoint(p.OUTPUT_NAME,i.ConnectionPointType.VEC4)])}set_lines(e){const t=a.ThreeToGl.vector2(this.variable_for_input(this.p.uv.name)),n=this.gl_var_name(p.OUTPUT_NAME),r=this._uniform_name(),s=new _.UniformGLDefinition(this,i.ConnectionPointType.SAMPLER_2D,r),o=`vec4 ${n} = texture2D(${r}, ${t})`;e.add_definitions(this,[s]),e.add_body_lines(this,[o])}set_param_configs(){this._param_configs_controller=this._param_configs_controller||new c.ParamConfigsController,this._param_configs_controller.reset(),this._param_configs_controller.create_and_push(l.ParamType.OPERATOR_PATH,this.pv.param_name,this.pv.default_value,this._uniform_name())}_uniform_name(){return this.gl_var_name(this.pv.param_name)}}t.TextureGlNode=p,p.OUTPUT_NAME="rgba"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(34),s=n(28),o=n(134);var i;!function(e){e.CONDITION="condition",e.IF_TRUE="if_true",e.IF_FALSE="if_false"}(i||(i={}));const a=[i.CONDITION,i.IF_TRUE,i.IF_FALSE],_=n(16);class c extends r.ParamlessTypedGlNode{constructor(){super(...arguments),this.gl_connections_controller=new o.GlConnectionsController(this)}static type(){return"two_way_switch"}initialize_node(){super.initialize_node(),this.gl_connections_controller.initialize_node(),this.gl_connections_controller.set_expected_input_types_function(this._expected_input_types.bind(this)),this.gl_connections_controller.set_expected_output_types_function(this._expected_output_types.bind(this)),this.gl_connections_controller.set_input_name_function(this._gl_input_name.bind(this)),this.gl_connections_controller.set_output_name_function(this._gl_output_name.bind(this))}_gl_input_name(e){return a[e]}_gl_output_name(){return"value"}_expected_input_types(){const e=this.io.connections.input_connection(1)||this.io.connections.input_connection(2),t=e?this.gl_connections_controller.connection_type_from_connection(e):_.ConnectionPointType.FLOAT;return[_.ConnectionPointType.BOOL,t,t]}_expected_output_types(){return[this._expected_input_types()[1]]}set_lines(e){const t=[],n=this.gl_var_name("value"),r=s.ThreeToGl.bool(this.variable_for_input(i.CONDITION)),o=s.ThreeToGl.any(this.variable_for_input(i.IF_TRUE)),a=s.ThreeToGl.any(this.variable_for_input(i.IF_FALSE)),_=this._expected_output_types()[1];t.push(`${_} ${n}`),t.push(`if(${r}){`),t.push(`${n} = ${o}`),t.push("} else {"),t.push(`${n} = ${a}`),t.push("}"),e.add_body_lines(this,t)}}t.TwoWaySwitchGlNode=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3).__importDefault(n(95)),s=n(371),o=n(16),i={start:[0,0,1],end:[1,0,0],up:[0,1,0]};class a extends(s.MathFunctionArg3Factory("vector_align",{in:["start","end","up"],method:"vector_align_with_up",functions:[r.default]})){_expected_input_types(){const e=o.ConnectionPointType.VEC3;return[e,e,e]}_expected_output_types(){return[o.ConnectionPointType.VEC4]}gl_input_default_value(e){return i[e]}}t.VectorAlignGlNode=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3).__importDefault(n(95)),s=n(369),o=n(16),i={start:[0,0,1],end:[1,0,0]};class a extends(s.MathFunctionArg2Factory("vector_angle",{in:["start","end"],method:"vector_angle",functions:[r.default]})){_expected_input_types(){const e=o.ConnectionPointType.VEC3;return[e,e]}_expected_output_types(){return[o.ConnectionPointType.FLOAT]}gl_input_default_value(e){return i[e]}}t.VectorAngleGlNode=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(130),s=n(769),o=n(771),i=n(777),a=n(778),_=n(374),c=n(780),l=n(784),u=n(376);t.MatRegister=class{static run(e){e.register_node(s.MeshBasicMatNode,r.CATEGORY_MAT.MESH),e.register_node(o.MeshBasicBuilderMatNode,r.CATEGORY_MAT.ADVANCED),e.register_node(i.MeshLambertMatNode,r.CATEGORY_MAT.MESH),e.register_node(a.MeshLambertBuilderMatNode,r.CATEGORY_MAT.ADVANCED),e.register_node(_.MeshStandardMatNode,r.CATEGORY_MAT.MESH),e.register_node(c.MeshStandardBuilderMatNode,r.CATEGORY_MAT.ADVANCED),e.register_node(l.PointsMatNode,r.CATEGORY_MAT.POINTS),e.register_node(u.PointsBuilderMatNode,r.CATEGORY_MAT.ADVANCED)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(56),o=n(0),i=n(68),a=n(5),_=n(197),c=n(105),l=n(116),u=n(117),d=n(118);class h extends(d.TextureAlphaMapParamConfig(u.TextureMapParamConfig(l.SkinningParamConfig(c.SideParamConfig(_.ColorParamConfig(a.NodeParamsConfig)))))){}const p=new h;class m extends i.TypedMatNode{constructor(){super(...arguments),this.params_config=p,this.texture_map_controller=new u.TextureMapController(this,{direct_params:!0}),this.texture_alpha_map_controller=new d.TextureAlphaMapController(this,{direct_params:!0})}static type(){return"mesh_basic"}create_material(){return new s.MeshBasicMaterial({vertexColors:!1,side:o.FrontSide,color:16777215,opacity:1})}initialize_node(){this.params.set_post_create_params_hook(()=>{this.texture_map_controller.initialize_node(),this.texture_alpha_map_controller.initialize_node()})}cook(){return r.__awaiter(this,void 0,void 0,(function*(){_.ColorsController.update(this),c.SideController.update(this),l.SkinningController.update(this),this.texture_map_controller.update(),this.texture_alpha_map_controller.update(),this.set_material(this.material)}))}}t.MeshBasicMatNode=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(115);class s extends r.TypedContainer{set_content(e){super.set_content(e)}set_material(e){null!=this._content&&this._content.dispose(),this.set_content(e)}has_material(){return this.has_content()}material(){return this.content()}}t.MaterialContainer=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(5),o=n(198),i=n(105),a=n(116),_=n(117),c=n(118),l=n(772),u=n(199),d=n(132);class h extends(c.TextureAlphaMapParamConfig(_.TextureMapParamConfig(a.SkinningParamConfig(i.SideParamConfig(o.ColorParamConfig(s.NodeParamsConfig)))))){}const p=new h;class m extends u.TypedBuilderMatNode{constructor(){super(...arguments),this.params_config=p,this.texture_map_controller=new _.TextureMapController(this,{uniforms:!0}),this.texture_alpha_map_controller=new c.TextureAlphaMapController(this,{uniforms:!0})}static type(){return"mesh_basic_builder"}initialize_node(){this.params.set_post_create_params_hook(()=>{this.texture_map_controller.initialize_node(),this.texture_alpha_map_controller.initialize_node()})}_create_assembler_controller(){return new d.GlAssemblerController(this,l.ShaderAssemblerBasic)}cook(){return r.__awaiter(this,void 0,void 0,(function*(){yield this.compile_if_required(),o.ColorsController.update(this),i.SideController.update(this),a.SkinningController.update(this),yield _.TextureMapController.update(this),yield c.TextureAlphaMapController.update(this),this.set_material(this.material)}))}}t.MeshBasicBuilderMatNode=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(23),s=n(26),o=n(37),i=n(273);class a extends i.ShaderAssemblerMesh{get _template_shader(){const e=o.ShaderLib.basic;return{vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms}}create_material(){const e=this._template_shader,t=new s.ShaderMaterial({lights:!1,uniforms:r.UniformsUtils.clone(e.uniforms),vertexShader:e.vertexShader,fragmentShader:e.fragmentShader});return this._add_custom_materials(t),t}}t.ShaderAssemblerBasic=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(23),s=n(26),o=n(37),i=n(0),a=n(0),_=n(106),c=n(50),l=new Map([[c.ShaderName.VERTEX,"#include <begin_vertex>"],[c.ShaderName.FRAGMENT,"vec4 diffuseColor = vec4( 1.0 );"]]);class u extends _.ShaderAssemblerMaterial{get _template_shader(){const e=o.ShaderLib.distanceRGBA;return{vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms}}insert_body_after(e){return l.get(e)}create_material(){const e=this._template_shader;return new s.ShaderMaterial({defines:{DEPTH_PACKING:[i.RGBADepthPacking,a.BasicDepthPacking][0]},uniforms:r.UniformsUtils.clone(e.uniforms),vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})}}t.ShaderAssemblerCustomMeshDistance=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(23),s=n(26),o=n(37),i=n(0),a=n(0),_=n(106),c=n(50),l=new Map([[c.ShaderName.VERTEX,"#include <begin_vertex>"],[c.ShaderName.FRAGMENT,"vec4 diffuseColor = vec4( 1.0 );"]]);class u extends _.ShaderAssemblerMaterial{get _template_shader(){const e=o.ShaderLib.depth;return{vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms}}insert_body_after(e){return l.get(e)}create_material(){const e=this._template_shader;return new s.ShaderMaterial({defines:{DEPTH_PACKING:[i.RGBADepthPacking,a.BasicDepthPacking][0]},uniforms:r.UniformsUtils.clone(e.uniforms),vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})}}t.ShaderAssemblerCustomMeshDepth=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(23),o=n(26),i=n(106),a=r.__importDefault(n(776)),_=r.__importDefault(n(373)),c=n(50),l=new Map([[c.ShaderName.VERTEX,"// INSERT DEFINES"]]),u=new Map([[c.ShaderName.VERTEX,"// INSERT BODY"]]);class d extends i.ShaderAssemblerMaterial{get _template_shader(){return{vertexShader:a.default,fragmentShader:_.default,uniforms:{mNear:{value:0},mFar:{value:10}}}}insert_define_after(e){return l.get(e)}insert_body_after(e){return u.get(e)}create_material(){const e=this._template_shader;return new o.ShaderMaterial({uniforms:s.UniformsUtils.clone(e.uniforms),vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})}}t.ShaderAssemblerCustomMeshDepthDOF=d},function(e,t,n){"use strict";n.r(t),t.default="#include <common>\n\nvarying float vViewZDepth;\n\n// INSERT DEFINES\n\n\n\nvoid main() {\n\n\t// INSERT BODY\n\n\n\t#include <project_vertex>\n\n\tvViewZDepth = - mvPosition.z;\n}"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(160),o=n(0),i=n(68),a=n(5),_=n(197),c=n(105),l=n(116),u=n(117),d=n(118);class h extends(d.TextureAlphaMapParamConfig(u.TextureMapParamConfig(l.SkinningParamConfig(c.SideParamConfig(_.ColorParamConfig(a.NodeParamsConfig)))))){}const p=new h;class m extends i.TypedMatNode{constructor(){super(...arguments),this.params_config=p,this.texture_map_controller=new u.TextureMapController(this,{direct_params:!0}),this.texture_alpha_map_controller=new d.TextureAlphaMapController(this,{direct_params:!0})}static type(){return"mesh_lambert"}create_material(){return new s.MeshLambertMaterial({vertexColors:!1,side:o.FrontSide,color:16777215,opacity:1})}initialize_node(){this.params.set_post_create_params_hook(()=>{this.texture_map_controller.initialize_node(),this.texture_alpha_map_controller.initialize_node()})}cook(){return r.__awaiter(this,void 0,void 0,(function*(){_.ColorsController.update(this),c.SideController.update(this),l.SkinningController.update(this),this.texture_map_controller.update(),this.texture_alpha_map_controller.update(),this.set_material(this.material)}))}}t.MeshLambertMatNode=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(5),o=n(198),i=n(105),a=n(116),_=n(117),c=n(118),l=n(199),u=n(132),d=n(779);class h extends(c.TextureAlphaMapParamConfig(_.TextureMapParamConfig(a.SkinningParamConfig(i.SideParamConfig(o.ColorParamConfig(s.NodeParamsConfig)))))){}const p=new h;class m extends l.TypedBuilderMatNode{constructor(){super(...arguments),this.params_config=p,this.texture_map_controller=new _.TextureMapController(this,{uniforms:!0}),this.texture_alpha_map_controller=new c.TextureAlphaMapController(this,{uniforms:!0})}static type(){return"mesh_lambert_builder"}initialize_node(){this.params.set_post_create_params_hook(()=>{this.texture_map_controller.initialize_node(),this.texture_alpha_map_controller.initialize_node()})}_create_assembler_controller(){return new u.GlAssemblerController(this,d.ShaderAssemblerLambert)}cook(){return r.__awaiter(this,void 0,void 0,(function*(){yield this.compile_if_required(),o.ColorsController.update(this),i.SideController.update(this),a.SkinningController.update(this),yield _.TextureMapController.update(this),yield c.TextureAlphaMapController.update(this),this.set_material(this.material)}))}}t.MeshLambertBuilderMatNode=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(23),s=n(26),o=n(37),i=n(273);class a extends i.ShaderAssemblerMesh{get _template_shader(){const e=o.ShaderLib.lambert;return{vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms}}create_material(){const e=this._template_shader,t=new s.ShaderMaterial({lights:!0,uniforms:r.UniformsUtils.clone(e.uniforms),vertexShader:e.vertexShader,fragmentShader:e.fragmentShader});return this._add_custom_materials(t),t}}t.ShaderAssemblerLambert=a},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(5),o=n(198),i=n(105),a=n(116),_=n(117),c=n(118),l=n(375),u=n(199),d=n(132),h=n(781),p=n(374);class m extends(l.TextureEnvMapParamConfig(c.TextureAlphaMapParamConfig(_.TextureMapParamConfig(a.SkinningParamConfig(i.SideParamConfig(o.ColorParamConfig(s.NodeParamsConfig))))))){constructor(){super(...arguments),this.metalness=s.ParamConfig.FLOAT(p.SHADER_DEFAULTS.metalness,{cook:!1,callback:(e,t)=>g._update_metalness(e)}),this.roughness=s.ParamConfig.FLOAT(p.SHADER_DEFAULTS.roughness,{cook:!1,callback:(e,t)=>g._update_roughness(e)})}}const f=new m;class g extends u.TypedBuilderMatNode{constructor(){super(...arguments),this.params_config=f,this.texture_map_controller=new _.TextureMapController(this,{uniforms:!0}),this.texture_alpha_map_controller=new c.TextureAlphaMapController(this,{uniforms:!0}),this.texture_env_map_controller=new l.TextureEnvMapController(this,{uniforms:!0,direct_params:!0,define:!1})}static type(){return"mesh_standard_builder"}initialize_node(){this.params.set_post_create_params_hook(()=>{this.texture_map_controller.initialize_node(),this.texture_alpha_map_controller.initialize_node(),this.texture_env_map_controller.initialize_node()})}_create_assembler_controller(){return new d.GlAssemblerController(this,h.ShaderAssemblerStandard)}cook(){return r.__awaiter(this,void 0,void 0,(function*(){yield this.compile_if_required(),o.ColorsController.update(this),i.SideController.update(this),a.SkinningController.update(this),yield _.TextureMapController.update(this),yield c.TextureAlphaMapController.update(this),yield l.TextureEnvMapController.update(this),this._material&&(this._material.uniforms.envMapIntensity.value=this.pv.env_map_intensity,g._update_metalness(this),g._update_roughness(this)),this.set_material(this.material)}))}static _update_metalness(e){e.material.uniforms.metalness.value=e.pv.metalness}static _update_roughness(e){e.material.uniforms.roughness.value=e.pv.roughness}}t.MeshStandardBuilderMatNode=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(23),o=n(26),i=n(37),a=n(273),_=n(158),c=n(194),l=n(195),u=r.__importDefault(n(782)),d=r.__importDefault(n(783)),h=n(50),p=n(24);class m extends a.ShaderAssemblerMesh{is_physical(){return!1}get _template_shader(){const e=this.is_physical()?i.ShaderLib.physical:i.ShaderLib.standard;return{vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms}}create_material(){const e=this._template_shader,t={lights:!0,extensions:{derivatives:!0},uniforms:s.UniformsUtils.clone(e.uniforms),vertexShader:e.vertexShader,fragmentShader:e.fragmentShader},n=new o.ShaderMaterial(t);return n.onBeforeCompile=function(e){e.fragmentShader=e.fragmentShader.replace("#include <metalnessmap_fragment>",u.default),e.fragmentShader=e.fragmentShader.replace("#include <roughnessmap_fragment>",d.default)},this._add_custom_materials(n),n}add_output_params(e){_.BaseGlShaderAssembler.add_output_params(e),e.add_param(p.ParamType.FLOAT,"metalness",1),e.add_param(p.ParamType.FLOAT,"roughness",1)}create_shader_configs(){return[new c.ShaderConfig(h.ShaderName.VERTEX,["position","normal","uv"],[]),new c.ShaderConfig(h.ShaderName.FRAGMENT,["color","alpha","metalness","roughness"],[h.ShaderName.VERTEX])]}create_variable_configs(){return _.BaseGlShaderAssembler.create_variable_configs().concat([new l.VariableConfig("metalness",{default:"1.0",prefix:"float POLY_metalness = "}),new l.VariableConfig("roughness",{default:"1.0",prefix:"float POLY_roughness = "})])}}t.ShaderAssemblerStandard=m},function(e,t,n){"use strict";n.r(t),t.default="float metalnessFactor = metalness * POLY_metalness;\n\n#ifdef USE_METALNESSMAP\n\n\tvec4 texelMetalness = texture2D( metalnessMap, vUv );\n\n\t// reads channel B, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\tmetalnessFactor *= texelMetalness.b;\n\n#endif\n"},function(e,t,n){"use strict";n.r(t),t.default="float roughnessFactor = roughness * POLY_roughness;\n\n#ifdef USE_ROUGHNESSMAP\n\n\tvec4 texelRoughness = texture2D( roughnessMap, vUv );\n\n\t// reads channel G, compatible with a combined OcclusionRoughnessMetallic (RGB) texture\n\troughnessFactor *= texelRoughness.g;\n\n#endif\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(71),o=n(0),i=n(68),a=n(197),_=n(105),c=n(5);function l(e){return class extends e{constructor(){super(...arguments),this.size=c.ParamConfig.FLOAT(1),this.size_attenuation=c.ParamConfig.BOOLEAN(1)}}}t.PointsParamConfig=l;class u extends(_.SideParamConfig(a.ColorParamConfig(l(c.NodeParamsConfig)))){}const d=new u;class h extends i.TypedMatNode{constructor(){super(...arguments),this.params_config=d}static type(){return"points"}create_material(){return new s.PointsMaterial({vertexColors:!1,side:o.FrontSide,color:16777215,opacity:1})}cook(){return r.__awaiter(this,void 0,void 0,(function*(){a.ColorsController.update(this),_.SideController.update(this),this.material.size=this.pv.size,this.material.sizeAttenuation=this.pv.size_attenuation,this.set_material(this.material)}))}}t.PointsMatNode=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(23),s=n(26),o=n(37),i=n(106),a=n(194),_=n(195),c=n(158),l=n(786),u=n(788),d=n(790),h=n(24),p=n(33),m=n(16),f=n(50),g=new Map([[f.ShaderName.VERTEX,["#include <begin_vertex>","gl_PointSize = size;"]],[f.ShaderName.FRAGMENT,[]]]),v=new Map;v.set(i.CustomMaterialName.DISTANCE,u.ShaderAssemblerCustomPointsDistance),v.set(i.CustomMaterialName.DEPTH,l.ShaderAssemblerCustomPointsDepth),v.set(i.CustomMaterialName.DEPTH_DOF,d.ShaderAssemblerCustomPointsDepthDOF);class y extends i.ShaderAssemblerMaterial{custom_assembler_class_by_custom_name(){return v}get _template_shader(){const e=o.ShaderLib.points;return{vertexShader:e.vertexShader,fragmentShader:e.fragmentShader,uniforms:e.uniforms}}create_material(){const e=this._template_shader,t=new s.ShaderMaterial({transparent:!0,fog:!0,defines:{USE_SIZEATTENUATION:1},uniforms:r.UniformsUtils.clone(e.uniforms),vertexShader:e.vertexShader,fragmentShader:e.fragmentShader});return this._add_custom_materials(t),t}add_output_params(e){c.BaseGlShaderAssembler.add_output_params(e),e.add_param(h.ParamType.FLOAT,"gl_PointSize",1)}create_globals_node_output_connections(){return c.BaseGlShaderAssembler.create_globals_node_output_connections().concat([new p.TypedNamedConnectionPoint("gl_PointCoord",m.ConnectionPointType.VEC2)])}create_shader_configs(){return[new a.ShaderConfig(f.ShaderName.VERTEX,["position","normal","uv","gl_PointSize"],[]),new a.ShaderConfig(f.ShaderName.FRAGMENT,["color","alpha"],[f.ShaderName.VERTEX])]}create_variable_configs(){return c.BaseGlShaderAssembler.create_variable_configs().concat([new _.VariableConfig("gl_PointSize",{default:"1.0",prefix:"gl_PointSize = ",suffix:" * size * 10.0"})])}lines_to_remove(e){return g.get(e)}}t.ShaderAssemblerPoints=y},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(23),o=n(26),i=n(37),a=n(0),_=n(0),c=n(106),l=r.__importDefault(n(787)),u=n(50),d=new Map([[u.ShaderName.VERTEX,"// INSERT DEFINES"]]),h=new Map([[u.ShaderName.VERTEX,"// INSERT BODY"]]);class p extends c.ShaderAssemblerMaterial{get _template_shader(){const e=i.ShaderLib.depth,t=s.UniformsUtils.clone(e.uniforms);return t.size={value:1},t.scale={value:1},{vertexShader:l.default,fragmentShader:e.fragmentShader,uniforms:t}}insert_define_after(e){return d.get(e)}insert_body_after(e){return h.get(e)}create_material(){const e=this._template_shader;return new o.ShaderMaterial({defines:{USE_SIZEATTENUATION:1,DEPTH_PACKING:[a.RGBADepthPacking,_.BasicDepthPacking][0]},uniforms:s.UniformsUtils.clone(e.uniforms),vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})}}t.ShaderAssemblerCustomPointsDepth=p},function(e,t,n){"use strict";n.r(t),t.default="uniform float size;\nuniform float scale;\n#include <common>\n#include <clipping_planes_pars_vertex>\nvarying float vViewZDepth;\n\n// INSERT DEFINES\n\n\n\nvoid main() {\n\n\t// INSERT BODY\n\n\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\n\tvViewZDepth = - mvPosition.z;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\n}\n\n\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(23),o=n(26),i=n(37),a=n(0),_=n(0),c=n(106),l=r.__importDefault(n(789)),u=n(50),d=new Map([[u.ShaderName.VERTEX,"// INSERT DEFINES"]]),h=new Map([[u.ShaderName.VERTEX,"// INSERT BODY"]]);class p extends c.ShaderAssemblerMaterial{get _template_shader(){const e=i.ShaderLib.distanceRGBA,t=s.UniformsUtils.clone(e.uniforms);return t.size={value:1},t.scale={value:1},{vertexShader:l.default,fragmentShader:e.fragmentShader,uniforms:t}}insert_define_after(e){return d.get(e)}insert_body_after(e){return h.get(e)}create_material(){const e=this._template_shader;return new o.ShaderMaterial({defines:{USE_SIZEATTENUATION:1,DEPTH_PACKING:[a.RGBADepthPacking,_.BasicDepthPacking][0]},uniforms:s.UniformsUtils.clone(e.uniforms),vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})}}t.ShaderAssemblerCustomPointsDistance=p},function(e,t,n){"use strict";n.r(t),t.default="uniform float size;\nuniform float scale;\n#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <clipping_planes_pars_vertex>\nvarying float vViewZDepth;\n\n// INSERT DEFINES\n\n\n\nvoid main() {\n\n\t// INSERT BODY\n\n\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\tvWorldPosition = worldPosition.xyz;\n}\n\n// #define DISTANCE\n// varying vec3 vWorldPosition;\n// #include <common>\n// #include <uv_pars_vertex>\n// #include <displacementmap_pars_vertex>\n// #include <morphtarget_pars_vertex>\n// #include <skinning_pars_vertex>\n// #include <clipping_planes_pars_vertex>\n// void main() {\n// \t#include <uv_vertex>\n// \t#include <skinbase_vertex>\n// \t#ifdef USE_DISPLACEMENTMAP\n// \t\t#include <beginnormal_vertex>\n// \t\t#include <morphnormal_vertex>\n// \t\t#include <skinnormal_vertex>\n// \t#endif\n// \t#include <begin_vertex>\n// \t#include <morphtarget_vertex>\n// \t#include <skinning_vertex>\n// \t#include <displacementmap_vertex>\n// \t#include <project_vertex>\n// \t#include <worldpos_vertex>\n// \t#include <clipping_planes_vertex>\n// \tvWorldPosition = worldPosition.xyz;\n// }\n\n\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(23),o=n(26),i=n(106),a=r.__importDefault(n(791)),_=r.__importDefault(n(373)),c=n(50),l=new Map([[c.ShaderName.VERTEX,"// INSERT DEFINES"]]),u=new Map([[c.ShaderName.VERTEX,"// INSERT BODY"]]);class d extends i.ShaderAssemblerMaterial{get _template_shader(){return{vertexShader:a.default,fragmentShader:_.default,uniforms:{size:{value:1},scale:{value:1},mNear:{value:0},mFar:{value:10}}}}insert_define_after(e){return l.get(e)}insert_body_after(e){return u.get(e)}create_material(){const e=this._template_shader;return new o.ShaderMaterial({depthTest:!0,defines:{USE_SIZEATTENUATION:1},uniforms:s.UniformsUtils.clone(e.uniforms),vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})}}t.ShaderAssemblerCustomPointsDepthDOF=d},function(e,t,n){"use strict";n.r(t),t.default="uniform float size;\nuniform float scale;\n#include <common>\n\nvarying float vViewZDepth;\n\n// INSERT DEFINES\n\n\n\nvoid main() {\n\n\t// INSERT BODY\n\n\n\t#include <project_vertex>\n\n\tvViewZDepth = - mvPosition.z;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\n}\n\n"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(130),s=n(793),o=n(795),i=n(797),a=n(799),_=n(801),c=n(803),l=n(805),u=n(806),d=n(807),h=n(808),p=n(809),m=n(811),f=n(813),g=n(814),v=n(815),y=n(826);t.ObjRegister=class{static run(e){e.register_node(s.AmbientLightObjNode,r.CATEGORY_OBJ.LIGHT),e.register_node(o.AreaLightObjNode,r.CATEGORY_OBJ.LIGHT),e.register_node(i.DirectionalLightObjNode,r.CATEGORY_OBJ.LIGHT),e.register_node(a.HemisphereLightObjNode,r.CATEGORY_OBJ.LIGHT),e.register_node(_.PointLightObjNode,r.CATEGORY_OBJ.LIGHT),e.register_node(c.SpotLightObjNode,r.CATEGORY_OBJ.LIGHT),e.register_node(l.EventsObjNode,r.CATEGORY_OBJ.MANAGER),e.register_node(u.MaterialsObjNode,r.CATEGORY_OBJ.MANAGER),e.register_node(d.CopObjNode,r.CATEGORY_OBJ.MANAGER),e.register_node(h.PostProcessObjNode,r.CATEGORY_OBJ.MANAGER),e.register_node(p.GeoObjNode,r.CATEGORY_OBJ.GEOMETRY),e.register_node(m.NullObjNode,r.CATEGORY_OBJ.GEOMETRY),e.register_node(g.SceneObjNode,r.CATEGORY_OBJ.MISC),e.register_node(v.OrthographicCameraObjNode,r.CATEGORY_OBJ.CAMERA),e.register_node(y.PerspectiveCameraObjNode,r.CATEGORY_OBJ.CAMERA),e.register_node(f.FogObjNode,r.CATEGORY_OBJ.MISC)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(286),s=n(274),o=n(5);class i extends o.NodeParamsConfig{constructor(){super(...arguments),this.color=o.ParamConfig.COLOR([1,1,1]),this.intensity=o.ParamConfig.FLOAT(1)}}const a=new i;class _ extends s.TypedLightObjNode{constructor(){super(...arguments),this.params_config=a}static type(){return"ambient_light"}create_light(){return new r.AmbientLight}initialize_node(){this.io.inputs.set_count(0,1)}update_light_params(){this.light.color=this.pv.color,this.light.intensity=this.pv.intensity}}t.AmbientLightObjNode=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(115);class s extends r.TypedContainer{set_content(e){super.set_content(e)}set_object(e){return this.set_content(e)}has_object(){return this.has_content()}object(){return this.content()}}t.ObjectContainer=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(287),o=n(796),i=n(200),a=n(83),_=n(5);function c(e){return class extends e{constructor(){super(...arguments),this.color=_.ParamConfig.COLOR([1,1,1]),this.intensity=_.ParamConfig.FLOAT(1,{range:[0,10]}),this.width=_.ParamConfig.FLOAT(1,{range:[0,10]}),this.height=_.ParamConfig.FLOAT(1,{range:[0,10]})}}}t.AreaLightParamConfig=c;class l extends(c(a.TransformedParamConfig(_.NodeParamsConfig))){}const u=new l;class d extends i.BaseLightTransformedObjNode{constructor(){super(...arguments),this.params_config=u}static type(){return"area_light"}create_light(){return new s.RectAreaLight(16777215,1,1,1)}update_light_params(){this.light.color=this.pv.color,this.light.intensity=this.pv.intensity,this.light.width=this.pv.width,this.light.height=this.pv.height}cook(){return r.__awaiter(this,void 0,void 0,(function*(){o.RectAreaLightUniformsLib.initialized||(o.RectAreaLightUniformsLib.init(),o.RectAreaLightUniformsLib.initialized=!0),this.transform_controller.update(),this.update_light_params(),this.update_shadow_params(),this.cook_controller.end_cook()}))}}t.AreaLightObjNode=d},function(e,t,n){"use strict";n.r(t),n.d(t,"RectAreaLightUniformsLib",(function(){return a}));var r=n(0),s=n(70),o=n(37),i=n(8),a={init:function(){var e=new s.DataTexture(new Float32Array([1,0,0,2e-5,1,0,0,503905e-9,1,0,0,.00201562,1,0,0,.00453516,1,0,0,.00806253,1,0,0,.0125978,1,0,0,.018141,1,0,0,.0246924,1,0,0,.0322525,1,0,0,.0408213,1,0,0,.0503999,1,0,0,.0609894,1,0,0,.0725906,1,0,0,.0852058,1,0,0,.0988363,1,0,0,.113484,1,0,0,.129153,1,0,0,.145839,1,0,0,.163548,1,0,0,.182266,1,0,0,.201942,1,0,0,.222314,1,0,0,.241906,1,0,0,.262314,1,0,0,.285754,1,0,0,.310159,1,0,0,.335426,1,0,0,.361341,1,0,0,.387445,1,0,0,.412784,1,0,0,.438197,1,0,0,.466966,1,0,0,.49559,1,0,0,.523448,1,0,0,.549938,1,0,0,.57979,1,0,0,.608746,1,0,0,.636185,1,0,0,.664748,1,0,0,.69313,1,0,0,.71966,1,0,0,.747662,1,0,0,.774023,1,0,0,.799775,1,0,0,.825274,1,0,0,.849156,1,0,0,.873248,1,0,0,.89532,1,0,0,.917565,1,0,0,.937863,1,0,0,.958139,1,0,0,.976563,1,0,0,.994658,1,0,0,1.0112,1,0,0,1.02712,1,0,0,1.04189,1,0,0,1.05568,1,0,0,1.06877,1,0,0,1.08058,1,0,0,1.09194,1,0,0,1.10191,1,0,0,1.11161,1,0,0,1.1199,1,0,0,1.12813,.999547,-4.48815e-7,.0224417,199902e-10,.999495,-113079e-10,.0224406,503651e-9,.999496,-452317e-10,.0224406,.00201461,.999496,-101772e-9,.0224406,.00453287,.999495,-180928e-9,.0224406,.00805845,.999497,-282702e-9,.0224406,.0125914,.999496,-407096e-9,.0224406,.0181319,.999498,-554114e-9,.0224406,.02468,.999499,-723768e-9,.0224406,.0322363,.999495,-916058e-9,.0224405,.0408009,.999499,-.00113101,.0224408,.050375,.999494,-.00136863,.0224405,.0609586,.999489,-.00162896,.0224401,.0725537,.999489,-.00191201,.0224414,.0851619,.999498,-.00221787,.0224413,.0987867,.999492,-.00254642,.0224409,.113426,.999507,-.00289779,.0224417,.129088,.999494,-.0032716,.0224386,.145767,.999546,-.0036673,.0224424,.163472,.999543,-.00408166,.0224387,.182182,.999499,-.00450056,.0224338,.201843,.999503,-.00483661,.0224203,.222198,.999546,-.00452928,.022315,.241714,.999508,-.00587403,.0224329,.262184,.999509,-.00638806,.0224271,.285609,.999501,-.00691028,.0224166,.309998,.999539,-.00741979,.0223989,.335262,.999454,-.00786282,.0223675,.361154,.999529,-.00811928,.0222828,.387224,.999503,-.00799941,.0221063,.41252,.999561,-.00952753,.0223057,.438006,.999557,-.0099134,.0222065,.466735,.999541,-.0100935,.0220402,.495332,.999562,-.00996821,.0218067,.523197,.999556,-.0105031,.0217096,.550223,.999561,-.0114191,.0217215,.579498,.999588,-.0111818,.0213357,.608416,.999633,-.0107725,.0208689,.635965,.999527,-.0121671,.0210149,.664476,.999508,-.0116005,.020431,.692786,.999568,-.0115604,.0199791,.719709,.999671,-.0121117,.0197415,.74737,.999688,-.0110769,.0188846,.773692,.99962,-.0122368,.0188452,.799534,.999823,-.0110325,.0178001,.825046,.999599,-.0114923,.0174221,.849075,.999619,-.0105923,.0164345,.872999,.999613,-.0105988,.0158227,.895371,.99964,-.00979861,.0148131,.917364,.99977,-.00967238,.0140721,.938002,.999726,-.00869175,.0129543,.957917,.99973,-.00866872,.0122329,.976557,.999773,-.00731956,.0108958,.994459,.999811,-.00756027,.0102715,1.01118,.999862,-.00583732,.00878781,1.02701,.999835,-.00631438,.00827529,1.04186,.999871,-.00450785,.00674583,1.05569,.999867,-.00486079,.00621041,1.06861,.999939,-.00322072,.00478301,1.08064,.999918,-.00318199,.00406395,1.09181,1.00003,-.00193348,.00280682,1.10207,.999928,-.00153729,.00198741,1.11152,.999933,-623666e-9,917714e-9,1.12009,1,-102387e-11,9.07581e-7,1.12813,.997866,-8.96716e-7,.0448334,199584e-10,.997987,-225945e-10,.0448389,502891e-9,.997987,-903781e-10,.0448388,.00201156,.997985,-203351e-9,.0448388,.00452602,.997986,-361514e-9,.0448388,.00804629,.997987,-56487e-8,.0448389,.0125724,.997988,-813423e-9,.0448389,.0181045,.997984,-.00110718,.0448387,.0246427,.997985,-.00144616,.0448388,.0321875,.997987,-.00183038,.044839,.0407392,.997983,-.00225987,.0448387,.0502986,.997991,-.00273467,.0448389,.0608667,.997984,-.00325481,.0448384,.0724444,.998002,-.00382043,.044839,.0850348,.997997,-.00443145,.0448396,.0986372,.998007,-.00508796,.0448397,.113255,.998008,-.00578985,.04484,.128891,.998003,-.00653683,.0448384,.145548,.997983,-.00732713,.0448358,.163221,.997985,-.00815454,.0448358,.181899,.998005,-.00898985,.0448286,.201533,.998026,-.00964404,.0447934,.221821,.998055,-.00922677,.044611,.241282,.99804,-.0117361,.0448245,.261791,.998048,-.0127628,.0448159,.285181,.998088,-.0138055,.0447996,.30954,.998058,-.0148206,.0447669,.334751,.998099,-.0156998,.044697,.36061,.998116,-.0161976,.0445122,.386603,.998195,-.015945,.0441711,.411844,.998168,-.0183947,.0444255,.43773,.998184,-.0197913,.0443809,.466009,.998251,-.0201426,.0440689,.494574,.998305,-.0198847,.0435632,.522405,.998273,-.0210577,.043414,.549967,.998254,-.0227901,.0433943,.578655,.998349,-.0223108,.0426529,.60758,.99843,-.0223088,.042,.635524,.998373,-.0241141,.0418987,.663621,.998425,-.0231446,.0408118,.691906,.998504,-.0233684,.0400565,.719339,.998443,-.0241652,.0394634,.74643,.99848,-.0228715,.0380002,.773086,.998569,-.023519,.0372322,.798988,.998619,-.0223108,.0356468,.824249,.998594,-.0223105,.034523,.848808,.998622,-.0213426,.0328887,.87227,.998669,-.0207912,.0314374,.895157,.998705,-.0198416,.0296925,.916769,.998786,-.0189168,.0279634,.937773,.998888,-.0178811,.0261597,.957431,.99906,-.0166845,.0242159,.976495,.999038,-.0155464,.0222638,.994169,.999237,-.0141349,.0201967,1.01112,.999378,-.0129324,.0181744,1.02692,.999433,-.0113192,.0159898,1.04174,.999439,-.0101244,.0140385,1.05559,.999614,-.00837456,.0117826,1.06852,.999722,-.00721769,.00983745,1.08069,.999817,-.00554067,.00769002,1.09176,.99983,-.00426961,.005782,1.10211,.999964,-.00273904,.00374503,1.11152,1.00001,-.00136739,.00187176,1.12031,.999946,393227e-10,-28919e-9,1.12804,.995847,-13435e-10,.0671785,19916e-9,.995464,-338387e-10,.0671527,501622e-9,.99547,-135355e-9,.0671531,.00200649,.995471,-30455e-8,.0671532,.00451461,.99547,-541423e-9,.0671531,.008026,.995471,-84598e-8,.0671531,.0125407,.99547,-.00121823,.0671531,.0180589,.99547,-.00165817,.0671531,.0245806,.995463,-.00216583,.0671526,.0321062,.995468,-.00274127,.0671527,.0406366,.995474,-.00338447,.0671534,.0501717,.995473,-.00409554,.0671533,.0607131,.995478,-.00487451,.0671531,.0722618,.995476,-.00572148,.0671532,.0848191,.995477,-.00663658,.0671539,.0983882,.995498,-.00761986,.0671541,.112972,.995509,-.00867094,.0671542,.128568,.995509,-.00978951,.0671531,.145183,.995503,-.0109725,.0671491,.162808,.995501,-.012211,.0671465,.181441,.99553,-.0134565,.0671371,.201015,.99555,-.014391,.0670831,.221206,.99558,-.014351,.0668883,.240813,.995577,-.0173997,.0671055,.261257,.995602,-.0191111,.0671178,.284467,.995623,-.0206705,.0670946,.308765,.995658,-.022184,.0670472,.333905,.995705,-.0234832,.0669417,.359677,.995719,-.0241933,.0666714,.385554,.995786,-.0243539,.066266,.410951,.995887,-.0271866,.0664367,.437163,.995944,-.0296012,.0664931,.464842,.996004,-.0301045,.0660105,.49332,.996128,-.0298311,.0652694,.521131,.996253,-.0316426,.0650739,.549167,.996244,-.0339043,.0649433,.57737,.996309,-.033329,.0638926,.606073,.996417,-.0338935,.0630849,.634527,.996372,-.0353104,.0625083,.66256,.996542,-.0348942,.0611986,.690516,.996568,-.0351614,.060069,.718317,.996711,-.0354317,.0588522,.74528,.996671,-.0349513,.0571902,.772061,.996865,-.0345622,.0555321,.798089,.996802,-.0342566,.0537816,.823178,.996992,-.0330862,.0516095,.847949,.996944,-.0324666,.0495537,.871431,.997146,-.0309544,.0470302,.894357,.997189,-.0299372,.0446043,.916142,.997471,-.0281389,.0418812,.937193,.997515,-.0268702,.0391823,.957,.997812,-.0247166,.0361338,.975936,.998027,-.0233525,.0333945,.99391,.998233,-.0209839,.0301917,1.01075,.998481,-.0194309,.027271,1.02669,.998859,-.0169728,.0240162,1.04173,.99894,-.0152322,.0210517,1.05551,.999132,-.0127497,.0178632,1.06856,.999369,-.0108282,.014787,1.08054,.999549,-.00845886,.0116185,1.09185,.999805,-.0063937,.00867209,1.10207,.99985,-.00414582,.00566823,1.1117,.999912,-.00207443,.00277562,1.12022,1.00001,870226e-10,-53766e-9,1.12832,.991943,-178672e-11,.0893382,198384e-10,.991952,-450183e-10,.089339,499849e-9,.991956,-180074e-9,.0893394,.0019994,.991955,-405167e-9,.0893393,.00449867,.991953,-720298e-9,.0893391,.00799764,.991955,-.00112548,.0893393,.0124964,.991957,-.0016207,.0893395,.0179951,.991958,-.00220601,.0893396,.0244939,.991947,-.00288137,.0893385,.0319929,.991962,-.00364693,.0893399,.0404933,.991965,-.00450264,.0893399,.049995,.99198,-.00544862,.0893411,.0604995,.99197,-.00648491,.0893397,.0720074,.991976,-.00761164,.089341,.0845207,.99198,-.00882891,.0893405,.0980413,.991982,-.0101367,.0893396,.112571,.992008,-.011535,.0893415,.128115,.992026,-.0130228,.0893414,.144672,.992064,-.0145966,.0893418,.162241,.992041,-.0162421,.0893359,.180801,.992086,-.0178888,.0893214,.200302,.992157,-.0190368,.0892401,.220332,.992181,-.0195584,.0890525,.240144,.992175,-.0227257,.0892153,.260728,.99221,-.0254195,.089304,.283473,.99222,-.0274883,.0892703,.307673,.992317,-.0294905,.0892027,.332729,.992374,-.0311861,.0890577,.358387,.992505,-.0320656,.0886994,.384102,.992568,-.0329715,.0883198,.409767,.992675,-.036006,.0883602,.436145,.992746,-.0392897,.0884591,.463217,.992873,-.0399337,.0878287,.491557,.992934,-.040231,.0870108,.519516,.993091,-.0422013,.0865857,.547741,.993259,-.0443503,.0861937,.575792,.993455,-.0446368,.0851187,.604233,.993497,-.0454299,.0840576,.632925,.993694,-.0463296,.0829671,.660985,.993718,-.0470619,.0817185,.688714,.993973,-.0468838,.0800294,.716743,.994207,-.046705,.0781286,.74377,.994168,-.0469698,.0763337,.77042,.9945,-.0456816,.0738184,.796659,.994356,-.0455518,.0715545,.821868,.994747,-.0439488,.0686085,.846572,.994937,-.0430056,.065869,.870435,.995142,-.0413414,.0626446,.893272,.995451,-.0396521,.05929,.915376,.995445,-.0378453,.0558503,.936196,.995967,-.0355219,.0520949,.956376,.996094,-.0335146,.048377,.975327,.996622,-.030682,.0442575,.993471,.996938,-.0285504,.0404693,1.01052,.997383,-.0253399,.0360903,1.02637,.997714,-.0231651,.0322176,1.04139,.998249,-.0198138,.0278433,1.05542,.998596,-.0174337,.0238759,1.06846,.998946,-.0141349,.0195944,1.08056,.99928,-.0115603,.0156279,1.09181,.999507,-.00839065,.0114607,1.10213,.999697,-.005666,.00763325,1.11169,.999869,-.00269902,.00364946,1.12042,1.00001,623836e-10,-319288e-10,1.12832,.987221,-222675e-11,.111332,197456e-10,.98739,-561116e-10,.111351,497563e-9,.987448,-224453e-9,.111357,.00199031,.987441,-505019e-9,.111357,.0044782,.987442,-897816e-9,.111357,.00796129,.987442,-.00140284,.111357,.0124396,.987444,-.00202012,.111357,.0179132,.987442,-.00274964,.111357,.0243824,.987446,-.00359147,.111357,.0318474,.987435,-.00454562,.111356,.0403086,.987461,-.00561225,.111358,.0497678,.987458,-.00679125,.111358,.0602239,.987443,-.0080828,.111356,.0716792,.987476,-.0094872,.111358,.0841364,.98749,-.0110044,.111361,.097597,.987508,-.0126344,.111362,.112062,.987494,-.0143767,.111357,.127533,.987526,-.0162307,.111359,.144015,.987558,-.0181912,.111361,.161502,.987602,-.0202393,.111355,.179979,.987692,-.022273,.111346,.199386,.987702,-.0235306,.111215,.219183,.987789,-.0247628,.111061,.239202,.987776,-.0280668,.111171,.259957,.987856,-.0316751,.111327,.282198,.987912,-.0342468,.111282,.306294,.988,-.0367205,.111198,.331219,.988055,-.0387766,.110994,.356708,.988241,-.0397722,.110547,.382234,.988399,-.0416076,.110198,.408227,.988539,-.0448192,.110137,.434662,.988661,-.0483793,.110143,.461442,.988967,-.0495895,.109453,.489318,.989073,-.0506797,.108628,.517516,.989274,-.0526953,.108003,.545844,.989528,-.054578,.107255,.573823,.989709,-.0561503,.106294,.601944,.989991,-.056866,.104896,.630855,.990392,-.0572914,.103336,.658925,.990374,-.0586224,.10189,.686661,.990747,-.0584764,.099783,.714548,.991041,-.0582662,.0974309,.74186,.991236,-.0584118,.0951678,.768422,.991585,-.0573055,.0921581,.794817,.991984,-.0564241,.0891167,.820336,.9921,-.0553608,.085805,.84493,.992749,-.0533816,.0820354,.868961,.99288,-.0518661,.0782181,.891931,.993511,-.0492492,.0738935,.914186,.993617,-.0471956,.0696402,.93532,.99411,-.044216,.0649659,.95543,.994595,-.0416654,.0603177,.974685,.994976,-.0384314,.0553493,.992807,.995579,-.0353491,.0503942,1.00996,.996069,-.0319787,.0452123,1.02606,.996718,-.028472,.0400112,1.04114,.997173,-.0250789,.0349456,1.05517,.997818,-.0213326,.029653,1.0683,.998318,-.0178509,.024549,1.0805,.998853,-.0141118,.0194197,1.09177,.999218,-.0105914,.0143869,1.1022,.999594,-.00693474,.00943517,1.11175,.99975,-.00340478,.00464051,1.12056,1.00001,109172e-9,-112821e-9,1.12853,.983383,-266524e-11,.133358,196534e-10,.981942,-671009e-10,.133162,494804e-9,.981946,-268405e-9,.133163,.00197923,.981944,-603912e-9,.133163,.00445326,.981941,-.00107362,.133162,.00791693,.981946,-.00167755,.133163,.0123703,.981944,-.00241569,.133162,.0178135,.981945,-.00328807,.133163,.0242466,.981945,-.00429472,.133162,.03167,.981955,-.00543573,.133164,.0400846,.981951,-.00671105,.133163,.0494901,.981968,-.00812092,.133165,.0598886,.981979,-.00966541,.133166,.0712811,.981996,-.0113446,.133168,.083669,.982014,-.0131585,.133169,.0970533,.982011,-.0151073,.133167,.111438,.982062,-.0171906,.133172,.126826,.9821,-.0194067,.133175,.143215,.982149,-.0217502,.133176,.160609,.982163,-.0241945,.133173,.178981,.982247,-.0265907,.133148,.198249,.982291,-.027916,.132974,.217795,.982396,-.0299663,.132868,.238042,.982456,-.0334544,.132934,.258901,.982499,-.0378636,.133137,.280639,.982617,-.0409274,.133085,.304604,.98274,-.0438523,.132985,.329376,.982944,-.0462288,.132728,.354697,.98308,-.0475995,.132228,.380102,.983391,-.0501901,.131924,.406256,.983514,-.0535899,.131737,.432735,.98373,-.0571858,.131567,.459359,.984056,-.0592353,.130932,.486637,.984234,-.0610488,.130092,.51509,.984748,-.0630758,.12923,.543461,.985073,-.0647398,.128174,.571376,.985195,-.0671941,.127133,.599414,.985734,-.0681345,.125576,.628134,.986241,-.0686089,.123639,.656399,.986356,-.0698511,.121834,.684258,.986894,-.0700931,.119454,.711818,.987382,-.0698321,.116718,.739511,.988109,-.0693975,.113699,.766267,.988363,-.0689584,.110454,.792456,.989112,-.0672353,.106602,.81813,.989241,-.0662034,.10267,.842889,.990333,-.0638938,.0981381,.867204,.990591,-.0618534,.0935388,.89038,.991106,-.0593117,.088553,.912576,.991919,-.0562676,.0832187,.934118,.992111,-.0534085,.0778302,.954254,.992997,-.0495459,.0720453,.973722,.993317,-.0463707,.0663458,.991949,.994133,-.0421245,.0601883,1.00936,.994705,-.0384977,.0542501,1.02559,.995495,-.0340956,.0479862,1.04083,.996206,-.030105,.041887,1.05497,.996971,-.0256095,.0355355,1.06824,.997796,-.0213932,.0293655,1.08056,.998272,-.0169612,.0232926,1.09182,.998857,-.0126756,.0172786,1.10219,.99939,-.00832486,.0113156,1.11192,.999752,-.00410826,.00557892,1.12075,1,150957e-9,-119101e-9,1.12885,.975169,-309397e-11,.154669,195073e-10,.975439,-779608e-10,.154712,491534e-9,.975464,-311847e-9,.154716,.00196617,.975464,-701656e-9,.154716,.00442387,.975462,-.0012474,.154715,.0078647,.975461,-.00194906,.154715,.0122886,.975464,-.00280667,.154715,.0176959,.975468,-.00382025,.154716,.0240867,.975471,-.00498985,.154716,.0314612,.975472,-.00631541,.154717,.0398199,.975486,-.00779719,.154718,.0491639,.975489,-.00943505,.154718,.0594932,.975509,-.0112295,.154721,.0708113,.97554,-.0131802,.154724,.0831176,.975557,-.0152876,.154726,.096415,.975585,-.0175512,.154728,.110705,.975605,-.0199713,.154729,.125992,.975645,-.0225447,.154729,.142272,.975711,-.0252649,.154735,.159549,.975788,-.0280986,.154736,.177805,.975872,-.0308232,.154704,.196911,.975968,-.0324841,.154525,.216324,.976063,-.0351281,.154432,.236628,.976157,-.0388618,.15446,.257539,.976204,-.0437704,.154665,.278975,.976358,-.047514,.154652,.302606,.976571,-.0508638,.154535,.327204,.976725,-.0534995,.154221,.352276,.977013,-.0555547,.153737,.377696,.977294,-.0586728,.153403,.403855,.977602,-.0622715,.15312,.430333,.977932,-.0658166,.152755,.456855,.978241,-.0689877,.152233,.483668,.978602,-.0712805,.15132,.512097,.979234,-.0732775,.150235,.540455,.97977,-.075163,.148978,.568486,.979995,-.0778026,.147755,.596524,.98078,-.0791854,.146019,.624825,.981628,-.0799666,.143906,.653403,.982067,-.0808532,.141561,.681445,.98271,-.0816024,.139025,.708918,.983734,-.0812511,.135764,.736594,.98431,-.0806201,.132152,.763576,.985071,-.0801605,.12846,.789797,.98618,-.0784208,.124084,.815804,.986886,-.0766643,.1193,.840869,.987485,-.0747744,.114236,.864952,.988431,-.0716701,.108654,.888431,.988886,-.0691609,.102994,.910963,.990024,-.0654048,.0967278,.932629,.990401,-.0619765,.090384,.95313,.991093,-.0579296,.0837885,.972587,.992018,-.0536576,.0770171,.991184,.992536,-.0493719,.0701486,1.00863,.993421,-.0444813,.062953,1.02494,.993928,-.040008,.0560455,1.04017,.994994,-.0347982,.04856,1.05463,.995866,-.0301017,.0416152,1.06807,.996916,-.0248225,.0342597,1.08039,.997766,-.0199229,.0271668,1.09177,.998479,-.0147422,.0201387,1.10235,.99921,-.00980173,.0131944,1.11206,.999652,-.0047426,.00640712,1.12104,.999998,891673e-10,-10379e-8,1.12906,.967868,-351885e-11,.175947,193569e-10,.968001,-886733e-10,.175972,487782e-9,.96801,-354697e-9,.175973,.00195115,.968012,-798063e-9,.175974,.00439006,.968011,-.00141879,.175973,.00780461,.968011,-.00221686,.175973,.0121948,.968016,-.00319231,.175974,.0175607,.968019,-.00434515,.175974,.0239027,.968018,-.00567538,.175974,.0312208,.968033,-.00718308,.175977,.0395158,.968049,-.00886836,.175979,.0487885,.968047,-.0107312,.175978,.0590394,.968072,-.0127719,.175981,.0702705,.968108,-.0149905,.175986,.0824836,.968112,-.0173866,.175985,.0956783,.968173,-.0199611,.175993,.109862,.96827,-.0227128,.176008,.125033,.968292,-.025639,.17601,.141193,.968339,-.0287299,.176007,.158336,.968389,-.0319399,.176001,.176441,.968501,-.034941,.175962,.195359,.968646,-.0370812,.175793,.214686,.968789,-.0402329,.175708,.234973,.96886,-.0442601,.1757,.255871,.969013,-.049398,.175876,.277238,.969242,-.0539932,.17594,.300326,.969419,-.0577299,.175781,.324702,.969763,-.0605643,.175432,.349527,.970093,-.0634488,.174992,.374976,.970361,-.0670589,.174611,.401097,.970825,-.0708246,.174226,.427496,.971214,-.0742871,.173684,.453858,.971622,-.0782608,.173186,.480637,.972175,-.0813151,.172288,.508655,.972944,-.0832678,.170979,.536973,.973595,-.0855964,.169573,.565138,.974345,-.0882163,.168152,.593222,.975233,-.0901671,.166314,.621201,.976239,-.0912111,.163931,.649919,.977289,-.0916959,.161106,.678011,.978076,-.0927061,.158272,.705717,.979533,-.0925562,.15475,.733228,.980335,-.0918159,.150638,.760454,.981808,-.0908508,.146201,.786918,.983061,-.0896172,.141386,.812953,.984148,-.0871588,.135837,.838281,.985047,-.0850624,.130135,.862594,.986219,-.0818541,.123882,.88633,.987043,-.0784523,.117126,.908952,.988107,-.0749601,.110341,.930744,.988955,-.0703548,.102885,.951728,.989426,-.0662798,.0954167,.971166,.990421,-.0610834,.0876331,.989984,.991032,-.0562936,.0797785,1.00765,.992041,-.0508154,.0718166,1.02434,.992794,-.0454045,.0637125,1.03976,.993691,-.0398194,.0555338,1.05418,.994778,-.0341482,.0473388,1.06772,.995915,-.028428,.0391016,1.08028,.997109,-.022642,.0309953,1.09185,.998095,-.0168738,.0230288,1.10247,.998985,-.0111274,.0150722,1.11229,.999581,-.00543881,.00740605,1.12131,1.00003,162239e-9,-105549e-9,1.12946,.959505,-393734e-11,.196876,191893e-10,.959599,-992157e-10,.196895,483544e-9,.959641,-396868e-9,.196903,.0019342,.959599,-892948e-9,.196895,.00435193,.959603,-.00158747,.196896,.0077368,.959604,-.00248042,.196896,.0120888,.959605,-.00357184,.196896,.0174082,.959605,-.00486169,.196896,.0236949,.959613,-.00635008,.196897,.0309497,.959619,-.00803696,.196898,.0391725,.959636,-.00992255,.196901,.0483649,.959634,-.0120067,.1969,.0585266,.959675,-.0142898,.196906,.0696609,.959712,-.0167717,.196911,.0817678,.959752,-.0194524,.196918,.0948494,.959807,-.0223321,.196925,.10891,.959828,-.0254091,.196924,.123947,.959906,-.0286815,.196934,.139968,.960005,-.0321371,.196944,.156968,.960071,-.0357114,.196936,.17491,.960237,-.0389064,.196882,.193597,.960367,-.041623,.196731,.21285,.960562,-.0452655,.196654,.233075,.960735,-.0496207,.196643,.253941,.960913,-.0549379,.196774,.275278,.961121,-.0603414,.196893,.297733,.96139,-.0644244,.196717,.321877,.961818,-.067556,.196314,.346476,.962175,-.0712709,.195917,.371907,.96255,-.0752848,.1955,.397916,.963164,-.0792073,.195026,.424229,.963782,-.0828225,.194424,.450637,.964306,-.0873119,.193831,.477288,.964923,-.0911051,.192973,.504716,.966048,-.093251,.19151,.533053,.967024,-.0958983,.190013,.561366,.968038,-.09835,.188253,.589464,.969152,-.100754,.186257,.617433,.970557,-.102239,.183775,.645801,.972104,-.102767,.180645,.674278,.973203,-.103492,.177242,.702004,.975123,-.103793,.17345,.729529,.97641,-.102839,.168886,.756712,.978313,-.101687,.163892,.783801,.980036,-.100314,.158439,.809671,.981339,-.097836,.152211,.835402,.982794,-.0950006,.145679,.860081,.984123,-.0920994,.138949,.883757,.984918,-.0878641,.131283,.90685,.985999,-.083939,.123464,.928786,.987151,-.0791234,.115324,.94983,.987827,-.0739332,.106854,.96962,.988806,-.0688088,.0982691,.98861,.989588,-.0628962,.0893456,1.00667,.990438,-.0573146,.0805392,1.02344,.991506,-.0509433,.0713725,1.03933,.992492,-.0448724,.0623732,1.05378,.993663,-.0383497,.0530838,1.06747,.994956,-.0319593,.0439512,1.08007,.99634,-.025401,.0347803,1.09182,.99761,-.0189687,.0257954,1.1025,.99863,-.0124441,.0169893,1.11247,.99947,-.00614003,.00829498,1.12151,1.00008,216624e-9,-146107e-9,1.12993,.950129,-434955e-11,.217413,190081e-10,.950264,-10957e-8,.217444,47884e-8,.9503,-438299e-9,.217451,.00191543,.950246,-986124e-9,.21744,.00430951,.950246,-.00175311,.21744,.00766137,.950245,-.00273923,.21744,.011971,.950253,-.00394453,.217441,.0172385,.950258,-.00536897,.217442,.0234641,.950267,-.00701262,.217444,.030648,.950277,-.00887551,.217446,.038791,.950284,-.0109576,.217446,.0478931,.950312,-.0132591,.217451,.0579568,.950334,-.01578,.217454,.0689821,.950378,-.0185204,.217462,.0809714,.950417,-.0214803,.217467,.0939265,.950488,-.0246594,.217479,.10785,.950534,-.0280565,.217483,.122743,.950633,-.0316685,.217498,.138611,.950698,-.0354787,.217499,.155442,.950844,-.0394003,.217507,.173208,.950999,-.0426812,.217419,.191605,.951221,-.0461302,.217317,.21084,.951412,-.0502131,.217238,.230945,.951623,-.0549183,.21722,.251745,.951867,-.0604493,.217306,.273001,.952069,-.0665189,.217466,.294874,.952459,-.0709179,.217266,.318732,.952996,-.0746112,.216891,.34318,.953425,-.0789252,.216503,.36849,.953885,-.0833293,.216042,.394373,.954617,-.087371,.215469,.420505,.955429,-.0914054,.214802,.446907,.956068,-.0961671,.214146,.473522,.957094,-.10048,.213286,.50052,.958372,-.103248,.211796,.528715,.959654,-.106033,.21016,.557065,.961305,-.108384,.208149,.585286,.962785,-.111122,.206024,.613334,.964848,-.112981,.203442,.641334,.966498,-.113717,.19996,.669955,.968678,-.114121,.196105,.698094,.970489,-.114524,.191906,.725643,.972903,-.113792,.186963,.752856,.974701,-.112406,.181343,.780013,.976718,-.110685,.175185,.806268,.978905,-.108468,.168535,.832073,.980267,-.105061,.161106,.857149,.981967,-.101675,.153387,.881145,.983063,-.0974492,.145199,.904255,.984432,-.0925815,.136527,.926686,.985734,-.0877983,.127584,.947901,.986228,-.081884,.118125,.968111,.98719,-.0761208,.108594,.98719,.988228,-.0698196,.0989996,1.00559,.989046,-.0632739,.0890074,1.02246,.990242,-.056522,.0790832,1.03841,.991252,-.0495272,.0689182,1.05347,.992542,-.0425373,.0588592,1.06724,.994096,-.0353198,.0486833,1.08009,.995593,-.028235,.0385977,1.09177,.99711,-.0209511,.0286457,1.10274,.998263,-.0139289,.0188497,1.11262,.999254,-.0067359,.009208,1.12191,.999967,141846e-9,-657764e-10,1.13024,.935608,-474692e-11,.236466,187817e-10,.93996,-11971e-8,.237568,473646e-9,.939959,-478845e-9,.237567,.0018946,.939954,-.0010774,.237566,.00426284,.939956,-.00191538,.237566,.00757842,.939954,-.00299277,.237566,.0118413,.93996,-.00430961,.237567,.0170518,.939969,-.00586589,.237569,.02321,.939982,-.00766166,.237572,.0303164,.939987,-.00969686,.237572,.0383711,.939997,-.0119715,.237574,.0473751,.940031,-.0144858,.237581,.0573298,.940073,-.0172399,.237589,.0682366,.94012,-.0202335,.237598,.080097,.940162,-.0234663,.237604,.0929116,.940237,-.0269387,.237615,.106686,.940328,-.0306489,.237632,.121421,.940419,-.0345917,.237645,.137115,.940522,-.0387481,.237654,.153766,.940702,-.0429906,.237661,.17133,.940871,-.0465089,.237561,.189502,.941103,-.050531,.23748,.208616,.941369,-.0550657,.237423,.228595,.941641,-.0601337,.237399,.249287,.941903,-.0658804,.237443,.270467,.942224,-.0722674,.237597,.292024,.942633,-.0771788,.237419,.315272,.943172,-.0815623,.237068,.339579,.943691,-.0863973,.236682,.364717,.944382,-.0911536,.236213,.390435,.945392,-.0952967,.235562,.416425,.946185,-.0998948,.234832,.442772,.947212,-.104796,.234114,.469347,.948778,-.10928,.233222,.496162,.950149,-.113081,.231845,.523978,.951989,-.115893,.230005,.552295,.953921,-.11846,.227862,.580569,.955624,-.12115,.225439,.608698,.958234,-.123373,.222635,.636696,.960593,-.124519,.219093,.665208,.963201,-.124736,.214749,.693557,.965642,-.125012,.210059,.721334,.968765,-.124661,.204935,.748613,.971753,-.122996,.198661,.776224,.973751,-.120998,.191823,.802461,.976709,-.118583,.184359,.828399,.977956,-.115102,.176437,.853693,.979672,-.111077,.167681,.877962,.981816,-.10688,.158872,.901564,.98238,-.101469,.149398,.924057,.983964,-.0960013,.139436,.945751,.984933,-.0899626,.12943,.966272,.985694,-.0832973,.11894,.985741,.986822,-.0767082,.108349,1.00407,.987725,-.0693614,.0976026,1.02154,.98877,-.06211,.086652,1.03757,.990129,-.0544143,.0756182,1.05296,.991337,-.046744,.0645753,1.06683,.992978,-.0387931,.0534683,1.0798,.994676,-.030973,.0424137,1.09181,.99645,-.0230311,.0314035,1.10286,.997967,-.0152065,.0206869,1.11291,.99922,-.00744837,.010155,1.12237,1.00002,240209e-9,-752767e-10,1.13089,.922948,-515351e-11,.255626,186069e-10,.928785,-129623e-9,.257244,468009e-9,.928761,-51849e-8,.257237,.00187202,.928751,-.0011666,.257235,.00421204,.928751,-.00207395,.257234,.0074881,.928754,-.00324055,.257235,.0117002,.92876,-.00466639,.257236,.0168486,.928763,-.00635149,.257237,.0229334,.928774,-.00829584,.257239,.029955,.928791,-.0104995,.257243,.0379139,.928804,-.0129623,.257245,.0468108,.928847,-.0156846,.257255,.0566473,.92889,-.0186661,.257263,.0674246,.928924,-.0219067,.257268,.0791433,.928989,-.0254066,.257282,.0918076,.92909,-.0291651,.257301,.105419,.92918,-.0331801,.257316,.119978,.92929,-.0374469,.257332,.135491,.929453,-.041939,.257357,.151948,.929586,-.0464612,.257347,.169275,.929858,-.0503426,.257269,.187257,.930125,-.0548409,.257199,.206204,.930403,-.0598063,.257149,.22601,.930726,-.0652437,.257122,.246561,.931098,-.0712376,.257153,.267618,.931396,-.0777506,.257237,.288993,.931947,-.0832374,.257124,.311527,.932579,-.0883955,.25683,.335697,.933194,-.0937037,.256444,.360634,.934013,-.0987292,.255939,.386126,.935307,-.103215,.255282,.412018,.936374,-.108234,.254538,.438292,.93776,-.113234,.253728,.464805,.939599,-.118013,.25275,.491464,.941036,-.122661,.251404,.518751,.94337,-.125477,.249435,.547133,.945318,-.128374,.247113,.575456,.947995,-.130996,.244441,.60372,.950818,-.133438,.241352,.63174,.954378,-.135004,.237849,.659971,.957151,-.135313,.233188,.688478,.960743,-.13521,.228001,.716767,.964352,-.135007,.222249,.744349,.967273,-.133523,.21542,.771786,.969767,-.131155,.208039,.798639,.973195,-.128492,.200076,.824774,.975557,-.125094,.191451,.850222,.977692,-.120578,.18184,.874761,.98026,-.115882,.172102,.898497,.981394,-.110372,.161859,.921636,.982386,-.10415,.15108,.943467,.983783,-.0978128,.140407,.964045,.98422,-.0906171,.129058,.98398,.985447,-.0832921,.117614,1.00276,.986682,-.0754412,.10585,1.02047,.987326,-.0673885,.0940943,1.03678,.988707,-.0592565,.0822093,1.05218,.990185,-.050717,.070192,1.06652,.991866,-.0423486,.0582081,1.07965,.993897,-.0336118,.0460985,1.09188,.995841,-.0252178,.0342737,1.10307,.997605,-.0164893,.0224829,1.11324,.999037,-.00817112,.0110647,1.12262,1.00003,291686e-9,-168673e-9,1.13139,.915304,-552675e-11,.275999,183285e-10,.91668,-139285e-9,.276414,461914e-9,.916664,-55713e-8,.276409,.00184763,.916653,-.00125354,.276406,.00415715,.916651,-.00222851,.276405,.00739053,.916655,-.00348205,.276406,.0115478,.916653,-.00501414,.276405,.0166291,.916667,-.00682478,.276409,.0226346,.91668,-.00891398,.276412,.0295648,.91669,-.0112817,.276413,.0374199,.916727,-.013928,.276422,.0462016,.916759,-.0168528,.276429,.0559101,.916793,-.0200558,.276436,.0665466,.916849,-.0235373,.276448,.0781139,.916964,-.0272973,.276474,.0906156,.917047,-.0313344,.276491,.104051,.917152,-.0356465,.276511,.118424,.917286,-.0402271,.276533,.133736,.917469,-.0450408,.276564,.149978,.917686,-.0497872,.276563,.167057,.917953,-.0540937,.276493,.184846,.918228,-.0590709,.276437,.203614,.918572,-.0644277,.276398,.223212,.918918,-.0702326,.276362,.243584,.919356,-.076484,.276383,.264465,.919842,-.0830808,.276434,.285701,.920451,-.0892972,.276407,.307559,.921113,-.095016,.276128,.331501,.921881,-.100771,.275754,.356207,.923027,-.106029,.275254,.381477,.924364,-.111029,.274595,.40722,.925818,-.116345,.273841,.433385,.92746,-.121424,.272913,.459848,.929167,-.12657,.271837,.486493,.931426,-.131581,.270575,.513432,.934001,-.135038,.268512,.541502,.936296,-.138039,.266135,.569658,.939985,-.140687,.263271,.598375,.943516,-.143247,.260058,.626563,.94782,-.145135,.256138,.654711,.951023,-.145733,.251154,.683285,.955338,-.145554,.245562,.711831,.959629,-.145008,.239265,.739573,.963123,-.144003,.232064,.767027,.966742,-.141289,.224036,.794359,.969991,-.138247,.215305,.820361,.973403,-.134786,.206051,.846548,.975317,-.129966,.195914,.871541,.977647,-.12471,.185184,.895313,.980137,-.119086,.174161,.918398,.981031,-.112297,.162792,.940679,.982037,-.105372,.150952,.961991,.983164,-.097821,.138921,.981913,.983757,-.0897245,.126611,1.00109,.985036,-.0815974,.114228,1.01902,.986289,-.0727725,.101389,1.03604,.987329,-.0639323,.0886476,1.05149,.989193,-.0548109,.0756837,1.06619,.990716,-.045687,.0627581,1.07948,.992769,-.0364315,.0498337,1.09172,.99524,-.0271761,.0370305,1.1033,.997154,-.0179609,.0243959,1.11353,.998845,-.00878063,.0119567,1.12319,1.00002,259038e-9,-108146e-9,1.13177,.903945,-591681e-11,.295126,181226e-10,.903668,-148672e-9,.295037,455367e-9,.903677,-594683e-9,.29504,.00182145,.903673,-.00133805,.295039,.00409831,.903666,-.00237872,.295036,.00728584,.903668,-.00371676,.295037,.0113842,.903679,-.00535212,.29504,.0163936,.903684,-.00728479,.295041,.0223141,.903698,-.00951473,.295044,.0291462,.903718,-.0120419,.295049,.0368904,.903754,-.0148664,.295058,.0455477,.903801,-.017988,.29507,.0551194,.903851,-.0214064,.295082,.0656058,.903921,-.0251219,.295097,.0770109,.904002,-.0291337,.295116,.0893354,.904111,-.033441,.29514,.102583,.904246,-.0380415,.295169,.116755,.904408,-.0429258,.295202,.131853,.904637,-.0480468,.295245,.147869,.904821,-.0529208,.295214,.164658,.905163,-.0577748,.295185,.182274,.905469,-.0631763,.295143,.200828,.905851,-.068917,.295112,.2202,.906322,-.0750861,.295104,.240372,.906761,-.0815855,.295086,.261082,.90735,-.0882138,.295095,.282123,.908087,-.095082,.295139,.303563,.908826,-.101488,.29492,.327028,.909832,-.107577,.294577,.351464,.911393,-.113033,.294115,.376497,.912804,-.118629,.293446,.402115,.914081,-.124232,.292581,.428111,.91637,-.129399,.29166,.454442,.91814,-.134892,.290422,.481024,.921179,-.140069,.289194,.507924,.924544,-.144431,.287421,.535557,.927995,-.147498,.284867,.563984,.931556,-.150197,.281722,.5923,.935777,-.152711,.278207,.620832,.940869,-.154836,.274148,.649069,.945994,-.155912,.269057,.677746,.949634,-.155641,.262799,.706293,.955032,-.154809,.256097,.734278,.95917,-.153678,.248618,.761751,.962931,-.151253,.239794,.789032,.966045,-.147625,.230281,.815422,.96971,-.143964,.220382,.841787,.972747,-.139464,.209846,.867446,.975545,-.133459,.198189,.892004,.978381,-.127424,.186362,.915458,.979935,-.120506,.173964,.937948,.980948,-.11282,.161429,.959732,.982234,-.104941,.148557,.980118,.982767,-.0962905,.135508,.999463,.983544,-.0873625,.122338,1.01756,.984965,-.0783447,.108669,1.03492,.986233,-.0684798,.0949911,1.05087,.987796,-.0590867,.0811386,1.0656,.989885,-.0489145,.0673099,1.0794,.991821,-.0391,.0535665,1.09174,.99448,-.029087,.0397529,1.10341,.996769,-.019114,.0261463,1.11383,.998641,-.00947007,.0128731,1.1237,.999978,446316e-9,-169093e-9,1.13253,.888362,-627064e-11,.312578,178215e-10,.889988,-157791e-9,.313148,448451e-9,.889825,-631076e-9,.313092,.00179356,.88984,-.00141994,.313097,.00403554,.889828,-.0025243,.313092,.00717429,.889831,-.00394421,.313093,.0112099,.889831,-.00567962,.313093,.0161425,.889844,-.00773051,.313096,.0219724,.889858,-.0100968,.3131,.0286999,.889882,-.0127786,.313106,.0363256,.889918,-.0157757,.313116,.0448509,.889967,-.0190878,.313129,.0542758,.89003,-.022715,.313145,.0646032,.890108,-.0266566,.313165,.0758339,.890218,-.0309131,.313193,.0879729,.890351,-.0354819,.313226,.101019,.89051,-.0403613,.313263,.114979,.890672,-.0455385,.313294,.129848,.890882,-.0509444,.313333,.145616,.891189,-.0559657,.313324,.162122,.891457,-.0613123,.313281,.179524,.891856,-.0671488,.313281,.197855,.892312,-.0732732,.313268,.216991,.892819,-.0797865,.313263,.236924,.893369,-.0865269,.313247,.257433,.894045,-.0931592,.313205,.278215,.894884,-.100532,.313276,.299467,.895832,-.107716,.313205,.322276,.897043,-.114099,.312873,.34642,.898515,-.119941,.312331,.371187,.900191,-.126044,.311731,.396656,.90188,-.131808,.310859,.422488,.904359,-.137289,.309857,.448744,.906923,-.142991,.308714,.475239,.910634,-.148253,.307465,.501983,.914502,-.153332,.305774,.529254,.919046,-.156646,.303156,.557709,.923194,-.159612,.299928,.586267,.928858,-.162027,.296245,.614925,.934464,-.164203,.291832,.643187,.939824,-.165602,.286565,.671601,.944582,-.165383,.280073,.700213,.949257,-.164439,.272891,.728432,.954389,-.162953,.264771,.756082,.958595,-.161007,.255927,.78369,.962138,-.157243,.245769,.810769,.966979,-.152872,.235127,.836999,.969566,-.148209,.22347,.862684,.972372,-.142211,.211147,.887847,.975916,-.135458,.198606,.911843,.978026,-.128398,.185498,.934795,.979686,-.120313,.17171,.956787,.980748,-.11166,.158159,.978046,.981622,-.103035,.144399,.997693,.982356,-.0930328,.13001,1.01642,.983308,-.0834627,.115778,1.03366,.985037,-.0732249,.101327,1.05014,.986493,-.0628145,.086554,1.06507,.988484,-.0526556,.0720413,1.07907,.991051,-.0415744,.0571151,1.09189,.993523,-.0314275,.0426643,1.10369,.99628,-.0203603,.0279325,1.11423,.998344,-.0102446,.0138182,1.12421,.999997,42612e-8,-193628e-9,1.1333,.871555,-660007e-11,.329176,174749e-10,.875255,-166579e-9,.330571,441051e-9,.875644,-666394e-9,.330718,.00176441,.875159,-.00149903,.330536,.00396899,.87516,-.00266493,.330536,.007056,.875158,-.00416393,.330535,.0110251,.87516,-.00599598,.330535,.0158764,.875163,-.00816108,.330536,.0216101,.875174,-.0106591,.330538,.0282266,.875199,-.0134899,.330545,.0357266,.875257,-.0166538,.330563,.0441117,.875304,-.0201501,.330575,.0533821,.875373,-.0239785,.330595,.0635395,.875464,-.0281389,.330619,.0745872,.875565,-.0326301,.330645,.0865255,.875691,-.0374516,.330676,.0993599,.875897,-.0425993,.330733,.113093,.876091,-.0480576,.330776,.127722,.876353,-.0537216,.330826,.143227,.876649,-.0589807,.330809,.159462,.877034,-.0647865,.330819,.176642,.877443,-.0709789,.330817,.194702,.877956,-.0774782,.330832,.213577,.878499,-.0843175,.330822,.233246,.879144,-.0912714,.330804,.253512,.879982,-.0980824,.330766,.274137,.88097,-.105823,.330864,.295209,.882051,-.113671,.330896,.317226,.883397,-.120303,.330545,.341068,.884987,-.12667,.330068,.365613,.886789,-.133118,.329418,.390807,.889311,-.139024,.328683,.416494,.891995,-.144971,.327729,.442618,.895106,-.150747,.326521,.469131,.899527,-.156283,.325229,.495921,.90504,-.161707,.32378,.523162,.909875,-.165661,.32122,.55092,.91561,-.168755,.317942,.579928,.921225,-.171193,.313983,.608539,.927308,-.17319,.309636,.636854,.933077,-.174819,.304262,.66523,.938766,-.175002,.297563,.693609,.943667,-.173946,.289613,.722157,.949033,-.172221,.281227,.750021,.953765,-.169869,.271545,.777466,.95804,-.166578,.261034,.804853,.962302,-.161761,.249434,.831569,.966544,-.156636,.237484,.857779,.969372,-.150784,.224395,.883051,.972486,-.143672,.210786,.907864,.975853,-.135772,.196556,.931223,.977975,-.127942,.182307,.954061,.979122,-.118347,.167607,.97531,.980719,-.109112,.152739,.995666,.981223,-.0991789,.137932,1.01475,.98216,-.0883553,.122692,1.03253,.983379,-.0780825,.107493,1.04917,.985434,-.0665646,.0917791,1.06464,.987332,-.0557714,.0764949,1.07896,.990004,-.0442805,.060721,1.09199,.992975,-.0331676,.0452284,1.10393,.995811,-.0219547,.0297934,1.11476,.9982,-.0107613,.0146415,1.12484,1.00002,248678e-9,-14555e-8,1.13413,.859519,-693595e-11,.347264,171673e-10,.859843,-17503e-8,.347394,433219e-9,.859656,-700076e-9,.347319,.00173277,.859671,-.00157517,.347325,.00389875,.859669,-.00280028,.347324,.00693112,.85967,-.0043754,.347324,.01083,.859665,-.00630049,.347321,.0155954,.859685,-.0085755,.347328,.0212278,.859694,-.0112003,.347329,.0277273,.859718,-.0141747,.347336,.0350946,.85976,-.0174988,.347348,.0433314,.85982,-.0211722,.347366,.0524384,.859892,-.0251941,.347387,.0624168,.860006,-.0295649,.347422,.0732708,.860122,-.0342825,.347453,.0849999,.860282,-.0393462,.347499,.0976102,.860482,-.0447513,.347554,.111104,.860719,-.0504775,.347614,.125479,.860998,-.0563577,.347666,.140703,.861322,-.0619473,.347662,.156681,.861724,-.0681277,.347684,.173597,.862198,-.0746567,.347709,.191371,.862733,-.0815234,.347727,.209976,.863371,-.0886643,.347744,.229351,.86414,-.0957908,.347734,.24934,.865138,-.102912,.34772,.269797,.866182,-.110924,.3478,.290654,.867436,-.119223,.347911,.312074,.869087,-.126197,.347649,.335438,.870859,-.133145,.347222,.359732,.872997,-.139869,.346645,.38467,.875939,-.146089,.345935,.41019,.879012,-.152334,.345012,.436218,.883353,-.15821,.343924,.462641,.888362,-.164097,.342636,.489449,.895026,-.169528,.341351,.516629,.900753,-.174408,.339115,.544109,.906814,-.17751,.335809,.572857,.912855,-.180101,.331597,.601554,.919438,-.182116,.32698,.630198,.925962,-.183494,.321449,.658404,.931734,-.184159,.314595,.686625,.93762,-.18304,.306462,.71531,.943858,-.181323,.297514,.744272,.948662,-.178683,.287447,.771462,.953299,-.175379,.276166,.798593,.957346,-.170395,.263758,.8256,.962565,-.165042,.251019,.852575,.966075,-.158655,.237011,.878316,.969048,-.151707,.222518,.90329,.972423,-.143271,.207848,.927745,.975833,-.134824,.192463,.950859,.977629,-.125444,.1768,.972947,.978995,-.114949,.161033,.993263,.980533,-.104936,.145523,1.01337,.980745,-.0935577,.129799,1.03128,.981814,-.0822956,.113486,1.04825,.983943,-.0710082,.0972925,1.06405,.986141,-.0587931,.0808138,1.0785,.988878,-.0472755,.0644915,1.09204,.992132,-.0349128,.0478128,1.10413,.9953,-.0232407,.031621,1.11527,.998117,-.0112713,.0154935,1.12551,1.00003,339743e-9,-195763e-9,1.13504,.845441,-729126e-11,.364305,169208e-10,.843588,-183164e-9,.363506,425067e-9,.843412,-73253e-8,.36343,.00169999,.843401,-.00164818,.363426,.00382495,.843399,-.00293008,.363425,.00679993,.843401,-.00457822,.363425,.010625,.843394,-.00659249,.363421,.0153002,.843398,-.00897282,.363421,.0208258,.843415,-.0117191,.363426,.0272024,.843438,-.0148312,.363432,.0344305,.843483,-.018309,.363447,.0425116,.84356,-.0221521,.363472,.0514471,.843646,-.0263597,.363499,.061238,.843743,-.0309315,.363527,.0718873,.84388,-.0358658,.363569,.0833969,.844079,-.0411624,.363631,.0957742,.844279,-.0468128,.363688,.109015,.844549,-.0527923,.363761,.123124,.844858,-.0588204,.363817,.138044,.84522,-.0647573,.36383,.153755,.845669,-.0713181,.363879,.170394,.846155,-.0781697,.363908,.187861,.846789,-.0853913,.363969,.206176,.847502,-.0928086,.363999,.225244,.8484,-.10005,.363997,.244926,.849461,-.107615,.364008,.265188,.850562,-.115814,.364055,.28587,.851962,-.124334,.364179,.306926,.854326,-.131995,.364233,.329605,.856295,-.139338,.363856,.35359,.858857,-.146346,.363347,.37831,.862428,-.152994,.362807,.403722,.866203,-.159463,.361963,.429537,.871629,-.165623,.36112,.456,.877365,-.171649,.359917,.482773,.883744,-.177151,.35848,.509705,.890693,-.182381,.356523,.537215,.897278,-.186076,.3533,.565493,.903958,-.188602,.349095,.594293,.910908,-.190755,.344215,.623165,.918117,-.192063,.338606,.651573,.924644,-.192758,.331544,.679869,.931054,-.192238,.323163,.708668,.937303,-.190035,.313529,.737201,.943387,-.187162,.303152,.764977,.948494,-.183876,.29146,.792683,.952546,-.178901,.277917,.819228,.958077,-.173173,.264753,.846559,.962462,-.16645,.25002,.872962,.966569,-.159452,.234873,.898729,.969108,-.15074,.218752,.923126,.973072,-.141523,.202673,.947278,.975452,-.132075,.186326,.969938,.977784,-.121257,.169396,.991325,.97899,-.110182,.153044,1.01123,.979777,-.0989634,.136485,1.0299,.980865,-.0865894,.119343,1.04727,.982432,-.0746115,.102452,1.06341,.984935,-.0621822,.0852423,1.07834,.987776,-.0495694,.0678546,1.092,.99103,-.0372386,.0506917,1.1043,.99474,-.0244353,.0333316,1.11576,.997768,-.0121448,.0164348,1.12617,1.00003,31774e-8,-169504e-9,1.13598,.825551,-756799e-11,.378425,165099e-10,.82664,-190922e-9,.378923,416504e-9,.826323,-763495e-9,.378779,.0016656,.826359,-.00171789,.378795,.00374768,.82636,-.00305402,.378795,.00666259,.826368,-.00477185,.378798,.0104104,.826364,-.00687131,.378795,.0149912,.826368,-.00935232,.378795,.0204054,.826376,-.0122146,.378797,.0266532,.826399,-.0154581,.378803,.0337355,.82646,-.0190825,.378824,.0416537,.826525,-.0230873,.378846,.0504091,.826614,-.0274719,.378876,.0600032,.82674,-.0322355,.378917,.0704393,.826888,-.0373766,.378964,.0817195,.827078,-.0428936,.379024,.0938492,.827318,-.0487778,.379099,.106828,.82764,-.0549935,.379199,.120659,.827926,-.0611058,.379227,.13526,.828325,-.0675054,.379275,.150713,.828801,-.0743455,.379332,.167034,.8294,-.0815523,.379415,.184209,.830094,-.0890779,.379495,.202203,.8309,-.096736,.379555,.220945,.831943,-.104135,.379577,.240306,.833037,-.112106,.379604,.260317,.834278,-.120554,.379668,.2808,.836192,-.129128,.3799,.301654,.838671,-.137541,.380109,.323502,.840939,-.14523,.379809,.347176,.844575,-.15248,.379593,.371706,.848379,-.159607,.37909,.39688,.853616,-.166267,.378617,.422702,.858921,-.172698,.377746,.448919,.865324,-.178823,.376749,.475661,.872207,-.184542,.375363,.502599,.880018,-.189836,.373657,.529914,.88694,-.194294,.370673,.557683,.894779,-.197022,.36662,.586848,.902242,-.199108,.36138,.615831,.909914,-.200398,.355434,.644478,.917088,-.20094,.348173,.672905,.923888,-.200671,.339482,.701327,.930495,-.198773,.32956,.730101,.937247,-.195394,.318363,.758383,.943108,-.191956,.306323,.786539,.948296,-.187227,.292576,.813637,.953472,-.181165,.278234,.840793,.958485,-.174119,.263054,.867712,.962714,-.166564,.246756,.893635,.966185,-.158181,.229945,.919028,.970146,-.148275,.212633,.943413,.973491,-.138157,.195229,.966627,.975741,-.127574,.178048,.988817,.977238,-.11554,.160312,1.00924,.978411,-.10364,.142857,1.02845,.979811,-.0913122,.125317,1.04648,.98116,-.0782558,.107627,1.06284,.983543,-.0655957,.0895862,1.07798,.986789,-.0520411,.0713756,1.092,.990292,-.0389727,.053228,1.10484,.994187,-.025808,.0351945,1.11642,.997499,-.0126071,.0173198,1.12703,.999999,275604e-9,-148602e-9,1.13674,.81075,-78735e-10,.394456,161829e-10,.808692,-198293e-9,.393453,407564e-9,.80846,-792877e-9,.39334,.00162965,.808595,-.00178416,.393407,.00366711,.808597,-.00317182,.393408,.00651934,.808598,-.00495589,.393408,.0101866,.808591,-.00713627,.393403,.0146689,.808592,-.00971285,.393402,.0199667,.80861,-.0126855,.393407,.0260803,.808633,-.0160538,.393413,.0330107,.80868,-.0198175,.393429,.0407589,.808748,-.0239758,.393453,.0493264,.808854,-.0285286,.39349,.0587161,.808992,-.0334748,.39354,.0689304,.809141,-.0388116,.393588,.0799707,.809352,-.0445375,.39366,.0918432,.809608,-.0506427,.393742,.104549,.809915,-.0570708,.393834,.118085,.810253,-.0633526,.393885,.132377,.810687,-.0700966,.393953,.147537,.811233,-.0772274,.394047,.163543,.811865,-.0847629,.394148,.180394,.812648,-.0925663,.394265,.198051,.813583,-.100416,.394363,.216443,.814683,-.108119,.394402,.235502,.815948,-.11644,.394489,.255242,.817278,-.125036,.394542,.275441,.819605,-.133655,.39486,.296094,.822256,-.142682,.395248,.317309,.825349,-.150756,.395241,.340516,.829605,-.158392,.395285,.364819,.83391,-.165801,.394922,.389736,.839808,-.172677,.394691,.415409,.845708,-.179448,.394006,.441546,.853025,-.185746,.393279,.46832,.859666,-.191684,.391655,.495302,.86789,-.197146,.390068,.52262,.875845,-.201904,.38727,.550336,.882634,-.205023,.382688,.578825,.891076,-.207098,.377543,.608103,.900589,-.208474,.371752,.63723,.90791,-.209068,.364016,.665769,.915971,-.208655,.355593,.694428,.923455,-.20729,.345439,.723224,.931514,-.203821,.334099,.751925,.937885,-.19986,.321069,.780249,.943136,-.194993,.306571,.8077,.948818,-.189132,.291556,.83497,.954433,-.181617,.275745,.86188,.959078,-.173595,.258695,.888562,.962705,-.164855,.240825,.914008,.966753,-.155129,.22268,.939145,.970704,-.144241,.204542,.963393,.973367,-.133188,.185927,.985983,.975984,-.121146,.167743,1.00704,.976994,-.108366,.149218,1.02715,.978485,-.0956746,.13131,1.0455,.980074,-.0820733,.112513,1.06221,.98225,-.0684061,.0938323,1.07782,.98553,-.0549503,.0749508,1.09199,.989529,-.0407857,.055848,1.10508,.993536,-.0271978,.0368581,1.11684,.997247,-.0132716,.0181845,1.12789,1,431817e-9,-198809e-9,1.13792,.785886,-812608e-11,.405036,157669e-10,.790388,-205278e-9,.407355,398297e-9,.790145,-820824e-9,.407231,.00159263,.790135,-.00184681,.407226,.00358336,.790119,-.00328316,.407218,.00637039,.790126,-.00512988,.40722,.0099539,.79013,-.00738684,.407221,.0143339,.790135,-.0100538,.407221,.0195107,.790134,-.0131306,.407217,.0254848,.79016,-.0166169,.407224,.0322572,.790197,-.020512,.407236,.0398284,.790273,-.0248157,.407263,.0482014,.790381,-.029527,.407304,.0573777,.790521,-.0346446,.407355,.0673602,.790704,-.0401665,.40742,.0781522,.790925,-.0460896,.407499,.0897582,.791195,-.0524017,.407589,.10218,.791522,-.0590121,.407691,.11541,.791878,-.0654876,.407748,.12939,.792361,-.0725207,.407849,.144237,.792942,-.0799844,.407963,.159924,.79362,-.0877896,.408087,.176425,.794529,-.0958451,.408259,.193733,.795521,-.103827,.408362,.211756,.796778,-.111937,.408482,.230524,.798027,-.120521,.408547,.249967,.799813,-.129242,.408721,.269926,.802387,-.138048,.409148,.290338,.805279,-.147301,.409641,.311193,.809251,-.155895,.410154,.333611,.813733,-.163942,.410297,.357615,.819081,-.171666,.410373,.382339,.825427,-.178905,.410348,.407828,.83172,-.185812,.409486,.434034,.83877,-.192318,.408776,.460493,.845817,-.198249,.407176,.487346,.854664,-.204034,.405719,.514832,.863495,-.208908,.403282,.542401,.871883,-.212765,.399293,.570683,.88065,-.214911,.393803,.599947,.89004,-.216214,.387536,.62932,.898476,-.216745,.379846,.658319,.906738,-.216387,.370625,.687138,.914844,-.215053,.360139,.71601,.923877,-.212007,.348849,.745124,.931925,-.207481,.335639,.773366,.938054,-.202418,.320798,.801636,.943895,-.196507,.304772,.829055,.949468,-.189009,.288033,.856097,.955152,-.180539,.270532,.88301,.959403,-.171437,.251639,.909296,.963309,-.161661,.232563,.934868,.967399,-.150425,.213231,.959662,.972009,-.138659,.194247,.98302,.97433,-.126595,.174718,1.00517,.975823,-.113205,.155518,1.02566,.976371,-.0996096,.136709,1.04418,.978705,-.0860754,.117571,1.06146,.981477,-.0714438,.0980046,1.07777,.984263,-.0572304,.0782181,1.09214,.988423,-.0428875,.0584052,1.10553,.993,-.0282442,.038522,1.11758,.99704,-.0140183,.0190148,1.12864,.999913,369494e-9,-145203e-9,1.13901,.777662,-84153e-10,.423844,154403e-10,.770458,-211714e-9,.419915,38845e-8,.770716,-846888e-9,.420055,.00155386,.770982,-.00190567,.420202,.00349653,.770981,-.00338782,.420201,.00621606,.77098,-.00529338,.4202,.00971274,.770983,-.00762223,.4202,.0139867,.770985,-.0103741,.420198,.0190381,.770996,-.0135489,.4202,.0248677,.771029,-.0171461,.420212,.0314764,.771052,-.0211647,.420215,.0388648,.771131,-.0256048,.420245,.047036,.771235,-.0304647,.420284,.0559911,.771383,-.0357436,.420341,.0657346,.771591,-.0414392,.420423,.0762694,.771819,-.0475462,.420506,.0875984,.772123,-.0540506,.420617,.099727,.772464,-.060797,.42072,.112637,.772855,-.0675393,.420799,.126313,.773317,-.0748323,.420893,.140824,.773981,-.0825681,.421058,.15617,.774746,-.0906307,.421226,.172322,.77566,-.0988982,.421397,.189253,.776837,-.106994,.421569,.206912,.778097,-.115528,.421704,.225359,.779588,-.124317,.421849,.24447,.781574,-.133139,.422097,.264156,.784451,-.142179,.422615,.284318,.787682,-.15165,.423269,.304902,.792433,-.160771,.424396,.3265,.797359,-.169166,.424772,.35014,.803986,-.177149,.425475,.374768,.809504,-.184745,.424996,.399928,.815885,-.19173,.424247,.425796,.823513,-.198525,.423515,.452287,.832549,-.204709,.422787,.479321,.841653,-.210447,.421187,.506718,.850401,-.215501,.418519,.53432,.859854,-.219752,.414715,.56242,.869364,-.222305,.409462,.591558,.878837,-.223744,.402926,.621074,.888636,-.224065,.395043,.650538,.898132,-.223742,.38564,.679538,.907181,-.222308,.375378,.708674,.915621,-.219837,.363212,.737714,.9239,-.215233,.349313,.767014,.931644,-.209592,.334162,.795133,.938887,-.203644,.317943,.823228,.945282,-.196349,.300581,.850822,.950758,-.18742,.282195,.877594,.956146,-.177879,.262481,.904564,.960355,-.167643,.242487,.930741,.965256,-.156671,.222668,.955868,.968029,-.144123,.201907,.979869,.97251,-.131305,.18202,1.00291,.974925,-.118335,.161909,1.02392,.975402,-.103714,.142129,1.0433,.976987,-.089415,.122447,1.06089,.979677,-.0748858,.102248,1.07713,.983184,-.0596086,.0814851,1.09218,.987466,-.0447671,.0609484,1.10585,.992348,-.0295217,.0401835,1.11829,.996674,-.0143917,.0198163,1.12966,1.00003,321364e-9,-149983e-9,1.1402,.757901,-869074e-11,.436176,151011e-10,.751195,-217848e-9,.432317,378533e-9,.751178,-871373e-9,.432307,.0015141,.751195,-.00196061,.432317,.0034068,.751198,-.00348552,.432318,.00605659,.751195,-.00544599,.432315,.00946353,.751207,-.00784203,.43232,.013628,.751213,-.0106732,.43232,.0185499,.751221,-.0139393,.432319,.0242302,.751244,-.0176398,.432325,.0306694,.7513,-.0217743,.432348,.0378698,.751358,-.0263412,.432367,.0458321,.751458,-.0313396,.432404,.0545587,.751608,-.0367682,.432464,.0640543,.7518,-.0426246,.43254,.0743222,.752065,-.0489031,.432645,.0853668,.752376,-.0555828,.432762,.0971911,.752715,-.0623861,.432859,.109768,.753137,-.069415,.432958,.123126,.753676,-.0770039,.433099,.137308,.754345,-.084971,.433272,.15229,.755235,-.0932681,.433504,.168075,.756186,-.10171,.433693,.184625,.757363,-.110019,.433857,.201897,.75884,-.11887,.434102,.220014,.760467,-.127881,.434306,.238778,.762969,-.136766,.434751,.258172,.765823,-.14612,.43529,.278062,.769676,-.15566,.436236,.298437,.774909,-.165177,.437754,.319532,.77994,-.17402,.438343,.342505,.785757,-.182201,.438609,.366693,.792487,-.190104,.438762,.391668,.80038,-.197438,.438795,.417494,.808494,-.204365,.438226,.443933,.817695,-.210714,.437283,.470929,.828111,-.216651,.436087,.498569,.837901,-.221804,.433717,.526165,.847813,-.226318,.430133,.554155,.858314,-.229297,.425213,.582822,.868891,-.230999,.418576,.612847,.878941,-.231155,.410405,.642445,.888809,-.230935,.400544,.672024,.898089,-.229343,.389613,.701366,.908081,-.226886,.377197,.730763,.916819,-.222676,.363397,.759642,.924968,-.216835,.347437,.788775,.932906,-.210245,.32995,.817135,.940025,-.202992,.312262,.844912,.946101,-.19436,.293313,.872164,.952835,-.184125,.273638,.899443,.957347,-.173657,.252385,.926389,.961434,-.162204,.231038,.951947,.965522,-.14979,.209834,.976751,.969412,-.136307,.188821,1.00022,.973902,-.122527,.168013,1.02229,.974045,-.108213,.147634,1.04199,.975775,-.0927397,.12705,1.06019,.978383,-.0778212,.106309,1.07711,.98211,-.0621216,.0849279,1.09245,.986517,-.0463847,.0633519,1.10651,.991696,-.0309353,.0419698,1.11903,.996349,-.0150914,.0206272,1.13073,1.00003,442449e-9,-231396e-9,1.14146,.727498,-885074e-11,.441528,145832e-10,.730897,-223525e-9,.443589,368298e-9,.730796,-893996e-9,.443528,.00147303,.730805,-.00201149,.443533,.00331433,.730814,-.00357596,.443538,.00589222,.730815,-.00558734,.443538,.00920678,.730822,-.00804544,.44354,.0132582,.730836,-.0109501,.443545,.0180468,.730848,-.0143008,.443546,.0235732,.730871,-.0180969,.443552,.0298382,.730915,-.022338,.443567,.0368438,.730982,-.0270225,.443591,.044591,.731076,-.0321491,.443627,.0530831,.731245,-.0377166,.443699,.0623243,.73144,-.0437216,.443777,.0723181,.7317,-.0501576,.443881,.0830691,.732034,-.0569942,.444014,.0945809,.732388,-.0638756,.444113,.106825,.732853,-.071203,.444247,.119859,.733473,-.0790076,.444442,.13369,.734195,-.0871937,.444645,.148304,.735069,-.095696,.444877,.163702,.736169,-.10426,.445133,.179861,.73747,-.112853,.44537,.196778,.738991,-.12199,.445651,.214496,.740865,-.131153,.445958,.232913,.743637,-.140245,.446548,.251977,.746797,-.149722,.447246,.271551,.751517,-.159341,.448656,.291774,.756156,-.169106,.449866,.312455,.761519,-.178436,.450919,.334552,.768295,-.186904,.451776,.358491,.776613,-.195117,.452832,.383446,.783966,-.202695,.45249,.408945,.793542,-.20985,.452587,.435364,.803192,-.216403,.451852,.462336,.813892,-.22251,.450708,.48987,.824968,-.227676,.4486,.517697,.835859,-.232443,.445156,.545975,.846825,-.235775,.440351,.574483,.858085,-.237897,.433641,.604246,.868825,-.238074,.425354,.634101,.879638,-.237661,.415383,.664201,.889966,-.236186,.404136,.693918,.899479,-.233599,.390917,.723481,.908769,-.229737,.376352,.75258,.917966,-.223836,.360372,.781764,.926304,-.217067,.342551,.811139,.934626,-.209309,.324238,.839585,.941841,-.20071,.304484,.867044,.94789,-.190602,.283607,.894579,.954196,-.179253,.262205,.921743,.958383,-.167646,.239847,.948026,.963119,-.155073,.218078,.973296,.966941,-.141426,.195899,.998135,.970836,-.126849,.174121,1.02021,.973301,-.112296,.153052,1.04085,.97448,-.0964965,.131733,1.05946,.977045,-.080489,.10997,1.07693,.980751,-.064844,.0881657,1.09254,.985475,-.0481938,.0657987,1.10697,.991089,-.0319185,.0435215,1.12004,.996122,-.0158088,.0214779,1.13173,1.00001,372455e-9,-200295e-9,1.14291,.708622,-907597e-11,.45304,141962e-10,.711162,-228911e-9,.454662,358052e-9,.709812,-914446e-9,.453797,.00143034,.709865,-.00205819,.453834,.00321935,.709864,-.00365894,.453833,.00572331,.709855,-.00571692,.453826,.00894278,.709862,-.00823201,.453828,.012878,.709875,-.011204,.453832,.0175295,.709896,-.0146323,.453839,.0228978,.709925,-.0185163,.453847,.0289839,.709974,-.0228551,.453866,.0357894,.710045,-.0276473,.453892,.0433161,.710133,-.032891,.453924,.0515665,.710292,-.0385851,.453992,.0605458,.710485,-.0447254,.45407,.0702574,.710769,-.0513051,.454192,.0807077,.711106,-.0582733,.454329,.091896,.711516,-.0652866,.45446,.103814,.712071,-.0728426,.454653,.116508,.712676,-.0808307,.45484,.129968,.713476,-.0892216,.455096,.144206,.714377,-.0979047,.455346,.159212,.715579,-.106531,.455647,.174973,.716977,-.115492,.455961,.191504,.71862,-.124821,.456315,.208835,.72084,-.134079,.4568,.226869,.723786,-.143427,.457521,.245582,.727464,-.153061,.458475,.264957,.732771,-.162768,.460239,.284948,.736515,-.172627,.460899,.30522,.743519,-.182487,.463225,.326717,.750041,-.191295,.464027,.350113,.758589,-.199746,.465227,.374782,.767703,-.207584,.465877,.400226,.777484,-.214973,.465996,.426442,.788792,-.221796,.466019,.453688,.800194,-.228038,.465083,.481246,.811234,-.233346,.462506,.509086,.822859,-.238073,.459257,.537338,.835082,-.241764,.454863,.566108,.846332,-.244241,.448163,.595126,.858355,-.244736,.439709,.625574,.87034,-.244278,.429837,.65617,.881027,-.24255,.418002,.686029,.891007,-.239912,.404325,.716039,.900874,-.236133,.389222,.745518,.911072,-.230672,.373269,.775026,.920359,-.22356,.355083,.804521,.928604,-.215591,.335533,.834045,.937175,-.206503,.315278,.861612,.942825,-.196684,.293653,.889131,.949805,-.185116,.271503,.916853,.955535,-.172703,.248821,.943541,.959843,-.159978,.225591,.970132,.964393,-.146375,.202719,.994709,.968008,-.131269,.179928,1.0186,.971013,-.11569,.158007,1.03928,.973334,-.1003,.13624,1.05887,.975775,-.0833352,.1138,1.07652,.979579,-.0668981,.0913141,1.09297,.984323,-.0500902,.0683051,1.10734,.990351,-.0332377,.0451771,1.12084,.995823,-.0161491,.0221705,1.13296,1.0001,234083e-9,-108712e-9,1.14441,.683895,-924677e-11,.46015,137429e-10,.68833,-233383e-9,.463134,346865e-9,.688368,-933547e-9,.463159,.00138748,.688367,-.00210049,.463159,.00312187,.688369,-.00373415,.463159,.00555004,.688377,-.00583449,.463163,.00867216,.688386,-.00840128,.463166,.0124884,.688398,-.0114343,.463169,.0169993,.688418,-.0149329,.463175,.0222054,.688453,-.0188964,.463188,.028108,.688515,-.0233239,.463214,.0347085,.68857,-.0282136,.463231,.0420091,.688679,-.033564,.463276,.0500132,.688854,-.0393733,.463356,.0587255,.689038,-.0456354,.46343,.0681476,.689321,-.0523433,.463553,.0782897,.689662,-.059412,.463693,.0891501,.690188,-.0665736,.4639,.100735,.690755,-.0743106,.464107,.113074,.691405,-.0824722,.464329,.126161,.692198,-.0910484,.464585,.140007,.693196,-.0998778,.464893,.154612,.69454,-.108651,.465285,.169984,.695921,-.117855,.465596,.186106,.697749,-.12734,.466056,.203034,.700375,-.136714,.466771,.220703,.703395,-.146386,.467579,.239062,.707904,-.156096,.469067,.258188,.711673,-.165904,.469851,.277759,.717489,-.175812,.471815,.297935,.724051,-.185931,.47389,.318916,.731965,-.195238,.47587,.341591,.741151,-.204021,.477523,.366062,.751416,-.212113,.478881,.391396,.761848,-.21979,.479226,.417599,.771886,-.2267,.478495,.444401,.783998,-.232991,.477622,.472084,.796523,-.238645,.475833,.500193,.808851,-.243396,.472568,.52865,.821191,-.247226,.467857,.557362,.834261,-.250102,.461871,.586768,.846762,-.251056,.453543,.617085,.859867,-.250604,.443494,.647659,.871948,-.248783,.431711,.678119,.882967,-.245855,.417911,.708399,.892826,-.242168,.401993,.738256,.90332,-.237062,.385371,.767999,.913633,-.22997,.366837,.798191,.922774,-.221687,.346372,.827756,.931371,-.212345,.325682,.856425,.938929,-.20206,.303665,.884299,.944821,-.190981,.280786,.912023,.951792,-.178065,.2573,.939669,.957712,-.164634,.233448,.96655,.961912,-.150863,.209504,.992366,.966382,-.13577,.18597,1.01633,.969588,-.119593,.162905,1.03843,.971777,-.103203,.14053,1.05841,.97433,-.0865888,.117909,1.07632,.978686,-.0690829,.0944101,1.09326,.983281,-.0516568,.0705671,1.10796,.989562,-.034558,.0468592,1.12182,.995465,-.0167808,.0229846,1.1342,.999991,373016e-9,-235606e-9,1.1459,.662251,-939016e-11,.468575,132714e-10,.666634,-237624e-9,.471675,335842e-9,.666411,-950385e-9,.471516,.00134321,.666399,-.00213833,.471509,.00302221,.666386,-.0038014,.471499,.00537283,.666405,-.00593958,.471511,.00839533,.666406,-.00855253,.471508,.0120898,.666428,-.0116401,.471519,.0164569,.666444,-.0152015,.471522,.0214971,.66649,-.0192362,.471543,.027212,.666537,-.0237428,.471558,.033603,.666617,-.0287198,.471591,.0406728,.666718,-.0341647,.471631,.0484238,.666889,-.0400759,.47171,.0568621,.667104,-.0464479,.471805,.0659915,.667374,-.0532677,.471923,.0758178,.667772,-.0603805,.472098,.0863425,.668371,-.0677392,.472363,.0975917,.668971,-.0756028,.472596,.109567,.669696,-.0839293,.472869,.122272,.670481,-.0926683,.473126,.135718,.6715,-.1016,.473442,.149914,.672911,-.110566,.47389,.164882,.674512,-.119984,.474354,.180602,.67651,-.129574,.474922,.19711,.679292,-.139106,.475764,.214371,.682798,-.148993,.476886,.232405,.686955,-.158737,.478179,.251153,.691406,-.168754,.479432,.270436,.697438,-.178703,.481481,.290374,.704761,-.188955,.484143,.311044,.713599,-.198814,.487007,.333003,.723194,-.207869,.488962,.357144,.732601,-.216189,.489815,.382169,.744193,-.22398,.490888,.408227,.754907,-.231156,.490355,.434928,.767403,-.23747,.489548,.462599,.78107,-.243503,.488274,.490908,.793893,-.248114,.484843,.519421,.807296,-.25222,.4803,.548561,.820529,-.255265,.474097,.577772,.833716,-.256741,.466041,.607782,.848403,-.25637,.456547,.638807,.860755,-.254804,.443946,.670058,.874012,-.251834,.430852,.700749,.885619,-.247867,.414903,.731446,.896069,-.242634,.397276,.761191,.906266,-.236093,.378535,.791053,.916759,-.227543,.358038,.821298,.92523,-.21783,.335705,.850747,.93436,-.207534,.313797,.879258,.941631,-.195983,.289671,.907734,.947564,-.183567,.265319,.935206,.953681,-.169345,.240815,.962739,.960008,-.154909,.216119,.989227,.964145,-.140161,.192096,1.01465,.968171,-.123411,.167855,1.03737,.969859,-.106525,.144817,1.05767,.972666,-.0891023,.12149,1.0761,.977055,-.0718094,.0975306,1.09336,.982527,-.0534213,.0730217,1.10878,.989001,-.0355579,.0483366,1.12285,.99512,-.0176383,.023938,1.13548,1.00007,368831e-9,-211581e-9,1.14744,.651047,-960845e-11,.484101,12922e-9,.644145,-241347e-9,.478968,324578e-9,.64396,-965142e-9,.478831,.00129798,.64396,-.00217154,.47883,.00292046,.643968,-.00386049,.478835,.00519202,.643974,-.00603186,.478838,.0081128,.643977,-.0086854,.478836,.011683,.643982,-.0118207,.478834,.0159031,.644024,-.0154374,.478856,.0207743,.644059,-.0195343,.478868,.0262975,.644122,-.0241103,.478896,.0324747,.644207,-.0291638,.478933,.039309,.64432,-.0346919,.478981,.0468029,.644481,-.0406919,.479053,.0549614,.644722,-.047159,.479169,.0637909,.645013,-.0540748,.479302,.0732974,.645503,-.0612001,.479541,.0834898,.646117,-.0687303,.479829,.0943873,.646707,-.0767846,.480061,.105991,.647431,-.0852465,.480343,.11831,.64831,-.0940719,.48066,.131348,.649486,-.103056,.481083,.14514,.650864,-.112261,.481528,.159676,.652604,-.121852,.482102,.174979,.654825,-.131505,.482813,.191079,.657876,-.141189,.483876,.207927,.661339,-.151239,.48499,.225586,.665463,-.161091,.486279,.243947,.670542,-.171235,.487968,.262957,.677361,-.181347,.49053,.282781,.685672,-.191679,.493862,.303311,.694551,-.201781,.49699,.324607,.703753,-.211164,.498884,.347916,.713703,-.219675,.500086,.372628,.725911,-.227836,.501554,.398694,.73862,-.23533,.502193,.425529,.752118,-.241786,.501811,.453209,.76579,-.247865,.500185,.481381,.779568,-.252696,.497159,.51011,.793991,-.256802,.492765,.539322,.808182,-.259942,.486827,.569078,.821698,-.261703,.478386,.598818,.836009,-.262006,.468772,.629762,.849824,-.260333,.456352,.661366,.863888,-.257398,.442533,.69295,.876585,-.253264,.426573,.723608,.888665,-.248026,.408964,.754378,.899537,-.241487,.389677,.784761,.9094,-.233463,.368516,.814688,.920166,-.223397,.346624,.845009,.928899,-.21255,.322717,.874431,.937156,-.200869,.298698,.902922,.943861,-.188387,.273491,.931356,.949557,-.174341,.247866,.958854,.955862,-.158994,.222496,.986098,.961721,-.143664,.197522,1.01229,.965976,-.127412,.17302,1.03571,.968652,-.109798,.148954,1.05699,.971084,-.0916787,.125044,1.07587,.975584,-.0739634,.100577,1.09372,.98122,-.055322,.0753666,1.10948,.988253,-.0366825,.0498899,1.12394,.99482,-.0180389,.024611,1.13694,1.00001,229839e-9,-188283e-9,1.14919,.613867,-964198e-11,.479449,123452e-10,.621485,-244534e-9,.485399,313091e-9,.621429,-978202e-9,.485353,.00125245,.62112,-.00220004,.485114,.00281687,.621119,-.0039111,.485112,.00500783,.621122,-.00611091,.485112,.00782498,.621133,-.00879922,.485117,.0112687,.621152,-.0119756,.485125,.0153394,.621183,-.0156396,.485139,.0200382,.621227,-.0197898,.485158,.0253663,.621298,-.0244253,.485192,.0313261,.621388,-.0295441,.485233,.0379204,.621507,-.0351432,.485286,.0451523,.621693,-.0412198,.485378,.0530277,.621933,-.0477673,.485495,.0615522,.622232,-.0547574,.485635,.0707316,.622809,-.0619417,.485943,.0805883,.623407,-.069625,.486232,.0911267,.62406,-.077796,.486516,.102354,.624835,-.0863731,.486838,.114279,.625758,-.095251,.487188,.126902,.627043,-.104299,.487695,.140285,.628438,-.113724,.488163,.154397,.630325,-.123417,.488858,.169267,.632801,-.133137,.489754,.184941,.635784,-.143052,.490815,.20136,.639406,-.153132,.492048,.218643,.643872,-.163143,.49363,.236615,.6499,-.17333,.496009,.255449,.657201,-.183622,.498994,.275006,.666221,-.194019,.502888,.295354,.674419,-.204192,.505459,.316244,.683729,-.21406,.507771,.33849,.695584,-.222854,.510245,.363166,.708583,-.231315,.512293,.389071,.721233,-.238911,.512747,.415737,.735134,-.245657,.512482,.443331,.750179,-.251879,.511526,.471891,.765073,-.256911,.508935,.500892,.779794,-.261144,.504341,.530294,.794801,-.264316,.498515,.560144,.810339,-.266276,.491015,.590213,.824818,-.266981,.481126,.620865,.839375,-.265778,.468685,.652687,.853043,-.262748,.453925,.684759,.867335,-.258474,.437912,.716209,.88037,-.253187,.419648,.747508,.891711,-.246476,.39982,.77797,.902896,-.238735,.37879,.808586,.913601,-.22885,.355891,.838843,.923019,-.217656,.331773,.869014,.933432,-.205539,.307356,.898512,.939691,-.192595,.281321,.9269,.946938,-.178945,.255441,.955297,.952372,-.163587,.229013,.983231,.95909,-.147214,.203179,1.00971,.963675,-.13064,.17792,1.03438,.968247,-.113121,.152898,1.05625,.97001,-.0945824,.128712,1.07598,.974458,-.0755648,.103349,1.094,.980168,-.0571998,.0776731,1.1104,.987295,-.0377994,.0514445,1.12491,.994432,-.0186417,.025429,1.13851,.999975,542714e-9,-282356e-9,1.15108,.592656,-980249e-11,.486018,119532e-10,.598467,-247275e-9,.490781,301531e-9,.597934,-988317e-9,.490343,.00120517,.597903,-.00222366,.490319,.0027116,.597913,-.00395315,.490327,.00482077,.597919,-.00617653,.490329,.00753264,.597936,-.00889375,.490339,.0108478,.597956,-.0121043,.490347,.0147668,.597992,-.0158073,.490365,.0192905,.598032,-.0200017,.490382,.0244204,.598109,-.0246865,.49042,.0301593,.598215,-.0298594,.490474,.03651,.59833,-.0355167,.490524,.0434757,.598525,-.0416559,.490624,.0510629,.598778,-.0482692,.490753,.0592781,.599135,-.0553114,.49094,.0681304,.599802,-.062542,.491328,.0776467,.600361,-.0703638,.491598,.0878184,.60101,-.0786256,.491882,.0986573,.601811,-.0872962,.492232,.11018,.602861,-.0962284,.492684,.1224,.604167,-.10538,.493213,.135354,.605693,-.114896,.493799,.149034,.607682,-.124654,.494576,.163469,.610672,-.13456,.4959,.178747,.613313,-.144581,.496713,.194723,.617603,-.154703,.498499,.211617,.622174,-.16489,.500188,.229183,.628855,-.175164,.503072,.247786,.636963,-.185565,.506798,.267116,.644866,-.195911,.509719,.28702,.653741,-.206104,.512776,.307763,.664942,-.216447,.516812,.329631,.67633,-.22552,.519181,.353515,.690012,-.234316,.521681,.379226,.704243,-.242032,.523129,.405901,.719396,-.249172,.523768,.433585,.734471,-.255543,.522541,.462085,.750539,-.260697,.520217,.491233,.766365,-.26501,.516293,.521094,.781677,-.268409,.509708,.551014,.797132,-.270399,.501944,.581463,.812655,-.271247,.492025,.612402,.828592,-.270708,.480424,.643798,.844044,-.268085,.465955,.67682,.857305,-.263459,.448425,.708496,.87114,-.258151,.430243,.74046,.884936,-.251171,.410578,.771583,.895772,-.243305,.38862,.802234,.906961,-.234037,.365214,.833179,.917775,-.222714,.34116,.86353,.927883,-.210175,.31572,.893557,.936617,-.196925,.289159,.922976,.943384,-.182788,.261996,.951606,.949713,-.167965,.235324,.979958,.955818,-.151109,.208408,1.00765,.961344,-.133834,.182591,1.03329,.965469,-.115987,.156958,1.0557,.968693,-.09746,.132239,1.07583,.973165,-.0778514,.106195,1.09451,.979387,-.0585067,.0797669,1.11137,.98671,-.0390409,.0530263,1.12643,.994093,-.019408,.0263163,1.14016,1.00002,540029e-9,-194487e-9,1.15299,.574483,-989066e-11,.494533,114896e-10,.574478,-249127e-9,.494528,289403e-9,.574607,-996811e-9,.494637,.00115797,.574396,-.00224241,.494458,.00260498,.574377,-.00398632,.49444,.00463102,.574386,-.00622836,.494445,.00723623,.574401,-.0089683,.494453,.010421,.574419,-.0122056,.49446,.0141859,.574459,-.0159396,.494481,.0185322,.574525,-.0201692,.49452,.0234617,.574587,-.0248924,.494547,.0289762,.574697,-.0301074,.494604,.0350797,.574853,-.0358114,.494688,.0417767,.575027,-.041999,.494772,.0490718,.575294,-.0486618,.494915,.0569728,.575733,-.0557148,.495173,.0654955,.576356,-.0630489,.495537,.0746612,.576944,-.0709285,.495836,.0844615,.57765,-.0792723,.496177,.0949142,.578491,-.0880167,.496563,.10603,.579639,-.0969462,.497096,.117841,.580989,-.10622,.497684,.130367,.582587,-.115861,.498337,.143609,.584951,-.125605,.499414,.157625,.587602,-.135608,.500518,.172413,.59076,-.145742,.501767,.187999,.594992,-.155934,.503542,.20445,.600656,-.166303,.506135,.221764,.607816,-.176681,.509542,.24002,.61522,-.187071,.51263,.258992,.623702,-.197465,.516021,.278773,.634192,-.207816,.520422,.299377,.644936,-.218183,.524073,.320802,.657888,-.2278,.528049,.34384,.670666,-.236747,.52986,.36916,.685626,-.24484,.531892,.395867,.701304,-.252071,.532727,.423488,.717727,-.258714,.532146,.452201,.733914,-.264211,.529883,.481579,.750529,-.26859,.5259,.511558,.76747,-.272046,.51999,.542042,.785189,-.274225,.513083,.572799,.800954,-.275189,.502936,.603816,.816962,-.274946,.490921,.635461,.83336,-.272695,.47684,.6676,.848143,-.268223,.459405,.70051,.861818,-.262768,.440319,.732902,.876828,-.255872,.420123,.765084,.889312,-.247703,.398379,.796391,.900412,-.238381,.374496,.827333,.912251,-.227783,.349874,.858385,.921792,-.214832,.323181,.888652,.931273,-.200949,.296624,.917763,.940295,-.186537,.269211,.947878,.946812,-.171538,.241447,.977016,.953588,-.155254,.213829,1.00501,.958841,-.137156,.186807,1.03179,.963746,-.118699,.160706,1.05502,.966468,-.0998358,.135504,1.07568,.971178,-.0805186,.109131,1.09479,.97831,-.0599348,.0818293,1.1123,.985886,-.0399661,.0545872,1.12771,.994021,-.0198682,.0269405,1.14186,1.00009,271022e-9,-12989e-8,1.15514,.538716,-990918e-11,.486732,109675e-10,.550656,-250642e-9,.497518,277412e-9,.55057,-.00100265,.497441,.00110974,.550903,-.00225672,.497733,.00249779,.550568,-.00401046,.497438,.00443906,.550574,-.00626613,.49744,.00693637,.550591,-.0090226,.497449,.00998921,.550623,-.0122795,.497469,.0135984,.550667,-.0160361,.497495,.0177654,.550724,-.0202908,.497526,.0224915,.550792,-.0250421,.497557,.0277795,.550918,-.0302878,.49763,.0336334,.551058,-.0360241,.497701,.0400573,.551276,-.0422473,.497824,.0470585,.551551,-.0489441,.497977,.0546433,.552074,-.0559596,.498312,.0628367,.552681,-.0633978,.498679,.071646,.553324,-.0713176,.499031,.0810746,.554011,-.0797268,.499365,.091129,.55488,-.0885238,.499779,.101837,.556171,-.0974417,.500444,.113239,.557498,-.106841,.501025,.125316,.559299,-.116533,.501864,.138128,.561647,-.126298,.502967,.151695,.564347,-.136388,.504129,.16604,.567863,-.146576,.505713,.181207,.572569,-.156832,.507953,.197259,.578919,-.167323,.511186,.214258,.585387,-.177712,.514042,.232038,.593134,-.188184,.517484,.250733,.603295,-.198717,.522345,.270454,.613854,-.209177,.526751,.290807,.626092,-.219644,.531595,.312202,.637868,-.229494,.534721,.334435,.652458,-.238718,.538304,.359184,.666985,-.247061,.539875,.385637,.683301,-.254652,.541042,.41328,.69998,-.261376,.540735,.441903,.717824,-.267085,.539139,.471609,.734617,-.271465,.534958,.501446,.753663,-.27528,.53032,.532571,.770512,-.277617,.522134,.563641,.787356,-.278525,.51206,.595067,.806252,-.278512,.50119,.627226,.822061,-.277023,.486791,.659402,.838959,-.273175,.470467,.692874,.85379,-.267238,.450688,.725702,.868268,-.260327,.429741,.75832,.881994,-.251946,.407223,.790189,.893885,-.242432,.383214,.821625,.905118,-.231904,.357297,.853011,.916045,-.219545,.330733,.883773,.927614,-.205378,.303916,.914435,.936005,-.190388,.275941,.944502,.944533,-.1749,.247493,.974439,.950758,-.158588,.218996,1.00286,.957078,-.141027,.191559,1.0304,.962448,-.121507,.164457,1.05466,.964993,-.102068,.138636,1.0761,.970017,-.0822598,.111861,1.09541,.97661,-.062033,.0843438,1.11317,.985073,-.0409832,.0558496,1.12911,.993515,-.020146,.0275331,1.1438,1.00006,27329e-8,-107883e-9,1.15736,.525324,-999341e-11,.498153,105385e-10,.526513,-251605e-9,.499277,265329e-9,.526517,-.00100641,.499282,.0010613,.526588,-.00226466,.499337,.00238823,.526539,-.0040255,.499302,.00424535,.526547,-.00628954,.499306,.00663364,.526561,-.00905628,.499313,.00955337,.526593,-.0123253,.499334,.0130054,.526642,-.0160957,.499365,.0169911,.5267,-.0203661,.499396,.0215122,.526792,-.0251347,.499451,.0265718,.526904,-.0303985,.499511,.0321732,.527079,-.0361554,.499617,.0383231,.527285,-.0423982,.499731,.045026,.527602,-.0491121,.499924,.0522936,.528166,-.0561127,.500306,.0601528,.52879,-.0635988,.5007,.0686059,.529421,-.071581,.501048,.0776518,.530144,-.0799854,.501421,.0873148,.531062,-.0888032,.501884,.0976084,.532374,-.0977643,.50259,.108588,.533828,-.107197,.50329,.120234,.53581,-.116887,.504312,.132602,.538063,-.126755,.505365,.145721,.5409,-.136819,.506668,.159617,.544882,-.147117,.508731,.174369,.550238,-.157446,.511601,.190028,.556038,-.167988,.514431,.206587,.563031,-.178364,.517808,.224046,.571543,-.189007,.521937,.242503,.582255,-.199546,.527415,.261977,.59272,-.210084,.531682,.282162,.605648,-.220448,.537123,.303426,.61785,-.230593,.540664,.325323,.632223,-.240238,.544467,.348993,.648819,-.24887,.547594,.375462,.665825,-.256657,.54912,.403024,.683389,-.263711,.549294,.431773,.701495,-.269666,.547649,.461494,.719197,-.274169,.543786,.491623,.737906,-.278124,.538644,.522994,.756652,-.280632,.531057,.554775,.775279,-.281741,.521972,.586441,.792688,-.281652,.509613,.618596,.811894,-.280345,.496497,.651462,.827938,-.277128,.47968,.684023,.844837,-.271646,.460688,.718024,.859239,-.264397,.438872,.751207,.874088,-.256144,.41577,.784232,.887693,-.246311,.391369,.816191,.899402,-.235497,.365872,.847828,.910973,-.223631,.338618,.87934,.92204,-.209874,.310803,.910325,.930987,-.194265,.281802,.940695,.94,-.178125,.252836,.970958,.948018,-.161479,.224239,1.00078,.955141,-.144038,.195857,1.0288,.960513,-.124915,.168487,1.05371,.963964,-.104284,.141495,1.07596,.968713,-.0838732,.114437,1.09628,.975524,-.0635579,.0863105,1.11448,.98431,-.042291,.0574774,1.13069,.992916,-.0209131,.0284343,1.14568,.999926,743097e-9,-379265e-9,1.15955,.501042,-998428e-11,.498726,100306e-10,.502992,-252112e-9,.500665,253283e-9,.502417,-.00100791,.500092,.00101259,.502965,-.00226919,.500621,.00227978,.502318,-.00403109,.499994,.00405011,.502333,-.00629832,.500005,.00632868,.502362,-.00906907,.500027,.00911446,.502369,-.0123423,.500023,.0124078,.50243,-.0161178,.500066,.016211,.502493,-.0203937,.500103,.0205256,.502592,-.0251684,.500166,.0253548,.502707,-.0304389,.50023,.0307029,.502881,-.0362015,.500335,.0365753,.503124,-.0424507,.500488,.0429798,.503443,-.0491582,.500686,.0499268,.504083,-.0561476,.501155,.0574541,.504668,-.0636846,.501524,.0655408,.505319,-.0716834,.501904,.0742072,.50609,-.0800925,.502321,.0834699,.507122,-.0888425,.502896,.0933603,.508414,-.097855,.503603,.10391,.509955,-.107304,.504416,.115113,.512061,-.116921,.505565,.127054,.514419,-.12689,.506732,.139709,.517529,-.136934,.508338,.153173,.522085,-.147327,.510987,.167528,.526986,-.157612,.513527,.182708,.533122,-.168213,.516717,.198881,.540807,-.178688,.520832,.215986,.550687,-.189511,.52632,.234335,.560567,-.199998,.531009,.253375,.571698,-.210652,.535839,.273499,.584364,-.220917,.541091,.294355,.599066,-.23137,.546875,.316525,.614148,-.241206,.551306,.339671,.631157,-.250379,.555187,.36531,.647919,-.258397,.556595,.392767,.666112,-.265528,.556949,.421397,.686158,-.271827,.556617,.451433,.704838,-.27674,.552975,.482131,.723957,-.280733,.547814,.513458,.74262,-.283359,.53997,.545446,.762009,-.284541,.530422,.57775,.781314,-.284507,.518546,.610434,.799116,-.283309,.504178,.643178,.817604,-.280378,.48843,.676248,.83459,-.275619,.469457,.709698,.850974,-.26856,.447698,.744245,.866747,-.260094,.424791,.777695,.881412,-.249929,.399913,.810392,.8936,-.239137,.37308,.842872,.905943,-.226818,.345705,.874677,.916408,-.213699,.31706,.906257,.927215,-.198428,.288444,.936881,.935625,-.181643,.258329,.96795,.944076,-.164386,.228488,.998216,.951229,-.146339,.199763,1.02689,.958793,-.127709,.172153,1.0535,.963219,-.107244,.144989,1.07646,.967562,-.0857764,.11685,1.09675,.974866,-.0645377,.0880571,1.11576,.983353,-.0431732,.0587352,1.13227,.992503,-.0218356,.0294181,1.1478,1.00003,605203e-9,-231013e-9,1.16207,.482935,-101177e-10,.504695,968142e-11,.477554,-251521e-9,.499071,240676e-9,.477904,-.00100683,.499436,96342e-8,.478368,-.00226636,.499899,.0021687,.477977,-.00402719,.499513,.00385384,.477993,-.00629226,.499525,.0060221,.478011,-.00906011,.499536,.00867289,.478051,-.0123305,.499566,.0118074,.478089,-.016102,.499587,.0154269,.478171,-.0203736,.499645,.0195341,.478254,-.025143,.499692,.0241318,.47839,-.0304071,.499779,.0292247,.478588,-.0361631,.499911,.0348196,.478812,-.0424023,.500046,.0409231,.479208,-.0490724,.500326,.047552,.479841,-.0560722,.500805,.0547377,.480392,-.0636125,.501152,.0624607,.481068,-.0716134,.501561,.0707473,.481898,-.0800062,.502054,.0796118,.483022,-.0886568,.502728,.0890974,.484332,-.0977553,.503479,.0992099,.486126,-.107173,.504546,.10999,.488066,-.11677,.50557,.121476,.490521,-.126725,.506849,.133672,.494232,-.136793,.50911,.146731,.498302,-.147116,.511345,.160577,.503565,-.157446,.514344,.175335,.510902,-.168121,.518824,.191207,.519263,-.178799,.523666,.208058,.528204,-.189407,.528296,.225875,.538854,-.200145,.533724,.244782,.551278,-.210701,.539833,.264753,.565222,-.221303,.546131,.285745,.579403,-.231688,.551496,.307592,.595469,-.241718,.556809,.330582,.610929,-.250992,.559641,.354995,.629433,-.259602,.562379,.382471,.648504,-.267038,.563676,.411126,.66756,-.273388,.562092,.440924,.689143,-.278788,.560807,.472118,.709056,-.282783,.555701,.503774,.729855,-.285836,.548698,.536364,.748954,-.287078,.538544,.56895,.768373,-.287133,.526711,.601991,.78827,-.285839,.512511,.635403,.807465,-.283238,.496323,.668797,.825194,-.27906,.477638,.702584,.842203,-.272286,.456253,.736393,.857749,-.263854,.432412,.77096,.874799,-.253943,.407806,.80489,.887497,-.24237,.38033,.83771,.89966,-.230278,.352446,.870376,.911753,-.21646,.323268,.902256,.923011,-.202071,.294314,.933306,.932375,-.185519,.264104,.965177,.940537,-.167604,.234035,.996303,.948904,-.149068,.20412,1.0261,.955263,-.129539,.175431,1.05304,.960303,-.109932,.148116,1.07617,.965512,-.0880572,.119693,1.09742,.973466,-.0660548,.0901619,1.11721,.98284,-.0439228,.0599875,1.13436,.992216,-.0219588,.0298975,1.15006,.999946,119402e-9,-208547e-10,1.16471,.447827,-100414e-10,.491543,914833e-11,.454778,-251257e-9,.499172,22891e-8,.453519,-.00100342,.497787,914184e-9,.45357,-.00225776,.497847,.00205701,.453578,-.00401371,.497855,.00365705,.45357,-.00627107,.497841,.00571453,.453598,-.00902968,.497864,.00823019,.453627,-.0122888,.497882,.0112049,.453684,-.0160475,.497923,.0146405,.453764,-.0203044,.49798,.0185394,.453866,-.0250576,.498049,.0229054,.453996,-.0303028,.49813,.0277424,.454196,-.0360379,.498267,.0330587,.454457,-.0422521,.498445,.0388613,.454926,-.0488393,.498812,.0451767,.455525,-.0558653,.499272,.0520153,.456074,-.0633772,.499625,.0593754,.456752,-.0713606,.500049,.0672751,.457648,-.07971,.500615,.0757447,.458849,-.0883032,.501399,.0848231,.46029,-.0974095,.502293,.0945135,.462,-.106729,.503301,.104848,.464121,-.116354,.504533,.115884,.466889,-.126214,.506172,.127652,.470744,-.136324,.508667,.14024,.47488,-.146595,.510995,.153673,.480845,-.157027,.514832,.168053,.488262,-.167658,.519506,.183508,.496547,-.178343,.524347,.199948,.506254,-.188916,.52983,.217503,.517961,-.199975,.536357,.236272,.531484,-.210624,.543641,.256096,.545496,-.221227,.550048,.277085,.559497,-.231568,.555076,.298615,.575752,-.241698,.560541,.321547,.591999,-.251172,.564156,.345602,.610654,-.260178,.567607,.371851,.630484,-.268094,.56923,.40076,.651807,-.274661,.569779,.430801,.67239,-.280331,.566791,.461939,.693024,-.284501,.562007,.493854,.715473,-.287852,.555791,.526992,.736323,-.28929,.546345,.560102,.755771,-.289405,.534,.593543,.775424,-.2881,.519114,.627256,.795447,-.285562,.502543,.661464,.815319,-.281416,.484773,.695206,.831769,-.275523,.463445,.729044,.849464,-.267516,.440269,.764069,.866775,-.257584,.415049,.799089,.881252,-.245817,.388049,.831948,.894209,-.233127,.35889,.865526,.906922,-.219579,.329915,.89818,.919686,-.204491,.300441,.930013,.929044,-.188962,.269445,.962061,.938393,-.171079,.238402,.994214,.94661,-.15199,.208204,1.02533,.953095,-.131953,.178653,1.0529,.958644,-.111233,.150684,1.0771,.963925,-.0903098,.122359,1.09855,.971995,-.0680505,.0923342,1.11874,.981658,-.0448512,.0614195,1.13635,.991649,-.0221931,.0303582,1.15238,.999985,393403e-9,-111086e-9,1.16772,.396806,-971563e-11,.457671,842355e-11,.429186,-249421e-9,.495017,21625e-8,.429324,-998052e-9,.495173,865322e-9,.429175,-.00224487,.494999,.00194637,.429129,-.00399041,.494952,.00346004,.429153,-.00623476,.494974,.00540684,.429168,-.0089773,.494983,.00778714,.429207,-.0122175,.495012,.0106022,.429257,-.0159542,.495047,.0138535,.429338,-.0201864,.495106,.0175443,.429431,-.0249104,.495165,.0216774,.429587,-.0301252,.495279,.0262594,.429796,-.0358249,.495432,.0312968,.430065,-.0419972,.495621,.0367985,.430588,-.0485144,.496061,.042798,.43113,-.0555028,.496472,.0492914,.431743,-.0629852,.496904,.0562907,.432448,-.0709256,.497369,.0638056,.433414,-.0791942,.498032,.071885,.434638,-.0877346,.498854,.0805517,.43611,-.0968056,.499812,.0898047,.437859,-.106002,.500891,.0997142,.440017,-.115648,.502198,.110289,.443236,-.125427,.504389,.121644,.44697,-.135492,.506809,.133769,.451689,-.145746,.509858,.146787,.45811,-.156219,.514247,.160793,.465305,-.166834,.518816,.175791,.474085,-.177546,.524331,.191906,.484808,-.188262,.53104,.209199,.49732,-.199346,.538511,.227825,.509693,-.209951,.544554,.247269,.524367,-.220533,.551616,.267978,.539228,-.231082,.557368,.289672,.55644,-.241342,.563782,.31268,.574204,-.250964,.568851,.33651,.593388,-.260306,.57312,.362219,.613358,-.268667,.574916,.390322,.634512,-.275591,.575053,.420478,.65563,-.281328,.572404,.451614,.678265,-.285948,.568893,.484112,.70011,-.289408,.561878,.517348,.723005,-.291328,.55359,.551355,.743744,-.291418,.541099,.585109,.763949,-.290252,.526489,.619487,.784186,-.287648,.509496,.65404,.804304,-.283782,.491484,.688649,.823629,-.278067,.470517,.723133,.84094,-.270588,.44705,.757163,.857852,-.261188,.421252,.792816,.874934,-.249313,.394191,.827248,.888709,-.236492,.365359,.861074,.902589,-.222185,.336016,.894417,.914201,-.207314,.30527,.926825,.925978,-.191146,.274532,.9595,.93512,-.174135,.243393,.991583,.943656,-.155231,.212414,1.02356,.951719,-.134403,.182005,1.05239,.957164,-.113023,.153043,1.07754,.962656,-.0914493,.124186,1.09984,.970695,-.0694179,.0941654,1.12,.980749,-.0466199,.0629671,1.13849,.991205,-.0227032,.0311146,1.15494,.999884,632388e-9,-254483e-9,1.1706,.379821,-957289e-11,.460637,789337e-11,.405188,-247483e-9,.491396,204064e-9,.404796,-989434e-9,.490914,815853e-9,.40483,-.00222607,.490949,.00183559,.40473,-.00395723,.49084,.00326332,.404731,-.00618287,.490836,.00509945,.404768,-.00890258,.490871,.00734463,.404791,-.0121156,.490883,.00999992,.404857,-.0158214,.490938,.0130676,.404943,-.0200178,.491004,.0165503,.405059,-.0247027,.491093,.0204521,.405213,-.0298729,.491205,.0247788,.405399,-.0355226,.491333,.0295373,.405731,-.0416352,.491604,.034741,.406303,-.0480807,.492116,.0404255,.406814,-.0550458,.492506,.0465732,.407404,-.0624652,.492926,.0532058,.408149,-.0702958,.493442,.0603442,.409128,-.0784623,.494136,.0680297,.410408,-.087007,.495054,.0762786,.411813,-.0959639,.495962,.0851046,.413735,-.105075,.497257,.0945878,.416137,-.114646,.498882,.104725,.41934,-.124394,.501132,.11563,.423326,-.134328,.503883,.127325,.428419,-.14458,.50747,.139911,.43484,-.154979,.511964,.153481,.442641,-.165628,.517328,.168114,.452511,-.176365,.524258,.183995,.463473,-.187298,.531248,.200953,.475564,-.198244,.538367,.219176,.488664,-.208938,.545175,.238514,.504073,-.219599,.553227,.259129,.520832,-.230378,.560653,.280997,.538455,-.240703,.567523,.303821,.55709,-.250548,.573287,.327948,.576646,-.259964,.577795,.353362,.596705,-.268721,.580077,.380336,.618053,-.276054,.58018,.4101,.640303,-.282176,.578747,.44161,.662365,-.286931,.574294,.474106,.684542,-.290521,.567035,.507549,.707984,-.292672,.558687,.541853,.730913,-.293189,.547606,.576581,.752948,-.292199,.533471,.61172,.773452,-.289508,.516395,.646339,.794715,-.285716,.497873,.682131,.814251,-.280051,.476845,.716396,.833057,-.272873,.453449,.751503,.84959,-.263982,.427857,.786085,.867022,-.252745,.400335,.821355,.882277,-.239655,.371304,.85646,.895375,-.225386,.340397,.890828,.909347,-.209587,.310005,.923532,.921885,-.193433,.2796,.956419,.932127,-.176135,.247276,.989445,.941869,-.157872,.216186,1.02221,.949735,-.137577,.185602,1.05195,.956617,-.115285,.155767,1.07822,.961974,-.0928418,.126103,1.10149,.96972,-.0700592,.0956758,1.12207,.98012,-.0474671,.0643269,1.1408,.990825,-.0238113,.0320863,1.1577,.999876,381574e-9,-812203e-10,1.17403,.367636,-961342e-11,.469176,753287e-11,.380377,-244772e-9,.485434,191797e-9,.380416,-978857e-9,.485475,767015e-9,.380376,-.00220165,.485435,.00172522,.380419,-.00391408,.485487,.00306734,.380438,-.00611549,.485505,.00479332,.380462,-.00880558,.485525,.00690391,.380496,-.0119837,.485551,.00940039,.38056,-.0156487,.485605,.0122848,.38064,-.0197988,.485666,.0155601,.380767,-.0244324,.48577,.0192313,.380909,-.0295444,.485871,.0233032,.381142,-.0351321,.48606,.0277861,.381472,-.0411535,.486336,.0326939,.382015,-.0475408,.486833,.0380565,.382523,-.0544395,.487231,.0438615,.383129,-.061784,.487683,.0501332,.383952,-.0695085,.488313,.0568996,.38498,-.0775819,.489077,.0641952,.386331,-.0860443,.490113,.0720324,.387788,-.0948406,.491099,.0804379,.389808,-.103899,.492566,.0894899,.39252,-.113313,.494601,.0992098,.395493,-.123007,.496619,.109641,.399826,-.132859,.499912,.120919,.405341,-.143077,.504061,.133107,.411932,-.153465,.508905,.146263,.420591,-.164108,.515482,.160544,.43101,-.174893,.523191,.176123,.441881,-.185839,.53026,.192757,.453919,-.196633,.537295,.210535,.468715,-.207611,.546156,.229886,.485182,-.218517,.555173,.250543,.501926,-.229249,.562728,.27221,.51785,-.239481,.567494,.294892,.536947,-.249395,.573889,.318987,.557115,-.259,.578831,.344348,.577966,-.268075,.582055,.371223,.599489,-.276115,.583307,.399834,.62479,-.282523,.583902,.431415,.647504,-.287663,.57953,.464301,.670601,-.291538,.573103,.498123,.693539,-.293842,.563731,.532662,.717385,-.294681,.553169,.567925,.741533,-.293717,.539908,.603502,.762142,-.291156,.521902,.639074,.783014,-.28719,.502815,.674439,.805158,-.281773,.482598,.710497,.823646,-.274682,.458949,.7456,.841879,-.266184,.433129,.781085,.859515,-.255682,.406064,.816,.875335,-.242849,.376509,.851074,.890147,-.228329,.345502,.886473,.903144,-.212491,.31428,.920751,.916618,-.195695,.282994,.954606,.927953,-.178267,.251091,.988402,.937414,-.159549,.219107,1.02141,.946823,-.140022,.18896,1.05167,.954651,-.118154,.158667,1.07819,.959955,-.0946636,.128808,1.1025,.96858,-.0711792,.0973787,1.12391,.97938,-.0475046,.0650965,1.14322,.990498,-.024059,.0326267,1.16077,.999844,-512408e-10,112444e-9,1.17727,.316912,-934977e-11,.425996,695559e-11,.356423,-241372e-9,.479108,179562e-9,.356272,-965292e-9,.478897,71811e-8,.356262,-.00217182,.478894,.00161574,.356265,-.00386092,.478895,.00287261,.356278,-.0060324,.478905,.00448907,.356293,-.00868565,.478914,.00646572,.356346,-.0118207,.478965,.00880438,.356395,-.0154355,.479001,.0115066,.356484,-.019529,.479075,.0145762,.356609,-.0240991,.47918,.018018,.356766,-.0291413,.479305,.0218379,.357009,-.0346498,.479512,.0260454,.357424,-.0405462,.479909,.0306657,.357899,-.0468825,.480337,.0357054,.358424,-.0536887,.480771,.0411728,.359041,-.0609416,.481242,.0470841,.359903,-.0685239,.481943,.0534831,.360932,-.0764883,.482741,.0603795,.362196,-.0848364,.483688,.0678028,.363847,-.0935002,.484947,.0758086,.365972,-.102471,.486588,.0844173,.368741,-.111751,.488787,.0937199,.372146,-.121334,.491405,.103732,.377114,-.131147,.495604,.114608,.38226,-.141213,.499436,.126345,.389609,-.151632,.505334,.139116,.397925,-.162073,.51168,.152995,.407824,-.172819,.518876,.168071,.420014,-.183929,.527639,.184495,.434266,-.195032,.537588,.20232,.447352,-.205792,.544379,.221189,.463726,-.216704,.553422,.241616,.481406,-.227531,.562074,.263298,.498707,-.238017,.568227,.286116,.518039,-.247936,.574473,.3101,.538277,-.257437,.579191,.335401,.561166,-.266829,.584807,.362246,.583189,-.275329,.586476,.390609,.606024,-.28234,.585578,.420998,.632419,-.287924,.584496,.454357,.656128,-.291972,.577766,.488233,.679953,-.29456,.56875,.523248,.704654,-.295816,.558388,.559168,.729016,-.295157,.544826,.595326,.752062,-.292779,.528273,.631864,.773138,-.288681,.508482,.667793,.794869,-.283358,.487341,.704035,.815101,-.27608,.46354,.739925,.834212,-.26767,.438672,.775539,.852368,-.257397,.411239,.810895,.870207,-.245689,.3829,.846472,.884063,-.231452,.351496,.881788,.898284,-.215561,.31895,.917438,.912964,-.198208,.287367,.952422,.924666,-.180426,.254487,.987551,.934429,-.161525,.222226,1.02142,.943485,-.141197,.191143,1.05218,.9521,-.120085,.161112,1.07937,.957876,-.0975881,.130982,1.10403,.966943,-.0726842,.0990553,1.12616,.978313,-.0483705,.0662818,1.14619,.990048,-.0239072,.0329243,1.16413,.999984,461885e-9,-772859e-10,1.18099,.321287,-935049e-11,.455413,659662e-11,.332595,-237513e-9,.471437,167562e-9,.332729,-949964e-9,.471618,670192e-9,.332305,-.00213618,.471028,.00150712,.332326,-.00379765,.471055,.00267959,.332344,-.00593353,.471072,.00418751,.332356,-.00854349,.471077,.00603172,.332403,-.0116268,.471121,.00821362,.332461,-.0151824,.47117,.0107357,.332552,-.0192088,.471251,.0136014,.332657,-.0237024,.47133,.0168152,.332835,-.0286615,.471487,.0203853,.333083,-.0340765,.471708,.0243212,.333547,-.0398563,.47219,.0286518,.333989,-.0460916,.472587,.0333763,.334532,-.0527897,.473054,.0385084,.335167,-.0599284,.473568,.0440638,.33608,-.0673514,.474362,.0500962,.337146,-.0752237,.475231,.0566022,.338462,-.083418,.476282,.0636272,.34014,-.0919382,.477615,.0712153,.342341,-.100741,.479404,.079417,.345088,-.109905,.481618,.0882631,.349049,-.119369,.485081,.0978851,.353939,-.129033,.489317,.108336,.359893,-.139038,.494309,.119698,.366945,-.149411,.499983,.132024,.375814,-.159843,.507185,.145558,.387112,-.170664,.516392,.160433,.40023,-.181897,.526519,.176648,.412555,-.192785,.53423,.193922,.427023,-.203663,.542741,.212662,.443685,-.214695,.552066,.232944,.461499,-.225561,.560762,.254495,.480975,-.236257,.569421,.277531,.501,-.24639,.576101,.301724,.521691,-.256101,.581493,.327112,.543478,-.265289,.585221,.353917,.566094,-.273938,.587614,.381941,.589578,-.281679,.587991,.41172,.614583,-.287655,.585928,.444148,.641813,-.292228,.582092,.478617,.666189,-.295172,.57398,.51397,.690475,-.29648,.561676,.550118,.715543,-.296203,.548758,.586933,.740405,-.293999,.532792,.62384,.762183,-.28998,.512735,.660723,.786069,-.28478,.492402,.69807,.806812,-.277568,.469058,.734422,.826987,-.268951,.443017,.770946,.844588,-.259049,.415501,.80699,.863725,-.2471,.387328,.842107,.879137,-.234157,.356108,.878078,.894634,-.218719,.324315,.914058,.909162,-.201293,.291813,.949922,.92072,-.18267,.258474,.985337,.93158,-.163212,.225593,1.0205,.941238,-.142771,.193986,1.05273,.949293,-.120956,.163392,1.08075,.956226,-.0985743,.132934,1.10559,.96546,-.075118,.101255,1.12823,.977403,-.0497921,.0675441,1.149,.989648,-.0241574,.0334681,1.16765,1.00001,5762e-7,-184807e-9,1.18519,.303474,-916603e-11,.4542,61243e-10,.308894,-232869e-9,.462306,155592e-9,.309426,-931661e-9,.463093,622499e-9,.308643,-.0020949,.461933,.00139979,.308651,-.0037242,.461941,.00248874,.308662,-.00581873,.46195,.00388933,.308687,-.00837818,.461974,.00560247,.308728,-.0114016,.462011,.00762948,.308789,-.0148884,.462067,.00997326,.308882,-.0188369,.462151,.0126375,.309007,-.0232436,.462263,.0156271,.30918,-.0281054,.462417,.0189498,.309442,-.0334065,.462667,.0226167,.309901,-.0390589,.463162,.0266614,.310331,-.0452042,.463555,.0310715,.310858,-.0517735,.464019,.0358698,.311576,-.0587359,.464669,.0410848,.312436,-.0660383,.465406,.0467453,.313526,-.0737266,.466339,.0528718,.314903,-.0817574,.467504,.0595039,.316814,-.090167,.469226,.0666888,.318965,-.0987555,.470981,.0744658,.322077,-.107792,.473814,.082912,.325947,-.117098,.477241,.0920846,.331008,-.126602,.48184,.102137,.337893,-.136619,.488334,.113135,.345106,-.146838,.494415,.12511,.355111,-.157357,.503275,.138356,.365095,-.167955,.510966,.152686,.378344,-.179157,.521508,.16856,.391599,-.190143,.530455,.18561,.407786,-.20123,.541275,.204308,.425294,-.212456,.551784,.224623,.444021,-.223568,.561493,.246172,.463418,-.234154,.569886,.268979,.484077,-.244546,.577116,.293411,.505513,-.254301,.582914,.318936,.527672,-.263564,.587208,.345856,.550565,-.272332,.589277,.374054,.573656,-.280011,.588426,.403276,.59827,-.286924,.587504,.43474,.624731,-.291994,.583401,.468767,.652396,-.295159,.576997,.504411,.67732,-.296954,.565863,.54114,.703147,-.296877,.552316,.57816,.728715,-.295147,.536773,.616124,.752448,-.291275,.51771,.653885,.775169,-.285905,.496087,.691537,.799307,-.279064,.474232,.729251,.819482,-.270294,.447676,.766267,.837659,-.260032,.419656,.802616,.856903,-.248497,.391328,.838583,.873325,-.235252,.360285,.874711,.889788,-.221126,.329215,.91077,.904486,-.204304,.296392,.94653,.917711,-.185562,.262159,.983828,.928969,-.165635,.229142,1.01955,.939707,-.14442,.19673,1.05317,.948167,-.122147,.165095,1.0823,.955222,-.099098,.13451,1.10791,.964401,-.0755332,.102476,1.1312,.976605,-.0513817,.0689667,1.15218,.989085,-.0258499,.034506,1.17129,.999908,617773e-9,-271268e-9,1.18961,.285803,-905752e-11,.452348,572272e-11,.284689,-22732e-8,.450581,143626e-9,.285263,-910214e-9,.451482,575099e-9,.285302,-.00204784,.451553,.00129395,.285318,-.00364057,.451574,.0023006,.28533,-.00568813,.451585,.00359547,.285361,-.00819001,.451618,.00517934,.285397,-.0111458,.45165,.007054,.285447,-.0145536,.451688,.00922167,.285527,-.0184127,.451758,.0116869,.285688,-.0227207,.451929,.0144555,.28584,-.0274712,.452055,.0175341,.286136,-.0326278,.452369,.0209406,.286574,-.0381792,.452853,.0246965,.287012,-.0441879,.453272,.0287996,.287542,-.0506096,.453752,.033268,.288299,-.0573634,.454488,.0381504,.289186,-.0645458,.455294,.0434447,.290302,-.0720405,.456301,.0491973,.291776,-.0799046,.457648,.0554453,.29372,-.088117,.459483,.0622311,.296052,-.0965328,.461571,.0695992,.299563,-.105409,.465085,.077658,.30335,-.114553,.468506,.0864176,.309167,-.123917,.474423,.0961078,.31529,-.13381,.47995,.106643,.324163,-.144021,.488592,.118322,.333272,-.154382,.496461,.131133,.344224,-.165015,.50562,.145208,.357733,-.176168,.516719,.16073,.373046,-.187468,.528513,.177807,.38788,-.198488,.537713,.196072,.405133,-.209545,.547999,.21605,.423845,-.220724,.55759,.237484,.443777,-.231518,.566246,.26039,.464824,-.242035,.574326,.284835,.486635,-.251898,.58037,.310518,.51012,-.261304,.58568,.337678,.535301,-.270384,.590197,.366242,.559193,-.27841,.590569,.395873,.583544,-.285325,.588161,.426857,.608834,-.291113,.584249,.459477,.635753,-.294882,.57763,.494734,.664367,-.297088,.569479,.532023,.689688,-.297364,.555064,.569629,.715732,-.295949,.539522,.608124,.741307,-.292259,.521613,.646231,.764949,-.287063,.49969,.684938,.788599,-.28012,.476747,.723548,.81048,-.27153,.45116,.761135,.831372,-.261289,.424101,.798916,.850092,-.249559,.39443,.835952,.867777,-.236348,.363849,.871606,.884632,-.221569,.332477,.907843,.90047,-.20618,.300667,.944187,.914524,-.188771,.266552,.981371,.926892,-.168362,.232349,1.01841,.937951,-.146761,.199359,1.05308,.947236,-.123813,.1675,1.0839,.954367,-.099984,.136166,1.11047,.963907,-.0759278,.103808,1.13414,.976218,-.0511367,.0697061,1.15575,.988772,-.0267415,.0352529,1.17531,.999888,-520778e-9,289926e-9,1.19389,.263546,-883274e-11,.441896,526783e-11,.262352,-221849e-9,.439889,132311e-9,.262325,-886683e-9,.439848,528824e-9,.26228,-.00199476,.439765,.00118975,.262372,-.00354671,.439922,.00211568,.26239,-.00554141,.439941,.00330652,.262412,-.00797888,.439961,.00476346,.262453,-.0108584,.440002,.00648818,.262528,-.0141788,.440085,.0084835,.262615,-.017938,.440166,.0107533,.262744,-.0221346,.440291,.0133044,.262939,-.026762,.440493,.0161445,.263277,-.0317573,.440889,.0192974,.26368,-.0371832,.441338,.0227699,.264106,-.0430371,.441753,.0265698,.264624,-.0493035,.442227,.0307178,.265378,-.0558669,.442985,.0352616,.266253,-.0628718,.443795,.0401968,.267478,-.0701569,.445008,.04559,.269062,-.077845,.446599,.0514539,.270926,-.0857941,.448349,.0578382,.273693,-.0940773,.451221,.0648363,.276746,-.102704,.454097,.0724389,.281693,-.111735,.459517,.0808744,.287335,-.121004,.46531,.0901551,.29448,-.130734,.472605,.100371,.30257,-.140777,.480251,.111644,.312465,-.15111,.489444,.124111,.324856,-.16189,.500919,.137979,.33774,-.172946,.511317,.153163,.35255,-.184152,.522684,.169817,.367786,-.19522,.53248,.187886,.385474,-.20632,.543326,.207634,.404976,-.217744,.554109,.229165,.425203,-.228691,.563395,.252068,.446704,-.239299,.571565,.276471,.468951,-.249348,.577935,.302323,.493487,-.258933,.584309,.329882,.517861,-.268009,.58773,.358525,.543309,-.276238,.589612,.388585,.569704,-.28356,.589294,.419787,.594871,-.289497,.585137,.452114,.622555,-.294452,.580356,.486466,.651167,-.296918,.57185,.523079,.677332,-.297647,.558428,.5611,.703718,-.296321,.542232,.599592,.730262,-.293339,.524541,.639138,.754304,-.288036,.502691,.677978,.778051,-.281018,.479212,.716537,.801557,-.272414,.454071,.75586,.822559,-.262419,.425952,.794477,.843051,-.250702,.397313,.832664,.86232,-.237264,.366534,.869876,.879044,-.222716,.334816,.906973,.896362,-.206827,.303143,.943558,.910342,-.189659,.269699,.979759,.924119,-.171108,.236411,1.01718,.935374,-.149579,.202224,1.05289,.944295,-.126295,.16989,1.08496,.952227,-.101511,.138089,1.11256,.962041,-.0766392,.105053,1.1375,.97528,-.0511967,.070329,1.15983,.988476,-.025463,.0351268,1.17987,.999962,286808e-10,145564e-10,1.19901,.227089,-841413e-11,.404216,472707e-11,.239725,-215083e-9,.426708,120833e-9,.239904,-860718e-9,.427028,483555e-9,.239911,-.00193661,.427039,.00108806,.239914,-.00344276,.42704,.00193457,.239933,-.00537907,.427064,.00302363,.239944,-.00774482,.427065,.00435604,.239993,-.01054,.427122,.00593398,.240052,-.0137626,.427179,.00775987,.240148,-.0174115,.427279,.00983854,.240278,-.021484,.42741,.0121763,.240472,-.0259729,.427618,.0147827,.240839,-.0308131,.428086,.0176837,.241201,-.0360893,.428482,.0208775,.241626,-.0417723,.428907,.0243821,.242207,-.0478337,.42952,.0282228,.24298,-.0542199,.430332,.0324333,.243881,-.0610015,.431222,.0370252,.245123,-.0680874,.432512,.0420535,.24667,-.0755482,.434088,.0475414,.248779,-.0832873,.436323,.0535542,.251665,-.0913546,.439509,.0601716,.255305,-.0998489,.443478,.0674282,.260049,-.108576,.448713,.0754673,.266192,-.117754,.455524,.084339,.273158,-.127294,.4627,.0941683,.282131,-.137311,.472068,.10515,.293332,-.147736,.483565,.117402,.304667,-.158357,.493702,.130824,.317785,-.169274,.504708,.145724,.333245,-.180595,.517107,.16215,.349843,-.191892,.528849,.180149,.367944,-.203168,.540301,.199746,.387579,-.214443,.551514,.221047,.408247,-.225624,.560906,.243981,.43014,-.236422,.56959,.268513,.452669,-.24654,.576098,.294409,.476196,-.256157,.580925,.322002,.501157,-.265289,.584839,.351052,.527632,-.273671,.587614,.3812,.555754,-.281254,.589119,.412994,.581682,-.287448,.585204,.445498,.608196,-.292614,.579006,.479505,.635661,-.296068,.571297,.514643,.664999,-.297395,.560855,.552213,.691039,-.296645,.544525,.591365,.7179,-.293785,.526535,.630883,.744059,-.289089,.50545,.670932,.76863,-.282239,.482514,.710904,.793273,-.273688,.457246,.750259,.814731,-.26328,.428872,.78948,.835603,-.251526,.399384,.828597,.85489,-.238339,.368811,.866892,.872828,-.223607,.336617,.90563,.889462,-.207538,.303997,.943538,.904929,-.190297,.270812,.980591,.919101,-.172034,.237453,1.01935,.930536,-.152058,.204431,1.05498,.941223,-.129515,.172495,1.08717,.94982,-.104263,.140175,1.11551,.960592,-.0781944,.106465,1.14098,.974629,-.051688,.0711592,1.16418,.98811,-.0253929,.0354432,1.18465,1.00004,804378e-9,-330876e-9,1.20462,.214668,-821282e-11,.406619,433582e-11,.218053,-208144e-9,.413025,109887e-9,.217987,-832212e-9,.412901,439362e-9,.217971,-.00187246,.412876,988623e-9,.217968,-.00332855,.41286,.00175772,.217985,-.00520055,.412882,.00274729,.218014,-.00748814,.412916,.00395842,.218054,-.0101901,.412957,.00539274,.218106,-.0133057,.413005,.00705348,.218217,-.0168342,.413139,.00894581,.218338,-.0207707,.413258,.0110754,.21855,-.0251001,.413509,.0134551,.218913,-.0297861,.413992,.0161081,.219265,-.0348956,.414383,.0190307,.219696,-.0403909,.414839,.0222458,.220329,-.0462003,.415567,.025792,.220989,-.0524208,.41621,.0296637,.222027,-.058948,.417385,.0339323,.223301,-.0658208,.418779,.0386055,.224988,-.0730347,.420665,.0437355,.227211,-.0805274,.423198,.0493844,.230131,-.088395,.426566,.0556135,.233908,-.0966208,.43091,.0624829,.239092,-.105223,.437148,.0701636,.245315,-.11424,.444302,.0786949,.253166,-.12368,.453262,.0882382,.262374,-.133569,.463211,.0988682,.273145,-.143836,.474271,.110727,.285512,-.154577,.4863,.123945,.299512,-.165501,.498817,.138581,.314287,-.176698,.510341,.154676,.331083,-.188066,.522583,.172459,.349615,-.199597,.534879,.191979,.369318,-.210843,.546083,.21309,.390377,-.222068,.5562,.235998,.412411,-.233059,.564704,.260518,.435715,-.24357,.572314,.286795,.461196,-.253356,.579395,.314559,.485587,-.262362,.581985,.343581,.511908,-.270895,.584347,.374367,.539798,-.278452,.58505,.406015,.567974,-.284877,.583344,.439168,.594303,-.290124,.577348,.473005,.622951,-.294183,.570751,.508534,.652404,-.296389,.561541,.544764,.679291,-.296605,.546426,.582927,.706437,-.294095,.528599,.622681,.734485,-.28978,.508676,.663567,.758841,-.283363,.484768,.704092,.78537,-.275015,.460434,.745101,.807315,-.264689,.432166,.784712,.8271,-.252597,.401807,.824241,.849191,-.239154,.371458,.863803,.867046,-.224451,.338873,.903063,.8852,-.208342,.306175,.942763,.901771,-.190684,.272759,.981559,.915958,-.172105,.239306,1.02048,.928046,-.152214,.206071,1.05765,.939961,-.130247,.17367,1.08999,.948711,-.10672,.142201,1.11829,.959305,-.0808688,.108454,1.14467,.973009,-.0539145,.0728109,1.16839,.987631,-.0262947,.0360625,1.19004,.999978,.00132758,-559424e-9,1.21058,.193925,-793421e-11,.391974,392537e-11,.196746,-200315e-9,.397675,991033e-10,.19667,-801099e-9,.397521,396342e-9,.196633,-.00180246,.397445,891829e-9,.196654,-.00320443,.397482,.00158582,.196659,-.00500647,.39748,.00247867,.196683,-.0072086,.397506,.00357167,.196728,-.00981001,.397562,.00486675,.196792,-.0128096,.397633,.00636707,.19689,-.0162055,.397746,.00807752,.197017,-.0199943,.397884,.0100052,.19729,-.024139,.39827,.0121691,.197583,-.0286671,.398639,.0145755,.197927,-.0335858,.399034,.0172355,.198383,-.0388806,.399554,.0201718,.199002,-.0444736,.400289,.0234194,.199739,-.0504583,.401111,.026984,.200784,-.056729,.402349,.0309217,.202075,-.0633643,.403841,.0352496,.203898,-.0703247,.406076,.0400313,.206199,-.0775565,.408841,.0453282,.209252,-.085184,.41259,.0511794,.213638,-.0931994,.418288,.0577459,.21881,-.101617,.424681,.0650508,.225642,-.11052,.433429,.0732759,.233717,-.119772,.442897,.0824683,.242823,-.129505,.452888,.0927484,.254772,-.139906,.466407,.104417,.266603,-.150402,.477413,.117211,.28073,-.161395,.490519,.131598,.295399,-.172465,.50201,.147407,.312705,-.183982,.515311,.165031,.331335,-.195532,.52786,.184336,.351037,-.206971,.5392,.205361,.372175,-.218117,.54941,.228043,.394548,-.229327,.558642,.25267,.419598,-.240052,.567861,.279071,.443922,-.249937,.573332,.306882,.471495,-.259407,.58013,.33661,.496769,-.267749,.580564,.367328,.524951,-.275524,.581696,.399753,.55318,-.282148,.579885,.433134,.581577,-.287533,.575471,.467534,.609231,-.291612,.567445,.502943,.637478,-.293911,.557657,.53871,.667795,-.295096,.546535,.576568,.694272,-.294073,.529561,.614929,.722937,-.290386,.510561,.655909,.749682,-.284481,.487846,.697663,.774754,-.276188,.462487,.738515,.799301,-.266215,.43481,.779802,.820762,-.254116,.404879,.820045,.843231,-.240393,.374559,.860294,.861857,-.225503,.341582,.900965,.880815,-.209382,.308778,.941727,.89766,-.19155,.275232,.980916,.912926,-.172346,.240938,1.02162,.926391,-.151799,.207223,1.0597,.938429,-.129968,.17484,1.09291,.947834,-.10651,.142984,1.12248,.958432,-.0824098,.109902,1.149,.972402,-.0565242,.0744454,1.1733,.987191,-.028427,.0373794,1.19538,.999975,385685e-10,-4203e-8,1.21676,.178114,-766075e-11,.385418,354027e-11,.176074,-191966e-9,.381002,887135e-10,.17601,-767549e-9,.380861,354715e-9,.17598,-.00172696,.380798,798168e-9,.175994,-.00307012,.380824,.00141928,.176017,-.00479684,.380858,.00221859,.176019,-.00690648,.380839,.00319714,.176072,-.00939888,.380913,.0043572,.176131,-.0122726,.380979,.005702,.176239,-.0155264,.38112,.00723689,.176371,-.0191551,.381272,.00896907,.176638,-.023117,.381669,.0109194,.176912,-.0274633,.382015,.0130903,.177279,-.032173,.382476,.0154949,.17774,-.0372219,.383041,.0181669,.178344,-.0426132,.38378,.0211209,.179153,-.0483309,.384773,.0243899,.180197,-.0543447,.386076,.0280062,.181581,-.0607122,.387809,.032004,.18344,-.0673855,.390205,.036453,.186139,-.0743989,.393944,.0414162,.189432,-.0817731,.39832,.0469394,.193795,-.0895464,.404188,.0531442,.199641,-.0978264,.4121,.0601374,.206679,-.106499,.421425,.0680078,.214865,-.115654,.431504,.076919,.224406,-.125268,.442526,.0868835,.235876,-.135475,.455465,.0981875,.248335,-.146023,.4681,.110759,.262868,-.157016,.482069,.124885,.278962,-.168245,.496182,.140645,.295082,-.17958,.507401,.157838,.313738,-.191227,.520252,.17695,.333573,-.202718,.531708,.197817,.356433,-.214424,.544509,.220785,.378853,-.225492,.55373,.245306,.402717,-.236236,.561348,.271593,.428375,-.246568,.568538,.299776,.454724,-.255941,.573462,.329433,.482291,-.264511,.576356,.360598,.509706,-.272129,.576446,.393204,.538805,-.278979,.575298,.427227,.568919,-.284528,.572154,.462157,.596804,-.288801,.564691,.497997,.625987,-.291334,.555134,.534467,.656414,-.292722,.545051,.571736,.683916,-.292185,.528813,.610158,.711809,-.290043,.51106,.649061,.739547,-.285246,.490103,.690081,.766914,-.277647,.465523,.732554,.791375,-.267603,.437718,.773982,.814772,-.256109,.40882,.81609,.836691,-.242281,.377823,.856849,.856984,-.227155,.34496,.898363,.876332,-.210395,.311335,.939471,.894988,-.192612,.277703,.980799,.911113,-.173236,.243019,1.02215,.924092,-.152258,.209037,1.06139,.936828,-.129575,.175909,1.09635,.946869,-.10594,.143852,1.12707,.958284,-.081318,.110289,1.15419,.972325,-.0556133,.0747232,1.17909,.986878,-.0297899,.0383149,1.20163,.999936,-.00197169,912402e-9,1.22338,.151174,-720365e-11,.351531,309789e-11,.155594,-18279e-8,.361806,78608e-9,.156099,-731569e-9,.362982,314615e-9,.156053,-.00164578,.362869,707845e-9,.156093,-.0029261,.362961,.00125884,.156099,-.00457155,.362959,.00196783,.15612,-.00658224,.362982,.00283622,.156168,-.00895774,.363048,.00386625,.156221,-.0116962,.363101,.00506109,.156324,-.0147973,.363241,.00642675,.156476,-.0182503,.363448,.00797175,.156731,-.0220266,.36384,.00971484,.156994,-.026176,.364179,.0116575,.157341,-.0306701,.36462,.0138207,.157867,-.0354591,.365364,.0162356,.15846,-.0406141,.366111,.0189092,.159308,-.0460519,.367248,.021885,.160426,-.0518096,.368767,.0252004,.161877,-.0578906,.370745,.0288825,.163995,-.0642812,.373831,.0330139,.16655,-.0710067,.377366,.0376283,.170237,-.0781522,.382799,.0428493,.175096,-.0857172,.389915,.0487324,.181069,-.0938025,.398487,.0554214,.188487,-.102363,.408799,.0630189,.197029,-.111343,.419991,.071634,.206684,-.120812,.431455,.0812797,.218698,-.131033,.445746,.0923651,.230726,-.141373,.457471,.104545,.245516,-.152387,.472388,.118449,.261551,-.163628,.486671,.133923,.277437,-.174814,.49762,.150849,.296662,-.186713,.51162,.169924,.31795,-.198513,.525435,.190848,.339422,-.210119,.536267,.213504,.362143,-.221354,.545982,.237947,.387198,-.23224,.555364,.264427,.412349,-.24257,.561489,.292519,.439274,-.252284,.566903,.322561,.466779,-.261023,.569614,.353952,.496011,-.26899,.571589,.387278,.524964,-.275498,.570325,.421356,.556518,-.281449,.568792,.457314,.584363,-.285526,.560268,.493199,.614214,-.28844,.55205,.530276,.645684,-.289777,.541906,.56855,.673446,-.289722,.526464,.606927,.701924,-.287792,.509872,.645945,.73037,-.284315,.490649,.685564,.757405,-.278804,.467964,.726511,.784025,-.269543,.441468,.768601,.808255,-.258117,.41216,.811321,.830739,-.244728,.380606,.853496,.851914,-.229428,.348111,.895374,.872586,-.212508,.314732,.937674,.891581,-.194025,.280338,.979869,.907641,-.174711,.245203,1.02253,.922233,-.153509,.21077,1.06371,.935878,-.130418,.177399,1.09972,.946338,-.105558,.144507,1.13124,.957265,-.080059,.110508,1.15973,.971668,-.0539766,.0742311,1.18515,.9866,-.0277101,.0375224,1.20858,1.00021,-515531e-9,135226e-9,1.23135,.137468,-686011e-11,.345041,273315e-11,.13703,-173378e-9,.343936,690761e-10,.136986,-693048e-9,.34383,276126e-9,.136964,-.00155931,.343761,621337e-9,.137003,-.00277211,.343863,.00110494,.137012,-.00433103,.343868,.00172744,.137043,-.00623606,.343916,.00249022,.13709,-.0084868,.343986,.00339559,.137145,-.0110814,.344045,.00444687,.137242,-.0140187,.344177,.00565007,.137431,-.0172713,.344491,.00701868,.137644,-.0208605,.344805,.00856042,.13791,-.024792,.345172,.0102863,.138295,-.0290461,.345734,.0122185,.138764,-.0335957,.346371,.0143771,.139415,-.038467,.347298,.0167894,.140272,-.0436176,.348527,.0194895,.141457,-.0491016,.350276,.0225043,.14303,-.0548764,.352646,.0258962,.145289,-.0610096,.356206,.0297168,.148502,-.0674777,.361488,.0340562,.152188,-.074345,.367103,.0389534,.157359,-.0817442,.375247,.0445541,.16379,-.0896334,.385064,.0509535,.171376,-.098005,.396082,.0582611,.179901,-.106817,.407418,.06654,.189892,-.116239,.420031,.075994,.201838,-.12627,.434321,.0867239,.214311,-.136701,.447631,.0987517,.228902,-.147616,.462046,.112353,.245107,-.158871,.476942,.127605,.262292,-.170261,.490285,.144469,.281215,-.182017,.503783,.163282,.301058,-.193729,.515505,.183873,.322752,-.205512,.52682,.206466,.347547,-.217214,.539473,.231194,.370969,-.227966,.546625,.257288,.397533,-.238555,.55472,.285789,.42398,-.248278,.559468,.315746,.452928,-.257422,.564095,.347724,.482121,-.265306,.565426,.380922,.510438,-.272043,.563205,.415639,.541188,-.277614,.561087,.451702,.571667,-.281927,.554922,.48845,.602432,-.285015,.546838,.526442,.634126,-.286512,.537415,.564896,.662816,-.286388,.522906,.604037,.692411,-.284734,.507003,.643795,.720946,-.281297,.488398,.68298,.748293,-.276262,.466353,.723466,.776931,-.269978,.443573,.764565,.801065,-.260305,.415279,.805838,.825843,-.247426,.384773,.849985,.84807,-.232437,.352555,.893174,.869122,-.215806,.318642,.936564,.888963,-.197307,.28381,.980253,.905547,-.177203,.247888,1.02463,.918554,-.155542,.212904,1.06714,.931395,-.131948,.1787,1.10451,.941749,-.106723,.145902,1.13694,.954551,-.0804939,.111193,1.1666,.970279,-.0534239,.0744697,1.19249,.986117,-.0257452,.0368788,1.21665,.999938,.00190634,-.0010291,1.23981,.118493,-647439e-11,.32272,23772e-10,.118765,-163023e-9,.323456,598573e-10,.118772,-65212e-8,.323477,239447e-9,.118843,-.00146741,.323657,538881e-9,.118804,-.00260846,.323553,95826e-8,.118826,-.00407576,.323595,.00149845,.118846,-.00586826,.323617,.00216047,.118886,-.00798578,.32367,.00294679,.118947,-.0104273,.323753,.00386124,.119055,-.0131909,.323922,.00490999,.119241,-.0162444,.324251,.00610804,.11944,-.0196339,.324544,.00745805,.119739,-.0233378,.325026,.00897805,.12011,-.0273179,.325586,.0106895,.120571,-.0316143,.326231,.0126073,.12124,-.0361939,.327264,.0147654,.122162,-.0410511,.328733,.0172001,.123378,-.0462233,.330659,.0199375,.125183,-.0517109,.333754,.0230498,.127832,-.0575652,.338507,.026597,.130909,-.0637441,.343666,.0306345,.135221,-.0704302,.351063,.035273,.14082,-.0776364,.360604,.0406137,.146781,-.0852293,.369638,.0466788,.155121,-.0935351,.3827,.0537628,.16398,-.102234,.39522,.0617985,.173926,-.111465,.40793,.07097,.185137,-.121296,.42105,.0813426,.19826,-.13169,.435735,.0931596,.212938,-.142614,.450932,.106547,.229046,-.153884,.465726,.121575,.246246,-.165382,.479461,.138286,.264637,-.176806,.492106,.15666,.284959,-.188793,.504774,.17728,.308157,-.200763,.518805,.19988,.330951,-.21239,.528231,.224293,.3549,-.223521,.536376,.250541,.381502,-.234169,.544846,.278902,.409529,-.244077,.551717,.309227,.437523,-.253363,.55517,.341426,.467624,-.261659,.557772,.37518,.497268,-.268498,.556442,.41007,.528294,-.274018,.553915,.446445,.559053,-.278169,.549153,.483779,.589329,-.281229,.539878,.522249,.622503,-.282902,.53162,.561754,.652382,-.282815,.518119,.601544,.681847,-.281247,.502187,.641574,.712285,-.277986,.484824,.682633,.740094,-.273017,.463483,.723426,.768478,-.266692,.441299,.763747,.794556,-.258358,.415238,.805565,.819408,-.248807,.386912,.847254,.843411,-.236214,.356165,.891091,.862397,-.219794,.320562,.936174,.883113,-.201768,.285322,.982562,.90023,-.181672,.249713,1.02862,.915192,-.159279,.214546,1.07163,.928458,-.134725,.180285,1.10995,.94069,-.10913,.147119,1.14354,.953409,-.0821315,.112492,1.17372,.969537,-.0542677,.0752014,1.20043,.985612,-.0259096,.0370361,1.22528,.999835,.00298198,-.00151801,1.24959,.10097,-602574e-11,.300277,202619e-11,.101577,-152164e-9,.302077,511662e-10,.101572,-608889e-9,.302066,204751e-9,.101566,-.00136997,.302047,460753e-9,.101592,-.00243557,.302114,819497e-9,.101608,-.0038053,.30214,.00128154,.101627,-.00547906,.30216,.0018483,.101669,-.00745647,.302224,.00252223,.101732,-.00973615,.302318,.00330716,.101844,-.0123097,.302513,.00421061,.102025,-.0151681,.30285,.00524481,.102224,-.0183334,.303166,.0064154,.102515,-.0217819,.303654,.00774063,.102886,-.0255067,.304243,.0092398,.103395,-.029514,.305089,.0109339,.104109,-.0337912,.306301,.0128561,.105074,-.0383565,.30798,.0150338,.10654,-.0432132,.310726,.0175228,.108478,-.0484244,.314351,.0203648,.111015,-.0539339,.319032,.0236325,.114682,-.0598885,.32605,.0274188,.11911,-.0663375,.334109,.0317905,.124736,-.0733011,.344013,.0368502,.131479,-.0807744,.355358,.0427104,.139283,-.0888204,.367614,.0494788,.148054,-.0973394,.380072,.0572367,.159037,-.10665,.395678,.0662704,.169794,-.116221,.40795,.0763192,.18314,-.126632,.423546,.087956,.197515,-.137383,.438213,.101042,.213514,-.148641,.453248,.115827,.23065,-.160117,.46688,.132283,.249148,-.171807,.479962,.150644,.270219,-.183695,.494618,.171073,.292338,-.195574,.506937,.193378,.314999,-.207205,.516463,.217585,.340991,-.218955,.528123,.24428,.367982,-.229917,.537025,.272784,.39432,-.239737,.541627,.302742,.423364,-.249048,.546466,.335112,.453751,-.257329,.549466,.369032,.48416,-.264623,.549503,.404577,.515262,-.270411,.547008,.441337,.547036,-.274581,.542249,.479162,.576614,-.277266,.533015,.517904,.611143,-.279144,.525512,.558508,.640989,-.279001,.51154,.598995,.671182,-.277324,.495641,.639935,.700848,-.273908,.477526,.681017,.729862,-.269063,.457955,.722764,.758273,-.262282,.434846,.764349,.784121,-.254281,.409203,.806206,.809798,-.24505,.382694,.848617,.834953,-.233861,.354034,.892445,.856817,-.221308,.321764,.936263,.877609,-.205996,.288118,.982401,.897489,-.186702,.253277,1.02975,.913792,-.164618,.217963,1.07488,.92785,-.140023,.183221,1.11487,.940378,-.11328,.149385,1.14947,.95273,-.0853958,.114152,1.1807,.969059,-.0568698,.0769845,1.20912,.985574,-.0276502,.0381186,1.23498,.999943,.00239052,-.00126861,1.25987,.0852715,-560067e-11,.279021,171162e-11,.0854143,-140871e-9,.279483,430516e-10,.0854191,-563385e-9,.2795,172184e-9,.0854188,-.00126753,.279493,387464e-9,.0854229,-.00225337,.279501,68918e-8,.0854443,-.00352086,.279549,.00107803,.0854697,-.00506962,.279591,.00155536,.0855093,-.00689873,.279652,.00212354,.0855724,-.00900821,.279752,.00278703,.0856991,-.0113799,.280011,.0035551,.085855,-.0140314,.280297,.00443449,.0860682,-.016963,.280682,.00543636,.086344,-.0201438,.281159,.0065788,.0867426,-.0235999,.281886,.00787977,.087239,-.0273069,.282745,.0093606,.0879815,-.031269,.284139,.011056,.0891258,-.035531,.28647,.0130065,.0906909,-.0400947,.289708,.0152495,.0927624,-.0449638,.293904,.0178454,.0958376,-.0502427,.300471,.0208915,.0995827,-.0559514,.30806,.0244247,.104526,-.0622152,.317874,.0285721,.110532,-.0690046,.329332,.0334227,.117385,-.0763068,.341217,.0390466,.12522,-.084184,.353968,.0455786,.134037,-.0925248,.366797,.0530773,.144014,-.101487,.380209,.0617424,.156013,-.111273,.395956,.071777,.168872,-.121431,.41053,.0830905,.183089,-.132105,.425073,.0959341,.198763,-.143286,.439833,.110448,.216159,-.154841,.454507,.126769,.234859,-.166588,.468368,.14495,.255879,-.178626,.482846,.165233,.27677,-.190218,.493489,.187217,.301184,-.202227,.506549,.211659,.325852,-.213764,.5158,.237922,.352824,-.22487,.525442,.26632,.380882,-.235246,.532487,.296691,.410137,-.244847,.537703,.329179,.439787,-.253122,.540361,.363135,.472291,-.260517,.542734,.399222,.501856,-.266519,.538826,.436352,.534816,-.270905,.535152,.474505,.565069,-.273826,.525979,.513988,.597154,-.275333,.516394,.554852,.630473,-.275314,.506206,.596592,.660574,-.273323,.489769,.638117,.692015,-.270008,.472578,.680457,.720647,-.265001,.452134,.723008,.750528,-.258311,.430344,.765954,.777568,-.250046,.405624,.809012,.80387,-.240114,.378339,.852425,.828439,-.228737,.349877,.895346,.851472,-.216632,.318968,.940695,.873906,-.202782,.287489,.987235,.89467,-.187059,.254394,1.03348,.912281,-.168818,.221294,1.07812,.927358,-.146494,.18675,1.11928,.940385,-.120009,.152322,1.15609,.952672,-.0917183,.117514,1.18875,.968496,-.0620321,.0797405,1.21821,.985236,-.0314945,.0402383,1.24523,.99998,-575153e-9,110644e-9,1.27133,.0702429,-512222e-11,.255273,140947e-11,.0702981,-128826e-9,.255469,354488e-10,.0703691,-515562e-9,.255727,141874e-9,.0703805,-.00116,.255754,31929e-8,.0703961,-.00206224,.255813,567999e-9,.0704102,-.00322223,.255839,88871e-8,.0704298,-.00463928,.255863,.00128272,.0704759,-.00631375,.255953,.00175283,.0705434,-.00824317,.256079,.00230342,.0706693,-.010412,.25636,.0029443,.0708189,-.0128439,.256647,.00368031,.0710364,-.0155177,.257084,.00452614,.0713223,-.0184374,.257637,.00549706,.0717182,-.0216002,.258416,.00661246,.072321,-.0249966,.259699,.00790147,.0731446,-.0286566,.261475,.0093884,.0743352,-.0325888,.264132,.0111186,.0760676,-.036843,.26815,.013145,.078454,-.0414292,.273636,.0155251,.0818618,-.0464634,.281653,.0183525,.0857382,-.0519478,.289992,.0216642,.0908131,-.0579836,.30066,.0255956,.0967512,-.0645124,.312204,.0301954,.103717,-.0716505,.325001,.0356017,.111596,-.0793232,.338129,.041896,.120933,-.087645,.352853,.0492447,.130787,-.096492,.366192,.0576749,.142311,-.105973,.380864,.0673969,.155344,-.116182,.396575,.0785899,.169535,-.126815,.411443,.0912377,.185173,-.138015,.426256,.105607,.201755,-.149325,.439607,.121551,.221334,-.161207,.455467,.139608,.241461,-.173162,.469096,.159591,.26294,-.18504,.481014,.18156,.286776,-.196881,.493291,.205781,.311596,-.208311,.503556,.231819,.338667,-.219671,.513268,.260274,.366021,-.230451,.519414,.290862,.395875,-.240131,.526766,.323196,.425564,-.248566,.52905,.357071,.457094,-.256195,.530796,.393262,.488286,-.262331,.528703,.430797,.522291,-.267141,.52727,.470231,.554172,-.270411,.519848,.510477,.586427,-.271986,.510307,.551594,.619638,-.27192,.499158,.593849,.650656,-.269817,.483852,.636314,.68284,-.266267,.467515,.679679,.714356,-.26113,.44931,.723884,.742717,-.254067,.425789,.767245,.770894,-.245652,.401144,.811819,.797358,-.235554,.374224,.856315,.823377,-.223896,.346167,.901077,.847456,-.210865,.316056,.946502,.870697,-.196574,.284503,.993711,.891068,-.180814,.251628,1.04134,.909267,-.163314,.219065,1.08609,.925653,-.143304,.186446,1.12702,.940017,-.121322,.153416,1.16371,.952398,-.0973872,.120334,1.19712,.967568,-.0698785,.08352,1.22791,.984772,-.0390031,.0439209,1.25672,1.00026,-.0070087,.00315668,1.28428,.0556653,-459654e-11,.227325,112556e-11,.0565238,-116382e-9,.230826,284985e-10,.0565717,-465666e-9,.231026,114036e-9,.0565859,-.00104773,.231079,256656e-9,.0565761,-.00186255,.231025,45663e-8,.0565913,-.00291002,.231058,714664e-9,.0566108,-.00418998,.231085,.00103224,.0566532,-.00570206,.231169,.00141202,.0567473,-.00743666,.231417,.00186018,.0568567,-.00940298,.231661,.00238264,.0569859,-.0115991,.231895,.00298699,.0572221,-.0140096,.232456,.00368957,.057519,-.0166508,.233096,.00450303,.0579534,-.01951,.234094,.00544945,.0585922,-.0225991,.235629,.00655564,.0595647,-.0259416,.238106,.00785724,.0609109,-.0295661,.241557,.00939127,.0628751,-.0335126,.246652,.0112198,.0656908,-.0378604,.254091,.0134168,.0691347,-.0426543,.262666,.0160374,.0732165,-.0478967,.272029,.0191514,.0782863,-.0536716,.283007,.0228597,.0843973,-.0600683,.295732,.0272829,.0913598,-.0670095,.308779,.032484,.0994407,-.0745516,.322886,.0385886,.108189,-.082712,.336408,.0457133,.118574,-.0914927,.351692,.0539832,.129989,-.100854,.366502,.0635162,.142722,-.110837,.381675,.0744386,.156654,-.121353,.3963,.0868483,.172151,-.132414,.411477,.100963,.188712,-.143809,.42508,.116795,.208093,-.155765,.441328,.134715,.227936,-.167608,.454328,.154396,.249495,-.179579,.467235,.176179,.27362,-.191488,.480248,.200193,.296371,-.202618,.487886,.225775,.324234,-.214133,.499632,.25441,.353049,-.225212,.509532,.285077,.381785,-.234875,.514265,.317047,.414038,-.244205,.521282,.351874,.445251,-.252145,.522931,.388279,.476819,-.258433,.520947,.425825,.509209,-.263411,.517669,.465104,.542759,-.266732,.512841,.505741,.574822,-.268263,.503317,.547611,.609324,-.268489,.493035,.590953,.641772,-.266941,.478816,.63488,.674049,-.263297,.462863,.679072,.705071,-.257618,.442931,.723487,.734709,-.250625,.421299,.768708,.763704,-.24179,.397085,.814375,.791818,-.231115,.370577,.859907,.817439,-.21922,.34232,.906715,.843202,-.205658,.312627,.953943,.866639,-.190563,.280933,1.00185,.888129,-.173978,.248393,1.05105,.907239,-.155485,.216007,1.09704,.923893,-.134782,.183233,1.13857,.938882,-.11249,.150376,1.17539,.952464,-.0890706,.117177,1.20924,.968529,-.0646523,.0813095,1.24055,.984763,-.038606,.0439378,1.27018,1.00053,-.01238,.00598668,1.29873,.0437928,-409594e-11,.204012,8.79224e-7,.0440166,-103395e-9,.205049,221946e-10,.0440529,-413633e-9,.205225,887981e-10,.0440493,-930594e-9,.2052,199858e-9,.0439884,-.00165352,.204901,355495e-9,.0440716,-.0025849,.205255,556983e-9,.0440968,-.00372222,.205311,805326e-9,.0441359,-.00506478,.205391,.00110333,.0442231,-.00660384,.205638,.00145768,.0443254,-.00835246,.205877,.00187275,.0444832,-.0102992,.20627,.00235938,.0447001,-.0124449,.206796,.0029299,.0450168,-.0147935,.207593,.0036005,.0454816,-.017336,.208819,.00439246,.0462446,-.0201156,.211036,.00533864,.0473694,-.0231568,.214388,.00646984,.0490191,-.0264941,.219357,.00783856,.0512776,-.030184,.226061,.00950182,.0541279,-.0342661,.234094,.0115156,.0578989,-.0388539,.244297,.0139687,.0620835,-.0438735,.254457,.0169015,.0673497,-.04951,.266706,.0204554,.0731759,-.0556263,.278753,.0246606,.0803937,-.0624585,.29309,.0297126,.0879287,-.0697556,.305856,.0355868,.0970669,-.0778795,.321059,.0425768,.106508,-.0863541,.333873,.05056,.11776,-.0955935,.349008,.0598972,.130081,-.105438,.363776,.0706314,.144454,-.115899,.380112,.0828822,.1596,-.126827,.394843,.0967611,.176097,-.138161,.409033,.112381,.194726,-.149904,.424257,.129952,.213944,-.161675,.436945,.149333,.235516,-.173659,.450176,.170892,.260564,-.185963,.466305,.194984,.285183,-.197582,.477328,.220805,.311095,-.208697,.486566,.248694,.338924,-.219519,.494811,.279015,.369757,-.229766,.504065,.311725,.3996,-.238879,.507909,.345844,.430484,-.246802,.509805,.381749,.46413,-.253924,.511436,.420251,.497077,-.259319,.508787,.459957,.530434,-.263297,.50394,.501356,.565725,-.265619,.49804,.544252,.599254,-.265842,.487346,.587856,.631251,-.263978,.472975,.631969,.663972,-.26043,.457135,.677471,.697724,-.255358,.439844,.723744,.727725,-.248308,.417872,.770653,.756417,-.239181,.39273,.817357,.785419,-.22814,.367839,.864221,.81266,-.215681,.339449,.912701,.839391,-.201623,.309279,.962419,.86366,-.185624,.278029,1.0122,.885028,-.16797,.245294,1.06186,.904639,-.148336,.212689,1.10934,.922048,-.12637,.179616,1.15063,.936952,-.102928,.146749,1.18885,.951895,-.0785268,.112733,1.22352,.967198,-.0530153,.0760056,1.25681,.984405,-.02649,.0383183,1.28762,1.00021,70019e-8,-20039e-8,1.31656,.0325964,-355447e-11,.176706,6.55682e-7,.0329333,-899174e-10,.178527,165869e-10,.0329181,-359637e-9,.178453,663498e-10,.0329085,-808991e-9,.178383,149332e-9,.0329181,-.00143826,.178394,265873e-9,.0329425,-.00224678,.178517,416597e-9,.0329511,-.00323575,.17849,603299e-9,.033011,-.00439875,.178695,829422e-9,.0330733,-.00574059,.178843,.00109908,.0331857,-.00725896,.179176,.00141933,.0333445,-.00895289,.179618,.0017999,.0335674,-.0108219,.180238,.00225316,.033939,-.0128687,.181417,.00279765,.0345239,-.015114,.183395,.0034564,.0354458,-.017596,.186616,.00425864,.0368313,-.0203524,.191547,.00524936,.0386115,-.0234105,.197508,.00647033,.0410303,-.0268509,.205395,.00798121,.0442245,-.0307481,.215365,.0098557,.0478659,-.0350863,.225595,.0121417,.0522416,-.0399506,.236946,.0149385,.0574513,-.045357,.249442,.0183189,.0631208,-.0512863,.261222,.0223644,.0701124,-.0579273,.275418,.0272418,.0777331,-.0650652,.288989,.0329458,.0862709,-.0728813,.302546,.0396819,.096103,-.081363,.317164,.04757,.106976,-.0904463,.331733,.0567012,.119175,-.100105,.34661,.067202,.132919,-.110375,.362249,.0792588,.147727,-.121115,.376978,.0928672,.163618,-.132299,.390681,.108228,.182234,-.143887,.406571,.125502,.201809,-.155827,.42042,.144836,.225041,-.168357,.438411,.166706,.247621,-.18004,.450368,.189909,.27097,-.191536,.460083,.215251,.296658,-.203024,.469765,.243164,.325892,-.214056,.481837,.273388,.35406,-.224104,.487474,.305344,.384372,-.233489,.492773,.339741,.41749,-.241874,.498451,.376287,.45013,-.248834,.499632,.414195,.481285,-.254658,.495233,.454077,.519183,-.259367,.496401,.496352,.551544,-.261818,.487686,.538798,.587349,-.262964,.479453,.583626,.621679,-.262128,.467709,.629451,.654991,-.258998,.452123,.67566,.686873,-.254119,.433495,.723248,.719801,-.246946,.413657,.771156,.750355,-.237709,.390366,.81989,.780033,-.226549,.364947,.868601,.809254,-.214186,.337256,.920034,.836576,-.199639,.307395,.971706,.861774,-.183169,.275431,1.02479,.885707,-.165111,.243431,1.07837,.904742,-.144363,.210921,1.12783,.915604,-.121305,.17647,1.17254,.930959,-.0962119,.143106,1.21012,.948404,-.069969,.108112,1.24474,.967012,-.0427586,.0708478,1.27718,.984183,-.0147043,.032335,1.3083,.999577,.0142165,-.00726867,1.3382,.0229227,-299799e-11,.148623,4.62391e-7,.0232194,-758796e-10,.15054,117033e-10,.0232315,-303636e-9,.15063,468397e-10,.0232354,-683189e-9,.150624,105472e-9,.0232092,-.0012136,.150445,187744e-9,.0232523,-.00189765,.150679,294847e-9,.0232828,-.00273247,.150789,428013e-9,.0233371,-.00371287,.150995,591134e-9,.0234015,-.00484794,.15118,787642e-9,.023514,-.00612877,.151562,.00102547,.023679,-.00756125,.152116,.00131351,.0239559,-.00914651,.153162,.00166594,.0244334,-.010904,.155133,.00210182,.025139,-.0128615,.158035,.00264406,.0262598,-.0150628,.162751,.00332923,.0277875,-.0175532,.168944,.00419773,.0298472,-.0203981,.176835,.00530034,.0325444,-.023655,.186686,.00669777,.0355581,-.0272982,.196248,.00842661,.0392841,-.0314457,.207352,.0105854,.0436815,-.0361157,.219279,.0132458,.0485272,-.0412932,.230728,.0164736,.0541574,-.0470337,.242994,.0203715,.0609479,-.0535002,.257042,.0250953,.0685228,-.0605409,.27102,.0306856,.0768042,-.0680553,.28406,.037193,.0864844,-.0765011,.299186,.0449795,.0969415,-.0852674,.3132,.0538316,.108478,-.0947333,.327138,.0641149,.121705,-.10481,.342345,.0759185,.136743,-.115474,.358472,.0894116,.152986,-.126536,.374067,.104562,.170397,-.138061,.388267,.121632,.191392,-.150203,.406467,.140996,.211566,-.161751,.418641,.161696,.233567,-.173407,.430418,.184557,.257769,-.185397,.44277,.210092,.28531,-.197048,.457191,.237827,.311726,-.20784,.464712,.267253,.340537,-.218345,.472539,.299332,.372921,-.228306,.482331,.333988,.402924,-.236665,.484378,.369722,.434475,-.244097,.484717,.407836,.469736,-.250547,.487093,.448465,.505045,-.25511,.485575,.490263,.540262,-.258444,.481225,.534495,.576347,-.259903,.473481,.579451,.608656,-.259572,.4603,.625604,.646679,-.257908,.450341,.674511,.679902,-.253663,.431561,.723269,.714159,-.247419,.412684,.773263,.745345,-.239122,.389388,.824182,.778248,-.228837,.365361,.876634,.807208,-.216197,.337667,.92945,.835019,-.201772,.307197,.985261,.860261,-.185291,.274205,1.04299,.877601,-.165809,.240178,1.09816,.898211,-.143897,.207571,1.14694,.915789,-.119513,.174904,1.19008,.931831,-.0932919,.141423,1.2297,.949244,-.0656528,.105603,1.26553,.967527,-.0370262,.0679551,1.29986,.984139,-.00730117,.0283133,1.33252,.999713,.0234648,-.0121785,1.36397,.0152135,-245447e-11,.122795,3.04092e-7,.0151652,-615778e-10,.122399,76292e-10,.0151181,-245948e-9,.122023,304802e-10,.0151203,-553394e-9,.12203,686634e-10,.015125,-983841e-9,.122037,122463e-9,.0151427,-.00153774,.12214,192706e-9,.0151708,-.0022103,.122237,281219e-9,.0152115,-.00300741,.12238,390804e-9,.0152877,-.00392494,.1227,526317e-9,.015412,-.00496597,.123244,69443e-8,.0156201,-.00613314,.124228,90547e-8,.0159658,-.00744113,.125945,.0011732,.0165674,-.00892546,.129098,.00151888,.017487,-.010627,.133865,.00197007,.018839,-.0126043,.140682,.0025637,.020554,-.0148814,.148534,.00333637,.0226727,-.0175123,.157381,.00433738,.0251879,-.0205266,.166685,.00561664,.0283635,-.0240319,.177796,.00725563,.0318694,-.0279432,.188251,.00928811,.0361044,-.0324313,.200038,.011835,.0406656,-.0373527,.210685,.0149146,.0463846,-.0430132,.224182,.0187254,.0525696,-.0491013,.23634,.0232283,.0598083,-.0559175,.250013,.0286521,.0679437,-.0633657,.263981,.0350634,.0771181,-.0714602,.278072,.0425882,.0881273,-.0803502,.29511,.0514487,.0996628,-.0896903,.309976,.0615766,.112702,-.099644,.325611,.0732139,.126488,-.109829,.339321,.0862324,.142625,-.120859,.35574,.101275,.15953,-.131956,.369845,.117892,.176991,-.143145,.38146,.136205,.199715,-.155292,.40052,.157252,.220787,-.167066,.412055,.179966,.243697,-.178396,.423133,.204418,.272106,-.190433,.439524,.232141,.297637,-.201265,.447041,.261109,.325273,-.211834,.454488,.292627,.357219,-.221889,.465004,.326669,.387362,-.230729,.468527,.362426,.423131,-.23924,.475836,.401533,.45543,-.246067,.475017,.441902,.493393,-.251557,.478017,.484239,.526253,-.255571,.4709,.528586,.560554,-.257752,.463167,.574346,.599306,-.258076,.456452,.621655,.634541,-.256471,.443725,.670492,.668907,-.253283,.428719,.721943,.705619,-.247562,.411348,.772477,.739034,-.240626,.388939,.8264,.771408,-.231493,.36425,.881702,.803312,-.220125,.337321,.9385,.828457,-.206645,.305364,.997437,.854819,-.190664,.273715,1.05693,.878666,-.171429,.242218,1.11251,.898404,-.149235,.209556,1.16398,.917416,-.12435,.176863,1.21014,.933133,-.0972703,.142775,1.25178,.95066,-.0683607,.106735,1.29028,.968589,-.0378724,.0681609,1.32703,.984776,-.00605712,.0273966,1.36158,.99994,.0263276,-.0138124,1.3943,.00867437,-186005e-11,.0928979,1.73682e-7,.00864003,-466389e-10,.0925237,435505e-11,.00864593,-186594e-9,.0925806,174322e-10,.00864095,-419639e-9,.0924903,392862e-10,.00863851,-746272e-9,.0924589,702598e-10,.00868531,-.00116456,.0929,111188e-9,.00869667,-.00167711,.0928529,163867e-9,.00874332,-.00228051,.0930914,23104e-8,.00882709,-.00297864,.0935679,31741e-8,.00898874,-.00377557,.0946165,430186e-9,.00929346,-.00469247,.0967406,580383e-9,.00978271,-.00575491,.100084,783529e-9,.0105746,-.00701514,.105447,.00106304,.0116949,-.00851797,.112494,.00144685,.0130419,-.0102757,.119876,.00196439,.0148375,-.012381,.129034,.00266433,.0168725,-.01482,.137812,.00358364,.0193689,-.0176563,.147696,.00478132,.0222691,-.0209211,.157795,.00631721,.0256891,-.0246655,.168431,.00826346,.0294686,-.0288597,.178587,.0106714,.0340412,-.0336441,.190251,.0136629,.0393918,-.039033,.202999,.0173272,.0453947,-.0450087,.215655,.0217448,.0521936,-.0515461,.228686,.0269941,.0600279,-.058817,.242838,.033272,.0692398,-.0667228,.258145,.0406457,.0793832,-.0752401,.273565,.0492239,.0902297,-.0841851,.287735,.0590105,.102014,-.0936479,.301161,.0702021,.116054,-.103967,.317438,.0832001,.13191,-.114622,.334166,.0977951,.148239,-.125452,.348192,.113985,.165809,-.136453,.361094,.131928,.184616,-.147648,.373534,.151811,.207491,-.159607,.39101,.174476,.230106,-.171119,.402504,.198798,.257036,-.182906,.418032,.225796,.281172,-.193605,.425468,.254027,.312034,-.204771,.440379,.285713,.340402,-.214988,.445406,.319196,.370231,-.224711,.44968,.35537,.407105,-.233516,.460747,.393838,.439037,-.240801,.460624,.433747,.47781,-.24762,.465957,.477234,.510655,-.251823,.460054,.52044,.550584,-.255552,.459172,.567853,.585872,-.257036,.450311,.615943,.620466,-.257535,.437763,.667693,.660496,-.255248,.426639,.718988,.695578,-.251141,.409185,.772503,.732176,-.244718,.39015,.827023,.760782,-.236782,.362594,.885651,.79422,-.225923,.33711,.943756,.824521,-.213855,.308272,1.00874,.854964,-.197723,.278529,1.06764,.878065,-.179209,.246208,1.12836,.899834,-.157569,.21329,1.18318,.918815,-.133206,.181038,1.23161,.934934,-.106545,.146993,1.27644,.952115,-.0780574,.111175,1.31842,.96906,-.0478279,.0728553,1.35839,.985178,-.0160014,.032579,1.39697,1.00039,.0173126,-.0095256,1.43312,.00384146,-124311e-11,.0613583,7.78271e-8,.00390023,-314043e-10,.0622919,196626e-11,.00389971,-125622e-9,.0622632,787379e-11,.00389491,-282352e-9,.0620659,1778e-8,.00391618,-502512e-9,.0624687,320918e-10,.00392662,-784458e-9,.0625113,515573e-10,.00396053,-.00112907,.0628175,778668e-10,.00401911,-.00153821,.0633286,113811e-9,.00414994,-.0020208,.0646443,16445e-8,.00441223,-.00260007,.0673886,237734e-9,.00484427,-.0033097,.0716528,345929e-9,.00549109,-.00418966,.0774998,505987e-9,.00636293,-.00527331,.0844758,739208e-9,.00746566,-.00660428,.0921325,.00107347,.00876625,-.00818826,.0997067,.00153691,.0103125,-.0100811,.107433,.00217153,.0123309,-.0123643,.117088,.00303427,.0146274,-.0150007,.126438,.00416018,.0172295,-.0180531,.135672,.00561513,.0204248,-.0215962,.146244,.007478,.0241597,-.0256234,.157481,.00981046,.0284693,-.0302209,.169125,.0127148,.033445,-.0353333,.181659,.0162453,.0391251,-.0410845,.1944,.0205417,.0454721,-.0473451,.207082,.0256333,.0530983,-.0542858,.221656,.0317036,.0615356,-.0618384,.236036,.0388319,.0703363,-.0697631,.248398,.046974,.0810391,-.0784757,.263611,.0565246,.0920144,-.0873488,.275857,.0671724,.105584,-.0973652,.292555,.0798105,.119506,-.107271,.306333,.0935945,.134434,-.117608,.318888,.109106,.153399,-.128938,.337552,.127074,.171258,-.139944,.349955,.14643,.191059,-.151288,.361545,.168,.215069,-.163018,.378421,.192082,.237838,-.174226,.38879,.217838,.266965,-.186063,.405857,.246931,.292827,-.196909,.414146,.277505,.324352,-.207473,.426955,.310711,.354427,-.217713,.433429,.346794,.389854,-.227183,.443966,.385237,.420749,-.235131,.44471,.424955,.459597,-.242786,.451729,.468446,.495316,-.248767,.45072,.513422,.534903,-.253351,.450924,.560618,.572369,-.256277,.445266,.609677,.612383,-.2576,.438798,.660995,.644037,-.256931,.421693,.713807,.686749,-.254036,.4109,.767616,.719814,-.249785,.390151,.82533,.754719,-.244283,.367847,.888311,.792022,-.235076,.345013,.948177,.822404,-.225061,.316193,1.01661,.853084,-.211113,.287013,1.08075,.879871,-.19449,.255424,1.14501,.901655,-.174023,.222879,1.20203,.919957,-.1509,.18989,1.25698,.938412,-.124923,.15606,1.30588,.953471,-.0968139,.120512,1.3529,.970451,-.066734,.0828515,1.3986,.985522,-.034734,.0424458,1.44148,1.00099,-.00102222,678929e-9,1.48398,965494e-9,-6.27338e-7,.0306409,1.97672e-8,99168e-8,-158573e-10,.0314638,4.99803e-7,991068e-9,-634012e-10,.031363,200682e-11,974567e-9,-14144e-8,.03036,457312e-11,998079e-9,-252812e-9,.031496,860131e-11,.00102243,-396506e-9,.0319955,148288e-10,.00107877,-577593e-9,.0331376,249141e-10,.00121622,-816816e-9,.0359396,423011e-10,.0014455,-.00113761,.0399652,724613e-10,.00178791,-.00156959,.0450556,123929e-9,.00225668,-.00214064,.0508025,208531e-9,.00285627,-.00287655,.0568443,341969e-9,.0035991,-.00380271,.0630892,544158e-9,.00455524,-.00496264,.0702204,842423e-9,.00569143,-.0063793,.0773426,.00126704,.00716928,-.00813531,.0860839,.00186642,.00885307,-.0101946,.0944079,.00267014,.0109316,-.0126386,.103951,.00374033,.0133704,-.0154876,.113786,.0051304,.0161525,-.0187317,.123477,.00688858,.0194267,-.0224652,.133986,.00910557,.0230967,-.0265976,.143979,.0118074,.0273627,-.0312848,.154645,.0151266,.0323898,-.0365949,.166765,.0191791,.0379225,-.0422914,.177932,.0239236,.0447501,-.0487469,.19167,.0296568,.0519391,-.0556398,.203224,.0362924,.0599464,-.0631646,.215652,.0440585,.0702427,-.0714308,.232089,.0531619,.0806902,-.0800605,.245258,.0634564,.0923194,-.0892815,.258609,.0752481,.106938,-.09931,.276654,.0888914,.121238,-.109575,.289847,.104055,.138817,-.120461,.307566,.121266,.15595,-.131209,.320117,.139944,.178418,-.143049,.339677,.161591,.197875,-.154074,.349886,.184303,.224368,-.166307,.369352,.210669,.252213,-.178051,.386242,.238895,.277321,-.189335,.395294,.269182,.310332,-.200683,.412148,.302508,.338809,-.210856,.418266,.337264,.372678,-.220655,.428723,.374881,.405632,-.230053,.433887,.415656,.442293,-.237993,.439911,.457982,.477256,-.244897,.440175,.502831,.515592,-.250657,.441079,.550277,.550969,-.255459,.435219,.601102,.592883,-.257696,.432882,.651785,.629092,-.259894,.421054,.708961,.672033,-.258592,.41177,.763806,.709147,-.256525,.395267,.824249,.745367,-.254677,.375013,.8951,.784715,-.247892,.353906,.959317,.818107,-.240162,.327801,1.03153,.847895,-.229741,.298821,1.10601,.879603,-.213084,.269115,1.164,.902605,-.195242,.236606,1.22854,.922788,-.174505,.203442,1.29017,.944831,-.150169,.169594,1.34157,.959656,-.124099,.135909,1.3956,.972399,-.0960626,.0990563,1.45128,.986549,-.0657097,.0602348,1.50312,1.00013,-.0333558,.0186694,1.55364,619747e-11,-1e-7,.00778326,796756e-16,2.37499e-8,-9.99999e-8,282592e-10,1.14596e-10,100292e-11,-166369e-11,250354e-9,6.77492e-9,350752e-11,-637769e-11,357289e-9,6.31655e-8,826445e-11,-174689e-10,516179e-9,3.1851e-7,242481e-10,-450868e-10,.0010223,130577e-11,455631e-10,-89044e-9,.00144302,374587e-11,971222e-10,-178311e-9,.00241912,102584e-10,171403e-9,-313976e-9,.00354938,236481e-10,292747e-9,-520026e-9,.00513765,496014e-10,789827e-9,-.00118187,.0238621,139056e-9,.00114093,-.00171827,.0286691,244093e-9,.00176119,-.00249667,.0368565,420623e-9,.0022233,-.00333742,.0400469,65673e-8,.00343382,-.00481976,.0535751,.00109323,.00427602,-.00600755,.057099,.00155268,.00461435,-.00737637,.0551084,.00215031,.00695698,-.00971401,.0715767,.00316529,.00867619,-.0120943,.0793314,.00436995,.0106694,-.0148202,.0869391,.0058959,.0140351,-.0183501,.101572,.00798757,.0168939,-.022006,.11018,.0104233,.020197,-.0261568,.119041,.0134167,.0254702,-.0312778,.135404,.0173009,.0298384,-.0362469,.1437,.0215428,.035159,-.042237,.15512,.0268882,.0427685,-.0488711,.17128,.033235,.0494848,-.0557997,.181813,.0404443,.0592394,-.0635578,.198745,.0490043,.0681463,-.071838,.210497,.0588239,.0804753,-.0809297,.228864,.0702835,.0942205,-.0906488,.247008,.0834012,.106777,-.100216,.258812,.0975952,.124471,-.110827,.278617,.114162,.138389,-.121193,.287049,.131983,.159543,-.13253,.307151,.152541,.176432,-.143611,.31564,.174673,.201723,-.15548,.33538,.199842,.229721,-.167166,.355256,.227097,.250206,-.178238,.360047,.256014,.282118,-.189905,.378761,.28855,.312821,-.201033,.39181,.323348,.341482,-.211584,.397716,.360564,.377368,-.221314,.410141,.400004,.418229,-.230474,.423485,.442371,.444881,-.239443,.418874,.488796,.488899,-.245987,.427545,.535012,.520317,-.253948,.422147,.589678,.568566,-.256616,.42719,.637683,.599607,-.26376,.415114,.703363,.64222,-.268687,.408715,.771363,.685698,-.2694,.399722,.83574,.732327,-.266642,.388651,.897764,.769873,-.267712,.369198,.983312,.806733,-.263479,.346802,1.06222,.843466,-.254575,.321368,1.13477,.873008,-.242749,.29211,1.20712,.908438,-.22725,.262143,1.27465,.936321,-.207621,.228876,1.33203,.950353,-.187932,.19484,1.40439,.96442,-.165154,.163178,1.4732,.979856,-.139302,.127531,1.53574,.982561,-.11134,.0903457,1.59982,.996389,-.0808124,.0489007,1.6577]),64,64,r.RGBAFormat,r.FloatType,r.UVMapping,r.ClampToEdgeWrapping,r.ClampToEdgeWrapping,r.LinearFilter,r.NearestFilter,1),t=new s.DataTexture(new Float32Array([1,0,0,0,1,791421e-36,0,0,1,104392e-29,0,0,1,349405e-26,0,0,1,109923e-23,0,0,1,947414e-22,0,0,1,359627e-20,0,0,1,772053e-19,0,0,1,108799e-17,0,0,1,110655e-16,0,0,1,865818e-16,0,0,.999998,5.45037e-10,0,0,.999994,2.85095e-9,0,0,.999989,1.26931e-8,0,0,.999973,4.89938e-8,0,0,.999947,1.66347e-7,0,0,.999894,5.02694e-7,0,0,.999798,136532e-11,0,0,.999617,335898e-11,0,0,.999234,752126e-11,0,0,.998258,152586e-10,0,0,.99504,266207e-10,0,0,.980816,236802e-10,0,0,.967553,207684e-11,0,0,.966877,403733e-11,0,0,.965752,741174e-11,0,0,.96382,127746e-10,0,0,.960306,202792e-10,0,0,.953619,280232e-10,0,0,.941103,278816e-10,0,0,.926619,160221e-10,0,0,.920983,235164e-10,0,0,.912293,311924e-10,0,.0158731,.899277,348118e-10,0,.0476191,.880884,26041e-9,0,.0793651,.870399,338726e-10,0,.111111,.856138,392906e-10,0,.142857,.837436,372874e-10,0,.174603,.820973,392558e-10,0,.206349,.803583,434658e-10,0,.238095,.782168,40256e-9,0,.269841,.764107,448159e-10,0,.301587,.743092,457627e-10,0,.333333,.721626,455314e-10,0,.365079,.700375,477335e-10,0,.396825,.677334,461072e-10,0,.428571,.655702,484393e-10,0,.460317,.632059,464583e-10,0,.492064,.610125,483923e-10,0,.52381,.58653,464342e-10,0,.555556,.564508,477033e-10,0,.587302,.541405,459263e-10,0,.619048,.519556,46412e-9,0,.650794,.497292,448913e-10,0,.68254,.475898,445789e-10,0,.714286,.454722,433496e-10,0,.746032,.434042,423054e-10,0,.777778,.414126,413737e-10,0,.809524,.394387,397265e-10,0,.84127,.375841,390709e-10,0,.873016,.357219,369938e-10,0,.904762,.340084,365618e-10,0,.936508,.322714,342533e-10,0,.968254,.306974,339596e-10,0,1,1,101524e-23,0,0,1,10292e-22,0,0,1,130908e-23,0,0,1,473331e-23,0,0,1,625319e-22,0,0,1,107932e-20,0,0,1,163779e-19,0,0,1,203198e-18,0,0,1,204717e-17,0,0,.999999,168995e-16,0,0,.999998,1.15855e-10,0,0,.999996,6.6947e-10,0,0,.999991,3.30863e-9,0,0,.999983,1.41737e-8,0,0,.999968,5.32626e-8,0,0,.99994,1.77431e-7,0,0,.999891,5.28835e-7,0,0,.999797,142169e-11,0,0,.999617,347057e-11,0,0,.999227,77231e-10,0,0,.998239,155753e-10,0,0,.994937,268495e-10,0,0,.980225,213742e-10,0,0,.967549,21631e-10,0,0,.966865,417989e-11,0,0,.965739,763341e-11,0,0,.963794,130892e-10,0,0,.960244,206456e-10,0,0,.953495,282016e-10,0,148105e-9,.940876,271581e-10,0,.002454,.926569,164159e-10,0,.00867491,.920905,239521e-10,0,.01956,.912169,315127e-10,0,.035433,.899095,346626e-10,0,.056294,.882209,290223e-10,0,.0818191,.870272,342992e-10,0,.111259,.855977,394164e-10,0,.142857,.837431,372343e-10,0,.174603,.820826,396691e-10,0,.206349,.803408,435395e-10,0,.238095,.782838,419579e-10,0,.269841,.763941,450953e-10,0,.301587,.742904,455847e-10,0,.333333,.721463,458833e-10,0,.365079,.700197,477159e-10,0,.396825,.677501,470641e-10,0,.428571,.655527,484732e-10,0,.460317,.6324,476834e-10,0,.492064,.609964,484213e-10,0,.52381,.586839,475541e-10,0,.555556,.564353,476951e-10,0,.587302,.541589,467611e-10,0,.619048,.519413,463493e-10,0,.650794,.497337,453994e-10,0,.68254,.475797,445308e-10,0,.714286,.454659,435787e-10,0,.746032,.434065,424839e-10,0,.777778,.414018,41436e-9,0,.809524,.39455,401902e-10,0,.84127,.375742,390813e-10,0,.873016,.357501,377116e-10,0,.904762,.339996,36535e-9,0,.936508,.323069,351265e-10,0,.968254,.306897,339112e-10,0,1,1,10396e-19,0,0,1,104326e-20,0,0,1,110153e-20,0,0,1,144668e-20,0,0,1,34528e-19,0,0,1,175958e-19,0,0,1,12627e-17,0,0,1,936074e-18,0,0,1,645742e-17,0,0,.999998,401228e-16,0,0,.999997,2.22338e-10,0,0,.999995,1.0967e-9,0,0,.999991,4.82132e-9,0,0,.999981,1.89434e-8,0,0,.999967,6.67716e-8,0,0,.999938,2.12066e-7,0,0,.999886,6.0977e-7,0,0,.999792,159504e-11,0,0,.999608,381191e-11,0,0,.999209,833727e-11,0,0,.998179,165288e-10,0,0,.994605,274387e-10,0,0,.979468,167316e-10,0,0,.967529,242877e-11,0,0,.966836,461696e-11,0,0,.96569,830977e-11,0,0,.963706,140427e-10,0,244659e-11,.960063,217353e-10,0,760774e-9,.953113,286606e-10,0,.00367261,.940192,247691e-10,0,.00940263,.927731,195814e-10,0,.018333,.920669,252531e-10,0,.0306825,.911799,324277e-10,0,.0465556,.89857,340982e-10,0,.0659521,.883283,319622e-10,0,.0887677,.86989,35548e-9,0,.114784,.855483,397143e-10,0,.143618,.837987,391665e-10,0,.174606,.820546,411306e-10,0,.206349,.802878,436753e-10,0,.238095,.783402,444e-7,0,.269841,.763439,458726e-10,0,.301587,.742925,467097e-10,0,.333333,.721633,478887e-10,0,.365079,.69985,481251e-10,0,.396825,.67783,491811e-10,0,.428571,.655126,488199e-10,0,.460318,.632697,496025e-10,0,.492064,.609613,48829e-9,0,.52381,.587098,492754e-10,0,.555556,.564119,482625e-10,0,.587302,.541813,482807e-10,0,.619048,.519342,471552e-10,0,.650794,.497514,466765e-10,0,.68254,.475879,455582e-10,0,.714286,.454789,446007e-10,0,.746032,.434217,435382e-10,0,.777778,.414086,421753e-10,0,.809524,.394744,412093e-10,0,.84127,.375782,396634e-10,0,.873016,.357707,386419e-10,0,.904762,.340038,370345e-10,0,.936508,.323284,359725e-10,0,.968254,.306954,3436e-8,0,1,1,599567e-19,0,0,1,600497e-19,0,0,1,614839e-19,0,0,1,686641e-19,0,0,1,972658e-19,0,0,1,221271e-18,0,0,1,833195e-18,0,0,1,403601e-17,0,0,.999999,206001e-16,0,0,.999998,1.01739e-10,0,0,.999997,4.70132e-10,0,0,.999993,2.00436e-9,0,0,.999988,7.83682e-9,0,0,.999979,2.80338e-8,0,0,.999962,9.17033e-8,0,0,.999933,2.74514e-7,0,0,.999881,7.53201e-7,0,0,.999783,189826e-11,0,0,.999594,440279e-11,0,0,.999178,93898e-10,0,0,.998073,181265e-10,0,0,.993993,280487e-10,0,0,.979982,149422e-10,0,0,.968145,378481e-11,0,0,.966786,53771e-10,0,0,.965611,947508e-11,0,388934e-10,.963557,156616e-10,0,9693e-7,.959752,235144e-10,0,.00370329,.952461,291568e-10,0,.00868428,.940193,240102e-10,0,.0161889,.929042,231235e-10,0,.0263948,.920266,273968e-10,0,.0394088,.911178,337915e-10,0,.0552818,.897873,333629e-10,0,.0740138,.884053,351405e-10,0,.0955539,.869455,378034e-10,0,.119795,.854655,399378e-10,0,.14656,.838347,419108e-10,0,.175573,.820693,440831e-10,0,.206388,.802277,445599e-10,0,.238095,.783634,472691e-10,0,.269841,.763159,476984e-10,0,.301587,.742914,491487e-10,0,.333333,.721662,502312e-10,0,.365079,.699668,502817e-10,0,.396825,.677839,51406e-9,0,.428571,.655091,511095e-10,0,.460317,.632665,516067e-10,0,.492064,.609734,512255e-10,0,.52381,.587043,510263e-10,0,.555556,.564298,50565e-9,0,.587302,.541769,497951e-10,0,.619048,.519529,492698e-10,0,.650794,.497574,482066e-10,0,.68254,.476028,473689e-10,0,.714286,.454961,461941e-10,0,.746032,.434341,450618e-10,0,.777778,.414364,438355e-10,0,.809524,.394832,424196e-10,0,.84127,.376109,412563e-10,0,.873016,.35779,396226e-10,0,.904762,.340379,384886e-10,0,.936508,.323385,368214e-10,0,.968254,.307295,356636e-10,0,1,1,106465e-17,0,0,1,106555e-17,0,0,1,107966e-17,0,0,1,114601e-17,0,0,1,137123e-17,0,0,1,21243e-16,0,0,.999999,489653e-17,0,0,.999999,160283e-16,0,0,.999998,62269e-15,0,0,.999997,2.51859e-10,0,0,.999996,9.96192e-10,0,0,.999992,3.74531e-9,0,0,.999986,1.32022e-8,0,0,.999975,4.33315e-8,0,0,.999959,1.31956e-7,0,0,.999927,3.72249e-7,0,0,.999871,9.72461e-7,0,0,.999771,235343e-11,0,0,.999572,52768e-10,0,0,.999133,109237e-10,0,0,.997912,203675e-10,0,0,.993008,279396e-10,0,0,.980645,139604e-10,0,0,.970057,646596e-11,0,0,.966717,65089e-10,0,474145e-10,.965497,111863e-10,0,89544e-8,.96334,179857e-10,0,.0032647,.959294,259045e-10,0,.0075144,.951519,292327e-10,0,.0138734,.940517,249769e-10,0,.0224952,.93014,26803e-9,0,.0334828,.91972,303656e-10,0,.0468973,.910294,353323e-10,0,.0627703,.897701,351002e-10,0,.0811019,.884522,388104e-10,0,.10186,.869489,412932e-10,0,.124985,.853983,415781e-10,0,.150372,.838425,454066e-10,0,.177868,.820656,471624e-10,0,.207245,.801875,475243e-10,0,.238143,.783521,505621e-10,0,.269841,.763131,50721e-9,0,.301587,.74261,523293e-10,0,.333333,.72148,528699e-10,0,.365079,.699696,538677e-10,0,.396825,.677592,539255e-10,0,.428571,.65525,546367e-10,0,.460317,.632452,541348e-10,0,.492064,.609903,544976e-10,0,.52381,.586928,536201e-10,0,.555556,.564464,535185e-10,0,.587302,.541801,524949e-10,0,.619048,.519681,51812e-9,0,.650794,.497685,507687e-10,0,.68254,.47622,496243e-10,0,.714286,.455135,485714e-10,0,.746032,.4346,471847e-10,0,.777778,.414564,459294e-10,0,.809524,.395165,444705e-10,0,.84127,.376333,430772e-10,0,.873016,.358197,416229e-10,0,.904762,.34064,401019e-10,0,.936508,.323816,386623e-10,0,.968254,.307581,370933e-10,0,1,1,991541e-17,0,0,1,992077e-17,0,0,1,100041e-16,0,0,1,10385e-15,0,0,1,115777e-16,0,0,1,150215e-16,0,0,.999999,254738e-16,0,0,.999999,598822e-16,0,0,.999998,1.79597e-10,0,0,.999997,6.02367e-10,0,0,.999994,2.06835e-9,0,0,.99999,6.94952e-9,0,0,.999984,2.23363e-8,0,0,.999972,6.78578e-8,0,0,.999952,1.93571e-7,0,0,.999919,5.16594e-7,0,0,.99986,128739e-11,0,0,.999753,299298e-11,0,0,.999546,648258e-11,0,0,.999074,129985e-10,0,0,.997671,232176e-10,0,0,.991504,256701e-10,0,0,.981148,131141e-10,0,0,.971965,869048e-11,0,280182e-10,.966624,808301e-11,0,695475e-9,.965344,135235e-10,0,.00265522,.963048,210592e-10,0,.00622975,.958673,287473e-10,0,.0116234,.950262,281379e-10,0,.018976,.940836,271089e-10,0,.0283844,.930996,30926e-9,0,.0399151,.919848,348359e-10,0,.0536063,.909136,366092e-10,0,.0694793,.897554,384162e-10,0,.0875342,.884691,430971e-10,0,.107749,.869414,447803e-10,0,.130087,.853462,452858e-10,0,.154481,.838187,495769e-10,0,.180833,.820381,502709e-10,0,.209005,.801844,522713e-10,0,.238791,.783061,541505e-10,0,.269869,.763205,553712e-10,0,.301587,.742362,564909e-10,0,.333333,.721393,572646e-10,0,.365079,.699676,581012e-10,0,.396825,.677395,58096e-9,0,.428571,.655208,585766e-10,0,.460317,.632451,583602e-10,0,.492064,.609839,580234e-10,0,.52381,.587093,577161e-10,0,.555556,.564467,568447e-10,0,.587302,.542043,563166e-10,0,.619048,.519826,55156e-9,0,.650794,.497952,541682e-10,0,.68254,.476477,528971e-10,0,.714286,.455412,514952e-10,0,.746032,.434926,502222e-10,0,.777778,.4149,485779e-10,0,.809524,.395552,472242e-10,0,.84127,.376712,454891e-10,0,.873016,.358622,440924e-10,0,.904762,.341048,422984e-10,0,.936508,.324262,408582e-10,0,.968254,.308013,390839e-10,0,1,1,613913e-16,0,0,1,614145e-16,0,0,1,617708e-16,0,0,1,633717e-16,0,0,1,681648e-16,0,0,1,808291e-16,0,0,1,1.14608e-10,0,0,.999998,2.10507e-10,0,0,.999997,4.99595e-10,0,0,.999995,1.39897e-9,0,0,.999994,4.19818e-9,0,0,.999988,1.27042e-8,0,0,.999979,3.75153e-8,0,0,.999965,1.06206e-7,0,0,.999945,2.85381e-7,0,0,.999908,7.23611e-7,0,0,.999846,17255e-10,0,0,.999733,386104e-11,0,0,.999511,808493e-11,0,0,.998993,156884e-10,0,0,.997326,265538e-10,0,0,.989706,206466e-10,0,0,.981713,130756e-10,0,70005e-10,.973636,106473e-10,0,464797e-9,.966509,10194e-9,0,.00201743,.965149,165881e-10,0,.00497549,.962669,249147e-10,0,.00953262,.95786,317449e-10,0,.0158211,.949334,281045e-10,0,.0239343,.941041,303263e-10,0,.0339372,.931575,356754e-10,0,.0458738,.920102,397075e-10,0,.059772,.908002,384886e-10,0,.075645,.897269,43027e-9,0,.0934929,.884559,479925e-10,0,.113302,.869161,48246e-9,0,.135045,.853342,509505e-10,0,.158678,.837633,542846e-10,0,.184136,.820252,554139e-10,0,.211325,.801872,581412e-10,0,.240113,.782418,585535e-10,0,.270306,.7631,610923e-10,0,.301594,.742183,613678e-10,0,.333333,.721098,627275e-10,0,.365079,.699512,629413e-10,0,.396825,.677372,636351e-10,0,.428571,.655059,633555e-10,0,.460317,.632567,636513e-10,0,.492064,.609784,628965e-10,0,.52381,.587237,625546e-10,0,.555556,.564525,615825e-10,0,.587302,.542181,605048e-10,0,.619048,.520017,596329e-10,0,.650794,.498204,581516e-10,0,.68254,.476742,569186e-10,0,.714286,.455803,553833e-10,0,.746032,.435251,537807e-10,0,.777778,.415374,522025e-10,0,.809524,.395921,503421e-10,0,.84127,.377253,488211e-10,0,.873016,.359021,468234e-10,0,.904762,.341637,453269e-10,0,.936508,.3247,433014e-10,0,.968254,.308625,418007e-10,0,1,1,2.86798e-10,0,0,1,2.86877e-10,0,0,1,2.88094e-10,0,0,1,2.93506e-10,0,0,1,3.09262e-10,0,0,.999999,3.48593e-10,0,0,.999999,4.44582e-10,0,0,.999998,6.88591e-10,0,0,.999996,1.34391e-9,0,0,.999993,3.17438e-9,0,0,.999989,8.35609e-9,0,0,.999983,2.28677e-8,0,0,.999974,6.23361e-8,0,0,.999959,1.65225e-7,0,0,.999936,4.19983e-7,0,0,.999896,101546e-11,0,0,.99983,232376e-11,0,0,.999709,50156e-10,0,0,.999469,10167e-9,0,0,.998886,190775e-10,0,0,.996819,300511e-10,0,0,.988837,185092e-10,0,1.68222e-7,.982178,134622e-10,0,259622e-9,.975017,125961e-10,0,.00142595,.967101,13507e-9,0,.00382273,.964905,205003e-10,0,.00764164,.96218,29546e-9,0,.0130121,.956821,343738e-10,0,.0200253,.948829,305063e-10,0,.0287452,.941092,346487e-10,0,.039218,.931883,412061e-10,0,.0514748,.920211,444651e-10,0,.0655351,.907307,431252e-10,0,.0814082,.89684,490382e-10,0,.0990939,.884119,53334e-9,0,.118583,.869148,54114e-9,0,.139856,.853377,578536e-10,0,.162882,.836753,592285e-10,0,.187615,.820063,622787e-10,0,.213991,.801694,645492e-10,0,.241918,.782116,65353e-9,0,.271267,.762673,674344e-10,0,.301847,.742133,682788e-10,0,.333333,.720779,691959e-10,0,.365079,.699386,696817e-10,0,.396826,.67732,699583e-10,0,.428572,.654888,698447e-10,0,.460318,.632499,694063e-10,0,.492064,.609825,691612e-10,0,.52381,.587287,681576e-10,0,.555556,.564743,674138e-10,0,.587302,.542409,661617e-10,0,.619048,.520282,647785e-10,0,.650794,.498506,633836e-10,0,.68254,.477102,615905e-10,0,.714286,.456167,601013e-10,0,.746032,.435728,581457e-10,0,.777778,.415809,564215e-10,0,.809524,.396517,544997e-10,0,.84127,.377737,525061e-10,0,.873016,.359698,506831e-10,0,.904762,.342164,48568e-9,0,.936508,.325417,467826e-10,0,.968254,.309186,446736e-10,0,1,1,1.09018e-9,0,0,1,1.0904e-9,0,0,1,1.09393e-9,0,0,1,1.1095e-9,0,0,1,1.154e-9,0,0,1,1.26089e-9,0,0,.999999,1.5059e-9,0,0,.999997,2.07899e-9,0,0,.999994,3.48164e-9,0,0,.999993,7.05728e-9,0,0,.999987,1.63692e-8,0,0,.999981,4.06033e-8,0,0,.999969,1.0245e-7,0,0,.999953,2.55023e-7,0,0,.999925,6.1511e-7,0,0,.999881,142218e-11,0,0,.99981,313086e-11,0,0,.99968,653119e-11,0,0,.999418,12832e-9,0,0,.998748,232497e-10,0,0,.996066,329522e-10,0,0,.988379,179613e-10,0,108799e-9,.982567,143715e-10,0,921302e-9,.976097,148096e-10,0,.00280738,.968475,178905e-10,0,.00596622,.964606,253921e-10,0,.0105284,.961564,348623e-10,0,.0165848,.955517,357612e-10,0,.0242,.948381,343493e-10,0,.03342,.941095,405849e-10,0,.0442777,.931923,475394e-10,0,.0567958,.91996,484328e-10,0,.0709879,.907419,502146e-10,0,.086861,.89618,561654e-10,0,.104415,.88337,587612e-10,0,.123643,.869046,618057e-10,0,.144531,.853278,657392e-10,0,.167057,.836091,66303e-9,0,.191188,.819644,704445e-10,0,.216878,.801246,714071e-10,0,.244062,.782031,740093e-10,0,.272649,.762066,74685e-9,0,.302509,.741964,766647e-10,0,.333442,.720554,766328e-10,0,.365079,.699098,777857e-10,0,.396826,.677189,774633e-10,0,.428572,.65484,776235e-10,0,.460318,.632496,770316e-10,0,.492064,.609908,762669e-10,0,.52381,.587312,753972e-10,0,.555556,.564938,739994e-10,0,.587302,.542577,728382e-10,0,.619048,.52062,71112e-9,0,.650794,.498819,694004e-10,0,.68254,.477555,675575e-10,0,.714286,.456568,653449e-10,0,.746032,.436278,636068e-10,0,.777778,.41637,613466e-10,0,.809524,.397144,594177e-10,0,.84127,.378412,570987e-10,0,.873016,.360376,550419e-10,0,.904762,.342906,527422e-10,0,.936508,.326136,506544e-10,0,.968254,.30997,484307e-10,0,1,1,3.54014e-9,0,0,1,3.54073e-9,0,0,1,3.54972e-9,0,0,1,3.58929e-9,0,0,1,3.70093e-9,0,0,.999999,3.96194e-9,0,0,.999998,4.53352e-9,0,0,.999997,5.78828e-9,0,0,.999994,8.63812e-9,0,0,.999991,1.53622e-8,0,0,.999985,3.16356e-8,0,0,.999977,7.12781e-8,0,0,.999964,1.66725e-7,0,0,.999945,3.90501e-7,0,0,.999912,8.95622e-7,0,0,.999866,198428e-11,0,0,.999786,421038e-11,0,0,.999647,850239e-11,0,0,.999356,162059e-10,0,0,.998563,282652e-10,0,0,.994928,336309e-10,0,244244e-10,.987999,178458e-10,0,523891e-9,.982893,159162e-10,0,.00194729,.977044,178056e-10,0,.00451099,.969972,230624e-10,0,.00835132,.964237,313922e-10,0,.013561,.960791,406145e-10,0,.0202056,.954292,372796e-10,0,.0283321,.948052,403199e-10,0,.0379739,.940938,479537e-10,0,.0491551,.931689,545292e-10,0,.0618918,.91987,54038e-9,0,.0761941,.907665,589909e-10,0,.0920672,.895281,642651e-10,0,.109511,.882621,659707e-10,0,.12852,.86873,709973e-10,0,.149085,.853008,742221e-10,0,.171189,.835944,761754e-10,0,.194809,.818949,797052e-10,0,.21991,.800951,812434e-10,0,.246447,.781847,838075e-10,0,.274352,.761649,84501e-9,0,.303535,.74152,860258e-10,0,.333857,.720495,866233e-10,0,.365104,.698742,868326e-10,0,.396826,.677096,87133e-9,0,.428572,.654782,863497e-10,0,.460318,.632335,860206e-10,0,.492064,.610031,849337e-10,0,.52381,.587457,838279e-10,0,.555556,.56513,82309e-9,0,.587302,.542877,803542e-10,0,.619048,.5209,786928e-10,0,.650794,.499291,765171e-10,0,.68254,.477971,744753e-10,0,.714286,.457221,72209e-9,0,.746032,.436803,697448e-10,0,.777778,.417083,675333e-10,0,.809524,.397749,648058e-10,0,.84127,.379177,625759e-10,0,.873016,.361061,598584e-10,0,.904762,.343713,575797e-10,0,.936508,.326894,549999e-10,0,.968254,.310816,527482e-10,0,1,1,1.0153e-8,0,0,1,1.01544e-8,0,0,1,1.01751e-8,0,0,1,1.02662e-8,0,0,1,1.0521e-8,0,0,.999999,1.11049e-8,0,0,.999999,1.23408e-8,0,0,.999996,1.4924e-8,0,0,.999992,2.04471e-8,0,0,.999989,3.26539e-8,0,0,.99998,6.03559e-8,0,0,.999971,1.23936e-7,0,0,.999955,2.69058e-7,0,0,.999933,5.93604e-7,0,0,.999901,129633e-11,0,0,.999847,275621e-11,0,0,.999761,564494e-11,0,0,.999607,110485e-10,0,0,.999282,204388e-10,0,0,.99831,341084e-10,0,2.2038e-7,.993288,294949e-10,0,242388e-9,.987855,192736e-10,0,.0012503,.983167,182383e-10,0,.0032745,.977908,218633e-10,0,.00646321,.971194,290662e-10,0,.0109133,.963867,386401e-10,0,.0166927,.95982,462827e-10,0,.0238494,.953497,420705e-10,0,.0324178,.947621,477743e-10,0,.0424225,.940611,568258e-10,0,.0538808,.931174,618061e-10,0,.0668047,.919919,627098e-10,0,.0812014,.907856,694714e-10,0,.0970745,.894509,735008e-10,0,.114424,.881954,763369e-10,0,.133246,.868309,821896e-10,0,.153534,.852511,83769e-9,0,.175275,.835821,881615e-10,0,.198453,.817981,896368e-10,0,.223042,.800504,930906e-10,0,.249009,.78141,945056e-10,0,.276304,.761427,963605e-10,0,.304862,.74094,968088e-10,0,.334584,.720233,981481e-10,0,.365322,.698592,979122e-10,0,.396826,.676763,981057e-10,0,.428571,.654808,973956e-10,0,.460318,.632326,962619e-10,0,.492064,.610049,952996e-10,0,.52381,.58763,933334e-10,0,.555556,.565261,917573e-10,0,.587302,.543244,896636e-10,0,.619048,.521273,873304e-10,0,.650794,.499818,852648e-10,0,.68254,.478536,823961e-10,0,.714286,.457826,79939e-9,0,.746032,.437549,77126e-9,0,.777778,.41776,743043e-10,0,.809524,.39863,716426e-10,0,.84127,.379954,686456e-10,0,.873016,.362025,660514e-10,0,.904762,.344581,630755e-10,0,.936508,.327909,605439e-10,0,.968254,.311736,576345e-10,0,1,1,2.63344e-8,0,0,1,2.63373e-8,0,0,1,2.63815e-8,0,0,1,2.65753e-8,0,0,1,2.71132e-8,0,0,.999999,2.83279e-8,0,0,.999997,3.0833e-8,0,0,.999995,3.58711e-8,0,0,.999992,4.61266e-8,0,0,.999985,6.7574e-8,0,0,.999977,1.1358e-7,0,0,.999966,2.13657e-7,0,0,.999948,4.31151e-7,0,0,.999923,8.96656e-7,0,0,.999884,186603e-11,0,0,.999826,381115e-11,0,0,.999732,754184e-11,0,0,.999561,143192e-10,0,0,.999191,257061e-10,0,0,.997955,405724e-10,0,744132e-10,.992228,276537e-10,0,716477e-9,.987638,208885e-10,0,.0022524,.983395,215226e-10,0,.00484816,.978614,270795e-10,0,.00860962,.972389,365282e-10,0,.0136083,.964392,474747e-10,0,.0198941,.95861,509141e-10,0,.0275023,.952806,48963e-9,0,.0364584,.94712,571119e-10,0,.04678,.940104,671704e-10,0,.0584799,.930398,687586e-10,0,.0715665,.919866,738161e-10,0,.086045,.907853,813235e-10,0,.101918,.894078,834582e-10,0,.119186,.881177,892093e-10,0,.137845,.867575,944548e-10,0,.157891,.852107,969607e-10,0,.179316,.835502,101456e-9,0,.202106,.81756,103256e-9,0,.226243,.79984,106954e-9,0,.251704,.780998,108066e-9,0,.278451,.761132,110111e-9,0,.306436,.740429,110459e-9,0,.335586,.719836,111219e-9,0,.365796,.698467,11145e-8,0,.3969,.676446,110393e-9,0,.428571,.654635,110035e-9,0,.460318,.632411,108548e-9,0,.492064,.609986,106963e-9,0,.52381,.587872,105238e-9,0,.555556,.565528,102665e-9,0,.587302,.543563,100543e-9,0,.619048,.52176,976182e-10,0,.650794,.500188,947099e-10,0,.68254,.479204,919929e-10,0,.714286,.458413,886139e-10,0,.746032,.438314,857839e-10,0,.777778,.418573,82411e-9,0,.809524,.39947,792211e-10,0,.84127,.380892,759546e-10,0,.873016,.362953,727571e-10,0,.904762,.345601,695738e-10,0,.936508,.328895,664907e-10,0,.968254,.312808,634277e-10,0,1,1,6.28647e-8,0,0,1,6.28705e-8,0,0,1,6.29587e-8,0,0,1,6.33441e-8,0,0,.999999,6.44087e-8,0,0,.999998,6.67856e-8,0,0,.999997,7.15889e-8,0,0,.999995,8.09577e-8,0,0,.999989,9.92764e-8,0,0,.999983,1.35834e-7,0,0,.999974,2.10482e-7,0,0,.999959,3.65215e-7,0,0,.999939,6.86693e-7,0,0,.999911,13472e-10,0,0,.999868,26731e-10,0,0,.999804,524756e-11,0,0,.9997,100403e-10,0,0,.99951,185019e-10,0,0,.999078,322036e-10,0,620676e-11,.997428,470002e-10,0,341552e-9,.99162,287123e-10,0,.00143727,.987479,234706e-10,0,.00349201,.983582,260083e-10,0,.0066242,.979186,337927e-10,0,.0109113,.97325,454689e-10,0,.0164064,.965221,573759e-10,0,.0231463,.957262,544114e-10,0,.0311571,.952211,587006e-10,0,.0404572,.946631,692256e-10,0,.0510592,.939391,787819e-10,0,.0629723,.929795,792368e-10,0,.0762025,.91965,875075e-10,0,.090753,.907737,950903e-10,0,.106626,.893899,972963e-10,0,.123822,.880239,10459e-8,0,.142337,.866562,107689e-9,0,.16217,.85164,113081e-9,0,.183314,.835021,116636e-9,0,.20576,.817311,120074e-9,0,.229496,.798845,121921e-9,0,.254502,.780479,12475e-8,0,.280753,.760694,125255e-9,0,.308212,.740142,126719e-9,0,.336825,.719248,12636e-8,0,.366517,.698209,126712e-9,0,.397167,.676398,125769e-9,0,.428578,.654378,124432e-9,0,.460318,.632484,123272e-9,0,.492064,.610113,12085e-8,0,.52381,.587931,118411e-9,0,.555556,.565872,11569e-8,0,.587302,.543814,112521e-9,0,.619048,.522265,109737e-9,0,.650794,.500835,106228e-9,0,.68254,.479818,102591e-9,0,.714286,.459258,991288e-10,0,.746032,.439061,952325e-10,0,.777778,.419552,91895e-9,0,.809524,.400399,879051e-10,0,.84127,.381976,844775e-10,0,.873016,.364009,806316e-10,0,.904762,.346761,771848e-10,0,.936508,.330049,735429e-10,0,.968254,.314018,702103e-10,0,1,1,1.39968e-7,0,0,1,1.39979e-7,0,0,1,1.40145e-7,0,0,1,1.4087e-7,0,0,.999999,1.42865e-7,0,0,.999998,1.47279e-7,0,0,.999997,1.56057e-7,0,0,.999992,1.7276e-7,0,0,.999989,2.04352e-7,0,0,.99998,2.6494e-7,0,0,.999969,3.83435e-7,0,0,.999953,6.18641e-7,0,0,.999929,108755e-11,0,0,.999898,201497e-11,0,0,.999849,381346e-11,0,0,.999778,719815e-11,0,0,.999661,133215e-10,0,0,.999451,238313e-10,0,0,.998936,401343e-10,0,113724e-9,.99662,517346e-10,0,820171e-9,.991094,304323e-10,0,.00238143,.987487,281757e-10,0,.00493527,.983731,320048e-10,0,.00856859,.979647,423905e-10,0,.0133393,.973837,562935e-10,0,.0192863,.96584,677442e-10,0,.0264369,.956309,623073e-10,0,.03481,.951523,704131e-10,0,.0444184,.946003,836594e-10,0,.0552713,.938454,911736e-10,0,.0673749,.929279,938264e-10,0,.0807329,.919239,103754e-9,0,.0953479,.907293,109928e-9,0,.111221,.893936,115257e-9,0,.128352,.879674,122265e-9,0,.14674,.865668,125733e-9,0,.166382,.850998,132305e-9,0,.187276,.834498,134844e-9,0,.209413,.816903,139276e-9,0,.232786,.798235,140984e-9,0,.257382,.779724,14378e-8,0,.283181,.760251,144623e-9,0,.310156,.739808,145228e-9,0,.338269,.718762,14539e-8,0,.367461,.697815,144432e-9,0,.397646,.67631,143893e-9,0,.428685,.654278,141846e-9,0,.460318,.632347,13935e-8,0,.492064,.610296,137138e-9,0,.52381,.588039,133806e-9,0,.555556,.566218,130755e-9,0,.587302,.544346,127128e-9,0,.619048,.522701,123002e-9,0,.650794,.501542,119443e-9,0,.68254,.480508,115055e-9,0,.714286,.460092,111032e-9,0,.746032,.440021,106635e-9,0,.777778,.420446,102162e-9,0,.809524,.401512,98184e-9,0,.84127,.38299,936497e-10,0,.873016,.365232,89813e-9,0,.904762,.347865,853073e-10,0,.936508,.331342,817068e-10,0,.968254,.315202,773818e-10,0,1,1,2.9368e-7,0,0,1,2.937e-7,0,0,1,2.93998e-7,0,0,1,2.95298e-7,0,0,.999999,2.98865e-7,0,0,.999998,3.067e-7,0,0,.999995,3.22082e-7,0,0,.999992,3.50767e-7,0,0,.999986,4.03538e-7,0,0,.999976,5.01372e-7,0,0,.999964,6.8562e-7,0,0,.999945,10374e-10,0,0,.999919,171269e-11,0,0,.999882,300175e-11,0,0,.999829,542144e-11,0,0,.999749,984182e-11,0,0,.99962,176213e-10,0,0,.999382,305995e-10,0,138418e-10,.998751,496686e-10,0,389844e-9,.995344,510733e-10,0,.00150343,.990768,345829e-10,0,.00352451,.987464,342841e-10,0,.00655379,.983846,399072e-10,0,.0106554,.980007,533219e-10,0,.0158723,.974494,696992e-10,0,.0222333,.96622,776754e-10,0,.029758,.956273,747718e-10,0,.0384596,.950952,864611e-10,0,.0483473,.945215,100464e-9,0,.0594266,.937287,103729e-9,0,.0717019,.928649,111665e-9,0,.0851752,.918791,12353e-8,0,.0998479,.906685,127115e-9,0,.115721,.893706,13628e-8,0,.132794,.879248,142427e-9,0,.151067,.864685,148091e-9,0,.170538,.850032,153517e-9,0,.191204,.833853,157322e-9,0,.213063,.816353,161086e-9,0,.236107,.797834,164111e-9,0,.260329,.778831,165446e-9,0,.285714,.759756,167492e-9,0,.312243,.739419,166928e-9,0,.339887,.718491,167e-6,0,.368604,.697392,165674e-9,0,.398329,.676102,163815e-9,0,.428961,.654243,162003e-9,0,.460331,.632176,158831e-9,0,.492064,.610407,155463e-9,0,.52381,.588394,152062e-9,0,.555556,.56645,147665e-9,0,.587302,.5449,14375e-8,0,.619048,.523276,138905e-9,0,.650794,.502179,134189e-9,0,.68254,.481359,129392e-9,0,.714286,.46092,124556e-9,0,.746032,.441084,11957e-8,0,.777778,.421517,114652e-9,0,.809524,.402721,109688e-9,0,.84127,.384222,104667e-9,0,.873016,.366534,999633e-10,0,.904762,.349205,950177e-10,0,.936508,.332702,907301e-10,0,.968254,.316599,859769e-10,0,1,1,5.85473e-7,0,0,1,5.85507e-7,0,0,1,5.8602e-7,0,0,.999999,5.88259e-7,0,0,.999999,5.94381e-7,0,0,.999998,6.07754e-7,0,0,.999995,6.33729e-7,0,0,.99999,6.8137e-7,0,0,.999984,7.67003e-7,0,0,.999973,9.21212e-7,0,0,.999959,120218e-11,0,0,.999936,172024e-11,0,0,.999907,268088e-11,0,0,.999866,445512e-11,0,0,.999806,768481e-11,0,0,.999716,1342e-8,0,0,.999576,232473e-10,0,0,.9993,391694e-10,0,129917e-9,.998498,608429e-10,0,845035e-9,.994132,489743e-10,0,.00237616,.99031,384644e-10,0,.00484456,.987409,421768e-10,0,.00832472,.983981,504854e-10,0,.0128643,.980268,671028e-10,0,.0184947,.974875,852749e-10,0,.025237,.966063,85531e-9,0,.0331046,.956779,900588e-10,0,.0421067,.950259,10577e-8,0,.0522487,.944239,119458e-9,0,.0635343,.936341,122164e-9,0,.0759654,.928047,134929e-9,0,.0895434,.918065,145544e-9,0,.104269,.906267,150531e-9,0,.120142,.893419,161652e-9,0,.137163,.878758,16593e-8,0,.15533,.863699,174014e-9,0,.174645,.848876,177877e-9,0,.195106,.833032,184049e-9,0,.21671,.815557,186088e-9,0,.239454,.797323,19054e-8,0,.263332,.778124,191765e-9,0,.288336,.758929,192535e-9,0,.314451,.738979,192688e-9,0,.341658,.718213,191522e-9,0,.369924,.696947,190491e-9,0,.399202,.675807,187913e-9,0,.429416,.654147,184451e-9,0,.460447,.63229,181442e-9,0,.492064,.610499,177139e-9,0,.523809,.588747,172596e-9,0,.555555,.566783,167457e-9,0,.587301,.545359,162518e-9,0,.619048,.523984,156818e-9,0,.650794,.502917,151884e-9,0,.68254,.482294,145514e-9,0,.714286,.461945,140199e-9,0,.746032,.442133,134101e-9,0,.777778,.422705,128374e-9,0,.809524,.403916,122996e-9,0,.84127,.38554,116808e-9,0,.873016,.367909,111973e-9,0,.904762,.350651,105938e-9,0,.936508,.334208,101355e-9,0,.968254,.318123,957629e-10,0,1,1,111633e-11,0,0,1,111639e-11,0,0,1,111725e-11,0,0,1,112096e-11,0,0,.999999,11311e-10,0,0,.999997,115315e-11,0,0,.999995,11956e-10,0,0,.999989,127239e-11,0,0,.999981,140772e-11,0,0,.999969,164541e-11,0,0,.999952,206607e-11,0,0,.999928,281783e-11,0,0,.999895,416835e-11,0,0,.999848,658728e-11,0,0,.999781,108648e-10,0,0,.999682,182579e-10,0,0,.999523,306003e-10,0,159122e-10,.999205,499862e-10,0,391184e-9,.998131,73306e-9,0,.00147534,.993334,513229e-10,0,.0034227,.99016,467783e-10,0,.00632232,.987321,523413e-10,0,.0102295,.984099,64267e-9,0,.0151794,.980432,843042e-10,0,.0211947,.974976,102819e-9,0,.0282899,.966429,996234e-10,0,.0364739,.957633,111074e-9,0,.0457522,.949422,128644e-9,0,.0561278,.943045,140076e-9,0,.0676023,.935448,146349e-9,0,.0801762,.927225,161854e-9,0,.0938499,.917033,169135e-9,0,.108623,.905762,179987e-9,0,.124496,.892879,189832e-9,0,.141469,.878435,195881e-9,0,.159541,.863114,20466e-8,0,.178713,.84776,209473e-9,0,.198985,.832084,214861e-9,0,.220355,.814915,217695e-9,0,.242823,.796711,220313e-9,0,.266385,.777603,22313e-8,0,.291036,.757991,222471e-9,0,.316767,.738371,222869e-9,0,.343563,.717872,221243e-9,0,.371402,.696619,218089e-9,0,.400248,.675379,21562e-8,0,.430047,.65411,21169e-8,0,.460709,.63241,206947e-9,0,.492079,.61046,201709e-9,0,.52381,.58903,196753e-9,0,.555556,.567267,189637e-9,0,.587302,.545886,184735e-9,0,.619048,.524714,177257e-9,0,.650794,.503789,171424e-9,0,.68254,.483204,164688e-9,0,.714286,.462976,157172e-9,0,.746032,.443294,151341e-9,0,.777778,.423988,143737e-9,0,.809524,.405325,138098e-9,0,.84127,.386981,130698e-9,0,.873016,.369436,125276e-9,0,.904762,.35219,118349e-9,0,.936508,.335804,11312e-8,0,.968254,.319749,106687e-9,0,1,1,204685e-11,0,0,1,204694e-11,0,0,1,204831e-11,0,0,.999999,205428e-11,0,0,.999999,207056e-11,0,0,.999997,210581e-11,0,0,.999993,21732e-10,0,0,.999987,229365e-11,0,0,.999979,250243e-11,0,0,.999965,286127e-11,0,0,.999947,348028e-11,0,0,.999918,455588e-11,0,0,.999881,643303e-11,0,0,.999828,970064e-11,0,0,.999753,153233e-10,0,0,.999642,24793e-9,0,0,.999464,402032e-10,0,122947e-9,.999089,635852e-10,0,807414e-9,.997567,857026e-10,0,.00227206,.992903,594912e-10,0,.00462812,.990011,578515e-10,0,.00794162,.987192,65399e-9,0,.0122534,.98418,819675e-10,0,.0175888,.980491,105514e-9,0,.0239635,.974779,121532e-9,0,.031387,.96675,119144e-9,0,.0398644,.958248,136125e-9,0,.0493982,.948884,155408e-9,0,.0599896,.941673,162281e-9,0,.0716382,.934521,176754e-9,0,.0843437,.926205,192873e-9,0,.0981056,.916089,200038e-9,0,.112923,.904963,213624e-9,0,.128796,.892089,221834e-9,0,.145725,.878028,232619e-9,0,.163709,.86249,238632e-9,0,.182749,.846587,247002e-9,0,.202847,.830988,250702e-9,0,.224001,.814165,255562e-9,0,.246214,.796135,257505e-9,0,.269482,.777052,258625e-9,0,.293805,.757201,258398e-9,0,.319176,.737655,256714e-9,0,.345587,.717477,255187e-9,0,.373021,.696433,251792e-9,0,.401454,.675084,247223e-9,0,.430844,.653907,242213e-9,0,.461125,.632561,237397e-9,0,.492187,.610658,229313e-9,0,.52381,.589322,224402e-9,0,.555556,.567857,216116e-9,0,.587302,.54652,209124e-9,0,.619048,.525433,201601e-9,0,.650794,.504679,192957e-9,0,.68254,.484203,186052e-9,0,.714286,.464203,177672e-9,0,.746032,.444549,170005e-9,0,.777778,.425346,162401e-9,0,.809524,.406706,1544e-7,0,.84127,.388576,147437e-9,0,.873016,.37094,139493e-9,0,.904762,.353996,133219e-9,0,.936508,.337391,125573e-9,0,.968254,.321648,119867e-9,0,1,1,362511e-11,0,0,1,362525e-11,0,0,1,362739e-11,0,0,.999999,363673e-11,0,0,.999998,366214e-11,0,0,.999996,371698e-11,0,0,.999992,382116e-11,0,0,.999986,400554e-11,0,0,.999976,432058e-11,0,0,.999961,485194e-11,0,0,.999938,574808e-11,0,0,.999908,726643e-11,0,0,.999865,984707e-11,0,0,.999807,142217e-10,0,0,.999723,215581e-10,0,0,.999602,336114e-10,0,119113e-10,.999398,527353e-10,0,355813e-9,.998946,805809e-10,0,.00137768,.996647,942908e-10,0,.00322469,.992298,668733e-10,0,.00597897,.989802,716564e-10,0,.00968903,.987019,821355e-10,0,.0143845,.984219,104555e-9,0,.0200831,.980425,131245e-9,0,.0267948,.974241,139613e-9,0,.034525,.967006,145931e-9,0,.0432757,.95893,167153e-9,0,.0530471,.949157,188146e-9,0,.0638386,.94062,194625e-9,0,.0756487,.933509,213721e-9,0,.0884762,.925088,229616e-9,0,.10232,.915178,239638e-9,0,.117178,.904093,254814e-9,0,.133051,.891337,263685e-9,0,.149939,.877326,274789e-9,0,.167841,.861794,280534e-9,0,.18676,.845758,289534e-9,0,.206696,.829792,294446e-9,0,.22765,.813037,296877e-9,0,.249625,.795285,300217e-9,0,.27262,.776323,299826e-9,0,.296636,.756673,299787e-9,0,.321671,.736856,297867e-9,0,.347718,.716883,294052e-9,0,.374768,.696089,289462e-9,0,.402804,.67505,285212e-9,0,.431796,.653509,27653e-8,0,.461695,.63258,271759e-9,0,.49242,.61104,262811e-9,0,.523822,.589567,255151e-9,0,.555556,.568322,246434e-9,0,.587302,.547235,237061e-9,0,.619048,.52616,228343e-9,0,.650794,.505716,219236e-9,0,.68254,.485274,209595e-9,0,.714286,.465411,201011e-9,0,.746032,.445854,19109e-8,0,.777778,.426911,182897e-9,0,.809524,.408222,173569e-9,0,.84127,.390307,165496e-9,0,.873016,.372624,156799e-9,0,.904762,.355804,14917e-8,0,.936508,.33924,140907e-9,0,.968254,.323534,134062e-9,0,1,1,622487e-11,0,0,1,62251e-10,0,0,1,622837e-11,0,0,.999999,624259e-11,0,0,.999998,628127e-11,0,0,.999996,636451e-11,0,0,.999991,65218e-10,0,0,.999984,679782e-11,0,0,.999973,726361e-11,0,0,.999955,803644e-11,0,0,.999931,931397e-11,0,0,.999896,114299e-10,0,0,.999847,149402e-10,0,0,.999784,207461e-10,0,0,.999692,302493e-10,0,0,.999554,454957e-10,0,997275e-10,.999326,690762e-10,0,724813e-9,.998757,101605e-9,0,.0020972,.995367,958745e-10,0,.00432324,.99209,832808e-10,0,.00746347,.989517,887601e-10,0,.0115534,.987008,10564e-8,0,.0166134,.98421,133179e-9,0,.0226552,.98021,161746e-9,0,.0296838,.973676,161821e-9,0,.0377016,.967052,178635e-9,0,.0467079,.959385,206765e-9,0,.0567013,.949461,22476e-8,0,.0676796,.939578,23574e-8,0,.0796403,.932416,25893e-8,0,.0925812,.923759,271228e-9,0,.106501,.914223,289165e-9,0,.121397,.902942,301156e-9,0,.13727,.890419,313852e-9,0,.15412,.876639,324408e-9,0,.171946,.861316,33249e-8,0,.190751,.84496,338497e-9,0,.210537,.828427,345861e-9,0,.231305,.811871,347863e-9,0,.253057,.794397,350225e-9,0,.275797,.775726,349915e-9,0,.299525,.75617,347297e-9,0,.324242,.736091,344232e-9,0,.349947,.716213,340835e-9,0,.376633,.695736,332369e-9,0,.404289,.674961,327943e-9,0,.432895,.653518,318533e-9,0,.462415,.632574,310391e-9,0,.492788,.61134,300755e-9,0,.523909,.590017,290506e-9,0,.555556,.568752,280446e-9,0,.587302,.548061,269902e-9,0,.619048,.52711,258815e-9,0,.650794,.506682,248481e-9,0,.68254,.486524,237141e-9,0,.714286,.466812,226872e-9,0,.746032,.44732,216037e-9,0,.777778,.428473,205629e-9,0,.809524,.409921,195691e-9,0,.84127,.392028,185457e-9,0,.873016,.374606,176436e-9,0,.904762,.357601,166508e-9,0,.936508,.341348,158385e-9,0,.968254,.32542,149203e-9,0,1,1,103967e-10,0,0,1,10397e-9,0,0,1,104019e-10,0,0,.999999,104231e-10,0,0,.999998,104806e-10,0,0,.999995,106042e-10,0,0,.999991,108366e-10,0,0,.999982,112415e-10,0,0,.999968,119174e-10,0,0,.99995,130227e-10,0,0,.999922,148176e-10,0,0,.999884,177303e-10,0,0,.99983,224564e-10,0,0,.999758,300966e-10,0,0,.999654,423193e-10,0,549083e-11,.999503,614848e-10,0,296087e-9,.999237,903576e-10,0,.00123144,.998491,1271e-7,0,.00295954,.994594,107754e-9,0,.00555829,.99178,103025e-9,0,.00907209,.989265,11154e-8,0,.0135257,.986998,136296e-9,0,.0189327,.984137,169154e-9,0,.0252993,.979798,196671e-9,0,.0326272,.97337,196678e-9,0,.0409157,.967239,223121e-9,0,.0501623,.959543,253809e-9,0,.0603638,.949466,265972e-9,0,.0715171,.939074,288372e-9,0,.0836187,.931118,310983e-9,0,.0966657,.922525,325561e-9,0,.110656,.912983,345725e-9,0,.125588,.901617,3556e-7,0,.141461,.889487,374012e-9,0,.158275,.875787,383445e-9,0,.176031,.860654,393972e-9,0,.19473,.844417,400311e-9,0,.214374,.82741,405004e-9,0,.234967,.810545,407378e-9,0,.256512,.793312,407351e-9,0,.279011,.774847,406563e-9,0,.302468,.755621,404903e-9,0,.326887,.735511,397486e-9,0,.352266,.715435,39357e-8,0,.378605,.695403,384739e-9,0,.405897,.674681,376108e-9,0,.43413,.65359,365997e-9,0,.463277,.632471,354957e-9,0,.493295,.61151,343593e-9,0,.524106,.59064,331841e-9,0,.555561,.569386,318891e-9,0,.587302,.548785,3072e-7,0,.619048,.528146,29361e-8,0,.650794,.507872,281709e-9,0,.68254,.487805,268627e-9,0,.714286,.468196,255887e-9,0,.746032,.448922,243997e-9,0,.777778,.430093,231662e-9,0,.809524,.411845,220339e-9,0,.84127,.393808,208694e-9,0,.873016,.376615,198045e-9,0,.904762,.359655,187375e-9,0,.936508,.343452,177371e-9,0,.968254,.32765,167525e-9,0,1,1,169351e-10,0,0,1,169356e-10,0,0,1,169427e-10,0,0,.999999,169736e-10,0,0,.999998,170575e-10,0,0,.999995,172372e-10,0,0,.99999,175739e-10,0,0,.999979,181568e-10,0,0,.999966,191206e-10,0,0,.999944,20677e-9,0,0,.999912,231644e-10,0,0,.999869,271268e-10,0,0,.999811,334272e-10,0,0,.99973,433979e-10,0,0,.999617,590083e-10,0,680315e-10,.999445,829497e-10,0,612796e-9,.999138,118019e-9,0,.00187408,.998095,156712e-9,0,.00395791,.993919,125054e-9,0,.00692144,.991333,126091e-9,0,.0107962,.989226,144912e-9,0,.0155986,.986954,175737e-9,0,.0213364,.983982,213883e-9,0,.0280114,.979128,234526e-9,0,.0356226,.973327,243725e-9,0,.0441668,.967416,2773e-7,0,.0536399,.959729,308799e-9,0,.0640376,.949758,322447e-9,0,.0753554,.939173,350021e-9,0,.0875893,.9296,370089e-9,0,.100736,.921181,391365e-9,0,.114793,.91164,413636e-9,0,.129759,.900435,427068e-9,0,.145632,.888183,441046e-9,0,.162412,.874772,454968e-9,0,.180101,.859566,461882e-9,0,.1987,.843579,471556e-9,0,.218213,.826453,474335e-9,0,.238641,.809164,477078e-9,0,.259989,.792179,47755e-8,0,.282262,.773866,472573e-9,0,.305464,.754944,469765e-9,0,.329599,.735133,462371e-9,0,.35467,.714858,453674e-9,0,.380678,.694829,443888e-9,0,.407622,.674453,432052e-9,0,.435493,.653685,420315e-9,0,.464275,.632666,406829e-9,0,.493938,.611676,392234e-9,0,.524422,.591193,379208e-9,0,.555624,.570145,36319e-8,0,.587302,.549566,349111e-9,0,.619048,.529278,334166e-9,0,.650794,.509026,318456e-9,0,.68254,.489186,30449e-8,0,.714286,.469662,289051e-9,0,.746032,.450691,275494e-9,0,.777778,.431841,261437e-9,0,.809524,.413752,247846e-9,0,.84127,.395951,235085e-9,0,.873016,.378633,222245e-9,0,.904762,.36194,210533e-9,0,.936508,.345599,198494e-9,0,.968254,.329999,188133e-9,0,1,1,269663e-10,0,0,1,26967e-9,0,0,1,269772e-10,0,0,.999999,270214e-10,0,0,.999998,271415e-10,0,0,.999994,27398e-9,0,0,.999988,278771e-10,0,0,.999977,287019e-10,0,0,.999961,300544e-10,0,0,.999937,322138e-10,0,0,.999904,356163e-10,0,0,.999854,409465e-10,0,0,.99979,492651e-10,0,0,.999699,621722e-10,0,8.8288e-7,.999572,819715e-10,0,223369e-9,.999381,111689e-9,0,.00105414,.999016,153862e-9,0,.0026493,.997437,187667e-9,0,.00508608,.993545,155672e-9,0,.00840554,.991135,161455e-9,0,.012629,.989157,188241e-9,0,.0177661,.986874,226229e-9,0,.0238198,.983714,268668e-9,0,.0307887,.978301,277109e-9,0,.0386688,.973227,303446e-9,0,.0474554,.967317,341851e-9,0,.0571428,.959477,370885e-9,0,.0677256,.950012,392753e-9,0,.0791988,.939484,42781e-8,0,.0915576,.928135,443866e-9,0,.104798,.919819,472959e-9,0,.118918,.910049,491551e-9,0,.133915,.899181,512616e-9,0,.149788,.886881,523563e-9,0,.166537,.87359,540183e-9,0,.184164,.858613,547386e-9,0,.202669,.842809,554809e-9,0,.222056,.825727,558316e-9,0,.242329,.808086,557824e-9,0,.263492,.790728,556346e-9,0,.285551,.772987,552672e-9,0,.30851,.7541,543738e-9,0,.332376,.734669,536107e-9,0,.357153,.714411,523342e-9,0,.382845,.694196,512238e-9,0,.409454,.674252,497465e-9,0,.436977,.65357,481096e-9,0,.465404,.632999,467054e-9,0,.494713,.611994,448771e-9,0,.524864,.591604,431889e-9,0,.555779,.571134,415238e-9,0,.587302,.550528,396369e-9,0,.619048,.530292,379477e-9,0,.650794,.510364,361488e-9,0,.68254,.490749,343787e-9,0,.714286,.471266,327822e-9,0,.746032,.452462,310626e-9,0,.777778,.433907,295352e-9,0,.809524,.415659,279179e-9,0,.84127,.398138,264685e-9,0,.873016,.380833,249905e-9,0,.904762,.364247,236282e-9,0,.936508,.348041,222905e-9,0,.968254,.332389,210522e-9,0,1,1,420604e-10,0,0,1,420614e-10,0,0,1,420757e-10,0,0,.999999,42138e-9,0,0,.999997,423067e-10,0,0,.999993,426668e-10,0,0,.999986,433372e-10,0,0,.999974,444857e-10,0,0,.999956,463554e-10,0,0,.99993,493105e-10,0,0,.999892,539077e-10,0,0,.999838,610005e-10,0,0,.999767,718822e-10,0,0,.999666,884581e-10,0,365471e-10,.999525,113398e-9,0,485623e-9,.999311,150043e-9,0,.00162096,.998865,200063e-9,0,.00355319,.996278,211014e-9,0,.00633818,.992956,189672e-9,0,.0100043,.991017,210262e-9,0,.0145648,.989055,244292e-9,0,.0200237,.986741,290481e-9,0,.0263798,.983288,334303e-9,0,.033629,.977784,340307e-9,0,.0417652,.973037,377864e-9,0,.0507821,.967181,4239e-7,0,.060673,.958971,443854e-9,0,.0714314,.950093,483039e-9,0,.0830518,.939552,517934e-9,0,.0955288,.927678,539449e-9,0,.108859,.918278,568604e-9,0,.123038,.908449,588505e-9,0,.138065,.897713,612473e-9,0,.153938,.885533,625575e-9,0,.170657,.872131,63854e-8,0,.188224,.857517,647034e-9,0,.20664,.841796,65209e-8,0,.225909,.824726,6544e-7,0,.246035,.807297,655744e-9,0,.267022,.789058,646716e-9,0,.288878,.77189,643898e-9,0,.311607,.753082,629973e-9,0,.335216,.7341,621564e-9,0,.359713,.714094,605171e-9,0,.385103,.693839,588752e-9,0,.41139,.673891,573294e-9,0,.438576,.653565,552682e-9,0,.466656,.633326,533446e-9,0,.495617,.612582,514635e-9,0,.525431,.59205,49303e-8,0,.556041,.571918,471842e-9,0,.587338,.551572,451713e-9,0,.619048,.531553,430049e-9,0,.650794,.51175,410445e-9,0,.68254,.49238,390098e-9,0,.714286,.473143,370033e-9,0,.746032,.45423,351205e-9,0,.777778,.435963,332049e-9,0,.809524,.41787,315021e-9,0,.84127,.400387,297315e-9,0,.873016,.383332,281385e-9,0,.904762,.366665,265397e-9,0,.936508,.350633,250601e-9,0,.968254,.334964,23589e-8,0,1,1,643736e-10,0,0,1,64375e-9,0,0,1,643947e-10,0,0,.999999,64481e-9,0,0,.999997,647143e-10,0,0,.999994,652119e-10,0,0,.999985,661359e-10,0,0,.999972,677116e-10,0,0,.999952,702599e-10,0,0,.999922,742517e-10,0,0,.99988,803906e-10,0,0,.99982,897315e-10,0,0,.999741,103838e-9,0,0,.999629,12496e-8,0,149024e-9,.999474,156161e-9,0,861027e-9,.999229,201034e-9,0,.00231198,.998662,259069e-9,0,.00458147,.995299,245439e-9,0,.00770895,.992732,24498e-8,0,.0117126,.990847,273211e-9,0,.0165989,.988911,316492e-9,0,.0223674,.98654,37161e-8,0,.0290135,.982636,410352e-9,0,.0365309,.977346,421756e-9,0,.0449117,.972909,475578e-9,0,.0541481,.966821,522482e-9,0,.0642326,.958686,545008e-9,0,.075158,.949754,589286e-9,0,.0869181,.939184,619995e-9,0,.0995074,.927505,654266e-9,0,.112922,.916606,682362e-9,0,.127157,.906707,704286e-9,0,.142212,.895937,725909e-9,0,.158085,.883913,743939e-9,0,.174776,.870642,755157e-9,0,.192287,.856241,764387e-9,0,.210619,.84069,771032e-9,0,.229775,.823728,765906e-9,0,.249761,.806481,767604e-9,0,.270582,.787924,754385e-9,0,.292243,.770588,749668e-9,0,.314753,.751991,731613e-9,0,.338118,.733407,717655e-9,0,.362347,.713688,700604e-9,0,.387447,.693595,678765e-9,0,.413424,.673426,657042e-9,0,.440284,.65359,635892e-9,0,.468027,.633576,611569e-9,0,.496645,.613144,586011e-9,0,.526122,.592711,563111e-9,0,.556417,.572722,537699e-9,0,.587451,.552762,512556e-9,0,.619048,.532985,489757e-9,0,.650794,.513219,464139e-9,0,.68254,.493992,442193e-9,0,.714286,.47509,418629e-9,0,.746032,.456287,397045e-9,0,.777778,.438152,375504e-9,0,.809524,.420294,35492e-8,0,.84127,.402749,335327e-9,0,.873016,.385879,316422e-9,0,.904762,.369352,298333e-9,0,.936508,.353301,281417e-9,0,.968254,.337781,265203e-9,0,1,1,968267e-10,0,0,1,968284e-10,0,0,1,968556e-10,0,0,.999999,969733e-10,0,0,.999997,972913e-10,0,0,.999993,979688e-10,0,0,.999984,992239e-10,0,0,.999969,101356e-9,0,0,.999946,104784e-9,0,0,.999913,110111e-9,0,0,.999868,118217e-9,0,0,.999801,130396e-9,0,0,.999712,148523e-9,0,124907e-10,.999589,175233e-9,0,355405e-9,.999416,213999e-9,0,.0013528,.999136,268529e-9,0,.00312557,.998367,333088e-9,0,.00573045,.994701,304757e-9,0,.00919397,.992497,318031e-9,0,.0135261,.990608,353863e-9,0,.0187278,.988715,409044e-9,0,.0247947,.986241,472967e-9,0,.0317196,.981696,495104e-9,0,.039494,.977097,532873e-9,0,.0481087,.972583,594447e-9,0,.0575549,.966142,636867e-9,0,.0678242,.95823,669899e-9,0,.0789089,.949677,719499e-9,0,.0908023,.939226,750584e-9,0,.103499,.927501,793183e-9,0,.116993,.915199,81995e-8,0,.131282,.90498,847654e-9,0,.146364,.894243,868929e-9,0,.162237,.882154,884278e-9,0,.178902,.869161,898108e-9,0,.196358,.854751,901254e-9,0,.21461,.839368,90679e-8,0,.23366,.822874,901541e-9,0,.253512,.805514,897297e-9,0,.274174,.78716,881856e-9,0,.29565,.769061,870032e-9,0,.31795,.751,851719e-9,0,.341081,.732614,830671e-9,0,.365053,.713171,806569e-9,0,.389874,.693472,78338e-8,0,.415553,.673528,756404e-9,0,.442098,.653397,726872e-9,0,.469512,.633781,700494e-9,0,.497794,.613877,67105e-8,0,.526935,.593506,640361e-9,0,.556908,.573667,613502e-9,0,.587657,.553932,583177e-9,0,.61906,.534345,554375e-9,0,.650794,.515042,527811e-9,0,.68254,.495674,499367e-9,0,.714286,.477132,47429e-8,0,.746032,.458609,447726e-9,0,.777778,.440354,424205e-9,0,.809524,.422765,399549e-9,0,.84127,.405472,378315e-9,0,.873016,.388482,355327e-9,0,.904762,.372191,336122e-9,0,.936508,.356099,315247e-9,0,.968254,.340737,29794e-8,0,1,1,143327e-9,0,0,1,14333e-8,0,0,1,143366e-9,0,0,.999999,143524e-9,0,0,.999996,143952e-9,0,0,.999991,144862e-9,0,0,.999981,146544e-9,0,0,.999966,149391e-9,0,0,.999941,153946e-9,0,0,.999905,160971e-9,0,0,.999852,171562e-9,0,0,.99978,18729e-8,0,0,.999681,210386e-9,0,826239e-10,.999546,243906e-9,0,664807e-9,.999352,291739e-9,0,.00196192,.999027,357419e-9,0,.00405941,.997886,422349e-9,0,.00699664,.99419,385008e-9,0,.0107896,.99214,409775e-9,0,.0154415,.990274,456418e-9,0,.0209488,.988455,527008e-9,0,.0273037,.985804,597685e-9,0,.0344969,.98103,613124e-9,0,.0425183,.976674,668321e-9,0,.0513575,.972021,736985e-9,0,.0610046,.965274,773789e-9,0,.0714508,.958046,830852e-9,0,.0826877,.949333,875766e-9,0,.0947085,.939135,917088e-9,0,.107507,.927119,952244e-9,0,.121078,.91469,990626e-9,0,.135419,.903006,.00101304,0,.150526,.892368,.00103834,0,.166399,.880231,.00105002,0,.183038,.867432,.00106331,0,.200443,.853208,.00106783,0,.218618,.837956,.00106458,0,.237566,.821772,.00105945,0,.257291,.804328,.00104685,0,.2778,.786465,.00103178,0,.2991,.768004,.00101077,0,.321199,.74972,985504e-9,0,.344106,.731682,962893e-9,0,.36783,.712813,932146e-9,0,.392383,.693139,89871e-8,0,.417774,.673566,869678e-9,0,.444013,.653483,835525e-9,0,.471107,.633891,799853e-9,0,.49906,.614433,766838e-9,0,.527869,.594586,732227e-9,0,.557517,.574769,696442e-9,0,.587966,.555149,663935e-9,0,.61913,.535898,629826e-9,0,.650794,.516753,596486e-9,0,.68254,.497816,567078e-9,0,.714286,.479034,534399e-9,0,.746032,.460975,507013e-9,0,.777778,.442935,477421e-9,0,.809524,.425263,451101e-9,0,.84127,.408248,424964e-9,0,.873016,.391339,39993e-8,0,.904762,.37513,377619e-9,0,.936508,.359172,354418e-9,0,.968254,.343876,334823e-9,0,1,1,209042e-9,0,0,1,209045e-9,0,0,1,209093e-9,0,0,.999999,209304e-9,0,0,.999996,209871e-9,0,0,.999991,211078e-9,0,0,.999979,213304e-9,0,0,.999963,217061e-9,0,0,.999933,223042e-9,0,0,.999894,232206e-9,0,0,.999837,245901e-9,0,0,.999756,266023e-9,0,102927e-11,.999648,295204e-9,0,233468e-9,.999499,336958e-9,0,.00108237,.999283,395563e-9,0,.00268832,.998896,473785e-9,0,.00511138,.997006,520008e-9,0,.00837705,.993819,497261e-9,0,.0124928,.991632,523722e-9,0,.0174561,.989875,587258e-9,0,.0232596,.988109,676329e-9,0,.0298932,.985155,747701e-9,0,.0373453,.980479,768803e-9,0,.0456045,.976271,841054e-9,0,.0546593,.971347,911469e-9,0,.0644994,.964528,953057e-9,0,.0751152,.957632,.00102221,0,.0864981,.948681,.00106122,0,.0986407,.938716,.00111857,0,.111537,.926629,.00114762,0,.125182,.914025,.00118995,0,.139571,.901026,.00121228,0,.154703,.890358,.00123946,0,.170576,.878283,.0012527,0,.18719,.865459,.00125536,0,.204547,.851407,.00126134,0,.222648,.836276,.00124759,0,.241498,.820436,.00124443,0,.261101,.803253,.00122071,0,.281465,.785562,.00120107,0,.302595,.76718,.00117762,0,.324501,.748551,.00114289,0,.347192,.730564,.00110872,0,.370679,.712253,.00107636,0,.394973,.692867,.00103646,0,.420085,.673695,996793e-9,0,.446027,.653912,95675e-8,0,.47281,.634129,916739e-9,0,.500441,.615004,874401e-9,0,.528921,.595587,833411e-9,0,.558244,.575965,794556e-9,0,.588384,.5566,75196e-8,0,.619281,.537428,716381e-9,0,.650795,.518623,676558e-9,0,.68254,.499964,64074e-8,0,.714286,.481356,605984e-9,0,.746032,.463279,570256e-9,0,.777778,.445673,540138e-9,0,.809524,.428032,507299e-9,0,.84127,.411112,479553e-9,0,.873016,.394444,450737e-9,0,.904762,.378247,424269e-9,0,.936508,.362415,399111e-9,0,.968254,.347103,375274e-9,0,1,1,300729e-9,0,0,1,300733e-9,0,0,1,300797e-9,0,0,.999998,301072e-9,0,0,.999996,301817e-9,0,0,.999989,303398e-9,0,0,.999977,306309e-9,0,0,.999958,311209e-9,0,0,.999927,318975e-9,0,0,.999884,330804e-9,0,0,.99982,34834e-8,0,0,.999733,373854e-9,0,326995e-10,.999613,410424e-9,0,477174e-9,.999447,462047e-9,0,.00161099,.999204,533322e-9,0,.00353153,.998725,624964e-9,0,.00627965,.995871,631786e-9,0,.0098693,.993194,632017e-9,0,.0143011,.991541,68923e-8,0,.019568,.989773,766892e-9,0,.0256593,.987647,863668e-9,0,.0325625,.984193,922089e-9,0,.0402647,.980016,970749e-9,0,.0487532,.975859,.00106027,0,.058016,.970514,.00112239,0,.0680419,.963625,.00117212,0,.0788208,.956959,.00125211,0,.0903439,.947956,.00129411,0,.102604,.93809,.00135879,0,.115594,.92659,.00139309,0,.129309,.913829,.00143253,0,.143745,.90005,.00145809,0,.158901,.888129,.0014748,0,.174774,.87607,.00148756,0,.191365,.863461,.00148714,0,.208674,.849594,.00148892,0,.226705,.834531,.00146496,0,.245461,.81903,.0014579,0,.264947,.802122,.00143039,0,.28517,.78445,.00139717,0,.306137,.766434,.00136312,0,.327857,.747816,.00132597,0,.350341,.729519,.00128323,0,.373598,.711454,.00123803,0,.397642,.692699,.00119097,0,.422485,.673723,.00114565,0,.448139,.654386,.00109552,0,.474619,.634673,.00104553,0,.501933,.615554,99985e-8,0,.530089,.596462,948207e-9,0,.559087,.577385,902299e-9,0,.588913,.558257,856448e-9,0,.619525,.5392,810395e-9,0,.650826,.520543,768558e-9,0,.68254,.502206,7239e-7,0,.714286,.48402,685794e-9,0,.746032,.465779,64471e-8,0,.777778,.448455,609583e-9,0,.809524,.431091,57227e-8,0,.84127,.414147,54042e-8,0,.873016,.39765,506545e-9,0,.904762,.381576,477635e-9,0,.936508,.365881,448446e-9,0,.968254,.350582,421424e-9,0,1,1,427144e-9,0,0,1,427151e-9,0,0,1,427232e-9,0,0,.999998,42759e-8,0,0,.999995,428555e-9,0,0,.999988,430603e-9,0,0,.999976,434368e-9,0,0,.999952,440688e-9,0,0,.999919,450667e-9,0,0,.999871,46578e-8,0,0,.999801,488024e-9,0,0,.999704,520092e-9,0,129791e-9,.999572,565553e-9,0,821056e-9,.999389,628906e-9,0,.00225241,.999114,714911e-9,0,.00449109,.998488,819218e-9,0,.00756249,.995234,80415e-8,0,.0114716,.993021,830181e-9,0,.0162131,.991407,902645e-9,0,.021776,.989625,996934e-9,0,.0281471,.987064,.00109707,0,.0353118,.983265,.00114353,0,.0432562,.979535,.0012272,0,.0519665,.975224,.00132642,0,.0614298,.969574,.00138092,0,.0716348,.963021,.00145896,0,.0825709,.956046,.00152834,0,.094229,.947136,.00158217,0,.106602,.937313,.0016347,0,.119682,.926073,.00168383,0,.133465,.913121,.00171627,0,.147947,.899165,.00174229,0,.163125,.885891,.00176137,0,.178998,.873783,.00176406,0,.195566,.861331,.00176156,0,.21283,.847569,.00175346,0,.230793,.832785,.00172753,0,.249459,.817442,.00170204,0,.268832,.800613,.00166576,0,.28892,.783597,.00162909,0,.30973,.76571,.0015826,0,.331271,.747021,.00153106,0,.353554,.728593,.00148036,0,.37659,.710661,.00142808,0,.400391,.692426,.00136906,0,.424973,.673623,.00131066,0,.450347,.65494,.00125569,0,.476531,.635448,.00119517,0,.503535,.616221,.00113828,0,.531372,.597531,.0010816,0,.560047,.578795,.00102673,0,.589554,.559892,970985e-9,0,.619869,.541307,919773e-9,0,.650923,.522608,868479e-9,0,.68254,.504484,82137e-8,0,.714286,.486603,772916e-9,0,.746032,.468802,730353e-9,0,.777778,.451172,684955e-9,0,.809524,.434348,647565e-9,0,.84127,.417445,605863e-9,0,.873016,.401077,571885e-9,0,.904762,.385039,536034e-9,0,.936508,.369483,504227e-9,0,.968254,.354272,473165e-9,0,1,1,599525e-9,0,0,1,599533e-9,0,0,1,599639e-9,0,0,.999998,600097e-9,0,0,.999994,601336e-9,0,0,.999987,603958e-9,0,0,.999972,608775e-9,0,0,.999949,616842e-9,0,0,.999912,629534e-9,0,0,.999857,648658e-9,0,0,.999781,676615e-9,0,538873e-11,.999674,716574e-9,0,308602e-9,.999528,772641e-9,0,.00127003,.999326,849806e-9,0,.00300783,.999009,952682e-9,0,.00556637,.998112,.00106394,0,.00895889,.994496,.00102228,0,.0131827,.992806,.00108586,0,.0182277,.991211,.0011759,0,.0240795,.989415,.00128955,0,.030723,.986499,.00139038,0,.0381418,.982679,.00144539,0,.046321,.978839,.00153954,0,.0552459,.974295,.00164417,0,.0649034,.968784,.00171517,0,.0752814,.962324,.00180282,0,.0863693,.954956,.00186387,0,.0981578,.94624,.00193817,0,.110639,.936517,.00198156,0,.123806,.925186,.00203042,0,.137655,.91252,.0020664,0,.15218,.898441,.00207822,0,.16738,.884394,.0020992,0,.183253,.871273,.00208748,0,.199799,.859057,.00208686,0,.21702,.845243,.00205519,0,.234918,.830723,.00202868,0,.253496,.815801,.00199501,0,.272761,.79914,.00194193,0,.292719,.782372,.00188824,0,.313377,.76482,.00183695,0,.334745,.746586,.00177418,0,.356833,.7281,.00170628,0,.379654,.709842,.00164063,0,.403221,.692019,.00157355,0,.427548,.67364,.00150262,0,.452651,.655277,.00143473,0,.478545,.636438,.00136371,0,.505246,.617364,.00129911,0,.532768,.598603,.00123014,0,.561122,.580195,.00116587,0,.590309,.561786,.00110398,0,.620318,.543377,.00104148,0,.651102,.525093,983984e-9,0,.682545,.506791,92667e-8,0,.714286,.489291,874326e-9,0,.746032,.471811,821734e-9,0,.777778,.454435,774698e-9,0,.809524,.437493,727302e-9,0,.84127,.420977,684039e-9,0,.873016,.404729,64373e-8,0,.904762,.388756,60285e-8,0,.936508,.373344,56765e-8,0,.968254,.358191,531929e-9,0,1,1,832169e-9,0,0,1,832178e-9,0,0,1,83231e-8,0,0,.999998,832893e-9,0,0,.999995,834465e-9,0,0,.999985,837791e-9,0,0,.999969,843893e-9,0,0,.999944,854086e-9,0,0,.999903,870071e-9,0,0,.999843,894042e-9,0,0,.999759,928865e-9,0,531805e-10,.999643,978242e-9,0,579365e-9,.99948,.00104684,0,.00182774,.999255,.00114012,0,.00387804,.998885,.00126188,0,.00675709,.997405,.00135888,0,.010468,.99424,.00133626,0,.0150018,.992458,.00140905,0,.0203443,.990929,.00152305,0,.0264786,.989116,.00165882,0,.0333875,.985624,.00174128,0,.0410536,.982003,.00182108,0,.0494609,.978336,.00194498,0,.0585941,.973184,.00202708,0,.0684396,.9678,.00212166,0,.0789851,.961348,.00221366,0,.0902199,.953841,.00228219,0,.102134,.94534,.00235662,0,.114721,.935552,.00240572,0,.127972,.924064,.00244405,0,.141884,.911827,.00247557,0,.156451,.897731,.00248374,0,.171672,.883409,.00249863,0,.187545,.868625,.00246688,0,.20407,.856529,.00246523,0,.221249,.842999,.00242368,0,.239083,.828505,.00237354,0,.257578,.813825,.00232588,0,.276738,.797813,.00226731,0,.296569,.781097,.00219704,0,.31708,.764038,.00212394,0,.338281,.746067,.00204786,0,.360181,.727687,.00196728,0,.382794,.709571,.00188779,0,.406133,.691503,.00180532,0,.430213,.673673,.00171849,0,.45505,.655732,.00164147,0,.480662,.637399,.00155858,0,.507065,.618616,.00147641,0,.534278,.60005,.00140125,0,.562313,.581713,.00132441,0,.59118,.563546,.00125014,0,.620875,.545605,.00118249,0,.651373,.527559,.0011116,0,.682593,.509764,.00104979,0,.714286,.49193,985977e-9,0,.746032,.475011,928592e-9,0,.777778,.457878,873466e-9,0,.809524,.440979,819585e-9,0,.84127,.424613,772365e-9,0,.873016,.408549,722195e-9,0,.904762,.392771,680014e-9,0,.936508,.377317,636797e-9,0,.968254,.362352,598318e-9,0,1,1,.00114313,0,0,1,.00114314,0,0,.999999,.00114331,0,0,.999998,.00114404,0,0,.999994,.00114601,0,0,.999984,.00115019,0,0,.999967,.00115784,0,0,.999937,.0011706,0,0,.999894,.00119054,0,0,.999828,.00122031,0,0,.999735,.00126331,0,169263e-9,.999606,.00132382,0,949167e-9,.999426,.0014071,0,.00249668,.999173,.00151895,0,.00486392,.99873,.00166102,0,.00806323,.996243,.0017023,0,.0120895,.993779,.00172782,0,.0169288,.9919,.0018108,0,.0225633,.990524,.00196028,0,.028974,.98868,.00212014,0,.036142,.984663,.00217598,0,.044049,.981457,.00230563,0,.0526781,.977608,.00243966,0,.0620137,.972215,.00251336,0,.0720418,.966798,.0026285,0,.0827499,.960241,.00271409,0,.0941271,.952489,.00278381,0,.106164,.944127,.00285399,0,.118852,.934282,.00290994,0,.132185,.923271,.00294558,0,.146157,.910803,.00296269,0,.160766,.896705,.00296803,0,.176007,.88238,.00296637,0,.19188,.867116,.00293163,0,.208385,.853636,.00289418,0,.225523,.840469,.00284663,0,.243296,.82639,.00278594,0,.261709,.811759,.00271618,0,.280767,.796113,.00263187,0,.300476,.779518,.00254589,0,.320845,.763142,.00246003,0,.341883,.745464,.00236529,0,.363601,.727491,.00226536,0,.386011,.709414,.00216375,0,.409128,.691396,.00207127,0,.432967,.67368,.00197106,0,.457545,.656049,.00187022,0,.482881,.638188,.00177605,0,.508992,.620177,.00168482,0,.535899,.601506,.00158909,0,.563619,.58362,.00150583,0,.592165,.565496,.00141791,0,.621544,.54789,.00133693,0,.651743,.530323,.00126038,0,.682709,.512795,.00118556,0,.714286,.495199,.00111527,0,.746032,.478101,.0010489,0,.777778,.461511,984264e-9,0,.809524,.444879,92591e-8,0,.84127,.428424,866582e-9,0,.873016,.412495,814463e-9,0,.904762,.396975,764498e-9,0,.936508,.381614,715967e-9,0,.968254,.366732,672483e-9,0,1,1,.00155501,0,0,1,.00155503,0,0,1,.00155524,0,0,.999998,.00155615,0,0,.999994,.0015586,0,0,.999983,.00156379,0,0,.999963,.0015733,0,0,.999932,.00158911,0,0,.999882,.00161376,0,0,.99981,.00165041,0,100875e-10,.999708,.00170304,0,367658e-9,.999565,.00177658,0,.0014234,.999368,.00187688,0,.00327939,.999081,.00200989,0,.00596629,.99852,.00217177,0,.0094852,.99549,.0021745,0,.013824,.993252,.00222357,0,.0189642,.991727,.00235022,0,.0248856,.989951,.00250561,0,.0315669,.988029,.00268829,0,.0389882,.984029,.0027496,0,.0471302,.980683,.00289793,0,.0559754,.976554,.00303315,0,.0655081,.97139,.00313257,0,.0757138,.965544,.00323656,0,.08658,.95912,.00333432,0,.0980954,.951183,.0034039,0,.110251,.942974,.00347515,0,.123038,.932642,.00350381,0,.13645,.922158,.00354519,0,.150482,.909404,.00353851,0,.165129,.896071,.0035435,0,.18039,.881206,.00349936,0,.196263,.866077,.00347256,0,.212748,.85093,.003415,0,.229847,.837703,.00333367,0,.247561,.823878,.003249,0,.265895,.809449,.00316347,0,.284854,.794379,.00306351,0,.304445,.778138,.0029499,0,.324675,.761997,.00284099,0,.345555,.744938,.00272104,0,.367095,.727212,.00260715,0,.389309,.709549,.00248855,0,.41221,.691704,.00236783,0,.435814,.673689,.00225178,0,.460138,.656453,.00213765,0,.485203,.639128,.00202178,0,.511028,.621512,.00191443,0,.537634,.603598,.00180977,0,.565041,.58559,.00170456,0,.593268,.567852,.00160927,0,.622327,.5503,.00151395,0,.652217,.533033,.00142499,0,.682907,.515942,.00133955,0,.714296,.498814,.0012602,0,.746032,.481595,.00118188,0,.777778,.465117,.00111171,0,.809524,.448865,.00104091,0,.84127,.432711,976618e-9,0,.873016,.416822,91859e-8,0,.904762,.401272,857704e-9,0,.936508,.386226,807172e-9,0,.968254,.371321,75464e-8,0,1,1,.00209596,0,0,1,.00209598,0,0,1,.00209624,0,0,.999997,.00209736,0,0,.999991,.00210039,0,0,.999979,.00210678,0,0,.999959,.00211847,0,0,.999925,.0021379,0,0,.99987,.00216809,0,0,.999791,.00221281,0,681487e-10,.999677,.00227669,0,658161e-9,.999521,.00236533,0,.00200635,.999301,.00248514,0,.0041779,.998977,.00264185,0,.00718648,.998191,.00281695,0,.0110239,.994801,.00278518,0,.015672,.993091,.00288774,0,.0211091,.991571,.00303931,0,.0273123,.9897,.00321643,0,.034259,.987023,.00337332,0,.0419282,.983289,.00346146,0,.0502998,.979892,.00363704,0,.0593562,.975111,.00373601,0,.069081,.970351,.0038842,0,.0794598,.964131,.00397053,0,.0904798,.957747,.00408078,0,.10213,.949536,.00413533,0,.1144,.941372,.00420305,0,.127284,.931049,.00422815,0,.140772,.920647,.00425048,0,.154862,.908033,.0042281,0,.169548,.895028,.00422026,0,.184828,.879968,.00415042,0,.200701,.864875,.00408821,0,.217167,.84918,.00400909,0,.234227,.834934,.00391178,0,.251884,.821397,.00380066,0,.270141,.807135,.00367974,0,.289004,.792363,.00355172,0,.308479,.776661,.003411,0,.328575,.760705,.00328123,0,.349301,.744408,.00314003,0,.370668,.726994,.0029906,0,.392689,.709598,.00285034,0,.415379,.692112,.00271179,0,.438754,.674435,.00257185,0,.46283,.65676,.00243425,0,.48763,.639982,.00230351,0,.513173,.622983,.0021777,0,.539482,.605471,.00204991,0,.566579,.58796,.00193759,0,.594488,.570463,.00181976,0,.623226,.553058,.00171497,0,.6528,.535894,.00161109,0,.683198,.519089,.00151394,0,.714354,.502454,.00142122,0,.746032,.485681,.00133488,0,.777778,.468935,.00124975,0,.809524,.452951,.00117309,0,.84127,.437139,.00110155,0,.873016,.421446,.00103124,0,.904762,.405951,966387e-9,0,.936508,.391003,908119e-9,0,.968254,.376198,848057e-9,0,1,1,.00280076,0,0,1,.00280078,0,0,.999999,.00280109,0,0,.999997,.00280246,0,0,.999992,.00280616,0,0,.999979,.00281396,0,0,.999956,.00282822,0,0,.999916,.00285186,0,0,.999857,.0028885,0,0,.999768,.00294259,0,196026e-9,.999645,.00301946,0,.00104842,.99947,.00312541,0,.00270199,.999229,.00326733,0,.00519449,.998852,.00344992,0,.00852602,.997558,.00361052,0,.0126804,.994417,.0035898,0,.017635,.992824,.00372393,0,.023365,.991344,.00390695,0,.0298456,.989337,.00410392,0,.0370529,.985811,.00420987,0,.0449651,.982772,.00437488,0,.0535615,.979001,.00455069,0,.0628243,.974102,.00464462,0,.0727368,.969197,.00480577,0,.0832844,.962759,.00487818,0,.0944545,.956207,.00498176,0,.106236,.947909,.00503392,0,.118619,.939596,.00507474,0,.131595,.929642,.00509798,0,.145159,.918807,.00508476,0,.159305,.906921,.00505634,0,.174028,.893312,.00498845,0,.189327,.878933,.0049133,0,.2052,.863986,.0048259,0,.221647,.847936,.00470848,0,.23867,.832253,.00456889,0,.25627,.818619,.00442726,0,.274453,.804788,.00427677,0,.293222,.790241,.00411906,0,.312585,.775162,.00394833,0,.33255,.759463,.00377366,0,.353126,.743598,.00361026,0,.374324,.72697,.00343627,0,.396158,.709646,.00326422,0,.418641,.69277,.00309717,0,.44179,.675371,.0029356,0,.465624,.657863,.00277712,0,.490163,.640772,.00261738,0,.515429,.624441,.0024737,0,.541445,.607497,.00233125,0,.568236,.590438,.00218994,0,.595828,.573224,.0020664,0,.624242,.556168,.00193526,0,.653496,.539232,.00182463,0,.683588,.522352,.00170735,0,.714482,.506172,.00160555,0,.746032,.489842,.00150451,0,.777778,.473463,.00140938,0,.809524,.457266,.00132568,0,.84127,.441609,.0012376,0,.873016,.426348,.00116265,0,.904762,.411002,.00108935,0,.936508,.396045,.00101946,0,.968254,.381448,955665e-9,0,1,1,.0037121,0,0,1,.00371213,0,0,1,.00371251,0,0,.999997,.00371417,0,0,.99999,.00371863,0,0,.999977,.00372807,0,0,.99995,.00374529,0,0,.999908,.0037738,0,0,.999843,.00381789,0,123596e-10,.999745,.00388273,0,407442e-9,.999608,.00397443,0,.0015447,.999415,.00409998,0,.00351385,.999143,.00426662,0,.0063316,.9987,.00447625,0,.00998679,.996363,.00455323,0,.0144569,.994021,.00461052,0,.0197151,.992372,.00476359,0,.0257344,.991007,.00499101,0,.0324882,.988767,.0051972,0,.0399517,.984872,.00528407,0,.0481022,.982004,.00548926,0,.0569191,.977714,.00564385,0,.0663839,.973076,.0057693,0,.0764801,.967565,.0058924,0,.0871928,.961384,.00599629,0,.0985095,.954435,.00605998,0,.110419,.946303,.0061133,0,.122912,.937662,.00612028,0,.13598,.927867,.00612209,0,.149617,.916475,.00604813,0,.163817,.90541,.00603088,0,.178577,.891591,.00592218,0,.193894,.877573,.00578854,0,.209767,.862511,.00566648,0,.226196,.846861,.00551481,0,.243182,.83068,.00533754,0,.260728,.815725,.00515487,0,.278837,.802321,.0049655,0,.297515,.787826,.00475421,0,.316768,.773454,.00456002,0,.336605,.758224,.00434727,0,.357034,.74265,.00414444,0,.378067,.726729,.00393738,0,.399717,.710155,.00373575,0,.421998,.693312,.00353736,0,.444928,.67653,.00334368,0,.468523,.659444,.00315981,0,.492806,.642051,.00297809,0,.517798,.625758,.00280592,0,.543525,.609615,.00264254,0,.570012,.592919,.00248459,0,.597288,.576298,.00233327,0,.625379,.559489,.00219519,0,.654307,.542891,.00205441,0,.684084,.526255,.00193385,0,.714693,.509853,.00180745,0,.746044,.494131,.00169817,0,.777778,.478114,.0015913,0,.809524,.462274,.00148981,0,.84127,.446412,.00139537,0,.873016,.431274,.00130984,0,.904762,.41635,.00122403,0,.936508,.401476,.00114809,0,.968254,.386993,.00107563,0,1,1,.00488216,0,0,1,.0048822,0,0,1,.00488265,0,0,.999997,.00488463,0,0,.999988,.00488999,0,0,.999974,.00490129,0,0,.999946,.00492191,0,0,.999897,.00495598,0,0,.999825,.00500855,0,744791e-10,.999718,.00508559,0,712744e-9,.999565,.005194,0,.00215249,.999352,.00534147,0,.00444576,.999046,.00553523,0,.00759218,.998492,.00577016,0,.0115714,.995564,.00578487,0,.0163557,.993339,.00586414,0,.021915,.991834,.00606002,0,.0282201,.990496,.00633312,0,.0352433,.987826,.00651941,0,.042959,.98383,.00660842,0,.0513439,.98109,.00685523,0,.0603772,.976131,.00695778,0,.0700402,.971922,.00714236,0,.0803163,.965901,.00721437,0,.0911908,.959606,.00732017,0,.102651,.952504,.00735788,0,.114686,.944365,.00738493,0,.127286,.935652,.00737969,0,.140443,.925813,.00733612,0,.154151,.914397,.00723094,0,.168405,.903257,.00714002,0,.183201,.890015,.00700149,0,.198536,.876014,.00682813,0,.214409,.861436,.00665567,0,.23082,.845752,.00644526,0,.24777,.829169,.00621635,0,.265263,.813435,.00597789,0,.283301,.799701,.00575694,0,.301889,.785726,.00549866,0,.321035,.77152,.0052503,0,.340746,.75683,.00499619,0,.361032,.741951,.0047543,0,.381904,.726367,.0045084,0,.403374,.710537,.00426784,0,.425457,.693965,.00403487,0,.448169,.677724,.0038075,0,.47153,.66117,.00359431,0,.495561,.644274,.00338354,0,.520284,.627449,.00318163,0,.545725,.611645,.00299672,0,.571911,.595614,.00281016,0,.598873,.579426,.00264252,0,.62664,.563016,.00247509,0,.655239,.546728,.00232647,0,.684692,.530539,.00217803,0,.714999,.514164,.00204216,0,.746106,.498344,.00191403,0,.777778,.482957,.00179203,0,.809524,.467336,.00167695,0,.84127,.451994,.00157567,0,.873016,.436514,.00147113,0,.904762,.42178,.00138034,0,.936508,.407271,.00129219,0,.968254,.392822,.0012098,0,1,1,.00637427,0,0,1,.00637431,0,0,.999999,.00637485,0,0,.999996,.00637721,0,0,.999987,.00638357,0,0,.999971,.006397,0,0,.999939,.00642142,0,0,.999888,.00646177,0,0,.999807,.00652387,0,207916e-9,.999689,.00661454,0,.00112051,.99952,.00674155,0,.00287719,.999283,.00691313,0,.00550145,.998936,.00713598,0,.00897928,.998165,.00738501,0,.0132829,.994847,.00734388,0,.01838,.993182,.00749991,0,.0242381,.991665,.0077246,0,.030826,.989708,.00797579,0,.0381152,.986663,.00813011,0,.0460794,.983288,.00830365,0,.0546951,.980104,.00853496,0,.0639411,.974855,.00861045,0,.0737988,.97045,.00879133,0,.0842516,.964509,.00886377,0,.0952848,.957594,.00890346,0,.106886,.950546,.00893289,0,.119044,.942225,.00890074,0,.131749,.933365,.00886826,0,.144994,.923202,.0087316,0,.158772,.912605,.00863082,0,.173078,.901099,.00847403,0,.187908,.888177,.00825838,0,.203261,.873955,.00801834,0,.219134,.860091,.00779026,0,.235527,.84434,.00752478,0,.252443,.828517,.00724074,0,.269883,.81239,.00693769,0,.287851,.79721,.00664817,0,.306352,.783489,.00634763,0,.325393,.769514,.00604221,0,.344981,.755419,.00573568,0,.365126,.741083,.00544359,0,.385839,.726059,.00515515,0,.407132,.710809,.00487139,0,.42902,.695052,.00459846,0,.45152,.678886,.00433412,0,.474651,.663042,.00407981,0,.498433,.646634,.00384264,0,.52289,.630117,.00360897,0,.548048,.613804,.00338863,0,.573936,.598338,.00318486,0,.600584,.582687,.00298377,0,.628027,.566809,.00280082,0,.656295,.550817,.00262255,0,.685417,.534937,.00245835,0,.715406,.519151,.00230574,0,.74624,.503118,.0021549,0,.777778,.487723,.00202008,0,.809524,.472725,.00189355,0,.84127,.457599,.00177108,0,.873016,.442558,.00165843,0,.904762,.427624,.00155494,0,.936508,.413171,.00145273,0,.968254,.399122,.00136454,0,1,1,.00826496,0,0,1,.00826499,0,0,1,.00826564,0,0,.999996,.00826842,0,0,.999987,.00827589,0,0,.999967,.00829167,0,0,.999933,.00832037,0,0,.999876,.00836768,0,109338e-10,.999786,.00844031,0,427145e-9,.999655,.00854603,0,.0016384,.999468,.00869337,0,.00372392,.999203,.008891,0,.00668513,.998803,.00914387,0,.0104968,.99748,.00935838,0,.015125,.994446,.00933309,0,.0205338,.99292,.00953084,0,.0266884,.991414,.0097893,0,.0335565,.989049,.0100228,0,.0411086,.98582,.0101664,0,.0493181,.982441,.0103582,0,.0581613,.978595,.0105292,0,.0676169,.973495,.0106274,0,.0776661,.968405,.0107261,0,.0882926,.962717,.0108234,0,.0994817,.955478,.0108102,0,.111221,.948275,.0107914,0,.123499,.940006,.0107161,0,.136308,.930831,.0106309,0,.149639,.920648,.0104083,0,.163485,.910205,.0102312,0,.177843,.898445,.0100051,0,.192707,.885986,.00971928,0,.208077,.872204,.00940747,0,.22395,.858436,.0091085,0,.240326,.843454,.00876595,0,.257208,.827437,.00839794,0,.274596,.811488,.00803692,0,.292496,.796039,.00767352,0,.310911,.781083,.0073097,0,.329849,.767642,.00694032,0,.349316,.753901,.00657476,0,.369323,.740131,.00622699,0,.38988,.725845,.0058838,0,.410999,.710991,.00555586,0,.432696,.696002,.00523089,0,.454987,.680461,.00492494,0,.47789,.664875,.00463464,0,.501426,.649273,.00435422,0,.52562,.63302,.0040875,0,.550498,.61705,.00384075,0,.576089,.601154,.00359557,0,.602427,.586008,.00337636,0,.629544,.570699,.00316019,0,.657479,.555166,.00296033,0,.686264,.539645,.00277552,0,.715924,.524159,.00259499,0,.746459,.508682,.00243257,0,.777789,.493163,.00227851,0,.809524,.478004,.00213083,0,.84127,.46347,.00199502,0,.873016,.448778,.00186967,0,.904762,.434105,.00174732,0,.936508,.419576,.00163861,0,.968254,.405541,.00153341,0,1,1,.0106462,0,0,1,.0106462,0,0,.999999,.010647,0,0,.999995,.0106502,0,0,.999985,.0106589,0,0,.999964,.0106773,0,0,.999925,.0107106,0,0,.999861,.0107655,0,712986e-10,.999763,.0108497,0,743959e-9,.999616,.0109716,0,.00227361,.999408,.0111408,0,.0046983,.999112,.0113659,0,.00800158,.998637,.0116475,0,.0121493,.996223,.0117231,0,.0171023,.994006,.0118064,0,.0228218,.992444,.0120254,0,.0292711,.991028,.0123314,0,.036417,.98803,.0124954,0,.0442295,.984816,.0126538,0,.0526815,.981399,.0128537,0,.0617492,.977085,.0129694,0,.0714114,.972154,.013091,0,.0816495,.966617,.0131166,0,.0924472,.960628,.0131583,0,.10379,.953295,.0131094,0,.115665,.94575,.0129966,0,.128062,.937654,.0128796,0,.140972,.927716,.0126477,0,.154387,.917932,.0123889,0,.168301,.907719,.012131,0,.182709,.89584,.0118013,0,.197608,.883526,.0114145,0,.212994,.870301,.0110075,0,.228867,.856272,.0106019,0,.245227,.842251,.0101938,0,.262074,.826466,.00973254,0,.279412,.810859,.0092846,0,.297244,.795051,.00883304,0,.315575,.780053,.00840272,0,.334412,.76575,.00796438,0,.35376,.752298,.00752526,0,.373631,.739153,.00711486,0,.394034,.725514,.00670361,0,.414983,.711473,.00632656,0,.436491,.696936,.00595206,0,.458575,.682126,.00559191,0,.481253,.667027,.00525362,0,.504547,.651875,.00493805,0,.528481,.636463,.00462848,0,.553081,.620641,.00433936,0,.578377,.604931,.00407,0,.604404,.589549,.00380864,0,.631197,.574712,.00357049,0,.658795,.559775,.00334466,0,.687238,.544514,.00312505,0,.716559,.529555,.00293199,0,.746776,.514402,.00274204,0,.777849,.499302,.00256647,0,.809524,.484114,.00239901,0,.84127,.469308,.00225148,0,.873016,.455133,.00210178,0,.904762,.440939,.0019727,0,.936508,.426627,.00184382,0,.968254,.412509,.00172548,0,1,1,.013628,0,0,1,.0136281,0,0,.999999,.0136289,0,0,.999995,.0136327,0,0,.999983,.0136427,0,0,.99996,.0136638,0,0,.999917,.0137022,0,0,.999846,.0137652,0,204597e-9,.999736,.0138615,0,.00116837,.999573,.0140007,0,.00303325,.99934,.0141927,0,.00580613,.999004,.0144457,0,.00945626,.998407,.0147489,0,.0139421,.995464,.014731,0,.0192202,.993328,.0148283,0,.0252495,.991799,.0150797,0,.0319921,.990397,.0154316,0,.0394138,.986835,.0155005,0,.0474843,.983938,.0157308,0,.0561763,.980154,.0158753,0,.0654661,.975659,.0159581,0,.0753326,.970171,.0159832,0,.0857571,.964803,.0160084,0,.0967236,.958366,.0159484,0,.108218,.950613,.0158001,0,.120227,.942874,.0155845,0,.132741,.935005,.0154292,0,.145751,.924991,.0150742,0,.159249,.914814,.0146757,0,.17323,.904743,.0143097,0,.187687,.893216,.0138695,0,.202619,.880769,.0133706,0,.218021,.868136,.0128606,0,.233894,.85469,.0123403,0,.250238,.840593,.0118091,0,.267052,.825808,.011253,0,.284341,.81009,.0107099,0,.302106,.79504,.0101636,0,.320354,.779757,.00964041,0,.33909,.764697,.00911896,0,.358322,.750913,.00859533,0,.378059,.738175,.00811592,0,.398311,.725242,.00764504,0,.41909,.711864,.00718885,0,.440412,.698009,.00675843,0,.462292,.683841,.00634984,0,.484748,.669391,.00595502,0,.507802,.654731,.00558671,0,.531477,.639805,.00523578,0,.555802,.624789,.00490834,0,.580805,.609325,.00459448,0,.606522,.593975,.00430342,0,.63299,.578983,.00403019,0,.66025,.564442,.0037707,0,.688346,.549835,.0035316,0,.717319,.535039,.00330255,0,.7472,.520403,.00308932,0,.777982,.505687,.00289335,0,.809524,.490939,.00270818,0,.84127,.476233,.0025343,0,.873016,.461624,.00237097,0,.904762,.447833,.00222065,0,.936508,.433992,.00207561,0,.968254,.420147,.00194955,0,1,1,.0173415,0,0,1,.0173416,0,0,.999999,.0173426,0,0,.999995,.0173468,0,0,.999983,.0173582,0,0,.999954,.0173822,0,0,.999908,.0174258,0,669501e-11,.999828,.0174973,0,427399e-9,.999705,.0176063,0,.00171019,.999524,.0177631,0,.0039248,.999263,.0179781,0,.00705382,.998878,.018258,0,.0110552,.998012,.0185551,0,.0158812,.994614,.0184264,0,.0214852,.993132,.0186385,0,.0278239,.991563,.0189067,0,.0348585,.989298,.0191577,0,.0425544,.986036,.0192522,0,.050881,.982558,.0194063,0,.059811,.978531,.019486,0,.0693209,.974198,.0195847,0,.0793895,.968148,.0194749,0,.0899984,.962565,.0194277,0,.101132,.956041,.0192991,0,.112775,.947749,.0189893,0,.124917,.94018,.018704,0,.137547,.93165,.0183458,0,.150655,.921798,.0178775,0,.164236,.911573,.0173618,0,.178281,.901569,.0168482,0,.192788,.890341,.016265,0,.207752,.877835,.0156199,0,.223171,.865472,.0149516,0,.239044,.852905,.0143274,0,.255371,.838906,.0136643,0,.272153,.824888,.0129903,0,.289393,.809977,.0123218,0,.307093,.794697,.0116572,0,.325259,.780028,.0110307,0,.343896,.765124,.0104236,0,.363012,.750411,.0098219,0,.382617,.737264,.00924397,0,.402719,.724799,.00868719,0,.423332,.712253,.00816476,0,.444469,.699267,.00767262,0,.466146,.685618,.00719746,0,.488383,.671736,.00673916,0,.511199,.657777,.00631937,0,.534618,.643497,.00592411,0,.558668,.62889,.00553928,0,.58338,.614299,.0051934,0,.608787,.599197,.00485985,0,.634929,.584175,.00454357,0,.661849,.569541,.00425787,0,.689594,.555193,.00397905,0,.718211,.540947,.00372364,0,.747742,.526593,.00348599,0,.778205,.512335,.00326103,0,.80953,.498017,.00305137,0,.84127,.483609,.00285485,0,.873016,.469368,.00267472,0,.904762,.455037,.00249945,0,.936508,.441493,.00234792,0,.968254,.428147,.00219936,0,1,1,.0219422,0,0,1,.0219423,0,0,.999998,.0219434,0,0,.999993,.0219481,0,0,.999981,.021961,0,0,.999949,.0219879,0,0,.999896,.0220367,0,593194e-10,.999808,.0221167,0,75364e-8,.99967,.0222383,0,.00237884,.999466,.0224125,0,.00495612,.999174,.0226495,0,.00844887,.998725,.0229525,0,.0128058,.996979,.0231123,0,.0179742,.994317,.0230742,0,.0239047,.992781,.0232895,0,.0305526,.991191,.0235734,0,.0378786,.987787,.0236152,0,.0458475,.985092,.0237994,0,.0544287,.981121,.0238553,0,.0635952,.976924,.0238706,0,.0733233,.97218,.0238704,0,.0835922,.965956,.0236598,0,.0943839,.959998,.0234735,0,.105682,.953245,.0232277,0,.117474,.944445,.0226973,0,.129747,.937087,.0223527,0,.142491,.928341,.0218144,0,.155697,.9184,.0211516,0,.169358,.907959,.0204553,0,.183469,.89808,.0197673,0,.198024,.887047,.0189915,0,.21302,.875221,.0182082,0,.228455,.86269,.0173584,0,.244329,.850735,.0165718,0,.260639,.837545,.0157524,0,.277389,.823639,.0149482,0,.29458,.809699,.0141431,0,.312216,.794797,.0133527,0,.3303,.780578,.0126193,0,.34884,.766019,.0118914,0,.367842,.751447,.0111839,0,.387315,.737275,.010514,0,.40727,.724545,.00987277,0,.427717,.712644,.00926569,0,.448671,.700432,.00869029,0,.470149,.687664,.00814691,0,.492167,.674288,.00763012,0,.514746,.660966,.00714437,0,.537911,.647264,.00668457,0,.561688,.633431,.00626581,0,.586108,.619133,.00585593,0,.611206,.604935,.00548188,0,.637022,.590236,.00513288,0,.663599,.575473,.0047906,0,.690989,.561228,.00448895,0,.719242,.547054,.00420233,0,.748411,.533175,.00392869,0,.778531,.519163,.00367445,0,.809583,.505328,.00344097,0,.84127,.491446,.00322003,0,.873016,.477356,.00301283,0,.904762,.46356,.00282592,0,.936508,.449623,.00264956,0,.968254,.436068,.00246956,0,1,1,.0276135,0,0,1,.0276136,0,0,.999998,.0276148,0,0,.999993,.0276201,0,0,.999976,.0276342,0,0,.999945,.027664,0,0,.999884,.0277179,0,18679e-8,.999784,.027806,0,.00119607,.99963,.0279394,0,.00318407,.999401,.0281295,0,.00613601,.999066,.0283858,0,.00999963,.998524,.0287027,0,.0147164,.995702,.0286256,0,.0202295,.993593,.0286733,0,.0264876,.992067,.0288989,0,.0334452,.990548,.0292135,0,.0410621,.986775,.0291296,0,.0493032,.984054,.0293099,0,.0581381,.979481,.0291881,0,.0675397,.975297,.0291598,0,.0774848,.96981,.028954,0,.0879528,.963524,.028628,0,.0989258,.957398,.0283135,0,.110388,.950088,.0278469,0,.122327,.941538,.0271798,0,.134729,.933332,.0265388,0,.147587,.924392,.0257776,0,.160889,.914581,.024916,0,.174631,.904347,.0240242,0,.188806,.894324,.0231229,0,.203409,.883724,.022153,0,.218437,.872207,.0211355,0,.233888,.859927,.0201048,0,.249761,.848373,.0191263,0,.266056,.836023,.0181306,0,.282774,.82289,.0171718,0,.299917,.809324,.0162196,0,.317488,.795361,.0152622,0,.335493,.781253,.01439,0,.353936,.767338,.013533,0,.372825,.753156,.0127244,0,.392168,.739122,.0119454,0,.411976,.725358,.0112054,0,.432259,.712949,.010487,0,.453032,.701621,.00984032,0,.47431,.689703,.00921495,0,.496111,.677216,.00862492,0,.518456,.664217,.00806882,0,.541367,.65137,.00755922,0,.564872,.638,.00705705,0,.589001,.62453,.00661266,0,.613789,.610601,.00618432,0,.639277,.59676,.00578033,0,.66551,.582433,.00540927,0,.692539,.568026,.00506104,0,.720422,.55414,.0047353,0,.749216,.540178,.00442889,0,.778974,.526513,.00414363,0,.809711,.512954,.00388237,0,.84127,.499403,.00362875,0,.873016,.486026,.00340827,0,.904762,.472345,.00318598,0,.936508,.458828,.00297635,0,.968254,.445379,.00279447,0,1,1,.0345716,0,0,1,.0345717,0,0,.999999,.034573,0,0,.999991,.0345787,0,0,.999974,.0345941,0,0,.999937,.0346263,0,188589e-11,.999869,.0346847,0,409238e-9,.999757,.0347798,0,.0017674,.999582,.0349233,0,.00413658,.999322,.0351265,0,.00747408,.998939,.0353967,0,.0117157,.998219,.0357018,0,.0167966,.994974,.0354726,0,.0226572,.993201,.0355621,0,.0292445,.991573,.0357641,0,.0365123,.989301,.0359252,0,.0444203,.985712,.0358017,0,.0529334,.982411,.0358353,0,.0620214,.977827,.035617,0,.0716574,.973278,.0354398,0,.0818186,.967397,.0350483,0,.0924846,.960696,.0344795,0,.103638,.954349,.0339861,0,.115263,.946066,.0331323,0,.127348,.938012,.032359,0,.13988,.929413,.0314413,0,.152849,.920355,.0304103,0,.166248,.910586,.0292785,0,.18007,.900609,.0281391,0,.194308,.890093,.0269103,0,.208958,.880013,.0257269,0,.224018,.869001,.0244671,0,.239485,.85751,.0232252,0,.255359,.84582,.0220117,0,.271638,.834383,.0208274,0,.288324,.822158,.0196628,0,.305419,.809056,.0185306,0,.322927,.795832,.0174174,0,.340851,.782547,.0163758,0,.359199,.7689,.015391,0,.377975,.755526,.0144488,0,.397189,.741681,.0135372,0,.416851,.728178,.0126957,0,.436971,.714642,.0118812,0,.457564,.702756,.0111165,0,.478644,.69175,.0104145,0,.500229,.680159,.00974439,0,.522339,.668073,.00911926,0,.544997,.655405,.00851393,0,.56823,.642921,.00797637,0,.592068,.629993,.00745119,0,.616546,.616828,.00696972,0,.641705,.603305,.00652425,0,.66759,.589833,.00610188,0,.694255,.575945,.00570834,0,.72176,.561745,.00533384,0,.750168,.548277,.00500001,0,.779545,.534467,.00467582,0,.809933,.521032,.00438092,0,.841272,.507877,.00410348,0,.873016,.494654,.00383618,0,.904762,.481592,.00358699,0,.936508,.468509,.00337281,0,.968254,.455293,.00316196,0,1,1,.0430698,0,0,1,.0430699,0,0,.999998,.0430713,0,0,.999991,.0430773,0,0,.99997,.0430936,0,0,.999928,.0431277,0,406396e-10,.999852,.0431893,0,744376e-9,.999724,.0432895,0,.0024806,.999527,.0434397,0,.00524779,.99923,.0436507,0,.00898164,.998783,.0439255,0,.0136083,.997507,.0441104,0,.0190582,.994418,.0438225,0,.0252694,.992864,.0439396,0,.0321879,.991127,.0440962,0,.039767,.987331,.0438408,0,.0479667,.984819,.0438991,0,.056752,.980384,.0435906,0,.0660929,.975846,.0432543,0,.075963,.970748,.0428293,0,.0863398,.964303,.042153,0,.0972035,.95772,.0414111,0,.108537,.950747,.0405893,0,.120325,.942533,.0394887,0,.132554,.934045,.0383544,0,.145215,.924942,.037057,0,.158296,.915811,.0356993,0,.17179,.90612,.0342401,0,.185691,.896434,.0328078,0,.199993,.886021,.031288,0,.214691,.876081,.0297776,0,.229782,.865608,.0282334,0,.245265,.854924,.026749,0,.261138,.843607,.02526,0,.277401,.832456,.0238214,0,.294056,.821342,.0224682,0,.311104,.809303,.0211297,0,.328548,.796468,.0198387,0,.346394,.784046,.0186227,0,.364645,.771262,.0174561,0,.38331,.758118,.0163806,0,.402396,.745075,.0153287,0,.421912,.731926,.0143647,0,.44187,.71863,.0134363,0,.462283,.705414,.0125603,0,.483165,.693792,.0117508,0,.504535,.683108,.0110016,0,.52641,.67183,.0102757,0,.548816,.66015,.00962044,0,.571776,.647907,.00898031,0,.595323,.635734,.00840811,0,.619489,.623208,.00786211,0,.644317,.610438,.00734953,0,.669852,.597345,.00687688,0,.696148,.584138,.00643469,0,.723267,.5707,.00602236,0,.75128,.556966,.0056324,0,.780258,.543607,.00528277,0,.810268,.530213,.00493999,0,.841311,.516912,.00462265,0,.873016,.503916,.0043307,0,.904762,.491146,.00406858,0,.936508,.478439,.00381436,0,.968254,.465834,.00358003,0,1,1,.0534039,0,0,1,.053404,0,0,.999998,.0534055,0,0,.999989,.0534116,0,0,.999968,.0534283,0,0,.999918,.0534633,0,155895e-9,.99983,.0535262,0,.00120914,.999685,.0536281,0,.00334944,.999461,.0537799,0,.00653077,.999119,.0539902,0,.0106718,.998582,.0542524,0,.0156907,.995919,.0540318,0,.0215147,.993735,.0538914,0,.0280801,.992126,.0539557,0,.0353323,.990266,.0540401,0,.0432247,.986317,.0536064,0,.0517172,.983213,.0534425,0,.0607754,.978303,.0528622,0,.0703698,.973665,.0523363,0,.0804742,.968091,.0516165,0,.0910667,.961026,.0505434,0,.102128,.954333,.049523,0,.113641,.946372,.0481698,0,.125591,.938254,.0467674,0,.137965,.929516,.0452341,0,.150754,.920106,.0435083,0,.163947,.910899,.0417399,0,.177537,.901532,.0399389,0,.191516,.891919,.0380901,0,.205881,.882006,.0362341,0,.220626,.871965,.0343444,0,.235749,.862145,.0324832,0,.251248,.852058,.0306681,0,.267121,.84161,.0289097,0,.283368,.830806,.0272079,0,.299992,.820476,.0256089,0,.316992,.809514,.0240394,0,.334374,.797865,.0225379,0,.35214,.785621,.0211235,0,.370296,.773765,.0197908,0,.388849,.761629,.0185235,0,.407807,.748891,.0173358,0,.427178,.736437,.0162305,0,.446974,.723707,.0151778,0,.467207,.710606,.0141791,0,.487892,.698019,.0132592,0,.509046,.686203,.0123887,0,.530687,.675692,.0115976,0,.552839,.664826,.0108325,0,.575527,.65349,.0101348,0,.59878,.641774,.00947756,0,.622634,.629794,.00886058,0,.647128,.617647,.00828526,0,.672308,.60534,.00775312,0,.698231,.592718,.00726033,0,.724958,.579746,.00679731,0,.752563,.566763,.00636111,0,.781127,.553515,.00595228,0,.810733,.540118,.00556876,0,.841426,.527325,.00523051,0,.873016,.514265,.00490712,0,.904762,.501406,.00460297,0,.936508,.488922,.00431247,0,.968254,.476541,.0040472,0,1,1,.0659184,0,0,1,.0659185,0,0,.999998,.06592,0,0,.999988,.0659259,0,0,.999963,.0659423,0,0,.999907,.0659764,0,374198e-9,.999806,.0660376,0,.00182071,.999639,.0661361,0,.0043894,.999378,.0662814,0,.00800055,.998985,.0664779,0,.0125594,.998285,.0666914,0,.0179786,.995071,.0661989,0,.0241822,.993172,.0660454,0,.031106,.991438,.0660105,0,.0386952,.988428,.0656875,0,.0469032,.985218,.0652913,0,.0556905,.981128,.0647107,0,.065023,.976015,.0638491,0,.0748717,.97097,.062993,0,.0852112,.964582,.0617927,0,.0960199,.957383,.0603626,0,.107279,.949969,.0588128,0,.118971,.941843,.0570274,0,.131084,.933624,.0551885,0,.143604,.924543,.053122,0,.156521,.914919,.0508897,0,.169825,.905773,.0486418,0,.18351,.896434,.0463364,0,.197569,.887195,.0440623,0,.211997,.877706,.0417799,0,.226789,.867719,.03945,0,.241944,.858587,.037243,0,.257458,.849317,.0350956,0,.273331,.839585,.0329852,0,.289563,.829856,.0310028,0,.306154,.819589,.0290953,0,.323108,.809714,.0272738,0,.340426,.79934,.0255631,0,.358113,.788224,.0239175,0,.376175,.776619,.0223831,0,.394616,.76521,.0209298,0,.413445,.753716,.0195786,0,.432671,.741564,.0183001,0,.452305,.729413,.0171259,0,.472358,.717146,.0159933,0,.492845,.70436,.0149495,0,.513783,.69219,.0139681,0,.535189,.680289,.0130577,0,.557087,.669611,.0122198,0,.5795,.659113,.0114174,0,.602459,.648148,.0106729,0,.625997,.636905,.00998997,0,.650154,.625154,.00934313,0,.674976,.613481,.00874839,0,.700518,.60154,.00818265,0,.726845,.58943,.00766889,0,.754032,.576828,.00717153,0,.782167,.564194,.00672696,0,.811344,.551501,.00630863,0,.841644,.538635,.00592177,0,.873016,.525724,.00554888,0,.904762,.513209,.00520225,0,.936508,.500457,.00488231,0,.968254,.48799,.00457153,0,1,1,.0810131,0,0,1,.0810133,0,0,.999997,.0810145,0,0,.999985,.08102,0,0,.999956,.0810347,0,195026e-10,.999893,.0810656,0,719316e-9,.999777,.0811205,0,.00259774,.999583,.081208,0,.00561807,.999281,.0813343,0,.00967472,.998813,.0814969,0,.0146627,.997597,.0815217,0,.0204902,.994379,.0808502,0,.0270802,.992744,.0806792,0,.0343674,.990745,.0804589,0,.0422974,.986646,.0796107,0,.0508242,.983611,.0790913,0,.0599087,.978869,.0780746,0,.0695175,.973475,.0768218,0,.0796223,.967845,.0754926,0,.0901983,.960778,.0737063,0,.101224,.953333,.0718052,0,.112682,.945274,.0695946,0,.124555,.936955,.0672492,0,.136831,.928319,.0647732,0,.149496,.919075,.0620947,0,.162542,.909114,.0591816,0,.175958,.900137,.0563917,0,.189739,.891069,.0535392,0,.203877,.882262,.0507642,0,.218368,.873232,.0479793,0,.233208,.864042,.045226,0,.248393,.855002,.0425413,0,.263923,.846569,.0400126,0,.279796,.837714,.0375269,0,.296012,.828918,.0352027,0,.312573,.819783,.0330011,0,.329479,.810129,.0308908,0,.346734,.800866,.0289112,0,.364342,.79093,.0270255,0,.382307,.780593,.0252758,0,.400637,.769511,.0236178,0,.419337,.758558,.0220652,0,.438418,.747632,.0206289,0,.457889,.736146,.0192873,0,.477761,.724093,.0180333,0,.49805,.71234,.0168264,0,.51877,.700201,.015746,0,.53994,.687949,.0147027,0,.561581,.676163,.0137512,0,.583718,.665001,.0128655,0,.60638,.65472,.0120366,0,.629599,.644213,.0112604,0,.653415,.633382,.0105413,0,.677874,.62212,.00986498,0,.70303,.610631,.00923308,0,.728948,.599078,.00864206,0,.755706,.587519,.00811784,0,.783396,.575505,.00761237,0,.812121,.563148,.00713949,0,.841989,.550828,.00668379,0,.873035,.538458,.00627715,0,.904762,.525905,.00588336,0,.936508,.513517,.00552687,0,.968254,.501395,.00519681,0,1,1,.0991506,0,0,1,.0991504,0,0,.999996,.0991515,0,0,.999984,.0991558,0,0,.999947,.0991672,0,114389e-9,.999874,.0991912,0,.00121503,.999739,.0992331,0,.00356108,.999514,.0992983,0,.00705578,.999159,.0993877,0,.011574,.998586,.0994837,0,.017003,.995731,.0988425,0,.0232484,.993384,.098276,0,.0302318,.991615,.0979269,0,.0378884,.989029,.0973432,0,.0461641,.985373,.0963539,0,.0550136,.981278,.0952306,0,.0643988,.975777,.0936233,0,.0742868,.970526,.0920219,0,.0846501,.963755,.0898912,0,.0954644,.956676,.0876064,0,.106709,.948099,.0847751,0,.118367,.939718,.0818638,0,.130423,.931305,.078857,0,.142862,.922342,.0756127,0,.155674,.912842,.0721473,0,.168849,.903304,.0686195,0,.182378,.89411,.0650589,0,.196255,.885512,.0616022,0,.210473,.877193,.0582434,0,.225027,.86877,.0548979,0,.239915,.860267,.0516095,0,.255132,.851915,.048468,0,.270678,.843912,.0454447,0,.286551,.83604,.0425612,0,.302751,.828245,.0398752,0,.31928,.820159,.0373198,0,.336138,.81167,.034916,0,.35333,.802659,.0326402,0,.370858,.793921,.0304901,0,.388728,.784713,.0284857,0,.406944,.774946,.0266186,0,.425515,.76448,.0248593,0,.444449,.753793,.0232114,0,.463756,.743506,.0217039,0,.483447,.732555,.0202841,0,.503535,.720965,.0189648,0,.524036,.709422,.0177189,0,.544968,.697756,.0165626,0,.56635,.685565,.015483,0,.588208,.673987,.0144892,0,.610569,.66244,.0135607,0,.633466,.651675,.0126956,0,.656936,.641598,.0118788,0,.681025,.63121,.0111261,0,.705788,.620514,.010437,0,.731289,.609366,.00978747,0,.757606,.598137,.00917257,0,.784834,.586966,.00859778,0,.813085,.575549,.00806803,0,.842485,.563797,.00757294,0,.87313,.551758,.00710592,0,.904762,.539894,.0066841,0,.936508,.527901,.00627901,0,.968254,.515819,.00590506,0,1,1,.120864,0,0,1,.120864,0,0,.999996,.120864,0,0,.99998,.120867,0,0,.99994,.120872,0,323781e-9,.999852,.120884,0,.00188693,.999693,.120903,0,.00473489,.999426,.120929,0,.00872704,.999002,.120955,0,.0137237,.998235,.120918,0,.0196068,.994608,.119764,0,.0262803,.992997,.119265,0,.0336657,.990968,.11863,0,.0416987,.987002,.117261,0,.0503261,.983524,.116009,0,.0595035,.97875,.114252,0,.0691935,.972652,.11193,0,.0793645,.966613,.109555,0,.0899894,.959275,.106612,0,.101045,.951272,.103375,0,.112512,.942323,.0996594,0,.124372,.933679,.0958841,0,.136611,.924822,.0919265,0,.149216,.915742,.0878061,0,.162176,.906348,.0834894,0,.175482,.896883,.079085,0,.189125,.88774,.0746745,0,.203098,.87986,.0705773,0,.217396,.871998,.0665005,0,.232015,.864325,.0625413,0,.24695,.856685,.0586781,0,.2622,.84925,.0550063,0,.277761,.841719,.0514727,0,.293634,.834755,.0481398,0,.309819,.827853,.0450172,0,.326315,.820888,.0420969,0,.343126,.813616,.0393702,0,.360254,.805767,.0367771,0,.377701,.797338,.0343274,0,.395474,.789122,.0320529,0,.413577,.780601,.0299485,0,.432018,.771424,.0279812,0,.450804,.761502,.0261054,0,.469944,.751166,.0243942,0,.489451,.741276,.0228087,0,.509337,.730898,.0213265,0,.529617,.719878,.0199307,0,.550307,.708379,.0186574,0,.571428,.697165,.0174446,0,.593003,.685554,.0163144,0,.615059,.673631,.015276,0,.637628,.662385,.0143003,0,.660746,.651059,.0134112,0,.68446,.640451,.0125794,0,.70882,.630536,.011793,0,.733893,.620316,.0110547,0,.759756,.609722,.0103668,0,.786505,.598804,.00973009,0,.814259,.587871,.00912812,0,.843157,.577121,.00858916,0,.87334,.566019,.00807333,0,.904762,.554664,.00759687,0,.936508,.543101,.00714759,0,.968254,.531558,.00673418,0,1,1,.146767,0,0,1,.146767,0,0,.999997,.146767,0,0,.999977,.146765,0,320658e-11,.999929,.146762,0,682576e-9,.999823,.146753,0,.00276402,.999633,.146735,0,.00614771,.999314,.146699,0,.0106613,.998796,.14662,0,.0161546,.997124,.146107,0,.0225063,.994062,.144857,0,.0296198,.992154,.144011,0,.037417,.989186,.142712,0,.0458348,.985279,.140926,0,.0548211,.980826,.13885,0,.0643326,.975056,.136168,0,.074333,.969005,.133217,0,.0847917,.961554,.12959,0,.0956828,.954206,.125886,0,.106984,.945046,.121335,0,.118675,.935678,.116492,0,.130741,.926748,.111635,0,.143166,.917764,.106625,0,.155939,.908358,.101325,0,.169049,.899219,.0960249,0,.182487,.890089,.0906527,0,.196245,.881488,.0853905,0,.210317,.874031,.0804177,0,.224697,.866932,.0756005,0,.23938,.859976,.0709019,0,.254364,.853375,.0664391,0,.269646,.846971,.0622012,0,.285223,.840483,.058129,0,.301096,.833969,.0542762,0,.317265,.82806,.0507042,0,.333729,.822128,.047368,0,.350491,.815989,.044272,0,.367554,.809336,.0413444,0,.38492,.802177,.038601,0,.402594,.79441,.0360227,0,.420582,.786573,.0336383,0,.438891,.778619,.0314321,0,.457527,.77,.029362,0,.476499,.760698,.0274102,0,.49582,.750932,.0256146,0,.5155,.740993,.023974,0,.535555,.731159,.0224182,0,.556,.720836,.0209889,0,.576855,.709913,.0196411,0,.598143,.698415,.0183824,0,.619888,.68745,.0172222,0,.642123,.676154,.0161509,0,.664883,.664383,.0151397,0,.688211,.6533,.0141873,0,.71216,.642072,.0133105,0,.736792,.631412,.0124932,0,.762186,.621622,.0117408,0,.788439,.611681,.0110358,0,.815672,.60142,.0103775,0,.844034,.59083,.00975623,0,.873699,.580254,.00918084,0,.904765,.569841,.00864721,0,.936508,.559224,.00815731,0,.968254,.548315,.00767924,0,1,1,.177563,0,0,1,.177563,0,0,.999994,.177562,0,0,.999972,.177555,0,664171e-10,.999914,.177536,0,.0012276,.999787,.177496,0,.00388025,.999556,.17742,0,.00783463,.999165,.177285,0,.0128953,.9985,.177037,0,.0189053,.995388,.175634,0,.025742,.993102,.174375,0,.033309,.990992,.173121,0,.0415298,.986932,.170896,0,.0503425,.982786,.16847,0,.0596964,.977592,.165455,0,.0695498,.971075,.161676,0,.0798676,.963967,.157458,0,.0906201,.956397,.152836,0,.101783,.947489,.147467,0,.113333,.937564,.14145,0,.125254,.928182,.135383,0,.137529,.919027,.129212,0,.150144,.909618,.12276,0,.163088,.900492,.116273,0,.176351,.891671,.1098,0,.189924,.883146,.103362,0,.203799,.875151,.0970799,0,.21797,.868338,.0911732,0,.232433,.862033,.0854966,0,.247182,.856107,.0800691,0,.262216,.850644,.0749618,0,.27753,.845261,.070079,0,.293124,.839885,.0654321,0,.308997,.834609,.0610975,0,.325149,.829083,.0569741,0,.341581,.82404,.0531736,0,.358294,.818968,.049665,0,.37529,.813496,.0463856,0,.392573,.807533,.0433217,0,.410148,.80099,.0404402,0,.428019,.793891,.0377578,0,.446192,.786281,.0352616,0,.464676,.778773,.0329577,0,.483478,.770737,.030808,0,.502608,.762094,.0287964,0,.522079,.752898,.0269254,0,.541905,.743306,.0251926,0,.5621,.733416,.023595,0,.582684,.723742,.0221155,0,.603677,.713542,.0207435,0,.625106,.702755,.019434,0,.646998,.691484,.0182046,0,.66939,.680531,.0170771,0,.692324,.66953,.0160339,0,.715849,.658126,.0150677,0,.740028,.646933,.0141551,0,.764937,.636107,.0133179,0,.790673,.625271,.0125284,0,.817358,.615225,.0117937,0,.84515,.605678,.0111181,0,.874244,.59583,.0104759,0,.904828,.585704,.00986672,0,.936508,.575413,.00929712,0,.968254,.565373,.00876713,0,1,1,.214058,0,0,.999999,.214058,0,0,.999994,.214055,0,0,.999966,.214039,0,259642e-9,.999893,.213998,0,.00200075,.999737,.21391,0,.00527775,.999449,.213745,0,.00983959,.99896,.213458,0,.0154755,.9979,.212855,0,.0220249,.994278,.210779,0,.0293654,.992254,.20926,0,.0374021,.98881,.206908,0,.0460604,.984715,.204009,0,.0552802,.979738,.200471,0,.0650127,.972884,.195813,0,.0752175,.965996,.190856,0,.0858612,.957974,.185077,0,.0969155,.949155,.17868,0,.108356,.939288,.171513,0,.120163,.928996,.163838,0,.132319,.919563,.156246,0,.144808,.910004,.148359,0,.157618,.900791,.140417,0,.170737,.892135,.132569,0,.184155,.883803,.124741,0,.197866,.876034,.117091,0,.211861,.869219,.109835,0,.226134,.863062,.102859,0,.240682,.857795,.0962928,0,.255499,.853009,.0900725,0,.270583,.848603,.0842101,0,.285931,.844335,.0786527,0,.301542,.840208,.0734397,0,.317415,.836035,.0685334,0,.33355,.83172,.0639275,0,.349948,.827135,.0595909,0,.36661,.822797,.0556204,0,.383539,.818387,.0519394,0,.400738,.813565,.0485317,0,.41821,.808142,.0453138,0,.435961,.802212,.0423354,0,.453997,.79573,.0395553,0,.472324,.788741,.036988,0,.490951,.781093,.0345688,0,.509887,.773597,.0323297,0,.529144,.765622,.0302719,0,.548735,.757083,.0283477,0,.568674,.747992,.0265562,0,.588979,.738591,.0248844,0,.609671,.728719,.0233342,0,.630773,.719146,.0219081,0,.652314,.709165,.0205711,0,.674328,.69875,.0193248,0,.696854,.687884,.0181582,0,.719942,.676818,.0170746,0,.743651,.666247,.0160718,0,.768057,.655284,.0151262,0,.793253,.64401,.0142561,0,.819363,.633353,.0134327,0,.846547,.622674,.012653,0,.875017,.612265,.0119354,0,.905021,.602455,.0112533,0,.936508,.593147,.0106234,0,.968254,.583592,.0100213,0,1,1,.25717,0,0,1,.25717,0,0,.999992,.257164,0,0,.999958,.257135,0,641715e-9,.999864,.25706,0,.00305314,.999666,.256897,0,.00700975,.999302,.256596,0,.0122194,.998663,.25607,0,.0184622,.995607,.254123,0,.0255773,.993094,.252081,0,.0334439,.9907,.249867,0,.0419696,.98594,.246118,0,.0510823,.981214,.242049,0,.0607242,.974966,.236869,0,.0708486,.967589,.230724,0,.081417,.95915,.223635,0,.0923974,.950257,.21596,0,.103763,.940165,.207296,0,.115491,.929396,.197901,0,.127562,.919288,.188437,0,.13996,.909428,.178762,0,.15267,.900105,.169072,0,.165679,.891418,.159478,0,.178979,.883347,.15002,0,.192558,.875992,.140813,0,.20641,.869466,.13196,0,.220529,.863699,.123501,0,.234907,.858553,.115436,0,.249542,.854379,.107901,0,.264428,.850894,.10088,0,.279564,.847632,.0942296,0,.294947,.844571,.0879861,0,.310575,.84163,.0821534,0,.326448,.838542,.0766409,0,.342566,.835412,.0715322,0,.358929,.831899,.0666883,0,.37554,.828177,.0622175,0,.392399,.82416,.0580452,0,.409511,.820393,.054267,0,.426878,.816068,.0507172,0,.444506,.811201,.0474041,0,.4624,.805785,.0443174,0,.480566,.799878,.0414562,0,.499013,.793469,.0388147,0,.517749,.786473,.0363453,0,.536785,.778874,.0340225,0,.556134,.771277,.0318599,0,.575809,.763426,.0298859,0,.595827,.755044,.0280357,0,.616207,.746161,.0262979,0,.636973,.737124,.0247295,0,.65815,.72761,.0232514,0,.679772,.717822,.0218755,0,.701876,.708279,.0205942,0,.724509,.698333,.0193947,0,.74773,.68802,.0182717,0,.771609,.677321,.0172044,0,.79624,.666504,.0162122,0,.821743,.656184,.0152924,0,.84828,.64556,.0144326,0,.876069,.634636,.0136157,0,.905404,.624124,.0128612,0,.936508,.613914,.0121435,0,.968254,.603589,.0114887,0,1,1,.307946,0,0,.999999,.307945,0,0,.999988,.307934,0,204479e-10,.999944,.307886,0,.00127833,.999824,.307756,0,.00445047,.999565,.30748,0,.00914673,.999085,.306966,0,.0150498,.998103,.306004,0,.0219367,.994249,.303028,0,.0296485,.991807,.300435,0,.038068,.987773,.296554,0,.0471062,.982673,.2916,0,.0566942,.976623,.285641,0,.0667768,.968757,.27815,0,.0773099,.959849,.269529,0,.088257,.950663,.260248,0,.0995879,.940129,.249704,0,.111277,.92895,.238291,0,.123304,.917996,.226501,0,.13565,.907813,.214669,0,.148299,.898305,.202835,0,.161237,.889626,.191158,0,.174455,.88175,.179695,0,.187941,.874715,.168548,0,.201687,.868746,.15792,0,.215687,.863703,.147807,0,.229933,.859315,.138149,0,.24442,.855538,.128993,0,.259145,.852428,.120414,0,.274103,.850168,.112498,0,.289293,.848132,.105054,0,.304711,.846291,.0981087,0,.320357,.844431,.0915942,0,.33623,.842493,.0855056,0,.35233,.840368,.0798204,0,.368658,.83798,.0745097,0,.385214,.83523,.0695424,0,.402002,.832091,.0649092,0,.419023,.828667,.0606291,0,.436282,.824805,.0566523,0,.453782,.820988,.0530229,0,.471529,.816635,.0496364,0,.489528,.811725,.0464658,0,.507788,.806316,.0435082,0,.526317,.800469,.0407873,0,.545124,.794107,.038255,0,.564221,.787218,.0358825,0,.583621,.779872,.0336785,0,.603341,.772097,.0316379,0,.623397,.764484,.0297379,0,.643812,.756428,.0279581,0,.664611,.748022,.0263153,0,.685824,.739268,.0247799,0,.707488,.73024,.0233385,0,.729646,.720893,.0220035,0,.752354,.71119,.0207555,0,.77568,.701791,.0195843,0,.799715,.692184,.0184891,0,.824574,.682258,.0174541,0,.850417,.67206,.0164873,0,.877466,.661717,.0155959,0,.90604,.651462,.0147519,0,.936528,.641467,.0139727,0,.968254,.631229,.0132363,0,1,1,.367573,0,0,.999999,.367571,0,0,.999984,.367553,0,183382e-9,.999925,.367473,0,.00225254,.999759,.367259,0,.00628165,.99941,.366801,0,.0117858,.998739,.365946,0,.0184359,.995529,.363191,0,.0260114,.992875,.360171,0,.0343581,.989135,.355981,0,.0433637,.984166,.350401,0,.0529438,.977871,.343348,0,.0630334,.96951,.334341,0,.0735805,.959964,.323862,0,.0845437,.950162,.312521,0,.095889,.938882,.299577,0,.107588,.926992,.285573,0,.119617,.915589,.271212,0,.131957,.904791,.256611,0,.144591,.895177,.242224,0,.157503,.886403,.227952,0,.170682,.878957,.214192,0,.184117,.872418,.200795,0,.197799,.867029,.188015,0,.21172,.862835,.175975,0,.225873,.859411,.164526,0,.240253,.856655,.153693,0,.254854,.854519,.14352,0,.269673,.852828,.13397,0,.284707,.851412,.124984,0,.299953,.850609,.116748,0,.315408,.849855,.10905,0,.331073,.849017,.101839,0,.346946,.848079,.0951359,0,.363028,.846911,.0888774,0,.379318,.845445,.0830375,0,.395818,.84362,.0775844,0,.41253,.841411,.0725054,0,.429457,.838768,.0677691,0,.446602,.835801,.0634016,0,.463968,.832341,.0593095,0,.481561,.828424,.0555121,0,.499386,.824312,.052024,0,.51745,.819918,.0487865,0,.535761,.815072,.0457801,0,.554328,.809863,.0430184,0,.573162,.804164,.0404245,0,.592275,.798034,.0380146,0,.611681,.791436,.0357436,0,.631398,.784498,.0336475,0,.651445,.777125,.0316666,0,.671845,.769365,.0298122,0,.692628,.761579,.0281001,0,.713827,.753746,.0265049,0,.735484,.745573,.0250067,0,.75765,.737083,.0236026,0,.78039,.728545,.0223302,0,.803789,.719691,.0211243,0,.82796,.710569,.0199983,0,.853056,.701216,.0189569,0,.879298,.692094,.0179702,0,.907014,.682909,.0170418,0,.936691,.673509,.0161732,0,.968254,.663863,.0153406,0,1,1,.437395,0,0,.999998,.437394,0,0,.99998,.437363,0,616704e-9,.999891,.437232,0,.00367925,.999656,.436877,0,.00867446,.999148,.436121,0,.0150679,.997959,.434564,0,.022531,.993464,.430134,0,.0308507,.990606,.426077,0,.0398805,.985027,.419397,0,.0495148,.978491,.41118,0,.0596749,.969643,.40048,0,.0703001,.959189,.38769,0,.0813427,.948223,.373575,0,.0927641,.935955,.357622,0,.104533,.923237,.34043,0,.116624,.911074,.322735,0,.129015,.899724,.30479,0,.141687,.890189,.287392,0,.154626,.881796,.270248,0,.167818,.874781,.253659,0,.181252,.869166,.237786,0,.194918,.864725,.222618,0,.208807,.861565,.208356,0,.222913,.859284,.194867,0,.237229,.857677,.18212,0,.25175,.856714,.17018,0,.266473,.856155,.158969,0,.281392,.8558,.148413,0,.296505,.855672,.138578,0,.311811,.855538,.129345,0,.327306,.855689,.120861,0,.342991,.855767,.112969,0,.358864,.855618,.105593,0,.374925,.85525,.0987451,0,.391176,.854583,.0923727,0,.407616,.853534,.0864143,0,.424249,.852061,.0808338,0,.441076,.850253,.0756771,0,.4581,.848004,.0708612,0,.475324,.845333,.0663784,0,.492754,.842376,.0622631,0,.510394,.838956,.0584112,0,.528251,.835121,.0548328,0,.546331,.830842,.0514838,0,.564644,.826212,.048355,0,.583198,.821522,.0454714,0,.602005,.816551,.0428263,0,.621078,.811211,.0403612,0,.640434,.805479,.038039,0,.660089,.799409,.0358739,0,.680066,.79306,.0338727,0,.70039,.786395,.0319985,0,.721094,.779416,.030241,0,.742215,.77214,.0285951,0,.7638,.764636,.0270747,0,.785912,.756836,.0256354,0,.808628,.749315,.0243027,0,.832055,.741561,.0230497,0,.856338,.733589,.0218801,0,.88169,.725479,.020784,0,.908441,.717255,.0197702,0,.937125,.708829,.0188168,0,.968254,.700191,.0179113,0,1,1,.518937,0,0,.999998,.518933,0,0,.999967,.518883,0,.00147741,.999832,.51866,0,.00573221,.999466,.518057,0,.011826,.998644,.516752,0,.0192116,.994458,.512347,0,.027573,.991223,.507675,0,.0367099,.985515,.500188,0,.046487,.978308,.490408,0,.0568071,.968359,.477357,0,.0675984,.95682,.461752,0,.0788059,.943929,.443796,0,.090386,.930224,.423893,0,.102304,.916514,.402682,0,.114532,.903653,.380914,0,.127047,.892315,.359212,0,.139828,.882942,.338102,0,.152861,.875438,.31773,0,.16613,.869642,.298186,0,.179624,.865304,.279491,0,.193332,.862382,.261804,0,.207247,.860666,.245146,0,.22136,.859788,.229406,0,.235666,.859608,.214605,0,.250158,.859912,.200691,0,.264832,.86053,.187623,0,.279684,.861368,.17539,0,.294711,.862237,.163901,0,.309911,.863127,.153175,0,.32528,.863923,.143147,0,.340819,.864567,.133781,0,.356524,.865013,.125042,0,.372397,.86539,.116952,0,.388438,.865591,.109476,0,.404645,.865517,.102542,0,.421022,.865084,.0960688,0,.437569,.864309,.0900499,0,.454287,.863151,.0844328,0,.471181,.861649,.0792218,0,.488253,.859742,.0743482,0,.505507,.857446,.0697963,0,.522947,.854757,.0655364,0,.54058,.851783,.061608,0,.558412,.848516,.0579701,0,.576449,.844897,.0545742,0,.594701,.840956,.0514167,0,.613178,.836676,.0484598,0,.631892,.832075,.0456934,0,.650856,.827191,.0431178,0,.670088,.822295,.0407718,0,.689606,.817294,.0386032,0,.709434,.812013,.0365675,0,.7296,.806465,.0346547,0,.750138,.800691,.0328717,0,.771093,.794709,.031211,0,.792519,.788493,.0296504,0,.814488,.782049,.0281782,0,.837097,.775403,.0267965,0,.860481,.76857,.0255002,0,.884842,.761536,.0242759,0,.910494,.754303,.0231142,0,.937985,.74692,.0220305,0,.968254,.739745,.0210192,0,1,1,.613914,0,0,.999996,.613907,0,963597e-10,.999942,.613814,0,.00301247,.999704,.613407,0,.00870385,.999046,.612302,0,.0160714,.995516,.608266,0,.0245899,.991726,.602863,0,.0339681,.985157,.593956,0,.0440254,.97642,.581748,0,.0546409,.964404,.565183,0,.0657284,.950601,.545273,0,.0772246,.935158,.522129,0,.0890812,.919364,.496782,0,.10126,.904754,.470571,0,.113731,.89176,.444037,0,.126469,.881492,.418322,0,.139454,.873656,.393522,0,.15267,.868053,.369795,0,.166101,.864336,.347171,0,.179736,.862259,.325737,0,.193565,.861556,.305532,0,.207578,.861776,.286416,0,.221769,.862661,.268355,0,.23613,.864015,.251334,0,.250656,.865711,.235352,0,.265343,.867519,.220302,0,.280187,.869351,.206161,0,.295183,.871144,.192908,0,.31033,.872839,.180505,0,.325624,.874307,.168848,0,.341065,.875667,.158021,0,.35665,.876758,.147877,0,.37238,.87764,.138441,0,.388253,.878237,.129627,0,.404269,.878563,.121415,0,.42043,.878572,.113741,0,.436735,.87842,.106652,0,.453187,.878057,.100097,0,.469786,.877413,.0940128,0,.486536,.87646,.0883462,0,.503439,.875233,.0830924,0,.520498,.8737,.0781975,0,.537717,.871873,.07364,0,.555102,.86978,.0694103,0,.572657,.867405,.0654696,0,.59039,.864751,.0617914,0,.608307,.861818,.0583491,0,.626419,.858645,.0551443,0,.644733,.855307,.0521894,0,.663264,.851736,.0494334,0,.682025,.847927,.0468504,0,.701032,.843888,.0444261,0,.720308,.839629,.0421497,0,.739875,.835158,.0400082,0,.759764,.830509,.0380076,0,.780014,.825714,.0361488,0,.800673,.820729,.0343956,0,.821803,.815751,.0327781,0,.843492,.810752,.031275,0,.86586,.805587,.0298542,0,.889087,.800317,.0285397,0,.913466,.79489,.0272948,0,.93952,.789314,.0261139,0,.96835,.783593,.0249938,0,1,1,.724258,0,0,.999992,.724243,0,726889e-9,.99987,.724044,0,.00569574,.999336,.72317,0,.0131702,.996271,.719432,0,.0220738,.991159,.712576,0,.0319405,.982465,.700927,0,.0425202,.97049,.684297,0,.0536599,.953973,.661244,0,.065258,.935546,.633804,0,.0772427,.916596,.603071,0,.0895616,.899353,.57105,0,.102175,.885216,.539206,0,.11505,.875076,.508714,0,.128164,.868334,.479571,0,.141495,.864414,.451796,0,.155026,.862678,.425328,0,.168745,.862835,.400352,0,.182639,.864067,.376532,0,.196699,.866086,.35391,0,.210915,.868557,.332424,0,.225282,.871271,.312053,0,.239792,.874058,.292764,0,.25444,.8768,.27453,0,.269223,.87939,.257297,0,.284135,.8819,.24114,0,.299174,.884187,.225934,0,.314337,.886262,.211669,0,.329622,.888119,.198311,0,.345026,.889709,.185783,0,.360549,.891054,.174063,0,.376189,.892196,.163143,0,.391946,.893101,.152952,0,.407819,.893803,.143475,0,.423808,.894277,.134647,0,.439914,.894532,.126434,0,.456137,.894576,.1188,0,.472479,.894393,.111694,0,.48894,.893976,.105069,0,.505523,.893346,.0989077,0,.52223,.892502,.0931724,0,.539064,.891441,.0878276,0,.556028,.890276,.082903,0,.573125,.888972,.0783505,0,.590361,.887469,.0741083,0,.607741,.885785,.0701633,0,.62527,.883914,.0664835,0,.642957,.881872,.0630567,0,.660809,.879651,.0598527,0,.678836,.877267,.0568615,0,.69705,.874717,.05406,0,.715465,.872012,.0514378,0,.734098,.869157,.0489805,0,.752968,.866155,.0466727,0,.772101,.863014,.0445056,0,.791529,.859748,.0424733,0,.81129,.856416,.0405957,0,.831438,.852958,.0388273,0,.852044,.849382,.0371619,0,.87321,.845694,.0355959,0,.89509,.841893,.0341155,0,.917932,.837981,.0327141,0,.942204,.833963,.0313856,0,.968981,.829847,.0301275,0,1,1,.85214,0,0,.999969,.852095,0,.00279627,.999483,.851408,0,.0107635,.994545,.84579,0,.0206454,.986188,.835231,0,.0315756,.969847,.814687,0,.0432021,.945951,.783735,0,.0553396,.91917,.746074,0,.0678766,.895488,.706938,0,.0807395,.878232,.669534,0,.0938767,.868252,.635168,0,.10725,.863873,.603069,0,.120832,.863369,.572514,0,.134598,.86545,.543169,0,.148533,.868803,.514578,0,.16262,.872794,.486762,0,.176849,.87702,.459811,0,.19121,.881054,.433654,0,.205694,.884974,.408574,0,.220294,.888587,.384525,0,.235005,.891877,.36156,0,.24982,.894793,.339661,0,.264737,.89743,.318913,0,.279751,.899796,.299302,0,.294859,.901943,.280843,0,.310058,.903858,.263481,0,.325346,.905574,.247197,0,.340721,.907069,.231915,0,.356181,.908379,.217614,0,.371725,.90952,.20425,0,.387353,.910483,.191758,0,.403063,.91128,.180092,0,.418854,.911936,.169222,0,.434727,.912454,.159098,0,.450682,.912835,.149668,0,.466718,.913078,.140884,0,.482837,.913192,.132709,0,.499038,.913175,.125095,0,.515324,.91304,.118012,0,.531695,.912781,.111417,0,.548153,.91241,.105281,0,.5647,.911924,.0995691,0,.581338,.911331,.0942531,0,.59807,.910637,.0893076,0,.6149,.90984,.0846998,0,.63183,.908941,.0804044,0,.648865,.907944,.0763984,0,.666011,.906857,.0726638,0,.683273,.90568,.0691783,0,.700659,.904416,.0659222,0,.718176,.903067,.0628782,0,.735834,.901637,.0600307,0,.753646,.900128,.0573647,0,.771625,.898544,.0548668,0,.78979,.89689,.052527,0,.808162,.895165,.0503306,0,.826771,.893371,.0482668,0,.845654,.891572,.0463605,0,.864863,.889763,.0445998,0,.884472,.887894,.0429451,0,.904592,.885967,.0413884,0,.925407,.883984,.0399225,0,.947271,.881945,.0385405,0,.97105,.879854,.0372362,0,1,.999804,.995833,0,0,.938155,.933611,0,.0158731,.864755,.854311,0,.0317461,.888594,.865264,0,.0476191,.905575,.863922,0,.0634921,.915125,.850558,0,.0793651,.920665,.829254,0,.0952381,.924073,.802578,0,.111111,.926304,.772211,0,.126984,.927829,.739366,0,.142857,.928924,.705033,0,.15873,.92973,.670019,0,.174603,.930339,.634993,0,.190476,.930811,.600485,0,.206349,.931191,.566897,0,.222222,.93149,.534485,0,.238095,.931737,.503429,0,.253968,.931939,.473811,0,.269841,.932108,.445668,0,.285714,.93225,.418993,0,.301587,.932371,.393762,0,.31746,.932474,.369939,0,.333333,.932562,.347479,0,.349206,.932638,.326336,0,.365079,.932703,.306462,0,.380952,.93276,.287805,0,.396825,.932809,.270313,0,.412698,.932851,.253933,0,.428571,.932887,.23861,0,.444444,.932917,.224289,0,.460317,.932943,.210917,0,.47619,.932965,.19844,0,.492063,.932982,.186807,0,.507937,.932995,.175966,0,.52381,.933005,.165869,0,.539683,.933011,.156468,0,.555556,.933013,.147719,0,.571429,.933013,.139579,0,.587302,.93301,.132007,0,.603175,.933004,.124965,0,.619048,.932994,.118416,0,.634921,.932982,.112326,0,.650794,.932968,.106663,0,.666667,.93295,.101397,0,.68254,.932931,.0964993,0,.698413,.932908,.0919438,0,.714286,.932883,.0877057,0,.730159,.932856,.0837623,0,.746032,.932827,.0800921,0,.761905,.932796,.0766754,0,.777778,.932762,.0734936,0,.793651,.932727,.0705296,0,.809524,.932689,.0677676,0,.825397,.93265,.0651929,0,.84127,.932609,.0627917,0,.857143,.932565,.0605515,0,.873016,.932521,.0584606,0,.888889,.932474,.0565082,0,.904762,.932427,.0546841,0,.920635,.932377,.0529793,0,.936508,.932326,.0513851,0,.952381,.932274,.0498936,0,.968254,.93222,.0484975,0,.984127,.932164,.0471899,0,1]),64,64,r.RGBAFormat,r.FloatType,r.UVMapping,r.ClampToEdgeWrapping,r.ClampToEdgeWrapping,r.LinearFilter,r.NearestFilter,1);i.a.LTC_1=e,i.a.LTC_2=t;var n={ltc_1:{value:null},ltc_2:{value:null}};Object.assign(o.ShaderLib.standard.uniforms,n),Object.assign(o.ShaderLib.physical.uniforms,n)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(163),s=n(798),o=n(5),i=n(202),a=n(200),_=n(83);function c(e){return class extends e{constructor(){super(...arguments),this.light=o.ParamConfig.FOLDER(),this.color=o.ParamConfig.COLOR([1,1,1]),this.intensity=o.ParamConfig.FLOAT(1),this.distance=o.ParamConfig.FLOAT(100,{range:[0,100]}),this.cast_shadows=o.ParamConfig.BOOLEAN(1),this.shadow_res=o.ParamConfig.VECTOR2([1024,1024]),this.shadow_bias=o.ParamConfig.FLOAT(.001),this.show_helper=o.ParamConfig.BOOLEAN(1),this.helper_size=o.ParamConfig.FLOAT(1,{visible_if:{show_helper:1}})}}}t.DirectionalLightParamConfig=c;class l extends(c(_.TransformedParamConfig(o.NodeParamsConfig))){}const u=new l;class d extends a.BaseLightTransformedObjNode{constructor(){super(...arguments),this.params_config=u,this._helper_controller=new i.HelperController(this,s.DirectionalLightHelper,"DirectionalLightHelper")}static type(){return"directional_light"}initialize_node(){this._helper_controller.initialize_node()}create_light(){const e=new r.DirectionalLight;return e.castShadow=!0,e.shadow.bias=-.001,e.shadow.mapSize.x=1024,e.shadow.mapSize.y=1024,e.shadow.camera.near=.1,this._target_target=e.target,this._target_target.name="DirectionalLight Default Target",this.object.add(this._target_target),e}update_light_params(){this.light.color=this.pv.color,this.light.intensity=this.pv.intensity,this.light.shadow.camera.far=this.pv.distance,this._helper_controller.update()}update_shadow_params(){this.light.castShadow=this.pv.cast_shadows,this.light.shadow.mapSize.copy(this.pv.shadow_res),this.light.shadow.bias=this.pv.shadow_bias,this.light.shadow.camera.updateProjectionMatrix()}}t.DirectionalLightObjNode=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(4),s=n(6),o=n(41),i=n(201),a=n(76);class _ extends i.BaseLightHelper{constructor(){super(...arguments),this._square=new a.Line,this._line_material=new o.LineBasicMaterial({fog:!1})}build_helper(){const e=new s.BufferGeometry;e.setAttribute("position",new r.Float32BufferAttribute([-1,1,0,1,1,0,1,-1,0,-1,-1,0,-1,1,0],3)),this._square.geometry=e,this._square.material=this._line_material,this._square.rotateX(.5*Math.PI),this.object.add(this._square)}update(){this._object.scale.setScalar(this.node.pv.helper_size),this._line_material.color.copy(this.node.light.color)}}t.DirectionalLightHelper=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(288),s=n(800),o=n(274),i=n(5),a=n(202);class _ extends i.NodeParamsConfig{constructor(){super(...arguments),this.sky_color=i.ParamConfig.COLOR([.2,.7,1]),this.ground_color=i.ParamConfig.COLOR([.1,.1,.25]),this.intensity=i.ParamConfig.FLOAT(1),this.position=i.ParamConfig.VECTOR3([0,1,0]),this.show_helper=i.ParamConfig.BOOLEAN(1),this.helper_size=i.ParamConfig.FLOAT(1,{visible_if:{show_helper:1}})}}const c=new _;class l extends o.TypedLightObjNode{constructor(){super(...arguments),this.params_config=c,this._helper_controller=new a.HelperController(this,s.HemisphereLightHelper,"HemisphereLightHelper")}static type(){return"hemisphere_light"}create_light(){return new r.HemisphereLight}initialize_node(){this.io.inputs.set_count(0,1),this._helper_controller.initialize_node()}update_light_params(){this.light.color=this.pv.sky_color,this.light.groundColor=this.pv.ground_color,this.light.position.copy(this.pv.position),this.light.intensity=this.pv.intensity,this._helper_controller.update()}}t.HemisphereLightObjNode=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(7),s=n(203),o=n(4),i=n(42),a=n(1),_=n(201);class c extends _.BaseLightHelper{constructor(){super(...arguments),this._geometry=new s.OctahedronBufferGeometry(1),this._quat=new i.Quaternion,this._default_position=new a.Vector3(0,1,0),this._color1=new r.Color,this._color2=new r.Color}build_helper(){this._geometry.rotateZ(.5*Math.PI),this._material.vertexColors=!0;const e=this._geometry.getAttribute("position"),t=new Float32Array(3*e.count);this._geometry.setAttribute("color",new o.BufferAttribute(t,3)),this._object.geometry=this._geometry,this._object.material=this._material}update(){if(!this.node.pv.position)return;this._object.position.copy(this.node.pv.position).multiplyScalar(-1),this._quat.setFromUnitVectors(this._default_position,this.node.pv.position),this._object.setRotationFromQuaternion(this._quat),this._object.scale.setScalar(this.node.pv.helper_size);const e=this._geometry.getAttribute("color");this._color1.copy(this.node.light.color),this._color2.copy(this.node.light.groundColor);for(let t=0,n=e.count;t<n;t++){const r=t<n/2?this._color1:this._color2;e.setXYZ(t,r.r,r.g,r.b)}e.needsUpdate=!0}}t.HemisphereLightHelper=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(164),s=n(802),o=n(200),i=n(83),a=n(5),_=n(202);class c extends(i.TransformedParamConfig(a.NodeParamsConfig)){constructor(){super(...arguments),this.light=a.ParamConfig.FOLDER(),this.color=a.ParamConfig.COLOR([1,1,1]),this.intensity=a.ParamConfig.FLOAT(1),this.decay=a.ParamConfig.FLOAT(.1),this.distance=a.ParamConfig.FLOAT(100),this.cast_shadows=a.ParamConfig.BOOLEAN(1),this.shadow_res=a.ParamConfig.VECTOR2([1024,1024],{visible_if:{cast_shadows:1}}),this.shadow_bias=a.ParamConfig.FLOAT(.001,{visible_if:{cast_shadows:1}}),this.shadow_near=a.ParamConfig.FLOAT(1,{visible_if:{cast_shadows:1}}),this.shadow_far=a.ParamConfig.FLOAT(100,{visible_if:{cast_shadows:1}}),this.show_helper=a.ParamConfig.BOOLEAN(1),this.helper_size=a.ParamConfig.FLOAT(1,{visible_if:{show_helper:1}})}}const l=new c;class u extends o.BaseLightTransformedObjNode{constructor(){super(...arguments),this.params_config=l,this._helper_controller=new _.HelperController(this,s.PointLightHelper,"PointLightHelper")}static type(){return"point_light"}initialize_node(){this._helper_controller.initialize_node()}create_light(){const e=new r.PointLight;return e.castShadow=!0,e.shadow.bias=-.001,e.shadow.mapSize.x=1024,e.shadow.mapSize.y=1024,e.shadow.camera.near=.1,e}update_light_params(){this.light.color=this.pv.color,this.light.intensity=this.pv.intensity,this.light.decay=this.pv.decay,this.light.distance=this.pv.distance,this._helper_controller.update()}update_shadow_params(){this.light.castShadow=this.pv.cast_shadows,this.light.shadow.mapSize.copy(this.pv.shadow_res),this.light.shadow.camera.near=this.pv.shadow_near,this.light.shadow.camera.far=this.pv.shadow_far,this.light.shadow.bias=this.pv.shadow_bias}}t.PointLightObjNode=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(161),s=n(201);class o extends s.BaseLightHelper{build_helper(){this._object.geometry=new r.SphereBufferGeometry(1,4,2),this._object.material=this._material}update(){this._object.scale.setScalar(this.node.pv.helper_size),this._material.color.copy(this.node.light.color)}}t.PointLightHelper=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(165),s=n(200),o=n(83),i=n(5),a=n(202),_=n(804);class c extends(o.TransformedParamConfig(i.NodeParamsConfig)){constructor(){super(...arguments),this.light=i.ParamConfig.FOLDER(),this.color=i.ParamConfig.COLOR([1,1,1]),this.intensity=i.ParamConfig.FLOAT(1),this.angle=i.ParamConfig.FLOAT(45,{range:[0,180]}),this.penumbra=i.ParamConfig.FLOAT(.1),this.decay=i.ParamConfig.FLOAT(.1,{range:[0,1]}),this.distance=i.ParamConfig.FLOAT(100,{range:[0,100]}),this.cast_shadows=i.ParamConfig.BOOLEAN(1),this.shadow_res=i.ParamConfig.VECTOR2([1024,1024]),this.shadow_bias=i.ParamConfig.FLOAT(.001),this.show_helper=i.ParamConfig.BOOLEAN(1),this.helper_size=i.ParamConfig.FLOAT(1,{visible_if:{show_helper:1}})}}const l=new c;class u extends s.BaseLightTransformedObjNode{constructor(){super(...arguments),this.params_config=l,this._helper_controller=new a.HelperController(this,_.SpotLightHelper,"SpotLightHelper")}static type(){return"spot_light"}initialize_node(){this._helper_controller.initialize_node()}create_light(){const e=new r.SpotLight;return e.castShadow=!0,e.shadow.bias=-.001,e.shadow.mapSize.x=1024,e.shadow.mapSize.y=1024,e.shadow.camera.near=.1,this._target_target=e.target,this._target_target.name="SpotLight Default Target",this.object.add(this._target_target),e}update_light_params(){this.light.color=this.pv.color,this.light.intensity=this.pv.intensity,this.light.angle=this.pv.angle*(Math.PI/180),this.light.penumbra=this.pv.penumbra,this.light.decay=this.pv.decay,this.light.distance=this.pv.distance,this._helper_controller.update()}update_shadow_params(){this.light.castShadow=this.pv.cast_shadows,this.light.shadow.mapSize.copy(this.pv.shadow_res),this.light.shadow.bias=this.pv.shadow_bias}}t.SpotLightObjNode=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(201),s=n(6),o=n(4),i=n(41),a=n(57);class _ extends r.BaseLightHelper{constructor(){super(...arguments),this._cone=new a.LineSegments,this._line_material=new i.LineBasicMaterial({fog:!1})}build_helper(){const e=new s.BufferGeometry,t=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let e=0,n=1,r=32;e<r;e++,n++){const s=e/r*Math.PI*2,o=n/r*Math.PI*2;t.push(Math.cos(s),Math.sin(s),1,Math.cos(o),Math.sin(o),1)}e.setAttribute("position",new o.Float32BufferAttribute(t,3)),this._cone.geometry=e,this._cone.material=this._line_material,this._cone.rotateX(.5*Math.PI),this.object.add(this._cone)}update(){const e=(this.node.light.distance?this.node.light.distance:1e3)*this.node.pv.helper_size,t=e*Math.tan(this.node.light.angle);this._cone.scale.set(t,t,e),this._line_material.color.copy(this.node.light.color)}}t.SpotLightHelper=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(204),s=n(27),o=n(69);class i extends r.BaseManagerObjNode{constructor(){super(...arguments),this.render_order=o.ObjNodeRenderOrder.EVENT,this._children_controller_context=s.NodeContext.EVENT}static type(){return"events"}initialize_node(){var e;null===(e=this.children_controller)||void 0===e||e.init()}create_node(e){return super.create_node(e)}children(){return super.children()}nodes_by_type(e){return super.nodes_by_type(e)}}t.EventsObjNode=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(204),s=n(27),o=n(69);class i extends r.BaseManagerObjNode{constructor(){super(...arguments),this.render_order=o.ObjNodeRenderOrder.MAT,this._children_controller_context=s.NodeContext.MAT}static type(){return"materials"}initialize_node(){var e;null===(e=this.children_controller)||void 0===e||e.init()}create_node(e){return super.create_node(e)}children(){return super.children()}nodes_by_type(e){return super.nodes_by_type(e)}}t.MaterialsObjNode=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(204),s=n(27);class o extends r.BaseManagerObjNode{constructor(){super(...arguments),this._children_controller_context=s.NodeContext.COP}static type(){return"cop"}initialize_node(){var e;null===(e=this.children_controller)||void 0===e||e.init()}create_node(e){return super.create_node(e)}children(){return super.children()}nodes_by_type(e){return super.nodes_by_type(e)}}t.CopObjNode=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(204),s=n(27);class o extends r.BaseManagerObjNode{constructor(){super(...arguments),this._children_controller_context=s.NodeContext.POST}static type(){return"post_process"}initialize_node(){var e;null===(e=this.children_controller)||void 0===e||e.init()}}t.PostProcessObjNode=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(69),s=n(40),o=n(810),i=n(27),a=n(83),_=n(94),c=n(5);class l extends(a.TransformedParamConfig(c.NodeParamsConfig)){constructor(){super(...arguments),this.display=c.ParamConfig.BOOLEAN(1)}}const u=new l;class d extends r.TypedObjNode{constructor(){super(...arguments),this.params_config=u,this.transform_controller=new a.TransformController(this),this._display_node_controller=new o.DisplayNodeController(this),this.flags=new _.FlagsControllerD(this),this._sop_group=this._create_sop_group(),this._children_controller_context=i.NodeContext.SOP,this._on_create_bound=this._on_create.bind(this),this._on_child_add_bound=this._on_child_add.bind(this)}static type(){return"geo"}get display_node_controller(){return this._display_node_controller}_create_sop_group(){return new s.Group}get sop_group(){return this._sop_group}set_sop_group_name(){this._sop_group.name=`${this.full_path()}:sop_group`}initialize_node(){var e;null===(e=this.children_controller)||void 0===e||e.init(),this.lifecycle.add_on_create_hook(this._on_create_bound),this.lifecycle.add_on_child_add_hook(this._on_child_add_bound),this.display_node_controller.initialize_node(),this.transform_controller.initialize_node(),this.object.add(this.sop_group),this.name_controller.add_post_set_full_path_hook(this.set_sop_group_name.bind(this)),this._create_sop_group()}create_object(){return new s.Group}request_display_node(){this.scene.loading_controller.auto_updating}is_display_node_cooking(){if(this.flags.display.active){const e=this._display_node_controller.display_node;return!!e&&e.is_dirty}return!1}create_node(e){return super.create_node(e)}children(){return super.children()}nodes_by_type(e){return super.nodes_by_type(e)}_on_create(){this.create_node("text")}_on_child_add(e){var t,n;this.scene.loading_controller.loaded&&1==this.children().length&&(null===(n=null===(t=e.flags)||void 0===t?void 0:t.display)||void 0===n||n.set(!0))}cook(){this.transform_controller.update(),this.object.visible=this.pv.display,this.cook_controller.end_cook()}}t.GeoObjNode=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(67);t.DisplayNodeController=class{constructor(e){this.node=e,this._children_uuids_dict={},this._children_length=0,this._request_display_node_container_bound=this.request_display_node_container.bind(this),this._graph_node=new s.CoreGraphNode(e.scene,"DisplayNodeController"),this._graph_node.dirty_controller.add_post_dirty_hook("_request_display_node_container",this._request_display_node_container_bound)}get display_node(){return this._display_node}set_parent_object(e){this._parent_object=e}get parent_object(){return this._parent_object||this.node.object}initialize_node(){this.set_parent_object(this.node.sop_group),this.node.flags.display.add_hook(()=>{this.node.sop_group.visible=this.used_in_scene,this.node.flags.display.active&&this.request_display_node_container()}),this.node.lifecycle.add_on_child_add_hook(e=>{var t,n;this._display_node||null===(n=null===(t=e.flags)||void 0===t?void 0:t.display)||void 0===n||n.set(!0)})}set_display_node(e){return r.__awaiter(this,void 0,void 0,(function*(){if(this._display_node!=e){const t=this._display_node;t&&(t.flags.display.set(!1),this._graph_node.remove_graph_input(t),this.remove_children()),this._display_node=e,this._display_node&&this._graph_node.add_graph_input(this._display_node),this.request_display_node_container()}}))}remove_children(){let e;for(;e=this.parent_object.children.pop();)this.parent_object.remove(e)}get used_in_scene(){return this.node.used_in_scene&&this.node.flags.display.active&&1==this.node.pv.display}request_display_node_container(){return r.__awaiter(this,void 0,void 0,(function*(){if(this.node.scene.loading_controller.loaded&&this.used_in_scene&&this._display_node){const e=(yield this._display_node.request_container()).core_content();if(e){const t=e.objects();let n=t.length!=this._children_length;if(!n)for(let e of t)e.uuid in this._children_uuids_dict||(n=!0);if(n){this.remove_children(),this._children_uuids_dict={};for(let e of t)this.parent_object.add(e),this._children_uuids_dict[e.uuid]=!0;this._children_length=t.length}}else this.remove_children(),this._children_uuids_dict={},this._children_length=0}}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(69),s=n(40),o=n(83),i=n(94),a=n(812),_=n(5);class c extends(o.TransformedParamConfig(_.NodeParamsConfig)){}const l=new c;class u extends r.TypedObjNode{constructor(){super(...arguments),this.params_config=l,this.transform_controller=new o.TransformController(this),this.flags=new i.FlagsControllerD(this),this._helper=new a.AxesHelper(1)}static type(){return"null"}create_object(){return new s.Group}initialize_node(){this.transform_controller.initialize_node(),this.object.add(this._helper),this.flags.display.add_hook(()=>{this._helper.visible=this.flags.display.active})}cook(){this.transform_controller.update(),this.cook_controller.end_cook()}}t.NullObjNode=u},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(69),s=n(289),o=n(290),i={color:new(n(7).Color)(1,1,1),near:0,far:100,density:25e-5},a=n(5),_=n(94);class c extends a.NodeParamsConfig{constructor(){super(...arguments),this.color=a.ParamConfig.COLOR(i.color.toArray()),this.exponential=a.ParamConfig.BOOLEAN(0),this.density=a.ParamConfig.FLOAT(1),this.near=a.ParamConfig.FLOAT(0,{range:[0,100]}),this.far=a.ParamConfig.FLOAT(100,{range:[0,100]})}}const l=new c;class u extends r.TypedObjNode{constructor(){super(...arguments),this.params_config=l,this.flags=new _.FlagsControllerD(this),this.render_order=r.ObjNodeRenderOrder.MANAGER,this._attachable_to_hierarchy=!1}initialize_node(){this._linear_fog=new o.Fog(i.color.getHex(),i.near,i.far),this._linear_fogexp2=new s.FogExp2(i.color.getHex(),i.density)}static type(){return"fog"}cook(){let e;this.pv.exponential?(this._linear_fogexp2.density=this.pv.density,e=this._linear_fogexp2):(this._linear_fog.near=this.pv.near,this._linear_fog.far=this.pv.far,e=this._linear_fog),e.color.copy(this.pv.color),this.scene.default_scene.fog=e,this.cook_controller.end_cook()}}t.FogObjNode=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(69),s=n(55),o=n(5);class i extends o.NodeParamsConfig{constructor(){super(...arguments),this.bg_color=o.ParamConfig.COLOR([0,0,0])}}const a=new i;class _ extends r.TypedObjNode{constructor(){super(...arguments),this.params_config=a}static type(){return"scene"}create_object(){return new s.Scene}initialize_node(){super.initialize_node(),this.io.outputs.set_has_one_output()}cook(){this.cook_controller.end_cook()}}t.SceneObjNode=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(63),s=n(377),o=n(825),i=-.5,a=.5,_=.5,c=-.5,l=n(5),u=n(206),d=n(136),h=n(205),p=n(83);function m(e){return class extends e{constructor(){super(...arguments),this.size=l.ParamConfig.FLOAT(1)}}}t.OrthographicCameraObjParamConfigMixin=m;class f extends(u.CameraPostProcessParamConfig(d.CameraBackgroundParamConfig(p.TransformedParamConfig(h.LayerParamConfig(m(s.CameraTransformParamConfig(l.NodeParamsConfig))))))){}const g=new f;class v extends s.TypedCameraObjNode{constructor(){super(...arguments),this.params_config=g}get background_controller_constructor(){return o.OrthographicCameraBackgroundController}static type(){return"orthographic_camera"}create_object(){return new r.OrthographicCamera(2*i,2*a,2*_,2*c,s.BASE_CAMERA_DEFAULT.near,s.BASE_CAMERA_DEFAULT.far)}update_camera(){this._update_for_aspect_ratio()}_update_for_aspect_ratio(){if(this._aspect){const e=this.pv.size||1,t=e*this._aspect,n=1;this._object.left=i*t*n,this._object.right=a*t*n,this._object.top=_*e*n,this._object.bottom=c*e*n,this._object.updateProjectionMatrix()}}}t.OrthographicCameraObjNode=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(817),o=n(270);t.ControlsController=class{constructor(e){this.node=e,this._applied_controls_by_element_id={},this._controls_node=null}controls_param(){return this.node.params.has("controls")?this.node.params.get("controls"):null}controls_node(){return r.__awaiter(this,void 0,void 0,(function*(){const e=this.node.p.controls,t=e.raw_input;if(t&&""!=t){e.is_dirty&&(yield e.compute());const t=e.found_node();if(t){if(t instanceof o.CameraOrbitControlsEventNode)return t;this.node.states.error.set("found node is not of a camera control type")}else this.node.states.error.set("no node has been found")}return null}))}update_controls(){return r.__awaiter(this,void 0,void 0,(function*(){const e=yield this.controls_node();e&&this._controls_node!=e&&this.dispose_control_refs(),this._controls_node=e}))}apply_controls(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=yield this.controls_node();if(t){const n=t.controls_id();let r=!1;if(this._applied_controls_by_element_id[e.id]&&this._applied_controls_by_element_id[e.id][n]&&(r=!0),!r){this._applied_controls_by_element_id[e.id]=this._applied_controls_by_element_id[e.id]||{},this._applied_controls_by_element_id[e.id][n]=!0;const r=yield t.apply_controls(this.node.object,e),o=new s.CameraControlsConfig(this.node.graph_node_id,t,r);return t.set_from_camera_node(r,this.node),this.set_controls_events(r),o}}}))}dispose_control_refs(){this._applied_controls_by_element_id={}}dispose_controls(e){return r.__awaiter(this,void 0,void 0,(function*(){delete this._applied_controls_by_element_id[e.id]}))}set_controls_events(e){this.controls_start_listener=()=>{this.on_controls_start(e)},this.controls_end_listener=()=>{this.on_controls_end(e)},e.addEventListener("start",this.controls_start_listener),e.addEventListener("end",this.controls_end_listener)}on_controls_start(e){}on_controls_end(e){if(e.target){const t=e.target.toArray();this.node.params.set_vector3("target",t)}this.node.update_transform_params_from_object()}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.CameraControlsConfig=class{constructor(e,t,n){this._camera_node_id=e,this._controls_node=t,this._controls=n}get camera_node_id(){return this._camera_node_id}get controls(){return this._controls}get controls_node(){return this._controls_node}is_equal(e){return e.camera_node_id==this._camera_node_id&&e.controls_node.graph_node_id==this._controls_node.graph_node_id}}},function(e,t,n){"use strict";n.r(t),n.d(t,"RenderPass",(function(){return s}));var r=n(72),s=function(e,t,n,s,o){r.a.call(this),this.scene=e,this.camera=t,this.overrideMaterial=n,this.clearColor=s,this.clearAlpha=void 0!==o?o:0,this.clear=!0,this.clearDepth=!1,this.needsSwap=!1};s.prototype=Object.assign(Object.create(r.a.prototype),{constructor:s,render:function(e,t,n){var r,s,o,i=e.autoClear;e.autoClear=!1,void 0!==this.overrideMaterial&&(o=this.scene.overrideMaterial,this.scene.overrideMaterial=this.overrideMaterial),this.clearColor&&(r=e.getClearColor().getHex(),s=e.getClearAlpha(),e.setClearColor(this.clearColor,this.clearAlpha)),this.clearDepth&&e.clearDepth(),e.setRenderTarget(this.renderToScreen?null:n),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),e.render(this.scene,this.camera),this.clearColor&&e.setClearColor(r,s),void 0!==this.overrideMaterial&&(this.scene.overrideMaterial=o),e.autoClear=i}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(820);class s extends r.BaseViewer{constructor(e,t,n){super(e,t,n),this._scene=t,this.do_render=!0,this._animate_method=this.animate.bind(this),this._canvas=document.createElement("canvas"),this._canvas.id=`canvas_id_${Math.random()}`.replace(".","_"),this._canvas.style.display="block",this._canvas.style.outline="none",this._container.appendChild(this._canvas),this._container.classList.add("CoreThreejsViewer"),this._container.style.height="100%",this._set_events()}_build(){this._init_display(),this.activate()}dispose(){this._cancel_animate(),this.controls_controller.dispose_controls()}_set_events(){this.events_controller.init(),this.webgl_controller.init(),window.onresize=()=>{this.cameras_controller.on_resize()}}_init_display(){var e;if(!this._canvas)return;this.cameras_controller.compute_size_and_aspect();const t=this.cameras_controller.size;null===(e=this.cameras_controller.camera_node)||void 0===e||e.post_process_controller.create_renderer(this._canvas,t),this.cameras_controller.prepare_current_camera(),this.animate()}animate(){var e;this.do_render&&(this._scene.time_controller.increment_time_if_playing(),this.render(),null===(e=this._controls_controller)||void 0===e||e.update(),this._request_animation_frame_id=requestAnimationFrame(this._animate_method))}_cancel_animate(){var e;this.do_render=!1,this._request_animation_frame_id&&cancelAnimationFrame(this._request_animation_frame_id),this._canvas&&(null===(e=this.cameras_controller.camera_node)||void 0===e||e.post_process_controller.delete_renderer(this._canvas))}render(){if(this.cameras_controller.camera_node&&this._canvas){const e=this.cameras_controller.size,t=this.cameras_controller.aspect;this.cameras_controller.camera_node.post_process_controller.render(this._canvas,e,t)}else console.warn("no camera to render with")}}t.ThreejsViewer=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(821),o=n(822),i=n(823),a=n(824);t.BaseViewer=class{constructor(e,t,n){this._container=e,this._scene=t,this._active=!1,this._display_scene=this._scene.default_scene,this._init_from_scene(n).then(()=>{this._build()})}get active(){return this._active}activate(){this._active=!0}deactivate(){this._active=!1}get cameras_controller(){return this._cameras_controller=this._cameras_controller||new s.CamerasController(this)}get controls_controller(){return this._controls_controller=this._controls_controller||new o.ControlsController(this)}get events_controller(){return this._events_controller=this._events_controller||new i.ViewerEventsController(this)}get webgl_controller(){return this._webgl_controller=this._webgl_controller||new a.WebGLController(this)}get container(){return this._container}get scene(){return this._scene}get canvas(){return this._canvas}_init_from_scene(e){return r.__awaiter(this,void 0,void 0,(function*(){yield this.cameras_controller.set_camera_node(e||this._scene.cameras_controller.master_camera_node)}))}reset_container_class(){this.container.classList.remove("hovered")}set_container_class_hovered(){this.container.classList.add("hovered")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(2),o=n(67);t.CamerasController=class{constructor(e){this.viewer=e,this._camera_node=null,this._size=new s.Vector2(100,100),this._aspect=1}set_camera_node(e){return r.__awaiter(this,void 0,void 0,(function*(){this._camera_node&&e.graph_node_id==this._camera_node.graph_node_id||(this._camera_node=e,this._update_graph_node(),yield this.viewer.controls_controller.create_controls())}))}_update_graph_node(){if(!this._camera_node)return;const e=this._camera_node.params.get_operator_path("controls");e&&(this._graph_node=this._graph_node||this._create_graph_node(),this._graph_node&&(this._graph_node.graph_disconnect_predecessors(),this._graph_node.add_graph_input(e)))}_create_graph_node(){if(!this._camera_node)return;const e=new o.CoreGraphNode(this._camera_node.scene,"viewer-controls");return e.add_post_dirty_hook("this.viewer.controls_controller",()=>r.__awaiter(this,void 0,void 0,(function*(){yield this.viewer.controls_controller.create_controls()}))),e}get camera_node(){return this._camera_node}get size(){return this._size}get aspect(){return this._aspect}on_resize(){var e;this.viewer.canvas&&(this.compute_size_and_aspect(),null===(e=this._camera_node)||void 0===e||e.post_process_controller.set_renderer_size(this.viewer.canvas,this._size),this.update_camera_aspect())}compute_size_and_aspect(){var e;this._update_size(),null===(e=this._camera_node)||void 0===e||e.scene.uniforms_controller.update_resolution_dependent_uniform_owners(this._size),this._aspect=this._get_aspect()}_update_size(){this._size.x=this.viewer.container.offsetWidth,this._size.y=this.viewer.container.offsetHeight}_get_aspect(){return this._size.x/this._size.y}update_camera_aspect(){var e;null===(e=this._camera_node)||void 0===e||e.setup_for_aspect_ratio(this._aspect)}prepare_current_camera(){return r.__awaiter(this,void 0,void 0,(function*(){this._camera_node&&(yield this._camera_node.request_container(),yield this._update_from_camera_container())}))}_update_from_camera_container(){return r.__awaiter(this,void 0,void 0,(function*(){this.update_camera_aspect(),yield this.viewer.controls_controller.create_controls()}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3);t.ControlsController=class{constructor(e){this.viewer=e,this._active=!1,this._controls=null,this._bound_on_controls_start=this._on_controls_start.bind(this),this._bound_on_controls_end=this._on_controls_end.bind(this)}get active(){return this._active}get camera_node(){return this.viewer.cameras_controller.camera_node}get controls(){return this._controls}create_controls(){var e;return r.__awaiter(this,void 0,void 0,(function*(){if(this.dispose_controls(),!this.viewer.canvas)return;const t=yield null===(e=this.camera_node)||void 0===e?void 0:e.controls_controller.apply_controls(this.viewer.canvas);t&&(this._controls=t.controls,this._controls&&(this.viewer.active?(this._controls.addEventListener("start",this._bound_on_controls_start),this._controls.addEventListener("end",this._bound_on_controls_end)):this.dispose_controls()))}))}update(){this._controls&&this._controls.update()}dispose_controls(){var e;this._controls&&(this.viewer.canvas&&(null===(e=this.camera_node)||void 0===e||e.controls_controller.dispose_controls(this.viewer.canvas)),this._bound_on_controls_start&&this._controls.removeEventListener("start",this._bound_on_controls_start),this._bound_on_controls_end&&this._controls.removeEventListener("end",this._bound_on_controls_end),this._controls.dispose(),this._controls=null)}_on_controls_start(){this._active=!0}_on_controls_end(){this._active=!1}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.ViewerEventsController=class{constructor(e){this.viewer=e,this._bound_on_mousedown=this._on_mousedown.bind(this),this._bound_on_mousemove=this._on_mousemove.bind(this),this._bound_on_mouseup=this._on_mouseup.bind(this)}get camera_node(){return this.viewer.cameras_controller.camera_node}get canvas(){return this.viewer.canvas}init(){this.canvas&&(this._bound_on_mousedown&&this.canvas.removeEventListener("mousedown",this._bound_on_mousedown),this._bound_on_mousemove&&this.canvas.removeEventListener("mousemove",this._bound_on_mousemove),this._bound_on_mouseup&&this.canvas.removeEventListener("mouseup",this._bound_on_mouseup),this._bound_on_mousedown=this._bound_on_mousedown||this._on_mousedown.bind(this),this._bound_on_mousemove=this._bound_on_mousemove||this._on_mousemove.bind(this),this._bound_on_mouseup=this._bound_on_mouseup||this._on_mouseup.bind(this),this.canvas.addEventListener("mousedown",this._bound_on_mousedown),this.canvas.addEventListener("mousemove",this._bound_on_mousemove),this.canvas.addEventListener("mouseup",this._bound_on_mouseup),this.canvas.addEventListener("touchstart",this._bound_on_mousedown,!1),this.canvas.addEventListener("touchmove",this._bound_on_mousemove,!1),this.canvas.addEventListener("touchend",this._bound_on_mouseup,!1),this.canvas.addEventListener("touchcancel",this._bound_on_mouseup,!1))}_on_mousedown(e){this.viewer.scene.events_controller.process_event(e,this.canvas,this.camera_node)}_on_mousemove(e){this.viewer.scene.events_controller.process_event(e,this.canvas,this.camera_node)}_on_mouseup(e){this.viewer.scene.events_controller.process_event(e,this.canvas,this.camera_node)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.WebGLController=class{constructor(e){this.viewer=e}init(){const e=this.viewer.canvas;e&&(e.onwebglcontextlost=this._on_webglcontextlost.bind(this),e.onwebglcontextrestored=this._on_webglcontextrestored.bind(this))}_on_webglcontextlost(){console.warn("context lost at frame",this.viewer.scene.frame),this.request_animation_frame_id?cancelAnimationFrame(this.request_animation_frame_id):console.warn("request_animation_frame_id not initialized"),console.warn("not canceled",this.request_animation_frame_id)}_on_webglcontextrestored(){console.log("context restored")}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(136),o=r.__importDefault(n(155));class i extends s.BaseBackgroundController{update_screen_quad(){const e=this.screen_quad;let t=this.node.params.float("size"),n=t;const r=this.node.params.float("far");!r||o.default(t)||o.default(n)||(e.scale.x=t,e.scale.y=n,e.position.z=-.9999*r)}}t.OrthographicCameraBackgroundController=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(47),s=n(377),o=n(827),i=50,a=n(5),_=n(206),c=n(136),l=n(205),u=n(83);function d(e){return class extends e{constructor(){super(...arguments),this.fov=a.ParamConfig.FLOAT(i,{range:[0,100]})}}}t.PerspectiveCameraObjParamConfigMixin=d;class h extends(_.CameraPostProcessParamConfig(c.CameraBackgroundParamConfig(u.TransformedParamConfig(l.LayerParamConfig(d(s.CameraTransformParamConfig(a.NodeParamsConfig))))))){}const p=new h;class m extends s.TypedCameraObjNode{constructor(){super(...arguments),this.params_config=p}static type(){return"perspective_camera"}get background_controller_constructor(){return o.PerspectiveCameraBackgroundController}create_object(){return new r.PerspectiveCamera(i,1,s.BASE_CAMERA_DEFAULT.near,s.BASE_CAMERA_DEFAULT.far)}update_camera(){this._object.fov!=this.pv.fov&&(this._object.fov=this.pv.fov,this._object.updateProjectionMatrix()),this._update_for_aspect_ratio()}_update_for_aspect_ratio(){this._aspect&&(this._object.aspect=this._aspect,this._object.updateProjectionMatrix())}}t.PerspectiveCameraObjNode=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(136),o=n(1),i=r.__importDefault(n(155)),a=r.__importDefault(n(207)),_={bl:{x:-1,y:-1},br:{x:1,y:-1},tl:{x:-1,y:1},tr:{x:1,y:1}},c=["bl","br","tl","tr"];class l extends s.BaseBackgroundController{constructor(){super(...arguments),this._bg_corner={bl:new o.Vector3,br:new o.Vector3,tl:new o.Vector3,tr:new o.Vector3},this._bg_center=new o.Vector3}update_screen_quad(){const e=this.screen_quad;for(let e of c)this._update_corner_vector(this._bg_corner[e],_[e]);let t=this._bg_corner.bl.distanceTo(this._bg_corner.br),n=this._bg_corner.bl.distanceTo(this._bg_corner.tl);this._bg_center.x=a.default(c.map(e=>this._bg_corner[e].x))/4,this._bg_center.y=a.default(c.map(e=>this._bg_corner[e].y))/4,this._bg_center.z=a.default(c.map(e=>this._bg_corner[e].z))/4;const r=this.node.params.float("far"),s=this.node.params.float("background_ratio");if(r&&!i.default(t)&&!i.default(n)){const o=r/this._bg_center.distanceTo(this.node.object.position),i=s||1;n=t>n?t/i:t*i,e.scale.x=t*o,e.scale.y=n*o,e.position.z=-.9999*r}}_update_corner_vector(e,t){this._bg_raycaster.setFromCamera(t,this.node.object),e.copy(this._bg_raycaster.ray.direction).multiplyScalar(this.node.params.float("far")).add(this._bg_raycaster.ray.origin)}}t.PerspectiveCameraBackgroundController=l},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(130),s=n(830),o=n(834),i=n(835),a=n(836),_=n(837),c=n(838),l=n(839),u=n(840),d=n(843),h=n(844),p=n(845),m=n(846),f=n(850),g=n(851),v=n(852),y=n(853),b=n(854),x=n(855),T=n(856),w=n(858),C=n(859),P=n(861),E=n(863),O=n(864),A=n(865),M=n(866),N=n(867),S=n(870),R=n(871),L=n(873),j=n(874),k=n(875),I=n(876),G=n(877),z=n(878),D=n(879),F=n(880),B=n(882),V=n(883),U=n(884),q=n(885),$=n(978),H=n(987),Y=n(988),X=n(989),W=n(990),J=n(991),K=n(992),Z=n(993),Q=n(994),ee=n(995),te=n(997),ne=n(998),re=n(999),se=n(1003),oe=n(1004),ie=n(1005),ae=n(1006),_e=n(1007);t.SopRegister=class{static run(e){e.register_node(s.AddSopNode,r.CATEGORY_SOP.INPUT),e.register_node(o.AnimationCopySopNode,r.CATEGORY_SOP.ANIMATION),e.register_node(i.AnimationMixerSopNode,r.CATEGORY_SOP.ANIMATION),e.register_node(a.AttribAddMultSopNode,r.CATEGORY_SOP.ATTRIBUTE),e.register_node(_.AttribCopySopNode,r.CATEGORY_SOP.ATTRIBUTE),e.register_node(c.AttribCreateSopNode,r.CATEGORY_SOP.ATTRIBUTE),e.register_node(l.AttribDeleteSopNode,r.CATEGORY_SOP.ATTRIBUTE),e.register_node(u.AttribNormalizeSopNode,r.CATEGORY_SOP.ATTRIBUTE),e.register_node(d.AttribPromoteSopNode,r.CATEGORY_SOP.ATTRIBUTE),e.register_node(h.AttribRemapSopNode,r.CATEGORY_SOP.ATTRIBUTE),e.register_node(p.AttribRenameSopNode,r.CATEGORY_SOP.ATTRIBUTE),e.register_node(m.AttribTransferSopNode,r.CATEGORY_SOP.ATTRIBUTE),e.register_node(f.BboxScatterSopNode,r.CATEGORY_SOP.MODIFIER),e.register_node(g.BlendSopNode,r.CATEGORY_SOP.MODIFIER),e.register_node(v.BoxSopNode,r.CATEGORY_SOP.PRIMITIVES),e.register_node(y.CacheSopNode,r.CATEGORY_SOP.MISC),e.register_node(x.CodeSopNode,r.CATEGORY_SOP.ADVANCED),e.register_node(b.CircleSopNode,r.CATEGORY_SOP.PRIMITIVES),e.register_node(T.ColorSopNode,r.CATEGORY_SOP.MODIFIER),e.register_node(w.ConeSopNode,r.CATEGORY_SOP.PRIMITIVES),e.register_node(C.CopySopNode,r.CATEGORY_SOP.MODIFIER),e.register_node(P.DataSopNode,r.CATEGORY_SOP.INPUT),e.register_node(E.DataUrlSopNode,r.CATEGORY_SOP.INPUT),e.register_node(O.DelaySopNode,r.CATEGORY_SOP.MISC),e.register_node(A.DeleteSopNode,r.CATEGORY_SOP.MODIFIER),e.register_node(M.FaceSopNode,r.CATEGORY_SOP.MODIFIER),e.register_node(N.FileSopNode,r.CATEGORY_SOP.INPUT),e.register_node(S.FuseSopNode,r.CATEGORY_SOP.MODIFIER),e.register_node(R.HexagonsSopNode,r.CATEGORY_SOP.PRIMITIVES),e.register_node(L.HierarchySopNode,r.CATEGORY_SOP.MISC),e.register_node(j.InstanceSopNode,r.CATEGORY_SOP.RENDER),e.register_node(k.JitterSopNode,r.CATEGORY_SOP.MODIFIER),e.register_node(I.LayerSopNode,r.CATEGORY_SOP.MODIFIER),e.register_node(G.LineSopNode,r.CATEGORY_SOP.PRIMITIVES),e.register_node(z.MaterialSopNode,r.CATEGORY_SOP.RENDER),e.register_node(D.MergeSopNode,r.CATEGORY_SOP.MISC),e.register_node(F.NoiseSopNode,r.CATEGORY_SOP.MISC),e.register_node(B.NormalsSopNode,r.CATEGORY_SOP.MODIFIER),e.register_node(V.NullSopNode,r.CATEGORY_SOP.MODIFIER),e.register_node(U.ObjectMergeSopNode,r.CATEGORY_SOP.INPUT),e.register_node(q.OcclusionSopNode,r.CATEGORY_SOP.RENDER),e.register_node($.ParticlesSystemGpuSopNode,r.CATEGORY_SOP.DYNAMICS),e.register_node(H.PeakSopNode,r.CATEGORY_SOP.MODIFIER),e.register_node(Y.PlaneSopNode,r.CATEGORY_SOP.PRIMITIVES),e.register_node(X.PointSopNode,r.CATEGORY_SOP.MODIFIER),e.register_node(W.PolywireSopNode,r.CATEGORY_SOP.MODIFIER),e.register_node(J.RaySopNode,r.CATEGORY_SOP.MODIFIER),e.register_node(K.ResampleSopNode,r.CATEGORY_SOP.MODIFIER),e.register_node(Z.ScatterSopNode,r.CATEGORY_SOP.MODIFIER),e.register_node(ee.SkinSopNode,r.CATEGORY_SOP.MODIFIER),e.register_node(Q.ShadowsSopNode,r.CATEGORY_SOP.MODIFIER),e.register_node(te.SphereSopNode,r.CATEGORY_SOP.PRIMITIVES),e.register_node(ne.SwitchSopNode,r.CATEGORY_SOP.MISC),e.register_node(re.TextSopNode,r.CATEGORY_SOP.PRIMITIVES),e.register_node(se.TorusSopNode,r.CATEGORY_SOP.PRIMITIVES),e.register_node(oe.TorusKnotSopNode,r.CATEGORY_SOP.PRIMITIVES),e.register_node(ie.TransformSopNode,r.CATEGORY_SOP.MODIFIER),e.register_node(ae.TubeSopNode,r.CATEGORY_SOP.PRIMITIVES),e.register_node(_e.UvProjectSopNode,r.CATEGORY_SOP.MODIFIER)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3).__importDefault(n(208)),s=n(6),o=n(4),i=n(13),a=n(35),_=n(5);class c extends _.NodeParamsConfig{constructor(){super(...arguments),this.create_point=_.ParamConfig.BOOLEAN(1),this.points_count=_.ParamConfig.INTEGER(1,{range:[1,100],range_locked:[!0,!1],visible_if:{create_point:!0}}),this.position=_.ParamConfig.VECTOR3([0,0,0],{visible_if:{create_point:!0}}),this.open=_.ParamConfig.BOOLEAN(0),this.connect_to_last_point=_.ParamConfig.BOOLEAN(0)}}const l=new c;class u extends i.TypedSopNode{constructor(){super(...arguments),this.params_config=l}static type(){return"add"}static displayed_input_names(){return["geometry to create polygons from (optional)"]}initialize_node(){this.io.inputs.set_count(0,1)}cook(e){this._objects=[],this._create_point(),this.set_objects(this._objects)}_create_point(){if(this.pv.create_point){const e=new s.BufferGeometry,t=[];r.default(this.pv.points_count,e=>{this.pv.position.toArray(t,3*e)}),e.setAttribute("position",new o.BufferAttribute(new Float32Array(t),3));const n=this.create_object(e,a.CoreConstant.OBJECT_TYPE.POINTS);this._objects&&this._objects.push(n)}}}t.AddSopNode=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3).__importDefault(n(207)),s=n(1),o=n(2),i=n(98),a=n(380),_=n(104);t.CoreFace=class{constructor(e,t){this._core_geometry=e,this._index=t,this._geometry=this._core_geometry.geometry()}get index(){return this._index}get points(){return this._points=this._points||this._get_points()}_get_points(){var e;const t=(null===(e=this._geometry.index)||void 0===e?void 0:e.array)||[],n=3*this._index;return[new a.CorePoint(this._core_geometry,t[n+0]),new a.CorePoint(this._core_geometry,t[n+1]),new a.CorePoint(this._core_geometry,t[n+2])]}get positions(){return this._positions=this._positions||this._get_positions()}_get_positions(){const e=this.points;return[e[0].position(),e[1].position(),e[2].position()]}get triangle(){return this._triangle=this._triangle||this._get_triangle()}_get_triangle(){const e=this.positions;return new i.Triangle(e[0],e[1],e[2])}get deltas(){return this._deltas=this._deltas||this._get_deltas()}_get_deltas(){return[this.positions[1].clone().sub(this.positions[0]),this.positions[2].clone().sub(this.positions[0])]}get area(){return this.triangle.getArea()}center(e){const t=this.positions;return e.x=(t[0].x+t[1].x+t[2].x)/3,e.y=(t[0].y+t[1].y+t[2].y)/3,e.z=(t[0].z+t[1].z+t[2].z)/3,e}random_position(e){let t=[_.CoreMath.rand_float(e),_.CoreMath.rand_float(6541*e)];return t[0]+t[1]>1&&(t[0]=1-t[0],t[1]=1-t[1]),this.positions[0].clone().add(this.deltas[0].clone().multiplyScalar(t[0])).add(this.deltas[1].clone().multiplyScalar(t[1]))}attrib_value_at_position(e,t){const n=new s.Vector3;this.triangle.getBarycoord(t,n);const r=n.toArray(),o=this._geometry.attributes[e].itemSize,i=this.points.map(t=>t.attrib_value(e));let a,_,c=0;switch(o){case 1:_=0;for(let e of i)_+=e*r[c],c++;a=_;break;default:for(let e of i){const t=e.multiplyScalar(r[c]);_?_.add(t):_=t,c++}a=_}return a}static interpolated_value(e,t,n,i){const a=[t.a,t.b,t.c],_=e.getAttribute("position").array,c=a.map(e=>new s.Vector3(_[3*e+0],_[3*e+1],_[3*e+2])),l=i.itemSize,u=i.array;let d=[];switch(l){case 1:d=a.map(e=>u[e]);break;case 2:d=a.map(e=>new o.Vector2(u[2*e+0],u[2*e+1]));break;case 3:d=a.map(e=>new s.Vector3(u[3*e+0],u[3*e+1],u[3*e+2]))}const h=a.map((e,t)=>n.distanceTo(c[t])),p=r.default([h[0]*h[1],h[0]*h[2],h[1]*h[2]]),m=[h[1]*h[2]/p,h[0]*h[2]/p,h[0]*h[1]/p];let f;switch(l){case 1:f=r.default(a.map((e,t)=>m[t]*d[t]));break;default:var g=a.map((e,t)=>d[t].multiplyScalar(m[t]));f=null;for(let e of g)f?f.add(e):f=e}return f}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(97);t.MonkeyPatcher=class{static patch(e){Object.assign(e,{clone:function(){return new r.InterleavedBufferAttribute(e.data.clone(),e.itemSize,e.offset,e.normalized)}})}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(115),s=n(53);class o extends r.TypedContainer{set_objects(e){}core_content_cloned(){if(this._content)return this._content.clone()}set_content(e){super.set_content(e)}first_object(){if(this._content)return this._content.objects()[0]}first_geometry(){const e=this.first_object();return e?e.geometry:null}objects_count(){return this._content?this._content.objects().length:0}objects_visible_count(){let e=0;return this._content&&(e=this._content.objects().filter(e=>e.visible).length),e}objects_count_by_type(){const e={},t=this._content;if(this._content&&t)for(let n of t.core_objects()){const t=n.human_type();null==e[t]&&(e[t]=0),e[t]+=1}return e}objects_names_by_type(){const e={},t=this._content;if(this._content&&t)for(let n of t.core_objects()){const t=n.human_type();e[t]=e[t]||[],e[t].push(n.name())}return e}vertex_attribute_names(){let e=[];const t=this.first_geometry();return t&&(e=Object.keys(t.attributes)),e}vertex_attribute_sizes_by_name(){let e={};const t=this.first_geometry();return t&&Object.keys(t.attributes).forEach(n=>{const r=t.attributes[n];e[n]=r.itemSize}),e}vertex_attribute_types_by_name(){let e={};const t=this.first_geometry();if(t){const n=new s.CoreGeometry(t);Object.keys(t.attributes).forEach(t=>{e[t]=n.attrib_type(t)})}return e}object_attribute_names(){let e=[];const t=this.first_object();return t&&(e=Object.keys(t.userData.attributes||{})),e}points_count(){return this._content?this._content.points_count():0}bounding_box(){return this._content.bounding_box()}center(){return this._content.center()}size(){return this._content.size()}}t.GeometryContainer=o},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(13),s=n(5),o=n(17);class i extends s.NodeParamsConfig{}const a=new i;class _ extends r.TypedSopNode{constructor(){super(...arguments),this.params_config=a}static type(){return"animation_copy"}static displayed_input_names(){return["geometry to copy animation to","geometry to copy animation from"]}initialize_node(){this.io.inputs.set_count(2),this.io.inputs.init_inputs_clonable_state([o.InputCloneMode.FROM_NODE,o.InputCloneMode.NEVER])}cook(e){const t=e[0],n=e[1].objects()[0],r=t.objects()[0],s=n.animations;s?(r.animations=s.map(e=>e.clone()),this.set_core_group(t)):this.states.error.set("no animation found")}}t.AnimationCopySopNode=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(13),o=r.__importDefault(n(21)),i=n(1012),a=n(17),_=n(24),c=n(61),l=n(5);class u extends l.NodeParamsConfig{constructor(){super(...arguments),this.time=l.ParamConfig.FLOAT("$T",{range:[0,10]}),this.prepare=l.ParamConfig.BUTTON(null,{callback:(e,t)=>{h.PARAM_CALLBACK_prepare(e,t)}})}}const d=new u;class h extends s.TypedSopNode{constructor(){super(...arguments),this.params_config=d,this._previous_time=null,this._mixer=null,this._actions_by_name={},this._values_by_param_name={}}static type(){return"animation_mixer"}static displayed_input_names(){return["geometry to be animated"]}initialize_node(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([a.InputCloneMode.FROM_NODE])}cook(e){this._mixer?(this._update_mixer(),this.cook_controller.end_cook()):this.create_mixer(e[0])}create_mixer(e){this._animation_target=e.objects()[0],this._mixer=new i.AnimationMixer(this._animation_target),this._remove_spare_params(),this._actions_by_name={},this._animation_target.animations&&this._animation_target.animations.forEach((e,t)=>{const n=e.name;let r=this._values_by_param_name[n];null==r&&(r=0==t?1:0);const s=this.add_param(_.ParamType.FLOAT,n,r,{spare:!0});if(s){const e=this._values_by_param_name[n];e&&s.set(e)}if(this._mixer){const t=this._mixer.clipAction(e);this._actions_by_name[e.name]=t}}),this.emit(c.NodeEvent.PARAMS_UPDATED),Object.keys(this._actions_by_name).forEach(e=>{this._actions_by_name[e].play()});const t={};this._animation_target.traverse(e=>{const n=e;n.material&&(o.default(n.material)||(t[n.material.uuid]=n.material))}),Object.keys(t).forEach(e=>{const n=t[e];n.skinning=!0,n.morphTargets=!0}),this._previous_time=null,this._update_mixer(),this._update_mixer_weights(),this.set_object(this._animation_target)}_remove_spare_params(){this._values_by_param_name={};const e=this.params.spare_names,t=[];e.forEach(e=>{const n=this.params.get_float(e);n&&(this._values_by_param_name[e]=n.value,t.push(e))}),t.length>0&&this.params.update_params({names_to_delete:t})}_update_mixer(){this.pv.time!=this._previous_time?this._update_mixer_time():this._update_mixer_weights()}_update_mixer_time(){const e=this.pv.time-(this._previous_time||0);this._mixer&&this._mixer.update(e),this._previous_time=this.pv.time}_update_mixer_weights(){for(let e of Object.keys(this._actions_by_name)){const t=this._actions_by_name[e],n=this.params.get_float(e).value;null!=n&&t.setEffectiveWeight(n)}}static PARAM_CALLBACK_prepare(e,t){e.prepare_animation_mixer()}prepare_animation_mixer(){return r.__awaiter(this,void 0,void 0,(function*(){this._mixer=null;const e=yield this.io.inputs.eval_required_input(0);this.create_mixer(e.core_content_cloned()),this.set_dirty()}))}}t.AnimationMixerSopNode=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(13),s=n(5),o=n(17);class i extends s.NodeParamsConfig{constructor(){super(...arguments),this.name=s.ParamConfig.STRING(""),this.pre_add=s.ParamConfig.FLOAT(0,{range:[0,1]}),this.mult=s.ParamConfig.FLOAT(1,{range:[0,1]}),this.post_add=s.ParamConfig.FLOAT(0,{range:[0,1]})}}const a=new i;class _ extends r.TypedSopNode{constructor(){super(...arguments),this.params_config=a}static type(){return"attrib_add_mult"}initialize_node(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([o.InputCloneMode.FROM_NODE])}cook(e){const t=e[0],n=t.attrib_names_matching_mask(this.pv.name);for(let e of n){const n=t.geometries();for(let t of n)this._update_attrib(e,t)}this.set_core_group(t)}_update_attrib(e,t){const n=t.getAttribute(e);if(n){const e=n.array,t=this.pv.pre_add,r=this.pv.mult,s=this.pv.post_add;for(let n=0;n<e.length;n++){const o=e[n];e[n]=(o+t)*r+s}this.io.inputs.input_cloned(0)||(n.needsUpdate=!0)}}}t.AttribAddMultSopNode=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(13),s=n(5),o=n(17),i=n(4);class a extends s.NodeParamsConfig{constructor(){super(...arguments),this.name=s.ParamConfig.STRING(""),this.tnew_name=s.ParamConfig.BOOLEAN(0),this.new_name=s.ParamConfig.STRING("",{visible_if:{tnew_name:1}})}}const _=new a;class c extends r.TypedSopNode{constructor(){super(...arguments),this.params_config=_}static type(){return"attrib_copy"}static displayed_input_names(){return["geometry to copy attributes to","geometry to copy attributes from"]}initialize_node(){this.io.inputs.set_count(2),this.io.inputs.init_inputs_clonable_state([o.InputCloneMode.FROM_NODE,o.InputCloneMode.NEVER])}create_params(){}cook(e){const t=e[0],n=e[1],r=n.attrib_names_matching_mask(this.pv.name);for(let e of r)this.copy_vertex_attribute_between_core_groups(t,n,e);return this.set_core_group(t)}copy_vertex_attribute_between_core_groups(e,t,n){const r=t.objects(),s=e.objects();if(s.length>r.length)this.states.error.set("second input does not have enough objects to copy attributes from");else for(let e=0;e<s.length;e++){const t=s[e].geometry,r=s[e].geometry;this.copy_vertex_attribute_between_geometries(t,r,n)}}copy_vertex_attribute_between_geometries(e,t,n){const r=t.getAttribute(n);if(r){const s=r.itemSize,o=t.getAttribute("position").array.length/3,a=e.getAttribute("position").array.length/3;a>o&&this.states.error.set("not enough points in second input");const _=r.array.slice(0,a*s),c=this.pv.tnew_name?this.pv.new_name:n;e.setAttribute(c,new i.Float32BufferAttribute(_,s))}else this.states.error.set(`attribute '${n}' does not exist on second input`)}}t.AttribCopySopNode=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=r.__importDefault(n(188)),o=n(13),i=n(35),a=n(114),_=n(17),c=n(5);class l extends c.NodeParamsConfig{constructor(){super(...arguments),this.group=c.ParamConfig.STRING(""),this.class=c.ParamConfig.INTEGER(i.AttribClass.VERTEX,{menu:{entries:i.AttribClassMenuEntries}}),this.type=c.ParamConfig.INTEGER(i.AttribType.NUMERIC,{menu:{entries:i.AttribTypeMenuEntries}}),this.name=c.ParamConfig.STRING("new_attrib"),this.size=c.ParamConfig.INTEGER(1,{range:[1,4],range_locked:[!0,!0],visible_if:{type:i.CoreConstant.ATTRIB_TYPE.NUMERIC}}),this.value1=c.ParamConfig.FLOAT(0,{visible_if:{type:i.CoreConstant.ATTRIB_TYPE.NUMERIC,size:1},expression:{for_entities:!0}}),this.value2=c.ParamConfig.VECTOR2([0,0],{visible_if:{type:i.CoreConstant.ATTRIB_TYPE.NUMERIC,size:2},expression:{for_entities:!0}}),this.value3=c.ParamConfig.VECTOR3([0,0,0],{visible_if:{type:i.CoreConstant.ATTRIB_TYPE.NUMERIC,size:3},expression:{for_entities:!0}}),this.value4=c.ParamConfig.VECTOR4([0,0,0,0],{visible_if:{type:i.CoreConstant.ATTRIB_TYPE.NUMERIC,size:4},expression:{for_entities:!0}}),this.string=c.ParamConfig.STRING("",{visible_if:{type:i.CoreConstant.ATTRIB_TYPE.STRING},expression:{for_entities:!0}})}}const u=new l;class d extends o.TypedSopNode{constructor(){super(...arguments),this.params_config=u,this._x_arrays_by_geometry_uuid={},this._y_arrays_by_geometry_uuid={},this._z_arrays_by_geometry_uuid={},this._w_arrays_by_geometry_uuid={}}static type(){return"attrib_create"}initialize_node(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([_.InputCloneMode.FROM_NODE])}cook(e){const t=e[0];if(this.pv.name&&""!=s.default(this.pv.name))switch(this.pv.class){case i.AttribClass.VERTEX:this.add_point_attribute(t);break;case i.AttribClass.OBJECT:this.add_object_attribute(t)}else this.states.error.set("attribute name is not valid")}add_point_attribute(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=e.core_objects();for(let e=0;e<t.length;e++){const n=t[e];switch(this.pv.type){case i.CoreConstant.ATTRIB_TYPE.NUMERIC:yield this.add_numeric_attribute_to_points(n);break;case i.CoreConstant.ATTRIB_TYPE.STRING:yield this.add_string_attribute_to_points(n)}}this.set_core_group(e)}))}add_object_attribute(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=e.core_objects_from_group(this.pv.group);switch(this.pv.type){case i.CoreConstant.ATTRIB_TYPE.NUMERIC:yield this.add_numeric_attribute_to_object(t);break;case i.CoreConstant.ATTRIB_TYPE.STRING:yield this.add_string_attribute_to_object(t)}this.set_core_group(e)}))}add_numeric_attribute_to_points(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=e.core_geometry();if(!t)return;const n=e.points_from_group(this.pv.group),r=[this.p.value1,this.p.value2,this.p.value3,this.p.value4][this.pv.size-1];if(r.has_expression()){t.has_attrib(this.pv.name)||t.add_numeric_attrib(this.pv.name,this.pv.size,r.value);const e=t.geometry(),s=e.getAttribute(this.pv.name).array;if(1==this.pv.size)this.p.value1.expression_controller&&(yield this.p.value1.expression_controller.compute_expression_for_points(n,(e,t)=>{s[e.index*this.pv.size+0]=t}));else{let t=[this.p.value2,this.p.value3,this.p.value4][this.pv.size-2].components;const r=new Array(t.length);let o;const i=[this._x_arrays_by_geometry_uuid,this._y_arrays_by_geometry_uuid,this._z_arrays_by_geometry_uuid,this._w_arrays_by_geometry_uuid];for(let a=0;a<t.length;a++)if(o=t[a],o.has_expression()&&o.expression_controller)r[a]=this._init_array_if_required(e,i[a],n.length),yield o.expression_controller.compute_expression_for_points(n,(e,t)=>{r[a][e.index]=t});else{const e=o.value;for(let t of n)s[t.index*this.pv.size+a]=e}for(let e=0;e<r.length;e++){const t=r[e];if(t)for(let n=0;n<t.length;n++)s[n*this.pv.size+e]=t[n]}}}else e.add_numeric_vertex_attrib(this.pv.name,this.pv.size,r.value)}))}add_numeric_attribute_to_object(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=[this.p.value1,this.p.value2,this.p.value3,this.p.value4][this.pv.size-1];if(t.has_expression())if(1==this.pv.size)this.p.value1.expression_controller&&(yield this.p.value1.expression_controller.compute_expression_for_objects(e,(e,t)=>{e.set_attrib_value(this.pv.name,t)}));else{let t=[this.p.value2,this.p.value3,this.p.value4][this.pv.size-2].components,n={};for(let t of e)n[t.index]=[];for(let r=0;r<t.length;r++){const s=t[r];if(s.has_expression()&&s.expression_controller)yield s.expression_controller.compute_expression_for_objects(e,(e,t)=>{n[e.index][r]=t});else for(let t of e)n[t.index][r]=s.value}for(let t=0;t<e.length;t++){const r=e[t],s=n[r.index];r.set_attrib_value(this.pv.name,s)}}else for(let n of e)n.set_attrib_value(this.pv.name,t.value)}))}add_string_attribute_to_points(e){var t;return r.__awaiter(this,void 0,void 0,(function*(){const n=e.points_from_group(this.pv.group),r=this.p.string,s=[];r.has_expression()&&r.expression_controller?yield r.expression_controller.compute_expression_for_points(n,(e,t)=>{s[e.index]=t}):s.push(r.value);const o=a.CoreAttribute.array_to_indexed_arrays(s);null===(t=e.core_geometry())||void 0===t||t.set_indexed_attribute(this.pv.name,o.values,o.indices)}))}add_string_attribute_to_object(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=this.p.string;if(t.has_expression()&&t.expression_controller)yield t.expression_controller.compute_expression_for_objects(e,(e,t)=>{e.set_attrib_value(this.pv.name,t)});else for(let n of e)n.set_attrib_value(this.pv.name,t.value)}))}_init_array_if_required(e,t,n){const r=e.uuid,s=t[r];return s?s.length<n&&(t[r]=new Array(n)):t[r]=new Array(n),t[r]}}t.AttribCreateSopNode=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(13),s=n(275),o=n(53),i=n(35),a=n(17),_=n(5);class c extends _.NodeParamsConfig{constructor(){super(...arguments),this.class=_.ParamConfig.INTEGER(i.AttribClass.VERTEX,{menu:{entries:i.AttribClassMenuEntries}}),this.name=_.ParamConfig.STRING("")}}const l=new c;class u extends r.TypedSopNode{constructor(){super(...arguments),this.params_config=l}static type(){return"attrib_delete"}static displayed_input_names(){return["geometry to delete attributes from"]}initialize_node(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([a.InputCloneMode.FROM_NODE])}cook(e){const t=e[0],n=t.attrib_names_matching_mask(this.pv.name);for(let e of n)switch(this.pv.class){case i.AttribClass.VERTEX:this.delete_vertex_attribute(t,e);case i.AttribClass.OBJECT:this.delete_object_attribute(t,e)}this.set_core_group(t)}delete_vertex_attribute(e,t){for(let n of e.objects())n.traverse(e=>{const n=e;if(n.geometry){new o.CoreGeometry(n.geometry).delete_attribute(t)}})}delete_object_attribute(e,t){for(let n of e.objects()){let e=0;n.traverse(n=>{const r=n;new s.CoreObject(r,e).delete_attribute(t),e++})}}}t.AttribDeleteSopNode=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(13),o=n(1),i=r.__importDefault(n(209)),a=r.__importDefault(n(277)),_=r.__importDefault(n(44)),c=n(17),l=n(5);class u extends l.NodeParamsConfig{constructor(){super(...arguments),this.name=l.ParamConfig.STRING(""),this.change_name=l.ParamConfig.BOOLEAN(!1),this.new_name=l.ParamConfig.STRING("",{visible_if:{change_name:1}})}}const d=new u;class h extends s.TypedSopNode{constructor(){super(...arguments),this.params_config=d}static type(){return"attrib_normalize"}initialize_node(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([c.InputCloneMode.FROM_NODE])}cook(e){const t=e[0];this._normalize_attribute(t),this.set_core_group(t)}_normalize_attribute(e){const t=e.points();if(0===t.length)return;if(""===this.pv.name)return;const n=t[0].attrib_size(this.pv.name),r=t.map(e=>e.attrib_value(this.pv.name));let s,c,l=[];switch(n){case 1:if(s=a.default(r),c=i.default(r),_.default(s)&&_.default(c))for(let e of r){const t=c>s?(e-s)/(c-s):1;l.push(t)}break;case 3:if(s=new o.Vector3(a.default(r.map(e=>e.x)),a.default(r.map(e=>e.y)),a.default(r.map(e=>e.z))),c=new o.Vector3(i.default(r.map(e=>e.x)),i.default(r.map(e=>e.y)),i.default(r.map(e=>e.z))),s instanceof o.Vector3&&c instanceof o.Vector3)for(let e of r){const t=new o.Vector3((e.x-s.x)/(c.x-s.x),(e.y-s.y)/(c.y-s.y),(e.z-s.z)/(c.z-s.z));l.push(t)}}let u=this.pv.name;this.pv.change_name&&(u=this.pv.new_name,e.has_attrib(u)||e.add_numeric_vertex_attrib(u,n,0)),l.forEach((e,n)=>{t[n].set_attrib_value(u,e)})}}t.AttribNormalizeSopNode=h},,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=r.__importDefault(n(209)),o=r.__importDefault(n(277)),i=n(17),a=n(13),_=n(35),c=n(49);var l;!function(e){e[e.MIN=0]="MIN",e[e.MAX=1]="MAX",e[e.FIRST_FOUND=2]="FIRST_FOUND"}(l=t.AttribPromoteMode||(t.AttribPromoteMode={}));const u=[{name:"min",value:l.MIN},{name:"max",value:l.MAX},{name:"first_found",value:l.FIRST_FOUND}],d=n(5);class h extends d.NodeParamsConfig{constructor(){super(...arguments),this.class_from=d.ParamConfig.INTEGER(_.AttribClass.VERTEX,{menu:{entries:_.AttribClassMenuEntries}}),this.class_to=d.ParamConfig.INTEGER(_.AttribClass.OBJECT,{menu:{entries:_.AttribClassMenuEntries}}),this.mode=d.ParamConfig.INTEGER(l.FIRST_FOUND,{menu:{entries:u}}),this.name=d.ParamConfig.STRING("")}}const p=new h;class m extends a.TypedSopNode{constructor(){super(...arguments),this.params_config=p,this._values_per_attrib_name={},this._filtered_values_per_attrib_name={}}static type(){return"attrib_promote"}initialize_node(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([i.InputCloneMode.FROM_NODE])}create_params(){}cook(e){this._core_group=e[0],this._values_per_attrib_name={},this._filtered_values_per_attrib_name={};for(let e of this._core_group.core_objects())this._core_object=e,this.find_values(),this.filter_values(),this.set_values();this.set_core_group(this._core_group)}find_values(){const e=c.CoreString.attrib_names(this.pv.name);for(let t of e)switch(this.pv.class_from){case _.AttribClass.VERTEX:return this.find_values_from_points(t);case _.AttribClass.OBJECT:return this.find_values_from_object(t)}}find_values_from_points(e){if(this._core_object){const t=this._core_object.points();this._values_per_attrib_name[e]=t.map(t=>t.attrib_value(e))}}find_values_from_object(e){this._values_per_attrib_name[e]=[],this._core_object&&this._values_per_attrib_name[e].push(this._core_object.attrib_value(e))}filter_values(){const e=Object.keys(this._values_per_attrib_name);for(let t of e){const e=this._values_per_attrib_name[t];switch(this.pv.mode){case l.MIN:this._filtered_values_per_attrib_name[t]=o.default(e);break;case l.MAX:this._filtered_values_per_attrib_name[t]=s.default(e);break;case l.FIRST_FOUND:this._filtered_values_per_attrib_name[t]=e[0]}}}set_values(){const e=Object.keys(this._filtered_values_per_attrib_name);for(let t of e){const e=this._filtered_values_per_attrib_name[t];if(null!=e)switch(this.pv.class_to){case _.AttribClass.VERTEX:this.set_values_to_points(t,e);break;case _.AttribClass.OBJECT:this.set_values_to_object(t,e)}}}set_values_to_points(e,t){if(this._core_group&&this._core_object){if(!this._core_group.has_attrib(e)){const n=1;this._core_group.add_numeric_vertex_attrib(e,n,t)}this._core_object.points().forEach(n=>n.set_attrib_value(e,t))}}set_values_to_object(e,t){var n;null===(n=this._core_object)||void 0===n||n.set_attrib_value(e,t)}}t.AttribPromoteSopNode=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=r.__importDefault(n(209)),o=r.__importDefault(n(277)),i=r.__importDefault(n(102)),a=r.__importDefault(n(91)),_=r.__importDefault(n(44)),c=n(1),l=n(13),u=n(5);class d extends u.NodeParamsConfig{constructor(){super(...arguments),this.name=u.ParamConfig.STRING(),this.ramp=u.ParamConfig.RAMP(),this.change_name=u.ParamConfig.BOOLEAN(0),this.new_name=u.ParamConfig.STRING("",{visible_if:{change_name:1}})}}const h=new d;class p extends l.TypedSopNode{constructor(){super(...arguments),this.params_config=h}static type(){return"attrib_remap"}initialize_node(){this.io.inputs.set_count(1)}cook(e){const t=e[0];this._remap_attribute(t),this.set_core_group(t)}_remap_attribute(e){const t=e.points();if(0===t.length)return;if(""===this.pv.name)return;const n=t[0].attrib_size(this.pv.name),r=t.map(e=>e.attrib_value(this.pv.name));let l,u,d=new Array(t.length);switch(n){case 1:if(this.pv.only_integer_values){const e=a.default(i.default(r)),t={};e.forEach((e,n)=>t[e]=n),d=r.map(e=>t[e])}else if(l=o.default(r),u=s.default(r),_.default(l)&&_.default(u))for(let e=0;e<r.length;e++){const t=r[e],n=u>l?(t-l)/(u-l):1;d[e]=n}break;case 3:if(l=new c.Vector3(o.default(r.map(e=>e.x)),o.default(r.map(e=>e.y)),o.default(r.map(e=>e.z))),u=new c.Vector3(s.default(r.map(e=>e.x)),s.default(r.map(e=>e.y)),s.default(r.map(e=>e.z))),l instanceof c.Vector3&&u instanceof c.Vector3)for(let e=0;e<r.length;e++){const t=r[e],n=new c.Vector3((t.x-l.x)/(u.x-l.x),(t.y-l.y)/(u.y-l.y),(t.z-l.z)/(u.z-l.z));d[e]=n}}let h=this.pv.name;this.pv.change_name&&(h=this.pv.new_name,e.has_attrib(h)||e.add_numeric_vertex_attrib(h,n,0)),d.forEach((e,n)=>{t[n].set_attrib_value(h,e)})}}t.AttribRemapSopNode=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(13),s=n(5),o=n(35),i=n(17);class a extends s.NodeParamsConfig{constructor(){super(...arguments),this.class=s.ParamConfig.INTEGER(o.AttribClass.VERTEX,{menu:{entries:o.AttribClassMenuEntries}}),this.old_name=s.ParamConfig.STRING(),this.new_name=s.ParamConfig.STRING()}}const _=new a;class c extends r.TypedSopNode{constructor(){super(...arguments),this.params_config=_}static type(){return"attrib_rename"}initialize_node(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([i.InputCloneMode.FROM_NODE])}cook(e){const t=e[0];t.rename_attrib(this.pv.old_name,this.pv.new_name,this.pv.class),this.set_core_group(t)}}t.AttribRenameSopNode=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(13),o=n(847),i=n(848),a=n(383),_=n(5),c=n(17);class l extends _.NodeParamsConfig{constructor(){super(...arguments),this.src_group=_.ParamConfig.STRING(),this.dest_group=_.ParamConfig.STRING(),this.name=_.ParamConfig.STRING(),this.max_samples_count=_.ParamConfig.INTEGER(1,{range:[1,10],range_locked:[!0,!1]}),this.distance_threshold=_.ParamConfig.FLOAT(1),this.blend_width=_.ParamConfig.FLOAT(0)}}const u=new l;class d extends s.TypedSopNode{constructor(){super(...arguments),this.params_config=u}static type(){return"attrib_transfer"}static displayed_input_names(){return["geometry to transfer attributes to","geometry to transfer attributes from"]}initialize_node(){this.io.inputs.set_count(2),this.io.inputs.init_inputs_clonable_state([c.InputCloneMode.FROM_NODE,c.InputCloneMode.NEVER])}cook(e){return r.__awaiter(this,void 0,void 0,(function*(){this._core_group_dest=e[0];const t=this._core_group_dest.points_from_group(this.pv.dest_group);this._core_group_src=e[1],this._attrib_names=this._core_group_src.attrib_names_matching_mask(this.pv.name),this._error_if_attribute_not_found_on_second_input(),this._build_octree_if_required(this._core_group_src),this._add_attribute_if_required(),yield this._transfer_attributes(t),this.set_core_group(this._core_group_dest)}))}_error_if_attribute_not_found_on_second_input(){for(let e of this._attrib_names)this._core_group_src.has_attrib(e)||this.states.error.set(`attribute '${e}' not found on second input`)}_build_octree_if_required(e){const t=null==this._octree_timestamp||this._octree_timestamp!==e.timestamp();if(this._prev_param_src_group!==this.pv.src_group||t){this._octree_timestamp=e.timestamp(),this._prev_param_src_group=this.pv.src_group;const t=this._core_group_src.points_from_group(this.pv.src_group);this._octree=new i.CoreOctree(this._core_group_src.bounding_box()),this._octree.set_points(t)}}_add_attribute_if_required(){this._attrib_names.forEach(e=>{if(!this._core_group_dest.has_attrib(e)){const t=this._core_group_src.attrib_size(e);this._core_group_dest.add_numeric_vertex_attrib(e,t,0)}})}_transfer_attributes(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=new a.CoreIterator;yield t.start_with_array(e,this._transfer_attributes_for_point.bind(this))}))}_transfer_attributes_for_point(e){var t;const n=this.pv.distance_threshold+this.pv.blend_width,r=(null===(t=this._octree)||void 0===t?void 0:t.find_points(e.position(),n,this.pv.max_samples_count))||[];for(let t of this._attrib_names)this._interpolate_points(e,r,t)}_interpolate_points(e,t,n){let r;r=o.CoreInterpolate.perform(e,t,n,this.pv.distance_threshold,this.pv.blend_width),null!=r&&e.set_attrib_value(n,r)}}t.AttribTransferSopNode=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=r.__importDefault(n(209)),o=r.__importDefault(n(207));t.CoreInterpolate=class{static perform(e,t,n,r,s){switch(t.length){case 0:return 0;case 1:return this._interpolate_with_1_point(e,t[0],n,r,s);default:return this._interpolate_with_multiple_points(e,t,n,r,s)}}static _interpolate_with_1_point(e,t,n,r,s){const o=e.position(),i=t.position(),a=o.distanceTo(i),_=t.attrib_value(n);return this._weighted_value_from_distance(e,_,n,a,r,s)}static _weight_from_distance(e,t,n){return(e-t)/n}static _weighted_value_from_distance(e,t,n,r,s,o){if(r<=s)return t;{const i=e.attrib_value(n),a=this._weight_from_distance(r,s,o);return a*i+(1-a)*t}}static _interpolate_with_multiple_points(e,t,n,r,o){const i=t.map(t=>this._interpolate_with_1_point(e,t,n,r,o));return s.default(i)||0}static weights(e,t){switch(t.length){case 1:return 1;case 2:return this._weights_from_2(e,t);default:return t=t.slice(0,3),this._weights_from_3(e,t)}}static _weights_from_2(e,t){const n=t.map(t=>e.distanceTo(t)),r=o.default(n);return[n[1]/r,n[0]/r]}static _weights_from_3(e,t){const n=t.map(t=>e.distanceTo(t)),r=o.default([n[0]*n[1],n[0]*n[2],n[1]*n[2]]);return[n[1]*n[2]/r,n[0]*n[2]/r,n[0]*n[1]/r]}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(46),o=r.__importDefault(n(102)),i=n(849);t.CoreOctree=class{constructor(e){this._root=new i.OctreeNode(e)}set_points(e){this._root.set_points(e)}traverse(e){this._root.traverse(e)}find_points(e,t,n){const r=new s.Sphere(e,t);let i=[];return this._root.intersects_sphere(r)&&this._root.points_in_sphere(r,i),null==n||i.length>n&&(i=o.default(i,t=>t.position().distanceTo(e)),i=i.slice(0,n)),i}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(58),o=r.__importDefault(n(82));class i{constructor(e,t=0){this._bbox=e,this._level=t,this._leaves_by_octant={},this._points_by_octant_id={},this._leaves=[],this._bounding_boxes_by_octant={},this._bounding_boxes_by_octant_prepared=!1,this._center=this._bbox.max.clone().add(this._bbox.min).multiplyScalar(.5)}level(){return this._level}traverse(e){e(this),Object.values(this._leaves_by_octant).forEach(t=>{t.traverse(e)})}intersects_sphere(e){return!!this._bbox&&this._bbox.intersectsSphere(e)}points_in_sphere(e,t){if(0==this._leaves.length){o.default(Object.values(this._points_by_octant_id)).filter(t=>e.containsPoint(t.position())).forEach(e=>{t.push(e)})}else{this._leaves.filter(t=>t.intersects_sphere(e)).forEach(n=>n.points_in_sphere(e,t))}}bounding_box(){return this._bbox}set_points(e){this._points_by_octant_id={};for(let t of e)this.add_point(t);const t=Object.keys(this._points_by_octant_id);t.length>1&&t.forEach(e=>{this.create_leaf(e)})}create_leaf(e){const t=this._leaf_bbox(e),n=new i(t,this._level+1);this._leaves_by_octant[e]=n,this._leaves.push(n),n.set_points(this._points_by_octant_id[e])}add_point(e){const t=this._octant_id(e.position());null==this._points_by_octant_id[t]&&(this._points_by_octant_id[t]=[]),this._points_by_octant_id[t].push(e)}_octant_id(e){return`${e.x>this._center.x?1:0}${e.y>this._center.y?1:0}${e.z>this._center.z?1:0}`}_leaf_bbox(e){return this._bounding_boxes_by_octant_prepared||(this._prepare_leaves_bboxes(),this._bounding_boxes_by_octant_prepared=!0),this._bounding_boxes_by_octant[e]}_bbox_center(e,t,n){const r=this._bbox.min.clone();return e&&(r.x=this._bbox.max.x),t&&(r.y=this._bbox.max.y),n&&(r.z=this._bbox.max.z),r.clone().add(this._center).multiplyScalar(.5)}_prepare_leaves_bboxes(){const e=[];e.push(this._bbox_center(0,0,0)),e.push(this._bbox_center(0,0,1)),e.push(this._bbox_center(0,1,0)),e.push(this._bbox_center(0,1,1)),e.push(this._bbox_center(1,0,0)),e.push(this._bbox_center(1,0,1)),e.push(this._bbox_center(1,1,0)),e.push(this._bbox_center(1,1,1));const t=this._bbox.max.clone().sub(this._bbox.min).multiplyScalar(.25);for(let n of e){const e=this._octant_id(n),r=new s.Box3(n.clone().sub(t),n.clone().add(t));this._bounding_boxes_by_octant[e]=r}}}t.OctreeNode=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(6),o=n(4),i=r.__importDefault(n(81)),a=n(13),_=n(35),c=n(5);class l extends c.NodeParamsConfig{constructor(){super(...arguments),this.step_size=c.ParamConfig.FLOAT(.1)}}const u=new l;class d extends a.TypedSopNode{constructor(){super(...arguments),this.params_config=u}static type(){return"bbox_scatter"}static displayed_input_names(){return["geometry to create points from"]}initialize_node(){this.io.inputs.set_count(1)}cook(e){const t=e[0],n=this.pv.step_size,r=t.bounding_box(),a={x:i.default(r.min.x,r.max.x,n),y:i.default(r.min.y,r.max.y,n),z:i.default(r.min.z,r.max.z,n)},c=[];a.x.forEach(e=>{a.y.forEach(t=>{a.z.forEach(n=>{c.push(e),c.push(t),c.push(n)})})});const l=new s.BufferGeometry;l.setAttribute("position",new o.BufferAttribute(new Float32Array(c),3)),this.set_geometry(l,_.CoreConstant.OBJECT_TYPE.POINTS)}}t.BboxScatterSopNode=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(13),s=n(5),o=n(17);class i extends s.NodeParamsConfig{constructor(){super(...arguments),this.attrib_name=s.ParamConfig.STRING(),this.blend=s.ParamConfig.FLOAT(.5,{range:[0,1],range_locked:[!0,!0]})}}const a=new i;class _ extends r.TypedSopNode{constructor(){super(...arguments),this.params_config=a}static type(){return"blend"}static displayed_input_names(){return["geometry to blend from","geometry to blend to"]}initialize_node(){this.io.inputs.set_count(2),this.io.inputs.init_inputs_clonable_state([o.InputCloneMode.FROM_NODE,o.InputCloneMode.NEVER])}cook(e){const t=e[0],n=e[1],r=t.objects(),s=n.objects();let o,i;for(let e=0;e<r.length;e++)o=r[e],i=s[e],this.blend(o,i,this.pv.blend);this.set_core_group(t)}blend(e,t,n){const r=e.geometry,s=t.geometry;if(null==r||null==s)return;const o=r.getAttribute(this.pv.attrib_name),i=s.getAttribute(this.pv.attrib_name);if(null==o||null==i)return;const a=o.array,_=i.array;let c,l;for(let e=0;e<a.length;e++)c=a[e],l=_[e],null!=l&&(a[e]=(1-n)*c+n*l);r.computeVertexNormals()}}t.BlendSopNode=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(13),s=n(84),o=n(137),i=n(17),a=n(5);class _ extends a.NodeParamsConfig{constructor(){super(...arguments),this.size=a.ParamConfig.FLOAT(1),this.divisions=a.ParamConfig.INTEGER(1,{range:[1,10],range_locked:[!0,!1]}),this.center=a.ParamConfig.VECTOR3([0,0,0])}}const c=new _;class l extends r.TypedSopNode{constructor(){super(...arguments),this.params_config=c,this._core_transform=new s.CoreTransform}static type(){return"box"}static displayed_input_names(){return["geometry to create bounding box from (optional)"]}initialize_node(){this.io.inputs.set_count(0,1),this.io.inputs.init_inputs_clonable_state([i.InputCloneMode.NEVER])}cook(e){const t=e[0];t?this._cook_with_input(t):this._cook_without_input()}_cook_without_input(){const e=this.pv.divisions,t=this.pv.size,n=new o.BoxBufferGeometry(t,t,t,e,e,e);n.translate(this.pv.center.x,this.pv.center.y,this.pv.center.z),n.computeVertexNormals(),this.set_geometry(n)}_cook_with_input(e){const t=this.pv.divisions,n=e.bounding_box(),r=n.max.clone().sub(n.min),s=n.max.clone().add(n.min).multiplyScalar(.5),i=new o.BoxBufferGeometry(r.x,r.y,r.z,t,t,t),a=this._core_transform.translation_matrix(s);i.applyMatrix4(a),this.set_geometry(i)}}t.BoxSopNode=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(410),o=n(13),i=n(5);class a extends i.NodeParamsConfig{constructor(){super(...arguments),this.cache=i.ParamConfig.STRING("",{hidden:!0}),this.reset=i.ParamConfig.BUTTON(null,{callback:(e,t)=>{c.PARAM_CALLBACK_reset(e,t)}})}}const _=new a;class c extends o.TypedSopNode{constructor(){super(...arguments),this.params_config=_}static type(){return"cache"}static displayed_input_names(){return["geometry to cache"]}initialize_node(){this.io.inputs.set_count(0,1)}cook(e){const t=""==this.pv.cache||null==this.pv.cache,n=e[0];if(t&&n){const e=[];for(let t of n.objects())e.push(t.toJSON());this.set_core_group(n),this.p.cache.set(JSON.stringify(e))}else if(this.pv.cache){const e=new s.ObjectLoader,t=JSON.parse(this.pv.cache),n=[];for(let r of t){const t=e.parse(r);n.push(t)}this.set_objects(n)}else this.set_objects([])}static PARAM_CALLBACK_reset(e,t){e.param_callback_PARAM_CALLBACK_reset()}param_callback_PARAM_CALLBACK_reset(){return r.__awaiter(this,void 0,void 0,(function*(){this.p.cache.set(""),this.request_container()}))}}t.CacheSopNode=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),s=n(216),o=n(13),i=n(384),a=n(35),_=n(84),c=new r.Vector3(0,0,1),l=n(5);class u extends l.NodeParamsConfig{constructor(){super(...arguments),this.radius=l.ParamConfig.FLOAT(1),this.segments=l.ParamConfig.INTEGER(12,{range:[1,50],range_locked:[!0,!1]}),this.open=l.ParamConfig.BOOLEAN(1),this.arc_angle=l.ParamConfig.FLOAT(360,{range:[0,360],range_locked:[!1,!1],visible_if:{open:1}}),this.direction=l.ParamConfig.VECTOR3([0,1,0])}}const d=new u;class h extends o.TypedSopNode{constructor(){super(...arguments),this.params_config=d,this._core_transform=new _.CoreTransform}static type(){return"circle"}initialize_node(){}cook(){this.pv.open?this._create_circle():this._create_disk()}_create_circle(){const e=i.CoreGeometryUtilCircle.create(this.pv.radius,this.pv.segments,this.pv.arc_angle);this._core_transform.rotate_geometry(e,c,this.pv.direction),this.set_geometry(e,a.ObjectType.LINE_SEGMENTS)}_create_disk(){const e=new s.CircleBufferGeometry(this.pv.radius,this.pv.segments);this._core_transform.rotate_geometry(e,c,this.pv.direction),this.set_geometry(e)}}t.CircleSopNode=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(13),s=n(17),o=n(259),i=n(262);class a{constructor(){}set_node(e){this.node=e}cook(e){}set_core_group(e){this.node.set_core_group(e)}}t.BaseCodeSopProcessor=a;const _=n(5),c=n(367);class l extends _.NodeParamsConfig{constructor(){super(...arguments),this.code_typescript=_.ParamConfig.STRING("import {BaseCodeSopProcessor, CoreGroup} from 'polygonjs-engine'\nexport class CodeSopProcessor extends BaseCodeSopProcessor {\n\tconstructor(){\n\t\tsuper();\n\t}\n\tcook(core_groups: CoreGroup[]){\n\t\tconst core_group = core_groups[0];\n\t\tconst object = core_group.objects()[0];\n\t\tobject.position.y = 1;\n\t\tthis.set_core_group(core_groups[0]);\n\t}\n}\n\n\n",{label:!1,language:o.StringParamLanguage.TYPESCRIPT}),this.code_javascript=_.ParamConfig.STRING("",{hidden:!0})}}const u=new l;class d extends r.TypedSopNode{constructor(){super(...arguments),this.params_config=u}static type(){return"code"}initialize_node(){this.io.inputs.set_count(0,4),this.ui_data.set_width(100),this.io.inputs.init_inputs_clonable_state([s.InputCloneMode.FROM_NODE])}cook(e){this._compile_if_required(),this._processor?this._processor.cook(e):this.set_core_group(e[0])}_compile_if_required(){this._processor&&this._last_compiled_code==this.pv.code_javascript||this._compile()}_compile(){try{const e=`try {\n\t\t\t\t${c.TranspiledFilter.filter(this.pv.code_javascript)}\n\t\t\t} catch(e) {\n\t\t\t\tthis.states.error.set(e)\n\t\t\t}`;console.log("function_body"),console.log(e);const t=new i.AsyncFunction("BaseCodeSopProcessor",e)(a);t?(this._processor=new t,this._processor.set_node(this),this._last_compiled_code=this.pv.code_javascript):(this.states.error.set("cannot generate function"),this._processor=void 0)}catch(e){console.warn(e),this.states.error.set(`cannot generate function (${e})`),this._processor=void 0}}}t.CodeSopNode=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(7),o=n(857),i=n(13),a=n(17),_=new s.Color(1,1,1),c=n(5);class l extends c.NodeParamsConfig{constructor(){super(...arguments),this.from_attribute=c.ParamConfig.BOOLEAN(0),this.attrib_name=c.ParamConfig.STRING("",{visible_if:{from_attribute:1}}),this.color=c.ParamConfig.COLOR([1,1,1],{visible_if:{from_attribute:0},expression:{for_entities:!0}}),this.as_hsv=c.ParamConfig.BOOLEAN(0,{visible_if:{from_attribute:0}})}}const u=new l;class d extends i.TypedSopNode{constructor(){super(...arguments),this.params_config=u,this._r_arrays_by_geometry_uuid={},this._g_arrays_by_geometry_uuid={},this._b_arrays_by_geometry_uuid={}}static type(){return"color"}static displayed_input_names(){return["geometry to update color of"]}initialize_node(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([a.InputCloneMode.FROM_NODE])}cook(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=e[0],n=t.core_objects();for(let e of n)if(this.pv.from_attribute)this._set_from_attribute(e);else{this.p.color.has_expression()?yield this._eval_expressions(e):this._eval_simple_values(e)}if(!this.io.inputs.input_cloned(0)){const e=t.geometries();for(let t of e)t.getAttribute("color").needsUpdate=!0}this.set_core_group(t)}))}_set_from_attribute(e){const t=e.core_geometry();if(!t)return;this._create_init_color(t,_);const n=t.points(),r=t.attrib_size(this.pv.attrib_name),s=t.geometry(),o=s.getAttribute(this.pv.attrib_name).array,i=s.getAttribute("color").array;switch(r){case 1:for(let e=0;e<n.length;e++){const t=3*e;i[t+0]=o[e],i[t+1]=1-o[e],i[t+2]=0}break;case 2:for(let e=0;e<n.length;e++){const t=3*e,n=2*e;i[t+0]=o[n+0],i[t+1]=o[n+1],i[t+2]=0}break;case 3:for(let e=0;e<o.length;e++)i[e]=o[e];break;case 4:for(let e=0;e<n.length;e++){const t=3*e,n=4*e;i[t+0]=o[n+0],i[t+1]=o[n+1],i[t+2]=o[n+2]}}}_create_init_color(e,t){e.has_attrib("color")||e.add_numeric_attrib("color",3,_)}_eval_simple_values(e){const t=e.core_geometry();if(!t)return;let n;this._create_init_color(t,_),this.pv.as_hsv?(n=new s.Color,o.CoreColor.set_hsv(this.pv.color.r,this.pv.color.g,this.pv.color.b,n)):n=this.pv.color,t.add_numeric_attrib("color",3,n)}_eval_expressions(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=e.points(),n=e.object(),r=e.core_geometry();r&&this._create_init_color(r,_);const i=n.geometry;if(i){const e=i.getAttribute("color").array,n=yield this._update_from_param(i,e,t,0),r=yield this._update_from_param(i,e,t,1),a=yield this._update_from_param(i,e,t,2);if(n&&this._commit_tmp_values(n,e,0),r&&this._commit_tmp_values(r,e,1),a&&this._commit_tmp_values(a,e,2),this.pv.as_hsv){let n,r=new s.Color,i=new s.Color;for(let s of t)n=3*s.index,r.fromArray(e,n),o.CoreColor.set_hsv(r.r,r.g,r.b,i),i.toArray(e,n)}}}))}_update_from_param(e,t,n,s){return r.__awaiter(this,void 0,void 0,(function*(){const r=this.p.color.components[s],o=[this.pv.color.r,this.pv.color.g,this.pv.color.b][s],i=[this._r_arrays_by_geometry_uuid,this._g_arrays_by_geometry_uuid,this._b_arrays_by_geometry_uuid][s];let a;if(r.has_expression()&&r.expression_controller)a=this._init_array_if_required(e,i,n.length),yield r.expression_controller.compute_expression_for_points(n,(e,t)=>{a[e.index]=t});else for(let e of n)t[3*e.index+s]=o;return a}))}_init_array_if_required(e,t,n){const r=e.uuid,s=t[r];return s?s.length<n&&(t[r]=new Array(n)):t[r]=new Array(n),t[r]}_commit_tmp_values(e,t,n){for(let r=0;r<e.length;r++)t[3*r+n]=e[r]}}t.ColorSopNode=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(14);t.CoreColor=class{static set_hsv(e,t,n,s){e=r.MathUtils.euclideanModulo(e,1),t=r.MathUtils.clamp(t,0,1),n=r.MathUtils.clamp(n,0,1),s.setHSL(e,t*n/((e=(2-t)*n)<1?e:2-e),.5*e)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(13),s=n(1),o=n(215),i=n(84),a=new s.Vector3(0,1,0),_=n(5);class c extends _.NodeParamsConfig{constructor(){super(...arguments),this.radius=_.ParamConfig.FLOAT(1,{range:[0,1]}),this.height=_.ParamConfig.FLOAT(1,{range:[0,1]}),this.segments_radial=_.ParamConfig.INTEGER(12,{range:[3,20],range_locked:[!0,!1]}),this.segments_height=_.ParamConfig.INTEGER(1,{range:[1,20],range_locked:[!0,!1]}),this.cap=_.ParamConfig.BOOLEAN(1),this.theta_start=_.ParamConfig.FLOAT(1,{range:[0,1]}),this.theta_length=_.ParamConfig.FLOAT("2*$PI",{range:[0,1]}),this.center=_.ParamConfig.VECTOR3([0,0,0]),this.direction=_.ParamConfig.VECTOR3([0,0,1])}}const l=new c;class u extends r.TypedSopNode{constructor(){super(...arguments),this.params_config=l,this._core_transform=new i.CoreTransform}static type(){return"cone"}cook(){const e=new o.ConeBufferGeometry(this.pv.radius,this.pv.height,this.pv.segments_radial,this.pv.segments_height,!this.pv.cap,this.pv.theta_start,this.pv.theta_length);this._core_transform.rotate_geometry(e,a,this.pv.direction),e.translate(this.pv.center.x,this.pv.center.y,this.pv.center.z),this.set_geometry(e)}}t.ConeSopNode=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=r.__importDefault(n(92)),o=n(13),i=n(275),a=n(385),_=n(49),c=n(860),l=n(5),u=n(17);class d extends l.NodeParamsConfig{constructor(){super(...arguments),this.count=l.ParamConfig.INTEGER(1,{range:[1,20],range_locked:[!0,!1]}),this.transform_only=l.ParamConfig.BOOLEAN(0),this.copy_attributes=l.ParamConfig.BOOLEAN(0),this.attributes_to_copy=l.ParamConfig.STRING("",{visible_if:{copy_attributes:!0}}),this.use_copy_expr=l.ParamConfig.BOOLEAN(0)}}const h=new d;class p extends o.TypedSopNode{constructor(){super(...arguments),this.params_config=h,this._attribute_names_to_copy=[],this._objects=[]}static type(){return"copy"}static displayed_input_names(){return["geometry to be copied","points to copy to"]}initialize_node(){this.io.inputs.set_count(1,2),this.io.inputs.init_inputs_clonable_state([u.InputCloneMode.ALWAYS,u.InputCloneMode.NEVER])}cook(){return r.__awaiter(this,void 0,void 0,(function*(){let e;const t=yield this.container_controller.request_input_container(0);if(null!=t&&null!=(e=t.core_content()))if(this.io.inputs.has_input(1)){let t;const n=yield this.container_controller.request_input_container(1);null!=n&&null!=(t=n.core_content())?yield this.cook_with_template(e,t):this.states.error.set("second input required")}else this.cook_without_template(e);else this.states.error.set("first input required")}))}cook_with_template(e,t){return r.__awaiter(this,void 0,void 0,(function*(){this._objects=[];const n=t.points();let r=new a.CoreInstancer(t).matrices();this._attribute_names_to_copy=_.CoreString.attrib_names(this.pv.attributes_to_copy).filter(e=>t.has_attrib(e)),yield this._copy_moved_objects_on_template_points(e,r,n),this.set_objects(this._objects)}))}_copy_moved_objects_on_template_points(e,t,n){return r.__awaiter(this,void 0,void 0,(function*(){for(let r=0;r<n.length;r++)yield this._copy_moved_object_on_template_point(e,t,n,r)}))}_copy_moved_object_on_template_point(e,t,n,s){return new Promise((o,i)=>r.__awaiter(this,void 0,void 0,(function*(){const r=t[s],i=n[s];return this.stamp_node.set_point(i),(yield this._get_moved_objects_for_template_point(e,s)).forEach(e=>{if(this.pv.copy_attributes&&this._copy_attributes_from_template(e,i),this.pv.transform_only)e.applyMatrix4(r);else{e.geometry?e.geometry.applyMatrix4(r):e.applyMatrix4(r)}return this._objects.push(e)}),o()})))}_get_moved_objects_for_template_point(e,t){return new Promise((n,o)=>r.__awaiter(this,void 0,void 0,(function*(){if(yield this._stamp_instance_group_if_required(e)){const r=this.pv.transform_only?s.default([e.objects()[t]]):e.clone().objects();n(r)}else n([])})))}_stamp_instance_group_if_required(e){return new Promise((t,n)=>r.__awaiter(this,void 0,void 0,(function*(){if(this.pv.use_copy_expr){const e=yield this.container_controller.request_input_container(0);let n;e&&null!=(n=e.core_content())?t(n):(this.states.error.set(`input failed for index ${this.stamp_value()}`),t())}else t(e)})))}_copy_moved_objects_for_each_instance(e){return r.__awaiter(this,void 0,void 0,(function*(){for(let t=0;t<this.pv.count;t++)yield this._copy_moved_objects_for_instance(e,t)}))}_copy_moved_objects_for_instance(e,t){return new Promise((n,s)=>r.__awaiter(this,void 0,void 0,(function*(){this.stamp_node.set_global_index(t);const r=yield this._stamp_instance_group_if_required(e);r&&r.objects().forEach(e=>{const t=i.CoreObject.clone(e);this._objects.push(t)}),n()})))}cook_without_template(e){this._objects=[],this._copy_moved_objects_for_each_instance(e).then(()=>{this.set_objects(this._objects)})}_copy_attributes_from_template(e,t){this._attribute_names_to_copy.forEach((n,r)=>{const s=t.attrib_value(n);new i.CoreObject(e,r).add_attribute(n,s)})}stamp_value(e){return this.stamp_node.value(e)}get stamp_node(){return this._stamp_node=this._stamp_node||this.create_stamp_node()}create_stamp_node(){const e=new c.CopyStamp(this.scene);return this.dirty_controller.set_forbidden_trigger_nodes([e]),e}}t.CopySopNode=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(67);class s extends r.CoreGraphNode{constructor(e){super(e,"CopyStamp"),this._global_index=0}set_point(e){this._point=e,this.set_dirty(),this.remove_dirty_state()}set_global_index(e){this._global_index=e,this.set_dirty(),this.remove_dirty_state()}value(e){return this._point?e?this._point.attrib_value(e):this._point.index:this._global_index}}t.CopyStamp=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(13),s=n(386),o=JSON.stringify([{value:-40},{value:-30},{value:-20},{value:-10},{value:0},{value:10},{value:20},{value:30},{value:40},{value:50},{value:60},{value:70},{value:80}]),i=n(5);class a extends i.NodeParamsConfig{constructor(){super(...arguments),this.data=i.ParamConfig.STRING(o)}}const _=new a;class c extends r.TypedSopNode{constructor(){super(...arguments),this.params_config=_}static type(){return"data"}cook(){let e=null;try{e=JSON.parse(this.pv.data)}catch(e){this.states.error.set("could not parse json")}if(e){const t=new s.JsonDataLoader;t.set_json(e);const n=t.create_object();this.set_object(n)}else this.cook_controller.end_cook()}}t.DataSopNode=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=r.__importDefault(n(21)),o=r.__importDefault(n(45)),i=n(35);t.CoreAttributeData=class{constructor(e,t){this._size=e,this._type=t}size(){return this._size}type(){return this._type}static from_value(e){const t=o.default(e)?i.CoreConstant.ATTRIB_TYPE.STRING:i.CoreConstant.ATTRIB_TYPE.NUMERIC;return new this(s.default(e)?e.length:1,t)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(13),o=n(386),i=n(5);class a extends i.NodeParamsConfig{constructor(){super(...arguments),this.url=i.ParamConfig.STRING("/examples/sop/data_url/basic.json"),this.json_data_keys_prefix=i.ParamConfig.STRING(""),this.skip_entries=i.ParamConfig.STRING(""),this.convert=i.ParamConfig.BOOLEAN(0),this.convert_to_numeric=i.ParamConfig.STRING("",{visible_if:{convert:1}}),this.reload=i.ParamConfig.BUTTON(null,{callback:(e,t)=>{c.PARAM_CALLBACK_reload(e,t)}})}}const _=new a;class c extends s.TypedSopNode{constructor(){super(...arguments),this.params_config=_}static type(){return"data_url"}cook(){return r.__awaiter(this,void 0,void 0,(function*(){new o.JsonDataLoader({data_keys_prefix:this.pv.json_data_keys_prefix,skip_entries:this.pv.skip_entries,do_convert:this.pv.convert,convert_to_numeric:this.pv.convert_to_numeric}).load(this.pv.url,this._on_load.bind(this),void 0,this._on_error.bind(this))}))}_on_load(e){this.set_objects([e])}_on_error(e){this.states.error.set(`could not load geometry from ${this.pv.url} (${e})`),this.cook_controller.end_cook()}static PARAM_CALLBACK_reload(e,t){e.param_callback_reload()}param_callback_reload(){this.p.url.set_dirty()}}t.DataUrlSopNode=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(13),s=n(5),o=n(17);class i extends s.NodeParamsConfig{constructor(){super(...arguments),this.duration=s.ParamConfig.INTEGER(1e3)}}const a=new i;class _ extends r.TypedSopNode{constructor(){super(...arguments),this.params_config=a}static type(){return"delay"}initialize_node(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([o.InputCloneMode.ALWAYS])}cook(e){const t=e[0];setTimeout(()=>{this.set_core_group(t)},this.pv.duration)}}t.DelaySopNode=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(58),o=r.__importDefault(n(45)),i=r.__importDefault(n(179)),a=n(13),_=n(49),c=n(35),l=n(53),u=n(17);var d;!function(e){e[e["=="]=0]="==",e[e["<"]=1]="<",e[e["<="]=2]="<=",e[e[">="]=3]=">=",e[e[">"]=4]=">",e[e["!="]=5]="!="}(d||(d={}));const h=[{name:"==",value:d["=="]},{name:"<",value:d["<"]},{name:"<=",value:d["<="]},{name:">=",value:d[">="]},{name:">",value:d[">"]},{name:"!=",value:d["!="]}],p=n(5);class m extends p.NodeParamsConfig{constructor(){super(...arguments),this.class=p.ParamConfig.INTEGER(c.AttribClass.VERTEX,{menu:{entries:c.AttribClassMenuEntries}}),this.invert=p.ParamConfig.BOOLEAN(0),this.hide_objects=p.ParamConfig.BOOLEAN(0),this.by_object_type=p.ParamConfig.BOOLEAN(0),this.object_type=p.ParamConfig.INTEGER(c.ObjectTypes.indexOf(c.ObjectType.MESH),{menu:{entries:c.ObjectTypeMenuEntries},visible_if:{by_object_type:!0}}),this.by_expression=p.ParamConfig.BOOLEAN(0),this.expression=p.ParamConfig.BOOLEAN("@ptnum==0",{visible_if:{by_expression:!0},expression:{for_entities:!0}}),this.by_attrib=p.ParamConfig.BOOLEAN(0),this.attrib_name=p.ParamConfig.STRING("",{visible_if:{by_attrib:!0}}),this.attrib_string=p.ParamConfig.STRING("",{visible_if:{by_attrib:!0}}),this.attrib_numeric=p.ParamConfig.VECTOR4([0,0,0,0],{visible_if:{by_attrib:!0}}),this.attrib_comparison_operator=p.ParamConfig.INTEGER(d["=="],{menu:{entries:h},visible_if:{by_attrib:!0}}),this.by_bbox=p.ParamConfig.BOOLEAN(0),this.bbox_size=p.ParamConfig.VECTOR3([1,1,1],{visible_if:{by_bbox:!0}}),this.bbox_center=p.ParamConfig.VECTOR3([0,0,0],{visible_if:{by_bbox:!0}}),this.by_visible=p.ParamConfig.BOOLEAN(0),this.keep_points=p.ParamConfig.BOOLEAN(1,{visible_if:{class:c.AttribClass.OBJECT}})}}const f=new m;class g extends a.TypedSopNode{constructor(){super(...arguments),this.params_config=f,this._marked_for_deletion_per_object_index=new Map}static type(){return"delete"}static displayed_input_names(){return["geometry to delete from"]}initialize_node(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([u.InputCloneMode.FROM_NODE])}cook(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=e[0];switch(this._bbox_cache=void 0,this.pv.class){case c.AttribClass.VERTEX:yield this._eval_for_points(t);break;case c.AttribClass.OBJECT:yield this._eval_for_objects(t)}}))}_eval_for_objects(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=[],n=e.core_objects();this._marked_for_deletion_per_object_index=new Map;for(let e of n)this._marked_for_deletion_per_object_index.set(e.index,!1);let r,s;this.pv.by_expression&&(yield this._eval_expressions_for_objects(n)),this.pv.by_object_type&&this._eval_type_for_objects(n),this.pv.by_attrib&&""!==this.pv.attrib_name&&this._eval_attrib_for_objects(n),this.pv.invert&&this._marked_for_deletion_per_object_index.forEach((e,t)=>{this._marked_for_deletion_per_object_index.set(t,!e)});const o=[];this._marked_for_deletion_per_object_index.forEach((e,i)=>{r=n[i],s=r.object(),this.pv.hide_objects?(t.push(s),e&&(s.visible=!1)):(e||t.push(s),e&&o.push(this._point_object(r)))});for(let e of o)t.push(e);this.set_objects(t)}))}_eval_for_points(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=e.core_objects();let n;for(let e=0;e<t.length;e++){n=t[e];let r=n.core_geometry();if(r){let e=r.points_from_geometry();const t=e.length;if(this.pv.by_expression&&(e=yield this._eval_expressions_for_points(e)),this.pv.by_attrib&&""!==this.pv.attrib_name&&(e=this._eval_attrib_for_points(e)),this.pv.by_bbox&&(e=this._eval_bbox_for_points(e)),e.length!=t){const t=n.object();r.geometry().dispose(),e.length>0?t.geometry=l.CoreGeometry.geometry_from_points(e,t.constructor):null!=t.parent&&t.parent.remove(t)}}}this.set_core_group(e)}))}_eval_expressions_for_points(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=[],n=this.p.expression;if(this.p.expression.has_expression()&&n.expression_controller)yield n.expression_controller.compute_expression_for_points(e,(e,n)=>{let r=!n;this.pv.invert&&(r=!r),r&&t.push(e)});else{let n=!this.pv.expression;this.pv.invert&&(n=!n);for(let r=0;r<e.length;r++)n&&t.push(e[r])}return console.log(t),t}))}_eval_expressions_for_objects(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=this.p.expression;if(t.has_expression()&&t.expression_controller)yield t.expression_controller.compute_expression_for_objects(e,(e,t)=>{this._marked_for_deletion_per_object_index.get(e.index)||this._marked_for_deletion_per_object_index.set(e.index,t)});else for(let n of e)this._marked_for_deletion_per_object_index.set(n.index,t.value)}))}_eval_attrib_for_points(e){const t=[];if(e.length>0){const n=e[0].attrib_value(this.pv.attrib_name);(o.default(n)?_.CoreString.attrib_names(this.pv.attrib_string):[this.pv.attrib_numeric.x]).forEach(n=>e.forEach(e=>{const r=e.attrib_value(this.pv.attrib_name);let s=!this._comparison(r,n);if(this.pv.invert&&(s=!s),s)return t.push(e)}))}return t}_comparison(e,t){switch(this.pv.attrib_ComparisonOperator){case d["=="]:return e===t;case d["<="]:return e<=t;case d["<"]:return e<t;case d[">"]:return e>t;case d[">="]:return e>=t;case d["!="]:return e!==t}}_eval_type_for_objects(e){const t=c.ObjectTypes[this.pv.object_type];for(let n of e){if(!this._marked_for_deletion_per_object_index.get(n.index)){n.object().constructor.name===t&&this._marked_for_deletion_per_object_index.set(n.index,!0)}}}_eval_attrib_for_objects(e){for(let t of e){if(!this._marked_for_deletion_per_object_index.get(t.index)){const e=t.attrib_value(this.pv.attrib_name);e===(o.default(e)?this.pv.attrib_string:this.pv.attrib_float)&&this._marked_for_deletion_per_object_index.set(t.index,!0)}}}_eval_bbox_for_points(e){const t=[];return i.default(e,(e,n)=>{const r=this._bbox.containsPoint(e.position());if(this.pv.invert?r:!r)return t.push(e)}),t}get _bbox(){return null!=this._bbox_cache?this._bbox_cache:this._bbox_cache=new s.Box3(this.pv.bbox_center.clone().sub(this.pv.bbox_size.clone().multiplyScalar(.5)),this.pv.bbox_center.clone().add(this.pv.bbox_size.clone().multiplyScalar(.5)))}_point_object(e){const t=e.points(),n=l.CoreGeometry.geometry_from_points(t,e.object().constructor);return this.create_object(n,c.ObjectType.POINTS)}}t.DeleteSopNode=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(1),o=n(4),i=r.__importDefault(n(81)),a=r.__importDefault(n(208)),_=r.__importDefault(n(379)),c=n(13),l=n(17),u=n(5);class d extends u.NodeParamsConfig{constructor(){super(...arguments),this.make_faces_unique=u.ParamConfig.BOOLEAN(0),this.add_face_center_attribute=u.ParamConfig.BOOLEAN(0,{visible_if:{make_faces_unique:1}}),this.add_face_id=u.ParamConfig.BOOLEAN(0,{visible_if:{make_faces_unique:1}}),this.transform=u.ParamConfig.BOOLEAN(0,{visible_if:{make_faces_unique:1}}),this.scale=u.ParamConfig.FLOAT(1,{visible_if:{make_faces_unique:1,transform:1}})}}const h=new d;class p extends c.TypedSopNode{constructor(){super(...arguments),this.params_config=h}static type(){return"face"}initialize_node(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([l.InputCloneMode.FROM_NODE])}cook(e){const t=e[0];this.pv.make_faces_unique&&(this._make_faces_unique(t),this.pv.add_face_center_attribute&&this._add_face_center_attribute(t),this.pv.add_face_id&&this._add_face_id(t),this.pv.transform&&this._transform_faces(t)),this.set_core_group(t)}_make_faces_unique(e){var t;for(let n of e.objects())if(n.isMesh){const e=n.geometry,r=_.default((null===(t=e.index)||void 0===t?void 0:t.array)||[],3),s=3*r.length;for(let t of Object.keys(e.attributes)){const n=e.attributes[t],i=n.itemSize,_=new Float32Array(s*i);let c=0;r.forEach(e=>{e.forEach(e=>{a.default(i,t=>{const r=n.array[e*i+t];_[c]=r,c+=1})})}),e.setAttribute(t,new o.BufferAttribute(_,i))}const c=i.default(s);e.setIndex(c)}}_add_face_center_attribute(e){const t=new s.Vector3;let n,r,o,i;e.core_objects().forEach(e=>{const s=e.object(),a=e.core_geometry();if(s.isMesh&&a){n=a.faces(),a.has_attrib("face_center")||a.add_numeric_attrib("face_center",3,-1);for(let e=0;e<n.length;e++){r=n[e],r.center(t),o=r.points;for(let e=0;e<o.length;e++)i=o[e],i.set_attrib_value("face_center",t)}}})}_add_face_id(e){e.core_objects().forEach(e=>{const t=e.object(),n=e.core_geometry();if(t.isMesh&&n){const e=n.faces();n.has_attrib("face_id")||n.add_numeric_attrib("face_id",1,-1);for(let t=0;t<e.length;t++){const n=e[t].points;for(let e=0;e<n.length;e++){n[e].set_attrib_value("face_id",t)}}}})}_transform_faces(e){const t=new s.Vector3,n=new s.Vector3,r=this.pv.scale;let o,i,a,_;e.core_objects().forEach(e=>{const s=e.object(),c=e.core_geometry();if(s.isMesh&&c){o=c.faces(),c.has_attrib("position")||c.add_numeric_attrib("position",3,-1);for(let e=0;e<o.length;e++){i=o[e],i.center(t),a=i.points;for(let e=0;e<a.length;e++){_=a[e];const s=_.position();n.x=s.x*r+t.x*(1-r),n.y=s.y*r+t.y*(1-r),n.z=s.z*r+t.z*(1-r),_.set_attrib_value("position",n)}}}})}}t.FaceSopNode=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3).__importDefault(n(82)),s=n(13),o=n(868),i=n(5);class a extends i.NodeParamsConfig{constructor(){super(...arguments),this.url=i.ParamConfig.STRING("",{desktop_browse:{file_type:"geometry"},always_reference_asset:!0}),this.reload=i.ParamConfig.BUTTON(null,{callback:(e,t)=>{c.PARAM_CALLBACK_reload(e)}})}}const _=new a;class c extends s.TypedSopNode{constructor(){super(...arguments),this.params_config=_}static type(){return"file"}initialize_node(){}cook(){new o.CoreLoaderGeometry(this.pv.url).load(this._on_load.bind(this),this._on_error.bind(this))}_on_load(e){console.log("objects",e),e=r.default(e),this.set_objects(e)}_on_error(e){this.states.error.set(`could not load geometry from ${this.pv.url} (${e})`)}static PARAM_CALLBACK_reload(e){e.param_callback_reload()}param_callback_reload(){this.p.url.set_dirty()}}t.FileSopNode=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(410),o=n(10),i=n(6),a=n(22),_=n(160);t.CoreLoaderGeometry=class{constructor(e){this.url=e;const t=this.url.split(".");this.ext=t[t.length-1].toLowerCase(),"zip"===this.ext&&(this.ext=t[t.length-2])}load(e,t){this.load_auto().then(t=>{e(t)}).catch(e=>{t(e)})}load_auto(){return new Promise((e,t)=>r.__awaiter(this,void 0,void 0,(function*(){const n=this.url;if("json"==this.ext)fetch(n).then(t=>r.__awaiter(this,void 0,void 0,(function*(){const n=yield t.json();(new s.ObjectLoader).parse(n,t=>{e(this.on_load_success(t.children[0]))})}))).catch(e=>{t(e)});else{const r=yield this.loader_for_ext();if(r)r.load(n,t=>{console.log(t),this.on_load_success(t).then(t=>{e(t)})},void 0,e=>{t(e)});else{const e=`format not supported (${this.ext})`;t(e)}}})))}on_load_success(e){return r.__awaiter(this,void 0,void 0,(function*(){if(e instanceof o.Object3D)switch(this.ext){case"gltf":case"glb":return this.on_load_succes_gltf(e);case"obj":case"json":default:return[e]}if(e instanceof i.BufferGeometry)switch(this.ext){case"drc":return this.on_load_succes_drc(e);default:return[new a.Mesh(e)]}switch(this.ext){case"gltf":case"glb":return this.on_load_succes_gltf(e);default:return[]}return[]}))}on_load_succes_gltf(e){const t=e.scene;return t.animations=e.animations,console.log("[scene]",[t]),[t]}on_load_succes_drc(e){const t=new _.MeshLambertMaterial;return[new a.Mesh(e,t)]}loader_for_ext(){return r.__awaiter(this,void 0,void 0,(function*(){switch(this.ext.toLowerCase()){case"gltf":return this.loader_for_gltf();case"glb":return this.loader_for_glb();case"drc":return this.loader_for_drc();case"obj":return this.loader_for_obj()}}))}loader_for_gltf(){return r.__awaiter(this,void 0,void 0,(function*(){const{GLTFLoader:e}=yield Promise.resolve().then(()=>r.__importStar(n(387)));return new e}))}loader_for_glb(){return r.__awaiter(this,void 0,void 0,(function*(){const{GLTFLoader:e}=yield Promise.resolve().then(()=>r.__importStar(n(387))),{DRACOLoader:t}=yield Promise.resolve().then(()=>r.__importStar(n(388))),s=new e,o=new t;return o.setDecoderPath("/three/js/libs/draco/gltf/"),o.setDecoderConfig({type:"js"}),s.setDRACOLoader(o),s}))}loader_for_drc(){return r.__awaiter(this,void 0,void 0,(function*(){const{DRACOLoader:e}=yield Promise.resolve().then(()=>r.__importStar(n(388))),t=new e;return t.setDecoderPath("/three/js/libs/draco/"),t.setDecoderConfig({type:"js"}),t}))}loader_for_obj(){return r.__awaiter(this,void 0,void 0,(function*(){const{OBJLoader:e}=yield Promise.resolve().then(()=>r.__importStar(n(869)));return new e}))}}},function(e,t,n){"use strict";n.r(t),n.d(t,"OBJLoader",(function(){return m}));var r=n(6),s=n(30),o=n(4),i=n(40),a=n(41),_=n(57),c=n(18),l=n(9),u=n(22),d=n(226),h=n(96),p=n(71),m=function(){var e=/^[og]\s*(.+)?/,t=/^mtllib /,n=/^usemtl /,m=/^usemap /;function f(){var e={objects:[],object:{},vertices:[],normals:[],colors:[],uvs:[],materials:{},materialLibraries:[],startObject:function(e,t){if(this.object&&!1===this.object.fromDeclaration)return this.object.name=e,void(this.object.fromDeclaration=!1!==t);var n=this.object&&"function"==typeof this.object.currentMaterial?this.object.currentMaterial():void 0;if(this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0),this.object={name:e||"",fromDeclaration:!1!==t,geometry:{vertices:[],normals:[],colors:[],uvs:[]},materials:[],smooth:!0,startMaterial:function(e,t){var n=this._finalize(!1);n&&(n.inherited||n.groupCount<=0)&&this.materials.splice(n.index,1);var r={index:this.materials.length,name:e||"",mtllib:Array.isArray(t)&&t.length>0?t[t.length-1]:"",smooth:void 0!==n?n.smooth:this.smooth,groupStart:void 0!==n?n.groupEnd:0,groupEnd:-1,groupCount:-1,inherited:!1,clone:function(e){var t={index:"number"==typeof e?e:this.index,name:this.name,mtllib:this.mtllib,smooth:this.smooth,groupStart:0,groupEnd:-1,groupCount:-1,inherited:!1};return t.clone=this.clone.bind(t),t}};return this.materials.push(r),r},currentMaterial:function(){if(this.materials.length>0)return this.materials[this.materials.length-1]},_finalize:function(e){var t=this.currentMaterial();if(t&&-1===t.groupEnd&&(t.groupEnd=this.geometry.vertices.length/3,t.groupCount=t.groupEnd-t.groupStart,t.inherited=!1),e&&this.materials.length>1)for(var n=this.materials.length-1;n>=0;n--)this.materials[n].groupCount<=0&&this.materials.splice(n,1);return e&&0===this.materials.length&&this.materials.push({name:"",smooth:this.smooth}),t}},n&&n.name&&"function"==typeof n.clone){var r=n.clone(0);r.inherited=!0,this.object.materials.push(r)}this.objects.push(this.object)},finalize:function(){this.object&&"function"==typeof this.object._finalize&&this.object._finalize(!0)},parseVertexIndex:function(e,t){var n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseNormalIndex:function(e,t){var n=parseInt(e,10);return 3*(n>=0?n-1:n+t/3)},parseUVIndex:function(e,t){var n=parseInt(e,10);return 2*(n>=0?n-1:n+t/2)},addVertex:function(e,t,n){var r=this.vertices,s=this.object.geometry.vertices;s.push(r[e+0],r[e+1],r[e+2]),s.push(r[t+0],r[t+1],r[t+2]),s.push(r[n+0],r[n+1],r[n+2])},addVertexPoint:function(e){var t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addVertexLine:function(e){var t=this.vertices;this.object.geometry.vertices.push(t[e+0],t[e+1],t[e+2])},addNormal:function(e,t,n){var r=this.normals,s=this.object.geometry.normals;s.push(r[e+0],r[e+1],r[e+2]),s.push(r[t+0],r[t+1],r[t+2]),s.push(r[n+0],r[n+1],r[n+2])},addColor:function(e,t,n){var r=this.colors,s=this.object.geometry.colors;s.push(r[e+0],r[e+1],r[e+2]),s.push(r[t+0],r[t+1],r[t+2]),s.push(r[n+0],r[n+1],r[n+2])},addUV:function(e,t,n){var r=this.uvs,s=this.object.geometry.uvs;s.push(r[e+0],r[e+1]),s.push(r[t+0],r[t+1]),s.push(r[n+0],r[n+1])},addUVLine:function(e){var t=this.uvs;this.object.geometry.uvs.push(t[e+0],t[e+1])},addFace:function(e,t,n,r,s,o,i,a,_){var c=this.vertices.length,l=this.parseVertexIndex(e,c),u=this.parseVertexIndex(t,c),d=this.parseVertexIndex(n,c);if(this.addVertex(l,u,d),this.colors.length>0&&this.addColor(l,u,d),void 0!==r&&""!==r){var h=this.uvs.length;l=this.parseUVIndex(r,h),u=this.parseUVIndex(s,h),d=this.parseUVIndex(o,h),this.addUV(l,u,d)}if(void 0!==i&&""!==i){var p=this.normals.length;l=this.parseNormalIndex(i,p),u=i===a?l:this.parseNormalIndex(a,p),d=i===_?l:this.parseNormalIndex(_,p),this.addNormal(l,u,d)}},addPointGeometry:function(e){this.object.geometry.type="Points";for(var t=this.vertices.length,n=0,r=e.length;n<r;n++)this.addVertexPoint(this.parseVertexIndex(e[n],t))},addLineGeometry:function(e,t){this.object.geometry.type="Line";for(var n=this.vertices.length,r=this.uvs.length,s=0,o=e.length;s<o;s++)this.addVertexLine(this.parseVertexIndex(e[s],n));var i=0;for(o=t.length;i<o;i++)this.addUVLine(this.parseUVIndex(t[i],r))}};return e.startObject("",!1),e}function g(e){c.a.call(this,e),this.materials=null}return g.prototype=Object.assign(Object.create(c.a.prototype),{constructor:g,load:function(e,t,n,r){var o=this,i=new s.a(o.manager);i.setPath(this.path),i.load(e,(function(e){t(o.parse(e))}),n,r)},setMaterials:function(e){return this.materials=e,this},parse:function(s){var c=new f;-1!==s.indexOf("\r\n")&&(s=s.replace(/\r\n/g,"\n")),-1!==s.indexOf("\\\n")&&(s=s.replace(/\\\n/g,""));for(var g=s.split("\n"),v="",y="",b=[],x="function"==typeof"".trimLeft,T=0,w=g.length;T<w;T++)if(v=g[T],0!==(v=x?v.trimLeft():v.trim()).length&&"#"!==(y=v.charAt(0)))if("v"===y){var C=v.split(/\s+/);switch(C[0]){case"v":c.vertices.push(parseFloat(C[1]),parseFloat(C[2]),parseFloat(C[3])),C.length>=7&&c.colors.push(parseFloat(C[4]),parseFloat(C[5]),parseFloat(C[6]));break;case"vn":c.normals.push(parseFloat(C[1]),parseFloat(C[2]),parseFloat(C[3]));break;case"vt":c.uvs.push(parseFloat(C[1]),parseFloat(C[2]))}}else if("f"===y){for(var P=v.substr(1).trim().split(/\s+/),E=[],O=0,A=P.length;O<A;O++){var M=P[O];if(M.length>0){var N=M.split("/");E.push(N)}}var S=E[0];for(O=1,A=E.length-1;O<A;O++){var R=E[O],L=E[O+1];c.addFace(S[0],R[0],L[0],S[1],R[1],L[1],S[2],R[2],L[2])}}else if("l"===y){var j=v.substring(1).trim().split(" "),k=[],I=[];if(-1===v.indexOf("/"))k=j;else for(var G=0,z=j.length;G<z;G++){var D=j[G].split("/");""!==D[0]&&k.push(D[0]),""!==D[1]&&I.push(D[1])}c.addLineGeometry(k,I)}else if("p"===y){var F=v.substr(1).trim().split(" ");c.addPointGeometry(F)}else if(null!==(b=e.exec(v))){var B=(" "+b[0].substr(1).trim()).substr(1);c.startObject(B)}else if(n.test(v))c.object.startMaterial(v.substring(7).trim(),c.materialLibraries);else if(t.test(v))c.materialLibraries.push(v.substring(7).trim());else if(m.test(v))console.warn('THREE.OBJLoader: Rendering identifier "usemap" not supported. Textures must be defined in MTL files.');else if("s"===y){if((b=v.split(" ")).length>1){var V=b[1].trim().toLowerCase();c.object.smooth="0"!==V&&"off"!==V}else c.object.smooth=!0;(ne=c.object.currentMaterial())&&(ne.smooth=c.object.smooth)}else{if("\0"===v)continue;console.warn('THREE.OBJLoader: Unexpected line: "'+v+'"')}c.finalize();var U=new i.Group;U.materialLibraries=[].concat(c.materialLibraries);for(T=0,w=c.objects.length;T<w;T++){var q=c.objects[T],$=q.geometry,H=q.materials,Y="Line"===$.type,X="Points"===$.type,W=!1;if(0!==$.vertices.length){var J=new r.BufferGeometry;J.setAttribute("position",new o.Float32BufferAttribute($.vertices,3)),$.normals.length>0?J.setAttribute("normal",new o.Float32BufferAttribute($.normals,3)):J.computeVertexNormals(),$.colors.length>0&&(W=!0,J.setAttribute("color",new o.Float32BufferAttribute($.colors,3))),$.uvs.length>0&&J.setAttribute("uv",new o.Float32BufferAttribute($.uvs,2));for(var K,Z=[],Q=0,ee=H.length;Q<ee;Q++){var te=(oe=H[Q]).name+"_"+oe.smooth+"_"+W,ne=c.materials[te];if(null!==this.materials)if(ne=this.materials.create(oe.name),!Y||!ne||ne instanceof a.LineBasicMaterial){if(X&&ne&&!(ne instanceof p.PointsMaterial)){var re=new p.PointsMaterial({size:10,sizeAttenuation:!1});l.Material.prototype.copy.call(re,ne),re.color.copy(ne.color),re.map=ne.map,ne=re}}else{var se=new a.LineBasicMaterial;l.Material.prototype.copy.call(se,ne),se.color.copy(ne.color),ne=se}void 0===ne&&((ne=Y?new a.LineBasicMaterial:X?new p.PointsMaterial({size:1,sizeAttenuation:!1}):new d.a).name=oe.name,ne.flatShading=!oe.smooth,ne.vertexColors=W,c.materials[te]=ne),Z.push(ne)}if(Z.length>1){for(Q=0,ee=H.length;Q<ee;Q++){var oe=H[Q];J.addGroup(oe.groupStart,oe.groupCount,Q)}K=Y?new _.LineSegments(J,Z):X?new h.Points(J,Z):new u.Mesh(J,Z)}else K=Y?new _.LineSegments(J,Z[0]):X?new h.Points(J,Z[0]):new u.Mesh(J,Z[0]);K.name=q.name,U.add(K)}}return U}}),g}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(13),s=n(53),o=n(1),i=n(5),a=n(17);class _ extends i.NodeParamsConfig{constructor(){super(...arguments),this.dist=i.ParamConfig.FLOAT(.1,{range:[0,1],range_locked:[!0,!1]})}}const c=new _;class l extends r.TypedSopNode{constructor(){super(...arguments),this.params_config=c}static type(){return"fuse"}static displayed_input_names(){return["points to fuse together"]}initialize_node(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([a.InputCloneMode.FROM_NODE])}cook(e){const t=e[0],n=[];let r;for(let e of t.core_objects())r=this._fuse_core_object(e),r&&n.push(r);this.set_objects(n)}_fuse_core_object(e){const t=e.object();if(!t)return;const n=e.points(),r=this.pv.dist,i={};for(let e of n){const t=e.position(),n=new o.Vector3(Math.round(t.x/r),Math.round(t.y/r),Math.round(t.z/r)).toArray().join("-");i[n]=i[n]||[],i[n].push(e)}const a=[];return Object.keys(i).forEach(e=>{a.push(i[e][0])}),t.geometry.dispose(),a.length>0?(t.geometry=s.CoreGeometry.geometry_from_points(a,t.constructor),t):void 0}}t.FuseSopNode=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),s=n(13),o=n(84),i=n(35),a=n(872),_=new r.Vector3(0,1,0),c=n(5);class l extends c.NodeParamsConfig{constructor(){super(...arguments),this.size=c.ParamConfig.VECTOR2([1,1]),this.hexagon_radius=c.ParamConfig.FLOAT(.1),this.direction=c.ParamConfig.VECTOR3([0,1,0]),this.points_only=c.ParamConfig.BOOLEAN(0)}}const u=new l;class d extends s.TypedSopNode{constructor(){super(...arguments),this.params_config=u,this._core_transform=new o.CoreTransform}static type(){return"hexagons"}initialize_node(){}cook(){const e=new a.CoreGeometryOperationHexagon(this.pv.size,this.pv.hexagon_radius,this.pv.points_only).process();this._core_transform.rotate_geometry(e,_,this.pv.direction),this.pv.points_only?this.set_geometry(e,i.CoreConstant.OBJECT_TYPE.POINTS):this.set_geometry(e)}}t.HexagonsSopNode=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(2),o=n(6),i={BufferAttribute:n(4).BufferAttribute,BufferGeometry:o.BufferGeometry,Vector2:s.Vector2},a=r.__importDefault(n(82));t.CoreGeometryOperationHexagon=class{constructor(e,t,n){this._param_size=e,this._param_hexagon_radius=t,this._param_points_only=n}process(){const e=this._param_hexagon_radius,t=.5*e,n=e,r=Math.cos(Math.PI/6)*this._param_hexagon_radius,s=Math.floor(this._param_size.x/n),o=Math.floor(this._param_size.y/r);let _=[],c=[];for(let e=0;e<o;e++)for(let o=0;o<s;o++)_.push([-.5*this._param_size.x+o*n+(e%2==0?t:0),0,-.5*this._param_size.y+e*r]),this._param_points_only||e>=1&&(0==o||o==s-1?0==o?c.push([o+1+(e-1)*s,o+(e-1)*s,o+e*s]):c.push([o+e*s,o+(e-1)*s,o-1+e*s]):(c.push([o+e*s,o+(e-1)*s,o-1+e*s]),c.push([o+e*s,o+1+(e-1)*s,o+(e-1)*s])));_=a.default(_);const l=new i.BufferGeometry;return l.setAttribute("position",new i.BufferAttribute(new Float32Array(_),3)),this._param_points_only||(c=a.default(c),l.setIndex(c),l.computeVertexNormals()),l}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(10),s={Group:n(40).Group,Object3D:r.Object3D},o=n(13);var i;!function(e){e.ADD_PARENT="add_parent",e.REMOVE_PARENT="remove_parent"}(i=t.HierarchyMode||(t.HierarchyMode={})),t.HIERARCHY_MODES=[i.ADD_PARENT,i.REMOVE_PARENT];const a=n(5);class _ extends a.NodeParamsConfig{constructor(){super(...arguments),this.mode=a.ParamConfig.INTEGER(0,{menu:{entries:t.HIERARCHY_MODES.map((e,t)=>({name:e,value:t}))}}),this.levels=a.ParamConfig.INTEGER(1,{range:[0,5]})}}const c=new _;class l extends o.TypedSopNode{constructor(){super(...arguments),this.params_config=c}static type(){return"hierarchy"}static displayed_input_names(){return["geometry to add or remove parents to/from"]}initialize_node(){this.io.inputs.set_count(1)}cook(e){const n=e[0];if(t.HIERARCHY_MODES[this.pv.mode]==i.ADD_PARENT){const e=this._add_parent_to_core_group(n);this.set_objects(e)}else{const e=this._remove_parent_from_core_group(n);this.set_objects(e)}}_add_parent_to_core_group(e){if(0==this.pv.levels)return e.objects();{const t=[];let n;for(let r of e.objects())n=this._add_parent_to_object(r),n&&t.push(n);return t}}_add_parent_to_object(e){let t=new s.Group;if(t.add(e),this.pv.levels>0)for(let e=0;e<this.pv.levels-1;e++)t=this._add_new_parent(t);return t}_add_new_parent(e){const t=new s.Group;return t.add(e),t}_remove_parent_from_core_group(e){if(0==this.pv.levels)return e.objects();{const t=[];for(let n of e.objects()){const e=this._remove_parent_from_object(n);for(let n of e)t.push(n)}return t}}_remove_parent_from_object(e){let t=e.children;for(let e=0;e<this.pv.levels-1;e++)t=this._get_children_from_objects(t);return t}_get_children_from_objects(e){let t;const n=[];for(;t=e.pop();)if(t.children)for(let e of t.children)n.push(e);return n}}t.HierarchySopNode=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(13),o=n(385),i=n(162),a=n(17),_=n(133),c=n(27),l=n(5),u=n(35);class d extends l.NodeParamsConfig{constructor(){super(...arguments),this.attributes_to_copy=l.ParamConfig.STRING("instance*"),this.apply_material=l.ParamConfig.BOOLEAN(1),this.material=l.ParamConfig.OPERATOR_PATH("",{visible_if:{apply_material:1},node_selection:{context:c.NodeContext.MAT},dependent_on_found_node:!1})}}const h=new d;class p extends s.TypedSopNode{constructor(){super(...arguments),this.params_config=h,this._on_create_bound=this._on_create.bind(this)}static type(){return"instance"}static displayed_input_names(){return["geometry to be instanciated","points to instance to"]}initialize_node(){super.initialize_node(),this.lifecycle.add_on_create_hook(this._on_create_bound),this.io.inputs.set_count(2),this.io.inputs.init_inputs_clonable_state([a.InputCloneMode.ALWAYS,a.InputCloneMode.NEVER])}cook(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=e[0];this._geometry=void 0;const n=t.objects()[0];if(n){const t=n.geometry;if(t){const n=e[1];this._create_instance(t,n)}}if(this._geometry){const e=u.ObjectTypeByObject(n);if(e){const t=this.create_object(this._geometry,e);this.pv.apply_material&&(yield this._apply_material(t)),this.set_object(t)}else this.cook_controller.end_cook()}else this.cook_controller.end_cook()}))}_apply_material(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=this.p.material.found_node();if(t)if(t.node_context()==c.NodeContext.MAT){const n=t;this._globals_handler=this._globals_handler||new _.GlobalsGeometryHandler;const r=n;r.assembler_controller&&r.assembler_controller.set_assembler_globals_handler(this._globals_handler);const s=(yield n.request_container()).material();s&&(e.material=s,i.CoreMaterial.apply_custom_materials(e,s))}else this.states.error.set("found node is not a material");else this.states.error.set("material node invalid")}))}_create_instance(e,t){this._geometry=o.CoreInstancer.create_instance_buffer_geo(e,t,this.pv.attributes_to_copy)}_on_create(){const e=this.scene.root;let t;const n=e.node("MAT");n&&"materials"==n.type?t=n:(t=e.create_node("materials"),t.set_name("MAT"));const r=t.node("mesh_lambert_builder1")||((e,t)=>{const n=e.create_node("mesh_lambert_builder");n.set_name(t);const r=n.create_node("instance_transform");let s=n.node("output1");return s||(s=n.create_node("output")),s.set_input("position",r,"position"),s.set_input("normal",r,"normal"),n})(t,"mesh_lambert_builder1");this.p.material.set(r.full_path())}}t.InstanceSopNode=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r={Vector3:n(1).Vector3},s=n(104),o=n(13),i=n(5),a=n(17);class _ extends i.NodeParamsConfig{constructor(){super(...arguments),this.amount=i.ParamConfig.FLOAT(1),this.seed=i.ParamConfig.INTEGER(1,{range:[0,100]})}}const c=new _;class l extends o.TypedSopNode{constructor(){super(...arguments),this.params_config=c}static type(){return"jitter"}static displayed_input_names(){return["geometry to jitter points of"]}initialize_node(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([a.InputCloneMode.FROM_NODE])}cook(e){const t=e[0];t.points().forEach((e,t)=>{const n=new r.Vector3(2*(s.CoreMath.rand(75*t+764+this.pv.seed)-.5),2*(s.CoreMath.rand(5678*t+3653+this.pv.seed)-.5),2*(s.CoreMath.rand(657*t+48464+this.pv.seed)-.5));n.normalize(),n.multiplyScalar(this.pv.amount);const o=e.position().clone().add(n);e.set_position(o)}),this.set_core_group(t)}}t.JitterSopNode=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(13),s=n(5),o=n(17);class i extends s.NodeParamsConfig{constructor(){super(...arguments),this.layer=s.ParamConfig.INTEGER(0,{range:[0,31],range_locked:[!0,!0]})}}const a=new i;class _ extends r.TypedSopNode{constructor(){super(...arguments),this.params_config=a}static type(){return"layer"}static displayed_input_names(){return["objects to change layers of"]}initialize_node(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([o.InputCloneMode.FROM_NODE])}cook(e){const t=e[0];for(let e of t.objects())e.layers.set(this.pv.layer);this.set_core_group(t)}}t.LayerSopNode=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(4),o=n(6),i=r.__importDefault(n(208)),a=n(13),_=n(35),c=n(5);class l extends c.NodeParamsConfig{constructor(){super(...arguments),this.length=c.ParamConfig.FLOAT(1,{range:[0,10]}),this.points_count=c.ParamConfig.INTEGER(1,{range:[2,100],range_locked:[!0,!1]}),this.origin=c.ParamConfig.VECTOR3([0,0,0]),this.direction=c.ParamConfig.VECTOR3([0,1,0])}}const u=new l;class d extends a.TypedSopNode{constructor(){super(...arguments),this.params_config=u}static type(){return"line"}initialize_node(){}cook(){const e=Math.max(2,this.pv.points_count),t=new Array(3*e),n=new Array(e),r=this.pv.direction.clone().normalize().multiplyScalar(this.pv.length);i.default(e,s=>{const o=s/(e-1),i=r.clone().multiplyScalar(o);i.add(this.pv.origin),i.toArray(t,3*s),s>0&&(n[2*(s-1)]=s-1,n[2*(s-1)+1]=s)});const a=new o.BufferGeometry;a.setAttribute("position",new s.Float32BufferAttribute(t,3)),a.setIndex(n),this.set_geometry(a,_.CoreConstant.OBJECT_TYPE.LINE_SEGMENTS)}}t.LineSopNode=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(13),o=n(162),i=n(133),a=n(17),_=n(27),c=n(26),l=n(5);class u extends l.NodeParamsConfig{constructor(){super(...arguments),this.group=l.ParamConfig.STRING(""),this.material=l.ParamConfig.OPERATOR_PATH("/MAT/mesh_standard1",{node_selection:{context:_.NodeContext.MAT},dependent_on_found_node:!1}),this.apply_to_children=l.ParamConfig.BOOLEAN(1)}}const d=new u;class h extends s.TypedSopNode{constructor(){super(...arguments),this.params_config=d,this._globals_handler=new i.GlobalsGeometryHandler}static type(){return"material"}static displayed_input_names(){return["objects to assign material to"]}initialize_node(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([a.InputCloneMode.FROM_NODE])}cook(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=e[0],n=this.p.material.found_node();if(n)if(n.node_context()!=_.NodeContext.MAT)this.states.error.set("node is not a material");else{const e=n,r=e.material;if(r instanceof c.ShaderMaterial){n.assembler_controller.set_assembler_globals_handler(this._globals_handler)}if(yield e.request_container(),r){for(let e of t.objects_from_group(this.pv.group))this.pv.apply_to_children?e.traverse(e=>{this.apply_material(e,r)}):this.apply_material(e,r);this.set_core_group(t)}else this.states.error.set(`material invalid. (error: '${e.states.error.message}')`)}else this.states.error.set(`node '${this.pv.material}' not found`)}))}apply_material(e,t){e.material=t,o.CoreMaterial.apply_custom_materials(e,t)}}t.MaterialSopNode=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(13),s=n(53),o=n(35),i="geometry to merge",a=n(5);class _ extends a.NodeParamsConfig{constructor(){super(...arguments),this.compact=a.ParamConfig.BOOLEAN(1)}}const c=new _;class l extends r.TypedSopNode{constructor(){super(...arguments),this.params_config=c}static type(){return"merge"}static displayed_input_names(){return[i,i,i,i]}initialize_node(){this.io.inputs.set_count(1,4),this.ui_data.set_width(100)}cook(e){let t=[];for(let n of e)if(n){const e=n.objects();for(let n of e)n.traverse(e=>{t.push(e)})}this.pv.compact&&(t=this._make_compact(t)),this.set_objects(t)}_make_compact(e){const t={[o.ObjectType.MESH]:[],[o.ObjectType.POINTS]:[],[o.ObjectType.LINE_SEGMENTS]:[]},n=[];for(let n of e)n.traverse(e=>{const n=e;n.geometry&&(n.isMesh?t[o.ObjectType.MESH].push(n):n.isLineSegments?t[o.ObjectType.LINE_SEGMENTS].push(n):n.isPoints&&t[o.ObjectType.POINTS].push(n))});for(let e of Object.keys(t)){const r=t[e],o=[];for(let e of r){const t=e.geometry;t.applyMatrix4(e.matrix),o.push(t)}const i=s.CoreGeometry.merge_geometries(o);if(i){const t=this.create_object(i,e);n.push(t)}}return n}}t.MergeSopNode=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(1),o=n(2),i=n(13),a=n(104),_=n(17),c=n(192),l=n(881);var u;!function(e){e.ADD="add",e.SET="set",e.MULT="mult",e.SUBSTRACT="substract",e.DIVIDE="divide"}(u||(u={}));const d=[u.ADD,u.SET,u.MULT,u.SUBSTRACT,u.DIVIDE],h=n(5);class p extends h.NodeParamsConfig{constructor(){super(...arguments),this.amount=h.ParamConfig.FLOAT(1),this.freq=h.ParamConfig.VECTOR3([1,1,1]),this.offset=h.ParamConfig.VECTOR3([0,0,0]),this.octaves=h.ParamConfig.INTEGER(3,{range:[1,8],range_locked:[!0,!1]}),this.amp_attenuation=h.ParamConfig.FLOAT(.5,{range:[0,1]}),this.freq_increase=h.ParamConfig.FLOAT(2,{range:[0,10]}),this.seed=h.ParamConfig.INTEGER(0,{range:[0,100]}),this.separator=h.ParamConfig.SEPARATOR(),this.use_normals=h.ParamConfig.BOOLEAN(0),this.attrib_name=h.ParamConfig.STRING("position"),this.operation=h.ParamConfig.INTEGER(d.indexOf(u.ADD),{menu:{entries:d.map(e=>({name:e,value:d.indexOf(e)}))}}),this.compute_normals=h.ParamConfig.BOOLEAN(1)}}const m=new p;class f extends i.TypedSopNode{constructor(){super(...arguments),this.params_config=m,this._simplex_by_seed=new Map,this._rest_points=[]}static type(){return"noise"}static displayed_input_names(){return["geometry to add noise to","rest geometry"]}initialize_node(){this.io.inputs.set_count(1,2),this.io.inputs.init_inputs_clonable_state([_.InputCloneMode.FROM_NODE,_.InputCloneMode.NEVER])}cook(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=e[0],n=e[1],r=t.points();n&&(null!=this._rest_core_group_timestamp&&this._rest_core_group_timestamp==n.timestamp()||(this._rest_points=n.points(),this._rest_core_group_timestamp=n.timestamp()));const i=this._get_simplex(),a=this.pv.use_normals&&t.has_attrib("normal"),_=t.attrib_size(this.pv.attrib_name);for(let e=0;e<r.length;e++){const t=r[e];let l=n?this._rest_points[e]:t;const h=l.attrib_value(this.pv.attrib_name),p=l.position().add(this.pv.offset).multiply(this.pv.freq);let m=(()=>{if(a){const e=l.attrib_value("normal"),t=this.pv.amount*this._fbm(i,p.x,p.y,p.z);return e.clone().multiplyScalar(t)}return new s.Vector3(this.pv.amount*this._fbm(i,p.x+545,p.y+125454,p.z+2142),this.pv.amount*this._fbm(i,p.x-425,p.y-25746,p.z+95242),this.pv.amount*this._fbm(i,p.x+765132,p.y+21,p.z-9245))})();m=(()=>{switch(_){case 1:return m.x;case 2:return new o.Vector2(m.x,m.y);case 3:return m}})();const f=(()=>{const e=d[this.pv.operation];switch(_){case 1:switch(e){case u.ADD:return h+m;case u.SET:return m;case u.MULT:return h*m;case u.DIVIDE:return h/m;case u.SUBSTRACT:return h-m}c.TypeAssert.unreachable(e);break;default:switch(e){case u.ADD:return h.add(m);case u.SET:return m;case u.MULT:return h.multiply(m);case u.DIVIDE:return h.divide(m);case u.SUBSTRACT:return h.sub(m)}c.TypeAssert.unreachable(e)}})();t.set_attrib_value(this.pv.attrib_name,f)}if(!this.io.inputs.input_cloned(0))for(let e of t.geometries())e.getAttribute(this.pv.attrib_name).needsUpdate=!0;this.pv.compute_normals&&t.compute_vertex_normals(),this.set_core_group(t)}))}_fbm(e,t,n,r){let s=0,o=1;for(let i=0;i<this.pv.octaves;i++)s+=o*e.noise3d(t,n,r),t*=this.pv.freq_increase,n*=this.pv.freq_increase,r*=this.pv.freq_increase,o*=this.pv.amp_attenuation;return s}_get_simplex(){const e=this._simplex_by_seed.get(this.pv.seed);if(e)return e;{const e=this._create_simplex();return this._simplex_by_seed.set(this.pv.seed,e),e}}_create_simplex(){const e=this.pv.seed,t={random:function(){return a.CoreMath.rand_float(e)}},n=new l.SimplexNoise(t);return this._simplex_by_seed.delete(e),n}}t.NoiseSopNode=f},function(e,t,n){"use strict";n.r(t),n.d(t,"SimplexNoise",(function(){return r}));var r=function(e){null==e&&(e=Math),this.grad3=[[1,1,0],[-1,1,0],[1,-1,0],[-1,-1,0],[1,0,1],[-1,0,1],[1,0,-1],[-1,0,-1],[0,1,1],[0,-1,1],[0,1,-1],[0,-1,-1]],this.grad4=[[0,1,1,1],[0,1,1,-1],[0,1,-1,1],[0,1,-1,-1],[0,-1,1,1],[0,-1,1,-1],[0,-1,-1,1],[0,-1,-1,-1],[1,0,1,1],[1,0,1,-1],[1,0,-1,1],[1,0,-1,-1],[-1,0,1,1],[-1,0,1,-1],[-1,0,-1,1],[-1,0,-1,-1],[1,1,0,1],[1,1,0,-1],[1,-1,0,1],[1,-1,0,-1],[-1,1,0,1],[-1,1,0,-1],[-1,-1,0,1],[-1,-1,0,-1],[1,1,1,0],[1,1,-1,0],[1,-1,1,0],[1,-1,-1,0],[-1,1,1,0],[-1,1,-1,0],[-1,-1,1,0],[-1,-1,-1,0]],this.p=[];for(var t=0;t<256;t++)this.p[t]=Math.floor(256*e.random());this.perm=[];for(t=0;t<512;t++)this.perm[t]=this.p[255&t];this.simplex=[[0,1,2,3],[0,1,3,2],[0,0,0,0],[0,2,3,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,3,0],[0,2,1,3],[0,0,0,0],[0,3,1,2],[0,3,2,1],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,3,2,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[1,2,0,3],[0,0,0,0],[1,3,0,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,3,0,1],[2,3,1,0],[1,0,2,3],[1,0,3,2],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,3,1],[0,0,0,0],[2,1,3,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0],[2,0,1,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,0,1,2],[3,0,2,1],[0,0,0,0],[3,1,2,0],[2,1,0,3],[0,0,0,0],[0,0,0,0],[0,0,0,0],[3,1,0,2],[0,0,0,0],[3,2,0,1],[3,2,1,0]]};r.prototype.dot=function(e,t,n){return e[0]*t+e[1]*n},r.prototype.dot3=function(e,t,n,r){return e[0]*t+e[1]*n+e[2]*r},r.prototype.dot4=function(e,t,n,r,s){return e[0]*t+e[1]*n+e[2]*r+e[3]*s},r.prototype.noise=function(e,t){var n,r,s=(e+t)*(.5*(Math.sqrt(3)-1)),o=Math.floor(e+s),i=Math.floor(t+s),a=(3-Math.sqrt(3))/6,_=(o+i)*a,c=e-(o-_),l=t-(i-_);c>l?(n=1,r=0):(n=0,r=1);var u=c-n+a,d=l-r+a,h=c-1+2*a,p=l-1+2*a,m=255&o,f=255&i,g=this.perm[m+this.perm[f]]%12,v=this.perm[m+n+this.perm[f+r]]%12,y=this.perm[m+1+this.perm[f+1]]%12,b=.5-c*c-l*l,x=.5-u*u-d*d,T=.5-h*h-p*p;return 70*((b<0?0:(b*=b)*b*this.dot(this.grad3[g],c,l))+(x<0?0:(x*=x)*x*this.dot(this.grad3[v],u,d))+(T<0?0:(T*=T)*T*this.dot(this.grad3[y],h,p)))},r.prototype.noise3d=function(e,t,n){var r,s,o,i,a,_,c=(e+t+n)*(1/3),l=Math.floor(e+c),u=Math.floor(t+c),d=Math.floor(n+c),h=1/6,p=(l+u+d)*h,m=e-(l-p),f=t-(u-p),g=n-(d-p);m>=f?f>=g?(r=1,s=0,o=0,i=1,a=1,_=0):m>=g?(r=1,s=0,o=0,i=1,a=0,_=1):(r=0,s=0,o=1,i=1,a=0,_=1):f<g?(r=0,s=0,o=1,i=0,a=1,_=1):m<g?(r=0,s=1,o=0,i=0,a=1,_=1):(r=0,s=1,o=0,i=1,a=1,_=0);var v=m-r+h,y=f-s+h,b=g-o+h,x=m-i+2*h,T=f-a+2*h,w=g-_+2*h,C=m-1+.5,P=f-1+.5,E=g-1+.5,O=255&l,A=255&u,M=255&d,N=this.perm[O+this.perm[A+this.perm[M]]]%12,S=this.perm[O+r+this.perm[A+s+this.perm[M+o]]]%12,R=this.perm[O+i+this.perm[A+a+this.perm[M+_]]]%12,L=this.perm[O+1+this.perm[A+1+this.perm[M+1]]]%12,j=.6-m*m-f*f-g*g,k=.6-v*v-y*y-b*b,I=.6-x*x-T*T-w*w,G=.6-C*C-P*P-E*E;return 32*((j<0?0:(j*=j)*j*this.dot3(this.grad3[N],m,f,g))+(k<0?0:(k*=k)*k*this.dot3(this.grad3[S],v,y,b))+(I<0?0:(I*=I)*I*this.dot3(this.grad3[R],x,T,w))+(G<0?0:(G*=G)*G*this.dot3(this.grad3[L],C,P,E)))},r.prototype.noise4d=function(e,t,n,r){var s,o,i,a,_,c,l,u,d,h,p,m,f=this.grad4,g=this.simplex,v=this.perm,y=(Math.sqrt(5)-1)/4,b=(5-Math.sqrt(5))/20,x=(e+t+n+r)*y,T=Math.floor(e+x),w=Math.floor(t+x),C=Math.floor(n+x),P=Math.floor(r+x),E=(T+w+C+P)*b,O=e-(T-E),A=t-(w-E),M=n-(C-E),N=r-(P-E),S=(O>A?32:0)+(O>M?16:0)+(A>M?8:0)+(O>N?4:0)+(A>N?2:0)+(M>N?1:0),R=O-(s=g[S][0]>=3?1:0)+b,L=A-(o=g[S][1]>=3?1:0)+b,j=M-(i=g[S][2]>=3?1:0)+b,k=N-(a=g[S][3]>=3?1:0)+b,I=O-(_=g[S][0]>=2?1:0)+2*b,G=A-(c=g[S][1]>=2?1:0)+2*b,z=M-(l=g[S][2]>=2?1:0)+2*b,D=N-(u=g[S][3]>=2?1:0)+2*b,F=O-(d=g[S][0]>=1?1:0)+3*b,B=A-(h=g[S][1]>=1?1:0)+3*b,V=M-(p=g[S][2]>=1?1:0)+3*b,U=N-(m=g[S][3]>=1?1:0)+3*b,q=O-1+4*b,$=A-1+4*b,H=M-1+4*b,Y=N-1+4*b,X=255&T,W=255&w,J=255&C,K=255&P,Z=v[X+v[W+v[J+v[K]]]]%32,Q=v[X+s+v[W+o+v[J+i+v[K+a]]]]%32,ee=v[X+_+v[W+c+v[J+l+v[K+u]]]]%32,te=v[X+d+v[W+h+v[J+p+v[K+m]]]]%32,ne=v[X+1+v[W+1+v[J+1+v[K+1]]]]%32,re=.6-O*O-A*A-M*M-N*N,se=.6-R*R-L*L-j*j-k*k,oe=.6-I*I-G*G-z*z-D*D,ie=.6-F*F-B*B-V*V-U*U,ae=.6-q*q-$*$-H*H-Y*Y;return 27*((re<0?0:(re*=re)*re*this.dot4(f[Z],O,A,M,N))+(se<0?0:(se*=se)*se*this.dot4(f[Q],R,L,j,k))+(oe<0?0:(oe*=oe)*oe*this.dot4(f[ee],I,G,z,D))+(ie<0?0:(ie*=ie)*ie*this.dot4(f[te],F,B,V,U))+(ae<0?0:(ae*=ae)*ae*this.dot4(f[ne],q,$,H,Y)))}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(13),o=n(17),i=n(5);class a extends i.NodeParamsConfig{constructor(){super(...arguments),this.edit=i.ParamConfig.BOOLEAN(0),this.update_x=i.ParamConfig.BOOLEAN(0,{visible_if:{edit:1}}),this.x=i.ParamConfig.FLOAT("@N.x",{visible_if:{update_x:1,edit:1},expression:{for_entities:!0}}),this.update_y=i.ParamConfig.BOOLEAN(0,{visible_if:{edit:1}}),this.y=i.ParamConfig.FLOAT("@N.y",{visible_if:{update_y:1,edit:1},expression:{for_entities:!0}}),this.update_z=i.ParamConfig.BOOLEAN(0,{visible_if:{edit:1}}),this.z=i.ParamConfig.FLOAT("@N.z",{visible_if:{update_z:1,edit:1},expression:{for_entities:!0}}),this.recompute=i.ParamConfig.BOOLEAN(0,{visible_if:{edit:0}}),this.invert=i.ParamConfig.BOOLEAN(0)}}const _=new a;class c extends s.TypedSopNode{constructor(){super(...arguments),this.params_config=_}static type(){return"normals"}static displayed_input_names(){return["geometry to update normals of"]}initialize_node(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([o.InputCloneMode.FROM_NODE])}cook(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=e[0];this.pv.edit?yield this._eval_expressions_for_core_group(t):t.compute_vertex_normals(),this.pv.invert&&this._invert_normals(t),this.set_core_group(t)}))}_eval_expressions_for_core_group(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=e.core_objects();for(let e=0;e<t.length;e++)yield this._eval_expressions_for_core_object(t[e])}))}_eval_expressions_for_core_object(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=e.object().geometry,n=e.points(),r=t.getAttribute("normal").array;if(this.pv.update_x)if(this.p.x.has_expression()&&this.p.x.expression_controller)yield this.p.x.expression_controller.compute_expression_for_points(n,(e,t)=>{r[3*e.index+0]=t});else{let e;for(let t=0;t<n.length;t++)e=n[t],r[3*e.index+0]=this.pv.x}if(this.pv.update_y)if(this.p.y.has_expression()&&this.p.y.expression_controller)yield this.p.y.expression_controller.compute_expression_for_points(n,(e,t)=>{r[3*e.index+1]=t});else{let e;for(let t=0;t<n.length;t++)e=n[t],r[3*e.index+1]=this.pv.y}if(this.pv.update_z)if(this.p.z.has_expression()&&this.p.z.expression_controller)yield this.p.z.expression_controller.compute_expression_for_points(n,(e,t)=>{r[3*e.index+2]=t});else{let e;for(let t=0;t<n.length;t++)e=n[t],r[3*e.index+2]=this.pv.z}}))}_invert_normals(e){var t;for(let n of e.core_objects()){const e=null===(t=n.core_geometry())||void 0===t?void 0:t.geometry();if(e){const t=e.attributes.normal;if(t){const e=t.array;for(let t=0;t<e.length;t++)e[t]*=-1}}}}}t.NormalsSopNode=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(13),s=n(5),o=n(17);class i extends s.NodeParamsConfig{}const a=new i;class _ extends r.TypedSopNode{constructor(){super(...arguments),this.params_config=a}static type(){return"null"}initialize_node(){this.io.inputs.set_count(0,1),this.io.inputs.init_inputs_clonable_state([o.InputCloneMode.FROM_NODE]),this.ui_data.set_border_radius(1e3)}cook(e){const t=e[0];t?this.set_core_group(t):this.set_objects([])}}t.NullSopNode=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(13),o=n(27),i=n(5);class a extends i.NodeParamsConfig{constructor(){super(...arguments),this.geometry=i.ParamConfig.OPERATOR_PATH("",{node_selection:{context:o.NodeContext.SOP}})}}const _=new a;class c extends s.TypedSopNode{constructor(){super(...arguments),this.params_config=_}static type(){return"object_merge"}initialize_node(){}cook(e){return r.__awaiter(this,void 0,void 0,(function*(){const e=this.p.geometry.found_node();if(e)if(e.node_context()==o.NodeContext.SOP){const t=yield e.request_container();this.import_input(e,t)}else this.states.error.set("found node is not a geometry");else this.states.error.set(`node not found at path '${this.pv.geometry}'`)}))}import_input(e,t){let n;null!=(n=t.core_content_cloned())?this.set_core_group(n):this.states.error.set("invalid target")}}t.ObjectMergeSopNode=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=r.__importDefault(n(886)),o={Float32BufferAttribute:n(4).Float32BufferAttribute},i=n(13),a=n(17),_=n(5);class c extends _.NodeParamsConfig{constructor(){super(...arguments),this.attrib_name=_.ParamConfig.STRING("occlusion"),this.samples=_.ParamConfig.INTEGER(256,{range:[1,256],range_locked:[!0,!1]}),this.sep=_.ParamConfig.SEPARATOR(),this.buffer_resolution=_.ParamConfig.INTEGER(512),this.bias=_.ParamConfig.FLOAT(.01)}}const l=new c;class u extends i.TypedSopNode{constructor(){super(...arguments),this.params_config=l}static type(){return"occlusion"}initialize_node(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([a.InputCloneMode.FROM_NODE])}cook(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=e[0],n=t.core_objects();for(let e of n)yield this._process_occlusion_on_object(e);this.set_core_group(t)}))}_process_occlusion_on_object(e){var t,n;return r.__awaiter(this,void 0,void 0,(function*(){const r=null===(t=e.core_geometry())||void 0===t?void 0:t.geometry();if(!r)return;const i=r.attributes.position.array,a=r.attributes.normal.array,_=null===(n=r.getIndex())||void 0===n?void 0:n.array,c=s.default(i,{cells:_,normals:a,resolution:this.pv.buffer_resolution,bias:this.pv.bias});for(let e=0;e<this.pv.samples;e++)c.sample();const l=c.report();r.setAttribute(this.pv.attrib_name,new o.Float32BufferAttribute(l,1)),c.dispose()}))}}t.OcclusionSopNode=u},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(13),o=n(979),i=n(281),a=n(17),_=n(27),c=n(132),l=n(984),u=n(985),d=n(5),h=n(269),p=n(376),m=n(370);class f extends d.NodeParamsConfig{constructor(){super(...arguments),this.start_frame=d.ParamConfig.FLOAT(1,{range:[1,100]}),this.auto_textures_size=d.ParamConfig.BOOLEAN(1),this.max_textures_size=d.ParamConfig.VECTOR2([1024,1024],{visible_if:{auto_textures_size:1}}),this.textures_size=d.ParamConfig.VECTOR2([64,64],{visible_if:{auto_textures_size:0}}),this.reset=d.ParamConfig.BUTTON(null,{callback:(e,t)=>{v.PARAM_CALLBACK_reset(e)}}),this.material=d.ParamConfig.OPERATOR_PATH("",{node_selection:{context:_.NodeContext.MAT},dependent_on_found_node:!1})}}const g=new f;class v extends s.TypedSopNode{constructor(){super(...arguments),this.params_config=g,this._assembler_controller=new c.GlAssemblerController(this,o.ShaderAssemblerParticles),this.gpu_controller=new u.ParticlesSystemGpuComputeController(this),this.render_controller=new l.ParticlesSystemGpuRenderController(this),this._reset_material_if_dirty_bound=this._reset_material_if_dirty.bind(this),this._children_controller_context=_.NodeContext.GL,this._on_create_prepare_material_bound=this._on_create_prepare_material.bind(this)}static type(){return"particles_system_gpu"}get assembler_controller(){return this._assembler_controller}static require_webgl2(){return!0}static PARAM_CALLBACK_reset(e){e.PARAM_CALLBACK_reset()}PARAM_CALLBACK_reset(){this.gpu_controller.reset_gpu_compute_and_set_dirty()}static displayed_input_names(){return["points to emit particles from"]}initialize_node(){var e;this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([a.InputCloneMode.NEVER]),this.add_post_dirty_hook("_reset_material_if_dirty",this._reset_material_if_dirty_bound),this.lifecycle.add_on_create_hook(this.assembler_controller.on_create.bind(this.assembler_controller)),this.lifecycle.add_on_create_hook(this._on_create_prepare_material_bound),null===(e=this.children_controller)||void 0===e||e.init()}create_node(e){return super.create_node(e)}children(){return super.children()}nodes_by_type(e){return super.nodes_by_type(e)}_reset_material_if_dirty(){return r.__awaiter(this,void 0,void 0,(function*(){this.p.material.is_dirty&&(this.render_controller.reset_render_material(),this.is_on_frame_start()||(yield this.render_controller.init_render_material()))}))}is_on_frame_start(){return this.scene.frame==this.pv.start_frame}cook(e){return r.__awaiter(this,void 0,void 0,(function*(){this.gpu_controller.set_restart_not_required();const t=e[0];console.log("particles cook"),yield this.compile_if_required(),this.is_on_frame_start()&&this.gpu_controller.reset_particle_groups(),this.gpu_controller.initialized||(yield this.gpu_controller.init(t)),this.render_controller.initialized||(this.render_controller.init_core_group(t),yield this.render_controller.init_render_material()),this.gpu_controller.restart_simulation_if_required(),this.gpu_controller.compute_similation_if_required(),this.is_on_frame_start()?this.set_core_group(t):this.cook_controller.end_cook()}))}compile_if_required(){return r.__awaiter(this,void 0,void 0,(function*(){this.assembler_controller.compile_required()&&(yield this.run_assembler())}))}run_assembler(){return r.__awaiter(this,void 0,void 0,(function*(){const e=this._find_root_nodes();if(console.log("root_nodes",e),e.length>0){const t=new i.GlobalsTextureHandler(i.GlobalsTextureHandler.PARTICLE_SIM_UV);this.assembler_controller.set_assembler_globals_handler(t),this.assembler_controller.assembler.set_root_nodes(e),yield this.assembler_controller.assembler.compile(),yield this.assembler_controller.post_compile()}const t=this.assembler_controller.assembler.shaders_by_name();this.gpu_controller.set_shaders_by_name(t),this.render_controller.set_shaders_by_name(t),this.gpu_controller.reset_gpu_compute(),this.gpu_controller.reset_particle_groups(),yield this.assembler_controller.assign_uniform_values()}))}_find_root_nodes(){const e=h.GlNodeFinder.find_attribute_export_nodes(this),t=h.GlNodeFinder.find_output_nodes(this);if(t.length>1)return this.states.error.set("only one output node is allowed"),[];const n=t[0];return n&&e.push(n),e}_on_create_prepare_material(){const e=this.scene.root.nodes_by_type("materials")[0]||this.scene.root.create_node("materials");e.set_name("MAT");const t=e.node("points_particles")||((e,t)=>{let n=e.node("points_builder1");n&&n.type==p.PointsBuilderMatNode.type()||(n=e.create_node("points_builder")),n.set_name(t);let r=n.node("constant");r&&r.type==m.ConstantGlNode.type()||(r=n.create_node("constant"),r.set_name("constant_point_size")),r.p.float.set(4);const s=n.node("output1");return s&&s.set_input("gl_PointSize",r,m.ConstantGlNode.OUTPUT_NAME),n})(e,"points_particles");if(t){const e=t.full_path();this.p.material.raw_input!=e&&this.p.material.set(e)}}}t.ParticlesSystemGpuSopNode=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(158),o=r.__importDefault(n(980)),i=n(981),a=n(28),_=n(364),c=n(24),l=n(33),u=n(16),d=n(29);class h extends s.BaseGlShaderAssembler{get _template_shader(){}_template_shader_for_shader_name(e){return o.default}compile(){return r.__awaiter(this,void 0,void 0,(function*(){yield this.setup_shader_names_and_variables(),yield this.update_shaders()}))}root_nodes_by_shader_name(e){var t;const n=[];for(let r of this._root_nodes)switch(r.type){case"output":n.push(r);break;case"attribute":{const s=r.attribute_name,o=null===(t=this._texture_allocations_controller)||void 0===t?void 0:t.variable(s);if(o&&o.allocation){o.allocation.shader_name==e&&n.push(r)}break}}return n}leaf_nodes_by_shader_name(e){var t;const n=[];for(let r of this._leaf_nodes)switch(r.type){case"globals":n.push(r);break;case"attribute":{const s=r.attribute_name,o=null===(t=this._texture_allocations_controller)||void 0===t?void 0:t.variable(s);if(o&&o.allocation){o.allocation.shader_name==e&&n.push(r)}break}}return n}setup_shader_names_and_variables(){var e;return r.__awaiter(this,void 0,void 0,(function*(){const t=new _.TypedNodeTraverser(this,this._gl_parent_node);this._leaf_nodes=t.leaves_from_nodes(this._root_nodes);for(let e of this._root_nodes)yield e.params.eval_all();for(let e of this._leaf_nodes)yield e.params.eval_all();console.log("root and leaf:",this._root_nodes,this._leaf_nodes),this._texture_allocations_controller=new i.TextureAllocationsController,this._texture_allocations_controller.allocate_connections_from_root_nodes(this._root_nodes,this._leaf_nodes),this.globals_handler&&(null===(e=this.globals_handler)||void 0===e||e.set_texture_allocations_controller(this._texture_allocations_controller)),this._reset_shader_configs()}))}update_shaders(){return r.__awaiter(this,void 0,void 0,(function*(){this._shaders_by_name=new Map,this._lines=new Map,console.log("this.shader_names",this.shader_names);for(let e of this.shader_names){const t=this._template_shader_for_shader_name(e);this._lines.set(e,t.split("\n"))}this._root_nodes.length>0&&(yield this.build_code_from_nodes(this._root_nodes),this._build_lines());for(let e of this.shader_names){const t=this._lines.get(e);t&&(console.log(e,t.join("\n")),this._shaders_by_name.set(e,t.join("\n")))}}))}add_output_params(e){e.add_param(c.ParamType.VECTOR3,"position",[0,0,0]),e.add_param(c.ParamType.VECTOR3,"velocity",[0,0,0])}add_globals_params(e){e.io.outputs.set_named_output_connection_points([new l.TypedNamedConnectionPoint("position",u.ConnectionPointType.VEC3),new l.TypedNamedConnectionPoint("velocity",u.ConnectionPointType.VEC3),new l.TypedNamedConnectionPoint("time",u.ConnectionPointType.FLOAT)])}allow_attribute_exports(){return!0}get texture_allocations_controller(){return this._texture_allocations_controller=this._texture_allocations_controller||new i.TextureAllocationsController}create_shader_configs(){var e;return(null===(e=this._texture_allocations_controller)||void 0===e?void 0:e.create_shader_configs())||[]}create_variable_configs(){return[]}get shader_names(){return this.texture_allocations_controller.shader_names()||[]}input_names_for_shader_name(e,t){return this.texture_allocations_controller.input_names_for_shader_name(e,t)||[]}insert_define_after(e){return"// INSERT DEFINE"}insert_body_after(e){return"// INSERT BODY"}lines_to_remove(e){return["// INSERT DEFINE","// INSERT BODY"]}add_export_body_line(e,t,n,r,s){var o;if(n){const n=e.variable_for_input(t),i=a.ThreeToGl.vector3(n);if(i){const t=this.texture_allocations_controller.variable(r),n=s.current_shader_name;if(t&&(null===(o=t.allocation)||void 0===o?void 0:o.shader_name)==n){const r=`gl_FragColor.${t.component} = ${i}`;s.add_body_lines(e,[r],n)}}}}set_node_lines_output(e,t){const n=t.current_shader_name,r=this.texture_allocations_controller.input_names_for_shader_name(e,n);if(r)for(let n of r){const r=e.io.inputs.named_input(n);if(r){const s=n;this.add_export_body_line(e,n,r,s,t)}}}set_node_lines_attribute(e,t){var n,r;if(e.is_importing){const s=e.gl_type(),o=e.attribute_name,i=null===(n=this.globals_handler)||void 0===n?void 0:n.read_attribute(e,s,o,t),a=e.gl_var_name(e.output_name),_=`${s} ${a} = ${i}`;t.add_body_lines(e,[_]);const c=this.texture_allocations_controller.variable(o),l=t.current_shader_name;if(c&&(null===(r=c.allocation)||void 0===r?void 0:r.shader_name)==l){const n=this.texture_allocations_controller.variable(o);if(n){const r=`gl_FragColor.${n.component} = ${a}`;t.add_body_lines(e,[r])}}}if(e.is_exporting){const n=e.connected_input_node();if(n){const r=e.attribute_name;this.add_export_body_line(e,e.input_name,n,r,t)}}}set_node_lines_globals(e,t){for(let n of e.io.outputs.used_output_names())switch(n){case"time":this._handle_globals_time(e,n,t);break;default:this._handle_globals_default(e,n,t)}}_handle_globals_time(e,t,n){const r=new d.UniformGLDefinition(e,u.ConnectionPointType.FLOAT,t);n.add_definitions(e,[r]);const s=`float ${e.gl_var_name(t)} = ${t}`;n.add_body_lines(e,[s]),this.set_uniforms_time_dependent()}_handle_globals_default(e,t,n){var r;const s=e.io.outputs.named_output_connection_points_by_name(t);if(s){const o=s.type,i=null===(r=this.globals_handler)||void 0===r?void 0:r.read_attribute(e,o,t,n),a=`${o} ${e.gl_var_name(t)} = ${i}`;n.add_body_lines(e,[a])}}}t.ShaderAssemblerParticles=h},function(e,t,n){"use strict";n.r(t),t.default="#include <common>\n\n// INSERT DEFINE\n\nvoid main() {\n\n\tvec2 particleUV = (gl_FragCoord.xy / resolution.xy);\n\n\t// INSERT BODY\n\n}"},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=r.__importDefault(n(82)),o=r.__importDefault(n(91)),i=r.__importDefault(n(102)),a=r.__importDefault(n(344)),_=n(982),c=n(983),l=n(50),u=n(16);t.TextureAllocationsController=class{constructor(){this._allocations=[],this._next_allocation_index=0}allocate_connections_from_root_nodes(e,t){const n=[];for(let t of e){const e=t.graph_node_id;switch(t.type){case"output":for(let r of t.io.inputs.named_input_connection_points){if(t.io.inputs.named_input(r.name)){const t=new c.TextureVariable(r.name,u.ConnectionPointComponentsCountMap[r.type]);t.add_graph_node_id(e),n.push(t)}}break;case"attribute":{const r=t,s=r.connected_input_node(),o=r.connected_input_connection_point();if(s&&o){const t=new c.TextureVariable(r.attribute_name,u.ConnectionPointComponentsCountMap[o.type]);t.add_graph_node_id(e),n.push(t)}break}}}for(let e of t){const t=e.graph_node_id;switch(e.type){case"globals":{const r=e,s=["position","normal","color","uv"];for(let e of r.io.outputs.used_output_names()){if(s.includes(e)){const s=r.io.outputs.named_output_connection_points_by_name(e);if(s){const r=s.type,o=new c.TextureVariable(e,u.ConnectionPointComponentsCountMap[r]);o.add_graph_node_id(t),n.push(o)}}}break}case"attribute":{const r=e,s=r.output_connection_point();if(s){const e=new c.TextureVariable(r.attribute_name,u.ConnectionPointComponentsCountMap[s.type]);e.add_graph_node_id(t),n.push(e)}break}}}this.allocate_variables(n)}allocate_variables(e){const t=i.default(e,e=>-e.size);for(let e of t)this.allocate_variable(e)}allocate_variable(e){var t;let n=this.has_variable(e.name);if(n){const n=this.variables().filter(t=>t.name==e.name)[0];null===(t=e.graph_node_ids)||void 0===t||t.forEach((e,t)=>{n.add_graph_node_id(t)})}else{if(!n)for(let t of this._allocations)!n&&t.has_space_for_variable(e)&&(t.add_variable(e),n=!0);if(!n){const t=new _.TextureAllocation(this.next_allocation_name());this._allocations.push(t),t.add_variable(e)}}}next_allocation_name(){const e=l.ParticleShaderNames[this._next_allocation_index];return this._next_allocation_index+=1,e}shader_names(){const e=this._allocations.map(e=>e.shader_name);return o.default(e)}create_shader_configs(){return[]}allocation_for_shader_name(e){return this._allocations.filter(t=>t.shader_name==e)[0]}input_names_for_shader_name(e,t){const n=this.allocation_for_shader_name(t);if(n)return n.input_names_for_node(e)}variable(e){for(let t of this._allocations){const n=t.variable(e);if(n)return n}}variables(){return s.default(this._allocations.map(e=>e.variables||[]))}has_variable(e){const t=this.variables().map(e=>e.name);return a.default(t,e)}to_json(e){return this._allocations.map(t=>({[t.texture_name]:t.to_json(e)}))}print(e){console.log(JSON.stringify(this.to_json(e),[""],2))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TextureAllocation=class{constructor(e){this._shader_name=e,this._size=0}add_variable(e){this._variables=this._variables||[],this._variables.push(e),e.set_position(this._size),e.set_allocation(this),this._size+=e.size}has_space_for_variable(e){return this._size+e.size<=4}get shader_name(){return this._shader_name}get texture_name(){return`texture_${this._shader_name}`}get variables(){return this._variables}variables_for_input_node(e){var t;return null===(t=this._variables)||void 0===t?void 0:t.filter(t=>{var n;return(null===(n=t.graph_node_ids)||void 0===n?void 0:n.has(e.graph_node_id))||!1})}input_names_for_node(e){var t;return null===(t=this.variables_for_input_node(e))||void 0===t?void 0:t.map(e=>e.name)}variable(e){if(this._variables)for(let t of this._variables)if(t.name==e)return t}to_json(e){var t;return null===(t=this._variables)||void 0===t?void 0:t.map(t=>t.to_json(e))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.TextureVariable=class{constructor(e,t){if(this._name=e,this._size=t,this._position=-1,!e)throw"TextureVariable requires a name"}set_allocation(e){this._allocation=e}get allocation(){return this._allocation}get graph_node_ids(){return this._graph_node_ids}add_graph_node_id(e){this._graph_node_ids=this._graph_node_ids||new Map,this._graph_node_ids.set(e,!0)}get name(){return this._name}get size(){return this._size}set_position(e){this._position=e}get position(){return this._position}get component(){return"xyzw".split("").splice(this._position,this._size).join("")}to_json(e){const t=[];return this._graph_node_ids&&this._graph_node_ids.forEach((n,r)=>{const s=e.graph.node_from_id(r).name;t.push(s)}),{name:this.name,nodes:t.sort()}}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=r.__importDefault(n(190)),o=n(281),i=n(162);t.ParticlesSystemGpuRenderController=class{constructor(e){this.node=e,this._particles_group_objects=[]}set_shaders_by_name(e){this._shaders_by_name=e,this.reset_render_material()}assign_render_material(){if(this._render_material){for(let e of this._particles_group_objects){const t=e;t.geometry&&(t.material=this._render_material,i.CoreMaterial.apply_custom_materials(t,this._render_material),t.matrixAutoUpdate=!1,t.updateMatrix())}this._render_material.needsUpdate=!0,this.update_render_material_uniforms()}}update_render_material_uniforms(){var e;this._render_material&&(null===(e=this._shaders_by_name)||void 0===e||e.forEach((e,t)=>{var n;const r=null===(n=this.node.gpu_controller.getCurrentRenderTarget(t))||void 0===n?void 0:n.texture;if(r){const e=`texture_${t}`;this._render_material&&(this._render_material.uniforms[e].value=r,i.CoreMaterial.assign_custom_uniforms(this._render_material,e,r))}}))}reset_render_material(){this._render_material=void 0,this._particles_group_objects=[]}get initialized(){return null!=this._render_material}init_core_group(e){for(let t of e.objects())this._particles_group_objects.push(t)}init_render_material(){var e;return r.__awaiter(this,void 0,void 0,(function*(){if(this._render_material)return;this.node.p.material.is_dirty&&(yield this.node.p.material.compute());const t=this.node.p.material.found_node();if(t){const e=this.node.assembler_controller.assembler.texture_allocations_controller.to_json(this.node.scene),n=new o.GlobalsTextureHandler(o.GlobalsTextureHandler.UV_VARYING);n.set_texture_allocations_controller(this.node.assembler_controller.assembler.texture_allocations_controller),t.assembler_controller.set_assembler_globals_handler(n),this._texture_allocations_json&&JSON.stringify(this._texture_allocations_json)==JSON.stringify(e)||(this._texture_allocations_json=s.default(e),t.set_dirty());const r=yield t.request_container();this._render_material=r.material()}else this.node.states.error.set("render material not valid");if(this._render_material){const t=this._render_material.uniforms;null===(e=this._shaders_by_name)||void 0===e||e.forEach((e,n)=>{const r=`texture_${n}`,s={value:null};t[r]=s,this._render_material&&i.CoreMaterial.init_custom_material_uniforms(this._render_material,r,s)})}this.assign_render_material()}))}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(2),o=n(14),i=n(227),a=n(4),_=n(104),c=n(281),l=n(986),u=n(66);t.ParticlesSystemGpuComputeController=class{constructor(e){this.node=e,this._simulation_restart_required=!1,this._points=[],this.variables_by_name=new Map,this._created_textures_by_name=new Map,this._used_textures_size=new s.Vector2}set_shaders_by_name(e){this._shaders_by_name=e,this.reset_gpu_compute()}init(e){return r.__awaiter(this,void 0,void 0,(function*(){this.init_particle_group_points(e),yield this.create_gpu_compute()}))}getCurrentRenderTarget(e){var t;const n=this.variables_by_name.get(e);if(n)return null===(t=this._gpu_compute)||void 0===t?void 0:t.getCurrentRenderTarget(n)}init_particle_group_points(e){this.reset_gpu_compute(),e&&(this._particles_core_group=e,this._points=this._get_points()||[])}compute_similation_if_required(){const e=this.node.scene.frame,t=this.node.pv.start_frame;e>=t&&(null==this._last_simulated_frame&&(this._last_simulated_frame=t-1),e>this._last_simulated_frame&&this._compute_simulation(e-this._last_simulated_frame))}_compute_simulation(e=1){if(this._gpu_compute){this.update_simulation_material_uniforms();for(let t=0;t<e;t++)this._gpu_compute.compute();this.node.render_controller.update_render_material_uniforms(),this._last_simulated_frame=this.node.scene.frame}}create_gpu_compute(){var e,t;return r.__awaiter(this,void 0,void 0,(function*(){if(this.node.pv.auto_textures_size){const e=_.CoreMath.nearestPower2(Math.sqrt(this._points.length));this._used_textures_size.x=Math.min(e,this.node.pv.max_textures_size.x),this._used_textures_size.y=Math.min(e,this.node.pv.max_textures_size.y)}else{if(!o.MathUtils.isPowerOfTwo(this.node.pv.textures_size.x)||!o.MathUtils.isPowerOfTwo(this.node.pv.textures_size.y))return void this.node.states.error.set("texture size must be a power of 2");const e=this.node.pv.textures_size.x*this.node.pv.textures_size.y;if(this._points.length>e)return void this.node.states.error.set(`max particles is set to (${this.node.pv.textures_size.x}x${this.node.pv.textures_size.y}=) ${e}`);this._used_textures_size.copy(this.node.pv.textures_size)}this.node.states.time_dependent.force_time_dependent(),this._init_particles_uvs(),this.node.render_controller.reset_render_material();const n=yield u.Poly.instance().renderers_controller.wait_for_renderer();n?this._renderer=n:this.node.states.error.set("no renderer found");const r=new l.GPUComputationRenderer(this._used_textures_size.x,this._used_textures_size.y,this._renderer);if(this._gpu_compute=r,!this._gpu_compute)return void this.node.states.error.set("failed to create the GPUComputationRenderer");this._last_simulated_frame=void 0,this.variables_by_name.forEach((e,t)=>{e.renderTargets[0].dispose(),e.renderTargets[1].dispose(),this.variables_by_name.delete(t)});const s=[];null===(e=this._shaders_by_name)||void 0===e||e.forEach((e,t)=>{if(this._gpu_compute){const n=this._gpu_compute.addVariable(`texture_${t}`,e,this._created_textures_by_name.get(t));this.variables_by_name.set(t,n),s.push(n)}}),null===(t=this.variables_by_name)||void 0===t||t.forEach((e,t)=>{this._gpu_compute&&this._gpu_compute.setVariableDependencies(e,s)}),this._create_texture_render_targets(),this._fill_textures(),this.create_simulation_material_uniforms();var i=this._gpu_compute.init();null!==i&&(console.error(i),this.node.states.error.set(i))}))}create_simulation_material_uniforms(){this.variables_by_name.forEach((e,t)=>{const n=e.material.uniforms;n.frame={value:this.node.scene.frame};for(let e of this.node.assembler_controller.assembler.param_configs())n[e.uniform_name]=e.uniform})}update_simulation_material_uniforms(){this.variables_by_name.forEach((e,t)=>{e.material.uniforms.frame.value=this.node.scene.frame})}_init_particles_uvs(){var e=new Float32Array(2*this._points.length);let t=0;for(var n=0,r=0;r<this._used_textures_size.x;r++)for(var s=0;s<this._used_textures_size.y&&(e[t++]=s/(this._used_textures_size.x-1),e[t++]=r/(this._used_textures_size.y-1),!((n+=2)>=e.length));s++);const o=c.GlobalsTextureHandler.UV_ATTRIB;if(this._particles_core_group)for(let t of this._particles_core_group.core_geometries()){const n=t.geometry(),r=t.marked_as_instance()?i.InstancedBufferAttribute:a.BufferAttribute;n.setAttribute(o,new r(e,2))}}created_textures_by_name(){return this._created_textures_by_name}_fill_textures(){this._created_textures_by_name.forEach((e,t)=>{const n=this.node.assembler_controller.assembler.texture_allocations_controller.allocation_for_shader_name(t);if(!n)return;const r=n.variables;if(!r)return;const s=e.image.data;for(let e of r){const t=e.position;let n=e.name;const r=this._points[0];if(r){if(r.has_attrib(n)){const e=r.attrib_size(n);let o=t;for(let t of this._points){if(1==e){const e=t.attrib_value(n);s[o]=e}else t.attrib_value(n).toArray(s,o);o+=4}}}}})}reset_gpu_compute(){this._gpu_compute=void 0,this._simulation_restart_required=!0}set_restart_not_required(){this._simulation_restart_required=!1}reset_gpu_compute_and_set_dirty(){this.reset_gpu_compute(),this.node.set_dirty()}reset_particle_groups(){this._particles_core_group=void 0}get initialized(){return null!=this._particles_core_group&&null!=this._gpu_compute}_create_texture_render_targets(){this._created_textures_by_name.forEach((e,t)=>{e.dispose()}),this._created_textures_by_name.clear(),this.variables_by_name.forEach((e,t)=>{this._gpu_compute&&this._created_textures_by_name.set(t,this._gpu_compute.createTexture())})}restart_simulation_if_required(){this._simulation_restart_required&&this._restart_simulation()}_restart_simulation(){this._last_simulated_frame=void 0,this._create_texture_render_targets(),this._get_points()&&(this._fill_textures(),this.variables_by_name.forEach((e,t)=>{const n=this._created_textures_by_name.get(t);this._gpu_compute&&n&&(this._gpu_compute.renderTexture(n,e.renderTargets[0]),this._gpu_compute.renderTexture(n,e.renderTargets[1]))}))}_get_points(){if(!this._particles_core_group)return;let e=this._particles_core_group.core_geometries();const t=e[0];if(t){const n=t.marked_as_instance(),r=[];for(let t of e)t.marked_as_instance()==n&&r.push(t);const s=[];for(let e of r)for(let t of e.points())s.push(t);return s}return[]}}},function(e,t,n){"use strict";n.r(t),n.d(t,"GPUComputationRenderer",(function(){return u}));var r=n(77),s=n(0),o=n(70),i=n(22),a=n(54),_=n(55),c=n(26),l=n(75),u=function(e,t,n){this.variables=[],this.currentTextureIndex=0;var u=new _.Scene,d=new r.Camera;d.position.z=1;var h={passThruTexture:{value:null}},p=g("uniform sampler2D passThruTexture;\n\nvoid main() {\n\n\tvec2 uv = gl_FragCoord.xy / resolution.xy;\n\n\tgl_FragColor = texture2D( passThruTexture, uv );\n\n}\n",h),m=new i.Mesh(new a.PlaneBufferGeometry(2,2),p);function f(n){n.defines.resolution="vec2( "+e.toFixed(1)+", "+t.toFixed(1)+" )"}function g(e,t){t=t||{};var n=new c.ShaderMaterial({uniforms:t,vertexShader:"void main()\t{\n\n\tgl_Position = vec4( position, 1.0 );\n\n}\n",fragmentShader:e});return f(n),n}u.add(m),this.addVariable=function(e,t,n){var r={name:e,initialValueTexture:n,material:this.createShaderMaterial(t),dependencies:null,renderTargets:[],wrapS:null,wrapT:null,minFilter:s.NearestFilter,magFilter:s.NearestFilter};return this.variables.push(r),r},this.setVariableDependencies=function(e,t){e.dependencies=t},this.init=function(){if(!n.capabilities.isWebGL2&&!n.extensions.get("OES_texture_float"))return"No OES_texture_float support for float textures.";if(0===n.capabilities.maxVertexTextures)return"No support for vertex shader textures.";for(var r=0;r<this.variables.length;r++){var s=this.variables[r];s.renderTargets[0]=this.createRenderTarget(e,t,s.wrapS,s.wrapT,s.minFilter,s.magFilter),s.renderTargets[1]=this.createRenderTarget(e,t,s.wrapS,s.wrapT,s.minFilter,s.magFilter),this.renderTexture(s.initialValueTexture,s.renderTargets[0]),this.renderTexture(s.initialValueTexture,s.renderTargets[1]);var o=s.material.uniforms;if(null!==s.dependencies)for(var i=0;i<s.dependencies.length;i++){var a=s.dependencies[i];if(a.name!==s.name){for(var _=!1,c=0;c<this.variables.length;c++)if(a.name===this.variables[c].name){_=!0;break}if(!_)return"Variable dependency not found. Variable="+s.name+", dependency="+a.name}o[a.name]={value:null}}}return this.currentTextureIndex=0,null},this.compute=function(){for(var e=this.currentTextureIndex,t=0===this.currentTextureIndex?1:0,n=0,r=this.variables.length;n<r;n++){var s=this.variables[n];if(null!==s.dependencies)for(var o=s.material.uniforms,i=0,a=s.dependencies.length;i<a;i++){var _=s.dependencies[i];o[_.name].value=_.renderTargets[e].texture}this.doRenderTarget(s.material,s.renderTargets[t])}this.currentTextureIndex=t},this.getCurrentRenderTarget=function(e){return e.renderTargets[this.currentTextureIndex]},this.getAlternateRenderTarget=function(e){return e.renderTargets[0===this.currentTextureIndex?1:0]},this.addResolutionDefine=f,this.createShaderMaterial=g,this.createRenderTarget=function(n,r,o,i,a,_){return n=n||e,r=r||t,o=o||s.ClampToEdgeWrapping,i=i||s.ClampToEdgeWrapping,a=a||s.NearestFilter,_=_||s.NearestFilter,new l.WebGLRenderTarget(n,r,{wrapS:o,wrapT:i,minFilter:a,magFilter:_,format:s.RGBAFormat,type:/(iPad|iPhone|iPod)/g.test(navigator.userAgent)?s.HalfFloatType:s.FloatType,stencilBuffer:!1,depthBuffer:!1})},this.createTexture=function(){var n=new Float32Array(e*t*4);return new o.DataTexture(n,e,t,s.RGBAFormat,s.FloatType)},this.renderTexture=function(e,t){h.passThruTexture.value=e,this.doRenderTarget(p,t),h.passThruTexture.value=null},this.doRenderTarget=function(e,t){var r=n.getRenderTarget();m.material=e,n.setRenderTarget(t),n.render(u,d),m.material=p,n.setRenderTarget(r)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(53),s=n(13),o=n(17),i=n(5);class a extends i.NodeParamsConfig{constructor(){super(...arguments),this.amount=i.ParamConfig.FLOAT(1,{range:[-1,1]})}}const _=new a;class c extends s.TypedSopNode{constructor(){super(...arguments),this.params_config=_}static type(){return"peak"}initialize_node(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([o.InputCloneMode.FROM_NODE])}cook(e){const t=e[0];let n,s;for(let e of t.objects())e.traverse(e=>{let t;if(null!=(t=e.geometry)){for(s of(n=new r.CoreGeometry(t),n.points())){const e=s.normal(),t=s.position().clone().add(e.multiplyScalar(this.pv.amount));s.set_position(t)}if(!this.io.inputs.input_cloned(0)){n.geometry().getAttribute("position").needsUpdate=!0}}});this.set_core_group(t)}}t.PeakSopNode=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(1),s=n(2),o=n(54),i=n(13),a=n(84),_=n(17),c=new r.Vector3(0,0,1),l=new r.Vector3(0,0,1),u=new r.Vector3(0,1,0),d=n(5);class h extends d.NodeParamsConfig{constructor(){super(...arguments),this.size=d.ParamConfig.VECTOR2([1,1]),this.use_segments_count=d.ParamConfig.BOOLEAN(0),this.step_size=d.ParamConfig.FLOAT(1,{visible_if:{use_segments_count:0}}),this.segments=d.ParamConfig.VECTOR2([1,1],{visible_if:{use_segments_count:1}}),this.direction=d.ParamConfig.VECTOR3([0,1,0]),this.center=d.ParamConfig.VECTOR3([0,0,0])}}const p=new h;class m extends i.TypedSopNode{constructor(){super(...arguments),this.params_config=p,this._core_transform=new a.CoreTransform}static type(){return"plane"}static displayed_input_names(){return["geometry to create plane from (optional)"]}initialize_node(){this.io.inputs.set_count(0,1),this.io.inputs.init_inputs_clonable_state([_.InputCloneMode.NEVER])}cook(e){const t=e[0];t?this._cook_with_input(t):this._cook_without_input()}_cook_without_input(){const e=this._create_plane(this.pv.size);this._core_transform.rotate_geometry(e,c,this.pv.direction);const t=this._core_transform.translation_matrix(this.pv.center);e.applyMatrix4(t),this.set_geometry(e)}_cook_with_input(e){const t=e.bounding_box(),n=new r.Vector3;t.getSize(n);const o=new r.Vector3;t.getCenter(o);const i=new s.Vector2(n.x,n.z),a=this._create_plane(i);this._core_transform.rotate_geometry(a,l,u);const _=this._core_transform.translation_matrix(o);a.applyMatrix4(_),this.set_geometry(a)}_create_plane(e){let t;return e=e.clone(),this.pv.use_segments_count?t={x:Math.floor(this.pv.segments.x),y:Math.floor(this.pv.segments.y)}:(t={x:Math.floor(e.x/this.pv.step_size),y:Math.floor(e.y/this.pv.step_size)},e.x=t.x*this.pv.step_size,e.y=t.y*this.pv.step_size),new o.PlaneBufferGeometry(e.x,e.y,t.x,t.y)}}t.PlaneSopNode=m},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(13),o=n(17),i=n(5);class a extends i.NodeParamsConfig{constructor(){super(...arguments),this.update_x=i.ParamConfig.BOOLEAN(0),this.x=i.ParamConfig.FLOAT("@P.x",{visible_if:{update_x:1},expression:{for_entities:!0}}),this.update_y=i.ParamConfig.BOOLEAN(0),this.y=i.ParamConfig.FLOAT("@P.y",{visible_if:{update_y:1},expression:{for_entities:!0}}),this.update_z=i.ParamConfig.BOOLEAN(0),this.z=i.ParamConfig.FLOAT("@P.z",{visible_if:{update_z:1},expression:{for_entities:!0}}),this.update_normals=i.ParamConfig.BOOLEAN(1)}}const _=new a;class c extends s.TypedSopNode{constructor(){super(...arguments),this.params_config=_,this._x_arrays_by_geometry_uuid=new Map,this._y_arrays_by_geometry_uuid=new Map,this._z_arrays_by_geometry_uuid=new Map}static type(){return"point"}static displayed_input_names(){return["points to move"]}initialize_node(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([o.InputCloneMode.FROM_NODE])}cook(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=e[0];yield this._eval_expressions_for_core_group(t)}))}_eval_expressions_for_core_group(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=e.core_objects();for(let e=0;e<t.length;e++)yield this._eval_expressions_for_core_object(t[e]);this.pv.update_normals&&e.compute_vertex_normals();const n=e.geometries();for(let e of n)e.computeBoundingBox();if(!this.io.inputs.input_cloned(0)){const t=e.geometries();for(let e of t){e.getAttribute("position").needsUpdate=!0}}this.set_core_group(e)}))}_eval_expressions_for_core_object(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=e.object().geometry,n=e.points(),r=t.getAttribute("position").array,s=yield this._update_from_param(t,r,n,this.p.update_x,this.p.x,this.pv.x,this._x_arrays_by_geometry_uuid,0),o=yield this._update_from_param(t,r,n,this.p.update_y,this.p.y,this.pv.y,this._y_arrays_by_geometry_uuid,1),i=yield this._update_from_param(t,r,n,this.p.update_z,this.p.z,this.pv.z,this._z_arrays_by_geometry_uuid,2);s&&this._commit_tmp_values(s,r,0),o&&this._commit_tmp_values(o,r,1),i&&this._commit_tmp_values(i,r,2)}))}_update_from_param(e,t,n,s,o,i,a,_){return r.__awaiter(this,void 0,void 0,(function*(){const t=s,r=o;let c=this._init_array_if_required(e,a,n.length,_);if(t.value)if(r.has_expression()&&r.expression_controller)yield r.expression_controller.compute_expression_for_points(n,(e,t)=>{c[e.index]=t});else{let e;for(let t=0;t<n.length;t++)e=n[t],c[e.index]=i}return c}))}_init_array_if_required(e,t,n,r){const s=e.uuid,o=t.get(s);if(o){if(o.length<n){const o=this._array_for_component(e,n,r);return t.set(s,o),o}return o}{const o=this._array_for_component(e,n,r);return t.set(s,o),o}}_array_for_component(e,t,n){const r=new Array(t),s=e.getAttribute("position").array;for(let e=0;e<r.length;e++)r[e]=s[3*e+n];return r}_commit_tmp_values(e,t,n){for(let r=0;r<e.length;r++)t[3*r+n]=e[r]}}t.PointSopNode=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(13),s=n(53),o=n(84),i=n(384),a=n(282),_=n(408),c=n(1),l=n(57),u=n(6),d=n(17),h=new c.Vector3(0,0,0),p=new c.Vector3(1,1,1),m=n(5);class f extends m.NodeParamsConfig{constructor(){super(...arguments),this.radius=m.ParamConfig.FLOAT(1),this.segments_radial=m.ParamConfig.INTEGER(8,{range:[3,20],range_locked:[!0,!1]}),this.closed=m.ParamConfig.BOOLEAN(0)}}const g=new f;class v extends r.TypedSopNode{constructor(){super(...arguments),this.params_config=g,this._core_transform=new o.CoreTransform,this._geometries=[]}static type(){return"polywire"}static displayed_input_names(){return["lines to create tubes from"]}initialize_node(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([d.InputCloneMode.NEVER])}cook(e){const t=e[0];this._geometries=[];for(let e of t.objects())e instanceof l.LineSegments&&this._create_tube(e);const n=s.CoreGeometry.merge_geometries(this._geometries);for(let e of this._geometries)e.dispose();if(n){const e=this.create_object(n);this.set_object(e)}else this.set_objects([])}_create_tube(e){var t;const n=e.geometry,r=new s.CoreGeometry(n).points(),o=null===(t=n.getIndex())||void 0===t?void 0:t.array,i=a.CoreGeometryUtilCurve.accumulated_curve_point_indices(o);for(let e of i){const t=e.map(e=>r[e]);this._create_tube_from_points(t)}}_create_tube_from_points(e){if(e.length<=1)return;const t=e.map(e=>e.attrib_value("position")),n=i.CoreGeometryUtilCircle.create(this.pv.radius,this.pv.segments_radial),r=[];for(let e of t){const t=e,s=this._core_transform.matrix(t,h,p,1),o=n.clone();o.applyMatrix4(s),r.push(o)}for(let e=0;e<r.length;e++)if(e>0){const t=r[e],n=r[e-1],s=this._skin(n,t);this._geometries.push(s)}}_skin(e,t){const n=new u.BufferGeometry;return new _.CoreGeometryOperationSkin(n,e,t).process(),n}}t.PolywireSopNode=v},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(271),s=n(56),o=n(0),i=n(13),a=n(17),_=new s.MeshBasicMaterial({side:o.DoubleSide}),c=n(5);class l extends c.NodeParamsConfig{constructor(){super(...arguments),this.use_normals=c.ParamConfig.BOOLEAN(1),this.direction=c.ParamConfig.VECTOR3([0,-1,0],{visible_if:{use_normals:0}}),this.transfer_face_normals=c.ParamConfig.BOOLEAN(1)}}const u=new l;class d extends i.TypedSopNode{constructor(){super(...arguments),this.params_config=u,this._bound_assign_mat=this._assign_double_sided_material_to_object.bind(this),this._raycaster=new r.Raycaster}static type(){return"ray"}static double_sided_material(){return _}static displayed_input_names(){return["geometry to move","geometry to ray onto"]}initialize_node(){this.io.inputs.set_count(2),this.io.inputs.init_inputs_clonable_state([a.InputCloneMode.FROM_NODE,a.InputCloneMode.ALWAYS])}create_params(){}cook(e){const t=e[0],n=e[1];this.ray(t,n)}ray(e,t){let n,r;this._assign_double_sided_material_to_core_group(t);for(let s of e.points())n=this.pv.use_normals?s.normal():this.pv.direction,this._raycaster.set(s.position(),n),r=this._raycaster.intersectObjects(t.objects(),!0)[0],r&&(s.set_position(r.point),this.pv.transfer_face_normals&&r.face&&s.set_normal(r.face.normal));this.set_core_group(e)}_assign_double_sided_material_to_core_group(e){for(let t of e.objects())t.traverse(this._bound_assign_mat)}_assign_double_sided_material_to_object(e){e.material=d.double_sided_material()}}t.RaySopNode=d},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(57),o=n(4),i=n(6),a=n(278),_=n(276),c=r.__importDefault(n(82)),l=r.__importDefault(n(327)),u=n(13),d=n(35),h=n(282),p=n(53);var m,f;!function(e){e.POINTS_COUNT="points_count",e.SEGMENT_LENGTH="segment_length"}(m=t.METHOD||(t.METHOD={})),t.METHODS=[m.POINTS_COUNT,m.SEGMENT_LENGTH],function(e){e.CENTRIPETAL="centripetal",e.CHORDAL="chordal",e.CATMULLROM="catmullrom"}(f=t.CURVE_TYPE||(t.CURVE_TYPE={})),t.CURVE_TYPES=[f.CENTRIPETAL,f.CHORDAL,f.CATMULLROM];const g=n(5),v=n(192);class y extends g.NodeParamsConfig{constructor(){super(...arguments),this.method=g.ParamConfig.INTEGER(t.METHODS.indexOf(m.POINTS_COUNT),{menu:{entries:t.METHODS.map((e,t)=>({name:e,value:t}))}}),this.curve_type=g.ParamConfig.INTEGER(t.CURVE_TYPES.indexOf(f.CATMULLROM),{range:[0,2],range_locked:[!0,!0],menu:{entries:t.CURVE_TYPES.map((e,t)=>({name:e,value:t}))}}),this.tension=g.ParamConfig.FLOAT(.01,{range:[0,1],range_locked:[!0,!0]}),this.points_count=g.ParamConfig.INTEGER(100,{visible_if:{method:t.METHODS.indexOf(m.POINTS_COUNT)}}),this.segment_length=g.ParamConfig.FLOAT(1,{visible_if:{method:t.METHODS.indexOf(m.SEGMENT_LENGTH)}})}}const b=new y;class x extends u.TypedSopNode{constructor(){super(...arguments),this.params_config=b}static type(){return"resample"}initialize_node(){this.io.inputs.set_count(1)}cook(e){const t=e[0],n=[];if(this.pv.points_count>=2){const e=t.core_objects();for(let t=0;t<e.length;t++){const r=e[t].object();if(r instanceof s.LineSegments){const e=this._resample(r);n.push(e)}}}this.set_objects(n)}_resample(e){var t;const n=e.geometry,r=new p.CoreGeometry(n).points(),s=null===(t=n.getIndex())||void 0===t?void 0:t.array,o=h.CoreGeometryUtilCurve.accumulated_curve_point_indices(s),i=[];for(let e=0;e<o.length;e++){const t=o[e].map(e=>r[e]),n=this._create_curve_from_points(t);n&&i.push(n)}const a=_.BufferGeometryUtils.mergeBufferGeometries(i);return this.create_object(a,d.CoreConstant.OBJECT_TYPE.LINE_SEGMENTS)}_create_curve_from_points(e){if(e.length<=1)return;const n=l.default(e,e=>e.attrib_value("position")),r=t.CURVE_TYPES[this.pv.curve_type],s=this.pv.tension,_=new a.CatmullRomCurve3(n,!1,r,s),u=this._get_points_from_curve(_);let d=[];const h=[];for(let e=0;e<u.length;e++){const t=u[e].toArray();d.push(t),e>0&&(h.push(e-1),h.push(e))}d=c.default(d);const p=new i.BufferGeometry;return p.setAttribute("position",new o.Float32BufferAttribute(d,3)),p.setIndex(h),p}_get_points_from_curve(e){const n=t.METHODS[this.pv.method];switch(n){case m.POINTS_COUNT:return e.getSpacedPoints(Math.max(2,this.pv.points_count));case m.SEGMENT_LENGTH:var r=e.getLength(),s=0!==this.pv.segment_length?1+r/this.pv.segment_length:2;return s=Math.max(2,s),e.getSpacedPoints(s)}v.TypeAssert.unreachable(n)}}t.ResampleSopNode=x},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(6),o={BufferAttribute:n(4).BufferAttribute,BufferGeometry:s.BufferGeometry},i=r.__importDefault(n(81)),a=r.__importDefault(n(44)),_=r.__importDefault(n(102)),c=n(13),l=n(35),u=n(104),d=n(383),h=n(5),p=n(17);class m extends h.NodeParamsConfig{constructor(){super(...arguments),this.points_count=h.ParamConfig.INTEGER(100,{range:[0,100],range_locked:[!0,!1]}),this.seed=h.ParamConfig.INTEGER(0,{range:[0,100],range_locked:[!1,!1]}),this.transfer_attributes=h.ParamConfig.BOOLEAN(0),this.attributes_to_transfer=h.ParamConfig.STRING("normal",{visible_if:{transfer_attributes:1}}),this.add_id_attribute=h.ParamConfig.BOOLEAN(1)}}const f=new m;class g extends c.TypedSopNode{constructor(){super(...arguments),this.params_config=f}static type(){return"scatter"}static displayed_input_names(){return["geometry to scatter points onto"]}initialize_node(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([p.InputCloneMode.NEVER])}cook(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=e[0];let n=t.faces();const r=[];let s=0;const c=new Map;for(let e of n){const t=e.area;c.set(e.index,t)}const h=_.default(n,e=>c.get(e.index));let p=0;for(let e of h)s+=c.get(e.index),r[p]=s,p++;const m=[];let f=[];this.pv.transfer_attributes&&(f=t.attrib_names_matching_mask(this.pv.attributes_to_transfer));const g=new Map,v=new Map;for(let e of f)g.set(e,[]),v.set(e,t.attrib_size(e));const y=new d.CoreIterator;yield y.start_with_count(this.pv.points_count,e=>{const t=u.CoreMath.rand_float(this.pv.seed+e)*s;for(let e=0;e<r.length;e++){if(t<=r[e]){const n=h[e],r=n.random_position(t);r.toArray(m,m.length);for(let e of f){const t=n.attrib_value_at_position(e,r);a.default(t)?g.get(e).push(t):t.toArray(g.get(e),g.get(e).length)}break}}});const b=new o.BufferGeometry;b.setAttribute("position",new o.BufferAttribute(new Float32Array(m),3));for(let e of f)b.setAttribute(e,new o.BufferAttribute(new Float32Array(g.get(e)),v.get(e)));if(this.pv.add_id_attribute){const e=i.default(this.pv.points_count);b.setAttribute("id",new o.BufferAttribute(new Float32Array(e),1))}this.set_geometry(b,l.CoreConstant.OBJECT_TYPE.POINTS)}))}}t.ScatterSopNode=g},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(13),o=n(17),i=n(5);class a extends i.NodeParamsConfig{constructor(){super(...arguments),this.cast_shadow=i.ParamConfig.BOOLEAN(1),this.receive_shadow=i.ParamConfig.BOOLEAN(1),this.apply_to_children=i.ParamConfig.BOOLEAN(0)}}const _=new a;class c extends s.TypedSopNode{constructor(){super(...arguments),this.params_config=_}static type(){return"shadows"}static displayed_input_names(){return["objects to change shadows properties of"]}initialize_node(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([o.InputCloneMode.FROM_NODE])}cook(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=e[0];for(let e of t.objects())this.pv.apply_to_children?e.traverse(e=>{e.castShadow=this.pv.cast_shadow,e.receiveShadow=this.pv.receive_shadow}):(e.castShadow=this.pv.cast_shadow,e.receiveShadow=this.pv.receive_shadow);console.log(t.objects()),this.set_core_group(t)}))}}t.ShadowsSopNode=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(6),o=r.__importDefault(n(102)),i=r.__importDefault(n(996)),a=r.__importDefault(n(92)),_=n(13),c=n(282),l=n(408),u=n(5);class d extends u.NodeParamsConfig{}const h=new d;class p extends _.TypedSopNode{constructor(){super(...arguments),this.params_config=h}static type(){return"skin"}static displayed_input_names(){return["lines to create polygons from","if used, lines from both inputs will be used"]}initialize_node(){this.io.inputs.set_count(1,2)}cook(e){switch(a.default(this.io.inputs.inputs()).length){case 1:return this.process_one_input(e);case 2:return this.process_two_inputs(e);default:return this.states.error.set("inputs count not valid")}}process_one_input(e){const t=e[0],n=this._get_line_segments(t),r=[];if(n){const e=n[0];if(e){const t=c.CoreGeometryUtilCurve.line_segment_to_geometries(e.geometry);t.forEach((e,n)=>{if(n>0){const s=t[n-1],o=this._skin(s,e);r.push(o)}})}}this.set_geometries(r)}process_two_inputs(e){const t=e[0],n=e[1],r=this._get_line_segments(t),s=this._get_line_segments(n),a=i.default(o.default([r,s],e=>e.length)),_=a[0],c=a[1],l=[];_.forEach((e,t)=>{const n=c[t];if(null!=e&&null!=n){const t=e.geometry,r=n.geometry,s=this._skin(t,r);l.push(s)}}),this.set_geometries(l)}_get_line_segments(e){return e.objects().filter(e=>e.isLineSegments)}_skin(e,t){const n=new s.BufferGeometry;return new l.CoreGeometryOperationSkin(n,e,t).process(),n}}t.SkinSopNode=p},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(161),s=n(210),o=n(13);var i;!function(e){e.DEFAULT="default",e.ISOCAHEDRON="isocahedron"}(i||(i={}));const a={default:0,isocahedron:1},_=[i.DEFAULT,i.ISOCAHEDRON],c=n(5),l=n(17);class u extends c.NodeParamsConfig{constructor(){super(...arguments),this.type=c.ParamConfig.INTEGER(a.default,{menu:{entries:_.map(e=>({name:e,value:a[e]}))}}),this.radius=c.ParamConfig.FLOAT(1,{visible_if:{type:a.default}}),this.resolution=c.ParamConfig.VECTOR2([8,6],{visible_if:{type:a.default}}),this.open=c.ParamConfig.BOOLEAN(0,{visible_if:{type:a.default}}),this.angle_range_x=c.ParamConfig.VECTOR2([0,"$PI*2"],{visible_if:{type:a.default,open:!0}}),this.angle_range_y=c.ParamConfig.VECTOR2([0,"$PI*2"],{visible_if:{type:a.default,open:!0}}),this.detail=c.ParamConfig.INTEGER(1,{range:[0,5],range_locked:[!0,!1],visible_if:{type:a.isocahedron}}),this.center=c.ParamConfig.VECTOR3([0,0,0])}}const d=new u;class h extends o.TypedSopNode{constructor(){super(...arguments),this.params_config=d}static type(){return"sphere"}initialize_node(){this.io.inputs.set_count(0,1),this.io.inputs.init_inputs_clonable_state([l.InputCloneMode.NEVER])}cook(e){const t=e[0];t?this._cook_with_input(t):this._cook_without_input()}_cook_without_input(){const e=this._create_required_geometry();e.translate(this.pv.center.x,this.pv.center.y,this.pv.center.z),this.set_geometry(e)}_cook_with_input(e){const t=e.bounding_box(),n=t.max.clone().sub(t.min),r=t.max.clone().add(t.min).multiplyScalar(.5),s=this._create_required_geometry();s.translate(this.pv.center.x,this.pv.center.y,this.pv.center.z),s.translate(r.x,r.y,r.z),s.scale(n.x,n.y,n.z),this.set_geometry(s)}_create_required_geometry(){return this.pv.type==a.default?this._create_default_sphere():this._create_default_isocahedron()}_create_default_sphere(){return this.pv.open?new r.SphereBufferGeometry(this.pv.radius,this.pv.resolution.x,this.pv.resolution.y,this.pv.angle_range_x.x,this.pv.angle_range_x.y,this.pv.angle_range_y.x,this.pv.angle_range_y.y):new r.SphereBufferGeometry(this.pv.radius,this.pv.resolution.x,this.pv.resolution.y)}_create_default_isocahedron(){return new s.IcosahedronBufferGeometry(this.pv.radius,this.pv.detail)}}t.SphereSopNode=h},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=n(13),o="geometry to switch to",i=n(5),a=n(17);class _ extends i.NodeParamsConfig{constructor(){super(...arguments),this.input=i.ParamConfig.INTEGER(0,{range:[0,3],range_locked:[!0,!0]})}}const c=new _;class l extends s.TypedSopNode{constructor(){super(...arguments),this.params_config=c}static type(){return"switch"}static displayed_input_names(){return[o,o,o,o]}initialize_node(){this.io.inputs.set_count(0,4),this.io.inputs.init_inputs_clonable_state([a.InputCloneMode.NEVER,a.InputCloneMode.NEVER,a.InputCloneMode.NEVER,a.InputCloneMode.NEVER]),this.ui_data.set_width(100),this.cook_controller.disallow_inputs_evaluation()}cook(){return r.__awaiter(this,void 0,void 0,(function*(){const e=this.pv.input;if(this.io.inputs.has_input(e)){const t=yield this.container_controller.request_input_container(e);this.set_core_group(t.core_content())}else this.states.error.set(`no input ${e}`)}))}}t.SwitchSopNode=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(3),s=r.__importDefault(n(81)),o=n(13),i=n(35),a=n(213),_=n(6),c=n(214),l=n(1013),u=n(4),d=n(276);var h=n(1009);var p;!function(e){e.MESH="mesh",e.FLAT="flat",e.LINE="line",e.STROKE="stroke"}(p=t.TEXT_TYPE||(t.TEXT_TYPE={})),t.TEXT_TYPES=[p.MESH,p.FLAT,p.LINE,p.STROKE];const m=n(5);class f extends m.NodeParamsConfig{constructor(){super(...arguments),this.font=m.ParamConfig.STRING(""),this.text=m.ParamConfig.STRING("polygonjs",{multiline:!0}),this.type=m.ParamConfig.INTEGER(0,{menu:{entries:t.TEXT_TYPES.map((e,t)=>({name:e,value:t}))}}),this.size=m.ParamConfig.FLOAT(1,{range:[0,1],range_locked:[!0,!1]}),this.extrude=m.ParamConfig.FLOAT(.1,{visible_if:{type:t.TEXT_TYPES.indexOf(p.MESH)}}),this.segments=m.ParamConfig.INTEGER(1,{range:[1,20],range_locked:[!0,!1],visible_if:{type:t.TEXT_TYPES.indexOf(p.MESH)}}),this.stroke_width=m.ParamConfig.FLOAT(.02,{visible_if:{type:t.TEXT_TYPES.indexOf(p.STROKE)}})}}const g=new f;class v extends o.TypedSopNode{constructor(){super(...arguments),this.params_config=g,this._font_loader=new l.FontLoader,this._loaded_fonts={}}static type(){return"text"}initialize_node(){}cook(){return r.__awaiter(this,void 0,void 0,(function*(){try{this._loaded_fonts[this.pv.font]=this._loaded_fonts[this.pv.font]||(yield this._load_url(this.pv.font))}catch(e){return void this.states.error.set(`count not load font (${this.pv.font})`)}const e=this._loaded_fonts[this.pv.font];if(e)switch(t.TEXT_TYPES[this.pv.type]){case p.MESH:return this._create_geometry_from_type_mesh(e);case p.FLAT:return this._create_geometry_from_type_flat(e);case p.LINE:return this._create_geometry_from_type_line(e);case p.STROKE:return this._create_geometry_from_type_stroke(e);default:console.warn("type is not valid")}}))}_create_geometry_from_type_mesh(e){const t=this.displayed_text(),n={font:e,size:this.pv.size,height:this.pv.extrude,curveSegments:this.pv.segments};try{const e=new a.TextBufferGeometry(t,n);if(!e.index){const t=e.getAttribute("position").array;e.setIndex(s.default(t.length/3))}this.set_geometry(e)}catch(e){this.states.error.set("failed to generate geometry. Try to remove some characters")}}_create_geometry_from_type_flat(e){const t=this._get_shapes(e);if(t){var n=new c.ShapeBufferGeometry(t);this.set_geometry(n)}}_create_geometry_from_type_line(e){const t=this.shapes_from_font(e);if(t){const e=[],n=[];let r=0;for(let s=0;s<t.length;s++){const o=t[s].getPoints();for(let t=0;t<o.length;t++){const s=o[t];e.push(s.x),e.push(s.y),e.push(0),n.push(r),t>0&&t<o.length-1&&n.push(r),r+=1}}const s=new _.BufferGeometry;s.setAttribute("position",new u.Float32BufferAttribute(e,3)),s.setIndex(n),this.set_geometry(s,i.CoreConstant.OBJECT_TYPE.LINE_SEGMENTS)}}_create_geometry_from_type_stroke(e){return r.__awaiter(this,void 0,void 0,(function*(){const t=this.shapes_from_font(e);if(t){this._svg_loader=this._svg_loader||(yield this._load_svg_loader());var n=this._svg_loader.getStrokeStyle(this.pv.stroke_width,"white","miter","butt",4);const e=[];for(let r=0;r<t.length;r++){const s=t[r].getPoints(),o=12,i=.001,a=this._svg_loader.pointsToStroke(s,n,o,i);e.push(a)}const r=d.BufferGeometryUtils.mergeBufferGeometries(e);this.set_geometry(r)}}))}shapes_from_font(e){const t=this._get_shapes(e);if(t){const e=[];for(let n=0;n<t.length;n++){const r=t[n];if(r.holes&&r.holes.length>0)for(let t=0;t<r.holes.length;t++){const n=r.holes[t];e.push(n)}}return t.push.apply(t,e),t}}_get_shapes(e){const t=this.displayed_text();try{return e.generateShapes(t,this.pv.size)}catch(e){this.states.error.set("failed to generate geometry. Try to remove some characters")}}displayed_text(){return this.pv.text||""}_load_url(e){""===e&&(e="/fonts/droid_sans_regular.typeface.json");const t=e.split("?")[0].split("."),n=t[t.length-1];switch(e=`${e}?${Date.now()}`,n){case"ttf":return this._load_ttf(e);case"json":return this._load_json(e);default:return null}}_load_ttf(e){return new Promise((t,n)=>r.__awaiter(this,void 0,void 0,(function*(){this._ttf_loader=this._ttf_loader||(yield this._load_ttf_loader()),window.opentype=h,this._ttf_loader.load(e,e=>{const n=this._font_loader.parse(e);t(n)},void 0,()=>{n()})})))}_load_json(e){return new Promise((t,n)=>{this._font_loader.load(e,e=>{t(e)},void 0,()=>{n()})})}_load_ttf_loader(){return r.__awaiter(this,void 0,void 0,(function*(){const{TTFLoader:e}=yield Promise.resolve().then(()=>r.__importStar(n(1001)));return new e}))}_load_svg_loader(){return r.__awaiter(this,void 0,void 0,(function*(){const{SVGLoader:e}=yield Promise.resolve().then(()=>r.__importStar(n(1002)));return e}))}}t.TextSopNode=v},,function(e,t,n){"use strict";n.r(t),n.d(t,"TTFLoader",(function(){return o}));var r=n(30),s=n(18),o=function(e){s.a.call(this,e),this.reversed=!1};o.prototype=Object.assign(Object.create(s.a.prototype),{constructor:o,load:function(e,t,n,s){var o=this,i=new r.a(this.manager);i.setPath(this.path),i.setResponseType("arraybuffer"),i.load(e,(function(e){t(o.parse(e))}),n,s)},parse:function(e){function t(e){var t,n=[];e.forEach((function(e){"m"===e.type.toLowerCase()?(t=[e],n.push(t)):"z"!==e.type.toLowerCase()&&t.push(e)}));var r=[];return n.forEach((function(e){var t={type:"m",x:e[e.length-1].x,y:e[e.length-1].y};r.push(t);for(var n=e.length-1;n>0;n--){var s=e[n];t={type:s.type};void 0!==s.x2&&void 0!==s.y2?(t.x1=s.x2,t.y1=s.y2,t.x2=s.x1,t.y2=s.y1):void 0!==s.x1&&void 0!==s.y1&&(t.x1=s.x1,t.y1=s.y1),t.x=e[n-1].x,t.y=e[n-1].y,r.push(t)}})),r}return"undefined"==typeof opentype?(console.warn("THREE.TTFLoader: The loader requires opentype.js. Make sure it's included before using the loader."),null):function(e,n){for(var r=Math.round,s={},o=1e5/(72*(e.unitsPerEm||2048)),i=e.encoding.cmap.glyphIndexMap,a=Object.keys(i),_=0;_<a.length;_++){var c=a[_],l=e.glyphs.glyphs[i[c]];if(void 0!==c){var u={ha:r(l.advanceWidth*o),x_min:r(l.xMin*o),x_max:r(l.xMax*o),o:""};n&&(l.path.commands=t(l.path.commands)),l.path.commands.forEach((function(e){"c"===e.type.toLowerCase()&&(e.type="b"),u.o+=e.type.toLowerCase()+" ",void 0!==e.x&&void 0!==e.y&&(u.o+=r(e.x*o)+" "+r(e.y*o)+" "),void 0!==e.x1&&void 0!==e.y1&&(u.o+=r(e.x1*o)+" "+r(e.y1*o)+" "),void 0!==e.x2&&void 0!==e.y2&&(u.o+=r(e.x2*o)+" "+r(e.y2*o)+" ")})),s[String.fromCodePoint(l.unicode)]=u}}return{glyphs:s,familyName:e.getEnglishName("fullName"),ascender:r(e.ascender*o),descender:r(e.descender*o),underlinePosition:e.tables.post.underlinePosition,underlineThickness:e.tables.post.underlineThickness,boundingBox:{xMin:e.tables.head.xMin,xMax:e.tables.head.xMax,yMin:e.tables.head.yMin,yMax:e.tables.head.yMax},resolution:1e3,original_font_information:e.tables.name}}(opentype.parse(e),this.reversed)}})},function(e,t,n){"use strict";n.r(t),n.d(t,"SVGLoader",(function(){return M}));var r,s,o,i,a,_,c,l,u,d,h,p,m,f,g,v,y,b=n(6),x=n(30),T=n(4),w=n(18),C=n(25),P=n(73),E=n(87),O=n(2),A=n(1),M=function(e){w.a.call(this,e),this.defaultDPI=90,this.defaultUnit="px"};M.prototype=Object.assign(Object.create(w.a.prototype),{constructor:M,load:function(e,t,n,r){var s=this,o=new x.a(s.manager);o.setPath(s.path),o.load(e,(function(e){t(s.parse(e))}),n,r)},parse:function(e){var t=this;function n(e,t,n,s,o,i,a,_){s=s*Math.PI/180,t=Math.abs(t),n=Math.abs(n);var c=(a.x-_.x)/2,l=(a.y-_.y)/2,u=Math.cos(s)*c+Math.sin(s)*l,d=-Math.sin(s)*c+Math.cos(s)*l,h=t*t,p=n*n,m=u*u,f=d*d,g=m/h+f/p;if(g>1){var v=Math.sqrt(g);h=(t*=v)*t,p=(n*=v)*n}var y=h*f+p*m,b=(h*p-y)/y,x=Math.sqrt(Math.max(0,b));o===i&&(x=-x);var T=x*t*d/n,w=-x*n*u/t,C=Math.cos(s)*T-Math.sin(s)*w+(a.x+_.x)/2,P=Math.sin(s)*T+Math.cos(s)*w+(a.y+_.y)/2,E=r(1,0,(u-T)/t,(d-w)/n),O=r((u-T)/t,(d-w)/n,(-u-T)/t,(-d-w)/n)%(2*Math.PI);e.currentPath.absellipse(C,P,t,n,E,E+O,0===i,s)}function r(e,t,n,r){var s=e*n+t*r,o=Math.sqrt(e*e+t*t)*Math.sqrt(n*n+r*r),i=Math.acos(Math.max(-1,Math.min(1,s/o)));return e*r-t*n<0&&(i=-i),i}function s(e,t){function n(n,r,s){void 0===s&&(s=function(e){return e}),e.hasAttribute(n)&&(t[r]=s(e.getAttribute(n))),e.style&&""!==e.style[n]&&(t[r]=s(e.style[n]))}function r(e){return Math.max(0,Math.min(1,c(e)))}function s(e){return Math.max(0,c(e))}return t=Object.assign({},t),n("fill","fill"),n("fill-opacity","fillOpacity",r),n("stroke","stroke"),n("stroke-opacity","strokeOpacity",r),n("stroke-width","strokeWidth",s),n("stroke-linejoin","strokeLineJoin"),n("stroke-linecap","strokeLineCap"),n("stroke-miterlimit","strokeMiterLimit",s),t}function o(e,t){return e-(t-e)}function i(e){for(var t=e.split(/[\s,]+|(?=\s?[+\-])/),n=0;n<t.length;n++){var r=t[n];if(r.indexOf(".")!==r.lastIndexOf("."))for(var s=r.split("."),o=2;o<s.length;o++)t.splice(n+o-1,0,"0."+s[o]);t[n]=c(r)}return t}var a=["mm","cm","in","pt","pc","px"],_={mm:{mm:1,cm:.1,in:1/25.4,pt:72/25.4,pc:6/25.4,px:-1},cm:{mm:10,cm:1,in:1/2.54,pt:72/2.54,pc:6/2.54,px:-1},in:{mm:25.4,cm:2.54,in:1,pt:72,pc:6,px:-1},pt:{mm:25.4/72,cm:2.54/72,in:1/72,pt:1,pc:6/72,px:-1},pc:{mm:25.4/6,cm:2.54/6,in:1/6,pt:12,pc:1,px:-1},px:{px:1}};function c(e){var n="px";if("string"==typeof e||e instanceof String)for(var r=0,s=a.length;r<s;r++){var o=a[r];if(e.endsWith(o)){n=o,e=e.substring(0,e.length-o.length);break}}var i=void 0;return"px"===n&&"px"!==t.defaultUnit?i=_.in[t.defaultUnit]/t.defaultDPI:(i=_[n][t.defaultUnit])<0&&(i=_[n].in*t.defaultDPI),i*parseFloat(e)}function l(e){var t=e.elements;return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function u(e){var t=e.elements;return Math.sqrt(t[3]*t[3]+t[4]*t[4])}var d=[],h=[],p=new C.a,m=new C.a,f=new C.a,g=new C.a,v=new O.Vector2,y=new A.Vector3,b=new C.a,x=(new DOMParser).parseFromString(e,"image/svg+xml");return function e(t,r){if(1===t.nodeType){var a=function(e){if(!e.hasAttribute("transform"))return null;var t=function(e){for(var t=new C.a,n=p,r=e.getAttribute("transform").split(")"),s=r.length-1;s>=0;s--){var o=r[s].trim();if(""!==o){var a=o.indexOf("("),_=o.length;if(a>0&&a<_){var c=o.substr(0,a),l=i(o.substr(a+1,_-a-1));switch(n.identity(),c){case"translate":if(l.length>=1){var u=l[0],d=u;l.length>=2&&(d=l[1]),n.translate(u,d)}break;case"rotate":if(l.length>=1){var h,v=0,y=0;h=-l[0]*Math.PI/180,l.length>=3&&(v=l[1],y=l[2]),m.identity().translate(-v,-y),f.identity().rotate(h),g.multiplyMatrices(f,m),m.identity().translate(v,y),n.multiplyMatrices(m,g)}break;case"scale":if(l.length>=1){var b=l[0],x=b;l.length>=2&&(x=l[1]),n.scale(b,x)}break;case"skewX":1===l.length&&n.set(1,Math.tan(l[0]*Math.PI/180),0,0,1,0,0,0,1);break;case"skewY":1===l.length&&n.set(1,0,0,Math.tan(l[0]*Math.PI/180),1,0,0,0,1);break;case"matrix":6===l.length&&n.set(l[0],l[2],l[4],l[1],l[3],l[5],0,0,1)}}t.premultiply(n)}}return t}(e);h.length>0&&t.premultiply(h[h.length-1]);return b.copy(t),h.push(t),t}(t),_=null;switch(t.nodeName){case"svg":break;case"g":r=s(t,r);break;case"path":r=s(t,r),t.hasAttribute("d")&&(_=function(e){for(var t=new E.a,r=new O.Vector2,s=new O.Vector2,a=new O.Vector2,_=!0,c=!1,l=e.getAttribute("d").match(/[a-df-z][^a-df-z]*/gi),u=0,d=l.length;u<d;u++){var h=l[u],p=h.charAt(0),m=h.substr(1).trim();switch(!0===_&&(c=!0,_=!1),p){case"M":for(var f=i(m),g=0,v=f.length;g<v;g+=2)r.x=f[g+0],r.y=f[g+1],s.x=r.x,s.y=r.y,0===g?t.moveTo(r.x,r.y):t.lineTo(r.x,r.y),0===g&&!0===c&&a.copy(r);break;case"H":for(f=i(m),g=0,v=f.length;g<v;g++)r.x=f[g],s.x=r.x,s.y=r.y,t.lineTo(r.x,r.y),0===g&&!0===c&&a.copy(r);break;case"V":for(f=i(m),g=0,v=f.length;g<v;g++)r.y=f[g],s.x=r.x,s.y=r.y,t.lineTo(r.x,r.y),0===g&&!0===c&&a.copy(r);break;case"L":for(f=i(m),g=0,v=f.length;g<v;g+=2)r.x=f[g+0],r.y=f[g+1],s.x=r.x,s.y=r.y,t.lineTo(r.x,r.y),0===g&&!0===c&&a.copy(r);break;case"C":for(f=i(m),g=0,v=f.length;g<v;g+=6)t.bezierCurveTo(f[g+0],f[g+1],f[g+2],f[g+3],f[g+4],f[g+5]),s.x=f[g+2],s.y=f[g+3],r.x=f[g+4],r.y=f[g+5],0===g&&!0===c&&a.copy(r);break;case"S":for(f=i(m),g=0,v=f.length;g<v;g+=4)t.bezierCurveTo(o(r.x,s.x),o(r.y,s.y),f[g+0],f[g+1],f[g+2],f[g+3]),s.x=f[g+0],s.y=f[g+1],r.x=f[g+2],r.y=f[g+3],0===g&&!0===c&&a.copy(r);break;case"Q":for(f=i(m),g=0,v=f.length;g<v;g+=4)t.quadraticCurveTo(f[g+0],f[g+1],f[g+2],f[g+3]),s.x=f[g+0],s.y=f[g+1],r.x=f[g+2],r.y=f[g+3],0===g&&!0===c&&a.copy(r);break;case"T":for(f=i(m),g=0,v=f.length;g<v;g+=2){var y=o(r.x,s.x),b=o(r.y,s.y);t.quadraticCurveTo(y,b,f[g+0],f[g+1]),s.x=y,s.y=b,r.x=f[g+0],r.y=f[g+1],0===g&&!0===c&&a.copy(r)}break;case"A":for(f=i(m),g=0,v=f.length;g<v;g+=7){var x=r.clone();r.x=f[g+5],r.y=f[g+6],s.x=r.x,s.y=r.y,n(t,f[g],f[g+1],f[g+2],f[g+3],f[g+4],x,r),0===g&&!0===c&&a.copy(r)}break;case"m":for(f=i(m),g=0,v=f.length;g<v;g+=2)r.x+=f[g+0],r.y+=f[g+1],s.x=r.x,s.y=r.y,0===g?t.moveTo(r.x,r.y):t.lineTo(r.x,r.y),0===g&&!0===c&&a.copy(r);break;case"h":for(f=i(m),g=0,v=f.length;g<v;g++)r.x+=f[g],s.x=r.x,s.y=r.y,t.lineTo(r.x,r.y),0===g&&!0===c&&a.copy(r);break;case"v":for(f=i(m),g=0,v=f.length;g<v;g++)r.y+=f[g],s.x=r.x,s.y=r.y,t.lineTo(r.x,r.y),0===g&&!0===c&&a.copy(r);break;case"l":for(f=i(m),g=0,v=f.length;g<v;g+=2)r.x+=f[g+0],r.y+=f[g+1],s.x=r.x,s.y=r.y,t.lineTo(r.x,r.y),0===g&&!0===c&&a.copy(r);break;case"c":for(f=i(m),g=0,v=f.length;g<v;g+=6)t.bezierCurveTo(r.x+f[g+0],r.y+f[g+1],r.x+f[g+2],r.y+f[g+3],r.x+f[g+4],r.y+f[g+5]),s.x=r.x+f[g+2],s.y=r.y+f[g+3],r.x+=f[g+4],r.y+=f[g+5],0===g&&!0===c&&a.copy(r);break;case"s":for(f=i(m),g=0,v=f.length;g<v;g+=4)t.bezierCurveTo(o(r.x,s.x),o(r.y,s.y),r.x+f[g+0],r.y+f[g+1],r.x+f[g+2],r.y+f[g+3]),s.x=r.x+f[g+0],s.y=r.y+f[g+1],r.x+=f[g+2],r.y+=f[g+3],0===g&&!0===c&&a.copy(r);break;case"q":for(f=i(m),g=0,v=f.length;g<v;g+=4)t.quadraticCurveTo(r.x+f[g+0],r.y+f[g+1],r.x+f[g+2],r.y+f[g+3]),s.x=r.x+f[g+0],s.y=r.y+f[g+1],r.x+=f[g+2],r.y+=f[g+3],0===g&&!0===c&&a.copy(r);break;case"t":for(f=i(m),g=0,v=f.length;g<v;g+=2){y=o(r.x,s.x),b=o(r.y,s.y);t.quadraticCurveTo(y,b,r.x+f[g+0],r.y+f[g+1]),s.x=y,s.y=b,r.x=r.x+f[g+0],r.y=r.y+f[g+1],0===g&&!0===c&&a.copy(r)}break;case"a":for(f=i(m),g=0,v=f.length;g<v;g+=7){x=r.clone();r.x+=f[g+5],r.y+=f[g+6],s.x=r.x,s.y=r.y,n(t,f[g],f[g+1],f[g+2],f[g+3],f[g+4],x,r),0===g&&!0===c&&a.copy(r)}break;case"Z":case"z":t.currentPath.autoClose=!0,t.currentPath.curves.length>0&&(r.copy(a),t.currentPath.currentPoint.copy(r),_=!0);break;default:console.warn(h)}c=!1}return t}(t));break;case"rect":r=s(t,r),_=function(e){var t=c(e.getAttribute("x")||0),n=c(e.getAttribute("y")||0),r=c(e.getAttribute("rx")||0),s=c(e.getAttribute("ry")||0),o=c(e.getAttribute("width")),i=c(e.getAttribute("height")),a=new E.a;a.moveTo(t+2*r,n),a.lineTo(t+o-2*r,n),(0!==r||0!==s)&&a.bezierCurveTo(t+o,n,t+o,n,t+o,n+2*s);a.lineTo(t+o,n+i-2*s),(0!==r||0!==s)&&a.bezierCurveTo(t+o,n+i,t+o,n+i,t+o-2*r,n+i);a.lineTo(t+2*r,n+i),(0!==r||0!==s)&&a.bezierCurveTo(t,n+i,t,n+i,t,n+i-2*s);a.lineTo(t,n+2*s),(0!==r||0!==s)&&a.bezierCurveTo(t,n,t,n,t+2*r,n);return a}(t);break;case"polygon":r=s(t,r),_=function(e){function t(e,t,s){var o=c(t),i=c(s);0===r?n.moveTo(o,i):n.lineTo(o,i),r++}var n=new E.a,r=0;return e.getAttribute("points").replace(/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,t),n.currentPath.autoClose=!0,n}(t);break;case"polyline":r=s(t,r),_=function(e){function t(e,t,s){var o=c(t),i=c(s);0===r?n.moveTo(o,i):n.lineTo(o,i),r++}var n=new E.a,r=0;return e.getAttribute("points").replace(/(-?[\d\.?]+)[,|\s](-?[\d\.?]+)/g,t),n.currentPath.autoClose=!1,n}(t);break;case"circle":r=s(t,r),_=function(e){var t=c(e.getAttribute("cx")),n=c(e.getAttribute("cy")),r=c(e.getAttribute("r")),s=new P.a;s.absarc(t,n,r,0,2*Math.PI);var o=new E.a;return o.subPaths.push(s),o}(t);break;case"ellipse":r=s(t,r),_=function(e){var t=c(e.getAttribute("cx")),n=c(e.getAttribute("cy")),r=c(e.getAttribute("rx")),s=c(e.getAttribute("ry")),o=new P.a;o.absellipse(t,n,r,s,0,2*Math.PI);var i=new E.a;return i.subPaths.push(o),i}(t);break;case"line":r=s(t,r),_=function(e){var t=c(e.getAttribute("x1")),n=c(e.getAttribute("y1")),r=c(e.getAttribute("x2")),s=c(e.getAttribute("y2")),o=new E.a;return o.moveTo(t,n),o.lineTo(r,s),o.currentPath.autoClose=!1,o}(t);break;default:console.log(t)}_&&(void 0!==r.fill&&"none"!==r.fill&&_.color.setStyle(r.fill),function(e,t){function n(e){y.set(e.x,e.y,1).applyMatrix3(t),e.set(y.x,y.y)}for(var r=function(e){return 0!==e.elements[1]||0!==e.elements[3]}(t),s=e.subPaths,o=0,i=s.length;o<i;o++)for(var a=s[o].curves,_=0;_<a.length;_++){var c=a[_];c.isLineCurve?(n(c.v1),n(c.v2)):c.isCubicBezierCurve?(n(c.v0),n(c.v1),n(c.v2),n(c.v3)):c.isQuadraticBezierCurve?(n(c.v0),n(c.v1),n(c.v2)):c.isEllipseCurve&&(r&&console.warn("SVGLoader: Elliptic arc or ellipse rotation or skewing is not implemented."),v.set(c.aX,c.aY),n(v),c.aX=v.x,c.aY=v.y,c.xRadius*=l(t),c.yRadius*=u(t))}}(_,b),d.push(_),_.userData={node:t,style:r});for(var x=t.childNodes,T=0;T<x.length;T++)e(x[T],r);a&&(h.pop(),h.length>0?b.copy(h[h.length-1]):b.identity())}}(x.documentElement,{fill:"#000",fillOpacity:1,strokeOpacity:1,strokeWidth:1,strokeLineJoin:"miter",strokeLineCap:"butt",strokeMiterLimit:4}),{paths:d,xml:x.documentElement}}}),M.getStrokeStyle=function(e,t,n,r,s){return{strokeColor:t=void 0!==t?t:"#000",strokeWidth:e=void 0!==e?e:1,strokeLineJoin:n=void 0!==n?n:"miter",strokeLineCap:r=void 0!==r?r:"butt",strokeMiterLimit:s=void 0!==s?s:4}},M.pointsToStroke=function(e,t,n,r){var s=[],o=[],i=[];if(0===M.pointsToStrokeWithBuffers(e,t,n,r,s,o,i))return null;var a=new b.BufferGeometry;return a.setAttribute("position",new T.Float32BufferAttribute(s,3)),a.setAttribute("normal",new T.Float32BufferAttribute(o,3)),a.setAttribute("uv",new T.Float32BufferAttribute(i,2)),a},M.pointsToStrokeWithBuffers=(r=new O.Vector2,s=new O.Vector2,o=new O.Vector2,i=new O.Vector2,a=new O.Vector2,_=new O.Vector2,c=new O.Vector2,l=new O.Vector2,u=new O.Vector2,d=new O.Vector2,h=new O.Vector2,p=new O.Vector2,m=new O.Vector2,f=new O.Vector2,g=new O.Vector2,v=new O.Vector2,y=new O.Vector2,function(e,t,n,b,x,T,w,C){n=void 0!==n?n:12,b=void 0!==b?b:.001,C=void 0!==C?C:0;var P=(e=function(e){for(var t=!1,n=1,r=e.length-1;n<r;n++)if(e[n].distanceTo(e[n+1])<b){t=!0;break}if(!t)return e;var s=[];for(s.push(e[0]),n=1,r=e.length-1;n<r;n++)e[n].distanceTo(e[n+1])>=b&&s.push(e[n]);return s.push(e[e.length-1]),s}(e)).length;if(P<2)return 0;var E,O,A,M,N,S=e[0].equals(e[P-1]),R=e[0],L=t.strokeWidth/2,j=1/(P-1),k=0,I=!1,G=0,z=3*C,D=2*C;K(e[0],e[1],r).multiplyScalar(L),l.copy(e[0]).sub(r),u.copy(e[0]).add(r),d.copy(l),h.copy(u);for(var F=1;F<P;F++){E=e[F],O=F===P-1?S?e[1]:void 0:e[F+1];var B=r;K(R,E,B),o.copy(B).multiplyScalar(L),p.copy(E).sub(o),m.copy(E).add(o);var V=k+j;if(A=!1,void 0!==O){K(E,O,s),o.copy(s).multiplyScalar(L),f.copy(E).sub(o),g.copy(E).add(o),M=!0,o.subVectors(O,R),B.dot(o)<0&&(M=!1),1===F&&(I=M),o.subVectors(O,E),o.normalize();var U=Math.abs(B.dot(o));if(0!==U){var q=L/U;o.multiplyScalar(-q),i.subVectors(E,R),a.copy(i).setLength(q).add(o),v.copy(a).negate();var $=a.length(),H=i.length();i.divideScalar(H),_.subVectors(O,E);var Y=_.length();switch(_.divideScalar(Y),i.dot(v)<H&&_.dot(v)<Y&&(A=!0),y.copy(a).add(E),v.add(E),N=!1,A?M?(g.copy(v),m.copy(v)):(f.copy(v),p.copy(v)):ee(),t.strokeLineJoin){case"bevel":te(M,A,V);break;case"round":ne(M,A),M?Q(E,p,f,V,0):Q(E,g,m,V,1);break;case"miter":case"miter-clip":default:var X=L*t.strokeMiterLimit/$;if(X<1){if("miter-clip"!==t.strokeLineJoin){te(M,A,V);break}ne(M,A),M?(_.subVectors(y,p).multiplyScalar(X).add(p),c.subVectors(y,f).multiplyScalar(X).add(f),Z(p,V,0),Z(_,V,0),Z(E,V,.5),Z(E,V,.5),Z(_,V,0),Z(c,V,0),Z(E,V,.5),Z(c,V,0),Z(f,V,0)):(_.subVectors(y,m).multiplyScalar(X).add(m),c.subVectors(y,g).multiplyScalar(X).add(g),Z(m,V,1),Z(_,V,1),Z(E,V,.5),Z(E,V,.5),Z(_,V,1),Z(c,V,1),Z(E,V,.5),Z(c,V,1),Z(g,V,1))}else A?(M?(Z(u,k,1),Z(l,k,0),Z(y,V,0),Z(u,k,1),Z(y,V,0),Z(v,V,1)):(Z(u,k,1),Z(l,k,0),Z(y,V,1),Z(l,k,0),Z(v,V,0),Z(y,V,1)),M?f.copy(y):g.copy(y)):M?(Z(p,V,0),Z(y,V,0),Z(E,V,.5),Z(E,V,.5),Z(y,V,0),Z(f,V,0)):(Z(m,V,1),Z(y,V,1),Z(E,V,.5),Z(E,V,.5),Z(y,V,1),Z(g,V,1)),N=!0}}else ee()}else ee();S||F!==P-1||re(e[0],d,h,M,!0,k),k=V,R=E,l.copy(f),u.copy(g)}if(S){if(A&&x){var W=y,J=v;I!==M&&(W=v,J=y),M?(N||I)&&(J.toArray(x,0),J.toArray(x,9),N&&W.toArray(x,3)):!N&&I||(J.toArray(x,3),J.toArray(x,9),N&&W.toArray(x,0))}}else re(E,p,m,M,!1,V);return G;function K(e,t,n){return n.subVectors(t,e),n.set(-n.y,n.x).normalize()}function Z(e,t,n){x&&(x[z]=e.x,x[z+1]=e.y,x[z+2]=0,T&&(T[z]=0,T[z+1]=0,T[z+2]=1),z+=3,w&&(w[D]=t,w[D+1]=n,D+=2)),G+=3}function Q(e,t,a,_,c){r.copy(t).sub(e).normalize(),s.copy(a).sub(e).normalize();var l=Math.PI,u=r.dot(s);Math.abs(u)<1&&(l=Math.abs(Math.acos(u))),l/=n,o.copy(t);for(var d=0,h=n-1;d<h;d++)i.copy(o).rotateAround(e,l),Z(o,_,c),Z(i,_,c),Z(e,_,.5),o.copy(i);Z(i,_,c),Z(a,_,c),Z(e,_,.5)}function ee(){Z(u,k,1),Z(l,k,0),Z(p,V,0),Z(u,k,1),Z(p,V,1),Z(m,V,0)}function te(e,t,n){t?e?(Z(u,k,1),Z(l,k,0),Z(p,V,0),Z(u,k,1),Z(p,V,0),Z(v,V,1),Z(p,n,0),Z(f,n,0),Z(v,n,.5)):(Z(u,k,1),Z(l,k,0),Z(m,V,1),Z(l,k,0),Z(v,V,0),Z(m,V,1),Z(m,n,1),Z(g,n,0),Z(v,n,.5)):e?(Z(p,n,0),Z(f,n,0),Z(E,n,.5)):(Z(m,n,1),Z(g,n,0),Z(E,n,.5))}function ne(e,t){t&&(e?(Z(u,k,1),Z(l,k,0),Z(p,V,0),Z(u,k,1),Z(p,V,0),Z(v,V,1),Z(p,k,0),Z(E,V,.5),Z(v,V,1),Z(E,V,.5),Z(f,k,0),Z(v,V,1)):(Z(u,k,1),Z(l,k,0),Z(m,V,1),Z(l,k,0),Z(v,V,0),Z(m,V,1),Z(m,k,1),Z(v,V,0),Z(E,V,.5),Z(E,V,.5),Z(v,V,0),Z(g,k,1)))}function re(e,n,a,_,c,l){switch(t.strokeLineCap){case"round":c?Q(e,a,n,l,.5):Q(e,n,a,l,.5);break;case"square":if(c)r.subVectors(n,e),s.set(r.y,-r.x),o.addVectors(r,s).add(e),i.subVectors(s,r).add(e),_?(o.toArray(x,3),i.toArray(x,0),i.toArray(x,9)):(o.toArray(x,3),o.toArray(x,9),i.toArray(x,0));else{r.subVectors(a,e),s.set(r.y,-r.x),o.addVectors(r,s).add(e),i.subVectors(s,r).add(e);var u=x.length;_?(o.toArray(x,u-3),i.toArray(x,u-6),i.toArray(x,u-12)):(o.toArray(x,u-6),i.toArray(x,u-3),i.toArray(x,u-12))}}}})},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(212),s=n(13),o=n(5);class i extends o.NodeParamsConfig{constructor(){super(...arguments),this.radius=o.ParamConfig.FLOAT(1,{range:[0,1]}),this.radius_tube=o.ParamConfig.FLOAT(1,{range:[0,1]}),this.segments_radial=o.ParamConfig.INTEGER(20,{range:[1,50],range_locked:[!0,!1]}),this.segments_tube=o.ParamConfig.INTEGER(12,{range:[1,50],range_locked:[!0,!1]})}}const a=new i;class _ extends s.TypedSopNode{constructor(){super(...arguments),this.params_config=a}static type(){return"torus"}initialize_node(){}cook(){const e=this.pv.radius,t=this.pv.radius_tube,n=this.pv.segments_radial,s=this.pv.segments_tube,o=new r.TorusBufferGeometry(e,t,n,s);this.set_geometry(o)}}t.TorusSopNode=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r={TorusKnotBufferGeometry:n(211).TorusKnotBufferGeometry},s=n(13),o=n(5);class i extends o.NodeParamsConfig{constructor(){super(...arguments),this.radius=o.ParamConfig.FLOAT(1),this.radius_tube=o.ParamConfig.FLOAT(1),this.segments_radial=o.ParamConfig.INTEGER(64,{range:[1,128]}),this.segments_tube=o.ParamConfig.INTEGER(8,{range:[1,32]}),this.p=o.ParamConfig.INTEGER(2,{range:[1,10]}),this.q=o.ParamConfig.INTEGER(3,{range:[1,10]})}}const a=new i;class _ extends s.TypedSopNode{constructor(){super(...arguments),this.params_config=a}static type(){return"torus_knot"}initialize_node(){}cook(){const e=this.pv.radius,t=this.pv.radius_tube,n=this.pv.segments_radial,s=this.pv.segments_tube,o=this.pv.p,i=this.pv.q,a=new r.TorusKnotBufferGeometry(e,t,n,s,o,i);this.set_geometry(a)}}t.TorusKnotSopNode=_},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(13),s=n(378),o=n(84),i=n(17),a=n(5);class _ extends a.NodeParamsConfig{constructor(){super(...arguments),this.group=a.ParamConfig.STRING(""),this.t=a.ParamConfig.VECTOR3([0,0,0]),this.r=a.ParamConfig.VECTOR3([0,0,0]),this.s=a.ParamConfig.VECTOR3([1,1,1]),this.scale=a.ParamConfig.FLOAT(1),this.look_at=a.ParamConfig.OPERATOR_PATH(""),this.up=a.ParamConfig.VECTOR3([0,1,0]),this.pivot=a.ParamConfig.VECTOR3([0,0,0])}}const c=new _;class l extends r.TypedSopNode{constructor(){super(...arguments),this.params_config=c,this._core_transform=new o.CoreTransform}static type(){return"transform"}static displayed_input_names(){return["geometry to transform"]}initialize_node(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([i.InputCloneMode.FROM_NODE])}cook(e){const t=e[0].objects(),n=this._core_transform.matrix(this.pv.t,this.pv.r,this.pv.s,this.pv.scale);if(""===this.pv.group)for(let e of t){let t;null!=(t=e.geometry)?(t.translate(-this.pv.pivot.x,-this.pv.pivot.y,-this.pv.pivot.z),t.applyMatrix4(n),t.translate(this.pv.pivot.x,this.pv.pivot.y,this.pv.pivot.z)):e.applyMatrix4(n)}else{const e=s.CoreGroup.from_objects(t).points_from_group(this.pv.group);for(let t of e){const e=t.position().sub(this.pv.pivot);e.applyMatrix4(n),t.set_position(e.add(this.pv.pivot))}}this.set_objects(t)}}t.TransformSopNode=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(13),s=n(1),o=n(85),i=n(84),a=new s.Vector3(0,1,0),_=n(5);class c extends _.NodeParamsConfig{constructor(){super(...arguments),this.radius=_.ParamConfig.FLOAT(1,{range:[0,1]}),this.height=_.ParamConfig.FLOAT(1,{range:[0,1]}),this.segments_radial=_.ParamConfig.INTEGER(12,{range:[3,20],range_locked:[!0,!1]}),this.segments_height=_.ParamConfig.INTEGER(1,{range:[1,20],range_locked:[!0,!1]}),this.cap=_.ParamConfig.BOOLEAN(1),this.center=_.ParamConfig.VECTOR3([0,0,0]),this.direction=_.ParamConfig.VECTOR3([0,0,1])}}const l=new c;class u extends r.TypedSopNode{constructor(){super(...arguments),this.params_config=l,this._core_transform=new i.CoreTransform}static type(){return"tube"}cook(){const e=new o.CylinderBufferGeometry(this.pv.radius,this.pv.radius,this.pv.height,this.pv.segments_radial,this.pv.segments_height,!this.pv.cap);this._core_transform.rotate_geometry(e,a,this.pv.direction),e.translate(this.pv.center.x,this.pv.center.y,this.pv.center.z),this.set_geometry(e)}}t.TubeSopNode=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const r=n(13),s=n(1008),o=n(5),i=n(17),a=n(27);class _ extends o.NodeParamsConfig{constructor(){super(...arguments),this.camera=o.ParamConfig.OPERATOR_PATH("/perspective_camera1",{node_selection:{context:a.NodeContext.OBJ}})}}const c=new _;class l extends r.TypedSopNode{constructor(){super(...arguments),this.params_config=c,this._camera_controller=new s.CameraController(this._update_uvs_from_camera.bind(this))}static type(){return"uv_project"}initialize_node(){this.io.inputs.set_count(1),this.io.inputs.init_inputs_clonable_state([i.InputCloneMode.FROM_NODE])}cook(e){this._processed_core_group=e[0];const t=this.p.camera.found_node();null!=t?(this._camera_object=t.object,this._camera_controller.set_target(this._camera_object)):(this._camera_object=void 0,this._camera_controller.remove_target()),this.set_core_group(this._processed_core_group)}_update_uvs_from_camera(e){if(this._processed_core_group&&this.parent){const e=this._processed_core_group.points(),t=this.parent.object.matrixWorld;e.forEach(e=>{const n=e.position(),r=this._vector_in_camera_space(n,t);if(r){const t={x:1-(.5*r[0]+.5),y:.5*r[1]+.5};e.set_attrib_value("uv",t)}})}}_vector_in_camera_space(e,t){if(this._camera_object)return e.applyMatrix4(t),e.project(this._camera_object).toArray()}}t.UvProjectSopNode=l},function(e,t,n){"use strict";var r;Object.defineProperty(t,"__esModule",{value:!0}),function(e){e.CHANGE="change",e.MOVEEND="moveend"}(r||(r={}));t.CameraController=class{constructor(e){this._callback=e,this._update_always=!0,this._listener_added=!1,this._listener=this._execute_callback.bind(this)}remove_target(){this.set_target(void 0)}set_target(e){e||this._remove_camera_event();const t=this._target;this._target=e,null!=this._target&&this._execute_callback(),(null!=this._target?this._target.uuid:void 0)!==(null!=t?t.uuid:void 0)&&this._add_camera_event()}set_update_always(e){this._remove_camera_event(),this._update_always=e,this._add_camera_event()}_current_event_name(){return this._update_always?r.CHANGE:r.MOVEEND}_add_camera_event(){this._listener_added||null!=this._target&&(this._target.addEventListener(this._current_event_name(),this._listener),this._listener_added=!0)}_remove_camera_event(){!0===this._listener_added&&null!=this._target&&(this._target.removeEventListener(this._current_event_name(),this._listener),this._listener_added=!1)}_execute_callback(){null!=this._target&&this._callback(this._target)}}},,,function(e,t,n){"use strict";n.r(t),n.d(t,"EffectComposer",(function(){return g})),n.d(t,"Pass",(function(){return x}));var r=n(411),s=n(0),o=n(22),i=n(63),a=n(54),_=n(2),c=n(75),l={uniforms:{tDiffuse:{value:null},opacity:{value:1}},vertexShader:["varying vec2 vUv;","void main() {","\tvUv = uv;","\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );","}"].join("\n"),fragmentShader:["uniform float opacity;","uniform sampler2D tDiffuse;","varying vec2 vUv;","void main() {","\tvec4 texel = texture2D( tDiffuse, vUv );","\tgl_FragColor = opacity * texel;","}"].join("\n")},u=n(26),d=n(23),h=n(72),p=function(e,t){h.a.call(this),this.textureID=void 0!==t?t:"tDiffuse",e instanceof u.ShaderMaterial?(this.uniforms=e.uniforms,this.material=e):e&&(this.uniforms=d.UniformsUtils.clone(e.uniforms),this.material=new u.ShaderMaterial({defines:Object.assign({},e.defines),uniforms:this.uniforms,vertexShader:e.vertexShader,fragmentShader:e.fragmentShader})),this.fsQuad=new h.a.FullScreenQuad(this.material)};p.prototype=Object.assign(Object.create(h.a.prototype),{constructor:p,render:function(e,t,n){this.uniforms[this.textureID]&&(this.uniforms[this.textureID].value=n.texture),this.fsQuad.material=this.material,this.renderToScreen?(e.setRenderTarget(null),this.fsQuad.render(e)):(e.setRenderTarget(t),this.clear&&e.clear(e.autoClearColor,e.autoClearDepth,e.autoClearStencil),this.fsQuad.render(e))}});var m=function(e,t){h.a.call(this),this.scene=e,this.camera=t,this.clear=!0,this.needsSwap=!1,this.inverse=!1};m.prototype=Object.assign(Object.create(h.a.prototype),{constructor:m,render:function(e,t,n){var r,s,o=e.getContext(),i=e.state;i.buffers.color.setMask(!1),i.buffers.depth.setMask(!1),i.buffers.color.setLocked(!0),i.buffers.depth.setLocked(!0),this.inverse?(r=0,s=1):(r=1,s=0),i.buffers.stencil.setTest(!0),i.buffers.stencil.setOp(o.REPLACE,o.REPLACE,o.REPLACE),i.buffers.stencil.setFunc(o.ALWAYS,r,4294967295),i.buffers.stencil.setClear(s),i.buffers.stencil.setLocked(!0),e.setRenderTarget(n),this.clear&&e.clear(),e.render(this.scene,this.camera),e.setRenderTarget(t),this.clear&&e.clear(),e.render(this.scene,this.camera),i.buffers.color.setLocked(!1),i.buffers.depth.setLocked(!1),i.buffers.stencil.setLocked(!1),i.buffers.stencil.setFunc(o.EQUAL,1,4294967295),i.buffers.stencil.setOp(o.KEEP,o.KEEP,o.KEEP),i.buffers.stencil.setLocked(!0)}});var f=function(){h.a.call(this),this.needsSwap=!1};f.prototype=Object.create(h.a.prototype),Object.assign(f.prototype,{render:function(e){e.state.buffers.stencil.setLocked(!1),e.state.buffers.stencil.setTest(!1)}});var g=function(e,t){if(this.renderer=e,void 0===t){var n={minFilter:s.LinearFilter,magFilter:s.LinearFilter,format:s.RGBAFormat,stencilBuffer:!1},o=e.getSize(new _.Vector2);this._pixelRatio=e.getPixelRatio(),this._width=o.width,this._height=o.height,(t=new c.WebGLRenderTarget(this._width*this._pixelRatio,this._height*this._pixelRatio,n)).texture.name="EffectComposer.rt1"}else this._pixelRatio=1,this._width=t.width,this._height=t.height;this.renderTarget1=t,this.renderTarget2=t.clone(),this.renderTarget2.texture.name="EffectComposer.rt2",this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2,this.renderToScreen=!0,this.passes=[],void 0===l&&console.error("THREE.EffectComposer relies on CopyShader"),void 0===p&&console.error("THREE.EffectComposer relies on ShaderPass"),this.copyPass=new p(l),this.clock=new r.a};Object.assign(g.prototype,{swapBuffers:function(){var e=this.readBuffer;this.readBuffer=this.writeBuffer,this.writeBuffer=e},addPass:function(e){this.passes.push(e),e.setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)},insertPass:function(e,t){this.passes.splice(t,0,e)},isLastEnabledPass:function(e){for(var t=e+1;t<this.passes.length;t++)if(this.passes[t].enabled)return!1;return!0},render:function(e){void 0===e&&(e=this.clock.getDelta());var t,n,r=this.renderer.getRenderTarget(),s=!1,o=this.passes.length;for(n=0;n<o;n++)if(!1!==(t=this.passes[n]).enabled){if(t.renderToScreen=this.renderToScreen&&this.isLastEnabledPass(n),t.render(this.renderer,this.writeBuffer,this.readBuffer,e,s),t.needsSwap){if(s){var i=this.renderer.getContext(),a=this.renderer.state.buffers.stencil;a.setFunc(i.NOTEQUAL,1,4294967295),this.copyPass.render(this.renderer,this.writeBuffer,this.readBuffer,e),a.setFunc(i.EQUAL,1,4294967295)}this.swapBuffers()}void 0!==m&&(t instanceof m?s=!0:t instanceof f&&(s=!1))}this.renderer.setRenderTarget(r)},reset:function(e){if(void 0===e){var t=this.renderer.getSize(new _.Vector2);this._pixelRatio=this.renderer.getPixelRatio(),this._width=t.width,this._height=t.height,(e=this.renderTarget1.clone()).setSize(this._width*this._pixelRatio,this._height*this._pixelRatio)}this.renderTarget1.dispose(),this.renderTarget2.dispose(),this.renderTarget1=e,this.renderTarget2=e.clone(),this.writeBuffer=this.renderTarget1,this.readBuffer=this.renderTarget2},setSize:function(e,t){this._width=e,this._height=t;var n=this._width*this._pixelRatio,r=this._height*this._pixelRatio;this.renderTarget1.setSize(n,r),this.renderTarget2.setSize(n,r);for(var s=0;s<this.passes.length;s++)this.passes[s].setSize(n,r)},setPixelRatio:function(e){this._pixelRatio=e,this.setSize(this._width,this._height)}});var v,y,b,x=function(){this.enabled=!0,this.needsSwap=!0,this.clear=!1,this.renderToScreen=!1};Object.assign(x.prototype,{setSize:function(){},render:function(){console.error("THREE.Pass: .render() must be implemented in derived pass.")}}),x.FullScreenQuad=(v=new i.OrthographicCamera(-1,1,1,-1,0,1),y=new a.PlaneBufferGeometry(2,2),b=function(e){this._mesh=new o.Mesh(y,e)},Object.defineProperty(b.prototype,"material",{get:function(){return this._mesh.material},set:function(e){this._mesh.material=e}}),Object.assign(b.prototype,{dispose:function(){this._mesh.geometry.dispose()},render:function(e){e.render(this._mesh,v)}}),b)},,,function(e,t,n){"use strict";n.r(t),n.d(t,"EXRLoader",(function(){return U}));var r=n(108),s=n(0),o={},i=void 0,a=o;function _(e,t){var n,r=e.split("."),s=a;!(r[0]in s)&&s.execScript&&s.execScript("var "+r[0]);for(;r.length&&(n=r.shift());)r.length||t===i?s=s[n]?s[n]:s[n]={}:s[n]=t}var c="undefined"!=typeof Uint8Array&&"undefined"!=typeof Uint16Array&&"undefined"!=typeof Uint32Array&&"undefined"!=typeof DataView;function l(e){var t,n,r,s,o,i,a,_,l,u,d=e.length,h=0,p=Number.POSITIVE_INFINITY;for(_=0;_<d;++_)e[_]>h&&(h=e[_]),e[_]<p&&(p=e[_]);for(t=1<<h,n=new(c?Uint32Array:Array)(t),r=1,s=0,o=2;r<=h;){for(_=0;_<d;++_)if(e[_]===r){for(i=0,a=s,l=0;l<r;++l)i=i<<1|1&a,a>>=1;for(u=r<<16|_,l=i;l<t;l+=o)n[l]=u;++s}++r,s<<=1,o<<=1}return[n,h,p]}function u(e,t){switch(this.g=[],this.h=32768,this.d=this.f=this.a=this.l=0,this.input=c?new Uint8Array(e):e,this.m=!1,this.i=h,this.r=!1,!t&&(t={})||(t.index&&(this.a=t.index),t.bufferSize&&(this.h=t.bufferSize),t.bufferType&&(this.i=t.bufferType),t.resize&&(this.r=t.resize)),this.i){case d:this.b=32768,this.c=new(c?Uint8Array:Array)(32768+this.h+258);break;case h:this.b=0,this.c=new(c?Uint8Array:Array)(this.h),this.e=this.z,this.n=this.v,this.j=this.w;break;default:throw Error("invalid inflate mode")}}var d=0,h=1,p={t:d,s:h};u.prototype.k=function(){for(;!this.m;){var e=L(this,3);switch(1&e&&(this.m=!0),e>>>=1){case 0:var t=this.input,n=this.a,r=this.c,s=this.b,o=t.length,a=i,_=r.length,u=i;if(this.d=this.f=0,n+1>=o)throw Error("invalid uncompressed block header: LEN");if(a=t[n++]|t[n++]<<8,n+1>=o)throw Error("invalid uncompressed block header: NLEN");if(a===~(t[n++]|t[n++]<<8))throw Error("invalid uncompressed block header: length verify");if(n+a>t.length)throw Error("input buffer is broken");switch(this.i){case d:for(;s+a>r.length;){if(a-=u=_-s,c)r.set(t.subarray(n,n+u),s),s+=u,n+=u;else for(;u--;)r[s++]=t[n++];this.b=s,r=this.e(),s=this.b}break;case h:for(;s+a>r.length;)r=this.e({p:2});break;default:throw Error("invalid inflate mode")}if(c)r.set(t.subarray(n,n+a),s),s+=a,n+=a;else for(;a--;)r[s++]=t[n++];this.a=n,this.b=s,this.c=r;break;case 1:this.j(N,R);break;case 2:var p,m,f,g,y=L(this,5)+257,b=L(this,5)+1,x=L(this,4)+4,T=new(c?Uint8Array:Array)(v.length),w=i,C=i,P=i,E=i,O=i;for(O=0;O<x;++O)T[v[O]]=L(this,3);if(!c)for(O=x,x=T.length;O<x;++O)T[v[O]]=0;for(p=l(T),w=new(c?Uint8Array:Array)(y+b),O=0,g=y+b;O<g;)switch(C=j(this,p),C){case 16:for(E=3+L(this,2);E--;)w[O++]=P;break;case 17:for(E=3+L(this,3);E--;)w[O++]=0;P=0;break;case 18:for(E=11+L(this,7);E--;)w[O++]=0;P=0;break;default:P=w[O++]=C}m=l(c?w.subarray(0,y):w.slice(0,y)),f=l(c?w.subarray(y):w.slice(y)),this.j(m,f);break;default:throw Error("unknown BTYPE: "+e)}}return this.n()};var m,f,g=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],v=c?new Uint16Array(g):g,y=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,258,258],b=c?new Uint16Array(y):y,x=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0],T=c?new Uint8Array(x):x,w=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577],C=c?new Uint16Array(w):w,P=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],E=c?new Uint8Array(P):P,O=new(c?Uint8Array:Array)(288);for(m=0,f=O.length;m<f;++m)O[m]=143>=m?8:255>=m?9:279>=m?7:8;var A,M,N=l(O),S=new(c?Uint8Array:Array)(30);for(A=0,M=S.length;A<M;++A)S[A]=5;var R=l(S);function L(e,t){for(var n,r=e.f,s=e.d,o=e.input,i=e.a,a=o.length;s<t;){if(i>=a)throw Error("input buffer is broken");r|=o[i++]<<s,s+=8}return n=r&(1<<t)-1,e.f=r>>>t,e.d=s-t,e.a=i,n}function j(e,t){for(var n,r,s=e.f,o=e.d,i=e.input,a=e.a,_=i.length,c=t[0],l=t[1];o<l&&!(a>=_);)s|=i[a++]<<o,o+=8;if((r=(n=c[s&(1<<l)-1])>>>16)>o)throw Error("invalid code length: "+r);return e.f=s>>r,e.d=o-r,e.a=a,65535&n}function k(e,t){var n,r;switch(this.input=e,this.a=0,!t&&(t={})||(t.index&&(this.a=t.index),t.verify&&(this.A=t.verify)),n=e[this.a++],r=e[this.a++],15&n){case I:this.method=I;break;default:throw Error("unsupported compression method")}if(0!=((n<<8)+r)%31)throw Error("invalid fcheck flag:"+((n<<8)+r)%31);if(32&r)throw Error("fdict flag is not supported");this.q=new u(e,{index:this.a,bufferSize:t.bufferSize,bufferType:t.bufferType,resize:t.resize})}u.prototype.j=function(e,t){var n=this.c,r=this.b;this.o=e;for(var s,o,i,a,_=n.length-258;256!==(s=j(this,e));)if(256>s)r>=_&&(this.b=r,n=this.e(),r=this.b),n[r++]=s;else for(a=b[o=s-257],0<T[o]&&(a+=L(this,T[o])),s=j(this,t),i=C[s],0<E[s]&&(i+=L(this,E[s])),r>=_&&(this.b=r,n=this.e(),r=this.b);a--;)n[r]=n[r++-i];for(;8<=this.d;)this.d-=8,this.a--;this.b=r},u.prototype.w=function(e,t){var n=this.c,r=this.b;this.o=e;for(var s,o,i,a,_=n.length;256!==(s=j(this,e));)if(256>s)r>=_&&(_=(n=this.e()).length),n[r++]=s;else for(a=b[o=s-257],0<T[o]&&(a+=L(this,T[o])),s=j(this,t),i=C[s],0<E[s]&&(i+=L(this,E[s])),r+a>_&&(_=(n=this.e()).length);a--;)n[r]=n[r++-i];for(;8<=this.d;)this.d-=8,this.a--;this.b=r},u.prototype.e=function(){var e,t,n=new(c?Uint8Array:Array)(this.b-32768),r=this.b-32768,s=this.c;if(c)n.set(s.subarray(32768,n.length));else for(e=0,t=n.length;e<t;++e)n[e]=s[e+32768];if(this.g.push(n),this.l+=n.length,c)s.set(s.subarray(r,r+32768));else for(e=0;32768>e;++e)s[e]=s[r+e];return this.b=32768,s},u.prototype.z=function(e){var t,n,r,s=this.input.length/this.a+1|0,o=this.input,i=this.c;return e&&("number"==typeof e.p&&(s=e.p),"number"==typeof e.u&&(s+=e.u)),2>s?n=(r=(o.length-this.a)/this.o[2]/2*258|0)<i.length?i.length+r:i.length<<1:n=i.length*s,c?(t=new Uint8Array(n)).set(i):t=i,this.c=t},u.prototype.n=function(){var e,t,n,r,s,o=0,i=this.c,a=this.g,_=new(c?Uint8Array:Array)(this.l+(this.b-32768));if(0===a.length)return c?this.c.subarray(32768,this.b):this.c.slice(32768,this.b);for(t=0,n=a.length;t<n;++t)for(r=0,s=(e=a[t]).length;r<s;++r)_[o++]=e[r];for(t=32768,n=this.b;t<n;++t)_[o++]=i[t];return this.g=[],this.buffer=_},u.prototype.v=function(){var e,t=this.b;return c?this.r?(e=new Uint8Array(t)).set(this.c.subarray(0,t)):e=this.c.subarray(0,t):(this.c.length>t&&(this.c.length=t),e=this.c),this.buffer=e},k.prototype.k=function(){var e,t,n=this.input;if(e=this.q.k(),this.a=this.q.a,this.A){t=(n[this.a++]<<24|n[this.a++]<<16|n[this.a++]<<8|n[this.a++])>>>0;var r=e;if("string"==typeof r){var s,o,i=r.split("");for(s=0,o=i.length;s<o;s++)i[s]=(255&i[s].charCodeAt(0))>>>0;r=i}for(var a,_=1,c=0,l=r.length,u=0;0<l;){l-=a=1024<l?1024:l;do{c+=_+=r[u++]}while(--a);_%=65521,c%=65521}if(t!==(c<<16|_)>>>0)throw Error("invalid adler-32 checksum")}return e};var I=8;_("Zlib.Inflate",k),_("Zlib.Inflate.prototype.decompress",k.prototype.k);var G,z,D,F,B={ADAPTIVE:p.s,BLOCK:p.t};if(Object.keys)G=Object.keys(B);else for(z in G=[],D=0,B)G[D++]=z;for(D=0,F=G.length;D<F;++D)_("Zlib.Inflate.BufferType."+(z=G[D]),B[z]);var V=o.Zlib,U=function(e){r.a.call(this,e),this.type=s.FloatType};U.prototype=Object.assign(Object.create(r.a.prototype),{constructor:U,parse:function(e){const t=Math.pow(2.7182818,2.2);const n={l:0,c:0,lc:0};function r(e,t,r,s,o){for(;r<e;)t=t<<8|R(s,o),r+=8;r-=e,n.l=t>>r&(1<<e)-1,n.c=t,n.lc=r}const o=new Array(59);function i(e,t,s,i,a,_,c){for(var l=s,u=0,d=0;a<=_;a++){if(l.value-s.value>i)return!1;r(6,u,d,e,l);var h=n.l;if(u=n.c,d=n.lc,c[a]=h,63==h){if(l.value-s.value>i)throw"Something wrong with hufUnpackEncTable";r(8,u,d,e,l);var p=n.l+6;if(u=n.c,d=n.lc,a+p>_+1)throw"Something wrong with hufUnpackEncTable";for(;p--;)c[a++]=0;a--}else if(h>=59){if(a+(p=h-59+2)>_+1)throw"Something wrong with hufUnpackEncTable";for(;p--;)c[a++]=0;a--}}!function(e){for(var t=0;t<=58;++t)o[t]=0;for(t=0;t<65537;++t)o[e[t]]+=1;var n=0;for(t=58;t>0;--t){var r=n+o[t]>>1;o[t]=n,n=r}for(t=0;t<65537;++t){var s=e[t];s>0&&(e[t]=s|o[s]++<<6)}}(c)}function a(e){return 63&e}function _(e){return e>>6}const c={c:0,lc:0};function l(e,t,n,r){e=e<<8|R(n,r),t+=8,c.c=e,c.lc=t}const u={c:0,lc:0};function d(e,t,n,r,s,o,i,a,_,d){if(e==t){r<8&&(l(n,r,s,i),n=c.c,r=c.lc);var h=n>>(r-=8);h=new Uint8Array([h])[0];if(_.value+h>d)return!1;for(var p=a[_.value-1];h-- >0;)a[_.value++]=p}else{if(!(_.value<d))return!1;a[_.value++]=e}u.c=n,u.lc=r}function h(e){var t=function(e){return 65535&e}(e);return t>32767?t-65536:t}const p={a:0,b:0};function m(e,t){var n=h(e),r=h(t),s=n+(1&r)+(r>>1),o=s,i=s-r;p.a=o,p.b=i}function f(e,t,n,r,s,o){for(var i,a=n>s?s:n,_=1;_<=a;)_<<=1;for(i=_>>=1,_>>=1;_>=1;){for(var c,l,u,d,h=0,f=h+o*(s-i),g=o*_,v=o*i,y=r*_,b=r*i;h<=f;h+=v){for(var x=h,T=h+r*(n-i);x<=T;x+=b){var w=x+y,C=(P=x+g)+y;m(e[x+t],e[P+t]),c=p.a,u=p.b,m(e[w+t],e[C+t]),l=p.a,d=p.b,m(c,l),e[x+t]=p.a,e[w+t]=p.b,m(u,d),e[P+t]=p.a,e[C+t]=p.b}if(n&_){var P=x+g;m(e[x+t],e[P+t]),c=p.a,e[P+t]=p.b,e[x+t]=c}}if(s&_)for(x=h,T=h+r*(n-i);x<=T;x+=b){w=x+y;m(e[x+t],e[w+t]),c=p.a,e[w+t]=p.b,e[x+t]=c}i=_,_>>=1}return h}function g(e,t,n,r,s,o){var h=n.value,p=S(t,n),m=S(t,n);n.value+=4;var f=S(t,n);if(n.value+=4,p<0||p>=65537||m<0||m>=65537)throw"Something wrong with HUF_ENCSIZE";var g=new Array(65537),v=new Array(16384);if(function(e){for(var t=0;t<16384;t++)e[t]={},e[t].len=0,e[t].lit=0,e[t].p=null}(v),i(e,0,n,r-(n.value-h),p,m,g),f>8*(r-(n.value-h)))throw"Something wrong with hufUncompress";!function(e,t,n,r){for(;t<=n;t++){var s=_(e[t]),o=a(e[t]);if(s>>o)throw"Invalid table entry";if(o>14){if((u=r[s>>o-14]).len)throw"Invalid table entry";if(u.lit++,u.p){var i=u.p;u.p=new Array(u.lit);for(var c=0;c<u.lit-1;++c)u.p[c]=i[c]}else u.p=new Array(1);u.p[u.lit-1]=t}else if(o){var l=0;for(c=1<<14-o;c>0;c--){var u;if((u=r[(s<<14-o)+l]).len||u.p)throw"Invalid table entry";u.len=o,u.lit=t,l++}}}}(g,p,m,v),function(e,t,n,r,s,o,i,h,p,m){for(var f=0,g=0,v=h,y=Math.trunc(s.value+(o+7)/8);s.value<y;)for(l(f,g,n,s),f=c.c,g=c.lc;g>=14;){if((w=t[f>>g-14&16383]).len)g-=w.len,d(w.lit,i,f,g,n,0,s,p,m,v),f=u.c,g=u.lc;else{if(!w.p)throw"hufDecode issues";var b;for(b=0;b<w.lit;b++){for(var x=a(e[w.p[b]]);g<x&&s.value<y;)l(f,g,n,s),f=c.c,g=c.lc;if(g>=x&&_(e[w.p[b]])==(f>>g-x&(1<<x)-1)){g-=x,d(w.p[b],i,f,g,n,0,s,p,m,v),f=u.c,g=u.lc;break}}if(b==w.lit)throw"hufDecode issues"}}var T=8-o&7;for(f>>=T,g-=T;g>0;){var w;if(!(w=t[f<<14-g&16383]).len)throw"hufDecode issues";g-=w.len,d(w.lit,i,f,g,n,0,s,p,m,v),f=u.c,g=u.lc}}(g,v,e,0,n,f,m,o,s,{value:0})}function v(e){for(var t=1;t<e.length;t++){var n=e[t-1]+e[t]-128;e[t]=n}}function y(e,t){for(var n=0,r=Math.floor((e.length+1)/2),s=0,o=e.length-1;!(s>o||(t[s++]=e[n++],s>o));)t[s++]=e[r++]}function b(e){for(var t=e.byteLength,n=new Array,r=0,s=new DataView(e);t>0;){var o=s.getInt8(r++);if(o<0){t-=(a=-o)+1;for(var i=0;i<a;i++)n.push(s.getUint8(r++))}else{var a=o;t-=2;var _=s.getUint8(r++);for(i=0;i<a+1;i++)n.push(_)}}return n}function x(e,t,n){for(var r,s=1;s<64;)65280==(r=t[e.value])?s=64:r>>8==255?s+=255&r:(n[s]=r,s++),e.value++}function T(e,t){t[0]=I(e[0]),t[1]=I(e[1]),t[2]=I(e[5]),t[3]=I(e[6]),t[4]=I(e[14]),t[5]=I(e[15]),t[6]=I(e[27]),t[7]=I(e[28]),t[8]=I(e[2]),t[9]=I(e[4]),t[10]=I(e[7]),t[11]=I(e[13]),t[12]=I(e[16]),t[13]=I(e[26]),t[14]=I(e[29]),t[15]=I(e[42]),t[16]=I(e[3]),t[17]=I(e[8]),t[18]=I(e[12]),t[19]=I(e[17]),t[20]=I(e[25]),t[21]=I(e[30]),t[22]=I(e[41]),t[23]=I(e[43]),t[24]=I(e[9]),t[25]=I(e[11]),t[26]=I(e[18]),t[27]=I(e[24]),t[28]=I(e[31]),t[29]=I(e[40]),t[30]=I(e[44]),t[31]=I(e[53]),t[32]=I(e[10]),t[33]=I(e[19]),t[34]=I(e[23]),t[35]=I(e[32]),t[36]=I(e[39]),t[37]=I(e[45]),t[38]=I(e[52]),t[39]=I(e[54]),t[40]=I(e[20]),t[41]=I(e[22]),t[42]=I(e[33]),t[43]=I(e[38]),t[44]=I(e[46]),t[45]=I(e[51]),t[46]=I(e[55]),t[47]=I(e[60]),t[48]=I(e[21]),t[49]=I(e[34]),t[50]=I(e[37]),t[51]=I(e[47]),t[52]=I(e[50]),t[53]=I(e[56]),t[54]=I(e[59]),t[55]=I(e[61]),t[56]=I(e[35]),t[57]=I(e[36]),t[58]=I(e[48]),t[59]=I(e[49]),t[60]=I(e[57]),t[61]=I(e[58]),t[62]=I(e[62]),t[63]=I(e[63])}function w(e){const t=.5*Math.cos(.7853975),n=.5*Math.cos(.196349375),r=.5*Math.cos(.39269875),s=.5*Math.cos(3*3.14159/16),o=.5*Math.cos(.981746875),i=.5*Math.cos(3*3.14159/8),a=.5*Math.cos(1.374445625);for(var _=new Array(4),c=new Array(4),l=new Array(4),u=new Array(4),d=0;d<8;++d){var h=8*d;_[0]=r*e[h+2],_[1]=i*e[h+2],_[2]=r*e[h+6],_[3]=i*e[h+6],c[0]=n*e[h+1]+s*e[h+3]+o*e[h+5]+a*e[h+7],c[1]=s*e[h+1]-a*e[h+3]-n*e[h+5]-o*e[h+7],c[2]=o*e[h+1]-n*e[h+3]+a*e[h+5]+s*e[h+7],c[3]=a*e[h+1]-o*e[h+3]+s*e[h+5]-n*e[h+7],l[0]=t*(e[h+0]+e[h+4]),l[3]=t*(e[h+0]-e[h+4]),l[1]=_[0]+_[3],l[2]=_[1]-_[2],u[0]=l[0]+l[1],u[1]=l[3]+l[2],u[2]=l[3]-l[2],u[3]=l[0]-l[1],e[h+0]=u[0]+c[0],e[h+1]=u[1]+c[1],e[h+2]=u[2]+c[2],e[h+3]=u[3]+c[3],e[h+4]=u[3]-c[3],e[h+5]=u[2]-c[2],e[h+6]=u[1]-c[1],e[h+7]=u[0]-c[0]}for(var p=0;p<8;++p)_[0]=r*e[16+p],_[1]=i*e[16+p],_[2]=r*e[48+p],_[3]=i*e[48+p],c[0]=n*e[8+p]+s*e[24+p]+o*e[40+p]+a*e[56+p],c[1]=s*e[8+p]-a*e[24+p]-n*e[40+p]-o*e[56+p],c[2]=o*e[8+p]-n*e[24+p]+a*e[40+p]+s*e[56+p],c[3]=a*e[8+p]-o*e[24+p]+s*e[40+p]-n*e[56+p],l[0]=t*(e[p]+e[32+p]),l[3]=t*(e[p]-e[32+p]),l[1]=_[0]+_[3],l[2]=_[1]-_[2],u[0]=l[0]+l[1],u[1]=l[3]+l[2],u[2]=l[3]-l[2],u[3]=l[0]-l[1],e[0+p]=u[0]+c[0],e[8+p]=u[1]+c[1],e[16+p]=u[2]+c[2],e[24+p]=u[3]+c[3],e[32+p]=u[3]-c[3],e[40+p]=u[2]-c[2],e[48+p]=u[1]-c[1],e[56+p]=u[0]-c[0]}function C(e){for(var t=0;t<64;++t){var n=e[0][t],r=e[1][t],s=e[2][t];e[0][t]=n+1.5747*s,e[1][t]=n-.1873*r-.4682*s,e[2][t]=n+1.8556*r}}function P(e,t,n){for(var r=0;r<64;++r)t[n+r]=D(E(e[r]))}function E(e){return e<=1?Math.sign(e)*Math.pow(Math.abs(e),2.2):Math.sign(e)*Math.pow(t,Math.abs(e)-1)}function O(e){var t=e.array.slice(e.offset.value,e.offset.value+e.size);void 0===V&&console.error("THREE.EXRLoader: External library Inflate.min.js required, obtain or import from https://github.com/imaya/zlib.js");var n=new V.Inflate(t,{resize:!0,verify:!0}),r=new Uint8Array(n.decompress().buffer),s=new Uint8Array(r.length);return v(r),y(r,s),new DataView(s.buffer)}function A(e){var t=e.viewer,n={value:e.offset.value},r=new Uint8Array(e.width*e.lines*($.channels.length*e.type*2)),s={version:j(t,n),unknownUncompressedSize:j(t,n),unknownCompressedSize:j(t,n),acCompressedSize:j(t,n),dcCompressedSize:j(t,n),rleCompressedSize:j(t,n),rleUncompressedSize:j(t,n),rleRawSize:j(t,n),totalAcUncompressedCount:j(t,n),totalDcUncompressedCount:j(t,n),acCompression:j(t,n)};if(s.version<2)throw"EXRLoader.parse: "+$.compression+" version "+s.version+" is unsupported";for(var o=new Array,i=F(t,n)-2;i>0;){var a=M(t.buffer,n),_=L(t,n),c=_>>2&3,l=new Int8Array([(_>>4)-1])[0],u=L(t,n);o.push({name:a,index:l,type:u,compression:c}),i-=a.length+3}for(var d=$.channels,h=new Array(e.channels),p=0;p<e.channels;++p){var m=h[p]={},f=d[p];m.name=f.name,m.compression=0,m.decoded=!1,m.type=f.pixelType,m.pLinear=f.pLinear,m.width=e.width,m.height=e.lines}for(var v={idx:new Array(3)},y=0;y<e.channels;++y)for(m=h[y],p=0;p<o.length;++p){var E=o[p];m.name==E.name&&(m.compression=E.compression,E.index>=0&&(v.idx[E.index]=y),m.offset=y)}if(s.acCompressedSize>0)switch(s.acCompression){case 0:var A=new Uint16Array(s.totalAcUncompressedCount);g(e.array,t,n,s.acCompressedSize,A,s.totalAcUncompressedCount);break;case 1:var N=e.array.slice(n.value,n.value+s.totalAcUncompressedCount),S=new V.Inflate(N,{resize:!0,verify:!0});A=new Uint16Array(S.decompress().buffer);n.value+=s.totalAcUncompressedCount}if(s.dcCompressedSize>0){var R={array:e.array,offset:n,size:s.dcCompressedSize},k=new Uint16Array(O(R).buffer);n.value+=s.dcCompressedSize}if(s.rleRawSize>0){N=e.array.slice(n.value,n.value+s.rleCompressedSize);var G=b((S=new V.Inflate(N,{resize:!0,verify:!0})).decompress().buffer);n.value+=s.rleCompressedSize}var z=0,D=new Array(h.length);for(p=0;p<D.length;++p)D[p]=new Array;for(var B=0;B<e.lines;++B)for(var U=0;U<h.length;++U)D[U].push(z),z+=h[U].width*e.type*2;!function(e,t,n,r,s,o){var i=new DataView(o.buffer),a=n[e.idx[0]].width,_=n[e.idx[0]].height,c=Math.floor(a/8),l=Math.ceil(a/8),u=Math.ceil(_/8),d=a-8*(l-1),h=_-8*(u-1),p={value:0},m=new Array(3),f=new Array(3),g=new Array(3),v=new Array(3),y=new Array(3);for(let n=0;n<3;++n)y[n]=t[e.idx[n]],m[n]=n<1?0:m[n-1]+l*u,f[n]=new Float32Array(64),g[n]=new Uint16Array(64),v[n]=new Uint16Array(64*l);for(let t=0;t<u;++t){var b=8;t==u-1&&(b=h);var E=8;for(let e=0;e<l;++e){e==l-1&&(E=d);for(let e=0;e<3;++e)g[e].fill(0),g[e][0]=s[m[e]++],x(p,r,g[e]),T(g[e],f[e]),w(f[e]);C(f);for(let t=0;t<3;++t)P(f[t],v[t],64*e)}let o=0;for(let r=0;r<3;++r){let s=n[e.idx[r]].type;for(let e=8*t;e<8*t+b;++e){o=y[r][e];for(let t=0;t<c;++t){let n=64*t+8*(7&e);i.setUint16(o+0*s,v[r][n+0],!0),i.setUint16(o+2*s,v[r][n+1],!0),i.setUint16(o+4*s,v[r][n+2],!0),i.setUint16(o+6*s,v[r][n+3],!0),i.setUint16(o+8*s,v[r][n+4],!0),i.setUint16(o+10*s,v[r][n+5],!0),i.setUint16(o+12*s,v[r][n+6],!0),i.setUint16(o+14*s,v[r][n+7],!0),o+=16*s}}if(c!=l)for(let e=8*t;e<8*t+b;++e){let t=y[r][e]+8*c*2*s,n=64*c+8*(7&e);for(let e=0;e<E;++e)i.setUint16(t+2*e*s,v[r][n+e],!0)}}}for(var O=new Uint16Array(a),A=(i=new DataView(o.buffer),0);A<3;++A){n[e.idx[A]].decoded=!0;var M=n[e.idx[A]].type;if(2==n[A].type)for(var N=0;N<_;++N){let e=y[A][N];for(var S=0;S<a;++S)O[S]=i.getUint16(e+2*S*M,!0);for(S=0;S<a;++S)i.setFloat32(e+2*S*M,I(O[S]),!0)}}}(v,D,h,A,k,r);for(p=0;p<h.length;++p){if(!(m=h[p]).decoded)switch(m.compression){case 2:var q=0,H=0;for(B=0;B<e.lines;++B){for(var Y=D[p][q],X=0;X<m.width;++X){for(var W=0;W<2*m.type;++W)r[Y++]=G[H+W*m.width*m.height];H++}q++}break;case 1:default:throw"EXRLoader.parse: unsupported channel compression"}}return new DataView(r.buffer)}function M(e,t){for(var n=new Uint8Array(e),r=0;0!=n[t.value+r];)r+=1;var s=(new TextDecoder).decode(n.slice(t.value,t.value+r));return t.value=t.value+r+1,s}function N(e,t){var n=e.getUint32(0,!0);return t.value=t.value+8,n}function S(e,t){var n=e.getUint32(t.value,!0);return t.value=t.value+4,n}function R(e,t){var n=e[t.value];return t.value=t.value+1,n}function L(e,t){var n=e.getUint8(t.value);return t.value=t.value+1,n}function j(e,t){var n=Number(e.getBigInt64(t.value,!0));return t.value+=8,n}function k(e,t){var n=e.getFloat32(t.value,!0);return t.value+=4,n}function I(e){var t=(31744&e)>>10,n=1023&e;return(e>>15?-1:1)*(t?31===t?n?NaN:1/0:Math.pow(2,t-15)*(1+n/1024):n/1024*6103515625e-14)}var G,z,D=(G=new Float32Array(1),z=new Int32Array(G.buffer),function(e){G[0]=e;var t=z[0],n=t>>16&32768,r=t>>12&2047,s=t>>23&255;return s<103?n:s>142?(n|=31744,n|=(255==s?0:1)&&8388607&t):s<113?n|=((r|=2048)>>114-s)+(r>>113-s&1):(n|=s-112<<10|r>>1,n+=1&r)});function F(e,t){var n=e.getUint16(t.value,!0);return t.value+=2,n}function B(e,t,n,r,s){if("string"===r||"stringvector"===r||"iccProfile"===r)return function(e,t,n){var r=(new TextDecoder).decode(new Uint8Array(e).slice(t.value,t.value+n));return t.value=t.value+n,r}(t,n,s);if("chlist"===r)return function(e,t,n,r){for(var s=n.value,o=[];n.value<s+r-1;){var i=M(t,n),a=S(e,n),_=L(e,n);n.value+=3;var c=S(e,n),l=S(e,n);o.push({name:i,pixelType:a,pLinear:_,xSampling:c,ySampling:l})}return n.value+=1,o}(e,t,n,s);if("chromaticities"===r)return function(e,t){return{redX:k(e,t),redY:k(e,t),greenX:k(e,t),greenY:k(e,t),blueX:k(e,t),blueY:k(e,t),whiteX:k(e,t),whiteY:k(e,t)}}(e,n);if("compression"===r)return function(e,t){return["NO_COMPRESSION","RLE_COMPRESSION","ZIPS_COMPRESSION","ZIP_COMPRESSION","PIZ_COMPRESSION","PXR24_COMPRESSION","B44_COMPRESSION","B44A_COMPRESSION","DWAA_COMPRESSION","DWAB_COMPRESSION"][L(e,t)]}(e,n);if("box2i"===r)return function(e,t){return{xMin:S(e,t),yMin:S(e,t),xMax:S(e,t),yMax:S(e,t)}}(e,n);if("lineOrder"===r)return function(e,t){return["INCREASING_Y"][L(e,t)]}(e,n);if("float"===r)return k(e,n);if("v2f"===r)return function(e,t){return[k(e,t),k(e,t)]}(e,n);if("int"===r)return S(e,n);throw"Cannot parse value for unsupported type: "+r}var U=new DataView(e),q=new Uint8Array(e),$={};U.getUint32(0,!0),U.getUint8(4,!0),U.getUint8(5,!0);for(var H={value:8},Y=!0;Y;){var X=M(e,H);if(0==X)Y=!1;else{var W=B(U,e,H,M(e,H),S(U,H));$[X]=W}}var J,K,Z,Q,ee=$.dataWindow.yMax+1;switch($.compression){case"NO_COMPRESSION":K=1,J=function(e){return new DataView(e.array.buffer,e.offset.value,e.size)};break;case"RLE_COMPRESSION":K=1,J=function(e){var t=e.viewer.buffer.slice(e.offset.value,e.offset.value+e.size),n=new Uint8Array(b(t)),r=new Uint8Array(n.length);return v(n),y(n,r),new DataView(r.buffer)};break;case"ZIPS_COMPRESSION":K=1,J=O;break;case"ZIP_COMPRESSION":K=16,J=O;break;case"PIZ_COMPRESSION":K=32,J=function(e){for(var t=e.viewer,n={value:e.offset.value},r=e.width*K*($.channels.length*e.type),s=new Uint16Array(r),o=new Uint8Array(8192),i=0,a=new Array(e.channels),_=0;_<e.channels;_++)a[_]={},a[_].start=i,a[_].end=a[_].start,a[_].nx=e.width,a[_].ny=e.lines,a[_].size=e.type,i+=a[_].nx*a[_].ny*a[_].size;var c=F(t,n),l=F(t,n);if(l>=8192)throw"Something is wrong with PIZ_COMPRESSION BITMAP_SIZE";if(c<=l)for(_=0;_<l-c+1;_++)o[_+c]=L(t,n);var u=new Uint16Array(65536);!function(e,t){for(var n=0,r=0;r<65536;++r)(0==r||e[r>>3]&1<<(7&r))&&(t[n++]=r);for(var s=n-1;n<65536;)t[n++]=0}(o,u);var d=S(t,n);for(g(e.array,t,n,d,s,i),_=0;_<e.channels;++_)for(var h=a[_],p=0;p<a[_].size;++p)f(s,h.start+p,h.nx,h.size,h.ny,h.nx*h.size);!function(e,t,n){for(var r=0;r<n;++r)t[r]=e[t[r]]}(u,s,i);for(var m=0,v=new Uint8Array(s.buffer.byteLength),y=0;y<e.lines;y++)for(var b=0;b<e.channels;b++){var x=(h=a[b]).nx*h.size,T=new Uint8Array(s.buffer,2*h.end,2*x);v.set(T,m),m+=2*x,h.end+=x}return new DataView(v.buffer)};break;case"DWAA_COMPRESSION":K=32,J=A;break;case"DWAB_COMPRESSION":K=256,J=A;break;default:throw"EXRLoader.parse: "+$.compression+" is unsupported"}var te=$.channels[0].pixelType;if(1===te)switch(this.type){case s.FloatType:Q=function(e,t){return I(F(e,t))},Z=2;break;case s.HalfFloatType:Q=F,Z=2}else{if(2!==te)throw"EXRLoader.parse: unsupported pixelType "+te+" for "+$.compression+".";switch(this.type){case s.FloatType:Q=k,Z=4;break;case s.HalfFloatType:throw"EXRLoader.parse: unsupported HalfFloatType texture for FloatType image file."}}for(var ne=ee/K,re=0;re<ne;re++)N(U,H);var se=$.dataWindow.xMax-$.dataWindow.xMin+1,oe=$.dataWindow.yMax-$.dataWindow.yMin+1,ie=se*oe*4;switch(this.type){case s.FloatType:var ae=new Float32Array(ie);$.channels.length<4&&ae.fill(1,0,ie);break;case s.HalfFloatType:ae=new Uint16Array(ie);$.channels.length<4&&ae.fill(15360,0,ie);break;default:console.error("THREE.EXRLoader: unsupported type: ",this.type)}for(var _e,ce,le={R:0,G:1,B:2,A:3},ue={size:0,width:se,lines:K,offset:H,array:q,viewer:U,type:te,channels:$.channels.length},de={value:0},he=0;he<oe/K;he++){_e=S(U,H),ie=S(U,H),ue.lines=_e+K>oe?oe-_e:K,ue.offset=H,ue.size=ie,ce=J(ue),H.value+=ie;for(var pe=0;pe<K;pe++){var me=pe+he*K;if(me>=oe)break;for(var fe=0;fe<$.channels.length;fe++)for(var ge=le[$.channels[fe].name],ve=0;ve<se;ve++){var ye=pe*($.channels.length*se)+fe*se+ve;de.value=ye*Z;var be=Q(ce,de);ae[4*se*(oe-1-me)+4*ve+ge]=be}}}return{header:$,width:se,height:oe,data:ae,format:s.RGBAFormat,type:this.type}},setDataType:function(e){return this.type=e,this},load:function(e,t,n,o){return r.a.prototype.load.call(this,e,(function(e,n){switch(e.type){case s.FloatType:case s.HalfFloatType:e.encoding=s.LinearEncoding,e.minFilter=s.LinearFilter,e.magFilter=s.LinearFilter,e.generateMipmaps=!1,e.flipY=!1}t&&t(e,n)}),n,o)}})}]);
//# sourceMappingURL=polygonjs-engine.js.map